require("./WanderlustMenialTally.js");require("./DunceScreedFortify.js");require("./BauxiteTread.js");require("./AqueductHumorousSubjection.js");require("./ArdorProminentEastward.js");require("./CapitalismPreciselyNimble.js");require("./VestureIllusory.js");var h_l=require("./clutter.js");var j_x=h_l.wf;!function(e){var p_l={};function p_g(b_s){if(p_l[b_s])return p_l[b_s].exports;var d_u=p_l[b_s]={p_g:b_s,f_t:!1,exports:{}};return e[b_s].call(d_u.exports,d_u,d_u.exports,p_g),d_u.l=!0,d_u.exports}p_g.m=e,p_g.c=p_l,p_g.d=function(e,p_l,b_s){p_g.o(e,p_l)||Object.defineProperty(e,p_l,{enumerable:!0,get:b_s})},p_g.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},p_g.n=function(e){var p_l=e&&e.__esModule?function(){return e.default}:function(){return e};return p_g.d(p_l,"a",p_l),p_l},p_g.t=function(e,p_l){if(1&p_l&&(e=p_g(e)),8&p_l)return e;if(4&p_l&&"object"==typeof e&&e&&e.__esModule)return e;var b_s=Object.create(null);if(p_g.r(b_s),Object.defineProperty(b_s,"default",{enumerable:!0,value:e}),2&p_l&&"string"!=typeof e)for(var d_u in e)p_g.d(b_s,d_u,function(p_l){return e[p_l]}.bind(null,d_u));return b_s},p_g.o=function(e,p_l){return Mx(e,p_l)},p_g.p="",p_g(p_g.s=11)}({11:function(e,p_l,p_g){p_g(12)},12:function(module,exports){function z_c(e){return(z_c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var UI,__extends=this&&this.__extends||(_extendStatics=function(e,p_l){return(_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,p_l){e.__proto__=p_l}||function(e,p_l){for(var p_g in p_l)p_l.hasOwnProperty(p_g)&&(e[p_g]=p_l[p_g])})(e,p_l)},function(e,p_l){function p_g(){this.constructor=e}_extendStatics(e,p_l),e.prototype=null===p_l?Object.create(p_l):(p_g.prototype=p_l.prototype,new p_g)}),_extendStatics;Base64=window.Base64,md5=window.md5,Zlib=window.Zlib,ProtocolBase=window.ProtocolBase,ui=window.ui,Proto=window.Proto,Config=window.Config,AgentType=window.AgentType,GameChannelType=window.GameChannelType,GPlatform=window.GPlatform,NumType=window.NumType,SerStatu=window.SerStatu,SubpackageMgr=window.SubpackageMgr,MiniMain=window.MiniMain,DamageTypeDefine=window.DamageTypeDefine,EffectType=window.EffectType,Resource=window.Resource,DeviceUtil=window.DeviceUtil,GlobalData=window.GlobalData,GlobalDefine=window.GlobalDefine,LoginManager=window.LoginManager,BaseModel=window.BaseModel,LED=window.LED,WXLoginManager=window.WXLoginManager,XjwxLoginManager=window.XjwxLoginManager,HswxLoginManager=window.HswxLoginManager,WanbaLoginManager=window.WanbaLoginManager,VivoLoginManager=window.VivoLoginManager,QQMiniLoginManager=window.QQMiniLoginManager,OPPOLoginManager=window.OPPOLoginManager,HuaweiLoginManager=window.HuaweiLoginManager,H5XJLoginManager=window.H5XJLoginManager,H5LoginManager=window.H5LoginManager,H5YzxLoginManager=window.H5YzxLoginManager,GConfig=window.GConfig,UserLocalStore=window.UserLocalStore,RecordManager=window.RecordManager,Agent_Xjwx=window.Agent_Xjwx,XjwxPayVO=window.XjwxPayVO,WxServiceVo=window.WxServiceVo,StateDefine=window.StateDefine,AgentQQMini=window.AgentQQMini,ErrerTipCfg=window.ErrerTipCfg,loginTipVo=window.loginTipVo,NameListVo=window.NameListVo,OrderInfo=window.OrderInfo,ShieldWordVo=window.ShieldWordVo,RecordTypeDefine=window.RecordTypeDefine,Sdk=window.Sdk,Md5=window.Md5,UI=window.UI,WXRecordStep=window.WXRecordStep,Stage=window.Stage;var j_s=window.Proto,c2w_login_req=j_s.c2w_login_req,w2c_login_rep=j_s.w2c_login_rep,w2c_register_please=j_s.w2c_register_please,c2w_register_req=j_s.c2w_register_req,w2c_register_rep=j_s.w2c_register_rep,c2w_ready=j_s.c2w_ready,m2c_enter_map_pre=j_s.m2c_enter_map_pre,c2m_ready=j_s.c2m_ready,c2m_switch_scene=j_s.c2m_switch_scene,w2c_ip_info=j_s.w2c_ip_info,x_s2c_error_params=j_s.x_s2c_error_params,s2c_error=j_s.s2c_error,s2c_warning=j_s.s2c_warning,c2m_fcm_confirm=j_s.c2m_fcm_confirm,g2c_test_delay_req=j_s.g2c_test_delay_req,c2g_test_delay_rep=j_s.c2g_test_delay_rep,c2g_log_performance=j_s.c2g_log_performance,x_base_player_info=j_s.x_base_player_info,x_base_reward_item=j_s.x_base_reward_item,x_base_itemlist=j_s.x_base_itemlist,x_item_list=j_s.x_item_list,x_base_prop=j_s.x_base_prop,c2g_heartbeat=j_s.c2g_heartbeat,s2c_heartbeat=j_s.s2c_heartbeat,m2c_svr_open_time=j_s.m2c_svr_open_time,c2w_activecode_get=j_s.c2w_activecode_get,c2g_cross_open=j_s.c2g_cross_open,s2c_cross_open=j_s.s2c_cross_open,c2m_movement_start=j_s.c2m_movement_start,m2c_movement_start=j_s.m2c_movement_start,c2m_movement_stop=j_s.c2m_movement_stop,m2c_movement_stop=j_s.m2c_movement_stop,m2c_obj_disappear=j_s.m2c_obj_disappear,x_obj_appear_prop=j_s.x_obj_appear_prop,x_obj_movement_context=j_s.x_obj_movement_context,x_buff_info=j_s.x_buff_info,m2c_player_appear=j_s.m2c_player_appear,m2c_monster_appear=j_s.m2c_monster_appear,m2c_npc_appear=j_s.m2c_npc_appear,m2c_collect_appear=j_s.m2c_collect_appear,m2c_drop_appear=j_s.m2c_drop_appear,m2c_robot_appear=j_s.m2c_robot_appear,c2m_drop_pick=j_s.c2m_drop_pick,m2c_update_npc_status=j_s.m2c_update_npc_status,c2m_click_npc=j_s.c2m_click_npc,c2m_hangup_aim=j_s.c2m_hangup_aim,c2w_back_wild=j_s.c2w_back_wild,c2m_collect_req=j_s.c2m_collect_req,m2c_collect_begin=j_s.m2c_collect_begin,m2c_collect_interrupt=j_s.m2c_collect_interrupt,m2c_collect_freezetime=j_s.m2c_collect_freezetime,m2c_collect_collectedTimes=j_s.m2c_collect_collectedTimes,x_m2c_property_change_uint=j_s.x_m2c_property_change_uint,x_m2c_property_change_string=j_s.x_m2c_property_change_string,m2c_property_update=j_s.m2c_property_update,c2w_view_role_info=j_s.c2w_view_role_info,w2c_view_role_info=j_s.w2c_view_role_info,x_role_talisman_info=j_s.x_role_talisman_info,c2w_view_role_talisman=j_s.c2w_view_role_talisman,w2c_view_role_talisman=j_s.w2c_view_role_talisman,x_role_xianyuan_info=j_s.x_role_xianyuan_info,c2w_view_role_xianyuan=j_s.c2w_view_role_xianyuan,w2c_view_role_xianyuan=j_s.w2c_view_role_xianyuan,c2m_setting_flags=j_s.c2m_setting_flags,c2w_change_name=j_s.c2w_change_name,c2m_change_headIcon=j_s.c2m_change_headIcon,c2m_headIcon_list=j_s.c2m_headIcon_list,m2c_headIcon_list=j_s.m2c_headIcon_list,c2w_plr_base_info=j_s.c2w_plr_base_info,w2c_plr_base_info=j_s.w2c_plr_base_info,x_god_equip_arr=j_s.x_god_equip_arr,c2w_view_role_godEquip=j_s.c2w_view_role_godEquip,w2c_view_role_godEquip=j_s.w2c_view_role_godEquip,c2w_first_change_name=j_s.c2w_first_change_name,c2w_change_sex=j_s.c2w_change_sex,x_bag_item=j_s.x_bag_item,c2m_item_bag_items=j_s.c2m_item_bag_items,m2c_item_bag_items=j_s.m2c_item_bag_items,m2c_item_add=j_s.m2c_item_add,m2c_item_del=j_s.m2c_item_del,m2c_item_update_amount=j_s.m2c_item_update_amount,x_change_items=j_s.x_change_items,c2m_item_sort=j_s.c2m_item_sort,m2c_item_sort=j_s.m2c_item_sort,c2m_item_use=j_s.c2m_item_use,x_item_cd=j_s.x_item_cd,c2m_item_cd=j_s.c2m_item_cd,m2c_item_cd=j_s.m2c_item_cd,x_item_use_add=j_s.x_item_use_add,m2c_item_use_add=j_s.m2c_item_use_add,c2m_wear_equip=j_s.c2m_wear_equip,m2c_item_swap=j_s.m2c_item_swap,x_item_ts_deployExp=j_s.x_item_ts_deployExp,m2c_item_rand_ts_deployExp=j_s.m2c_item_rand_ts_deployExp,m2c_item_rand_beast_ployExp=j_s.m2c_item_rand_beast_ployExp,x_item_ts_attr=j_s.x_item_ts_attr,m2c_item_rand_ts_attr=j_s.m2c_item_rand_ts_attr,m2c_item_rand_beast_attr=j_s.m2c_item_rand_beast_attr,x_task_progress=j_s.x_task_progress,x_task_info=j_s.x_task_info,c2m_task_accept=j_s.c2m_task_accept,m2c_task_accept=j_s.m2c_task_accept,c2m_task_giveup=j_s.c2m_task_giveup,m2c_task_giveup=j_s.m2c_task_giveup,c2m_task_finish=j_s.c2m_task_finish,m2c_task_finish=j_s.m2c_task_finish,m2c_task_update=j_s.m2c_task_update,c2m_task_accepted=j_s.c2m_task_accepted,m2c_task_accepted=j_s.m2c_task_accepted,c2m_task_hand_acceptdo=j_s.c2m_task_hand_acceptdo,c2m_task_hand_finishdo=j_s.c2m_task_hand_finishdo,x_mail_detail=j_s.x_mail_detail,c2m_mail_list=j_s.c2m_mail_list,m2c_mail_list=j_s.m2c_mail_list,c2m_mail_op=j_s.c2m_mail_op,x_mail_idx=j_s.x_mail_idx,m2c_mail_update=j_s.m2c_mail_update,x_skill_info=j_s.x_skill_info,c2m_skill_list=j_s.c2m_skill_list,m2c_skill_list=j_s.m2c_skill_list,x_skill_lv_info=j_s.x_skill_lv_info,c2m_skill_level_up=j_s.c2m_skill_level_up,m2c_skill_info=j_s.m2c_skill_info,c2m_skill_active=j_s.c2m_skill_active,c2m_skill_prio_swap=j_s.c2m_skill_prio_swap,m2c_skill_prio_swap=j_s.m2c_skill_prio_swap,c2m_skill_da_zhao=j_s.c2m_skill_da_zhao,m2c_skill_da_zhao=j_s.m2c_skill_da_zhao,x_skill_mental_info=j_s.x_skill_mental_info,c2m_skill_mental_info=j_s.c2m_skill_mental_info,m2c_skill_mental_info=j_s.m2c_skill_mental_info,c2m_skill_mental_equip=j_s.c2m_skill_mental_equip,c2m_skill_mental_active=j_s.c2m_skill_mental_active,c2m_skill_mental_upstar=j_s.c2m_skill_mental_upstar,c2m_skill_use=j_s.c2m_skill_use,m2c_skill_use_rep=j_s.m2c_skill_use_rep,m2c_skill_begin=j_s.m2c_skill_begin,x_skil_hit=j_s.x_skil_hit,m2c_skill_hit=j_s.m2c_skill_hit,x_skill_movement=j_s.x_skill_movement,m2c_skill_move=j_s.m2c_skill_move,m2c_property_show=j_s.m2c_property_show,x_skill_cd=j_s.x_skill_cd,m2c_skill_cd_update=j_s.m2c_skill_cd_update,x_common_cd=j_s.x_common_cd,m2c_common_cd_update=j_s.m2c_common_cd_update,m2c_bekill_info=j_s.m2c_bekill_info,c2m_reborn_req=j_s.c2m_reborn_req,m2c_update_camp=j_s.m2c_update_camp,x_state_increase_times=j_s.x_state_increase_times,c2m_state_info=j_s.c2m_state_info,m2c_state_info=j_s.m2c_state_info,c2m_state_increase=j_s.c2m_state_increase,m2c_state_increase=j_s.m2c_state_increase,c2m_state_sub_up=j_s.c2m_state_sub_up,m2c_state_sub_up=j_s.m2c_state_sub_up,c2m_state_lv_up=j_s.c2m_state_lv_up,m2c_state_lv_up=j_s.m2c_state_lv_up,x_buff_idx=j_s.x_buff_idx,m2c_buff_update=j_s.m2c_buff_update,m2c_buff_remove=j_s.m2c_buff_remove,x_base_friend=j_s.x_base_friend,c2w_friend_list=j_s.c2w_friend_list,w2c_friend_list=j_s.w2c_friend_list,c2w_request_list=j_s.c2w_request_list,w2c_request_list=j_s.w2c_request_list,c2w_black_list=j_s.c2w_black_list,w2c_black_list=j_s.w2c_black_list,c2w_recommend_list=j_s.c2w_recommend_list,w2c_recommend_list=j_s.w2c_recommend_list,c2w_friend_refresh_list=j_s.c2w_friend_refresh_list,c2w_add_friend=j_s.c2w_add_friend,w2c_friend_add_rep=j_s.w2c_friend_add_rep,w2c_friend_add_req=j_s.w2c_friend_add_req,c2w_accept_friend=j_s.c2w_accept_friend,w2c_add_friend=j_s.w2c_add_friend,w2c_delete_req=j_s.w2c_delete_req,c2w_friend_delete=j_s.c2w_friend_delete,w2c_friend_delete=j_s.w2c_friend_delete,c2w_friend_add_black=j_s.c2w_friend_add_black,w2c_friend_add_black=j_s.w2c_friend_add_black,c2w_friend_delete_black=j_s.c2w_friend_delete_black,w2c_friend_delete_black=j_s.w2c_friend_delete_black,c2w_friend_give=j_s.c2w_friend_give,w2c_friend_give_by=j_s.w2c_friend_give_by,w2c_friend_give=j_s.w2c_friend_give,x_friend_activeness_status_elem=j_s.x_friend_activeness_status_elem,c2w_friend_activeness_status=j_s.c2w_friend_activeness_status,w2c_friend_activeness_status=j_s.w2c_friend_activeness_status,c2w_friend_activeness_getReward=j_s.c2w_friend_activeness_getReward,w2c_friend_activeness_getReward=j_s.w2c_friend_activeness_getReward,x_chat_rec=j_s.x_chat_rec,c2w_chat_rec_list=j_s.c2w_chat_rec_list,w2c_chat_rec_list=j_s.w2c_chat_rec_list,c2w_chat_req=j_s.c2w_chat_req,w2c_chat_rec=j_s.w2c_chat_rec,x_chat_private_rec=j_s.x_chat_private_rec,c2w_chat_private_req=j_s.c2w_chat_private_req,w2c_chat_private_rep=j_s.w2c_chat_private_rep,x_chat_private_plr=j_s.x_chat_private_plr,c2w_chat_private_plr=j_s.c2w_chat_private_plr,w2c_chat_private_plr=j_s.w2c_chat_private_plr,c2w_chat_private_rec=j_s.c2w_chat_private_rec,w2c_chat_private_rec=j_s.w2c_chat_private_rec,c2w_del_history_chat=j_s.c2w_del_history_chat,m2c_pop_ui=j_s.m2c_pop_ui,m2c_send_broadcast=j_s.m2c_send_broadcast,c2m_silence=j_s.c2m_silence,m2c_silence_reply=j_s.m2c_silence_reply,c2m_query_silence_record=j_s.c2m_query_silence_record,x_silence_record=j_s.x_silence_record,m2c_query_silence_record=j_s.m2c_query_silence_record,c2m_query_my_silence_state=j_s.c2m_query_my_silence_state,m2c_query_my_silence_state=j_s.m2c_query_my_silence_state,x_base_shop_buy=j_s.x_base_shop_buy,x_base_rand_shop_id=j_s.x_base_rand_shop_id,c2m_shop_buy_list=j_s.c2m_shop_buy_list,m2c_shop_buy_list=j_s.m2c_shop_buy_list,c2m_shop_buy=j_s.c2m_shop_buy,m2c_shop_buy=j_s.m2c_shop_buy,c2m_shop_refresh=j_s.c2m_shop_refresh,c2w_enter_fb=j_s.c2w_enter_fb,c2w_leave_fb=j_s.c2w_leave_fb,m2c_notify_fb_info=j_s.m2c_notify_fb_info,x_reward_item=j_s.x_reward_item,x_damage_node=j_s.x_damage_node,m2c_notify_fb_result=j_s.m2c_notify_fb_result,m2c_notify_fb_result_hp=j_s.m2c_notify_fb_result_hp,x_dungeon_info=j_s.x_dungeon_info,c2m_passed_fb_list=j_s.c2m_passed_fb_list,m2c_passed_fb_list=j_s.m2c_passed_fb_list,m2c_update_fb_info=j_s.m2c_update_fb_info,w2c_notify_fb_remind=j_s.w2c_notify_fb_remind,m2c_notify_fb_damage_rank=j_s.m2c_notify_fb_damage_rank,m2c_notify_fb_self_damge=j_s.m2c_notify_fb_self_damge,m2c_notify_fb_boss_fb_info=j_s.m2c_notify_fb_boss_fb_info,x_server_damage_node=j_s.x_server_damage_node,m2c_notify_fb_server_damage_rank=j_s.m2c_notify_fb_server_damage_rank,x_fb_team_info=j_s.x_fb_team_info,c2m_fb_team_list=j_s.c2m_fb_team_list,m2c_fb_team_list=j_s.m2c_fb_team_list,x_fb_plr_info=j_s.x_fb_plr_info,c2m_fb_plr_list=j_s.c2m_fb_plr_list,m2c_fb_plr_list=j_s.m2c_fb_plr_list,c2m_fb_create_team=j_s.c2m_fb_create_team,m2c_update_fb_team_info=j_s.m2c_update_fb_team_info,c2m_fb_team_req=j_s.c2m_fb_team_req,c2m_fb_team_invite=j_s.c2m_fb_team_invite,m2c_fb_team_leave=j_s.m2c_fb_team_leave,c2m_fb_team_refuse_accept=j_s.c2m_fb_team_refuse_accept,c2m_fb_team_leave=j_s.c2m_fb_team_leave,c2m_fb_set_attack_target_type=j_s.c2m_fb_set_attack_target_type,m2c_fb_set_attack_target_type=j_s.m2c_fb_set_attack_target_type,x_fb_boss_info=j_s.x_fb_boss_info,c2w_fb_boss_lst=j_s.c2w_fb_boss_lst,w2c_fb_boss_lst=j_s.w2c_fb_boss_lst,c2m_fb_set_remind=j_s.c2m_fb_set_remind,m2c_fb_remind=j_s.m2c_fb_remind,c2m_wildboss_inspire_info=j_s.c2m_wildboss_inspire_info,c2m_wildboss_inspire=j_s.c2m_wildboss_inspire,m2c_wildboss_inspire=j_s.m2c_wildboss_inspire,c2m_wildboss_add_count=j_s.c2m_wildboss_add_count,c2m_tsequiptfb_add_count=j_s.c2m_tsequiptfb_add_count,c2m_fb_stateboss_take_hurt_reward=j_s.c2m_fb_stateboss_take_hurt_reward,m2c_fb_stateboss_take_hurt_reward=j_s.m2c_fb_stateboss_take_hurt_reward,c2w_fb_stateboss_dmg_rank=j_s.c2w_fb_stateboss_dmg_rank,w2c_fb_stateboss_dmg_rank=j_s.w2c_fb_stateboss_dmg_rank,x_fb_hurt_reward_status=j_s.x_fb_hurt_reward_status,m2c_fb_hurt_reward_status=j_s.m2c_fb_hurt_reward_status,x_fb_pk_list_elem=j_s.x_fb_pk_list_elem,c2m_fb_pk_list=j_s.c2m_fb_pk_list,m2c_fb_pk_list=j_s.m2c_fb_pk_list,m2c_fb_state_start_dmg=j_s.m2c_fb_state_start_dmg,c2m_fb_help_story=j_s.c2m_fb_help_story,m2c_fb_help_story=j_s.m2c_fb_help_story,c2m_fb_story_onekey_pass=j_s.c2m_fb_story_onekey_pass,c2m_fb_story_onekey_passone=j_s.c2m_fb_story_onekey_passone,w2c_fb_notify_thanks_ui=j_s.w2c_fb_notify_thanks_ui,c2w_fb_thanks_teamMember=j_s.c2w_fb_thanks_teamMember,c2m_green_boss_reward_info=j_s.c2m_green_boss_reward_info,m2c_green_boss_reward_info=j_s.m2c_green_boss_reward_info,c2m_get_green_boss_reward=j_s.c2m_get_green_boss_reward,m2c_get_green_boss_reward=j_s.m2c_get_green_boss_reward,c2m_fb_pagoda_cansweep=j_s.c2m_fb_pagoda_cansweep,m2c_fb_pagoda_cansweep=j_s.m2c_fb_pagoda_cansweep,c2m_fb_sweep_pagoda=j_s.c2m_fb_sweep_pagoda,c2m_fb_sweep_geren=j_s.c2m_fb_sweep_geren,c2m_fb_roll_pagoda=j_s.c2m_fb_roll_pagoda,c2m_fb_ascent_info=j_s.c2m_fb_ascent_info,m2c_fb_ascent_info=j_s.m2c_fb_ascent_info,c2m_fb_yishou_info=j_s.c2m_fb_yishou_info,m2c_fb_yishou_info=j_s.m2c_fb_yishou_info,c2m_fb_xuanshang_info=j_s.c2m_fb_xuanshang_info,m2c_fb_xuanshang_info=j_s.m2c_fb_xuanshang_info,c2m_fb_heaven_open_info=j_s.c2m_fb_heaven_open_info,m2c_fb_heaven_open_info=j_s.m2c_fb_heaven_open_info,c2m_fb_heaven_open_watch=j_s.c2m_fb_heaven_open_watch,m2c_fb_heaven_open_watch=j_s.m2c_fb_heaven_open_watch,x_confirm_member=j_s.x_confirm_member,w2c_confirm_notify=j_s.w2c_confirm_notify,c2w_confirm_req=j_s.c2w_confirm_req,w2c_confirm_res=j_s.w2c_confirm_res,x_deployment_info=j_s.x_deployment_info,x_engulf_item=j_s.x_engulf_item,x_talisman_info=j_s.x_talisman_info,c2m_talisman_list=j_s.c2m_talisman_list,m2c_talisman_list=j_s.m2c_talisman_list,c2m_talisman_active=j_s.c2m_talisman_active,m2c_talisman_info=j_s.m2c_talisman_info,c2m_talisman_upgrade=j_s.c2m_talisman_upgrade,m2c_talisman_upgrade=j_s.m2c_talisman_upgrade,c2m_talisman_uplevel=j_s.c2m_talisman_uplevel,m2c_talisman_uplevel=j_s.m2c_talisman_uplevel,c2m_talisman_updeploy=j_s.c2m_talisman_updeploy,m2c_talisman_updeploy=j_s.m2c_talisman_updeploy,x_suit_level=j_s.x_suit_level,c2m_talisman_suits=j_s.c2m_talisman_suits,m2c_talisman_suits=j_s.m2c_talisman_suits,c2m_talisman_upsuit=j_s.c2m_talisman_upsuit,m2c_talisman_upsuit=j_s.m2c_talisman_upsuit,c2m_talisman_engulf=j_s.c2m_talisman_engulf,m2c_talismen_engulf=j_s.m2c_talismen_engulf,c2m_talisman_setfight=j_s.c2m_talisman_setfight,m2c_talisman_setfight=j_s.m2c_talisman_setfight,c2m_talisman_buy_stove=j_s.c2m_talisman_buy_stove,c2m_talisman_refine=j_s.c2m_talisman_refine,m2c_talisman_refine=j_s.m2c_talisman_refine,c2m_talisman_refine_stop=j_s.c2m_talisman_refine_stop,m2c_talisman_refine_stop=j_s.m2c_talisman_refine_stop,c2m_talisman_speel=j_s.c2m_talisman_speel,m2c_talisman_speel=j_s.m2c_talisman_speel,c2m_talisman_buy_speel_slot=j_s.c2m_talisman_buy_speel_slot,m2c_talisman_buy_speel_slot=j_s.m2c_talisman_buy_speel_slot,c2m_talisman_equip_active=j_s.c2m_talisman_equip_active,m2c_talisman_equip_active=j_s.m2c_talisman_equip_active,c2m_talisman_wear=j_s.c2m_talisman_wear,c2m_talisman_strength=j_s.c2m_talisman_strength,c2m_talisman_awaken=j_s.c2m_talisman_awaken,c2m_qihun_active=j_s.c2m_qihun_active,m2c_qihun_active=j_s.m2c_qihun_active,c2m_qihun_level_up=j_s.c2m_qihun_level_up,m2c_qihun_level_up=j_s.m2c_qihun_level_up,c2m_qihun_star_up=j_s.c2m_qihun_star_up,m2c_qihun_star_up=j_s.m2c_qihun_star_up,c2m_decompose_equip=j_s.c2m_decompose_equip,m2c_decompose_equip=j_s.m2c_decompose_equip,c2m_decompose_auto=j_s.c2m_decompose_auto,x_base_strenght=j_s.x_base_strenght,c2m_strength_info=j_s.c2m_strength_info,m2c_strength_info=j_s.m2c_strength_info,c2m_strength_partition=j_s.c2m_strength_partition,m2c_strength_partition=j_s.m2c_strength_partition,c2m_strength_auto=j_s.c2m_strength_auto,m2c_strength_auto=j_s.m2c_strength_auto,x_base_soul_monster=j_s.x_base_soul_monster,x_base_soul_monster_global=j_s.x_base_soul_monster_global,x_base_soul_monster_request=j_s.x_base_soul_monster_request,c2m_soul_monster_info=j_s.c2m_soul_monster_info,m2c_soul_monster_info=j_s.m2c_soul_monster_info,c2m_soul_monster_put_slot=j_s.c2m_soul_monster_put_slot,m2c_soul_monster_slot_update=j_s.m2c_soul_monster_slot_update,c2m_soul_monster_open_slot=j_s.c2m_soul_monster_open_slot,m2c_soul_monster_open_slot=j_s.m2c_soul_monster_open_slot,c2m_soul_monster_feed=j_s.c2m_soul_monster_feed,c2m_soul_monster_change=j_s.c2m_soul_monster_change,c2m_soul_monster_do_change=j_s.c2m_soul_monster_do_change,c2m_soul_monster_global=j_s.c2m_soul_monster_global,w2c_soul_monster_global=j_s.w2c_soul_monster_global,c2w_soul_monster_match=j_s.c2w_soul_monster_match,w2c_soul_monster_global_update=j_s.w2c_soul_monster_global_update,c2w_soul_monster_request_list=j_s.c2w_soul_monster_request_list,w2c_soul_monster_request_list=j_s.w2c_soul_monster_request_list,c2w_suol_monster_request_op=j_s.c2w_suol_monster_request_op,c2w_soul_monster_global_request_op=j_s.c2w_soul_monster_global_request_op,w2c_soul_monster_global_request_op=j_s.w2c_soul_monster_global_request_op,c2w_soul_monster_search=j_s.c2w_soul_monster_search,w2c_soul_monster_search=j_s.w2c_soul_monster_search,c2w_soul_monster_evolution=j_s.c2w_soul_monster_evolution,w2c_soul_monster_evolution=j_s.w2c_soul_monster_evolution,c2w_soul_monster_request_history=j_s.c2w_soul_monster_request_history,w2c_soul_monster_request_history=j_s.w2c_soul_monster_request_history,x_base_mine=j_s.x_base_mine,c2m_office_up=j_s.c2m_office_up,c2m_office_mine_info=j_s.c2m_office_mine_info,m2c_office_mine_info=j_s.m2c_office_mine_info,c2m_office_mine_collect=j_s.c2m_office_mine_collect,m2c_office_mine_collect=j_s.m2c_office_mine_collect,m2c_office_mine_update=j_s.m2c_office_mine_update,x_office_facility_info=j_s.x_office_facility_info,c2m_office_facility_info=j_s.c2m_office_facility_info,m2c_office_facility_info=j_s.m2c_office_facility_info,c2m_office_facility_level_up=j_s.c2m_office_facility_level_up,m2c_office_facility_level_up=j_s.m2c_office_facility_level_up,c2m_offset_facility_reset=j_s.c2m_offset_facility_reset,m2c_offset_facility_reset=j_s.m2c_offset_facility_reset,c2m_office_treasure_info=j_s.c2m_office_treasure_info,m2c_office_treasure_info=j_s.m2c_office_treasure_info,c2m_office_get_treasure=j_s.c2m_office_get_treasure,m2c_office_get_treasure=j_s.m2c_office_get_treasure,x_office_exped_task_info=j_s.x_office_exped_task_info,c2m_office_exped_info=j_s.c2m_office_exped_info,m2c_office_exped_info=j_s.m2c_office_exped_info,c2m_office_exped_refresh=j_s.c2m_office_exped_refresh,c2m_office_exped_task_start=j_s.c2m_office_exped_task_start,m2c_office_exped_task_start=j_s.m2c_office_exped_task_start,c2m_office_exped_task_stop=j_s.c2m_office_exped_task_stop,m2c_office_exped_task_stop=j_s.m2c_office_exped_task_stop,c2m_office_exped_get_reward=j_s.c2m_office_exped_get_reward,m2c_office_exped_get_reward=j_s.m2c_office_exped_get_reward,x_office_mine_collect_info=j_s.x_office_mine_collect_info,c2m_office_mine_onekey_collect=j_s.c2m_office_mine_onekey_collect,m2c_office_mine_onekey_collect=j_s.m2c_office_mine_onekey_collect,x_rank_item=j_s.x_rank_item,c2w_get_rank=j_s.c2w_get_rank,w2c_rank_page=j_s.w2c_rank_page,c2m_rank_worship_info=j_s.c2m_rank_worship_info,m2c_rank_worship_info=j_s.m2c_rank_worship_info,c2m_rank_worship=j_s.c2m_rank_worship,m2c_rank_worship=j_s.m2c_rank_worship,c2q_get_rank=j_s.c2q_get_rank,q2c_rank_page=j_s.q2c_rank_page,x_banquet_member=j_s.x_banquet_member,x_banquet_info=j_s.x_banquet_info,c2w_banquet_info=j_s.c2w_banquet_info,w2c_banquet_info=j_s.w2c_banquet_info,c2w_banquet_start=j_s.c2w_banquet_start,w2c_banquet_start=j_s.w2c_banquet_start,c2w_banquet_lst=j_s.c2w_banquet_lst,w2c_banquet_lst=j_s.w2c_banquet_lst,c2w_banquet_join=j_s.c2w_banquet_join,w2c_banquet_join=j_s.w2c_banquet_join,c2w_banquet_query=j_s.c2w_banquet_query,w2c_banquet_query=j_s.w2c_banquet_query,c2w_banquet_reward=j_s.c2w_banquet_reward,w2c_banquet_new=j_s.w2c_banquet_new,c2m_hangup_online_reward=j_s.c2m_hangup_online_reward,m2c_hangup_online_reward=j_s.m2c_hangup_online_reward,m2c_hangup_offline_drop=j_s.m2c_hangup_offline_drop,c2m_hangup_get_reward=j_s.c2m_hangup_get_reward,m2c_hangup_get_reward=j_s.m2c_hangup_get_reward,x_base_ride=j_s.x_base_ride,c2m_ride_info=j_s.c2m_ride_info,m2c_ride_info=j_s.m2c_ride_info,c2m_ride_feed=j_s.c2m_ride_feed,m2c_ride_update=j_s.m2c_ride_update,c2m_ride_combine=j_s.c2m_ride_combine,m2c_ride_combine=j_s.m2c_ride_combine,c2m_ride_op=j_s.c2m_ride_op,c2m_ride_wear=j_s.c2m_ride_wear,c2m_ride_active=j_s.c2m_ride_active,m2c_ride_active=j_s.m2c_ride_active,c2m_ride_auto_feed=j_s.c2m_ride_auto_feed,c2m_ride_up_star=j_s.c2m_ride_up_star,m2c_ride_up_star=j_s.m2c_ride_up_star,c2m_asyncpvp_info=j_s.c2m_asyncpvp_info,m2c_asyncpvp_info=j_s.m2c_asyncpvp_info,w2c_cross_async_info=j_s.w2c_cross_async_info,c2m_asyncpvp_match=j_s.c2m_asyncpvp_match,m2c_asyncpvp_match=j_s.m2c_asyncpvp_match,c2w_asyncpvp_enter=j_s.c2w_asyncpvp_enter,c2m_asyncpvp_challenge=j_s.c2m_asyncpvp_challenge,c2w_asyncpvp_search_kill=j_s.c2w_asyncpvp_search_kill,w2c_asyncpvp_search_kill=j_s.w2c_asyncpvp_search_kill,x_asyncpvp_search_kill=j_s.x_asyncpvp_search_kill,q2c_asyncpvp_search_kill=j_s.q2c_asyncpvp_search_kill,c2m_asyncpvp_chase_kill=j_s.c2m_asyncpvp_chase_kill,c2m_asyncpvp_round_start=j_s.c2m_asyncpvp_round_start,x_asyncpvp_prop=j_s.x_asyncpvp_prop,x_asyncpvp_ts_group=j_s.x_asyncpvp_ts_group,m2c_asyncpvp_round_info=j_s.m2c_asyncpvp_round_info,c2m_asyncpvp_round_battle=j_s.c2m_asyncpvp_round_battle,m2c_asyncpvp_combat_result=j_s.m2c_asyncpvp_combat_result,c2m_asyncpvp_round_finish=j_s.c2m_asyncpvp_round_finish,c2m_asyncpvp_buy_prop=j_s.c2m_asyncpvp_buy_prop,m2c_asyncpvp_buy_prop=j_s.m2c_asyncpvp_buy_prop,x_asyncpvp_record=j_s.x_asyncpvp_record,c2m_asyncpvp_record=j_s.c2m_asyncpvp_record,m2c_asyncpvp_record=j_s.m2c_asyncpvp_record,w2c_asyncpvp_statistics=j_s.w2c_asyncpvp_statistics,x_asyncpvp_bdcast=j_s.x_asyncpvp_bdcast,c2w_asyncpvp_broadcast=j_s.c2w_asyncpvp_broadcast,w2c_asyncpvp_broadcast=j_s.w2c_asyncpvp_broadcast,x_async_item=j_s.x_async_item,x_asyncpvp_season_record=j_s.x_asyncpvp_season_record,c2m_asyncpvp_season_record=j_s.c2m_asyncpvp_season_record,m2c_asyncpvp_season_record=j_s.m2c_asyncpvp_season_record,c2m_asyncpvp_push_season_record=j_s.c2m_asyncpvp_push_season_record,c2w_get_asyncpvp_season_prev_rank=j_s.c2w_get_asyncpvp_season_prev_rank,w2c_get_asyncpvp_season_prev_rank=j_s.w2c_get_asyncpvp_season_prev_rank,c2m_asyncpvp_exchange_req=j_s.c2m_asyncpvp_exchange_req,m2c_asyncpvp_exchange_info=j_s.m2c_asyncpvp_exchange_info,c2m_asyncpvp_exchange_buy_req=j_s.c2m_asyncpvp_exchange_buy_req,c2m_asyncpvp_buy_reset_cd=j_s.c2m_asyncpvp_buy_reset_cd,c2m_get_cross_state=j_s.c2m_get_cross_state,m2c_get_cross_state=j_s.m2c_get_cross_state,c2w_guild_list=j_s.c2w_guild_list,x_vice_info=j_s.x_vice_info,x_guild_info=j_s.x_guild_info,w2c_guild_list=j_s.w2c_guild_list,c2w_guild_info=j_s.c2w_guild_info,x_guild_member=j_s.x_guild_member,w2c_guild_info=j_s.w2c_guild_info,w2c_update_guild_property=j_s.w2c_update_guild_property,w2c_update_member_property=j_s.w2c_update_member_property,c2w_create_guild=j_s.c2w_create_guild,w2c_create_guild=j_s.w2c_create_guild,c2w_kick_member=j_s.c2w_kick_member,c2w_leave_guild=j_s.c2w_leave_guild,w2c_leave_guild=j_s.w2c_leave_guild,c2w_join_guild=j_s.c2w_join_guild,w2c_join_guild=j_s.w2c_join_guild,w2c_join_success=j_s.w2c_join_success,c2w_cancel_join_guild=j_s.c2w_cancel_join_guild,w2c_cancel_join_guild=j_s.w2c_cancel_join_guild,c2w_join_list=j_s.c2w_join_list,w2c_join_list=j_s.w2c_join_list,c2w_process_join_request=j_s.c2w_process_join_request,c2w_auto_process_join_request=j_s.c2w_auto_process_join_request,w2c_auto_process_join_request=j_s.w2c_auto_process_join_request,c2w_change_office=j_s.c2w_change_office,w2c_change_office=j_s.w2c_change_office,w2c_transfer_guild=j_s.w2c_transfer_guild,c2w_disband_guild=j_s.c2w_disband_guild,w2c_disband_guild=j_s.w2c_disband_guild,c2w_guild_change_name_req=j_s.c2w_guild_change_name_req,w2c_guild_change_name_rep=j_s.w2c_guild_change_name_rep,c2w_edit_notice=j_s.c2w_edit_notice,w2c_edit_notice=j_s.w2c_edit_notice,m2c_guild_show_change=j_s.m2c_guild_show_change,c2w_guild_checkin=j_s.c2w_guild_checkin,w2c_guild_checkin=j_s.w2c_guild_checkin,c2w_guild_checkin_info=j_s.c2w_guild_checkin_info,x_gift_box=j_s.x_gift_box,x_guild_checkin_member_info=j_s.x_guild_checkin_member_info,w2c_guild_checkin_info=j_s.w2c_guild_checkin_info,c2w_guild_checkin_gift=j_s.c2w_guild_checkin_gift,w2c_guild_checkin_gift=j_s.w2c_guild_checkin_gift,c2m_guild_exchange_req=j_s.c2m_guild_exchange_req,m2c_guild_exchange_info=j_s.m2c_guild_exchange_info,c2m_guild_exchange_buy_req=j_s.c2m_guild_exchange_buy_req,c2w_guild_donate=j_s.c2w_guild_donate,w2c_guild_donate=j_s.w2c_guild_donate,c2w_guild_auction_list=j_s.c2w_guild_auction_list,x_guild_auction_item=j_s.x_guild_auction_item,w2c_guild_auction_list=j_s.w2c_guild_auction_list,c2w_guild_auction_bid=j_s.c2w_guild_auction_bid,w2c_guild_auction_bid=j_s.w2c_guild_auction_bid,c2w_guild_auction_buy=j_s.c2w_guild_auction_buy,w2c_guild_auction_buy=j_s.w2c_guild_auction_buy,c2w_guild_auction_history=j_s.c2w_guild_auction_history,x_guild_auction_history=j_s.x_guild_auction_history,w2c_guild_auction_history=j_s.w2c_guild_auction_history,c2w_guil_help_info=j_s.c2w_guil_help_info,w2c_guild_help_info=j_s.w2c_guild_help_info,c2w_guild_help_list=j_s.c2w_guild_help_list,x_guild_help_list_item=j_s.x_guild_help_list_item,w2c_guild_help_list=j_s.w2c_guild_help_list,c2w_guild_help_my_list=j_s.c2w_guild_help_my_list,x_guild_help_my_list_item=j_s.x_guild_help_my_list_item,w2c_guild_help_my_list=j_s.w2c_guild_help_my_list,c2w_guild_help_add=j_s.c2w_guild_help_add,c2w_guild_help_assist=j_s.c2w_guild_help_assist,w2c_guild_help_assist=j_s.w2c_guild_help_assist,c2w_guild_help_take_item=j_s.c2w_guild_help_take_item,c2w_guild_help_take_gift=j_s.c2w_guild_help_take_gift,c2w_guild_boss_list=j_s.c2w_guild_boss_list,x_guild_boss_info=j_s.x_guild_boss_info,w2c_guild_boss_list=j_s.w2c_guild_boss_list,c2w_guild_boss_open=j_s.c2w_guild_boss_open,w2c_guild_boss_open=j_s.w2c_guild_boss_open,c2w_guild_boss_challenge=j_s.c2w_guild_boss_challenge,c2w_guild_boss_reward=j_s.c2w_guild_boss_reward,w2c_guild_boss_reward=j_s.w2c_guild_boss_reward,c2w_guild_boss_rank=j_s.c2w_guild_boss_rank,x_guild_boss_rank=j_s.x_guild_boss_rank,w2c_guild_boss_rank=j_s.w2c_guild_boss_rank,w2c_guild_auction_new=j_s.w2c_guild_auction_new,c2m_guild_auction_rec=j_s.c2m_guild_auction_rec,x_guild_auction_rec=j_s.x_guild_auction_rec,m2c_guild_auction_rec=j_s.m2c_guild_auction_rec,x_guild_boss_auto_open_info=j_s.x_guild_boss_auto_open_info,c2w_guild_boss_set_auto_open_mode=j_s.c2w_guild_boss_set_auto_open_mode,w2c_guild_boss_set_auto_open_mode=j_s.w2c_guild_boss_set_auto_open_mode,x_guild_repository_item=j_s.x_guild_repository_item,x_guild_repository_history=j_s.x_guild_repository_history,c2w_get_repository=j_s.c2w_get_repository,w2c_get_repository=j_s.w2c_get_repository,c2w_guild_repository_add_item=j_s.c2w_guild_repository_add_item,w2c_guild_repository_add_item=j_s.w2c_guild_repository_add_item,c2w_guild_repository_exchange_item=j_s.c2w_guild_repository_exchange_item,w2c_guild_repository_exchange_item=j_s.w2c_guild_repository_exchange_item,c2w_guild_repository_delete_item=j_s.c2w_guild_repository_delete_item,c2w_guild_repository_get_history=j_s.c2w_guild_repository_get_history,w2c_guild_repository_get_history=j_s.w2c_guild_repository_get_history,w2c_repository_modify=j_s.w2c_repository_modify,c2m_vip_get_reward=j_s.c2m_vip_get_reward,m2c_vip_reward_status=j_s.m2c_vip_reward_status,x_month_card=j_s.x_month_card,c2m_month_card_info=j_s.c2m_month_card_info,m2c_month_card_info=j_s.m2c_month_card_info,m2c_month_card_buy=j_s.m2c_month_card_buy,c2m_month_card_reward=j_s.c2m_month_card_reward,m2c_month_card_reward=j_s.m2c_month_card_reward,c2m_first_recharge_status=j_s.c2m_first_recharge_status,m2c_first_recharge_status=j_s.m2c_first_recharge_status,m2c_recharge_success=j_s.m2c_recharge_success,x_achievement_info=j_s.x_achievement_info,c2m_achievement_info=j_s.c2m_achievement_info,m2c_achievement_info=j_s.m2c_achievement_info,m2c_achievement_update=j_s.m2c_achievement_update,c2m_achievement_fin=j_s.c2m_achievement_fin,m2c_achievement_fin=j_s.m2c_achievement_fin,c2m_achievement_online_check=j_s.c2m_achievement_online_check,c2m_achievement_fin_all=j_s.c2m_achievement_fin_all,c2m_sign_info=j_s.c2m_sign_info,m2c_sign_info=j_s.m2c_sign_info,c2m_sign_sign_in=j_s.c2m_sign_sign_in,m2c_sign_sign_in=j_s.m2c_sign_sign_in,c2m_sign_reward=j_s.c2m_sign_reward,m2c_sign_reward=j_s.m2c_sign_reward,x_func_open_reward_state=j_s.x_func_open_reward_state,m2c_func_open_state=j_s.m2c_func_open_state,c2m_func_open_take_reward=j_s.c2m_func_open_take_reward,x_minewar_base_mine=j_s.x_minewar_base_mine,c2w_minewar_mine_list=j_s.c2w_minewar_mine_list,w2c_minewar_mine_list=j_s.w2c_minewar_mine_list,x_minewar_base_miner=j_s.x_minewar_base_miner,c2w_minewar_mine=j_s.c2w_minewar_mine,w2c_minewar_mine=j_s.w2c_minewar_mine,c2w_minewar_miner=j_s.c2w_minewar_miner,w2c_minewar_miner=j_s.w2c_minewar_miner,x_base_record=j_s.x_base_record,c2w_minewar_record=j_s.c2w_minewar_record,w2c_minewar_record=j_s.w2c_minewar_record,c2w_minewar_fight=j_s.c2w_minewar_fight,w2c_minewar_fight=j_s.w2c_minewar_fight,c2m_minewar_leave=j_s.c2m_minewar_leave,c2w_minewar_get_box=j_s.c2w_minewar_get_box,w2c_minewar_get_box=j_s.w2c_minewar_get_box,c2w_minewar_exchange=j_s.c2w_minewar_exchange,w2c_minewar_exchange=j_s.w2c_minewar_exchange,c2w_minewar_move=j_s.c2w_minewar_move,w2c_minewar_move=j_s.w2c_minewar_move,c2w_minewar_miner_update=j_s.c2w_minewar_miner_update,w2c_minewar_miner_update=j_s.w2c_minewar_miner_update,w2c_minewar_berobed=j_s.w2c_minewar_berobed,c2m_sevenday_info=j_s.c2m_sevenday_info,m2c_sevenday_info=j_s.m2c_sevenday_info,c2m_sevenday_get=j_s.c2m_sevenday_get,m2c_sevenday_get=j_s.m2c_sevenday_get,x_seven_day_task_progress=j_s.x_seven_day_task_progress,x_seven_day_liveness=j_s.x_seven_day_liveness,c2m_seven_day_task_info=j_s.c2m_seven_day_task_info,m2c_seven_day_task_info=j_s.m2c_seven_day_task_info,c2m_get_seven_day_task_reward=j_s.c2m_get_seven_day_task_reward,m2c_get_seven_day_task_reward=j_s.m2c_get_seven_day_task_reward,c2m_get_seven_day_liveness_reward=j_s.c2m_get_seven_day_liveness_reward,m2c_get_seven_day_liveness_reward=j_s.m2c_get_seven_day_liveness_reward,m2c_seven_day_task_progress=j_s.m2c_seven_day_task_progress,c2m_seven_day_task_online_check=j_s.c2m_seven_day_task_online_check,c2m_merge_sevenday_info=j_s.c2m_merge_sevenday_info,m2c_merge_sevenday_info=j_s.m2c_merge_sevenday_info,c2m_merge_sevenday_get=j_s.c2m_merge_sevenday_get,m2c_merge_sevenday_get=j_s.m2c_merge_sevenday_get,c2m_merge_sevenday_status=j_s.c2m_merge_sevenday_status,m2c_merge_sevenday_status=j_s.m2c_merge_sevenday_status,x_fashion_info=j_s.x_fashion_info,c2m_fashion_list=j_s.c2m_fashion_list,m2c_fashion_list=j_s.m2c_fashion_list,x_fashion_progress=j_s.x_fashion_progress,c2m_fashion_progress=j_s.c2m_fashion_progress,m2c_fashion_progress=j_s.m2c_fashion_progress,c2m_fashion_active=j_s.c2m_fashion_active,m2c_fashion_active=j_s.m2c_fashion_active,c2m_fashion_use=j_s.c2m_fashion_use,m2c_fashion_use=j_s.m2c_fashion_use,c2m_fashion_upgrade=j_s.c2m_fashion_upgrade,m2c_fashion_upgrade=j_s.m2c_fashion_upgrade,x_activeness_info=j_s.x_activeness_info,c2m_activeness_list=j_s.c2m_activeness_list,m2c_activeness_list=j_s.m2c_activeness_list,m2c_activeness_update=j_s.m2c_activeness_update,c2m_activeness_reward=j_s.c2m_activeness_reward,m2c_activeness_reward=j_s.m2c_activeness_reward,c2m_activeness_exreward=j_s.c2m_activeness_exreward,m2c_activeness_exreward=j_s.m2c_activeness_exreward,x_title_index_info=j_s.x_title_index_info,c2m_title_info_req=j_s.c2m_title_info_req,m2c_title_info_rep=j_s.m2c_title_info_rep,m2c_title_gain=j_s.m2c_title_gain,c2m_title_drop=j_s.c2m_title_drop,m2c_title_drop=j_s.m2c_title_drop,m2c_title_remove=j_s.m2c_title_remove,c2m_title_wear=j_s.c2m_title_wear,m2c_title_wear=j_s.m2c_title_wear,c2m_title_active=j_s.c2m_title_active,c2m_title_level_up=j_s.c2m_title_level_up,m2c_title_level_up=j_s.m2c_title_level_up,c2w_palace_info=j_s.c2w_palace_info,x_palace_info=j_s.x_palace_info,w2c_palace_info=j_s.w2c_palace_info,c2w_palace_worship=j_s.c2w_palace_worship,w2c_palace_worship=j_s.w2c_palace_worship,x_dh_plr_info=j_s.x_dh_plr_info,c2w_dh_info=j_s.c2w_dh_info,w2c_dh_info=j_s.w2c_dh_info,x_dh_friend_info=j_s.x_dh_friend_info,c2w_dh_friend_list=j_s.c2w_dh_friend_list,w2c_dh_friend_list=j_s.w2c_dh_friend_list,x_dh_invite_info=j_s.x_dh_invite_info,c2w_dh_invite_list=j_s.c2w_dh_invite_list,w2c_dh_invite_list=j_s.w2c_dh_invite_list,c2w_dh_invite=j_s.c2w_dh_invite,w2c_dh_invite=j_s.w2c_dh_invite,w2c_db_be_invited=j_s.w2c_db_be_invited,c2w_dh_agree=j_s.c2w_dh_agree,w2c_dh_agree=j_s.w2c_dh_agree,c2m_dh_take_exp=j_s.c2m_dh_take_exp,m2c_dh_take_exp=j_s.m2c_dh_take_exp,w2c_dh_stop=j_s.w2c_dh_stop,c2w_dh_register=j_s.c2w_dh_register,c2w_dh_list=j_s.c2w_dh_list,w2c_dh_list=j_s.w2c_dh_list,c2w_dh_accept_task=j_s.c2w_dh_accept_task,w2c_dh_task_question=j_s.w2c_dh_task_question,c2w_dh_answer=j_s.c2w_dh_answer,w2c_dh_mora_invite=j_s.w2c_dh_mora_invite,c2w_dh_mora_reply=j_s.c2w_dh_mora_reply,w2c_dh_mora_agree=j_s.w2c_dh_mora_agree,c2w_dh_mora_again=j_s.c2w_dh_mora_again,w2c_dh_again_fail=j_s.w2c_dh_again_fail,c2w_dh_mora=j_s.c2w_dh_mora,w2c_dh_mora=j_s.w2c_dh_mora,c2m_wechat_collect_reward_info=j_s.c2m_wechat_collect_reward_info,m2c_wechat_collect_reward_info=j_s.m2c_wechat_collect_reward_info,c2m_wechat_collect_get_reward=j_s.c2m_wechat_collect_get_reward,m2c_wanba_collect_reward_info=j_s.m2c_wanba_collect_reward_info,m2c_wanba_shared_reward_info=j_s.m2c_wanba_shared_reward_info,c2m_wanba_collect_reward_info=j_s.c2m_wanba_collect_reward_info,c2m_wanba_collect_get_reward=j_s.c2m_wanba_collect_get_reward,c2m_wanba_shared_reward_info=j_s.c2m_wanba_shared_reward_info,c2m_wanba_shared_get_reward=j_s.c2m_wanba_shared_get_reward,c2m_wanba_collect_set=j_s.c2m_wanba_collect_set,c2m_wanba_shared_set=j_s.c2m_wanba_shared_set,c2m_setFirstLoadScene=j_s.c2m_setFirstLoadScene,c2m_getIsNotFirstLoadScene=j_s.c2m_getIsNotFirstLoadScene,m2c_getIsNotFirstLoadScene=j_s.m2c_getIsNotFirstLoadScene,c2m_set_share=j_s.c2m_set_share,c2m_share_reward_info=j_s.c2m_share_reward_info,m2c_share_reward_info=j_s.m2c_share_reward_info,c2m_get_share_reward=j_s.c2m_get_share_reward,c2m_get_wanba_gift_reward=j_s.c2m_get_wanba_gift_reward,m2c_wanba_gift_reward_status=j_s.m2c_wanba_gift_reward_status,x_xianyuan_god_info=j_s.x_xianyuan_god_info,x_xianyuan_xianshu_info=j_s.x_xianyuan_xianshu_info,c2m_xianyuan_info=j_s.c2m_xianyuan_info,m2c_xianyuan_info=j_s.m2c_xianyuan_info,m2c_xianyuan_update_god=j_s.m2c_xianyuan_update_god,m2c_xianyuan_update_xianshu=j_s.m2c_xianyuan_update_xianshu,m2c_xianyuan_update_coach_times=j_s.m2c_xianyuan_update_coach_times,c2m_xianyuan_god_active=j_s.c2m_xianyuan_god_active,c2m_xianyuan_god_lvup=j_s.c2m_xianyuan_god_lvup,c2m_xianyuan_god_starup=j_s.c2m_xianyuan_god_starup,c2m_xianyuan_xianshu_lvup=j_s.c2m_xianyuan_xianshu_lvup,c2m_xianyuan_coach=j_s.c2m_xianyuan_coach,c2m_xianyuan_conclude=j_s.c2m_xianyuan_conclude,m2c_xianyuan_add_val=j_s.m2c_xianyuan_add_val,x_xianyuan_suit_level=j_s.x_xianyuan_suit_level,c2m_xianyuan_suits=j_s.c2m_xianyuan_suits,m2c_xianyuan_suits=j_s.m2c_xianyuan_suits,c2m_xianyuan_upsuit=j_s.c2m_xianyuan_upsuit,m2c_xianyuan_upsuit=j_s.m2c_xianyuan_upsuit,x_xianyuan_equip=j_s.x_xianyuan_equip,c2m_xianyuan_equip=j_s.c2m_xianyuan_equip,m2c_xianyuan_equip=j_s.m2c_xianyuan_equip,c2m_xianyuan_eq_upLv=j_s.c2m_xianyuan_eq_upLv,m2c_xianyuan_eq_upLv=j_s.m2c_xianyuan_eq_upLv,c2m_xianyuan_eq_auto_upLv=j_s.c2m_xianyuan_eq_auto_upLv,m2c_xianyuan_eq_auto_upLv=j_s.m2c_xianyuan_eq_auto_upLv,c2m_xianyuan_eq_upStar=j_s.c2m_xianyuan_eq_upStar,m2c_xianyuan_eq_upStar=j_s.m2c_xianyuan_eq_upStar,c2m_xianyuan_eq_auto_upStar=j_s.c2m_xianyuan_eq_auto_upStar,m2c_xianyuan_eq_auto_upStar=j_s.m2c_xianyuan_eq_auto_upStar,x_xianyuan_equip_suit=j_s.x_xianyuan_equip_suit,c2m_xianyuan_eq_suit=j_s.c2m_xianyuan_eq_suit,m2c_xianyuan_eq_suit=j_s.m2c_xianyuan_eq_suit,c2m_xianyuan_eq_single_suit=j_s.c2m_xianyuan_eq_single_suit,m2c_xianyuan_eq_all_suit=j_s.m2c_xianyuan_eq_all_suit,c2m_xianyuan_eq_suit_upLv=j_s.c2m_xianyuan_eq_suit_upLv,m2c_xianyuan_eq_suit_upLv=j_s.m2c_xianyuan_eq_suit_upLv,c2m_xianyuan_seat_act=j_s.c2m_xianyuan_seat_act,m2c_xianyuan_seat_act=j_s.m2c_xianyuan_seat_act,c2m_xianyuan_seat_up_lv=j_s.c2m_xianyuan_seat_up_lv,m2c_xianyuan_seat_up_lv=j_s.m2c_xianyuan_seat_up_lv,c2m_xianyuan_seat_up_star=j_s.c2m_xianyuan_seat_up_star,m2c_xianyuan_seat_up_star=j_s.m2c_xianyuan_seat_up_star,c2m_drawcard_info=j_s.c2m_drawcard_info,m2c_drawcard_info=j_s.m2c_drawcard_info,c2m_drawcard_req=j_s.c2m_drawcard_req,m2c_drawcard_success=j_s.m2c_drawcard_success,x_drawcard_record=j_s.x_drawcard_record,c2m_drawcard_record=j_s.c2m_drawcard_record,m2c_drawcard_record=j_s.m2c_drawcard_record,w2c_gsaRec_drawcard_status=j_s.w2c_gsaRec_drawcard_status,c2m_drawcard_get_score_reward=j_s.c2m_drawcard_get_score_reward,m2c_drawcard_get_score_reward=j_s.m2c_drawcard_get_score_reward,x_dreamland_member=j_s.x_dreamland_member,x_dreamland_act_info=j_s.x_dreamland_act_info,x_dreamland_info=j_s.x_dreamland_info,c2w_dreamland_self_info=j_s.c2w_dreamland_self_info,w2c_dreamland_self_info=j_s.w2c_dreamland_self_info,c2w_dreamland_list=j_s.c2w_dreamland_list,w2c_dreamland_list=j_s.w2c_dreamland_list,c2w_dreamland_start=j_s.c2w_dreamland_start,w2c_dreamland_start=j_s.w2c_dreamland_start,c2w_dreamland_join=j_s.c2w_dreamland_join,w2c_dreamland_join=j_s.w2c_dreamland_join,c2w_dreamland_query=j_s.c2w_dreamland_query,w2c_dreamland_query=j_s.w2c_dreamland_query,c2w_dreamland_break=j_s.c2w_dreamland_break,w2c_dreamland_break=j_s.w2c_dreamland_break,x_dreamland_skill=j_s.x_dreamland_skill,c2m_dreamland_skill=j_s.c2m_dreamland_skill,m2c_dreamland_skill=j_s.m2c_dreamland_skill,c2m_dreamland_skill_learn=j_s.c2m_dreamland_skill_learn,m2c_dreamland_skill_info=j_s.m2c_dreamland_skill_info,c2m_dreamland_fight_end=j_s.c2m_dreamland_fight_end,c2m_dreamland_protect=j_s.c2m_dreamland_protect,m2c_state_fb_notify_choose=j_s.m2c_state_fb_notify_choose,c2m_state_fb_choose=j_s.c2m_state_fb_choose,m2c_state_fb_choose=j_s.m2c_state_fb_choose,m2c_state_fb_stage=j_s.m2c_state_fb_stage,m2c_state_fb_props=j_s.m2c_state_fb_props,x_ui_info=j_s.x_ui_info,c2m_compose_ui_info=j_s.c2m_compose_ui_info,m2c_compose_ui_info=j_s.m2c_compose_ui_info,c2m_compose_auto=j_s.c2m_compose_auto,m2c_compose_auto=j_s.m2c_compose_auto,x_restore_rec=j_s.x_restore_rec,c2w_restore_info=j_s.c2w_restore_info,w2c_restore_info=j_s.w2c_restore_info,c2w_get_restore_rec=j_s.c2w_get_restore_rec,w2c_get_restore_rec=j_s.w2c_get_restore_rec,x_arena_match_info=j_s.x_arena_match_info,x_arena_record_info=j_s.x_arena_record_info,c2w_arena_info=j_s.c2w_arena_info,w2c_arena_info=j_s.w2c_arena_info,c2m_arena_match=j_s.c2m_arena_match,c2m_arena_fight_end=j_s.c2m_arena_fight_end,w2c_arena_fight_info=j_s.w2c_arena_fight_info,c2w_arena_fight_record=j_s.c2w_arena_fight_record,w2c_arena_fight_record=j_s.w2c_arena_fight_record,c2m_arena_buy_vip_count=j_s.c2m_arena_buy_vip_count,m2c_arena_buy_vip_count=j_s.m2c_arena_buy_vip_count,c2m_arena_reset_chall_cd=j_s.c2m_arena_reset_chall_cd,c2w_arena_get_highRank_reward=j_s.c2w_arena_get_highRank_reward,c2m_arena_exchange_req=j_s.c2m_arena_exchange_req,m2c_arena_exchange_info=j_s.m2c_arena_exchange_info,c2w_arena_exchange_buy_req=j_s.c2w_arena_exchange_buy_req,m2c_arena_rank_change_red_point=j_s.m2c_arena_rank_change_red_point,c2w_arena_close_rank_change_record=j_s.c2w_arena_close_rank_change_record,c2w_gain_rank_qual_info=j_s.c2w_gain_rank_qual_info,w2c_gain_rank_qual_info=j_s.w2c_gain_rank_qual_info,x_base_dragonsoul=j_s.x_base_dragonsoul,c2m_dragonsoul_info=j_s.c2m_dragonsoul_info,m2c_dragonsoul_info=j_s.m2c_dragonsoul_info,c2m_dragonsoul_feed=j_s.c2m_dragonsoul_feed,m2c_dragonsoul_update=j_s.m2c_dragonsoul_update,c2m_dragonsoul_op=j_s.c2m_dragonsoul_op,c2m_dragonsoul_active=j_s.c2m_dragonsoul_active,m2c_dragonsoul_active=j_s.m2c_dragonsoul_active,c2m_dragonsoul_auto_feed=j_s.c2m_dragonsoul_auto_feed,c2m_dragonsoul_up_star=j_s.c2m_dragonsoul_up_star,m2c_dragonsoul_up_star=j_s.m2c_dragonsoul_up_star,c2w_marry_request_list=j_s.c2w_marry_request_list,w2c_marry_request_list=j_s.w2c_marry_request_list,x_base_marry=j_s.x_base_marry,c2w_marry_info=j_s.c2w_marry_info,w2c_marry_info=j_s.w2c_marry_info,x_base_marriage_info=j_s.x_base_marriage_info,c2w_xianlv_wall=j_s.c2w_xianlv_wall,w2c_xianlv_wall=j_s.w2c_xianlv_wall,c2w_set_marryinfo=j_s.c2w_set_marryinfo,w2c_set_marryinfo=j_s.w2c_set_marryinfo,c2w_invite_marry=j_s.c2w_invite_marry,w2c_invite_marry=j_s.w2c_invite_marry,w2c_rec_marry=j_s.w2c_rec_marry,c2w_reply_marry=j_s.c2w_reply_marry,w2c_delete_marry_req=j_s.w2c_delete_marry_req,w2c_success_marry=j_s.w2c_success_marry,c2w_delete_marry=j_s.c2w_delete_marry,w2c_req_delete_marry=j_s.w2c_req_delete_marry,w2c_delete_marry=j_s.w2c_delete_marry,x_base_ringinfo=j_s.x_base_ringinfo,x_base_ring_star=j_s.x_base_ring_star,c2m_marry_ringinfo=j_s.c2m_marry_ringinfo,m2c_marry_ringinfo=j_s.m2c_marry_ringinfo,c2m_marry_ringfoster=j_s.c2m_marry_ringfoster,m2c_marry_ringfoster=j_s.m2c_marry_ringfoster,c2m_marry_auto_ringfoster=j_s.c2m_marry_auto_ringfoster,c2m_change_ring_used=j_s.c2m_change_ring_used,m2c_change_ring_used=j_s.m2c_change_ring_used,m2c_marry_illusion_info=j_s.m2c_marry_illusion_info,c2m_marry_illusion_act=j_s.c2m_marry_illusion_act,c2m_marry_illusion_up_star=j_s.c2m_marry_illusion_up_star,x_base_marry_achievement_info=j_s.x_base_marry_achievement_info,c2w_marry_achievement_info=j_s.c2w_marry_achievement_info,w2c_marry_achievement_info=j_s.w2c_marry_achievement_info,c2m_marry_achievement_reward=j_s.c2m_marry_achievement_reward,m2c_marry_achievement_reward=j_s.m2c_marry_achievement_reward,c2m_marry_online_check=j_s.c2m_marry_online_check,x_base_marry_lovevalue=j_s.x_base_marry_lovevalue,c2w_marry_add_lovevalue=j_s.c2w_marry_add_lovevalue,w2c_marry_add_lovevalue=j_s.w2c_marry_add_lovevalue,c2w_marry_auto_add_lovevalue=j_s.c2w_marry_auto_add_lovevalue,x_base_lovevalue_reward=j_s.x_base_lovevalue_reward,c2m_marry_lovevalue_info=j_s.c2m_marry_lovevalue_info,m2c_marry_lovevalue_info=j_s.m2c_marry_lovevalue_info,c2m_marry_lovevalue_reward=j_s.c2m_marry_lovevalue_reward,m2c_marry_lovevalue_reward=j_s.m2c_marry_lovevalue_reward,c2w_marry_enter_map=j_s.c2w_marry_enter_map,m2c_marry_layer=j_s.m2c_marry_layer,c2m_marry_buy_times=j_s.c2m_marry_buy_times,m2c_marry_buy_times=j_s.m2c_marry_buy_times,c2m_marry_times_info=j_s.c2m_marry_times_info,m2c_marry_times_info=j_s.m2c_marry_times_info,c2w_cancel_delete_marry=j_s.c2w_cancel_delete_marry,c2m_marry_sweet_info=j_s.c2m_marry_sweet_info,m2c_marry_sweet_info=j_s.m2c_marry_sweet_info,x_base_marry_sweet_log=j_s.x_base_marry_sweet_log,c2m_marry_sweet_info_log=j_s.c2m_marry_sweet_info_log,m2c_marry_sweet_info_log=j_s.m2c_marry_sweet_info_log,c2m_marry_sweet_upgrade=j_s.c2m_marry_sweet_upgrade,m2c_marry_sweet_upgrade=j_s.m2c_marry_sweet_upgrade,x_team_member=j_s.x_team_member,c2w_team_info=j_s.c2w_team_info,w2c_team_info=j_s.w2c_team_info,c2w_team_create=j_s.c2w_team_create,c2w_team_join=j_s.c2w_team_join,w2c_team_join=j_s.w2c_team_join,c2w_team_leave=j_s.c2w_team_leave,c2w_team_kick=j_s.c2w_team_kick,c2w_team_disband=j_s.c2w_team_disband,w2c_team_leave=j_s.w2c_team_leave,c2w_team_invite=j_s.c2w_team_invite,w2c_team_be_invite=j_s.w2c_team_be_invite,c2w_team_invite_reply=j_s.c2w_team_invite_reply,w2c_team_invite_reply=j_s.w2c_team_invite_reply,c2w_team_change_aims=j_s.c2w_team_change_aims,w2c_team_change_aims=j_s.w2c_team_change_aims,c2w_team_robot=j_s.c2w_team_robot,x_team_info=j_s.x_team_info,c2w_team_list=j_s.c2w_team_list,w2c_team_list=j_s.w2c_team_list,c2w_team_invite_rcmd=j_s.c2w_team_invite_rcmd,w2c_team_invite_rcmd=j_s.w2c_team_invite_rcmd,x_beast_ploy=j_s.x_beast_ploy,x_beast_info=j_s.x_beast_info,c2m_beast_list=j_s.c2m_beast_list,m2c_beast_list=j_s.m2c_beast_list,c2m_beast_active=j_s.c2m_beast_active,m2c_beast_info=j_s.m2c_beast_info,c2m_beast_upgrade=j_s.c2m_beast_upgrade,m2c_beast_upgrade=j_s.m2c_beast_upgrade,c2m_beast_uplevel=j_s.c2m_beast_uplevel,m2c_beast_uplevel=j_s.m2c_beast_uplevel,c2m_beast_upploy=j_s.c2m_beast_upploy,m2c_beast_upploy=j_s.m2c_beast_upploy,c2m_beast_evolve=j_s.c2m_beast_evolve,m2c_beast_evolve=j_s.m2c_beast_evolve,x_pet_ploy=j_s.x_pet_ploy,x_pet_info=j_s.x_pet_info,c2m_pet_list=j_s.c2m_pet_list,m2c_pet_list=j_s.m2c_pet_list,c2m_pet_active=j_s.c2m_pet_active,m2c_pet_info=j_s.m2c_pet_info,c2m_pet_upgrade=j_s.c2m_pet_upgrade,m2c_pet_upgrade=j_s.m2c_pet_upgrade,c2m_pet_uplevel=j_s.c2m_pet_uplevel,m2c_pet_uplevel=j_s.m2c_pet_uplevel,c2m_pet_upploy=j_s.c2m_pet_upploy,m2c_pet_upploy=j_s.m2c_pet_upploy,c2m_pet_evolve=j_s.c2m_pet_evolve,m2c_pet_evolve=j_s.m2c_pet_evolve,x_base_training=j_s.x_base_training,c2m_training_info=j_s.c2m_training_info,m2c_training_info=j_s.m2c_training_info,c2m_training_active=j_s.c2m_training_active,m2c_training_one_info=j_s.m2c_training_one_info,c2m_training_up_lv=j_s.c2m_training_up_lv,c2m_training_up_star=j_s.c2m_training_up_star,c2m_godEquip_wear=j_s.c2m_godEquip_wear,c2m_godEquip_compose=j_s.c2m_godEquip_compose,m2c_godEquip_compose=j_s.m2c_godEquip_compose,w2c_red_envelopes_recharge_info=j_s.w2c_red_envelopes_recharge_info,c2w_red_envelopes_recharge_send=j_s.c2w_red_envelopes_recharge_send,w2c_red_envelopes_recharge_send=j_s.w2c_red_envelopes_recharge_send,x_red_envelopes_recharge=j_s.x_red_envelopes_recharge,c2w_red_envelopes_recharge_receive=j_s.c2w_red_envelopes_recharge_receive,w2c_red_envelopes_recharge_receive=j_s.w2c_red_envelopes_recharge_receive,x_red_envelopes_sendInfo=j_s.x_red_envelopes_sendInfo,x_red_envelopes_receiveInfo=j_s.x_red_envelopes_receiveInfo,c2w_red_envelopes_recharge_bigInfo=j_s.c2w_red_envelopes_recharge_bigInfo,w2c_red_envelopes_recharge_bigInfo=j_s.w2c_red_envelopes_recharge_bigInfo,x_red_envelopes_rec_info=j_s.x_red_envelopes_rec_info,c2w_red_envelopes_rec_info=j_s.c2w_red_envelopes_rec_info,w2c_red_envelopes_rec_info=j_s.w2c_red_envelopes_rec_info,x_base_clone_equip=j_s.x_base_clone_equip,x_base_clone=j_s.x_base_clone,c2m_clone_info=j_s.c2m_clone_info,m2c_clone_info=j_s.m2c_clone_info,c2m_clone_wear_equip=j_s.c2m_clone_wear_equip,m2c_clone_wear_equip=j_s.m2c_clone_wear_equip,c2m_clone_act=j_s.c2m_clone_act,m2c_clone_act=j_s.m2c_clone_act,c2m_clone_up_lv=j_s.c2m_clone_up_lv,m2c_clone_up_lv=j_s.m2c_clone_up_lv,c2m_clone_up_breach=j_s.c2m_clone_up_breach,m2c_clone_up_breach=j_s.m2c_clone_up_breach,x_advert_base=j_s.x_advert_base,c2m_advert_Info=j_s.c2m_advert_Info,m2c_advert_Info=j_s.m2c_advert_Info,m2c_advert_one_advert=j_s.m2c_advert_one_advert,c2m_advert_recharge=j_s.c2m_advert_recharge,m2c_advert_recharge=j_s.m2c_advert_recharge,x_adventure_info=j_s.x_adventure_info,m2c_adventure_trigger=j_s.m2c_adventure_trigger,c2m_get_adventure_info=j_s.c2m_get_adventure_info,m2c_get_adventure_info=j_s.m2c_get_adventure_info,c2m_adventure_shop_buy=j_s.c2m_adventure_shop_buy,c2m_adventure_question=j_s.c2m_adventure_question,c2m_adventure_give_up=j_s.c2m_adventure_give_up,m2c_adventure_end=j_s.m2c_adventure_end,c2m_adventure_receive_recharge=j_s.c2m_adventure_receive_recharge,c2m_body_info=j_s.c2m_body_info,m2c_body_info=j_s.m2c_body_info,c2m_body_cultivation=j_s.c2m_body_cultivation,m2c_body_cultivation=j_s.m2c_body_cultivation,c2m_body_sub_level_up=j_s.c2m_body_sub_level_up,m2c_body_sub_level_up=j_s.m2c_body_sub_level_up,c2m_body_level_up=j_s.c2m_body_level_up,m2c_body_level_up=j_s.m2c_body_level_up,c2w_activity_record=j_s.c2w_activity_record,c2w_activity_get_reward=j_s.c2w_activity_get_reward,w2c_gsa_start=j_s.w2c_gsa_start,w2c_gsa_close=j_s.w2c_gsa_close,c2w_gsa_query=j_s.c2w_gsa_query,w2c_bga_start=j_s.w2c_bga_start,w2c_bga_stop=j_s.w2c_bga_stop,c2w_bga_query=j_s.c2w_bga_query,c2w_bga_desc=j_s.c2w_bga_desc,c2w_bosscome_info=j_s.c2w_bosscome_info,w2c_bosscome_info=j_s.w2c_bosscome_info,c2w_bosscome_challenge=j_s.c2w_bosscome_challenge,c2w_bosscome_challenge_list=j_s.c2w_bosscome_challenge_list,x_bosscome_challenge_list_plr=j_s.x_bosscome_challenge_list_plr,w2c_bosscome_challenge_list=j_s.w2c_bosscome_challenge_list,c2w_bosscome_buy_times=j_s.c2w_bosscome_buy_times,w2c_bosscome_buy_times=j_s.w2c_bosscome_buy_times,c2m_bosscome_inspire=j_s.c2m_bosscome_inspire,m2c_bosscome_inspire=j_s.m2c_bosscome_inspire,c2w_bosscome_inspire=j_s.c2w_bosscome_inspire,w2c_bosscome_inspire=j_s.w2c_bosscome_inspire,x_bosscome_rank_plr=j_s.x_bosscome_rank_plr,c2w_bosscome_rank_plr=j_s.c2w_bosscome_rank_plr,w2c_bosscome_rank_plr=j_s.w2c_bosscome_rank_plr,x_bosscome_rank_guild=j_s.x_bosscome_rank_guild,c2w_bosscome_rank_guild=j_s.c2w_bosscome_rank_guild,w2c_bosscome_rank_guild=j_s.w2c_bosscome_rank_guild,c2w_bosscome_get_reward=j_s.c2w_bosscome_get_reward,w2c_bosscome_get_reward=j_s.w2c_bosscome_get_reward,c2w_bosscome_kill_record=j_s.c2w_bosscome_kill_record,x_bosscome_kill_record=j_s.x_bosscome_kill_record,w2c_bosscome_kill_record=j_s.w2c_bosscome_kill_record,c2m_bosscome_rob_begin=j_s.c2m_bosscome_rob_begin,m2c_bosscome_rob_end=j_s.m2c_bosscome_rob_end,c2w_bosscome_challenge_record=j_s.c2w_bosscome_challenge_record,x_bosscome_challenge_record=j_s.x_bosscome_challenge_record,x_bosscome_rob_record=j_s.x_bosscome_rob_record,w2c_bosscome_challenge_record=j_s.w2c_bosscome_challenge_record,m2c_bosscome_challenge_result=j_s.m2c_bosscome_challenge_result,m2c_bosscome_fb_info=j_s.m2c_bosscome_fb_info,w2c_bosscome_boss_hp_sync=j_s.w2c_bosscome_boss_hp_sync,w2c_gsaRec_first_recharge=j_s.w2c_gsaRec_first_recharge,c2w_gsaAct_first_recharge_reward=j_s.c2w_gsaAct_first_recharge_reward,w2c_gsaRec_daily_recharge=j_s.w2c_gsaRec_daily_recharge,c2w_gsaAct_daily_recharge_reward=j_s.c2w_gsaAct_daily_recharge_reward,x_gsa_single_recharge_record=j_s.x_gsa_single_recharge_record,w2c_gsaRec_single_recharge=j_s.w2c_gsaRec_single_recharge,c2w_gsaAct_single_recharge_reward=j_s.c2w_gsaAct_single_recharge_reward,w2c_gsaRec_acum_recharge=j_s.w2c_gsaRec_acum_recharge,c2w_gsaAct_acum_recharge_reward=j_s.c2w_gsaAct_acum_recharge_reward,w2c_bgaRec_single_recharge=j_s.w2c_bgaRec_single_recharge,c2w_bgaAct_single_recharge_reward=j_s.c2w_bgaAct_single_recharge_reward,w2c_bgaRec_acum_recharge=j_s.w2c_bgaRec_acum_recharge,c2w_bgaAct_acum_recharge_reward=j_s.c2w_bgaAct_acum_recharge_reward,w2c_gsaRec_daily_consumption=j_s.w2c_gsaRec_daily_consumption,c2w_gsaAct_daily_consumption_reward=j_s.c2w_gsaAct_daily_consumption_reward,x_continue_recharge_item=j_s.x_continue_recharge_item,x_continue_recharge_record=j_s.x_continue_recharge_record,w2c_bgaRec_continue_recharge=j_s.w2c_bgaRec_continue_recharge,c2w_bgaAct_continue_recharge_reward=j_s.c2w_bgaAct_continue_recharge_reward,x_activeness_gift_item=j_s.x_activeness_gift_item,x_activeness_gift_record=j_s.x_activeness_gift_record,w2c_bgaRec_activeness_gift=j_s.w2c_bgaRec_activeness_gift,c2w_bgaAct_activeness_gift_reward=j_s.c2w_bgaAct_activeness_gift_reward,c2w_gsaAct_get_aim_reward=j_s.c2w_gsaAct_get_aim_reward,w2c_gsaRec_opensvr_rank=j_s.w2c_gsaRec_opensvr_rank,w2c_gsaRec_opensvr_continuous_recharge=j_s.w2c_gsaRec_opensvr_continuous_recharge,c2w_gsaAct_continue_recharge_reward=j_s.c2w_gsaAct_continue_recharge_reward,w2c_gsaRec_tmguildctrb_rank=j_s.w2c_gsaRec_tmguildctrb_rank,c2w_gsaAct_tmguildctrb_rank_reward=j_s.c2w_gsaAct_tmguildctrb_rank_reward,w2c_gsaRec_tmapvpscore_rank=j_s.w2c_gsaRec_tmapvpscore_rank,c2w_gsaAct_tmapvpscore_rank_reward=j_s.c2w_gsaAct_tmapvpscore_rank_reward,c2w_gsaAct_tmapvpscore_rank_cross_state=j_s.c2w_gsaAct_tmapvpscore_rank_cross_state,w2c_gsaAct_tmapvpscore_rank_cross_state=j_s.w2c_gsaAct_tmapvpscore_rank_cross_state,w2c_gsaRec_tmbanquet_rank=j_s.w2c_gsaRec_tmbanquet_rank,c2w_gsaAct_tmbanquet_rank_reward=j_s.c2w_gsaAct_tmbanquet_rank_reward,x_rec_xgmb_exchange=j_s.x_rec_xgmb_exchange,w2c_gsaRec_xgmb_point=j_s.w2c_gsaRec_xgmb_point,c2w_gsaAct_xgmb_usekey=j_s.c2w_gsaAct_xgmb_usekey,c2w_gsaAct_xgmb_exchange=j_s.c2w_gsaAct_xgmb_exchange,c2w_gsaAct_xgmb_rank_reward=j_s.c2w_gsaAct_xgmb_rank_reward,w2c_gsaRec_xgmb_festival_point=j_s.w2c_gsaRec_xgmb_festival_point,c2w_gsaAct_xgmb_festival_usekey=j_s.c2w_gsaAct_xgmb_festival_usekey,c2w_gsaAct_xgmb_festival_exchange=j_s.c2w_gsaAct_xgmb_festival_exchange,c2w_gsaAct_xgmb_festival_rank_reward=j_s.c2w_gsaAct_xgmb_festival_rank_reward,x_rec_qltb_exchange=j_s.x_rec_qltb_exchange,w2c_gsaRec_qltb_point=j_s.w2c_gsaRec_qltb_point,c2w_gsaAct_qltb_usekey=j_s.c2w_gsaAct_qltb_usekey,c2w_gsaAct_qltb_exchange=j_s.c2w_gsaAct_qltb_exchange,c2w_gsaAct_qltb_rank_reward=j_s.c2w_gsaAct_qltb_rank_reward,x_rec_qltb_festival_exchange=j_s.x_rec_qltb_festival_exchange,w2c_gsaRec_qltb_festival_point=j_s.w2c_gsaRec_qltb_festival_point,c2w_gsaAct_qltb_festival_usekey=j_s.c2w_gsaAct_qltb_festival_usekey,c2w_gsaAct_qltb_festival_exchange=j_s.c2w_gsaAct_qltb_festival_exchange,c2w_gsaAct_qltb_festival_rank_reward=j_s.c2w_gsaAct_qltb_festival_rank_reward,w2c_gsaRec_powerGain_rank=j_s.w2c_gsaRec_powerGain_rank,c2w_gsaAct_powerGain_rank_reward=j_s.c2w_gsaAct_powerGain_rank_reward,w2c_gsaRec_talismanGain_rank=j_s.w2c_gsaRec_talismanGain_rank,c2w_gsaAct_talismanGain_rank_reward=j_s.c2w_gsaAct_talismanGain_rank_reward,w2c_gsaRec_talismanAptGain_rank=j_s.w2c_gsaRec_talismanAptGain_rank,c2w_gsaAct_talismanAptGain_rank_reward=j_s.c2w_gsaAct_talismanAptGain_rank_reward,w2c_gsaRec_xianYuanGain_rank=j_s.w2c_gsaRec_xianYuanGain_rank,c2w_gsaAct_xianYuanGain_rank_reward=j_s.c2w_gsaAct_xianYuanGain_rank_reward,x_server_rank_info=j_s.x_server_rank_info,q2c_csaRec_powerGain_rank=j_s.q2c_csaRec_powerGain_rank,c2q_csaAct_powerGain_rank_reward=j_s.c2q_csaAct_powerGain_rank_reward,q2c_csaRec_talismanGain_rank=j_s.q2c_csaRec_talismanGain_rank,c2q_csaAct_talismanGain_rank_reward=j_s.c2q_csaAct_talismanGain_rank_reward,q2c_csaRec_talismanAptGain_rank=j_s.q2c_csaRec_talismanAptGain_rank,c2q_csaAct_talismanAptGain_rank_reward=j_s.c2q_csaAct_talismanAptGain_rank_reward,q2c_csaRec_xianYuanGain_rank=j_s.q2c_csaRec_xianYuanGain_rank,c2q_csaAct_xianYuanGain_rank_reward=j_s.c2q_csaAct_xianYuanGain_rank_reward,q2c_csaRec_asyncPvp_rank=j_s.q2c_csaRec_asyncPvp_rank,c2q_csaAct_asyncPvp_rank_reward=j_s.c2q_csaAct_asyncPvp_rank_reward,w2c_bgaRec_powerGain_rank=j_s.w2c_bgaRec_powerGain_rank,c2w_bgaAct_powerGain_rank_reward=j_s.c2w_bgaAct_powerGain_rank_reward,c2w_bgaAct_powerGain_rank_info=j_s.c2w_bgaAct_powerGain_rank_info,w2c_bgaAct_powerGain_rank_info=j_s.w2c_bgaAct_powerGain_rank_info,w2c_bgaRec_talismanGain_rank=j_s.w2c_bgaRec_talismanGain_rank,c2w_bgaAct_talismanGain_rank_reward=j_s.c2w_bgaAct_talismanGain_rank_reward,c2w_bgaAct_talismanGain_rank_info=j_s.c2w_bgaAct_talismanGain_rank_info,w2c_bgaAct_talismanGain_rank_info=j_s.w2c_bgaAct_talismanGain_rank_info,w2c_bgaRec_talismanAptGain_rank=j_s.w2c_bgaRec_talismanAptGain_rank,c2w_bgaAct_talismanAptGain_rank_reward=j_s.c2w_bgaAct_talismanAptGain_rank_reward,c2w_bgaAct_talismanAptGain_rank_info=j_s.c2w_bgaAct_talismanAptGain_rank_info,w2c_bgaAct_talismanAptGain_rank_info=j_s.w2c_bgaAct_talismanAptGain_rank_info,w2c_bgaRec_xianYuanGain_rank=j_s.w2c_bgaRec_xianYuanGain_rank,c2w_bgaAct_xianYuanGain_rank_reward=j_s.c2w_bgaAct_xianYuanGain_rank_reward,c2w_bgaAct_xianYuanGain_rank_info=j_s.c2w_bgaAct_xianYuanGain_rank_info,w2c_bgaAct_xianYuanGain_rank_info=j_s.w2c_bgaAct_xianYuanGain_rank_info,w2c_bgaRec_async_pvp_rank=j_s.w2c_bgaRec_async_pvp_rank,c2w_bgaAct_async_pvp_rank_reward=j_s.c2w_bgaAct_async_pvp_rank_reward,c2w_bgaAct_async_pvp_rank_info=j_s.c2w_bgaAct_async_pvp_rank_info,w2c_bgaAct_async_pvp_rank_info=j_s.w2c_bgaAct_async_pvp_rank_info,x_rec_marry_sweet_rank=j_s.x_rec_marry_sweet_rank,q2c_csaRec_sweetGain_rank=j_s.q2c_csaRec_sweetGain_rank,c2w_csaAct_sweetGain_rank_reward=j_s.c2w_csaAct_sweetGain_rank_reward,x_sweet_rank_item=j_s.x_sweet_rank_item,q2c_sweet_rank_page=j_s.q2c_sweet_rank_page,x_rec_arena_rush_rank=j_s.x_rec_arena_rush_rank,w2c_gsaRec_arenaRush_rank=j_s.w2c_gsaRec_arenaRush_rank,c2w_get_arenaRush_target_reward=j_s.c2w_get_arenaRush_target_reward,w2c_get_arenaRush_target_reward_reply=j_s.w2c_get_arenaRush_target_reward_reply,c2w_get_arenaRush_rank_reward=j_s.c2w_get_arenaRush_rank_reward,w2c_arenaRush_high_rank_changed=j_s.w2c_arenaRush_high_rank_changed,c2w_invite_report_status=j_s.c2w_invite_report_status,x_invite_repsort_status=j_s.x_invite_repsort_status,w2c_invite_report_status=j_s.w2c_invite_report_status,c2w_invite_reward_status=j_s.c2w_invite_reward_status,x_invite_reward_status=j_s.x_invite_reward_status,w2c_invite_reward_status=j_s.w2c_invite_reward_status,c2w_invite_get_reward=j_s.c2w_invite_get_reward,x_sgsq_exchange=j_s.x_sgsq_exchange,w2c_gsaRec_sgsq=j_s.w2c_gsaRec_sgsq,c2w_gsaAct_sgsq_exchange=j_s.c2w_gsaAct_sgsq_exchange,x_miner_info=j_s.x_miner_info,c2w_gsa_minewar_miner=j_s.c2w_gsa_minewar_miner,w2c_gsa_minewar_miner=j_s.w2c_gsa_minewar_miner,x_mine_info=j_s.x_mine_info,c2w_gsa_minewar_mines=j_s.c2w_gsa_minewar_mines,w2c_gsa_minewar_mines=j_s.w2c_gsa_minewar_mines,x_tre_slot_info=j_s.x_tre_slot_info,c2w_gsa_minewar_mine_detail=j_s.c2w_gsa_minewar_mine_detail,w2c_gsa_minewar_mine_detail=j_s.w2c_gsa_minewar_mine_detail,c2w_gsa_minewar_battle=j_s.c2w_gsa_minewar_battle,w2c_gsa_minewar_battle_res=j_s.w2c_gsa_minewar_battle_res,c2w_gsa_minewar_move=j_s.c2w_gsa_minewar_move,w2c_gsa_minewar_move=j_s.w2c_gsa_minewar_move,w2c_gsa_minewar_slot=j_s.w2c_gsa_minewar_slot,c2w_gsa_minewar_enterslot=j_s.c2w_gsa_minewar_enterslot,w2c_gsa_minewar_enterslot=j_s.w2c_gsa_minewar_enterslot,c2w_gsa_minewar_buy=j_s.c2w_gsa_minewar_buy,w2c_gsa_minewar_buy=j_s.w2c_gsa_minewar_buy,x_exchange_num=j_s.x_exchange_num,c2w_gsa_minewar_exchange=j_s.c2w_gsa_minewar_exchange,w2c_gsa_minewar_exchange=j_s.w2c_gsa_minewar_exchange,c2w_gsa_minewar_exchange_num=j_s.c2w_gsa_minewar_exchange_num,w2c_gsa_minewar_exchange_num=j_s.w2c_gsa_minewar_exchange_num,c2w_gsa_minewar_rank_reward=j_s.c2w_gsa_minewar_rank_reward,w2c_gsa_minewar_rank_reward=j_s.w2c_gsa_minewar_rank_reward,x_gsa_achv=j_s.x_gsa_achv,c2w_gsa_minewar_achvs=j_s.c2w_gsa_minewar_achvs,w2c_gsa_minewar_achvs=j_s.w2c_gsa_minewar_achvs,c2w_gsa_minewar_achvrwd=j_s.c2w_gsa_minewar_achvrwd,w2c_gsa_minewar_achvrwd=j_s.w2c_gsa_minewar_achvrwd,x_record_1=j_s.x_record_1,x_record_2=j_s.x_record_2,c2w_gsa_minewar_records=j_s.c2w_gsa_minewar_records,w2c_gsa_minewar_records=j_s.w2c_gsa_minewar_records,c2w_gsa_minewar_stage=j_s.c2w_gsa_minewar_stage,w2c_gsa_minewar_stage=j_s.w2c_gsa_minewar_stage,x_base_minewar_report=j_s.x_base_minewar_report,c2w_gsa_minewar_reports=j_s.c2w_gsa_minewar_reports,w2c_gsa_minewar_reports=j_s.w2c_gsa_minewar_reports,x_turntable_exchange=j_s.x_turntable_exchange,x_turntable_item=j_s.x_turntable_item,w2c_gsaRec_turntable=j_s.w2c_gsaRec_turntable,c2w_gsaAct_turntable_turn=j_s.c2w_gsaAct_turntable_turn,w2c_gsaAct_turntable_turn=j_s.w2c_gsaAct_turntable_turn,c2w_gsaAct_turntable_exchange=j_s.c2w_gsaAct_turntable_exchange,x_turntable_record=j_s.x_turntable_record,c2w_gsaAct_turntable_record=j_s.c2w_gsaAct_turntable_record,w2c_gsaRec_turntable_record=j_s.w2c_gsaRec_turntable_record,w2c_bgaRec_turntable=j_s.w2c_bgaRec_turntable,c2w_bgaAct_turntable_turn=j_s.c2w_bgaAct_turntable_turn,w2c_bgaAct_turntable_turn=j_s.w2c_bgaAct_turntable_turn,c2w_bgaAct_turntable_exchange=j_s.c2w_bgaAct_turntable_exchange,c2w_bgaAct_turntable_record=j_s.c2w_bgaAct_turntable_record,w2c_bgaRec_turntable_record=j_s.w2c_bgaRec_turntable_record,x_gsaRec_zuhe_status_elem=j_s.x_gsaRec_zuhe_status_elem,x_gsaRec_zuhe_status=j_s.x_gsaRec_zuhe_status,w2c_gsaRec_zuhe_status=j_s.w2c_gsaRec_zuhe_status,c2w_gsaAct_zuhe_getReward=j_s.c2w_gsaAct_zuhe_getReward,x_limitGift_buy=j_s.x_limitGift_buy,w2c_gsaRec_limitGift=j_s.w2c_gsaRec_limitGift,c2w_gsaAct_limitGift_buy=j_s.c2w_gsaAct_limitGift_buy,w2c_bgaRec_limitGift=j_s.w2c_bgaRec_limitGift,c2w_bgaAct_limitGift_buy=j_s.c2w_bgaAct_limitGift_buy,x_limitReward_item=j_s.x_limitReward_item,w2c_gsaRec_limitReward=j_s.w2c_gsaRec_limitReward,c2w_gsaAct_limitReward_get=j_s.c2w_gsaAct_limitReward_get,c2w_friend_discount_info=j_s.c2w_friend_discount_info,x_discount_friend_info=j_s.x_discount_friend_info,x_friend_discount_reward=j_s.x_friend_discount_reward,w2c_friend_discount_info=j_s.w2c_friend_discount_info,c2w_friend_discount=j_s.c2w_friend_discount,w2c_friend_discount=j_s.w2c_friend_discount,c2w_friend_discount_invite=j_s.c2w_friend_discount_invite,w2c_friend_discount_invite=j_s.w2c_friend_discount_invite,x_base_discount_friend=j_s.x_base_discount_friend,c2w_discount_friend_list=j_s.c2w_discount_friend_list,w2c_discount_friend_list=j_s.w2c_discount_friend_list,x_guild_krieg_prop_info=j_s.x_guild_krieg_prop_info,x_guild_krieg_member_info=j_s.x_guild_krieg_member_info,x_guild_krieg_boss_info=j_s.x_guild_krieg_boss_info,c2w_guild_krieg_main_ui_info=j_s.c2w_guild_krieg_main_ui_info,w2c_guild_krieg_main_ui_info=j_s.w2c_guild_krieg_main_ui_info,c2w_guild_krieg_use_prop=j_s.c2w_guild_krieg_use_prop,w2c_guild_krieg_use_prop=j_s.w2c_guild_krieg_use_prop,c2w_guild_krieg_base_info=j_s.c2w_guild_krieg_base_info,w2c_guild_krieg_base_info=j_s.w2c_guild_krieg_base_info,c2w_guild_krieg_member_info=j_s.c2w_guild_krieg_member_info,w2c_guild_krieg_member_info=j_s.w2c_guild_krieg_member_info,c2w_guild_krieg_setting_att=j_s.c2w_guild_krieg_setting_att,c2w_guild_krieg_enter_map=j_s.c2w_guild_krieg_enter_map,w2c_guild_krieg_broadcast_guild_item=j_s.w2c_guild_krieg_broadcast_guild_item,c2w_guild_krieg_base_list=j_s.c2w_guild_krieg_base_list,w2c_guild_krieg_boss_list=j_s.w2c_guild_krieg_boss_list,c2w_guild_krieg_leave_map=j_s.c2w_guild_krieg_leave_map,m2c_guild_krieg_reward_info=j_s.m2c_guild_krieg_reward_info,w2c_guild_krieg_boss_reward_info=j_s.w2c_guild_krieg_boss_reward_info,w2c_bgaDesc_incrank=j_s.w2c_bgaDesc_incrank,c2w_roulette_info=j_s.c2w_roulette_info,w2c_roulette_info=j_s.w2c_roulette_info,x_roulette_record=j_s.x_roulette_record,c2w_roulette_record=j_s.c2w_roulette_record,w2c_roulette_record=j_s.w2c_roulette_record,c2w_roulette_start=j_s.c2w_roulette_start,w2c_roulette_start=j_s.w2c_roulette_start,c2w_roulette_get_reward=j_s.c2w_roulette_get_reward,w2c_roulette_get_reward=j_s.w2c_roulette_get_reward,c2q_gsa_minewar_miner=j_s.c2q_gsa_minewar_miner,q2c_gsa_minewar_miner=j_s.q2c_gsa_minewar_miner,c2q_gsa_minewar_mines=j_s.c2q_gsa_minewar_mines,q2c_gsa_minewar_mines=j_s.q2c_gsa_minewar_mines,c2q_gsa_minewar_mine_detail=j_s.c2q_gsa_minewar_mine_detail,q2c_gsa_minewar_mine_detail=j_s.q2c_gsa_minewar_mine_detail,c2q_gsa_minewar_battle=j_s.c2q_gsa_minewar_battle,q2c_gsa_minewar_battle_res=j_s.q2c_gsa_minewar_battle_res,c2q_gsa_minewar_move=j_s.c2q_gsa_minewar_move,q2c_gsa_minewar_move=j_s.q2c_gsa_minewar_move,q2c_gsa_minewar_slot=j_s.q2c_gsa_minewar_slot,c2q_gsa_minewar_enterslot=j_s.c2q_gsa_minewar_enterslot,q2c_gsa_minewar_enterslot=j_s.q2c_gsa_minewar_enterslot,c2q_gsa_minewar_buy=j_s.c2q_gsa_minewar_buy,q2c_gsa_minewar_buy=j_s.q2c_gsa_minewar_buy,c2q_gsa_minewar_exchange=j_s.c2q_gsa_minewar_exchange,q2c_gsa_minewar_exchange=j_s.q2c_gsa_minewar_exchange,c2q_gsa_minewar_exchange_num=j_s.c2q_gsa_minewar_exchange_num,q2c_gsa_minewar_exchange_num=j_s.q2c_gsa_minewar_exchange_num,c2q_gsa_minewar_rank_reward=j_s.c2q_gsa_minewar_rank_reward,q2c_gsa_minewar_rank_reward=j_s.q2c_gsa_minewar_rank_reward,c2q_gsa_minewar_achvs=j_s.c2q_gsa_minewar_achvs,q2c_gsa_minewar_achvs=j_s.q2c_gsa_minewar_achvs,c2q_gsa_minewar_achvrwd=j_s.c2q_gsa_minewar_achvrwd,q2c_gsa_minewar_achvrwd=j_s.q2c_gsa_minewar_achvrwd,c2q_gsa_minewar_records=j_s.c2q_gsa_minewar_records,q2c_gsa_minewar_records=j_s.q2c_gsa_minewar_records,c2q_gsa_minewar_stage=j_s.c2q_gsa_minewar_stage,q2c_gsa_minewar_stage=j_s.q2c_gsa_minewar_stage,c2q_gsa_minewar_reports=j_s.c2q_gsa_minewar_reports,q2c_gsa_minewar_reports=j_s.q2c_gsa_minewar_reports,c2q_crossboss_list=j_s.c2q_crossboss_list,q2c_crossboss_list=j_s.q2c_crossboss_list,c2q_crossboss_buyrwdtimes=j_s.c2q_crossboss_buyrwdtimes,q2c_crossboss_buyrwdtimes=j_s.q2c_crossboss_buyrwdtimes,m2c_crossboss_owner=j_s.m2c_crossboss_owner,m2c_crossboss_kill=j_s.m2c_crossboss_kill,c2m_crossboss_reborn_weariness=j_s.c2m_crossboss_reborn_weariness,m2c_crossboss_reborn_weariness=j_s.m2c_crossboss_reborn_weariness,x_login_reward_item=j_s.x_login_reward_item,x_login_record=j_s.x_login_record,w2c_bgaRec_login_activity=j_s.w2c_bgaRec_login_activity,c2w_bgaAct_login_activity_reward_get=j_s.c2w_bgaAct_login_activity_reward_get,x_holiday_reward_item=j_s.x_holiday_reward_item,x_holiday_gift_record=j_s.x_holiday_gift_record,w2c_bgaRec_holiday_gift=j_s.w2c_bgaRec_holiday_gift,c2w_bgaAct_holiday_gift_reward_get=j_s.c2w_bgaAct_holiday_gift_reward_get,x_opensvr_discount_record=j_s.x_opensvr_discount_record,w2c_gsaRec_opensvr_discount_recharge=j_s.w2c_gsaRec_opensvr_discount_recharge,c2w_gsaAct_opensvr_discount_recharge_reward=j_s.c2w_gsaAct_opensvr_discount_recharge_reward,x_dragon_palace_boss_info=j_s.x_dragon_palace_boss_info,c2q_dragon_palace_boss_list=j_s.c2q_dragon_palace_boss_list,q2c_dragon_palace_boss_list=j_s.q2c_dragon_palace_boss_list,c2q_dragon_palace_buyrwdtimes=j_s.c2q_dragon_palace_buyrwdtimes,q2c_dragon_palace_buyrwdtimes=j_s.q2c_dragon_palace_buyrwdtimes,c2q_fb_dragon_palace_dmg_rank=j_s.c2q_fb_dragon_palace_dmg_rank,q2c_fb_dragon_palace_dmg_rank=j_s.q2c_fb_dragon_palace_dmg_rank,q2c_fb_server_dragon_palace_dmg_rank=j_s.q2c_fb_server_dragon_palace_dmg_rank,w2c_bg_red_envelopes_start=j_s.w2c_bg_red_envelopes_start,w2c_bg_red_envelopes_stop=j_s.w2c_bg_red_envelopes_stop,c2w_bg_red_envelopes_receive=j_s.c2w_bg_red_envelopes_receive,w2c_bg_red_envelopes_receive=j_s.w2c_bg_red_envelopes_receive,x_guarding_nantianmen_attack=j_s.x_guarding_nantianmen_attack,c2q_guarding_nantianmen_info=j_s.c2q_guarding_nantianmen_info,x_damage_rank_info=j_s.x_damage_rank_info,q2c_guarding_nantianmen_info=j_s.q2c_guarding_nantianmen_info,c2q_guarding_nantianmen_dmg_info=j_s.c2q_guarding_nantianmen_dmg_info,m2c_guarding_nantianmen_challenge_result=j_s.m2c_guarding_nantianmen_challenge_result,c2m_guarding_nantianmen_attack=j_s.c2m_guarding_nantianmen_attack,x_guarding_nantianmen_attack_result=j_s.x_guarding_nantianmen_attack_result,m2c_guarding_nantianmen_attack=j_s.m2c_guarding_nantianmen_attack,c2m_query_guarding_nantianmen_format=j_s.c2m_query_guarding_nantianmen_format,m2c_query_guarding_nantianmen_format_reply=j_s.m2c_query_guarding_nantianmen_format_reply,c2m_change_guarding_nantianmen_format=j_s.c2m_change_guarding_nantianmen_format,x_guarding_nantianmen_attack_record=j_s.x_guarding_nantianmen_attack_record,c2q_query_guarding_nantianmen_attack_record=j_s.c2q_query_guarding_nantianmen_attack_record,q2c_query_guarding_nantianmen_attack_record=j_s.q2c_query_guarding_nantianmen_attack_record,c2q_query_guarding_nantianmen_defense_record=j_s.c2q_query_guarding_nantianmen_defense_record,q2c_query_guarding_nantianmen_defense_record=j_s.q2c_query_guarding_nantianmen_defense_record,c2m_set_guarding_nantianmen_clone=j_s.c2m_set_guarding_nantianmen_clone,c2m_query_guarding_nantianmen_clone=j_s.c2m_query_guarding_nantianmen_clone,m2c_guarding_nantianmen_clone=j_s.m2c_guarding_nantianmen_clone,q2c_be_attack_in_guarding_nantianmen=j_s.q2c_be_attack_in_guarding_nantianmen,q2c_guarding_nantianmen_score_changed=j_s.q2c_guarding_nantianmen_score_changed,x_double_pvp_plr_info=j_s.x_double_pvp_plr_info,x_double_pvp_team_info=j_s.x_double_pvp_team_info,c2q_double_pvp_info=j_s.c2q_double_pvp_info,q2c_double_pvp_info=j_s.q2c_double_pvp_info,c2q_double_pvp_create_team=j_s.c2q_double_pvp_create_team,q2c_double_pvp_self_team=j_s.q2c_double_pvp_self_team,c2w_double_pvp_invitation_list=j_s.c2w_double_pvp_invitation_list,q2c_double_pvp_invitation_list=j_s.q2c_double_pvp_invitation_list,c2q_double_pvp_invitation_plr=j_s.c2q_double_pvp_invitation_plr,q2c_double_pvp_invitation_plr=j_s.q2c_double_pvp_invitation_plr,q2c_double_pvp_be_invitation_plr=j_s.q2c_double_pvp_be_invitation_plr,c2q_double_pvp_invitation_accept=j_s.c2q_double_pvp_invitation_accept,c2q_double_pvp_invitation_refuse=j_s.c2q_double_pvp_invitation_refuse,c2q_double_pvp_be_invitation_list=j_s.c2q_double_pvp_be_invitation_list,q2c_double_pvp_be_invitation_list=j_s.q2c_double_pvp_be_invitation_list,c2q_double_pvp_team_list=j_s.c2q_double_pvp_team_list,q2c_double_pvp_team_list=j_s.q2c_double_pvp_team_list,c2q_double_pvp_team_join=j_s.c2q_double_pvp_team_join,c2q_double_pvp_team_kick=j_s.c2q_double_pvp_team_kick,c2q_double_pvp_team_dissolution=j_s.c2q_double_pvp_team_dissolution,c2q_double_pvp_team_leave=j_s.c2q_double_pvp_team_leave,q2c_double_pvp_team_msg=j_s.q2c_double_pvp_team_msg,c2q_double_pvp_change_name=j_s.c2q_double_pvp_change_name,q2c_double_pvp_change_name=j_s.q2c_double_pvp_change_name,c2q_double_pvp_team_info=j_s.c2q_double_pvp_team_info,q2c_double_pvp_team_info=j_s.q2c_double_pvp_team_info,q2c_double_pvp_plr_update=j_s.q2c_double_pvp_plr_update,x_double_pvp_record_info=j_s.x_double_pvp_record_info,c2q_double_pvp_record=j_s.c2q_double_pvp_record,q2c_double_pvp_record=j_s.q2c_double_pvp_record,x_double_pvp_rank=j_s.x_double_pvp_rank,c2q_double_pvp_get_rank=j_s.c2q_double_pvp_get_rank,q2c_double_pvp_get_rank=j_s.q2c_double_pvp_get_rank,c2m_double_pvp_clone_formation=j_s.c2m_double_pvp_clone_formation,m2c_double_pvp_clone_formation=j_s.m2c_double_pvp_clone_formation,c2q_double_pvp_member_clone_formation=j_s.c2q_double_pvp_member_clone_formation,q2c_double_pvp_member_clone_formation=j_s.q2c_double_pvp_member_clone_formation,x_double_pvp_fight_ret=j_s.x_double_pvp_fight_ret,x_double_pvp_clone_equip=j_s.x_double_pvp_clone_equip,x_double_pvp_match_plr_info=j_s.x_double_pvp_match_plr_info,c2q_double_pvp_match=j_s.c2q_double_pvp_match,q2c_double_pvp_match=j_s.q2c_double_pvp_match,c2m_double_pvp_match_clean_cool=j_s.c2m_double_pvp_match_clean_cool,c2q_double_pvp_match_buy_count=j_s.c2q_double_pvp_match_buy_count,c2q_double_pvp_challenge=j_s.c2q_double_pvp_challenge,c2q_double_pvp_join_map=j_s.c2q_double_pvp_join_map,c2q_double_pvp_revenge=j_s.c2q_double_pvp_revenge,c2q_double_pvp_rank_reward=j_s.c2q_double_pvp_rank_reward,c2q_double_pvp_int_reward=j_s.c2q_double_pvp_int_reward,q2c_double_pvp_create_team_ok=j_s.q2c_double_pvp_create_team_ok,w2c_gsaRec_investment_plan=j_s.w2c_gsaRec_investment_plan,c2w_gsaAct_get_investment_plan_reward=j_s.c2w_gsaAct_get_investment_plan_reward,w2c_gsaRec_grow_up_fund=j_s.w2c_gsaRec_grow_up_fund,c2w_gsaAct_get_grow_up_reward=j_s.c2w_gsaAct_get_grow_up_reward,x_rec_rank_head=j_s.x_rec_rank_head,q2c_csaRec_charge_rank=j_s.q2c_csaRec_charge_rank,c2w_get_charge_rank_target_reward=j_s.c2w_get_charge_rank_target_reward,q2c_get_charge_rank_target_reward_reply=j_s.q2c_get_charge_rank_target_reward_reply,c2w_get_charge_rank_reward=j_s.c2w_get_charge_rank_reward,q2c_csaRec_consume_rank=j_s.q2c_csaRec_consume_rank,c2w_get_consume_rank_target_reward=j_s.c2w_get_consume_rank_target_reward,q2c_get_consume_rank_target_reward_reply=j_s.q2c_get_consume_rank_target_reward_reply,c2w_get_consume_rank_reward=j_s.c2w_get_consume_rank_reward,q2c_consume_value_changed_notify=j_s.q2c_consume_value_changed_notify,q2c_charge_value_changed_notify=j_s.q2c_charge_value_changed_notify,q2c_my_charge_value_changed_notify=j_s.q2c_my_charge_value_changed_notify,x_festival_task_progress=j_s.x_festival_task_progress,w2c_get_festival_target_info=j_s.w2c_get_festival_target_info,c2w_get_festival_task_reward=j_s.c2w_get_festival_task_reward,w2c_get_festival_task_reward=j_s.w2c_get_festival_task_reward,c2w_get_festival_integral_reward=j_s.c2w_get_festival_integral_reward,w2c_get_festival_integral_reward=j_s.w2c_get_festival_integral_reward,q2c_red_push=j_s.q2c_red_push,x_bg_christmas_beat_monster_reward_item=j_s.x_bg_christmas_beat_monster_reward_item,x_bg_christmas_beat_monster_boss_info=j_s.x_bg_christmas_beat_monster_boss_info,c2w_bg_christmas_beat_monster_info=j_s.c2w_bg_christmas_beat_monster_info,w2c_bg_christmas_beat_monster_info=j_s.w2c_bg_christmas_beat_monster_info,c2w_bg_christmas_beat_dmg_info=j_s.c2w_bg_christmas_beat_dmg_info,w2c_bg_christmas_beat_monster_quit_ret=j_s.w2c_bg_christmas_beat_monster_quit_ret,c2w_bg_christmas_beat_monster_get_reward=j_s.c2w_bg_christmas_beat_monster_get_reward,x_bg_christmas_beat_damage_node=j_s.x_bg_christmas_beat_damage_node,c2w_bg_christmas_beat_monster_get_rank=j_s.c2w_bg_christmas_beat_monster_get_rank,w2c_bg_christmas_beat_monster_get_rank=j_s.w2c_bg_christmas_beat_monster_get_rank,w2c_bg_christmas_beat_monster_boss_refreshed=j_s.w2c_bg_christmas_beat_monster_boss_refreshed,c2w_bg_christmas_beat_monster_challenge_boss=j_s.c2w_bg_christmas_beat_monster_challenge_boss,x_change_item_condition=j_s.x_change_item_condition,x_change_item_info=j_s.x_change_item_info,w2c_change_item_info=j_s.w2c_change_item_info,c2w_change_item=j_s.c2w_change_item,w2c_change_item=j_s.w2c_change_item,x_guildPvp_guild=j_s.x_guildPvp_guild,x_guildPvp_node_info=j_s.x_guildPvp_node_info,c2q_guildPvp_node_info=j_s.c2q_guildPvp_node_info,q2c_guildPvp_node_info=j_s.q2c_guildPvp_node_info,c2q_guildPvp_one_node_info=j_s.c2q_guildPvp_one_node_info,q2c_guildPvp_one_node_info=j_s.q2c_guildPvp_one_node_info,x_guildPvp_clone_info=j_s.x_guildPvp_clone_info,c2q_guildPvp_clone_info=j_s.c2q_guildPvp_clone_info,q2c_guildPvp_clone_info=j_s.q2c_guildPvp_clone_info,c2q_guildPvp_clone_hire=j_s.c2q_guildPvp_clone_hire,q2c_guildPvp_clone_hire=j_s.q2c_guildPvp_clone_hire,c2q_guildPvp_node_reward_red=j_s.c2q_guildPvp_node_reward_red,q2c_guildPvp_node_reward_red=j_s.q2c_guildPvp_node_reward_red,x_guildPvp_item_info=j_s.x_guildPvp_item_info,c2q_guildPvp_node_reward_info=j_s.c2q_guildPvp_node_reward_info,q2c_guildPvp_node_reward_info=j_s.q2c_guildPvp_node_reward_info,c2q_guildPvp_node_reward_get=j_s.c2q_guildPvp_node_reward_get,q2c_guildPvp_node_reward_get=j_s.q2c_guildPvp_node_reward_get,c2q_guildPvp_kill_info=j_s.c2q_guildPvp_kill_info,q2c_guildPvp_kill_info=j_s.q2c_guildPvp_kill_info,c2q_guildPvp_kill_reward_get=j_s.c2q_guildPvp_kill_reward_get,c2q_guildPvp_node_fight_info=j_s.c2q_guildPvp_node_fight_info,q2c_guildPvp_node_fight_info=j_s.q2c_guildPvp_node_fight_info,x_guildPvp_plr_info=j_s.x_guildPvp_plr_info,x_guildPvp_clone_fight_info=j_s.x_guildPvp_clone_fight_info,c2q_guildPvp_node_now_fight_info=j_s.c2q_guildPvp_node_now_fight_info,q2c_guildPvp_node_now_fight_info=j_s.q2c_guildPvp_node_now_fight_info,c2q_guildPvp_node_declare_war=j_s.c2q_guildPvp_node_declare_war,q2c_guildPvp_node_declare_war=j_s.q2c_guildPvp_node_declare_war,x_guildPvp_clone_type=j_s.x_guildPvp_clone_type,c2w_guildPvp_node_dispatch=j_s.c2w_guildPvp_node_dispatch,c2q_guildPvp_node_retreat=j_s.c2q_guildPvp_node_retreat,c2q_guildPvp_node_recovery=j_s.c2q_guildPvp_node_recovery,x_guildPvp_list_info=j_s.x_guildPvp_list_info,c2q_guildPvp_node_defense_info=j_s.c2q_guildPvp_node_defense_info,q2c_guildPvp_node_defense_info=j_s.q2c_guildPvp_node_defense_info,x_guildPvp_fight_reward_info=j_s.x_guildPvp_fight_reward_info,q2c_guildPvp_node_fight_reward=j_s.q2c_guildPvp_node_fight_reward,q2c_guildPvp_node_fight_end_reward=j_s.q2c_guildPvp_node_fight_end_reward,c2q_guildPvp_node_fight_reward_get=j_s.c2q_guildPvp_node_fight_reward_get,q2c_guildPvp_node_fight_reward_get=j_s.q2c_guildPvp_node_fight_reward_get,c2w_guildPvp_node_discard=j_s.c2w_guildPvp_node_discard,q2c_guildPvp_node_be_attacked=j_s.q2c_guildPvp_node_be_attacked,ConnetStatus,Driver=function(e){function p_l(){var p_l=null!==e&&e.apply(this,arguments)||this;return p_l._protocolMap={},p_l}return __extends(p_l,e),p_l.prototype.register=function(e,p_l){Ey(e,p_l,this,console,Error)},p_l}(Laya.EventDispatcher),NetDB=function(e){function p_l(){var p_g=null!==e&&e.apply(this,arguments)||this;return p_g._sendDatas=[],p_g._gameRecDatas=[],p_g.onOpen=function(e){console.log("onOpen",e),p_g._landedOtherPlace=!1,p_l.connetStatus!=ConnetStatus.RESTART&&(p_l.connetStatus=ConnetStatus.OPEN),SyncTime.resetSocketState(),p_g.event("open")},p_g.onMessage=function(e){p_g._frameRunManager||(p_g._frameRunManager=new FrameRunManager(16)),Laya.stage.isVisibility?p_g._frameRunManager.frameAddTo(FrameRunType.SOCKET_REC,e.data,Engine2d.Tools.BindDomain(p_g.recMessage,p_g),!1):p_g.recMessage(e.data)},p_g.onClose=function(e){void 0===e&&(e=null),console.log("onClose",e);var b_s="";if(e&&e.code&&(b_s=e.code+" "+e.reason,console.log((j_x("1088_155_566")+j_x(420)),b_s)),p_g._sendDatas.length=0,!p_g._landedOtherPlace){var d_u=p_g;p_g.clearCloseTimeKey(),p_g._closeTipTimeKey=setTimeout((function(){if(d_u.clearCloseTimeKey(),p_l.connetStatus===ConnetStatus.CLOSED||p_l.connetStatus===ConnetStatus.RESTART)return LoginManager.instance.setProgressContent((j_x("566_420_1300")+j_x("1088_155")+" ")+b_s),void console.log((j_x("566_420_1300")+j_x("1088_155")),b_s);DB.connetStatus=ConnetStatus.CLOSED,SyncTime.retrySendToLinkSocket(),d_u.event("close")}),500)}},p_g.onError=function(e){GPlatform.isQQMini&&p_g.onClose(),p_g.event("error")},p_g}return __extends(p_l,e),p_l.prototype.open=function(e){this._sokcet=new WebSocket(e),this._sokcet.binaryType="arraybuffer",this._sokcet.onopen=this.onOpen,this._sokcet.onmessage=this.onMessage,this._sokcet.onclose=this.onClose,this._sokcet.onerror=this.onError},p_l.prototype.onConfirm=function(){GPlatform.isXjhz?Laya.Browser.window.location.reload():GPlatform.isMap?SyncTime.retrySendToLinkSocket():LoginManager.instance.reload()},p_l.prototype.sendTo=function(e,p_l){if(this._sokcet&&1===this._sokcet.readyState){var p_g=e.opcode;j_h(e,p_l);var b_s=msgpack.encode(ProtocolBase.getSequence(e,p_l)),d_u=new Uint8Array(2+b_s.byteLength);d_u[0]=255&p_g,d_u[1]=(65280&p_g)>>8,d_u.set(b_s,2),this._sokcet.send(d_u.buffer)}},p_l.prototype.recMessage=function(e){if(e){var p_l=new DataView(e),p_g=p_l.getUint16(0,!0),b_s=msgpack.decode(new Uint8Array(p_l.buffer,2)),d_u=this._protocolMap[p_g];if((p_g!=s2c_warning.opcode||GPlatform.isWarn)&&d_u&&void 0!==d_u){var b_e=ProtocolBase.setSequence(d_u,b_s);if(this.checkNeedLoginRec(p_g))return b_e.opcode=p_g,void this._gameRecDatas.push(b_e);r_o(d_u,b_e),this.event(p_g.toString(),b_e)}}},p_l.prototype.query=function(e,p_l){this._sokcet&&1===this._sokcet.readyState&&this._sendDatas.push([e,p_l])},p_l.prototype.updateFrame=function(){if(this._sendDatas&&0<this._sendDatas.length){var e=this._sendDatas.shift();this.sendTo(e[0],e[1])}if(this._frameRunManager&&this._frameRunManager.frameRun(),this._gameRecDatas&&0<this._gameRecDatas.length&&b_p.mapID){var p_l=this._gameRecDatas.shift();if(p_l){var p_g=this._protocolMap[p_l.opcode];r_o(p_g,p_l),delete p_l.opcode,this.event(p_g.opcode.toString(),p_l)}}},p_l.prototype.forecClose=function(){this._sokcet&&(this._sokcet.onopen=null,this._sokcet.onmessage=null,this._sokcet.onclose=null,this._sokcet.onerror=null);try{this._sokcet.close()}catch(e){}this._sokcet=null},p_l.prototype.checkNeedLoginRec=function(e){return!b_p.mapID&&e!=w2c_register_please.opcode&&e!=w2c_login_rep.opcode&&e!=m2c_enter_map_pre.opcode&&e!=w2c_register_rep.opcode},p_l.prototype.showCloseTip=function(e,p_g,b_s){void 0===e&&(e=null),void 0===p_g&&(p_g=!0),void 0===b_s&&(b_s=!1),p_l.connetStatus===ConnetStatus.CLOSED&&b_p.closeConfirm(),this._landedOtherPlace=b_s;var d_u=this;this._sendDatas.length=0,this.clearCloseTimeKey(),this._closeTipTimeKey=setTimeout((function(){d_u.clearCloseTimeKey(),p_l.connetStatus=ConnetStatus.RESTART,b_p.confirm(e||(j_x("1772_1448_1300")+j_x("1088_155_566")+j_x(420)+""+j_x("1777_896_1787")+j_x("1374_1739")+"!"),d_u.onConfirm,null,!0,!0)}),500)},p_l.prototype.clearCloseTimeKey=function(){this._closeTipTimeKey&&(clearTimeout(this._closeTipTimeKey),this._closeTipTimeKey=0)},p_l.prototype.reload=function(){Wz(LoginManager)},p_l}(Driver),DB=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e,"connetStatus",{get:function(){return NetDB.connetStatus},set:function(e){NetDB.connetStatus=e},enumerable:!0,configurable:!0}),e._instance=new NetDB,e}(),e;e=ConnetStatus=ConnetStatus||{},e[e.OPEN=1]="OPEN",e[e.CLOSED=2]="CLOSED",e[e.RESTART=3]="RESTART",DB.instance.register(w2c_login_rep.opcode,w2c_login_rep),DB.instance.register(w2c_register_please.opcode,w2c_register_please),DB.instance.register(w2c_register_rep.opcode,w2c_register_rep),DB.instance.register(m2c_enter_map_pre.opcode,m2c_enter_map_pre),DB.instance.register(w2c_ip_info.opcode,w2c_ip_info),DB.instance.register(s2c_error.opcode,s2c_error),DB.instance.register(s2c_warning.opcode,s2c_warning),DB.instance.register(g2c_test_delay_req.opcode,g2c_test_delay_req),DB.instance.register(s2c_heartbeat.opcode,s2c_heartbeat),DB.instance.register(m2c_svr_open_time.opcode,m2c_svr_open_time),DB.instance.register(s2c_cross_open.opcode,s2c_cross_open),DB.instance.register(m2c_movement_start.opcode,m2c_movement_start),DB.instance.register(m2c_movement_stop.opcode,m2c_movement_stop),DB.instance.register(m2c_obj_disappear.opcode,m2c_obj_disappear),DB.instance.register(m2c_player_appear.opcode,m2c_player_appear),DB.instance.register(m2c_monster_appear.opcode,m2c_monster_appear),DB.instance.register(m2c_npc_appear.opcode,m2c_npc_appear),DB.instance.register(m2c_collect_appear.opcode,m2c_collect_appear),DB.instance.register(m2c_drop_appear.opcode,m2c_drop_appear),DB.instance.register(m2c_robot_appear.opcode,m2c_robot_appear),DB.instance.register(m2c_update_npc_status.opcode,m2c_update_npc_status),DB.instance.register(m2c_collect_begin.opcode,m2c_collect_begin),DB.instance.register(m2c_collect_interrupt.opcode,m2c_collect_interrupt),DB.instance.register(m2c_collect_freezetime.opcode,m2c_collect_freezetime),DB.instance.register(m2c_collect_collectedTimes.opcode,m2c_collect_collectedTimes),DB.instance.register(m2c_property_update.opcode,m2c_property_update),DB.instance.register(w2c_view_role_info.opcode,w2c_view_role_info),DB.instance.register(w2c_view_role_talisman.opcode,w2c_view_role_talisman),DB.instance.register(w2c_view_role_xianyuan.opcode,w2c_view_role_xianyuan),DB.instance.register(m2c_headIcon_list.opcode,m2c_headIcon_list),DB.instance.register(w2c_plr_base_info.opcode,w2c_plr_base_info),DB.instance.register(w2c_view_role_godEquip.opcode,w2c_view_role_godEquip),DB.instance.register(m2c_item_bag_items.opcode,m2c_item_bag_items),DB.instance.register(m2c_item_add.opcode,m2c_item_add),DB.instance.register(m2c_item_del.opcode,m2c_item_del),DB.instance.register(m2c_item_update_amount.opcode,m2c_item_update_amount),DB.instance.register(m2c_item_sort.opcode,m2c_item_sort),DB.instance.register(m2c_item_cd.opcode,m2c_item_cd),DB.instance.register(m2c_item_use_add.opcode,m2c_item_use_add),DB.instance.register(m2c_item_swap.opcode,m2c_item_swap),DB.instance.register(m2c_item_rand_ts_deployExp.opcode,m2c_item_rand_ts_deployExp),DB.instance.register(m2c_item_rand_beast_ployExp.opcode,m2c_item_rand_beast_ployExp),DB.instance.register(m2c_item_rand_ts_attr.opcode,m2c_item_rand_ts_attr),DB.instance.register(m2c_item_rand_beast_attr.opcode,m2c_item_rand_beast_attr),DB.instance.register(m2c_task_accept.opcode,m2c_task_accept),DB.instance.register(m2c_task_giveup.opcode,m2c_task_giveup),DB.instance.register(m2c_task_finish.opcode,m2c_task_finish),DB.instance.register(m2c_task_update.opcode,m2c_task_update),DB.instance.register(m2c_task_accepted.opcode,m2c_task_accepted),DB.instance.register(m2c_mail_list.opcode,m2c_mail_list),DB.instance.register(m2c_mail_update.opcode,m2c_mail_update),DB.instance.register(m2c_skill_list.opcode,m2c_skill_list),DB.instance.register(m2c_skill_info.opcode,m2c_skill_info),DB.instance.register(m2c_skill_prio_swap.opcode,m2c_skill_prio_swap),DB.instance.register(m2c_skill_da_zhao.opcode,m2c_skill_da_zhao),DB.instance.register(m2c_skill_mental_info.opcode,m2c_skill_mental_info),DB.instance.register(m2c_skill_use_rep.opcode,m2c_skill_use_rep),DB.instance.register(m2c_skill_begin.opcode,m2c_skill_begin),DB.instance.register(m2c_skill_hit.opcode,m2c_skill_hit),DB.instance.register(m2c_skill_move.opcode,m2c_skill_move),DB.instance.register(m2c_property_show.opcode,m2c_property_show),DB.instance.register(m2c_skill_cd_update.opcode,m2c_skill_cd_update),DB.instance.register(m2c_common_cd_update.opcode,m2c_common_cd_update),DB.instance.register(m2c_bekill_info.opcode,m2c_bekill_info),DB.instance.register(m2c_update_camp.opcode,m2c_update_camp),DB.instance.register(m2c_state_info.opcode,m2c_state_info),DB.instance.register(m2c_state_increase.opcode,m2c_state_increase),DB.instance.register(m2c_state_sub_up.opcode,m2c_state_sub_up),DB.instance.register(m2c_state_lv_up.opcode,m2c_state_lv_up),DB.instance.register(m2c_buff_update.opcode,m2c_buff_update),DB.instance.register(m2c_buff_remove.opcode,m2c_buff_remove),DB.instance.register(w2c_friend_list.opcode,w2c_friend_list),DB.instance.register(w2c_request_list.opcode,w2c_request_list),DB.instance.register(w2c_black_list.opcode,w2c_black_list),DB.instance.register(w2c_recommend_list.opcode,w2c_recommend_list),DB.instance.register(w2c_friend_add_rep.opcode,w2c_friend_add_rep),DB.instance.register(w2c_friend_add_req.opcode,w2c_friend_add_req),DB.instance.register(w2c_add_friend.opcode,w2c_add_friend),DB.instance.register(w2c_delete_req.opcode,w2c_delete_req),DB.instance.register(w2c_friend_delete.opcode,w2c_friend_delete),DB.instance.register(w2c_friend_add_black.opcode,w2c_friend_add_black),DB.instance.register(w2c_friend_delete_black.opcode,w2c_friend_delete_black),DB.instance.register(w2c_friend_give_by.opcode,w2c_friend_give_by),DB.instance.register(w2c_friend_give.opcode,w2c_friend_give),DB.instance.register(w2c_friend_activeness_status.opcode,w2c_friend_activeness_status),DB.instance.register(w2c_friend_activeness_getReward.opcode,w2c_friend_activeness_getReward),DB.instance.register(w2c_chat_rec_list.opcode,w2c_chat_rec_list),DB.instance.register(w2c_chat_rec.opcode,w2c_chat_rec),DB.instance.register(w2c_chat_private_rep.opcode,w2c_chat_private_rep),DB.instance.register(w2c_chat_private_plr.opcode,w2c_chat_private_plr),DB.instance.register(w2c_chat_private_rec.opcode,w2c_chat_private_rec),DB.instance.register(m2c_pop_ui.opcode,m2c_pop_ui),DB.instance.register(m2c_send_broadcast.opcode,m2c_send_broadcast),DB.instance.register(m2c_silence_reply.opcode,m2c_silence_reply),DB.instance.register(m2c_query_silence_record.opcode,m2c_query_silence_record),DB.instance.register(m2c_query_my_silence_state.opcode,m2c_query_my_silence_state),DB.instance.register(m2c_shop_buy_list.opcode,m2c_shop_buy_list),DB.instance.register(m2c_shop_buy.opcode,m2c_shop_buy),DB.instance.register(m2c_notify_fb_info.opcode,m2c_notify_fb_info),DB.instance.register(m2c_notify_fb_result.opcode,m2c_notify_fb_result),DB.instance.register(m2c_notify_fb_result_hp.opcode,m2c_notify_fb_result_hp),DB.instance.register(m2c_passed_fb_list.opcode,m2c_passed_fb_list),DB.instance.register(m2c_update_fb_info.opcode,m2c_update_fb_info),DB.instance.register(w2c_notify_fb_remind.opcode,w2c_notify_fb_remind),DB.instance.register(m2c_notify_fb_damage_rank.opcode,m2c_notify_fb_damage_rank),DB.instance.register(m2c_notify_fb_self_damge.opcode,m2c_notify_fb_self_damge),DB.instance.register(m2c_notify_fb_boss_fb_info.opcode,m2c_notify_fb_boss_fb_info),DB.instance.register(m2c_notify_fb_server_damage_rank.opcode,m2c_notify_fb_server_damage_rank),DB.instance.register(m2c_fb_team_list.opcode,m2c_fb_team_list),DB.instance.register(m2c_fb_plr_list.opcode,m2c_fb_plr_list),DB.instance.register(m2c_update_fb_team_info.opcode,m2c_update_fb_team_info),DB.instance.register(m2c_fb_team_leave.opcode,m2c_fb_team_leave),DB.instance.register(m2c_fb_set_attack_target_type.opcode,m2c_fb_set_attack_target_type),DB.instance.register(w2c_fb_boss_lst.opcode,w2c_fb_boss_lst),DB.instance.register(m2c_fb_remind.opcode,m2c_fb_remind),DB.instance.register(m2c_wildboss_inspire.opcode,m2c_wildboss_inspire),DB.instance.register(m2c_fb_stateboss_take_hurt_reward.opcode,m2c_fb_stateboss_take_hurt_reward),DB.instance.register(w2c_fb_stateboss_dmg_rank.opcode,w2c_fb_stateboss_dmg_rank),DB.instance.register(m2c_fb_hurt_reward_status.opcode,m2c_fb_hurt_reward_status),DB.instance.register(m2c_fb_pk_list.opcode,m2c_fb_pk_list),DB.instance.register(m2c_fb_state_start_dmg.opcode,m2c_fb_state_start_dmg),DB.instance.register(m2c_fb_help_story.opcode,m2c_fb_help_story),DB.instance.register(w2c_fb_notify_thanks_ui.opcode,w2c_fb_notify_thanks_ui),DB.instance.register(m2c_green_boss_reward_info.opcode,m2c_green_boss_reward_info),DB.instance.register(m2c_get_green_boss_reward.opcode,m2c_get_green_boss_reward),DB.instance.register(m2c_fb_pagoda_cansweep.opcode,m2c_fb_pagoda_cansweep),DB.instance.register(m2c_fb_ascent_info.opcode,m2c_fb_ascent_info),DB.instance.register(m2c_fb_yishou_info.opcode,m2c_fb_yishou_info),DB.instance.register(m2c_fb_xuanshang_info.opcode,m2c_fb_xuanshang_info),DB.instance.register(m2c_fb_heaven_open_info.opcode,m2c_fb_heaven_open_info),DB.instance.register(m2c_fb_heaven_open_watch.opcode,m2c_fb_heaven_open_watch),DB.instance.register(w2c_confirm_notify.opcode,w2c_confirm_notify),DB.instance.register(w2c_confirm_res.opcode,w2c_confirm_res),DB.instance.register(m2c_talisman_list.opcode,m2c_talisman_list),DB.instance.register(m2c_talisman_info.opcode,m2c_talisman_info),DB.instance.register(m2c_talisman_upgrade.opcode,m2c_talisman_upgrade),DB.instance.register(m2c_talisman_uplevel.opcode,m2c_talisman_uplevel),DB.instance.register(m2c_talisman_updeploy.opcode,m2c_talisman_updeploy),DB.instance.register(m2c_talisman_suits.opcode,m2c_talisman_suits),DB.instance.register(m2c_talisman_upsuit.opcode,m2c_talisman_upsuit),DB.instance.register(m2c_talismen_engulf.opcode,m2c_talismen_engulf),DB.instance.register(m2c_talisman_setfight.opcode,m2c_talisman_setfight),DB.instance.register(m2c_talisman_refine.opcode,m2c_talisman_refine),DB.instance.register(m2c_talisman_refine_stop.opcode,m2c_talisman_refine_stop),DB.instance.register(m2c_talisman_speel.opcode,m2c_talisman_speel),DB.instance.register(m2c_talisman_buy_speel_slot.opcode,m2c_talisman_buy_speel_slot),DB.instance.register(m2c_talisman_equip_active.opcode,m2c_talisman_equip_active),DB.instance.register(m2c_qihun_active.opcode,m2c_qihun_active),DB.instance.register(m2c_qihun_level_up.opcode,m2c_qihun_level_up),DB.instance.register(m2c_qihun_star_up.opcode,m2c_qihun_star_up),DB.instance.register(m2c_decompose_equip.opcode,m2c_decompose_equip),DB.instance.register(m2c_strength_info.opcode,m2c_strength_info),DB.instance.register(m2c_strength_partition.opcode,m2c_strength_partition),DB.instance.register(m2c_strength_auto.opcode,m2c_strength_auto),DB.instance.register(m2c_soul_monster_info.opcode,m2c_soul_monster_info),DB.instance.register(m2c_soul_monster_slot_update.opcode,m2c_soul_monster_slot_update),DB.instance.register(m2c_soul_monster_open_slot.opcode,m2c_soul_monster_open_slot),DB.instance.register(w2c_soul_monster_global.opcode,w2c_soul_monster_global),DB.instance.register(w2c_soul_monster_global_update.opcode,w2c_soul_monster_global_update),DB.instance.register(w2c_soul_monster_request_list.opcode,w2c_soul_monster_request_list),DB.instance.register(w2c_soul_monster_global_request_op.opcode,w2c_soul_monster_global_request_op),DB.instance.register(w2c_soul_monster_search.opcode,w2c_soul_monster_search),DB.instance.register(w2c_soul_monster_evolution.opcode,w2c_soul_monster_evolution),DB.instance.register(w2c_soul_monster_request_history.opcode,w2c_soul_monster_request_history),DB.instance.register(m2c_office_mine_info.opcode,m2c_office_mine_info),DB.instance.register(m2c_office_mine_collect.opcode,m2c_office_mine_collect),DB.instance.register(m2c_office_mine_update.opcode,m2c_office_mine_update),DB.instance.register(m2c_office_facility_info.opcode,m2c_office_facility_info),DB.instance.register(m2c_office_facility_level_up.opcode,m2c_office_facility_level_up),DB.instance.register(m2c_offset_facility_reset.opcode,m2c_offset_facility_reset),DB.instance.register(m2c_office_treasure_info.opcode,m2c_office_treasure_info),DB.instance.register(m2c_office_get_treasure.opcode,m2c_office_get_treasure),DB.instance.register(m2c_office_exped_info.opcode,m2c_office_exped_info),DB.instance.register(m2c_office_exped_task_start.opcode,m2c_office_exped_task_start),DB.instance.register(m2c_office_exped_task_stop.opcode,m2c_office_exped_task_stop),DB.instance.register(m2c_office_exped_get_reward.opcode,m2c_office_exped_get_reward),DB.instance.register(m2c_office_mine_onekey_collect.opcode,m2c_office_mine_onekey_collect),DB.instance.register(w2c_rank_page.opcode,w2c_rank_page),DB.instance.register(m2c_rank_worship_info.opcode,m2c_rank_worship_info),DB.instance.register(m2c_rank_worship.opcode,m2c_rank_worship),DB.instance.register(q2c_rank_page.opcode,q2c_rank_page),DB.instance.register(w2c_banquet_info.opcode,w2c_banquet_info),DB.instance.register(w2c_banquet_start.opcode,w2c_banquet_start),DB.instance.register(w2c_banquet_lst.opcode,w2c_banquet_lst),DB.instance.register(w2c_banquet_join.opcode,w2c_banquet_join),DB.instance.register(w2c_banquet_query.opcode,w2c_banquet_query),DB.instance.register(w2c_banquet_new.opcode,w2c_banquet_new),DB.instance.register(m2c_hangup_online_reward.opcode,m2c_hangup_online_reward),DB.instance.register(m2c_hangup_offline_drop.opcode,m2c_hangup_offline_drop),DB.instance.register(m2c_hangup_get_reward.opcode,m2c_hangup_get_reward),DB.instance.register(m2c_ride_info.opcode,m2c_ride_info),DB.instance.register(m2c_ride_update.opcode,m2c_ride_update),DB.instance.register(m2c_ride_combine.opcode,m2c_ride_combine),DB.instance.register(m2c_ride_active.opcode,m2c_ride_active),DB.instance.register(m2c_ride_up_star.opcode,m2c_ride_up_star),DB.instance.register(m2c_asyncpvp_info.opcode,m2c_asyncpvp_info),DB.instance.register(w2c_cross_async_info.opcode,w2c_cross_async_info),DB.instance.register(m2c_asyncpvp_match.opcode,m2c_asyncpvp_match),DB.instance.register(w2c_asyncpvp_search_kill.opcode,w2c_asyncpvp_search_kill),DB.instance.register(q2c_asyncpvp_search_kill.opcode,q2c_asyncpvp_search_kill),DB.instance.register(m2c_asyncpvp_round_info.opcode,m2c_asyncpvp_round_info),DB.instance.register(m2c_asyncpvp_combat_result.opcode,m2c_asyncpvp_combat_result),DB.instance.register(m2c_asyncpvp_buy_prop.opcode,m2c_asyncpvp_buy_prop),DB.instance.register(m2c_asyncpvp_record.opcode,m2c_asyncpvp_record),DB.instance.register(w2c_asyncpvp_statistics.opcode,w2c_asyncpvp_statistics),DB.instance.register(w2c_asyncpvp_broadcast.opcode,w2c_asyncpvp_broadcast),DB.instance.register(m2c_asyncpvp_season_record.opcode,m2c_asyncpvp_season_record),DB.instance.register(w2c_get_asyncpvp_season_prev_rank.opcode,w2c_get_asyncpvp_season_prev_rank),DB.instance.register(m2c_asyncpvp_exchange_info.opcode,m2c_asyncpvp_exchange_info),DB.instance.register(m2c_get_cross_state.opcode,m2c_get_cross_state),DB.instance.register(w2c_guild_list.opcode,w2c_guild_list),DB.instance.register(w2c_guild_info.opcode,w2c_guild_info),DB.instance.register(w2c_update_guild_property.opcode,w2c_update_guild_property),DB.instance.register(w2c_update_member_property.opcode,w2c_update_member_property),DB.instance.register(w2c_create_guild.opcode,w2c_create_guild),DB.instance.register(w2c_leave_guild.opcode,w2c_leave_guild),DB.instance.register(w2c_join_guild.opcode,w2c_join_guild),DB.instance.register(w2c_join_success.opcode,w2c_join_success),DB.instance.register(w2c_cancel_join_guild.opcode,w2c_cancel_join_guild),DB.instance.register(w2c_join_list.opcode,w2c_join_list),DB.instance.register(w2c_auto_process_join_request.opcode,w2c_auto_process_join_request),DB.instance.register(w2c_change_office.opcode,w2c_change_office),DB.instance.register(w2c_transfer_guild.opcode,w2c_transfer_guild),DB.instance.register(w2c_disband_guild.opcode,w2c_disband_guild),DB.instance.register(w2c_guild_change_name_rep.opcode,w2c_guild_change_name_rep),DB.instance.register(w2c_edit_notice.opcode,w2c_edit_notice),DB.instance.register(m2c_guild_show_change.opcode,m2c_guild_show_change),DB.instance.register(w2c_guild_checkin.opcode,w2c_guild_checkin),DB.instance.register(w2c_guild_checkin_info.opcode,w2c_guild_checkin_info),DB.instance.register(w2c_guild_checkin_gift.opcode,w2c_guild_checkin_gift),DB.instance.register(m2c_guild_exchange_info.opcode,m2c_guild_exchange_info),DB.instance.register(w2c_guild_donate.opcode,w2c_guild_donate),DB.instance.register(w2c_guild_auction_list.opcode,w2c_guild_auction_list),DB.instance.register(w2c_guild_auction_bid.opcode,w2c_guild_auction_bid),DB.instance.register(w2c_guild_auction_buy.opcode,w2c_guild_auction_buy),DB.instance.register(w2c_guild_auction_history.opcode,w2c_guild_auction_history),DB.instance.register(w2c_guild_help_info.opcode,w2c_guild_help_info),DB.instance.register(w2c_guild_help_list.opcode,w2c_guild_help_list),DB.instance.register(w2c_guild_help_my_list.opcode,w2c_guild_help_my_list),DB.instance.register(w2c_guild_help_assist.opcode,w2c_guild_help_assist),DB.instance.register(w2c_guild_boss_list.opcode,w2c_guild_boss_list),DB.instance.register(w2c_guild_boss_open.opcode,w2c_guild_boss_open),DB.instance.register(w2c_guild_boss_reward.opcode,w2c_guild_boss_reward),DB.instance.register(w2c_guild_boss_rank.opcode,w2c_guild_boss_rank),DB.instance.register(w2c_guild_auction_new.opcode,w2c_guild_auction_new),DB.instance.register(m2c_guild_auction_rec.opcode,m2c_guild_auction_rec),DB.instance.register(w2c_guild_boss_set_auto_open_mode.opcode,w2c_guild_boss_set_auto_open_mode),DB.instance.register(w2c_get_repository.opcode,w2c_get_repository),DB.instance.register(w2c_guild_repository_add_item.opcode,w2c_guild_repository_add_item),DB.instance.register(w2c_guild_repository_exchange_item.opcode,w2c_guild_repository_exchange_item),DB.instance.register(w2c_guild_repository_get_history.opcode,w2c_guild_repository_get_history),DB.instance.register(w2c_repository_modify.opcode,w2c_repository_modify),DB.instance.register(m2c_vip_reward_status.opcode,m2c_vip_reward_status),DB.instance.register(m2c_month_card_info.opcode,m2c_month_card_info),DB.instance.register(m2c_month_card_buy.opcode,m2c_month_card_buy),DB.instance.register(m2c_month_card_reward.opcode,m2c_month_card_reward),DB.instance.register(m2c_first_recharge_status.opcode,m2c_first_recharge_status),DB.instance.register(m2c_recharge_success.opcode,m2c_recharge_success),DB.instance.register(m2c_achievement_info.opcode,m2c_achievement_info),DB.instance.register(m2c_achievement_update.opcode,m2c_achievement_update),DB.instance.register(m2c_achievement_fin.opcode,m2c_achievement_fin),DB.instance.register(m2c_sign_info.opcode,m2c_sign_info),DB.instance.register(m2c_sign_sign_in.opcode,m2c_sign_sign_in),DB.instance.register(m2c_sign_reward.opcode,m2c_sign_reward),DB.instance.register(m2c_func_open_state.opcode,m2c_func_open_state),DB.instance.register(w2c_minewar_mine_list.opcode,w2c_minewar_mine_list),DB.instance.register(w2c_minewar_mine.opcode,w2c_minewar_mine),DB.instance.register(w2c_minewar_miner.opcode,w2c_minewar_miner),DB.instance.register(w2c_minewar_record.opcode,w2c_minewar_record),DB.instance.register(w2c_minewar_fight.opcode,w2c_minewar_fight),DB.instance.register(w2c_minewar_get_box.opcode,w2c_minewar_get_box),DB.instance.register(w2c_minewar_exchange.opcode,w2c_minewar_exchange),DB.instance.register(w2c_minewar_move.opcode,w2c_minewar_move),DB.instance.register(w2c_minewar_miner_update.opcode,w2c_minewar_miner_update),DB.instance.register(w2c_minewar_berobed.opcode,w2c_minewar_berobed),DB.instance.register(m2c_sevenday_info.opcode,m2c_sevenday_info),DB.instance.register(m2c_sevenday_get.opcode,m2c_sevenday_get),DB.instance.register(m2c_seven_day_task_info.opcode,m2c_seven_day_task_info),DB.instance.register(m2c_get_seven_day_task_reward.opcode,m2c_get_seven_day_task_reward),DB.instance.register(m2c_get_seven_day_liveness_reward.opcode,m2c_get_seven_day_liveness_reward),DB.instance.register(m2c_seven_day_task_progress.opcode,m2c_seven_day_task_progress),DB.instance.register(m2c_merge_sevenday_info.opcode,m2c_merge_sevenday_info),DB.instance.register(m2c_merge_sevenday_get.opcode,m2c_merge_sevenday_get),DB.instance.register(m2c_merge_sevenday_status.opcode,m2c_merge_sevenday_status),DB.instance.register(m2c_fashion_list.opcode,m2c_fashion_list),DB.instance.register(m2c_fashion_progress.opcode,m2c_fashion_progress),DB.instance.register(m2c_fashion_active.opcode,m2c_fashion_active),DB.instance.register(m2c_fashion_use.opcode,m2c_fashion_use),DB.instance.register(m2c_fashion_upgrade.opcode,m2c_fashion_upgrade),DB.instance.register(m2c_activeness_list.opcode,m2c_activeness_list),DB.instance.register(m2c_activeness_update.opcode,m2c_activeness_update),DB.instance.register(m2c_activeness_reward.opcode,m2c_activeness_reward),DB.instance.register(m2c_activeness_exreward.opcode,m2c_activeness_exreward),DB.instance.register(m2c_title_info_rep.opcode,m2c_title_info_rep),DB.instance.register(m2c_title_gain.opcode,m2c_title_gain),DB.instance.register(m2c_title_drop.opcode,m2c_title_drop),DB.instance.register(m2c_title_remove.opcode,m2c_title_remove),DB.instance.register(m2c_title_wear.opcode,m2c_title_wear),DB.instance.register(m2c_title_level_up.opcode,m2c_title_level_up),DB.instance.register(w2c_palace_info.opcode,w2c_palace_info),DB.instance.register(w2c_palace_worship.opcode,w2c_palace_worship),DB.instance.register(w2c_dh_info.opcode,w2c_dh_info),DB.instance.register(w2c_dh_friend_list.opcode,w2c_dh_friend_list),DB.instance.register(w2c_dh_invite_list.opcode,w2c_dh_invite_list),DB.instance.register(w2c_dh_invite.opcode,w2c_dh_invite),DB.instance.register(w2c_db_be_invited.opcode,w2c_db_be_invited),DB.instance.register(w2c_dh_agree.opcode,w2c_dh_agree),DB.instance.register(m2c_dh_take_exp.opcode,m2c_dh_take_exp),DB.instance.register(w2c_dh_stop.opcode,w2c_dh_stop),DB.instance.register(w2c_dh_list.opcode,w2c_dh_list),DB.instance.register(w2c_dh_task_question.opcode,w2c_dh_task_question),DB.instance.register(w2c_dh_mora_invite.opcode,w2c_dh_mora_invite),DB.instance.register(w2c_dh_mora_agree.opcode,w2c_dh_mora_agree),DB.instance.register(w2c_dh_again_fail.opcode,w2c_dh_again_fail),DB.instance.register(w2c_dh_mora.opcode,w2c_dh_mora),DB.instance.register(m2c_wechat_collect_reward_info.opcode,m2c_wechat_collect_reward_info),DB.instance.register(m2c_wanba_collect_reward_info.opcode,m2c_wanba_collect_reward_info),DB.instance.register(m2c_wanba_shared_reward_info.opcode,m2c_wanba_shared_reward_info),DB.instance.register(m2c_getIsNotFirstLoadScene.opcode,m2c_getIsNotFirstLoadScene),DB.instance.register(m2c_share_reward_info.opcode,m2c_share_reward_info),DB.instance.register(m2c_wanba_gift_reward_status.opcode,m2c_wanba_gift_reward_status),DB.instance.register(m2c_xianyuan_info.opcode,m2c_xianyuan_info),DB.instance.register(m2c_xianyuan_update_god.opcode,m2c_xianyuan_update_god),DB.instance.register(m2c_xianyuan_update_xianshu.opcode,m2c_xianyuan_update_xianshu),DB.instance.register(m2c_xianyuan_update_coach_times.opcode,m2c_xianyuan_update_coach_times),DB.instance.register(m2c_xianyuan_add_val.opcode,m2c_xianyuan_add_val),DB.instance.register(m2c_xianyuan_suits.opcode,m2c_xianyuan_suits),DB.instance.register(m2c_xianyuan_upsuit.opcode,m2c_xianyuan_upsuit),DB.instance.register(m2c_xianyuan_equip.opcode,m2c_xianyuan_equip),DB.instance.register(m2c_xianyuan_eq_upLv.opcode,m2c_xianyuan_eq_upLv),DB.instance.register(m2c_xianyuan_eq_auto_upLv.opcode,m2c_xianyuan_eq_auto_upLv),DB.instance.register(m2c_xianyuan_eq_upStar.opcode,m2c_xianyuan_eq_upStar),DB.instance.register(m2c_xianyuan_eq_auto_upStar.opcode,m2c_xianyuan_eq_auto_upStar),DB.instance.register(m2c_xianyuan_eq_suit.opcode,m2c_xianyuan_eq_suit),DB.instance.register(m2c_xianyuan_eq_all_suit.opcode,m2c_xianyuan_eq_all_suit),DB.instance.register(m2c_xianyuan_eq_suit_upLv.opcode,m2c_xianyuan_eq_suit_upLv),DB.instance.register(m2c_xianyuan_seat_act.opcode,m2c_xianyuan_seat_act),DB.instance.register(m2c_xianyuan_seat_up_lv.opcode,m2c_xianyuan_seat_up_lv),DB.instance.register(m2c_xianyuan_seat_up_star.opcode,m2c_xianyuan_seat_up_star),DB.instance.register(m2c_drawcard_info.opcode,m2c_drawcard_info),DB.instance.register(m2c_drawcard_success.opcode,m2c_drawcard_success),DB.instance.register(m2c_drawcard_record.opcode,m2c_drawcard_record),DB.instance.register(w2c_gsaRec_drawcard_status.opcode,w2c_gsaRec_drawcard_status),DB.instance.register(m2c_drawcard_get_score_reward.opcode,m2c_drawcard_get_score_reward),DB.instance.register(w2c_dreamland_self_info.opcode,w2c_dreamland_self_info),DB.instance.register(w2c_dreamland_list.opcode,w2c_dreamland_list),DB.instance.register(w2c_dreamland_start.opcode,w2c_dreamland_start),DB.instance.register(w2c_dreamland_join.opcode,w2c_dreamland_join),DB.instance.register(w2c_dreamland_query.opcode,w2c_dreamland_query),DB.instance.register(w2c_dreamland_break.opcode,w2c_dreamland_break),DB.instance.register(m2c_dreamland_skill.opcode,m2c_dreamland_skill),DB.instance.register(m2c_dreamland_skill_info.opcode,m2c_dreamland_skill_info),DB.instance.register(m2c_state_fb_notify_choose.opcode,m2c_state_fb_notify_choose),DB.instance.register(m2c_state_fb_choose.opcode,m2c_state_fb_choose),DB.instance.register(m2c_state_fb_stage.opcode,m2c_state_fb_stage),DB.instance.register(m2c_state_fb_props.opcode,m2c_state_fb_props),DB.instance.register(m2c_compose_ui_info.opcode,m2c_compose_ui_info),DB.instance.register(m2c_compose_auto.opcode,m2c_compose_auto),DB.instance.register(w2c_restore_info.opcode,w2c_restore_info),DB.instance.register(w2c_get_restore_rec.opcode,w2c_get_restore_rec),DB.instance.register(w2c_arena_info.opcode,w2c_arena_info),DB.instance.register(w2c_arena_fight_info.opcode,w2c_arena_fight_info),DB.instance.register(w2c_arena_fight_record.opcode,w2c_arena_fight_record),DB.instance.register(m2c_arena_buy_vip_count.opcode,m2c_arena_buy_vip_count),DB.instance.register(m2c_arena_exchange_info.opcode,m2c_arena_exchange_info),DB.instance.register(m2c_arena_rank_change_red_point.opcode,m2c_arena_rank_change_red_point),DB.instance.register(w2c_gain_rank_qual_info.opcode,w2c_gain_rank_qual_info),DB.instance.register(m2c_dragonsoul_info.opcode,m2c_dragonsoul_info),DB.instance.register(m2c_dragonsoul_update.opcode,m2c_dragonsoul_update),DB.instance.register(m2c_dragonsoul_active.opcode,m2c_dragonsoul_active),DB.instance.register(m2c_dragonsoul_up_star.opcode,m2c_dragonsoul_up_star),DB.instance.register(w2c_marry_request_list.opcode,w2c_marry_request_list),DB.instance.register(w2c_marry_info.opcode,w2c_marry_info),DB.instance.register(w2c_xianlv_wall.opcode,w2c_xianlv_wall),DB.instance.register(w2c_set_marryinfo.opcode,w2c_set_marryinfo),DB.instance.register(w2c_invite_marry.opcode,w2c_invite_marry),DB.instance.register(w2c_rec_marry.opcode,w2c_rec_marry),DB.instance.register(w2c_delete_marry_req.opcode,w2c_delete_marry_req),DB.instance.register(w2c_success_marry.opcode,w2c_success_marry),DB.instance.register(w2c_req_delete_marry.opcode,w2c_req_delete_marry),DB.instance.register(w2c_delete_marry.opcode,w2c_delete_marry),DB.instance.register(m2c_marry_ringinfo.opcode,m2c_marry_ringinfo),DB.instance.register(m2c_marry_ringfoster.opcode,m2c_marry_ringfoster),DB.instance.register(m2c_change_ring_used.opcode,m2c_change_ring_used),DB.instance.register(m2c_marry_illusion_info.opcode,m2c_marry_illusion_info),DB.instance.register(w2c_marry_achievement_info.opcode,w2c_marry_achievement_info),DB.instance.register(m2c_marry_achievement_reward.opcode,m2c_marry_achievement_reward),DB.instance.register(w2c_marry_add_lovevalue.opcode,w2c_marry_add_lovevalue),DB.instance.register(m2c_marry_lovevalue_info.opcode,m2c_marry_lovevalue_info),DB.instance.register(m2c_marry_lovevalue_reward.opcode,m2c_marry_lovevalue_reward),DB.instance.register(m2c_marry_layer.opcode,m2c_marry_layer),DB.instance.register(m2c_marry_buy_times.opcode,m2c_marry_buy_times),DB.instance.register(m2c_marry_times_info.opcode,m2c_marry_times_info),DB.instance.register(m2c_marry_sweet_info.opcode,m2c_marry_sweet_info),DB.instance.register(m2c_marry_sweet_info_log.opcode,m2c_marry_sweet_info_log),DB.instance.register(m2c_marry_sweet_upgrade.opcode,m2c_marry_sweet_upgrade),DB.instance.register(w2c_team_info.opcode,w2c_team_info),DB.instance.register(w2c_team_join.opcode,w2c_team_join),DB.instance.register(w2c_team_leave.opcode,w2c_team_leave),DB.instance.register(w2c_team_be_invite.opcode,w2c_team_be_invite),DB.instance.register(w2c_team_invite_reply.opcode,w2c_team_invite_reply),DB.instance.register(w2c_team_change_aims.opcode,w2c_team_change_aims),DB.instance.register(w2c_team_list.opcode,w2c_team_list),DB.instance.register(w2c_team_invite_rcmd.opcode,w2c_team_invite_rcmd),DB.instance.register(m2c_beast_list.opcode,m2c_beast_list),DB.instance.register(m2c_beast_info.opcode,m2c_beast_info),DB.instance.register(m2c_beast_upgrade.opcode,m2c_beast_upgrade),DB.instance.register(m2c_beast_uplevel.opcode,m2c_beast_uplevel),DB.instance.register(m2c_beast_upploy.opcode,m2c_beast_upploy),DB.instance.register(m2c_beast_evolve.opcode,m2c_beast_evolve),DB.instance.register(m2c_pet_list.opcode,m2c_pet_list),DB.instance.register(m2c_pet_info.opcode,m2c_pet_info),DB.instance.register(m2c_pet_upgrade.opcode,m2c_pet_upgrade),DB.instance.register(m2c_pet_uplevel.opcode,m2c_pet_uplevel),DB.instance.register(m2c_pet_upploy.opcode,m2c_pet_upploy),DB.instance.register(m2c_pet_evolve.opcode,m2c_pet_evolve),DB.instance.register(m2c_training_info.opcode,m2c_training_info),DB.instance.register(m2c_training_one_info.opcode,m2c_training_one_info),DB.instance.register(m2c_godEquip_compose.opcode,m2c_godEquip_compose),DB.instance.register(w2c_red_envelopes_recharge_info.opcode,w2c_red_envelopes_recharge_info),DB.instance.register(w2c_red_envelopes_recharge_send.opcode,w2c_red_envelopes_recharge_send),DB.instance.register(w2c_red_envelopes_recharge_receive.opcode,w2c_red_envelopes_recharge_receive),DB.instance.register(w2c_red_envelopes_recharge_bigInfo.opcode,w2c_red_envelopes_recharge_bigInfo),DB.instance.register(w2c_red_envelopes_rec_info.opcode,w2c_red_envelopes_rec_info),DB.instance.register(m2c_clone_info.opcode,m2c_clone_info),DB.instance.register(m2c_clone_wear_equip.opcode,m2c_clone_wear_equip),DB.instance.register(m2c_clone_act.opcode,m2c_clone_act),DB.instance.register(m2c_clone_up_lv.opcode,m2c_clone_up_lv),DB.instance.register(m2c_clone_up_breach.opcode,m2c_clone_up_breach),DB.instance.register(m2c_advert_Info.opcode,m2c_advert_Info),DB.instance.register(m2c_advert_one_advert.opcode,m2c_advert_one_advert),DB.instance.register(m2c_advert_recharge.opcode,m2c_advert_recharge),DB.instance.register(m2c_adventure_trigger.opcode,m2c_adventure_trigger),DB.instance.register(m2c_get_adventure_info.opcode,m2c_get_adventure_info),DB.instance.register(m2c_adventure_end.opcode,m2c_adventure_end),DB.instance.register(m2c_body_info.opcode,m2c_body_info),DB.instance.register(m2c_body_cultivation.opcode,m2c_body_cultivation),DB.instance.register(m2c_body_sub_level_up.opcode,m2c_body_sub_level_up),DB.instance.register(m2c_body_level_up.opcode,m2c_body_level_up),DB.instance.register(w2c_gsa_start.opcode,w2c_gsa_start),DB.instance.register(w2c_gsa_close.opcode,w2c_gsa_close),DB.instance.register(w2c_bga_start.opcode,w2c_bga_start),DB.instance.register(w2c_bga_stop.opcode,w2c_bga_stop),DB.instance.register(w2c_bosscome_info.opcode,w2c_bosscome_info),DB.instance.register(w2c_bosscome_challenge_list.opcode,w2c_bosscome_challenge_list),DB.instance.register(w2c_bosscome_buy_times.opcode,w2c_bosscome_buy_times),DB.instance.register(m2c_bosscome_inspire.opcode,m2c_bosscome_inspire),DB.instance.register(w2c_bosscome_inspire.opcode,w2c_bosscome_inspire),DB.instance.register(w2c_bosscome_rank_plr.opcode,w2c_bosscome_rank_plr),DB.instance.register(w2c_bosscome_rank_guild.opcode,w2c_bosscome_rank_guild),DB.instance.register(w2c_bosscome_get_reward.opcode,w2c_bosscome_get_reward),DB.instance.register(w2c_bosscome_kill_record.opcode,w2c_bosscome_kill_record),DB.instance.register(m2c_bosscome_rob_end.opcode,m2c_bosscome_rob_end),DB.instance.register(w2c_bosscome_challenge_record.opcode,w2c_bosscome_challenge_record),DB.instance.register(m2c_bosscome_challenge_result.opcode,m2c_bosscome_challenge_result),DB.instance.register(m2c_bosscome_fb_info.opcode,m2c_bosscome_fb_info),DB.instance.register(w2c_bosscome_boss_hp_sync.opcode,w2c_bosscome_boss_hp_sync),DB.instance.register(w2c_gsaRec_first_recharge.opcode,w2c_gsaRec_first_recharge),DB.instance.register(w2c_gsaRec_daily_recharge.opcode,w2c_gsaRec_daily_recharge),DB.instance.register(w2c_gsaRec_single_recharge.opcode,w2c_gsaRec_single_recharge),DB.instance.register(w2c_gsaRec_acum_recharge.opcode,w2c_gsaRec_acum_recharge),DB.instance.register(w2c_bgaRec_single_recharge.opcode,w2c_bgaRec_single_recharge),DB.instance.register(w2c_bgaRec_acum_recharge.opcode,w2c_bgaRec_acum_recharge),DB.instance.register(w2c_gsaRec_daily_consumption.opcode,w2c_gsaRec_daily_consumption),DB.instance.register(w2c_bgaRec_continue_recharge.opcode,w2c_bgaRec_continue_recharge),DB.instance.register(w2c_bgaRec_activeness_gift.opcode,w2c_bgaRec_activeness_gift),DB.instance.register(w2c_gsaRec_opensvr_rank.opcode,w2c_gsaRec_opensvr_rank),DB.instance.register(w2c_gsaRec_opensvr_continuous_recharge.opcode,w2c_gsaRec_opensvr_continuous_recharge),DB.instance.register(w2c_gsaRec_tmguildctrb_rank.opcode,w2c_gsaRec_tmguildctrb_rank),DB.instance.register(w2c_gsaRec_tmapvpscore_rank.opcode,w2c_gsaRec_tmapvpscore_rank),DB.instance.register(w2c_gsaAct_tmapvpscore_rank_cross_state.opcode,w2c_gsaAct_tmapvpscore_rank_cross_state),DB.instance.register(w2c_gsaRec_tmbanquet_rank.opcode,w2c_gsaRec_tmbanquet_rank),DB.instance.register(w2c_gsaRec_xgmb_point.opcode,w2c_gsaRec_xgmb_point),DB.instance.register(w2c_gsaRec_xgmb_festival_point.opcode,w2c_gsaRec_xgmb_festival_point),DB.instance.register(w2c_gsaRec_qltb_point.opcode,w2c_gsaRec_qltb_point),DB.instance.register(w2c_gsaRec_qltb_festival_point.opcode,w2c_gsaRec_qltb_festival_point),DB.instance.register(w2c_gsaRec_powerGain_rank.opcode,w2c_gsaRec_powerGain_rank),DB.instance.register(w2c_gsaRec_talismanGain_rank.opcode,w2c_gsaRec_talismanGain_rank),DB.instance.register(w2c_gsaRec_talismanAptGain_rank.opcode,w2c_gsaRec_talismanAptGain_rank),DB.instance.register(w2c_gsaRec_xianYuanGain_rank.opcode,w2c_gsaRec_xianYuanGain_rank),DB.instance.register(q2c_csaRec_powerGain_rank.opcode,q2c_csaRec_powerGain_rank),DB.instance.register(q2c_csaRec_talismanGain_rank.opcode,q2c_csaRec_talismanGain_rank),DB.instance.register(q2c_csaRec_talismanAptGain_rank.opcode,q2c_csaRec_talismanAptGain_rank),DB.instance.register(q2c_csaRec_xianYuanGain_rank.opcode,q2c_csaRec_xianYuanGain_rank),DB.instance.register(q2c_csaRec_asyncPvp_rank.opcode,q2c_csaRec_asyncPvp_rank),DB.instance.register(w2c_bgaRec_powerGain_rank.opcode,w2c_bgaRec_powerGain_rank),DB.instance.register(w2c_bgaAct_powerGain_rank_info.opcode,w2c_bgaAct_powerGain_rank_info),DB.instance.register(w2c_bgaRec_talismanGain_rank.opcode,w2c_bgaRec_talismanGain_rank),DB.instance.register(w2c_bgaAct_talismanGain_rank_info.opcode,w2c_bgaAct_talismanGain_rank_info),DB.instance.register(w2c_bgaRec_talismanAptGain_rank.opcode,w2c_bgaRec_talismanAptGain_rank),DB.instance.register(w2c_bgaAct_talismanAptGain_rank_info.opcode,w2c_bgaAct_talismanAptGain_rank_info),DB.instance.register(w2c_bgaRec_xianYuanGain_rank.opcode,w2c_bgaRec_xianYuanGain_rank),DB.instance.register(w2c_bgaAct_xianYuanGain_rank_info.opcode,w2c_bgaAct_xianYuanGain_rank_info),DB.instance.register(w2c_bgaRec_async_pvp_rank.opcode,w2c_bgaRec_async_pvp_rank),DB.instance.register(w2c_bgaAct_async_pvp_rank_info.opcode,w2c_bgaAct_async_pvp_rank_info),DB.instance.register(q2c_csaRec_sweetGain_rank.opcode,q2c_csaRec_sweetGain_rank),DB.instance.register(q2c_sweet_rank_page.opcode,q2c_sweet_rank_page),DB.instance.register(w2c_gsaRec_arenaRush_rank.opcode,w2c_gsaRec_arenaRush_rank),DB.instance.register(w2c_get_arenaRush_target_reward_reply.opcode,w2c_get_arenaRush_target_reward_reply),DB.instance.register(w2c_arenaRush_high_rank_changed.opcode,w2c_arenaRush_high_rank_changed),DB.instance.register(w2c_invite_report_status.opcode,w2c_invite_report_status),DB.instance.register(w2c_invite_reward_status.opcode,w2c_invite_reward_status),DB.instance.register(w2c_gsaRec_sgsq.opcode,w2c_gsaRec_sgsq),DB.instance.register(w2c_gsa_minewar_miner.opcode,w2c_gsa_minewar_miner),DB.instance.register(w2c_gsa_minewar_mines.opcode,w2c_gsa_minewar_mines),DB.instance.register(w2c_gsa_minewar_mine_detail.opcode,w2c_gsa_minewar_mine_detail),DB.instance.register(w2c_gsa_minewar_battle_res.opcode,w2c_gsa_minewar_battle_res),DB.instance.register(w2c_gsa_minewar_move.opcode,w2c_gsa_minewar_move),DB.instance.register(w2c_gsa_minewar_slot.opcode,w2c_gsa_minewar_slot),DB.instance.register(w2c_gsa_minewar_enterslot.opcode,w2c_gsa_minewar_enterslot),DB.instance.register(w2c_gsa_minewar_buy.opcode,w2c_gsa_minewar_buy),DB.instance.register(w2c_gsa_minewar_exchange.opcode,w2c_gsa_minewar_exchange),DB.instance.register(w2c_gsa_minewar_exchange_num.opcode,w2c_gsa_minewar_exchange_num),DB.instance.register(w2c_gsa_minewar_rank_reward.opcode,w2c_gsa_minewar_rank_reward),DB.instance.register(w2c_gsa_minewar_achvs.opcode,w2c_gsa_minewar_achvs),DB.instance.register(w2c_gsa_minewar_achvrwd.opcode,w2c_gsa_minewar_achvrwd),DB.instance.register(w2c_gsa_minewar_records.opcode,w2c_gsa_minewar_records),DB.instance.register(w2c_gsa_minewar_stage.opcode,w2c_gsa_minewar_stage),DB.instance.register(w2c_gsa_minewar_reports.opcode,w2c_gsa_minewar_reports),DB.instance.register(w2c_gsaRec_turntable.opcode,w2c_gsaRec_turntable),DB.instance.register(w2c_gsaAct_turntable_turn.opcode,w2c_gsaAct_turntable_turn),DB.instance.register(w2c_gsaRec_turntable_record.opcode,w2c_gsaRec_turntable_record),DB.instance.register(w2c_bgaRec_turntable.opcode,w2c_bgaRec_turntable),DB.instance.register(w2c_bgaAct_turntable_turn.opcode,w2c_bgaAct_turntable_turn),DB.instance.register(w2c_bgaRec_turntable_record.opcode,w2c_bgaRec_turntable_record),DB.instance.register(w2c_gsaRec_zuhe_status.opcode,w2c_gsaRec_zuhe_status),DB.instance.register(w2c_gsaRec_limitGift.opcode,w2c_gsaRec_limitGift),DB.instance.register(w2c_bgaRec_limitGift.opcode,w2c_bgaRec_limitGift),DB.instance.register(w2c_gsaRec_limitReward.opcode,w2c_gsaRec_limitReward),DB.instance.register(w2c_friend_discount_info.opcode,w2c_friend_discount_info),DB.instance.register(w2c_friend_discount.opcode,w2c_friend_discount),DB.instance.register(w2c_friend_discount_invite.opcode,w2c_friend_discount_invite),DB.instance.register(w2c_discount_friend_list.opcode,w2c_discount_friend_list),DB.instance.register(w2c_guild_krieg_main_ui_info.opcode,w2c_guild_krieg_main_ui_info),DB.instance.register(w2c_guild_krieg_use_prop.opcode,w2c_guild_krieg_use_prop),DB.instance.register(w2c_guild_krieg_base_info.opcode,w2c_guild_krieg_base_info),DB.instance.register(w2c_guild_krieg_member_info.opcode,w2c_guild_krieg_member_info),DB.instance.register(w2c_guild_krieg_broadcast_guild_item.opcode,w2c_guild_krieg_broadcast_guild_item),DB.instance.register(w2c_guild_krieg_boss_list.opcode,w2c_guild_krieg_boss_list),DB.instance.register(m2c_guild_krieg_reward_info.opcode,m2c_guild_krieg_reward_info),DB.instance.register(w2c_guild_krieg_boss_reward_info.opcode,w2c_guild_krieg_boss_reward_info),DB.instance.register(w2c_bgaDesc_incrank.opcode,w2c_bgaDesc_incrank),DB.instance.register(w2c_roulette_info.opcode,w2c_roulette_info),DB.instance.register(w2c_roulette_record.opcode,w2c_roulette_record),DB.instance.register(w2c_roulette_start.opcode,w2c_roulette_start),DB.instance.register(w2c_roulette_get_reward.opcode,w2c_roulette_get_reward),DB.instance.register(q2c_gsa_minewar_miner.opcode,q2c_gsa_minewar_miner),DB.instance.register(q2c_gsa_minewar_mines.opcode,q2c_gsa_minewar_mines),DB.instance.register(q2c_gsa_minewar_mine_detail.opcode,q2c_gsa_minewar_mine_detail),DB.instance.register(q2c_gsa_minewar_battle_res.opcode,q2c_gsa_minewar_battle_res),DB.instance.register(q2c_gsa_minewar_move.opcode,q2c_gsa_minewar_move),DB.instance.register(q2c_gsa_minewar_slot.opcode,q2c_gsa_minewar_slot),DB.instance.register(q2c_gsa_minewar_enterslot.opcode,q2c_gsa_minewar_enterslot),DB.instance.register(q2c_gsa_minewar_buy.opcode,q2c_gsa_minewar_buy),DB.instance.register(q2c_gsa_minewar_exchange.opcode,q2c_gsa_minewar_exchange),DB.instance.register(q2c_gsa_minewar_exchange_num.opcode,q2c_gsa_minewar_exchange_num),DB.instance.register(q2c_gsa_minewar_rank_reward.opcode,q2c_gsa_minewar_rank_reward),DB.instance.register(q2c_gsa_minewar_achvs.opcode,q2c_gsa_minewar_achvs),DB.instance.register(q2c_gsa_minewar_achvrwd.opcode,q2c_gsa_minewar_achvrwd),DB.instance.register(q2c_gsa_minewar_records.opcode,q2c_gsa_minewar_records),DB.instance.register(q2c_gsa_minewar_stage.opcode,q2c_gsa_minewar_stage),DB.instance.register(q2c_gsa_minewar_reports.opcode,q2c_gsa_minewar_reports),DB.instance.register(q2c_crossboss_list.opcode,q2c_crossboss_list),DB.instance.register(q2c_crossboss_buyrwdtimes.opcode,q2c_crossboss_buyrwdtimes),DB.instance.register(m2c_crossboss_owner.opcode,m2c_crossboss_owner),DB.instance.register(m2c_crossboss_kill.opcode,m2c_crossboss_kill),DB.instance.register(m2c_crossboss_reborn_weariness.opcode,m2c_crossboss_reborn_weariness),DB.instance.register(w2c_bgaRec_login_activity.opcode,w2c_bgaRec_login_activity),DB.instance.register(w2c_bgaRec_holiday_gift.opcode,w2c_bgaRec_holiday_gift),DB.instance.register(w2c_gsaRec_opensvr_discount_recharge.opcode,w2c_gsaRec_opensvr_discount_recharge),DB.instance.register(q2c_dragon_palace_boss_list.opcode,q2c_dragon_palace_boss_list),DB.instance.register(q2c_dragon_palace_buyrwdtimes.opcode,q2c_dragon_palace_buyrwdtimes),DB.instance.register(q2c_fb_dragon_palace_dmg_rank.opcode,q2c_fb_dragon_palace_dmg_rank),DB.instance.register(q2c_fb_server_dragon_palace_dmg_rank.opcode,q2c_fb_server_dragon_palace_dmg_rank),DB.instance.register(w2c_bg_red_envelopes_start.opcode,w2c_bg_red_envelopes_start),DB.instance.register(w2c_bg_red_envelopes_stop.opcode,w2c_bg_red_envelopes_stop),DB.instance.register(w2c_bg_red_envelopes_receive.opcode,w2c_bg_red_envelopes_receive),DB.instance.register(q2c_guarding_nantianmen_info.opcode,q2c_guarding_nantianmen_info),DB.instance.register(m2c_guarding_nantianmen_challenge_result.opcode,m2c_guarding_nantianmen_challenge_result),DB.instance.register(m2c_guarding_nantianmen_attack.opcode,m2c_guarding_nantianmen_attack),DB.instance.register(m2c_query_guarding_nantianmen_format_reply.opcode,m2c_query_guarding_nantianmen_format_reply),DB.instance.register(q2c_query_guarding_nantianmen_attack_record.opcode,q2c_query_guarding_nantianmen_attack_record),DB.instance.register(q2c_query_guarding_nantianmen_defense_record.opcode,q2c_query_guarding_nantianmen_defense_record),DB.instance.register(m2c_guarding_nantianmen_clone.opcode,m2c_guarding_nantianmen_clone),DB.instance.register(q2c_be_attack_in_guarding_nantianmen.opcode,q2c_be_attack_in_guarding_nantianmen),DB.instance.register(q2c_guarding_nantianmen_score_changed.opcode,q2c_guarding_nantianmen_score_changed),DB.instance.register(q2c_double_pvp_info.opcode,q2c_double_pvp_info),DB.instance.register(q2c_double_pvp_self_team.opcode,q2c_double_pvp_self_team),DB.instance.register(q2c_double_pvp_invitation_list.opcode,q2c_double_pvp_invitation_list),DB.instance.register(q2c_double_pvp_invitation_plr.opcode,q2c_double_pvp_invitation_plr),DB.instance.register(q2c_double_pvp_be_invitation_plr.opcode,q2c_double_pvp_be_invitation_plr),DB.instance.register(q2c_double_pvp_be_invitation_list.opcode,q2c_double_pvp_be_invitation_list),DB.instance.register(q2c_double_pvp_team_list.opcode,q2c_double_pvp_team_list),DB.instance.register(q2c_double_pvp_team_msg.opcode,q2c_double_pvp_team_msg),DB.instance.register(q2c_double_pvp_change_name.opcode,q2c_double_pvp_change_name),DB.instance.register(q2c_double_pvp_team_info.opcode,q2c_double_pvp_team_info),DB.instance.register(q2c_double_pvp_plr_update.opcode,q2c_double_pvp_plr_update),DB.instance.register(q2c_double_pvp_record.opcode,q2c_double_pvp_record),DB.instance.register(q2c_double_pvp_get_rank.opcode,q2c_double_pvp_get_rank),DB.instance.register(m2c_double_pvp_clone_formation.opcode,m2c_double_pvp_clone_formation),DB.instance.register(q2c_double_pvp_member_clone_formation.opcode,q2c_double_pvp_member_clone_formation),DB.instance.register(q2c_double_pvp_match.opcode,q2c_double_pvp_match),DB.instance.register(q2c_double_pvp_create_team_ok.opcode,q2c_double_pvp_create_team_ok),DB.instance.register(w2c_gsaRec_investment_plan.opcode,w2c_gsaRec_investment_plan),DB.instance.register(w2c_gsaRec_grow_up_fund.opcode,w2c_gsaRec_grow_up_fund),DB.instance.register(q2c_csaRec_charge_rank.opcode,q2c_csaRec_charge_rank),DB.instance.register(q2c_get_charge_rank_target_reward_reply.opcode,q2c_get_charge_rank_target_reward_reply),DB.instance.register(q2c_csaRec_consume_rank.opcode,q2c_csaRec_consume_rank),DB.instance.register(q2c_get_consume_rank_target_reward_reply.opcode,q2c_get_consume_rank_target_reward_reply),DB.instance.register(q2c_consume_value_changed_notify.opcode,q2c_consume_value_changed_notify),DB.instance.register(q2c_charge_value_changed_notify.opcode,q2c_charge_value_changed_notify),DB.instance.register(q2c_my_charge_value_changed_notify.opcode,q2c_my_charge_value_changed_notify),DB.instance.register(w2c_get_festival_target_info.opcode,w2c_get_festival_target_info),DB.instance.register(w2c_get_festival_task_reward.opcode,w2c_get_festival_task_reward),DB.instance.register(w2c_get_festival_integral_reward.opcode,w2c_get_festival_integral_reward),DB.instance.register(q2c_red_push.opcode,q2c_red_push),DB.instance.register(w2c_bg_christmas_beat_monster_info.opcode,w2c_bg_christmas_beat_monster_info),DB.instance.register(w2c_bg_christmas_beat_monster_quit_ret.opcode,w2c_bg_christmas_beat_monster_quit_ret),DB.instance.register(w2c_bg_christmas_beat_monster_get_rank.opcode,w2c_bg_christmas_beat_monster_get_rank),DB.instance.register(w2c_bg_christmas_beat_monster_boss_refreshed.opcode,w2c_bg_christmas_beat_monster_boss_refreshed),DB.instance.register(w2c_change_item_info.opcode,w2c_change_item_info),DB.instance.register(w2c_change_item.opcode,w2c_change_item),DB.instance.register(q2c_guildPvp_node_info.opcode,q2c_guildPvp_node_info),DB.instance.register(q2c_guildPvp_one_node_info.opcode,q2c_guildPvp_one_node_info),DB.instance.register(q2c_guildPvp_clone_info.opcode,q2c_guildPvp_clone_info),DB.instance.register(q2c_guildPvp_clone_hire.opcode,q2c_guildPvp_clone_hire),DB.instance.register(q2c_guildPvp_node_reward_red.opcode,q2c_guildPvp_node_reward_red),DB.instance.register(q2c_guildPvp_node_reward_info.opcode,q2c_guildPvp_node_reward_info),DB.instance.register(q2c_guildPvp_node_reward_get.opcode,q2c_guildPvp_node_reward_get),DB.instance.register(q2c_guildPvp_kill_info.opcode,q2c_guildPvp_kill_info),DB.instance.register(q2c_guildPvp_node_fight_info.opcode,q2c_guildPvp_node_fight_info),DB.instance.register(q2c_guildPvp_node_now_fight_info.opcode,q2c_guildPvp_node_now_fight_info),DB.instance.register(q2c_guildPvp_node_declare_war.opcode,q2c_guildPvp_node_declare_war),DB.instance.register(q2c_guildPvp_node_defense_info.opcode,q2c_guildPvp_node_defense_info),DB.instance.register(q2c_guildPvp_node_fight_reward.opcode,q2c_guildPvp_node_fight_reward),DB.instance.register(q2c_guildPvp_node_fight_end_reward.opcode,q2c_guildPvp_node_fight_end_reward),DB.instance.register(q2c_guildPvp_node_fight_reward_get.opcode,q2c_guildPvp_node_fight_reward_get),DB.instance.register(q2c_guildPvp_node_be_attacked.opcode,q2c_guildPvp_node_be_attacked);var n_c=!0,sheildLogs=["c2m_movement_start","m2c_movement_start","m2c_player_appear","m2c_monster_appear","m2c_property_update","c2m_skill_use","m2c_skill_use_rep","m2c_skill_begin","m2c_skill_hit","m2c_skill_cd_update","m2c_common_cd_update","m2c_notify_fb_damage_rank","m2c_notify_fb_self_damge","c2w_fb_boss_lst","w2c_fb_boss_lst"];function h_t(e,p_l){void 0===p_l&&(p_l="yyyy-MM-dd hh:mm:ss"),e.toLocaleString();var p_g={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),b_x:e.getMilliseconds()};for(var b_s in/(y+)/.test(p_l)&&(p_l=p_l.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),p_g)new RegExp("("+b_s+")").test(p_l)&&(p_l=p_l.replace(RegExp.$1,1==RegExp.$1.length?p_g[b_s]:("00"+p_g[b_s]).substr((""+p_g[b_s]).length)));return p_l}function j_h(e,p_l){(GPlatform.isDebug||GPlatform.isPrint)&&console.log("[%s]%c[%s]",h_t(new Date,"hh:mm:ss"),"background: #222; color: #ffff00",e.name,JSON.stringify(p_l))}function r_o(e,p_l){(GPlatform.isDebug||GPlatform.isPrint)&&console.log("[%s]%c[%s]",h_t(new Date,"hh:mm:ss"),"background: #222; color: #00ffff",e.name,JSON.stringify(p_l))}var b_d=function(){function e(){}return e.register=function(){new r_x,new h_a,new x_y,new TeamController,new l_s,new MarryController,new d_q},e}(),ProtocolController=function(){function e(){this._limitCount=0,DB.instance.on("open",this,this.onOpen),DB.instance.on(w2c_login_rep.opcode.toString(),this,this.onLoginRep),DB.instance.on(w2c_register_please.opcode.toString(),this,this.onRegisterPlease),DB.instance.on(w2c_register_rep.opcode.toString(),this,this.onRegisterRep),DB.instance.on(m2c_enter_map_pre.opcode.toString(),this,this.onEnterMapPre),DB.instance.on(s2c_warning.opcode.toString(),this,this.onWarnOpen),DB.instance.on(s2c_heartbeat.opcode.toString(),this,this.onHeartBeat),DB.instance.on(s2c_error.opcode.toString(),this,this.s2cErrorHandler),DB.instance.on(m2c_pop_ui.opcode.toString(),this,this.s2cTipsHandler),DB.instance.on(m2c_svr_open_time.opcode.toString(),this,this.onServerOpen),DB.instance.on(m2c_property_update.opcode.toString(),this,this.onPropertyUpdate),DB.instance.on(m2c_player_appear.opcode.toString(),this,this.onPlayerAppear),DB.instance.on(m2c_monster_appear.opcode.toString(),this,this.onMonsterAppear),DB.instance.on(m2c_drop_appear.opcode.toString(),this,this.onDropAppear),DB.instance.on(m2c_npc_appear.opcode.toString(),this,this.onNpcAppear),DB.instance.on(m2c_collect_appear.opcode.toString(),this,this.onCollectAppear),DB.instance.on(m2c_robot_appear.opcode.toString(),this,this.onRobotAppear),DB.instance.on(m2c_movement_start.opcode.toString(),this,this.onObjMoveUpdate),DB.instance.on(m2c_obj_disappear.opcode.toString(),this,this.onObjDisppearUpdate),DB.instance.on(m2c_movement_stop.opcode.toString(),this,this.onObjMoveStop),DB.instance.on(m2c_hangup_offline_drop.opcode.toString(),this,this.onOfflineDrop),DB.instance.on(m2c_hangup_online_reward.opcode.toString(),this,this.onHangupDrop),DB.instance.on(m2c_collect_begin.opcode.toString(),this,this.onCollectBegin),DB.instance.on(m2c_collect_interrupt.opcode.toString(),this,this.onCollectInterrupt),DB.instance.on(m2c_collect_freezetime.opcode.toString(),this,this.onCollectFreezetime),DB.instance.on(m2c_collect_collectedTimes.opcode.toString(),this,this.onCollectTimes),DB.instance.on(w2c_plr_base_info.opcode.toString(),this,this.onChatPlayerInfo),DB.instance.on(m2c_skill_list.opcode.toString(),this,this.onSkillListUpdate),DB.instance.on(m2c_skill_info.opcode.toString(),this,this.onSkillInfoUpdate),DB.instance.on(m2c_skill_da_zhao.opcode.toString(),this,this.onDazhaoSkillInfoUpdate),DB.instance.on(m2c_skill_prio_swap.opcode.toString(),this,this.onSkillPrioSwapUpdate),DB.instance.on(m2c_common_cd_update.opcode.toString(),this,this.onSkillCommonCdUpdate),DB.instance.on(m2c_skill_cd_update.opcode.toString(),this,this.onSkillCdUpdate),DB.instance.on(m2c_skill_mental_info.opcode.toString(),this,this.onMental),DB.instance.on(m2c_skill_begin.opcode.toString(),this,this.onSkillBegin),DB.instance.on(m2c_skill_use_rep.opcode.toString(),this,this.onSkillUseRep),DB.instance.on(m2c_skill_hit.opcode.toString(),this,this.onSkillHit),DB.instance.on(m2c_property_show.opcode.toString(),this,this.onPropertyShow),DB.instance.on(m2c_buff_update.opcode.toString(),this,this.onBuffUpdate),DB.instance.on(m2c_buff_remove.opcode.toString(),this,this.onBuffRemove),DB.instance.on(m2c_bekill_info.opcode.toString(),this,this.onBeKillInfo),DB.instance.on(m2c_state_info.opcode.toString(),this,this.onStateInfo),DB.instance.on(m2c_state_increase.opcode.toString(),this,this.onStateIncrease),DB.instance.on(m2c_state_lv_up.opcode.toString(),this,this.onStateLvUp),DB.instance.on(m2c_state_sub_up.opcode.toString(),this,this.onStateSubUp),DB.instance.on(m2c_achievement_info.opcode.toString(),this,this.onAchievementInfo),DB.instance.on(m2c_achievement_fin.opcode.toString(),this,this.onAchievementFin),DB.instance.on(m2c_achievement_update.opcode.toString(),this,this.onAchievementUpdate),DB.instance.on(m2c_decompose_equip.opcode.toString(),this,this.onDecomposeEquip),DB.instance.on(m2c_strength_info.opcode.toString(),this,this.onStrengthInfo),DB.instance.on(m2c_strength_auto.opcode.toString(),this,this.onStrengthAuto),DB.instance.on(m2c_ride_info.opcode.toString(),this,this.onRideInfo),DB.instance.on(m2c_ride_update.opcode.toString(),this,this.onRideUpdate),DB.instance.on(m2c_ride_combine.opcode.toString(),this,this.onRideCombine),DB.instance.on(m2c_ride_active.opcode.toString(),this,this.onRideActive),DB.instance.on(m2c_ride_up_star.opcode.toString(),this,this.onRideUpStar),DB.instance.on(w2c_friend_list.opcode.toString(),this,this.onFriendList),DB.instance.on(w2c_request_list.opcode.toString(),this,this.onRequestList),DB.instance.on(w2c_recommend_list.opcode.toString(),this,this.onRecommendList),DB.instance.on(w2c_black_list.opcode.toString(),this,this.onBlackList),DB.instance.on(w2c_add_friend.opcode.toString(),this,this.onAddFriend),DB.instance.on(w2c_delete_req.opcode.toString(),this,this.onDelFriendReq),DB.instance.on(w2c_friend_delete.opcode.toString(),this,this.onDelFriend),DB.instance.on(w2c_friend_add_rep.opcode.toString(),this,this.onRepAddFriend),DB.instance.on(w2c_friend_add_req.opcode.toString(),this,this.onAddFriendReq),DB.instance.on(w2c_friend_add_black.opcode.toString(),this,this.onAddBlack),DB.instance.on(w2c_friend_delete_black.opcode.toString(),this,this.onDelBlack),DB.instance.on(w2c_friend_give_by.opcode.toString(),this,this.onGiveRoseReq),DB.instance.on(w2c_friend_give.opcode.toString(),this,this.onGiveFriendGiftReq),DB.instance.on(w2c_friend_activeness_getReward.opcode.toString(),this,this.onGetfriendReward),DB.instance.on(w2c_friend_activeness_status.opcode.toString(),this,this.onfriendRewardList),DB.instance.on(m2c_item_bag_items.opcode.toString(),this,this.onItemBagInfo),DB.instance.on(m2c_item_add.opcode.toString(),this,this.onItemAdd),DB.instance.on(m2c_item_del.opcode.toString(),this,this.onItemDel),DB.instance.on(m2c_item_update_amount.opcode.toString(),this,this.onItemUpdateAmount),DB.instance.on(m2c_item_sort.opcode.toString(),this,this.onItemSort),DB.instance.on(m2c_item_cd.opcode.toString(),this,this.onItemCDUpdate),DB.instance.on(m2c_item_swap.opcode.toString(),this,this.onItemSwap),DB.instance.on(m2c_item_rand_ts_attr.opcode.toString(),this,this.onItemRandTsAttrInfo),DB.instance.on(m2c_item_rand_ts_deployExp.opcode.toString(),this,this.onItemRandTsDeployInfo),DB.instance.on(m2c_item_rand_beast_ployExp.opcode.toString(),this,this.onItemRandABDeployInfo),DB.instance.on(m2c_compose_auto.opcode.toString(),this,this.getComposeInfo),DB.instance.on(m2c_compose_ui_info.opcode.toString(),this,this.onComposeInfo),DB.instance.on(m2c_item_use_add.opcode.toString(),this,this.onAddItemforBag),DB.instance.on(m2c_godEquip_compose.opcode.toString(),this,this.OnReturnComposeResult),DB.instance.on(w2c_chat_rec_list.opcode.toString(),this,this.onChatRecLst),DB.instance.on(w2c_chat_rec.opcode.toString(),this,this.onChatRec),DB.instance.on(w2c_chat_private_rep.opcode.toString(),this,this.onChatPrivateRep),DB.instance.on(w2c_chat_private_rec.opcode.toString(),this,this.onChatPrivateRec),DB.instance.on(w2c_chat_private_plr.opcode.toString(),this,this.onChatPrivatePlr),DB.instance.on(m2c_send_broadcast.opcode.toString(),this,this.onSendBroadcast),DB.instance.on(s2c_cross_open.opcode.toString(),this,this.onCrossOpen),DB.instance.on(m2c_query_my_silence_state.opcode.toString(),this,this.onUpdateMySilenceState),DB.instance.on(m2c_query_silence_record.opcode.toString(),this,this.onUpdateSilenceRecord),DB.instance.on(m2c_silence_reply.opcode.toString(),this,this.onUpdateSilenceReply),DB.instance.on(m2c_mail_list.opcode.toString(),this,this.onMailList),DB.instance.on(m2c_mail_update.opcode.toString(),this,this.onMailUpdate),DB.instance.on(m2c_shop_buy_list.opcode.toString(),this,this.onShopDataUpdate),DB.instance.on(m2c_shop_buy.opcode.toString(),this,this.onShopBuyData),DB.instance.on(m2c_task_accepted.opcode.toString(),this,this.onTaskInit),DB.instance.on(m2c_task_accept.opcode.toString(),this,this.onTaskAccept),DB.instance.on(m2c_task_finish.opcode.toString(),this,this.onTaskFinish),DB.instance.on(m2c_task_update.opcode.toString(),this,this.onTaskUpdate),DB.instance.on(m2c_task_giveup.opcode.toString(),this,this.onTaskGiveup),DB.instance.on(m2c_passed_fb_list.opcode.toString(),this,this.onPassedFbList),DB.instance.on(m2c_notify_fb_info.opcode.toString(),this,this.onNotifyFbInfo),DB.instance.on(m2c_update_fb_info.opcode.toString(),this,this.onUpdateFbInfo),DB.instance.on(m2c_notify_fb_result.opcode.toString(),this,this.onNotifyFbResult),DB.instance.on(w2c_fb_boss_lst.opcode.toString(),this,this.onFbBossLst),DB.instance.on(m2c_notify_fb_damage_rank.opcode.toString(),this,this.onFbDmgRank),DB.instance.on(m2c_notify_fb_server_damage_rank.opcode.toString(),this,this.onFbSerDmgRank),DB.instance.on(m2c_notify_fb_self_damge.opcode.toString(),this,this.onFbSelfDmgRank),DB.instance.on(m2c_notify_fb_boss_fb_info.opcode.toString(),this,this.onFbBossFbInfo),DB.instance.on(m2c_fb_team_list.opcode.toString(),this,this.onFbTeamList),DB.instance.on(m2c_fb_plr_list.opcode.toString(),this,this.onFbPlrList),DB.instance.on(m2c_update_fb_team_info.opcode.toString(),this,this.onFbTeamUpdate),DB.instance.on(m2c_fb_team_leave.opcode.toString(),this,this.onFbTeamLeave),DB.instance.on(m2c_fb_remind.opcode.toString(),this,this.onFbRemind),DB.instance.on(w2c_fb_stateboss_dmg_rank.opcode.toString(),this,this.onFbStatebossDmgRank),DB.instance.on(m2c_fb_set_attack_target_type.opcode.toString(),this,this.onFbSetAttackTargetType),DB.instance.on(m2c_fb_state_start_dmg.opcode.toString(),this,this.onFbStateStartDmg),DB.instance.on(m2c_fb_help_story.opcode.toString(),this,this.onFbHelpStory),DB.instance.on(m2c_fb_pk_list.opcode.toString(),this,this.onFbpkList),DB.instance.on(m2c_fb_hurt_reward_status.opcode.toString(),this,this.onFbHurtRewardStatus),DB.instance.on(m2c_fb_hurt_reward_status.opcode.toString(),this,this.onFbHurtRewardStatus),DB.instance.on(w2c_fb_notify_thanks_ui.opcode.toString(),this,this.onFbOpenUI),DB.instance.on(m2c_state_fb_notify_choose.opcode.toString(),this,this.m2c_state_fb_notify_choose),DB.instance.on(m2c_state_fb_choose.opcode.toString(),this,this.m2c_state_fb_choose),DB.instance.on(m2c_state_fb_stage.opcode.toString(),this,this.m2c_state_fb_stage),DB.instance.on(m2c_state_fb_props.opcode.toString(),this,this.m2c_state_fb_props),DB.instance.on(q2c_crossboss_list.opcode.toString(),this,this.onCrossBossInfo),DB.instance.on(m2c_crossboss_owner.opcode.toString(),this,this.onCrossBossOwnership),DB.instance.on(m2c_crossboss_reborn_weariness.opcode.toString(),this,this.onCrossBossBeKillTimes),DB.instance.on(m2c_crossboss_kill.opcode.toString(),this,this.onCrossBossKillPlayer),DB.instance.on(q2c_crossboss_buyrwdtimes.opcode.toString(),this,this.onCrossBossTimesBuy),DB.instance.on(m2c_green_boss_reward_info.opcode.toString(),this,this.onGreneBossRewardInfo),DB.instance.on(m2c_wildboss_inspire.opcode.toString(),this,this.updateWildBossInspireTimes),DB.instance.on(m2c_get_green_boss_reward.opcode.toString(),this,this.onGetRewardGereBoss),DB.instance.on(m2c_fb_pagoda_cansweep.opcode.toString(),this,this.onReturnPagodaSweepFbId),DB.instance.on(c2m_fb_create_team.opcode.toString(),this,this.onFBCreateTeam),DB.instance.on(w2c_rank_page.opcode.toString(),this,this.onRankPage),DB.instance.on(m2c_rank_worship_info.opcode.toString(),this,this.onRankWorshipInfo),DB.instance.on(m2c_rank_worship.opcode.toString(),this,this.onRankWorshipResult),DB.instance.on(m2c_talisman_list.opcode.toString(),this,this.onTalismanList),DB.instance.on(m2c_talisman_info.opcode.toString(),this,this.onTalismanUpdate),DB.instance.on(m2c_talisman_upgrade.opcode.toString(),this,this.onTalismanUpgrade),DB.instance.on(m2c_talisman_uplevel.opcode.toString(),this,this.onTalismanUplV),DB.instance.on(m2c_talisman_updeploy.opcode.toString(),this,this.onTalismanUpDeploy),DB.instance.on(m2c_talisman_setfight.opcode.toString(),this,this.onTalismanSetFight),DB.instance.on(m2c_talismen_engulf.opcode.toString(),this,this.onTalismanEngulf),DB.instance.on(m2c_talisman_refine.opcode.toString(),this,this.onTalismanRefine),DB.instance.on(m2c_talisman_refine_stop.opcode.toString(),this,this.onTalismanRefineStop),DB.instance.on(m2c_talisman_suits.opcode.toString(),this,this.onTalismanSuits),DB.instance.on(m2c_talisman_upsuit.opcode.toString(),this,this.onTalismanSuitUp),DB.instance.on(m2c_talisman_equip_active.opcode.toString(),this,this.onActiveTalismanEquip),DB.instance.on(m2c_qihun_active.opcode.toString(),this,this.onTalismanSoulActive),DB.instance.on(m2c_qihun_level_up.opcode.toString(),this,this.onTalismanSoulUpLevel),DB.instance.on(m2c_qihun_star_up.opcode.toString(),this,this.onTalismanSoulUpGrade),DB.instance.on(m2c_talisman_speel.opcode.toString(),this,this.onTalismanSpell),DB.instance.on(m2c_talisman_buy_speel_slot.opcode.toString(),this,this.onTalismanBuySpeel),DB.instance.on(m2c_office_mine_info.opcode.toString(),this,this.onHoleDataUpdate),DB.instance.on(m2c_office_mine_update.opcode.toString(),this,this.onMineDataUpDate),DB.instance.on(m2c_office_facility_info.opcode.toString(),this,this.onFacilityDateUpDate),DB.instance.on(m2c_office_get_treasure.opcode.toString(),this,this.onGetTreasureDate),DB.instance.on(m2c_office_exped_info.opcode.toString(),this,this.onTreasureBoxDate),DB.instance.on(m2c_office_treasure_info.opcode.toString(),this,this.onTreasureDate),DB.instance.on(m2c_office_exped_task_stop.opcode.toString(),this,this.onStopTreasureboxTask),DB.instance.on(m2c_office_exped_task_start.opcode.toString(),this,this.onStartTreasureboxTask),DB.instance.on(m2c_office_exped_get_reward.opcode.toString(),this,this.onGetTreasureboxTaskReward),DB.instance.on(m2c_office_facility_level_up.opcode.toString(),this,this.onUupgradefacility),DB.instance.on(m2c_office_mine_collect.opcode.toString(),this,this.onCrit),DB.instance.on(m2c_offset_facility_reset.opcode.toString(),this,this.onFacilityReset),DB.instance.on(m2c_office_mine_onekey_collect.opcode.toString(),this,this.onOneKeyInfo),DB.instance.on(w2c_banquet_info.opcode.toString(),this,this.onBanquetInfo),DB.instance.on(w2c_banquet_start.opcode.toString(),this,this.onBanqueStart),DB.instance.on(w2c_banquet_lst.opcode.toString(),this,this.onBanqueLst),DB.instance.on(w2c_banquet_join.opcode.toString(),this,this.onBanqueJoin),DB.instance.on(w2c_banquet_query.opcode.toString(),this,this.onBanqueQuery),DB.instance.on(w2c_banquet_new.opcode.toString(),this,this.onNewCreateBanque),DB.instance.on(m2c_asyncpvp_record.opcode.toString(),this,this.onPvpRecordUpdate),DB.instance.on(w2c_asyncpvp_search_kill.opcode.toString(),this,this.onPvpChaseSkill),DB.instance.on(m2c_asyncpvp_round_info.opcode.toString(),this,this.onPvpRoundInfo),DB.instance.on(m2c_asyncpvp_match.opcode.toString(),this,this.onPvpMatch),DB.instance.on(m2c_asyncpvp_info.opcode.toString(),this,this.onPvpInfoUpdate),DB.instance.on(m2c_asyncpvp_combat_result.opcode.toString(),this,this.onPvpRoundResult),DB.instance.on(w2c_asyncpvp_statistics.opcode.toString(),this,this.onPvpAllResult),DB.instance.on(m2c_asyncpvp_buy_prop.opcode.toString(),this,this.onPvpBuyProp),DB.instance.on(w2c_asyncpvp_broadcast.opcode.toString(),this,this.w2c_asyncpvp_broadcast),DB.instance.on(m2c_asyncpvp_exchange_info.opcode.toString(),this,this.m2c_asyncpvp_exchange_info),DB.instance.on(w2c_get_asyncpvp_season_prev_rank.opcode.toString(),this,this.w2c_get_asyncpvp_season_prev_rank),DB.instance.on(m2c_asyncpvp_season_record.opcode.toString(),this,this.m2c_asyncpvp_season_record),DB.instance.on(w2c_guild_list.opcode.toString(),this,this.onGuildList),DB.instance.on(w2c_guild_info.opcode.toString(),this,this.onGuildInfo),DB.instance.on(w2c_update_guild_property.opcode.toString(),this,this.onGuildInfoUpdate),DB.instance.on(w2c_create_guild.opcode.toString(),this,this.onCreateGuild),DB.instance.on(w2c_leave_guild.opcode.toString(),this,this.onPlayerLeaveGuild),DB.instance.on(w2c_join_guild.opcode.toString(),this,this.onJoinReturn),DB.instance.on(w2c_join_success.opcode.toString(),this,this.onPlayerJoin),DB.instance.on(w2c_cancel_join_guild.opcode.toString(),this,this.onCancelJoinReturn),DB.instance.on(w2c_join_list.opcode.toString(),this,this.onJoinList),DB.instance.on(w2c_auto_process_join_request.opcode.toString(),this,this.onAutoJoinRequest),DB.instance.on(w2c_change_office.opcode.toString(),this,this.onChangeOffice),DB.instance.on(w2c_transfer_guild.opcode.toString(),this,this.onTransferGuild),DB.instance.on(w2c_disband_guild.opcode.toString(),this,this.onGuildDisband),DB.instance.on(w2c_guild_change_name_rep.opcode.toString(),this,this.onGuildRename),DB.instance.on(w2c_edit_notice.opcode.toString(),this,this.onNoticeEdite),DB.instance.on(m2c_guild_show_change.opcode.toString(),this,this.onGuildShowChange),DB.instance.on(w2c_guild_checkin.opcode.toString(),this,this.onGuildCheckinProgress),DB.instance.on(w2c_guild_checkin_info.opcode.toString(),this,this.onGuildCheckinInfo),DB.instance.on(w2c_guild_checkin_gift.opcode.toString(),this,this.onGuildCheckinGift),DB.instance.on(m2c_guild_exchange_info.opcode.toString(),this,this.onGuildExchangeInfo),DB.instance.on(w2c_guild_auction_list.opcode.toString(),this,this.onGuildAuctionList),DB.instance.on(w2c_guild_auction_bid.opcode.toString(),this,this.onGuildAuctionBid),DB.instance.on(w2c_guild_auction_buy.opcode.toString(),this,this.onGuildAuctionBuy),DB.instance.on(w2c_guild_auction_history.opcode.toString(),this,this.onGuildAuctionHistory),DB.instance.on(m2c_guild_auction_rec.opcode.toString(),this,this.onGuildAuctionRec),DB.instance.on(w2c_guild_help_info.opcode.toString(),this,this.onGuildHelpInfo),DB.instance.on(w2c_guild_help_list.opcode.toString(),this,this.onGuildHelpList),DB.instance.on(w2c_guild_help_my_list.opcode.toString(),this,this.onGuildHelpMyList),DB.instance.on(w2c_guild_help_assist.opcode.toString(),this,this.onGuildHelpAssist),DB.instance.on(w2c_guild_boss_list.opcode.toString(),this,this.onGuildBossList),DB.instance.on(w2c_guild_boss_open.opcode.toString(),this,this.onGuildBossOpen),DB.instance.on(w2c_guild_boss_rank.opcode.toString(),this,this.onGuildBOssRank),DB.instance.on(w2c_guild_auction_new.opcode.toString(),this,this.onGuildNew),DB.instance.on(m2c_sign_info.opcode.toString(),this,this.onSigninInfo),DB.instance.on(m2c_sign_sign_in.opcode.toString(),this,this.onRetroactiveResult),DB.instance.on(m2c_sign_reward.opcode.toString(),this,this.onTotalSigninRewardUpdate),DB.instance.on(m2c_vip_reward_status.opcode.toString(),this,this.onGetVipReward),DB.instance.on(m2c_month_card_buy.opcode.toString(),this,this.onMonthCardbuyDate),DB.instance.on(m2c_month_card_info.opcode.toString(),this,this.onMonthCardsDate),DB.instance.on(m2c_first_recharge_status.opcode.toString(),this,this.onRechargestatus),DB.instance.on(m2c_month_card_reward.opcode.toString(),this,this.onDayReward),DB.instance.on(m2c_recharge_success.opcode.toString(),this,this.onRechargeSucc),DB.instance.on(w2c_minewar_mine_list.opcode.toString(),this,this.onMineList),DB.instance.on(w2c_minewar_mine.opcode.toString(),this,this.onMineDetail),DB.instance.on(w2c_minewar_miner.opcode.toString(),this,this.onMineRole),DB.instance.on(w2c_minewar_record.opcode.toString(),this,this.onMineRecords),DB.instance.on(w2c_minewar_fight.opcode.toString(),this,this.onMineFightResult),DB.instance.on(w2c_minewar_get_box.opcode.toString(),this,this.onMineGetBox),DB.instance.on(w2c_minewar_exchange.opcode.toString(),this,this.onMineExchange),DB.instance.on(w2c_minewar_move.opcode.toString(),this,this.onMineMove),DB.instance.on(w2c_minewar_exchange.opcode.toString(),this,this.w2c_minewar_exchange),DB.instance.on(w2c_minewar_miner_update.opcode.toString(),this,this.w2c_minewar_miner_update),DB.instance.on(w2c_minewar_berobed.opcode.toString(),this,this.w2c_minewar_berobed),DB.instance.on(m2c_func_open_state.opcode.toString(),this,this.onSysOpenRewad),DB.instance.on(m2c_activeness_list.opcode.toString(),this,this.onActivenessList),DB.instance.on(m2c_activeness_update.opcode.toString(),this,this.onActivenessProUpdate),DB.instance.on(m2c_activeness_reward.opcode.toString(),this,this.onActivenessReward),DB.instance.on(m2c_activeness_exreward.opcode.toString(),this,this.onActivenessExrReward),DB.instance.on(m2c_title_info_rep.opcode.toString(),this,this.onTitleInfo),DB.instance.on(m2c_title_gain.opcode.toString(),this,this.onTitleGain),DB.instance.on(m2c_title_drop.opcode.toString(),this,this.onTitleDrop),DB.instance.on(m2c_title_remove.opcode.toString(),this,this.onTitleRemove),DB.instance.on(m2c_title_wear.opcode.toString(),this,this.onTitleWear),DB.instance.on(m2c_title_level_up.opcode.toString(),this,this.onTitleLevelUp),DB.instance.on(w2c_view_role_info.opcode.toString(),this,this.onViewRoleInfo),DB.instance.on(w2c_view_role_talisman.opcode.toString(),this,this.onViewRoleTalismanInfo),DB.instance.on(w2c_view_role_xianyuan.opcode.toString(),this,this.onViewRoleXianyuanInfo),DB.instance.on(w2c_palace_info.opcode.toString(),this,this.onPalaceInfo),DB.instance.on(w2c_palace_worship.opcode.toString(),this,this.onPalaceWorship),DB.instance.on(m2c_fashion_list.opcode.toString(),this,this.onFashions),DB.instance.on(m2c_fashion_active.opcode.toString(),this,this.onFashionActivity),DB.instance.on(m2c_fashion_use.opcode.toString(),this,this.onFashionUse),DB.instance.on(m2c_fashion_upgrade.opcode.toString(),this,this.onFashionUpgrade),DB.instance.on(m2c_fashion_progress.opcode.toString(),this,this.onFashionQinMiPros),DB.instance.on(w2c_bosscome_info.opcode.toString(),this,this.onBosscomeInfo),DB.instance.on(w2c_bosscome_challenge_list.opcode.toString(),this,this.onBosscomeChallengeList),DB.instance.on(w2c_bosscome_buy_times.opcode.toString(),this,this.onBosscomeBuyTimes),DB.instance.on(w2c_bosscome_inspire.opcode.toString(),this,this.onBosscomeInspire),DB.instance.on(w2c_bosscome_rank_plr.opcode.toString(),this,this.onBosscomePlayerRank),DB.instance.on(w2c_bosscome_rank_guild.opcode.toString(),this,this.onBosscomeGuildRank),DB.instance.on(w2c_bosscome_get_reward.opcode.toString(),this,this.onBosscomeGetReward),DB.instance.on(w2c_bosscome_kill_record.opcode.toString(),this,this.onBosscomeKillRecord),DB.instance.on(m2c_bosscome_rob_end.opcode.toString(),this,this.onBosscomeRobResult),DB.instance.on(w2c_bosscome_challenge_record.opcode.toString(),this,this.onBossComeChallengeRecord),DB.instance.on(m2c_bosscome_challenge_result.opcode.toString(),this,this.onBossComeChallengeResult),DB.instance.on(m2c_bosscome_fb_info.opcode.toString(),this,this.m2c_bosscome_fb_info),DB.instance.on(w2c_bosscome_boss_hp_sync.opcode.toString(),this,this.w2c_bosscome_boss_hp_sync),DB.instance.on(m2c_wechat_collect_reward_info.opcode.toString(),this,this.m2cWeChatRewardInfo),DB.instance.on(m2c_share_reward_info.opcode.toString(),this,this.onFirstShareState),DB.instance.on(m2c_wanba_collect_reward_info.opcode.toString(),this,this.onWbCollectInfo),DB.instance.on(w2c_invite_report_status.opcode.toString(),this,this.m2cInviteReportInfo),DB.instance.on(w2c_invite_reward_status.opcode.toString(),this,this.m2cInviteRewardInfo),DB.instance.on(m2c_xianyuan_info.opcode.toString(),this,this.GodConClude),DB.instance.on(m2c_xianyuan_update_god.opcode.toString(),this,this.GodInfo),DB.instance.on(m2c_xianyuan_update_xianshu.opcode.toString(),this,this.LiftSkill),DB.instance.on(m2c_xianyuan_update_coach_times.opcode.toString(),this,this.GodCoach),DB.instance.on(m2c_xianyuan_add_val.opcode.toString(),this,this.GodExp),DB.instance.on(m2c_xianyuan_suits.opcode.toString(),this,this.onGodSuits),DB.instance.on(m2c_xianyuan_upsuit.opcode.toString(),this,this.onGodUpSuit),DB.instance.on(m2c_xianyuan_seat_act.opcode.toString(),this,this.onXianyuanSeatAct),DB.instance.on(m2c_xianyuan_seat_up_lv.opcode.toString(),this,this.onXianyuanSeatUpLv),DB.instance.on(m2c_xianyuan_seat_up_star.opcode.toString(),this,this.onXianyuanSeatUpStar),DB.instance.on(m2c_headIcon_list.opcode.toString(),this,this.headIconInfoUpdate),DB.instance.on(w2c_friend_discount_info.opcode.toString(),this,this.w2cFriendDiscountInfo),DB.instance.on(w2c_discount_friend_list.opcode.toString(),this,this.onReturnBargainFriendLst),DB.instance.on(w2c_friend_discount_invite.opcode.toString(),this,this.onDiscountFriendPrivate),DB.instance.on(w2c_friend_discount.opcode.toString(),this,this.onBargain_buyInfo),DB.instance.on(w2c_dreamland_list.opcode.toString(),this,this.onDreamlandInfoList),DB.instance.on(w2c_dreamland_join.opcode.toString(),this,this.onDreamlandJoin),DB.instance.on(w2c_dreamland_break.opcode.toString(),this,this.onDreamlandBreak),DB.instance.on(w2c_dreamland_start.opcode.toString(),this,this.onDreamlandStart),DB.instance.on(w2c_dreamland_query.opcode.toString(),this,this.onDreamlandQuery),DB.instance.on(w2c_dreamland_self_info.opcode.toString(),this,this.onDreamlandSelfInfo),DB.instance.on(m2c_dreamland_skill.opcode.toString(),this,this.onDreamlandSKillInfo),DB.instance.on(m2c_dreamland_skill_info.opcode.toString(),this,this.onDreamlandSKillActive),DB.instance.on(w2c_gsaRec_turntable_record.opcode.toString(),this,this.onRecordInfo),DB.instance.on(w2c_gsaAct_turntable_turn.opcode.toString(),this,this.onStartTurn),DB.instance.on(w2c_gsaRec_turntable.opcode.toString(),this,this.onLottertDrawInfos),DB.instance.on(w2c_bgaRec_turntable_record.opcode.toString(),this,this.onRecordInfo),DB.instance.on(w2c_bgaAct_turntable_turn.opcode.toString(),this,this.onStartTurn),DB.instance.on(w2c_bgaRec_turntable.opcode.toString(),this,this.onLottertDrawInfos),DB.instance.on(w2c_arena_fight_info.opcode.toString(),this,this.onGymkhanaFight),DB.instance.on(w2c_arena_info.opcode.toString(),this,this.onGymkhanaMianInfo),DB.instance.on(m2c_arena_exchange_info.opcode.toString(),this,this.onGymkhanaShopInfo),DB.instance.on(w2c_arena_fight_record.opcode.toString(),this,this.onGymkhanaRecordInfo),DB.instance.on(m2c_arena_buy_vip_count.opcode.toString(),this,this.onGymkhanaBuyInfo),DB.instance.on(m2c_arena_rank_change_red_point.opcode.toString(),this,this.onGymkhanaRedPoint),DB.instance.on(w2c_restore_info.opcode.toString(),this,this.onReturnRestoreInfo),DB.instance.on(w2c_get_restore_rec.opcode.toString(),this,this.onUpdateFindResData),DB.instance.on(q2c_rank_page.opcode.toString(),this,this.onKFRankPage),DB.instance.on(m2c_seven_day_task_info.opcode.toString(),this,this.onUpdateSevenDayData),DB.instance.on(m2c_seven_day_task_progress.opcode.toString(),this,this.onUpdateSevenDayLiviness),DB.instance.on(m2c_get_seven_day_task_reward.opcode.toString(),this,this.onReturnSevenDayReward),DB.instance.on(m2c_get_seven_day_liveness_reward.opcode.toString(),this,this.onGetLivinessReward),DB.instance.on(m2c_dragonsoul_info.opcode.toString(),this,this.onDragonUpdateInfos),DB.instance.on(m2c_dragonsoul_update.opcode.toString(),this,this.onDragonUpdateInfo),DB.instance.on(m2c_dragonsoul_up_star.opcode.toString(),this,this.onDragonStarUp),DB.instance.on(m2c_beast_list.opcode.toString(),this,this.onBeastInfoDatas),DB.instance.on(m2c_beast_info.opcode.toString(),this,this.onBeastInfo),DB.instance.on(m2c_beast_upploy.opcode.toString(),this,this.onAlienBeastUpDeploy),DB.instance.on(m2c_beast_uplevel.opcode.toString(),this,this.onBeastUpLevel),DB.instance.on(m2c_beast_upgrade.opcode.toString(),this,this.onBeastUpStar),DB.instance.on(m2c_beast_evolve.opcode.toString(),this,this.onAlienBeastEvolve),DB.instance.on(m2c_notify_fb_result_hp.opcode.toString(),this,this.onGuildFbResult),DB.instance.on(m2c_fb_heaven_open_info.opcode.toString(),this,this.onFBHeavenOpenInfo),DB.instance.on(m2c_fb_heaven_open_watch.opcode.toString(),this,this.onFBHeavenOpenWatch),DB.instance.on(q2c_csaRec_sweetGain_rank.opcode.toString(),this,this.onCsaRecSweetGainRank),DB.instance.on(q2c_sweet_rank_page.opcode.toString(),this,this.onSweetRankPage),RefineBodyControl.ins.addEventListener(),PvpController.ins,STBossControl.ins.addEventListener(),MirrorSelfControl.ins.addEventListener(),DB.instance.on(w2c_view_role_godEquip.opcode.toString(),this,this.onLookRoleGodEquip),DB.instance.on(w2c_bg_red_envelopes_start.opcode.toString(),this,this.onUpdateRedPacInfo),DB.instance.on(w2c_bg_red_envelopes_receive.opcode.toString(),this,this.onUpdateRedRcInfo),DB.instance.on(w2c_red_envelopes_recharge_info.opcode.toString(),this,this.onUpdateRedAcInfo),DB.instance.on(w2c_red_envelopes_recharge_send.opcode.toString(),this,this.onUpdateRedSendResult),DB.instance.on(w2c_red_envelopes_recharge_receive.opcode.toString(),this,this.onUpdateRedRecInfo),DB.instance.on(w2c_bg_red_envelopes_stop.opcode.toString(),this,this.onStopRedRain),DB.instance.on(w2c_red_envelopes_recharge_bigInfo.opcode.toString(),this,this.onUpdateRedBigInfo),DB.instance.on(w2c_red_envelopes_rec_info.opcode.toString(),this,this.onUpdateRedRecordInfo),DB.instance.on(m2c_wanba_gift_reward_status.opcode.toString(),this,this.onUpdateXinyueInfo),z_x.ins.init(),DB.instance.on(m2c_guarding_nantianmen_challenge_result.opcode.toString(),this,this.onUpdateGNTMCResult),SouthSkyGateControl.ins.addEventListener(),DoubleAreaModel.instance.addEventListener(),z_s.ins.addEventListener(),MergeSerGymModel.ins.addEventListener(),RechargeRankModel.ins.addEventListener(),ChristamasControl.ins.addEventListener(),DB.instance.on(w2c_bg_christmas_beat_monster_quit_ret.opcode.toString(),this,this.onUpdateChristmaResult),DB.instance.on(m2c_get_adventure_info.opcode.toString(),this,this.onUpdateAdventure),DB.instance.on(m2c_adventure_trigger.opcode.toString(),this,this.onAdventureTrigger),DB.instance.on(m2c_adventure_end.opcode.toString(),this,this.onAdventureEndHandle),GuildPvpControl.ins.addEventListener(),DB.instance.on(m2c_body_info.opcode.toString(),this,this.onUpdateBodyInfo),DB.instance.on(m2c_body_cultivation.opcode.toString(),this,this.onUpdateBodyCulInfo),DB.instance.on(m2c_body_sub_level_up.opcode.toString(),this,this.onUpdateBodySubLevelUpInfo),DB.instance.on(m2c_body_level_up.opcode.toString(),this,this.onUpdateBodyLevelUpInfo)}return Object.defineProperty(e,"ins",{get:function(){return this._ins||(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.prototype.loginReqServerInfo=function(){DB.instance.query(c2m_skill_list,new c2m_skill_list),DB.instance.query(c2m_state_info,new c2m_state_info),DB.instance.query(c2w_black_list,new c2w_black_list),DB.instance.query(c2m_strength_info,new c2m_strength_info),BagModel.instance.reqGetItemInfos(BagTypeDefine.BAG_TYPE_ITEM),BagModel.instance.reqGetItemInfos(BagTypeDefine.BAG_TYPE_EQUIPMENT),BagModel.instance.reqGetItemInfos(BagTypeDefine.BAG_TYPE_RIDE),BagModel.instance.reqGetItemInfos(BagTypeDefine.BAG_TYPE_TALIS),BagModel.instance.reqGetItemInfos(BagTypeDefine.BAG_TYPE_GOD),BagModel.instance.reqLimitTimeItemUseCount(),p_p.instance.reqInitTask(),f_s.instance.reqMailList(),BlackKingModel.instance.reqBlackKingValue(),ShopModel.instance.reqShopAlreadyList(),DungeonModel.instance.reqPassedFbList(),TalismanModel.instance.reqTalismanList(),HoleMoudel.instance.pbMineDatas(),v_x.instance.reqBanquetInfo(),HoleMoudel.instance.reqTreasyreBoxInfo(),HoleMoudel.instance.reqTreasureInfo(),DB.instance.query(c2w_guild_info,new c2w_guild_info),ActivenessModel.instance.reqActivenessList(),AchievementModel.instance.reqAchievementInfo(),DungeonModel.instance.reqBossLst(DungeonType.WildBoss),DungeonModel.instance.reqBossLst(DungeonType.TsBoss),DungeonModel.instance.reqBossLst(DungeonType.StateBoss),DB.instance.query(c2m_title_info_req,new c2m_title_info_req),OfflineModel.reqDhInfo(),OfflineModel.reqDhInviteList(),d_x.instance.reqPvpInfo(),FriendModel.instance.reqFriendList(),FriendModel.instance.reqBlackList(),FriendModel.instance.reqRequestList(),TalismanModel.instance.reqSuitsInfo(),FashionModel.instance.reqFashionList(),FashionModel.instance.reqFashionQinMi(),ActivityModel.reqGSActivityQuery(),ActivityModel.reqBGActivityQuery(),BossComeModel.reqBossComeInfo(),n_d.instance.reqChatPrivatePlr(),RideModel.instance.init(),RideModel.instance.reqRideInfo(),FriendModel.instance.reqFriendRewardList(),SigninModel.instance.reqSigninInfo(),ShareMgr.ins.reqWechatCollect(),ShareMgr.ins.reqFristShareInfo(),ShareMgr.ins.reqRelevanceInfo(),BenefitModel.instance.reqInviteReportStatus(),BenefitModel.instance.reqInviteRewardStatus(),RechargeModel.instance.getmonthinfo(),RankModel.instance.reqWorshipInfo(),SetupModel.instance.reqActivedHeadIcon(),HoleMoudel.instance.reqFacility(),RechargeModel.instance.rechargestatus(),RankModel.instance.reqGetRank(RankType.MinePersonal,1),RankModel.instance.reqGetRank(RankType.MineGuild,1),dreamlandModel.instance.reqDreamlandSkilInfoList(),FriendBargainModel.instance.initCellInfo(),RankModel.instance.reqGetRank(RankType.Power,1),RankModel.instance.reqGetRank(RankType.Realm,1),RankModel.instance.reqGetRank(RankType.Talisman,1),v_x.instance.reqBanquetLst(),ResourceBackMode.instance.reqResInfo(),RankModel.instance.reqGetRank(RankType.RushPower,1),RankModel.instance.reqGetRank(RankType.OpenserviceLevel,1),CrossModel.ins.sendCrossOpen(),DB.instance.query(c2m_wildboss_inspire_info,new c2m_wildboss_inspire_info),SevenDayTargetModel.instance.reqSevenDayInfo(),SevenDayTargetModel.instance.reqSevenDayOnLineCheck(),b_l.instance.reqDragonInfoList(),DungeonModel.instance.reqGerenBossRewardInfo(1),DungeonModel.instance.reqGerenBossRewardInfo(2),DungeonModel.instance.reqGerenBossRewardInfo(3),AchievementModel.instance.reqAchievementOnLine(),TeamModel.instance.reqTeamInfo(),AscentModel.instance.reqAscentInfo(),RareAnimalModel.instance.reqRareAnimal(),b_v.instance.reqLoverAchievement(),b_v.instance.reqMarryList(),b_v.instance.reqWifeInfo(),b_v.instance.reqMarrySweetInfo(),b_v.instance.reqSkillLst(),AlienBeastModle.instance.reqAlienBeastInfo(),OpenserviceModel.instance.reqRankByOpenAct(),OpenserviceModel.instance.reqgetRewardInfo(),RefineBodyControl.ins.reqInfo(),MirrorSelfControl.ins.reqInfo(),DungeonModel.instance.reqFBHeavenOpenInfo(),z_x.reqFreeRecInfo(),SouthSkyGateControl.ins.gameTimeCount(),z_s.ins.reqMergeSevendayStatus(),z_s.ins.reqMergeSevendayInfo(),GuildPvpControl.ins.reqInfo()},e.prototype.m2cWeChatRewardInfo=function(e){Qw(e,ShareMgr)},e.prototype.onSkillPrioSwapUpdate=function(e){Ug(e,SkillModel)},e.prototype.onPvpRecordUpdate=function(e){Ab(e,d_x)},e.prototype.onRechargeSucc=function(e){b_p.broadcastNotice((j_x("2258_2376_402")+j_x(2142)),BroadcastType.WIN),b_p.broadcastNotice(("vip"+j_x("1241_144_1628")+j_x(371))+e.gold,1,"#71de66"),ActivityModel.instance.getActivityConfigVoByType(ActivityTypeDefine.BG_roulette)&&DB.instance.query(c2w_roulette_record,{type:1})},e.prototype.onGetRewardGereBoss=function(e){En(e,LED,l_r)},e.prototype.onKFRankPage=function(e){Gd(e,RankModel)},e.prototype.onXianyuanSeatUpLv=function(e){Gv(e,BlackKingModel)},e.prototype.onDropAppear=function(e){Ub(e,r_a)},e.prototype.onStopTreasureboxTask=function(e){Af(e,LED,l_r)},e.prototype.onRecommendList=function(e){Ks(e,FriendModel)},e.prototype.onJoinList=function(e){Yo(e,GuildModel,LED,l_r)},e.prototype.onMental=function(e){Kp(e,CittaModule)},e.prototype.onFbPlrList=function(e){Cd(e,DungeonModel)},e.prototype.updateWildBossInspireTimes=function(e){Et(e,DungeonModel,LED,l_r)},e.prototype.onMineRecords=function(e){Sb(e,MineModel)},e.prototype.m2c_state_fb_stage=function(e){Si(e,DungeonModel,SyncTime,LED,l_r)},e.prototype.onPassedFbList=function(e){Qu(e,DungeonModel)},e.prototype.onAdventureEndHandle=function(e){Gx(e,AdventureModel)},e.prototype.onCollectAppear=function(e){Co(e,Engine2d,LgcM)},e.prototype.onStrengthAuto=function(e){Kv(e,StrengthModel)},e.prototype.onCallLaterAddPlayer=function(e,p_l,p_g){e&&(LgcM.ins.addActorInfo(Engine2d.ActorTypeDefine.PLAYER,e),LgcM.ins.addActorEntity(Engine2d.ActorTypeDefine.PLAYER,e),LgcM.ins.appearMoveToTarget(e.type,e,p_l),BuffModel.instance.updateBuff(e.id,p_g))},e.prototype.onCrit=function(e){Ui(e,LED,l_r,HoleMoudel)},e.prototype.GodConClude=function(e){Qt(e,BlackKingModel)},e.prototype.onPvpInfoUpdate=function(e){Ex(e,d_x)},e.prototype.onGodUpSuit=function(e){Qf(e,BlackKingModel)},e.prototype.onBargain_buyInfo=function(e){Mk(e,FriendBargainModel)},e.prototype.onMineExchange=function(e){Ud(e,MineModel)},e.prototype.onPvpRoundResult=function(e){Qd(e,d_x)},e.prototype.onTitleInfo=function(e){for(var p_l in TitleModel.instance.titleInfo={},e.list)if(TitleModel.instance.titleInfo[e.list[p_l].titleId]=e.list[p_l],1==e.list[p_l].inuse){var p_g=LgcM.ins.heroVo;p_g&&(p_g.titleId=e.list[p_l].titleId);var b_s=LgcM.ins.getActorById(b_p.playerId);b_s&&b_s.updateTitle()}LED.event(l_r.TITLE_INFO_UPDATE),LED.event(l_r.HELPER_UPDATE_INFO)},e.prototype.onRankWorshipResult=function(e){Qc(e,RankModel)},e.prototype.onGuildCheckinInfo=function(e){GuildModel.instance.checkinInfo=e,GuildModel.instance._progress=e.progress;var p_l=e.list||[];for(var p_g in p_l){var b_s=GuildModel.instance.getMemberByID(p_l[p_g].pid);b_s&&b_s.updateCheckinInfo(p_l[p_g])}LED.event(l_r.GUILD_CHECKIN_UPDATE)},e.prototype.onPalaceWorship=function(e){Eo(e,PalaceModel)},e.prototype.onGuildInfo=function(e){Wf(e,GuildModel,LED,l_r)},e.prototype.onUpdateSevenDayLiviness=function(e){Sw(e,SevenDayTargetModel)},e.prototype.onTitleLevelUp=function(e){DB.instance.query(c2m_title_info_req,new c2m_title_info_req)},e.prototype.onBosscomeGuildRank=function(e){Sf(e,LED,l_r)},e.prototype.onGetLivinessReward=function(){Ua(LED,l_r)},e.prototype.onTitleDrop=function(e){b_p.broadcastNotice((j_x("249_2379_2101")+j_x(1274)+":")+Config.title_title[e.titleId].name,BroadcastType.ITEM_GAIN,"#00ff00"),DB.instance.query(c2m_title_info_req,new c2m_title_info_req)},e.prototype.onMineDetail=function(e){Gk(e,MineModel)},e.prototype.onUpdateRedAcInfo=function(e){Ae(e,RedPacketModel)},e.prototype.onUpdateRedRcInfo=function(e){Ig(e,RedPacketModel)},e.prototype.onTalismanEngulf=function(e){},e.prototype.onDelFriendReq=function(e){Kh(e,FriendModel)},e.prototype.onItemCDUpdate=function(e){var p_l=e.cd;for(var p_g in p_l){var b_s=Config.CItem(p_l[p_g].itemid);b_s.cd&&BagModel.instance.changeItemCd(p_l[p_g].itemid,p_l[p_g].lastms,b_s.cd),BagModel.instance._useItemCounts[p_l[p_g].itemid]=p_l[p_g].used}e=null},e.prototype.onViewRoleXianyuanInfo=function(e){Wd(e,RoleTalisOrBlackInfoModel)},e.prototype.onCrossBossInfo=function(e){Se(e,f_a)},e.prototype.onBosscomePlayerRank=function(e){Kr(e,LED,l_r)},e.prototype.onXianyuanSeatUpStar=function(e){Cr(e,BlackKingModel)},e.prototype.m2c_state_fb_props=function(e){Qh(e,DungeonModel)},e.prototype.onBossComeChallengeRecord=function(e){Ed(e,LED,l_r)},e.prototype.onDelBlack=function(e){Ur(e,FriendModel)},e.prototype.onGymkhanaFight=function(e){Gy(e,gymkhanaModel)},e.prototype.onGetMoonboxTaskReward=function(e){Qe(e,MoonBoxModel)},e.prototype.onItemRandTsAttrInfo=function(e){Sd(e,this)},e.prototype.onFbpkList=function(e){Cm(e,LED,l_r)},e.prototype.onGuildBOssRank=function(e){Aa(e,LED,l_r)},e.prototype.onWarnOpen=function(e){Gs(e,UI)},e.prototype.onCrossBossOwnership=function(e){Gi(e,f_a)},e.prototype.onRequestList=function(e){Uw(e,FriendModel)},e.prototype.onMineFightResult=function(e){Gt(e,MineModel)},e.prototype.onSkillListUpdate=function(e){Ac(e,b_v,CittaModule,SkillModel)},e.prototype.onBanquetInfo=function(e){Sz(e,v_x)},e.prototype.onTreasureBoxDate=function(e){Iu(e,HoleMoudel)},e.prototype.onSkillCommonCdUpdate=function(e){var p_l,p_g,b_s=SyncTime.serverTime;for(var d_u in e.cd)SkillModel.instance.changeCommonCD(e.cd[d_u].id,b_s,e.cd[d_u].cd)&&(p_g=!0),BagModel.instance.changeCommonCD(e.cd[d_u].id,b_s,e.cd[d_u].cd)&&(p_l=!0);p_l&&LED.event(l_r.ITEM_CD_UPDATE),p_g&&LED.event(l_r.SKILL_CD_UPDATE),e=null},e.prototype.onTitleRemove=function(e){b_p.broadcastNotice((j_x("1011_2068_2101")+j_x(1274)+":")+Config.title_title[e.titleId].name,BroadcastType.ITEM_GAIN,"#00ff00"),DB.instance.query(c2m_title_info_req,new c2m_title_info_req)},e.prototype.onMonthCardbuyDate=function(e){Qp(e,RechargeModel)},e.prototype.onComposeInfo=function(e){Wt(e,ItemComposeModel)},e.prototype.GodCoach=function(e){Gu(e,BlackKingModel)},e.prototype.onFashions=function(e){Eq(e,FashionModel)},e.prototype.onDragonStarUp=function(e){Go(e,b_l)},e.prototype.onGetVipReward=function(e){Ik(e,RechargeModel)},e.prototype.onGymkhanaRecordInfo=function(e){Ga(e,gymkhanaModel)},e.prototype.onMineMove=function(e){Wx(e,MineModel)},e.prototype.onItemBagInfo=function(e){Ee(e,BagModel)},e.prototype.taliTip=function(e,p_l){void 0===p_l&&(p_l=!1),LED.event(l_r.TALISMAN_ATTR_UPDATE);for(var p_g,b_s,d_u=e.length,b_e="",d_m=(j_x("980_799_1241")+j_x(144)),d_w=0;d_w<d_u;d_w++)p_g=e[d_w],b_e+=((b_s=p_l?(d_m=(j_x("1839_543_1241")+j_x(144)),Config.beast_beast[p_g.tsId]):Config.talisman_talisman[p_g.tsId])?b_s.name:"")+(j_x("437_223")),p_g.ty?b_e+=p_g.val+d_v.getDesc(p_g.ty):b_e+=p_g.val+d_m;""!=b_e&&b_p.broadcastNotice(b_e,BroadcastType.ERROR,Utils.Color.NAME_GREEN)},e.prototype.m2c_bosscome_fb_info=function(e){Gn(e,BossComeModel,LED,l_r)},e.prototype.onGuildCheckinProgress=function(e){GuildModel.instance._progress=e.progress,DB.instance.query(c2w_guild_checkin_info,new c2w_guild_checkin_info),DB.instance.query(c2w_guild_info,new c2w_guild_info)},e.prototype.onFbSelfDmgRank=function(e){St(e,DungeonModel)},e.prototype.onStartMoonboxTask=function(e){Cq(e,MoonBoxModel)},e.prototype.onSendBroadcast=function(e){In(e,n_d)},e.prototype.onBosscomeInspire=function(e){Yn(e,BossComeModel,LED,l_r)},e.prototype.onTalismanSuitUp=function(e){Un(e,TalismanModel,LED,l_r)},e.prototype.onItemSwap=function(e){Av(e,BagModel)},e.prototype.onActivenessList=function(e){Yx(e,ActivenessModel)},e.prototype.onStateLvUp=function(e){Ag(e,StateModel)},e.prototype.onRechargestatus=function(e){Ky(e,RechargeModel)},e.prototype.onGreneBossRewardInfo=function(e){Up(e,DungeonModel)},e.prototype.onMineRole=function(e){At(e,MineModel)},e.prototype.OnReturnComposeResult=function(e){1==e.success&&LED.event(l_r.SUCCEECOMPOSE)},e.prototype.onLookRoleGodEquip=function(e){Wr(e,GodEquipModel,LED,l_r)},e.prototype.onTalismanSoulActive=function(e){Uh(e,TalismanModel)},e.prototype.onRegisterRep=function(e){console.log("onRegisterRep",e);var p_l=e.error;if(p_l){var p_g=ErrerTipCfg.ins.getErrorById(p_l);p_g&&(p_g?b_p.broadcastNotice(p_g.desc):b_p.broadcastNotice((j_x("1357_1017_1011")+j_x(1061)+"------"+j_x("1329_271_909")+":")+e.error))}else XjwxLoginManager.instance.sendRole()},e.prototype.onUpdateSilenceReply=function(e){Ia(e,n_d)},e.prototype.onChatPrivateRec=function(e){Gp(e,n_d)},e.prototype.onTalismanSoulUpLevel=function(e){Cn(e,TalismanModel)},e.prototype.onChatPrivatePlr=function(e){Ok(e,n_d)},e.prototype.onStateInfo=function(e){Cj(e,StateModel)},e.prototype.onObjMoveUpdate=function(e){LgcM.ins.getActorById(e.id)?this.delayObjMove(e):j_a.actorIns().add(this,this.delayObjMove,[e])},e.prototype.onReturnSevenDayReward=function(){Sa(LED,l_r)},e.prototype.onActivenessProUpdate=function(e){As(e,ActivenessModel)},e.prototype.onFacilityDateUpDate=function(e){Kj(e,HoleMoudel)},e.prototype.onAlienBeastUpDeploy=function(e){Me(e,AlienBeastModle)},e.prototype.onSkillCdUpdate=function(e){Wb(e,SkillModel,SyncTime)},e.prototype.onReturnRestoreInfo=function(e){Ez(e,ResourceBackMode)},e.prototype.onMailUpdate=function(e){Ge(e,f_s)},e.prototype.onFbTeamUpdate=function(e){Ck(e,DungeonModel)},e.prototype.onCrossOpen=function(e){CrossModel.ins.crossOpenTime=e.openTime,CrossModel.ins.isBigOrLitterCross=e.serverType,0==e.serverType&&0<e.openTime?CrossModel.ins.isSmallCross=!0:CrossModel.ins.isSmallCross=!1,LED.event(l_r.CHAT_CROSS_OPEN)},e.prototype.onGuildHelpList=function(e){Sq(e,GuildModel,LED,l_r)},e.prototype.w2c_bosscome_boss_hp_sync=function(e){Sv(e,BossComeModel,LED,l_r)},e.prototype.onTalismanList=function(e){Uy(e,TalismanModel,LED,l_r)},e.prototype.onStartTurn=function(e){Qo(e,n_t)},e.prototype.onPlayerAppear=function(e){console.log("onPlayerAppear");var p_l=LgcM.ins.getBreak(GameDefine.player_appear);if(GPlatform.isMap&&p_l)LgcM.ins.clearBreak(GameDefine.player_appear);else if(!(GPlatform.isMap&&b_p.lastMapID===b_p.mapID&&e.id===b_p.playerId&&(p_p.instance.reqInitTask(),n_m.instance.isHangUpMap()&&Engine2d.Hero.local))){e.id===b_p.playerId?this._limitCount=1:this._limitCount++;var p_g=!0,b_s=Config.map[b_p.mapID];if(b_s&&0<b_s.limitCount&&this._limitCount>b_s.limitCount){if(b_s.funType===MapFunType.HangUp)return;p_g=!1}var d_u=Engine2d.PlayerVo.freeStdInfo(Engine2d.ActorTypeDefine.PLAYER,Engine2d.PlayerVo);d_u.parser(e),d_u.isPlayerVisible=p_g;var b_e=d_u.px!=d_u.endPx||d_u.py!=d_u.endPy;if(d_u.id===b_p.playerId){if(d_u.isPlayerVisible=!0,b_s&&0<b_s.dramaId&&(UIM.instance.showUIMask(),b_p.playDrama(b_s.dramaId,!0)),b_p.playerId=d_u.id,n_m.instance.isHangUpMap()){var d_m=Config.map[b_p.mapID].entry;d_u.px=d_u.endPx=Engine2d.MapUtils.cxToPx(d_m[0]),d_u.py=d_u.endPy=Engine2d.MapUtils.cyToPy(d_m[1])}var d_w=Engine2d.GameMap.defaultMap;null!=d_w&&d_w.syncCurrentPxy(d_u.px,d_u.py),PopPropManager.instance.isFirstTo&&RecordManager.instance.sendRecord(RecordManager.API_ACCOUNT,{step:RecordTypeDefine.STEP_IN_GAME_SUCC}),TalismanModel.instance.updateTalismanFight(d_u.fightingTs1,!1),TalismanModel.instance.updateTalismanFight(d_u.fightingTs2,!1)}else if(!LgcM.ins.getActorById(b_p.playerId))return;d_u.id===b_p.playerId?(LgcM.ins.addActorInfo(Engine2d.ActorTypeDefine.PLAYER,d_u),LgcM.ins.addActorEntity(Engine2d.ActorTypeDefine.PLAYER,d_u),j_a.sceIns().add(this,this.onCallLaterShowScene,null,8),BuffModel.instance.updateBuff(e.id,e.buffs)):j_a.actorIns().add(this,this.onCallLaterAddPlayer,[d_u,b_e,e.buffs]),e=null}},e.prototype.onServerOpen=function(e){Kw(e,SyncTime)},e.prototype.onGuildCheckinGift=function(e){var p_l=GuildModel.instance.checkinInfo.gift_box||[],p_g=!1;for(var b_s in p_l)if(p_l[b_s].index==e.index){p_l[b_s].reward=1,p_g=!0;break}if(!p_g){var d_u=new x_gift_box;d_u.index=e.index,d_u.reward=1,p_l.push(d_u)}LED.event(l_r.GUILD_CHECKIN_UPDATE),LED.event(l_r.HELPER_UPDATE_INFO)},e.prototype.onFashionQinMiPros=function(e){Wh(e,FashionModel)},e.prototype.onDragonUpdateInfo=function(e){Sj(e,b_l)},e.prototype.onRepAddFriend=function(e){Cf(e,FriendModel)},e.prototype.onfriendRewardList=function(e){Ij(e,FriendModel)},e.prototype.onTransferGuild=function(e){var p_l=GuildModel.instance.getMemberByID(e.newPid),p_g=GuildModel.instance.getMemberByID(e.oldPid);p_l&&(p_l.office=GuildOfficeDefine.HUIZHANG),p_g&&(p_g.office=e.office),LED.event(l_r.GUILD_INFO_UPDATE)},e.prototype.onDragonUpdateInfos=function(e){Ax(e,b_l)},e.prototype.onStateIncrease=function(e){Mo(e,StateModel)},e.prototype.getComposeInfo=function(e){Iw(e,ItemComposeModel)},e.prototype.onBuffUpdate=function(e){Uo(e,BuffModel)},e.prototype.onNotifyFbInfo=function(e){Yf(e,DungeonModel)},e.prototype.onRegisterPlease=function(e){Sl(e,l_h)},e.prototype.onGuildAuctionList=function(e){e.list&&0<e.list.length&&(GuildModel.instance.hasAuction=!0,0==GuildModel.instance.hasRedTip&&LED.event(l_r.GUILD_TIP_UPDATE),GuildModel.instance.hasRedTip=!0),LED.event(l_r.GUILD_AUCTION_LIST,e),LED.event(l_r.HELPER_UPDATE_INFO)},e.prototype.onAdventureTrigger=function(e){Cy(e,AdventureModel)},e.prototype.onDecomposeEquip=function(e){Uu(e,DecomposeModel)},e.prototype.onMineList=function(e){Wp(e,MineModel)},e.prototype.onShopDataUpdate=function(e){Ap(e,ShopModel)},e.prototype.onUupgradefacility=function(e){Aq(e,HoleMoudel,b_p,ErrorDefine)},e.prototype.onFashionUpgrade=function(e){Er(e,FashionModel)},e.prototype.onActivenessReward=function(e){Os(e,ActivenessModel)},e.prototype.onOneKeyInfo=function(e){Om(e,HoleMoudel)},e.prototype.onGymkhanaRedPoint=function(e){Az(e,gymkhanaModel)},e.prototype.w2c_minewar_berobed=function(e){Il(e,LED,l_r)},e.prototype.onBossComeChallengeResult=function(e){Ou(e,UI)},e.prototype.onGetTreasureboxTaskReward=function(e){Mg(e,LED,l_r)},e.prototype.onBosscomeChallengeList=function(e){Wy(e,LED,l_r)},e.prototype.onDreamlandInfoList=function(e){Mw(e,dreamlandModel)},e.prototype.onRideUpStar=function(e){Yy(e,RideModel,LED,l_r)},e.prototype.onReturnPagodaSweepFbId=function(e){e&&e.lastFbId&&(DungeonModel.instance._pagodaSweepFbId=e.lastFbId),LED.event(l_r.UPDATE_PAGODA_SWEEP)},e.prototype.onTalismanUplV=function(e){var p_l=TalismanModel.instance.getTalismanById(e.id);p_l&&(p_l.level=e.level,LED.event(l_r.TALISMAN_UP_UPDATE,p_l),LED.event(l_r.HELPER_UPDATE_INFO),e.isCrit&&LED.event(l_r.TALISMAN_UP_CRIT,e.isCrit)),e=null},e.prototype.onCollectInterrupt=function(e){var p_l=e.pid,p_g=e.cid;CollectController.instance.stopCollect(p_g,p_l),e=null},e.prototype.onRankPage=function(e){RankModel.instance.setRankData(e),DungeonModel.instance.onFbRankData(e);var p_l=ActivityModel.instance.getActTypeByRankType(e.type);if(null!=p_l){var p_g,b_s=e.type;switch(b_s){case RankType.LimitActivityGuild:case RankType.LimitActivityPersonal:return void LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.xgmb);case RankType.LimitActivityGuild2:case RankType.LimitActivityPersonal2:return void LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.qltb)}-1!=(p_g=b_s==RankType.RushPower||b_s==RankType.OpenserviceLevel||b_s==RankType.RushTalisman?FuncDefine.OpenServiceFisrtView:FuncDefine.xsRank)&&(x_p.instance.updateOsRank(p_l),LED.event(l_r.ACTIVITY_BGA_RANK,RankModel.instance.getRankDataByType(b_s)),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,p_g))}},e.prototype.onGuildList=function(e){Wu(e,GuildModel,LED,l_r)},e.prototype.onGuildAuctionBuy=function(e){Gz(e,b_p,j_x,BroadcastType,LED,l_r)},e.prototype.onPvpMatch=function(e){Ql(e,d_x)},e.prototype.onReturnBargainFriendLst=function(e){Wn(e,FriendBargainModel)},e.prototype.onFbStatebossDmgRank=function(e){Ue(e,DungeonModel)},e.prototype.onHeartBeat=function(e){SyncTime.heartNum=0,SyncTime.recordHeartTime(),SyncTime.setServerTime(e.serverTime),SyncTime.setZone(e.timezone),GPlatform.isWx&&WXPlatform.instance.initGameTime()},e.prototype.onTaskFinish=function(e){TaskManager.instance.finishTaskToDo(e.taskId),p_p.instance.removeAcceptTask(e.taskId),p_p.instance.onWhichTask(e.taskId),Laya.timer.once(600,this,(function e(p_l){var p_g=Config.task_task[p_l].next;LED.event(l_r.TASK_COMPLETE,p_l),p_g&&LED.event(l_r.FB_UPDATE_INFO,p_g),Laya.timer.clear(this,e)}),[e.taskId]),e=null},e.prototype.onSweetRankPage=function(e){Ch(e,ActivityModel,LED,l_r)},e.prototype.onBeastUpLevel=function(e){Wl(e,AlienBeastModle)},e.prototype.onPalaceInfo=function(e){Oh(e,PalaceModel)},e.prototype.onTalismanRefine=function(e){var p_l=TalismanModel.instance.getTalismanById(e.tsId);p_l&&(p_l.refineTime=e.tm,p_l.stove=e.stove,LED.event(l_r.TALISMAN_STOVE_REFINE)),e=null},e.prototype.onUpdateRedRecInfo=function(e){Mq(e,RedPacketModel)},e.prototype.onRobotAppear=function(e){Ss(e,Engine2d,LgcM,BuffModel)},e.prototype.onFbSetAttackTargetType=function(e){Kc(e,DungeonModel)},e.prototype.w2cFriendDiscountInfo=function(e){Ip(e,FriendBargainModel)},e.prototype.onUpdateBodySubLevelUpInfo=function(e){Uz(e,bodyModel)},e.prototype.onObjDisppearUpdate=function(e){var p_l=LgcM.ins.getActorTypeByID(e.id);p_l===Engine2d.ActorTypeDefine.MONSTER&&"marry_fb"==Config.map[b_p.mapID].impl?(LgcM.ins.getActorById(e.id,p_l).dieBounceTo(),LgcM.ins.addDisappearObj(e.id,p_l)):(LgcM.ins.deleteActorInfo(p_l,e.id),LgcM.ins.deleteActorEntity(p_l,e.id)),p_l!==Engine2d.ActorTypeDefine.PLAYER&&p_l!==Engine2d.ActorTypeDefine.MONSTER||BuffModel.instance.removeBuffByObjId(e.id),e=null},e.prototype.onUpdateMySilenceState=function(e){Cc(e,n_d)},e.prototype.LiftSkill=function(e){Ebv(e,BlackKingModel,LED,l_r,Resource)},e.prototype.onJoinReturn=function(e){var p_l=GuildModel.instance.guildLIst;for(var p_g in p_l)p_l[p_g].id==e.id&&(p_l[p_g].flag=1);LED.event(l_r.GUILD_LIST_UPDATE),LED.event(l_r.HELPER_UPDATE_INFO)},e.prototype.onBosscomeInfo=function(e){Keu(e,BossComeModel,LED,l_r)},e.prototype.onGuildHelpInfo=function(e){Gce(e,GuildModel,LED,l_r)},e.prototype.onFashionActivity=function(e){Wli(e,FashionModel)},e.prototype.onStrengthInfo=function(e){Gri(e,StrengthModel)},e.prototype.onStopRedRain=function(e){Kme(e,RedPacketModel)},e.prototype.onGuildDonate=function(e){b_p.broadcastNotice(Utils.$((j_x("796_1413_1241")+j_x(144)+"+{1}"),e.guildMoney),BroadcastType.ITEM_GAIN,"#71de66"),DB.instance.query(c2w_guild_info,new c2w_guild_info)},e.prototype.onPvpAllResult=function(e){d_x.instance.clearPropShops();var p_l=new PvpAllResultVo;p_l.update(e),UI.PvpStatInfoPanel.open(p_l),e=null},e.prototype.onAchievementInfo=function(e){Mys(e,AchievementModel)},e.prototype.onMailList=function(e){App(e,f_s)},e.prototype.onAddFriend=function(e){Wby(e,FriendModel)},e.prototype.onLottertDrawInfos=function(e){Wma(e,n_t)},e.prototype.onRecordInfo=function(e){Cal(e,n_t)},e.prototype.onTalismanUpDeploy=function(e){var p_l=TalismanModel.instance.getTalismanById(e.id);if(p_l){var p_g=p_l.getDeloyVo(e.id);!p_g||p_g.level<e.level?LED.event(l_r.TALISMAN_DEPLOY_UPDATE_SUCCESS):LED.event(l_r.TALISMAN_DEPLOY_UPDATE_FAIL);var b_s=p_l.changeDeploment(e.depId,e.level);b_s&&LED.event(l_r.TALISMAN_DEPLOY_UPDATE,b_s)}TalismanModel.instance.reqTalismanList(),e=null},e.prototype.onGetfriendReward=function(e){Kas(e,FriendModel,OfflineModel)},e.prototype.w2c_get_asyncpvp_season_prev_rank=function(e){Kaa(e,LED,l_r)},e.prototype.onTaskInit=function(e){p_p.instance.init(e.taskList),TaskManager.instance.onTaskInited(),ActivityModel.instance.initActivities(),SystemNoticeManager.instance.init(),GuideManager.instance.init(),LED.event(l_r.FB_RED_POINT_UPDATE),e=null},e.prototype.onUpdateFbInfo=function(e){Ehu(e,DungeonModel)},e.prototype.onGetTreasureDate=function(e){Ydo(e,HoleMoudel)},e.prototype.onPvpChaseSkill=function(e){Cye(e,LED,l_r)},e.prototype.onChatPrivateRep=function(e){Wgm(e,n_d)},e.prototype.onUpdateSilenceRecord=function(e){Gco(e,n_d)},e.prototype.onBeKillInfo=function(e){var p_l=new x_u;p_l.entryId=e.entryId,p_l.name=e.name,p_l.tm=e.tm,Engine2d.Hero.local&&Engine2d.Hero.local.fightingCtrl&&Engine2d.Hero.local.fightingCtrl.clear();var p_g=Config.map[b_p.mapID];p_g&&"cross_boss"==p_g.impl?UI.crossBossFightTips.open(1,p_l):UI.RelivePanel.open(p_l),n_m.instance.stop()},e.prototype.onGuildAuctionRec=function(e){Yfj(e,LED,l_r)},e.prototype.onDiscountFriendPrivate=function(e){Qqu(e,FriendBargainModel)},e.prototype.onRankWorshipInfo=function(e){Atn(e,RankModel)},e.prototype.GodInfo=function(e){Eeg(e,BlackKingModel)},e.prototype.onCollectBegin=function(e){var p_l=e.pid,p_g=e.cid,b_s=e.endTime;CollectController.instance.startCollect(p_g,p_l,b_s),e=null},e.prototype.onBuffRemove=function(e){Cva(e,BuffModel)},e.prototype.s2cTipsHandler=function(e){if(e.msg&&""!=e.msg){for(var p_l=e.msg,p_g=0;p_g<e.param.length;p_g++){var b_s="{"+(p_g+1)+"}";p_l=p_l.replace(b_s,e.param[p_g].value)}b_p.confirm(p_l,null,null,!1,!1,!0)}},e.prototype.onDazhaoSkillInfoUpdate=function(e){Oao(e,SkillModel)},e.prototype.onGuildNew=function(e){Eby(e,LED,l_r)},e.prototype.onDreamlandJoin=function(e){Eeh(e,dreamlandModel)},e.prototype.onBosscomeGetReward=function(e){Sgf(e,BossComeModel,LED,l_r)},e.prototype.onBanqueQuery=function(e){Ucq(e,v_x)},e.prototype.onTalismanSoulUpGrade=function(e){Yaz(e,TalismanModel)},e.prototype.onUpdateRedRecordInfo=function(e){Qbw(e,RedPacketModel)},e.prototype.onItemUpdateAmount=function(e){BagModel.instance.updateAmount(e.bagType,e.uuid,e.amount,e.source);var p_l=BagModel.instance.getItemInfoByUuid(BagTypeDefine.BAG_TYPE_ITEM,e.uuid);p_l&&(200052==p_l.id&&LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.sgsq),200084==p_l.id&&LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.xxsb)),e=null},e.prototype.onGuildDisband=function(e){DB.instance.query(c2w_guild_info,new c2w_guild_info)},e.prototype.onNpcAppear=function(e){Aqu(e,Engine2d,LgcM)},e.prototype.m2cInviteRewardInfo=function(e){Mdn(e,LED,l_r,console,BenefitModel)},e.prototype.onGuildHelpMyList=function(e){Yqe(e,GuildModel,LED,l_r)},e.prototype.onSkillUseRep=function(e){Gtk(e)},e.prototype.onPropertyShow=function(e){0!=LgcM.ins.getActorTypeByID(e.id)&&(1==e.reason?e.property==Properties.hpUpper.ordinal&&d_s.instance.popDamage(e.id,e.value,e.id==b_p.playerId):2==e.reason&&d_s.instance.popRecovery(e.id,e.value)),e=null},e.prototype.m2cInviteReportInfo=function(e){Wve(e,BenefitModel)},e.prototype.onHoleDataUpdate=function(e){Che(e,HoleMoudel,LED,l_r)},e.prototype.onActivenessExrReward=function(e){Eib(e,ActivenessModel)},e.prototype.onGuildRename=function(e){Gpk(e,UI,GuildModel,LED,l_r)},e.prototype.onDelFriend=function(e){Ksr(e,FriendModel)},e.prototype.onAddBlack=function(e){Amo(e,FriendModel)},e.prototype.onDreamlandBreak=function(e){Ebu(e,dreamlandModel)},e.prototype.w2c_minewar_miner_update=function(e){},e.prototype.delaySkillHit=function(e){e.skillId;var p_l=e.releaseId,p_g=e.hit;if(p_g){var b_s=void 0,d_u=void 0,b_e=void 0;if(!Engine2d.Hero.local)return;for(var d_m in Engine2d.Hero.local.id,p_g)if(b_s=p_g[d_m].targetId,d_u=p_g[d_m].damage,b_e=p_g[d_m].hitType,p_l!=b_p.playerId&&b_s!=b_p.playerId||(0<p_g[d_m].hudunDmg?d_s.instance.popHitNums(p_l,b_s,1,p_g[d_m].hudunDmg):d_s.instance.popHitNums(p_l,b_s,b_e,d_u)),b_s&&p_l){var d_w=LgcM.ins.getActorById(b_s,Engine2d.ActorTypeDefine.MONSTER);d_w&&d_w.playHitEffect(!0)}}},e.prototype.onTitleGain=function(e){b_p.broadcastNotice((j_x("531_1976_2101")+j_x(1274)+":")+Config.title_title[e.titleId].name,BroadcastType.ITEM_GAIN,"#00ff00"),DB.instance.query(c2m_title_info_req,new c2m_title_info_req)},e.prototype.onTaskAccept=function(e){var p_l=new TaskVo;p_l.update(e.task),p_p.instance.addAcceptTask(p_l),ActivityModel.instance.onAttChange(),TaskManager.instance.accpetTaskToDo(p_l.id),TaskManager.instance.accpetTaskToDoLink(p_l.id),Laya.timer.callLater(TaskManager.instance,TaskManager.instance.acceptFadeOut,[p_l.id]),e=null},e.prototype.onGuildFbResult=function(e){Wjd(e,DungeonModel)},e.prototype.onAddItemforBag=function(e){Cyh(e,LED,l_r)},e.prototype.onBanqueStart=function(e){Ezk(e,v_x)},e.prototype.onGuildBossList=function(e){for(var p_l in GuildModel.instance.bossList={},GuildModel.instance.bossFreeOpen=0,GuildModel.instance.guildCurrentBoss=1,e.list)GuildModel.instance.bossList[e.list[p_l].id]=e.list[p_l],1==e.list[p_l].mode&&(GuildModel.instance.bossFreeOpen+=1),2==e.list[p_l].state&&(GuildModel.instance.guildCurrentBoss=e.list[p_l].id+1);GuildModel.instance.countAutoGuildBoss(),LED.event(l_r.GUILD_BOSS_LIST),LED.event(l_r.HELPER_UPDATE_INFO)},e.prototype.onItemSort=function(e){Upg(e,BagModel)},e.prototype.onPropertyUpdate=function(e){if(LgcM.ins.getBreak(GameDefine.property_update))LgcM.ins.clearBreak(GameDefine.property_update);else{var p_l=e.id,p_g=LgcM.ins.getActorTypeByID(p_l);if(0!=p_g){if(this._propertyChanger||(this._propertyChanger=new PropertyChanger),e.us)for(var b_s in e.us)this._propertyChanger.updateProfile(p_l,p_g,e.us[b_s].type,e.us[b_s].val);if(e.ss)for(var b_s in e.ss)this._propertyChanger.updateProfile(p_l,p_g,e.ss[b_s].type,e.ss[b_s].val);PopPropManager.instance.isFirstTo=!1}e=null}},e.prototype.onGiveFriendGiftReq=function(e){Whu(e,FriendModel)},e.prototype.onXianyuanSeatAct=function(e){},e.prototype.onFriendList=function(e){Szs(e,FriendModel)},e.prototype.onUpdateFindResData=function(e){Aws(e,LED,l_r)},e.prototype.onFirstShareState=function(e){Ucr(e,ShareMgr)},e.prototype.onFbRemind=function(e){Uqh(e,DungeonModel)},e.prototype.onStartTreasureboxTask=function(e){Qmu(e,LED,l_r)},e.prototype.onChatRecLst=function(e){Mmw(e,n_d)},e.prototype.onSigninInfo=function(e){Wdf(e,SigninModel)},e.prototype.m2c_asyncpvp_exchange_info=function(e){var p_l={};for(var p_g in e.item_list)p_l[(b_s=e.item_list[p_g]).id]=b_s.count;for(var p_g in e.buy_list){var b_s=e.buy_list[p_g],d_u=Config.asyncpvp_asyncpvpShop[b_s.id];null!=p_l[b_s.id]?d_u&&d_u.buyLimit&&(p_l[b_s.id]=b_s.count):p_l[b_s.id]=b_s.count}d_x.instance.exchangeInfo=p_l,LED.event(l_r.PVP_EXCHANGE_UPDATE)},e.prototype.onTitleWear=function(e){var p_l=LgcM.ins.getActorStdInfoById(e.pid);if(p_l){p_l.titleId=e.wear?e.wear.titleId:0;var p_g=LgcM.ins.getActorById(e.pid);p_g&&p_g.updateTitle()}e.pid==b_p.playerId&&e.wear&&(b_p.broadcastNotice((j_x("2407_1086_2101")+j_x(1274)+":")+Config.title_title[e.wear.titleId].name,BroadcastType.ITEM_GAIN,"#00ff00"),DB.instance.query(c2m_title_info_req,new c2m_title_info_req))},e.prototype.onLoginRep=function(e){console.log("onLoginRep",e),0==e.error?f_b.inst.setLoginSucc(e):console.log((j_x("1723_2048_1011")+j_x(1061)+":")+e.error),e=null},e.prototype.onAutoJoinRequest=function(e){Oyu(e,GuildModel,LED,l_r)},e.prototype.onGymkhanaShopInfo=function(e){Ovw(e,gymkhanaModel)},e.prototype.onBosscomeBuyTimes=function(e){1==e.type&&(BossComeModel.instance.info.buyAttackTimes=e.buyAttackTimes),2==e.type&&(BossComeModel.instance.info.buyRobTimes=e.buyAttackTimes),LED.event(l_r.BOSSCOME_INFO_UPDATE),LED.event(l_r.HELPER_UPDATE_INFO),LED.event(l_r.BOSSCOME_BUY_TIMES,e.type)},e.prototype.onFBHeavenOpenInfo=function(e){Ylz(e,DungeonModel,LED,l_r)},e.prototype.playSkillBegin=function(e){if(e){var p_l=LgcM.ins.getActorById(e.releaseId);p_l&&!p_l.rawDie&&p_l.fightingCtrl.playSkill(e)}},e.prototype.onSkillHit=function(e){var p_l=e.skillId,p_g=Config.skill_skill[p_l];if(p_g&&p_g.dmgDelayTime&&0<p_g.dmgDelayTime.length){var b_s=0;1<p_g.dmgDelayTime.length&&(b_s=Engine2d.FightingController.act_Dic[p_l]-1),Laya.timer.once(p_g.dmgDelayTime[b_s],this,this.delaySkillHit,[e],!1)}else this.delaySkillHit(e);LED.event(l_r.SKILL_HIT,[e]),e=null},e.prototype.onBeastInfo=function(e){Ijg(e,AlienBeastModle)},e.prototype.onDreamlandSelfInfo=function(e){Ojh(e,dreamlandModel)},e.prototype.onRideUpdate=function(e){Cvd(e,RideModel)},e.prototype.onActiveTalismanEquip=function(e){Wlx(e,TalismanModel)},e.prototype.onGuildBossOpen=function(e){DB.instance.query(c2w_guild_boss_list,new c2w_guild_boss_list)},e.prototype.onChatRec=function(e){Qyc(e,n_d)},e.prototype.onDreamlandSKillInfo=function(e){Uud(e,dreamlandModel)},e.prototype.onSkillBegin=function(e){var p_l=x_j.freeVo();p_l.session=e.session,p_l.skillId=e.skillId,p_l.targetId=e.targetId,p_l.releaseId=e.releaseId,p_l.px=e.px,p_l.py=e.py,p_l.isSelfSkill=b_p.playerId==p_l.releaseId,p_l.isSelfSkill?this.playSkillBegin(p_l):Laya.timer.callLater(this,this.playSkillBegin,[p_l]),e=null},e.prototype.onMonthCardsDate=function(e){RechargeModel.instance.cardInfos={};var p_l=e.cards;for(var p_g in p_l){var b_s=new MonthCardVo;b_s.id=p_l[p_g].id,b_s.rewardTime=p_l[p_g].rewardTime,b_s.startTime=p_l[p_g].startTime,RechargeModel.instance.cardInfos[b_s.id]=b_s}LED.event(l_r.MONTHCARD_BUY_INFO),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.monthCard),OfflineModel.instance.showGainLinePanel()},e.prototype.onFbOpenUI=function(e){Qgy(e,DungeonModel)},e.prototype.onEnterMapPre=function(e){Izx(e,LgcM)},e.prototype.onGymkhanaMianInfo=function(e){Kny(e,gymkhanaModel)},e.prototype.onTotalSigninRewardUpdate=function(e){Ulm(e,SigninModel)},e.prototype.onGymkhanaBuyInfo=function(e){Ejp(e,gymkhanaModel)},e.prototype.onUpdateSevenDayData=function(e){Yhv(e,SevenDayTargetModel)},e.prototype.headIconInfoUpdate=function(e){Usz(e,SetupModel)},e.prototype.onBeastUpStar=function(e){Efv(e,AlienBeastModle)},e.prototype.onPvpRoundInfo=function(e){Kpe(e,d_x)},e.prototype.onTreasureDate=function(e){Yif(e,HoleMoudel)},e.prototype.onBosscomeKillRecord=function(e){Gia(e,LED,l_r)},e.prototype.onStateSubUp=function(e){Kxa(e,StateModel)},e.prototype.onShopBuyData=function(e){ShopModel.instance.changeShopData(e.id,e.dayNum,e.weekNum,e.total)&&e.dayNum,LED.event(l_r.SHOP_DATA_UPDATE,e),e.id!=Config.itemGet[266113].shopId&&!Config.itemGet[266114].shopId||LED.event(l_r.CARD_INFO_UPDATE)},e.prototype.onUpdateBodyInfo=function(e){Yfe(e,bodyModel)},e.prototype.onFbBossFbInfo=function(e){Qgm(e,DungeonModel)},e.prototype.onFbStateStartDmg=function(e){Ewm(e,DungeonModel)},e.prototype.onCrossBossTimesBuy=function(e){Auf(e,f_a)},e.prototype.onAchievementUpdate=function(e){Wco(e,AchievementModel)},e.prototype.onGuildMemberUpdate=function(e){Ufg(e,GuildModel,LED,l_r)},e.prototype.onFbBossLst=function(e){Iaa(e,DungeonModel,ChristamasControl)},e.prototype.onAchievementFin=function(e){Ygt(e,AchievementModel)},e.prototype.onMineDataUpDate=function(e){Ail(e,HoleMoudel)},e.prototype.onBeastInfoDatas=function(e){Kwx(e,AlienBeastModle)},e.prototype.onMonsterAppear=function(e){Wjw(e,Engine2d,j_a,this)},e.prototype.onTalismanRefineStop=function(e){var p_l=TalismanModel.instance.getTalismanVoByStove(e.stove);TalismanModel.instance.getTalismanVosingleupdate(e.tsId,e.skillExp,e.deployExp),p_l&&(p_l.stove=0,LED.event(l_r.TALISMAN_STOVESTOP_REFINE),LED.event(l_r.HELPER_UPDATE_INFO)),e.addDeployExp&&b_p.broadcastNotice((j_x("531_1976_980")+j_x("799_1241_144"))+e.addDeployExp,3,"#47ff00"),e.addSkillExp&&b_p.broadcastNotice((j_x("531_1976_2243")+j_x("1919_1241_144"))+e.addSkillExp,3,"#47ff00"),e=null},e.prototype.onFbHurtRewardStatus=function(e){Iud(e,DungeonModel)},e.prototype.onMineGetBox=function(e){Ywb(e,MineModel)},e.prototype.onPlayerLeaveGuild=function(e){DB.instance.query(c2w_guild_info,new c2w_guild_info)},e.prototype.onUpdateCamp=function(e){var p_l=LgcM.ins.getActorById(e.objId);if(p_l){var p_g=LgcM.ins.getActorStdInfoById(p_l.id,p_l.type);if(p_g){p_g.camp=e.camp;var b_s=p_g.camp==p_g.camp?Utils.Color.NAME_GREEN:Utils.Color.NAME_RED;p_l.setNameColor(b_s)}}},e.prototype.onFbTeamList=function(e){Kdl(e,DungeonModel)},e.prototype.onDreamlandStart=function(e){Cfi(e,dreamlandModel)},e.prototype.onTalismanUpdate=function(e){Qrw(e,TalismanModel,LED,l_r)},e.prototype.onGuildHelpAssist=function(e){b_p.broadcastNotice((j_x("1358_1808_402")+j_x(2142)),BroadcastType.ERROR,"#71de66"),DB.instance.query(c2w_guil_help_info,new c2w_guil_help_info)},e.prototype.onViewRoleInfo=function(e){var p_l=UIM.instance.isOpenWin(UI.BargainView),p_g=UIM.instance.isOpenWin(UI.OpenServiceMainView);p_l||p_g||UI.RoleViewPanel.open(e),LED.event(l_r.REQUEST_ENEMY_INFO,e)},e.prototype.onUpdateAdventure=function(e){Mbb(e,AdventureModel)},e.prototype.onRideInfo=function(e){Kpl(e,RideModel)},e.prototype.onDreamlandSKillActive=function(e){Gab(e,dreamlandModel)},e.prototype.onMoonboxInfo=function(e){Maz(e,MoonBoxModel)},e.prototype.onCrossBossKillPlayer=function(e){Yra(e,f_a)},e.prototype.onPlayerJoin=function(e){DB.instance.query(c2w_guild_info,new c2w_guild_info),DB.instance.query(c2w_join_list,new c2w_join_list)},e.prototype.delayObjMove=function(e){var p_l=LgcM.ins.getActorById(e.id);p_l&&(p_l.defaultSpeed=e.speed,e.beginPx==e.endPx&&e.beginPy==e.endPy||999999<e.speed?p_l.syncCurrentPxy(e.endPx,e.endPy):900<=e.speed?p_l.jumpTo(e.beginPx,e.beginPy,e.endPx,e.endPy,e.speed):JumpManager.instance.checkTargetIsJump(e.endPx,e.endPy)?p_l.jumpTo(e.beginPx,e.beginPy,e.endPx,e.endPy,e.speed):p_l.moveTo(e.beginPx,e.beginPy,e.endPx,e.endPy,e.speed)),e=null},e.prototype.onTalismanBuySpeel=function(e){Moa(e,TalismanModel,LED,l_r)},e.prototype.onGuildExchangeInfo=function(e){for(var p_l in GuildModel.instance.exchangeInfo={},e.item_list)GuildModel.instance.exchangeInfo[e.item_list[p_l].id]=e.item_list[p_l];for(var p_l in GuildModel.instance.buyInfo={},e.buy_list)GuildModel.instance.buyInfo[e.buy_list[p_l].id]=e.buy_list[p_l];LED.event(l_r.GUILD_EXCHANGE_UPDATE)},e.prototype.onFacilityReset=function(e){var p_l,p_g=((p_l={})[HoleFacilityType.TREASURE]=ErrorDefine.OfficeFacilityReset1,p_l[HoleFacilityType.EXPEDITION]=ErrorDefine.OfficeFacilityReset2,p_l[HoleFacilityType.ATTIC_ATTACK]=ErrorDefine.OfficeFacilityReset3,p_l);p_g[e.type]&&b_p.broadcastError(p_g[e.type]),HoleMoudel.instance.reqFacility()},e.prototype.onFbSerDmgRank=function(e){Ozd(e,DungeonModel)},e.prototype.onUpdateRedPacInfo=function(e){Ann(e,RedPacketModel)},e.prototype.onCreateGuild=function(e){DB.instance.query(c2w_guild_info,new c2w_guild_info)},e.prototype.onUpdateGNTMCResult=function(e){Cpt(e,UI,BossTpyeTip)},e.prototype.s2cErrorHandler=function(e){if(e.error){var p_l=ErrerTipCfg.ins.getErrorById(e.error);p_l&&(p_l?"TalismanDeployUpFail"!=p_l.name?"ItemBagSlotNotEnough"!=p_l.name?"equipSlotNotEnough"!=p_l.name?"BeastPloyUpFail"!=p_l.name?(b_p.broadcastError(e.error,e.params),"YourAccountLandedOtherPlace"==p_l.name&&LgcM.ins.isPop&&(GPlatform.isXjhz?DB.instance.showCloseTip((j_x("389_1764_1274")+j_x("1300_2035_1694")+j_x("1557_118_2221")+j_x("1723_2048")),!0,!0):DB.instance.showCloseTip(p_l.desc+(","+j_x("932_1835_1374")+j_x("1787_1723_2000")+"!"),!0,!0))):LED.event(l_r.ALIEN_BEAST_DLOP_UP_F):BagModel.instance.showDecompose():b_p.confirm((j_x("1761_415_1466")+j_x("2460_2462_1779")+""+j_x("68_2032_2068")+j_x("1365_1876")+""),(function(){UI.BagPanel.open(0)})):LED.event(l_r.TALISMAN_DEPLOY_UPDATE_FAIL):UI.WarnPanel.open("server error code : "+e.error.toString()))}else e.opcode&&DB.instance.event(e.opcode.toString(),e)},e.prototype.onFashionUse=function(e){Wko(e,FashionModel)},e.prototype.m2c_state_fb_choose=function(e){Obg(e,UI,Config,b_p,BroadcastType,Utils)},e.prototype.onOpen=function(){RecordManager.instance.sendRecord(RecordManager.API_ACCOUNT,{step:RecordTypeDefine.STEP_SOCKET_SUCC}),XjwxPlatform.instance.report(),f_b.inst.loginToServer(),LED.event(l_r.OPEN_SUCC)},e.prototype.onRideActive=function(e){Wcn(e,RideModel)},e.prototype.onUpdateXinyueInfo=function(e){Cqk(e,ShareMgr)},e.prototype.onChangeOffice=function(e){var p_l=GuildModel.instance.getMemberByID(e.pid);p_l&&(p_l.office=e.office,LED.event(l_r.GUILD_INFO_UPDATE),b_p.broadcastNotice((j_x("30_1547_402")+j_x(2142)),BroadcastType.ERROR,"#71de66"))},e.prototype.onNewCreateBanque=function(e){Kis(e,v_x)},e.prototype.onFBCreateTeam=function(e){0==e.error&&UI.DungeonMyTeamPanel.open()},e.prototype.onGiveRoseReq=function(e){var p_l={pid:e.pid,entryId:e.entryId,name:e.name,headIcon:e.headIcon,qinmi:e.qinmi,status:e.isOnline,todayAddQinmi:e.todayAddQinmi,lastAddQinmiTime:e.lastAddQinmiTime,id:e.id,num:e.num};UI.getGiftView.open(p_l)},e.prototype.onTalismanSuits=function(e){Cfw(e,TalismanModel)},e.prototype.onBanqueJoin=function(e){Mqj(e,v_x)},e.prototype.onCollectFreezetime=function(e){var p_l=e.objId,p_g=e.time,b_s=LgcM.ins.getActorStdInfoById(p_l,Engine2d.ActorTypeDefine.COLLECT);b_s&&(b_s.freezeTime=p_g),e=null},e.prototype.onSysOpenRewad=function(e){Amd(e,SystemNoticeManager)},e.prototype.onPvpBuyProp=function(e){Oav(e,d_x,Laya,UI)},e.prototype.onGuildInfoUpdate=function(e){Wlh(e,GuildModel,LED,l_r)},e.prototype.m2c_state_fb_notify_choose=function(e){Qsx(e,UI)},e.prototype.onCollectTimes=function(e){var p_l=e.objId,p_g=e.collectedTimes,b_s=LgcM.ins.getActorStdInfoById(p_l,Engine2d.ActorTypeDefine.COLLECT);b_s&&(b_s.collectedTimes=p_g),e=null},e.prototype.onNoticeEdite=function(e){Sim(e,GuildModel,LED,l_r)},e.prototype.onCallLaterAddMon=function(e,p_l,p_g){e&&(LgcM.ins.addActorInfo(Engine2d.ActorTypeDefine.MONSTER,e),LgcM.ins.addMonsterEnity(Engine2d.ActorTypeDefine.MONSTER,e),LgcM.ins.appearMoveToTarget(e.type,e,p_l),BuffModel.instance.updateBuff(e.id,p_g))},e.prototype.w2c_minewar_exchange=function(e){e.num&&(MineModel.instance.exchangeInfo[e.target]=e.num,b_p.broadcastNotice((j_x("1355_2420_402")+j_x(2142)),BroadcastType.ERROR,Utils.Color.GREEN)),LED.event(l_r.MINE_EXCHANGE_UPDATE),MineModel.instance.reqMineRole()},e.prototype.onItemAdd=function(e){Ksy(e,BagModel)},e.prototype.onTalismanSpell=function(e){var p_l=TalismanModel.instance.getTalismanById(e.tsId);p_l&&(p_l.getSpeelValue(e.status,e.time),TalismanModel.instance.reqTalismanList(),LED.event(l_r.TALISMANSEAL_UPDATE_CHANGE,[e.tsId,e.status])),e=null},e.prototype.onGuildShowChange=function(e){Smk(e)},e.prototype.onAlienBeastEvolve=function(e){Yez(e,AlienBeastModle)},e.prototype.onGuildAuctionHistory=function(e){Ahf(e,LED,l_r)},e.prototype.onUpdateBodyCulInfo=function(e){Mxz(e,bodyModel)},e.prototype.m2c_asyncpvp_season_record=function(e){Ojf(e,d_x)},e.prototype.onUpdateRedBigInfo=function(e){Qby(e,RedPacketModel)},e.prototype.onCallLaterShowScene=function(){j_a.sceIns().changeFrameInterval(2),Laya.loader.getRes(Resource.ResUrl.uiJson)?LgcM.ins.showScene():(console.log("wait showScene"),LgcM.ins.isShowScene=!0)},e.prototype.onTalismanUpgrade=function(e){var p_l=TalismanModel.instance.getTalismanById(e.id);p_l&&(p_l.grade=e.grade,LED.event(l_r.TALISMAN_UP_UPDATE,p_l),LED.event(l_r.HELPER_UPDATE_INFO)),e=null},e.prototype.onNotifyFbResult=function(e){Arc(e,DungeonModel)},e.prototype.GodExp=function(e){var p_l="#47ff00";1==e.isCrit&&(b_p.broadcastNotice((j_x("2419_1835_1573")+j_x(2038)),1,"#e32828"),LED.event(l_r.BLACK_GODKING_UPDATE,1),p_l="#e32828"),0<e.xyExp&&b_p.broadcastNotice((j_x("531_1976_257")+j_x("2222_1035"))+e.xyExp,1,p_l),0<e.xsExp&&b_p.broadcastNotice((j_x("531_1976_189")+j_x("1486_1241_144"))+e.xsExp,1,p_l),LED.event(l_r.BLACK_GODSTAR_UPDATE)},e.prototype.onTaskGiveup=function(e){Gsa(e,p_p)},e.prototype.onObjMoveStop=function(e){var p_l=LgcM.ins.getActorById(e.objId);p_l&&p_l.syncCurrentPxy(e.px,e.py,Engine2d.MapUtils.rotationToDir(e.degree)),e=null},e.prototype.onDreamlandQuery=function(e){Myf(e,dreamlandModel)},e.prototype.onViewRoleTalismanInfo=function(e){Mph(e,RoleTalisOrBlackInfoModel)},e.prototype.onBosscomeRobResult=function(e){Mtp(e,BossComeModel,LED,l_r)},e.prototype.onFbHelpStory=function(e){Moc(e,DungeonModel)},e.prototype.onItemDel=function(e){Wmi(e,BagModel)},e.prototype.onTaskUpdate=function(e){var p_l=p_p.instance.getMainTaskState();p_p.instance.updateTask(e.taskId,e.idx,e.progress);var p_g=p_p.instance.getMainTaskState();p_l==TaskState.RUNNING&&p_g==TaskState.COMPLETE&&1<e.taskId&&Laya.timer.callLater(UI.RenWuWanCheng,UI.RenWuWanCheng.open),TaskManager.instance.continueDoTask(e.taskId),e=null},e.prototype.onAddFriendReq=function(e){Ggx(e,FriendModel)},e.prototype.onCancelJoinReturn=function(e){var p_l=GuildModel.instance.guildLIst;for(var p_g in p_l)p_l[p_g].id==e.id&&(p_l[p_g].flag=0);LED.event(l_r.GUILD_LIST_UPDATE)},e.prototype.onUpdateRedSendResult=function(e){Yps(e,RedPacketModel)},e.prototype.onItemRandABDeployInfo=function(e){Cre(e,this,LED,l_r)},e.prototype.onFBHeavenOpenWatch=function(e){Mjb(e,DungeonModel,LED,l_r)},e.prototype.onItemRandTsDeployInfo=function(e){Mkd(e,this)},e.prototype.onTalismanSetFight=function(e){Ggb(e,TalismanModel)},e.prototype.onChatPlayerInfo=function(e){Ohj(e,d_o)},e.prototype.onGodSuits=function(e){Gqv(e,BlackKingModel)},e.prototype.onGuildAuctionBid=function(e){Ubr(e,b_p,j_x,BroadcastType,LED,l_r)},e.prototype.onBlackList=function(e){Elb(e,FriendModel)},e.prototype.onDayReward=function(e){Ywo(e,RechargeModel)},e.prototype.onOfflineDrop=function(e){Egd(e,OfflineModel,LED,l_r)},e.prototype.onSkillInfoUpdate=function(e){Cob(e,SkillModel,CittaModule)},e.prototype.onCsaRecSweetGainRank=function(e){Quh(e,ActivityModel,LED,l_r)},e.prototype.onRideCombine=function(e){Ged(e,RideModel)},e.prototype.onCrossBossBeKillTimes=function(e){Uib(e,f_a)},e.prototype.onHangupDrop=function(e){Ewp(e,OfflineModel,SyncTime,LED,l_r)},e.prototype.onWbCollectInfo=function(e){Org(e,ShareMgr)},e.prototype.onFbDmgRank=function(e){Adw(e,DungeonModel)},e.prototype.onFbTeamLeave=function(e){Ast(e,DungeonModel)},e.prototype.onUpdateChristmaResult=function(e){Isb(e,UI,BossTpyeTip)},e.prototype.w2c_asyncpvp_broadcast=function(e){Ypx(e,d_x)},e.prototype.onBanqueLst=function(e){Efk(e,v_x)},e.prototype.onRetroactiveResult=function(e){Mpc(e,SigninModel)},e.prototype.onUpdateBodyLevelUpInfo=function(e){Aen(e,bodyModel)},e}(),v_j=function(){function e(){}return e.prototype.on=function(e,p_l){Knk(e,p_l,DB,this)},e.prototype.off=function(e,p_l){Eas(e,p_l,DB,this)},e.prototype.event=function(e,p_l){Acn(e,p_l,LED)},e}(),ZuHeModel=function(){function e(){}return Object.defineProperty(e.prototype,"hasReward",{get:function(){if(!this.info)return!1;var e=this.info.list||[];for(var p_l in e){var p_g=e[p_l].elems||[];for(var b_s in p_g)if(p_g[b_s].progress>=Config.activity_zuhe_zuheAct[p_g[b_s].id].condition[1]&&0==p_g[b_s].status)return!0}return!1},enumerable:!0,configurable:!0}),e.instance=new e,e}(),TitleModel=function(){function e(){this.titleInfo={},this.otherTitleInfo={}}return Object.defineProperty(e.prototype,"canGain",{get:function(){return!!p_k.instance.checkSystemOpen(FuncDefine.title)&&this.checkCanGainByType(1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canPrivilegeHaveGain",{get:function(){return!!p_k.instance.checkSystemOpen(FuncDefine.title)&&this.checkPrivilegeByType(TitleDefine.privilegeType)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canCsPrivilegeHaveGain",{get:function(){return!!p_k.instance.checkSystemOpen(FuncDefine.title)&&this.checkCsPrivilegeByType(TitleDefine.csPrivilegeType)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canOtherPrivilegeHaveGain",{get:function(){return this.checkPrivilegeByType(TitleDefine.privilegeType,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canOtherCsPrivilegeHaveGain",{get:function(){return this.checkCsPrivilegeByType(TitleDefine.csPrivilegeType,!1)},enumerable:!0,configurable:!0}),e.prototype.checkPrivilegeByType=function(e,p_l){for(var p_g in void 0===p_l&&(p_l=!0),this.title_title)if(this.title_title[p_g].type==e){var b_s=p_l?this.titleInfo[p_g]:this.otherTitleInfo[p_g];if(e==TitleDefine.privilegeType&&this.IsPrivilegeGain(b_s))return!0}return!1},e.IsStata=function(e,p_l,p_g){var b_s=!0;switch(p_g){case 0:if(!e.condition&&e.consume){var d_u=BagModel.instance.getItemCountByItemID(e.consume[0][0],BagTypeDefine.BAG_TYPE_ITEM)>=e.consume[0][1];b_s=!p_l&&d_u||p_l&&0==p_l.gain&&d_u}else b_s=p_l&&0==p_l.gain&&e.condition&&p_l.progress>=e.condition[0][1];break;case 1:b_s=p_l&&1==p_l.inuse;break;case 2:b_s=!(p_l&&1==p_l.inuse);break;default:b_s=!e.condition&&e.consume?(d_u=BagModel.instance.getItemCountByItemID(e.consume[0][0],BagTypeDefine.BAG_TYPE_ITEM)<e.consume[0][1],!p_l&&d_u||p_l&&0==p_l.gain&&d_u):!p_l||0==p_l.gain&&e.condition&&p_l.progress<e.condition[0][1]}return b_s},e.prototype.CountTitles=function(e){var p_l=0;for(var p_g in this.titleInfo){var b_s=this.title_title[p_g];0<this.titleInfo[p_g].gain&&b_s&&(1==e&&b_s.treasureCriProfit?p_l+=b_s.treasureCriProfit/100:2==e&&b_s.treasureCriPct?p_l+=b_s.treasureCriPct/100:3==e&&b_s.expedTaskShorten?p_l+=b_s.expedTaskShorten/100:4==e&&b_s.expAddition?p_l+=b_s.expAddition/100:5==e&&b_s.copperAddition?p_l+=b_s.copperAddition/100:6==e&&b_s.dreamlandShorten&&(p_l+=b_s.dreamlandShorten/100))}return p_l},e.prototype.levelUpRedPinot=function(){var e=this.title_title;for(var p_l in e)if(e[p_l].lvup&&this.canLevelUp(parseInt(p_l)))return!0;return!1},e.prototype.checkCsPrivilegeByType=function(e,p_l){for(var p_g in void 0===p_l&&(p_l=!0),this.title_title)if(this.title_title[p_g].type==e){var b_s=p_l?this.titleInfo[p_g]:this.otherTitleInfo[p_g];if(e==TitleDefine.csPrivilegeType&&this.IsPrivilegeGain(b_s))return!0}return!1},e.prototype.canLevelUp=function(e){this.title_title[e];var p_l=this.title_titleLevel[e];if(!p_l)return!1;var p_g,b_s=p_l.lvLimit;if(this.titleInfo[e]&&(p_g=this.titleInfo[e].level),p_g=p_g||1,p_l.consume){var d_u=p_l.consume[0][1],b_e=BagModel.instance.getItemCountByItemID(p_l.consume[0][0],BagTypeDefine.BAG_TYPE_ITEM);if(b_s<=p_g)return!1;if(d_u<=b_e)return!0}return!1},e.prototype.getActivedTitles=function(e){var p_l=[];for(var p_g in this.titleInfo){var b_s=this.title_title[p_g];0<this.titleInfo[p_g].gain&&b_s&&(1==e&&(b_s.prop||b_s.propPct)?p_l.push(this.titleInfo[p_g].titleId):2==e&&(b_s.expAddition||b_s.copperAddition)?p_l.push(this.titleInfo[p_g].titleId):3==e&&(b_s.treasureCriProfit||b_s.treasureCriPct)?p_l.push(this.titleInfo[p_g].titleId):4==e&&b_s.expedTaskShorten?p_l.push(this.titleInfo[p_g].titleId):5==e&&b_s.dreamlandShorten&&p_l.push(this.titleInfo[p_g].titleId))}return p_l},e.prototype.getAddPros=function(e){var p_l=this.title_title[e];if(p_l){var p_g,b_s=[],d_u=CharacterProperty.getPropertys(p_l.prop),b_e=CharacterProperty.getPropertys(p_l.propPct),d_m=this.title_titleLevel[e];this.titleInfo[e]&&(p_g=this.titleInfo[e].level),p_g=p_g||1;var d_w=0;if(0<d_u.length)for(var f_t=0,v_z=d_u;f_t<v_z.length;f_t++){var d_h=v_z[f_t];if((f_y=[]).push(d_v.getDesc(d_h.propOrdinal)+""),p_l.lvup)switch(d_h.name){case"hpUpper":d_w=d_m?d_h.value+d_m.prop[0][1]*(p_g-1):d_h.value;break;case"attack":d_w=d_m?d_h.value+d_m.prop[1][1]*(p_g-1):d_h.value;break;case"defense":d_w=d_m?d_h.value+d_m.prop[2][1]*(p_g-1):d_h.value;break;case"armorBreak":d_w=d_m?d_h.value+d_m.prop[3][1]*(p_g-1):d_h.value}else d_w=d_h.value;f_y.push(d_w),b_s.push(f_y)}else if(0<b_e.length)for(var r_t=0,t_n=b_e;r_t<t_n.length;r_t++){var f_y;d_h=t_n[r_t],(f_y=[]).push(d_v.getDesc(d_h.propOrdinal)+""),f_y.push(d_h.value/100+"%"),b_s.push(f_y)}return p_l.expAddition&&((f_y=[]).push((j_x("2270_1879_1241")+j_x("144_223_402")+"")),f_y.push(p_l.expAddition+"%"),b_s.push(f_y)),p_l.treasureCriProfit&&((f_y=[]).push((j_x("1156_869_2147")+j_x("2419_1835_1573")+j_x(2038)+"")),f_y.push(p_l.treasureCriProfit+"%"),b_s.push(f_y)),p_l.treasureCriPct&&((f_y=[]).push((j_x("1156_869_2147")+j_x("2419_1835_1916")+"")),f_y.push(p_l.treasureCriPct+"%"),b_s.push(f_y)),p_l.copperAddition&&((f_y=[]).push((j_x("2270_1879_36")+j_x("519_1573_2038")+"")),f_y.push(p_l.copperAddition+"%"),b_s.push(f_y)),p_l.expedTaskShorten&&((f_y=[]).push((j_x("693_442_869")+j_x("10_30_595")+j_x("1702_2460_733")+j_x(454)+"")),f_y.push(p_l.expedTaskShorten+"%"),b_s.push(f_y)),b_s}},e.prototype.clcikLevelUp=function(e){this.title_title[e];var p_l=this.title_titleLevel[e],p_g=Config.CItem(p_l.consume[0][0]);return this.canLevelUp(e)?(DB.instance.query(c2m_title_level_up,{titleId:e}),!0):(b_p.broadcastNotice((j_x("371_2342_774")+j_x(1624))+p_g.name+"*"+p_l.consume[0][1]),!1)},e.prototype.checkCanGainByType=function(p_l){for(var p_g in this.title_title){var b_s=this.title_title[p_g];if(b_s.type==p_l){var d_u=this.titleInfo[p_g];if(1==p_l){if(e.IsStata(b_s,d_u,0)||e.instance.canLevelUp(b_s.id))return!0}else if(p_l==TitleDefine.privilegeType){if(e.IsStata(b_s,d_u,0)||e.instance.canLevelUp(b_s.id))return!0}else if(p_l==TitleDefine.csPrivilegeType&&(e.IsStata(b_s,d_u,0)||e.instance.canLevelUp(b_s.id)))return!0}}return!1},e.prototype.GetPropertysToString=function(e,p_l){var p_g=this.title_title[e];if(null!=p_g){var b_s=CharacterProperty.getPropertys(p_g.prop),d_u=CharacterProperty.getPropertys(p_g.propPct),b_e=1===p_l?"%    ":"%\n",d_m=1===p_l?"    ":"\n",d_w=[];if(null!=b_s)for(var f_t=0,v_z=b_s;f_t<v_z.length;f_t++){var d_h=v_z[f_t];d_w.push(d_v.getDesc(d_h.propOrdinal)+"+"+d_h.value+d_m)}if(null!=d_u)for(var r_t=0,t_n=d_u;r_t<t_n.length;r_t++)d_h=t_n[r_t],d_w.push(d_v.getDesc(d_h.propOrdinal)+"+"+d_h.value/100+b_e);return p_g.expAddition&&d_w.push((j_x("2270_1879_1241")+j_x("144_223_402")+"+")+p_g.expAddition+b_e),p_g.treasureCriProfit&&d_w.push((j_x("1156_869_2147")+j_x("2419_1835_1573")+j_x(2038)+"+")+p_g.treasureCriProfit+b_e),p_g.treasureCriPct&&d_w.push((j_x("1156_869_2147")+j_x("2419_1835_1916")+"+")+p_g.treasureCriPct+b_e),p_g.copperAddition&&d_w.push((j_x("2270_1879_36")+j_x("519_1573_2038")+"+")+p_g.copperAddition+b_e),p_g.expedTaskShorten&&d_w.push((j_x("693_442_869")+j_x("10_30_595")+j_x("1702_2460_733")+j_x(454)+"+")+p_g.expedTaskShorten+"%"),d_w}},e.prototype.CountpropPct=function(e){var p_l=[],p_g=[];if(!e.propPct)return 0;for(var b_s=0,d_u=e.propPct;b_s<d_u.length;b_s++){var b_e=d_u[b_s],d_m=[],d_w=[];d_w.push(b_e[0]),d_w.push(b_e[1]),p_g.push(d_w),d_m.push(b_e[0]),d_m.push(LgcM.ins.heroVo[b_e[0]]),p_l.push(d_m)}return b_p.calPropFight(CharacterProperty.getPropertys(p_l),p_g)-b_p.calPropFight(CharacterProperty.getPropertys(p_l))},e.prototype.IsPrivilegeGain=function(e){return!!e&&0<e.gain},e.prototype.countProByLv=function(e){var p_l=this.title_title[e],p_g=this.title_titleLevel[e],b_s=[];if(!p_l.prop)return[];if(!p_l.lvup)return p_l.prop;var d_u=void 0;this.titleInfo[e]&&(d_u=this.titleInfo[e].level),d_u=d_u||1;for(var b_e=0,d_m=0,d_w=p_l.prop;d_m<d_w.length;d_m++){var f_t=d_w[d_m],v_z=[];switch(b_e=0,v_z.push(f_t[0]),f_t[0]){case"hpUpper":b_e=p_g?f_t[1]+p_g.prop[0][1]*(d_u-1):f_t[1];break;case"attack":b_e=p_g?f_t[1]+p_g.prop[1][1]*(d_u-1):f_t[1];break;case"defense":b_e=p_g?f_t[1]+p_g.prop[2][1]*(d_u-1):f_t[1];break;case"armorBreak":b_e=p_g?f_t[1]+p_g.prop[3][1]*(d_u-1):f_t[1];break;default:b_e=0}v_z.push(b_e),b_s.push(v_z)}return b_s},Object.defineProperty(e.prototype,"title_titleLevel",{get:function(){return this.titleLvConf||(this.titleLvConf=Config.title_titleLevel),this.titleLvConf},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title_title",{get:function(){return this.titleConf||(this.titleConf=Config.title_title),this.titleConf},enumerable:!0,configurable:!0}),e.prototype.isTitleAct=function(e){if(!e)return 0;var p_l=e.effects[0][1],p_g=this.title_title,b_s=this.getActivedTitles(1);for(var d_u in b_s)if(p_l==b_s[d_u])return p_g[p_l]&&p_g[p_l].lvup?(UI.TitlePanel.open(),UI.ItemConsumTipsPanel.close()):b_p.broadcastNotice((j_x("2101_1274_1300")+j_x("2335_1796"))),!0;return!1},e.instance=new e,e}(),TitleDefine=function(){function e(){}return e.privilegeType=4,e.csPrivilegeType=5,e}(),TeamVO=function(){function e(){}return Object.defineProperty(e.prototype,"targetFbId",{get:function(){return this._targetFbId},set:function(e){this._targetFbId=e},enumerable:!0,configurable:!0}),e.prototype.parseTeamInfo=function(e){this._teamInfoVo||(this._teamInfoVo=new TeamInfoVO),this._teamInfoVo.parse(e)},e.prototype.deleteMemberById=function(e){this._teamInfoVo&&this._teamInfoVo.deleteMemberById(e)},e.prototype.parseTeamInviteList=function(e){this._inviteList=[];var p_l=e.list;if(p_l&&p_l.length){var p_g=0;for(p_g=p_l.length-1;-1<p_g;p_g--){var b_s=new TeamBeviteVO,d_u=p_l[p_g];Utils.updateVo(b_s,d_u),b_s.aims=this.aims,this._inviteList.push(b_s)}}},e.prototype.addBeInvite=function(e){Uil(e,this)},e.prototype.getMemberById=function(e){return this._teamInfoVo?this._teamInfoVo.getMemberById(e):null},e.prototype.deleteBeInviteByTeamId=function(e){if(!this._beInviteList)return null;for(var p_l=this._beInviteList.length,p_g=0;p_g<p_l;p_g++)if(this._beInviteList[p_g].teamId==e)return void this._beInviteList.splice(p_g,1)},e.prototype.getBeInviteByTeamId=function(e){if(!this._beInviteList)return null;for(var p_l=0,p_g=this._beInviteList;p_l<p_g.length;p_l++){var b_s=p_g[p_l];if(b_s.teamId==e)return b_s}return null},e.prototype.parseTeamList=function(e){Uka(e,this)},e.prototype.updateTeamList=function(e){if(this._teamLists=[],e&&e.length){var p_l=0;for(p_l=e.length-1;-1<p_l;p_l--){var p_g=new TeamListVO,b_s=e[p_l];p_g.teamId=b_s.teamId,p_g.leaderName=b_s.lname,p_g.count=b_s.count,p_g.fbId=b_s.fbId,p_g.aims=this.aims,this._teamLists.push(p_g)}}},e.prototype.getTeamListVoById=function(e){if(!this._teamLists||!this._teamLists.length)return null;for(var p_l in this._teamLists){var p_g=this._teamLists[p_l];if(p_g.teamId==e)return p_g}return null},Object.defineProperty(e.prototype,"isBevite",{get:function(){return!(!this._beInviteList||!this._beInviteList.length)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"beInviteCount",{get:function(){return this._beInviteList?this._beInviteList.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFull",{get:function(){var e=Config.global[GlobalDefine.team_member_max_num].i_info;return(this.teamInfoVo?this.teamInfoVo.memberCount:0)===e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLeader",{get:function(){return!!this.teamInfoVo&&this.teamInfoVo.isLeader},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"teamInfoVo",{get:function(){return this._teamInfoVo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"beInviteList",{get:function(){return this._beInviteList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inviteList",{get:function(){return this._inviteList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"teamList",{get:function(){return this._teamLists},enumerable:!0,configurable:!0}),e.prototype.clearTeamInfoVo=function(){Kmj(this)},e.prototype.clearBeinviteList=function(){Qsg(this)},e.prototype.clearInviteList=function(){Umc(this)},e.prototype.clear=function(){Azn(this)},e}(),TeamListVO=function(){},TeamInfoVO=function(){function e(){}return e.prototype.isTeamInfo=function(e){return Yio(e)},e.prototype.parse=function(e){this.aims=e.aims,this.fbId=e.fbId,this.teamId=e.teamId,this.lpid=e.lpid,this.isTeamInfo(e)&&this.updateTeamMembers(e.members)},Object.defineProperty(e.prototype,"members",{get:function(){return this._members},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"haveTeam",{get:function(){return this._members&&0<this._members.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"memberCount",{get:function(){return this._members?this._members.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLeader",{get:function(){return this.lpid==b_p.playerId},enumerable:!0,configurable:!0}),e.prototype.getMemberById=function(e){if(!this._members||!this._members.length)return null;for(var p_l in this._members){var p_g=this._members[p_l];if(p_g.pid==e)return p_g}return null},e.prototype.getMemberByIndex=function(e){if(!this._members||!this._members.length)return null;for(var p_l in this._members){var p_g=this._members[p_l];if(p_g.idx==e)return p_g}return null},e.prototype.deleteMemberById=function(e){if(this._members&&this._members.length){var p_l=0,p_g=this._members.length;for(p_l=0;p_l<p_g;p_l++)if(this._members[p_l].pid==e)return void this._members.splice(p_l,1)}},e.prototype.updateTeamMembers=function(e){if(this._members=[],e&&e.length){var p_l,p_g=0,b_s=e.length;for(p_g=0;p_g<b_s;p_g++){var d_u=new TeamMemberVO;if(Utils.updateVo(d_u,e[p_g]),d_u.lpid=this.lpid,d_u.aims=this.aims,d_u.pid==this.lpid&&(p_l=d_u),0==d_u.pid&&0!=d_u.idx){d_u.isRobot=!0;var b_e=p_l?.9*p_l.power:d_u.power;d_u.power=p_l?Utils.getRandom(b_e,p_l.power):d_u.power}this._members.push(d_u)}}},e}(),TeamBaseVO=function(){function e(){this.clean()}return e.prototype.clean=function(){Gxa(this)},e}(),TeamModel=function(){function e(){this._teamHash={}}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.getTeamVO=function(e){if(void 0===e&&(e=TeamAimsType.ASCENT),""==e||!e)return null;var p_l=this._teamHash[e];return p_l||((p_l=new TeamVO).aims=e),this._teamHash[e]=p_l},e.prototype.reqTeamKick=function(e){DB.instance.query(c2w_team_kick,{idx:e})},e.prototype.reqTeamList=function(e,p_l){DB.instance.query(c2w_team_list,{aims:e,fbId:p_l})},e.prototype.reqTeamJoin=function(e,p_l,p_g){void 0===p_l&&(p_l=""),void 0===p_g&&(p_g=0),DB.instance.query(c2w_team_join,{teamId:e,aims:p_l,fbId:p_g})},e.prototype.reqTeamInviteReply=function(e,p_l){DB.instance.query(c2w_team_invite_reply,{teamId:e,op:p_l})},e.prototype.deleteMyTeamInfo=function(e){void 0===e&&(e=TeamAimsType.ASCENT);var p_l=this._teamHash[e];p_l&&p_l.clearTeamInfoVo()},e.prototype.reqTeamRobot=function(e){DB.instance.query(c2w_team_robot,{flag:e})},e.prototype.reqTeamDisband=function(){DB.instance.query(c2w_team_disband,{})},e.prototype.checkBlackList=function(e){return Svc(e,FriendModel)},e.prototype.reqTeamCreate=function(e,p_l){var p_g=new c2w_team_create;p_g.aims=e,p_g.fbId=p_l,DB.instance.query(c2w_team_create,p_g)},e.prototype.checkIsHelper=function(e,p_l){void 0===p_l&&(p_l=TeamAimsType.ASCENT);var p_g=this.getTeamVO(p_l).getMemberById(e);return p_g?p_g.helper:0},e.prototype.reqEnterFb=function(e,p_l,p_g){e&&null!=e&&(DungeonModel.instance.isInFb?b_p.broadcastNotice(Utils.$((j_x("1176_1300_1241")+j_x("2035_1443_944")+j_x(283)))):(p_g?b_p.registerAutoOpenPanel(UI.RewardBossPanel,b_p.mapID,(function(){UI.RewardBossPanel.open()})):b_p.registerAutoOpenPanel(UI.AscentPanel,b_p.mapID,(function(){UI.AscentPanel.open(AscentModel.instance._currSelec)})),DungeonModel.instance.reqEnterFb(e,p_l)))},e.prototype.getHaveBeviteAll=function(){for(var e in this._teamHash){var p_l=this._teamHash[e];if(p_l.isBevite)return p_l}return null},e.prototype.reqTeamLeave=function(){DB.instance.query(c2w_team_leave,{})},e.prototype.getHaveTeamAll=function(){for(var e in this._teamHash){var p_l=this._teamHash[e];if(p_l.teamInfoVo&&p_l.teamInfoVo.haveTeam)return p_l}return null},e.prototype.clearAllTeam=function(){Kfy(this)},e.prototype.reqTeamInvite=function(e){DB.instance.query(c2w_team_invite,{tpid:e})},e.prototype.checkHaveTeam=function(e){void 0===e&&(e=TeamAimsType.ASCENT);var p_l=this.getTeamVO(e);return!!p_l.teamInfoVo&&p_l.teamInfoVo.haveTeam},e.prototype.getTeamVOByTeamId=function(e){for(var p_l in this._teamHash){var p_g=this._teamHash[p_l];if(p_g.teamInfoVo&&p_g.teamInfoVo.teamId==e)return p_g}return null},e.prototype.reqTeamInfo=function(){DB.instance.query(c2w_team_info,{})},e.prototype.reqTeamGetInviteList=function(e,p_l){DB.instance.query(c2w_team_invite_rcmd,{aims:e,fbId:p_l})},e.prototype.deleteTeamVO=function(e){void 0===e&&(e=TeamAimsType.ASCENT);var p_l=this._teamHash[e];p_l&&p_l.clear(),delete this._teamHash[e]},e.prototype.reqChangeTeamAims=function(e,p_l){DB.instance.query(c2w_team_change_aims,{aims:e,fbId:p_l})},e}(),TeamHelp=function(){function e(){}return e.canCreateTeam=function(p_l,p_g){return void 0===p_l&&(p_l=TeamAimsType.ASCENT),void 0===p_g&&(p_g=0),e.inCopy?(b_p.broadcastNotice(this.print((j_x("2035_1443_944")+j_x("283_814_799")+j_x("1357_1571_2413")+j_x(1869)))),!1):e.getIsCanState(p_g,p_l)?DungeonModel.instance.isTeam()?(b_p.broadcastNotice(this.print((j_x("1176_2035_1694")+j_x("1557_1443_944")+j_x("283_1300_1896")+j_x("2413_1869")))),!1):!TeamModel.instance.getHaveTeamAll()||(b_p.broadcastNotice(this.print((j_x("1300_1241_2035")+j_x("2413_1869_283")))),!1):(b_p.broadcastNotice(this.print((j_x("1964_949_381")+j_x("843_206_1117")+j_x(1012)))),!1)},e.openTeamPanel=function(e){if(0<e.targetFbId)if(e.aims==TeamAimsType.ASCENT){var p_l=AscentModel.instance,p_g=e.targetFbId,b_s=StateModel.instance.getStateLv(),d_u=Config.fb_ascent[p_g].floor;if(p_l.getAscentStatus(b_s,d_u)!=AscentCellStatus.OPEN&&e.isLeader){var b_e=p_l.ascentVo.lastFbId;if(d_w=Config.fb_ascent[b_e]){var d_m=d_w.floor;b_e=p_l.maxFloor<d_m+1?b_e:b_e+1,p_g=(d_w=Config.fb_ascent[b_e]).id,AscentModel.instance.getAscentStatus(d_w.state,d_w.floor)==AscentCellStatus.OPEN&&e.isLeader&&TeamModel.instance.reqChangeTeamAims(TeamAimsType.ASCENT,d_w.id)}}UI.TeamPanel.open(e.aims,p_g)}else if(e.aims==TeamAimsType.RareAni)p_l=RareAnimalModel.instance,p_g=e.targetFbId,b_s=StateModel.instance.getStateLv(),d_u=Config.fb_yishou[p_g].floor,p_l.getRareAnimalStatus(b_s,d_u)!=AscentCellStatus.OPEN&&e.isLeader&&(b_e=p_l.rareAnimalVo.lastFbId,(d_w=Config.fb_yishou[b_e])&&(d_m=d_w.floor,b_e=p_l.maxFloor<d_m+1?b_e:b_e+1,p_g=(d_w=Config.fb_yishou[b_e]).id,RareAnimalModel.instance.getRareAnimalStatus(d_w.state,d_w.floor)==AscentCellStatus.OPEN&&e.isLeader&&TeamModel.instance.reqChangeTeamAims(TeamAimsType.RareAni,p_g))),UI.TeamPanel.open(e.aims,p_g);else if(e.aims==TeamAimsType.RewardBossAni){var d_w;p_l=RewardBossModel.instance,p_g=e.targetFbId,b_s=StateModel.instance.getStateLv(),d_u=Config.fb_xuanshang[p_g].floor,p_l.getRewardBossStatus(b_s,d_u)!=AscentCellStatus.OPEN&&e.isLeader&&(b_e=p_l.rewardBossVo.lastFbId,(d_w=Config.fb_xuanshang[b_e])&&(d_m=d_w.floor,b_e=p_l.maxFloor<d_m+1?b_e:b_e+1,p_g=(d_w=Config.fb_xuanshang[b_e]).id,RewardBossModel.instance.getRewardBossStatus(d_w.state,d_w.floor)==AscentCellStatus.OPEN&&e.isLeader&&TeamModel.instance.reqChangeTeamAims(TeamAimsType.RewardBossAni,p_g))),UI.TeamPanel.open(e.aims,p_g)}},e.canInvite=function(e,p_l){void 0===p_l&&(p_l=0);var p_g=TeamModel.instance.getTeamVOByTeamId(p_l);return!p_g||!p_g.getMemberById(e)||(b_p.broadcastNotice(this.print((j_x("1300_223_2456")+j_x("2413_1869")))),!1)},e.canJoinTeam=function(p_l,p_g,b_s){void 0===p_l&&(p_l=0),void 0===p_g&&(p_g=0),void 0===b_s&&(b_s="");var d_u=TeamModel.instance,b_e=d_u.getTeamVOByTeamId(p_l);return d_u.getHaveTeamAll()?(b_p.broadcastNotice(this.print((j_x("1300_1241_2035")+j_x("2413_1869_283")))),!1):e.inCopy?(b_p.broadcastNotice(this.print((j_x("2035_1443_944")+j_x("283_814_799")+j_x("223_2456_2413")+j_x(1869)))),!1):e.getIsCanState(p_g,b_s)?b_e&&b_e.isFull?(b_p.broadcastNotice(this.print((j_x("2413_1869_1300")+j_x(1463)))),!1):!DungeonModel.instance.isTeam()||(b_p.broadcastNotice(this.print((j_x("1176_2035_1694")+j_x("1557_1443_944")+j_x("283_1300_1896")+j_x("2413_1869")))),!1):(b_p.broadcastNotice(this.print((j_x("1964_949_381")+j_x("843_206_1117")+j_x(1012)))),!1)},e.getIsCanState=function(e,p_l){if(!e)return!0;var p_g=0;return p_l===TeamAimsType.ASCENT?p_g=Config.fb_ascent[e].state:p_l==TeamAimsType.RareAni?p_g=Config.fb_yishou[e].state:p_l==TeamAimsType.RewardBossAni&&(p_g=Config.fb_xuanshang[e].state),!(StateModel.instance.getStateLv()<p_g)},Object.defineProperty(e,"inCopy",{get:function(){return DungeonModel.instance.isInFb},enumerable:!0,configurable:!0}),e.print=function(e){for(var p_l=[],p_g=1;p_g<arguments.length;p_g++)p_l[p_g-1]=arguments[p_g];return Utils.$(e,p_l)},e}(),TeamController=function(){function e(){DB.instance.on(w2c_team_info.opcode.toString(),this,this.onTeamInfo),DB.instance.on(w2c_team_be_invite.opcode.toString(),this,this.onTeamBeInvite),DB.instance.on(w2c_team_leave.opcode.toString(),this,this.onTeamLeave),DB.instance.on(w2c_team_list.opcode.toString(),this,this.onTeamList),DB.instance.on(w2c_team_invite_rcmd.opcode.toString(),this,this.onTeamInviteList),DB.instance.on(w2c_team_invite_reply.opcode.toString(),this,this.onTeamInviteReply),DB.instance.on(w2c_team_join.opcode.toString(),this,this.onTeamJoin),DB.instance.on(w2c_team_change_aims.opcode.toString(),this,this.onUpdateTeamAims)}return e.prototype.onTeamInfo=function(e){if(null!=e.teamId&&0!=e.teamId){var p_l=e.aims,p_g=TeamModel.instance.getTeamVO(p_l);p_g.parseTeamInfo(e),p_g.targetFbId=e.fbId}else TeamModel.instance.clearAllTeam(),LED.event(l_r.TEAM_REQ_LIST);LED.event(l_r.TEAM_INFO_UPDATE)},e.prototype.onTeamInviteList=function(e){var p_l=TeamModel.instance.getTeamVO(e.aims);p_l.parseTeamInviteList(e);var p_g=p_l.inviteList;p_g.length&&p_g.sort(this.inviteCompare),LED.event(l_r.TEAM_INVITE_LIST)},e.prototype.onTeamList=function(e){Uia(e,TeamModel,LED,l_r)},e.prototype.onTeamInviteReply=function(e){if(0==e.err&&1==e.op){b_p.broadcastNotice(Utils.$((j_x("402_2142_223")+j_x("2456_2413_1869"))),1,Utils.Color.NAME_GREEN);var p_l=TeamModel.instance.getTeamVOByTeamId(e.teamId);if(p_l){p_l.deleteBeInviteByTeamId(e.teamId);var p_g=p_l.beInviteList;if(p_g&&p_g.length){for(var b_s in p_g){var d_u=p_g[b_s];TeamModel.instance.reqTeamInviteReply(d_u.teamId,0)}p_l.clearBeinviteList()}UI.TeamBeInvitePanel.close(),UI.TeamPanel.open(p_l.aims,p_l.targetFbId),LED.event(l_r.TEAM_BE_INVITE)}}},e.prototype.onTeamJoin=function(e){b_p.broadcastNotice((j_x("223_2456_2413")+j_x("1869_402_2142")),1,Utils.Color.NAME_GREEN);var p_l=TeamModel.instance.getTeamVOByTeamId(e.teamId);p_l&&UI.TeamPanel.open(p_l.aims,p_l.targetFbId)},e.prototype.onTeamLeave=function(e){var p_l=e.teamId,p_g=e.flag;0==p_g?b_p.broadcastNotice(Utils.$((j_x("1176_1300_1016")+j_x("155_2413_1869")))):1==p_g?b_p.broadcastNotice(Utils.$((j_x("1176_1300_1629")+j_x("2413_1066_1710")+j_x("203_2413_1869")))):2==p_g&&b_p.broadcastNotice(Utils.$((j_x("2413_1869_1300")+j_x("1048_114"))));var b_s=TeamModel.instance.getTeamVOByTeamId(p_l);TeamModel.instance.deleteMyTeamInfo(b_s.aims),LED.event(l_r.TEAM_INFO_UPDATE)},e.prototype.onTeamBeInvite=function(e){var p_l,p_g=e.aims,b_s=TeamModel.instance.getTeamVO(p_g);(p_l=b_s.getBeInviteByTeamId(e.teamId))||(p_l=new TeamBeviteVO,Utils.updateVo(p_l,e),p_l.entryId=e.lentryId,p_l.name=e.lname,p_l.fbId=e.fbId,b_s.addBeInvite(p_l),LED.event(l_r.TEAM_BE_INVITE))},e.prototype.inviteCompare=function(e,p_l){var p_g=FriendModel.instance.isMyFriend(e.pid)?1:0;return(FriendModel.instance.isMyFriend(p_l.pid)?1:0)<p_g?-1:1},e.prototype.onUpdateTeamAims=function(e){Qhy(e,TeamModel,LED,l_r)},e}(),TeamAimsType=function(){function e(){}return e.ASCENT="ascentFb",e.RareAni="yishouFb",e.RewardBossAni="xuanshangFb",e.DoubleArea="DoubleArea",e}(),TaskVo=function(){function e(){this.progress=[]}return e.prototype.update=function(e){if(this.id=e.taskId,this.acceptTime=e.acceptTime,this.level=e.level,this.exInfo=e.exInfo,Config.task_task[this.id]&&(this.type=Config.task_task[this.id].type),this.initProgress(),e.progress){if(!Config.task_task[this.id])return;var p_l=0;for(var p_g in e.progress)this.progress[p_l]&&(this.progress[p_l].progress=e.progress[p_g].complete),p_l++}},e.prototype.initProgress=function(){this.progress.length=0;var e,p_l=Config.task_task[this.id];if(p_l)for(var p_g in p_l.need)(e=new TaskProgressVo).target=parseInt(p_l.need[p_g][1]),this.progress.push(e)},e.prototype.updateProgress=function(e,p_l){this.progress[e-1].progress=p_l,this.progress[e-1].progress>this.progress[e-1].target&&(this.progress[e-1].progress=this.progress[e-1].target)},Object.defineProperty(e.prototype,"state",{get:function(){for(var e in this.progress)if(!this.progress[e].isFinish)return TaskState.RUNNING;return TaskState.COMPLETE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mainProVo",{get:function(){return this.progress[0]},enumerable:!0,configurable:!0}),e}(),TaskProgressVo=function(){function e(){this.progress=0,this.target=0}return Object.defineProperty(e.prototype,"isFinish",{get:function(){return this.progress>=this.target},enumerable:!0,configurable:!0}),e}(),TaskType,TaskState,p_l;p_l=TaskType=TaskType||{},p_l[p_l.MAIN=1]="MAIN",p_l[p_l.BRANCH=2]="BRANCH",p_l[p_l.FB=3]="FB",p_l[p_l.DAILY=4]="DAILY",p_l[p_l.GUILD=5]="GUILD",function(e){e[e.FAIL=0]="FAIL",e[e.RUNNING=1]="RUNNING",e[e.COMPLETE=2]="COMPLETE"}(TaskState=TaskState||{});var p_p=function(){function e(){this._allAcceptVos=[]}return e.prototype.init=function(e){if(e&&0!=e.length){var p_l;for(var p_g in this._allAcceptVos.length=0,this._mainVo=null,e)(p_l=new TaskVo).update(e[p_g]),this._allAcceptVos.push(p_l);this._mainVo=this.getNextMainTask()}},e.prototype.getCurTaskVo=function(){for(var e in this._allAcceptVos)if(this._allAcceptVos[e].type===TaskType.FB)return this._allAcceptVos[e];return this._mainVo?this._mainVo:null},e.prototype.addAcceptTask=function(e,p_l){for(var p_g in void 0===p_l&&(p_l=!0),this._allAcceptVos)if(this._allAcceptVos[p_g].id==e.id)return;this._allAcceptVos.push(e),Config.task_task[e.id].type==TaskType.MAIN&&(this._mainVo=this.getNextMainTask()),SystemNoticeManager.instance.checkSysOpen(),LED.event(l_r.TASK_ACCEPT,e.id)},e.prototype.getNextMainTask=function(){for(var e=-1,p_l=1/0,p_g=0;p_g<this._allAcceptVos.length;++p_g){var b_s=this._allAcceptVos[p_g];b_s.type===TaskType.MAIN&&b_s.id<p_l&&(p_l=b_s.id,e=p_g)}return 0<=e?this._allAcceptVos[e]:null},e.prototype.getTaskVoByid=function(e){if(this._mainVo&&this._mainVo.id==e)return this._mainVo;for(var p_l in this._allAcceptVos)if(this._allAcceptVos[p_l].id==e)return this._allAcceptVos[p_l];return null},e.prototype.removeAcceptTask=function(e){this._mainVo&&this._mainVo.id==e&&(this._mainVo=null);for(var p_l=this._allAcceptVos.length,p_g=0;p_g<p_l;p_g++)if(this._allAcceptVos[p_g].id==e){this._allAcceptVos.splice(p_g,1);break}this._mainVo||(this._mainVo=this.getNextMainTask())},e.prototype.updateTask=function(e,p_l,p_g){return Icn(e,p_l,p_g,this,LED,l_r)},e.prototype.givenupAllFbTask=function(){for(var e in this._allAcceptVos)Config.task_task[this._allAcceptVos[e].id].type==TaskType.FB&&this.reqGiveupTask(this._allAcceptVos[e].id)},Object.defineProperty(e.prototype,"mainVo",{get:function(){return this._mainVo},enumerable:!0,configurable:!0}),e.prototype.getMainTaskState=function(){return this._mainVo?this._mainVo.state:TaskState.RUNNING},e.prototype.checkIsFinish=function(e){return!(0<e&&this._mainVo)||this._mainVo.id>e},e.prototype.reqInitTask=function(){var e=new c2m_task_accepted;DB.instance.query(c2m_task_accepted,e)},e.prototype.getWhichTask=function(e){return this.initTaskCfg(),this._taskCfg[e]?this._taskCfg[e]:1},e.prototype.reqGiveupTask=function(e){void 0===e&&(e=0);var p_l=new c2m_task_giveup;p_l.taskId=e,DB.instance.query(c2m_task_giveup,p_l)},e.prototype.reqFinishTask=function(e){void 0===e&&(e=0);var p_l=new c2m_task_finish;p_l.taskId=e,p_l.gold=0,p_l.multi=1,DB.instance.query(c2m_task_finish,p_l)},e.prototype.reqTaskFinishToDo=function(e){var p_l=new c2m_task_hand_finishdo;p_l.taskId=e,DB.instance.query(c2m_task_hand_finishdo,p_l)},e.prototype.onWhichTask=function(e){GPlatform.isWanba&&TaskDefine.openWbCollectID==this.getWhichTask(e)&&ShareMgr.ins.canShowWanbaCollectIcon&&UI.WanbaCollectPanel.open()},e.prototype.formatMainTaskContent=function(){if(this._mainVo){var e=Config.task_task[this._mainVo.id],p_l="";if(this._mainVo.state===TaskState.COMPLETE?(p_l+=e.inProgressDesc,p_l+=Utils.setSpace()+Utils.setColor(("("+j_x("1917_402")+")"),"#00FF00")):(p_l+=e.inProgressDesc,p_l+=Utils.setSpace()+Utils.$("({1}/{2})",this._mainVo.mainProVo.progress,this._mainVo.mainProVo.target)),p_l+="<br>",e.rewardItem){var p_g="";for(var b_s in e.rewardItem){var d_u=e.rewardItem[b_s][0];p_g=d_u<100?Config.item_coin[d_u].minIcon:Config.CItem(e.rewardItem[b_s][0]).icon,p_g=Resource.ResUrl.getIconUrl(p_g),p_l+=p_g=Utils.setImg(p_g,26,26)+Utils.setColor("x"+e.rewardItem[b_s][1]+Utils.setSpace(2),"#71de66")}}return p_l}return""},e.prototype.reqAccpetTask=function(e,p_l){void 0===p_l&&(p_l=0);var p_g=new c2m_task_accept;p_g.taskType=e,p_g.taskId=p_l,DB.instance.query(c2m_task_accept,p_g)},e.prototype.initTaskCfg=function(){if(!this._taskCfg){var e,p_l=1;for(var p_g in this._taskCfg={},Config.task_task)e=Config.task_task[p_g],this._taskCfg[e.id]=p_l,p_l++}},e.instance=new e,e}(),TaskManager=function(){function e(){this._lastComplete=-1}return e.prototype.onSceneChange=function(){Swv(this)},e.prototype.delayToAuto=function(){Eju(Laya,this)},e.prototype.onTaskInited=function(){this._isTaskInit=!0,0<this._dramId&&(b_p.playDrama(this._dramId),this._dramId=-1),LED.event(l_r.TASK_INIT_INFO),Laya.timer.once(500,UIM.instance,UIM.instance.setHideActivityBox)},Object.defineProperty(e.prototype,"isTaskInit",{get:function(){return this._isTaskInit},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dramaId",{set:function(e){this._dramId=e},enumerable:!0,configurable:!0}),e.prototype.finishHangupPoint=function(){var e=p_p.instance.mainVo;if(e){if(e.state===TaskState.COMPLETE)return;var p_l=Config.task_task[e.id].need;if(p_l&&"hangupAim"!=p_l[0][0]||p_l[0][2]!=b_p.mapID)return;var p_g=new c2m_hangup_aim;DB.instance.query(c2m_hangup_aim,p_g)}},e.prototype.checkAutoTask=function(){n_m.instance.hangUping&&n_m.instance.stop(),this.canAutoTask()&&(this.autoDoTask(),Config.map[b_p.mapID].dynamic!=b_p.DYNAMIC||n_m.instance.hangUping||n_m.instance.startAuto())},Object.defineProperty(e.prototype,"isAutoTask",{get:function(){return this._isAutoTask},set:function(e){this._isAutoTask!=e&&(this._isAutoTask=e)&&this.autoDoTask()},enumerable:!0,configurable:!0}),e.prototype.autoDoTask=function(){var e=p_p.instance.getCurTaskVo();e&&(this.continueDoTask(e.id)||n_m.instance.hangUping||this.accpetTaskToDo(e.id))},e.prototype.accpetTaskToDo=function(e,p_l){if(void 0===p_l&&(p_l=!1),this.canAutoTask(e)||p_l){var p_g=Config.task_task[e].inProgreeDoList;if(!p_g||0===p_g.length)return;for(var b_s in p_g)this.taskMsgTxtLink(p_g[b_s])}},e.prototype.finishTaskToDo=function(e){var p_l=p_p.instance.mainVo;if(this._lastComplete=e,p_l&&p_l.id===e){var p_g=UIM.instance.getMainLetUI();p_g&&p_g.finishTaskFadeOut()}var b_s=Config.task_task[e].finishkDo;if(b_s&&0<b_s.length&&this.finishTasLink(e,b_s),this.canAutoTask(e)){var d_u=Config.task_task[e].next;d_u&&0<d_u&&Laya.timer.once(800,this,this.onDelayAccpetTask,[d_u])}this.preLoadRes(e)},e.prototype.onDelayAccpetTask=function(e){Yjk(e,p_p)},e.prototype.canAutoTask=function(e){if(void 0===e&&(e=-1),-1!==e){var p_l=Config.task_task[e];if(Config.map[b_p.mapID].dynamic==b_p.DYNAMIC&&p_l.type===TaskType.MAIN)return!1}if(this._isAutoTask)return!0;var p_g=Config.map[b_p.mapID];return p_g&&!!p_g.autoTask},e.prototype.acceptFadeOut=function(e){var p_l=p_p.instance.mainVo;if(p_l&&p_l.id===e){var p_g=UIM.instance.getMainLetUI();p_g&&p_g.acceptTaskFadeOut()}},e.prototype.finishTasLink=function(e,p_l){if(p_l){var p_g=p_l[0];if(0<p_l[2])switch(p_g){case"transfer":p_p.instance.reqTaskFinishToDo(e)}else switch(p_g){case"drama":b_p.playDrama(p_l[1])}}},e.prototype.taskMsgTxtLink=function(e){if(e&&""!=e){var p_l=e.split(":"),p_g=p_l[0];switch(p_l=p_l[1].split("|"),p_g){case"monster":var b_s=parseInt(p_l[2]),d_u=parseInt(p_l[3]),b_e=new Engine2d.PathEndAction(Engine2d.PathEndActionType.HANG_UP);Engine2d.Hero.local?Engine2d.Hero.local.clickMap(b_s,d_u,b_e):Laya.timer.once(1e3,this,this.taskMsgTxtLink,[e],!0);break;case"npc":parseInt(p_l[0]);break;case"transfer":case"point":var d_m=parseInt(p_l[0]);b_s=parseInt(p_l[1]),d_u=parseInt(p_l[2]),d_m!=b_p.mapID||Engine2d.Hero.local.clickMap(b_s,d_u);break;case"openWin":var d_w=parseInt(p_l[0]),f_t=parseInt(p_l[1]),v_z=Config.window[p_l[0]];if(v_z.funcID){var d_h=Config.funcOpen[v_z.funcID];if(d_h.openError&&!p_k.instance.checkSystemOpen(v_z.funcID))return void b_p.broadcastNotice(d_h.openError)}UI.WindowClass.openWin(d_w,0<=f_t?[f_t]:null);break;case"dramaId":var r_t=parseInt(p_l[0]);b_p.playDrama(r_t);break;case"acceptydo":case"acceptdo":case"acceptDo":var t_n=parseInt(p_l[0]);DB.instance.query(c2m_task_hand_acceptdo,{taskId:t_n})}}},e.prototype.continueDoTask=function(e){if(void 0===e&&(e=-1),this.canAutoTask(e)||-1==e){var p_l=-1===e?p_p.instance.mainVo:p_p.instance.getTaskVoByid(e);if(p_l&&p_l.state===TaskState.COMPLETE)return p_p.instance.reqFinishTask(p_l.id),!0;if(p_l)return this.accpetTaskToDo(p_l.id,!0),!0}return!1},e.prototype.accpetTaskToDoLink=function(e){var p_l=Config.task_task[e].acceptDo;p_l&&0!==p_l.length&&this.finishTasLink(e,p_l)},e.prototype.preLoadRes=function(e){var p_l=Resource.ResManager.Instance.getPreLoadRes("finishTask",e);p_l&&Laya.loader.load(p_l,null,null,null)},e.instance=new e,e}(),TaskDefine=function(){function e(){}return e.openWbCollectID=13,e}(),BaseAchievement=function(){function e(){}return e.prototype.canGain=function(){var e=Config.achievement_achievement[this.achId];return!!e&&this.progress1>=e.condition[1]},e}(),AchievementModel=function(){function e(){this._achievementList=[],this._oneKeyReward=[]}return Object.defineProperty(e.prototype,"achievementList",{get:function(){return this._achievementList},enumerable:!0,configurable:!0}),e.sortAch=function(e,p_l){var p_g=Config.achievement_achievement[e.achId],b_s=Config.achievement_achievement[p_l.achId];if(p_g.condition[1]<=e.progress1&&b_s.condition[1]>p_l.progress1)return-1;if(p_g.condition[1]>e.progress1&&b_s.condition[1]<=p_l.progress1)return 1;var d_u=Config.achievement_achStart[p_g.type],b_e=Config.achievement_achStart[b_s.type];return d_u.sort<b_e.sort?-1:d_u.sort>b_e.sort?1:-1},e.prototype.reqAchievementInfo=function(){var e=new c2m_achievement_info;DB.instance.query(c2m_achievement_info,e)},e.prototype.pbAchievementFin=function(e){for(var p_l=0,p_g=0,b_s=this._achievementList;p_g<b_s.length;p_g++){if(b_s[p_g].achId==e.achId){this._achievementList.splice(p_l,1);break}++p_l}for(var d_u=p_l=0,b_e=this._oneKeyReward;d_u<b_e.length;d_u++){if(b_e[d_u]==e.achId){this._oneKeyReward.splice(p_l,1);break}++p_l}LED.event(l_r.ACHIEVEMENT_INFO_UPDATE)},e.prototype.pbAchievementUpdate=function(e){for(var p_l=!1,p_g=0,b_s=this._achievementList;p_g<b_s.length;p_g++){var d_u;if((d_u=b_s[p_g]).achId==e.info.achId){d_u.progress1=e.info.progress1,p_l=!0;break}}p_l||Config.achievement_achievement[e.info.achId]&&((d_u=new BaseAchievement).achId=e.info.achId,d_u.progress1=e.info.progress1,this._achievementList.push(d_u)),this.reqAchievementFin(this._oneKeyReward[0]),LED.event(l_r.ACHIEVEMENT_INFO_UPDATE)},e.prototype.pbAchievementInfo=function(e){if(this._achievementList=[],e.achList)for(var p_l=0,p_g=e.achList;p_l<p_g.length;p_l++){var b_s=p_g[p_l];if(Config.achievement_achievement[b_s.achId]){var d_u=new BaseAchievement;d_u.achId=b_s.achId,d_u.progress1=b_s.progress1,this._achievementList.push(d_u)}}LED.event(l_r.ACHIEVEMENT_INFO_UPDATE)},e.prototype.reqAchievementFin=function(e){var p_l=new c2m_achievement_fin;p_l.achId=e,DB.instance.query(c2m_achievement_fin,p_l)},e.prototype.reqAchievementOnLine=function(){var e=new c2m_achievement_online_check;DB.instance.query(c2m_achievement_online_check,e)},e.prototype.oneKeyReward=function(e){return void 0===e&&(e=10),this.reqAchievementFinAll(),!0},e.prototype.reqAchievementFinAll=function(){var e=new c2m_achievement_fin_all;DB.instance.query(c2m_achievement_fin_all,e)},e.prototype.canGain=function(){return Mzi(this)},e.instance=new e,e}(),TalismanSortType,TalismanSuitState,TalismanModel=function(){function e(){this._isActiveEquip=!1,this._equipAwakenCfg=null,this._sortType=0,this._soulId=0,this._soulStar=0,this._soulLevel=0,this.stoveMax=-1,this.stoverefineMax=0}return Object.defineProperty(e.prototype,"sortType",{get:function(){return this._sortType},enumerable:!0,configurable:!0}),e.prototype.changeSortType=function(e){this._sortType!=e&&(this._sortType=e,this.sortDatas())},e.prototype.getDefaultSort=function(p_l){void 0===p_l&&(p_l=!1);var p_g=e.instance.getTalismanVos(p_l);if(p_g)return p_g.sort(this.compareFun)},e.prototype.compareFun=function(p_l,p_g){if(p_l.state===p_g.state){var b_s=Config.talisman_talisman[p_l.id],d_u=Config.talisman_talisman[p_g.id];switch(e.instance.sortType){case TalismanSortType.DEFAULT:case TalismanSortType.QUALITY:return d_u.quality===b_s.quality?p_g.level===p_l.level?b_s.id-d_u.id:p_g.level-p_l.level:d_u.quality-b_s.quality;case TalismanSortType.LEVEL:return p_g.level===p_l.level?b_s.id-d_u.id:p_g.level-p_l.level;case TalismanSortType.TYPE:return d_u.type===b_s.type?d_u.id-b_s.id:b_s.type-d_u.type;case 5:return b_s.quality===d_u.quality?p_l.level===p_g.level?d_u.id-b_s.id:p_l.level-p_g.level:b_s.quality-d_u.quality}}return p_g.state-p_l.state},e.prototype.updateSuitsData=function(e){if(e){for(var p_l in e){var p_g=this.getSuitVoById(e[p_l].suitId);p_g&&p_g.update(e[p_l].level)}LED.event(l_r.TALISMAN_SUIT_UPDATE)}},e.prototype.updateTalismanList=function(e){if(this.initDatas(),e&&0!=e.length){var p_l;for(var p_g in e)(p_l=this.getTalismanById(e[p_g].id))&&p_l.update(e[p_g],!0);LED.event(l_r.TALISMAN_INFO_UPDATE),LED.event(l_r.HELPER_UPDATE_INFO)}},e.prototype.updateSpeelSlotCount=function(e){return Chi(e,this)},e.prototype.initDatas=function(){if(!this._talisDatas){this._talisDatas=[];var e=void 0,p_l=void 0,p_g=Config.talisman_talisman;for(var b_s in p_g){if((e=new h_k).id=p_g[b_s].id,p_g[b_s].deployment)for(var d_u in p_g[b_s].deployment)(p_l=new TalismanDeploymentVo).id=p_g[b_s].deployment[d_u],p_l.tId=e.id,e.deployments.push(p_l);this._talisDatas.push(e)}}if(!this._suitDatas){this._suitDatas=[];var b_e=void 0,d_m=Config.talisman_suits,d_w=-1;for(var b_s in d_m)d_w!=d_m[b_s].suitId&&(d_w=d_m[b_s].suitId,(b_e=new TalismanSuitVo).suitId=d_w,b_e.configId=d_m[b_s].id,this._suitDatas.push(b_e))}},e.prototype.sortDatas=function(){Oii(this)},e.prototype.updateTalismanFight=function(e,p_l){void 0===p_l&&(p_l=!0)},e.prototype.getFightingDesc=function(e){var p_l=b_p.getPropInfos(Config.talisman_talisman[e].fightProp),p_g=p_l.length,b_s="";for(var d_u in p_l)p_g--,b_s+=Utils.$(("{1}"+j_x("1628_2251")+"{2}"+j_x(932)),p_l[0].desc,p_l[0].value),0<p_g&&(b_s+=";");return b_s},e.prototype.getSuitId=function(e){return Ome(e,this)},e.prototype.updateTalismanInfo=function(e){var p_l=this.getTalismanById(e.id);p_l&&(p_l.update(e),LED.event(l_r.TALISMAN_UP_UPDATE,p_l))},e.prototype.getUpgradeConfig=function(e,p_l){var p_g=Config.talisman_upgrade;for(var b_s in p_g)if(p_g[b_s].talismanId==e&&p_g[b_s].grade==p_l)return p_g[b_s];return null},e.prototype.getTalismanById=function(e){for(var p_l in this.initDatas(),this._talisDatas)if(this._talisDatas[p_l].id==e)return this._talisDatas[p_l];return null},e.prototype.getSuitConfigId=function(e){var p_l=Config.talisman_suits;for(var p_g in p_l){var b_s=p_l[p_g].talisman;for(var d_u in b_s)if(b_s[d_u][0]===e)return p_l[p_g].id}return 0},e.prototype.checkSuitTalismanLv=function(e,p_l){var p_g=this.getTalismanById(e);return!!p_g&&p_g.level>=p_l},e.prototype.updateSuitUpLv=function(e,p_l){var p_g=this.getSuitVoById(e);p_g&&(p_g.update(p_l),LED.event(l_r.TALISMAN_SUIT_UPDATE,p_g))},e.prototype.getThreeDataByCenterId=function(e){var p_l=0,p_g=this.getDefaultSort(!0);if(!p_g||p_g.length<=0)return null;for(var b_s=0;b_s<p_g.length;b_s++)p_g[b_s].id===e&&(p_l=b_s);var d_u=[];for(b_s=-1;b_s<2;b_s++){var b_e=p_l+b_s;p_g[b_e]&&1==p_g[b_e].state&&(b_e<0?b_e=p_g.length-1:b_e>p_g.length-1&&(b_e=0),d_u.push(p_g[b_e]))}return d_u},Object.defineProperty(e.prototype,"talisDatas",{get:function(){return this.initDatas(),this._talisDatas},enumerable:!0,configurable:!0}),e.prototype.getSuitDatas=function(){return Apf(this)},e.prototype.taliSkillDate=function(e){return Qjc(e)},e.prototype.getTalismanRedpoint=function(){for(var p_l=e.instance.getTalismanVos(!0),p_g=1,b_s=0;b_s<p_l.length;++b_s){var d_u=p_l[b_s];if(d_u&&0<d_u.stove&&d_u.stoveRemainTime<=0)return!0;d_u&&0<d_u.stove&&p_g++}return e.instance.getStoves().length>p_g},e.prototype.calPropShieldAdd=function(e){return Ayq(e)},e.prototype.getSuitVoById=function(e){return Qru(e,this)},e.prototype.hasTalismanSuitCanUp=function(){return Czc(p_k,FuncDefine,this)},e.prototype.allEquipNumByStart=function(e,p_l){var p_g=this.getTalismanInBagEquips(e),b_s=0;for(var d_u in p_g)p_g[d_u].dynamic&&""!=p_g[d_u].dynamic&&JSON.parse(p_g[d_u].dynamic)[2].length>=p_l&&b_s++;return b_s},e.prototype.calPropAdd=function(e){return Ozp(e,Config,GlobalDefine)},e.prototype.getPassivedefenSkill=function(e){var p_l=Config.skill_passive_talisman;if(p_l){var p_g=new Array,b_s=void 0;for(var d_u in p_l)if(p_l[d_u].id==e){b_s=p_l[d_u].id;break}for(;b_s==e;)p_g.push(b_s),p_l[b_s=1e3*(Math.floor(b_s/1e3)+1)+1]&&null!=p_l[b_s]||(b_s=-1);return p_g}return null},e.prototype.isAwake=function(e,p_l,p_g){if(!Config.talisman_talisman[e])return!1;if(p_l<=p_g)return!1;var b_s=[],d_u=BagModel.instance.getItemInfosByBagType(BagTypeDefine.BAG_TYPE_TALIS);if(!d_u||d_u.length<=0)return!1;for(var b_e in d_u)if(d_u[b_e].talisID==e){if(!d_u[b_e].dynamic||""==d_u[b_e].dynamic)return!1;b_s.push(d_u[b_e])}if(!(5<=b_s.length))return!1;for(var b_e in b_s)if(JSON.parse(b_s[b_e].dynamic)[2].length<p_l)return!1;return!0},e.prototype.getTalismanInBagEquips=function(e){var p_l={},p_g=BagModel.instance.getItemInfosByBagType(BagTypeDefine.BAG_TYPE_TALIS);for(var b_s in p_g)p_g[b_s].talisID==e&&(p_l[p_g[b_s].place]=p_g[b_s]);return p_l},e.prototype.taliexcDates=function(e){return Ipw(e,this)},e.prototype.allMainRedPoint=function(){var e=this.getTalismanVos();for(var p_l in e){var p_g=this.talismanEquipRedPoint(e[p_l]),b_s=this.redSoul(e[p_l]);if(p_g||b_s)return!0}return!1},e.prototype.comSealFun=function(e,p_l){return e.speeltime===p_l.speeltime?p_l.id-e.id:e.speeltime-p_l.speeltime},e.prototype.canUpLv=function(p_l,p_g){void 0===p_g&&(p_g=0);var b_s=this.getTalismanById(p_l);if(b_s){var d_u=e.instance.getUpgradeConfig(b_s.id,b_s.grade);if(!d_u||0===b_s.level)return!1;var b_e=Config.talisman_talisman[b_s.id];if(b_s.level==d_u.levelUpper&&0==p_g){if(b_s.grade!=b_e.maxGrade&&b_p.checkConsume(d_u.consume))return!0}else if(b_p.checkConsume(Config.talisman_uplevel[b_s.level].consume))return!0}return!1},e.prototype.changeActStar=function(e,p_l,p_g){void 0===p_g&&(p_g=5),p_l=p_l||0;var b_s=p_g,d_u=p_g+1,b_e=e.getChildByName("star0"),d_m=b_e.clipX-1;p_l=p_l-1<0?0:p_l-1;var d_w=Math.floor(p_l/d_u),f_t=p_l%d_u;d_w=d_m<(d_w=d_w<0?0:d_w)?d_m:d_w;for(var v_z=0;v_z<b_s;v_z++)(b_e=e.getChildByName("star"+v_z))&&(b_e.index=v_z<f_t&&0<p_l?d_w:d_w+b_e.clipX)},e.prototype.talismanSuitNum=function(){var e=this.getSuitDatas().concat(),p_l=0;if(e)for(var p_g in e)1==e[p_g].state&&p_l++;return p_l},e.prototype.compareSortSwapFun=function(e,p_l){return e.fight===p_l.fight?e.id-p_l.id:p_l.fight-e.fight},e.prototype.getSpiritItems=function(e){var p_l,p_g=[],b_s=Config.talisman_talisman[e].petSpirit;if(b_s)for(var d_u in b_s){var b_e=b_s[d_u];(p_l=new BagInfoVO).id=b_e,p_l.amount=BagModel.instance.getItemCountByItemID(b_e,BagTypeDefine.BAG_TYPE_ITEM);var d_m=BagModel.instance.getItemById(BagTypeDefine.BAG_TYPE_ITEM,b_e);d_m&&(p_l.uuid=d_m.uuid),p_g.push(p_l)}return p_g},e.prototype.getTalismanSealVos=function(e){if(void 0===e&&(e=!1),this._talisDatas){var p_l=[];for(var p_g in this._talisDatas)e?this._talisDatas[p_g].isActive()&&1==this._talisDatas[p_g].isSpeel()&&p_l.push(this._talisDatas[p_g]):this._talisDatas[p_g].isActive()&&1!=this._talisDatas[p_g].isSpeel()&&p_l.push(this._talisDatas[p_g]);return p_l}return null},e.prototype.talismanIsChangeEquip=function(e){if(!Config.talisman_talisman[e])return!1;for(var p_l=this.getTalismanInBagEquips(e),p_g=BagModel.instance.getItemsByItemType(BagTypeDefine.BAG_TYPE_ITEM,1,4),b_s=1;b_s<=EquipDefine.TalisNum;b_s++){var d_u=0,b_e=-1;p_l[b_s]&&(d_u=p_l[b_s].fighting,(f_t=Config.CItem(p_l[b_s].id))&&(b_e=p_l[b_s].id,f_t.stateLevel));for(var d_m=0,d_w=p_g;d_m<d_w.length;d_m++){var f_t,v_z=d_w[d_m];if((f_t=Config.CItem(v_z.id))&&f_t.mainclass===ItemTypeDefine.EQUIPMENT&&f_t.subclass===EquipSubClassDefine.EquipTalis&&this.checkCanWearEquipByTalisId(e,f_t.id,b_e)&&f_t.place===b_s&&0===EquipModel.instance.canWearEquip(f_t,LgcM.ins.heroVo.entryId)&&v_z.fighting>(d_u||0))return!0}}return!1},e.prototype.hasTalismanSeakCanUp=function(){return Skr(e)},e.prototype.talismanSpeelShow=function(p_l){for(var p_g=e.instance.getTalismanSealArr(),b_s=0;b_s<p_g.length;b_s++)if(p_g[b_s].id===p_l)return!1;return!0},e.prototype.changeStar=function(e,p_l){for(var p_g=1;p_g<=3;p_g++){var b_s=e.getChildByName("star"+p_g);b_s&&(b_s.visible=p_g<=p_l)}},e.prototype.hasSoulRed=function(){return Opg(this)},e.prototype.hasTalismanCan=function(){return Oxc(this)},e.prototype.getFightSwapTalismans=function(e,p_l,p_g,b_s){void 0===p_l&&(p_l=0),void 0===p_g&&(p_g=-1),void 0===b_s&&(b_s=!1);var d_u,b_e,d_m,d_w=[];for(var f_t in this.getTalismanSealArr(!1))d_u=this.getTalismanSealArr(!1)[f_t],d_m=!!b_s||Config.talisman_talisman[d_u.id].type==e,1==d_u.state&&d_m&&d_u.level>=p_l&&((d_u.fightState=0)<p_g&&d_u.id===p_g?b_e=d_u:d_w.push(d_u));return d_w=d_w.sort(this.compareSortSwapFun),b_e&&d_w.unshift(b_e),d_w},e.prototype.canShow=function(e){var p_l=Config.talisman_talisman[e].showCond;if(p_l){if("task"==p_l[0]){var p_g=p_p.instance.mainVo;if(p_g&&p_g.id>parseInt(p_l[1]))return!0}if("item"==p_l[0])return b_p.checkConsume(p_l[1])}return!1},e.prototype.getTalismanIsActive=function(p_l){this.initDatas();var p_g=e.instance.getTalismanVos(!0);if(p_g)for(var b_s in p_g)if(p_g[b_s].id,p_g[b_s].id==p_l)return!0;return!1},e.prototype.getStoves=function(){var e=[],p_l=LgcM.ins.heroVo;if(p_l.tsStove,-1===this.stoveMax){this.stoveMax=0;var p_g=Config.talisman_stove;for(var b_s in p_g)this.stoveMax++}this.stoverefineMax=0;var d_u=this._talisDatas;for(var b_s in d_u)0<this._talisDatas[b_s].stove&&(this.stoverefineMax++,this.stoverefineMax);for(var b_e=0;b_e<p_l.tsStove;b_e++)e.push(b_e+1);return e.length<this.stoveMax&&e.push(-1),e},e.prototype.getLvProps=function(e){var p_l=[];p_l=b_p.getPropInfos([["hpUpper",0],["attack",0],["defense",0],["armorBreak",0]]);var p_g=Config.talisman_talisman[e.id];p_g.clineprop,p_l=b_p.addProps(p_g.clineprop,1,p_l);var b_s=this.getUpgradeConfig(e.id,e.grade);if(b_s){b_s&&b_s.prop,p_l=b_p.addProps(b_s.prop,1,p_l),e.fixedProps,p_l=b_p.addProps(e.fixedProps,1,p_l);var d_u=e.deployProps||[];p_l=b_p.addProps(d_u,1,p_l);var b_e=e.suitPct,d_m=b_p.getPctProps(d_u,null,b_e);p_l=b_p.addProps(d_m,1,p_l);var d_w=e.facilityPcts,f_t=b_p.getPctProps(d_u,d_w);p_l=b_p.addProps(f_t,1,p_l);var v_z=e.blackkingPcts,d_h=b_p.getPctProps(d_u,v_z);p_l=b_p.addProps(d_h,1,p_l);var r_t=e.blackkingProps;p_l=b_p.addProps(r_t,1,p_l);var t_n=e.soulEffs,f_y=b_p.getPctProps(d_u,t_n);return b_p.addProps(f_y,1,p_l)}},e.prototype.getSoulProps=function(e){var p_l=null,p_g=Config.talisman_qihunLevel;for(var b_s in p_g)p_g[b_s].talisman==e&&(p_l=p_g[b_s]);return p_l?p_l.prop:[]},e.prototype.getStrenthCfgByLv=function(e,p_l,p_g){void 0===p_l&&(p_l=1),void 0===p_g&&(p_g=!0);var b_s=this.cfgStrengthId,d_u=0,b_e=b_s.length,d_m=Config.talisman_strengthPart[p_l];if(!d_m)return null;if(e>=d_m.maxLV)return p_g?Config.talisman_strength[this.cfgStrengthId[b_e]]:null;for(;d_u<=b_e;){var d_w=Math.floor((d_u+b_e)/2);e>=b_s[d_w]?d_u=d_w+1:b_e=d_w-1}return Config.talisman_strength[b_s[d_u-1]]},e.prototype.canTalismanSkillUpLv=function(p_l){var p_g=Config.talisman_talisman[p_l];if(p_g){var b_s=void 0;if(2==p_g.type&&(b_s=e.instance.getPassiveSkill(p_g.skill[0])),1==p_g.type&&(b_s=e.instance.getPassivedefenSkill(p_g.skill[0])),b_s)for(var d_u in b_s)if(this.canSkillUpLv(b_s[d_u],p_l))return!0}return!1},e.prototype.countEquipFight=function(e){for(var p_l=0,p_g=0,b_s=BagModel.instance.getItemsByItemType(BagTypeDefine.BAG_TYPE_TALIS,1,4);p_g<b_s.length;p_g++){var d_u=b_s[p_g];if(d_u.talisID==e){var b_e=Config.CItem(d_u.id);if(!b_e||b_e.mainclass!==ItemTypeDefine.EQUIPMENT||b_e.subclass!==EquipSubClassDefine.EquipTalis)continue;p_l+=d_u.fighting}}return p_l},e.prototype.getTalismanVos=function(e){if(void 0===e&&(e=!1),this._talisDatas){var p_l=[];for(var p_g in this._talisDatas)e?this._talisDatas[p_g].isActive()&&1!=this._talisDatas[p_g].speel&&p_l.push(this._talisDatas[p_g]):!this._talisDatas[p_g].isActive()&&3!==this._talisDatas[p_g].state&&-1!==this._talisDatas[p_g].state||1==this._talisDatas[p_g].speel||p_l.push(this._talisDatas[p_g]);return p_l}return null},e.prototype.canSkillUpLv=function(p_l,p_g){var b_s=Config.skill_passive_talisman[p_l],d_u=e.instance.getTalismanVosingle(p_g),b_e=SkillModel.instance.getPassiveVo(p_l,PassiveSkillType.TALISMAN);return!!(b_e&&d_u&&b_e.level<b_s.maxLevel&&(b_s=Config.skill_passive_talisman[p_l+b_e.level-1]).consume&&b_p.checkConsume(b_s.consume))},e.prototype.getTalismanVobool=function(p_l){this.initDatas();var p_g=e.instance.getTalismanVos();if(p_g)for(var b_s in p_g)if(p_g[b_s].id,1==p_g[b_s].state&&p_g[b_s].id==p_l)return!0;return!1},e.prototype.talismanCanReward=function(e){if(e){if(3===e.state)return!0;if(1===e.state){if(this.canUpLv(e.id))return!0;if(e.canDeloyCanUp())return!0}}return!1},e.prototype.getspeelSlotCount=function(){return Gfw(this)},e.prototype.talismanEquipRedPoint=function(e){return Kob(e,p_k,this)},e.prototype.getTalismanVo=function(e){return Eyw(e,this)},e.prototype.getTalismanVoByStove=function(e){for(var p_l in this._talisDatas,this._talisDatas)if(this._talisDatas[p_l].stove==e)return this._talisDatas[p_l];return null},e.prototype.calPropHpAdd=function(e){return Ieo(e,Config,GlobalDefine)},e.prototype.canDeployUp=function(p_l,p_g){var b_s=e.instance.getTalismanById(p_l);if(!b_s)return!1;var d_u=b_s.getDeloyVo(p_g);if(!d_u||d_u.level>=b_s.maxLv)return!1;var b_e=Config.talisman_deployment[d_u.id],d_m=e.instance.getUpgradeConfig(d_u.tId,b_s.grade).depLvUpper<=d_u.level;return 0<b_e.exp&&b_s.deployExp>=b_e.exp&&!d_m||!(!b_e.consume||!b_p.checkConsume(b_e.consume)||d_m)},e.prototype.hasTalismanCanReward=function(){var e=this.getTalismanVos(!1);if(e)for(var p_l in e){if(3===e[p_l].state)return!0;if(1===e[p_l].state){if(this.canUpLv(e[p_l].id))return!0;if(e[p_l].canDeloyCanUp())return!0}}return!1},e.prototype.singHasTalismanCan=function(e){var p_l=this.getDefaultSort();if(p_l)for(var p_g in p_l)if(p_l[p_g].id==e&&3===p_l[p_g].state)return p_l[p_g]},e.prototype.getTalismanSealArr=function(p_l){void 0===p_l&&(p_l=!0);var p_g=this.getTalismanSealVos(p_l);return p_g&&1==p_l?p_g.sort(this.comSealFun):(e.instance.changeSortType(this.sortType),p_g.sort(this.compareFun))},e.prototype.getTalismanVosingleupdate=function(e,p_l,p_g,b_s){var d_u;void 0===e&&(e=0),void 0===p_l&&(p_l=0),void 0===p_g&&(p_g=0),void 0===b_s&&(b_s=null);var b_e=this._talisDatas;for(var d_m in b_e)(d_u=b_e[d_m])&&d_u.id==e&&(d_u.skillExp=p_l,d_u.deployExp=p_g)},e.prototype.getPassiveSkill=function(e){var p_l=Config.skill_passive_talisman;if(p_l){var p_g=new Array,b_s=void 0;for(var d_u in p_l)if(p_l[d_u].id==e){b_s=p_l[d_u].id;break}for(;b_s==e;)p_g.push(b_s),p_l[b_s=1e3*(Math.floor(b_s/1e3)+1)+1]&&null!=p_l[b_s]||(b_s=-1);return p_g}return null},e.prototype.getSoulEff=function(e,p_l){var p_g=null,b_s=Config.talisman_qihunStar;for(var d_u in b_s)b_s[d_u].talismanId==e&&b_s[d_u].star==p_l&&(p_g=b_s[d_u]);return p_g?p_g.effect:[]},e.prototype.calDeploymentsApt=function(e){if(e){var p_l=0;for(var p_g in e)p_l+=e[p_g].calAptitude();return p_l}return 0},e.prototype.canActive=function(e){var p_l=Config.talisman_talisman[e].activeCond;if(p_l){if("task"==p_l[0]){var p_g=p_p.instance.mainVo;if(!p_g||p_g.id<=parseInt(p_l[1]))return!1}if("item"==p_l[0])return b_p.checkConsume(p_l[1])}return!0},e.prototype.getTalismanVosingle=function(p_l){this.initDatas();var p_g=e.instance.getTalismanVos();if(p_g)for(var b_s in p_g)if(p_g[b_s].id,p_g[b_s].id==p_l)return p_g[b_s];return null},e.prototype.canWearEquipTalisNum=function(){var e=this.getTalismanVos(!0),p_l={};for(var p_g in e){var b_s=Config.talisman_talisman[e[p_g].id],d_u=p_l[b_s.quality]||0;100<=e[p_g].level&&(p_l[b_s.quality]=d_u++)}return p_l},e.prototype.getAttrByLv=function(e,p_l,p_g){void 0===p_g&&(p_g=!0);var b_s=[],d_u=this.getStrenthCfgByLv(e,p_l,p_g),b_e=Config.talisman_strengthPart[p_l];if(!b_e)return b_s;if(d_u){var d_m="",d_w="",f_t=0;for(var v_z in b_e.attr)f_t=0,f_t=d_u[d_w=(d_m=b_e.attr[v_z])+"Add"]?d_u[d_w]:0,f_t+=(d_u[d_m]?d_u[d_m]:0)*(e-d_u.id+1),b_s.push([d_m,f_t])}return CharacterProperty.getPropertys(b_s)},Object.defineProperty(e.prototype,"cfgStrengthId",{get:function(){if(!this._cfgStrength)for(var e in this._cfgStrength=[],Config.talisman_strength)this._cfgStrength.push(Config.talisman_strength[e].id);return this._cfgStrength},enumerable:!0,configurable:!0}),e.prototype.countStrenthFight=function(e){var p_l=0;for(var p_g in e.strength)e.strength[p_g]&&(p_l+=b_p.calPropFight(this.getAttrByLv(e.strength[p_g],parseInt(p_g)+1)));return p_l},e.prototype.reqActiveTalisman=function(e){var p_l=new c2m_talisman_active;p_l.id=e,DB.instance.query(c2m_talisman_active,p_l)},e.prototype.reqTalismanUpLv=function(e){var p_l=new c2m_talisman_uplevel;p_l.id=e,DB.instance.query(c2m_talisman_uplevel,p_l)},e.prototype.getSoulStarArr=function(e){var p_l=[],p_g=Config.talisman_qihunStar;for(var b_s in p_g)p_g[b_s].talismanId==e&&p_l.push(p_g[b_s].star);return p_l},e.prototype.getBasePropById=function(e){return e?e.deployProps:[]},e.prototype.reqEquipWear=function(e,p_l){var p_g=new c2m_talisman_wear;p_g.tsId=e,p_g.uuid=p_l,DB.instance.query(c2m_talisman_wear,p_g)},e.prototype.reqTalismanUpgrade=function(e){var p_l=new c2m_talisman_upgrade;p_l.id=e,DB.instance.query(c2m_talisman_upgrade,p_l)},e.prototype.resetEffectPos=function(e,p_l,p_g,b_s){if(void 0===p_g&&(p_g=200),void 0===b_s&&(b_s=200),p_l){p_l.off(Laya.Event.LOADED,this,this.resetEffectPos);var d_u=0===e.width?p_g:e.width,b_e=0===e.height?b_s:e.height;p_l.x=e.x+(d_u-p_l.width>>1),p_l.y=e.y+(b_e-p_l.height>>1)}},e.prototype.getSoulLvLmtArr=function(e){var p_l=[],p_g=Config.talisman_qihunStar;for(var b_s in p_g)p_g[b_s].talismanId==e&&p_l.push(p_g[b_s].lvLmt+1);return p_l},e.prototype.redSoul=function(p_l){e.instance.getSoulConsume(p_l.id,2);var p_g=p_l.qihunLevel,b_s=(p_l.qihunStar,e.instance.getSoulConsume(p_l.id,p_g+1)),d_u=e.instance.getSoulMaxLevel(p_l.id),b_e=e.instance.getSoulLvLmtArr(p_l.id),d_m=p_l.qihunStar+1,d_w=p_g+1,f_t=e.instance.isCanUpSoul(b_s[0],d_w,p_l.id)&&e.instance.isCanUpSoulInCoin(b_s[1],d_w,p_l.id)&&p_g<=d_u-1&&b_e.indexOf(d_w)+1!=p_l.qihunStar,v_z=e.instance.getActivateSoulConsume(p_l.id,d_m),d_h=e.instance.getSoulStarCfg(p_l.id,d_m),r_t=!1;if(d_h&&(r_t=p_l.level>=d_h.fbLevel,0==p_g))return r_t&&e.instance.isCanStrength(v_z);var t_n=e.instance.isCanActivateSoul(v_z)&&r_t&&-1!=b_e.indexOf(d_w)&&b_e.indexOf(d_w)+1==p_l.qihunStar;return f_t||t_n},e.prototype.isCanUpSoulInCoin=function(e,p_l,p_g){if(!e||e.length<=0)return!1;var b_s=null,d_u=Config.talisman_qihunLevel;for(var b_e in d_u)d_u[b_e].talisman==p_g&&(b_s=d_u[b_e]);var d_m=LgcM.ins.heroVo.copper,d_w=b_s.consumeUp[1];return e[1]+d_w*p_l<=d_m},e.prototype.getAwakenCfg=function(e,p_l){if(!this._equipAwakenCfg)for(var p_g in this._equipAwakenCfg={},Config.talisman_awaken){var b_s=10*Config.talisman_awaken[p_g].tsId+Config.talisman_awaken[p_g].star;this._equipAwakenCfg[b_s]=Config.talisman_awaken[p_g]}var d_u=10*e+p_l;return this._equipAwakenCfg[d_u]},e.prototype.reqTalimanStoveRefineStop=function(e){var p_l=new c2m_talisman_refine_stop;p_l.stove=e,DB.instance.query(c2m_talisman_refine_stop,p_l)},e.prototype.isCanUpSoul=function(e,p_l,p_g){if(!e||e.length<=0)return!1;var b_s=null,d_u=Config.talisman_qihunLevel;for(var b_e in d_u)d_u[b_e].talisman==p_g&&(b_s=d_u[b_e]);var d_m=BagModel.instance.getItemCountByItemID(e[0],BagTypeDefine.BAG_TYPE_ITEM),d_w=b_s.consumeUp[0];return e[1]+d_w*p_l<=d_m},e.prototype.getProListByPartition=function(e,p_l){var p_g=new StrengPropInfo,b_s=[];if(!e)return b_s;var d_u=0;e.strength&&(d_u=e.strength[p_l-1]);var b_e=this.getTalismanEquipSPropById(e.id,p_l),d_m=this.getAttrByLv(d_u+1,p_l,!1);if(b_e&&0<b_e.length)for(var d_w=0;d_w<b_e.length;d_w++)(p_g=new StrengPropInfo).nowProp=b_e[d_w],d_m&&(p_g.nextProp=d_m[d_w]),b_s.push(p_g);else(p_g=new StrengPropInfo).nowProp=CharacterProperty.getPropertys([["attack",0]])[0],d_m&&(p_g.nextProp=d_m[0]),b_s.push(p_g);return b_s},e.prototype.onUpStarTalismanSoul=function(e){Isu(e,this,LED,l_r)},e.prototype.reqEquipStrength=function(e,p_l){var p_g=new c2m_talisman_strength;p_g.tsId=e,p_g.part=p_l,DB.instance.query(c2m_talisman_strength,p_g)},e.prototype.getTalismanEquipSPropById=function(p_l,p_g){var b_s=e.instance.getTalismanById(p_l);if(b_s){var d_u=b_s.strength[p_g-1];if(d_u)return this.getAttrByLv(d_u,p_g)}return[]},e.prototype.getLowStrengthPart=function(e){var p_l=1;if(e){for(var p_g=1e11,b_s=0;b_s<EquipDefine.TalisNum;b_s++)e.strength[b_s]?p_g>e.strength[b_s]&&(p_l=b_s+1,p_g=e.strength[b_s]):(p_l=b_s+1,p_g=0);e.strength.length<=0&&(p_l=1)}return p_l},e.prototype.getStrengthConsume=function(e,p_l){var p_g=[],b_s=Config.talisman_strengthPart[p_l];if(!b_s)return p_g;if(e>=b_s.maxLV)return null;var d_u=0,b_e=b_s.addCost,d_m={};if(b_e&&0<b_e.length){for(var d_w in b_e)d_u=b_e[d_w][1]*e,d_m[b_e[d_w][0]]=d_u;for(var d_w in d_u=0,b_s.baseCost)d_u=b_s.baseCost[d_w][1],d_m[b_s.baseCost[d_w][0]]?d_m[b_s.baseCost[d_w][0]]+=d_u:d_m[b_s.baseCost[d_w][0]]=d_u;for(var d_w in d_m)p_g.push([parseInt(d_w),d_m[d_w]])}else p_g=b_s.baseCost;return p_g},e.prototype.getActVoByType=function(e){var p_l=this._talisDatas,p_g=[];for(var b_s in p_l){var d_u=Config.talisman_talisman[p_l[b_s].id];for(var b_e in e)d_u.proType==e[b_e]&&p_l[b_s].isActive()&&p_g.push(p_l[b_s])}return p_g},e.prototype.reqTalismanEquipActive=function(){var e=new c2m_talisman_equip_active;DB.instance.query(c2m_talisman_equip_active,e)},e.prototype.setProp=function(e,p_l,p_g,b_s,d_u,b_e,d_m){void 0===p_g&&(p_g="<br>"),void 0===b_s&&(b_s=["#b4fbf2"]),void 0===d_u&&(d_u=0),void 0===b_e&&(b_e="&nbsp;+"),void 0===d_m&&(d_m=!1);var d_w,f_t="",v_z=b_s[0];b_p.calsulate(LgcM.ins.heroVo.fight);var d_h=b_s[1]?b_s[1]:b_s[0];for(var r_t in p_l){var t_n=0;for(var f_y in p_l[r_t]){t_n+=1,d_w=p_l[r_t][f_y];var p_q=d_v.getPropertyType(d_w.propOrdinal),h_h=Utils.setColor(p_q.desc+b_e,v_z),n_j="";if(1<parseInt(r_t))if(p_q.isPercent())n_j=Utils.$("{1}%",d_v.getValue(d_w.propOrdinal,d_w.value));else{var j_l=d_m?b_p.calsulate(d_w.value):d_w.value;n_j=Utils.$("{1}",j_l)}else n_j=p_q.isPercent()?Utils.$("{1}%",d_v.getValue(d_w.propOrdinal,d_w.value)):Utils.$("{1}%",d_w.value/100);f_t+="<br>"!=p_g&&0!=d_u&&t_n%d_u==0?Utils.$("{1}{2}{3}",h_h,Utils.setColor(n_j,d_h),"<br>"):Utils.$("{1}{2}{3}",h_h,Utils.setColor(n_j,d_h),p_g)}}return e.innerHTML=f_t,e.height=e.contextHeight,f_t},e.prototype.onActiveTalismanEquip=function(p_l){Kda(p_l,e,b_p,j_x,LED,l_r)},e.prototype.onActiveTalismanSoul=function(e){Uuy(e,this,b_p,j_x,LED,l_r)},e.prototype.getSoulCfg=function(e){var p_l=null,p_g=Config.talisman_qihunLevel;for(var b_s in p_g)p_g[b_s].talisman==e&&(p_l=p_g[b_s]);return p_l},e.prototype.getSoulConsume=function(e,p_l){return Apa(e,p_l,Config)},e.prototype.talisEquipPropIsActiveById=function(e,p_l){void 0===p_l&&(p_l=0);var p_g=Config.talisman_variation[e];if(!p_g)return!1;var b_s=this.getTalismanById(p_l);return!!b_s&&b_s.id==p_g.tsId},e.prototype.reqTalismanSetFight=function(e){var p_l=new c2m_talisman_setfight;p_l.id=e,DB.instance.query(c2m_talisman_setfight,p_l)},e.prototype.getActivateSoulConsume=function(e,p_l){var p_g=Config.talisman_qihunStar;for(var b_s in p_g)if(p_g[b_s].talismanId==e&&p_g[b_s].star==p_l)return p_g[b_s].consume;return null},e.prototype.reqTalismanSpell=function(e,p_l){var p_g=new c2m_talisman_speel;p_g.tsId=e,p_g.status=p_l,DB.instance.query(c2m_talisman_speel,p_g)},e.prototype.countAwakenFight=function(e){for(var p_l=0,p_g=BagModel.instance.getItemsByItemType(BagTypeDefine.BAG_TYPE_TALIS,1,4),b_s=1;b_s<=e.awakenTimes;b_s++){var d_u=this.getAwakenCfg(e.id,b_s);if(d_u&&(d_u.attr&&(p_l+=b_p.calPropFight(CharacterProperty.getPropertys(d_u.attr))),d_u.attrPct))for(var b_e=0,d_m=p_g;b_e<d_m.length;b_e++){var d_w=d_m[b_e];if(d_w.talisID==e.id){var f_t=Config.CItem(d_w.id);if(!f_t||f_t.mainclass!==ItemTypeDefine.EQUIPMENT||f_t.subclass!==EquipSubClassDefine.EquipTalis)continue;if(d_u.attrPct){var v_z=[];for(var d_h in d_u.attrPct)v_z.push([d_u.attrPct[d_h][0],d_u.attrPct[d_h][1]]);if(d_w.dynamic&&""!=d_w.dynamic){var r_t=JSON.parse(d_w.dynamic);r_t&&0<=r_t[2].length&&(p_l+=b_p.calPropFight(CharacterProperty.getPropertys(r_t[2]),v_z))}p_l+=b_p.calPropFight(CharacterProperty.getPropertys(f_t.basePropFixed),v_z)}}}}return p_l},e.prototype.reqTalismanEngulf=function(e,p_l){var p_g=new c2m_talisman_engulf;p_g.id=e,p_g.uuid=p_l,DB.instance.query(c2m_talisman_engulf,p_g)},e.prototype.checkCanWearEquipByTalisId=function(e,p_l,p_g,b_s){void 0===b_s&&(b_s=!1);var d_u=Config.talisman_talisman[e],b_e=Config.CItem(p_l),d_m=Config.CItem(p_g);return b_e&&d_u&&d_u.quality>=b_e.quality?!(d_m&&d_m.stateLevel>b_e.stateLevel&&(b_s&&b_p.broadcastNotice((j_x("2462_1919_2407")+j_x("1086_990_1327")+j_x("711_1009_1968")+j_x("381_843_15")+j_x("2342_2427_2046")+j_x("1009_1968"))),1)):(b_s&&b_p.broadcastNotice((j_x("2462_1919_2407")+j_x("1086_990_799")+j_x("869_415_1621")+j_x("2427_2046_1009")+j_x(1968))),!1)},e.prototype.reqBuySPell=function(){var e=new c2m_talisman_buy_speel_slot;DB.instance.query(c2m_talisman_buy_speel_slot,e)},e.prototype.getTalisEquipByPart=function(e,p_l,p_g,b_s){void 0===p_l&&(p_l=1),void 0===p_g&&(p_g=null),void 0===b_s&&(b_s=0);for(var d_u=Config.talisman_talisman[b_s],b_e=[],d_m=0,d_w=BagModel.instance.getItemsByItemType(p_l,1,4);d_m<d_w.length;d_m++){var f_t=d_w[d_m],v_z=Config.CItem(f_t.id);if(v_z&&v_z.mainclass===ItemTypeDefine.EQUIPMENT){var d_h=v_z;if(d_h.place===e){if(d_u){if(d_u.quality<d_h.quality)continue;if(p_g){if(p_g.fighting>f_t.fighting)continue;var r_t=Config.CItem(p_g.id);if(r_t&&r_t.stateLevel>d_h.stateLevel)continue}}b_e.push(f_t)}}}return b_e},e.prototype.reqTalismanList=function(){var e=new c2m_talisman_list;DB.instance.query(c2m_talisman_list,e)},e.prototype.onUpLevelTalismanSoul=function(e){Qwr(e,this,LED,l_r)},e.prototype.getLowStrengthConsume=function(e){if(!e)return null;if(!Config.talisman_talisman[e.id]||e.level<100)return null;if(e){for(var p_l=1e11,p_g=1,b_s=0;b_s<EquipDefine.TalisNum;b_s++)e.strength[b_s]?p_l>e.strength[b_s]&&(p_g=b_s+1,p_l=e.strength[b_s]):(p_g=b_s+1,p_l=0);var d_u=e.strength[p_g-1]||0;return this.getStrengthConsume(d_u,p_g)}return null},e.prototype.reqAllEquipWear=function(e){var p_l=this.getTalismanInBagEquips(e),p_g=BagModel.instance.getItemsByItemType(BagTypeDefine.BAG_TYPE_ITEM,1,4);if(!p_g||p_g.length<=0)b_p.broadcastNotice((j_x("1749_1327_711")+j_x("1971_1896_1163")+j_x("2407_1086_2046")+j_x("1761_415")));else{for(var b_s={},d_u=0,b_e=1;b_e<=EquipDefine.TalisNum;b_e++){var d_m=0,d_w=-1;p_l[b_e]&&(d_m=p_l[b_e].fighting,(d_h=Config.CItem(p_l[b_e].id))&&(d_w=p_l[b_e].id,d_h.stateLevel));for(var f_t=0,v_z=p_g;f_t<v_z.length;f_t++){var d_h,r_t=v_z[f_t];if((d_h=Config.CItem(r_t.id))&&d_h.mainclass===ItemTypeDefine.EQUIPMENT&&d_h.subclass===EquipSubClassDefine.EquipTalis&&this.checkCanWearEquipByTalisId(e,d_h.id,d_w)){var t_n=d_h;t_n.place===b_e&&0===EquipModel.instance.canWearEquip(d_h,LgcM.ins.heroVo.entryId)&&r_t.fighting>d_m&&(b_s[t_n.place]?b_s[t_n.place].fighting<r_t.fighting&&(b_s[t_n.place]=r_t,d_u++):(b_s[t_n.place]=r_t,d_u++))}}}if(d_u<=0)b_p.broadcastNotice((j_x("1749_1327_711")+j_x("1971_1896_1163")+j_x("2407_1086_2046")+j_x("1761_415")));else for(var f_y in b_s)this.reqEquipWear(e,b_s[f_y].uuid)}},e.prototype.getTalismanAwakeProp=function(e,p_l,p_g){var b_s=[];if(0<p_l){var d_u=this.getAwakenCfg(e,p_l);d_u&&(b_s=p_g?CharacterProperty.getPropertys(d_u.attrPct):CharacterProperty.getPropertys(d_u.attr))}return b_s},e.prototype.isCanStrength=function(e){return Ymw(e,BagModel,BagTypeDefine)},e.prototype.reqEquipAwake=function(e){var p_l=new c2m_talisman_awaken;p_l.tsId=e,DB.instance.query(c2m_talisman_awaken,p_l)},e.prototype.reqTalismanSoulUpLv=function(e){var p_l=new c2m_qihun_level_up;p_l.id=e,DB.instance.query(c2m_qihun_level_up,p_l)},e.prototype.reqTalismanSoulActive=function(e){if(this.checkSuitTalismanLv(e,100)){var p_l=new c2m_qihun_active;p_l.id=e,DB.instance.query(c2m_qihun_active,p_l)}else b_p.broadcastNotice((j_x("799_869_774")+j_x("320_1117_1012")+"100"+j_x(2342)))},e.prototype.getSoulMaxLevel=function(e){return this.getSoulLvLmtArr(e).sort((function(e,p_l){return p_l-e}))[0]},e.prototype.reqSuitsUpLv=function(e){var p_l=new c2m_talisman_upsuit;p_l.suitId=e,DB.instance.query(c2m_talisman_upsuit,p_l)},e.prototype.isCanActivateSoul=function(e){return Srg(e,BagModel,BagTypeDefine)},e.prototype.reqTalismanBuyStove=function(){var e=new c2m_talisman_buy_stove;DB.instance.query(c2m_talisman_buy_stove,e)},e.prototype.reqTalismanStoveRefine=function(e,p_l){var p_g=new c2m_talisman_refine;p_g.tsId=e,p_g.stove=p_l,DB.instance.query(c2m_talisman_refine,p_g)},e.prototype.getSoulMaxStar=function(e){return this.getSoulStarArr(e).sort((function(e,p_l){return p_l-e}))[0]},e.prototype.getSoulStarCfg=function(e,p_l){var p_g=Config.talisman_qihunStar;for(var b_s in p_g)if(p_g[b_s].talismanId==e&&p_g[b_s].star==p_l)return p_g[b_s];return null},e.prototype.showSoulPropStr=function(e){var p_l=e.effect[0][0];switch(["attack","defense","hpUpper","armorBreak"].indexOf(p_l)){case 0:return(j_x("799_869_712")+j_x("1835_1628_371"))+e.effect[0][1]/100+"%";case 1:return(j_x("799_869_741")+j_x("207_1628_371"))+e.effect[0][1]/100+"%";case 2:return(j_x("799_869_1681")+j_x("1547_1628_371"))+e.effect[0][1]/100+"%";case 3:return(j_x("799_869_2213")+j_x("346_1628_371"))+e.effect[0][1]/100+"%"}},e.prototype.getFightById=function(e){return e&&e.isActive()?b_p.calPropFight(this.getLvProps(e)):0},e.prototype.reqTalismanUpDeploy=function(e,p_l,p_g){var b_s=new c2m_talisman_updeploy;b_s.id=e,b_s.depId=p_l,b_s.mode=p_g,DB.instance.query(c2m_talisman_updeploy,b_s)},e.prototype.setQuality=function(e,p_l,p_g,b_s,d_u){void 0===b_s&&(b_s=200),void 0===d_u&&(d_u=200);var b_e=e.getChildByName("quaEft");(b_e=Resource.ResManager.getQualityEft(p_g,b_e,!0))&&(b_e.width=b_s,b_e.height=d_u,b_e.name="quaEft",b_e.index=0,b_e.play(),null===b_e.parent&&(e.addChild(b_e),e.setChildIndex(b_e,Math.max(0,e.numChildren-2))),b_e.on(Laya.Event.LOADED,this,this.resetEffectPos,[p_l,b_e,b_s,d_u]))},e.prototype.reqSuitsInfo=function(){var e=new c2m_talisman_suits;DB.instance.query(c2m_talisman_suits,e)},e.prototype.reqTalismanSoulStarUp=function(e){if(this.checkSuitTalismanLv(e,100)){var p_l=new c2m_qihun_star_up;p_l.id=e,DB.instance.query(c2m_qihun_star_up,p_l)}else b_p.broadcastNotice((j_x("799_869_774")+j_x("320_1117_1012")+"100"+j_x(2342)))},e.instance=new e,e.AddStr="Add",e}();!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.LEVEL=1]="LEVEL",e[e.QUALITY=2]="QUALITY",e[e.TYPE=3]="TYPE"}(TalismanSortType=TalismanSortType||{}),function(e){e[e.NO_ACTIVE=0]="NO_ACTIVE",e[e.ACTIVED=1]="ACTIVED",e[e.FIGHT=2]="FIGHT",e[e.HAVE_ACTIVE=3]="HAVE_ACTIVE"}(TalismanSuitState=TalismanSuitState||{});var j_y=function(){function e(){}return e.confirm=function(e,p_l){void 0===p_l&&(p_l=null);for(var p_g=[],b_s=2;b_s<arguments.length;b_s++)p_g[b_s-2]=arguments[b_s];UI.TalismanTips.open(0,e,p_l,p_g)},e.confirmt=function(e,p_l,p_g){void 0===p_g&&(p_g=null);for(var b_s=[],d_u=3;d_u<arguments.length;d_u++)b_s[d_u-3]=arguments[d_u];UI.TalismanTips.open(e,p_l,p_g,b_s)},e}(),SystemNoticeManager=function(){function e(){this._lastIndex=-1}return Object.defineProperty(e.prototype,"talismanId",{set:function(e){this._gainTalisId=e,Laya.timer.callLater(this,this.playGainTalismanAni)},enumerable:!0,configurable:!0}),e.prototype.playGainTalismanAni=function(){if(!b_p.isPloting&&this._gainTalisId){var e=Config.talisman_talisman[this._gainTalisId];if(e){var p_l=UIM.instance.getMainLetUI();r_n.instance.flyLittleToBagEffect(e.icon,p_l.taskPoint,p_l.middlePoint,1,3.5,this.showGainTalisman.bind(this))}}},e.prototype.showGainTalisman=function(){this._gainTalisId&&(UI.TalismanOpenPanel.open(this._gainTalisId),this._gainTalisId=null)},Object.defineProperty(e.prototype,"dramaId",{set:function(e){this._dramaId=e,!this._isOpening&&e&&(b_p.playDrama(this._dramaId),this._dramaId=null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOpening",{get:function(){return this._isOpening},set:function(e){(this._isOpening=e)||this._dramaId&&(b_p.playDrama(this._dramaId),this._dramaId=null)},enumerable:!0,configurable:!0}),e.prototype.updateSates=function(e){if(!this._isAllGained){var p_l;for(var p_g in this._rewardStates||this.init(),e.rewardState)(p_l=this.getRewardVo(e.rewardState[p_g].id))&&p_l.update(e.rewardState[p_g]);LED.event(l_r.SYSTEM_NOTICE_IFNO)}},e.prototype.init=function(){if(!this._isAllGained){if(!this._talismanStates){var e=Config.talisman_talismanopen;this._talismanStates=[];var p_l=void 0;for(var p_g in e)(p_l=new SystemOpenRewardVo).id=e[p_g].id,p_l.state=0,this._talismanStates.push(p_l)}var b_s=-1;if(this._rewardStates)for(var p_g in this._rewardStates)b_s++,this._rewardStates[p_g].isOpen=p_k.instance.checkSystemOpen(this._rewardStates[p_g].funcId),this._rewardStates[p_g].isOpen&&(this._lastIndex=b_s);else{var d_u=Config.systemNotice;for(var p_g in this._rewardStates=[],p_l=void 0,d_u)b_s++,(p_l=new SystemOpenRewardVo).id=d_u[p_g].id,p_l.isOpen=p_k.instance.checkSystemOpen(p_l.funcId),p_l.isOpen&&(this._lastIndex=b_s),this._rewardStates.push(p_l)}LED.event(l_r.SYSTEM_NOTICE_IFNO)}},e.prototype.isHideNotice=function(){return Ued(this)},e.prototype.getNextNotice=function(){return Guu(this)},e.prototype.getNextCanGain=function(){return Syb(this)},e.prototype.getFullIconIndex=function(){return Khs(Config,this)},e.prototype.getFirstUnGainIndex=function(){if(this._rewardStates){var e=-1;for(var p_l in this._rewardStates)if(e++,this._rewardStates[p_l].canGain)return e;for(var p_l in e=-1,this._rewardStates)if(e++,!this._rewardStates[p_l].isOpen)return e}return 0},Object.defineProperty(e.prototype,"noticeDatas",{get:function(){return this._rewardStates||this.init(),this._rewardStates},enumerable:!0,configurable:!0}),e.sortSystemData=function(e,p_l){return e.state>p_l.state?-1:e.state<p_l.state?1:e.isOpen&&!p_l.isOpen?-1:!e.isOpen&&p_l.isOpen?1:e.id>p_l.id?1:e.id<p_l.id?-1:0},e.prototype.getRewardVo=function(e){return Ozf(e,this)},e.prototype.playOpenAnim=function(){this._readyVo&&!b_p.isPloting&&(UI.SystemOpenPanel.open(this._readyVo),this._isOpening=!0,LED.event(l_r.SYSTEM_NOTICE_IFNO),this._readyVo=null)},e.prototype.talismanBar=function(e,p_l){if(void 0===p_l&&(p_l=0),e&&e.task){var p_g=p_p.instance.mainVo,b_s=0;p_g&&(b_s=p_g.id-1),p_l&&Config.task_task[p_l]&&(b_s=p_l-1);var d_u=StateModel.instance.getStateLv(),b_e=StateModel.instance.getStateSubLv();if("task"==e.task[0]){var d_m=(b_s-e.taskscope[1])/(e.task[1]-e.taskscope[1])*100;return Utils.$("{1}%",parseInt(d_m.toString()))}if("state"==e.task[0]){var d_w=6*parseInt(e.taskscope[1])+parseInt(e.taskscope[2]),f_t=e.task[1],v_z=e.task[2],d_h=(6*d_u+b_e-d_w)/(6*parseInt(f_t)+parseInt(v_z)-d_w);return Utils.$("{1}%",parseInt((100*d_h).toString()))}}},e.prototype.setSpGrayByWinClass=function(e,p_l,p_g,b_s,d_u){void 0===p_g&&(p_g=!1),void 0===b_s&&(b_s=!1),void 0===d_u&&(d_u=null);var b_e=p_l?UIM.instance.getWinName(p_l):"";if(b_e){var d_m=Config.Utils.getWindowByName(b_e),d_w=d_m&&0<d_m.funcID?d_m.funcID:0;d_w<=0||this.setSpGrayByFuncId(e,d_w,p_g,b_s,d_u)}},e.prototype.openFlyTo=function(e,p_l,p_g,b_s){if(!b_s)return!1;var d_u=UIM.instance.getMainUI(),b_e=Config.systemNotice[b_s.id].flyTo;if(!b_e)return!1;var d_m="activity"===b_e[0]?d_u.getActivityPos(b_e[1]):d_u.getShortcutPos(b_e[1]);return!!d_m&&(this._iconSp||(this._iconSp=new Laya.Sprite),this._iconSp.parent&&this._iconSp.removeSelf(),this._iconSp.texture=e,this._iconSp.pos(p_l.x,p_l.y),this._iconSp.size(p_g,p_g),Laya.stage.addChild(this._iconSp),this._tween&&(this._tween.clear(),this._tween=null),this._tween=Laya.Tween.to(this._iconSp,{f_u:d_m.x,j_l:d_m.y},500,null,Laya.Handler.create(this,this.tweenComplete,[b_s.funcId]),null,!0),!0)},e.prototype.setBoxGrayByWinClass=function(e,p_l,p_g,b_s,d_u){void 0===p_g&&(p_g=!1),void 0===b_s&&(b_s=!1),void 0===d_u&&(d_u=null);var b_e=p_l?UIM.instance.getWinName(p_l):"";if(b_e){var d_m=Config.Utils.getWindowByName(b_e),d_w=d_m&&0<d_m.funcID?d_m.funcID:0;if(!(d_w<=0)&&0<Config.funcOpen[d_w].gray){var f_t=e.getChildByName("labBox");if(f_t.gray=!(!p_g&&!f_t.gray||p_k.instance.checkSystemOpen(d_w)),b_s)if(d_u)d_u.visible=f_t.gray;else{var v_z=e.getChildByName("img_lock");v_z&&(v_z.visible=f_t.gray)}}}},e.prototype.checkSysOpen=function(){if(ActivityModel.instance.clientActivities&&!this._isAllGained){var e;this._rewardStates||this.init();for(var p_l=-1,p_g=0;p_g<this._rewardStates.length;p_g++)!1===(e=this._rewardStates[p_g]).isOpen&&(e.isOpen=p_k.instance.checkSystemOpen(e.funcId),e.isOpen&&(p_l=p_g));if(0<p_l){this._lastIndex=p_l;var b_s=this._rewardStates[p_l];if(b_s){if(this._isOpening=!0,this._readyVo=b_s,b_p.isPloting)return;Laya.timer.once(20<Laya.timer.delta?128:64,this,this.playOpenAnim)}}var d_u=UIM.instance.getMainUI();d_u&&d_u.checkSystemOpen()}},e.prototype.getCanTalismanGain=function(e,p_l){void 0===e&&(e=0),void 0===p_l&&(p_l=0);var p_g=Config.talisman_talismanopen,b_s=[];if(p_g){for(var d_u in p_g){var b_e=this.getRewardVo(p_g[d_u].funcId),d_m=b_e?b_e.state:null;if(!p_g[d_u].task)return;null!=d_m&&0==d_m&&b_s.push(p_g[d_u])}return b_s}return null},e.prototype.talismanBarValue=function(e,p_l){if(void 0===p_l&&(p_l=0),e&&e.task){var p_g=p_p.instance.mainVo,b_s=0;p_g&&(b_s=p_g.id-1),p_l&&Config.task_task[p_l]&&(b_s=p_l-1);var d_u=StateModel.instance.getStateLv(),b_e=StateModel.instance.getStateSubLv();if("task"==e.task[0])return(b_s-parseInt(e.taskscope[1]))/(parseInt(e.task[1])-parseInt(e.taskscope[1]));if("state"==e.task[0]){var d_m=6*parseInt(e.taskscope[1])+parseInt(e.taskscope[2]),d_w=e.task[1],f_t=e.task[2];return(6*d_u+b_e-d_m)/(6*parseInt(d_w)+parseInt(f_t)-d_m)}}},e.prototype.getCanGain=function(){return Ane(this)},e.prototype.tweenComplete=function(e){if(this.isOpening=!1,this._tween&&(this._tween.clear(),this._tween=null),this._iconSp&&(this._iconSp.removeSelf(),this._iconSp.destroy(),this._iconSp=null),0<e){var p_l=Config.funcOpen[e].dramaId;p_l&&b_p.playDrama(p_l),LED.event(l_r.SYSTEM_NOTICE_OPEN,e)}},e.prototype.setSpGrayByFuncId=function(e,p_l,p_g,b_s,d_u){if(void 0===p_g&&(p_g=!1),void 0===b_s&&(b_s=!1),void 0===d_u&&(d_u=null),!(p_l<=0)&&0<Config.funcOpen[p_l].gray&&(e.gray=!(!p_g&&!e.gray||p_k.instance.checkSystemOpen(p_l)),b_s))if(d_u)d_u.visible=e.gray;else{var b_e=e.getChildByName("img_lock");b_e&&(b_e.visible=e.gray,Laya.timer.clearAll(this))}},e.prototype.reqSystemOpenReward=function(e){var p_l=new c2m_func_open_take_reward;p_l.id=e,DB.instance.query(c2m_func_open_take_reward,p_l)},e.instance=new e,e}(),SystemOpenRewardVo=function(){function e(){this.state=0}return e.prototype.update=function(e){Ihg(e,this)},Object.defineProperty(e.prototype,"funcId",{get:function(){return Config.systemNotice[this.id].funcId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"talismanOpenfuncId",{get:function(){return Config.talisman_talismanopen[this.id].funcId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canGain",{get:function(){return this.isOpen&&0===this.state},enumerable:!0,configurable:!0}),e}(),StrengthItem=function(){},StrengPropInfo=function(){},StrengthModel=function(){function e(){this._maxPartition=12,this._strengthList=[];for(var e=0;e<this._maxPartition;++e){var p_l=new StrengthItem;p_l.partition=e+1,p_l.lv=0,this._strengthList.push(p_l)}}return e.prototype.getStrenthCfgByLv=function(e,p_l,p_g){void 0===p_l&&(p_l=1),void 0===p_g&&(p_g=!0);var b_s=this.cfgStrengthId,d_u=0,b_e=b_s.length,d_m=Config.strength_strengthPart[p_l];if(!d_m)return null;if(e>=d_m.maxLV)return p_g?Config.strength_strength[this.cfgStrengthId[b_e]]:null;for(;d_u<=b_e;){var d_w=Math.floor((d_u+b_e)/2);e>=b_s[d_w]?d_u=d_w+1:b_e=d_w-1}return Config.strength_strength[b_s[d_u-1]]},Object.defineProperty(e.prototype,"cfgStrengthId",{get:function(){if(!this._cfgStrength)for(var e in this._cfgStrength=[],Config.strength_strength)this._cfgStrength.push(Config.strength_strength[e].id);return this._cfgStrength},enumerable:!0,configurable:!0}),e.prototype.getPartitionLv=function(e){return Srb(e,this)},e.prototype.reqStrengthInfo=function(){var e=new c2m_strength_info;DB.instance.query(c2m_strength_info,e)},e.prototype.getNowFullLv=function(){var e=this.getFullLv(),p_l=0;for(var p_g in Config.strength_strengthFull){if(Config.strength_strengthFull[p_g].id>e)break;Config.strength_strengthFull[p_g].id<=e&&Config.strength_strengthFull[p_g].id>p_l&&(p_l=Config.strength_strengthFull[p_g].id)}return p_l},e.prototype.getProInfoByPartition=function(e){for(var p_l=0,p_g=0;p_g<this._strengthList.length;p_g++)if(this._strengthList[p_g].partition==e){p_l=this._strengthList[p_g].lv;break}return this.getAttrByLv(p_l,e)},e.prototype.getProList=function(){for(var e=new Array,p_l=0;p_l<this._strengthList.length;p_l++){var p_g=this._strengthList[p_l];CharacterProperty.mergePropertys(e,this.getAttrByLv(p_g.lv,p_g.partition))}var b_s=1/0;for(var d_u in EquipPart){var b_e=Number(d_u);b_e&&b_s>this._strengthList[b_e-1].lv&&(b_s=this._strengthList[b_e-1].lv)}if(0<b_s){var d_m=void 0,d_w=0;for(var d_u in Config.strength_strengthFull){var f_t=Config.strength_strengthFull[d_u];b_s>=f_t.id&&f_t.id>d_w&&(d_w=f_t.id,d_m=f_t)}if(d_m){var v_z=CharacterProperty.getPropertys(d_m.attr);CharacterProperty.mergePropertys(e,v_z)}}return e},e.prototype.getNextFullLv=function(){return Qov(this,Config)},e.prototype.calFighting=function(){return Erd(this,b_p)},e.prototype.reqAutoStrength=function(){var e=new c2m_strength_auto;DB.instance.query(c2m_strength_auto,e)},e.prototype.getFullLv=function(){for(var e=0,p_l=0;p_l<this._strengthList.length;p_l++)this._strengthList[p_l].partition==this._maxPartition&&(e=this._strengthList[p_l].lv);return e},e.prototype.getTotalLv=function(){return Oqo(this)},e.prototype.pbStrengthAuto=function(e){for(var p_l=this._strengthList,p_g=[],b_s=0;b_s<e.infos.length;++b_s){var d_u=e.infos[b_s].partition-1;p_l[d_u]||(p_l[d_u]=new StrengthItem),p_l[d_u].partition=e.infos[b_s].partition,p_l[d_u].lv=e.infos[b_s].lv,p_g.push(e.infos[b_s].partition)}j_a.otherIns().add(this,this.updateStrength,[p_g],5)},e.prototype.getProListByPartition=function(e){for(var p_l=new StrengPropInfo,p_g=[],b_s=this.getPartitionLv(e),d_u=this.getAttrByLv(b_s,e),b_e=this.getAttrByLv(b_s+1,e,!1),d_m=0;d_m<d_u.length;d_m++)(p_l=new StrengPropInfo).nowProp=d_u[d_m],b_e&&(p_l.nextProp=b_e[d_m]),p_g.push(p_l);return p_g},e.prototype.minLvPosition=function(){for(var e=0,p_l=0,p_g=1;p_g<=this._maxPartition;p_g++)if(!(1!==p_g&&4!==p_g&&p_g<=8)){if(0==(e=this.getPartitionLv(p_g)))return p_g;if(1==p_g)p_l=e;else if(e!=p_l)return p_g}return 1},e.prototype.isHaveEquip=function(e){for(var p_l=BagModel.instance.getItemInfosByBagType(BagTypeDefine.BAG_TYPE_EQUIPMENT),p_g=0;p_g<p_l.length;p_g++)if(p_l[p_g].place==e)return!0;return!1},e.prototype.getAttrByLv=function(e,p_l,p_g){void 0===p_g&&(p_g=!0);var b_s=[],d_u=this.getStrenthCfgByLv(e,p_l,p_g),b_e=Config.strength_strengthPart[p_l];if(!b_e)return b_s;if(d_u){var d_m="",d_w="",f_t=0;for(var v_z in b_e.attr)f_t=0,f_t=d_u[d_w=(d_m=b_e.attr[v_z])+"Add"]?d_u[d_w]:0,f_t+=(d_u[d_m]?d_u[d_m]:0)*(e-d_u.id+1),b_s.push([d_m,f_t])}return CharacterProperty.getPropertys(b_s)},e.prototype.isCostEnough=function(){var e=this.minLvPosition(),p_l=this.getPartitionLv(e),p_g=BagModel.instance.getItemCountByItemID(200002,BagTypeDefine.BAG_TYPE_ITEM),b_s=this.getStrengthConsume(p_l,e);return!(!b_s||p_g<(b_s[0][1]||0))},e.prototype.getStrengthConsume=function(e,p_l){var p_g=[],b_s=Config.strength_strengthPart[p_l];if(!b_s)return p_g;if(e>=b_s.maxLV)return null;var d_u=0,b_e=b_s.addCost,d_m={};if(b_e&&0<b_e.length){for(var d_w in b_e)d_u=b_e[d_w][1]*e,d_m[b_e[d_w][0]]=d_u;for(var d_w in d_u=0,b_s.baseCost)d_u=b_s.baseCost[d_w][1],d_m[b_s.baseCost[d_w][0]]?d_m[b_s.baseCost[d_w][0]]+=d_u:d_m[b_s.baseCost[d_w][0]]=d_u;for(var d_w in d_m)p_g.push([parseInt(d_w),d_m[d_w]])}else p_g=b_s.baseCost;return p_g},e.prototype.pbStrengthInfo=function(e){for(var p_l=0;p_l<e.infos.length;p_l++){var p_g=e.infos[p_l].partition-1;if(!(p_g<0||p_g>=this._maxPartition)){var b_s=this._strengthList[p_g];(b_s=b_s||new StrengthItem).lv=e.infos[p_l].lv,b_s.partition=e.infos[p_l].partition}}LED.event(l_r.STRENGTH_INFO_UPDATE),LED.event(l_r.HELPER_UPDATE_INFO)},e.prototype.calFullFighting=function(){var e,p_l=0,p_g=this.getNowFullLv(),b_s=Config.strength_strengthFull[p_g];return b_s&&(e=CharacterProperty.getPropertys(b_s.attr),p_l=b_p.calPropFight(e)),p_l},e.prototype.updateStrength=function(e){Olp(e,LED,l_r)},Object.defineProperty(e.prototype,"canStrength",{get:function(){if(!p_k.instance.checkSystemOpen(FuncDefine.strength))return!1;for(var p_l,p_g,b_s=1;b_s<=12;b_s++)if(!(1!==b_s&&4!==b_s&&b_s<=8)){var d_u=e.instance.getPartitionLv(b_s);if(0==d_u){p_l=0,p_g=b_s;break}(!p_l||d_u<p_l)&&(p_l=d_u,p_g=b_s)}var b_e=BagModel.instance.getItemCountByItemID(200002,BagTypeDefine.BAG_TYPE_ITEM),d_m=this.getStrengthConsume(p_l,p_g);return!(!d_m||b_e<(d_m[0][1]||0))},enumerable:!0,configurable:!0}),e.instance=new e,e}(),StateConst,StateTimesVo=function(){},StateModel=function(){function e(){this._timesList=new Array,this._IsUpdateOld=!0}return Object.defineProperty(e.prototype,"OldstateLv",{get:function(){return this._OldstateLv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OldstateSubLv",{get:function(){return this._OldstateSubLv},enumerable:!0,configurable:!0}),e.prototype.updateOldState=function(){Kiv(this)},e.prototype.checkState=function(e,p_l){if(e){var p_g=this.getStateLv();if(p_g<e[0]||p_g>e[1])return!1}else if(p_l){var b_s=LgcM.ins.heroVo.level;if(b_s<p_l[0]||b_s>p_l[1])return!1}return!0},e.prototype.ConnectProp=function(e,p_l,p_g,b_s){void 0===p_l&&(p_l=3),void 0===p_g&&(p_g=""),void 0===b_s&&(b_s="");var d_u=[],b_e="",d_m="";if(!e)return d_u;var d_w=CharacterProperty.getPropertys(e);if(0<d_w.length){for(var f_t=0,v_z=d_w;f_t<v_z.length;f_t++){var d_h=v_z[f_t];1==p_l?d_u.push(d_v.getDesc(d_h.propOrdinal)+p_g+d_h.value+b_s):2==p_l?(b_e+=d_h.value+b_s,d_m+=d_v.getDesc(d_h.propOrdinal)+p_g+b_s):(d_u.push(d_v.getDesc(d_h.propOrdinal)),d_u.push(d_h.value))}2==p_l&&(d_u.push(d_m),d_u.push(b_e))}return d_u},e.prototype.pbStateInfo=function(e){this._stateLv=e.lv,this._stateNum=e.num,this._stateSubLv=e.subLv,this.failCd=e.cd,this._IsUpdateOld&&this.updateOldState(),this._timesList=[];for(var p_l=0;p_l<e.timesList.length;p_l++)this.setTimesByType(e.timesList[p_l].type,e.timesList[p_l].times);LED.event(l_r.STATE_INFO_UPDATE)},e.prototype.isMore=function(e){var p_l=this.getStateLv(),p_g=this.getStateSubLv();if(e)if(2<=e.length){if(e[0]<p_l)return!0;if(e[0]==p_l&&null!=e[1]&&e[1]<=p_g)return!0}else if(e[1]<p_l)return!0;return!1},e.prototype.canBreakSubLv=function(){var e=this.getStateLv(),p_l=this.getStateNum(),p_g=this.getStateSubLv(),b_s=this.getSubConfId(e,p_g),d_u=Config.state_stateSub[b_s];return d_u&&p_l>=d_u.total},e.prototype.reqStateInfo=function(){var e=new c2m_state_info;DB.instance.query(c2m_state_info,e)},e.prototype.setTimesByType=function(e,p_l){for(var p_g=0,b_s=this._timesList;p_g<b_s.length;p_g++){var d_u=b_s[p_g];if(d_u.type==e)return void(d_u.times=p_l)}var b_e=new StateTimesVo;b_e.type=e,b_e.times=p_l,this._timesList.push(b_e)},e.prototype.getTimesByType=function(e){for(var p_l=0,p_g=this._timesList;p_l<p_g.length;p_l++){var b_s=p_g[p_l];if(b_s.type==e)return b_s.times}return 0},e.prototype.pbStateLvUp=function(e){Asx(e,this,LED,l_r,BenefitModel,Laya)},e.prototype.reqStateLvUp=function(){var e=new c2m_state_lv_up;DB.instance.query(c2m_state_lv_up,e)},e.prototype.getStateNum=function(){return Soc(this)},e.prototype.getTypes=function(){var e=new Array;for(var p_l in Config.state_stateIncrease)e.push(Config.state_stateIncrease[p_l].id);return e},e.prototype.pbStateIncrease=function(e){1==e.result&&(this._stateNum=e.num,this.setTimesByType(e.type,e.times)),LED.event(l_r.STATE_TIMESLIST_CHANGE),LED.event(l_r.HELPER_UPDATE_INFO)},e.prototype.getSubConfId=function(e,p_l){return Mvt(e,p_l)},e.prototype.getStateLv=function(){return Oop(this)},e.prototype.reqIncreaseState=function(e){var p_l=new c2m_state_increase;p_l.type=e,DB.instance.query(c2m_state_increase,p_l)},e.prototype.canBreak=function(){var e=this.getStateSubLv(),p_l=this.getStateLv(),p_g=this.getSubConfId(p_l,e),b_s=LgcM.ins.heroVo,d_u=Config.state_stateSub[p_g];return d_u&&d_u.levelLimit?e>=Config.global[GlobalDefine.state_max_sub_lv].i_info&&b_s.level>=d_u.levelLimit:e>=Config.global[GlobalDefine.state_max_sub_lv].i_info},e.prototype.hasStateRedpoint=function(){if(this.canBreak())return!!Config.state_state[this._stateLv+1];if(this.canBreakSubLv()){var e=LgcM.ins.heroVo,p_l=this.getStateLv(),p_g=this.getStateSubLv(),b_s=this.getSubConfId(p_l,p_g),d_u=Config.state_stateSub[b_s];return d_u&&d_u.levelLimit?b_p.checkConsume(d_u&&d_u.consume)&&d_u.levelLimit<=e.level:b_p.checkConsume(d_u&&d_u.consume)}return 0<BagModel.instance.getItemCountByItemID(StateConst.StateNumItemId)},e.prototype.getStateSubLv=function(){return Wsx(this)},e.prototype.delayPlayDrama=function(){if(LgcM.ins.heroVo){var e=100*this._stateLv+this._stateSubLv,p_l=Config.state_stateSub[e];p_l&&0<p_l.dramaId&&b_p.playDrama(p_l.dramaId)}},e.prototype.calFighting=function(){var e,p_l=0,p_g=Config.state_state[this._stateLv],b_s=this.getSubConfId(this._stateLv,this._stateSubLv),d_u=Config.state_stateSub[b_s];return null!=p_g&&null!=d_u&&(e=b_p.addProps(p_g.attr,1,e),e=b_p.addProps(d_u.attr,1,e),p_l=b_p.calPropFight(e)),p_l},e.prototype.pbStateSubUp=function(e){Etb(e,this,LED,l_r,BenefitModel)},e.prototype.reqStateSubLvUp=function(){var e=new c2m_state_sub_up;DB.instance.query(c2m_state_sub_up,e)},e.instance=new e,e}();!function(e){e[e.StateNumItemId=200039]="StateNumItemId"}(StateConst=StateConst||{});var t_m=function(){function e(){this._tailCreateTime={},this._count=0,this._tailImgList={}}return e.prototype.lightSubEft=function(e,p_l,p_g){return null==p_g&&(p_g=new Laya.Clip),p_g.skin="res/ui/state/Clip_guangdian_eft.png",p_g.clipX=4,p_g.clipY=2,p_g.interval=125,p_g.x=p_l.x,p_g.y=p_l.y,p_g.play(),e.addChild(p_g),p_g},e.prototype.offSubEft=function(e,p_l){null!=p_l&&(e.removeChild(p_l),p_l.removeSelf())},e.prototype.onLiziLoadCompleted=function(e,p_l,p_g,b_s,d_u,b_e,d_m,d_w){void 0===b_e&&(b_e=!0),void 0===d_m&&(d_m=!0),void 0===d_w&&(d_w=!1),e.x=p_l.x-e.width/2,e.y=p_l.y-e.height/2,b_s.addChild(e);var f_t={f_u:p_g.x-e.width/2,j_l:p_g.y-e.height/2};e.play(),Laya.Tween.to(e,f_t,533,null,Laya.Handler.create(this,this.subLvEftComplete,[b_s,e,p_g,d_m,d_w]),0,!1,!0),b_e&&Laya.timer.once(133,this,this.tailCreate,[b_s,d_u,e,{f_u:e.x,j_l:e.y},0],!1)},e.prototype.playSubLvEft=function(e,p_l,p_g,b_s,d_u,b_e,d_m){void 0===d_u&&(d_u=!0),void 0===b_e&&(b_e=!0),void 0===d_m&&(d_m=!1);var d_w=new Laya.Clip;d_w.skin="res/ui/state/Clip_lizi_eft.png",d_w.clipX=4,d_w.interval=100,d_w.blendMode="lighter",d_w.on(Laya.Event.LOADED,this,this.onLiziLoadCompleted,[d_w,e,p_l,p_g,b_s,d_u,b_e,d_m])},e.prototype.tailCreate=function(e,p_l,p_g,b_s,d_u){var b_e=new Laya.Image;b_e.skin="res/ui/state/xiaolizi.png",b_e.x=b_s.x+p_g.width/2,b_e.y=b_s.y+p_g.height/2,b_e.anchorX=.5,b_e.anchorY=.5,e.addChild(b_e),Laya.timer.once(66,this,this.tailUpdate,[e,b_e,SyncTime.tickCount],!1),10<=d_u||Laya.timer.once(133,this,this.tailCreate,[e,p_l,p_g,{f_u:p_g.x,j_l:p_g.y},d_u+1],!1)},e.prototype.removeOneShowEft=function(e,p_l,p_g,b_s){void 0===p_g&&(p_g=!0),void 0===b_s&&(b_s=!1),e.removeChild(p_l),p_l.removeSelf(),p_g&&(b_s?LED.event(l_r.BODY_INFO_UPDATE):(LED.event(l_r.STATE_INFO_UPDATE),LED.event(l_r.STATE_LV_UP_EFT_COMPLETE)))},e.prototype.subLvEftComplete=function(e,p_l,p_g,b_s,d_u){void 0===b_s&&(b_s=!0),void 0===d_u&&(d_u=!1);var b_e=new Laya.Clip;b_e.skin="res/ui/state/Clip_xiaojingjie_eft.png",b_e.clipX=3,b_e.interval=33,b_e.x=p_l.x+p_l.width/2-b_e.width/2,b_e.y=p_l.y+p_l.height/2-b_e.height/2,e.addChild(b_e),b_e.on(Laya.Event.COMPLETE,this,this.removeOneShowEft,[e,b_e,b_s,d_u]),b_e.play(!1),e.removeChild(p_l),p_l.removeSelf()},e.prototype.tailUpdate=function(e,p_l,p_g){var b_s=SyncTime.tickCount,d_u=Math.max(1-(b_s-p_g)/533,0);p_l.alpha=d_u,p_l.scale(d_u,d_u),b_s-p_g<533?Laya.timer.once(66,this,this.tailUpdate,[e,p_l,p_g],!1):e.removeChild(p_l)},e.instance=new e,e}(),CoinDefine=function(){function e(){}return e.GOLD=1,e.COPPER=2,e.SKILL_EXP=95,e.GCTRB=4,e.HONOR=5,e.GYMKHANA=20,e.MINE_TOKEN=96,e.MINE_SOUL=97,e.MINE_VIT=98,e}(),SigninType,SigninModel=function(){function e(){this.init()}return e.prototype.init=function(){Mcq(this)},e.prototype.isShowRedPoint=function(){if(0==this.signinDay)return!1;var e=this.checkSignin(this.signinDay),p_l=this.checkTotalSigninAward();return!(e&&!p_l)},e.prototype.checkSigninMoneyIsEnough=function(e){var p_l=LgcM.ins.heroVo,p_g=Config.sign_sign[e].moneySign[0][1];return!(p_l.gold<p_g)},e.prototype.checkSignin=function(e){if(this.signinDays){for(var p_l=0,p_g=this.signinDays;p_l<p_g.length;p_l++)if(p_g[p_l]==e)return!0;return!1}},e.prototype.checkTotalSigninAward=function(){var e=Config.sign_signCount;for(var p_l in e){var p_g=Number(p_l);if(this.checkCanGetTotalSigninReward(p_g))return!0}return!1},e.prototype.canSignin=function(){return Spa(this)},e.prototype.checkMaxSignin=function(){return Gaa()},e.prototype.checkSigninItemIsEnough=function(e){var p_l=Config.sign_sign[e],p_g=p_l.itemSign[0][0],b_s=p_l.itemSign[0][1];return!(BagModel.instance.getItemCountByItemID(p_g,BagTypeDefine.BAG_TYPE_ITEM)<b_s)},e.prototype.getTotalSigninRewardDays=function(){return Cja(this)},e.prototype.onSigninSeccess=function(e){Mnr(e,LED,l_r,this)},e.prototype.getSigninDays=function(){return Wxx(this)},e.prototype.checkCanGetTotalSigninReward=function(e){for(var p_l=this.signinDays.length,p_g=!1,b_s=0,d_u=this.totalSigninRewardDays;b_s<d_u.length;b_s++)d_u[b_s]==e&&(p_g=!0);return e<=p_l&&!p_g},e.prototype.getTotalSigninData=function(){var e=Config.sign_signCount,p_l=[];for(var p_g in e)p_l.push(e[p_g]);return p_l},e.prototype.onGetSigninTotalRewardSeccess=function(e){Kks(e,LED,l_r,this)},e.prototype.reqSigninOrRetroactive=function(e,p_l){var p_g=new c2m_sign_sign_in;p_g.day=e,p_g.type=p_l,DB.instance.query(c2m_sign_sign_in,p_g)},e.prototype.getSigninConfigData=function(){var e=Config.sign_sign,p_l=[];for(var p_g in e)p_l.push(e[p_g]);return p_l},e.prototype.getSigninDay=function(){return Oex(this)},e.prototype.isGettingTotalReward=function(e){for(var p_l=0,p_g=this.totalSigninRewardDays;p_l<p_g.length;p_l++)if(p_g[p_l]==e)return!0;return!1},e.prototype.reqSigninInfo=function(){var e=new c2m_sign_info;DB.instance.query(c2m_sign_info,e)},e.prototype.updateSigninData=function(e){this.signinDay=e.day,this.signinDays=[],this.totalSigninRewardDays=[];for(var p_l=0;p_l<32;++p_l)e.signBit&1<<p_l&&this.signinDays.push(p_l+1),e.rewardBit&1<<p_l&&this.totalSigninRewardDays.push(p_l+1);0!=this.signinDays.length&&(LED.event(l_r.SIGNIN_INFO),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,10022),LED.event(l_r.HELPER_UPDATE_INFO))},e.prototype.reqTotalSigninAward=function(e){var p_l=new c2m_sign_reward;p_l.day=e,DB.instance.query(c2m_sign_reward,p_l)},e.instance=new e,e}(),b_s;b_s=SigninType=SigninType||{},b_s[b_s.Signin=0]="Signin",b_s[b_s.ItemSignin=1]="ItemSignin",b_s[b_s.MoneySignin=2]="MoneySignin";var j_f=function(){},ShopType,ShopModel=function(){function e(){this._stae=0}return e.prototype.initDatas=function(){var e=StateModel.instance.getStateLv();if(null==this._shopDatas||e>this._stae){this._shopDatas=[],this._banquetDatas=[],this._limitActivityDatas=[],this._blackMarketDatas=[],this._intergralMarketDatas=[],this._rareAnimalDatas=[],this._godEquipDatas=[];var p_l=Config.shop_shop;this._displayArray=[];var p_g=void 0;for(var b_s in p_l){var d_u=this._displayArray[p_l[b_s].type];p_l[b_s].type==ShopType.COMMON?b_e(p_l[b_s].stateLv)&&((p_g=new ShopItemVo).type=p_l[b_s].type,p_g.id=p_l[b_s].id,p_g.dayNum=p_g.weekNum=0,1==p_l[b_s].display&&this._shopDatas.push(p_g)):p_l[b_s].type==ShopType.BANQUET?b_e(p_l[b_s].stateLv)&&((p_g=new ShopItemVo).type=p_l[b_s].type,p_g.id=p_l[b_s].id,p_g.dayNum=p_g.weekNum=0,1==p_l[b_s].display&&this._banquetDatas.push(p_g)):4==p_l[b_s].type?b_e(p_l[b_s].stateLv)&&((p_g=new ShopItemVo).type=p_l[b_s].type,p_g.id=p_l[b_s].id,p_g.dayNum=p_g.weekNum=0,1==p_l[b_s].display&&this._limitActivityDatas.push(p_g)):p_l[b_s].type==ShopType.BLACK?b_e(p_l[b_s].stateLv)&&((p_g=new ShopItemVo).type=p_l[b_s].type,p_g.id=p_l[b_s].id,p_g.toolNum=p_g.dayNum=p_g.weekNum=0,1==p_l[b_s].display&&this._blackMarketDatas.push(p_g)):p_l[b_s].type==ShopType.INTEGRAL?b_e(p_l[b_s].stateLv)&&((p_g=new ShopItemVo).type=p_l[b_s].type,p_g.id=p_l[b_s].id,p_g.toolNum=p_g.dayNum=p_g.weekNum=0,1==p_l[b_s].display&&this._intergralMarketDatas.push(p_g)):p_l[b_s].type==ShopType.RARE?b_e(p_l[b_s].stateLv)&&((p_g=new ShopItemVo).type=p_l[b_s].type,p_g.id=p_l[b_s].id,p_g.toolNum=p_g.dayNum=p_g.weekNum=0,1==p_l[b_s].display&&this._rareAnimalDatas.push(p_g)):p_l[b_s].type==ShopType.GODEQUIP&&((p_g=new ShopItemVo).type=p_l[b_s].type,p_g.id=p_l[b_s].id,p_g.toolNum=p_g.dayNum=p_g.weekNum=0,1==p_l[b_s].display&&this._godEquipDatas.push(p_g)),0!=p_l[b_s].display&&b_e(p_l[b_s].stateLv)||(d_u=d_u?d_u+1:1,this._displayArray[p_l[b_s].type]=d_u)}this._stae=e}function b_e(p_l){return p_l<=e}},e.prototype.reqShopbuyList=function(e,p_l){if(p_l){var p_g=new c2m_shop_buy;p_g.id=e,p_g.num=p_l;var b_s=Config.shop_shop[e];if(b_s){var d_u=b_s.price[0][1]*p_l;GPlatform.isH5&&H5Platform.ins.uploadBuyData(b_s.itemId,p_l,d_u)}DB.instance.query(c2m_shop_buy,p_g)}},e.prototype.getRandShopDataById=function(e){return Wuk(e,this)},e.prototype.getShopDisplayeDataNum=function(e){return Wal(e,this)},e.prototype.onRefesh=function(){var p_l=SyncTime.serverTime-1e3*e.instance._randTime,p_g=1e3*Config.global[GlobalDefine.refresh_rand_shop_cd].i_info-p_l,b_s=Config.global[GlobalDefine.refresh_rand_shop_cost].t_info;if(p_g<=0)this.isBuyDiscountItem()?this.reqRefresh():b_p.confirm((j_x("2364_630_1820")+j_x("21_1768_1896")+j_x("116_1235_2217")+j_x("1841_206_1355")+j_x(2420)+""+j_x("68_2032_2085")+j_x("4_896_1787")+""),this.reqRefresh);else if(b_p.checkConsume(b_s)){var d_u=this.isBuyDiscountItem()?(j_x("68_2032_1661")+j_x(1502)+"{1}"+j_x("1263_869")+""+j_x("896_1787_868")+j_x("1879_1820_1425")+""):(j_x("68_2032_1661")+j_x(1502)+"{1}"+j_x("1263_869")+""+j_x("896_1787_868")+j_x("1879_1820_1425")+"("+j_x("2364_630_1820")+j_x("21_1768_1896")+j_x("116_1235_2217")+j_x("1841_206_1355")+j_x(2420)+")");j_y.confirm(Utils.$(d_u,b_s[0][1]),this.sureToOpen,!0)}else b_p.broadcastNotice((j_x("1263_869_2462")+j_x(1779)))},e.prototype.getShopConfigByItemId=function(e){return Ghl(e,Config)},e.prototype.sureToOpen=function(p_l){var p_g=Config.global[GlobalDefine.refresh_rand_shop_cost].t_info;b_p.checkConsume(p_g)?(e.instance.reqShopRandList(),b_p.broadcastNotice((j_x("896_1787_402")+j_x(2142)),1,"#27f60b")):b_p.broadcastNotice((j_x("1263_869_2462")+j_x(1779)))},e.prototype.getShopItemVo=function(e){this.initDatas();var p_l=Config.shop_shop[e];if(!p_l)return null;var p_g=this.getShopDatas(p_l.type);if(null!=p_g)for(var b_s=0,d_u=p_g;b_s<d_u.length;b_s++){var b_e=d_u[b_s];if(b_e.id===e)return b_e}return null},e.prototype.onTimer=function(){var p_l=SyncTime.serverTime-1e3*e.instance._randTime,p_g=1e3*Config.global[GlobalDefine.refresh_rand_shop_cd].i_info-p_l;return!(0<p_g)&&(p_g<=0||void 0)},e.prototype.changeShopData=function(e,p_l,p_g,b_s){if(Config.shop_shop[e]){var d_u=this.getShopItemVo(e);return d_u&&(d_u.dayNum=p_l||0,d_u.weekNum=p_g||0,d_u.toolNum=b_s||0),d_u}},e.prototype.reqRefresh=function(){e.instance.reqShopRandList(),b_p.broadcastNotice((j_x("896_1787_402")+j_x(2142)),1,"#27f60b"),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.shop_1)},e.prototype.getShopDataById=function(e){return Ael(e,this)},e.prototype.getShopDatas=function(e){return this.initDatas(),e==ShopType.COMMON?this._shopDatas:e==ShopType.RANDOM?this._randDatas:e==ShopType.BANQUET?this._banquetDatas:4==e?this._limitActivityDatas:e==ShopType.BLACK?this._blackMarketDatas:e==ShopType.INTEGRAL?this._intergralMarketDatas:e==ShopType.RARE?this._rareAnimalDatas:e==ShopType.GODEQUIP?this._godEquipDatas:void 0},e.prototype.initRandList=function(e){var p_l;for(var p_g in this._randDatas=[],e){(p_l=new ShopItemVo).type=ShopType.RANDOM,p_l.id=e[p_g].id;var b_s=Config.shop_shop[e[p_g].id];b_s&&b_s.freshMustShow&&(p_l.mustShow=b_s.freshMustShow),this._randDatas.push(p_l)}},e.prototype.reqShopRandList=function(){var e=new c2m_shop_refresh;DB.instance.query(c2m_shop_refresh,e)},e.prototype.initShopAllList=function(e){this.initRandList(e.randList);for(var p_l=0,p_g=e.buyList;p_l<p_g.length;p_l++){var b_s=p_g[p_l];this.changeShopData(b_s.id,b_s.dayNum,b_s.weekNum,b_s.total)}this._randTime=e.time,LED.event(l_r.SHOP_DATA_UPDATE),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.shop_1)},e.prototype.reqShopAlreadyList=function(){var e=new c2m_shop_buy_list;DB.instance.query(c2m_shop_buy_list,e)},e.prototype.isBuyDiscountItem=function(){if(this._randDatas&&0<this._randDatas.length)for(var e in this._randDatas)if(0<this._randDatas[e].dayNum&&this._randDatas[e].mustShow)return!0;return!1},e.prototype.updateShopDate=function(){var p_l,p_g=e.instance.getShopDatas(ShopType.COMMON);for(var b_s in Config.shop_shop,this._shopUpdateDates=[],p_g)(p_l=new ShopItemVo).type=p_g[b_s].type,p_l.id=p_g[b_s].id,p_l.dayNum=p_g[b_s].dayNum,p_l.weekNum=p_g[b_s].weekNum,this._shopUpdateDates.push(p_l);return this._shopUpdateDates},e.prototype.getShopVo=function(e){var p_l=Laya.Pool.getItemByClass(PoolDefine.SHOP_DATA,j_f),p_g=Config.shop_shop[e.id],b_s=-1,d_u=0,b_e=e.dayNum||0,d_m=e.weekNum||0,d_w=e.toolNum||0,f_t="";return p_g.dayNum&&(b_s=p_g.dayNum-b_e,d_u=1,f_t=(j_x("2339_1254"))),p_g.weekNum&&(b_s=p_g.weekNum-d_m,d_u=2,f_t=(j_x("944_722"))),p_g.limitNum&&(b_s=p_g.limitNum-d_w,d_u=3,f_t=""),p_l.buyNum=b_s,p_l.numType=d_u,p_l.timeStr=f_t,p_l},e.instance=new e,e}(),ShopItemVo=function(){function e(){this.id=0,this.dayNum=0,this.weekNum=0,this.toolNum=0,this.type=0,this.mustShow=0}return e.prototype.countTimes=function(){var e=Config.shop_shop[this.id],p_l=-1,p_g=this.dayNum||0,b_s=this.weekNum||0,d_u=this.toolNum||0;return e.dayNum&&(p_l=e.dayNum-p_g),e.weekNum&&(p_l=e.weekNum-b_s),e.limitNum&&(p_l=e.limitNum-d_u),p_l},e}();!function(e){e[e.RANDOM=1]="RANDOM",e[e.COMMON=2]="COMMON",e[e.BANQUET=3]="BANQUET",e[e.BLACK=6]="BLACK",e[e.INTEGRAL=7]="INTEGRAL",e[e.RARE=8]="RARE",e[e.GODEQUIP=9]="GODEQUIP"}(ShopType=ShopType||{});var t_l=function(){Uls(this)},ShopConstant=function(){function e(){}return e.getShopName=function(p_l,p_g){void 0===p_g&&(p_g=0);var b_s=(j_x("2217_1841")),d_u="res/ui/shop/shop_0"+p_l+".png";switch(p_l){case e.type_mystery:b_s=(j_x("2364_630"));break;case e.type_guild:b_s=(j_x("796_1413"));break;case e.type_banquet:b_s=(j_x("1755_695"));break;case e.type_fight:b_s=(j_x("832_799"));break;case e.type_honor:b_s=(j_x("287_2189"));break;case e.type_Black:b_s=(j_x("1674_1468"));break;case e.type_Integral:b_s=(j_x("514_2224"));break;case e.type_Animals:b_s=(j_x("1946_1558"));break;case e.type_godEquip:b_s=(j_x("2364_2398"))}return 1==p_g?d_u:b_s+(j_x("1820_21"))},e.type_prop=0,e.type_mystery=1,e.type_guild=5,e.type_banquet=6,e.type_fight=4,e.type_honor=3,e.shopList=[e.type_prop,e.type_mystery,e.type_Black=2,e.type_honor,e.type_fight,e.type_guild,e.type_banquet,e.type_Integral=7,e.type_Animals=8,e.type_godEquip=9],e}(),SevenDay,REWARD_TYPE,SevenDayTargetModel=function(){function e(){this.creatPlayerTime=0,this.init()}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.sevenDayInfoArr=[],this.livenessInfoArr=[];var e=Config.seven_day_task_seven_activeness,p_l=Config.seven_day_task_seven_reward;for(var p_g in e){var b_s=new SevenDayInfo;b_s.id=e[p_g].id,b_s.day=e[p_g].day,b_s.totalProgress=e[p_g].condition[1],b_s.reward=e[p_g].rewardItem,b_s.taskDec=e[p_g].name,b_s.link=e[p_g].link,b_s.getRewardStatus=0,b_s.currProgress=0,b_s.point=e[p_g].point,e[p_g].icon?b_s.title=e[p_g].icon:b_s.title="",this.sevenDayInfoArr.push(b_s)}for(var d_u in p_l){var b_e=new LivenessInfo;b_e.currProgress=0,b_e.day=p_l[d_u].day,b_e.id=p_l[d_u].id,b_e.rewardStatus=0,b_e.point=p_l[d_u].point,b_e.awardName=p_l[d_u].awardName,this.livenessInfoArr.push(b_e)}},e.prototype.getLivenessDataByDay=function(e){var p_l=[];for(var p_g in this.livenessInfoArr)this.livenessInfoArr[p_g].day===e&&p_l.push(this.livenessInfoArr[p_g]);return p_l},e.prototype.main_sevenTarget=function(){return Qhh(SevenDay,e)},e.prototype.reqSevenDayLivenessReward=function(e){var p_l=new c2m_get_seven_day_liveness_reward;p_l.id=e,DB.instance.query(c2m_get_seven_day_liveness_reward,p_l)},e.prototype.activityCountDount=function(){if(this.creatPlayerTime){var e=1e3*this.creatPlayerTime+6912e5-SyncTime.serverTime;return e<=0&&(e=0),e/1e3}return 0},e.prototype.updateSingleInfo=function(e){for(var p_l in this.sevenDayInfoArr)e.id===this.sevenDayInfoArr[p_l].id&&(this.sevenDayInfoArr[p_l].currProgress=e.progress);LED.event(l_r.SEVEN_TARGET_TASK_UPDATE),LED.event(l_r.SEVEN_TARGET_LIVINESS_UPDATE),LED.event(l_r.SEVENDAY_DEFAULT_INDEX)},e.prototype.openAwardIndex=function(p_l){return Yyp(p_l,e)},e.prototype.getPointArr=function(e){var p_l=0,p_g=0;for(var b_s in this.livenessInfoArr)if(this.livenessInfoArr[b_s].day===e){p_l=this.livenessInfoArr[b_s].currProgress;break}for(var d_u in this.sevenDayInfoArr)this.sevenDayInfoArr[d_u].day===e&&(p_g+=this.sevenDayInfoArr[d_u].point);return[p_l,p_g]},e.prototype.main_deleteSevenTargetIcon=function(){for(var e=1;e<=SevenDay.SEVEN_DAY;e++){for(var p_l=this.getLivenessDataByDay(e),p_g=this.getPointArr(e),b_s=(p_g[0],p_g[1],0);b_s<3;b_s++)if(2<=p_l.length&&0==(p_l[b_s].rewardStatus&1<<b_s))return!1;var d_u=this.getTaskDataByDay(e);for(var b_e in d_u)if(0===d_u[b_e].getRewardStatus)return!1}return!0},e.prototype.reqSevenDayTaskReward=function(e){var p_l=new c2m_get_seven_day_task_reward;p_l.taskId=e,DB.instance.query(c2m_get_seven_day_task_reward,p_l)},e.prototype.updateSevenDayInfo=function(e){var p_l=e.taskSet,p_g=e.livenessSet;for(var b_s in p_l)for(var d_u in this.sevenDayInfoArr)p_l[b_s].id===this.sevenDayInfoArr[d_u].id&&(this.sevenDayInfoArr[d_u].currProgress=p_l[b_s].progress,this.sevenDayInfoArr[d_u].getRewardStatus=p_l[b_s].reward);for(var b_s in p_g)for(var d_u in this.livenessInfoArr)p_g[b_s].day===this.livenessInfoArr[d_u].day&&(this.livenessInfoArr[d_u].rewardStatus=p_g[b_s].reward,this.livenessInfoArr[d_u].currProgress=p_g[b_s].progress);this.creatPlayerTime=e.createTime,LED.event(l_r.SEVEN_TARGET_TASK_UPDATE),LED.event(l_r.SEVEN_TARGET_LIVINESS_UPDATE),LED.event(l_r.SEVENDAY_DEFAULT_INDEX)},e.prototype.getPointPreence=function(e){var p_l=this.getPointArr(e),p_g=p_l[0],b_s=p_l[1];return Math.floor(p_g/b_s*100)},e.prototype.getLivinessDataById=function(e){return Ydg(e,this)},e.prototype.reqSevenDayInfo=function(){var e=new c2m_seven_day_task_info;DB.instance.query(c2m_seven_day_task_info,e)},e.prototype.getTaskDataById=function(e){return Wtr(e,this)},e.prototype.getLivinessAward=function(){Ijp(LED,l_r)},e.prototype.dayNum_Red=function(e){var p_l=this.getTaskDataByDay(e);for(var p_g in p_l)if(p_l[p_g].currProgress>=p_l[p_g].totalProgress&&0===p_l[p_g].getRewardStatus)return!0;for(var b_s=this.getLivenessDataByDay(e),d_u=this.getPointArr(e),b_e=d_u[0],d_m=(d_u[1],0);d_m<3;d_m++)if(2<=b_s.length&&b_e>=b_s[d_m].point&&0==(b_s[d_m].rewardStatus&1<<d_m))return!0;return!1},e.prototype.getTaskDataByDay=function(e){var p_l=[];for(var p_g in this.sevenDayInfoArr)this.sevenDayInfoArr[p_g].day===e&&p_l.push(this.sevenDayInfoArr[p_g]);return p_l.sort((function(e,p_l){var p_g=e.getRewardStatus,b_s=p_l.getRewardStatus,d_u=e.currProgress,b_e=p_l.currProgress,d_m=e.totalProgress,d_w=p_l.totalProgress;return p_g!=b_s?p_g-b_s:Math.floor(d_u/d_m)!=Math.floor(b_e/d_w)?Math.floor(b_e/d_w)-Math.floor(d_u/d_m):void 0}))},e.prototype.reqSevenDayOnLineCheck=function(){var e=new c2m_seven_day_task_online_check;DB.instance.query(c2m_seven_day_task_online_check,e)},e}(),SevenDayInfo=function(){},LivenessInfo=function(){};!function(e){e[e.ONE_DAY=1]="ONE_DAY",e[e.TWO_DAY=2]="TWO_DAY",e[e.THREE_DAY=3]="THREE_DAY",e[e.FOUR_DAY=4]="FOUR_DAY",e[e.FIVE_DAY=5]="FIVE_DAY",e[e.SIX_DAY=6]="SIX_DAY",e[e.SEVEN_DAY=7]="SEVEN_DAY"}(SevenDay=SevenDay||{}),function(e){e[e.ITEM=1]="ITEM",e[e.TALISMAN=2]="TALISMAN",e[e.RIDE=3]="RIDE",e[e.FASHION=4]="FASHION",e[e.DRAGON=5]="DRAGON"}(REWARD_TYPE=REWARD_TYPE||{});var z_s=function(){function e(){}return Object.defineProperty(e.prototype,"getDay",{get:function(){return this._getDay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nowDay",{get:function(){return this._nowDay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openStatus",{get:function(){return this._openStatus},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ins",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.addEventListener=function(){Uki(DB,m2c_merge_sevenday_info,this,m2c_merge_sevenday_get,m2c_merge_sevenday_status)},e.prototype.onMergeSevendayInfo=function(e){Cmx(e,console,this,LED,l_r,FuncDefine)},e.prototype.removeEventListener=function(){Uek(DB,m2c_merge_sevenday_info,this,m2c_merge_sevenday_get,m2c_merge_sevenday_status)},e.prototype.onMergeSevendayStatus=function(e){Ogg(e,this,LED,l_r,FuncDefine)},e.prototype.reqMergeSevendayGet=function(e){var p_l=new c2m_merge_sevenday_get;p_l.day=e,DB.instance.query(c2m_merge_sevenday_get,p_l)},e.prototype.reqMergeSevendayStatus=function(){var e=new c2m_merge_sevenday_status;DB.instance.query(c2m_merge_sevenday_status,e)},e.prototype.reqMergeSevendayInfo=function(){var e=new c2m_merge_sevenday_info;DB.instance.query(c2m_merge_sevenday_info,e)},e.prototype.onMergeSevendayGet=function(p_l){Wou(p_l,e)},e.prototype.isRed=function(){for(var p_l=0;p_l<7;p_l++){var p_g=!1,b_s=!1;if(p_l<e.ins.nowDay&&(p_g=!0),e.ins.getDay&1<<p_l||(b_s=!0),b_s&&p_g)return!0}},e}(),SettingType,SetupModel=function(){function e(){this._sets=[1,2,4],this._isCheckTalisman=!1,this._isCheckBlackKing=!1}return e.prototype.isQQCloseEffect=function(e){return(""===e||null===e)&&GPlatform.isQQMini},e.prototype.getHideSet=function(e,p_l){void 0===p_l&&(p_l=!1);var p_g=!1;return"true"===UserLocalStore.loadData(e)?p_g=!0:p_l&&GPlatform.isQQMini&&(p_g=!0),p_g},e.prototype.initSetting=function(){Mbo(this,Resource)},Object.defineProperty(e.prototype,"isHideEffect",{get:function(){return this._isHideEffect},set:function(e){e!=this._isHideEffect&&(this._isHideEffect=e),UserLocalStore.saveData("isHideEffect",!0===e?"true":"false")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCloseShake",{get:function(){return this._isCloseShake},set:function(e){e!=this._isCloseShake&&(this._isCloseShake=e),UserLocalStore.saveData("isCloseShake",!0===e?"true":"false")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHidePlayer",{get:function(){return this._isHidePlayer},set:function(e){e!=this._isHidePlayer&&(this._isHidePlayer=e,LgcM.ins.setShowHidePlayer(!e)),UserLocalStore.saveData("isHidePlayer",!0===e?"true":"false")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCloseMusic",{get:function(){return this._isCloseMusic},set:function(e){e!=this._isCloseMusic&&(this._isCloseMusic=e,Resource.SoundManager.instance.canPlayBgm=!e,LED.event(l_r.SETUP_MUSIC_CHANGE,e)),UserLocalStore.saveData("isCloseMusic",!0===e?"true":"false")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCloseWav",{get:function(){return this._isCloseWav},set:function(e){e!=this._isCloseWav&&(this._isCloseWav=e,Resource.SoundManager.instance.canPlaySound=!e),UserLocalStore.saveData("isCloseWav",!0===e?"true":"false")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isShowCrossTall",{get:function(){return this._isShowCrossTall},set:function(e){e!=this._isShowCrossTall&&(this._isShowCrossTall=e),UserLocalStore.saveData("isShowCrossTall",!0===e?"true":"false")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headIcons",{get:function(){var e=LgcM.ins.heroVo;if(!this._headIcons){this._headIcons=[];var p_l=Config.headIcon,p_g=void 0;for(var b_s in p_l)e&&e.entryId===p_l[b_s].sex&&((p_g=new HeadIconVo).id=p_l[b_s].id,this._headIcons.push(p_g))}return this._headIcons},enumerable:!0,configurable:!0}),e.prototype.updateHeadIcon=function(){var e=LgcM.ins.heroVo;this._headIcons=[];var p_l,p_g=Config.headIcon;for(var b_s in p_g)e&&e.entryId===p_g[b_s].sex&&((p_l=new HeadIconVo).id=p_g[b_s].id,this._headIcons.push(p_l))},Object.defineProperty(e.prototype,"IsCloseCheckTalisman",{get:function(){return this._isCheckTalisman},set:function(e){if(e!=this._isCheckTalisman){var p_l=e?1:0;this.reqSettingFlags(SettingType.TALISMAN,p_l)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsCloseCheckBlackKing",{get:function(){return this._isCheckBlackKing},set:function(e){if(e!=this._isCheckBlackKing){var p_l=e?1:0;this.reqSettingFlags(SettingType.XIAN_YUAN,p_l)}},enumerable:!0,configurable:!0}),e.prototype.updateHeadIcons=function(e){if(e){var p_l=void 0;for(var p_g in e)(p_l=this.getHeadIconVo(e[p_g]))&&(p_l.isActive=!0)}LED.event(l_r.SETUP_HEADICON_INFO)},e.prototype.reqSettingFlags=function(e,p_l){var p_g=new c2m_setting_flags;p_g.flag=e,p_g.val=p_l,DB.instance.query(c2m_setting_flags,p_g)},e.prototype.updataSetUpInfo=function(p_l){var p_g=p_l&e.TalismanSet,b_s=p_l&e.BlackKIngSet;this._isCheckBlackKing=0!=b_s,this._isCheckTalisman=0!=p_g},e.prototype.reqChangeHeadIcon=function(e){var p_l=new c2m_change_headIcon;p_l.iconId=e,DB.instance.query(c2m_change_headIcon,p_l)},e.prototype.reqActivedHeadIcon=function(){var e=new c2m_headIcon_list;DB.instance.query(c2m_headIcon_list,e)},e.prototype.getHeadIconVo=function(e){return Cxp(e,this)},e.prototype.reqChangeSex=function(e){var p_l=new c2w_change_sex;p_l.newSex=e,DB.instance.query(c2w_change_sex,p_l)},e.prototype.getSetFlag=function(e){return Ury(e,LgcM,this)},e.prototype.reqChangeName=function(e,p_l){var p_g;void 0===p_l&&(p_l=1),e&&""!=e&&(p_l?((p_g=new c2w_change_name).name=e,DB.instance.query(c2w_change_name,p_g)):((p_g=new c2w_first_change_name).name=e,DB.instance.query(c2w_first_change_name,p_g)))},e.prototype.headRedPoint=function(){for(var e in this.headIcons){var p_l=this.headIcons[e],p_g=Config.headIcon[p_l.id],b_s=LgcM.ins.heroVo;if(!p_l.isActive&&b_s.vipLv>=p_g.vip){var d_u=b_p.getRewardDatas(p_g.consume);return!(d_u&&0<d_u.length)||b_p.checkConsume(p_g.consume)}}return!1},e.instance=new e,e.TalismanSet=1,e.BlackKIngSet=2,e}(),HeadIconVo=function(){function e(){}return e.prototype.canActive=function(){var e=LgcM.ins.heroVo,p_l=Config.headIcon[this.id];return!(0<p_l.vip&&e.vipLv<p_l.vip)&&!!p_l.consume&&b_p.checkConsume(p_l.consume)},e}();!function(e){e[e.TALISMAN=1]="TALISMAN",e[e.XIAN_YUAN=2]="XIAN_YUAN",e[e.FRIEND=3]="FRIEND"}(SettingType=SettingType||{});var r_a=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this._ins||(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.prototype.onDropAppear=function(e){Oum(e,Engine2d,LgcM,DungeonModel)},e}(),RoleTalisOrBlackInfoModel=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.OnTalismanInfo=function(e){var p_l=[];if(e.talismans)for(var p_g in e.talismans){var b_s=new RoleTalisManVo;b_s.Init(e.talismans[p_g]),p_l.push(b_s)}p_l.length<=0?b_p.broadcastNotice((j_x("2287_814_1163")+j_x("5_2450_2046")+j_x("799_869"))):(UI.RoleTalisOrBlackInfoPanel.open(1,0),p_l.sort(this.talismanSort),Laya.timer.once(100,this,(function(){LED.event(l_r.CHECK_ROLE_TALIS_INFO,[p_l,e.fighting])})))},e.prototype.BlackKingSort=function(e,p_l){return e.ConfigVo.quality==p_l.ConfigVo.quality?p_l.Star-e.Star:p_l.ConfigVo.quality-e.ConfigVo.quality},e.prototype.talismanSort=function(e,p_l){return e.ConfigVo.quality==p_l.ConfigVo.quality?p_l.level-e.level:p_l.ConfigVo.quality-e.ConfigVo.quality},e.prototype.ReqInfo=function(e,p_l){switch(e){case Show_Type.BLACKKING:this.ReqBlackInfo(p_l);break;case Show_Type.TALISMAN:this.ReqTalismanInfo(p_l)}},e.prototype.ReqTalismanInfo=function(e){var p_l=new c2w_view_role_talisman;p_l.pid=e,DB.instance.query(c2w_view_role_talisman,p_l)},e.prototype.OnBlackInfo=function(e){var p_l=[];if(e.xianyuans)for(var p_g in e.xianyuans){var b_s=new RoleBlackKingVo;b_s.Init(e.xianyuans[p_g]),p_l.push(b_s)}p_l.length<=0?b_p.broadcastNotice((j_x("2287_814_1163")+j_x("5_2450_2046")+j_x("189_438"))):(p_l.sort(this.BlackKingSort),UI.RoleTalisOrBlackInfoPanel.open(2,0),Laya.timer.once(100,this,(function(){LED.event(l_r.CHECK_ROLE_BLACK_INFO,[p_l,e.fighting])})))},e.prototype.ReqBlackInfo=function(e){var p_l=new c2w_view_role_xianyuan;p_l.pid=e,DB.instance.query(c2w_view_role_xianyuan,p_l)},e}(),RoleTalisManVo=function(){function e(){}return e.prototype.Init=function(e){Uvh(e,this)},Object.defineProperty(e.prototype,"ConfigVo",{get:function(){return Config.talisman_talisman[this.ID]},enumerable:!0,configurable:!0}),e}(),RoleBlackKingVo=function(){function e(){}return e.prototype.Init=function(e){Ycq(e,this)},Object.defineProperty(e.prototype,"ConfigVo",{get:function(){return Config.xianyuan_god[this.ID]},enumerable:!0,configurable:!0}),e}(),RolePropertyModel=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.getPropertypes=function(){return Wnq(this,d_v)},e.prototype.compareFun=function(e,p_l){return Owv(e,p_l)},e}(),GodEpType,GodEquipModel=function(){function e(){e.partPos=[GodEpType.head,GodEpType.shoulder,GodEpType.shoes,GodEpType.chest,GodEpType.hand,GodEpType.jewelry]}return Object.defineProperty(e,"ins",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"suitCompose",{get:function(){if(null==this._suitCompose)for(var e in this._suitCompose={},Config.item_compose){var p_l=Config.item_compose[e],p_g=Config.CItem(p_l.id);if(Config.item_composeType2[p_l.type]){var b_s=this._suitCompose[p_g.suitId]||new ComposeLayerVo;p_g.mainclass==ItemTypeDefine.EQUIPMENT&&p_g.subclass==EquipSubClassDefine.EquipGod&&(b_s.setData(p_g.star,p_l.id),this._suitCompose[p_g.suitId]=b_s)}}return this._suitCompose},enumerable:!0,configurable:!0}),e.prototype.getGodEquip=function(){return Khf(BagModel,BagTypeDefine)},e.prototype.getBagInfo=function(){return Qpr(BagModel,BagTypeDefine,EquipSubClassDefine)},Object.defineProperty(e.prototype,"godSuitArr",{get:function(){if(!this._godSuitArr)for(var e in this._godSuitArr=new Array,Config.achievement_achievement)this._godSuitArr.push(Config.achievement_achievement[e].id);return this._godSuitArr},enumerable:!0,configurable:!0}),e.prototype.getGodEquipByPlace=function(e){var p_l=[],p_g=this.getBagInfo();for(var b_s in p_g)Config.CItem(p_g[b_s].id).place==e&&p_l.push(p_g[b_s]);return p_l},e.prototype.godEquipGodProp=function(e){var p_l=Config.item_equipment[e];return p_l?CharacterProperty.getPropertys(p_l.godPropFixed):[]},e.prototype.countStarNum=function(e){var p_l=-1,p_g=0;if(e)for(var b_s in e)if(e[b_s]){var d_u=Config.CItem(e[b_s].id);p_g++,p_l=-1==p_l?d_u.star:Math.min(p_l,d_u.star)}return p_g>=EquipDefine.GodNum?p_l:-1},e.prototype.getInitPartArr=function(){for(var p_l={},p_g=0;p_g<e.partPos.length;p_g++)p_l[e.partPos[p_g]]=null;return p_l},e.prototype.getStarPropByStar=function(e,p_l,p_g){var b_s=Config.godEquip_suit[e];if(b_s){var d_u=b_s.effect[p_l];if(d_u)for(var b_e in d_u)for(var d_m in p_g)p_g[d_m].name==d_u[b_e][0]&&(p_g[d_m].value*=1+d_u[b_e][1]/1e4)}},e.prototype.reqLookGodEquip=function(e){var p_l=c2w_view_role_godEquip,p_g=new p_l;p_g.pid=e,DB.instance.query(p_l,p_g)},e.prototype.getSuitPropBySuitId=function(e,p_l){return Soq(e,p_l,this)},e.prototype.getGodEquipBySuitId=function(e){var p_l=this.getGodEquip(),p_g=this.getInitPartArr();for(var b_s in p_l){var d_u=Config.item_equipment[p_l[b_s].id];d_u&&d_u.suitId==e&&(p_g[d_u.place]=p_l[b_s])}return p_g},e.prototype.getSuitPropStr=function(e,p_l,p_g){void 0===p_l&&(p_l="<br>"),void 0===p_g&&(p_g="#e48f49");var b_s=[(j_x("1514_1855_2364")+j_x("1009_2335_1796")+": "),(j_x("1514_1855_2364")+j_x(1009)+"1"+j_x(1148)+": "),(j_x("1514_1855_2364")+j_x(1009)+"2"+j_x(1148)+": "),(j_x("1514_1855_2364")+j_x(1009)+"3"+j_x(1148)+": "),(j_x("1514_1855_2364")+j_x(1009)+"4"+j_x(1148)+": "),(j_x("1514_1855_2364")+j_x(1009)+"5"+j_x(1148)+": ")],d_u=Config.item_equipment[e],b_e="";if(d_u){var d_m=Config.godEquip_suit[d_u.suitId];for(var d_w in d_m.desc)b_e+=Utils.$("{1}{2}{3}",b_s[d_w],d_m.desc[d_w],p_l)}return b_e},e.prototype.getSuitSkillProp=function(e,p_l){var p_g=Config.godEquip_suit[e];if(5<=p_l&&p_g){var b_s=Config.skill_passive_godEquip[e];if(b_s)return CharacterProperty.getPropertys(b_s.featureParam)}return[]},e.prototype.getChangeEquip=function(e,p_l,p_g){void 0===p_g&&(p_g=null);for(var b_s=[],d_u=0,b_e=p_g=p_g||this.getBagInfo();d_u<b_e.length;d_u++){var d_m=b_e[d_u],d_w=Config.CItem(d_m.id);d_w&&d_w.mainclass===ItemTypeDefine.EQUIPMENT&&0==this.canWearEquip(d_w)&&p_l==d_w.place&&e==d_w.suitId&&b_s.push(d_m)}return b_s.sort((function(e,p_l){return p_l.fighting-e.fighting})),b_s},e.prototype.hasChangeEquip=function(e,p_l,p_g,b_s){for(var d_u=0,b_e=b_s;d_u<b_e.length;d_u++){var d_m=b_e[d_u],d_w=Config.CItem(d_m.id);if(d_w&&d_w.mainclass===ItemTypeDefine.EQUIPMENT&&d_w.subclass===EquipSubClassDefine.EquipGod&&d_w.place===e&&0===this.canWearEquip(d_w)&&p_g==d_w.suitId&&d_m.fighting>(p_l||0))return!0}return!1},e.prototype.getSuitPropByInfos=function(e,p_l){var p_g=[];if(null==e)return p_g;for(var b_s in e)if(e[b_s]){var d_u=e[b_s].id,b_e=Config.item_equipment[e[b_s].id];b_e&&b_e.suitId,CharacterProperty.mergePropertys(p_g,this.godEquipBaseProp(d_u)),CharacterProperty.mergePropertys(p_g,this.godEquipGodProp(d_u))}return p_g},e.prototype.godEquipBaseProp=function(e){var p_l=Config.item_equipment[e];return p_l?CharacterProperty.getPropertys(p_l.basePropFixed):[]},e.prototype.getSuitFightByInfos=function(e,p_l,p_g){var b_s;return void 0===p_g&&(p_g=null),b_s=null==p_g?this.getSuitPropBySuitId(e,p_l):this.getSuitPropByInfos(p_g,p_l),this.getStarPropByStar(e,p_l,b_s),b_p.calPropFight(b_s)},e.prototype.canComposeGodEquip=function(e){var p_l=Config.item_equipment[e],p_g=this.suitCompose[p_l.suitId];if(!p_g)return!1;var b_s=p_g.type2Info,d_u=null,b_e=null,d_m=!1;for(var d_w in b_s)if(parseInt(d_w)>p_l.star)for(var f_t in b_s[d_w]){var v_z=b_s[d_w][f_t];if(b_e=Config.item_compose[v_z],d_m=!1,(d_u=Config.item_equipment[v_z])&&b_e){for(var d_h in b_e.needItem)b_e.needItem[d_h][0]==e&&(d_m=!0);d_u.place==p_l.place&&d_m&&ItemComposeModel.instance.canCompose(v_z,1,!0)}}},e.prototype.canWearEquip=function(e){if(!LgcM.ins.heroVo)return 0;var p_l=StateModel.instance.getStateLv(),p_g=LgcM.ins.heroVo.level;return e.stateLevel&&p_l<e.stateLevel?2:e.level&&p_g<e.level?3:0},e.prototype.redPointSuit=function(e,p_l){var p_g=this.getGodEquipBySuitId(e);for(var b_s in p_g){var d_u=p_g[b_s]?p_g[b_s].fighting:0;if(this.hasChangeEquip(parseInt(b_s),d_u,e,p_l))return!0}return!1},e.prototype.redPoint=function(e,p_l,p_g){void 0===e&&(e=0),void 0===p_l&&(p_l=0),void 0===p_g&&(p_g=null);var b_s=this.getBagInfo();if(0!=e&&0!=p_l){var d_u=p_g?p_g.fighting:0;return this.hasChangeEquip(e,d_u,p_l,b_s)}var b_e=this.godSuitArr;for(var d_m in b_e)if(this.redPointSuit(b_e[d_m],b_s))return!0;return!1},e.prototype.onLookGodeEquip=function(e){if(this._godEquipArray=[],e.godEquip)for(var p_l=0,p_g=e.godEquip;p_l<p_g.length;p_l++)for(var b_s=0,d_u=p_g[p_l].equipList;b_s<d_u.length;b_s++){var b_e=d_u[b_s];b_e<10||this._godEquipArray.push(b_e)}},e.starNum=5,e}();!function(e){e[e.head=2]="head",e[e.chest=4]="chest",e[e.shoulder=3]="shoulder",e[e.cuff=4]="cuff",e[e.belt=5]="belt",e[e.shoes=8]="shoes",e[e.hand=5]="hand",e[e.jewelry=9]="jewelry"}(GodEpType=GodEpType||{});var n_o=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.getEquipClipIndex=function(e){return Mic(e)},e.prototype.reqGodEquipWear=function(e){var p_l=new c2m_godEquip_wear;p_l.uuid=e,DB.instance.query(c2m_godEquip_wear,p_l)},e}(),EquipPart,EquipDefine,EquipSubClassDefine,EquipModel=function(){function e(){this._infoVos=[]}return e.prototype.getEquips=function(){for(var e=[],p_l=BagModel.instance.getItemInfosByBagType(BagTypeDefine.BAG_TYPE_EQUIPMENT),p_g=0;p_g<12;++p_g){for(var b_s=p_g+1,d_u=void 0,b_e=0;b_e<p_l.length;++b_e)if(p_l[b_e].place===b_s){d_u=p_l[b_e];break}e.push(d_u)}return e},e.prototype.reqWearEquip=function(e,p_l){void 0===p_l&&(p_l=0);var p_g=new c2m_wear_equip;p_g.uuid=e,p_g.targetPid=p_l,DB.instance.query(c2m_wear_equip,p_g)},e.prototype.canWearEquip=function(e,p_l){if(p_l&&0!=e.entryId&&e.entryId!==p_l)return 1;if(!LgcM.ins.heroVo)return 0;var p_g=StateModel.instance.getStateLv(),b_s=LgcM.ins.heroVo.level;return e.stateLevel&&p_g<e.stateLevel?2:e.level&&b_s<e.level?3:0},e.prototype.isEquipTips=function(e,p_l,p_g){if(e.fighting&&0<e.fighting){var b_s=Config.item_equipment[e.id];if(!b_s||b_s.subclass!=EquipSubClassDefine.EquipRole)return!1;if(0!==this.canWearEquip(b_s,p_l))return!1;var d_u=(p_g=p_g||BagModel.instance.getEquipInfos())[e.place-1];if(!d_u||d_u.fighting<e.fighting)return!0}return!1},e.prototype.getEquipByPlace=function(e){for(var p_l=BagModel.instance.getItemInfosByBagType(BagTypeDefine.BAG_TYPE_EQUIPMENT),p_g=0;p_g<p_l.length;++p_g)if(p_l[p_g].place===e)return p_l[p_g];return null},e.prototype.getChangeEquip=function(e,p_l){for(var p_g=[],b_s=0,d_u=BagModel.instance.getItemsByItemType(BagTypeDefine.BAG_TYPE_ITEM,1,1);b_s<d_u.length;b_s++){var b_e=d_u[b_s],d_m=Config.CItem(b_e.id);if(d_m&&d_m.mainclass===ItemTypeDefine.EQUIPMENT){var d_w=d_m;0!==d_w.entryId&&d_w.entryId!==e||d_w.place!==p_l||p_g.push(b_e)}}return p_g},e.prototype.calcEquipFight=function(e){var p_l=Config.item_equipment[e.id];if(!p_l)return 0;var p_g=CharacterProperty.calEquipFight(p_l.basePropFixed);if(e.dynamic&&""!=e.dynamic){var b_s=JSON.parse(e.dynamic);b_s&&0<=b_s[2].length&&(p_g+=CharacterProperty.calEquipFight(b_s[2]))}else p_l.subclass==EquipSubClassDefine.EquipGod&&(p_g+=CharacterProperty.calEquipFight(p_l.godPropFixed));return e.fighting=p_g},e.prototype.hasChangeEquip=function(e,p_l,p_g){for(var b_s=0,d_u=BagModel.instance.getItemsByItemType(BagTypeDefine.BAG_TYPE_ITEM,1,1);b_s<d_u.length;b_s++){var b_e=d_u[b_s],d_m=Config.CItem(b_e.id);if(d_m&&d_m.mainclass===ItemTypeDefine.EQUIPMENT&&d_m.subclass===EquipSubClassDefine.EquipRole&&d_m.place===p_l&&0===this.canWearEquip(d_m,e)&&b_e.fighting>(p_g||0))return!0}return!1},e.prototype.updaDataforEquipTip=function(e){if(0<this._infoVos.length){var p_l=!0;for(var p_g in this._infoVos)if(e.place===this._infoVos[p_g].place){this._infoVos[p_g].fighting<e.fighting&&(this._infoVos[p_g]=e),p_l=!1;break}p_l&&this._infoVos.push(e)}else this._infoVos.push(e)},Object.defineProperty(e.prototype,"itemData",{get:function(){return this._infoVos},enumerable:!0,configurable:!0}),e.prototype.clearInfo=function(){Ykf(this)},e.instance=new e,e}();!function(e){e[e.WEAPON=1]="WEAPON",e[e.CLOTHES=4]="CLOTHES",e[e.RING=9]="RING",e[e.NECKLACE=10]="NECKLACE",e[e.BRACELET=11]="BRACELET",e[e.BREASTPLATE=12]="BREASTPLATE"}(EquipPart=EquipPart||{}),function(e){e[e.PartNum=12]="PartNum",e[e.RidePartNum=6]="RidePartNum",e[e.TalisNum=5]="TalisNum",e[e.GodNum=6]="GodNum"}(EquipDefine=EquipDefine||{}),function(e){e[e.EquipRole=1]="EquipRole",e[e.EquipRide=3]="EquipRide",e[e.EquipTalis=4]="EquipTalis",e[e.EquipGod=5]="EquipGod"}(EquipSubClassDefine=EquipSubClassDefine||{});var v_w=function(){},BaseRide=function(){function e(){this.lv=0,this.exp=0,this.star=0,this.isActive=!1}return Object.defineProperty(e.prototype,"id",{get:function(){return this.rid},enumerable:!0,configurable:!0}),e}(),RideColorType,RideModel=function(){function e(){}return e.prototype.init=function(){for(var e in this._rideList=[],Config.ride_ride){var p_l=new BaseRide;p_l.rid=Config.ride_ride[e].id,this._rideList.push(p_l)}for(var p_g in this.rideItemIds=[],Config.ride_ride)(b_s=Config.ride_ride[p_g]).itemActive&&this.rideItemIds.indexOf(b_s.itemActive[0][0])<0&&this.rideItemIds.push(b_s.itemActive[0][0]);for(var p_g in Config.ride_rideLevel){var b_s;(b_s=Config.ride_rideLevel[p_g]).cost&&this.rideItemIds.indexOf(b_s.cost[0][0])<0&&this.rideItemIds.push(b_s.cost[0][0])}},Object.defineProperty(e.prototype,"rideList",{get:function(){return null==this._rideList?[]:(this._rideList=this._rideList.sort(this.sortCompare),this._rideList)},enumerable:!0,configurable:!0}),e.prototype.sortCompare=function(p_l,p_g){var b_s=e.instance.canActiveRide(p_l.rid)?0:1,d_u=e.instance.canActiveRide(p_g.rid)?0:1;if(b_s!=d_u||1!=d_u)return b_s-d_u;var b_e=p_l.isActive?0:1,d_m=p_g.isActive?0:1;return b_e==d_m?p_l.rid-p_g.rid:b_e-d_m},e.prototype.updateRideInfo=function(e){for(var p_l in this._rideList)if(this._rideList[p_l].rid==e.rid){this._rideList[p_l].lv=e.lv,this._rideList[p_l].exp=e.exp,this._rideList[p_l].star=e.star,this._rideList[p_l].isActive=e.isActive;break}},e.prototype.getEquipInfos=function(){for(var e=BagModel.instance.getItemsByItemType(BagTypeDefine.BAG_TYPE_RIDE,ItemTypeDefine.EQUIPMENT),p_l=[],p_g=0;p_g<EquipDefine.RidePartNum;++p_g){for(var b_s=p_g+1,d_u=void 0,b_e=0;b_e<e.length;++b_e)if(e[b_e].place==b_s){d_u=e[b_e];break}p_l.push(d_u)}return p_l},e.prototype.isBetterEquip=function(e,p_l){if(e.fighting&&0<e.fighting){Config.item_equipment[e.id];var p_g=(p_l=p_l||this.getEquipInfos())[e.place-1];if(!p_g||p_g.fighting<e.fighting)return!0}return!1},e.toLevelCnfIndex=function(e,p_l){return Cqq(e,p_l)},e.prototype.oneKeyWear=function(){for(var p_l=BagModel.instance.getItemInfosByBagType(BagTypeDefine.BAG_TYPE_ITEM),p_g=this.getEquipInfos(),b_s=[],d_u=0,b_e=p_l;d_u<b_e.length;d_u++){var d_m=b_e[d_u];if(this.isBetterEquip(d_m,p_g)){var d_w=d_m.place,f_t=b_s[d_w-1];(!f_t||f_t.fighting<d_m.fighting)&&(b_s[d_w-1]=d_m)}}for(var v_z=0,d_h=b_s;v_z<d_h.length;v_z++){var r_t=d_h[v_z];r_t&&e.instance.reqRideWear(r_t.uuid)}},e.prototype.isWearRide=function(e){return Gkn(e,b_p)},e.prototype.getRideInfoByRid=function(e){return Irz(e,this)},Object.defineProperty(e.prototype,"activeNum",{get:function(){var e=0;for(var p_l in this._rideList)this._rideList[p_l].isActive&&(e+=1);return e},enumerable:!0,configurable:!0}),e.prototype.canFeedRide=function(p_l){if(void 0===p_l&&(p_l=0),!p_k.instance.checkSystemOpen(FuncDefine.ride))return!1;if(!this._rideList)return!1;if(!p_l){for(var p_g in this._rideList){var b_s=this._rideList[p_g];if(b_s.isActive&&!this.isMaxLv(b_s.rid,b_s.lv)){var d_u=e.toLevelCnfIndex(b_s.rid,b_s.lv),b_e=Config.ride_rideLevel[d_u];if(b_e&&BagModel.instance.getItemCountByItemID(b_e.cost[0][0],BagTypeDefine.BAG_TYPE_ITEM)>=b_e.cost[0][1])return!0}}return!1}var d_m=this.getRideInfoByRid(p_l);if(!d_m)return!1;if(!d_m.isActive)return!1;var d_w=e.toLevelCnfIndex(d_m.rid,d_m.lv),f_t=Config.ride_rideLevel[d_w];return!!f_t&&BagModel.instance.getItemCountByItemID(f_t.cost[0][0],BagTypeDefine.BAG_TYPE_ITEM)>=f_t.cost[0][1]},e.prototype.canActiveRide=function(e){if(void 0===e&&(e=0),!p_k.instance.checkSystemOpen(FuncDefine.ride))return!1;if(!this._rideList)return!1;if(!e){for(var p_l in this._rideList){var p_g=this._rideList[p_l];if(!p_g.isActive&&null!=Config.ride_ride[p_g.rid].itemActive){var b_s=Config.ride_ride[p_g.rid].itemActive[0][0];if(Config.ride_ride[p_g.rid].itemActive[0][1]<=BagModel.instance.getItemCountByItemID(b_s))return!0}}return!1}if(!this.getRideInfoByRid(e))return!1;if(this.getRideInfoByRid(e).isActive)return!1;if(null==Config.ride_ride[e].itemActive)return!1;var d_u=Config.ride_ride[e].itemActive[0][0];return Config.ride_ride[e].itemActive[0][1]<=BagModel.instance.getItemCountByItemID(d_u)},e.prototype.isCanFeed=function(p_l){var p_g=e.toLevelCnfIndex(p_l.rid,p_l.lv),b_s=Config.ride_rideLevel[p_g],d_u=this.getUpStarCnf(p_l.rid,p_l.star,!0),b_e=!1;return!(d_u&&d_u.limitLv<=p_l.lv)&&(b_s&&BagModel.instance.getItemCountByItemID(b_s.cost[0][0],BagTypeDefine.BAG_TYPE_ITEM)>=b_s.cost[0][1]&&(b_e=!0),b_e)},e.prototype.isRideUp=function(e){var p_l=e.rid,p_g=!1;if(e.isActive){var b_s=this.getRideShowVo(e);b_s.isShowMax||(p_g=this.isCanFeed(e)||this.isCanUpStar(e,b_s))}else{var d_u=Config.ride_ride[p_l].itemActive;if(d_u){var b_e=d_u[0][0],d_m=d_u[0][1];p_g=z_j.isGoodEnough(b_e,d_m)}}return p_g},e.prototype.canRideUp=function(e){if(void 0===e&&(e=0),!p_k.instance.checkSystemOpen(FuncDefine.ride))return!1;if(!this._rideList)return!1;var p_l,p_g=!1;if(e)return(p_l=this.getRideInfoByRid(e))&&SkillModel.instance.isRedPoint(p_l.id,p_l.lv,p_l.star,PassiveSkillType.MOUNT)&&(p_g=!0),!!this.isRideUp(p_l)||p_g;for(var b_s in this._rideList)if(p_l=this._rideList[b_s],SkillModel.instance.isRedPoint(p_l.id,p_l.lv,p_l.star,PassiveSkillType.MOUNT)&&(p_g=!0),this.isRideUp(p_l))return!0;return p_g},e.prototype.getRideShowVo=function(e){var p_l=new v_w;if(!e.isActive)return p_l;var p_g,b_s,d_u=this.isMaxLv(e.rid,e.lv);return d_u||(b_s=this.getUpStarCnf(e.rid,e.star,!0)),p_g=!d_u,p_l.isShowFeed=p_g,p_l.isShowMax=d_u,p_l.isShowStar=!1,p_l.starCnf=b_s,p_l},e.prototype.isCanUpStar=function(p_l,p_g){void 0===p_g&&(p_g=null);var b_s=!1,d_u=(p_g=p_g||e.instance.getRideShowVo(p_l)).starCnf;if(d_u&&d_u.cost){var b_e=d_u.cost,d_m=b_e[0][0],d_w=b_e[0][1];b_s=z_j.isGoodEnough(d_m,d_w)}return b_s},e.prototype.isMaxExp=function(p_l){var p_g=!1,b_s=e.toLevelCnfIndex(p_l.rid,p_l.lv),d_u=Config.ride_rideLevel[b_s];return d_u&&p_l.exp>=d_u.num&&(p_g=!0),p_g},e.prototype.isShowUpStar=function(e){return Qhm(e,this)},e.prototype.getRidePropById=function(p_l){for(var p_g=[],b_s=0,d_u=this._rideList;b_s<d_u.length;b_s++){var b_e=d_u[b_s];if(b_e.rid==p_l){if(b_e.isActive){var d_m=Config.ride_ride[b_e.rid],d_w=e.toLevelCnfIndex(b_e.rid,b_e.lv),f_t=Config.ride_rideLevel[d_w],v_z=CharacterProperty.getPropertys(d_m.attr),d_h=CharacterProperty.getPropertys(f_t.attr,b_e.exp/f_t.num),r_t=CharacterProperty.getPropertys(f_t.lvAttr);CharacterProperty.mergePropertys(p_g,v_z),CharacterProperty.mergePropertys(p_g,d_h),CharacterProperty.mergePropertys(p_g,r_t)}break}}return p_g},Object.defineProperty(e.prototype,"ridePropInfo",{get:function(){for(var p_l=[],p_g=0,b_s=this._rideList;p_g<b_s.length;p_g++){var d_u=b_s[p_g];if(d_u.isActive){var b_e=Config.ride_ride[d_u.rid],d_m=e.toLevelCnfIndex(d_u.rid,d_u.lv),d_w=Config.ride_rideLevel[d_m],f_t=CharacterProperty.getPropertys(b_e.attr),v_z=CharacterProperty.getPropertys(d_w.attr,d_u.exp/d_w.num),d_h=CharacterProperty.getPropertys(d_w.lvAttr);CharacterProperty.mergePropertys(p_l,f_t),CharacterProperty.mergePropertys(p_l,v_z),CharacterProperty.mergePropertys(p_l,d_h)}}return p_l},enumerable:!0,configurable:!0}),e.prototype.isMaxLv=function(p_l,p_g){return Uku(p_l,p_g,e,Config)},e.prototype.reqRideActive=function(e){var p_l=new c2m_ride_active;p_l.id=e,DB.instance.query(c2m_ride_active,p_l)},e.prototype.pbRideUpStar=function(e){Wuo(e,LED,l_r)},e.prototype.reqRideOp=function(e,p_l){var p_g=new c2m_ride_op;p_g.id=e,p_g.op=1,DB.instance.query(c2m_ride_op,p_g)},e.prototype.reqRideWear=function(e){var p_l=new c2m_ride_wear;p_l.uuid=e,DB.instance.query(c2m_ride_wear,p_l)},e.prototype.initUpStarCnf=function(){var e;for(var p_l in this._starCnfs={},Config.ride_rideStar)e=Config.ride_rideStar[p_l],this._starCnfs[e.rideId+"_"+e.limitLv]=e,this._starCnfs["star"+e.rideId+"_"+e.star]=e},e.prototype.getUpStarCnf=function(e,p_l,p_g){return void 0===p_g&&(p_g=!1),this._starCnfs||this.initUpStarCnf(),p_g?this._starCnfs["star"+e+"_"+p_l]:this._starCnfs[e+"_"+p_l]},e.prototype.pbRideCombine=function(e){Iug(e,LED,l_r)},e.prototype.pbRideUpdate=function(e){for(var p_l=e.ride,p_g=0;p_g<this._rideList.length;++p_g)if(this._rideList[p_g].rid==p_l.id){if(this._rideList[p_g].lv=p_l.lv,this._rideList[p_g].exp=p_l.exp,this._rideList[p_g].star=p_l.star,!this._rideList[p_g].isActive){var b_s=Config.ride_ride[p_l.id],d_u="";b_s.desc&&(d_u=b_s.desc);var b_e=Utils.$((j_x("2335_1796")+"{1}"),d_u);b_p.broadcastNotice(b_e,1)}this._rideList[p_g].isActive=!0;break}LED.event(l_r.RIDE_PER_UPDATE)},e.prototype.reqRideFeed=function(e){var p_l=new c2m_ride_feed;p_l.id=e,DB.instance.query(c2m_ride_feed,p_l)},e.prototype.isStarMaxLv=function(p_l,p_g,b_s){return Sev(p_l,p_g,b_s,e)},e.prototype.getFightById=function(e){return e.isActive?b_p.calPropFight(this.getRidePropById(e.rid)):0},e.prototype.reqRideAutoFeed=function(e){DB.instance.query(c2m_ride_auto_feed,{id:e})},e.prototype.pbRideActive=function(e){Myz(e)},e.prototype.getActVoByType=function(e){var p_l=this.rideList,p_g=[];for(var b_s in p_l){var d_u=Config.ride_ride[p_l[b_s].rid];for(var b_e in e)p_l[b_s].isActive&&d_u.propType==e[b_e]&&p_g.push(p_l[b_s])}return p_g},e.prototype.calActiveFight=function(e){var p_l,p_g=Config.ride_ride[e],b_s=0;return p_g&&(p_l=b_p.addProps(p_g.attr,1,p_l),b_s=b_p.calPropFight(p_l)),b_s},e.prototype.pbRideList=function(e){var p_l=e.rides,p_g=new BaseRide;for(var b_s in p_l)p_g.rid=p_l[b_s].id,p_g.lv=p_l[b_s].lv,p_g.exp=p_l[b_s].exp,p_g.star=p_l[b_s].star,p_g.isActive=!0,this.updateRideInfo(p_g);LED.event(l_r.RIDE_LIST_UPDATE)},e.prototype.getBasePropById=function(p_l){var p_g=e.toLevelCnfIndex(p_l.rid,p_l.lv),b_s=Config.ride_rideLevel[p_g];if(b_s)return CharacterProperty.getPropertys(b_s.lvAttr)},e.prototype.reqRideInfo=function(){DB.instance.query(c2m_ride_info,new c2m_ride_info)},e.prototype.reqRideCombine=function(e,p_l){if(0<p_l){var p_g=new c2m_ride_combine;p_g.itemId=e,p_g.times=p_l,DB.instance.query(c2m_ride_combine,p_g)}},e.prototype.reqRideUpStar=function(e){DB.instance.query(c2m_ride_up_star,{id:e})},e.instance=new e,e}();!function(e){e[e.blue=0]="blue",e[e.violet=1]="violet",e[e.orange=2]="orange",e[e.red=3]="red"}(RideColorType=RideColorType||{});var FindFBType,ResourceBackMode=function(){function e(){this.isOneKeyAllget_vip=!1,this.isOneKeyAllget_free=!1}return e.prototype.initResInfo=function(){for(var e in this.restoreData=[],this.restoreData_free=[],Config.restore_restore){var p_l=new ResourceInfo_vip,p_g=new ResourceInfo_free;switch(p_g.id=p_l.id=Config.restore_restore[e].id,p_g.name=p_l.name=Config.restore_restore[e].name,p_g.freeCount=Config.restore_restore[e].freeCount,p_g.freeBuyCount=0,p_l.vipStatus=p_l.freeStatus=0,p_l.vipBuyCost=Config.restore_restore[e].vipBuyCost,p_l.vipBuyCount=0,p_g.vipStatus=p_g.freeStatus=0,p_l.id){case FindFBType.restoreReward1:p_l.freeReward=Config.recharge_vip[this.heroVo.vipLv].restoreReward1,p_g.freeReward=Config.restore_restore[e].freeReward,Config.restore_restore[e].freeCount,p_l.freeCount=Config.recharge_vip[this.heroVo.vipLv].restore1;break;case FindFBType.restoreReward2:p_l.freeReward=Config.recharge_vip[this.heroVo.vipLv].restoreReward2,p_g.freeReward=Config.restore_restore[e].freeReward,p_l.freeCount=Config.recharge_vip[this.heroVo.vipLv].restore2;break;case FindFBType.restoreReward3:p_l.freeReward=Config.recharge_vip[this.heroVo.vipLv].restoreReward3,p_g.freeReward=Config.restore_restore[e].freeReward,p_l.freeCount=Config.recharge_vip[this.heroVo.vipLv].restore3;break;case FindFBType.restoreReward4:p_l.freeReward=Config.recharge_vip[this.heroVo.vipLv].restoreReward4,p_g.freeReward=Config.restore_restore[e].freeReward,p_l.freeCount=Config.recharge_vip[this.heroVo.vipLv].restore4;break;case FindFBType.restoreReward5:p_l.freeReward=Config.recharge_vip[this.heroVo.vipLv].restoreReward5,p_g.freeReward=Config.restore_restore[e].freeReward,p_l.freeCount=Config.recharge_vip[this.heroVo.vipLv].restore5;break;case FindFBType.restoreReward6:p_l.freeReward=Config.recharge_vip[this.heroVo.vipLv].restoreReward6,p_g.freeReward=Config.restore_restore[e].freeReward,p_l.freeCount=Config.recharge_vip[this.heroVo.vipLv].restore6}this.restoreData_free.push(p_g),this.restoreData.push(p_l)}},e.prototype.wipeFBNotOpen=function(){var e=this.restoreData.slice();for(var p_l in e)e[p_l].id==FindFBType.restoreReward2?p_k.instance.checkSystemOpen(FuncDefine.pagoda)||(this.restoreData.splice(this.getIndex_vip(e[p_l].id),1),this.restoreData_free.splice(this.getIndex_free(e[p_l].id),1)):e[p_l].id==FindFBType.restoreReward3?p_k.instance.checkSystemOpen(FuncDefine.personBoss)||(this.restoreData.splice(this.getIndex_vip(e[p_l].id),1),this.restoreData_free.splice(this.getIndex_free(e[p_l].id),1)):e[p_l].id==FindFBType.restoreReward4?p_k.instance.checkSystemOpen(FuncDefine.stateBoss)||(this.restoreData.splice(this.getIndex_vip(e[p_l].id),1),this.restoreData_free.splice(this.getIndex_free(e[p_l].id),1)):e[p_l].id==FindFBType.restoreReward5&&(this.heroVo.guildID||(this.restoreData.splice(this.getIndex_vip(e[p_l].id),1),this.restoreData_free.splice(this.getIndex_free(e[p_l].id),1)))},e.prototype.getIndex_vip=function(e){return Scl(e,this,parseInt)},e.prototype.getIndex_free=function(e){return Ggr(e,this,parseInt)},Object.defineProperty(e.prototype,"RestoreData",{get:function(){return this.restoreData},enumerable:!0,configurable:!0}),e.prototype.getInfobyID_vip=function(e){for(var p_l in this.restoreData)if(this.restoreData[p_l]&&this.restoreData[p_l].id===e)return this.restoreData[p_l];return null},e.prototype.getInfobyIDVIP_restore=function(e){var p_l=[];for(var p_g in this.restoreData)if(this.restoreData[p_g]&&this.restoreData[p_g].id===e)for(var b_s in this.restoreData[p_g].freeReward){var d_u=this.restoreData[p_g].freeReward[b_s].id,b_e=this.restoreData[p_g].freeReward[b_s].num;d_u&&b_e||(d_u=this.restoreData[p_g].freeReward[b_s][0],b_e=this.restoreData[p_g].freeReward[b_s][1]),p_l.push([d_u,b_e])}return p_l},e.prototype.getInfobyID_free=function(e){for(var p_l in this.restoreData_free)if(this.restoreData_free[p_l]&&this.restoreData_free[p_l].id===e)return this.restoreData_free[p_l];return null},e.prototype.getInfobyID_restore=function(e){var p_l=[];for(var p_g in this.restoreData_free)if(this.restoreData_free[p_g]&&this.restoreData_free[p_g].id===e)for(var b_s in this.restoreData_free[p_g].freeReward){var d_u=this.restoreData_free[p_g].freeReward[b_s].id,b_e=this.restoreData_free[p_g].freeReward[b_s].num;p_l.push([d_u,b_e])}return p_l},e.prototype.initReward=function(e,p_l){return Sqg(e,p_l)},Object.defineProperty(e.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),e.prototype.onkeyFind_free=function(){var e=[];for(var p_l in this.restoreData_free)for(var p_g in this.restoreData_free[p_l].freeReward)if(1!=this.restoreData_free[p_l].freeStatus&&0!==this.restoreData_free[p_l].freeCount){var b_s=this.restoreData_free[p_l].freeReward[p_g].id,d_u=Math.floor(this.restoreData_free[p_l].freeReward[p_g].num*this.restoreData_free[p_l].freeCount)<1?1:Math.floor(this.restoreData_free[p_l].freeReward[p_g].num*this.restoreData_free[p_l].freeCount);e.push([b_s,d_u])}return e},e.prototype.isCanOneKeyFind_free=function(){return Uim(p_k,FuncDefine,this)},e.prototype.alreadyResourceBackCount_free=function(e){return Ykh(e,this)},e.prototype.isAllPlay=function(){return Ubd(this)},e.sortFindResourceData=function(e,p_l){return e.vipStatus>p_l.vipStatus||e.freeStatus>p_l.freeStatus?1:e.vipStatus<p_l.vipStatus||e.freeStatus<p_l.freeStatus?-1:0},e.prototype.returnRestourceInfo=function(e){for(var p_l in this.initResInfo(),this.wipeFBNotOpen(),e){for(var p_g in this.restoreData)if(this.restoreData[p_g]&&e[p_l].id==this.restoreData[p_g].id){if(this.restoreData[p_g].freeStatus=e[p_l].freeStatus,this.restoreData[p_g].vipStatus=e[p_l].vipStatus,this.restoreData[p_g].vipBuyCount=e[p_l].vipBuyCount,this.restoreData[p_g].recCount=e[p_l].recCount,-1===e[p_l].vipStatus&&-1===e[p_l].freeStatus){this.restoreData.splice(parseInt(p_g),1);continue}for(var b_s in e[p_l].item.length&&(this.restoreData[p_g].freeReward=[]),e[p_l].item)this.restoreData[p_g]&&this.restoreData[p_g].freeReward.push(e[p_l].item[b_s])}for(var d_u in this.restoreData_free)if(this.restoreData_free[d_u]&&e[p_l].id==this.restoreData_free[d_u].id){if(this.restoreData_free[d_u].freeStatus=e[p_l].freeStatus,this.restoreData_free[d_u].vipStatus=e[p_l].vipStatus,this.restoreData_free[d_u].freeBuyCount=e[p_l].freeBuyCount,this.restoreData_free[d_u].recCount=e[p_l].recCount,-1===e[p_l].freeStatus&&-1===e[p_l].vipStatus){this.restoreData_free.splice(parseInt(d_u),1);continue}for(var b_s in e[p_l].item.length&&(this.restoreData_free[d_u].freeReward=[]),e[p_l].item)this.restoreData_free[d_u]&&this.restoreData_free[d_u].freeReward.push(e[p_l].item[b_s])}}LED.event(l_r.UPDATE_RESTORE),LED.event(l_r.ONE_KEY_FIND)},e.prototype.isCanFindById_vip=function(e){if(!p_k.instance.checkSystemOpen(FuncDefine.ResourceBack))return!1;for(var p_l in this.restoreData)if(this.restoreData[p_l].id===e&&0===this.restoreData[p_l].vipStatus&&0<this.restoreData[p_l].freeCount-this.restoreData[p_l].vipBuyCount)return!0;return!1},e.prototype.onkeyFind_VIP=function(){var e=this.restoreData,p_l=[];for(var p_g in e)for(var b_s in e[p_g].freeReward)if(1!=e[p_g].vipStatus&&this.isCanFindById_vip(e[p_g].id)){var d_u=e[p_g].freeReward[b_s].id,b_e=e[p_g].freeCount;b_e=0===e[p_g].freeCount?1:e[p_g].freeCount;var d_m=e[p_g].freeReward[b_s].num*(b_e-e[p_g].vipBuyCount);p_l.push([d_u,d_m])}return p_l},e.prototype.alreadyResourceBackCount_Vip=function(e){return Cnl(e,this)},e.prototype.isCanoneKeyFind_vip=function(){return Wud(p_k,FuncDefine,this)},e.prototype.reqResInfo=function(){var e=new c2w_restore_info;DB.instance.query(c2w_restore_info,e)},e.prototype.isCanFindById_free=function(e){if(!p_k.instance.checkSystemOpen(FuncDefine.ResourceBack))return!1;for(var p_l in this.restoreData_free)if(this.restoreData_free[p_l].id===e&&0===this.restoreData_free[p_l].freeStatus)return!0;return!1},e.prototype.reqFindResource=function(e,p_l){var p_g=new c2w_get_restore_rec;p_g.id=e,p_g.type=p_l,DB.instance.query(c2w_get_restore_rec,p_g)},e.instance=new e,e}(),ResourceInfo_vip=function(){},ResourceInfo_free=function(){};!function(e){e[e.restoreReward1=1001]="restoreReward1",e[e.restoreReward2=2001]="restoreReward2",e[e.restoreReward3=3001]="restoreReward3",e[e.restoreReward4=4001]="restoreReward4",e[e.restoreReward5=5001]="restoreReward5",e[e.restoreReward6=6001]="restoreReward6"}(FindFBType=FindFBType||{});var n_p=function(){function e(){this.id=0,this.star=0,this.lv=0,this.isActive=!1}return e.prototype.updateData=function(e){Wmw(e,this)},e.prototype.init=function(e){Wib(e,this)},e}(),RefineBodyModel=function(){function e(){this._refineBodyMap=null}return Object.defineProperty(e,"ins",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"refineBodyMap",{get:function(){if(null==this._refineBodyMap){this._refineBodyMap={};var e=Config.training_training;for(var p_l in e){var p_g=new n_p;p_g.init(e[p_l].id),this._refineBodyMap[e[p_l].id]=p_g}}return this._refineBodyMap},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"refineBodyList",{get:function(){var e=this.refineBodyMap,p_l=[];for(var p_g in e)p_l.push(e[p_g]);return p_l},enumerable:!0,configurable:!0}),e.prototype.sortList=function(){var p_l=this.refineBodyList;return p_l.sort((function(p_l,p_g){var b_s=Config.training_training[p_l.id],d_u=Config.training_training[p_g.id];if(p_l.isActive!=p_g.isActive)return!p_g.isActive&&e.ins.isCanAcitve(p_g.id)?1:!p_l.isActive&&e.ins.isCanAcitve(p_l.id)?-1:p_g.isActive?1:p_l.isActive?-1:void 0;if(1==p_g.isActive)return b_s.quality==d_u.quality?p_l.id-p_g.id:d_u.quality-b_s.quality;var b_e=e.ins.isCanAcitve(p_l.id),d_m=e.ins.isCanAcitve(p_g.id);if(d_m!=b_e){if(d_m)return 1;if(b_e)return-1}return p_l.id-p_g.id})),p_l},e.prototype.isCanUpLv=function(e,p_l,p_g){if(void 0===p_l&&(p_l=0),void 0===p_g&&(p_g=!1),1<p_l)return UpState.NOT_UP;var b_s=this.refineBodyMap[e];if(!b_s||!b_s.isActive)return UpState.NOT_ACTIVTED;var d_u=Config.training_trainingLevel[e];return d_u&&d_u.lvUpper>b_s.lv?b_p.checkConsume(this.getLvConsumeByLv(e,b_s.lv+p_l),p_g)?UpState.CAN_UP:UpState.NOT_ENOUGH:(p_g&&b_p.broadcastNotice((j_x("1300_1117_1081")+j_x("1375_15_2342"))),UpState.MAX_UP)},e.prototype.isRedPoint=function(e){if(void 0===e&&(e=0),!p_k.instance.checkSystemOpen(FuncDefine.RefineBody))return!1;var p_l=this.refineBodyMap[e];if(p_l)return this.isCanAcitve(e)||this.isCanUpStar(e,1)==UpState.CAN_UP||this.isCanUpLv(e)==UpState.CAN_UP||SkillModel.instance.isRedPoint(e,p_l.lv,p_l.star,PassiveSkillType.TRAINING);for(var p_g in this.refineBodyMap)if(p_l=this.refineBodyMap[p_g],this.isCanAcitve(p_l.id)||this.isCanUpStar(p_l.id,1)==UpState.CAN_UP||this.isCanUpLv(p_l.id)==UpState.CAN_UP||SkillModel.instance.isRedPoint(p_l.id,p_l.lv,p_l.star,PassiveSkillType.TRAINING))return!0;return!1},e.prototype.getAttrById=function(e,p_l){void 0===p_l&&(p_l=0),this.refineBodyMap;var p_g=this.refineBodyMap[e],b_s=p_g.lv+p_l,d_u=p_g.star;if(this.isCanUpStar(e)!=UpState.MAX_UP&&(d_u+=p_l),p_g&&p_g.isActive||0<b_s&&0<d_u){var b_e=this.getLvAttrByLv(p_g.id,b_s),d_m=CharacterProperty.getPropertys(Config.training_trainingStar[this.getStarIdByStar(p_g.id,d_u)].attr);return b_p.addProps(b_e,1,d_m)}return[]},e.prototype.isAcitve=function(e){return Oeg(e,this)},e.prototype.lvChangeRound=function(p_l){var p_g=Math.floor(p_l/e.roundNum),b_s=p_l%e.roundNum;return 0<b_s&&(p_g+=1),[p_g,b_s]},e.prototype.getLvConsumeByLv=function(e,p_l){void 0===p_l&&(p_l=1);var p_g=Config.training_trainingLevel[e],b_s=[];if(!p_g)return b_s;if(p_l>=p_g.lvUpper)return null;var d_u=0,b_e=p_g.costAdd,d_m={};if(b_e&&0<b_e.length){for(var d_w in b_e)d_u=b_e[d_w][1]*p_l,d_m[b_e[d_w][0]]=d_u;for(var d_w in d_u=0,p_g.cost)d_u=p_g.cost[d_w][1],d_m[p_g.cost[d_w][0]]?d_m[p_g.cost[d_w][0]]+=d_u:d_m[p_g.cost[d_w][0]]=d_u;for(var d_w in d_m)b_s.push([parseInt(d_w),d_m[d_w]])}else b_s=p_g.cost;return b_s},e.prototype.countFightById=function(e){var p_l=this.refineBodyMap[e];if(p_l&&p_l.isActive){var p_g=b_p.calPropFight(this.getLvAttrByLv(p_l.id,p_l.lv)),b_s=CharacterProperty.getPropertys(Config.training_trainingStar[this.getStarIdByStar(p_l.id,p_l.star)].attr);return p_g+b_p.calPropFight(b_s)}return 0},e.prototype.getActiveConsumeById=function(e){var p_l=Config.training_training[e];return p_l&&p_l.itemActive||[]},e.prototype.getStarIdByStar=function(e,p_l){return Sze(e,p_l)},e.prototype.getStarConsumeByStar=function(e,p_l){void 0===p_l&&(p_l=1);var p_g=this.getStarIdByStar(e,p_l),b_s=Config.training_trainingStar[p_g];return b_s?b_s.cost:[]},e.prototype.getLvAttrByLv=function(e,p_l){var p_g=[],b_s=["hpUpper","attack","defense","armorBreak"],d_u=Config.training_trainingLevel[e];if(!d_u)return p_g;if(d_u){var b_e="",d_m="",d_w=0;for(var f_t in b_s)d_w=0,d_w=d_u[d_m=(b_e=b_s[f_t])+"Add"]?d_u[d_m]:0,d_w+=(d_u[b_e]?d_u[b_e]:0)*(p_l-1),p_g.push([b_e,d_w])}return CharacterProperty.getPropertys(p_g)},e.prototype.isCanUpStar=function(e,p_l,p_g){if(void 0===p_l&&(p_l=1),void 0===p_g&&(p_g=!1),1<p_l)return UpState.NOT_UP;var b_s=this.refineBodyMap[e];if(!b_s||!b_s.isActive)return UpState.NOT_ACTIVTED;var d_u=this.getStarIdByStar(b_s.id,b_s.star+p_l),b_e=Config.training_trainingStar[d_u];return b_e?b_p.checkConsume(b_e.cost,p_g)?UpState.CAN_UP:UpState.NOT_ENOUGH:(p_g&&b_p.broadcastNotice((j_x("1300_1117_1081")+j_x("1375_1040_835")+j_x(1035))),UpState.MAX_UP)},e.prototype.getActVoByType=function(e){var p_l=this.refineBodyMap,p_g=[];for(var b_s in p_l){var d_u=Config.training_training[p_l[b_s].id];for(var b_e in e)p_l[b_s].isActive&&d_u.propType==e[b_e]&&p_g.push(p_l[b_s])}return p_g},e.prototype.isCanAcitve=function(e,p_l){if(void 0===p_l&&(p_l=!1),this.isAcitve(e))return!1;var p_g=Config.training_training[e];return!!b_p.checkConsume(p_g.itemActive,p_l)},e.prototype.getFightById=function(e){return Qja(e,this)},e.prototype.getBasePropById=function(e){return Ulq(e,this)},e.roundNum=11,e}(),RefineBodyControl=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.reqInfo=function(){Ssd(this)},e.prototype.reqUpdateActiveInfo=function(e){var p_l=new c2m_training_active;p_l.id=e,DB.instance.query(c2m_training_active,p_l)},e.prototype.reqUpdateUpLv=function(e,p_l){var p_g=new c2m_training_up_lv;p_g.id=e,p_g.num=p_l,DB.instance.query(c2m_training_up_lv,p_g)},e.prototype.reqUpdateInfo=function(){if(p_k.instance.checkSystemOpen(FuncDefine.RefineBody,!0)){var e=new c2m_training_info;DB.instance.query(c2m_training_info,e)}},e.prototype.addEventListener=function(){Oby(DB,m2c_training_info,this,m2c_training_one_info)},e.prototype.removeEventListener=function(){Wut(DB,m2c_training_info,this,m2c_training_one_info)},e.prototype.onUpdateActiveInfo=function(e){var p_l=RefineBodyModel.ins.refineBodyList;for(var p_g in p_l){var b_s=p_l[p_g];e.training.id==p_l[p_g].id&&(0!=b_s.star&&0!=b_s.lv?e.training.star>b_s.star?LED.event(l_r.REFINE_BODY_UP_STAR):e.training.lv>b_s.lv&&LED.event(l_r.REFINE_BODY_UP_LV):LED.event(l_r.REFINE_BODY_ACTIVE),b_s.updateData(e.training))}LED.event(l_r.REFINE_BODY_ONE_INFO)},e.prototype.onUpdateInfo=function(e){var p_l=RefineBodyModel.ins.refineBodyList;for(var p_g in p_l)for(var b_s in e.trainings){var d_u=p_l[p_g];e.trainings[b_s].id==d_u.id&&d_u.updateData(e.trainings[b_s])}LED.event(l_r.REFINE_BODY_INFO)},e.prototype.reqUpdateUpStar=function(e,p_l){var p_g=new c2m_training_up_star;p_g.id=e,p_g.num=p_l,DB.instance.query(c2m_training_up_star,p_g)},e}(),RedPackSendInfoVo=function(){function e(){this.sendArr=[]}return e.prototype.parseData=function(e){if(e)for(var p_l=0,p_g=e.sendArr;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new x_red_envelopes_sendInfo;d_u.key=b_s.key,d_u.rechargeId=b_s.rechargeId,d_u.type=b_s.type,this.sendArr.push(d_u)}},e}(),RedPackRecordInfo=function(){function e(){this.ybNum=0,this.type=0,this.name="",this.time=0,this.rechargeArr=[]}return e.prototype.parseData=function(e){if(e){for(var p_l=0,p_g=e.receiveArr;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new x_red_envelopes_rec_info;d_u.name=b_s.name,d_u.ybNum=b_s.ybNum,d_u.type=b_s.type,d_u.time=b_s.time,this.rechargeArr.push(d_u)}this.ybNum=e.num}},e}(),RedPackReceiveInfoVo=function(){function e(){this.receiveArr=[]}return e.prototype.parseData=function(e){if(e)for(var p_l=0,p_g=e.receiveArr;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new x_red_envelopes_receiveInfo;d_u.key=b_s.key,d_u.rechargeId=b_s.rechargeId,d_u.type=b_s.type,d_u.name=b_s.name,this.receiveArr.push(d_u)}},e}(),RedPackInfoVo=function(){function e(){this.ybNum=0,this.totalNum=0,this.rechargeArr=[],this.headIcon=0,this.name="",this.entryId=0,this.surplusNum=0,this.redNum=0,this.redsurplusNum=0,this.time=0,this.redId=""}return e.prototype.parseData=function(e){if(e){for(var p_l=0,p_g=e.rechargeArr;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new x_red_envelopes_recharge;d_u.name=b_s.name,d_u.pid=b_s.pid,d_u.ybNum=b_s.ybNum,d_u.headIcon=b_s.headIcon,d_u.entryId=b_s.entryId,this.rechargeArr.push(d_u)}this.ybNum=e.ybNum,this.totalNum=e.totalNum,this.headIcon=e.headIcon,this.name=e.name,this.entryId=e.entryId,this.surplusNum=e.surplusNum,this.redNum=e.redNum,this.redsurplusNum=e.redsurplusNum,this.time=e.time,this.redId=e.redId}},e}(),RedPacketModel=function(){function e(){this.sendRedId=[],this.receiveRedId=[],this._endTime=0,this.speed=0,this._sendPackArray=[],this._receivePackArray=[],this.sendRedIdArray=[],this.receiveRedIdArray=[],this._totalNum=0,this._haveSendPackId="",this._clickIndex=0}return Object.defineProperty(e,"ins",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RedPackInfo",{get:function(){return null==this._redPackInfo&&(this._redPackInfo=[]),this._redPackInfo},enumerable:!0,configurable:!0}),e.prototype.reqGetRedSend=function(e,p_l,p_g,b_s){void 0===b_s&&(b_s="");var d_u=c2w_red_envelopes_recharge_send,b_e=new d_u;b_e.redId=e,b_e.channel=p_l,b_e.msg=p_g,b_e.msgParams=b_s,this.sendRedId.forEach((function(p_l,p_g,b_s){p_l.toString()==e&&b_s.splice(p_g,1)})),DB.instance.query(d_u,b_e)},e.prototype.reqRedRecInfo=function(){var e=c2w_red_envelopes_rec_info,p_l=new e;DB.instance.query(e,p_l)},e.prototype.reqGetRedPack=function(){var e=c2w_bg_red_envelopes_receive,p_l=new e;DB.instance.query(e,p_l)},e.prototype.reqGetRedBigInfo=function(){var e=c2w_red_envelopes_recharge_bigInfo,p_l=new e;DB.instance.query(e,p_l)},e.prototype.updateRedPacRecInfo=function(e){Gio(e,LED,l_r)},e.prototype.updateRedRecInfo=function(e){this._redPackInfo=[];var p_l=new RedPackInfoVo;p_l.parseData(e),this._redPackInfo.push(p_l),LED.event(l_r.RED_PACKET_REC_INFO),LED.event(l_r.RED_PACKER_RESULT)},e.prototype.updateRedSendResult=function(e){1==e.ret?(b_p.broadcastNotice((j_x("2224_176_402")+j_x(2142))),this._haveSendPackId=e.redId,LED.event(l_r.RED_PACKER_RESULT),LED.event(l_r.RED_PACKET_SEND_RESULT)):b_p.broadcastNotice((j_x("2224_176_1011")+j_x(1061)))},e.prototype.updateRedBigInfo=function(e){this._sendPackArray=[],this._receivePackArray=[];var p_l=new RedPackSendInfoVo;p_l.parseData(e),this._sendPackArray.push(p_l);var p_g=new RedPackReceiveInfoVo;p_g.parseData(e),this._receivePackArray.push(p_g),LED.event(l_r.RED_PACKET_ALL_INFO)},e.prototype.updateRedRecordInfo=function(e){this._redPackRecordInfo=[];var p_l=new RedPackRecordInfo;p_l.parseData(e),this._redPackRecordInfo.push(p_l),this._totalNum=e.num,LED.event(l_r.RED_PACKET_RECORD_UPDATE)},e.prototype.updateRedAcInfo=function(e){Ydu(e,this,LED,l_r)},e.prototype.updateRedPacInfo=function(e){Elj(e,this,LED,l_r)},e.prototype.reqGetRedRecinfo=function(e){var p_l=c2w_red_envelopes_recharge_receive,p_g=new p_l;p_g.redId=e,this.receiveRedId.forEach((function(p_l,p_g,b_s){p_l==e&&b_s.splice(p_g,1)})),DB.instance.query(p_l,p_g)},e.prototype.stopRedPacketRain=function(e){Ekk(e,LED,l_r)},e}(),CardType,RechargeModel=function(){function e(){this.viplv=0,this.vipreceive=0}return e.prototype.initDatas=function(){if(null==this._rechargeDates){this._rechargeDates=[];var e=Config.recharge_recharge,p_l=void 0;for(var p_g in e)p_l=new RechargeVo,9<=e[p_g].id||(p_l.id=e[p_g].id,p_l.gold=e[p_g].gold,p_l.money=e[p_g].money,this._rechargeDates.push(p_l))}if(null==this._vipreward)for(var p_g in this._vipreward=[],p_l=void 0,e=Config.recharge_vip)(p_l=new VipReward).id=e[p_g].id,p_l.exp=e[p_g].exp,p_l.reward=e[p_g].reward,this._vipreward.push(p_l)},e.prototype.getmonthcardbuy=function(){return Smb(this)},e.prototype.getRechargestatuvo=function(){return Mfx(this)},e.prototype.getDayreward=function(){return Msp(this)},e.prototype.updateVipdate=function(e){return Afe(e,this)},e.prototype.getrechargeDates=function(){return Awn(this)},e.prototype.initRechargeAllList=function(e){if(0<=e){if(!this.heroVo)return;if(0<=this.heroVo.vipLv)return this.initDatas(),this.updateRechargeAll(e),LED.event(l_r.RECHARGE_VIP_INFO,1),this.viplv=this.heroVo.vipLv,this.viplv}return 0},e.prototype.getRechargestatus=function(e){this.initDatas(),this._Rechargestatus=[];var p_l,p_g=e;(p_l=new RechargestatusVo).firstRecharge=p_g.firstRecharge,p_l.firstSingleStall=p_g.firstSingleStall,p_l.firstStall=p_g.firstStall,this._Rechargestatus.push(p_l),LED.event(l_r.RECHARGE_RECHARGESTATUS_INFO),LED.event(l_r.RECHARGE_VIP_INFO)},e.prototype.checkCardCanGet=function(e){if(!this.cardInfos)return!1;var p_l=this.cardInfos[e];if(p_l){var p_g=new Date(1e3*p_l.rewardTime);return p_g.setHours(24),p_g.setMinutes(0),p_g.setSeconds(0),SyncTime.serverTime>p_g.valueOf()}return!1},e.prototype.updateRed=function(){for(var e=this.heroVo.vipLv+1,p_l=1;p_l<=e;++p_l)if(this.GetBit(this.vipreceive,p_l)<=0)return!0;return!1},e.prototype.updateRechargeAll=function(e){return this.vipreceive=e,this.vipreceive&&LED.event(l_r.UPDATE_VIPLV_INFO),this.vipreceive},e.prototype.getMonthCardVo=function(){return Kga(this)},e.prototype.getDayReward=function(e){this._dayreward=[];var p_l,p_g=e;for(var b_s in p_g)(p_l=new MonthCardVo).id=p_g[b_s].id,p_l.rewardTime=p_g[b_s].rewardTime,this._dayreward.push(p_l);this._dayreward,LED.event(l_r.MONTHCARD_BUY_INFO)},e.prototype.GetBit=function(e,p_l){return Omd(e,p_l)},e.prototype.getMonthCardbuyDate=function(p_l){this.initDatas(),this._monthcardbuy=[];var p_g,b_s=p_l;for(var d_u in b_s)(p_g=new MonthCardVo).id=b_s[d_u].id,p_g.rewardTime=b_s[d_u].rewardTime,p_g.startTime=b_s[d_u].startTime,this._monthcardbuy.push(p_g);this._monthcardbuy,e.instance.getmonthinfo(),LED.event(l_r.MONTHCARD_BUY_INFO,p_l.card)},e.prototype.getMonthCardsDate=function(e){this.initDatas(),this._monthcard=[];var p_l,p_g=e.cards;for(var b_s in p_g)(p_l=new MonthCardVo).id=p_g[b_s].id,p_l.rewardTime=p_g[b_s].rewardTime,p_l.startTime=p_g[b_s].startTime,this._monthcard.push(p_l);this._monthcard,LED.event(l_r.MONTHCARD_BUY_INFO,e.cards)},e.prototype.updateViplv=function(e){Cdr(e,this,LED,l_r)},e.prototype.getVipReward=function(){return Yrc(this)},Object.defineProperty(e.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),e.prototype.getvipreward=function(e){var p_l=new c2m_vip_get_reward;p_l.lv=e,DB.instance.query(c2m_vip_get_reward,p_l)},e.prototype.getmonthinfo=function(){var e=new c2m_month_card_info;DB.instance.query(c2m_month_card_info,e)},e.prototype.receivedayreward=function(e){var p_l=new c2m_month_card_reward;p_l.cardId=e,DB.instance.query(c2m_month_card_reward,p_l)},e.prototype.rechargestatus=function(){var e=new c2m_first_recharge_status;DB.instance.query(c2m_first_recharge_status,e)},e.instance=new e,e}(),ReceiveDayReward=function(){},RechargeVo=function(){},RechargestatusVo=function(){},MonthCardVo=function(){},VipReward=function(){};!function(e){e[e.monthcard=101]="monthcard",e[e.weekcard=102]="weekcard",e[e.lifeLongCard=103]="lifeLongCard"}(CardType=CardType||{});var t_d=function(){function e(){this.items=[]}return e.prototype.setRankPageVo=function(e){if(this.items=[],this.rankType=e.type,this.curPage=e.page,this.totalPage=e.pageCount,this.ownIndex=e.myIdx,this.ownTime=e.myTime,this.ownValue=e.myVal,e.item)for(var p_l=0,p_g=e.item;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new n_r;d_u.setRankItemVo(b_s),this.items.push(d_u)}},e.prototype.getCurPage=function(){return Wuc(this)},e.prototype.getRankType=function(){return Ila(this)},e.prototype.setRankPageVo_KF=function(e){if(this.items=[],this.rankType=e.type,this.curPage=e.page,this.totalPage=e.pageCount,this.ownIndex=e.myIdx,this.ownTime=e.myTime,this.ownValue=e.myVal,e.item)for(var p_l=0,p_g=e.item;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new n_r;d_u.setRankItemVo(b_s),this.items.push(d_u)}},e.prototype.hasItems=function(){return this.items&&0<this.items.length},e.prototype.getOwnTime=function(){return Mbz(this)},e.prototype.getTotalPage=function(){return Wic(this)},e.prototype.getItems=function(){return Ale(this)},e.prototype.getOwnIndex=function(){return Ykx(this)},e.prototype.getOwnValue=function(){return Sqz(this)},e}(),RankType,RankFb,RankModel=function(){function e(){this.rankDirection_KF=[],this.rankDirection=[],this.worshipList=[],this.arrLisr=[]}return e.prototype.setRankData=function(e){if(null!=e){var p_l=new t_d;p_l.setRankPageVo(e),this.rankDirection[e.type]=p_l,LED.event(l_r.RANK_UPDATE,e),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.rank)}},e.prototype.onWorshipResult=function(e){Ijh(e,LED,l_r,this)},e.prototype.getRankDirction=function(){return Cah(this)},e.prototype.reqWorshipInfo=function(){var e=new c2m_rank_worship_info;DB.instance.query(c2m_rank_worship_info,e)},e.prototype.checkIsHaveShip=function(){var e=Config.rank_worship;for(var p_l in e)for(var p_g in this.rankDirection)if(this.rankDirection[p_g].hasItems()&&this.rankDirection[p_g].getRankType()==e[p_l].id){var b_s=e[p_l].id;if(0==this.checkIsWorship(b_s))return!0}return!1},e.prototype.getRankDataByType=function(e){return Qte(e,this)},e.prototype.reqGetRank=function(e,p_l){DB.instance.query(c2w_get_rank,{type:e,page:p_l})},e.prototype.onWorshipInfo=function(e){this.worshipList=[];for(var p_l=0,p_g=e.lists;p_l<p_g.length;p_l++){var b_s=p_g[p_l];this.worshipList.push(b_s)}LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.rank),LED.event(l_r.HELPER_UPDATE_INFO),LED.event(l_r.RANK_WORSHIP_INFO,e)},e.prototype.getRankDataByType_KF=function(e){return Ahn(e,this)},e.prototype.checkIsWorship=function(e){for(var p_l in this.rankDirection)if(this.rankDirection[p_l].hasItems()&&this.rankDirection[p_l].getRankType()==e){for(var p_g=0,b_s=this.worshipList;p_g<b_s.length;p_g++)if(b_s[p_g]==e)return!0;return!1}return!0},e.prototype.getWorshipInfo=function(){return Axp(this)},e.prototype.setRankData_KF=function(e){var p_l=new t_d;if(p_l.setRankPageVo_KF(e),this.rankDirection_KF){var p_g=!1;for(var b_s in this.rankDirection_KF)if(this.rankDirection_KF[b_s].getRankType()==e.type){this.rankDirection_KF[b_s]=p_l,p_g=!0;break}p_g||this.rankDirection_KF.push(p_l)}LED.event(l_r.KF_RANK_UPDATE,e)},e.prototype.randomWorshipedPlayer=function(e){var p_l=this.getRankDataByType(e);if(null!=p_l){var p_g=p_l.getItems(),b_s=p_g.length;return p_g[Math.round(Math.random()*b_s)]}},e.prototype.reqRankWorship=function(e){var p_l=new c2m_rank_worship;p_l.type=e,DB.instance.query(c2m_rank_worship,p_l)},e.prototype.getRankDirction_KF=function(){return Szn(this)},e.prototype.reqGetRank_KF=function(e,p_l){DB.instance.query(c2q_get_rank,{type:e,page:p_l})},e.instance=new e,e}(),p_g;p_g=RankType=RankType||{},p_g[p_g.Power=1]="Power",p_g[p_g.Level=2]="Level",p_g[p_g.Talisman=7]="Talisman",p_g[p_g.AsyncPvp=11]="AsyncPvp",p_g[p_g.FbStory=21]="FbStory",p_g[p_g.FbPagoda=22]="FbPagoda",p_g[p_g.Realm=23]="Realm",p_g[p_g.MinePersonal=24]="MinePersonal",p_g[p_g.MineGuild=25]="MineGuild",p_g[p_g.RushPower=101]="RushPower",p_g[p_g.RushTalisman=102]="RushTalisman",p_g[p_g.LimitPvP=103]="LimitPvP",p_g[p_g.LimitGuildCtrb=104]="LimitGuildCtrb",p_g[p_g.LimitYanHui=105]="LimitYanHui",p_g[p_g.LimitActivityPersonal=106]="LimitActivityPersonal",p_g[p_g.LimitActivityGuild=107]="LimitActivityGuild",p_g[p_g.LimitActivityPersonal2=108]="LimitActivityPersonal2",p_g[p_g.LimitActivityGuild2=109]="LimitActivityGuild2",p_g[p_g.MineWarPersonal=110]="MineWarPersonal",p_g[p_g.MineWarGuild=111]="MineWarGuild",p_g[p_g.LimitActivityPersonal_xgmb_festival=112]="LimitActivityPersonal_xgmb_festival",p_g[p_g.LimitActivityGuild_xgmb_festival=113]="LimitActivityGuild_xgmb_festival",p_g[p_g.LimitActivityPersonal_qltb_festival=114]="LimitActivityPersonal_qltb_festival",p_g[p_g.LimitActivityGuild_qltb_festival=115]="LimitActivityGuild_qltb_festival",p_g[p_g.GymkhanaRank=116]="GymkhanaRank",p_g[p_g.LimitPowerGainRank=118]="LimitPowerGainRank",p_g[p_g.LimitTalismanGain=119]="LimitTalismanGain",p_g[p_g.LimitTalismanAptGain=120]="LimitTalismanAptGain",p_g[p_g.LimitTalismanXianYuanGain=121]="LimitTalismanXianYuanGain",p_g[p_g.LimitPowerGainRank_HT=122]="LimitPowerGainRank_HT",p_g[p_g.LimitTalismanGain_HT=123]="LimitTalismanGain_HT",p_g[p_g.LimitTalismanAptGain_HT=124]="LimitTalismanAptGain_HT",p_g[p_g.LimitTalismanXianYuanGain_HT=125]="LimitTalismanXianYuanGain_HT",p_g[p_g.LotterDrawFashionRank=126]="LotterDrawFashionRank",p_g[p_g.LotterDrawRideRank=127]="LotterDrawRideRank",p_g[p_g.LotterDrawDragonRank=136]="LotterDrawDragonRank",p_g[p_g.LotterDrawHeartRank=135]="LotterDrawHeartRank",p_g[p_g.LotterDrawLuckyRank=137]="LotterDrawLuckyRank",p_g[p_g.LotterDrawMarryRank=139]="LotterDrawMarryRank",p_g[p_g.KF_powerGainRank=1003]="KF_powerGainRank",p_g[p_g.KF_talismanGainRank=1004]="KF_talismanGainRank",p_g[p_g.KF_talismanAptRank=1005]="KF_talismanAptRank",p_g[p_g.KF_XianYuanRank=1006]="KF_XianYuanRank",p_g[p_g.KF_asyncPvpRank=1007]="KF_asyncPvpRank",p_g[p_g.DOUBLE_AREA_RANK=1014]="DOUBLE_AREA_RANK",p_g[p_g.KF_RechargeRank=1015]="KF_RechargeRank",p_g[p_g.KF_ConsumeRank=1016]="KF_ConsumeRank",p_g[p_g.BG_asyncPvpScoreGainRank=138]="BG_asyncPvpScoreGainRank",p_g[p_g.OpenserviceLevel=117]="OpenserviceLevel",p_g[p_g.OpenServiceTalisman=128]="OpenServiceTalisman",p_g[p_g.OpenServiceXianYuan=129]="OpenServiceXianYuan",p_g[p_g.OpenServiceRide=130]="OpenServiceRide",p_g[p_g.OpenServiceDragon=131]="OpenServiceDragon",p_g[p_g.OpenServiceCitta=132]="OpenServiceCitta",p_g[p_g.OpenServicePVP=133]="OpenServicePVP",p_g[p_g.OpenServiceFight=134]="OpenServiceFight",p_g[p_g.SerGyRank=140]="SerGyRank",p_g[p_g.KF_marrySweetRank=1008]="KF_marrySweetRank",function(e){e[e.FB_STORY=1]="FB_STORY",e[e.FB_PAGODA=2]="FB_PAGODA"}(RankFb=RankFb||{});var n_r=function(){function e(){}return e.prototype.setRankItemVo=function(e){this.playerId=e.id,this.playName=e.name,this.rankIndex=e.rank,this.value=e.value,this.time=e.time,this.guildId=e.guildId,this.guildName=e.guildName,this.entryId=e.entryId,this.fashionAvatar=e.fashionAvatar,this.fashionClothes=e.fashionClothes,this.fashionWeapon=e.fashionWeapon,this.fight=e.power,e.serverId&&(this.serverId=e.serverId)},e.prototype.getTime=function(){return Esj(this)},e.prototype.getFight=function(){return Was(this)},e.prototype.getPlayName=function(){return Otl(this)},e.prototype.getFashionAvatar=function(){return Apw(this)},e.prototype.getFashionClothes=function(){return Qut(this)},e.prototype.getValue=function(){return Coc(this)},e.prototype.getGuildId=function(){return Qch(this)},e.prototype.getEntryId=function(){return Kte(this)},e.prototype.getRankIndex=function(){return Usd(this)},e.prototype.getGuildName=function(){return Uyk(this)},e.prototype.getFashionWeapon=function(){return Auz(this)},e.prototype.getPlayerId=function(){return Uew(this)},e.prototype.getServerId=function(){return Odw(this)},e}(),RankController=function(){function e(){}return e.prototype.setCurOpenRankType=function(e){Edw(e,this)},e.prototype.getCurOpenRankType=function(){return Qop(this)},e.instance=new e,e}(),PvpShopVo=function(){},PvpRoundTsVo=function(){function e(){}return e.prototype.updateInfo=function(e){if(this.groupId=e.groupId,this.ackTsId=e.tsId,this.atkTsGrade=e.tsGrade,e.allProp)for(var p_l in e.allProp)e.allProp[p_l].ty===Properties.hp.ordinal&&(this.hp=e.allProp[p_l].val)},e}(),PvpRoundInfoVo=function(){function e(){}return e.prototype.updateInfo=function(e){if(this.round=e.round,this.hpMax=e.totalHp,this.hp=e.hp,this.tsamt=e.tsamt,this.tstotal=e.tstotal,this.entryId=e.entryId,this.robot=e.robot,this.tpid=e.tpid,this.name=e.name,this.point=e.point,this.segmentId=e.segmentId,this.state=e.state,this.subState=e.subState,this.skill=e.skill,this.ts=[],e.ts){var p_l=void 0;for(var p_g in e.ts)(p_l=new PvpRoundTsVo).updateInfo(e.ts[p_g]),this.ts.push(p_l)}if(this.ts.length<3){p_l=void 0;for(var b_s=3-this.ts.length,d_u=0;d_u<b_s;d_u++)(p_l=new PvpRoundTsVo).ackTsId=p_l.defTsId=-1,this.ts.push(p_l)}this.enemyAttackTsId=0,this.enemyDefTsId=0,d_x.instance.getAttackVo(d_x.instance.isCross).attackTs=e.tsId},e.prototype.canContinueChallenge=function(){return Mgt(this)},e}(),PvpResultVo=function(){function e(){}return e.prototype.update=function(e){Aof(e,this)},e}(),PvpRecordVo=function(){function e(){this.idx=0,this.pid=0}return e.prototype.parse=function(e){Yjj(e,this)},e.prototype.isEnemy=function(){return this.pid!=b_p.playerId&&5<this.round},e}(),PvpRankVo=function(){},PvpRandomVo=function(){Epg(this)},PvpConfigVo=function(){},PvpChaseKillVo=function(){function e(){}return e.prototype.update=function(e){Qgt(e,this)},e.prototype.updateCs=function(e){Gwg(e,this)},e.prototype.setData=function(e,p_l,p_g,b_s,d_u,b_e){Axl(e,p_l,p_g,b_s,d_u,b_e,this)},e}(),PvpAttackTsVo=function(){function e(){this.tarName=""}return Object.defineProperty(e.prototype,"isActived",{get:function(){return 0<this.attackTs},enumerable:!0,configurable:!0}),e.prototype.reset=function(){Kkw(this)},Object.defineProperty(e.prototype,"sulTime",{get:function(){var e=SyncTime.serverTime/1e3,p_l=Config.global[GlobalDefine.asyncpvp_fight_cd].i_info-(e-this.lastTime);return p_l<=0&&(p_l=0),p_l},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sulNum",{get:function(){var e=d_x.instance.maxNum-this.num;return(e<0||!e)&&(e=0),e},enumerable:!0,configurable:!0}),e}(),PvpAllResultVo=function(){function e(){}return e.prototype.update=function(e){Oyn(e,this)},e}(),PvpDefine=function(){function e(){}return e.toServer=function(e){return e?"s"+e+".":""},e.getServerColor=function(e){return e?"#008931":"#c92828"},e.broad="broad",e.attack="attack",e.round="round",e.record="record",e.showRecord="showRecord",e.searchKill="searchKill",e.tarName="tarName",e.cross=1,e.local=0,e}(),XjwxPlatform=function(){function e(){this._isFirst=!1,this._isBack=!1,this._isLocal=!1,this._isTest=!1}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){GPlatform.isXjWx&&(Sdk.Xjwx.xjwxRegisterPay(this.onXjwxPaySucc.bind(this),this.onXjwxPayError.bind(this)),Sdk.Xjwx.xjwxRegisterShare(this.onShare.bind(this)),Sdk.Xjwx.xjwxInit())},e.prototype.onShare=function(){console.log("onShare",this.title,this.gameIcon,this.query);var e={};return e.title=this.title,e.imageUrl=this.gameIcon,e.query=this.query,e},Object.defineProperty(e.prototype,"query",{get:function(){return this._query||this.xjShareStr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xjShareStr",{get:function(){return"&ch=home_share"},enumerable:!0,configurable:!0}),e.prototype.gameInit=function(){GPlatform.isXjWx&&(RecordManager.instance.sendGetInviteInfo(),this.setQuery())},e.prototype.setQuery=function(){if(!this._query){var e=LgcM.ins.heroVo;this._query="account="+GConfig.inst.account+"&serId="+GConfig.inst.mergSerId+"&pid="+b_p.playerId+"&name="+e.name+this.xjShareStr}},e.prototype.onXjwxPaySucc=function(){Wxd(b_p,j_x,Sdk,this)},e.prototype.onXjwxPayError=function(e){e&&1==e.errCode?b_p.broadcastNotice((j_x("1176_1300_2111")+j_x("1661_837_1199"))):b_p.broadcastNotice((j_x("837_1199_1329")+j_x(271)))},Object.defineProperty(e.prototype,"orderInfo",{get:function(){return RecordManager.instance.orderInfo},enumerable:!0,configurable:!0}),e.prototype.orderParamsBack=function(e){console.log("orderParamsBack",e),e?-12===e.ret?Sdk.Xjwx.xjwxPay(XjwxLoginManager.instance.xjwxData.offerId,100*this.orderInfo.money,XjwxLoginManager.instance.envir):1===e.ret?console.log((j_x("411_2263_402")+j_x(2142))):-13===e.ret&&b_p.broadcastNotice((j_x("1072_799_411")+j_x(2263))):console.log((j_x("531_2111_411")+j_x("2263_1011_1061")))},e.prototype.shareAppMessage=function(e,p_l,p_g){void 0===p_g&&(p_g=!1),GPlatform.isXjWx&&(p_g&&RecordManager.instance.sendInviteInfo(1),console.log("this.query",this.query),Sdk.Xjwx.xjwxShare(this.gameIcon,this.title,this.query))},e.prototype.xjwxShare=function(e){void 0===e&&(e=0),console.log("xjwxShare",e),ShareMgr.ins.reqShare(),this._isLocal||this.shareAppMessage(this.gameIcon,this.title)},Object.defineProperty(e.prototype,"title",{get:function(){return this.initCnf(),this._title||(j_x("155_1998_804")+j_x("1077_1802")+"VIP"+j_x("1644_2308_2343")+j_x(69)+"10000"+j_x("1263_869")+"")},enumerable:!0,configurable:!0}),e.prototype.initCnf=function(){if(!this._icon||!this._title){var e=Config.activity_invite_invite;if(e&&e[1]){var p_l=e[1].shareContent[0];this._icon=Laya.URL.formatURL(p_l.imageUrl),this._title=p_l.title}}},Object.defineProperty(e.prototype,"gameIcon",{get:function(){return this.initCnf(),this._icon||GPlatform.shareIcon},enumerable:!0,configurable:!0}),e.prototype.report=function(){if(GPlatform.isXjWx)try{XjwxLoginManager.instance.gameLoad()}catch(e){console.log((j_x("1675_1825_594")+j_x(1329)+"========="))}},e.prototype.recharge=function(e,p_l){var p_g=XjwxLoginManager.instance.xjwxData;if(p_g){this._payVo||(this._payVo=new XjwxPayVO),this._isTest&&(e=.01);var b_s={};b_s.time=Math.floor((new Date).getTime()/1e3),b_s.openid=p_g.openid;var d_u=RecordManager.instance.getSign(b_s).toUpperCase();this._payVo.setData(p_g.openid,p_l,100*e,this.payAddr,GPlatform.serID+"",100*e+(j_x("1263_869")),d_u),Sdk.Xjwx.gameUserPay(this._payVo),this._serVo||(this._serVo=new WxServiceVo,this._serVo.setData(this.serSuccess.bind(this),this.serFail.bind(this),this.rechargeIcon)),Sdk.Xjwx.openCustomerSer(this._serVo)}},e.prototype.serSuccess=function(e){Eeo(e,console)},Object.defineProperty(e.prototype,"rechargeIcon",{get:function(){return GPlatform.rechargeIcon},enumerable:!0,configurable:!0}),e.prototype.serFail=function(e){Ctu(e,console)},Object.defineProperty(e.prototype,"payAddr",{get:function(){var e="https://center.dldlsw.com";return 1e4<=GPlatform.serID&&(e="https://center-test.dldlsw.com"),e+RecordManager.API_AGENTORDER},enumerable:!0,configurable:!0}),e.prototype.onXjSendComplete=function(e){console.log("onXjSendComplete",e),1==e&&console.log((j_x("1067_594_402")+j_x(2142)))},e.prototype.sendRegister=function(){GPlatform.isXjWx&&console.log("sendRegister")},e}(),WXPlatform=function(){function e(){this._inGameTime=-1,this._isTest=!1}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.initGameTime=function(){GPlatform.isWx&&-1===this._inGameTime&&(this._inGameTime=SyncTime.serverTime)},e.prototype.payCallback=function(e){1===e.ret?(b_p.broadcastNotice((j_x("2258_2376_402")+j_x(2142)),BroadcastType.WIN),RechargeModel.instance.rechargestatus(),RechargeModel.instance.getmonthinfo()):b_p.broadcastNotice((j_x("2258_2376_1011")+j_x(1061)))},e.prototype.init=function(){GPlatform.isWx&&(Sdk.Dlwx.dlwxRegisterShare(this.onShare.bind(this)),Sdk.Dlwx.dlwxInit())},e.prototype.orderParamsBack=function(e){if(e&&1===e.ret){var p_l=e.content,p_g=-1===this._inGameTime?0:SyncTime.serverTime-this._inGameTime;p_g=Math.floor(p_g/1e3);var b_s=p_l.product_id,d_u=Config.recharge_recharge[b_s],b_e=d_u?d_u.gold:p_l.gold,d_m=LgcM.ins.heroVo,d_w=GConfig.inst,f_t=GConfig.inst.record_Domain+RecordManager.API_PAY,v_z={};v_z.total_charge=100*p_l.rmb,v_z.currency_code="RMB",v_z.async_callback_url=f_t,v_z.server_id=d_w.server,v_z.out_trade_no=p_l.order_id,v_z.product_amount=1,v_z.product_desc=b_e+(j_x("1263_869")),v_z.product_id=p_l.product_id,v_z.product_name=b_e+(j_x("1263_869")),v_z.rate=p_l.gold_rate,v_z.role_id=d_m.id,v_z.role_name=d_m.name,v_z.role_level=d_m.level,v_z.role_online_time=p_g,v_z.role_server=d_w.serverName,v_z.role_type=d_m.entryId,v_z.role_gender=1===d_m.entryId?"male":"female",v_z.association_id=d_m.guildID,v_z.association_name=d_m.guildName,v_z.association_rank=-1,Sdk.DalanWx.mnBuy(v_z,this.logoutCallback,this.payCallback)}else console.log((j_x("531_2111_411")+j_x("2263_1011_1061")))},e.prototype.linkCustom=function(){GPlatform.isWx&&Sdk.Dlwx.openCustomerSer({})},e.prototype.recordUserInfo=function(e){},e.prototype.logoutCallback=function(){},e.prototype.onShare=function(){console.log("onShare",this.title,this.gameIcon,this.query);var e={};return e.title=this.title,e.imageUrl=this.gameIcon,e.query=this.query,e},Object.defineProperty(e.prototype,"query",{get:function(){return this._query},enumerable:!0,configurable:!0}),e.prototype.gameInit=function(){GPlatform.isWx&&(GConfig.inst.isCreateInGame&&this.recordUserInfo(WXRecordStep.CREATE_SUCC),RecordManager.instance.sendGetInviteInfo(),this.setQuery())},e.prototype.setQuery=function(){if(!this._query){var e=LgcM.ins.heroVo;this._query="account="+GConfig.inst.account+"&serId="+GConfig.inst.mergSerId+"&pid="+b_p.playerId+"&name="+e.name}},e.prototype.shareAppMessage=function(e,p_l,p_g){void 0===p_g&&(p_g=!1),GPlatform.isWx&&(p_g&&RecordManager.instance.sendInviteInfo(1),console.log("this.query",this.query),Sdk.Dlwx.dlwxShare(this.gameIcon,this.title,this.query))},e.prototype.dlwxShare=function(e){void 0===e&&(e=0),console.log("dlwxShare",e),ShareMgr.ins.reqShare(),this.shareAppMessage(this.gameIcon,this.title)},Object.defineProperty(e.prototype,"title",{get:function(){return this.initCnf(),this._title||(j_x("155_1998_804")+j_x("1077_1802")+"VIP"+j_x("1644_2308_2343")+j_x(69)+"10000"+j_x("1263_869")+"")},enumerable:!0,configurable:!0}),e.prototype.initCnf=function(){if(!this._icon||!this._title){var e=Config.activity_invite_invite;if(e&&e[1]){var p_l=e[1].shareContent[0];this._icon=Laya.URL.formatURL(p_l.imageUrl),this._title=p_l.title}}},Object.defineProperty(e.prototype,"gameIcon",{get:function(){return this.initCnf(),this._icon||GPlatform.shareIcon},enumerable:!0,configurable:!0}),e.prototype.recharge=function(e,p_l){var p_g=WXLoginManager.instance.agentBase;if(p_g){this._payVo||(this._payVo=new XjwxPayVO),this._isTest&&(e=.01);var b_s={};b_s.time=Math.floor((new Date).getTime()/1e3),b_s.openid=p_g.openid;var d_u=RecordManager.instance.getSign(b_s).toUpperCase();this._payVo.setData(p_g.openid,p_l,100*e,this.payAddr,GPlatform.serID+"",100*e+(j_x("1263_869")),d_u),this._serVo||(this._serVo=new WxServiceVo,this._serVo.setData(this.serSuccess.bind(this),this.serFail.bind(this),this.rechargeIcon)),Sdk.Dlwx.openCustomerSer(this._serVo)}},e.prototype.serSuccess=function(e){Opu(e,console)},Object.defineProperty(e.prototype,"rechargeIcon",{get:function(){return GPlatform.rechargeIcon},enumerable:!0,configurable:!0}),e.prototype.serFail=function(e){Gbb(e,console)},Object.defineProperty(e.prototype,"payAddr",{get:function(){var e="https://center.dldlsw.com";return 1e4<=GPlatform.serID&&(e="https://center-test.dldlsw.com"),e+RecordManager.API_AGENTORDER},enumerable:!0,configurable:!0}),e}(),WanbaPlatform=function(){function e(){this._collectTime=0,this._iconType=0,this._isLocal=!1}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){GPlatform.isWanba&&Sdk.Wanba.wbRegister(this.onWbPaySucc.bind(this),this.onWbPayError.bind(this),this.onWbPayClose.bind(this),this.onWbShare.bind(this),this.wbCollect.bind(this),this.onWbCollectBack.bind(this),this.onWbShareBack.bind(this))},Object.defineProperty(e.prototype,"gameIcon",{get:function(){return GConfig.inst.getGameIcon()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wanbaData",{get:function(){return WanbaLoginManager.instance.wanbaData},enumerable:!0,configurable:!0}),e.prototype.orderParamsBack=function(e){console.log("orderParamsBack",e),e?-12===e.ret?Sdk.Wanba.popPayTips(10*this.orderInfo.money,this.wanbaData.appid):1===e.ret&&console.log((j_x("411_2263_402")+j_x(2142))):console.log((j_x("531_2111_411")+j_x("2263_1011_1061")))},Object.defineProperty(e.prototype,"orderInfo",{get:function(){return RecordManager.instance.orderInfo},enumerable:!0,configurable:!0}),e.prototype.onWbPaySucc=function(){Adv(b_p,j_x,this)},e.prototype.onWbShare=function(e){Scs(e,console,this)},e.prototype.onWbPayError=function(){if(2==this.wanbaData.platform){var e=this.wanbaData.isChannel(AgentWanba.QZ)?(j_x("1466_2460")):"";b_p.confirm((j_x("837_1199_1329")+j_x(271)+""+j_x("1777_1012")+"App Store"+j_x("1374_1787_2379")+j_x(1770)+"QQ")+e,null,null,!0)}else b_p.broadcastNotice((j_x("837_1199_1329")+j_x(271)))},e.prototype.followWechat=function(){Ooy(Sdk)},e.prototype.wbCollect=function(){var e;console.log("wbCollect"),this._isLocal?ShareMgr.ins.reqRelevance(!0):(e=0==this._iconType?Sdk.Wanba.getWbAppicon():this.gameIcon,Sdk.Wanba.wbCollect(e),this.wanbaData.onPC&&this.onWbCollectBack())},e.prototype.wbShare=function(e){if(void 0===e&&(e=-1),this._isLocal)ShareMgr.ins.reqShare();else{this.wanbaData.onPC&&(e=0);var p_l=(j_x("155_1998_804")+j_x("1077_1802")+"VIP"+j_x("1644_2308_2343")+j_x(69)+"10000"+j_x("1263_869")+"");console.log("wbShare",e),-1==e?Sdk.Wanba.wbShowShareMenu(this.gameIcon,(j_x("1022_1304_1977")+j_x(1646)),p_l):Sdk.Wanba.wbShare(this.gameIcon,(j_x("1022_1304_1977")+j_x(1646)),p_l,e)}},e.prototype.onWbCollectBack=function(){Yzc(console,ShareMgr)},e.prototype.onWbPayClose=function(){Uhm(b_p,j_x)},e.prototype.onWbShareBack=function(e){Ilt(e,ShareMgr)},Object.defineProperty(e.prototype,"isLocal",{set:function(e){this._isLocal=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collectTime",{get:function(){return this._collectTime},enumerable:!0,configurable:!0}),e.prototype.startTime=function(){Inz(this,Laya)},e.prototype.removetTime=function(){Afd(Laya,this)},e.prototype.updateTime=function(){this._collectTime--,this._collectTime<=0&&this.removetTime()},e}(),VivoPlatform=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){GPlatform.isVivo&&Sdk.Vivo.registerFunPay(this.onVivoPaySucc.bind(this),this.onVivoPayError.bind(this),this.onVivoPayClose.bind(this))},e.prototype.orderParamsBack=function(e){if(console.log("orderParamsBack",e),e){if(-12===e.ret)console.log((j_x("531_2111_402")+j_x(2142)));else if(1===e.ret){console.log((j_x("411_2263_402")+j_x(2142)));var p_l={};p_l.signMethod=e.content.signMethod,p_l.vivoSignature=e.content.vivoSignature,p_l.vivoOrderNumber=e.content.agent_order_id,p_l.orderAmount=Number(e.content.money).toFixed(2),p_l.appId=e.content.appid,p_l.orderTitle=e.content.orderTitle,p_l.orderDesc=e.content.orderDesc,p_l=JSON.stringify(p_l),Sdk.Vivo.popPayTips(p_l)}}else console.log((j_x("531_2111_411")+j_x("2263_1011_1061")))},Object.defineProperty(e.prototype,"orderInfo",{get:function(){return RecordManager.instance.orderInfo},enumerable:!0,configurable:!0}),e.prototype.onVivoPaySucc=function(){Qjh(b_p,j_x)},e.prototype.onVivoPayError=function(){Ueh(console,b_p,j_x)},e.prototype.onVivoPayClose=function(){Ign(b_p,j_x)},e}(),QQMiniPlatform=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.qqMiniInit=function(){if(GPlatform.isQQMini)try{Sdk.QQMini.registerFunPay(this.onQQPaySucc.bind(this),this.onQQPayError.bind(this),this.onQQPayClose.bind(this)),Sdk.QQMini.registerFunShare(this.onShare.bind(this)),Sdk.QQMini.initShare()}catch(e){console.log(("QQMini "+j_x("2224_176")+""+j_x("837_1199_239")+j_x("355_2453_819")+j_x("1011_1061")),e)}},e.prototype.share=function(e){void 0===e&&(e=!1),GPlatform.isQQMini&&(e&&RecordManager.instance.sendInviteInfo(1),console.log("this._query",this._query),Sdk.QQMini.shareAppMessage(this.title,this.gameIcon,this._query))},e.prototype.gameInit=function(){if(GPlatform.isQQMini){var e=LgcM.ins.heroVo.fight;Sdk.QQMini.onSetUserInfo(e),RecordManager.instance.sendGetInviteInfo(),this.setQuery()}},e.prototype.setQuery=function(){if(!this._query){var e=LgcM.ins.heroVo;this._query="account="+GConfig.inst.account+"&serId="+GConfig.inst.mergSerId+"&pid="+b_p.playerId+"&name="+e.name}},e.prototype.onShare=function(){console.log("onShare",this.title,this.gameIcon,this._query);var e={};return e.title=this.title,e.imageUrl=this.gameIcon,e.query=this._query,e},e.prototype.playAdShow=function(e,p_l,p_g){GPlatform.isQQMini&&(console.log("AD enter"),Sdk.QQMini.onClose((function(e){e.isEnded?(p_l(),console.log("AD suc")):p_g()})),Sdk.QQMini.rewardedVideoAdShow(e))},Object.defineProperty(e.prototype,"title",{get:function(){return this.initCnf(),this._title||(j_x("155_1998_804")+j_x("1077_1802")+"VIP"+j_x("1644_2308_2343")+j_x(69)+"10000"+j_x("1263_869")+"")},enumerable:!0,configurable:!0}),e.prototype.initCnf=function(){if(!this._icon||!this._title){var e=Config.activity_invite_invite;if(e&&e[1]){var p_l=e[1].shareContent[0];this._icon=Laya.URL.formatURL(p_l.imageUrl),this._title=p_l.title}}},Object.defineProperty(e.prototype,"gameIcon",{get:function(){return this.initCnf(),this._icon||GPlatform.shareIcon},enumerable:!0,configurable:!0}),e.prototype.onQQPaySucc=function(){Cmi(b_p,j_x)},e.prototype.onQQPayError=function(e){var p_l=e.errMsg,p_g=e.errCode;console.log("onQQPayError===========",p_l,"=======",p_g),b_p.broadcastNotice((j_x("837_1199_1329")+j_x(271)))},e.prototype.onQQPayClose=function(){Usj(b_p,j_x)},e.prototype.orderParamsBack=function(e){console.log("orderParamsBack",e),e?-12===e.ret?(Sdk.QQMini.popPayTips(e.content.prepayId,10*this.orderInfo.money),console.log((j_x("531_2111_402")+j_x(2142)))):1===e.ret?(console.log((j_x("411_2263_402")+j_x(2142))),Sdk.QQMini.popPayTips(e.content.prepayId,10*this.orderInfo.money)):-13===e.ret&&b_p.broadcastNotice((j_x("1072_799_411")+j_x(2263))):console.log((j_x("531_2111_411")+j_x("2263_1011_1061")))},Object.defineProperty(e.prototype,"orderInfo",{get:function(){return RecordManager.instance.orderInfo},enumerable:!0,configurable:!0}),e.oneMAd="6e55ffcac59a547e94d971b85536a747",e.freeAd="29669f0a59a63fa6ad42764d7e3af3be",e}(),OPPOPlatform=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){GPlatform.isOPPO&&Sdk.oppo.registerFunPay(this.onOppoPaySucc.bind(this),this.onOppoPayError.bind(this),this.onOppoPayClose.bind(this))},e.prototype.orderParamsBack=function(e){if(console.log("orderParamsBack",JSON.stringify(e)),e){if(-12===e.ret)console.log((j_x("531_2111_402")+j_x(2142)));else if(1===e.ret){console.log((j_x("411_2263_402")+j_x(2142)));var p_l={};p_l.appid=AgentType.game_oppo,p_l.token=OPPOLoginManager.instance.agentBase.js_code,p_l.timestamp=e.content.timestamp,p_l.orderNo=e.content.agent_order_id,p_l.paySign=e.content.paySign,Sdk.oppo.pay(p_l)}}else console.log((j_x("531_2111_411")+j_x("2263_1011_1061")))},Object.defineProperty(e.prototype,"orderInfo",{get:function(){return RecordManager.instance.orderInfo},enumerable:!0,configurable:!0}),e.prototype.onOppoPaySucc=function(){Ocl(b_p,j_x)},e.prototype.onOppoPayError=function(){Afj(console,b_p,j_x)},e.prototype.onOppoPayClose=function(){Mvs(b_p,j_x)},e}(),HuaweiPlatform=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this._ins||(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.prototype.init=function(){GPlatform.isHuaWei&&(Sdk.Huawei.registerFunPay(this.onPaySucc.bind(this),this.onPayError.bind(this)),Sdk.Huawei.onAudioInterruption(this.pauseAudio.bind(this),this.resumeAudio.bind(this)),Sdk.Huawei.subscribe(this.onSubscribe.bind(this)))},e.prototype.onPayError=function(){Cvj(console,j_x)},e.prototype.pauseAudio=function(){Gke(Resource)},e.prototype.signReq=function(e){var p_l=JSON.stringify(e),p_g=new Laya.HttpRequest;p_g.on(Laya.Event.COMPLETE,this,this.onGetSign),p_g.on(Laya.Event.ERROR,this,this.onGetSignErr),p_g.send(GConfig.inst.record_Domain+"/api/token/index",p_l,"post","json"),console.log((j_x("837_1199_453")+j_x("1511_1777_100")),p_l)},e.prototype.onSubscribeSuccess=function(e){Cfh(e,console,j_x,JSON)},e.prototype.resumeAudio=function(){Uxr(Resource)},e.prototype.orderParamsBack=function(e){if(console.log((j_x("1777_100_411")+j_x("2263_365_239")),JSON.stringify(e)),e&&1===e.ret){var p_l=e.content,p_g=p_l.product_id,b_s=Config.recharge_recharge[p_g],d_u=b_s?b_s.gold:p_l.gold,b_e=(LgcM.ins.heroVo,GConfig.inst,{});b_e.amount=Number(p_l.rmb).toFixed(2)+"",b_e.applicationID=GPlatform.game_id+"",b_e.productDesc=p_l.product_id+"",b_e.productName=d_u+(j_x("1263_869")),b_e.requestId=p_l.order_id+"",b_e.merchantId="890086000102095377",b_e.sdkChannel=3,this.signReq(b_e)}else console.log((j_x("531_2111_411")+j_x("2263_1011_1061")))},e.prototype.onPaySucc=function(){Yjr(console,j_x,b_p)},e.prototype.onGetSign=function(e){if(console.log((j_x("837_1199_453")+j_x("1511_365_239")),e),e&&1==e.ret){var p_l={};p_l.amount=e.content.amount,p_l.applicationID=e.content.applicationID,p_l.productDesc=e.content.productDesc,p_l.productName=e.content.productName,p_l.requestId=e.content.requestId,p_l.merchantId=e.content.merchantId,p_l.sdkChannel=e.content.sdkChannel,p_l.serviceCatalog="X6",p_l.merchantName=(j_x("401_1474_1468")+j_x("2104_1357_2308")+j_x("2379_2265_2243")+j_x("1896_2128_1992")+j_x(1183)),p_l.extReserved=GConfig.inst.server+"",p_l.sign=e.content.sign,p_l.publicKey=e.content.publicKey,console.log((j_x("837_1199_1777")+j_x(100)),JSON.stringify(p_l)),Sdk.Huawei.popPayTips(p_l)}else console.log((j_x("837_1199_453")+j_x("1511_365_239")+j_x("1011_1061")),e)},e.prototype.onSubscribeError=function(e){Qvd(e,console,j_x,JSON)},e.prototype.onSubscribe=function(e){var p_l={account:GConfig.inst.account,agent_id:HuaweiLoginManager.instance.agentBase.agentid,token:e.regId};p_l=JSON.stringify(p_l);var p_g=new Laya.HttpRequest;p_g.on(Laya.Event.COMPLETE,this,this.onSubscribeError),p_g.on(Laya.Event.ERROR,this,this.onSubscribeSuccess),p_g.send("https://center.dldlsw.com/api/search/deviceToken",p_l,"post","json"),console.log((j_x("220_1802")+"token"+j_x("1067_594")),p_l)},e.prototype.onGetSignErr=function(e){Wbl(e,console,j_x)},e}(),EHSWXUpdateRole,HswxPlatform=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){GPlatform.isHuoshuWx&&(Sdk.HSWX.registerShareInfo(this.onShareInfo.bind(this)),Sdk.HSWX.registerPay(this.paySuccess.bind(this),this.payError.bind(this)),Sdk.HSWX.registerShare(this.onShare.bind(this)),Sdk.HSWX.init())},e.prototype.payError=function(e){},e.prototype.paySuccess=function(e){},e.prototype.onShareInfo=function(e){Iuy(e,this)},e.prototype.onShare=function(){console.log("onShare",this.title,this.gameIcon,this.query);var e={};return e.title=this.title,e.imageUrl=this.gameIcon,e.query=this.query,e},Object.defineProperty(e.prototype,"query",{get:function(){return this._shareInfo?this._query+"&state="+this._shareInfo.state:this._query},enumerable:!0,configurable:!0}),e.prototype.gameInit=function(){GPlatform.isHuoshuWx&&(this.updateRole(EHSWXUpdateRole.online),GConfig.inst.isCreateInGame&&this.updateRole(EHSWXUpdateRole.create),RecordManager.instance.sendGetInviteInfo(),this.setQuery())},e.prototype.orderParamsBack=function(e){if(e&&1===e.ret){var p_l=e.content,p_g=p_l.product_id,b_s=Config.recharge_recharge[p_g],d_u=b_s?b_s.gold:p_l.gold,b_e=LgcM.ins.heroVo,d_m=GConfig.inst,d_w={"order-currency":"CNY","order-cp_order_id":p_l.order_id,"order-product_price":GPlatform.payTest?.01:p_l.rmb,"order-product_id":p_l.product_id,"order-product_cnt":1,"order-product_name":d_u+(j_x("1263_869")),"order-ext":d_m.server,"role-event":"","role-server_id":d_m.server,"role-server_name":d_m.serverName,"role-role_id":b_e.id,"role-role_name":b_e.name,"role-role_level":b_e.level,"role-role_vip":b_e.vipLv};Sdk.HSWX.pay(d_w)}else console.log((j_x("531_2111_411")+j_x("2263_1011_1061")))},e.prototype.setQuery=function(){if(!this._query){var e=LgcM.ins.heroVo;this._query="account="+GConfig.inst.account+"&serId="+GConfig.inst.mergSerId+"&pid="+b_p.playerId+"&name="+e.name}},e.prototype.shareAppMessage=function(e,p_l,p_g){void 0===p_g&&(p_g=!1),GPlatform.isHuoshuWx&&(p_g&&RecordManager.instance.sendInviteInfo(1),console.log("this.query",this.query),Sdk.HSWX.share(this.gameIcon,this.title,this.query))},e.prototype.hswxShare=function(e){void 0===e&&(e=0),console.log("hswxShare",e),ShareMgr.ins.reqShare(),this.shareAppMessage(this.gameIcon,this.title)},Object.defineProperty(e.prototype,"title",{get:function(){return this.initCnf(),this._shareInfo?this._shareInfo.title:this._title||(j_x("155_1998_804")+j_x("1077_1802")+"VIP"+j_x("1644_2308_2343")+j_x(69)+"10000"+j_x("1263_869")+"")},enumerable:!0,configurable:!0}),e.prototype.initCnf=function(){if(!this._icon||!this._title){var e=Config.activity_invite_invite;if(e&&e[1]){var p_l=e[1].shareContent[0];this._icon=Laya.URL.formatURL(p_l.imageUrl),this._title=p_l.title}}},Object.defineProperty(e.prototype,"gameIcon",{get:function(){return this.initCnf(),this._shareInfo?this._shareInfo.image:this._icon||GPlatform.shareIcon},enumerable:!0,configurable:!0}),e.prototype.updateRole=function(e){if(GPlatform.isHuoshuWx){var p_l=LgcM.ins.heroVo,p_g={"role-event":EHSWXUpdateRole[e],"role-server_id":GConfig.inst.server,"role-server_name":GConfig.inst.serverName,"role-role_id":p_l.id,"role-role_name":p_l.name,"role-role_level":p_l.level,"role-role_vip":p_l.vipLv,"role-combat_num":p_l.fight};Sdk.HSWX.updateRole(p_g)}},e}();!function(e){e[e.online=1]="online",e[e.create=2]="create",e[e.levelup=3]="levelup",e[e.offline=4]="offline",e[e.other=5]="other",e[e.delete=6]="delete"}(EHSWXUpdateRole=EHSWXUpdateRole||{});var v_t=function(){function e(){this._isSubscribe=!1}return Object.defineProperty(e,"ins",{get:function(){return this._ins||(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSubscribe",{get:function(){return this._isSubscribe},enumerable:!0,configurable:!0}),e.prototype.init=function(){GPlatform.isRelease&&GPlatform.isYZX&&(Sdk.YZX.setShareInfo(this.shareObj,this.onSetShareInfoRes),Sdk.YZX.isSubscribe(this.onIsSubscribeRes.bind(this)),Sdk.YZX.listenAudio(this.pauseAudio.bind(this),this.resumeAudio.bind(this)))},e.prototype.pauseAudio=function(){Mdm(Resource)},e.prototype.resumeAudio=function(){Cnp(Resource)},Object.defineProperty(e.prototype,"shareObj",{get:function(){return this._shareObj||(this._shareObj={},this._shareObj.title=(j_x("1022_1304_1977")+j_x(1646)),this._shareObj.content=(j_x("155_1998_804")+j_x("1077_1802")+"VIP"+j_x("1644_2308_2343")+j_x(69)+"10000"+j_x("1263_869")+""),this._shareObj.imgurl=GConfig.inst.getGameIcon()),this._shareObj},enumerable:!0,configurable:!0}),e.prototype.onIsSubscribeRes=function(){Elz(this,ShareMgr,LED,l_r)},e.prototype.onSetShareInfoRes=function(){Azm(ShareMgr)},e.prototype.onShareRes=function(){Kba(ShareMgr)},e.prototype.dialog=function(){Qkz(Sdk,this)},e.prototype.onDialogRes=function(){Ckc(this,ShareMgr,LED,l_r)},e.prototype.share=function(){Gee(Sdk,this)},e.prototype.sendToDesktop=function(){Owq(Sdk,this)},Object.defineProperty(e.prototype,"sendToDesktopObj",{get:function(){return this._sendToDesktopObj||(this._sendToDesktopObj={},this._sendToDesktopObj.title=(j_x("1022_1304_1977")+j_x(1646)),this._sendToDesktopObj.content=(j_x("1022_1304_1977")+j_x(1646)),this._sendToDesktopObj.imgurl=GConfig.inst.getGameIcon()),this._sendToDesktopObj},enumerable:!0,configurable:!0}),e.prototype.onSendToDesktopRes=function(){Aok(ShareMgr)},e.prototype.orderParamsBack=function(e){e&&1===e.ret?this.paySign(e.content):console.log((j_x("531_2111_411")+j_x("2263_1011_1061")))},e.prototype.paySign=function(e){var p_l=LgcM.ins.heroVo,p_g=Config.recharge_goldShop[e.product_id],b_s={};b_s.warename=p_g.show,b_s.count=1,b_s.paybill=100*e.rmb,b_s.serverid=GConfig.inst.server.toString(),b_s.roleid=p_l.id,b_s.extstr=e.order_id;var d_u=JSON.stringify(b_s),b_e=new Laya.HttpRequest;b_e.on(Laya.Event.COMPLETE,this,(function(e){e&&e.sign?(b_s.servername=GConfig.inst.serverName,b_s.rolename=p_l.name,b_s.rolelevel=p_l.level,b_s.signature=e.sign,Sdk.YZX.pay(b_s)):console.log((j_x("453_1511_1011")+j_x(1061)),e)})),b_e.send(GConfig.inst.addrCenter+RecordManager.API_YZX_PAY,d_u,"post","json"),console.log(RecordManager.API_YZX_PAY,"req",d_u)},e}(),H5XJPlatform=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this._ins||(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.prototype.init=function(){if(GPlatform.isXJH5){var e=this,p_l=GPlatform.shareIcon,p_g={pay:{success:this.onPaySucc.bind(this),cancel:this.onPayError.bind(this)},share:{friend:{title:(j_x("1022_1304_1977")+j_x(1646)),desc:(j_x("155_1998_804")+j_x("1077_1802")+"VIP"+j_x("1644_2308_2343")+j_x(69)+"10000"+j_x("1263_869")+""),imgUrl:p_l,success:function(){e.onShareCallBack(!0)},cancel:function(){e.onShareCallBack(!1)}},timeline:{title:(j_x("1022_1304_1977")+j_x(1646)),imgUrl:p_l,success:function(){e.onShareCallBack(!0)},cancel:function(){e.onShareCallBack(!1)}}},notify:function(p_l,p_g){console.log((j_x("1103_2222_526")+j_x("239_355")),p_l,p_g),1==p_g.type&&p_g.notifyData&&(1e4==p_g.notifyData.code?e._keyworkBack&&e._keyworkBack(1):10001==p_g.notifyData.code?e._keyworkBack&&e._keyworkBack(0):e._keyworkBack&&e._keyworkBack(-1))}};Sdk.xjh5.config(p_g),Sdk.xjh5.flow(this.onFlowRes.bind(this))}},e.prototype.onGetSign=function(e){if(console.log((j_x("837_1199_453")+j_x("1511_365_239")),e),e&&1==e.ret){var p_l={};p_l.out_trade_no=e.content.out_trade_no,p_l.product_id=e.content.product_id,p_l.total_fee=e.content.total_fee,p_l.body=e.content.body,p_l.detail=e.content.detail,p_l.attach=e.content.attach,p_l.sign=e.content.sign,console.log((j_x("837_1199_1777")+j_x(100)),p_l),Sdk.xjh5.pay(p_l)}else console.log((j_x("837_1199_453")+j_x("1511_1329_271")),e)},e.prototype.onPayError=function(){Kmf(console,j_x)},e.prototype.orderParamsBack=function(e){if(console.log((j_x("1777_100_411")+j_x("2263_365_239")),e),e&&1===e.ret){var p_l=e.content,p_g=p_l.product_id,b_s=Config.recharge_goldShop[p_g],d_u=b_s?b_s.show:p_l.gold+"yb",b_e=(LgcM.ins.heroVo,GConfig.inst,{});b_e.out_trade_no=p_l.order_id,b_e.product_id=p_l.product_id+"",b_e.total_fee=GPlatform.payTest?1:100*p_l.rmb,b_e.body=d_u,b_e.detail=p_l.product_id+"",b_e.attach=GConfig.inst.server+"",GPlatform.addAgentMixSer(b_e),this.signReq(b_e)}else console.log((j_x("531_2111_411")+j_x("2263_1011_1061")))},e.prototype.keyWords=function(e,p_l){Ujr(e,p_l,this,Sdk)},e.prototype.gameInit=function(){GPlatform.isXJH5&&(RecordManager.instance.sendGetInviteInfo(),this.reportLogin())},e.prototype.reportCreateRole=function(e){if(GPlatform.isXJH5&&!GPlatform.isDebug){var p_l={serverId:GConfig.inst.server,playerName:b_p.playerName,role_id:b_p.playerId};Sdk.xjh5.reportGameInfo(p_l)}},e.prototype.signReq=function(e){var p_l=JSON.stringify(e),p_g=new Laya.HttpRequest;p_g.on(Laya.Event.COMPLETE,this,this.onGetSign),p_g.on(Laya.Event.ERROR,this,this.onGetSignErr),p_g.send(GConfig.inst.record_Domain+"/api/token/index",p_l,"post","json"),console.log((j_x("837_1199_453")+j_x("1511_1777_100")),p_l)},e.prototype.onShareCallBack=function(e){!0===e?ShareMgr.ins.reqShare():!1===e&&console.log((j_x("2224_176_2111")+j_x(1661)))},e.prototype.onGetSignErr=function(e){Ean(e,console,j_x)},e.prototype.onPaySucc=function(){Cjm(console,j_x)},e.prototype.showShare=function(){GPlatform.isXJH5&&Sdk.xjh5.showShare(this.onShareCallBack.bind(this))},e.prototype.onFlowRes=function(e){console.log("res============",e),1==e&&(H5XJLoginManager.instance.agentVO.subscribe=1)},e.prototype.reportLogin=function(){if(GPlatform.isXJH5&&!GPlatform.isDebug){if(this._sendLogin)return;this._sendLogin=!0;var e={serverId:GConfig.inst.server,newuser:GConfig.inst.isCreateInGame?1:0,userinfo:this.userinfo};Sdk.xjh5.reportLoginInfo(e)}},e.prototype.showQRCode=function(){GPlatform.isXJH5&&Sdk.xjh5.showQRCode()},e.prototype.reportUpLv=function(){if(GPlatform.isXJH5&&!GPlatform.isDebug){var e=this.userinfo;Sdk.xjh5.reportUpLv(e)}},Object.defineProperty(e.prototype,"userinfo",{get:function(){var e=LgcM.ins.heroVo;return{serverId:GConfig.inst.server,serverName:GConfig.inst.serverName,roleId:GConfig.inst.playerId,rolePower:e.fight,roleName:(j_x("814_1698_1033")),professionId:0,nickName:b_p.playerName,level:e.level,vip:e.vipLv}},enumerable:!0,configurable:!0}),e}(),H5Platform=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this._ins||(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.prototype.orderParamsBack=function(e){if(e&&1===e.ret){var p_l=e.content,p_g=p_l.product_id,b_s=Config.recharge_recharge[p_g],d_u=b_s?b_s.gold:p_l.gold,b_e=LgcM.ins.heroVo,d_m=GConfig.inst,d_w=GConfig.inst.record_Domain+RecordManager.API_PAY,f_t={};f_t.order_id=p_l.order_id,f_t.role_uid=b_e.id,f_t.role_name=b_e.name,f_t.role_level=b_e.level,f_t.server_id=d_m.server,f_t.server_name=d_m.serverName,f_t.product_name=d_u+(j_x("1263_869")),f_t.product_id=p_l.product_id,f_t.pay_info=d_u+(j_x("1263_869")),f_t.product_count=1,f_t.real_pay_money=100*p_l.rmb,f_t.notify_url=d_w,f_t.extra_data=GPlatform.game_channel_id,f_t.rate=p_l.gold_rate,f_t.currency_code="RMB",console.log("req recharge pl"),Sdk.dalanh5.buy(f_t,this.payCallback.bind(this))}else console.log((j_x("531_2111_411")+j_x("2263_1011_1061")))},e.prototype.onShareCallBack=function(e){1==e.ret&&BenefitModel.instance.reqInviteReward(101)},e.prototype.onShareMessage=function(e,p_l){GPlatform.game_id===AgentType.game_dalan&&Sdk.dalanh5.shareMessag(e,p_l,this.onShareCallBack)},e.prototype.payCallback=function(e){},e.prototype.uploadBuyData=function(e,p_l,p_g,b_s){if(void 0===p_l&&(p_l=0),void 0===p_g&&(p_g=0),void 0===b_s&&(b_s=0),GPlatform.game_id==AgentType.game_dalan&&GPlatform.isRelease){var d_u=LgcM.ins.heroVo,b_e={};b_e.consume_coin=p_g.toString(),b_e.consume_bind_coin=b_s.toString(),b_e.remain_coin=d_u.gold.toString(),b_e.remain_bind_coin="0",b_e.item_count=p_l.toString(),b_e.item_name=Config.CItem(e).name,b_e.item_desc=Config.CItem(e).desc,Sdk.dalanh5.uploadBuyData(b_e)}},e.prototype.logout=function(){GPlatform.game_id===AgentType.game_dalan&&Sdk.dalanh5.logout(this.logoutCallBack.bind(this))},e.prototype.logoutCallBack=function(e){e&&e.hasOwnProperty("ret")&&1!=e.ret&&b_p.broadcastNotice((j_x("1723_2000_1011")+j_x(1061)+","+j_x("1777_413_747")+j_x("1865_1374_1787")+j_x("1723_2000")),BroadcastType.ERROR,"#FF0000")},e}(),PalaceVo=function(){function e(){}return e.prototype.updatePalaceVo=function(e){Sgo(e,this)},e.prototype.getName=function(){return Eyh(this)},e.prototype.setIndex=function(e){null!=e&&(this.index=e%100)},e.prototype.getIndex=function(){return Adj(this)},e.prototype.getVip=function(){return Odk(this)},e.prototype.getServer=function(){return Gnz(this)},e.prototype.getId=function(){return Esw(this)},e.prototype.getPid=function(){return Cqm(this)},e.prototype.getEntryId=function(){return Uhc(this)},e.prototype.getPower=function(){return Aup(this)},e}(),PalaceWorshipStatus,PalaceModel=function(){function e(){this.palaceInfos=[]}return e.prototype.getPalaceCnf=function(){var e=Config.palace_palace,p_l=[];for(var p_g in e)p_l.push(e[p_g]);return p_l},e.prototype.reqPalaceWorship=function(e){var p_l=new c2w_palace_worship;p_l.id=e,DB.instance.query(c2w_palace_worship,p_l)},e.prototype.isShowRedPoint=function(){return!!p_k.instance.checkSystemOpenByName("PalaceView")&&LgcM.ins.heroVo.palaWorship==PalaceWorshipStatus.unWorship},e.prototype.getPalaceCnfByIndex=function(e){return Uum(e,Config)},e.prototype.getTitleCnf=function(e){return Wsp(e,Config)},e.prototype.onPalaceInfo=function(e){if(null!=e){this.palaceInfos=[];for(var p_l=0,p_g=e.infos;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new PalaceVo;d_u.updatePalaceVo(b_s),this.palaceInfos.push(d_u)}LED.event(l_r.PALACE_INFO,e)}},e.prototype.getPalaceInfos=function(){return Gnq(this)},e.prototype.isRank=function(){var e=LgcM.ins.heroVo;if(this.palaceInfos&&0<this.palaceInfos.length)for(var p_l=0,p_g=this.palaceInfos;p_l<p_g.length;p_l++)if(p_g[p_l].getPid()==e.id)return!0;return!1},e.prototype.reqPalaceInfo=function(){var e=new c2w_palace_info;DB.instance.query(c2w_palace_info,e)},e.prototype.getPalaceVo=function(e){for(var p_l=0,p_g=this.palaceInfos;p_l<p_g.length;p_l++){var b_s=p_g[p_l];if(b_s&&b_s.getIndex()==e)return b_s}return null},e.prototype.getSteteCnfByIndex=function(e){var p_l=Config.state_state;for(var p_g in p_l){var b_s=Number(p_g);if(b_s==e)return p_l[b_s]}return null},e.prototype.onWarship=function(e){Ccr(e,b_p,j_x)},e.instance=new e,e}();!function(e){e[e.unWorship=0]="unWorship",e[e.hasWorship=1]="hasWorship"}(PalaceWorshipStatus=PalaceWorshipStatus||{});var f_x=function(){function e(){}return e.prototype.setMoonboxVo=function(e){this.id=e.id,this.startTime=e.startTime,this.isGetReward=e.isGetReward,this.talismans=[];for(var p_l=0,p_g=e.talismans;p_l<p_g.length;p_l++){var b_s=p_g[p_l];this.talismans.push(b_s)}},e.prototype.getIsGetReward=function(){return Uvf(this)},e.prototype.getId=function(){return Glr(this)},e.prototype.getStartTime=function(){return Yoc(this)},e.prototype.getTalismans=function(){return Ewe(this)},e}(),MoonBoxModel=function(){function e(){this.tasks=[]}return e.prototype.setMoonboxLevel=function(e){Cza(e,this)},e.prototype.reqMoonboxTasks=function(){var e=new c2m_office_exped_refresh;DB.instance.query(c2m_office_exped_refresh,e)},e.prototype.reqStopMoonboxTask=function(e){var p_l=new c2m_office_exped_task_stop;p_l.id=e,DB.instance.query(c2m_office_exped_task_stop,p_l)},e.prototype.getTasks=function(){return Wpj(this)},e.prototype.reqStartMoonboxTask=function(e,p_l){var p_g=new c2m_office_exped_task_start;p_g.id=e,p_g.talismans=p_l,DB.instance.query(c2m_office_exped_task_start,p_g)},e.prototype.onMoonboxInfo=function(e){if(null!=e){this.setMoonboxLevel(e.level),this.tasks=[];for(var p_l=0,p_g=e.tasks;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new f_x;d_u.setMoonboxVo(b_s),this.tasks.push(d_u)}LED.event(l_r.MOONBOX_INFO,e)}},e.prototype.onGetMoonboxTaskReward=function(e){Ohc(e,LED,l_r)},e.prototype.reqGetMoonboxTaskAward=function(e){var p_l=new c2m_office_exped_get_reward;p_l.id=e,DB.instance.query(c2m_office_exped_get_reward,p_l)},e.prototype.getMoonboxLevel=function(){return Wst(this)},e.prototype.onStartMoonboxTask=function(e){Kmu(e,LED,l_r)},e.prototype.reqMoonboxInfo=function(){var e=new c2m_office_exped_info;DB.instance.query(c2m_office_exped_info,e)},e.prototype.onStopMoonboxTask=function(e){Qwt(e,LED,l_r)},e.instance=new e,e}(),MirrorSelfVo=function(){function e(){this.id=0,this.lv=0;var e=MirrorSelfModel.partPos;for(var p_l in this.num=0,this.grade=0,this.isActive=!1,this.partList={},e)this.partList[e[p_l]]=MirrorSelfEquipVo.createNull(e[p_l])}return e.prototype.setData=function(e){if(this.id=e.cloneId,this.lv=e.lv,this.grade=Math.max(1,e.breach),this.num=0,e.equips&&0<e.equips.length)for(var p_l in e.equips){var p_g=e.equips[p_l].type;this.partList[p_g].setData(e.equips[p_l]),this.num++}else{var b_s=MirrorSelfModel.partPos;for(var p_l in b_s){var d_u=this.partList[b_s[p_l]];d_u&&d_u.clear()}}},e.prototype.setEquip=function(e){this.id=e.cloneId,this.num=0,e.type;var p_l=this.partList[e.type];for(var p_g in p_l.setId(e.equipId,e.type),this.partList)this.partList[p_g].isHaveValue()&&this.num++},e.prototype.isCanActive=function(){return Config.clone_clone[this.id],!this.isActive&&this.num>=MirrorSelfModel.partNum},e.prototype.isWearEquip=function(e,p_l){return Uom(e,p_l,this)},e}(),MirrorSelfModel=function(){function e(){this._selfInfoMap=null,this.partName=[(j_x("799_869")),(j_x("1946_1558")),(j_x("189_438")),(j_x("230_590")),(j_x("2175_799")),(j_x("891_1224")),(j_x("266_2198")),(j_x("1702_1009")),(j_x("2328_1664"))];var p_l=MirrorSelfEnum;e.partPos=[p_l.Talis,p_l.BlackKing,p_l.citta,p_l.Refine,p_l.Beast,p_l.Ride,p_l.Dragon,p_l.Fashion,p_l.FWeapon],this.comFunName=["getActVoByType","getFightById","getBasePropById"]}return Object.defineProperty(e,"ins",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getSelfInfoMap",{get:function(){return this._selfInfoMap||(this._selfInfoMap={}),this._selfInfoMap},enumerable:!0,configurable:!0}),e.prototype.getCfgTypeByType=function(e){var p_l,p_g=MirrorSelfEnum;switch(e){case p_g.Beast:p_l=Config.beast_beast;break;case p_g.BlackKing:p_l=Config.xianyuan_god;break;case p_g.citta:p_l=Config.skill_passive_mental;break;case p_g.Dragon:p_l=Config.dragon_dragon;break;case p_g.FWeapon:case p_g.Fashion:p_l=Config.fashion_fashion;break;case p_g.Ride:p_l=Config.ride_ride;break;case p_g.Refine:p_l=Config.training_training;break;case p_g.Talis:p_l=Config.talisman_talisman}return p_l},e.prototype.getGradeCfgId=function(e,p_l){return Col(e,p_l)},e.prototype.getBodyFightById=function(e){var p_l=0;return this.getSelfInfoMap[e]?(p_l+=b_p.calPropFight(this.getSelfProp(e)),p_l+=b_p.calPropFight(this.getSelfBaseProp(e)),p_l+=b_p.calPropFight(this.getSelfUpGrade(e))):p_l},e.prototype.getStarLimitById=function(e,p_l){return Osy(e,p_l,Config,parseInt)},e.prototype.getSelfBaseProp=function(e){var p_l=[],p_g=this.getSelfInfoMap[e];if(p_g&&p_g.isActive){var b_s=this.getLvCfgById(p_g.id,p_g.lv);p_l=b_s?CharacterProperty.getPropertys(b_s.baseProp):[]}return p_l},e.prototype.getGradeCfgById=function(e,p_l){return Apl(e,p_l,Config,this)},e.prototype.hasChangeEquip=function(e,p_l,p_g,b_s){for(var d_u=0,b_e=b_s;d_u<b_e.length;d_u++){var d_m=b_e[d_u],d_w=this.getCfgTypeByType(e)[d_m.id],f_t=this.getPropFun(e,this.comFunName[1])(d_m);if(d_w&&this.canWearPart(p_g,e,d_m.star)&&!this.isBeWornEquip(e,d_m.id,p_g)&&(p_l||0)<f_t)return!0}return!1},e.prototype.onePartRed=function(e,p_l){if(null==e)return!1;var p_g=0;if(!Config.clone_clone[p_l])return!1;var b_s=this.getCanWearEquip(p_l,e.part);return e.isHaveValue()&&(p_g=this.getPropFun(e.part,this.comFunName[1])(e.getVo)),this.hasChangeEquip(e.part,p_g,p_l,b_s)},e.prototype.getLvCfgId=function(e,p_l){return Wig(e,p_l)},e.prototype.getCloneCfgById=function(e){this.getCloneCfg();for(var p_l=0,p_g=this.listCfg;p_l<p_g.length;p_l++){var b_s=p_g[p_l];if(b_s.id==e)return b_s}return null},e.prototype.getStarNameByStar=function(e,p_l,p_g,b_s){void 0===p_g&&(p_g=0),void 0===b_s&&(b_s=!1);var d_u=MirrorSelfEnum,b_e=p_l;b_s&&(b_e=this.getShowStarByPart(e,p_l));var d_m=b_e+(j_x(1148));switch(e){case d_u.Fashion:case d_u.FWeapon:d_m=b_e+(j_x(784));break;case d_u.Refine:var d_w=Config.training_trainingStar[RefineBodyModel.ins.getStarIdByStar(p_g,p_l)];d_w&&(d_m=d_w.limitLv+b_e+(j_x(1148)))}return d_m},e.prototype.getCanWearEquip=function(e,p_l){var p_g=Config.clone_clone[e],b_s=this.getSelfInfoMap[e];if(!b_s)return[];var d_u=b_s.partList[p_l];if(!p_g||!d_u)return[];var b_e=null;if(p_l==MirrorSelfEnum.Fashion||p_l==MirrorSelfEnum.FWeapon){var d_m=1;p_l==MirrorSelfEnum.FWeapon&&(d_m=2),b_e=this.getPropFun(d_u.part,this.comFunName[0])(p_g.WearType,d_m)}else b_e=this.getPropFun(d_u.part,this.comFunName[0])(p_g.WearType);var d_w=[];if(b_e)for(var f_t=0;f_t<b_e.length;f_t++)this.isBeWornEquip(p_l,b_e[f_t].id,e)||d_w.push(b_e[f_t]);return b_e=null,d_w},e.prototype.redPoint=function(){return Asn(p_k,FuncDefine,this)},e.prototype.getAllActivateArray=function(){var e=[];for(var p_l in this.getSelfInfoMap){var p_g=this.getSelfInfoMap[p_l];this.isActivate(p_g.id)&&e.push(p_g.id)}return e},e.prototype.bodyIcon=function(e){var p_l=Config.clone_clone[e],p_g=(LgcM.ins.heroVo.entryId,"");return p_l&&(p_g=p_l.headImg),p_g},e.prototype.getPropFun=function(e,p_l){var p_g=this.getModelByType(e);return null==p_g?(console.log((j_x("2348_2083_803")+j_x(1466))),this.errfun):(p_g[p_l]||console.log((j_x("461_2348_803")+j_x(1466))),Engine2d.Tools.BindDomain(p_g[p_l],p_g)||this.errfun)},e.prototype.errfun=function(){Yhn(console,j_x)},e.prototype.getCloneCfg=function(){return Cld(this,Config)},e.prototype.getMCfgByCfg=function(e,p_l){var p_g,b_s,d_u,b_e=MirrorSelfEnum,d_m=new h_g;if(-1==p_l){p_g=Config.clone_clone[e],d_m.propType=p_g.type;var d_w=this.getSelfInfoMap[e];b_s=d_w?this.getGradeCfgById(e,d_w.grade).quality:1}else p_g=this.getCfgTypeByType(p_l)[e],d_m.propType=p_g.propType,b_s=p_g.quality;if(!p_g)return d_m;switch(d_m.id=p_g.id,d_m.quality=b_s,d_m.name=p_g.name,d_m.part=p_l){case b_e.Ride:case b_e.Dragon:d_m.name=p_g.desc,d_m.icon=p_g.icon;break;case b_e.Refine:p_g.itemActive&&(d_u=Config.CItem(p_g.itemActive[0][0]));break;case b_e.Beast:d_m.icon=p_g.icon;break;case b_e.Talis:d_m.icon=p_g.icon,d_m.propType=p_g.proType;break;case b_e.BlackKing:p_g.cardConsume&&(d_u=Config.CItem(p_g.cardConsume[0][0]));break;case b_e.citta:d_m.quality=p_g.grade,d_u=Config.CItem(p_g.itemId);break;case b_e.FWeapon:case b_e.Fashion:d_u=Config.CItem(p_g.id);break;default:d_m.icon=this.bodyIcon(p_g.id)}return d_u&&(d_m.icon=d_u.icon),d_m},e.prototype.goToSystemPanel=function(e){var p_l=MirrorSelfEnum,p_g=-1,b_s=-1;switch(e){case p_l.Beast:p_g=1121;break;case p_l.BlackKing:p_g=1229;break;case p_l.citta:p_g=1103,b_s=2;break;case p_l.Dragon:p_g=1103,b_s=3;break;case p_l.FWeapon:case p_l.Fashion:p_g=1227;break;case p_l.Ride:p_g=1220,b_s=2;break;case p_l.Refine:p_g=1805,b_s=3;break;case p_l.Talis:p_g=1104}-1!=p_g&&(-1!=b_s?UI.WindowClass.openWin(p_g,[b_s]):UI.WindowClass.openWin(p_g))},e.prototype.isMirrorCanLock=function(p_l){var p_g=Config.clone_clone[p_l];return!(e.ins.getSelfInfoMap[p_l]||!p_g||0==p_g.openCon)&&null!=e.ins.getSelfInfoMap[p_g.openCon]},e.prototype.isFitByEquipType=function(e,p_l){return Wey(e,p_l,Config)},e.prototype.bodyRed=function(e){return Qzu(e,this,UpState)},e.prototype.getTotalProp=function(e){return Moo(e,b_p,this)},e.prototype.getModelByType=function(e){var p_l,p_g=MirrorSelfEnum;switch(e){case p_g.Beast:p_l=AlienBeastModle.instance;break;case p_g.BlackKing:p_l=BlackKingModel.instance;break;case p_g.citta:p_l=CittaModule.instance;break;case p_g.Dragon:p_l=b_l.instance;break;case p_g.FWeapon:case p_g.Fashion:p_l=FashionModel.instance;break;case p_g.Ride:p_l=RideModel.instance;break;case p_g.Refine:p_l=RefineBodyModel.ins;break;case p_g.Talis:p_l=TalismanModel.instance}return p_l},e.prototype.isCanUpLv=function(e,p_l){if(void 0===p_l&&(p_l=!1),e&&e.isActive){this.getLvCfgById(e.id,e.lv);var p_g=this.getGradeCfgById(e.id,e.grade),b_s=this.getLvCfgById(e.id,e.lv+1);if(!(p_g&&p_g.lvLimit>e.lv))return p_l&&b_p.broadcastNotice((j_x("15_2342_1117")+j_x("1012_1081_1375"))),UpState.MAX_UP;if(null!=b_s)return b_p.checkConsume(b_s.lvupCost,p_l)?UpState.CAN_UP:UpState.NOT_ENOUGH}return UpState.NOT_ACTIVTED},e.prototype.getShowStarByPart=function(e,p_l){var p_g=MirrorSelfEnum,b_s=p_l;switch(e){case p_g.Beast:case p_g.Ride:case p_g.Dragon:case p_g.Talis:case p_g.Refine:b_s-=1}return b_s},e.prototype.isActivate=function(e){var p_l=this.getSelfInfoMap[e];return!!p_l&&p_l.isActive},e.prototype.getStarByPart=function(e,p_l){var p_g=MirrorSelfEnum,b_s=p_l;switch(e){case p_g.BlackKing:case p_g.citta:b_s=p_l+1;break;case p_g.Refine:b_s=p_l-1}return b_s},e.prototype.getSelfProp=function(e){var p_l=[],p_g=this.getSelfInfoMap[e];if(p_g&&p_g.isActive){for(var b_s in p_g.partList){var d_u=p_g.partList[b_s];if(d_u.isHaveValue()){var b_e=this.getPropFun(d_u.part,this.comFunName[2])(d_u.getVo);p_l=b_p.addProps(p_l,1,b_e)}}var d_m=this.getLvCfgById(p_g.id,p_g.lv);p_l=d_m?CharacterProperty.getPropertysByProp(p_l,d_m.prop/1e4):[]}return p_l},e.prototype.canWearPart=function(e,p_l,p_g){return Ucv(e,p_l,p_g,this)},e.prototype.getVoByEquipVo=function(e){var p_l,p_g=MirrorSelfEnum,b_s=this.getModelByType(e.part);switch(e.part){case p_g.Beast:p_l=b_s.beasts[e.id];break;case p_g.BlackKing:p_l=b_s.getBlackKingById(e.id);break;case p_g.citta:p_l=b_s.getSingleCitta(e.id);break;case p_g.Dragon:p_l=b_s._dragonInfo[e.id];break;case p_g.FWeapon:case p_g.Fashion:p_l=b_s.getFashionVo(e.id);break;case p_g.Ride:p_l=b_s.getRideInfoByRid(e.id);break;case p_g.Refine:p_l=b_s.refineBodyMap[e.id];break;case p_g.Talis:p_l=b_s.getTalismanById(e.id)}return p_l},e.prototype.isBeWornEquip=function(e,p_l,p_g){for(var b_s in void 0===p_g&&(p_g=-1),this.getSelfInfoMap){var d_u=this.getSelfInfoMap[b_s];if(p_g!=d_u.id&&d_u.isWearEquip(e,p_l))return!0}return!1},e.prototype.getLvCfgById=function(e,p_l){return Sys(e,p_l,Config,this)},e.prototype.isMirrorLock=function(p_l){return Aew(p_l,e)},e.prototype.isCanUpGrade=function(e,p_l){void 0===p_l&&(p_l=!1);var p_g=this.getSelfInfoMap[e.id];if(p_g&&p_g.isActive){var b_s=this.getGradeCfgById(e.id,e.grade),d_u=this.getGradeCfgById(e.id,e.grade+1);if(b_s.lvLimit<=e.lv){if(d_u){if(d_u.gradeUpLimit)for(var b_e in d_u.gradeUpLimit){var d_m=parseInt(b_e)+1,d_w=p_g.partList[d_m];if(!d_w||d_w.star<d_u.gradeUpLimit[b_e])return p_l&&b_p.broadcastNotice(this.partName[b_e]+(j_x("1148_2342_2462")+j_x(1779))),UpState.NOT_ENOUGH}return b_p.checkConsume(d_u.consume,p_l)?UpState.CAN_UP:UpState.NOT_ENOUGH}return p_l&&b_p.broadcastNotice((j_x("1148_2342_1117")+j_x("1012_1081_1375"))),UpState.MAX_UP}return p_l&&b_p.broadcastNotice((j_x("15_2342_2462")+j_x("1779_371_784"))),UpState.NOT_UP}return UpState.NOT_ACTIVTED},e.prototype.getVoEquipTypeByVo=function(e,p_l){return this.getCfgTypeByType(p_l)[e.id]?1:0},e.prototype.getSelfUpGrade=function(e){var p_l=[],p_g=this.getSelfInfoMap[e];if(p_g&&p_g.isActive){var b_s=this.getGradeCfgById(p_g.id,p_g.grade);p_l=b_s?CharacterProperty.getPropertys(b_s.prop):[]}return p_l},e.prototype.addSKillLVByEquipId=function(e){var p_l=0;for(var p_g in this.getSelfInfoMap){var b_s=this.getSelfInfoMap[p_g];for(var d_u in b_s.partList)if(e==b_s.partList[d_u].id){if(!b_s.isActive)return p_l;p_l=this.getLvCfgById(b_s.id,b_s.lv).skill}}return p_l},e.partNum=9,e}(),MirrorSelfEquipVo=function(){function e(){this.id=0,this.star=0,this.part=0,this.vo=null}return e.prototype.setData=function(e){Uzc(e,this)},Object.defineProperty(e.prototype,"getVo",{get:function(){return MirrorSelfModel.ins.getVoByEquipVo(this)},enumerable:!0,configurable:!0}),e.prototype.setId=function(e,p_l){Khh(e,p_l,this)},e.createNull=function(p_l){var p_g=new e;return p_g.part=p_l,p_g},e.prototype.clear=function(){Aor(this)},e.prototype.isHaveValue=function(){return Gmt(this)},e}(),MirrorSelfEnum,MirrorPropType,d_w;d_w=MirrorSelfEnum=MirrorSelfEnum||{},d_w[d_w.Talis=1]="Talis",d_w[d_w.Beast=2]="Beast",d_w[d_w.BlackKing=3]="BlackKing",d_w[d_w.Ride=4]="Ride",d_w[d_w.citta=5]="citta",d_w[d_w.Dragon=6]="Dragon",d_w[d_w.Refine=7]="Refine",d_w[d_w.Fashion=8]="Fashion",d_w[d_w.FWeapon=9]="FWeapon",function(e){e[e.defense=1]="defense",e[e.attack=2]="attack",e[e.armorBreak=3]="armorBreak",e[e.hpUpper=4]="hpUpper"}(MirrorPropType=MirrorPropType||{});var h_g=function(){Ucj(this)},MirrorSelfControl=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.reqInfo=function(){p_k.instance.checkSystemOpen(FuncDefine.MirrorSelfPanel,!0)&&this.reqUpdateInfo()},e.prototype.onUpdateLv=function(e){var p_l=MirrorSelfModel.ins.getSelfInfoMap;1==e.ret&&((p_l[e.cloneId]||new MirrorSelfVo).lv=e.lv,LED.event(l_r.MIRROR_SELF_LV))},e.prototype.onUpdateInfo=function(e){var p_l=MirrorSelfModel.ins.getSelfInfoMap;for(var p_g in e.clones){var b_s=e.clones[p_g],d_u=p_l[b_s.cloneId]||new MirrorSelfVo;d_u.setData(b_s),d_u.isActive=1==b_s.state,p_l[b_s.cloneId]=d_u}LED.event(l_r.MIRROR_SELF_INFO)},e.prototype.reqUpdateInfo=function(){var e=new c2m_clone_info;DB.instance.query(c2m_clone_info,e)},e.prototype.onUpdateActiveInfo=function(e){var p_l=MirrorSelfModel.ins.getSelfInfoMap,p_g=p_l[e.cloneId]||new MirrorSelfVo;if(1==e.ret&&(p_g.isActive=!0,p_g.lv=1,e.nextCloneInfo)){var b_s=p_l[e.nextCloneInfo.cloneId]||new MirrorSelfVo;b_s.setData(e.nextCloneInfo),p_l[e.nextCloneInfo.cloneId]=b_s}LED.event(l_r.MIRROR_SELF_ACT)},e.prototype.onUpdateWear=function(e){if(1==e.ret){var p_l=MirrorSelfModel.ins.getSelfInfoMap,p_g=p_l[e.cloneId]||new MirrorSelfVo;p_g.setEquip(e),p_l[e.cloneId]=p_g}b_p.broadcastNotice((j_x("1867_1086_402")+j_x(2142))),LED.event(l_r.MIRROR_SELF_WEAR)},e.prototype.reqUpLvBody=function(e){var p_l=new c2m_clone_up_lv;p_l.cloneId=e,DB.instance.query(c2m_clone_up_lv,p_l)},e.prototype.reqWearEquip=function(e,p_l,p_g){var b_s=new c2m_clone_wear_equip;b_s.cloneId=e,b_s.equipId=p_l,b_s.type=p_g,DB.instance.query(c2m_clone_wear_equip,b_s)},e.prototype.reqActiveBody=function(e){var p_l=new c2m_clone_act;p_l.cloneId=e,DB.instance.query(c2m_clone_act,p_l)},e.prototype.onUpdateUpGrade=function(e){var p_l=MirrorSelfModel.ins.getSelfInfoMap;1==e.ret&&((p_l[e.cloneId]||new MirrorSelfVo).grade=e.breach,LED.event(l_r.MIRROR_SELF_GRADE))},e.prototype.addEventListener=function(){DB.instance.on(m2c_clone_info.opcode.toString(),this,this.onUpdateInfo),DB.instance.on(m2c_clone_act.opcode.toString(),this,this.onUpdateActiveInfo),DB.instance.on(m2c_clone_wear_equip.opcode.toString(),this,this.onUpdateWear),DB.instance.on(m2c_clone_up_lv.opcode.toString(),this,this.onUpdateLv),DB.instance.on(m2c_clone_up_breach.opcode.toString(),this,this.onUpdateUpGrade)},e.prototype.reqUpGradeBody=function(e){var p_l=new c2m_clone_up_breach;p_l.cloneId=e,DB.instance.query(c2m_clone_up_breach,p_l)},e}(),MinePlayerInfoVo=function(){function e(){}return e.prototype.setMinePlayerInfoVo=function(e){Mme(e,this)},e.prototype.getHeadIcon=function(){return Ujj(this)},e.prototype.fashionWeapon=function(){return Ops(this)},e.prototype._stateLv=function(){return Wnr(this)},e.prototype.getMinePlayerHpUpper=function(){return Upt(this)},e.prototype.getMinePlayerName=function(){return Gii(this)},e.prototype.getMineGuildId=function(){return Mua(this)},e.prototype.getEntryId=function(){return Akk(this)},e.prototype._subState=function(){return Ofp(this)},e.prototype.getMinePlayerPower=function(){return Otf(this)},e.prototype.getMineGuildName=function(){return Ehn(this)},e.prototype.getMineGuildLevel=function(){return Qdp(this)},e.prototype.fashionClothes=function(){return Ede(this)},e.prototype.getMinePlayerId=function(){return Gqy(this)},e.prototype.getMinePlayerHp=function(){return Etx(this)},e.prototype.getMineBox=function(){return this.box?this.box:0},e}(),MineExchangeType,MineExchangeTargetType,MineCityType,MineCityStatus,MineBuyType,MineFightResultType,MineModel=function(){function e(){this._recordData={},this.mineList=[],this.mineRecords=[],this.mineRecords1=[],this.exchangeInfo={}}return e.prototype.getMineVit=function(){return Aqy(this)},e.prototype.getRedPoint=function(){if(!p_k.instance.checkSystemOpenByName("MineView"))return!1;if(null!=this.mineCurIndex&&1==this.mineCurIndex)return!0;if(Config.minewar_box[LgcM.ins.heroVo.stateLv]){var e=Config.minewar_box[LgcM.ins.heroVo.stateLv].limit;return null!=this.mineCurGoldNum&&e*Config.global[GlobalDefine.minewar_red_tips].i_info/100<=this.mineCurGoldNum||!!this.checkCanExchange()||!!this.checkMineRankReward()}},e.prototype.getMineCurIndex=function(){return Yvz(this)},e.prototype.getMineList=function(){return Opx(this)},e.prototype.getCurMineDetail=function(){return Shu(this)},e.prototype.getCurMineDetailId=function(){return Crn(this)},e.prototype.getPathPosList=function(e,p_l,p_g){for(var b_s=e[p_g],d_u=[p_g];0<b_s;)b_s=b_s!=p_l?(d_u.push(b_s),e[b_s]):-1;return d_u.reverse()},e.prototype.checkVit=function(e){return!(e&&e>this.mineVit)},e.prototype.getNearPosPaths=function(e,p_l){for(var p_g={},b_s=[e];0<b_s.length;){for(var d_u=[],b_e=0,d_m=b_s;b_e<d_m.length;b_e++)for(var d_w=d_m[b_e],f_t=0,v_z=Config.minewar_mines[d_w].pos;f_t<v_z.length;f_t++){var d_h=v_z[f_t];if(d_h==p_l)return p_g[d_h]=d_w,this.getPathPosList(p_g,e,p_l);p_g[d_h]||(p_g[d_h]=d_w,d_u.push(d_h))}b_s=d_u}return null},e.prototype.compareFun=function(e,p_l){return Imr(e,p_l)},e.prototype.getMineCurGoldNum=function(){return Stf(this)},e.prototype.getMineRecords=function(){return Ssm(this)},e.prototype.getMineHpUpper=function(){return Ikr(this)},e.prototype.getMineHp=function(){return Qci(this)},e.prototype.isFullSoul=function(){return Sry(this)},e.prototype.calcMoveInDis=function(e,p_l){var p_g=Config.minewar_mines[e],b_s=Config.minewar_mines[p_l];if(null!=p_g&&null!=b_s){for(var d_u=[],b_e=1,d_m=0,d_w=p_g.pos;d_m<d_w.length;d_m++){if((r_t=d_w[d_m])==p_l)return b_e;d_u.push(r_t)}for(;0<d_u.length;){var f_t=[];b_e+=1;for(var v_z=0,d_h=d_u;v_z<d_h.length;v_z++)for(var r_t=d_h[v_z],t_n=0,f_y=Config.minewar_mines[r_t].pos;t_n<f_y.length;t_n++){var p_q=f_y[t_n];if(p_q===p_l)return b_e;f_t.push(p_q)}d_u=f_t}return b_e}},e.prototype.getMineAttackReam=function(){return Gzx(this)},e.prototype.getOwnerMinePos=function(){var e=1,p_l=this.curMineDetail.getMinePlayers();if(p_l.length<=0)return e;var p_g=LgcM.ins.heroVo.id;for(var b_s in p_l)if(p_g==p_l[b_s].getMinePlayerId())return(e=Number(b_s))+1;return e},e.prototype.getMineVo=function(e){for(var p_l=0,p_g=this.mineList;p_l<p_g.length;p_l++){var b_s=p_g[p_l];if(b_s&&b_s.getMineId()==e)return b_s}},e.prototype.checkGold=function(e,p_l){var p_g=LgcM.ins.heroVo;if(e==MineExchangeType.wakan){Config.global[GlobalDefine.minewar_buy_soul].t_info[0];var b_s=p_l*Config.global[GlobalDefine.minewar_buy_soul].t_info[1];if(p_g.gold<b_s)return!1}return!(e==MineExchangeType.vit&&(b_s=p_l*Config.global[GlobalDefine.minewar_buy_vit].t_info[1],p_g.gold<b_s))},Object.defineProperty(e.prototype,"isInMainCity",{get:function(){return this.mineCurIndex==MineCityType.mainMineCity},enumerable:!0,configurable:!0}),e.prototype.checkMoveInVit=function(p_l){var p_g=e.instance.getMineVit(),b_s=e.instance.getMineCurIndex(),d_u=this.calcMoveInDis(b_s,p_l);return null==d_u?(console.log((j_x("867_2043_69")+j_x("932_2199_1878")+j_x("150_1016_1011")+j_x(1061))),!1):!(p_g<Config.global[GlobalDefine.minewar_step_vit].i_info*d_u)},e.prototype.onMineGetBox=function(e){Ims(e,LED,l_r)},e.prototype.loadRecord=function(e){return Iwl(e,this)},e.prototype.onMineList=function(e){this.mineList=[];for(var p_l=0,p_g=e.list;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new d_i;d_u.setMineVo(b_s),this.mineList.push(d_u)}LED.event(l_r.MINE_LIST,e)},e.prototype.reqMineExchange=function(e,p_l,p_g){var b_s=new c2w_minewar_exchange;b_s.target=p_l,b_s.type=e,b_s.num=p_g,DB.instance.query(c2w_minewar_exchange,b_s)},e.prototype.onMineRecord=function(e){if(e.records&&e.records.length)if(1==e.records[0].mode){this.mineRecords=[];for(var p_l=0,p_g=e.records;p_l<p_g.length;p_l++){var b_s=p_g[p_l];(d_m=new n_u).setMineRecordVo(b_s),this.mineRecords.push(d_m)}}else{this.mineRecords1=[];for(var d_u=0,b_e=e.records;d_u<b_e.length;d_u++){var d_m;b_s=b_e[d_u],(d_m=new n_u).setMineRecordVo(b_s),this.mineRecords1.push(d_m)}}LED.event(l_r.MINE_RECORDS,e)},e.prototype.onMineFightResult=function(e){this.fightResult=e,this.isSkip&&UI.MineAttackResult.open(e)},e.prototype.onMineExchange=function(e){LED.event(l_r.MINE_EXCHANGE,e),3==e.target&&b_p.broadcastNotice((j_x("1355_2420_402")+j_x(2142)+""+j_x("2292_943_1724")+"+1"),BroadcastType.ERROR,Utils.Color.NAME_GREEN)},e.prototype.checkAttackReam=function(){return Ufi(this)},e.prototype.getRecordKey=function(e){return Yjf(e)},e.prototype.reqMineFight=function(e,p_l,p_g){void 0===p_g&&(p_g=0);var b_s=new c2w_minewar_fight;b_s.mode=e,b_s.tpid=p_l,b_s.skip=p_g,this.isSkip=1==p_g,DB.instance.query(c2w_minewar_fight,b_s)},e.prototype.onMineDetail=function(e){null==this.curMineDetail&&(this.curMineDetail=new v_f),this.curMineDetailId=e.base.id,this.curMineDetail.setMineDetailVo(e),LED.event(l_r.MINE_DETAIL,e)},e.prototype.onMineRole=function(e){Yqd(e,this,LED,l_r)},e.prototype.reqMineMove=function(e){var p_l=new c2w_minewar_move;p_l.id=e,DB.instance.query(c2w_minewar_move,p_l)},e.prototype.reqMineRole=function(){var e=new c2w_minewar_miner;DB.instance.query(c2w_minewar_miner,e)},e.prototype.isOccupySuccess=function(){return Wmr(GuildModel,this)},e.prototype.calcMoveinVitConsume=function(p_l,p_g){return Agq(p_l,p_g,e,Config,GlobalDefine)},e.prototype.reqGetRankReward=function(e){},e.prototype.reqMineGetBox=function(){var e=new c2w_minewar_get_box;DB.instance.query(c2w_minewar_get_box,e)},e.prototype.reqMineRecord=function(e,p_l){var p_g=new c2w_minewar_record;p_g.mode=e,p_g.robDef=p_l,DB.instance.query(c2w_minewar_record,p_g)},e.prototype.reqMineDetail=function(e){var p_l=new c2w_minewar_mine;p_l.id=e,DB.instance.query(c2w_minewar_mine,p_l)},e.prototype.onMineMove=function(e){Uvz(e,this,LED,l_r)},e.prototype.saveRecord=function(e){Iia(e,this)},e.prototype.checkAttack=function(e,p_l){void 0===p_l&&(p_l=!0);var p_g=GuildModel.instance.guildInfo;if(!p_g)return!0;var b_s=p_g.id;return b_s==e.getMineGuildId()&&0!=b_s?(p_l&&b_p.broadcastNotice((j_x("87_495_796")+j_x("1413_2217_1738")+j_x("2462_1919_87")+j_x("1177_712_1835"))),!1):this.curMineDetailId!=this.mineCurIndex?(p_l&&b_p.broadcastNotice((j_x("2462_2035_495")+j_x("1737_69_932")+j_x("814_799_712")+j_x(1835))),!1):!!this.checkAttackReam()||(p_l&&b_p.broadcastNotice((j_x("712_1835_1724")+j_x("2462_1779"))),!1)},e.prototype.reqMineList=function(){var e=new c2w_minewar_mine_list;DB.instance.query(c2w_minewar_mine_list,e)},e.prototype.reqExitMinePk=function(){var e=new c2w_minewar_move;DB.instance.query(c2w_minewar_move,e)},Object.defineProperty(e.prototype,"mineStage",{get:function(){return this.session,[0,0]},enumerable:!0,configurable:!0}),e.prototype.checkMineRankReward=function(e){if(void 0===e&&(e=null),!e)return this.checkMineRankReward(RankType.MinePersonal)||this.checkMineRankReward(RankType.MineGuild);var p_l=RankModel.instance.getRankDataByType(e);if(p_l){var p_g=e===RankType.MinePersonal?this.prankRwd:this.grankRwd,b_s=p_l.getOwnIndex(),d_u=[];for(var b_e in Config.activity_minewar_rankReward)Config.activity_minewar_rankReward[b_e].rankType===e&&d_u.push(Config.activity_minewar_rankReward[b_e].id);var d_m=d_u[d_u.length-1],d_w=Config.activity_minewar_rankReward[d_m];if(1!=this.mineStage[0]&&2!=this.mineStage[0]&&3!=this.mineStage[0]&&0===p_g&&0<b_s&&b_s<=d_w.endIdx)return!0}return!1},e.prototype.checkCanExchange=function(){if(UI.MineExchange.IS_CLICK)return!1;for(var p_l in Config.activity_minewar_exchange){var p_g=Config.activity_minewar_exchange[p_l],b_s=p_g.limit-(e.instance.exchangeInfo[p_g.id]||0);if(this.money>=p_g.point&&0<b_s)return!0}return!1},Object.defineProperty(e.prototype,"isFree",{get:function(){return this._isFree},enumerable:!0,configurable:!0}),e.prototype.getMineIdByName=function(e){var p_l;for(var p_g in Config.minewar_mines)if(console.log("key",p_g),(p_l=Config.minewar_mines[p_g]).name==e)return p_l.id;return-1},e.prototype.getOccuTime=function(){return Sch()},e.instance=new e,e.MainCityId=1,e}();!function(e){e[e.wakan=0]="wakan",e[e.vit=1]="vit",e[e.gold=2]="gold"}(MineExchangeType=MineExchangeType||{}),function(e){e[e.wakan=0]="wakan",e[e.vit=1]="vit",e[e.attackReam=2]="attackReam",e[e.rob=3]="rob"}(MineExchangeTargetType=MineExchangeTargetType||{}),function(e){e[e.nomalMineCity=0]="nomalMineCity",e[e.mainMineCity=1]="mainMineCity"}(MineCityType=MineCityType||{}),function(e){e[e.noOccupy=0]="noOccupy",e[e.oneOccupy=1]="oneOccupy",e[e.moreOccupy=2]="moreOccupy"}(MineCityStatus=MineCityStatus||{}),function(e){e[e.attackReam=1]="attackReam",e[e.soul=2]="soul",e[e.vit=3]="vit",e[e.rob=4]="rob"}(MineBuyType=MineBuyType||{}),function(e){e[e.win=0]="win",e[e.fail=1]="fail"}(MineFightResultType=MineFightResultType||{});var v_f=function(){function e(){this.minePlayers=[],this._mineVO=new d_i}return e.prototype.setMineDetailVo=function(e){Utils.updateVo(this._mineVO,e.base),this.minePlayers=[];for(var p_l=0,p_g=e.roles;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new MinePlayerInfoVo;d_u.setMinePlayerInfoVo(b_s),1!=b_s.idle&&this.minePlayers.push(d_u)}this.sortMinePlayers()},Object.defineProperty(e.prototype,"mineVo",{get:function(){return this._mineVO},enumerable:!0,configurable:!0}),e.prototype.getMineGuildId=function(){return Ykq(this)},e.prototype.getMinePlayerInfo=function(e){return Ifv(e,this)},e.prototype.getMineId=function(){return Aey(this)},e.prototype.sortMinePlayers=function(){Qxg(this)},e.prototype.getMinePlayers=function(){return Cyt(this)},e.prototype.getMineGuildName=function(){return Slt(this)},e.prototype.sortCompare=function(e,p_l){return e.getMinePlayerId()===b_p.playerId?-1:p_l.getMinePlayerId()===b_p.playerId?1:GuildModel.instance.hasGuild&&e.getMineGuildId()===GuildModel.instance.guildInfo.id&&p_l.getMineGuildId()!==GuildModel.instance.guildInfo.id?-1:GuildModel.instance.hasGuild&&p_l.getMineGuildId()===GuildModel.instance.guildInfo.id&&e.getMineGuildId()!==GuildModel.instance.guildInfo.id?1:0<e.getMineGuildId()&&0===p_l.getMineGuildId()?-1:0<p_l.getMineGuildId()&&0===e.getMineGuildId()?1:0<e.getMineGuildId()&&0<p_l.getMineGuildId()&&e.getMineGuildId()!==p_l.getMineGuildId()?p_l.getMineGuildLevel()-e.getMineGuildLevel():p_l.getMinePlayerPower()-e.getMinePlayerPower()},e}(),MineController=function(){function e(){this.needExchangeVit=!1,this.needOpenExchangSoul=!1}return e.prototype.setNeedExchangeVit=function(e){Qwy(e,this)},e.prototype.getNeedExchangeVit=function(){return Ovz(this)},e.prototype.setNeedOpenExchangeSoul=function(e){Uni(e,this)},e.prototype.getNeedOpenExchangeSoul=function(){return Cjk(this)},e.instance=new e,e}(),MineBuyVo=function(){function e(){}return e.prototype.setMineBuyData=function(e,p_l,p_g,b_s){Iby(e,p_l,p_g,b_s,this)},e.prototype.getItemId=function(){return Iuj(this)},e.prototype.getNum=function(){return Kah(this)},e.prototype.getMineBuyType=function(){return Uul(this)},e.prototype.getBuyId=function(){return Mkv(this)},e}(),MineConstant=function(){function e(){}return e.mode_attack=1,e.mode_rob=2,e.robDef_attack=0,e.robDef_defense=1,e.alert_rob="mine_rob",e.alert_max="mine_max",e}(),IconType,MarryVo=function(){function e(){this.recMarryInfo=null,this._currentPhase=1}return e.prototype.initList=function(){var e=Config.marry_achv;this._achievementList={},this._taskList=[];var p_l=LgcM.ins.heroVo;for(var p_g in e){var b_s=new Marry_Ach_TaskVo,d_u=e[p_g];if(b_s.m_id=p_l.id||0,b_s.h_id=0,b_s.ach_id=d_u.id,b_s.h_currProgress=0,b_s.m_curProgress=0,b_s.name=d_u.name,b_s.status=0,b_s.type=d_u.type,b_s.achvPhase=d_u.achvPhase,b_s.totalProgress=d_u.condition&&d_u.condition[1]?d_u.condition[1]:0,d_u.type===AchTaskType.AchievementType){var b_e=this._achievementList[d_u.achvPhase];(b_e=b_e||(this._achievementList[d_u.achvPhase]=[])).push(b_s)}else this._taskList.push(b_s)}},Object.defineProperty(e.prototype,"achievementList",{get:function(){null==this._achievementList&&this.initList();var e=[];for(var p_l in this._achievementList)e=e.concat(this._achievementList[p_l]);return e},enumerable:!0,configurable:!0}),e.prototype.getCurrentAchiList=function(e){return void 0===e&&(e=0),null==this._achievementList&&this.initList(),e=e||this._currentPhase,this._achievementList[e]||[]},Object.defineProperty(e.prototype,"taskList",{get:function(){return null==this._taskList&&this.initList(),this._taskList},enumerable:!0,configurable:!0}),e}(),Marry_Ach_TaskVo=function(){};!function(e){e[e.RingIcon=292003]="RingIcon",e[e.MARRY_RING=292004]="MARRY_RING"}(IconType=IconType||{});var AchTaskType,FB_PASS,SkillType=function(){function e(){}return e.OneSkill=7001,e.TwoSkill=7002,e.ThreeSkill=7003,e}();!function(e){e[e.AchievementType=1]="AchievementType",e[e.TaskType=2]="TaskType"}(AchTaskType=AchTaskType||{}),function(e){e[e.fiveSecond=5]="fiveSecond",e[e.tenSecond=3]="tenSecond",e[e.fifteenhSecond=2]="fifteenhSecond"}(FB_PASS=FB_PASS||{});var b_v=function(){function e(){this._sweetSkillList=[],this._sweetGoods=[351044,351045,351046],this._marryVo||(this._marryVo=new MarryVo),this._marryVo.seekMarryInfoArr=[],this._marryVo.marryTime=0,this._marryVo.divorceTime=0,this._marryVo.seekMarryState=0,this._marryVo.reqDeleteMarryPid=0,this._marryVo.deleteMarryTime=0,this._marryVo.loverInfo=new x_base_marry,this._marryVo.loverInfo.loveExp=0,this._marryVo.loverInfo.loveLv=0,this._marryVo.loverInfo.lv=0,this._marryVo.loverInfo.name="",this._marryVo.loverInfo.pid=0,this._marryVo.marryId=0,this._marryVo.marryRingInfo=new x_base_ringinfo,this._marryVo.marryRingInfo.exp=0,this._marryVo.marryRingInfo.lv=0,this._marryVo.loverValueInfo=new x_base_marry_lovevalue,this._marryVo.loverValueInfo.loveExp=0,this._marryVo.loverValueInfo.loveLv=0,this._marryVo.loverValueAwardInfo=new x_base_lovevalue_reward,this._marryVo.loverValueAwardInfo.id=0,this._marryVo.loverValueAwardInfo.time=0,this._marryVo.loverValueAwardList=[],this._marryVo.fbJumpLevelTime=15,this._marryVo.fbTotalTime=0,this._marryVo.marryFbAwardList=[],this._marryVo.marryFbTimes=0,this._marryVo.curMarryFbLayer=1}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sweetLog",{get:function(){return this._sweetLog},set:function(e){e.sort((function(e,p_l){return e.time-p_l.time})),this._sweetLog=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOkSkillList",{get:function(){return this._isOkSkillList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sweetId",{get:function(){return this._sweetID},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sweetSkillList",{get:function(){return this._sweetSkillList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sweetGoods",{get:function(){return this._sweetGoods},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ringInfos",{get:function(){return this._ringInfos||[]},set:function(e){this._ringInfos=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ringCfgs",{get:function(){if(!this._ringCfgs){this._ringCfgs=[];var e=Config.marry_ringAct;for(var p_l in e)this._ringCfgs.push(e[p_l])}return this._ringCfgs},enumerable:!0,configurable:!0}),e.prototype.getRingStarInfoById=function(e){return Utp(e,this)},e.prototype.reqMarryRingInfo=function(){var e=new c2m_marry_ringinfo;DB.instance.query(c2m_marry_ringinfo,e)},e.prototype.isHaveReqMarry=function(){var e=this._marryVo.seekMarryInfoArr;return e&&0<e.length},e.prototype.reqAchievemAward=function(e,p_l){var p_g=new c2m_marry_achievement_reward;p_g.type=p_l,p_g.id=e,DB.instance.query(c2m_marry_achievement_reward,p_g)},e.prototype.ringActProp=function(e){var p_l=Config.marry_ringAct[e],p_g=[];return p_l&&(p_g=CharacterProperty.getPropertys(p_l.prop)),p_g},e.prototype.replyMarryInviti=function(e,p_l){var p_g=new c2w_reply_marry;p_g.op=p_l,p_g.pid=e,DB.instance.query(c2w_reply_marry,p_g)},e.prototype.canOpenSKill=function(p_l,p_g,b_s){void 0===p_g&&(p_g=!1),void 0===b_s&&(b_s=!1);var d_u=e.instance._marryVo.marryRingInfo.lv;if(p_l){var b_e=Config.skill_passive_marry[p_l],d_m=Config.skill_passive_marry[p_l+1];if(b_e=p_g?b_e:d_m,(d_m||p_g)&&b_e){var d_w=!0;return b_e.activeCond?d_u<b_e.activeCond[1]&&(b_s&&b_p.broadcastNotice((j_x("217_671_15")+j_x("2342_2462_1779"))),d_w=!1):b_e.consume&&(b_p.checkConsume(b_e.consume,b_s)||(d_w=!1)),d_w}}return!1},e.prototype.isCanRingStarUp=function(e,p_l,p_g){void 0===p_g&&(p_g=!1);var b_s=this.starNum(e,p_l+1),d_u=Config.marry_ringStar[b_s];return d_u?b_p.checkConsume(d_u.starupNum,p_g)?UpState.CAN_UP:UpState.NOT_ENOUGH:UpState.MAX_UP},e.prototype.getMarryRingSkillPropInfo=function(){var e=SkillModel.instance.getPassiveList(PassiveSkillType.MARRY),p_l=[];for(var p_g in e){var b_s=Config.skill_passive_marry[e[p_g].id+e[p_g].level-1];if(b_s){var d_u=CharacterProperty.getPropertys(b_s.featureParam);CharacterProperty.mergePropertys(p_l,d_u)}}return p_l},e.prototype.calAchievementProgress=function(e){var p_l=e===AchTaskType.AchievementType?this._marryVo.getCurrentAchiList():this._marryVo.taskList,p_g=0,b_s=0;if(p_l&&p_l.length)for(var d_u in p_l)p_l[d_u].status&&++p_g,++b_s;return[p_g,b_s]},e.prototype.reqMarry=function(e){var p_l=new c2w_invite_marry;p_l.pid=e,DB.instance.query(c2w_invite_marry,p_l)},e.prototype.canFosterMarryRing=function(){if(this._marryVo&&this._marryVo.marryRingInfo&&this.isMarry()){var e=this._marryVo.marryRingInfo;if(e.lv){var p_l=Config.marry_ring[e.lv];if(!Config.marry_ring[e.lv+1])return!1;if(p_l)return!(BagModel.instance.getItemCountByItemID(p_l.cost[0][0],BagTypeDefine.BAG_TYPE_ITEM)<p_l.cost[0][1])}return!1}return!1},e.prototype.reqEnterMarryFbCount=function(){var e=new c2m_marry_times_info;DB.instance.query(c2m_marry_times_info,e)},e.prototype.reqMarryRegister=function(e,p_l){var p_g=new c2w_set_marryinfo;p_g.city=e,p_g.notice=p_l,DB.instance.query(c2w_set_marryinfo,p_g)},e.prototype.setBlackkingWallInfo=function(e){this._marryVo.blacckingWallInfo=e.walls;var p_l=[];for(var p_g in e.walls)e.walls[p_g].base.pid==b_p.playerId?this._marryVo.recMarryInfo=e.walls[p_g]:p_l.push(e.walls[p_g]);this._marryVo.blacckingWallInfo.sort((function(e,p_l){return p_l.qinmi!=e.qinmi?p_l.qinmi-e.qinmi:p_l.isOnline===e.isOnline&&0==e.isOnline?e.logoutTime-p_l.logoutTime:p_l.isOnline-e.isOnline})),LED.event(l_r.MARRY_REGISTER_UPDATE)},e.sortAch_TaskList=function(e,p_l){var p_g=e.h_currProgress===e.totalProgress&&e.m_curProgress===e.totalProgress&&0===e.status?1:0,b_s=p_l.h_currProgress===p_l.totalProgress&&p_l.m_curProgress===p_l.totalProgress&&0===p_l.status?1:0;if(p_g!=b_s)return b_s-p_g;var d_u=e.h_currProgress===e.totalProgress&&e.m_curProgress===e.totalProgress&&1===e.status?1:0,b_e=p_l.h_currProgress===p_l.totalProgress&&p_l.m_curProgress===p_l.totalProgress&&1===p_l.status?1:0;return d_u!=b_e?d_u-b_e:void 0},e.prototype.reqBuyMarryFbCount=function(){var e=new c2m_marry_buy_times;DB.instance.query(c2m_marry_buy_times,e)},e.prototype.onUpdateLoverValueAwardInfo=function(e){e&&e.rewardInfo&&e.rewardInfo.id&&(this._marryVo.loverValueAwardInfo.id=e.rewardInfo.id,this._marryVo.loverValueAwardInfo.time=e.rewardInfo.time),LED.event(l_r.LOVERVALUE_AWARD_INFO)},e.prototype.reqSkillLst=function(){var e=new c2m_skill_list;DB.instance.query(c2m_skill_list,e)},e.prototype.ringStarProp=function(e,p_l){var p_g=this.starNum(e,p_l),b_s=Config.marry_ringStar[p_g],d_u=[];return b_s&&(d_u=CharacterProperty.getPropertys(b_s.prop)),d_u},e.prototype.allRingActProp=function(){var e=[];for(var p_l in this.ringInfos){var p_g=this.ringInfos[p_l];CharacterProperty.mergePropertys(e,this.ringActProp(p_g.id))}return e},e.prototype.isCanRingActive=function(e,p_l){void 0===p_l&&(p_l=!1);var p_g=Config.marry_ringAct[e],b_s=this.getRingStarInfoById(e);return!(!p_g||b_s)&&b_p.checkConsume(p_g.actNum,p_l)},e.prototype.canGetTask_AchievementAward=function(e){if(e===AchTaskType.AchievementType){var p_l=this._marryVo.getCurrentAchiList();for(var p_g in p_l)if(!(p_l[p_g].m_curProgress<p_l[p_g].totalProgress||p_l[p_g].h_currProgress<p_l[p_g].totalProgress)&&0===p_l[p_g].status)return!0;return!1}if(e===AchTaskType.TaskType){for(var p_g in p_l=this._marryVo.taskList)if(!(p_l[p_g].m_curProgress<p_l[p_g].totalProgress||p_l[p_g].h_currProgress<p_l[p_g].totalProgress)&&0===p_l[p_g].status)return!0;return!1}},e.prototype.reqLoverVaueFoster=function(){var e=new c2w_marry_add_lovevalue;DB.instance.query(c2w_marry_add_lovevalue,e)},e.prototype.reqLoverValueAward=function(e){var p_l=new c2m_marry_lovevalue_reward;p_l.id=e,DB.instance.query(c2m_marry_lovevalue_reward,p_l)},e.prototype.isGetLoverValueAward=function(){var e=this._marryVo.loverValueInfo.loveLv,p_l=this._marryVo.loverValueAwardInfo.id,p_g=this._marryVo.loverValueAwardInfo.time;return p_l<e||e===p_l&&0<e&&0===p_g},e.prototype.resetMarryFbAwardList=function(){Ych(this)},e.prototype.reqAchievemInfo=function(e){var p_l=new c2w_marry_achievement_info;p_l.type=e,DB.instance.query(c2w_marry_achievement_info,p_l)},e.prototype.marryMainFight=function(){var p_l=0,p_g=e.instance._marryVo.loverInfo;if(p_g&&p_g.loveLv){var b_s=Config.marry_love_value[p_g.loveLv+1];b_s&&(p_l=b_p.calPropFight(CharacterProperty.getPropertys(b_s.attr)))}return p_l+this.marryRingFight()},e.prototype.reqMarryRingFoster=function(){var e=new c2m_marry_ringfoster;DB.instance.query(c2m_marry_ringfoster,e)},e.prototype.reqLoverValueAwardInfo=function(){var e=new c2m_marry_lovevalue_info;DB.instance.query(c2m_marry_lovevalue_info,e)},e.prototype.updateAchievementInfo=function(e,p_l){if(e&&p_l){if(AchTaskType.AchievementType===p_l){var p_g={},b_s=this._marryVo.achievementList;for(var d_u in e)for(var b_e in b_s)if(e[d_u].achId===b_s[b_e].ach_id){b_s[b_e].m_curProgress=e[d_u].progress,null==p_g[b_s[b_e].achvPhase]&&(p_g[b_s[b_e].achvPhase]=0),1==e[d_u].status&&p_g[b_s[b_e].achvPhase]++,b_s[b_e].status=e[d_u].status,b_s[b_e].h_currProgress=e[d_u].mProgress,b_s[b_e].h_id=e[d_u].pid;break}for(var d_u in p_g){var d_m=parseInt(d_u),d_w=this._marryVo.getCurrentAchiList(d_m),f_t=this._marryVo.getCurrentAchiList(d_m+1);d_w.length>p_g[d_u]&&d_m<=this._marryVo._currentPhase?this._marryVo._currentPhase=d_m:d_w.length<=p_g[d_u]&&0<f_t.length&&(this._marryVo._currentPhase=d_m+1)}}else for(var d_u in e)for(var b_e in this._marryVo.taskList)if(e[d_u].achId===this._marryVo.taskList[b_e].ach_id){this._marryVo.taskList[b_e].m_curProgress=e[d_u].progress,this._marryVo.taskList[b_e].status=e[d_u].status,this._marryVo.taskList[b_e].h_currProgress=e[d_u].mProgress,this._marryVo.taskList[b_e].h_id=e[d_u].pid;break}LED.event(l_r.MARRY_ACHIEVEMENT_UPDATE,p_l)}},e.prototype.offLineMarrInfo=function(e){if(e&&e.requests&&0<e.requests.length)for(var p_l in this._marryVo.seekMarryInfoArr=[],e.requests)this.setMarryInfo(e.requests[p_l],!1);LED.event(l_r.UPDATE_MARRY_LIST)},e.prototype.updateSingleAchInfo=function(e){if(e&&e.id&&e.type){if(e.type===AchTaskType.AchievementType){var p_l=this._marryVo.getCurrentAchiList(),p_g=!1,b_s=0;for(var d_u in p_l)p_l[d_u].ach_id===e.id&&(p_l[d_u].status=e.status,p_g=!0),1==p_l[d_u].status&&b_s++;var b_e=this._marryVo.getCurrentAchiList(this._marryVo._currentPhase+1);if(b_s>=p_l.length&&0<b_e.length&&this._marryVo._currentPhase++,!p_g){var d_m=this._marryVo.achievementList;for(var d_u in d_m)for(var d_w in d_m[d_u])if(e[d_u].achId===d_m[d_u]){d_m[d_w].status=e[d_u].status;break}}}else for(var d_u in this._marryVo.taskList)this._marryVo.taskList[d_u].ach_id===e.id&&(this._marryVo.taskList[d_u].status=e.status);LED.event(l_r.MARRY_ACHIEVEMENT_UPDATE,e.type)}},e.prototype.tabRedpoint=function(){if(!p_k.instance.checkSystemOpenByName("MarryMainView"))return!1;if(!this.isMarry())return!1;var e=this.canGetTask_AchievementAward(AchTaskType.AchievementType),p_l=this.canGetTask_AchievementAward(AchTaskType.TaskType),p_g=this.canFosterMarryRing(),b_s=this.isGetLoverValueAward(),d_u=this.canFosterLoverValue();return e||p_l||p_g||b_s||d_u||this.canChallengeFb()||this.isRingStarRed()},e.prototype.reqLoverAchievement=function(){var e=new c2m_marry_online_check;DB.instance.query(c2m_marry_online_check,e)},e.prototype.setMarryRingInfo=function(e){Mad(e,this,LED,l_r)},e.prototype.canStarRing=function(){if(this._marryVo&&this._marryVo.marryRingInfo&&this.isMarry()){var e=Config.marry_ringAct;for(var p_l in e)if(this.isStarAndActRed(e[p_l].id))return!0}return!1},e.prototype.isStarAndActRed=function(e){var p_l=this.getRingStarInfoById(e);return this.isCanRingActive(e)||p_l&&this.isCanRingStarUp(e,p_l.star)==UpState.CAN_UP},e.prototype.canChallengeFb=function(){return 0<this._marryVo.marryFbTimes&&null==!e.instance._marryVo.loverInfo},e.prototype.integrateData=function(e,p_l){if(e&&p_l){for(var p_g in this._marryVo.loverValueAwardList)if(this._marryVo.loverValueAwardList[p_g][0]===e)return void(this._marryVo.loverValueAwardList[p_g][1]+=p_l);this._marryVo.loverValueAwardList.push([e,p_l])}},e.prototype.getMarryRingPropInfo=function(e){var p_l=Config.marry_ring[e],p_g=[];if(p_l){var b_s=CharacterProperty.getPropertys(p_l.lvAttr);CharacterProperty.mergePropertys(p_g,b_s)}return p_g},e.prototype.onLineMarrInfo=function(e){Grn(e,this)},e.prototype.deleteSeekMarryInfoByPin=function(p_l){if(this._marryVo.seekMarryInfoArr)for(var p_g=this._marryVo.seekMarryInfoArr,b_s=0;b_s<p_g.length;b_s++)if(p_g[b_s].pid==p_l){p_g.splice(b_s,1);break}e.instance.onUPdateMarryListRed()},e.prototype.reqAutoMarryRingFoster=function(){var e=new c2m_marry_auto_ringfoster;DB.instance.query(c2m_marry_auto_ringfoster,e)},e.prototype.allRingStarProp=function(){var e=[];for(var p_l in this.ringInfos){var p_g=this.ringInfos[p_l];CharacterProperty.mergePropertys(e,this.ringStarProp(p_g.id,p_g.star))}return e},e.prototype.reqDivorce=function(){var p_l=new c2w_delete_marry;DB.instance.query(c2w_delete_marry,p_l),e.instance.reqWifeInfo()},e.prototype.reqMarryList=function(){var e=new c2w_marry_request_list;DB.instance.query(c2w_marry_request_list,e)},e.prototype.isMarry=function(){return this._marryVo.loverInfo&&0<this._marryVo.marryId},e.prototype.popSeekMarryInfo=function(){return this._marryVo.seekMarryInfoArr?this._marryVo.seekMarryInfoArr[this._marryVo.seekMarryInfoArr.length-1]:null},e.prototype.reqBlackkingWallInfo=function(){var e=new c2w_xianlv_wall;DB.instance.query(c2w_xianlv_wall,e)},e.prototype.loverBaseInfo=function(p_l){var p_g=e.instance._marryVo;p_g.loverInfo=p_l.marry,p_l.marry&&(p_g.loverValueInfo.loveExp=p_l.marry.loveExp,p_g.loverValueInfo.loveLv=p_l.marry.loveLv),p_g.marryId=p_l.marryId,p_g.marryTime=p_l.marrytime,p_g.divorceTime=p_l.divorceTime,p_g.deleteMarryTime=p_l.deleteMarryTime,p_g.reqDeleteMarryPid=p_l.requestId,LED.event(l_r.LOVER_INFO_UPDATE,p_l)},e.prototype.getMarryRingInfoById=function(e){return e?Config.marry_ring[e]:null},e.prototype.isRingStarRed=function(){return Myr(this)},e.prototype.starNum=function(e,p_l){return Sxf(e,p_l)},e.prototype.reqLoverValueAutoFoster=function(){var e=new c2w_marry_auto_add_lovevalue;DB.instance.query(c2w_marry_auto_add_lovevalue,e)},e.prototype.integratFbAward=function(){var p_l=e.instance._marryVo.curMarryFbLayer-1,p_g={},b_s=Config.fb_marry_fb;for(var d_u in b_s){if(!(b_s[d_u].id<=p_l))break;var b_e=b_s[d_u].reward;if(b_e)for(var d_m in b_e)null==p_g[b_e[d_m][0]]?p_g[b_e[d_m][0]]=b_e[d_m][1]:p_g[b_e[d_m][0]]+=b_e[d_m][1]}var d_w=[];for(var d_m in p_g){var f_t=[parseInt(d_m),p_g[d_m]];d_w.push(f_t)}return d_w},e.prototype.onUpdateLoverValueInfo=function(e){Eii(e,this,LED,l_r)},e.prototype.resetFbTime=function(){Ohi(this)},e.prototype.resetLoverValueAwardArr=function(){Emp(this)},e.prototype.setMarryInfo=function(e,p_l){void 0===p_l&&(p_l=!0),null==this._marryVo.seekMarryInfoArr&&(this._marryVo.seekMarryInfoArr=[]);var p_g=this._marryVo.seekMarryInfoArr,b_s=!1;if(p_g&&p_g.length){for(var d_u in p_g)if(p_g[d_u].pid===e.pid){b_s=!0;break}b_s||this._marryVo.seekMarryInfoArr.push(e)}else this._marryVo.seekMarryInfoArr.push(e);p_l&&(LED.event(l_r.UPDATE_MARRY_LIST),UIM.instance.isOpenWin(UI.MarryInviteTips)?LED.event(l_r.PROPOSE_TO_INVITE):UI.MarryInviteTips.open())},e.prototype.reqWifeInfo=function(){var e=new c2w_marry_info;DB.instance.query(c2w_marry_info,e)},e.prototype.reqEnterMarryFb=function(){e.instance._marryVo.fbTotalTime=177;var p_l=new c2w_marry_enter_map;DB.instance.query(c2w_marry_enter_map,p_l)},e.prototype.canFosterLoverValue=function(){if(this._marryVo&&this._marryVo.loverInfo&&this._marryVo.loverValueInfo){var e=this._marryVo.loverValueInfo;if(null==e.loveLv)return!1;var p_l=Config.marry_love_value[e.loveLv+1];return!(!Config.marry_love_value[e.loveLv+2]||p_l&&BagModel.instance.getItemCountByItemID(p_l.cost[0][0],BagTypeDefine.BAG_TYPE_ITEM)<p_l.cost[0][1])}return!1},e.prototype.marryRingFight=function(){var p_l=0,p_g=e.instance._marryVo.marryRingInfo;if(p_g&&p_g.lv){var b_s=e.instance.getMarryRingInfoById(p_g.lv);if(b_s){var d_u=e.instance.getMarryRingPropInfo(b_s.id),b_e=e.instance.getMarryRingSkillPropInfo();p_l=b_p.calPropFight(d_u)+b_p.calPropFight(b_e),p_l+=b_p.calPropFight(this.allRingStarProp())+b_p.calPropFight(this.allRingActProp())}}return p_l},e.prototype.reqCancelDeleteMarry=function(){var p_l=new c2w_cancel_delete_marry;DB.instance.query(c2w_cancel_delete_marry,p_l),e.instance.reqWifeInfo()},Object.defineProperty(e.prototype,"marryListRed",{get:function(){return this._marryList_red},enumerable:!0,configurable:!0}),e.prototype.setMarryListRed=function(e){Gqu(e,this)},e.prototype.reqMarrySweetInfoLog=function(){var e=new c2m_marry_sweet_info_log;DB.instance.query(c2m_marry_sweet_info_log,e)},e.prototype.isOkSkill=function(e){return Wyl(e,this)},e.prototype.reqMarrySweetUpgrade=function(){var e=new c2m_marry_sweet_upgrade;DB.instance.query(c2m_marry_sweet_upgrade,e)},e.prototype.updateSweetId=function(e){Iqr(e,this)},e.prototype.isSweetLevelUpdate=function(){var p_l=e.instance.sweetId;if(0==p_l)return!1;var p_g=Config.marry_sweet[p_l+1];return!!p_g&&(1<=LgcM.ins.heroVo.marrySweetdDegree/p_g.num||void 0)},e.prototype.updateIsOkSkillList=function(e){Oho(e,this)},e.prototype.onUPdateMarryListRed=function(){this.marryListRed&&(this.marryListRed.visible=e.instance.isHaveReqMarry())},e.prototype.isEnoughSM=function(){var p_l=e.instance.sweetGoods,p_g=e.instance.sweetId;if(!Config.marry_sweet[p_g+1])return!1;for(var b_s in p_l)if(0<BagModel.instance.getItemCount(p_l[b_s]))return!0;return!1},e.prototype.reqRingWear=function(e){var p_l=new c2m_change_ring_used;p_l.illusionId=e,DB.instance.query(c2m_change_ring_used,p_l)},e.prototype.reqMarrySweetInfo=function(){var e=new c2m_marry_sweet_info;DB.instance.query(c2m_marry_sweet_info,e)},e.prototype.reqRingActive=function(e){var p_l=new c2m_marry_illusion_act;p_l.illusionId=e,DB.instance.query(c2m_marry_illusion_act,p_l)},e.prototype.isSweetSkillA=function(){var p_l=e.instance.sweetId;if(0===p_l)return!1;var p_g=Config.skill_passive_sweet;for(var b_s in p_g)if(e.instance.isSweetActivate(p_l,p_g[b_s].id)&&!e.instance.isOkSkill(p_g[b_s].id))return!0;return!1},e.prototype.sweetFight=function(){var p_l=this.addSweetProps(),p_g=e.instance.sweetId;if(null==p_g||0==p_g)return 0;var b_s=Config.marry_sweet[p_g],d_u=0,b_e=Config.fightCoef;for(var d_m in p_l)for(var d_w in b_s.lvAttr)if(b_s.lvAttr[d_w][0]==p_l[d_m].name){var f_t=void 0;for(var v_z in b_e)b_e[v_z].propName==p_l[d_m].name&&(f_t=b_e[v_z].coef);d_u=(b_s.lvAttr[d_w][1]+p_l[d_m].value)*f_t+d_u;break}return Math.floor(d_u)},e.prototype.reqRingUpStar=function(e){var p_l=new c2m_marry_illusion_up_star;p_l.illusionId=e,DB.instance.query(c2m_marry_illusion_up_star,p_l)},e.prototype.isSweetActivate=function(e,p_l){var p_g=Config.skill_passive_sweet[p_l];return!!p_g&&e>=p_g.activeCond[1]},e.prototype.tidySweetSkill=function(){var e=Config.skill_passive_sweet;for(var p_l in this._sweetSkillList.length=0,e)this._sweetSkillList.push(e[p_l]);this._sweetSkillList.sort((function(e,p_l){return e.id-p_l.id}))},e.prototype.addSweetProps=function(){var e=b_p.getPropInfos([["attack",0],["defense",0],["hpUpper",0],["armorBreak",0]]),p_l=Config.skill_passive_sweet;for(var p_g in p_l)this.isOkSkill(p_l[p_g].id)&&(e=b_p.addProps(p_l[p_g].featureParam,1,e));return e},e.prototype.isSweetAllRed=function(){var p_l=!1;return e.instance._marryVo.loverInfo&&e.instance._marryVo.marryId&&(p_l=!0),this.isHaveReqMarry()||p_l&&(this.isEnoughSM()||this.isSweetSkillA()||this.isSweetLevelUpdate())},e.haveSkillNum=3,e}(),MarryController=function(){function e(){DB.instance.on(w2c_marry_info.opcode.toString(),this,this.onReturnMarryInfo),DB.instance.on(w2c_xianlv_wall.opcode.toString(),this,this.onReturnBlackkingWallInfo),DB.instance.on(w2c_rec_marry.opcode.toString(),this,this.onRecMarryInfo),DB.instance.on(w2c_marry_request_list.opcode.toString(),this,this.offRecMarryInfo),DB.instance.on(w2c_success_marry.opcode.toString(),this,this.onSuccessMarry),DB.instance.on(w2c_delete_marry.opcode.toString(),this,this.onSuccessDisvorce),DB.instance.on(m2c_marry_ringinfo.opcode.toString(),this,this.onMarryRingInfo),DB.instance.on(m2c_marry_ringfoster.opcode.toString(),this,this.onMarryRingFosterInfo),DB.instance.on(w2c_marry_achievement_info.opcode.toString(),this,this.onUpdateAchievementInfo),DB.instance.on(m2c_marry_achievement_reward.opcode.toString(),this,this.onAchievementAwardInfo),DB.instance.on(w2c_marry_add_lovevalue.opcode.toString(),this,this.onLoverValueAdd),DB.instance.on(m2c_marry_lovevalue_info.opcode.toString(),this,this.onLoverValueAwardInfo),DB.instance.on(m2c_marry_lovevalue_reward.opcode.toString(),this,this.onGetLoverValueAward),DB.instance.on(m2c_marry_times_info.opcode.toString(),this,this.onReturnMarryFbTimesInfo),DB.instance.on(m2c_marry_buy_times.opcode.toString(),this,this.onBuyEnterFbCount),DB.instance.on(m2c_marry_layer.opcode.toString(),this,this.onUpdateCurrFbLayer),DB.instance.on(w2c_req_delete_marry.opcode.toString(),this,this.onDeleteMarry),DB.instance.on(m2c_marry_sweet_info.opcode.toString(),this,this.onMarrySweetInfo),DB.instance.on(m2c_marry_sweet_info_log.opcode.toString(),this,this.onMarrySweetInfoLog),DB.instance.on(m2c_marry_sweet_upgrade.opcode.toString(),this,this.onMarrySweetUpgrade),DB.instance.on(m2c_marry_illusion_info.opcode.toString(),this,this.onMarryRingData)}return e.prototype.onReturnMarryInfo=function(e){b_v.instance.loverBaseInfo(e),e.marry&&(b_v.instance.reqAchievemInfo(AchTaskType.AchievementType),b_v.instance.reqAchievemInfo(AchTaskType.TaskType),b_v.instance.reqLoverValueAwardInfo(),b_v.instance.reqMarryRingInfo())},e.prototype.onSuccessDisvorce=function(e){b_v.instance._marryVo&&b_v.instance._marryVo.loverValueInfo&&(b_v.instance._marryVo.loverValueInfo.loveExp=0,b_v.instance._marryVo.loverValueInfo.loveLv=1),b_v.instance.reqWifeInfo(),b_p.broadcastNotice((j_x("2217_1738_1300")+j_x("402_2142_1016")+j_x(362)),1,"#71de66")},e.prototype.onMarrySweetInfoLog=function(e){Aqf(e,b_v,LED,l_r)},e.prototype.onReturnBlackkingWallInfo=function(e){var p_l=b_v.instance._marryVo;p_l.seekMarryState=e.state;var p_g=[];for(var b_s in p_l.recMarryInfo=null,e.walls)e.walls[b_s].base.pid==b_p.playerId?p_l.recMarryInfo=e.walls[b_s]:p_g.push(e.walls[b_s]);p_l.blacckingWallInfo=p_g,p_l.blacckingWallInfo.sort((function(e,p_l){return p_l.qinmi!=e.qinmi?p_l.qinmi-e.qinmi:p_l.isOnline===e.isOnline&&0==e.isOnline?e.logoutTime-p_l.logoutTime:p_l.isOnline-e.isOnline})),LED.event(l_r.MARRY_REGISTER_UPDATE)},e.prototype.onMarryRingFosterInfo=function(e){Itg(e,b_v)},e.prototype.onDeleteMarry=function(e){},e.prototype.onUpdateCurrFbLayer=function(e){e&&e.layer&&(b_v.instance._marryVo.curMarryFbLayer=e.layer,e.status&&(UIM.instance.isOpenWin(UI.MarryFbResultView)||UI.MarryFbResultView.open()),LED.event(l_r.UPDATE_CURRENY_LAYER,e.status))},e.prototype.onGetLoverValueAward=function(e){e&&e.list&&(b_v.instance._marryVo.loverValueAwardInfo.id=e.list.id,b_v.instance._marryVo.loverValueAwardInfo.time=e.list.time),LED.event(l_r.GET_LOVERVALUE_AWARD)},e.prototype.onBuyEnterFbCount=function(e){e&&e.status?(b_p.broadcastNotice((j_x("1355_2420_402")+j_x(2142)),1,Utils.Color.GREEN),b_v.instance._marryVo.marryFbTimes=e.residueTimes,LED.event(l_r.SUCCESS_BUY_FBCOUNT)):b_p.broadcastNotice((j_x("2339_1254_1355")+j_x("2420_235_2348")+j_x("1300_1117_1012")+j_x("1067_2128")))},e.prototype.onMarryRingInfo=function(e){Mvp(e,b_v)},e.prototype.onLoverValueAdd=function(e){Etp(e,b_v)},e.prototype.onAchievementAwardInfo=function(e){Ysf(e,b_v)},e.prototype.onUpdateAchievementInfo=function(e){Krk(e,b_v)},e.prototype.onReturnMarryFbTimesInfo=function(e){b_v.instance._marryVo&&(b_v.instance._marryVo.marryFbTimes=e.residueTimes,LED.event(l_r.MARRYFB_ENTER_TIMES))},e.prototype.onMarrySweetUpgrade=function(e){Elt(e,b_v,LED,l_r)},e.prototype.onSuccessMarry=function(e){Mxn(e,b_v,b_p,j_x)},e.prototype.onMarrySweetInfo=function(e){Aub(e,b_v,LED,l_r)},e.prototype.offRecMarryInfo=function(e){Coi(e,b_v)},e.prototype.onRecMarryInfo=function(e){Kjq(e,b_v)},e.prototype.onLoverValueAwardInfo=function(e){Uic(e,b_v)},e.prototype.onMarryRingData=function(e){var p_l=b_v.instance,p_g=p_l.getRingStarInfoById(e.ringinfo.id);p_g?p_g.star=e.ringinfo.star:p_l.ringInfos.push(e.ringinfo),LED.event(l_r.MARRY_RING_STAR_UPDATE)},e}(),WinPanelVo=function(){function e(){this.isModal=!1,this.clickModalColse=!1,this.isShowTopUI=!1,this.opts=null,this.isCloseSwitch=!1,this.win=null,this.winName=null,this.closeTime=-1}return Object.defineProperty(e.prototype,"Class",{get:function(){var e=UI[this.winName];if(e)return e;console.log("WinPanelVo. Class is null, winName=",this.winName)},enumerable:!0,configurable:!0}),e.prototype.openWin=function(e,p_l){void 0===e&&(e=null),void 0===p_l&&(p_l=null),this.isClose=!1;var p_g=this.winName;if(null!=this.win)this.isCloseSwitch?this.win.parent?UIM.close(this.Class,!1):this.showWinLater(e,p_l):this.win.parent?(this.win.visible=!0,this.win.parent.setChildIndex(this.win,this.win.parent.numChildren-1),this.win.updateContent(p_l),GuideManager.instance.openWin(p_g)):this.showWinLater(e,p_l);else{if(UIM.instance.hideAndShowUnderSp(this,!0,!0),this.getLoadList(e,p_l,this.onUILoadComplete))return!0;this.createWin(p_l)}return!1},e.prototype.showWinLater=function(e,p_l){Ebk(e,p_l,this,Laya)},e.prototype.tweenWinShow=function(){if(this._winTween&&(this._winTween.clear(),this._winTween=null),!this.win)return!1;this.win.visible=!0;var e=this.win.x,p_l=this.win.y,p_g=UIM.instance.getTargetPosByWinName(this.winName);return this.isCloseSwitch&&p_g?(this.win.alpha=0,this.win.pos(p_g.x,p_g.y),this.win.scale(.1,.1),this._winTween=Laya.Tween.to(this.win,{f_u:e,j_l:p_l,alpha:1,scaleX:1,scaleY:1},200,null,Laya.Handler.create(this,this.winTweenComplete),null,!0),!0):(this.win.alpha=1,this.win.scale(1,1),this.winTweenComplete(),!1)},e.prototype.getLoadList=function(e,p_l,p_g,b_s){void 0===b_s&&(b_s=!0);var d_u=[],b_e=!(this._urls=[]);if(e)for(var d_m=void 0,d_w=0;d_w<e.length;++d_w)d_m=Resource.ResUrl.UI_ATLAS+e[d_w],Laya.loader.getRes(d_m)||(d_u.push(d_m),b_e=!0),this._urls.push(d_m);return b_e&&(GPlatform.isDispose&&(Laya.WeakObject._keys={}),Laya.loader.load(d_u,Laya.Handler.create(this,p_g,[p_l]),null,null,1)),b_e},e.prototype.tweenWinClose=function(e){if(void 0===e&&(e=null),this._releaseRes=e,this._winTween)return this._winTween.clear(),this._winTween=null,void(this.win&&UIM.close(this.Class,!0));if(this.win){var p_l=UIM.instance.getTargetPosByWinName(this.name);p_l&&this.win.visible?this._winTween=Laya.Tween.to(this.win,{f_u:p_l.x,j_l:p_l.y,alpha:0,scaleX:.1,scaleY:.1},200,null,Laya.Handler.create(this,this.winCloseTweenComplete),null,!0):this.winCloseTweenComplete()}},e.prototype.winCloseTweenComplete=function(){this._winTween&&(this._winTween.clear(),this._winTween=null),this.win&&UIM.close(this.Class,!0)},e.prototype.showWin=function(e){!this.isClose&&this.win&&(this.win.dataSource=e,UIM.instance.showWin(this.Class))},e.prototype.createWin=function(e){this.isClose||(!this.win&&this.Class&&(this.win=new this.Class),Laya.timer.callLater(this,this.showWin,[e]))},e.prototype.winTweenComplete=function(){this._winTween&&(this._winTween.clear(),this._winTween=null),GuideManager.instance.openWin(this.name)},e.prototype.onUILoadComplete=function(e){if(console.log("UI loadComplete"),!this.isClose){if(!this.win)try{this.win=new this.Class}catch(e){console.log("error:",e)}Laya.timer.callLater(this,this.createWin,[e])}},e.prototype.winCloseCallBack=function(e){if(void 0===e&&(e=null),this._winTween&&(this._winTween.clear(),this._winTween=null),this.closeTime=SyncTime.tickCount,this._urls&&Laya.loader.cancelLoadByUrls(this._urls),e&&(this._releaseRes=e),this._releaseRes)for(var p_l=0;p_l<this._releaseRes.length;p_l++)this._releaseRes[p_l]&&Laya.loader.clearTextureRes(this._releaseRes[p_l]),this._releaseRes[p_l]=null;if(this._urls)for(p_l=0;p_l<this._urls.length;++p_l)Laya.loader.clearTextureRes(this._urls[p_l]);this._releaseRes=null,this.isClose=!0},Object.defineProperty(e.prototype,"name",{get:function(){return this.winName},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._winTween&&(this._winTween.clear(),this._winTween=null),this.isModal=!1,this.clickModalColse=!1,this.isShowTopUI=!1,this.opts=null,this.isCloseSwitch=!1,this.isClose=!1,this.win&&(this.win.removeSelf(),this.win.destroy(!0)),this._urls&&n_e.clearRes(this._urls),this._urls=null,this.win=null,this.closeTime=-1,this.winModal&&(this.winModal.removeSelf(),this.winModal.destroy(),this.winModal=null),Laya.Pool.recover("winPanelVo",this)},Object.defineProperty(e,"freeWinVo",{get:function(){return Laya.Pool.getItemByClass("winPanelVo",e)},enumerable:!0,configurable:!0}),e}(),UI;!function(e){var p_l=(p_g.openWin=function(e,p_l){var p_g=this.getClassByWinID(e);if(null!=p_g&&p_g.open){var b_s=p_g.open;b_s&&b_s.apply(p_g,p_l)}},p_g.hideWinByName=function(e){var p_l=Config.Utils.getWindowByName(e);if(p_l&&p_l.id){var p_g=this.getClassByWinID(p_l.id);if(null==p_g)return;UIM.instance.hideWin(p_g)}},p_g.getClassByWinPath=function(p_l){return Wcy(p_l,e)},p_g.closeWin=function(e,p_l){void 0===p_l&&(p_l=!1);var p_g=this.getClassByWinID(e);if(null!=p_g&&p_g.close){var b_s=p_g.close;b_s&&b_s.call(p_g,p_l)}},p_g.closeWinByName=function(e){var p_l=Config.Utils.getWindowByName(e);p_l&&p_l.id&&this.closeWin(p_l.id)},p_g.getClassByWinID=function(e){var p_l=Config.window[e];return p_l?this.getClassByWinPath(p_l.className):null},p_g);function p_g(){}e.WindowClass=p_l}(UI=UI||{});var UILoadingStatus,UIM=function(){function e(){this._winDic={},this._showTopCount=0,this.isStoryFb=!1}return e.prototype.init=function(e){this._root=e,this._bottomContainer=new Laya.Sprite,this._root.addChild(this._bottomContainer),this._underContainer=new Laya.Sprite,this._root.addChild(this._underContainer),this._winContainer=new Laya.Sprite,this._root.addChild(this._winContainer),this._topContainer=new Laya.Sprite,this._root.addChild(this._topContainer)},e.prototype.getHeadTopUI=function(){return Itu(this)},e.prototype.isOpenWin=function(e){if(!e)return!1;var p_l=this.getWinName(e),p_g=this._winDic[p_l],b_s=p_g?p_g.win:null;return!(!b_s||!b_s.parent)},e.prototype.showWin=function(e){if(!this.isOpenWin(e)){var p_l=this.getWinName(e);console.log("showWin",p_l);var p_g=this._winDic[p_l],b_s=p_g?p_g.win:null;if(p_g.isShowTopUI&&(this._showTopCount++,null!=b_s&&this.showHeadTopUI()),null!=b_s&&!b_s.parent){this.hideAndShowUnderSp(p_g),this.createWinModal(e),b_s.x=Stage.width-b_s.width>>1,GPlatform.needAdapt&&0<GPlatform.disStageX&&("LilianPanel"===p_l||"HoleBtnPanel"===p_l)&&(b_s.x=-GPlatform.disStageX/2);var d_u=GPlatform.needAdapt?GPlatform.ratioY:1;d_u=1<d_u?d_u:1,p_g.isShowTopUI&&this.getHeadTopUI()&&d_u<=1?b_s.y=this.getHeadTopUI().height:b_s.y=GPlatform.stageHeight-b_s.height>>1;var b_e=Config.Utils.getWindowByName(p_l);if(b_e&&b_e.mutexName&&""!==b_e.mutexName)for(var d_m=0,d_w=b_e.mutexName.split(",");d_m<d_w.length;d_m++){var f_t=d_w[d_m];UI.WindowClass.closeWinByName(f_t.trim())}var v_z=this._winContainer,d_h=p_g.opts;d_h&&d_h.container&&(v_z="mainUI"===d_h.container?(v_z=this.getMainUI()["container"+d_h.mainUIContainer])||this._winContainer:(v_z=this["_"+d_h.container+"Container"])||this._winContainer),v_z.addChild(b_s),d_h&&"number"==typeof d_h.depthIndex&&(d_h.depthIndex<0&&(d_h.depthIndex=0),d_h.depthIndex>=v_z.numChildren&&(d_h.depthIndex=v_z.numChildren-1),v_z.setChildIndex(b_s,d_h.depthIndex)),p_g.closeTime=-1,this._mainUI&&this._mainUI.showSelectEffect(e,null,5,5),b_s.visible=!1,Laya.timer.callLater(p_g,p_g.tweenWinShow),b_s.resetChildCacheAs(),"LilianPanel"!==p_l&&"HoleBtnPanel"!==p_l||this.setHideActivityBox(!0),this.closePanelLoadingUI(),RecordManager.instance.sendRecordTrack(p_g.name,1)}}},e.prototype.getTargetPosByWinName=function(p_l){var p_g=Config.Utils.getWindowByName(p_l);if(p_g&&p_g.showEft){var b_s=void 0,d_u=e.instance.getMainUI(),b_e=e.instance.getMainLetUI();if("helperbtn"==p_g.showEft[1]&&(b_s=b_e.getShortcutPos()))return b_s;if(b_s=1===p_g.showEft[0]?d_u.getActivityPos(p_g.showEft[1]):d_u.getShortcutPos(p_g.showEft[1]))return b_s}return null},e.prototype.closeWin=function(e,p_l,p_g){if(void 0===p_l&&(p_l=!1),void 0===p_g&&(p_g=null),this.isOpenWin(e)){var b_s=this.getWinName(e),d_u=this._winDic[b_s],b_e=d_u?d_u.win:null;!p_l&&d_u&&d_u.isCloseSwitch?d_u.tweenWinClose(p_g):(null!=b_e&&b_e.parent&&(d_u&&d_u.isShowTopUI?(this._showTopCount--,this._showTopCount<0&&(this._showTopCount=0),0==this._showTopCount&&(this.hideHeadTopUI(),this.hideAndShowUnderSp(d_u,!1))):this.hideAndShowUnderSp(d_u,!1),this._mainUI&&this._mainUI.hideSelectEffect(e),b_e.removeSelf(),d_u.winCloseCallBack(p_g),this.removeWinModal(e),Laya.timer.callLater(GuideManager.instance,GuideManager.instance.closeWin,[b_s]),e!==UI.LilianPanel&&e!==UI.HoleBtnPanel||this.setHideActivityBox(!1),e===UI.LilianPanel?(Laya.loader.clearTextureRes("res/ui/experience/lilian04.jpg"),Laya.loader.clearTextureRes("res/ui/experience/lilian05.jpg"),Laya.loader.clearTextureRes("res/ui/experience/lilian06.jpg")):e===UI.HoleBtnPanel&&Laya.loader.clearTextureRes("res/ui/office/dongfu_main_da.jpg")),d_u.name&&RecordManager.instance.sendRecordTrack(d_u.name,2))}},e.prototype.removeWinModal=function(e){var p_l=this.getWinName(e),p_g=this._winDic[p_l];if(p_g&&p_g.isModal){var b_s=p_g.winModal;b_s&&(b_s.off(Laya.Event.CLICK,this,this.onWinModalClick),b_s.removeSelf(),b_s.destroy(),p_g.winModal=b_s=null,this.setHideActivityBox(!1))}},e.prototype.createWinModal=function(e){var p_l=this.getWinName(e),p_g=this._winDic[p_l];if(p_g&&p_g.isModal){var b_s=this._winContainer,d_u=p_g.opts;d_u&&d_u.container&&(b_s="mainUI"===d_u.container?(b_s=this.getMainUI()["container"+d_u.mainUIContainer])||this._winContainer:(b_s=this["_"+d_u.container+"Container"])||this._winContainer);var b_e=p_g.winModal;b_e?b_e.parent?b_s.setChildIndex(b_e,b_s.numChildren-1):b_s.addChild(b_e):((b_e=new Laya.Sprite).graphics.drawRect(0,0,Stage.width,Stage.height,"#000000"),b_e.size(Stage.width,Stage.height),b_s.addChild(b_e),b_e.alpha=.5,p_g.winModal=b_e),b_e&&(b_e.mouseEnabled=!0,b_e.on(Laya.Event.CLICK,this,this.onWinModalClick,[e]),this.setHideActivityBox(!0))}},e.prototype.checkHasWinOpen=function(){for(var e in this._winDic){var p_l=this._winDic[e].win;if(p_l&&p_l.width>GPlatform.designWidth/2&&p_l.parent)return!0}return!1},e.prototype.checkWinIsInTop=function(e){var p_l=this.getWinName(e),p_g=this._winDic[p_l],b_s=p_g?p_g.win:null;return!(!b_s||!b_s.parent)&&b_s.parent.getChildIndex(b_s)===b_s.parent.numChildren-1},e.prototype.hideHeadTopUI=function(){if(this._headTopUI&&null!=this._headTopUI.parent){this._headTopUI.removeSelf();var e=Config.map[b_p.mapID],p_l=!0;if(e&&e.showUI){p_l=!1;for(var p_g=0,b_s=e.showUI;p_g<b_s.length;p_g++)if(b_s[p_g]===UI.MainUIElemDefine.headBox){p_l=!0;break}}this._mainUI.showOrHideHeadTop(p_l),this.setHideActivityBox(!1)}},e.prototype.unsetAutoOpenMapKey=function(e){var p_l=this.getWinName(e),p_g=this._winDic[p_l];p_g&&p_g.autoOpenMap&&delete p_g.autoOpenMap},e.prototype.addToWinLayer=function(e,p_l){void 0===p_l&&(p_l=-1);var p_g=this._winContainer?this._winContainer:Laya.stage;p_g&&e&&null==e.parent&&(-1===p_l?p_g.addChild(e):p_g.addChildAt(e,p_l))},e.prototype.getProtoStr=function(e,p_l){var p_g=e.prototype;if(p_g){var b_s=void 0,d_u=Object.getOwnPropertyNames(p_g);p_l+=e+"_"+d_u;for(var b_e=0,d_m=d_u;b_e<d_m.length;b_e++){var d_w=d_m[b_e];(b_s=Object.getOwnPropertyDescriptor(p_g,d_w)).get||b_s.set||(p_l+=p_g[d_w])}}return p_l},e.prototype.removeWinLayer=function(e){this._winContainer&&e.parent==this._winContainer&&this._winContainer.removeChild(e)},e.prototype.getMainLetUI=function(){return Kqv(this)},e.prototype.showFightingShowView=function(e){0<e&&(this._fightingMoveView||(this._fightingMoveView=new UI.FightingAppearView),this._fightingMoveView.parent||this._topContainer.addChild(this._fightingMoveView),this._fightingMoveView.updateData(e))},e.prototype.getWin=function(e){if(!e)return null;var p_l=this.getWinName(e),p_g=this._winDic[p_l];return(p_g?p_g.win:null)||void 0},e.prototype.showUIMask=function(e){void 0===e&&(e=1),this._uiMaskSp||(this._uiMaskSp=new Laya.Sprite,this._uiMaskSp.graphics.drawRect(0,0,Stage.width,Stage.height,"#000000"),this._uiMaskSp.size(Stage.width,Stage.height),this._uiMaskSp.alpha=e,this._topContainer?this._topContainer.addChild(this._uiMaskSp):Laya.stage.addChild(this._uiMaskSp))},e.prototype.showHangupTitle=function(e){var p_l=Config.hangup[e];if(p_l&&p_l.eventParams){if(this._sceneChangeView&&this._sceneChangeView.parent)return;if(this._hangupView)this._hangupView.parent||this.addToBottomLayer(this._hangupView),this._hangupView.update(e);else{var p_g=Resource.ResUrl.UI_ATLAS+"hangup.atlas";Laya.loader.load(p_g,Laya.Handler.create(this,this.onHangupUILoadComplete,[e]))}}},e.prototype.checkShowActivityBox=function(){var e=p_p.instance.mainVo;if(e&&e.id<=12)return!1;if(!e)return!1;var p_l=Config.map[b_p.mapID];if(p_l){var p_g=p_l.showUI;if(p_g)for(var b_s in p_g)if(p_g[b_s]===UI.MainUIElemDefine.activityBox)return!0}return!1},e.prototype.hideUIMask=function(){this._uiMaskSp&&(this._uiMaskSp.removeSelf(),this._uiMaskSp.graphics.clear(),this._uiMaskSp.destroy(),this._uiMaskSp=null)},e.prototype.openWin=function(e,p_l,p_g,b_s,d_u,b_e,d_m,d_w){void 0===p_l&&(p_l=null),void 0===p_g&&(p_g=null),void 0===b_s&&(b_s=!1),void 0===d_u&&(d_u=!0),void 0===b_e&&(b_e=!1),void 0===d_m&&(d_m=!1);var f_t=this.getWinName(e);if(p_k.instance.checkSystemOpenByName(f_t,!0)){var v_z=Config.Utils.getWindowByName(f_t);if(v_z&&v_z.mutexName&&""!==v_z.mutexName)for(var d_h=0,r_t=v_z.mutexName.split(",");d_h<r_t.length;d_h++){var t_n=r_t[d_h];UI.WindowClass.hideWinByName(t_n.trim())}b_e&&(d_w?d_w.container||(d_w.container="top"):d_w={container:"top"});var f_y=this._winDic[f_t]=this._winDic[f_t]||WinPanelVo.freeWinVo;f_y.isModal=b_e,f_y.clickModalColse=d_m,f_y.isShowTopUI=d_u,f_y.opts=d_w,f_y.isCloseSwitch=b_s,f_y.winName=f_t,f_y.openWin(p_l,p_g)?Laya.stage.isFocused?Laya.timer.callLater(this,this.showPanelLoadingUI):this.showPanelLoadingUI():Laya.timer.callLater(this,this.closePanelLoadingUI)}},e.prototype.showSceneChangeView=function(){this._hangupView&&this._hangupView.removeSelf();var p_l=Config.map[b_p.mapID],p_g=e.instance.getMainLetUI();p_g&&(p_l.hangup?(p_g.onBtnVisable(!0),p_g.onaniStart(1)):(p_g.onBtnVisable(!1),p_g.onaniStart())),p_l&&p_l.showContent||this._sceneChangeView&&this._sceneChangeView.removeSelf(),this._sceneChangeView||(this._sceneChangeView=new UI.SceneChangeView),this._sceneChangeView.parent?this._sceneChangeView.startShow():(this._sceneChangeView.y=265,this._sceneChangeView.x=-10,this._sceneChangeView.scale(.8,.8),this._underContainer.addChild(this._sceneChangeView)),this.isStoryFb||this._fbShowChapter&&this._fbShowChapter.removeSelf(),this.isStoryFb=!1},e.prototype.checkNotCanReleaseWin=function(e){return Gjf(e)},e.prototype.showMainLeftUI=function(){this._mainUI&&(this._mainUI.visible=!0),this._mainLeftUI||(this._mainLeftUI=new UI.MainLeftView);var e=this._underContainer;if(!this._mainLeftUI.parent){var p_l=0;e._childs&&(p_l=Math.max(e._childs.length,0)),e.addChild(this._mainLeftUI),e.setChildIndex(this._mainLeftUI,p_l)}this._mainLeftUI.visible=!0},e.prototype.tweenHeadTopUI=function(e){if(void 0===e&&(e=!0),this._headTopUI&&this._headTopUI.parent){this._headTopUI.y=-this._headTopUI.height,this._headTopUI.alpha=0;var p_l=GPlatform.concaveOffsetY;this._topUITween=Laya.Tween.to(this._headTopUI,{j_l:p_l,alpha:1},200,null,Laya.Handler.create(this,this.tweenComplete,[e]),null,!0)}},e.prototype.addToUnderLayer=function(e,p_l){void 0===p_l&&(p_l=-1),this._underContainer&&e&&null==e.parent&&(-1===p_l?this._underContainer.addChild(e):this._underContainer.addChildAt(e,p_l))},e.prototype.showTitle=function(e,p_l){if(this._mapTitle&&(this._mapTitle.visible=!1),e&&p_l){var p_g=Config.fb_dungeon[p_l];if(p_g){var b_s=p_g.showChapterContent;this._mapTitle?this._mapTitle.visible=!0:this._mapTitle=new UI.showTitle,this._mapTitle.y=GPlatform.concaveOffsetY,this._mapTitle.x=0,this._underContainer.addChild(this._mapTitle),this._underContainer.setChildIndex(this._mapTitle,1),this._mapTitle.setContent(b_s)}}},e.prototype.showChaptercontent=function(e,p_l){this._fbShowChapter&&this._fbShowChapter.removeSelf(),this._fbShowChapter=new UI.ShowChaptercontent,this._fbShowChapter.y=GPlatform.concaveOffsetY+5,this._fbShowChapter.x=Stage.width-300,this._underContainer.addChild(this._fbShowChapter),this._underContainer.setChildIndex(this._fbShowChapter,0),this._fbShowChapter.setContent(e,p_l),this.isStoryFb=!0},e.prototype.checkShowSkillIcon=function(){var e=Config.map[b_p.mapID];if(e){var p_l=e.showUI;if(p_l)for(var p_g in p_l)if(p_l[p_g]===UI.MainUIElemDefine.skillIcon)return!0}return!1},e.prototype.setMainUIVisible=function(e){this._mainUI&&(this._mainUI.visible=e),e&&GuildKriegModel.instance.checkInActityMap()||this._mainLeftUI&&(this._mainLeftUI.visible=e)},e.prototype.onHangupUILoadComplete=function(e){this._sceneChangeView&&this._sceneChangeView.parent||(this._hangupView=new UI.HangupEventPanel,this.addToBottomLayer(this._hangupView),this._hangupView.y=380,this._hangupView.x=50,this._hangupView.update(e))},e.prototype.update=function(e){},e.prototype.changeMapOpenWin=function(){var e;for(var p_l in this.isMapWinOpen=!0,this._winDic){var p_g=(e=this._winDic[p_l]).autoOpenMap;if(p_g){var b_s=p_g.mapId,d_u=p_g.Class;b_s&&(b_s<0||b_s===b_p.mapID)&&(p_g.openFunc?p_g.openFunc():d_u.open?d_u.open():this.openWin(d_u),delete e.autoOpenMap)}}this.isMapWinOpen=!1},e.prototype.setMainLeftUIVisible=function(e){e&&GuildKriegModel.instance.checkInActityMap()||this._mainLeftUI&&(this._mainLeftUI.visible=e)},e.prototype.hideAndShowUnderSp=function(e,p_l,p_g){if(void 0===p_l&&(p_l=!0),void 0===p_g&&(p_g=!1),this._mainLeftUI&&e&&e.Class){var b_s=e.name;if(e.isShowTopUI||"HoleBtnPanel"===b_s||"LilianPanel"===b_s||"StoryFBPanel_new"===b_s||"SystemGainPanel"===b_s||"TimeLimitFirstPanel"===b_s||"TimeLimitRankPanel"===b_s||"BenefitView"===b_s||"DailyRechargePanel"===b_s||"SingleRechargePanel"===b_s||"AncientTalismanPanel"===b_s||"AccessPanel"===b_s||"RechargePanel"===b_s||"gymkhanaPkPanel"===b_s){if(p_g||(GuildKriegModel.instance.checkInActityMap()||(this._mainLeftUI.visible=!p_l),this._mainUI.chatPanel&&(this._mainUI.chatPanel.visible=!p_l)),1015===b_p.mapID)return;n_m.instance.stopCopyMove=p_l}}},e.prototype.addToTopLayer=function(e,p_l){void 0===p_l&&(p_l=-1);var p_g=this._topContainer?this._topContainer:Laya.stage;p_g&&e&&null==e.parent&&(-1===p_l?p_g.addChild(e):p_l>=p_g.numChildren?p_g.addChild(e):p_g.addChildAt(e,p_l))},e.prototype.getMainUI=function(){return Wln(this)},e.prototype.releaseUiRes=function(e){void 0===e&&(e=-1);var p_l,p_g=SyncTime.tickCount,b_s=0<e;for(var d_u in this._winDic){var b_e=(p_l=this._winDic[d_u]).closeTime;if(0<b_e){var d_m=p_g-b_e;if((e=0<e?e:GPlatform.UI_CACHE_TIME)<d_m){if(!GPlatform.isDispose&&b_s&&this.checkNotCanReleaseWin(p_l.name)&&(d_m<=GPlatform.UI_CACHE_TIME2||"BagPanel"==p_l.name||"SkillPanel"==p_l.name))continue;p_l.win&&null==p_l.win.parent&&(p_l.dispose(),p_l=null,delete this._winDic[d_u])}}}},e.prototype.leaveMap=function(){this._hangupView&&this._hangupView.removeSelf(),UI.LilianPanel.close(!0),UI.HoleBtnPanel.close(!0)},e.prototype.removeTopLayer=function(e){this._topContainer&&e.parent==this._topContainer&&this._topContainer.removeChild(e)},e.prototype.delayLvUp=function(e,p_l){0<p_l&&(Resource.SoundManager.instance.playSoundById(17,!1),r_n.instance.playLvUpEffect(),GPlatform.isWx?WXPlatform.instance.recordUserInfo(WXRecordStep.ROLE_UPLEVEL):GPlatform.isH5&&H5LoginManager.instance.recordUserInfo(WXRecordStep.ROLE_UPLEVEL),HswxPlatform.instance.updateRole(EHSWXUpdateRole.levelup),H5YzxLoginManager.instance.recordUserInfo(Sdk.YZX.Save_LevelUp),H5XJPlatform.ins.reportUpLv(),UI.ShengjiView.show(e)),BenefitModel.instance.checkLevel(),ActivityModel.instance.onAttChange()},e.prototype.showPanelLoadingUI=function(){null==this._uiLoadingPanel&&(this._uiLoadingPanel=new UI.UILoadingPanel),this._uiLoadingPanel.parent||Laya.stage.addChild(this._uiLoadingPanel),Laya.timer.clear(this,this.closePanelLoadingUI),this._uiLoadingPanel.x=Stage.width-this._uiLoadingPanel.width>>1,this._uiLoadingPanel.y=(Stage.height-this._uiLoadingPanel.height>>1)+GPlatform.concaveOffsetY},e.prototype.setAutoOpenMapKey=function(e,p_l,p_g){void 0===p_l&&(p_l=-1);var b_s=this.getWinName(e),d_u=this._winDic[b_s];for(var b_e in this._winDic)(d_u=this._winDic[b_e]).autoOpenMap&&delete d_u.autoOpenMap;d_u&&(d_u.autoOpenMap={Class:e,mapId:p_l,openFunc:p_g})},e.prototype.showMainUI=function(){null==this._mainUI&&(this._mainUI=new UI.MainUI,this._mainUI.x=Stage.width-this._mainUI.width>>1),null==this._mainUI.parent&&(this._mainUI.visible=!1,this._underContainer.addChildAt(this._mainUI,0)),this._mainUI.visible=!0,j_a.sceIns().add(this,this.showMainLeftUI)},e.prototype.hideWin=function(e){var p_l=this.getWinName(e),p_g=this._winDic[p_l],b_s=p_g?p_g.win:null;b_s&&b_s.parent&&(b_s.visible=!1),p_g&&(p_g.isClose=!0)},e.prototype.closeAllWin=function(e){var p_l;for(var p_g in void 0===e&&(e=!1),this._winDic){var b_s=(p_l=this._winDic[p_g]).win;b_s&&b_s.parent&&(e?b_s.width>GPlatform.designWidth/2&&this.closeWin(p_l.Class,!0):this.closeWin(p_l.Class,!0))}},e.open=function(p_l,p_g,b_s,d_u,b_e,d_m,d_w,f_t){void 0===p_g&&(p_g=null),void 0===b_s&&(b_s=null),void 0===d_u&&(d_u=!1),void 0===b_e&&(b_e=!0),void 0===d_m&&(d_m=!1),void 0===d_w&&(d_w=!1),e.instance.openWin(p_l,p_g,b_s,d_u,b_e,d_m,d_w,f_t)},e.prototype.onResize=function(){this._mainUI&&(this._mainUI.x=Stage.width-this._mainUI.width>>1),Engine2d.GameMap.defaultMap.setDisplaySize(Stage.width,Stage.height)},e.prototype.tweenComplete=function(e){void 0===e&&(e=!0),this._topUITween&&(this._topUITween.clear(),this._topUITween=null),this._headTopUI&&(this._headTopUI.y=GPlatform.concaveOffsetY,this._headTopUI.alpha=1)},e.prototype.closePanelLoadingUI=function(){this._uiLoadingPanel&&this._uiLoadingPanel.parent&&this._uiLoadingPanel.removeSelf()},e.prototype.hideMainUI=function(){this._mainUI&&null!=this._mainUI.parent&&this._mainUI.removeSelf(),this._mainLeftUI&&null!=this._mainLeftUI.parent&&this._mainLeftUI.removeSelf()},e.prototype.releaseUI=function(e){var p_l=this.getWinName(e),p_g=this._winDic[p_l];p_g&&p_g.win&&null==p_g.win.parent&&(p_g.dispose(),p_g=null,delete this._winDic[p_l])},e.prototype.setHideActivityBox=function(e){void 0===e&&(e=!1),this._mainLeftUI&&this._mainLeftUI.setHideActivityBox(e)},e.prototype.getWinName=function(e){if(GPlatform.isVivo||GPlatform.isWx){var p_l=void 0;if(!this._winNameDict)for(var p_g in this._winNameDict={},UI)p_l="",(p_l=this.getProtoStr(UI[p_g],p_l))&&(this._winNameDict[p_l]=p_g);return p_l="",p_l=this.getProtoStr(e,p_l),this._winNameDict[p_l]}return e.name},e.prototype.onWinModalClick=function(e,p_l){var p_g=this.getWinName(e),b_s=this._winDic[p_g];b_s&&b_s.isModal&&(LED.event(l_r.WIN_MODAL_CLICK),b_s.clickModalColse&&this.closeWin(e))},e.prototype.showHeadTopUI=function(){null==this._headTopUI&&(this._headTopUI=new UI.HeadTopView),null==this._headTopUI.parent&&(this._winContainer.addChild(this._headTopUI),this._mainUI&&this._mainUI.showOrHideHeadTop(!1),this._headTopUI.x=Stage.width-this._headTopUI.width>>1,this.tweenHeadTopUI(!0),this._headTopUI.resetChildCacheAs(),this.setHideActivityBox(!0))},e.prototype.addToBottomLayer=function(e,p_l){void 0===p_l&&(p_l=-1),this._bottomContainer&&e&&null==e.parent&&(-1===p_l?this._bottomContainer.addChild(e):this._bottomContainer.addChildAt(e,p_l))},e.prototype.getWinComponent=function(e,p_l,p_g){if(void 0===p_g&&(p_g=null),!UI[e])return null;var b_s=this._winDic[e],d_u=b_s?b_s.win:null;if(d_u&&d_u.parent){if(p_g){var b_e=d_u[p_g];if(b_e&&b_e[p_l])return b_e[p_l]}else if(!d_u[p_l])return d_u.getChildByName(p_l);return d_u[p_l]}return null},e.close=function(p_l,p_g,b_s){void 0===p_g&&(p_g=!1),void 0===b_s&&(b_s=null),e.instance.closeWin(p_l,p_g,b_s)},e.instance=new e,e}(),UI;!function(e){e[e.RUNNING=0]="RUNNING",e[e.OVER=1]="OVER"}(UILoadingStatus=UILoadingStatus||{}),function(e){var p_l,p_g;(p_g=p_l=e.MainUIElemDefine||(e.MainUIElemDefine={}))[p_g.MainUIBegin=1]="MainUIBegin",p_g[p_g.headBox=1]="headBox",p_g[p_g.shortCut=2]="shortCut",p_g[p_g.taskBox=3]="taskBox",p_g[p_g.skillIcon=4]="skillIcon",p_g[p_g.activityBox=5]="activityBox",p_g[p_g.rightBox=6]="rightBox",p_g[p_g.MainUIEnd=1e3]="MainUIEnd",e.MainUIElemName=function(){var e={};for(var p_g in p_l){var b_s=p_l[p_g];"MainUIBegin"!==b_s&&"MainUIEnd"!==b_s&&"string"==typeof b_s&&(e[p_g]=b_s)}return e}(),e.showUI=function(p_g,b_s){var d_u=UIM.instance.getMainUI(),b_e=UIM.instance.getMainLetUI();if(d_u&&b_e){for(var d_m in e.MainUIElemName){var d_w=e.MainUIElemName[d_m],f_t=d_u[d_w];f_t&&(f_t.visible=!1),(f_t=b_e[d_w])&&(f_t.visible=!1),"taskBox"===d_w&&(f_t=b_e.sysNoticeBox)&&(f_t.visible=!1)}for(var v_z in Config.window)e.WindowClass.closeWin(Number(v_z),!0);for(var d_h=0,r_t=b_s;d_h<r_t.length;d_h++){var t_n=r_t[d_h];if(t_n<=p_l.MainUIEnd){var f_y=p_l[t_n],p_q=d_u[f_y];p_q&&(p_q.visible=t_n!==p_l.skillIcon||0<SkillModel.instance.dazhaoId),(p_q=b_e[f_y])&&(p_q.visible=!0),"taskBox"===f_y&&p_q&&(TaskManager.instance.isTaskInit&&!p_p.instance.mainVo&&(p_q.visible=!1),(p_q=b_e.sysNoticeBox)&&(p_q.visible=!0))}else e.WindowClass.openWin(t_n,[p_g])}}}}(UI=UI||{});var f_s=function(){function e(){this._mailList={},this._maxLoadedIdx=0}return e.prototype.getMailList=function(){var e=[];for(var p_l in this._mailList)e.push(this._mailList[p_l]);return 100<(e=this.sortMails(e)).length&&(e=e.slice(0,100)),e},e.prototype.updateShowAmt=function(){},e.prototype.isNeedRedPoint=function(){for(var e in this._mailList){var p_l=this._mailList[e];if(p_l.flag<1)return!0;if(1===p_l.flag&&p_l.attackment&&0<p_l.attackment.length)return!0}return!1},e.prototype.onMailList=function(p_l){for(var p_g=0,b_s=p_l.detail;p_g<b_s.length;p_g++){var d_u=b_s[p_g],b_e=new MailVo(d_u);this._mailList[d_u.idx]=b_e,this._maxLoadedIdx<d_u.idx&&(this._maxLoadedIdx=d_u.idx)}for(;Object.keys(this._mailList).length>e.MAX_SIZE;){var d_m=this._maxLoadedIdx;for(var d_w in this._mailList){var f_t=Number(d_w);f_t<d_m&&(d_m=f_t)}delete this._mailList[d_m]}this.updateShowAmt(),LED.event(l_r.MAIL_LIST_REFRESH)},e.prototype.onMailUpdate=function(e){if(e.readed&&e.readed[0])for(var p_l=0,p_g=e.readed;p_l<p_g.length;p_l++){var b_s=p_g[p_l];(d_m=this._mailList[b_s.idx])&&(d_m.flag=1)}if(e.received&&e.received[0])for(var d_u=0,b_e=e.received;d_u<b_e.length;d_u++){var d_m;b_s=b_e[d_u],(d_m=this._mailList[b_s.idx])&&(d_m.flag=2)}LED.event(l_r.MAIL_LIST_REFRESH)},e.prototype.reqMailList=function(){var e=new c2m_mail_list;DB.instance.query(c2m_mail_list,e)},e.prototype.sortMails=function(e){return e.sort((function(e,p_l){var p_g=e.attackment&&0<e.attackment.length?1:0,b_s=p_l.attackment&&0<p_l.attackment.length?1:0;return p_g==b_s?e.flag===p_l.flag?p_l.createTime-e.createTime:e.flag-p_l.flag:e.flag===p_l.flag?b_s-p_g:e.flag-p_l.flag}))},e.prototype.reqMailOp=function(e,p_l){var p_g=new c2m_mail_op;p_g.op=e,p_g.idx=p_l,DB.instance.query(c2m_mail_op,p_g)},e.instance=new e,e.MAX_SIZE=100,e.BATCH_SIZE=10,e}(),RecordType;!function(e){e[e.Personel=1]="Personel",e[e.AllSer=2]="AllSer"}(RecordType=RecordType||{});var l_y=function(){function e(){this.init()}return e.prototype.init=function(){Iws(this)},e.prototype.addCfg=function(e){e&&(10<=this.cfgByRound.length||0<this.cfgByRound.length&&-1!=this.round&&this.round!=e.round||(this.cfgByRound.push(e),this.round=e.round))},e.prototype.addShowCfg=function(e){Awp(e,this)},e.prototype.getAngleById=function(e){for(var p_l in this.cfgByRound){var p_g=parseInt(p_l);if(this.cfgByRound[p_l].id==e)return 36*p_g}return 0},e.prototype.clear=function(){Ebf(this)},e}(),ActivityMemberInfo=function(){function e(){this.init()}return e.prototype.init=function(){this.score=0,this.rankNum=0,this.integral=0,this.maxCfg=null,this.configs=[],this.exchangeInfo={},this.isRedPoint=!0},e.prototype.setConfig=function(e){var p_l=this.configs[e.round];p_l||(this.configs[e.round]=p_l=new l_y),p_l.addCfg(e),this.maxCfg?p_l.round>this.maxCfg.round&&(this.maxCfg=p_l):this.maxCfg=p_l},e.prototype.setExchangeInfo=function(e){if(e)for(var p_l in this.exchangeInfo={},e)this.exchangeInfo[e[p_l].id]=e[p_l]},e.prototype.setShowCfg=function(e){var p_l=Config.activity_turntable_mainShops[e];if(p_l){var p_g=this.configs[p_l.round];p_g&&p_g.addShowCfg(e)}},e.prototype.clear=function(){Uyh(this)},e}(),LotterTypeNum,LotterType=function(){function e(){}return e.FASHION="Fashion",e.RIDE="Ride",e.DRAGON="Dragonsoul",e.HEART="Mental",e.LUCKY="Lucky",e.MARRY="Marry",e.FESTIVAL="Holiday",e.WEEKEND="NewHoliday",e.TREASURE="Treasure",e.ERROR="Error",e}();!function(e){e[e.ERROR=0]="ERROR",e[e.RIDE=1]="RIDE",e[e.FASHION=2]="FASHION",e[e.HEART=3]="HEART",e[e.DRAGON=4]="DRAGON",e[e.LUCKY=5]="LUCKY",e[e.MARRY=6]="MARRY",e[e.FESTIVAL=7]="FESTIVAL",e[e.WEEKEND=8]="WEEKEND",e[e.TREASURE=9]="TREASURE"}(LotterTypeNum=LotterTypeNum||{});var n_t=function(){function e(){this.ActivityTypeInfo={}}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.getCfgByNameAndRound=function(e,p_l){if(void 0===p_l&&(p_l=1),this.strTypeChangeNumType(e)==LotterTypeNum.ERROR)return null;if(p_l<=0)return null;var p_g=this.ActivityTypeInfo[e];if(!p_g||!p_g.configs||!p_g.configs[p_l]){var b_s=Config.activity_turntable_gifts;for(var d_u in b_s){var b_e=b_s[d_u],d_m=this.numTypeChangeStrType(b_e.type);(d_w=this.ActivityTypeInfo[d_m])||(this.ActivityTypeInfo[d_m]=d_w=new ActivityMemberInfo),d_w.setConfig(b_e)}for(var d_u in Config.activity_turntable_mainShops){var d_w;b_e=Config.activity_turntable_mainShops[d_u],d_m=this.numTypeChangeStrType(b_e.type),(d_w=this.ActivityTypeInfo[d_m])||(this.ActivityTypeInfo[d_m]=d_w=new ActivityMemberInfo),d_w.setShowCfg(b_e.id)}}return(p_g=this.ActivityTypeInfo[e]).configs&&p_g.configs[p_l]?p_g.configs[p_l]:p_g.maxCfg?p_g.maxCfg:null},e.prototype.strTypeChangeNumType=function(e){var p_l=LotterTypeNum.ERROR;switch(e){case LotterType.FASHION:p_l=LotterTypeNum.FASHION;break;case LotterType.RIDE:p_l=LotterTypeNum.RIDE;break;case LotterType.DRAGON:p_l=LotterTypeNum.DRAGON;break;case LotterType.LUCKY:p_l=LotterTypeNum.LUCKY;break;case LotterType.HEART:p_l=LotterTypeNum.HEART;break;case LotterType.MARRY:p_l=LotterTypeNum.MARRY;break;case LotterType.FESTIVAL:p_l=LotterTypeNum.FESTIVAL;break;case LotterType.WEEKEND:p_l=LotterTypeNum.WEEKEND;break;case LotterType.TREASURE:p_l=LotterTypeNum.TREASURE}return p_l},e.prototype.numTypeChangeStrType=function(e){var p_l=LotterType.ERROR;switch(e){case LotterTypeNum.FASHION:p_l=LotterType.FASHION;break;case LotterTypeNum.RIDE:p_l=LotterType.RIDE;break;case LotterTypeNum.DRAGON:p_l=LotterType.DRAGON;break;case LotterTypeNum.LUCKY:p_l=LotterType.LUCKY;break;case LotterTypeNum.HEART:p_l=LotterType.HEART;break;case LotterTypeNum.MARRY:p_l=LotterType.MARRY;break;case LotterTypeNum.FESTIVAL:p_l=LotterType.FESTIVAL;break;case LotterTypeNum.WEEKEND:p_l=LotterType.WEEKEND;break;case LotterTypeNum.TREASURE:p_l=LotterType.TREASURE}return p_l},e.prototype.getActivtiIdByStrType=function(e){var p_l=0;switch(e){case LotterType.FASHION:p_l=FuncDefine.LottertDrawFashion;break;case LotterType.RIDE:p_l=FuncDefine.LottertDrawRide;break;case LotterType.HEART:p_l=FuncDefine.LottertDrawMental;break;case LotterType.DRAGON:p_l=FuncDefine.LottertDrawDragon;break;case LotterType.LUCKY:p_l=FuncDefine.LottertDrawLucky;break;case LotterType.MARRY:p_l=FuncDefine.LottertDrawMarry;break;case LotterType.FESTIVAL:p_l=FuncDefine.FestivalActivity;break;case LotterType.WEEKEND:p_l=FuncDefine.WeekActivity;break;case LotterType.TREASURE:p_l=FuncDefine.MonthActivity}return p_l},Object.defineProperty(e.prototype,"ActivityExcCfg",{get:function(){if(!this.activityExcCfg)for(var e in this.activityExcCfg={},Config.activity_turntable_exchange){var p_l=Config.activity_turntable_exchange[e],p_g=this.numTypeChangeStrType(p_l.type);this.activityExcCfg[p_g]||(this.activityExcCfg[p_g]=[]),this.activityExcCfg[p_g].push(p_l)}return this.activityExcCfg},enumerable:!0,configurable:!0}),e.prototype.checkRedByScore=function(e){var p_l=this.getMemberInfo(e),p_g=this.ActivityExcCfg[e];for(var b_s in p_g){var d_u=p_g[b_s],b_e=0;if(p_l.exchangeInfo&&(b_e=p_l.exchangeInfo[d_u.id]?p_l.exchangeInfo[d_u.id].num:0),b_e<d_u.limit&&p_l.integral>=d_u.money)return!0}return!1},e.prototype.getActivityVoByType=function(e){var p_l=this.getActivtiIdByStrType(e),p_g=null,b_s=ActivityModel.instance.getActivityConfigVo(p_l);if(!b_s)return p_g;if(e==LotterType.FESTIVAL)for(var d_u=0,b_e=b_s.subVo;d_u<b_e.length;d_u++)(f_t=b_e[d_u]).type==ActivityTypeDefine.BG_turntableHoliday&&(p_g=f_t);else if(e==LotterType.WEEKEND)for(var d_m=0,d_w=b_s.subVo;d_m<d_w.length;d_m++){var f_t;(f_t=d_w[d_m]).type==ActivityTypeDefine.BG_turntableNewHoliday&&(p_g=f_t)}else p_g=b_s.subVo[0];return p_g},e.prototype.countAngle=function(e,p_l,p_g){var b_s={circle:0,Angle:0};if(!e)return b_s;var d_u=e.getAngleById(p_l);return b_s.circle=Math.floor(4*Math.random()+5),b_s.Angle=d_u,b_s},e.prototype.countActivityRound=function(p_l){e.instance.getCfgByNameAndRound(p_l);var p_g=this.ActivityTypeInfo[p_l].maxCfg.round,b_s=this.getActivityVoByType(p_l);return b_s&&(p_g=b_s.round),p_g},e.prototype.getRankType=function(e){var p_l=0;switch(e){case LotterType.FASHION:p_l=RankType.LotterDrawFashionRank;break;case LotterType.RIDE:p_l=RankType.LotterDrawRideRank;break;case LotterType.HEART:p_l=RankType.LotterDrawHeartRank;break;case LotterType.DRAGON:p_l=RankType.LotterDrawDragonRank;break;case LotterType.LUCKY:p_l=RankType.LotterDrawLuckyRank;break;case LotterType.MARRY:p_l=RankType.LotterDrawMarryRank}return p_l},e.prototype.getTimeScore=function(e){return Ylg(e,Config,GlobalDefine)},e.prototype.getGiftCfgById=function(e,p_l){return Ubw(e,p_l,Config)},e.prototype.cfgShiftArray=function(e){return Emn(e,this,RoundRewardManager)},e.prototype.onLottertDrawInfo=function(p_l){p_l&&(this.ActivityTypeInfo[p_l.ty]||(this.ActivityTypeInfo[p_l.ty]=new ActivityMemberInfo),this.ActivityTypeInfo[p_l.ty].score=p_l.point,this.ActivityTypeInfo[p_l.ty].integral=p_l.money,this.ActivityTypeInfo[p_l.ty].isRedPoint=e.instance.checkRedByScore(p_l.ty),this.ActivityTypeInfo[p_l.ty].setExchangeInfo(p_l.exchange),LED.event(l_r.ACTIVITY_LOTTERT_INFO))},e.prototype.reqRecordInfo=function(e,p_l,p_g){void 0===p_g&&(p_g=!1);var b_s=null,d_u=new(b_s=p_g?c2w_bgaAct_turntable_record:c2w_gsaAct_turntable_record);d_u.ty=e,d_u.mode=p_l,DB.instance.query(b_s,d_u)},e.prototype.getTimeConsume=function(e,p_l){void 0===p_l&&(p_l=!1);var p_g=p_l?10:1,b_s=this.getComsumCfg(e),d_u=[];for(var b_e in b_s){var d_m=BagModel.instance.getItemCountByItemID(b_s[b_e][0],BagTypeDefine.BAG_TYPE_ITEM),d_w=b_s[b_e][1]*p_g;if(d_w<=d_m||0<d_m){d_u.push(b_s[b_e][0]),d_u.push(d_w);break}}var f_t=b_s.length-1;return d_u.length<=0&&(d_u.push(b_s[f_t][0]),d_u.push(b_s[f_t][1]*p_g)),[d_u]},e.prototype.reqExchangeGoods=function(e,p_l,p_g,b_s){void 0===b_s&&(b_s=!1);var d_u=null,b_e=new(d_u=b_s?c2w_bgaAct_turntable_exchange:c2w_gsaAct_turntable_exchange);b_e.id=p_l,b_e.ty=e,b_e.num=p_g,DB.instance.query(d_u,b_e)},e.prototype.getMemberInfo=function(e){var p_l=this.ActivityTypeInfo[e];return p_l||(this.ActivityTypeInfo[e]=p_l=new ActivityMemberInfo),this.ActivityTypeInfo[e]},e.prototype.countRankInfo=function(p_l){this.ActivityTypeInfo[p_l]||(this.ActivityTypeInfo[p_l]=new ActivityMemberInfo);var p_g=RankModel.instance.getRankDataByType(e.instance.getRankType(p_l)),b_s=0;if(p_g){var d_u=p_g.getItems();for(var b_e in d_u)d_u[b_e].getPlayerId()==b_p.playerId&&(b_s=d_u[b_e].getRankIndex())}return this.ActivityTypeInfo[p_l].rankNum=b_s},e.prototype.onStartTurn=function(e){e&&LED.event(l_r.ACTIVITY_LOTTERT_DRAW,e)},e.prototype.shopCfgShiftArray=function(e){return Qjs(e,this)},e.prototype.reqStartTurn=function(e,p_l,p_g){void 0===p_g&&(p_g=!1);var b_s=null,d_u=new(b_s=p_g?c2w_bgaAct_turntable_turn:c2w_gsaAct_turntable_turn);d_u.times=p_l,d_u.ty=e,DB.instance.query(b_s,d_u)},e.prototype.isConsumeCanShowRed=function(e,p_l){var p_g=this.getComsumCfg(e);for(var b_s in p_g)if(p_l==p_g[b_s][0]&&parseInt(b_s)!=p_g.length-1)return!0;return!1},e.prototype.getComsumCfg=function(e){var p_l=0;switch(e){case LotterType.FASHION:p_l=GlobalDefine.turntable_cost_fashion;break;case LotterType.RIDE:p_l=GlobalDefine.turntable_cost_ride;break;case LotterType.HEART:p_l=GlobalDefine.turntable_cost_mental;break;case LotterType.DRAGON:p_l=GlobalDefine.turntable_cost_dragonsoul;break;case LotterType.LUCKY:p_l=GlobalDefine.turntable_cost_lucky;break;case LotterType.MARRY:p_l=GlobalDefine.turntable_cost_marry;break;case LotterType.FESTIVAL:p_l=GlobalDefine.turntable_cost_holiday;break;case LotterType.WEEKEND:p_l=GlobalDefine.turntable_cost_newholiday}return Config.global[p_l].t_info},e.prototype.onRecordInfo=function(e){e&&LED.event(l_r.ACTIVITY_LOTTERT_RECORD,e)},e}(),ShieldWordManager=function(){function e(){this._dic={},this._pool=[],this._isNeedShield=1}return Object.defineProperty(e,"ins",{get:function(){return this._ins||(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNeedShield",{set:function(e){this._isNeedShield=e},enumerable:!0,configurable:!0}),e.prototype.isShield=function(e,p_l){if(void 0===p_l&&(p_l=null),GPlatform.isXjhz&&10==H5XJLoginManager.instance.agentVO.channel_id){var p_g=this;H5XJPlatform.ins.keyWords(e,(function(b_s){1==b_s?p_g.isShieldReq(e,p_l):0==b_s?p_l.runWith([0,e]):Laya.timer.callLater(p_g,p_g.isShield,[e,p_l])}))}else this.isShieldReq(e,p_l)},e.prototype.isShieldReq=function(e,p_l){void 0===p_l&&(p_l=null),GPlatform.isXjWx&&GPlatform.isRelease&&1==this._isNeedShield&&!GPlatform.isAutoLogin?this.reqMsgCheck(e,p_l):p_l.runWith([1,e])},e.prototype.onMsgCheck=function(e){console.log("msgCheck",e);var p_l="",p_g=this._dic[e.content.key];p_g&&(p_l=p_g.content);var b_s=e.ret;if(-1==b_s){for(var d_u=p_l.length,b_e="",d_m=0;d_m<d_u;d_m++)b_e+="*";p_l=b_e}p_g&&p_g.fun.runWith([b_s,p_l]),this.recoveryShieldVo(p_g),this._dic[p_g.key]=null,delete this._dic[p_g.key]},e.prototype.reqMsgCheck=function(e,p_l){if(GPlatform.isWxMini){var p_g=new Laya.HttpRequest;p_g.on(Laya.Event.COMPLETE,this,this.onMsgCheck);var b_s=Laya.Browser.now();if(this._lastTime&&b_s-this._lastTime<1e3)return;this._lastTime=b_s;var d_u=this.getShieldVo();d_u.content=e,d_u.key=b_s+"_"+e,d_u.fun=p_l;var b_e={content:(this._dic[d_u.key]=d_u).content,key:d_u.key};GPlatform.addAgentMixSer(b_e),b_e=JSON.stringify(b_e),p_g.send(this.addr+RecordManager.API_MSG_CHECK,b_e,"post","json")}},e.prototype.getShieldVo=function(){return 0<this._pool.length?this._pool.shift():new ShieldWordVo},e.prototype.recoveryShieldVo=function(e){Enh(e,this)},Object.defineProperty(e.prototype,"addr",{get:function(){return b_p.config.addr},enumerable:!0,configurable:!0}),e}(),MiniSceneType,SharePlatform,ShareMgr=function(){function e(){this._isCollected=!1,this._fristCollectStatus=0,this._fristShareStatu=StateDefine.statu_no,this._relevanceStatus=StateDefine.statu_no,this._xinyueGiftStatus=0}return Object.defineProperty(e,"ins",{get:function(){return this._ins||(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.prototype.getPfNum=function(){var e=1;return GPlatform.isWanba?e=SharePlatform.Wanba:GPlatform.isXjWx?e=SharePlatform.XJWX:GPlatform.isQQMini?e=SharePlatform.QQMini:GPlatform.isXJH5?e=SharePlatform.XJH5:GPlatform.isYZX?e=SharePlatform.YZX:GPlatform.isWx?e=SharePlatform.WX:GPlatform.isHuoshuWx&&(e=SharePlatform.HSWX),e},e.prototype.inviteIsOpen=function(){return GPlatform.isRelease?GPlatform.isWxMini||GPlatform.isQQMini:!GPlatform.isH5||!GPlatform.isRelease},e.prototype.shareBtnShow=function(){var p_l=!0;if(GPlatform.isWanba){if(WanbaLoginManager.instance.wanbaData.isChannel(AgentWanba.tencentNewsLite))return!1;p_l=(Sdk.Wanba.canShare||WanbaLoginManager.instance.wanbaData.isChannel(AgentWanba.WX))&&!e.ins.isHasShareReward}else GPlatform.isHuaWei||GPlatform.isOPPO||GPlatform.isVivo?p_l=!1:GPlatform.isYZX?p_l=(H5YzxLoginManager.instance.isSupportShare||H5YzxLoginManager.instance.isSupportSetShareInfo)&&!e.ins.isHasShareReward:GPlatform.isTXPlatfrom?p_l=!1:GPlatform.isXJH5&&(p_l=H5XJLoginManager.instance.agentVO.isShare);return p_l},Object.defineProperty(e.prototype,"isHasShareReward",{get:function(){return this._fristShareStatu==StateDefine.statu_has},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canRewardShare",{get:function(){return this._fristShareStatu==StateDefine.statu_get},enumerable:!0,configurable:!0}),e.prototype.reqFristShareInfo=function(){var e=this.getPfNum();if(0!=e){var p_l=new c2m_share_reward_info;p_l.sytle=e,DB.instance.query(c2m_share_reward_info,p_l)}},e.prototype.reqRelevance=function(e){if(GPlatform.isWanba)(e||WanbaLoginManager.instance.wanbaData.isFollowingAccount)&&DB.instance.query(c2m_wanba_collect_set,new c2m_wanba_collect_set);else if(GPlatform.isXJH5){var p_l=H5XJLoginManager.instance.agentVO;p_l&&p_l.isSubscribe&&DB.instance.query(c2m_wanba_collect_set,new c2m_wanba_collect_set)}else GPlatform.isYZX&&(e||v_t.ins.isSubscribe)&&DB.instance.query(c2m_wanba_collect_set,new c2m_wanba_collect_set)},e.prototype.reqRelevanceInfo=function(){(GPlatform.isXJH5||GPlatform.isWanba||GPlatform.isYZX)&&DB.instance.query(c2m_wanba_collect_reward_info,new c2m_wanba_collect_reward_info)},e.prototype.reqShareReward=function(){var e=this.getPfNum();if(0!=e){var p_l=new c2m_get_share_reward;p_l.sytle=e,DB.instance.query(c2m_get_share_reward,p_l)}},e.prototype.reqWechatCollect=function(){(GPlatform.isWx||GPlatform.isXjWx||GPlatform.isQQMini||GPlatform.isYZX||GPlatform.isHuoshuWx)&&DB.instance.query(c2m_wechat_collect_reward_info,new c2m_wechat_collect_reward_info)},e.prototype.reqShare=function(){var e=this.getPfNum();if(0!=e){var p_l=new c2m_set_share;p_l.sytle=e,DB.instance.query(c2m_set_share,p_l)}},e.prototype.updateRelevance=function(e){Aai(e,console,this,LED,l_r)},e.prototype.updateShareStatu=function(e){Eey(e,console,this,LED,l_r)},e.prototype.reqRelevanceReward=function(){(GPlatform.isXJH5||GPlatform.isWanba||GPlatform.isYZX)&&DB.instance.query(c2m_wanba_collect_get_reward,new c2m_wanba_collect_get_reward)},e.prototype.relevanceBtnShow=function(){return GPlatform.isXJH5&&!GPlatform.isXjhz?H5XJLoginManager.instance.agentVO.canSubscribe&&!this.isHasRelReward:!!GPlatform.isYZX&&0==this._fristCollectStatus&&H5YzxLoginManager.instance.isSupportDialog},Object.defineProperty(e.prototype,"isHasRelReward",{get:function(){return this._relevanceStatus==StateDefine.statu_has},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canRewardRelevance",{get:function(){return this._relevanceStatus==StateDefine.statu_get},enumerable:!0,configurable:!0}),e.prototype.allRelevance=function(){GPlatform.isXJH5&&H5XJPlatform.ins.showQRCode()},Object.defineProperty(e.prototype,"canRewardCollect",{get:function(){return 0===this._fristCollectStatus&&e.ins._isCollected},enumerable:!0,configurable:!0}),e.prototype.reqWechatReward=function(){this.canRewardCollect?DB.instance.query(c2m_wechat_collect_get_reward,new c2m_wechat_collect_get_reward):b_p.broadcastNotice((j_x("1573_2004_1747")+j_x("1314_1767_1865")+""+j_x("1374_1186_282")+j_x("1163_1174_2111")+""))},e.prototype.updateCollectStatus=function(e){Glf(e,console,this,LED,l_r)},Object.defineProperty(e.prototype,"canShowWebChatIcon",{get:function(){if(GPlatform.isWxMini||GPlatform.isQQMini){if(0===this._fristCollectStatus){var e=Config.global[GlobalDefine.wechat_collect_reward_func_id];if(!e)return!1;var p_l=e.i_info;if(p_l)return p_k.instance.checkSystemOpen(p_l)}}else if(GPlatform.isYZX&&!this.isHasRelReward&&H5YzxLoginManager.instance.isSupportDesktop)return!0;return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canShowWanbaCollectIcon",{get:function(){if(GPlatform.isWanba){if(WanbaLoginManager.instance.wanbaData.isChannel(AgentWanba.xinYueClub))return!1;if(!e.ins.isHasRelReward&&(Sdk.Wanba.canToDisktop||Sdk.Wanba.canFollowWechat))return!0}return!1},enumerable:!0,configurable:!0}),e.prototype.allPfInvite=function(e,p_l){Mhe(e,p_l,XjwxPlatform,WXPlatform,HswxPlatform,QQMiniPlatform,H5XJPlatform)},Object.defineProperty(e.prototype,"canShowXinyueGift",{get:function(){if(GPlatform.isDebug)return!0;if(GPlatform.isWanba){var e=WanbaLoginManager.instance.wanbaData;if(e.onPC)return!1;if(e.isChannel(AgentWanba.SQ)||e.isChannel(AgentWanba.QZ)||e.isChannel(AgentWanba.xinYueClub))return!0}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canShowQQLiveBtn",{get:function(){return!!GPlatform.isDebug||!(!GPlatform.isWanba||!WanbaLoginManager.instance.wanbaData.isChannel(AgentWanba.QQLive))},enumerable:!0,configurable:!0}),e.prototype.reqXinyueGift=function(){DB.instance.query(c2m_get_wanba_gift_reward,new c2m_get_wanba_gift_reward)},e.prototype.updateXinyueInfo=function(e){Wbe(e,this,LED,l_r)},e}();!function(e){e[e.MY=1089]="MY",e[e.MY_TWO=1104]="MY_TWO",e[e.QQMY_TWO=1103]="QQMY_TWO",e[e.PHONE_TABLE=1023]="PHONE_TABLE",e[e.QQ_Top=1022]="QQ_Top",e[e.QQ_Top2=2001]="QQ_Top2"}(MiniSceneType=MiniSceneType||{}),function(e){e[e.XJWX=1]="XJWX",e[e.QQMini=2]="QQMini",e[e.Wanba=3]="Wanba",e[e.XJH5=4]="XJH5",e[e.YZX=5]="YZX",e[e.WX=6]="WX",e[e.HSWX=7]="HSWX"}(SharePlatform=SharePlatform||{});var r_x=function(){function e(){DB.instance.on(m2c_svr_open_time.opcode.toString(),this,this.onSerOpenTime),DB.instance.on(w2c_gsa_start.opcode.toString(),this,this.w2c_gsa_start),DB.instance.on(w2c_gsa_close.opcode.toString(),this,this.w2c_gsa_close),DB.instance.on(w2c_bga_start.opcode.toString(),this,this.w2c_bga_start),DB.instance.on(w2c_bga_stop.opcode.toString(),this,this.w2c_bga_stop),DB.instance.on(w2c_gsaRec_first_recharge.opcode.toString(),this,this.w2c_gsaRec_first_recharge),DB.instance.on(w2c_gsaRec_daily_recharge.opcode.toString(),this,this.w2c_gsaRec_daily_recharge),DB.instance.on(w2c_gsaRec_single_recharge.opcode.toString(),this,this.w2c_gsaRec_single_recharge),DB.instance.on(w2c_gsaRec_acum_recharge.opcode.toString(),this,this.w2c_gsaRec_acum_recharge),DB.instance.on(w2c_bgaRec_single_recharge.opcode.toString(),this,this.w2c_gsaRec_single_recharge),DB.instance.on(w2c_bgaRec_acum_recharge.opcode.toString(),this,this.w2c_gsaRec_acum_recharge),DB.instance.on(w2c_gsaRec_daily_consumption.opcode.toString(),this,this.w2c_gsaRec_daily_consumption),DB.instance.on(w2c_gsaRec_xgmb_point.opcode.toString(),this,this.w2c_gsaRec_xgmb_point),DB.instance.on(w2c_gsaRec_qltb_point.opcode.toString(),this,this.w2c_gsaRec_qltb_point),DB.instance.on(w2c_gsaRec_xgmb_festival_point.opcode.toString(),this,this.w2c_gsaRec_xgmb_point_festival),DB.instance.on(w2c_gsaRec_qltb_festival_point.opcode.toString(),this,this.w2c_gsaRec_qltb_point_festival),DB.instance.on(w2c_gsaRec_tmguildctrb_rank.opcode.toString(),this,this.w2c_gsaRec_tmguildctrb_rank),DB.instance.on(w2c_gsaRec_tmapvpscore_rank.opcode.toString(),this,this.w2c_gsaRec_tmapvpscore_rank),DB.instance.on(w2c_gsaRec_tmbanquet_rank.opcode.toString(),this,this.w2c_gsaRec_tmbanquet_rank),DB.instance.on(w2c_gsaRec_zuhe_status.opcode.toString(),this,this.w2c_gsaRec_zuhe_status),DB.instance.on(w2c_gsaRec_sgsq.opcode.toString(),this,this.w2c_gsaRec_sgsq),DB.instance.on(w2c_gsaRec_limitGift.opcode.toString(),this,this.w2c_gsaRec_limitGift),DB.instance.on(w2c_bgaRec_limitGift.opcode.toString(),this,this.w2c_bgaRec_limitGift),DB.instance.on(w2c_bgaRec_powerGain_rank.opcode.toString(),this,this.w2c_bgaRec_powerGain_rank),DB.instance.on(w2c_bgaRec_talismanGain_rank.opcode.toString(),this,this.w2c_bgaRec_talismanGain_rank),DB.instance.on(w2c_bgaRec_talismanAptGain_rank.opcode.toString(),this,this.w2c_bgaRec_talismanAptGain_rank),DB.instance.on(w2c_bgaRec_xianYuanGain_rank.opcode.toString(),this,this.w2c_bgaRec_xianYuanGain_rank),DB.instance.on(w2c_bgaRec_async_pvp_rank.opcode.toString(),this,this.w2c_bgaRec_async_pvp_rank),DB.instance.on(w2c_gsaRec_powerGain_rank.opcode.toString(),this,this.w2c_gsaRec_powerGain_rank),DB.instance.on(w2c_gsaRec_talismanGain_rank.opcode.toString(),this,this.w2c_gsaRec_talismanGain_rank),DB.instance.on(w2c_gsaRec_talismanAptGain_rank.opcode.toString(),this,this.w2c_gsaRec_talismanAptGain_rank),DB.instance.on(w2c_gsaRec_xianYuanGain_rank.opcode.toString(),this,this.w2c_gsaRec_xianYuanGain_rank),DB.instance.on(m2c_drawcard_info.opcode.toString(),this,this.m2c_drawcard_info),DB.instance.on(m2c_drawcard_record.opcode.toString(),this,this.m2c_drawcard_record),DB.instance.on(m2c_drawcard_success.opcode.toString(),this,this.m2c_drawcard_success),DB.instance.on(w2c_gsaRec_drawcard_status.opcode.toString(),this,this.w2c_gsaRec_drawcard_status),DB.instance.on(m2c_drawcard_get_score_reward.opcode.toString(),this,this.m2c_drawcard_get_score_reward),DB.instance.on(w2c_roulette_info.opcode.toString(),this,this.w2c_roulette_info),DB.instance.on(w2c_roulette_start.opcode.toString(),this,this.w2c_roulette_start),DB.instance.on(w2c_roulette_record.opcode.toString(),this,this.w2c_roulette_record),DB.instance.on(w2c_gsaRec_limitReward.opcode.toString(),this,this.w2c_gsaRec_limitReward),DB.instance.on(w2c_gain_rank_qual_info.opcode.toString(),this,this.w2c_gain_rank_qual_info),DB.instance.on(q2c_csaRec_talismanGain_rank.opcode.toString(),this,this.q2c_csaRec_talismanGain_rank),DB.instance.on(q2c_csaRec_powerGain_rank.opcode.toString(),this,this.q2c_csaRec_powerGain_rank),DB.instance.on(q2c_csaRec_talismanAptGain_rank.opcode.toString(),this,this.q2c_csaRec_talismanAptGain_rank),DB.instance.on(q2c_csaRec_xianYuanGain_rank.opcode.toString(),this,this.q2c_csaRec_xianYuanGain_rank),DB.instance.on(q2c_csaRec_asyncPvp_rank.opcode.toString(),this,this.q2c_csaRec_asyncPvp_rank),DB.instance.on(w2c_bgaAct_powerGain_rank_info.opcode.toString(),this,this.w2c_bgaAct_powerGain_rank_info),DB.instance.on(w2c_bgaAct_talismanGain_rank_info.opcode.toString(),this,this.w2c_bgaAct_talismanGain_rank_info),DB.instance.on(w2c_bgaAct_talismanAptGain_rank_info.opcode.toString(),this,this.w2c_bgaAct_talismanAptGain_rank_info),DB.instance.on(w2c_bgaAct_xianYuanGain_rank_info.opcode.toString(),this,this.w2c_bgaAct_xianYuanGain_rank_info),DB.instance.on(w2c_bgaAct_async_pvp_rank_info.opcode.toString(),this,this.w2c_bgaAct_async_pvp_rank_info),DB.instance.on(w2c_bgaDesc_incrank.opcode.toString(),this,this.onBGAIncrankConfig),DB.instance.on(w2c_bgaRec_login_activity.opcode.toString(),this,this.onDaySignInfo),DB.instance.on(w2c_bgaRec_holiday_gift.opcode.toString(),this,this.onUpdateGiftInfo),DB.instance.on(w2c_bgaRec_continue_recharge.opcode.toString(),this,this.onUpdateConRecInfo),DB.instance.on(w2c_bgaRec_activeness_gift.opcode.toString(),this,this.onUpdateActiveGiftInfo),DB.instance.on(w2c_bgaRec_turntable.opcode.toString(),this,this.onUpdateTreasureHuntInfo),DB.instance.on(w2c_get_festival_target_info.opcode.toString(),this,this.onUpdatChristmasTargetInfo),DB.instance.on(w2c_gsaRec_opensvr_continuous_recharge.opcode.toString(),this,this.onUpdateOpenSvrConRecInfo),DB.instance.on(w2c_gsaRec_opensvr_discount_recharge.opcode.toString(),this,this.onUpdateOpenSvrDiscoutRecInfo),DB.instance.on(w2c_gsaRec_grow_up_fund.opcode.toString(),this,this.onUpdatGrowUpPlanInfo),DB.instance.on(w2c_gsaRec_investment_plan.opcode.toString(),this,this.onUpdatInvestmentInfo),DB.instance.on(w2c_change_item_info.opcode.toString(),this,this.onUpdateChangeItemInfo),DB.instance.on(w2c_change_item.opcode.toString(),this,this.onUpdateChangeItem)}return e.prototype.onSerOpenTime=function(e){Ksg(e,ActivityModel)},e.prototype.w2c_roulette_start=function(e){Sqn(e,ActivityModel,LED,l_r)},e.prototype.onUpdatInvestmentInfo=function(e){Cxo(e,growUpModel)},e.prototype.m2c_drawcard_get_score_reward=function(e){Wym(e,BlackKingModel)},e.prototype.w2c_gsaRec_tmguildctrb_rank=function(e){ActivityModel.instance.updateActDataRewardTime(ActivityTypeDefine.GS_xsbgRank,e.rewardTime),x_p.instance.updateXsRank(ActivityTypeDefine.GS_xsbgRank),LED.event(l_r.ACTIVITY_BGA_TIMELIMIT),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.xsRank)},e.prototype.w2c_gain_rank_qual_info=function(e){Kxs(e,KFopenSerModel)},e.prototype.w2c_gsaRec_zuhe_status=function(e){Gmi(e,ZuHeModel,LED,l_r,FuncDefine)},e.prototype.w2c_gsaRec_qltb_point=function(e){Gmz(e,LimitActivityModel)},e.prototype.onUpdatChristmasTargetInfo=function(e){Yna(e,MonthActivityModel)},e.prototype.w2c_gsaRec_daily_recharge=function(e){Gwe(e,ActivityModel,LED,l_r,FuncDefine)},e.prototype.q2c_csaRec_talismanAptGain_rank=function(e){Ooj(e,ActivityTypeDefine,this)},e.prototype.w2c_bgaRec_limitGift=function(e){Qex(e,ActivityModel)},e.prototype.onUpdateOpenSvrConRecInfo=function(e){Edi(e,openSvrSevenActivityModel)},e.prototype.onBGAIncrankConfig=function(e){var p_l=ActivityModel.instance.getActivityConfigVoByType(e.type),p_g=ActivityModel.instance.getActivityVoByType(e.type);p_l&&(p_l.showTime=e.showTime||0,p_l.subVo[0].round=e.round,p_g&&(p_g.round=e.round),LED.event(l_r.ACTIVITY_CONFIG_UPDATE))},e.prototype.updateKFRank=function(e,p_l,p_g,b_s){KFopenSerModel.instance.updateKFServer(e,p_l),ActivityModel.instance.updateActDataSPTime(p_l,p_g,b_s),x_p.instance.updateKFPersonalRank(p_l),x_p.instance.updateKFServerRank(p_l),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.KFopensvrRank),LED.event(l_r.KF_UPDATE_SERVER_VALUE)},e.prototype.onUpdateConRecInfo=function(e){Wfj(e,MonthActivityModel)},e.prototype.onUpdatGrowUpPlanInfo=function(e){Qaf(e,growUpModel)},e.prototype.w2c_bgaAct_talismanAptGain_rank_info=function(e){Evn(e,this,ActivityTypeDefine)},e.prototype.w2c_gsaRec_drawcard_status=function(e){Cfm(e,ActivityModel,LED,l_r)},e.prototype.w2c_bgaRec_async_pvp_rank=function(e){var p_l=ActivityTypeDefine.BG_asyncPvpScoreGainRank;ActivityModel.instance.updateActDataRewardTime(p_l,e.rewardTime),x_p.instance.updateXsRank(p_l),LED.event(l_r.ACTIVITY_BGA_TIMELIMIT),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.pvp)},e.prototype.w2c_gsaRec_tmbanquet_rank=function(e){ActivityModel.instance.updateActDataRewardTime(ActivityTypeDefine.GS_xsbanquetRank,e.rewardTime),x_p.instance.updateXsRank(ActivityTypeDefine.GS_xsbanquetRank),LED.event(l_r.ACTIVITY_BGA_TIMELIMIT),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.xsRank)},e.prototype.w2c_gsaRec_sgsq=function(e){ActivityModel.instance.sgsqRechargeVo=e,LED.event(l_r.ACTIVITY_BGA_SGSQ),e.ty==ActivityTypeDefine.GS_xxsb?(LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.sgsq),ActivityModel.instance.xxsbRechargeVo=e):e.ty==ActivityTypeDefine.GS_sgsq?(LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.sgsq),ActivityModel.instance.sgsqRechargeVo2=e):e.ty==ActivityTypeDefine.GS_xjmb&&(LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.sgsq),ActivityModel.instance.xjmbRechargeVo=e)},e.prototype.onDaySignInfo=function(e){Axu(e,FestivalActivityModel)},e.prototype.w2c_bgaRec_powerGain_rank=function(e){ActivityModel.instance.updateActDataRewardTime(ActivityTypeDefine.BG_powerGainRank,e.rewardTime),x_p.instance.updateXsRank(ActivityTypeDefine.BG_powerGainRank),LED.event(l_r.ACTIVITY_BGA_TIMELIMIT),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.xsRank)},e.prototype.w2c_bgaRec_talismanGain_rank=function(e){ActivityModel.instance.updateActDataRewardTime(ActivityTypeDefine.BG_talismanGainRank,e.rewardTime),x_p.instance.updateXsRank(ActivityTypeDefine.BG_talismanGainRank),LED.event(l_r.ACTIVITY_BGA_TIMELIMIT),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.xsRank)},e.prototype.w2c_gsaRec_acum_recharge=function(e){Orp(e,ActivityModel,LED,l_r,FuncDefine)},e.prototype.w2c_gsaRec_limitReward=function(e){Yve(e,ActivityModel)},e.prototype.onUpdateOpenSvrDiscoutRecInfo=function(e){Ylh(e,openSvrSevenActivityModel)},e.prototype.onUpdateChangeItemInfo=function(e){Ktr(e,MonthActivityModel,LED,l_r,FuncDefine)},e.prototype.m2c_drawcard_success=function(e){Knj(e,ActivityModel,LED,l_r)},e.prototype.q2c_csaRec_powerGain_rank=function(e){Uuc(e,ActivityTypeDefine,this)},e.prototype.w2c_gsaRec_tmapvpscore_rank=function(e){ActivityModel.instance.updateActDataRewardTime(ActivityTypeDefine.GS_xsapvpRank,e.rewardTime),x_p.instance.updateXsRank(ActivityTypeDefine.GS_xsapvpRank),LED.event(l_r.ACTIVITY_BGA_TIMELIMIT),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.xsRank)},e.prototype.onUpdateActiveGiftInfo=function(e){Scy(e,MonthActivityModel)},e.prototype.w2c_bgaAct_talismanGain_rank_info=function(e){Qst(e,this,ActivityTypeDefine)},e.prototype.w2c_gsaRec_talismanGain_rank=function(e){var p_l=ActivityTypeDefine.GS_talismanGainRank;ActivityModel.instance.updateActDataRewardTime(p_l,e.rewardTime),x_p.instance.updateXsRank(p_l),LED.event(l_r.ACTIVITY_BGA_TIMELIMIT),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.xsRank)},e.prototype.w2c_bgaRec_talismanAptGain_rank=function(e){ActivityModel.instance.updateActDataRewardTime(ActivityTypeDefine.BG_talismanAptGainRank,e.rewardTime),x_p.instance.updateXsRank(ActivityTypeDefine.BG_talismanAptGainRank),LED.event(l_r.ACTIVITY_BGA_TIMELIMIT),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.xsRank)},e.prototype.w2c_roulette_info=function(e){Qbo(e,ActivityModel,LED,l_r)},e.prototype.m2c_drawcard_record=function(e){Cqn(e,ActivityModel,LED,l_r)},e.prototype.w2c_gsaRec_talismanAptGain_rank=function(e){var p_l=ActivityTypeDefine.GS_talismanAptGainRank;ActivityModel.instance.updateActDataRewardTime(p_l,e.rewardTime),x_p.instance.updateXsRank(p_l),LED.event(l_r.ACTIVITY_BGA_TIMELIMIT),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.xsRank)},e.prototype.w2c_gsaRec_first_recharge=function(e){ActivityModel.instance.firstRechargeVo=e,LED.event(l_r.ACTIVITY_BGA_FIRST_RECHARGE),0<e.rewardTime&&ActivityModel.instance.removeGSActivity(1)},e.prototype.w2c_gsaRec_limitGift=function(e){Qfi(e,ActivityModel)},e.prototype.w2c_invite_reward_status=function(e){Iue(e,ActivityModel,LED,l_r)},e.prototype.w2c_bgaRec_xianYuanGain_rank=function(e){ActivityModel.instance.updateActDataRewardTime(ActivityTypeDefine.BG_xianYuanGainRank,e.rewardTime),x_p.instance.updateXsRank(ActivityTypeDefine.BG_xianYuanGainRank),LED.event(l_r.ACTIVITY_BGA_TIMELIMIT),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.xsRank)},e.prototype.w2c_gsaRec_powerGain_rank=function(e){var p_l=ActivityTypeDefine.GS_powerGainRank;ActivityModel.instance.updateActDataRewardTime(p_l,e.rewardTime),x_p.instance.updateXsRank(p_l),LED.event(l_r.ACTIVITY_BGA_TIMELIMIT),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.xsRank)},e.prototype.onUpdateTreasureHuntInfo=function(e){Ugz(e,MonthActivityModel)},e.prototype.w2c_gsa_start=function(e){Cvg(e,ActivityModel)},e.prototype.w2c_bgaAct_async_pvp_rank_info=function(e){Wya(e,this,ActivityTypeDefine)},e.prototype.w2c_gsaRec_qltb_point_festival=function(e){Skq(e,LimitActivityModel)},e.prototype.w2c_gsaRec_daily_consumption=function(e){Oqn(e,ActivityModel,LED,l_r,FuncDefine)},e.prototype.q2c_csaRec_asyncPvp_rank=function(e){Mcd(e,ActivityTypeDefine,this)},e.prototype.w2c_roulette_record=function(e){Eor(e,ActivityModel,LED,l_r,FuncDefine)},e.prototype.w2c_gsaRec_xgmb_point=function(e){Ywf(e,LimitActivityModel)},e.prototype.w2c_bga_start=function(e){Ius(e,ActivityModel)},e.prototype.m2c_drawcard_info=function(e){Gmn(e,ActivityModel,BlackKingModel,LED,l_r,FuncDefine)},e.prototype.w2c_bgaAct_powerGain_rank_info=function(e){Evp(e,this,ActivityTypeDefine)},e.prototype.q2c_csaRec_talismanGain_rank=function(e){Upk(e,ActivityTypeDefine,this)},e.prototype.w2c_gsaRec_xianYuanGain_rank=function(e){var p_l=ActivityTypeDefine.GS_xianYuanGainRank;ActivityModel.instance.updateActDataRewardTime(p_l,e.rewardTime),x_p.instance.updateXsRank(p_l),LED.event(l_r.ACTIVITY_BGA_TIMELIMIT),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.xsRank)},e.prototype.w2c_gsaRec_xgmb_point_festival=function(e){Ghq(e,LimitActivityModel)},e.prototype.w2c_gsa_close=function(e){Wgw(e,ActivityModel)},e.prototype.w2c_gsaRec_single_recharge=function(e){Udu(e,ActivityModel,LED,l_r,FuncDefine)},e.prototype.w2c_bgaAct_xianYuanGain_rank_info=function(e){Enn(e,this,ActivityTypeDefine)},e.prototype.setState=function(e,p_l){Uov(e,p_l,TimeLimitModel)},e.prototype.q2c_csaRec_xianYuanGain_rank=function(e){Ufn(e,ActivityTypeDefine,this)},e.prototype.onUpdateGiftInfo=function(e){e.activity_name==ActivityTypeDefine.BG_holidayGift?FestivalActivityModel.ins.onUpdateGiftInfo(e):e.activity_name==ActivityTypeDefine.BG_newHolidayGift?WeekendActivityModel.ins.onUpdateGiftInfo(e):MonthActivityModel.ins.onUpdateGiftInfo(e)},e.prototype.w2c_bga_stop=function(e){And(e,ActivityModel)},e.prototype.onUpdateChangeItem=function(e){Kim(e,MonthActivityModel,LED,l_r)},e}(),LimitRewardModel=function(){function e(){this.limitRewardInfo=[]}return e.prototype.updateLimitReward=function(e){var p_l=ActivityModel.instance.getActivityVoByType(ActivityTypeDefine.GS_limitReward);if(p_l){var p_g=p_l.round;for(var b_s in this.limitRewardInfo)for(var d_u in e){if(!this.limitRewardInfo[b_s])return;1e3*p_g+e[d_u].id===this.limitRewardInfo[b_s].id&&(this.limitRewardInfo[b_s].status=e[d_u].status)}LED.event(l_r.AMEND_CLICK_NUM),LED.event(l_r.ACTIVITY_LIMIT_REWARD_UPDATE),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.limitReward)}},e.prototype.checkIsCanGetReward=function(){return Yed(this,parseInt)},e.prototype.checkLimitRewardStatus=function(){return Opo(this)},e.prototype.isCanGet=function(e){for(var p_l in this.limitRewardInfo)if(parseInt(p_l)<=e&&1===this.limitRewardInfo[p_l].status)return!0;return!1},e.prototype.initLimitReward=function(e){if(!this.limitRewardInfo.length){var p_l=Config.activity_limitReward_limitReward;for(var p_g in p_l)if(p_l[p_g].round===e){var b_s=new LimitRewardVo;b_s.status=0,b_s.cfg=Config.activity_limitReward_limitReward[p_l[p_g].id],this.limitRewardInfo.push(b_s)}}},e.prototype.reqBuyLimitReward=function(e){var p_l=new c2w_gsaAct_limitReward_get;p_l.id=e,DB.instance.query(c2w_gsaAct_limitReward_get,p_l)},e.instance=new e,e}(),LimitRewardVo=function(){function e(){}return Object.defineProperty(e.prototype,"id",{get:function(){return this.cfg.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"price_god",{get:function(){return parseInt(this.cfg.price)},enumerable:!0,configurable:!0}),e}(),LimitActivityRankType,LimitActivityRankAwardType,LimitActivityRankAwardOwnerType,LimitActivityModel=function(){function e(){this.isClickShopBtn=!0,this.isClickShopBtn_qltb=!0,this.isClickShopBtn_xgmb_festival=!0,this.isClickShopBtn_qltb_festival=!0,this._hash={}}return e.prototype.getHashData=function(e){return Gcy(e,this)},e.prototype.getRwdTime=function(e,p_l){return e===LimitActivityRankType.personal?this.getRoleRwdTime(p_l):e===LimitActivityRankType.guild?this.getGuildRwdTime(p_l):void 0},e.prototype.reqExchange=function(e,p_l){DB.instance.query(c2w_gsaAct_xgmb_exchange,{id:e,num:p_l})},e.prototype.onLimitActivityInfo2=function(e){null!=e&&(this._hash[ActivityTypeDefine.GS_qltb]={info:e,cfg:Config.activity_qltb_exchange,keyCfg:Config.activity_qltb_keys},LED.event(l_r.LIMIT_ACTIVITY_INFO),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.qltb),LED.event(l_r.RETURN_LIMIACTIVE_INFO))},e.prototype.reqUseKey=function(e,p_l){DB.instance.query(c2w_gsaAct_xgmb_usekey,{id:e,num:p_l})},e.prototype.reRankReward2=function(e){DB.instance.query(c2w_gsaAct_qltb_rank_reward,{ty:e})},e.prototype.getHashPro=function(e,p_l){var p_g=this._hash[e];return p_g?p_g[p_l]:null},e.prototype.getLimitActivityExchange=function(e){var p_l=[],p_g=this.getHashPro(e,"cfg");for(var b_s in p_g)p_l.push(p_g[b_s]);return p_l},e.prototype.reqUseKey2_qltb_festival=function(e,p_l){DB.instance.query(c2w_gsaAct_qltb_festival_usekey,{id:e,num:p_l})},e.prototype.onLimitActivityInfo=function(e){null!=e&&(this._hash[ActivityTypeDefine.GS_xgmb]={info:e,cfg:Config.activity_xgmb_exchange,keyCfg:Config.activity_xgmb_keys},LED.event(l_r.LIMIT_ACTIVITY_INFO),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.xgmb),LED.event(l_r.RETURN_LIMIACTIVE_INFO))},e.prototype.reqUseXgmbfestivalkey=function(e,p_l){DB.instance.query(c2w_gsaAct_xgmb_festival_usekey,{id:e,num:p_l})},e.prototype.getLimitActivityKeys=function(e){var p_l=[],p_g=this.getHashPro(e,"keyCfg");for(var b_s in p_g){var d_u=new ModuleItemVO;d_u.id=p_g[b_s].id;var b_e=BagModel.instance.getItemCountByItemID(p_g[b_s].id,BagTypeDefine.BAG_TYPE_ITEM);d_u.amount=null==b_e?0:b_e,p_l.push(d_u)}return p_l},e.prototype.getLimitActivityRankRewards=function(e,p_l){return Cuk(e,p_l,RoundRewardManager)},e.prototype.reRankReward_xgmb_festival=function(e){DB.instance.query(c2w_gsaAct_xgmb_festival_rank_reward,{ty:e})},e.prototype.reqExchange_xgmb_festival=function(e,p_l){DB.instance.query(c2w_gsaAct_xgmb_festival_exchange,{id:e,num:p_l})},e.prototype.getRoleRwdTime=function(e){var p_l=this.getHashPro(e,"info");return p_l&&p_l.roleRwdTime||0},e.prototype.onLimitActivityInfo_festival=function(e){null!=e&&(this._hash[ActivityTypeDefine.GS_xgmb_festival]={info:e,cfg:Config.activity_xgmbFestival_exchange,keyCfg:Config.activity_xgmbFestival_keys},LED.event(l_r.LIMIT_ACTIVITY_INFO),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.xgmbFestival),LED.event(l_r.RETURN_LIMIACTIVE_INFO))},e.prototype.reqUseKey2=function(e,p_l){DB.instance.query(c2w_gsaAct_qltb_usekey,{id:e,num:p_l})},e.prototype.reqExchange2=function(e,p_l){DB.instance.query(c2w_gsaAct_qltb_exchange,{id:e,num:p_l})},e.prototype.reRankReward2_qltb_festival=function(e){DB.instance.query(c2w_gsaAct_qltb_festival_rank_reward,{ty:e})},e.prototype.reRankReward=function(e){DB.instance.query(c2w_gsaAct_xgmb_rank_reward,{ty:e})},e.prototype.checkUseKey=function(e){return Guj(e,BagModel,BagTypeDefine,b_p,j_x)},e.prototype.reqExchange2_qltb_festival=function(e,p_l){DB.instance.query(c2w_gsaAct_qltb_festival_exchange,{id:e,num:p_l})},e.prototype.getGuildRwdTime=function(e){var p_l=this.getHashPro(e,"info");return p_l&&p_l.guildRwdTime||0},e.prototype.getPoint=function(e){var p_l=this.getHashPro(e,"info");return p_l&&p_l.point||0},e.prototype.getShopItems=function(e){var p_l=[],p_g=this.getHashPro(e,"keyCfg");for(var b_s in p_g)p_l.push(p_g[b_s]);return p_l},e.prototype.checkGetRewards=function(p_l,p_g){var b_s,d_u,b_e=p_g.type,d_m=ActivityModel.instance.getActDataByType(b_e);if(!d_m)return!1;var d_w=p_l==LimitActivityRankType.personal?d_m.rankType:d_m.rankType1;b_s=e.instance.getLimitActivityRankRewards(d_w,b_e),d_u=RankModel.instance.getRankDataByType(d_w);var f_t=b_s?b_s.length:0;if(f_t<=0)return!1;var v_z=b_s[f_t-1].endIdx,d_h=d_u?d_u.getOwnIndex():0;return!(0==d_h||v_z<d_h)},e.prototype.getTotal=function(e){var p_l=this.getHashPro(e,"info");return p_l&&p_l.point||0},e.prototype.getExchangeNum=function(e,p_l){var p_g=this.getHashData(e);if(p_g){var b_s=p_g.info.exchange||[],d_u=p_g.cfg;for(var b_e in b_s)for(var d_m in d_u)if(b_s[b_e].id==d_u[d_m].id&&d_u[d_m].itemId==p_l)return b_s[b_e].num||0}return 0},e.prototype.onLimitActivityInfo2_festival=function(e){null!=e&&(this._hash[ActivityTypeDefine.GS_qltb_festival]={info:e,cfg:Config.activity_qltbFestival_exchange,keyCfg:Config.activity_qltbFestival_keys},LED.event(l_r.LIMIT_ACTIVITY_INFO),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.qltbFestival),LED.event(l_r.RETURN_LIMIACTIVE_INFO))},e.instance=new e,e}();!function(e){e[e.personal=0]="personal",e[e.guild=1]="guild"}(LimitActivityRankType=LimitActivityRankType||{}),function(e){e[e.personal=0]="personal",e[e.guild=1]="guild"}(LimitActivityRankAwardType=LimitActivityRankAwardType||{}),function(e){e[e.guildLeader=1]="guildLeader",e[e.guildMember=2]="guildMember"}(LimitActivityRankAwardOwnerType=LimitActivityRankAwardOwnerType||{});var MineTypeVo,MinecdTypeVo,MineOnekey,HoleFacilityType,HoleMoudel=function(){function e(){this._curRefershTime=0,this._talismanlist=[],this._talismanlist2=[],this._talismanlist3=[],this._talismanlist4=[],this._hassent=[],this._talismanlist1=[],this._oneKeyMineInfo=[],this.redpoint=!0}return e.prototype.initFieldDatas=function(){if(null==this._holeFieldDatas){this._holeFieldDatas=[];var e=Config.office_mine,p_l=void 0;for(var p_g in e)e[p_g].mineType==MineTypeVo.FIELD&&((p_l=new MineFieldItemVo).type=e[p_g].type,p_l.minetype=e[p_g].mineType,p_l.lv=e[p_g].lv,this._holeFieldDatas.push(p_l))}},e.prototype.getHasSent=function(){var p_l=e.instance.getTreasureBox();if(this._hassent=[],p_l)for(var p_g=0;p_g<p_l.length;p_g++)if(p_l[p_g].talismans)for(var b_s=0;b_s<p_l[p_g].talismans.length;b_s++){var d_u;d_u=p_l[p_g].talismans[b_s],this._hassent.push(d_u)}},e.prototype.getFieldInfo=function(){return Cqc(this)},e.prototype.getmineUpdate=function(e){this._mineUpdate=[];var p_l=new MineFieldItemVo;p_l.cd=e.info.cd,p_l.lv=e.info.lv,p_l.type=e.info.type,p_l.times=e.info.times,this._mineUpdate.push(p_l),LED.event(l_r.KM_DATA_UPDATE)},e.prototype.getTreasureAwardInfo=function(e){if((this._treasuredate=null)==this._treasuredate){this._treasuredate=[];var p_l=void 0;(p_l=new TreasureItemVo).coin=e.coin,p_l.isCrit=e.isCrit,this._treasuredate.push(p_l)}LED.event(l_r.JBP_GETMONEY_UPDATE)},e.prototype.getMineInfo=function(){return Gzh(this)},e.prototype.getTreasure=function(){return Aal(this)},e.prototype.reqTreasure=function(){var e=new c2m_office_get_treasure;DB.instance.query(c2m_office_get_treasure,e)},e.prototype.pbAttributes=function(){var e=new m2c_property_update;DB.instance.query(m2c_property_update,e)},e.prototype.reqUupgrade=function(){var e=new c2m_office_up;DB.instance.query(c2m_office_up,e)},e.prototype.getMineDataByType=function(e,p_l){for(var p_g in this.initVeinDatas(),this._holeVeinDatas)if(this._holeVeinDatas[p_g].type==e&&this._holeVeinDatas[p_g].lv==p_l)return this._holeVeinDatas[p_g];return null},e.prototype.getTreasureInfo=function(e){var p_l;this._curVal=[],(p_l=new TreasureBoxVo).curVal=e.curVal,p_l.extraReward=e.extraReward,p_l.curGetCount=e.curGetCount,p_l.isFull=e.isFull,this._curVal.push(p_l),LED.event(l_r.JBP_INFO_UPDATE),LED.event(l_r.HELPER_UPDATE_INFO)},e.prototype.reqRefreshTaskList=function(){var e=new c2m_office_exped_refresh;DB.instance.query(c2m_office_exped_refresh,e)},e.prototype.changeActStar=function(e,p_l){var p_g,b_s=Math.floor(p_l/5),d_u=p_l%5;b_s=3<(b_s=p_l%5==0?b_s-1:b_s)?3:b_s,d_u=0===d_u?5:d_u-1;for(var b_e=0;b_e<5;b_e++)(p_g=e.getChildByName("star"+b_e))&&(p_g.index=b_e<=d_u?b_s:b_s+4)},e.prototype.reqStopTask=function(e){var p_l=new c2m_office_exped_task_stop;p_l.id=e,DB.instance.query(c2m_office_exped_task_stop,p_l)},e.prototype.getCurValNum=function(){return Kcv(this)},e.prototype.getFieldDataByType=function(e,p_l){for(var p_g in this.initFieldDatas(),this.initMineDatas(),this._holeMedicineDatas)if(this._holeMedicineDatas[p_g].type==e&&this._holeMedicineDatas[p_g].lv==p_l)return this._holeMedicineDatas[p_g];return null},e.prototype.reqTreasureInfo=function(){var e=new c2m_office_treasure_info;DB.instance.query(c2m_office_treasure_info,e)},e.prototype.getVeinData=function(e,p_l,p_g,b_s){this.initVeinDatas();var d_u=this.getVeinDataByType(e,p_l);return d_u&&(d_u.lv=p_l,d_u.times=p_g,d_u.cd=b_s),d_u},e.prototype.onSubActivate=function(e,p_l,p_g){return e>p_g[1]||e>=p_g[1]&&p_l>=p_g[2]},e.prototype.checkCondition=function(e,p_l){if(e){var p_g=0,b_s=[];for(var d_u in b_s.length>=p_l&&(p_g=0,b_s=[]),e){var b_e=void 0;if("0"==d_u&&(b_e=this.checkConditionByType(e[d_u],p_l)),0<p_g&&(b_e=this.checkConditionByType(e[d_u],p_l,b_s)),b_e&&(b_s=b_e,p_g++),p_g==e.length)return b_s}if(p_g<e.length)return null}return null},e.prototype.reqResetfacility=function(e){var p_l=new c2m_offset_facility_reset;p_l.type=e,DB.instance.query(c2m_offset_facility_reset,p_l)},e.prototype.getFieldData=function(e,p_l,p_g,b_s){this.initFieldDatas(),this.initMineDatas();var d_u=this.getFieldDataByType(e,p_l);return d_u&&(d_u.lv=p_l,d_u.times=p_g,d_u.cd=b_s),d_u},e.prototype.reqUupgradefacility=function(e){var p_l=new c2m_office_facility_level_up;p_l.type=e,DB.instance.query(c2m_office_facility_level_up,p_l)},e.prototype.getFieldState=function(){var e=this.heroVo.vipLv||0,p_l=Config.recharge_vip[e].mineOneKey,p_g=Config.global[GlobalDefine.mineOneKeyCollectState].t_info;return!!(p_g&&this.checkholeConditionByType(p_g)||p_l)},e.prototype.initVeinDatas=function(){if(null==this._holeVeinDatas){this._holeVeinDatas=[];var e=Config.office_mine,p_l=void 0;for(var p_g in e)e[p_g].mineType==MineTypeVo.VEIN&&((p_l=new MineVeinItemVo).type=e[p_g].type,p_l.minetype=e[p_g].mineType,p_l.lv=e[p_g].lv,this._holeVeinDatas.push(p_l))}Laya.timer.loop(1e3,this,this.countDown)},e.prototype.getRedpoints=function(){for(var e=1;e<=5;e++)if(3!=e&&this.getRedpoint(e))return!0;return!1},e.prototype.getOnekeyMineInfo=function(e){if(e&&0<e.length){var p_l=function(p_l){e[p_l]&&("0"==p_l?LED.event(l_r.KM_Criti_EFFECTE,e[p_l]):Laya.timer.once(1e3,p_g,(function(){LED.event(l_r.KM_Criti_EFFECTE,e[p_l])})))},p_g=this;for(var b_s in e)p_l(b_s)}},e.prototype.getMinesAllList=function(e){Snu(e,this,LED,l_r)},e.prototype.reqFacility=function(){var e=new c2m_office_facility_info;DB.instance.query(c2m_office_facility_info,e)},e.prototype.onReikinum=function(){var e=this.getFacility(),p_l=0;if(e){for(var p_g=0;p_g<e.length;p_g++)if(0<e[p_g].lv)for(var b_s=1;b_s<=e[p_g].lv;b_s++)p_l+=Config.office_facilities[1e3*e[p_g].type+b_s].lingqi;return p_l}return 0},e.prototype.getFieldDesc=function(){var e=this.heroVo.vipLv||0,p_l=Config.global[GlobalDefine.mineOneKeyCollectState].t_info;if(0<=e&&p_l){var p_g=Config.recharge_vip[e].mineOneKey,b_s="0";for(var d_u in Config.recharge_vip)if(Config.recharge_vip[d_u].mineOneKey){b_s=d_u;break}var b_e=0;if(p_l[2]&&(b_e=p_l[2]),!p_g&&p_l&&this.checkholeConditionByType(p_l))return Utils.$(("VIP{1}"+j_x("1048_1745_1737")+j_x("2205_1573_2111")+""),b_s);if(p_g&&p_l&&!this.checkholeConditionByType(p_l)){var d_m=(j_x("381_843_1117")+j_x(1012)+"{1}{2}"+j_x("1865_1048_1745")+j_x("1737_2205_1573")+j_x(2111)+"");return b_e&&(d_m=(j_x("381_843_1117")+j_x(1012)+"{1}-{2}"+j_x("1865_1048_1745")+j_x("1737_2205_1573")+j_x(2111)+"")),Utils.$(d_m,Config.state_state[p_l[1]].desc,h_m[Utils.$("TYPE_{1}",+b_e)])}if(!p_g&&p_l&&!this.checkholeConditionByType(p_l))return Utils.$(("VIP{1}"+j_x("2297_381_843")+j_x("1117_1012")+"{2}{3}"+j_x("1865_1048_1745")+j_x("1737_2205_1573")+j_x(2111)+""),b_s,Config.state_state[p_l[1]].desc,h_m[Utils.$("TYPE_{1}",+b_e)])}return""},e.prototype.reqStartTask=function(e,p_l){var p_g=new c2m_office_exped_task_start;p_g.id=e,p_g.talismans=p_l,DB.instance.query(c2m_office_exped_task_start,p_g)},e.prototype.propAddvalue=function(e,p_l){for(var p_g=this.getFacility(),b_s=0,d_u=0;d_u<=p_g[e].lv;d_u++)Config.office_attic[1e3*(e+1)+d_u].prop[0][1]&&Config.office_attic[1e3*(e+1)+d_u].prop.length>=p_l+1&&(b_s+=Config.office_attic[1e3*(e+1)+d_u].prop[p_l][1]);return b_s},e.prototype.getFacilityInfo=function(e){if((this._facilitydate=null)==this._facilitydate){this._facilitydate=[];var p_l=void 0;for(var p_g in e.list)(p_l=new FacilityItemVo).type=e.list[p_g].type,p_l.lv=e.list[p_g].lv,this._facilitydate.push(p_l)}LED.event(l_r.FACILITY_UPDATE)},e.prototype.checkConditionByType=function(e,p_l,p_g){if(void 0===p_g&&(p_g=null),e){var b_s=0,d_u=[],b_e=void 0,d_m=this._hassent;TalismanModel.instance.changeSortType(TalismanModel.instance.sortType);var d_w=TalismanModel.instance.getTalismanSealArr(!1).slice();d_w=d_w.sort(this.compareFun);for(var f_t=0;f_t<d_m.length;f_t++)for(var v_z=0;v_z<d_w.length;v_z++)d_m[f_t]==d_w[v_z].id&&d_w.splice(v_z,1);if(p_g)for(var d_h=0;d_h<d_w.length+1;d_h++)for(v_z=0;v_z<d_w.length;v_z++)d_w[v_z].id!=p_g[0]&&d_w[v_z].id!=p_g[1]&&d_w[v_z].id!=p_g[2]&&d_w.splice(v_z,1);var r_t=e[0];for(var t_n in d_w)if(d_u.length>=p_l&&(b_s=0,d_u=[]),(b_e=d_w[t_n]).isActive())switch(r_t){case"talismanApt":Config.talisman_talisman[d_w[t_n].id];var f_y=d_w[t_n].deployments;if(0<f_y.length){for(v_z=0;v_z<f_y.length;v_z++){var p_q=f_y[v_z];Config.talisman_deployment[p_q.id].type==e[1]&&(b_s+=p_q.level)}if(0<b_s){var h_h=void 0;h_h=d_w[t_n].id,d_u.push(h_h)}}if(b_s>=e[2]&&d_u.length==p_l)return d_u;break;case"talismanType":if(Config.talisman_talisman[b_e.id].type==e[1]&&(b_s+=1,h_h=void 0,h_h=d_w[t_n].id,d_u.push(h_h),b_s>=e[2]&&d_u.length==p_l))return d_u;break;case"talismanLv":if(b_s+=b_e.level,b_e.level&&(h_h=void 0,h_h=d_w[t_n].id,d_u.push(h_h)),b_s>=e[1]&&d_u.length==p_l)return d_u;break;case"talismanFight":Config.talisman_talisman[d_w[t_n].id];var n_j,j_l=TalismanModel.instance.getLvProps(d_w[t_n]),l_m=b_p.calPropFight(j_l);if(b_s+=l_m,l_m&&(n_j=d_w[t_n].id,d_u.push(n_j)),b_s>=e[1]&&d_u.length==p_l)return d_u}}return null},e.prototype.getMedicineInfo=function(){return Qvp(this)},e.prototype.minNumValue=function(e){e[0];for(var p_l=e[0],p_g=0;p_g<e.length;p_g++)e[p_g].value<=p_l.value&&(p_l.value=e[p_g].value,p_l.ld1=e[p_g].ld1,p_l.id2=e[p_g].id2);return p_l},e.prototype.getVeinDataByType=function(e,p_l){for(var p_g in this.initVeinDatas(),this._holeVeinDatas)if(this._holeVeinDatas[p_g].type==e&&this._holeVeinDatas[p_g].lv==p_l)return this._holeVeinDatas[p_g];return null},e.prototype.getTalismanList=function(e,p_l,p_g){void 0===p_l&&(p_l=1),void 0===p_g&&(p_g=0),TalismanModel.instance.getTalismanVos(),this._talismanlist=[],this._talismanlist3=[];var b_s=Config.office_expedTask[e].condition,d_u=Config.office_expedTask[e],b_e=this.checkCondition(b_s,d_u.num);if(b_e)for(var d_m in b_e){var d_w;d_w=b_e[d_m],this._talismanlist.push(d_w)}0==p_g&&LED.event(l_r.TALISMANS_LIST_UPDATE)},e.prototype.gettalismanLv=function(){var e=0,p_l=TalismanModel.instance.getTalismanVos();for(var p_g in p_l)e+=TalismanModel.instance.getTalismanVos()[p_g].level;return e},e.prototype.onUupgradefacility=function(e){this._effectvo=[];var p_l=new FacilityItemVo;p_l.lv=e.level,p_l.type=e.type,this._effectvo.push(p_l)},e.prototype.getFacility=function(){return Czg(this)},e.prototype.initMineList=function(e){var p_l;for(var p_g in this._holeVo=[],e)(p_l=new MineFieldItemVo).lv=e[p_g].lv,p_l.cd=e[p_g].cd,p_l.type=e[p_g].type,p_l.times=e[p_g].times,this._holeVo.push(p_l)},e.prototype.getFacilityTalismanProps=function(e){if(!this._facilitydate)return[];var p_l=Config.talisman_talisman[e],p_g=HoleFacilityType.ATTIC_ATTACK+(p_l.type-1),b_s=this._facilitydate[p_g-1],d_u=Config.office_attic[1e3*p_g+b_s.lv];return d_u?d_u.prop:[]},e.prototype.isTalismanList=function(e,p_l){void 0===p_l&&(p_l=1),TalismanModel.instance.getTalismanVos();var p_g=[],b_s=Config.office_expedTask[e].condition,d_u=Config.office_expedTask[e],b_e=this.checkCondition(b_s,d_u.num);if(b_e){for(var d_m in b_e){var d_w;d_w=b_e[d_m],p_g.push(d_w)}if(p_g.length>=p_l)return!0}return!1},e.prototype.isReikinum=function(e){void 0===e&&(e=0);for(var p_l=this.getFacility(),p_g=0;p_g<p_l.length;p_g++)if(0<p_l[p_g].lv){var b_s=p_l[p_g].lv+1;if(e>=Config.office_facilities[1e3*p_l[p_g].type+b_s].lingqi)return!0}return!1},e.prototype.gettalismanList=function(e,p_l,p_g,b_s,d_u){void 0===p_g&&(p_g=0),void 0===d_u&&(d_u=null),this._talismanlist2=[];for(var b_e=0;b_e<p_l.length;b_e++){if("talismanType"==e){if(Config.talisman_talisman[p_l[b_e].id].type==p_g){var d_m=void 0;d_m=new h_k,d_m=p_l[b_e],this._talismanlist2.push(d_m)}if(this._talismanlist2.length>=b_s)return this._talismanlist2}for(var d_w=p_l.length-1;b_e<d_w;d_w--){if("talismanLv"==e&&(p_l[b_e].level&&p_l[d_w].level&&p_l[b_e].level<p_l[d_w].level&&(0<p_g&&Config.talisman_talisman[p_l[d_w].id].type==p_g&&(d_m=void 0,d_m=new h_k,d_m=p_l[d_w],this._talismanlist2.push(d_m)),p_g<=0&&(d_m=void 0,d_m=new h_k,d_m=p_l[d_w],this._talismanlist2.push(d_m))),1<=this._talismanlist2.length))return this._talismanlist2;if("talismanFight"==e){this._talismanlist4,Config.talisman_talisman[p_l[b_e].id];var f_t=TalismanModel.instance.getLvProps(p_l[b_e]),v_z=b_p.calPropFight(f_t),d_h=(Config.talisman_talisman[p_l[d_w].id],TalismanModel.instance.getLvProps(p_l[d_w]));if(v_z<b_p.calPropFight(d_h)&&(0<p_g&&Config.talisman_talisman[p_l[d_w].id].type==p_g&&(d_m=void 0,d_m=new h_k,d_m=p_l[d_w],this._talismanlist2.push(d_m)),p_g<=0&&(d_m=void 0,d_m=new h_k,d_m=p_l[d_w],this._talismanlist2.push(d_m))),1<=this._talismanlist2.length)return this._talismanlist2}if("talismanApt"==e){Config.talisman_talisman[p_l[b_e].id],f_t=TalismanModel.instance.getLvProps(p_l[b_e]),Config.talisman_talisman[p_l[d_w].id],d_h=TalismanModel.instance.getLvProps(p_l[d_w]);for(var r_t=0;r_t<f_t.length;r_t++){var t_n=f_t[r_t],f_y=d_v.getPropertyType(t_n.propOrdinal),p_q=f_y.name,h_h=d_h[r_t],n_j=d_v.getPropertyType(h_h.propOrdinal).name;if(f_y.isPercent()){var j_l=t_n.value/100,l_m=h_h.value/100;d_u==p_q&&d_u==n_j&&j_l<l_m&&(d_m=void 0,d_m=p_l[b_e],this._talismanlist2.push(d_m))}if(f_y.isPercent()||(j_l=t_n.value,l_m=h_h.value,d_u==p_q&&d_u==n_j&&j_l<l_m&&(d_m=void 0,d_m=p_l[b_e],this._talismanlist2.push(d_m))),1<=this._talismanlist2.length)return this._talismanlist2}}}}},e.prototype.checkholeConditionByType=function(p_l){if(p_l){var p_g=p_l[0],b_s=(b_p.getDfofficLv(),LgcM.ins.heroVo);switch(p_g){case"strengthLv":return StrengthModel.instance.getTotalLv()>=p_l[1];case"stateLv":var d_u=StateModel.instance.getStateLv(),b_e=StateModel.instance.getStateSubLv();if(d_u>p_l[1])return!0;if(d_u==p_l[1]){if(!p_l[2])return!0;if(b_e>=p_l[2])return!0}return!1;case"talismanLv":return e.instance.gettalismanLv()>=p_l[1];case"fighting":return b_s.fight>=p_l[1];case"roleLv":return b_s.level>=p_l[1];case"talisman":return TalismanModel.instance.talismanSuitNum()>=p_l[1];case"blackking":return BlackKingModel.instance.godSuitNum()>=p_l[1]}}},e.prototype.reqGetReward=function(e){var p_l=new c2m_office_exped_get_reward;p_l.id=e,DB.instance.query(c2m_office_exped_get_reward,p_l)},e.prototype.getTimeConsume=function(e){void 0===e&&(e=-1),-1!=e&&null!=e||(e=this._curRefershTime);var p_l=Config.global[GlobalDefine.office_exped_refresh_gold].t_info;return p_l[e]?p_l[e]:p_l[p_l.length-1]},e.prototype.countDown=function(p_l){for(var p_g=0;p_g<6;++p_g){var b_s=e.instance.getMineInfo(),d_u=b_s[p_g].cd-SyncTime.serverTime/1e3;if(d_u<=0&&0!=b_s[p_g].times)return this.pbMineDatas(),0;if(p_g==p_l)return d_u}},e.prototype.getTreasureBoxInfo=function(e){if((this._treasureboxdate=null)==this._treasureboxdate){this._treasureboxdate=[];var p_l=void 0;this._curRefershTime=e.refreshTimes;for(var p_g=0;p_g<e.tasks.length;p_g++)e.tasks[p_g].isGetReward<1&&((p_l=new TreasyreBoxItemVo).lv=e.level,p_l.id=e.tasks[p_g].id,p_l.startTime=e.tasks[p_g].startTime,p_l.talismans=e.tasks[p_g].talismans,p_l.isGetReward=e.tasks[p_g].isGetReward,this._treasureboxdate.push(p_l))}this.getHasSent(),LED.event(l_r.TREASYREBOX_INFO_UPDATE),LED.event(l_r.HELPER_UPDATE_INFO)},e.prototype.pbmineCollect=function(e){var p_l=new c2m_office_mine_collect;p_l.type=e,DB.instance.query(c2m_office_mine_collect,p_l)},e.prototype.funopenTypes=function(e){var p_l,p_g=p_p.instance.mainVo;p_g&&(p_l=Config.task_task[p_g.id].showProgress);var b_s=this.heroVo.level,d_u=StateModel.instance.getStateLv();switch(e[0]){case"task":return!!(p_l&&p_l[0]>=e[1]);case"level":return b_s>=e[1];case"statelv":var b_e=StateModel.instance.getStateSubLv();return d_u>e[1]||d_u>=e[1]&&b_e>=e[2]}},e.prototype.compareFun=function(e,p_l){if(e.state===p_l.state){var p_g=Config.talisman_talisman[e.id],b_s=Config.talisman_talisman[p_l.id];switch(1){case TalismanSortType.DEFAULT:case TalismanSortType.QUALITY:return b_s.quality===p_g.quality?p_g.id-b_s.id:b_s.quality-p_g.quality;case TalismanSortType.LEVEL:return p_l.level===e.level?p_g.id-b_s.id:p_l.level-e.level;case TalismanSortType.TYPE:return b_s.type===p_g.type?b_s.id-p_g.id:p_g.type-b_s.type}}return p_l.state-e.state},e.prototype.checkholeCondition=function(e){var p_l=[];if(e)for(var p_g in e){var b_s=this.checkholeConditionByType(e[p_g]);if(!b_s){var d_u=void 0;d_u=b_s,p_l.push(d_u)}b_s&&(d_u=void 0,d_u=b_s,p_l.push(d_u))}return p_l.length>=e.length?p_l:null},e.prototype.getMineSkin=function(e){return Gvb(e,Config)},e.prototype.taskProgress=function(){for(var p_l=e.instance.getTreasureBox(),p_g=0,b_s=0;b_s<p_l.length;b_s++)0<p_l[b_s].startTime&&p_g++;return p_g},e.prototype.reqTreasyreBoxInfo=function(){var e=new c2m_office_exped_info;DB.instance.query(c2m_office_exped_info,e)},e.prototype.getVeinInfo=function(){return Uwz(this)},e.prototype.getRedpoint=function(p_l){var p_g=b_p.getDfofficLv(),b_s=(e.instance.getFieldInfo(),e.instance.getMineInfo());if(Config.office_mine,b_s){if(1===p_l){StateModel.instance.getStateLv(),StrengthModel.instance.getTotalLv(),e.instance.gettalismanLv(),Config.office_office[p_g];var d_u=this.getFacility();if(p_g<15){if(!p_k.instance.checkSystemOpen(FuncDefine.office))return!1;var b_e;if(Config.office_office[p_g+1],"1"==this.openType())return(b_e=!0)!=this.redpoint&&(this.redpoint=b_e,LED.event(l_r.KM_RED_UPDATE),LED.event(l_r.HELPER_UPDATE_INFO)),!0;if(!d_u)return(b_e=!1)!=this.redpoint&&(this.redpoint=b_e,LED.event(l_r.KM_RED_UPDATE),LED.event(l_r.HELPER_UPDATE_INFO)),!1;var d_m=e.instance.onReikinum(),d_w=b_p.getDfofficLv(),f_t=Config.office_office[d_w].lingqi-d_m;this.isReikinum(f_t)}}var v_z=Config.funcOpen;if(Config.office_office[p_g],2===p_l&&this.funopenTypes(v_z[FuncDefine.HoleFieldView].condition[0])){if(!p_k.instance.checkSystemOpen(FuncDefine.HoleFieldView))return!1;for(var d_h=0;d_h<3;++d_h)if(0<b_s[d_h].lv)return b_s[d_h].times<Config.office_mine[1e3*b_s[d_h].type+b_s[d_h].lv].times}if(3==p_l&&this.funopenTypes(v_z[FuncDefine.vein].condition[0])){if(!p_k.instance.checkSystemOpen(FuncDefine.vein))return!1;for(d_h=3;d_h<6;++d_h)if(0<b_s[d_h].lv)return b_s[d_h].times<5}if(6==p_l&&this.funopenTypes(v_z[FuncDefine.MedicineView].condition[0])){if(!p_k.instance.checkSystemOpen(FuncDefine.MedicineView))return!1;var r_t=b_s[MinecdTypeVo.TYPEMDEICINEA],t_n=b_s[MinecdTypeVo.TYPEMDEICINEB],f_y=b_s[MinecdTypeVo.TYPEMDEICINEC];if(r_t&&t_n&&f_y&&(0<r_t.lv||0<t_n.lv||0<f_y.lv)){var p_q=Config.office_mine[1e3*r_t.type+r_t.lv].times,h_h=Config.office_mine[1e3*t_n.type+t_n.lv].times,n_j=Config.office_mine[1e3*f_y.type+f_y.lv].times;if(r_t.times<p_q||t_n.times<h_h||f_y.times<n_j)return!0}}if(4==p_l&&this.funopenTypes(v_z[FuncDefine.treasurebox].condition[0])){if(!p_k.instance.checkSystemOpen(FuncDefine.treasurebox))return!1;var j_l=e.instance.getTreasureBox(),l_m=0;if(j_l&&2<j_l.length){for(d_h=0;d_h<j_l.length;++d_h){var z_m=j_l[d_h].startTime,h_b=Config.office_expedTask[j_l[d_h].id].duration+z_m-(t_s=SyncTime.serverTime)/1e3,t_i=j_l[d_h].isGetReward;if(0==t_i&&0<z_m&&l_m++,h_b<=0&&t_i<1&&0<z_m)return!0}if(l_m<Config.office_expedition[j_l[0].lv].acceptNum)for(d_h=0;d_h<j_l.length;++d_h)if(this.isTalismanList(Config.office_expedTask[j_l[d_h].id].id,Config.office_expedTask[j_l[d_h].id].num))return!0;if(l_m>=Config.office_expedition[j_l[0].lv].acceptNum)return!1}return!1}if(5==p_l){if(!p_k.instance.checkSystemOpen(FuncDefine.treasurepot))return!1;var n_f=this.heroVo.treasureLastTime+Config.global[602].i_info,t_s=SyncTime.serverTime/1e3;return!!(e.instance.getCurValNum()&&n_f<=t_s&&0<e.instance.getCurValNum()[0].curVal)}}},e.prototype.initMineDatas=function(){if(null==this._holeMedicineDatas){this._holeMedicineDatas=[];var e=Config.office_mine,p_l=void 0;for(var p_g in e)e[p_g].mineType==MineTypeVo.MDEICINE&&((p_l=new MineVeinItemVo).type=e[p_g].type,p_l.minetype=e[p_g].mineType,p_l.lv=e[p_g].lv,this._holeMedicineDatas.push(p_l))}},e.prototype.pbMineDatas=function(){var e=new c2m_office_mine_info;DB.instance.query(c2m_office_mine_info,e)},e.prototype.getTreasureBox=function(){return Mdq(this)},e.prototype.openType=function(){var p_l=0,p_g=b_p.getDfofficLv(),b_s=Config.office_office[p_g+1].cond,d_u=e.instance.checkholeCondition(b_s);for(var b_e in d_u){if(0==d_u[b_e])return b_s[b_e][0];if(1==d_u[b_e]&&p_l++,p_l==d_u.length)return"1"}},Object.defineProperty(e.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),e.instance=new e,e}(),MineFieldItemVo=function(){},TalismanContrast=function(){},TreasureItemVo=function(){},MineVeinItemVo=function(){},clpItem=function(){},TreasyreBoxItemVo=function(){},TreasureBoxVo=function(){},FacilityItemVo=function(){},linglongItem=function(){};!function(e){e[e.FIELD=1]="FIELD",e[e.VEIN=2]="VEIN",e[e.MDEICINE=3]="MDEICINE"}(MineTypeVo=MineTypeVo||{}),function(e){e[e.TYPEFIELDA=0]="TYPEFIELDA",e[e.TYPEFIELDB=1]="TYPEFIELDB",e[e.TYPEFIELDC=2]="TYPEFIELDC",e[e.TYPEVEINA=3]="TYPEVEINA",e[e.TYPEVEINB=6]="TYPEVEINB",e[e.TYPEVEINC=4]="TYPEVEINC",e[e.TYPEMDEICINEA=5]="TYPEMDEICINEA",e[e.TYPEMDEICINEB=8]="TYPEMDEICINEB",e[e.TYPEMDEICINEC=7]="TYPEMDEICINEC"}(MinecdTypeVo=MinecdTypeVo||{}),function(e){e[e.TYPEFIELD=1]="TYPEFIELD",e[e.TYPEVEIN=2]="TYPEVEIN",e[e.TYPEMINE=3]="TYPEMINE"}(MineOnekey=MineOnekey||{}),function(e){e[e.TREASURE=1]="TREASURE",e[e.EXPEDITION=2]="EXPEDITION",e[e.ATTIC_ATTACK=3]="ATTIC_ATTACK",e[e.ATTIC_DEFENSE=4]="ATTIC_DEFENSE",e[e.ATTIC_HPUPPER=5]="ATTIC_HPUPPER",e[e.ATTIC_SHILED=6]="ATTIC_SHILED",e[e.MAX=7]="MAX"}(HoleFacilityType=HoleFacilityType||{});var h_m=function(){function e(){}return e.TYPE_0="",e.TYPE_1=(j_x("2456_796")),e.TYPE_2=(j_x("711_2075")),e.TYPE_3=(j_x("283_2075")),e.TYPE_4=(j_x("1865_2075")),e.TYPE_5=(j_x("2245_1463")),e.TYPE_6=(j_x("474_1769")),e}(),HelperModule=function(){function e(){this.helpCanPanel=!1}return e.prototype.initValue=function(){var e=Config.helper,p_l=[];for(var p_g in e)this.getCanRedPoint(e[p_g].id)&&p_l.push(e[p_g]);return p_l},e.prototype.checkCostEnough=function(e,p_l){if(void 0===p_l&&(p_l=!1),p_l){if(0==e)return!1;if(e<0)return!1}else if(e<0)return!1;return b_p.checkCoin(CoinDefine.SKILL_EXP,e)},e.prototype.godRedpoint=function(e){return 1==e?BlackKingModel.instance.upStarsVo():0==e?BlackKingModel.instance.upGodsVo():2==e&&0<(BlackKingModel.instance.freeCoachCount?BlackKingModel.instance.freeCoachCount:0)||3==e&&BlackKingModel.instance.redCanActivate()},e.prototype.fashionRedpoint=function(e){var p_l;if(1==e&&(p_l=Config.fashion_fashion))for(var p_g in p_l)if(FashionModel.instance.IsRedPoint(p_l[p_g].id,1))return!0;if(2==e&&(p_l=Config.fashion_fashion))for(var p_g in p_l)if(FashionModel.instance.IsRedPoint(p_l[p_g].id,2)){var b_s=FashionModel.instance.getFashionVo(p_l[p_g].id),d_u=b_s?b_s.getGrade():1,b_e=FashionModel.instance.isMaxGrade(p_l[p_g].id,d_u);if(null!=b_s&&!b_e)return!0}return!1},e.prototype.guildRedpoint=function(e){return 1==e?!GuildModel.instance.hasGuild:2==e?GuildModel.instance.checkRpCheckin:3==e?1==GuildModel.instance.hasGuild&&GuildModel.instance.checkRpHelp:4==e&&GuildModel.instance.hasAuction},e.prototype.talismanRedpoint=function(e){var p_l;if(1==e&&(p_l=TalismanModel.instance.getTalismanVos(!1)))for(var p_g in p_l)if(3==p_l[p_g].state)return!0;if(2==e&&(p_l=TalismanModel.instance.getTalismanVos(!0)))for(var p_g in p_l)if(1==p_l[p_g].state&&TalismanModel.instance.canUpLv(p_l[p_g].id))return!0;return 3==e&&TalismanModel.instance.hasTalismanSuitCanUp()},e.prototype.rideRedpoint=function(e){var p_l=RideModel.instance.rideList;if(1==e)for(var p_g in p_l){if(!p_l[p_g])return;var b_s=RideModel.instance.getRideInfoByRid(p_l[p_g].rid);if(b_s){var d_u=RideModel.instance.canActiveRide(b_s.rid);if(0==b_s.isActive&&d_u)return!0}}if(2==e)for(var p_g in p_l){var b_e=RideModel.toLevelCnfIndex(p_l[p_g].rid,p_l[p_g].lv),d_m=Config.ride_rideLevel[b_e];if(d_m&&BagModel.instance.getItemCountByItemID(d_m.cost[0][0],BagTypeDefine.BAG_TYPE_ITEM)>=d_m.cost[0][1]&&RideModel.instance.isStarMaxLv(p_l[p_g].rid,p_l[p_g].star,p_l[p_g].lv))return!0}return!1},e.prototype.skilledpoint=function(){var e=SkillModel.instance.getActiveSkills(SkillTypeDefine.JUEXUE),p_l=SkillModel.instance.getActiveSkills(SkillTypeDefine.COMMON);for(var p_g in e){var b_s=SkillModel.instance.getUpCostNum(e[p_g].id,e[p_g].level);if(this.checkCostEnough(b_s))return!0}for(var p_g in p_l)if(b_s=SkillModel.instance.getUpCostNum(e[p_g].id,e[p_g].level),this.checkCostEnough(b_s))return!0;return!1},e.prototype.getCanRedPoint=function(e){var p_l=Config.helper[e];if(!p_l)return!1;if(!p_l.funid||!p_l.funid[0]||!p_k.instance.checkSystemOpen(p_l.funid[0]))return!1;switch(p_l.funid[0]){case FuncDefine.guild:return this.guildRedpoint(p_l.funid[1]);case FuncDefine.rank:return null!=RankModel.instance.getRankDirction()&&RankModel.instance.checkIsHaveShip();case FuncDefine.PalaceView:return!!PalaceModel.instance.isShowRedPoint()&&PalaceModel.instance.isShowRedPoint();case FuncDefine.welfare:var p_g=SigninModel.instance.canSignin(),b_s=SigninModel.instance.isShowRedPoint();return!(!p_g&&!b_s);case FuncDefine.treasurepot:return!!HoleMoudel.instance.getRedpoint(5);case FuncDefine.treasurebox:return!!HoleMoudel.instance.getRedpoint(4);case FuncDefine.HoleFieldView:return!!HoleMoudel.instance.getRedpoint(2);case FuncDefine.MedicineView:return!!HoleMoudel.instance.getRedpoint(6);case FuncDefine.dig:return!!MineModel.instance.getRedPoint();case FuncDefine.wildBoss:return!!DungeonModel.instance.canEnterWildBoss();case FuncDefine.personBoss:return!!DungeonModel.instance.lilian_wildBoss_Red();case FuncDefine.pagoda:return!(!DungeonModel.instance.canEnterPagoda()&&!DungeonModel.instance.canSweepPagoda());case FuncDefine.pvp:return!!d_x.instance.canPlay;case FuncDefine.stove:return!!TalismanModel.instance.getTalismanRedpoint()&&TalismanModel.instance.getTalismanRedpoint();case FuncDefine.vein:return!!HoleMoudel.instance.getRedpoint(3);case FuncDefine.banquet:return!!v_x.instance.hasRedPoint()&&v_x.instance.hasRedPoint();case FuncDefine.god:return this.godRedpoint(p_l.funid[1]);case FuncDefine.ride:return this.rideRedpoint(p_l.funid[1]);case FuncDefine.talisman:return this.talismanRedpoint(p_l.funid[1]);case FuncDefine.strength:return!!StrengthModel.instance.canStrength;case FuncDefine.fashion:return this.fashionRedpoint(p_l.funid[1]);case FuncDefine.title:return TitleModel.instance.canGain;case FuncDefine.state:return StateModel.instance.hasStateRedpoint();case FuncDefine.dh:return!(!OfflineModel.instance.hasInvite&&!OfflineModel.instance.hasTime);case FuncDefine.arena:return!!gymkhanaModel.instance.getRedPoint(!0);case FuncDefine.pagoda:return!(!DungeonModel.instance.canEnterPagoda()&&!DungeonModel.instance.canSweepPagoda());case FuncDefine.OfflineReward:return OfflineModel.instance.onlineInfo.canGain}},e.instance=new e,e}(),gymkhanaPlayer=function(){function e(){this.rankNum=0,this.ID=0,this.name="",this.fight=0,this.headIcon=0,this.entryId=0,this.fashionAvatar=0,this.vipLv=0}return e.prototype.initData=function(e){Umq(e,this)},e}(),gymkhanaVo=function(){function e(){this.selfRankNum=0,this.challengeTime=0,this.historyMaxRank=0,this.lastList=this.list=[],this.showRanklist=[],this.lastRank=-1}return e.prototype.initData=function(e){for(var p_l in this.selfRankNum=e.rank,this.showRanklist=e.topObj,this.list=[],e.matchObj){var p_g=new gymkhanaPlayer;p_g.initData(e.matchObj[p_l]),this.list.push(p_g)}this.showRanklist.sort(this.sortShowlist)},e.prototype.cloneLastList=function(e){Cbc(e,this)},e.prototype.clearLastData=function(){Ktp(this)},e.prototype.sortShowlist=function(e,p_l){return Umk(e,p_l)},e}(),gymkhanaRankInfoVo=function(){function e(){this.player=null,this.rankNum=0}return e.prototype.initData=function(e){Eaf(e,this)},Object.defineProperty(e.prototype,"rewardCfg",{get:function(){return Config.dreamland_dreamlandSkill[this.rankNum]},enumerable:!0,configurable:!0}),e}(),gymkhanaRecordInfoVo=function(){function e(){this.challenger=null,this.challenged=null,this.rankNum=0}return e.prototype.initData=function(e){Qxb(e,this)},e}(),gymkhanaShopInfoVo=function(){function e(){this.times=0,this.Id=0,this.buyLimitTimes=0}return e.prototype.initTimesData=function(e){Eat(e,this)},e.prototype.initLimitTimeData=function(e){Gub(e,this)},Object.defineProperty(e.prototype,"cfg",{get:function(){return Config.gymkhana_gymkhanaShop[this.Id]},enumerable:!0,configurable:!0}),e}(),gymkhanaModel=function(){function e(){this.redPoint=!1}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gymkhanaInfo",{get:function(){return this._gymkhanaInfo||(this._gymkhanaInfo=new gymkhanaVo),this._gymkhanaInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vipOverplusTime",{get:function(){return LgcM.ins.heroVo.arenaVipBuyTimes,Config.recharge_vip[LgcM.ins.heroVo.vipLv].gymkhanaTime-LgcM.ins.heroVo.arenaVipBuyTimes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overplusChallengeTime",{get:function(){return Config.global[1802].i_info-LgcM.ins.heroVo.arenaChallTimes+LgcM.ins.heroVo.arenaVipBuyTimes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastTime",{get:function(){return LgcM.ins.heroVo.gymkhanaChallengeCD},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"historyMaxRank",{get:function(){return LgcM.ins.heroVo.historyMaxRank},enumerable:!0,configurable:!0}),e.prototype.sortRank=function(e,p_l){return Sqs(e,p_l)},e.prototype.reqGymkhanaShop=function(){var e=new c2m_arena_exchange_req;DB.instance.query(c2m_arena_exchange_req,e)},e.prototype.reqRefreshTime=function(){var e=new c2m_arena_reset_chall_cd;DB.instance.query(c2m_arena_reset_chall_cd,e)},e.prototype.reqRecordInfo=function(e){var p_l=new c2w_arena_fight_record;p_l.mode=e,DB.instance.query(c2w_arena_fight_record,p_l)},e.prototype.onChallengePlayer=function(e){Cfl(e,this,UI)},e.prototype.stopFight=function(){var e=LgcM.ins.getActorById(this._fightPb.base.pid,Engine2d.ActorTypeDefine.PLAYER);e&&e.stopAutoCopy(),Engine2d.Hero.local.stopAutoCopy()},e.prototype.getRangingUpNum=function(e,p_l){return Quq(e,p_l,this,parseInt)},e.prototype.sortRecord=function(e,p_l){return Cbg(e,p_l)},e.prototype.reqChallengePlayer=function(e,p_l,p_g){void 0===p_g&&(p_g=0);var b_s=new c2m_arena_match;b_s.pid=e,b_s.mode=p_g,b_s.rank=p_l,DB.instance.query(c2m_arena_match,b_s)},e.prototype.reqGymkhanaInfo=function(){var e=new c2w_arena_info;DB.instance.query(c2w_arena_info,e)},e.prototype.rewardToHtmlStr=function(e){var p_l="";if(!e||e.length<0)return p_l;for(var p_g in e){var b_s=Config.CItem(e[p_g][0]);b_s&&b_s.icon&&(p_l=Utils.$("{1}{2}{3}",p_l,Utils.setImg(Resource.ResUrl.getIconUrl(b_s.icon),30,30),e[p_g][1]))}return p_l},e.prototype.formatTimeStrTow=function(e){var p_l=Math.floor(e/3600),p_g=Math.floor((e-60*p_l*60)/60),b_s=Math.floor(e-60*p_l*60-60*p_g);return(p_g<10?"0"+p_g:p_g)+":"+(b_s<10?"0"+b_s:b_s)},e.prototype.getCfgRankReward=function(e){for(var p_l in Config.gymkhana_rankReward){var p_g=Config.gymkhana_rankReward[p_l];if(p_g.beginIdx<=e&&p_g.endIdx>=e)return p_g}return null},e.prototype.onUpdataBuyInfo=function(e){0==e.ret&&(b_p.broadcastNotice((j_x("1355_2420_402")+j_x(2142))),UI.gymkhanaBuyTimeTip.close(),LED.event(l_r.GYMKHANA_BUY_COUNT,e.count))},e.prototype.initOneselfActors=function(){Kff(LgcM,this,Engine2d)},e.prototype.startFight=function(){Ats(LgcM,this,Engine2d,GlobalDefine)},e.prototype.rankrewardCfgs=function(){return Gtu(Config)},e.prototype.getRangingUpReward=function(e,p_l){var p_g,b_s,d_u={},b_e=Config.rank_ranklist[RankType.GymkhanaRank].maxCount+1;for(var d_m in 0==p_l&&(p_l=b_e),p_l=Math.min(b_e,p_l),Config.gymkhana_maxRankReward){var d_w=Config.gymkhana_maxRankReward[d_m];if(e>=d_w.beginIdx&&e<=d_w.endIdx)for(var f_t in p_g=p_l>=d_w.beginIdx&&p_l<=d_w.endIdx?p_l-e:d_w.endIdx-e+1,d_w.reward)d_u[f_t[0]]?d_u[d_w.reward[f_t][0]]+=d_w.reward[f_t][1]*p_g:d_u[d_w.reward[f_t][0]]=d_w.reward[f_t][1]*p_g;else if(p_g)if(p_l>d_w.endIdx){var v_z=d_w.endIdx-d_w.beginIdx+1;for(var f_t in d_w.reward)d_u[d_w.reward[f_t][0]]?d_u[d_w.reward[f_t][0]]+=d_w.reward[f_t][1]*v_z:d_u[d_w.reward[f_t][0]]=d_w.reward[f_t][1]*v_z}else if(0<(b_s=p_l-d_w.beginIdx+1))for(var f_t in d_w.reward)d_u[d_w.reward[f_t][0]]?d_u[d_w.reward[f_t][0]]+=d_w.reward[f_t][1]*b_s:d_u[d_w.reward[f_t][0]]=d_w.reward[f_t][1]*b_s}return d_u},e.prototype.createActors=function(e){var p_l=e.base,p_g=Engine2d.PlayerVo.freeStdInfo(Engine2d.ActorTypeDefine.PLAYER,Engine2d.PlayerVo);p_g.id=p_l.pid,p_g.name=p_l.name,p_g.entryId=p_l.entryId,p_g.px=p_g.py=p_g.endPx=p_g.endPy=0,p_g.speed=LgcM.ins.heroVo.speed,p_g.rideId=p_l.rideId,p_g.titleId=p_l.title,p_g.stateLv=p_l.stateLv,p_g.guildName=p_l.guildName,p_g.fashionClothes=p_l.fashionClothes,p_g.fashionWeapon=p_l.fashionWeapon,p_g.hp=Math.floor(this.countHp(p_l.pid)),p_g.hpUpper=p_g.hp,LgcM.ins.addActorInfo(Engine2d.ActorTypeDefine.PLAYER,p_g),LgcM.ins.addActorEntity(Engine2d.ActorTypeDefine.PLAYER,p_g),LgcM.ins.getActorById(p_g.id,Engine2d.ActorTypeDefine.PLAYER).setNameTxtVisible(!0)},e.prototype.getRedPoint=function(p_l){if(!p_k.instance.checkSystemOpenByName("gymkhanaPanel"))return!1;if(p_l){var p_g=e.instance.lastTime+Config.global[1804].i_info-SyncTime.serverTime/1e3;return 0<this.overplusChallengeTime&&p_g<=0||this.redPoint}return this.redPoint},e.prototype.reqGymkhanaCloseNotice=function(){var e=new c2w_arena_close_rank_change_record;DB.instance.query(c2w_arena_close_rank_change_record,e)},e.prototype.onGymkhanaInfo=function(e){Ibn(e,this,LED,l_r)},e.prototype.onGetShopTime=function(e){var p_l=[];for(var p_g in Config.gymkhana_gymkhanaShop){var b_s=new gymkhanaShopInfoVo;for(var d_u in b_s.Id=Config.gymkhana_gymkhanaShop[p_g].id,e.item_list)e.item_list[d_u].id==b_s.Id&&b_s.initTimesData(e.item_list[d_u]);for(var b_e in e.buy_list)e.buy_list[b_e].id==b_s.Id&&b_s.initLimitTimeData(e.buy_list[b_e]);p_l.push(b_s)}LED.event(l_r.GYMKHANA_SHOP,[p_l])},e.prototype.getConfigMax=function(e){return 0<e.buyLimit?e.buyLimit:e.dayNum},e.prototype.countHp=function(e){return e==b_p.playerId?LgcM.ins.heroVo.hpUpper:this._fightPb.tMaxHp},e.prototype.sceneChange=function(){if(this._fightPb){var e=Config.map[b_p.mapID];!e||e.funType!==MapFunType.PVP||"asyncpk"!=e.impl&&"arena"!=e.impl&&"minewar"!=e.impl&&"minewar_cross"!=e.impl?UI.gymkhanaPkPanel.close():(MineModel.instance.autoOpenMine?(MineModel.instance.autoOpenMine=!1,UI.MineDetail.close(),b_p.registerAutoOpenPanel(UI.MineView,b_p.lastMapID)):b_p.registerAutoOpenPanel(UI.gymkhanaPanel,b_p.lastMapID),UI.gymkhanaPkPanel.open(),this.createActors(this._fightPb),this.initOneselfActors())}},e.prototype.reqGymkhanaBuy=function(e,p_l){var p_g=new c2w_arena_exchange_buy_req;p_g.count=p_l,p_g.id=e,DB.instance.query(c2w_arena_exchange_buy_req,p_g)},e.prototype.onRecordInfo=function(e){Eiu(e,LED,l_r)},e.prototype.RenderBox=function(e,p_l){var p_g=e.numChildren;if(!(9999<p_l))for(var b_s=p_l.toString(),d_u=0;d_u<p_g;d_u++){var b_e=e.getChildAt(d_u);b_e&&(d_u>=b_s.length?b_e.visible=!1:(b_e.visible=!0,b_e.index=parseInt(b_s[d_u])))}},e.prototype.reqGymkhanaChallengeTime=function(e){var p_l=new c2m_arena_buy_vip_count;p_l.count=e,DB.instance.query(c2m_arena_buy_vip_count,p_l)},e.prototype.getChallengeBaseReward=function(){return Yph()},e.prototype.countTargetDamage=function(e,p_l,p_g){LgcM.ins.getActorStdInfoById(e);var b_s=LgcM.ins.getActorStdInfoById(p_l),d_u=0;if(this._fightPb.winPid==e)d_u=b_s.hpUpper/10*1;else if(d_u=1*(b_s.hpUpper-this._fightPb.winLeftHp)/10,b_s.hp-d_u<this._fightPb.winLeftHp)return b_s.hp>this._fightPb.winLeftHp?b_s.hp-this._fightPb.winLeftHp:0;return d_u},e.prototype.reqQuitScence=function(){var e=new c2m_arena_fight_end;UI.gymkhanaPkPanel.close(),DB.instance.query(c2m_arena_fight_end,e)},e.prototype.reqGymkhanaRoleInfo=function(e){Avs(e,n_d)},e.prototype.onGetRed=function(e){Szr(e,this,LED,l_r)},e}(),GuildPvpModel=function(){function e(){this.mirrorVos=[],this.killNum=0,this.cityReward=[],this.resultInfo=[],this.fightStartHp=[],this.killTarget=0,this.startActTime=0,this.endActTime=0,this.guardUpLvTime=0,this.firstOpenRed=!0,this.dispatchCount=0,this.showTip=0}return Object.defineProperty(e,"ins",{get:function(){return this._ins||(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cityVos",{get:function(){return null==this._cityVos&&(this._cityVos={}),this._cityVos},enumerable:!0,configurable:!0}),e.prototype.getCityVo=function(e){return Kbb(e,this)},e.prototype.getCaptureLimit=function(e){return Mpa(e,Config,GlobalDefine)},Object.defineProperty(e.prototype,"mirrEmployVos",{get:function(){if(null==this._mirrEmployVos)for(var e in this._mirrEmployVos=new Array,Config.guildPvp_cloneHire){var p_l=Config.guildPvp_cloneHire[e],p_g=new GMirrorPropVo;p_g.setProp(p_l.id,!0),this._mirrEmployVos.push(p_g)}return this._mirrEmployVos},enumerable:!0,configurable:!0}),e.prototype.getMirrVoById=function(e,p_l){void 0===p_l&&(p_l=!1);var p_g=this.mirrorVos;for(var b_s in p_g)if(p_g[b_s].cloneId==e&&p_g[b_s].isEmploy==p_l)return p_g[b_s]},e.prototype.isRedPoint=function(e){void 0===e&&(e=!0);var p_l=!1;return e&&(p_l=this.firstOpenRed),this.rewardRed&&(1==this.rewardRed.kill?p_l=!0:1==this.rewardRed.node&&(p_l=!0)),p_l},e.prototype.isCloneAttack=function(){return Wvc(this)},e.prototype.getSelfStateInCity=function(e){return Uho(e,this)},e.prototype.getCityCfgs=function(e){if(void 0===e&&(e=!1),!this.cityCfgs)for(var p_l in this.cityCfgs=[],Config.guildPvp_guildPvpHolds){var p_g=Config.guildPvp_guildPvpHolds[p_l];(e&&1==p_g.type||1!=p_g.type)&&this.cityCfgs.push(p_g)}return this.cityCfgs},e.prototype.targetState=function(e){if(!e)return 2;var p_l=this.isTargetRewardById(e.id)?2:0;return 0==p_l&&(p_l=e.aim<=this.killNum?0:1),p_l},e.prototype.isOpenAct=function(){return Config.global[GlobalDefine.guildPvp_open].t_info[0]<=SyncTime.openDay&&p_k.instance.checkSystemOpenByName("GuildPvpMainPanel")},e.prototype.getInvalidisMirror=function(){var e=[];for(var p_l in this.mirrorVos)this.mirrorVos[p_l].hp<this.mirrorVos[p_l].hpUpper&&e.push(this.mirrorVos[p_l]);return e},e.prototype.protocolToModel=function(e){var p_l=[];for(var p_g in e)if(0<e[p_g].num){var b_s=new ModuleItemVO;b_s.id=e[p_g].id,b_s.amount=e[p_g].num,p_l.push(b_s)}return p_l},e.prototype.isHaveEmployRed=function(){return Izj(this)},e.prototype.getMirrorsByCityId=function(e,p_l){void 0===p_l&&(p_l=4);var p_g=[];for(var b_s in this.mirrorVos)this.mirrorVos[b_s].cityId==e&&p_g.push(this.mirrorVos[b_s]);for(var d_u=p_g.length;d_u<p_l;d_u++)p_g.push(null);return p_g},e.prototype.isTargetRewardById=function(e){return 0!=this.killTarget&&1==(1&this.killTarget>>e-1)},e.prototype.getResultInfo=function(e,p_l){return void 0===p_l&&(p_l=!1),p_l?this.resultInfo.pop():this.resultInfo[e]},e.prototype.getActTime=function(){var e=Config.global[GlobalDefine.guildPvp_activityTime],p_l=e.t_info[0].split(":"),p_g=e.t_info[1].split(":");return Utils.$("{1}:{2}-{3}:{4}",p_l[0],p_l[2],p_g[0],p_g[2])},e.prototype.dispatchChange=function(e){void 0===e&&(e=1),this.dispatchCount+=e},e.prototype.getMirrorEmployCfg=function(e){return Wfo(e,this)},e.prototype.isAttCityLimit=function(e){var p_l=this.getSelfCitys();if(p_l.length<=0)return!0;for(var p_g in p_l){var b_s=p_l[p_g];if(b_s&&this.isCheckNear(b_s.cityId,e))return!0}return!1},e.prototype.isCheckNear=function(e,p_l){return Gnh(e,p_l,Config)},e.prototype.isCheckActOpenTime=function(){var e=Config.global[GlobalDefine.guildPvp_activityTime].t_info,p_l=Config.Utils.parseStrTime(e[0]),p_g=Config.Utils.parseStrTime(e[1]),b_s=SyncTime.serverTime/1e3;return p_l<=b_s&&b_s<=p_g},e.prototype.countDayNum=function(){return Irl(Utils,this,SyncTime)},e.prototype.getDaedMirrorInCity=function(e){var p_l=[];for(var p_g in this.mirrorVos){var b_s=this.mirrorVos[p_g];b_s.hp<b_s.hpUpper&&p_l.push(this.mirrorVos[p_g])}return p_l},e.prototype.isOccupyLimit=function(p_l){return Mcr(p_l,Config,this,e)},e.prototype.getSelfCitys=function(){var e=[],p_l=GuildModel.instance.guildInfo;for(var p_g in this.cityVos){var b_s=this.cityVos[p_g];p_l&&b_s.captureGuild.guildId==p_l.id&&e.push(b_s)}return e},e.prototype.getMulEndTime=function(){var e=0,p_l=new Date(SyncTime.serverTime),p_g=new Date(SyncTime.serverTime),b_s=null;for(var d_u in Config.guildPvp_multipleReward){var b_e=Config.guildPvp_multipleReward[d_u],d_m=Config.guildPvp_multipleReward[parseInt(d_u)+1];d_m=d_m||Config.guildPvp_multipleReward[1];var d_w=b_e.startTime.split(":"),f_t=b_e.endTime.split(":");if(!(d_w.length<0||f_t.length<0)){p_l.setHours(parseInt(d_w[0]),parseInt(d_w[1]),parseInt(d_w[2])),p_g.setHours(parseInt(f_t[0]),parseInt(f_t[1]),parseInt(f_t[2]));var v_z=p_l.getTime(),d_h=p_g.getTime();if(SyncTime.serverTime>=v_z&&SyncTime.serverTime<=d_h){b_s=d_m;break}if(SyncTime.serverTime<v_z){b_s=b_e;break}SyncTime.serverTime>=d_h&&(b_s=d_m)}}return b_s&&(d_w=b_s.startTime.split(":"),p_l.setHours(parseInt(d_w[0]),parseInt(d_w[1]),parseInt(d_w[2])),(e=p_l.getTime())<SyncTime.serverTime&&(e+=864e5)),e},e.prototype.getSelfCitysByType=function(e){var p_l=[],p_g=GuildModel.instance.guildInfo;for(var b_s in this.cityVos){var d_u=this.cityVos[b_s];Config.guildPvp_guildPvpHolds[d_u.cityId].type==e&&p_g&&d_u.captureGuild.guildId==p_g.id&&0!=p_g.id&&p_l.push(d_u)}return p_l},e.prototype.clinetInfoToProInfo=function(e,p_l,p_g){void 0===p_l&&(p_l=!0),void 0===p_g&&(p_g=!1);var b_s=[],d_u=0;for(var b_e in e)if(e[b_e]){var d_m=new x_guildPvp_clone_type;d_m.cloneId=e[b_e].cloneId,d_m.isHire=e[b_e].isEmploy?1:2,p_l&&(e[b_e].isInterimDisp=!1),(p_g&&e[b_e].isDed&&1!=e[b_e].state||1==e[b_e].state)&&(d_u+=e[b_e].fightNum*Config.global[GlobalDefine.guildPvp_troopConsume].i_info/1e4),b_s.push(d_m)}return p_g&&(d_u=Math.floor(d_u),b_p.checkCoin(2,d_u)||(b_s.length=0)),[b_s,d_u]},e.prototype.isShowTip=function(){return Ajm(this)},e.isNeed=2,e}(),GMirrorPropVo=function(){function e(){this.attack=0,this.defense=0,this.armorBreak=0,this.hp=0,this.hpUpper=0,this.attack=0,this.armorBreak=0,this.fClothes=0,this.fWeapon=0,this.defense=0,this.isEmploy=!1,this.fWeapon=0,this.state=1,this.cityId=0,this.lv=1,this.isEmployed=!1,this.propArr=[],this.isInterimDisp=!1,this.pos=-1,this.isDed=!1,this.fightNum=0,this.cloneType=0}return e.prototype.setData=function(e,p_l){void 0===p_l&&(p_l=!1),this.hp=e.hp,this.hpUpper=e.hpUpper,this.state=e.state,this.lv=e.cloneLv,this.cityId=e.nodeId,this.isEmployed=!0,this.pos=e.listIdx,this.isDed=1==e.die,UIM.instance.isOpenWin(UI.GuildDispatchPlayer)||(this.isInterimDisp=!1),this.setProp(e.cloneId,p_l)},e.prototype.setProp=function(e,p_l){void 0===p_l&&(p_l=!1),this.isEmploy=p_l;var p_g=0;this.cloneId=e;var b_s="";if(p_l){var d_u=LgcM.ins.heroVo,b_e=0;switch(p_g=(d_m=Config.guildPvp_cloneHire[e]).type){case MirrorPropType.armorBreak:b_e=d_u.armorBreak*d_m.propRatio/1e4,b_s="armorBreak";break;case MirrorPropType.attack:b_e=d_u.attack*d_m.propRatio/1e4,b_s="attack";break;case MirrorPropType.defense:b_e=d_u.defense*d_m.propRatio/1e4,b_s="defense";break;case MirrorPropType.hpUpper:b_e=d_u.hpUpper*d_m.propRatio/1e4,b_s="hpUpper"}this.fightNum=b_p.calPropFight(b_p.getPropInfos([[b_s,b_e]])),0==this.hpUpper&&(this.hpUpper=this.fightNum),b_e=Math.floor(this.fightNum/20),this.attack=b_e,this.armorBreak=b_e,this.defense=b_e}else{var d_m,d_w=MirrorSelfModel.ins.getSelfInfoMap[this.cloneId];if(!d_w)return;this.fightNum=MirrorSelfModel.ins.getBodyFightById(this.cloneId),this.fClothes=d_w.partList[MirrorSelfEnum.Fashion].id,this.fWeapon=d_w.partList[MirrorSelfEnum.FWeapon].id,p_g=(d_m=Config.clone_clone[e]).type}this.cloneType=p_g},e.prototype.countReliveCoin=function(){return Wvu(Config,GlobalDefine,this)},e.prototype.countReliveTime=function(){return Eft(this,Config,GlobalDefine)},e.prototype.isCanDispatch=function(){return Sko(this,Config,GlobalDefine)},e}(),CityVo=function(){function e(){this.cityId=0,this.state=0,this.stateTime=0,this.defNum=0,this.mul=0,this.defLv=0}return e.prototype.setData=function(e){Gbj(e,this)},e.prototype.ownershipState=function(){var e=GuildModel.instance.guildInfo;return this.captureGuild&&0==this.captureGuild.guildId?0:e&&e.id==this.captureGuild.guildId?2:1},e.prototype.stateStr=function(){var e="";switch(this.state){case 1:e=(j_x("183_197"));break;case 2:e=(j_x("2105_383_283"));break;case 3:e=(j_x("383_832_283"));break;case 4:e=(j_x("2345_383_283"))}return e},e.prototype.guildName=function(e,p_l){return void 0===p_l&&(p_l=""),e?"s."+e.guildSvrId+" "+e.guildName:p_l},e}(),GuildPvpControl=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this._ins||(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return GuildPvpModel.ins},enumerable:!0,configurable:!0}),e.prototype.reqInfo=function(){Exq(this)},e.prototype.addEventListener=function(){DB.instance.on(q2c_guildPvp_node_info.opcode.toString(),this,this.onUpdateInfo),DB.instance.on(q2c_guildPvp_clone_info.opcode.toString(),this,this.onUpdateMirrorInfo),DB.instance.on(q2c_guildPvp_node_reward_info.opcode.toString(),this,this.onUpdateCityRewardInfo),DB.instance.on(q2c_guildPvp_node_reward_red.opcode.toString(),this,this.onUpdateRewardRed),DB.instance.on(q2c_guildPvp_node_reward_get.opcode.toString(),this,this.onUpdateCityRewardState),DB.instance.on(q2c_guildPvp_clone_hire.opcode.toString(),this,this.onUpdateEmployInfo),DB.instance.on(q2c_guildPvp_node_fight_info.opcode.toString(),this,this.onUpdateCityFightInfo),DB.instance.on(q2c_guildPvp_node_now_fight_info.opcode.toString(),this,this.onUpdatePlayerFightInfo),DB.instance.on(q2c_guildPvp_node_defense_info.opcode.toString(),this,this.onCombatTroopsDetails),DB.instance.on(q2c_guildPvp_kill_info.opcode.toString(),this,this.onKillTargetInfo),DB.instance.on(q2c_guildPvp_node_declare_war.opcode.toString(),this,this.onDeclareWarCity),DB.instance.on(q2c_guildPvp_one_node_info.opcode.toString(),this,this.onUpdateCity),DB.instance.on(q2c_guildPvp_node_fight_end_reward.opcode.toString(),this,this.onFigthResultInfo),DB.instance.on(q2c_guildPvp_node_fight_reward.opcode.toString(),this,this.onUpdateResultInfo),DB.instance.on(q2c_guildPvp_node_be_attacked.opcode.toString(),this,this.onShowTip)},e.prototype.reqGetKillReward=function(e){var p_l=new c2q_guildPvp_kill_reward_get;p_l.id=e,DB.instance.query(c2q_guildPvp_kill_reward_get,p_l)},e.prototype.onUpdateCity=function(e){var p_l=this.model.cityVos,p_g=p_l[e.node.nodeId]||new CityVo;1==p_g.state&&2==e.node.state&&b_p.broadcastNotice((j_x("2105_383_402")+j_x(2142))),p_g.setData(e.node),p_l[e.node.nodeId]=p_g,LED.event(l_r.GUILD_CITY_INFO)},e.btnRed=function(e,p_l){var p_g=e._childs[0];p_g&&(p_g.visible=p_l)},e.prototype.reqCombatTroopsDetails=function(e){var p_l=new c2q_guildPvp_node_defense_info;p_l.nodeId=e,DB.instance.query(c2q_guildPvp_node_defense_info,p_l)},e.prototype.onCombatTroopsDetails=function(e){Awe(e,LED,l_r)},e.prototype.onDeclareWarCity=function(e){Gly(e,this,LED,l_r)},e.prototype.onFigthResultInfo=function(p_l){this.reqOneCityInfo(p_l.info.nodeId),e.pkOpenDate&&e.pkOpenDate.cityId==p_l.info.nodeId&&(this.model.resultInfo.push(p_l.info),UI.GuildPvpResultPanel.open(this.model.getResultInfo(0,!0)))},e.prototype.reqUpdateInfo=function(){var e=new c2q_guildPvp_node_info;DB.instance.query(c2q_guildPvp_node_info,e)},e.prototype.reqResultReward=function(e,p_l){var p_g=new c2q_guildPvp_node_fight_reward_get;p_g.nodeId=e,p_g.time=p_l,DB.instance.query(c2q_guildPvp_node_fight_reward_get,p_g)},e.prototype.onUpdatePlayerFightInfo=function(e){Qol(e,this,LED,l_r)},e.prototype.reqDispatchPlayer=function(e,p_l,p_g){if(!e||e.length<0)return!1;var b_s=new c2w_guildPvp_node_dispatch;b_s.cloneArr=e,b_s.type=p_l,b_s.nodeId=p_g,DB.instance.query(c2w_guildPvp_node_dispatch,b_s)},e.prototype.onShowTip=function(e){Cen(e,this,LED,l_r)},e.prototype.onUpdateCityRewardInfo=function(e){for(var p_l in this.model.cityReward.length=0,e.rewards){var p_g=new ModuleItemVO;p_g.id=e.rewards[p_l].id,p_g.amount=e.rewards[p_l].num,this.model.cityReward.push(p_g)}LED.event(l_r.GUILD_CITY_REWARD)},e.prototype.onUpdateCityFightInfo=function(e){Ias(e,this,LED,l_r)},e.prototype.reqCityRewardRed=function(){var e=new c2q_guildPvp_node_reward_red;DB.instance.query(c2q_guildPvp_node_reward_red,e)},e.prototype.reqCityFightInfo=function(e){var p_l=new c2q_guildPvp_node_fight_info;p_l.nodeId=e,DB.instance.query(c2q_guildPvp_node_fight_info,p_l)},e.prototype.reqMirrorInfo=function(){var e=new c2q_guildPvp_clone_info;DB.instance.query(c2q_guildPvp_clone_info,e)},e.prototype.reqDeclareWarCity=function(e){var p_l=new c2q_guildPvp_node_declare_war;p_l.nodeId=e,DB.instance.query(c2q_guildPvp_node_declare_war,p_l)},e.prototype.reqPlayerFightInfo=function(e){var p_l=new c2q_guildPvp_node_now_fight_info;p_l.nodeId=e,DB.instance.query(c2q_guildPvp_node_now_fight_info,p_l)},e.prototype.onUpdateInfo=function(e){var p_l=this.model.cityVos;for(var p_g in e.nodes){var b_s=e.nodes[p_g],d_u=p_l[b_s.nodeId]||new CityVo;d_u.setData(b_s),p_l[b_s.nodeId]=d_u}this.model.startActTime=e.openTime,this.model.endActTime=e.endTime,this.model.guardUpLvTime=e.guardUpLvTime,LED.event(l_r.GUILD_CITYS_INFO)},e.prototype.reqOneCityInfo=function(e){var p_l=new c2q_guildPvp_one_node_info;p_l.nodeId=e,DB.instance.query(c2q_guildPvp_one_node_info,p_l)},e.prototype.onUpdateEmployInfo=function(e){var p_l=e.cloneInfo,p_g=1==p_l.isHire,b_s=new GMirrorPropVo;b_s.setData(p_l,p_g),GuildPvpModel.ins.mirrorVos.push(b_s),p_g&&(GuildPvpModel.ins.getMirrorEmployCfg(p_l.cloneId).isEmployed=!0,b_p.broadcastNotice((j_x("946_2387_402")+j_x(2142)))),LED.event(l_r.GUILD_EMPLOY_INFO)},e.prototype.reqCityRewardInfo=function(){var e=new c2q_guildPvp_node_reward_info;DB.instance.query(c2q_guildPvp_node_reward_info,e)},e.prototype.onUpdateMirrorInfo=function(e){var p_l=this.model.mirrorVos;for(var p_g in e.cloneArr){var b_s=e.cloneArr[p_g],d_u=1==b_s.isHire,b_e=this.model.getMirrVoById(b_s.cloneId,d_u);b_e||(b_e=new GMirrorPropVo,p_l.push(b_e)),b_e.setData(b_s,d_u),d_u&&(GuildPvpModel.ins.getMirrorEmployCfg(b_s.cloneId).isEmployed=!0)}LED.event(l_r.GUILD_CLONE_INFO)},e.prototype.onUpdateRewardRed=function(e){Urd(e,this,LED,l_r)},e.prototype.onKillTargetInfo=function(e){Sbh(e,this,LED,l_r)},e.prototype.reqWithdrawPlayer=function(e){var p_l=this.model.getMirrorsByCityId(e,0);if(p_l&&!(p_l.length<0)){var p_g=this.model.clinetInfoToProInfo(p_l);if(!(p_g[0].length<=0)){var b_s=new c2q_guildPvp_node_retreat;b_s.cloneArr=p_g[0],DB.instance.query(c2q_guildPvp_node_retreat,b_s)}}},e.rewardToHTML=function(e,p_l){void 0===p_l&&(p_l="<br>");var p_g="";if(e){var b_s=Config.CItem(e[0]);b_s&&(p_g=Utils.setImg(Resource.ResUrl.getIconUrl(b_s.icon),30,30)+p_l+e[1]+(j_x(844)+"/"+j_x(1702)))}return p_g},e.prototype.reqRecoveryHp=function(e){if(e&&!(e.length<0)){var p_l=this.model.clinetInfoToProInfo(e,!1);if(!(p_l[0].length<=0)){var p_g=new c2q_guildPvp_node_recovery;p_g.cloneArr=p_l[0],DB.instance.query(c2q_guildPvp_node_recovery,p_g)}}},e.prototype.onUpdateResultInfo=function(e){this.model.resultInfo=this.model.resultInfo.concat(e.arr),UIM.instance.isOpenWin(UI.GuildPvpMainPanel)&&UI.GuildPvpResultPanel.open(this.model.getResultInfo(0,!0))},e.prototype.onUpdateCityRewardState=function(e){Sxc(e,LED,l_r)},e.prototype.reqEmployMirror=function(e){var p_l=new c2q_guildPvp_clone_hire;p_l.id=e,DB.instance.query(c2q_guildPvp_clone_hire,p_l)},e.prototype.reqKillTarget=function(){var e=new c2q_guildPvp_kill_info;DB.instance.query(c2q_guildPvp_kill_info,e)},e.prototype.reqCityGetReward=function(){var e=new c2q_guildPvp_node_reward_get;DB.instance.query(c2q_guildPvp_node_reward_get,e)},e.prototype.reqGiveUpCity=function(e){var p_l=new c2w_guildPvp_node_discard;p_l.nodeId=e,DB.instance.query(c2w_guildPvp_node_discard,p_l)},e.cityUrl="res/ui/guildPvp/",e}(),GuildMemberVO=function(){function e(){}return e.prototype.updateMemberInfo=function(e){Ado(e,this)},e.prototype.updateCheckinInfo=function(e){Szx(e,this)},e}(),GuildInfoVO=function(){function e(){}return e.prototype.updateGuildInfo=function(e){Ekb(e,this)},e}(),GuildOfficeDefine=function(){function e(){}return e.HUIZHANG=1,e.ZHANGLAO=2,e.HUFA=3,e.ZHENCHUAN=4,e.CHENGYUAN=5,e.managerOfficeList=[e.HUIZHANG,e.HUIZHANG,e.HUFA],e}(),PayGuildBossOpen,SetBossOpenType,GuildModel=function(){function e(){this.autoOpenBoss={},this.guildCurrentBoss=1,this.isInfo=!1,this._myScore=0,this._totalSize=10,this._useSize=0,this._repositoryList=[],this._repositoryRecordList=[],this._repositoryData={},this._progress=0,this.hasRedTip=!1}return e.prototype.initGuildList=function(e){Uma(e,this)},e.prototype.delMemberByID=function(e){var p_l=this.guildMembers||[];for(var p_g in p_l)if(p_l[p_g].pid===e){p_l.splice(parseInt(p_g),1);break}},e.prototype.updateGuildInfo=function(e){this.guildInfo&&(this.guildInfo.id=e.id,this.guildInfo.level=e.level,this.guildInfo.money=e.money,this.guildInfo.rank=e.rank,this.guildInfo.wealth=e.wealth)},e.prototype.updateGuildMember=function(e){if(this.guildInfo){var p_l=this.getMemberByID(e.pid);p_l||(p_l=new GuildMemberVO,this.guildMembers.push(p_l)),p_l.pid=e.pid,p_l.level=e.level,p_l.fighting=e.fighting,p_l.offlineTime=e.offlineTime,p_l.online=e.online,p_l.contribution=e.contribution}},e.prototype.getMemberByID=function(e){return Uzd(e,this)},e.prototype.canOpenStronghold=function(e,p_l){var p_g=Config.guild_guildBoss[p_l],b_s=LgcM.ins.heroVo;return e==PayGuildBossOpen.money?this.guildInfo.money>=p_g.consume3:e!=PayGuildBossOpen.gold||b_s.gold>=p_g.consume3},e.prototype.initGuildInfo=function(p_l){(!this.guildInfo||0==this.guildInfo.id)&&0<p_l.id&&(DB.instance.query(c2w_join_list,new c2w_join_list),DB.instance.query(c2w_guild_checkin_info,new c2w_guild_checkin_info),e.reqAuctionList(1),e.reqAuctionList(2),DB.instance.query(c2w_guil_help_info,new c2w_guil_help_info),DB.instance.query(c2w_guild_help_list,new c2w_guild_help_list),DB.instance.query(c2w_guild_help_my_list,new c2w_guild_help_my_list),DB.instance.query(c2w_guild_boss_list,{})),this.guildInfo=new GuildInfoVO,this.guildInfo.updateGuildInfo(p_l),this.guildMembers=[];var p_g=p_l.guild_member||[];for(var b_s in p_g){var d_u=new GuildMemberVO;d_u.updateMemberInfo(p_g[b_s]),this.guildMembers.push(d_u)}0!=this.guildPreLevel&&0!=p_l.id||(this.guildPreLevel=p_l.level)},e.reqAuctionList=function(e){var p_l=new c2w_guild_auction_list;p_l.type=e,DB.instance.query(c2w_guild_auction_list,p_l)},e.prototype.bossState=function(e){var p_l=0;return e&&(p_l=1==e.state?1:0==e.state?4==e.mode||5==e.mode?1:0:2),p_l},e.prototype.toAccessTips=function(e){if(e==PayGuildBossOpen.money)r_f.instance.isWindow(93);else{if(e!=PayGuildBossOpen.gold)return;r_f.instance.isWindow(1)}},Object.defineProperty(e.prototype,"hasGuild",{get:function(){return!!this.guildInfo&&0!=this.guildInfo.id},enumerable:!0,configurable:!0}),e.reqJoinGuild=function(e){var p_l=new c2w_join_guild;p_l.id=e,DB.instance.query(c2w_join_guild,p_l)},e.prototype.reqSureHelpOther=function(e){var p_l=new c2w_guild_help_assist;p_l.id=e[0],DB.instance.query(c2w_guild_help_assist,p_l)},Object.defineProperty(e.prototype,"guildInfos",{get:function(){return this.hasGuild?this.guildInfo:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ctrbItems",{get:function(){var e=BagModel.instance.getItemInfosByBagType(BagTypeDefine.BAG_TYPE_ITEM),p_l=[];for(var p_g in e)Config.guild_guildContribute[e[p_g].id]&&p_l.push(e[p_g]);return p_l},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkRpGive",{get:function(){return 0<this.ctrbItems.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkRpHall",{get:function(){return this.requestList&&0<this.requestList.length},enumerable:!0,configurable:!0}),e.prototype.getConfigMax=function(e){var p_l=0;if(e.guildLvBuyNum&&0<e.guildLvBuyNum.length){var p_g=e.guildLvBuyNum.length-1,b_s=this.guildInfo.level>p_g?e.guildLvBuyNum[p_g]:e.guildLvBuyNum[this.guildInfo.level-1];p_l=e.dayNum+b_s}return p_l},e.prototype.getBuyMax=function(e){return Gyc(e,this)},e.prototype.getExchangeNum=function(e){if(this.exchangeInfo){var p_l=this.exchangeInfo[e];if(p_l)return p_l.count}return 0},Object.defineProperty(e.prototype,"checkRpCheckin",{get:function(){return this.checkinInfo&&(0==this.checkinInfo.mode||this.hasCheckinReward())},enumerable:!0,configurable:!0}),e.prototype.hasCheckinReward=function(e){if(void 0===e&&(e=0),!this.checkinInfo)return!1;var p_l=this.checkinInfo.gift_box||[];for(var p_g in Config.guild_guildCheckinReward){var b_s=Config.guild_guildCheckinReward[p_g];if((0==e||b_s.id==e)&&b_s.num<=this._progress){var d_u=!1;for(var b_e in p_l)p_l[b_e].index==b_s.id&&1==p_l[b_e].reward&&(d_u=!0);if(!d_u)return!0}}return!1},e.prototype.countAutoGuildBoss=function(){for(var e in this.autoOpenBoss={},this.bossList){var p_l=this.bossList[e];this.autoOpenBoss[p_l.id]=p_l.autoOpenMode}},e.prototype.countAutoBossConsume=function(e){var p_l,p_g=((p_l={})[SetBossOpenType.gold]=0,p_l[SetBossOpenType.money]=0,p_l);for(var b_s in e){var d_u=e[Config.guild_guildBoss[b_s].id],b_e=this.autoOpenBoss[Config.guild_guildBoss[b_s].id],d_m=Config.guild_guildBoss[b_s].consume2[0][1],d_w=Config.guild_guildBoss[b_s].consume3;if(d_u&&0<d_u){if(b_e&&d_u==b_e)continue;d_u==SetBossOpenType.gold?p_g[SetBossOpenType.gold]+=d_m:d_u==SetBossOpenType.money&&(p_g[SetBossOpenType.money]+=d_w)}}return p_g},Object.defineProperty(e.prototype,"checkRpHelp",{get:function(){return this.hasHelp||this.hasMyHelp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasMyHelp",{get:function(){if(!e.instance.myHelpList)return!0;if(e.instance.myHelpList.length<3)return!0;var p_l=Config.global[GlobalDefine.guild_help_get_help_times].i_info,p_g=0;for(var b_s in e.instance.myHelpList){var d_u=e.instance.myHelpList[b_s];if(0==d_u.id)return!0;if(d_u.progress===Config.guild_guildHelpItem[d_u.itemId].num&&0===d_u.getNum)return!0;d_u.progress>=Config.guild_guildHelpItem[d_u.itemId].num&&(p_g+=1)}return 1!=e.instance.helpInfo.giftState&&p_l<=p_g},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasHelp",{get:function(){if(!e.instance.helpList)return!1;if(e.instance.helpInfo.assistTimes<Config.global[GlobalDefine.guild_help_assist_times].i_info){var p_l=[];for(var p_g in e.instance.helpList)e.instance.helpList[p_g].pid!=b_p.playerId&&p_l.push(e.instance.helpList[p_g]);return 0<p_l.length}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isGuild",{get:function(){return!!(this.guildInfo&&0<this.guildInfo.id)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasBoss",{get:function(){if(!this.bossList)return!1;for(var e in this.bossList){var p_l=this.bossList[e],p_g=p_l.cd-SyncTime.serverTime/1e3,b_s=this.countTimes(p_l);if(1===p_l.state&&0<b_s&&p_g<=0)return!0}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasBossReward",{get:function(){if(!this.bossList)return!1;for(var e in this.bossList){var p_l=this.bossList[e];if(2===p_l.state&&1===p_l.challenge&&0===p_l.rewardState)return!0}return!1},enumerable:!0,configurable:!0}),e.prototype.reqSetAutoOpenBoss=function(e){if(e){var p_l=[],p_g=0;for(var b_s in e){var d_u=parseInt(b_s);if(!(0==e[b_s]||this.autoOpenBoss&&0<this.autoOpenBoss[d_u])){p_g++;var b_e=new x_guild_boss_auto_open_info;b_e.bossId=d_u,b_e.type=e[b_s],p_l.push(b_e)}}if(0<p_g?b_p.broadcastNotice((j_x("910_745_2082")+j_x("1878_155_1186")+j_x("402_2142"))):b_p.broadcastNotice((j_x("814_2082_1878")+j_x("155_1186_1661")+j_x(1502))),!(p_l.length<=0)){var d_m=new c2w_guild_boss_set_auto_open_mode;d_m.list=p_l,DB.instance.query(c2w_guild_boss_set_auto_open_mode,d_m)}}else b_p.broadcastNotice((j_x("814_2082_1878")+j_x("155_1186_1661")+j_x(1502)))},e.prototype.findRepositoryList=function(e){for(var p_l,p_g=this._repositoryList,b_s=0;b_s<p_g.length;b_s++)if((p_l=p_g[b_s]).uuid==e.uuid&&p_l.itemid==e.itemid)return b_s;return-1},e.prototype.reqRepositoryAdd=function(e){var p_l=new c2w_guild_repository_add_item;p_l.list=e,DB.instance.query(c2w_guild_repository_add_item,p_l)},e.prototype.modifyRepository=function(e){Wle(e,this,LED,l_r)},e.prototype.reqGuildInfo=function(){var e=new c2w_guild_info;DB.instance.query(c2w_guild_info,e)},e.prototype.reqRepositoryExchange=function(e){var p_l=new c2w_guild_repository_exchange_item;p_l.list=e,DB.instance.query(c2w_guild_repository_exchange_item,p_l)},e.prototype.reqRepositoryRecord=function(){var e=new c2w_guild_repository_get_history;DB.instance.query(c2w_guild_repository_get_history,e)},e.prototype.reqRepositoryDel=function(e){var p_l=new c2w_guild_repository_delete_item;p_l.list=e,DB.instance.query(c2w_guild_repository_delete_item,p_l)},e.prototype.setRepository=function(e){Yro(e,this,LED,l_r)},e.prototype.setRepositoryRecord=function(e){Chy(e,this,LED,l_r)},e.prototype.reqRepository=function(){var e=new c2w_get_repository;DB.instance.query(c2w_get_repository,e)},e.prototype.updateRepositoryList=function(e,p_l){for(var p_g,b_s,d_u=0;d_u<e.length;d_u++)p_g=e[d_u],2==p_l?(b_s=this.findRepositoryList(p_g),this._repositoryList.splice(b_s,1)):3==p_l?(b_s=this.findRepositoryList(p_g),this._repositoryList[b_s]=p_g):this._repositoryList.push(p_g)},e.prototype.reqGuildExchange=function(){var e=new c2m_guild_exchange_req;e.guildId=this.guildInfo.id,DB.instance.query(c2m_guild_exchange_req,e)},e.prototype.updateRepositoryScore=function(e){Oou(e,this,LED,l_r)},e.prototype.countTimes=function(e){if(!e)return 0;var p_l=Config.guild_guildBoss[e.id];return p_l?p_l.challengeTimes-e.challenge:0},e.prototype.updateRepository=function(e,p_l){Unh(e,p_l,this)},Object.defineProperty(e.prototype,"myScore",{get:function(){return this._myScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useSize",{get:function(){return this._useSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalSize",{get:function(){return this._totalSize},enumerable:!0,configurable:!0}),e.prototype.convertRepositoryItem=function(e){return Cwc(e,r_r)},Object.defineProperty(e.prototype,"repositoryList",{get:function(){return this._repositoryList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"repositoryRecordList",{get:function(){return this._repositoryRecordList||[]},enumerable:!0,configurable:!0}),e.prototype.getSelectData=function(e,p_l){return!!this._repositoryData[p_l+e]&&this._repositoryData[p_l+e]},e.prototype.clearRepository=function(){this._repositoryData={}},e.prototype.getRepositoryScore=function(e,p_l,p_g,b_s){return void 0===b_s&&(b_s=-1),this._repositoryCfg||this.initRepositoryConfig(),(-1!=b_s?this._repositoryCfg[p_g+b_s+"_"+e+"_"+p_l]:this._repositoryCfg[p_g+"_"+e+"_"+p_l])||0},e.prototype.dealComBo=function(e,p_l,p_g,b_s){var d_u,b_e,d_m=Config.state_state,d_w=(j_x("1514_1855_381")+j_x(843)),f_t=r_r.getKvVO(-1,d_w);d_u=[f_t];var v_z,d_h,r_t,t_n=[d_w];for(var f_y in d_m)d_m.hasOwnProperty(f_y)&&(v_z=d_m[f_y],f_t=r_r.getKvVO(v_z.id,v_z.desc),d_u.push(f_t),t_n.push(v_z.desc));e.labels=t_n.join(","),e.selectedIndex=0,e.scrollBarSkin="",e.selectHandler=Laya.Handler.create(p_g,b_s,[e],!1),t_n=[d_w=(j_x("1514_1855_415")+j_x(1621))],b_e=[f_t=r_r.getKvVO(-1,d_w)];for(var p_q=1;p_q<GameDefine.colorDescList.length;p_q++)r_t=GameDefine.colorDescList[p_q],d_h=GameDefine.qualityList[p_q],f_t=r_r.getKvVO(d_h,r_t),b_e.push(f_t),t_n.push(r_t);return p_l.labels=t_n.join(","),p_l.selectedIndex=0,p_l.scrollBarSkin="",p_l.selectHandler=Laya.Handler.create(p_g,b_s,[p_l],!1),[d_u,b_e]},e.prototype.setSelectData=function(e,p_l,p_g){void 0===p_g&&(p_g=!1),this._repositoryData[p_l+e]=p_g},e.prototype.initRepositoryConfig=function(){this._repositoryCfg={};var e,p_l=Config.guild_guildRepository;for(var p_g in p_l)p_l.hasOwnProperty(p_g)&&(e=p_l[p_g],this._repositoryCfg[GuildConstant.score_get+"_"+e.state+"_"+e.quality]=e.gain,this._repositoryCfg[GuildConstant.score_get+"_"+e.star+"_"+e.state+"_"+e.quality]=e.gain,this._repositoryCfg[GuildConstant.score_exchange+"_"+e.state+"_"+e.quality]=e.expend,this._repositoryCfg[GuildConstant.score_exchange+"_"+e.star+"_"+e.state+"_"+e.quality]=e.expend)},e.prototype.getRepositoryItemList=function(e){for(var p_l,p_g=e.length,b_s=[],d_u=0;d_u<p_g;d_u++){var b_e=e[d_u];p_l=r_r.getRepositoryItem(b_e.id,b_e.amount,b_e.uuid),b_s.push(p_l)}return b_s},e.prototype.getRepositoryScoreByID=function(e,p_l){var p_g;return(p_g=Config.CItem(e))?this.getRepositoryScore(p_g.stateLevel,p_g.quality,p_l):0},e.prototype.getItemShowList=function(e,p_l,p_g){var b_s=[],d_u=p_l;if(-1==d_u)b_s=e;else for(var b_e=void 0,d_m=0;d_m<e.length;d_m++){(b_e=e[d_m]).id;var d_w=b_e.cItem;d_w&&d_w.quality==d_u&&b_s.push(b_e)}if(b_s.length<p_g)for(var f_t=p_g-b_s.length,v_z=0;v_z<f_t;v_z++)b_s.push(r_r.getBagInfoVO());return b_s},Object.defineProperty(e.prototype,"isManagerRepository",{get:function(){var e=this.getMemberByID(b_p.playerId);return!(!e||-1==GuildOfficeDefine.managerOfficeList.indexOf(e.office))},enumerable:!0,configurable:!0}),e.prototype.sortList=function(e){Sjs(e,BagModel)},e.instance=new e,e}();!function(e){e[e.gold=3]="gold",e[e.money=4]="money"}(PayGuildBossOpen=PayGuildBossOpen||{}),function(e){e[e.not_set=0]="not_set",e[e.gold=1]="gold",e[e.money=2]="money"}(SetBossOpenType=SetBossOpenType||{});var l_o=function(){function e(){this.init()}return e.prototype.init=function(){DB.instance.on(w2c_get_repository.opcode.toString(),this,this.onRepository),DB.instance.on(w2c_guild_repository_get_history.opcode.toString(),this,this.onRepositoryRecord),DB.instance.on(w2c_repository_modify.opcode.toString(),this,this.onRepositoryModify),DB.instance.on(w2c_guild_repository_add_item.opcode.toString(),this,this.onRepositoryAddItem),DB.instance.on(w2c_guild_repository_exchange_item.opcode.toString(),this,this.onRepositoryExchangeItem)},e.prototype.onRepositoryAddItem=function(e){Gpf(e,b_p,j_x,BroadcastType,GuildModel)},e.prototype.onRepository=function(e){Sio(e,GuildModel)},e.prototype.onRepositoryRecord=function(e){Mij(e,GuildModel)},e.prototype.onRepositoryModify=function(e){Ybh(e,GuildModel)},e.prototype.onRepositoryExchangeItem=function(e){Kde(e,b_p,j_x,BroadcastType,GuildModel)},e.instance=new e,e}(),GuildConstant=function(){function e(){}return e.save_uuid="uuid_",e.save_quality="quality_",e.score_get="score_get",e.score_exchange="score_exchange",e.select_state="select_state_",e.select_quality="select_quality_",e}(),GuideManager=function(){function e(){this._curFuncId=-1}return Object.defineProperty(e.prototype,"curFuncId",{get:function(){return this._curFuncId},set:function(e){this._curFuncId=e},enumerable:!0,configurable:!0}),e.prototype.init=function(){var e,p_l;this._guideVos=[];var p_g=Config.guide_guide;for(var b_s in p_g)(p_l=new b_q).parse(p_g[b_s]),(e=p_l.checkStatus)===GuideRunStatus.Completed?(delete p_g[b_s],p_l=null):(p_l.id=p_g[b_s].id,p_l.initPhase(p_g[b_s].phases),e!==GuideRunStatus.Running||this._curVo||(this._curVo=p_l),this._guideVos.push(p_l));this.initEvents(),this.checkShowGuide()},e.prototype.levelChange=function(){},e.prototype.clearGuide=function(){Izz(UI)},e.prototype.talismanOpenChange=function(){Emy(this)},e.prototype.systemOpen=function(e){Yop(e,this)},e.prototype.acceptTask=function(e){Uxy(e,this)},e.prototype.checkPhaseComplated=function(){if(this._curVo){if(this._curVo.checkPhaseStatus()!=GuideRunStatus.Completed)return!1;this.removeGuideVo(this._curVo.id),this._curVo=null,this.clearGuide()}return!0},e.prototype.showGuideView=function(){if(this._curVo){var e=this.getCurGuidePhaseVo();if(e){if(SystemNoticeManager.instance.isOpening)return void UI.GuidePanel.close();var p_l=e.curStepNode;if(p_l&&(p_l.key===n_a.TASK||p_l.key===n_a.ACTIVITY)&&UIM.instance.checkHasWinOpen())return void UI.GuidePanel.close();UI.GuidePanel.open(e)}}},e.prototype.checkShowGuide=function(e){void 0===e&&(e=!0),this._curVo&&(e?Laya.timer.once(480,this,this.showGuideView):this.showGuideView())},e.prototype.checkIsClick=function(e,p_l,p_g,b_s){void 0===p_g&&(p_g=null),void 0===b_s&&(b_s=!0),this._curVo&&this._curVo.checkIsClick(e,p_l,p_g)&&(this.checkPhaseComplated()||this.checkShowGuide(b_s))},e.prototype.initEvents=function(){Ygx(LED,l_r,this)},e.prototype.stateLvUp=function(e){void 0===e&&(e=null),this.changeGuideData()},e.prototype.changeGuideData=function(){if(SystemNoticeManager.instance.isOpening)UI.GuidePanel.close();else{var e=!1;if(this._guideVos)for(var p_l=void 0,p_g=void 0,b_s=this._guideVos.length-1;0<=b_s;b_s--){if((p_g=(p_l=this._guideVos[b_s]).checkStatus)===GuideRunStatus.Running&&(this._curVo&&p_l.id!=this._curVo.id||!this._curVo)){this.clearGuide(),this._curVo=p_l,e=!0;break}p_g===GuideRunStatus.Completed&&(this._curVo&&this._curVo.id===p_l.id&&(this._curVo=null,this.clearGuide()),this._guideVos.splice(b_s,1))}e&&this._curVo&&this.checkShowGuide()}},e.prototype.talismanChange=function(){Iwn(this)},e.prototype.openWin=function(e){if(this._curVo){if("LilianPanel"===e&&!this._curVo.hasWin(e))return void this.clearGuide();this._curVo.openWin(e),this.checkShowGuide()}},e.prototype.getCurGuidePhaseVo=function(){return this._curVo?this._curVo.curPhaseVo():null},e.prototype.progressTask=function(e){Ofj(e,this)},e.prototype.closeWin=function(e){this._curVo&&(this._curVo.closeWin(e),this.checkShowGuide(!1))},e.prototype.removeGuideVo=function(e){return Smu(e,this)},e.prototype.getTargetComponent=function(e,p_l){var p_g=UIM.instance.getMainUI();if(!p_g)return null;switch(e.key){case n_a.SHORT_CUT:return p_g.getShortcutComponent(e.name);case n_a.CHAT:return p_g.getChatComponent(e.name);case n_a.ACTIVITY:return p_g.getActivityComponentByFuncName(e.name);case n_a.MAIN_LEFT:return p_g.getMainLeftComponent(e.name);case n_a.COMPONENT:case n_a.TAB:case n_a.LIST:case n_a.COMPONENT_CLOSE_BTN:return UIM.instance.getWinComponent(p_l,e.name,e.boxParentName);case n_a.TASK:return p_g.getTaskComponent()}return null},e.instance=new e,e}(),FriendVo=function(){},FriendRecommendVo=function(){Sgb(this)},FriendRequestVo=function(){},FriendBlackVo=function(){},FriendRewardVo=function(){function e(){this.InitData()}return Object.defineProperty(e.prototype,"friendRewardState",{get:function(){var e=Config.friend_friend_activeness[this.id];return 0==this.status&&this.progress>=e.condition[1]?0:1==this.status&&this.progress>=e.condition[1]?2:1},enumerable:!0,configurable:!0}),e.prototype.InitData=function(){Cgh(this)},e}(),ONLINE_STATUE_DEFINE,FriendModel=function(){function e(){this._friendList=new Array,this._requestList=new Array,this._blackList=new Array,this._recommendList=new Array,this._sendAddList=new Array,this._haveNew=!1}return e.prototype.isBlack=function(e){for(var p_l=0,p_g=this._blackList;p_l<p_g.length;p_l++)if(p_g[p_l].pid===e)return!0;return!1},e.prototype.hasRequest=function(){return this._requestList&&0<this._requestList.length},e.prototype.isAlreadyReq=function(e){return Spd(e,this)},e.sortFriend=function(e,p_l){return e.status>p_l.status?1:e.status<p_l.status?-1:e.qinmi>p_l.qinmi?-1:e.qinmi<p_l.qinmi?1:e.combat>p_l.combat?-1:e.combat<p_l.combat?1:e.lv>p_l.lv?-1:e.lv<p_l.lv?1:e.stateLv>p_l.stateLv?-1:e.stateLv<p_l.stateLv?1:0},e.prototype.delRequestById=function(e){if(this._requestList.length)for(var p_l=this._requestList.length,p_g=0;p_g<p_l;p_g++)if(this._requestList[p_g].pid==e)return void this._requestList.splice(p_g,1)},e.sortRecommend=function(e,p_l){return e.isReq&&~p_l.isReq?1:~e.isReq&&p_l.isReq?-1:0},e.reverSortFriend=function(e,p_l){return e.time>p_l.time?1:e.time<p_l.time?-1:void 0},e.prototype.IsThatVeryDay=function(e){var p_l=new Date(1e3*e),p_g=new Date(SyncTime.serverTime);return p_g.getFullYear()==p_l.getFullYear()&&p_g.getDay()==p_l.getDay()&&p_g.getMonth()==p_l.getMonth()},Object.defineProperty(e.prototype,"friendRewardDatas",{get:function(){if(!this._friendRewardDatas)for(var e in this._friendRewardDatas=new Array,Config.friend_friend_activeness){var p_l=new FriendRewardVo,p_g=Config.friend_friend_activeness[e];p_l.id=p_g.id,p_l.progress=0,p_l.status=0,this._friendRewardDatas.push(p_l)}return this._friendRewardDatas},enumerable:!0,configurable:!0}),e.prototype.SortfriendRewardDatas=function(){var e=this.friendRewardDatas;return e.sort((function(e,p_l){return e.friendRewardState==p_l.friendRewardState?e.id-p_l.id:e.friendRewardState-p_l.friendRewardState})),e},e.prototype.reqDelBlack=function(e){var p_l=new c2w_friend_delete_black;p_l.pid=e,DB.instance.query(c2w_friend_delete_black,p_l)},e.prototype.pbGiveGiftCall=function(e){Ozq(e,LED,l_r)},e.prototype.pbfriendReceiveReward=function(e){for(var p_l=0,p_g=this.friendRewardDatas;p_l<p_g.length;p_l++){var b_s=p_g[p_l];b_s.id==e.id&&(b_s.status=1)}LED.event(l_r.FRIEND_UPDATE_REWARD)},e.prototype.reqRecommendList=function(){var e=new c2w_recommend_list;DB.instance.query(c2w_recommend_list,e)},e.prototype.pbRequestList=function(e){for(var p_l in this._requestList=new Array,e.requests){var p_g=new FriendRequestVo,b_s=e.requests[p_l];p_g.pid=b_s.pid,p_g.name=b_s.name,p_g.lv=b_s.lv,p_g.stateLv=b_s.stateLv,p_g.combat=b_s.combat,p_g.entryId=b_s.entryId,p_g.headIcon=b_s.headIcon,p_g.fashionAvatar=b_s.fashionAvatar,this._requestList.push(p_g)}LED.event(l_r.FRIEND_REQUEST_LIST_UPDATE)},e.prototype.reqAddFriend=function(e){var p_l=new c2w_add_friend;p_l.pid=e,DB.instance.query(c2w_add_friend,p_l)},e.prototype.reqAddBlack=function(e){b_p.broadcastNotice((j_x("1300_1409_1653")+j_x("2221_223_2456")+j_x("1674_1511_2263")));var p_l=new c2w_friend_add_black;p_l.pid=e[0],DB.instance.query(c2w_friend_add_black,p_l)},e.prototype.pbRecommendList=function(e){for(var p_l in this._recommendList=new Array,e.recommends){var p_g=new FriendRecommendVo,b_s=e.recommends[p_l];p_g.pid=b_s.pid,p_g.name=b_s.name,p_g.lv=b_s.lv,p_g.stateLv=b_s.stateLv,p_g.combat=b_s.combat,p_g.entryId=b_s.entryId,p_g.headIcon=b_s.headIcon,p_g.fashionAvatar=b_s.fashionAvatar,this._recommendList.push(p_g)}LED.event(l_r.FRIEND_RECOMMEND_LIST_UPDATE)},e.prototype.ParseCfgJump=function(e){if(e&&""!=e){var p_l=e.split(","),p_g=[];if(0<p_l.length)switch(p_l[0]){case"jump1":p_g.push(parseInt(p_l[1])),2<p_l.length&&p_g.push(parseInt(p_l[2]));break;case"jump":default:p_g.push(parseInt(p_l[1]))}return p_g}},e.prototype.reqRequestList=function(){var e=new c2w_request_list;DB.instance.query(c2w_request_list,e)},e.prototype.pbAddReq=function(e){Kko(e,this,LED,l_r)},e.prototype.showForbidRecordTip=function(e,p_l,p_g){var b_s,d_u=Config.global[GlobalDefine.title_bannedTime].i_info,b_e=d_u/3600;b_s=1<=b_e?Utils.$((j_x("68_2032_973")+j_x(166)+"{1}{2}"+j_x("1747_1702")),Utils.setColor(Utils.$("{1}",p_l),"#00802e"),b_e):Utils.$((j_x("68_2032_973")+j_x(166)+"{1}{2}"+j_x("2224_1394")),Utils.setColor(Utils.$("{1}",p_l),"#00802e"),Math.round(d_u/60)),UI.ChatForBidConfimPanel.open(b_s,e,p_g)},e.prototype.pbAddFriend=function(e){for(var p_l in this._friendList)if(this._friendList[p_l].pid===e.friend.base.pid)return;var p_g=new FriendVo;p_g.pid=e.friend.base.pid,p_g.name=e.friend.base.name,p_g.lv=e.friend.base.lv,p_g.stateLv=e.friend.base.stateLv,p_g.stateSubLv=e.friend.base.stateSubLv,p_g.combat=e.friend.base.combat,p_g.entryId=e.friend.base.entryId,p_g.headIcon=e.friend.base.headIcon,p_g.fashionAvatar=e.friend.base.fashionAvatar,p_g.status=e.friend.status,p_g.qinmi=e.friend.qinmi,p_g.relation=e.friend.relation,p_g.time=e.friend.time,p_g.todayAddQinmi=e.friend.todayAddQinmi,p_g.lastAddQinmiTime=e.friend.lastAddQinmiTime,p_g.isDh=e.friend.isDh,this._friendList.push(p_g),LED.event(l_r.FRIEND_FRIEND_LIST_UPDATE,p_g)},e.prototype.reqAcceptFriend=function(e,p_l){var p_g=new c2w_accept_friend;p_g.pid=e,p_g.op=p_l,DB.instance.query(c2w_accept_friend,p_g)},e.prototype.reqReceiveReward=function(e){var p_l=new c2w_friend_activeness_getReward;p_l.id=e,DB.instance.query(c2w_friend_activeness_getReward,p_l)},e.prototype.pbDelFriendReq=function(e){var p_l=0;for(var p_g in this._requestList){if(this._requestList[p_g].pid===e.pid){this._requestList.splice(p_l,1);break}++p_l}LED.event(l_r.FRIEND_REQUEST_LIST_UPDATE)},e.prototype.pbBlackList=function(e){for(var p_l in this._blackList=new Array,e.blacks){var p_g=new FriendBlackVo,b_s=e.blacks[p_l];p_g.pid=b_s.pid,p_g.name=b_s.name,p_g.lv=b_s.lv,p_g.stateLv=b_s.stateLv,p_g.combat=b_s.combat,p_g.entryId=b_s.entryId,p_g.headIcon=b_s.headIcon,p_g.fashionAvatar=b_s.fashionAvatar,p_g.sid=b_s.sid,this._blackList.push(p_g)}LED.event(l_r.FRIEND_BLACK_LIST_UPDATE)},e.prototype.pbRepAddFriend=function(p_l){Ijr(p_l,e,LED,l_r)},e.prototype.pbDelFriend=function(e){var p_l=0;for(var p_g in this._friendList){if(this._friendList[p_g].pid===e.pid){this._friendList.splice(p_l,1);break}++p_l}LED.event(l_r.FRIEND_FRIEND_LIST_UPDATE)},e.prototype.reqBlackList=function(){var e=new c2w_black_list;DB.instance.query(c2w_black_list,e)},e.prototype.pbFriendList=function(e){for(var p_l in this._friendList=new Array,e.friends){var p_g=new FriendVo,b_s=e.friends[p_l];p_g.pid=b_s.base.pid,p_g.name=b_s.base.name,p_g.lv=b_s.base.lv,p_g.stateLv=b_s.base.stateLv,p_g.stateSubLv=b_s.base.stateSubLv,p_g.combat=b_s.base.combat,p_g.entryId=b_s.base.entryId,p_g.headIcon=b_s.base.headIcon,p_g.fashionAvatar=b_s.base.fashionAvatar,p_g.qinmi=b_s.qinmi,p_g.relation=b_s.relation,p_g.status=b_s.status,p_g.time=b_s.time,p_g.todayAddQinmi=b_s.todayAddQinmi,p_g.lastAddQinmiTime=b_s.lastAddQinmiTime,p_g.isDh=b_s.isDh,this._friendList.push(p_g)}LED.event(l_r.FRIEND_FRIEND_LIST_UPDATE),LED.event(l_r.FRIEND_HELP_LIST_UPDATE)},e.prototype.isMyFriend=function(e){return Ibq(e,this)},e.prototype.pbfriendRewardDatas=function(e){for(var p_l in this._friendRewardDatas=new Array,Config.friend_friend_activeness){var p_g=new FriendRewardVo;if(p_g.id=parseInt(p_l),e.list)for(var b_s=0,d_u=e.list;b_s<d_u.length;b_s++){var b_e=d_u[b_s];b_e.id==parseInt(p_l)&&(p_g.progress=b_e.progress,p_g.status=b_e.status)}this._friendRewardDatas.push(p_g)}LED.event(l_r.FRIEND_UPDATE_REWARD)},e.prototype.reqRefreshRecommendList=function(){var e=new c2w_friend_refresh_list;DB.instance.query(c2w_friend_refresh_list,e)},e.prototype.reqFriendRewardList=function(){var e=new c2w_friend_activeness_status;DB.instance.query(c2w_friend_activeness_status,e)},e.prototype.getFriendData=function(e){return Adb(e,this)},e.prototype.showAddBlackTip=function(e){Sbf(e,b_p,j_x,this)},e.prototype.reqDelFriend=function(e){var p_l=new c2w_friend_delete;p_l.pid=e,DB.instance.query(c2w_friend_delete,p_l)},e.prototype.reqFriendList=function(){var e=new c2w_friend_list;DB.instance.query(c2w_friend_list,e)},e.prototype.friendRewardRed=function(){for(var e=0,p_l=this.friendRewardDatas;e<p_l.length;e++)if(0==p_l[e].friendRewardState)return!0;return!1},e.prototype.pbDelBlack=function(e){var p_l=0;for(var p_g in this._blackList){if(this._blackList[p_g].pid===e.pid){this._blackList.splice(p_l,1);break}++p_l}LED.event(l_r.FRIEND_BLACK_LIST_UPDATE)},e.prototype.pbAddBlack=function(e){for(var p_l in this._blackList)if(this._blackList[p_l].pid===e.black.pid)return;var p_g=new FriendBlackVo;p_g.pid=e.black.pid,p_g.lv=e.black.lv,p_g.name=e.black.name,p_g.stateLv=e.black.stateLv,p_g.combat=e.black.combat,p_g.entryId=e.black.entryId,p_g.headIcon=e.black.headIcon,p_g.fashionAvatar=e.black.fashionAvatar,p_g.sid=e.black.sid,this._blackList.push(p_g),LED.event(l_r.FRIEND_BLACK_LIST_UPDATE)},e.prototype.reqFriendGive=function(e,p_l,p_g){var b_s=new c2w_friend_give;b_s.pid=p_l,b_s.id=e,b_s.num=p_g,DB.instance.query(c2w_friend_give,b_s)},e.instance=new e,e}();!function(e){e[e.ONLINE=1]="ONLINE",e[e.OFFLINE=2]="OFFLINE"}(ONLINE_STATUE_DEFINE=ONLINE_STATUE_DEFINE||{});var z_q=function(){function e(){}return e.prototype.setFashionVo=function(e){Aur(e,this)},e.prototype.getActivityTime=function(){return Gzc(this)},e.prototype.getId=function(){return Unf(this)},e.prototype.getGrade=function(){return Mcs(this)},e.prototype.getExtime=function(){return Khr(this)},e.prototype.getInuse=function(){return Iuz(this)},Object.defineProperty(e.prototype,"star",{get:function(){return this.grade},enumerable:!0,configurable:!0}),e}(),FashionType,FashionStatus,FashionUseStatus,FashinonActivityType,FashionModel=function(){function e(){this.fashions=[],this.fashionQinMi=[]}return e.prototype.getFashionsCnf=function(e){if(null!=e){var p_l=Config.fashion_fashion,p_g=[];for(var b_s in p_l)p_l[b_s]&&p_l[b_s].type==e&&p_g.push(p_l[b_s]);return p_g}},e.prototype.onFashionUse=function(e){null!=e&&LED.event(l_r.FASHION_USE,e)},e.prototype.reqFashionList=function(){var e=new c2m_fashion_list;DB.instance.query(c2m_fashion_list,e)},e.prototype.getFashionPropertys=function(e){var p_l,p_g=[];for(var b_s in e)if(p_l=d_v.getPropertyTypeByName(e[b_s][0])){var d_u=new PropInfo;d_u.propOrdinal=p_l.ordinal,d_u.value=e[b_s][1],p_g.push(d_u)}return p_g},e.prototype.redPointWing=function(){var p_l=e.instance.getFashionsCnf(FashionType.wing),p_g=!1;for(var b_s in p_l)if(e.instance.IsRedPoint(p_l[b_s].id)){p_g=!0;break}return p_g},e.prototype.reqUseFashion=function(e,p_l){var p_g=new c2m_fashion_use;p_g.id=e,p_g.type=p_l,DB.instance.query(c2m_fashion_use,p_g)},e.prototype.getBasePropById=function(e){return Ugv(e,this,CharacterProperty)},e.prototype.getFightById=function(e){return Wcf(e,this,b_p)},e.prototype.getFashionVo=function(e){if(!(null==this.fashions&&this.fashions.length<=0)){for(var p_l=0,p_g=this.fashions;p_l<p_g.length;p_l++){var b_s=p_g[p_l];if(b_s.getId()==e)return b_s}return null}},e.prototype.reqFashionQinMi=function(){var e=new c2m_fashion_progress;DB.instance.query(c2m_fashion_progress,e)},e.prototype.canActivity=function(){return Qtq(p_k,FuncDefine,this)},e.prototype.onFashions=function(e){if(null!=e&&e.fashion){this.fashions=[];for(var p_l=0,p_g=e.fashion;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new z_q;d_u.setFashionVo(b_s),this.fashions.push(d_u)}LED.event(l_r.FASHION_LIST,e),LED.event(l_r.RIDE_LIST_UPDATE),LED.event(l_r.HELPER_UPDATE_INFO)}},e.prototype.GetQinMiProgress=function(e){if(!this.fashionQinMi)return 0;for(var p_l=0,p_g=this.fashionQinMi;p_l<p_g.length;p_l++){var b_s=p_g[p_l];if(b_s.id==e)return b_s.progress}return 0},e.prototype.canActivityitem=function(p_l){for(var p_g=0,b_s=e.instance.getFashionsCnf(p_l);p_g<b_s.length;p_g++){var d_u=b_s[p_g],b_e=this.IsRedPoint(d_u.id);if(b_e)return b_e}return!1},e.prototype.IsRedPoint=function(p_l,p_g){void 0===p_g&&(p_g=0);var b_s=Config.fashion_fashion[p_l],d_u=(b_s.active[1][0],e.instance.getFashionVo(b_s.id)),b_e=d_u?d_u.getGrade():1,d_m=(e.instance.isMaxGrade(b_s.id,b_e),!1);if(d_u&&1!=p_g){d_m=SkillModel.instance.isRedPoint(b_s.id,d_u.getGrade(),0,PassiveSkillType.FASHION);var d_w=e.instance.getFashionUpgradeCnf(b_s.id,b_e+1);if(d_w&&b_p.checkConsume(d_w.consume))return!0}else if(2!=p_g&&!d_u)switch(b_s.activityType){case FashinonActivityType.TaskFashion:case FashinonActivityType.Activity:if(BagModel.instance.getItemCountByItemID(b_s.active[1][0][0],BagTypeDefine.BAG_TYPE_ITEM)>=b_s.active[1][0][1])return!0;break;case FashinonActivityType.AffinityDensity:if(e.instance.GetQinMiProgress(b_s.id)>=b_s.active[1])return!0}return d_m},e.prototype.isMaxGrade=function(e,p_l){return Ybw(e,p_l,Config)},e.prototype.getFashionUpgradeCnf=function(e,p_l){for(var p_g in Config.fashion_upgrade)if(Config.fashion_upgrade[p_g].fashionId==e&&Config.fashion_upgrade[p_g].grade==p_l)return Config.fashion_upgrade[p_g]},e.prototype.getActVoByType=function(e,p_l){void 0===p_l&&(p_l=1);var p_g=this.fashions,b_s=[];for(var d_u in p_g){var b_e=Config.fashion_fashion[p_g[d_u].getId()];for(var d_m in e)b_e.propType==e[d_m]&&b_e.type==p_l&&b_s.push(p_g[d_u])}return b_s},e.prototype.reqUpgradeFashion=function(e){var p_l=new c2m_fashion_upgrade;p_l.id=e,DB.instance.query(c2m_fashion_upgrade,p_l)},e.prototype.reqActivityFashion=function(e){var p_l=new c2m_fashion_active;p_l.id=e,DB.instance.query(c2m_fashion_active,p_l)},e.prototype.onFashionActivity=function(e){null!=e&&LED.event(l_r.FASHION_ACTIVITY,e)},e.prototype.canGrade=function(e,p_l){if(this.isMaxGrade(e,p_l))return b_p.broadcastNotice((j_x("1300_1241_1463")+j_x(784))),!1;var p_g=p_l+1,b_s=this.getFashionUpgradeCnf(e,p_g),d_u=b_s.consume[0][0],b_e=b_s.consume[0][1];return!(BagModel.instance.getItemCountByItemID(d_u,BagTypeDefine.BAG_TYPE_ITEM)<b_e&&(r_f.instance.isWindow(d_u),b_p.broadcastNotice((j_x("582_774_50")+j_x("2124_2462_1779"))),1))},e.prototype.getInUseFashionVo=function(e){if(null==this.fashions&&this.fashions.length<=0)return null;for(var p_l=[],p_g=0,b_s=this.fashions;p_g<b_s.length;p_g++){var d_u=b_s[p_g];d_u.getInuse()&&Config.fashion_fashion[d_u.getId()].propType===e&&p_l.push(d_u)}return p_l},e.prototype.onFashionUpgrade=function(e){null!=e&&LED.event(l_r.FASHION_UPGRADE,e)},e.prototype.onFashionQinMi=function(e){Ipd(e,this,LED,l_r)},e.instance=new e,e}();!function(e){e[e.fashion=1]="fashion",e[e.equip=2]="equip",e[e.bubble=3]="bubble",e[e.head=4]="head",e[e.wing=5]="wing"}(FashionType=FashionType||{}),function(e){e[e.unActiviy=1]="unActiviy",e[e.activiy=2]="activiy",e[e.maxDow=3]="maxDow"}(FashionStatus=FashionStatus||{}),function(e){e[e.unuse=0]="unuse",e[e.isuse=1]="isuse"}(FashionUseStatus=FashionUseStatus||{}),function(e){e[e.TaskFashion=1]="TaskFashion",e[e.Activity=2]="Activity",e[e.AffinityDensity=3]="AffinityDensity"}(FashinonActivityType=FashinonActivityType||{});var t_e=function(){function e(){this.showFashionDic={},this.selects=[]}return e.instance=new e,e}(),SouthSkyGateModel=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this._ins||(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attackRemainTime",{get:function(){return this._attackRemainTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rwdRemainTime",{get:function(){return this._rwdRemainTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAttackCd",{get:function(){return this._isAttackCd},set:function(e){this._isAttackCd=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rwdTimes",{get:function(){return this._rwdTimes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rwdBuy",{get:function(){return this._rwdBuy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attackTimes",{get:function(){return this._attackTimes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attackBuy",{get:function(){return this._attackBuy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cloneId",{get:function(){return this._cloneId},set:function(e){this._cloneId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fbId",{get:function(){return this._fbId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sid",{get:function(){return this._sid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serverScore",{get:function(){return this._serverScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"myRank",{get:function(){return this._myRank},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"myScore",{get:function(){return this._myScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rankList",{get:function(){return this._rankList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attackList",{get:function(){return this._attackList},enumerable:!0,configurable:!0}),e.prototype.updateGNInfoData=function(e){Glu(e,this,SyncTime)},e}(),SouthSkyGateControl=function(){function e(){this._redList=[]}return Object.defineProperty(e,"ins",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.addEventListener=function(){DB.instance.on(q2c_guarding_nantianmen_info.opcode.toString(),this,this.onGNTInfo),DB.instance.on(m2c_guarding_nantianmen_attack.opcode.toString(),this,this.updateGNTAttack),DB.instance.on(m2c_query_guarding_nantianmen_format_reply.opcode.toString(),this,this.updateGNTFormatReply),DB.instance.on(q2c_query_guarding_nantianmen_attack_record.opcode.toString(),this,this.updateGNTAttackRecord),DB.instance.on(q2c_query_guarding_nantianmen_defense_record.opcode.toString(),this,this.updateGNTDefenseRecord),DB.instance.on(m2c_guarding_nantianmen_clone.opcode.toString(),this,this.updateGNTClone),DB.instance.on(q2c_be_attack_in_guarding_nantianmen.opcode.toString(),this,this.updateGNTBeAttack),DB.instance.on(q2c_guarding_nantianmen_score_changed.opcode.toString(),this,this.updateScore)},e.prototype.reqGuardingNTInfo=function(){var e=new c2q_guarding_nantianmen_info;DB.instance.query(c2q_guarding_nantianmen_info,e)},e.prototype.updateGNTClone=function(e){Ujg(e,LED,l_r)},e.prototype.addRedImg=function(e){var p_l=!0;for(var p_g in this._redList)e==this._redList[p_g]&&(p_l=!1);p_l&&(this._redList.push(e),this.reqGuardingNTInfo())},e.prototype.updateGNTOpenReq=function(){1==LgcM.ins.heroVo.heavenOpenState&&this.reqGuardingNTInfo()},e.prototype.showOrHideRed=function(e){Elf(e,this)},e.prototype.updateGNTBeAttack=function(e){Qnn(e,UI,j_x,BossTpyeTip)},e.prototype.updateGNTAttack=function(e){Aza(e,LED,l_r)},e.prototype.isActivityOpen=function(){var e;for(var p_l in Config.activity_activity){var p_g=Config.activity_activity[p_l];if(p_g.type==ActivityTypeDefine.CS_guardingNanTianMen){e=p_g;break}}if(e){var b_s=Config.Utils.parseActivityStartTime(e),d_u=Config.Utils.parseActivityEndTime(e),b_e=Math.floor(SyncTime.serverTime/1e3);return b_s<=b_e&&b_e<=d_u}},e.prototype.reqSetGNTClone=function(e){var p_l=new c2m_set_guarding_nantianmen_clone;p_l.cloneId=e,DB.instance.query(c2m_set_guarding_nantianmen_clone,p_l)},e.prototype.updateGNTDefenseRecord=function(e){Cia(e,LED,l_r)},e.prototype.onGNTInfo=function(e){Mxr(e,SouthSkyGateModel,this,LED,l_r)},e.prototype.reqGuardingNTFormat=function(){var e=new c2m_query_guarding_nantianmen_format;DB.instance.query(c2m_query_guarding_nantianmen_format,e)},e.prototype.reqGuardingNTDmgInfo=function(){var e=new c2q_guarding_nantianmen_dmg_info;DB.instance.query(c2q_guarding_nantianmen_dmg_info,e)},e.prototype.reqGuardingNTChangeFormat=function(e){var p_l=new c2m_change_guarding_nantianmen_format;p_l.cloneIds=e,DB.instance.query(c2m_change_guarding_nantianmen_format,p_l)},e.prototype.reqGuardingNTDefenseRecord=function(){var e=new c2q_query_guarding_nantianmen_defense_record;DB.instance.query(c2q_query_guarding_nantianmen_defense_record,e)},e.prototype.removeEventListener=function(){DB.instance.off(q2c_guarding_nantianmen_info.opcode.toString(),this,this.onGNTInfo),DB.instance.off(m2c_guarding_nantianmen_attack.opcode.toString(),this,this.updateGNTAttack),DB.instance.off(m2c_query_guarding_nantianmen_format_reply.opcode.toString(),this,this.updateGNTFormatReply),DB.instance.off(q2c_query_guarding_nantianmen_attack_record.opcode.toString(),this,this.updateGNTAttackRecord),DB.instance.off(q2c_query_guarding_nantianmen_defense_record.opcode.toString(),this,this.updateGNTDefenseRecord),DB.instance.off(m2c_guarding_nantianmen_clone.opcode.toString(),this,this.updateGNTClone),DB.instance.off(q2c_guarding_nantianmen_score_changed.opcode.toString(),this,this.updateScore),DB.instance.off(q2c_be_attack_in_guarding_nantianmen.opcode.toString(),this,this.updateGNTBeAttack)},e.prototype.updateGNTAttackRecord=function(e){Opn(e,LED,l_r)},e.prototype.isRed=function(){var e=this.isActivityOpen(),p_l=ActivityModel.instance.getActivityVoByType(ActivityTypeDefine.CS_guardingNanTianMen);e&&p_l&&0<Config.global[3022].i_info-SouthSkyGateModel.ins.rwdTimes+(Config.global[3024].i_info-SouthSkyGateModel.ins.attackTimes)+BagModel.instance.getItemCountByItemID(230003,BagTypeDefine.BAG_TYPE_ITEM)+BagModel.instance.getItemCountByItemID(230004,BagTypeDefine.BAG_TYPE_ITEM)?this.showOrHideRed(!0):this.showOrHideRed(!1)},e.prototype.reqGuardingNTAttack=function(e){var p_l=new c2m_guarding_nantianmen_attack;p_l.targetId=e,DB.instance.query(c2m_guarding_nantianmen_attack,p_l)},e.prototype.updateScore=function(e){Ijo(e,LED,l_r)},e.prototype.updateGNTFormatReply=function(e){Ona(e,LED,l_r)},e.prototype.reqGuardingNTAttackRecord=function(){var e=new c2q_query_guarding_nantianmen_attack_record;DB.instance.query(c2q_query_guarding_nantianmen_attack_record,e)},e.prototype.reqQueryGNTClone=function(){var e=new c2m_query_guarding_nantianmen_clone;DB.instance.query(c2m_query_guarding_nantianmen_clone,e)},e.prototype.gameTimeCount=function(){var e;for(var p_l in console.log(("!!!!!!!!!!!!!!!!!!!!!!!!!"+j_x("1650_1619_696")+j_x("2217_796"))),Config.activity_activity){var p_g=Config.activity_activity[p_l];if(p_g.type==ActivityTypeDefine.CS_guardingNanTianMen){e=p_g;break}}if(e){var b_s=Config.Utils.parseActivityStartTime(e),d_u=Config.Utils.parseActivityEndTime(e),b_e=Math.floor(SyncTime.serverTime/1e3),d_m=void 0;b_s<=b_e&&b_e<=d_u?(d_m=d_u,1==LgcM.ins.heroVo.heavenOpenState&&this.reqGuardingNTInfo()):d_m=b_e<d_u?b_s:Config.Utils.nextActTime(e,b_s),d_m=d_m-b_e+1,Laya.timer.once(1e3*d_m,this,this.gameTimeCount)}},e}(),STBossControl=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.addEventListener=function(){DB.instance.on(q2c_dragon_palace_boss_list.opcode.toString(),this,this.onBossInfo),DB.instance.on(q2c_dragon_palace_buyrwdtimes.opcode.toString(),this,this.onBuyTimeInfo),DB.instance.on(q2c_fb_dragon_palace_dmg_rank.opcode.toString(),this,this.onBossPerRankInfo),DB.instance.on(q2c_fb_server_dragon_palace_dmg_rank.opcode.toString(),this,this.onBossSerRankInfo)},e.prototype.onBossSerRankInfo=function(e){Cxg(e,STBossModel,LED,l_r)},e.prototype.canEnterFb=function(p_l,p_g,b_s){void 0===b_s&&(b_s=!1);var d_u=STBossModel.ins,b_e=d_u.bossType[p_g];if(!b_e||!b_e.isActStart)return b_s&&b_p.broadcastNotice(("BOSS"+j_x("206_896_1787"))),!1;if(0<d_u.moreSpaceTime())return b_s&&b_p.broadcastNotice((j_x("33_2456_1614")+j_x("2171_283"))),!1;if(b_e.bossInfo[p_l]&&2==b_e.bossInfo[p_l].state)return b_s&&b_p.broadcastNotice(("BOSS"+j_x("1520_1833"))),!1;if(d_u.challengeTime<=0){if(d_u.canBuyTimes(!0)){var d_m=Config.CItem(d_u.sTBossBuyTimesCfg()[0]);return b_p.confirm(Utils.$((j_x("68_2032_1365")+j_x(1876)+"{1}*1"+j_x("437_223")+"1"+j_x("235_2235_83")+j_x("235_2348")+""),d_m.name),(function(){e.ins.reqBuyTimeInfo()})),!1}}else if(d_u.curBoss!=p_l&&0!=d_u.curBoss)return b_s&&b_p.confirm((j_x("86_1919_507")+j_x(1996)+"1"+j_x(844)+"BOSS"+j_x("2046_2434_562")+""+j_x("33_2456_1409")+j_x("1496_1466_2434")+j_x("562_281_1590")+""+j_x("68_2032_33")+j_x(2456)+""),(function(){b_p.reqEnterFb(p_l,UI.STBossMainPanel)})),!1;return b_p.reqEnterFb(p_l,UI.STBossMainPanel),!0},e.prototype.removeEventListener=function(){DB.instance.off(q2c_dragon_palace_boss_list.opcode.toString(),this,this.onBossInfo),DB.instance.off(q2c_dragon_palace_buyrwdtimes.opcode.toString(),this,this.onBuyTimeInfo),DB.instance.off(q2c_fb_dragon_palace_dmg_rank.opcode.toString(),this,this.onBossPerRankInfo),DB.instance.off(q2c_fb_server_dragon_palace_dmg_rank.opcode.toString(),this,this.onBossSerRankInfo)},e.prototype.onBossPerRankInfo=function(e){Asg(e,STBossModel,LED,l_r)},e.prototype.enterTitleStr=function(e){var p_l=Config.fb_dungeon[e],p_g="res/ui/drangonPlace/",b_s="";if(p_l){switch(p_l.name){case(j_x("2121_1842_891")+j_x(1019)):b_s="donghai.png";break;case(j_x("827_1842_891")+j_x(1019)):b_s="nanhai.png";break;case(j_x("472_1842_891")+j_x(1019)):b_s="beihai.png";break;case(j_x("1280_1842_891")+j_x(1019)):b_s="xihai.png";break;case(j_x("1853_660_891")+j_x(1019)):b_s="moyu.png";break;case(j_x("2308_843_891")+j_x(1019)):b_s="tianjie.png"}p_g+=b_s}return p_g},e.prototype.reqRankBossInfo=function(e,p_l){var p_g=new c2q_fb_dragon_palace_dmg_rank;p_g.rankType=e,p_g.fbId=p_l,DB.instance.query(c2q_fb_dragon_palace_dmg_rank,p_g)},e.prototype.reqBuyTimeInfo=function(){var e=new c2q_dragon_palace_buyrwdtimes;DB.instance.query(c2q_dragon_palace_buyrwdtimes,e)},e.prototype.reqBossInfo=function(e){var p_l=new c2q_dragon_palace_boss_list;p_l.type=e,DB.instance.query(c2q_dragon_palace_boss_list,p_l)},e.prototype.onBossInfo=function(e){var p_l=STBossModel.ins;if(e){p_l.isSevBack=!0,p_l.infoChallengeTimes=e.rwdTimes,p_l.curBoss=e.bossIdInFight,p_l.buyTimes=e.rwdBuy,p_l.lastTime=e.remainTime;var p_g=new BossTypeVo;p_g.setActType(p_l.STBossTypeToActType(e.type));var b_s=p_l.getNearestStateBoss(p_g.actType),d_u=b_s[0],b_e=b_s[1];p_g.recoverTime=b_e,p_g.endTime=d_u,p_g.bossType=p_l.STBossTypeToBossType(e.type),p_g.setData(e),p_l.bossType[e.type]=p_g,LED.event(l_r.ST_BOSS_INFO,e)}else b_p.broadcastNotice((j_x("1662_1998_206")+j_x("155_1186")))},e.prototype.onBuyTimeInfo=function(e){Imj(e,STBossModel,LED,l_r)},e}(),STBossModel=function(){function e(){this.perlist=[],this.serlist=[],this.buyTimes=0,this.lastTime=0,this.curBoss=0,this.infoChallengeTimes=0,this.bossType={},this.isSevBack=!1}return Object.defineProperty(e,"ins",{get:function(){return this._ins||(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.prototype.STBossTypeToActType=function(e){var p_l="";return 1==e?p_l=ActivityTypeDefine.CS_dragonPalaceBoss:2==e&&(p_l=ActivityTypeDefine.CS_dragonPalaceBigBoss),p_l},e.prototype.sTBossBuyTimesCfg=function(){return Kum(Config,GlobalDefine)},e.prototype.canBuyTimes=function(e){void 0===e&&(e=!0);var p_l=[this.sTBossBuyTimesCfg()];return b_p.checkConsume(p_l,e)},e.prototype.getNearestStateBoss=function(e){var p_l=Math.floor(SyncTime.serverTime/1e3),p_g=1/0,b_s=0;for(var d_u in Config.activity_activity){var b_e=Config.activity_activity[d_u];if(b_e.type===e){var d_m=Config.Utils.parseActivityStartTime(b_e),d_w=Config.Utils.parseActivityEndTime(b_e);d_m<p_l&&d_w<p_l?d_m=Config.Utils.nextActTime(b_e,d_m):p_l<d_m||(b_s=d_w,d_m=Config.Utils.nextActTime(b_e,d_m)),d_m<p_g&&(p_g=d_m)}}return[b_s,p_g]},e.prototype.moreSpaceTime=function(){return Ytp(e)},e.prototype.getSelfRankRewardInFb=function(e){return Opy(e,b_p,this)},e.prototype.sTBossSpaceTime=function(){return Mjg(Config,GlobalDefine)},e.prototype.STBossTypeToBossType=function(e){var p_l=0;return 1==e?p_l=DungeonType.TreaureM:2==e&&(p_l=DungeonType.TreaureB),p_l},e.prototype.getMinChallengeBoss=function(){var e=this.bossType[1].bossCfg,p_l=LgcM.ins.heroVo.stateLv;if(e[p_l])return p_l;for(var p_g in e)return parseInt(p_g)},e.prototype.getBossArray=function(){var e=[],p_l=this.bossType[1].bossCfg;for(var p_g in p_l)e.push(parseInt(p_g));return e},e.prototype.sTBossSpaceTimeStr=function(){return Iel(this)},e.prototype.getSTBossIdByState=function(p_l,p_g,b_s){var d_u=e.ins.bossType[p_l];return d_u&&d_u.bossCfg&&d_u.bossCfg[p_g]?d_u.bossCfg[p_g][b_s]:0},Object.defineProperty(e.prototype,"challengeTime",{get:function(){return Config.global[GlobalDefine.ST_Boss_Free_times].i_info+this.buyTimes-this.infoChallengeTimes},enumerable:!0,configurable:!0}),e.prototype.getRewardList=function(e,p_l){for(var p_g=b_p.getRewardDatas(p_l),b_s=p_g.length;b_s<e;b_s++)p_g.push(null);return p_g},e.prototype.isOpenState=function(e){return void 0===e&&(e=!0),!!LgcM.ins.heroVo.heavenOpenState||(e&&b_p.broadcastNotice((j_x("206_971_371")+j_x("2308_843_814")+j_x("799_33_2456"))),!1)},e.prototype.rankListCfg=function(e,p_l,p_g){var b_s=Config.fb_drangonPalace[e];if(0==p_l)return[];if(b_s)switch(p_l+1){case 1:return 0==p_g?b_s.reward1:b_s.sReward1;case 2:return 0==p_g?b_s.reward2:b_s.sReward2;case 3:return 0==p_g?b_s.reward3:b_s.sReward3;case 4:default:return 0==p_g?b_s.reward4:b_s.sReward4}},e}(),BossTypeVo=function(){function e(){this.bossInfo={},this.isActStart=!1,this.recoverTime=0,this.endTime=0}return e.prototype.setData=function(e){if(this.bossInfo={},this.type=e.type,e.list&&0<e.list.length)for(var p_l in e.list)this.bossInfo[e.list[p_l].id]=e.list[p_l]},e.prototype.setActType=function(e){Shp(e,ActivityModel,this)},e.prototype.setDungonType=function(e){Gru(e,this)},Object.defineProperty(e.prototype,"bossCfg",{get:function(){if(!this._bossCfgInfo)for(var e in this._bossCfgInfo={},Config.fb_dungeon){var p_l=Config.fb_dungeon[e];if(p_l.type==this.bossType){var p_g=p_l.stateLv?p_l.stateLv[0]:0;this._bossCfgInfo[p_g]||(this._bossCfgInfo[p_g]=new Array),this._bossCfgInfo[p_g].push(p_l.id)}}return this._bossCfgInfo},enumerable:!0,configurable:!0}),e}(),DungeonType,DungeonDefine,BossInfoVo=function(){function e(){}return e.prototype.setBossInfo=function(e,p_l){Ula(e,p_l,this)},e}(),OnekeyPassLevelReward=function(){},DungeonModel=function(){function e(){this.isLeavingFb=!1,this._fbHelpTimes=0,this._fbAssistTimes=0,this._fbWildBossTimes=0,this._fbWildBossTimesCd=-1,this._fbTsEquipTimes=0,this._fbTsEquipTimesCd=-1,this._dungeonInfo={},this._fbHelpFbId=0,this._fbHelpPid=0,this._bossId=0,this._dmgRank=null,this._dmgSerRank=null,this._selfTeamDmg=null,this._selfDmg=0,this._roomInfo=null,this._roomLst=[],this._team=null,this._refuseAcceptTeam=!1,this._fbId=0,this._roomId=0,this._openTime=0,this._deadline=0,this._pagodaSweep=!1,this.lastExitWildBossTime=0,this.autoEnterFbId=0,this.autoTeamEnterFbId=0,this._pagodaSweepFbId=0,this.notRemindFb={},this._wildBossInfo={},this._stateBossInfo={},this._attackTarget=0,this._attackTargetType=0,this._hurtRewardStatus=null,this.isNotTips=!1,this.currFbId=0,this.diffLevel=0,this.wildBossInspireTimes=0,this.isCrossWildBoss=!1,this.isCrossGerenBoss=!1,this.isPlayCrossLevelAni=!1,this._index=1,this._isPlayLeftAni=!1,this.isDirectPass=!1,this.dropShowMax=12,this.isPagoTaOneKey=!1,this.diffPago=0,this.currFb_PagotaId=0,this.resetDrop(),LED.on(l_r.SCENE_CHANGE,this,this.onChangeScene),LED.on(l_r.ACTOR_ADDED,this,this.onActorAdded),LED.on(l_r.ACTOR_DIE,this,this.onActorDie)}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tianJieHelpTime",{get:function(){return this._tianJieHelpTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tianJieSeekTime",{get:function(){return this._tianJieSeekTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tianJieFbId",{get:function(){return this._tianJieFbId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPagodaSweep",{get:function(){return this._pagodaSweep},enumerable:!0,configurable:!0}),e.prototype.getDungeonInfo=function(e){return Oco(e,this)},e.prototype.clacRecover=function(e,p_l,p_g){if(p_g<=0)return[0,p_l,p_g];var b_s=Math.floor(SyncTime.serverTime/1e3);if(b_s<p_l)return[0,p_l,p_g];var d_u=b_s-p_l,b_e=1+Math.floor(d_u/e);return(p_g-=b_e)<=0?p_g=p_l=0:p_l+=e*(b_e-1),[b_e,p_l,p_g]},e.prototype.lilian_wildBoss_Red=function(){return Ahy(p_k,FuncDefine,this)},e.prototype.getNextFb=function(e){var p_l=0;for(var p_g in this._dungeonInfo){var b_s=this._dungeonInfo[p_g],d_u=Config.fb_dungeon[b_s.id];d_u&&d_u.type===e&&p_l<d_u.id&&this.hasFbPassed(b_s.id)&&(p_l=b_s.id)}var b_e=0;if(0!==p_l)b_e=p_l+1;else{var d_m=this.getConfigsByType(e);d_m&&(b_e=d_m[0].id)}return[p_l,b_e]},e.prototype.canGetRewardByType=function(e){return Qpq(e,this)},e.prototype.countConsumeReward=function(e,p_l){var p_g=[],b_s=Config.fb_green_boss_reward[e];if(!b_s)return p_g;for(var d_u in p_l){var b_e=[];b_e.push(p_l[d_u][0]),b_e.push(p_l[d_u][1]*b_s.costReward),p_g.push(b_e)}return p_g},e.prototype.getLastDayFirstPassFb=function(e){var p_l=0,p_g=0,b_s=new Date(SyncTime.serverTime);b_s.setHours(0),b_s.setMinutes(0),b_s.setSeconds(0),b_s.setMilliseconds(0);var d_u=b_s.valueOf()/1e3;for(var b_e in this._dungeonInfo){var d_m=this._dungeonInfo[b_e],d_w=Config.fb_dungeon[d_m.id];d_w&&d_w.type===e&&d_m.firstPass<d_u&&p_l<d_m.id&&(p_l=d_m.id,p_g=d_m.firstPass)}if(!p_l)for(var b_e in p_l=1/0,Config.fb_dungeon){var f_t=Config.fb_dungeon[b_e];f_t.type===e&&f_t.id<p_l&&(p_l=f_t.id)}return[p_l,p_g]},e.prototype.countGerenBossRewardId=function(p_l){var p_g=0,b_s=this.gerenBossRewardinfo;if(!b_s||!b_s.fbId||b_s.fbId.length<=0){var d_u=e.instance.getPersonalBossLstByType(p_l);d_u&&0<d_u.length&&(p_g=d_u[0].id)}else for(var b_e=0,d_m=b_s.fbId;b_e<d_m.length;b_e++){var d_w=d_m[b_e],f_t=Config.fb_green_boss_reward[d_w];f_t&&f_t.reward&&(p_g=d_w)}return p_g},e.prototype.hasFbPassed=function(e){var p_l=this._dungeonInfo[e];return p_l&&0<p_l.lastTime},e.prototype.getBossId=function(){return Ysr(this)},e.prototype.getdBossList=function(e){Ehi(e,this)},e.prototype.getDmgRank=function(){return Qgs(this)},e.prototype.getPersonalBossLstByType=function(e){for(var p_l=this,p_g=[],b_s=0,d_u=this.getConfigsByType(DungeonType.Personal);b_s<d_u.length;b_s++){var b_e=d_u[b_s];b_e.xlRewardType===e&&p_g.push(b_e)}return p_g.sort((function(e,p_g){var b_s=p_l.sortBossLst(e.id),d_u=p_l.sortBossLst(p_g.id);if(b_s!=d_u)return b_s-d_u;var b_e=p_l.canChallenge(e.id)?1:0,d_m=p_l.canChallenge(p_g.id)?1:0;return b_e!=d_m?d_m-b_e:e.id!=p_g.id?e.id-p_g.id:void 0}))},e.prototype.getLeftTime=function(){if(!this._deadline)return 0;var e=Math.floor(SyncTime.serverTime/1e3);return e<this._deadline?this._deadline-e:0},e.prototype.getSerDmgRank=function(){return Avf(this)},e.prototype.getFbConf=function(){return Yan(Config,this)},e.prototype.wildBossRed_main=function(e){var p_l=this.getPersonalBossLstByType(e);for(var p_g in p_l)if(this.canEnterGerenById(p_l[p_g].id)&&this.canChallenge(p_l[p_g].id)||this.canGetRewardByType(e))return!0;return!1},e.prototype.isHelpOther=function(){return Wpo(this)},e.prototype.getSelfTeamDmg=function(){return Kyc(this)},e.prototype.getStateBossCurConf=function(){var e=StateModel.instance.getStateLv();for(var p_l in Config.fb_dungeon){var p_g=Config.fb_dungeon[p_l];if(p_g.type===DungeonType.StateBoss&&p_g.stateLv&&p_g.stateLv[0]===e)return p_g}return null},e.prototype.getFbWildBossLeftTimes=function(e){var p_l=this.getFbWildBossTimes(e),p_g=p_l[0];return p_l[1],(e===DungeonType.WildBoss?Config.global[GlobalDefine.fb_wildboss_times].i_info:Config.global[GlobalDefine.fb_tsequipt_times].i_info)-p_g},e.prototype.openTimeRecord=function(e){var p_l=0,p_g=Config.fb_dungeon[e.id],b_s=Config.fb_gerenboss[e.id];if(b_s){var d_u=e.lastTime+b_s.cd;p_l=e?Math.max((p_g.daily||p_g.weekly)-e.count,0):p_g.daily||p_g.weekly,SyncTime.serverTime<1e3*d_u&&0<p_l&&Laya.timer.loop(SyncTime.serverTime-1e3*d_u,this,this.SendGerenRidPoint)}},e.prototype.getFbAssistTimes=function(){return Adg(this)},e.prototype.getFbHelpTimes=function(){return Oun(this)},e.prototype.getFbWildBossTimes=function(e){var p_l,p_g,b_s=Config.global[GlobalDefine.fb_wildboss_times_cd].i_info,d_u=null;return[e===DungeonType.TsBoss?(b_s=Config.global[GlobalDefine.fb_tsequipt_times_cd].i_info,(p_l=this.clacRecover(b_s,this._fbTsEquipTimesCd,this._fbTsEquipTimes))[0],d_u=p_l[1],p_l[2]):((p_g=this.clacRecover(b_s,this._fbWildBossTimesCd,this._fbWildBossTimes))[0],d_u=p_g[1],p_g[2]),d_u]},e.prototype.SendGerenRidPoint=function(){Ggu(LED,l_r)},e.prototype.getConfigsByType=function(e){var p_l=[];for(var p_g in Config.fb_dungeon){var b_s=Config.fb_dungeon[p_g];b_s.type===e&&p_l.push(b_s)}return p_l.sort((function(e,p_l){return e.id-p_l.id})),p_l},e.prototype.getSelfDmg=function(){return Amn(this)},Object.defineProperty(e.prototype,"isInFb",{get:function(){var e=this.getFbConf();return!(!e||e.mapId!=b_p.mapID)},enumerable:!0,configurable:!0}),e.prototype.isTeam=function(){return Mqa(this)},e.prototype.onTsEquipTimesTimer=function(e){var p_l=this.getFbWildBossTimes(e),p_g=p_l[0];p_l[1],0===p_g?this.updateFbWildBossTimes(p_g,e):LED.event(l_r.FB_RED_POINT_UPDATE)},e.prototype.isRefuseAcceptTeam=function(){return Mem(this)},e.prototype.getTeamVo=function(){return Ees(this)},e.prototype.addDropInfo=function(e){this._fbId&&(this._dropData[e.id]||(this._dropData[e.id]=!0,this._dropInfos.push([e.itemId,e.count||1,e.bind||0])))},e.prototype.setRefuseAcceptTeam=function(e){Wkw(e,this)},e.prototype.updateFbWildBossTimes=function(e,p_l){(p_l===DungeonType.WildBoss?this._fbWildBossTimes!==(this._fbWildBossTimes=e)&&0<=this._fbWildBossTimesCd:this._fbTsEquipTimes!==(this._fbTsEquipTimes=e)&&0<=this._fbTsEquipTimesCd)&&this.calcWildBossTimesTimer(p_l),LED.event(l_r.FB_WILDBOSS_TIMES_UPDATE)},e.prototype.updateGreneBoss=function(e){Wzh(e,this)},e.prototype.changeAttackTarget=function(e){var p_l=Engine2d.ActorTypeDefine.MONSTER,p_g=0;e&&(p_l=e.type,p_g=e.id),p_l===Engine2d.ActorTypeDefine.MONSTER&&(p_g=0),this.reqSetAttackTargetType(p_l,p_g)},e.prototype.updateFbWildBossTimesCd=function(e,p_l){p_l===DungeonType.WildBoss?this._fbWildBossTimesCd=e:this._fbTsEquipTimesCd=e,this.calcWildBossTimesTimer(p_l),LED.event(l_r.FB_WILDBOSS_TIMES_UPDATE)},e.prototype.onWildBossTimesTimer=function(e){var p_l=this.getFbWildBossTimes(e),p_g=p_l[0];p_l[1],0===p_g?this.updateFbWildBossTimes(p_g,e):LED.event(l_r.FB_RED_POINT_UPDATE)},e.prototype.calcWildBossTimesTimer=function(e){var p_l=this.getFbWildBossTimes(e),p_g=p_l[0],b_s=p_l[1];if(0===p_g){var d_u=b_s-Math.floor(SyncTime.serverTime/1e3)+1;e===DungeonType.WildBoss?(Laya.timer.clear(this,this.onWildBossTimesTimer),Laya.timer.once(1e3*d_u,this,this.onWildBossTimesTimer,[e])):(Laya.timer.clear(this,this.onTsEquipTimesTimer),Laya.timer.once(1e3*d_u,this,this.onTsEquipTimesTimer,[e]))}else LED.event(l_r.FB_RED_POINT_UPDATE)},e.prototype.updateFbHelpTimes=function(e){Wuv(e,this,LED,l_r)},e.prototype.updateFbAssistTimes=function(e){Yzl(e,this,LED,l_r)},e.prototype.updatePagodaSweep=function(e){Epz(e,this,LED,l_r)},e.prototype.resetDrop=function(){this._dropInfos=[],this._dropData={}},Object.defineProperty(e.prototype,"fbId",{set:function(e){this._fbId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropList",{get:function(){return this._dropInfos},enumerable:!0,configurable:!0}),e.prototype.canChallenge=function(e){var p_l=Config.fb_dungeon[e],p_g=0;if(LgcM.ins.heroVo&&LgcM.ins.heroVo.stateLv&&(p_g=LgcM.ins.heroVo.stateLv),p_l){var b_s=p_l.stateLv;if(b_s&&(p_g<b_s[0]||p_g>b_s[1]))return!1}return!0},e.prototype.onFbRankData=function(e){switch(e.type){case RankType.FbStory:case RankType.FbPagoda:LED.event(l_r.FB_RANK_FB_UPDATE,e)}},e.prototype.getNearestStateBoss=function(e){var p_l,p_g=Math.floor(SyncTime.serverTime/1e3),b_s=1/0;for(var d_u in Config.activity_activity){var b_e=Config.activity_activity[d_u];if("GS_stateBoss"===b_e.type){var d_m=Config.Utils.parseActivityStartTime(b_e),d_w=Config.Utils.parseActivityEndTime(b_e);if(d_m<p_g&&d_w<p_g)d_m=Config.Utils.nextActTime(b_e,d_m);else if(p_g<d_m);else{if(this.isStateBossAlive(e)){p_l=b_e,b_s=0;break}d_m=Config.Utils.nextActTime(b_e,d_m)}d_m<b_s&&(p_l=b_e,b_s=d_m)}}return[p_l,b_s]},e.prototype.reqWildBossInspire=function(){var e=new c2m_wildboss_inspire;DB.instance.query(c2m_wildboss_inspire,e)},e.prototype.onUpdateFbInfo=function(e){if(e&&e.dungeon_info&&e.dungeon_info[0]){for(var p_l=0,p_g=0,b_s=e.dungeon_info;p_g<b_s.length;p_g++){var d_u=b_s[p_g],b_e=this._dungeonInfo[d_u.id];b_e||(this._dungeonInfo[d_u.id]=b_e=new DungeonInfoVo),b_e.setDungeonInfo(d_u),this.isStoryFb(d_u.id)&&(p_l=p_l<d_u.id?d_u.id:p_l),this.notRemindFb[d_u.id]=!!d_u.notRemind,this.openTimeRecord(b_e)}GlobalData.expFbId=p_l,GPlatform.isIosShow&&LED.event(l_r.FB_INFO_UPDATE),LED.event(l_r.FB_RED_POINT_UPDATE)}},e.prototype.onFbSelfDmgRank=function(e){if((this._selfTeamDmg=e).damage){if(this._selfDmg=e.damage.damage,e.damage.team){var p_l=0;if(e.damage.pid==LgcM.ins.heroVo.id){for(var p_g in e.damage.members)p_l+=e.damage.damages[p_g];this._selfDmg=Math.max(0,e.damage.damage-p_l)}else for(var b_s in e.damage.members)e.damage.members[b_s]==LgcM.ins.heroVo.id&&(this._selfDmg=e.damage.damages[b_s])}LED.event(l_r.FB_SELF_DMG_RANK_UPDATE,[e])}},e.prototype.reqLeaveRoom=function(){},e.prototype.reqFbTeamList=function(){var e=new c2m_fb_team_list;DB.instance.query(c2m_fb_team_list,e)},e.prototype.onActorAdded=function(e){if(e.type===Engine2d.ActorTypeDefine.PLAYER){var p_l=this.getFbConf();if(p_l){var p_g=p_l.mapId===b_p.mapID?p_l:null;if(p_g&&p_g.type===DungeonType.State){var b_s=LgcM.ins.getActorById(e.id,e.type);b_s.sit(0,!0),setTimeout((function(){b_s.sit(0,!0)}),1e3),e.id,b_p.playerId}}}},e.prototype.updateTianJieLock=function(){var e=Config.funcOpen[10055],p_l=e.condition[0][1],p_g=e.condition[0][2];return!(LgcM.ins.heroVo.stateLv>=p_l&&StateModel.instance.getStateSubLv()>=p_g)},e.prototype.reqHelpStory=function(e,p_l){var p_g=new c2m_fb_help_story;p_g.pid=e,p_g.fbId=p_l,DB.instance.query(c2m_fb_help_story,p_g)},e.prototype.isStateBossAlive=function(e){var p_l;if((p_l=e?Config.fb_dungeon[e]:this.getStateBossCurConf())&&this._stateBossInfo){var p_g=this._stateBossInfo[p_l.id];if(p_g&&p_g.isOpen)return!0}return!1},e.prototype.onNotifyFbInfo=function(e){var p_l=this._bossId;this._fbId=e.fbId,this._roomId=e.roomId,this._openTime=e.openTime,this._deadline=e.deadline,this._bossId=e.bossObjId,p_l!==this._bossId&&LED.event(l_r.FB_BOSS_ID_UPDATE,[e.bossObjId]);var p_g=Config.fb_dungeon[e.fbId];if(p_g&&p_g.type==DungeonType.StateBoss){var b_s=ActivityModel.instance.getActivityConfigVo(FuncDefine.stateBoss);b_s&&(this._deadline=b_s.endTime-b_s.startTime)}},e.prototype.onFbHelpStory=function(e){Uyp(e,this)},e.prototype.onNotifyFbResult=function(p_l){if(LED.event(l_r.FB_RESULT,[p_l]),p_l.result){var p_g=Config.fb_dungeon[p_l.fbId];if(p_g.type==DungeonType.Ascent||p_g.type==DungeonType.Rare||p_g.type==DungeonType.RewardBoss)AscentModel.justFbId=p_l.fbId,UI.TeamWinPanel.open(p_l);else if(p_g.type==DungeonType.StateBoss||p_g.type==DungeonType.TreaureB||p_g.type==DungeonType.TreaureM)UI.StateBossResultView.open(p_l);else{this.isCrossWildBoss=!0;var b_s=1e3;LgcM.ins.getActorInfosByType(Engine2d.ActorTypeDefine.DROP)&&(b_s=3e3),p_g.type==DungeonType.CossBoss?Laya.timer.once(b_s,this,(function(){UI.crossBossResulteWin.open(p_l)})):null!=p_l.fbType&&p_l.fbType==DungeonType.Pagoda?(LED.event(l_r.ONEKEY_PAGODA_PASS_UPDATE_VIEW,[p_l.fbId]),e.instance.reqLeaveFb(),LED.event(l_r.FB_UPDATE_INFO)):Laya.timer.once(b_s,this,(function(){UI.ResultWinPanel.open(p_l)}))}}else Laya.timer.once(1e3,this,(function(){var e=Config.fb_dungeon[p_l.fbId];if(e.type===DungeonType.CossBoss){var p_g=LgcM.ins.heroVo.id;p_l.last_hit?p_l.last_hit.pid&&(p_l.last_hit.pid!==p_g?UI.crossBossResulteLoss.open(2):UI.crossBossResulteLoss.open(1)):UI.crossBossResulteLoss.open(1)}else e.type==DungeonType.Ascent||e.type==DungeonType.Rare||e.type==DungeonType.RewardBoss?UI.TeamFailPanel.open(p_l):e.type==DungeonType.StateBoss||e.type==DungeonType.TreaureB||e.type==DungeonType.TreaureM?UI.StateBossResultView.open(p_l):UI.ResultLosePanel.open(p_l)}))},e.prototype.reqRemind=function(e,p_l){var p_g=new c2m_fb_set_remind;p_g.fbId=e,p_g.notRemind=p_l?0:1,LED.event(l_r.WAILBOSS_REMiND_CHANG_RED),LED.event(l_r.HELPER_UPDATE_INFO),DB.instance.query(c2m_fb_set_remind,p_g)},e.prototype.onFbStatebossDmgRank=function(e){Mhf(e,LED,l_r)},e.prototype.reqGerenBossReward=function(e,p_l){var p_g=new c2m_get_green_boss_reward;p_g.type=e,p_g.getType=p_l,DB.instance.query(c2m_get_green_boss_reward,p_g)},e.prototype.reqGerenBossRewardInfo=function(e){var p_l=new c2m_green_boss_reward_info;p_l.type=e,DB.instance.query(c2m_green_boss_reward_info,p_l)},e.prototype.onGuildBossResultPanel=function(e){Irg(e,UI)},e.prototype.reqLeaveFb=function(){if(Config.map[b_p.mapID].dynamic==b_p.DYNAMIC){var e=new c2w_leave_fb;DB.instance.query(c2w_leave_fb,e),this.isLeavingFb=!0}},e.prototype.getTianJieOpenBossByFBId=function(e){for(var p_l,p_g=Config.global[3016].t_info,b_s=0;b_s<p_g.length;b_s++)p_g[b_s][1]==e&&(p_l=b_s);return p_l},e.prototype.reqFbTeamReq=function(e){var p_l=new c2m_fb_team_req;p_l.teamId=e,DB.instance.query(c2m_fb_team_req,p_l)},e.prototype.onFbSetAttackTargetType=function(e){if(this.getFbConf()){var p_l=LgcM.ins.getActorById(e.id);Engine2d.CustomActor.selectedActor=p_l,this._attackTarget=p_l?p_l.id:0,this._attackTargetType=p_l?p_l.type:0,LED.event(l_r.FB_SET_ATTACK_TARGET_TYPE,[e.type,e.id])}},e.prototype.canEnterInWildBoss=function(e){if(e===DungeonType.TsBoss&&!p_k.instance.checkSystemOpen(FuncDefine.wildBossTs))return!1;if(this.getFbWildBossLeftTimes(e)<=0)return!1;for(var p_l in Config.fb_dungeon){var p_g=Config.fb_dungeon[p_l];if(p_g.type===e){var b_s=this._dungeonInfo[p_g.id];if(this.canChallenge(p_g.id)&&this._wildBossInfo[p_g.id]&&this._wildBossInfo[p_g.id].isOpen){if(!b_s)return!0;if(b_s.remind)return!0}}}return this.checkWildBossInfo(!0,e)[0]},e.prototype.canEnterPagoda=function(){if(!p_k.instance.checkSystemOpen(FuncDefine.pagoda))return!1;var e=this.getNextFb(DungeonType.Pagoda),p_l=(e[0],e[1]),p_g=Config.fb_pagoda[p_l];return!!p_g&&LgcM.ins.heroVo.fight>=p_g.fight},e.prototype.onActorDie=function(e){e.actorID===this._attackTarget&&e.actorType===this._attackTargetType&&this.changeAttackTarget(null)},e.prototype.reqCrateTeam=function(){var e=new c2m_fb_create_team;DB.instance.query(c2m_fb_create_team,e)},e.prototype.clientChangeFbTime=function(e){Sjb(e,this)},e.prototype.reqEnterRollPagoda=function(e){var p_l=new c2m_fb_roll_pagoda;p_l.fbId=e,DB.instance.query(c2m_fb_roll_pagoda,p_l)},e.prototype.reqTeamMemberFbList=function(e,p_l){var p_g=new c2w_fb_thanks_teamMember;p_g.type=e,p_g.plrList=p_l,DB.instance.query(c2w_fb_thanks_teamMember,p_g)},e.prototype.onFbDmgRank=function(e){Wla(e,this,LED,l_r)},e.prototype.checkWildBossInfo=function(e,p_l){void 0===e&&(e=!1),void 0===p_l&&(p_l=DungeonType.WildBoss);var p_g=this._wildBossInfo;if(!p_g)return[!1,0];var b_s=!1,d_u=1/0;for(var b_e in p_g){var d_m=p_g[b_e];if(p_l==d_m.fbType&&(!e||this.canChallenge(d_m.id))){var d_w=this._dungeonInfo[d_m.id];d_w&&!d_w.remind||(d_m.recoverTime?d_m.recoverTime<d_u&&(d_u=d_m.recoverTime):b_s=!0)}}return[b_s,d_u]},e.prototype.onFbBossLst=function(e){var p_l=e.fbType===DungeonType.WildBoss||e.fbType===DungeonType.TsBoss,p_g=p_l?this._wildBossInfo:this._stateBossInfo;if(e.lst){for(var b_s=0,d_u=e.lst;b_s<d_u.length;b_s++){var b_e=d_u[b_s];if(0===b_e.recoverTime&&0===b_e.hp&&0===b_e.hpUpper&&e.fbType!=DungeonType.StateBoss){var d_m=Config.fb_dungeon[b_e.id].monster,d_w=Config.obj_monster[d_m];b_e.hp=d_w.hpUpper,b_e.hpUpper=d_w.hpUpper}p_g[b_e.id]||(p_g[b_e.id]=new BossInfoVo),p_g[b_e.id].setBossInfo(b_e,e.fbType)}var f_t=p_l?l_r.FB_WILD_BOSS_LIST:l_r.FB_STATE_BOSS_LIST;LED.event(f_t,[e.lst,e.fbType]),f_t===l_r.FB_STATE_BOSS_LIST&&LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.stateBoss)}else console.log((j_x("1443_944_270")+j_x("2025_803")+"null  "),e.fbType)},e.prototype.reqWildBossBuyTimes=function(e){var p_l=new c2m_wildboss_add_count;p_l.val=e[0]?e[0]:0,DB.instance.query(c2m_wildboss_add_count,p_l)},e.prototype.onFbPlrList=function(e){Wsr(e,LED,l_r)},e.prototype.onFbOpenUI=function(e){var p_l=this.SureBtnOpen.bind(this),p_g="";e.plrList&&e.plrList[0]&&(p_g=e.plrList[0].name),b_p.confirm(Utils.$(Config.notice[372].value,p_g,p_g),p_l,[e.type,e.plrList],!1,!0)},e.prototype.onFbTeamLeave=function(e){this._team=null;var p_l=LgcM.ins.getActorInfos(Engine2d.ActorTypeDefine.PLAYER);for(var p_g in p_l){var b_s=LgcM.ins.getActorById(p_l[p_g].id,Engine2d.ActorTypeDefine.PLAYER);b_s&&b_s.initAndShowTeamTag(!1)}LED.event(l_r.FB_TEAM_UPDATE)},e.prototype.reqBossLst=function(e){var p_l=new c2w_fb_boss_lst;p_l.fbType=e,DB.instance.query(c2w_fb_boss_lst,p_l)},e.prototype.updateGerenBossRewardInfo=function(e){Osw(e,this,LED,l_r)},e.prototype.hasFbRedpoint=function(){return Qbx(this)},e.prototype.reqPkList=function(){var e=new c2m_fb_pk_list;DB.instance.query(c2m_fb_pk_list,e)},e.prototype.reqStateBossDmgRank=function(e){var p_l=new c2w_fb_stateboss_dmg_rank;p_l.fbId=e,DB.instance.query(c2w_fb_stateboss_dmg_rank,p_l)},e.prototype.canEnterWildBoss=function(){return!!p_k.instance.checkSystemOpen(FuncDefine.wildBoss)&&(this.canEnterInWildBoss(DungeonType.WildBoss)||this.canEnterInWildBoss(DungeonType.TsBoss))},e.prototype.onFbBossFbInfo=function(e){var p_l=this._bossId;this._bossId=e.bossObjId,this._refuseAcceptTeam=!!e.isRefuseAcceptTeam,p_l!==this._bossId&&LED.event(l_r.FB_BOSS_ID_UPDATE,[e.bossObjId])},e.prototype.reqSweepGerenBoss=function(e){var p_l=new c2m_fb_sweep_geren;p_l.fbId=e,DB.instance.query(c2m_fb_sweep_geren,p_l)},e.prototype.reqTsEquipBuyTimes=function(e){var p_l=new c2m_tsequiptfb_add_count;p_l.val=e[0]?e[0]:0,DB.instance.query(c2m_tsequiptfb_add_count,p_l)},e.prototype.getHurtRewardStatus=function(e,p_l){var p_g={};if(e===DungeonType.StateBoss&&this._selfTeamDmg){var b_s=this._selfDmg;for(var d_u in Config.fb_stateboss_reward){var b_e=Config.fb_stateboss_reward[d_u];if(2===b_e.type&&Math.floor(b_e.id/1e4)===p_l){p_g[b_e.id]=0,b_s>b_e.hurtCond&&(p_g[b_e.id]=1);for(var d_m=0,d_w=this._hurtRewardStatus;d_m<d_w.length;d_m++){var f_t=d_w[d_m];if(f_t.id===b_e.id){1===f_t.status&&(p_g[b_e.id]=2);break}}}}}return p_g},e.prototype.reqEnterFbByType=function(e){var p_l=new c2w_enter_fb;p_l.fbId=0,DB.instance.query(c2w_enter_fb,p_l)},e.prototype.reqFbTeamLeave=function(e){void 0===e&&(e=0);var p_l=new c2m_fb_team_leave;p_l.pid=e,DB.instance.query(c2m_fb_team_leave,p_l)},e.prototype.onFbHurtRewardStatus=function(e){Ove(e,this,LED,l_r)},e.prototype.reqOneKeyPassFB=function(){var e=new c2m_fb_story_onekey_pass;DB.instance.query(c2m_fb_story_onekey_pass,e)},e.prototype.reqFbDirectPass=function(e){var p_l=new c2m_fb_story_onekey_passone;p_l.fbId=e,DB.instance.query(c2m_fb_story_onekey_passone,p_l)},e.prototype.reqFbTeamRefuseAccept=function(e){var p_l=new c2m_fb_team_refuse_accept;p_l.refuse=e?1:0,DB.instance.query(c2m_fb_team_refuse_accept,p_l)},e.prototype.reqFBHeavenOpenInfo=function(){var e=new c2m_fb_heaven_open_info;DB.instance.query(c2m_fb_heaven_open_info,e)},e.prototype.onFbTeamUpdate=function(e){var p_l=!1;this._team||(this._team=new DungeonTeamVo,p_l=!0);var p_g=LgcM.ins.getActorInfos(Engine2d.ActorTypeDefine.PLAYER);for(var b_s in p_g)(r_t=LgcM.ins.getActorById(p_g[b_s].id,Engine2d.ActorTypeDefine.PLAYER))&&r_t.initAndShowTeamTag(!1);var d_u={};if(this._team.member)for(var b_e=0,d_m=this._team.member;b_e<d_m.length;b_e++)d_u[(d_h=d_m[b_e]).pid]=d_h.name;this._team.setData(e);var d_w={};if(this._team.member)for(var f_t=0,v_z=this._team.member;f_t<v_z.length;f_t++){var d_h,r_t;d_w[(d_h=v_z[f_t]).pid]=d_h.name,(r_t=LgcM.ins.getActorById(d_h.pid,Engine2d.ActorTypeDefine.PLAYER))&&r_t.initAndShowTeamTag(!0)}for(var b_s in d_u)delete d_w[Number(b_s)];for(var b_s in d_w)p_l||Number(b_s)===b_p.playerId||b_p.broadcastNotice(d_w[b_s]+(j_x("223_2456_2413")+j_x(1869)));if(p_l&&this._team.member&&this._team.member[0]&&this._team.member[0].pid!==b_p.playerId&&b_p.broadcastNotice((j_x("402_2142_223")+j_x("2456_2413_1869"))),LED.event(l_r.FB_TEAM_UPDATE),this._attackTargetType===Engine2d.ActorTypeDefine.PLAYER)for(var t_n=0;t_n<this._team.member.length;++t_n)if(this._attackTarget===this._team.member[t_n].pid){this.changeAttackTarget(null);break}},e.prototype.reqTakeHurtReward=function(e){var p_l=new c2m_fb_stateboss_take_hurt_reward;p_l.id=e,DB.instance.query(c2m_fb_stateboss_take_hurt_reward,p_l)},e.prototype.onChangeScene=function(){var e=Config.fb_dungeon[this._fbId],p_l=e&&e.mapId==b_p.mapID?e:null;if(p_l||(this._bossId=0,this._dmgRank=null,this._dmgSerRank=null,this._selfTeamDmg=null,this._roomInfo=null,this._roomLst=[],this._team=null,this._refuseAcceptTeam=!1,this._fbId=0,this._roomId=0,this._openTime=0,"marry_fb"!=Config.map[b_p.mapID].impl&&(this._deadline=0),this._fbHelpFbId=0,this._fbHelpPid=0,this._attackTarget=0,this._attackTargetType=0,this._hurtRewardStatus=null,this.resetDrop(),this.isLeavingFb&&(this.isLeavingFb=!1,UI.RenWuWanCheng.isWaiting&&(UI.RenWuWanCheng.isWaiting=!1,Laya.timer.once(1e3,this,UI.RenWuWanCheng.open)))),this.autoEnterFbId&&(b_p.reqEnterFb(this.autoEnterFbId),this.autoEnterFbId=0),p_l&&p_l.type===DungeonType.StateBoss&&this.changeAttackTarget(null),this._team&&this._team.member)for(var p_g=0,b_s=this._team.member;p_g<b_s.length;p_g++){var d_u=b_s[p_g],b_e=LgcM.ins.getActorById(d_u.pid,Engine2d.ActorTypeDefine.PLAYER);b_e&&b_e.initAndShowTeamTag(!0)}},e.prototype.canEnterStateBoss=function(){if(!p_k.instance.checkSystemOpen(FuncDefine.stateBoss))return!1;var p_l=e.instance.getNearestStateBoss(),p_g=p_l[0],b_s=p_l[1];return!(!this.isStateBossAlive()||b_s||!p_g)},e.prototype.canSweepPagoda=function(){return!!p_k.instance.checkSystemOpen(FuncDefine.pagoda)&&!e.instance.isPagodaSweep&&0!==e.instance._pagodaSweepFbId&&!e.instance.isPagodaSweep},e.prototype.reqPagodaCanSweepFbId=function(){var e=new c2m_fb_pagoda_cansweep;DB.instance.query(c2m_fb_pagoda_cansweep,e)},e.prototype.reqSetAttackTargetType=function(e,p_l){var p_g=new c2m_fb_set_attack_target_type;p_g.type=e,p_g.id=p_l,DB.instance.query(c2m_fb_set_attack_target_type,p_g)},e.prototype.reqFbPlrList=function(){var e=new c2m_fb_plr_list;DB.instance.query(c2m_fb_plr_list,e)},e.prototype.reqSweepPagoda=function(){var e=new c2m_fb_sweep_pagoda;DB.instance.query(c2m_fb_sweep_pagoda,e)},e.prototype.sortBossLst=function(e){var p_l=Config.fb_dungeon[e];if(p_l&&p_l.maxTimes){var p_g=p_l.stateLv,b_s=this._dungeonInfo[e];if(p_g&&(!b_s||b_s.count<p_l.maxTimes))return 0}return 1},e.prototype.SureBtnOpen=function(e){this.reqTeamMemberFbList(e[0],e[1]);for(var p_l=0,p_g=e[1];p_l<p_g.length;p_l++){var b_s=p_g[p_l];FriendModel.instance.reqAddFriend(b_s.pid)}},e.prototype.reqFbTeamInvite=function(e){var p_l=new c2m_fb_team_invite;p_l.pid=e,DB.instance.query(c2m_fb_team_invite,p_l)},e.prototype.onFbStateStartDmg=function(e){LED.event(l_r.FB_STATE_START_DMG);var p_l=LgcM.ins.getActorById(b_p.playerId,Engine2d.ActorTypeDefine.PLAYER);p_l&&p_l.sit(0,!0)},e.prototype.reqEnterFb=function(e,p_l,p_g){void 0===p_l&&(p_l=0),void 0===p_g&&(p_g=null);var b_s=new c2w_enter_fb;b_s.fbId=e,b_s.teamId=p_l,b_s.otherParam=p_g,DB.instance.query(c2w_enter_fb,b_s)},e.prototype.onPassedFbList=function(e){if(e&&e.passed_fb&&e.passed_fb[0]){for(var p_l=0,p_g=0,b_s=e.passed_fb;p_g<b_s.length;p_g++){var d_u=b_s[p_g],b_e=this._dungeonInfo[d_u.id];b_e||(this._dungeonInfo[d_u.id]=b_e=new DungeonInfoVo),b_e.setDungeonInfo(d_u),this.isStoryFb(d_u.id)&&(p_l=p_l<d_u.id?d_u.id:p_l),this.notRemindFb[d_u.id]=!!d_u.notRemind,this.openTimeRecord(b_e)}GlobalData.expFbId=p_l,GPlatform.isIosShow&&LED.event(l_r.FB_INFO_UPDATE),ActivityModel.instance.updateCharge(),LED.event(l_r.FB_RED_POINT_UPDATE)}},e.prototype.onFbTeamList=function(e){Kgd(e,LED,l_r)},e.prototype.isStoryFb=function(e){return Ajg(e,Config,DungeonType)},e.prototype.updateFbHeavenOpenData=function(e){Eur(e,this)},e.prototype.onFbRemind=function(p_l,p_g){if(void 0===p_g&&(p_g=!0),LgcM.ins.heroVo){if(!p_l.isShutdown&&!e.instance.notRemindFb[p_l.fbId]){var b_s=Config.fb_dungeon[p_l.fbId];if(b_s&&b_s.type===DungeonType.WildBoss)this.canChallenge(p_l.fbId)&&this.canEnterWildBoss()&&UI.FbRemindPanel.open(p_l.fbId);else if(b_s&&b_s.type===DungeonType.StateBoss){var d_u=this.getStateBossCurConf();if(d_u&&d_u.id===p_l.fbId){var b_e=Config.map[b_p.mapID];b_e&&b_e.funType&&(b_e.funType==MapFunType.CITY||b_e.funType==MapFunType.HangUp||b_e.funType==MapFunType.WILD)&&UI.FbRemindPanel.open(p_l.fbId)}}}var d_m=Config.fb_dungeon[p_l.fbId];if(d_m){if(d_m.type===DungeonType.WildBoss)(d_w=this._wildBossInfo[p_l.fbId])&&(d_w.isOpen=!p_l.isShutdown);else if(d_m.type===DungeonType.StateBoss){var d_w;(d_w=this._stateBossInfo[p_l.fbId])&&(d_w.isOpen=!p_l.isShutdown)}LED.event(l_r.FB_RED_POINT_UPDATE)}}else{if(!p_g)return;Laya.timer.once(1e3,this,this.onFbRemind,[p_l,!1])}},e.prototype.onFbSerDmgRank=function(e){Cyl(e,this,LED,l_r)},e.prototype.reqPassedFbList=function(e){void 0===e&&(e=0);var p_l=new c2m_passed_fb_list;p_l.fbType=e,DB.instance.query(c2m_passed_fb_list,p_l)},e.prototype.canEnterGerenById=function(e){var p_l=Config.fb_dungeon[e];if(p_l&&p_l.maxTimes){var p_g=this._dungeonInfo[e];if(!p_g||p_g.count<p_l.maxTimes)return!0}return!1},e.prototype.updateFbHeavenOpenWatch=function(e){Kbi(e,console)},e.prototype.reqFbHeavenOpenWatch=function(){var e=new c2m_fb_heaven_open_watch;DB.instance.query(c2m_fb_heaven_open_watch,e)},e.prototype.canEnterStoryFb=function(e){void 0===e&&(e=!1);var p_l=LgcM.ins.heroVo,p_g=this.getNextFb(DungeonType.Story),b_s=p_g[0],d_u=p_g[1];0==b_s&&(b_s=d_u);var b_e=Config.fb_dungeon[d_u],d_m=!0,d_w=Config.fb_story[b_e.id];return Config.fb_story[d_u]?!e&&d_w.fight>p_l.fight?(b_p.broadcastNotice((j_x("383_767_2462")+j_x(1779))),!1):!!b_p.checkReqEnterFb()&&(b_e&&d_w.taskId&&(d_m=p_p.instance.checkIsFinish(d_w.taskId)),!!d_m||(b_p.broadcastNotice((j_x("774_1624_1917")+j_x("402_573"))+d_w.unlock+(j_x("2112_30_595"))),!1)):(d_u=b_s,b_p.broadcastNotice((j_x("1300_1331_254")+j_x("2057_1081_2251")+j_x(1778))),!1)},e.prototype.updateTianJieOpenRed=function(){var e=Config.funcOpen[10055],p_l=e.condition[0][1],p_g=e.condition[0][2];return LgcM.ins.heroVo.stateLv>=p_l&&StateModel.instance.getStateSubLv()>=p_g&&0==LgcM.ins.heroVo.heavenOpenState},e}();!function(e){e[e.Story=1]="Story",e[e.Personal=2]="Personal",e[e.WildBoss=3]="WildBoss",e[e.StateBoss=4]="StateBoss",e[e.Pagoda=5]="Pagoda",e[e.Team=6]="Team",e[e.State=7]="State",e[e.GuildBoss=8]="GuildBoss",e[e.BossCome=9]="BossCome",e[e.Ascent=11]="Ascent",e[e.TsBoss=12]="TsBoss",e[e.Rare=13]="Rare",e[e.RewardBoss=15]="RewardBoss",e[e.tianjieOpenBoss=16]="tianjieOpenBoss",e[e.ChristamasBoss=17]="ChristamasBoss",e[e.CossBoss=101]="CossBoss",e[e.TreaureM=102]="TreaureM",e[e.TreaureB=103]="TreaureB",e[e.SouthSkyBoss=104]="SouthSkyBoss"}(DungeonType=DungeonType||{}),function(e){e[e.StoryBegin=10001]="StoryBegin",e[e.PagodaBegin=50001]="PagodaBegin",e[e.StateBegin=70001]="StateBegin"}(DungeonDefine=DungeonDefine||{});var f_a=function(){function e(){this.bossInfo={},this.bosscfgIndexs=[],this.didTiredInfo=new m2c_crossboss_reborn_weariness,this.didTiredInfo.num=0,this.didTiredInfo.time=0,this.crossBossEnterCD=0,this.crossBossOwnerInfo=new m2c_crossboss_owner,this.timeBoss1ActId=70,this.timeBoss2ActId=71,this.hasOpenPanel=!1,this.currBossEndStr=""}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"challengeTimes",{get:function(){return Config.global[1810].i_info-this.infoChallengeTimes+this.infoVipTimes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"challengeVipTimes",{get:function(){return Config.recharge_vip[LgcM.ins.heroVo.vipLv].crossBuyTimes-this.infoVipTimes},enumerable:!0,configurable:!0}),e.prototype.getReliveGold=function(e){var p_l=LgcM.ins.heroVo,p_g=Config.reborn[e],b_s=Math.min(p_g.consume.length-1,Math.max(p_l.goldReborn-1,0));return p_g.consume[b_s]?p_g.consume[b_s]:0},e.prototype.isMoreChallenge=function(e){var p_l=StateModel.instance.getStateLv(),p_g=StateModel.instance.getStateSubLv(),b_s=Config.fb_crossboss[e];if(b_s.cond[2])if(2<=b_s.cond[2].length){if(b_s.cond[2][0]<p_l)return!0;if(b_s.cond[2][1]==p_l&&null!=b_s.cond[2][1]&&b_s.cond[2][1]<p_g)return!0}else if(b_s.cond[2][0]<p_l)return!0;return!1},e.prototype.isLessChallenge=function(e){var p_l=StateModel.instance.getStateLv(),p_g=StateModel.instance.getStateSubLv(),b_s=Config.fb_crossboss[e];if(b_s.cond[1])if(2<=b_s.cond[1].length){if(b_s.cond[1][0]>p_l)return!0;if(b_s.cond[1][1]==p_l&&null!=b_s.cond[1][1]&&b_s.cond[1][1]>p_g)return!0}else if(b_s.cond[1][0]>p_l)return!0;return!1},Object.defineProperty(e.prototype,"bossCfg",{get:function(){if(!this.bossCfgInfo){for(var e in this.bossCfgInfo={},Config.fb_crossboss){var p_l=Config.fb_crossboss[e].grade;this.bossCfgInfo[p_l]||(this.bossCfgInfo[p_l]=new Array),this.bossCfgInfo[p_l].push(Config.fb_crossboss[e].id)}for(var e in this.bossCfgInfo)this.bosscfgIndexs.push(parseInt(e))}return this.bossCfgInfo},enumerable:!0,configurable:!0}),e.prototype.getBossArrayByGard=function(e){for(var p_l=0,p_g=this.bosscfgIndexs.length,b_s=0;b_s<p_g;b_s++)e==this.bosscfgIndexs[b_s]&&(p_l=b_s);var d_u=[],b_e=Math.min(p_g-1,p_l+1);for(b_s=Math.max(0,p_l-1);b_s<=b_e;b_s++)d_u.push(this.bosscfgIndexs[b_s]);return d_u},e.prototype.challengeBossById=function(p_l,p_g){void 0===p_g&&(p_g=!0);var b_s=Config.fb_crossboss[p_l],d_u=e.instance.bossInfo[p_l];if(d_u)if(e.instance.isLessChallenge(p_l))if(b_s){var b_e=Config.state_state[b_s.cond[1][0]].desc+(0<b_s.cond[1][1]?Config.state_stateSub[b_s.cond[1][1]].desc:"");b_p.broadcastNotice(Utils.$((j_x("2116_1853_74")+j_x(2080)+""+j_x("1777_1067_189")+j_x("320_2249_266")+j_x(2057)+"[{1}]"),b_e))}else b_p.broadcastNotice((j_x("2116_1853_74")+j_x(2080)+""+j_x("1777_1067_189")+j_x("320_2249_266")));else e.instance.isMoreChallenge(p_l)?b_p.broadcastNotice((j_x("1067_189_677")+j_x("767_2016_359")+""+j_x("1529_1026_803")+j_x("2040_15_1747")+j_x("2116_1853_2224")+j_x(2364))):d_u.recoverTime<=SyncTime.serverTime?0<e.instance.challengeTimes?b_p.reqEnterFb(d_u.id,UI.crossBossMainPanel,b_p.mapID):0<e.instance.challengeVipTimes?UI.crossBossBuyTips.open():b_p.broadcastNotice((j_x("2339_1254_2235")+j_x("83_235_2348")+j_x("1300_1876_2301")+""+j_x("1628_371")+"VIP"+j_x("15_2342_437")+j_x("223_1067_2128"))):b_p.broadcastNotice((j_x("1853_1025_1300")+j_x("1629_1835_1373")+""+j_x("1777_1067_189")+j_x("606_1865_1953")+j_x(1739)))},e.prototype.reqCrossBossKilled=function(){var e=new c2m_crossboss_reborn_weariness;DB.instance.query(c2m_crossboss_reborn_weariness,e)},e.prototype.getMinChallengeBoss=function(){var e=0;for(var p_l in Config.fb_crossboss){var p_g=Config.fb_crossboss[p_l];this.isLessChallenge(p_g.id)||this.isMoreChallenge(p_g.id)||(e=p_g.grade)}return e},e.prototype.getSkewByGarde=function(e,p_l){for(var p_g=0,b_s=this.bosscfgIndexs.length,d_u=0;d_u<this.bosscfgIndexs.length;d_u++)e==this.bosscfgIndexs[d_u]&&(p_g=d_u);if(p_l){var b_e=Math.min(b_s-1,p_g+1);return this.bosscfgIndexs[b_e]}var d_m=Math.max(0,p_g-1);return this.bosscfgIndexs[d_m]},e.prototype.reqBuyTimeInfo=function(){var e=new c2q_crossboss_buyrwdtimes;DB.instance.query(c2q_crossboss_buyrwdtimes,e)},e.prototype.onCrossBossKilled=function(e){var p_l=Config.map[b_p.mapID];p_l&&"cross_boss"==p_l.impl&&UI.crossBossFightTips.open(2,e)},e.prototype.onBossInfo=function(e){if(e&&e.list){for(var p_l in this.isBack=!0,this.infoChallengeTimes=e.rwdTimes,this.infoVipTimes=e.rwdBuy,this.bossInfo={},e.list)this.bossInfo[e.list[p_l].id]=e.list[p_l];LED.event(l_r.CROSS_BOSS_INFO)}else b_p.broadcastNotice((j_x("1662_1998_206")+j_x("155_1186")))},e.prototype.Format=function(e){return e<10?"0"+e:e},e.prototype.getNextBossStartTime=function(){var e,p_l=Math.floor(SyncTime.serverTime/1e3),p_g=1/0,b_s=0;for(var d_u in Config.activity_activity){var b_e=Config.activity_activity[d_u];if("CS_timeCrossBoss"===b_e.type){var d_m=Config.Utils.parseActivityStartTime(b_e),d_w=Config.Utils.parseActivityEndTime(b_e);d_m<p_l&&d_w<p_l?d_m=Config.Utils.nextActTime(b_e,d_m):p_l<d_m||(b_s=d_w,d_m=Config.Utils.nextActTime(b_e,d_m)),d_m<p_g&&(p_g=d_m)}}var f_t=new Date(1e3*b_s),v_z=new Date(1e3*p_g),d_h=new Date(1e3*p_g);d_h.setHours(0,0,0,0);var r_t=new Date(SyncTime.serverTime);r_t.setHours(0,0,0,0),e=0!=d_h.valueOf()/1e3-r_t.valueOf()/1e3;var t_n=this.Format(f_t.getHours())+":"+this.Format(f_t.getMinutes()),f_y=this.Format(v_z.getHours())+":"+this.Format(v_z.getMinutes());this.nextBossTimeStr=e?Utils.$((j_x("1853_1025_1409")+j_x("558_235_1254")+"{1}"),f_y):Utils.$((j_x("1853_1025_1409")+j_x(558)+"{1}"),f_y),this.currBossEndTime=b_s,this.currBossEndStr=t_n},e.prototype.onCrossBossBeKilled=function(e){Mnd(e,this,LED,l_r)},e.prototype.isChangeGardeById=function(p_l,p_g){void 0===p_g&&(p_g=!0);var b_s=!1,d_u=0,b_e=!1;for(var d_m in p_l)b_s||(d_u=p_l[d_m],b_s=e.instance.isLessChallenge(p_l[d_m])),b_e=b_e||e.instance.isMoreChallenge(p_l[d_m]);if(p_g)if(b_s){var d_w=Config.fb_crossboss[d_u];if(d_w){var f_t=Config.state_state[d_w.cond[1][0]].desc+(0<d_w.cond[1][1]?Config.state_stateSub[d_w.cond[1][1]].desc:"");b_p.broadcastNotice(Utils.$((j_x("2116_1853_74")+j_x(2080)+""+j_x("1777_1067_189")+j_x("320_2249_266")+j_x(2057)+"[{1}]"),f_t))}}else b_e&&b_p.broadcastNotice((j_x("1067_189_677")+j_x("767_2016_359")+""+j_x("1529_1026_803")+j_x("2040_15_1747")+j_x("2116_1853_2224")+j_x(2364)));return!b_s&&!b_e},e.prototype.onBossownership=function(e){Cvf(e,this,LED,l_r)},e.prototype.onCrossBossTimesBuy=function(e){b_p.broadcastNotice((j_x("1355_2420_402")+j_x(2142))),UI.crossBossBuyTips.close(),this.infoVipTimes=e.rwdBuy,LED.event(l_r.CROSS_BOSS_REf_TIMES)},e.prototype.numToChinese=function(e){var p_l=e.toString(),p_g="",b_s=[(j_x(1737)),(j_x(158)),(j_x(1470)),(j_x(2107)),(j_x(379)),(j_x(1223)),(j_x(1247)),(j_x(1170)),(j_x(251)),(j_x(545))];if(10<e)for(var d_u=p_l.length-1;0<=d_u;d_u--)b_s[parseInt(p_l[d_u])-1]?p_g+=b_s[parseInt(p_l[d_u])-1]:p_g+=b_s[9];else p_g+=b_s[e-1];return p_g},e.prototype.reqBossInfo=function(){var e=new c2q_crossboss_list;DB.instance.query(c2q_crossboss_list,e)},e.prototype.getTimestamp=function(e){return Ggo(e,Config)},e}(),BossComeModel=function(){function e(){}return Object.defineProperty(e.prototype,"info",{get:function(){return this._info||(this._info=new BossComeInfo),this._info},enumerable:!0,configurable:!0}),e.prototype.getIsInActivity=function(){var p_l=0;for(var p_g in Config.activity_activity){var b_s=Config.activity_activity[p_g];if(b_s.type==ActivityTypeDefine.GS_bossCome){var d_u=b_s.startTime.split(":"),b_e=new Date;b_e.setTime(SyncTime.serverTime),b_e.setHours(parseInt(d_u[0]),parseInt(d_u[1]),0);var d_m=SyncTime.serverTime-b_e.getTime(),d_w=Config.Utils.parseActivityKeepTime(b_s);if(0<d_m&&d_m<1e3*d_w)return e.instance.info.isOpen=1,Math.floor((1e3*d_w-d_m)/1e3);0<(d_m=b_e.getTime()-SyncTime.serverTime)&&(0==p_l||d_m<p_l)&&(p_l=d_m),b_e.setTime(b_e.getTime()+864e5),0<(d_m=b_e.getTime()-SyncTime.serverTime)&&(0==p_l||d_m<p_l)&&(p_l=d_m)}}return e.instance.info.isOpen=0,Math.floor(p_l/1e3)},e.reqBossComeGetReward=function(){DB.instance.query(c2w_bosscome_get_reward,new c2w_bosscome_get_reward)},e.reqBossComeInfo=function(){DB.instance.query(c2w_bosscome_info,new c2w_bosscome_info)},e.reqBossComeGuildRank=function(){DB.instance.query(c2w_bosscome_rank_guild,new c2w_bosscome_rank_guild)},e.reqBossComeChallengeRecord=function(){DB.instance.query(c2w_bosscome_challenge_record,new c2w_bosscome_challenge_record)},e.reqBossComeInspire=function(){DB.instance.query(c2w_bosscome_inspire,new c2w_bosscome_inspire)},e.reqBossComeChallengeList=function(){DB.instance.query(c2w_bosscome_challenge_list,new c2w_bosscome_challenge_list)},e.reqBossComePlayerRank=function(){DB.instance.query(c2w_bosscome_rank_plr,new c2w_bosscome_rank_plr)},e.reqBossComeBuyTimes=function(e){var p_l=new c2w_bosscome_buy_times;p_l.type=e,DB.instance.query(c2w_bosscome_buy_times,p_l)},e.reqBossComeKillRecord=function(){DB.instance.query(c2w_bosscome_kill_record,new c2w_bosscome_kill_record)},e.reqBossComeChallenge=function(e){void 0===e&&(e=0);var p_l=new c2w_bosscome_challenge;p_l.pid=e,DB.instance.query(c2w_bosscome_challenge,p_l)},e.prototype.initActors=function(e){this.pvpInfo=e;var p_l=LgcM.ins.getActorById(e.id,Engine2d.ActorTypeDefine.PLAYER);if(!p_l){var p_g=Engine2d.PlayerVo.freeStdInfo(Engine2d.ActorTypeDefine.PLAYER,Engine2d.PlayerVo);p_g.id=e.id,p_g.name=e.name,p_g.entryId=e.entryId||1,p_g.px=p_g.py=p_g.endPx=p_g.endPy=0,p_g.speed=LgcM.ins.heroVo.speed,LgcM.ins.addActorInfo(Engine2d.ActorTypeDefine.PLAYER,p_g),LgcM.ins.addActorEntity(Engine2d.ActorTypeDefine.PLAYER,p_g),p_l=LgcM.ins.getActorById(p_g.id,Engine2d.ActorTypeDefine.PLAYER)}p_l.setNameTxtVisible(!1),p_l.initAutoCopy(GlobalDefine.pvp_born_pos),Engine2d.Hero.local.initAutoCopy(GlobalDefine.pvp_born_pos),Engine2d.Hero.local.setNameTxtVisible(!1)},e.instance=new e,e}(),BossComeInfo=function(){function e(){this.inspireTimes=0}return e.prototype.update=function(e){Ion(e,this)},e.prototype.updateHp=function(e){Gci(e,this)},e}(),AscentVO=function(){function e(){this.seekCount=0,this.helpCount=0}return Object.defineProperty(e.prototype,"remainSeekCount",{get:function(){return Config.global[GlobalDefine.ascent_seek_count].i_info-this.seekCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"remainHelpCount",{get:function(){return Config.global[GlobalDefine.ascent_help_count].i_info-this.helpCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rewardBossRemainSeekCount",{get:function(){return Config.global[GlobalDefine.rewardBoss_seek_count].i_info-this.seekCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rewardBossRemainHelpCount",{get:function(){return Config.global[GlobalDefine.rewardBoss_help_count].i_info-this.helpCount},enumerable:!0,configurable:!0}),e}(),RewardBossModel=function(){function e(){for(var e in this._rewardBossStates={},this._maxState=0,this._minState=0,this._maxFloor=0,this.sendSource="",this._currSelec=0,this._count=0,Config.fb_xuanshang){var p_l=Config.fb_xuanshang[e];0==this._count&&(this._minState=p_l.state,++this._count),null==this._rewardBossStates[p_l.state]&&(this._rewardBossStates[p_l.state]=[]),this._rewardBossStates[p_l.state].push(p_l),this._maxState<p_l.state&&(this._maxState=p_l.state),this._minState>p_l.state&&(this._minState=p_l.state),this._maxFloor<p_l.floor&&(this._maxFloor=p_l.floor)}}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rewardBossVo",{get:function(){return this._rewardBossVO||(this._rewardBossVO=new AscentVO),this._rewardBossVO},enumerable:!0,configurable:!0}),e.prototype.getRewardBossListByState=function(e){return Mwz(e,this)},e.prototype.getRewardBossStatus=function(e,p_l){var p_g,b_s=StateModel.instance.getStateLv(),d_u=this.rewardBossVo.lastFbId,b_e=Config.fb_xuanshang[d_u];return b_e&&b_e.state!=e?b_e.state<e?AscentCellStatus.OTHER:AscentCellStatus.NO_PASS:(p_g=b_e&&b_e.state!=b_s&&b_e.state==e?(b_s=b_e.state,b_e.floor+1):b_e?b_e.floor+1:1,b_s==e&&p_g==p_l?AscentCellStatus.OPEN:b_s==e&&p_l<p_g?AscentCellStatus.PASS:b_s==e&&p_g<p_l?AscentCellStatus.NO_PASS:AscentCellStatus.OTHER)},e.prototype.getRewardBossCfg=function(e,p_l){var p_g=this.getRewardBossListByState(e);if(p_g&&p_g.length)for(var b_s=p_g.length,d_u=0;d_u<b_s;d_u++){var b_e=p_g[d_u];if(b_e.floor==p_l)return b_e}return null},e.prototype.checkCanDo=function(){if(!p_k.instance.checkSystemOpen(FuncDefine.liudaoFb))return!1;var e=StateModel.instance.getStateLv(),p_l=Config.fb_xuanshang[this.rewardBossVo.lastFbId];if(p_l){var p_g=p_l.floor+1;return p_g=p_g>this._maxFloor?this._maxFloor:p_g,this.getRewardBossStatus(e,p_g)==AscentCellStatus.OPEN}return!0},e.prototype.checkStateDone=function(e){return Wjo(e,Config,this)},e.prototype.getFbResetRemainTime=function(){var e=Config.global[GlobalDefine.rewardBoss_reset_time].i_info;if(!this._date){this._date=new Date;var p_l=1e3*SyncTime.serverOpenTime;this._date.setTime(p_l);var p_g=this._date.getTime();this._date.setHours(4,59,59,999);var b_s=this._date.getTime()-p_g;this._date.setTime(p_l+b_s+1e3*SyncTime.DAY_SECOND*(e-1)),this._t=this._date.getTime()}var d_u,b_e=SyncTime.serverTime;if(this._t>b_e)d_u=this._t-b_e;else{var d_m=Math.ceil((b_e-this._t)/(1e3*SyncTime.DAY_SECOND));d_m=d_m%e!=0?d_m+1:d_m,d_u=this._t+d_m*(1e3*SyncTime.DAY_SECOND)-b_e}return d_u<=0&&this.reqRewardBossInfo(),d_u},Object.defineProperty(e.prototype,"maxState",{get:function(){return this._maxState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minState",{get:function(){return this._minState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxFloor",{get:function(){return this._maxFloor},enumerable:!0,configurable:!0}),e.prototype.reqRewardBossInfo=function(e){void 0===e&&(e=""),this.sendSource=e,DB.instance.query(c2m_fb_xuanshang_info,{})},e}(),RareAnimalModel=function(){function e(){for(var e in this._rareAnimalStates={},this._maxState=0,this._minState=5,this._maxFloor=0,this.sendSource="",this._count=0,Config.fb_yishou){var p_l=Config.fb_yishou[e];0==this._count&&(this._minState=p_l.state,++this._count),null==this._rareAnimalStates[p_l.state]&&(this._rareAnimalStates[p_l.state]=[]),this._rareAnimalStates[p_l.state].push(p_l),this._maxState<p_l.state&&(this._maxState=p_l.state),this._minState>p_l.state&&(this._minState=p_l.state),this._maxFloor<p_l.floor&&(this._maxFloor=p_l.floor)}}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rareAnimalVo",{get:function(){return this._rareAnimalVO||(this._rareAnimalVO=new AscentVO),this._rareAnimalVO},enumerable:!0,configurable:!0}),e.prototype.getRareAnimalListByState=function(e){return Mcu(e,this)},e.prototype.getRareAnimalStatus=function(e,p_l){var p_g,b_s=StateModel.instance.getStateLv(),d_u=this.rareAnimalVo.lastFbId,b_e=Config.fb_yishou[d_u];return b_e&&b_e.state!=e?b_e.state<e?AscentCellStatus.OTHER:AscentCellStatus.NO_PASS:(p_g=b_e&&b_e.state!=b_s&&b_e.state==e?(b_s=b_e.state,b_e.floor+1):b_e?b_e.floor+1:1,b_s==e&&p_g==p_l?AscentCellStatus.OPEN:b_s==e&&p_l<p_g?AscentCellStatus.PASS:b_s==e&&p_g<p_l?AscentCellStatus.NO_PASS:AscentCellStatus.OTHER)},e.prototype.getRareAnimaltCfg=function(e,p_l){var p_g=this.getRareAnimalListByState(e);if(p_g&&p_g.length)for(var b_s=p_g.length,d_u=0;d_u<b_s;d_u++){var b_e=p_g[d_u];if(b_e.floor==p_l)return b_e}return null},e.prototype.checkStateDone=function(e){return Evo(e,Config,this)},e.prototype.checkCanDo=function(){if(!p_k.instance.checkSystemOpen(FuncDefine.yishouFb))return!1;var e=StateModel.instance.getStateLv(),p_l=Config.fb_yishou[this.rareAnimalVo.lastFbId];if(p_l){var p_g=p_l.floor+1;return p_g=p_g>this._maxFloor?this._maxFloor:p_g,this.getRareAnimalStatus(e,p_g)==AscentCellStatus.OPEN}return!0},e.prototype.getFbResetRemainTime=function(){var e=Config.global[GlobalDefine.rareAnimal_reset_time].i_info;if(!this._date){this._date=new Date;var p_l=1e3*SyncTime.serverOpenTime;this._date.setTime(p_l);var p_g=this._date.getTime();this._date.setHours(4,59,59,999);var b_s=this._date.getTime()-p_g;this._date.setTime(p_l+b_s+1e3*SyncTime.DAY_SECOND*(e-1)),this._t=this._date.getTime()}var d_u,b_e=SyncTime.serverTime;if(this._t>b_e)d_u=this._t-b_e;else{var d_m=Math.ceil((b_e-this._t)/(1e3*SyncTime.DAY_SECOND));d_m=d_m%e!=0?d_m+1:d_m,d_u=this._t+d_m*(1e3*SyncTime.DAY_SECOND)-b_e}return d_u<=0&&this.reqRareAnimal(),d_u},Object.defineProperty(e.prototype,"maxState",{get:function(){return this._maxState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minState",{get:function(){return this._minState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxFloor",{get:function(){return this._maxFloor},enumerable:!0,configurable:!0}),e.prototype.reqRareAnimal=function(e){void 0===e&&(e=""),this.sendSource=e,DB.instance.query(c2m_fb_yishou_info,{})},e}(),AscentCellStatus,AscentModel=function(){function e(){for(var e in this._ascentStates={},this._maxState=0,this._minState=0,this._maxFloor=0,this.sendSource="",this._currSelec=0,this._count=0,Config.fb_ascent){var p_l=Config.fb_ascent[e];0==this._count&&(this._minState=p_l.state,++this._count),null==this._ascentStates[p_l.state]&&(this._ascentStates[p_l.state]=[]),this._ascentStates[p_l.state].push(p_l),this._maxState<p_l.state&&(this._maxState=p_l.state),this._minState>p_l.state&&(this._minState=p_l.state),this._maxFloor<p_l.floor&&(this._maxFloor=p_l.floor)}}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ascentVo",{get:function(){return this._ascentVO||(this._ascentVO=new AscentVO),this._ascentVO},enumerable:!0,configurable:!0}),e.prototype.getAscentListByState=function(e){return Mar(e,this)},e.prototype.checkCanDo=function(){if(!p_k.instance.checkSystemOpenByName("AscentPanel"))return!1;var e=StateModel.instance.getStateLv(),p_l=Config.fb_ascent[this.ascentVo.lastFbId];if(p_l){var p_g=p_l.floor+1;return p_g=p_g>this._maxFloor?this._maxFloor:p_g,this.getAscentStatus(e,p_g)==AscentCellStatus.OPEN}return!0},e.prototype.getAscentCfg=function(e,p_l){var p_g=this.getAscentListByState(e);if(p_g&&p_g.length)for(var b_s=p_g.length,d_u=0;d_u<b_s;d_u++){var b_e=p_g[d_u];if(b_e.floor==p_l)return b_e}return null},e.prototype.getAscentStatus=function(e,p_l){var p_g,b_s=StateModel.instance.getStateLv(),d_u=this.ascentVo.lastFbId,b_e=Config.fb_ascent[d_u];return b_e&&b_e.state!=e?b_e.state<e?AscentCellStatus.OTHER:AscentCellStatus.NO_PASS:(p_g=b_e&&b_e.state!=b_s&&b_e.state==e?(b_s=b_e.state,b_e.floor+1):b_e?b_e.floor+1:1,b_s==e&&p_g==p_l?AscentCellStatus.OPEN:b_s==e&&p_l<p_g?AscentCellStatus.PASS:b_s==e&&p_g<p_l?AscentCellStatus.NO_PASS:AscentCellStatus.OTHER)},e.prototype.checkStateDone=function(e){return Qyt(e,Config,this)},e.prototype.getFbResetRemainTime=function(){var e=Config.global[GlobalDefine.ascent_reset_time].i_info;if(!this._date){this._date=new Date;var p_l=1e3*SyncTime.serverOpenTime;this._date.setTime(p_l);var p_g=this._date.getTime();this._date.setHours(4,59,59,999);var b_s=this._date.getTime()-p_g;this._date.setTime(p_l+b_s+1e3*SyncTime.DAY_SECOND*(e-1)),this._t=this._date.getTime()}var d_u,b_e=SyncTime.serverTime;if(this._t>b_e)d_u=this._t-b_e;else{var d_m=Math.ceil((b_e-this._t)/(1e3*SyncTime.DAY_SECOND));d_m=d_m%e!=0?d_m+1:d_m,d_u=this._t+d_m*(1e3*SyncTime.DAY_SECOND)-b_e}return d_u<=0&&this.reqAscentInfo(),d_u},Object.defineProperty(e.prototype,"maxState",{get:function(){return this._maxState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minState",{get:function(){return this._minState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxFloor",{get:function(){return this._maxFloor},enumerable:!0,configurable:!0}),e.prototype.reqAscentInfo=function(e){void 0===e&&(e=""),this.sendSource=e,DB.instance.query(c2m_fb_ascent_info,{})},e}();!function(e){e[e.OPEN=1]="OPEN",e[e.PASS=2]="PASS",e[e.NO_PASS=3]="NO_PASS",e[e.OTHER=4]="OTHER"}(AscentCellStatus=AscentCellStatus||{});var l_s=function(){function e(){DB.instance.on(m2c_fb_ascent_info.opcode.toString(),this,this.onAscentInfo),DB.instance.on(m2c_fb_yishou_info.opcode.toString(),this,this.onRareAnimalInfo),DB.instance.on(m2c_fb_xuanshang_info.opcode.toString(),this,this.OnRewardBossInfo)}return e.prototype.onAscentInfo=function(e){var p_l=AscentModel.instance.ascentVo;p_l.lastFbId=e.fbId,p_l.seekCount=e.seek,p_l.helpCount=null==e.help?0:e.help,null!=p_l.lastFbId&&0<p_l.lastFbId&&(Config.fb_ascent[p_l.lastFbId+1]||TeamModel.instance.checkHaveTeam(TeamAimsType.ASCENT)&&TeamModel.instance.reqTeamDisband()),LED.event(l_r.ASCENT_UPDATE)},e.prototype.onRareAnimalInfo=function(e){var p_l=RareAnimalModel.instance.rareAnimalVo;p_l.lastFbId=e.fbId,p_l.seekCount=e.seek,p_l.helpCount=null==e.help?0:e.help,null!=p_l.lastFbId&&0<p_l.lastFbId&&(Config.fb_yishou[p_l.lastFbId+1]||TeamModel.instance.checkHaveTeam(TeamAimsType.RareAni)&&TeamModel.instance.reqTeamDisband()),LED.event(l_r.RAREANIMAL_UPDATE)},e.prototype.OnRewardBossInfo=function(e){var p_l=RewardBossModel.instance.rewardBossVo;p_l.lastFbId=e.fbId,p_l.seekCount=e.seek,p_l.helpCount=null==e.help?0:e.help,null!=p_l.lastFbId&&0<p_l.lastFbId&&(Config.fb_xuanshang[p_l.lastFbId+1]||TeamModel.instance.checkHaveTeam(TeamAimsType.RewardBossAni)&&TeamModel.instance.reqTeamDisband()),LED.event(l_r.REWARD_BOSS_UPDATE)},e}(),dreamlandVo=function(){function e(){this.init()}return e.splitHistoryInfo=function(e){if(!e)return"";var p_l=Utils.setColor("["+e.params[1]+"]","#1860ca");switch(e.type){case 1:p_l+=(j_x("1365_1876_2217")+j_x("1841_1357_1571")+j_x("799_980")+""+j_x("155_2086_507")+j_x("1913_436_1879"));break;case 2:p_l+=(j_x("2456_953_799")+j_x(980));break;case 3:p_l+=(j_x("1775_2229_2217")+j_x("562_2251_401")+j_x(1409))+Utils.setColor("["+e.params[2]+"]","#1860ca")+(j_x("557_203_799")+j_x(980)+""+j_x("464_562_2456")+j_x(953));break;case 4:p_l+=(j_x("2082_2462_716")+j_x("767_1321_1296")+j_x("799_980")+""+j_x(1629))+Utils.setColor("["+e.params[2]+"]","#1860ca")+(j_x("571_2142_410")+j_x(997));break;case 5:p_l+=(j_x("1365_1876"))+Utils.setColor(e.params[2]+"*1","#008931")+(j_x("4_767_1375")+j_x(437)+"1"+j_x("1747_1702_2462")+j_x("2360_2213_2142")+j_x("1522_1494"))}return p_l},e.prototype.init=function(){this.endTime=18e4*Math.random(),this.masterPlayer=null,this.players=new Array},e.prototype.stateStr=function(e,p_l){if(0==e)return dreamlandModel.stateStr(this.masterPlayer.base.stateLv,this.masterPlayer.base.stateSubLv,"-");var p_g=this.players[e-1];return p_g?dreamlandModel.stateStr(p_g.base.stateLv,p_g.base.stateSubLv,"-"):""},Object.defineProperty(e.prototype,"overplustTime",{get:function(){return this.endTime-SyncTime.serverTime/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"masterPid",{get:function(){return this.masterPlayer.base.pid},enumerable:!0,configurable:!0}),e.prototype.SetData=function(e){Ikg(e,this)},e.prototype.getPlayer=function(e){return 0==e?this.masterPlayer:this.players[e-1]},e.prototype.getcfg=function(){return Aev(dreamlandModel,this)},e}(),universeSkillVo=function(){function e(){this.init()}return Object.defineProperty(e.prototype,"SkillLv",{get:function(){return this.lv},enumerable:!0,configurable:!0}),e.prototype.init=function(){Qzm(this)},e}(),dreamlandModel=function(){function e(){this._index=0,this._universeSkillDatas=[],this._SelfdreamlandInfo=null}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.skillCfg=function(e){return Cnu(e,Config)},e.prototype.IsRedPoint=function(){if(!p_k.instance.checkSystemOpenByName("dreamlandMianPanel"))return!1;if(this._universeSkillDatas&&0<this._universeSkillDatas.length)for(var p_l=0,p_g=this._universeSkillDatas;p_l<p_g.length;p_l++){var b_s=p_g[p_l].id+1;if((b_e=e.skillCfg(b_s))&&b_e.active<=LgcM.ins.heroVo.dreamlandExp)return!0}else for(var d_u=1001,b_e=Config.dreamland_dreamlandSkill[d_u];b_e;){if(b_e.active<=LgcM.ins.heroVo.dreamlandExp)return!0;d_u+=1e3,b_e=Config.dreamland_dreamlandSkill[d_u]}return!1},e.prototype.SkillAddLvByDeploymentID=function(e){var p_l=0,p_g=this.DreamlandSkillCfgs(0);if(this._universeSkillDatas&&0<this._universeSkillDatas.length)for(var b_s=0,d_u=p_g;b_s<d_u.length;b_s++)for(var b_e=d_u[b_s],d_m=0,d_w=this._universeSkillDatas;d_m<d_w.length;d_m++)d_w[d_m].id<b_e.id||e==b_e.effect[0][0]&&(p_l+=b_e.effect[0][1]);return p_l},e.prototype.DreamlandSkillCfgs=function(e){var p_l=[],p_g=0;for(var b_s in this._index=0,Config.dreamland_dreamlandSkill){var d_u=Config.dreamland_dreamlandSkill[b_s];p_g++,this._universeSkillDatas&&0<this._universeSkillDatas.length&&d_u.id==this._universeSkillDatas[e].id&&(this._index=p_g),e+1==Math.floor(d_u.id/1e3)&&p_l.push(Config.dreamland_dreamlandSkill[b_s])}return p_l},Object.defineProperty(e.prototype,"SkillDatas",{get:function(){return this._universeSkillDatas||(this._universeSkillDatas=new Array),this._universeSkillDatas},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsHaveDreamLand",{get:function(){return!!this._SelfdreamlandInfo},enumerable:!0,configurable:!0}),e.stateStr=function(e,p_l,p_g){return Iog(e,p_l,p_g,Config,StateModel)},e.prototype.onDreamlandSKillInfoList=function(e){this._universeSkillDatas=new Array;for(var p_l=0,p_g=e.list;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new universeSkillVo,b_e=b_s.id+b_s.lv;d_u.id=b_e,d_u.lv=b_s.lv,this._universeSkillDatas.push(d_u)}LED.event(l_r.DREAMLAND_SKILL_INFO_LIST)},e.prototype.onDreamlandBreak=function(e){(this._breakPb=e).tbase.stateLv==StateModel.instance.getStateLv()&&e.tbase.stateSubLv==StateModel.instance.getStateSubLv()?b_p.registerAutoOpenPanel(UI.dreamlandAltarPanel,UI.dreamlandAltarPanel.mapID):e.isWin&&(e.tbase.stateLv,UI.dreamlandWinPanel.open(e),0<UI.dreamlandAltarPanel.ID&&this.reqDreamlandQuery(UI.dreamlandAltarPanel.ID))},e.prototype.createActors=function(e){Otk(e,Engine2d,LgcM,GlobalDefine)},e.prototype.onDreamlandJoin=function(e){if(e.info){var p_l=new dreamlandVo;p_l.SetData(e.info),this._SelfdreamlandInfo=p_l,b_p.broadcastNotice((j_x("1067_189_402")+j_x("2142_665_2456")+j_x("799_980")+""),3,Config.color[1002].color),LED.event(l_r.DREAMLAND_JOIN_INFO,p_l)}else UI.dreamlandAltarPanel.close()},e.prototype.onSelfdreamlandInfo=function(e){if(e.info){var p_l=new dreamlandVo;p_l.SetData(e.info),this._SelfdreamlandInfo=p_l}else this._SelfdreamlandInfo=null},e.prototype.onDreamlandQuery=function(e){if(e.info){var p_l=new dreamlandVo;p_l.SetData(e.info),LED.event(l_r.DREAMLAND_QUERY_INFO,p_l)}else UI.dreamlandAltarPanel.close()},e.getcfg=function(e,p_l){var p_g=null;for(var b_s in Config.dreamland_dreamland){var d_u=Config.dreamland_dreamland[b_s];d_u.state<=e&&d_u.stateSub<=p_l&&(p_g=d_u)}return p_g},e.prototype.onDreamlandInfoList=function(e){this._dreamlandDatas=new Array;for(var p_l=0,p_g=e.list;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new dreamlandVo;d_u.SetData(b_s),this._dreamlandDatas.push(d_u)}LED.event(l_r.DREAMLANDMIAN_INFO_LIST)},e.prototype.sortDreamlandDatas=function(){return this._dreamlandDatas.sort((function(e,p_l){return p_l.masterPid===LgcM.ins.heroVo.id?1:e.masterPid===LgcM.ins.heroVo.id?-1:p_l.overplustTime-e.overplustTime})),this._dreamlandDatas},e.prototype.reqDreamlandInfoList=function(){var e=new c2w_dreamland_list;DB.instance.query(c2w_dreamland_list,e)},e.prototype.reqDreamlandStart=function(){var e=new c2w_dreamland_start;DB.instance.query(c2w_dreamland_start,e)},e.prototype.reqDreamlandJoin=function(e){var p_l=new c2w_dreamland_join;p_l.pid=e,DB.instance.query(c2w_dreamland_join,p_l)},e.prototype.reqDreamlandBreak=function(e,p_l){var p_g=new c2w_dreamland_break;p_g.pid=e,p_g.tpid=p_l,DB.instance.query(c2w_dreamland_break,p_g)},e.prototype.reqDreamlandSkillActive=function(e){var p_l=new c2m_dreamland_skill_learn;p_l.id=e,DB.instance.query(c2m_dreamland_skill_learn,p_l)},e.prototype.searchDreamlandInfoById=function(e){for(var p_l=0,p_g=this._dreamlandDatas;p_l<p_g.length;p_l++){var b_s=p_g[p_l];if(b_s.masterPid===LgcM.ins.heroVo.id)return b_s}return null},e.prototype.initOneselfActors=function(){Sbz(Engine2d,GlobalDefine)},e.prototype.reqDreamlandExitFight=function(){var e=new c2m_dreamland_fight_end;DB.instance.query(c2m_dreamland_fight_end,e)},e.prototype.onDreamlandStart=function(e){if(e.info){b_p.broadcastNotice((j_x("1067_189_1357")+j_x("1571_799_980")+j_x("402_2142")+""));var p_l=new dreamlandVo;p_l.SetData(e.info),this._SelfdreamlandInfo=p_l,LED.event(l_r.DREAMLAND_START_INFO,p_l)}else UIM.instance.isOpenWin(UI.dreamlandAltarPanel)&&UI.dreamlandAltarPanel.close(),b_p.broadcastNotice((j_x("1715_518_262")+j_x("381_455_1463")+j_x("803_1935")+" "+j_x("1777_1067_189")+j_x("606_1865_1953")+j_x(242)+""))},e.prototype.reqDreamlandQuery=function(e){var p_l=new c2w_dreamland_query;p_l.pid=e,DB.instance.query(c2w_dreamland_query,p_l)},e.prototype.sceneChange=function(){var e=Config.map[b_p.mapID];e&&e.funType===MapFunType.PVP&&"dreamland_break"==e.impl&&(this.createActors(this._breakPb.tbase),this.initOneselfActors(),UI.dreamlandPkPanel.open(this._breakPb))},e.prototype.onDreamlandActive=function(e){var p_l=e.info.id+e.info.lv,p_g=new universeSkillVo;if(p_g.lv=e.info.lv,p_g.id=p_l,!this._universeSkillDatas&&e.info&&(this._universeSkillDatas=[]),this._universeSkillDatas.length<=0)this._universeSkillDatas.push(p_g);else for(var b_s in this._universeSkillDatas)Math.floor(this._universeSkillDatas[b_s].id/1e3)==Math.floor(e.info.id/1e3)&&(this._universeSkillDatas[b_s]=p_g);LED.event(l_r.DREAMLAND_SKILL_INFO_LIST)},e.prototype.reqDreamlandSkilInfoList=function(){var e=new c2m_dreamland_skill;DB.instance.query(c2m_dreamland_skill,e)},e.prototype.reqDreamlandself=function(){var e=new c2w_dreamland_self_info;DB.instance.query(c2w_dreamland_self_info,e)},e.prototype.reqDreamlandProtect=function(){var e=new c2m_dreamland_protect;DB.instance.query(c2m_dreamland_protect,e)},e}(),OPType,ActiveType,DragonVo=function(){function e(){this.lv=0,this.exp=0,this.star=0,this.isActive=!1}return e.prototype.InitVo=function(e){e&&(this.id=e.id?e.id:0,this.lv=e.lv?e.lv:0,this.exp=e.exp?e.exp:0,this.star=e.star?e.star:1,this.isActive=!0)},e}();!function(e){e[e.DEBUS=0]="DEBUS",e[e.WEAR=1]="WEAR"}(OPType=OPType||{}),function(e){e[e.STATE=1]="STATE",e[e.ITEM=2]="ITEM"}(ActiveType=ActiveType||{});var b_l=function(){function e(){for(var e in this._cfgDragon=[],this._dragonInfo={},this._consumeItem={},Config.dragon_dragon)(p_l=Config.dragon_dragon[e]).itemActive&&0<p_l.itemActive.length&&(this._consumeItem[p_l.itemActive[0][0]]=p_l.itemActive[0][1]);for(var e in Config.dragon_dragonLevel)if((p_l=Config.dragon_dragonLevel[e]).cost&&0<p_l.cost.length){this._consumeItem[p_l.cost[0][0]]=p_l.cost[0][1];break}for(var e in Config.dragon_dragonStar){var p_l;if((p_l=Config.dragon_dragonStar[e]).cost&&0<p_l.cost.length){this._consumeItem[p_l.cost[0][0]]=p_l.cost[0][1];break}}}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allDragonCfg",{get:function(){if(!this._cfgDragon||this._cfgDragon.length<=0)for(var e in Config.dragon_dragon)this._cfgDragon.push(Config.dragon_dragon[e]);return this._cfgDragon.sort(this.sortCfgList),this._cfgDragon},enumerable:!0,configurable:!0}),e.prototype.sortCfgList=function(p_l,p_g){var b_s=e.instance.dragonIsCanActive(p_l.id)?0:1,d_u=e.instance.dragonIsCanActive(p_g.id)?0:1;return d_u==b_s&&1==d_u?(b_s=e.instance._dragonInfo[p_l.id]?0:1,(d_u=e.instance._dragonInfo[p_g.id]?0:1)==b_s&&1==d_u?p_l.id-p_g.id:b_s-d_u):b_s-d_u},e.prototype.countId=function(e,p_l,p_g){return void 0===p_g&&(p_g=1),1==p_g?100*e+p_l:2==p_g?100*p_l+e:0},Object.defineProperty(e.prototype,"wornDragon",{get:function(){return LgcM.ins.heroVo.dragonId},enumerable:!0,configurable:!0}),e.prototype.starMaxLV=function(e,p_l){var p_g=this.countId(e,p_l,2),b_s=Config.dragon_dragonStar[p_g];return b_s?b_s.limitLv:0},e.prototype.dragonIsUpStarEx=function(e,p_l,p_g){void 0===p_g&&(p_g=!1);var b_s=this._dragonInfo[p_l],d_u=this.countId(b_s.star,p_l,2),b_e=Config.dragon_dragonStar[d_u];return!(!b_e||!b_e.cost)&&b_p.checkConsume(b_e.cost,p_g)},e.prototype.onDragonInfo=function(e){if(e.dragonsoul){if(this._dragonInfo[e.dragonsoul.id])this._dragonInfo[e.dragonsoul.id].InitVo(e.dragonsoul);else{var p_l=new DragonVo;p_l.InitVo(e.dragonsoul),this._dragonInfo[e.dragonsoul.id]=p_l;var p_g=Config.dragon_dragon[p_l.id],b_s="";p_g.desc&&(b_s=p_g.desc),Config.dragon_dragon[this.wornDragon]||this.reqDragonOp(p_l.id,OPType.WEAR);var d_u=Utils.$((j_x("2335_1796")+"{1}"),b_s);b_p.broadcastNotice(d_u,1)}LED.event(l_r.DRAGON_ONE_INFO_UPDATE)}},e.prototype.reqDragonAutoFeed=function(e){var p_l=new c2m_dragonsoul_auto_feed;p_l.id=e,DB.instance.query(c2m_dragonsoul_auto_feed,p_l)},e.prototype.reqDragonActive=function(e,p_l){var p_g=new c2m_dragonsoul_active;p_g.id=e,p_g.ty=p_l,DB.instance.query(c2m_dragonsoul_active,p_g)},e.prototype.dragonIsUpStar=function(e,p_l,p_g){void 0===p_g&&(p_g=!1);var b_s=this.countId(e,p_l,2),d_u=this._dragonInfo[p_l],b_e=this.countId(d_u.star,p_l,2);if(d_u){var d_m=Config.dragon_dragonStar[b_s],d_w=Config.dragon_dragonStar[b_e];return d_m?d_u.lv>=d_w.limitLv?d_w.cost?BagModel.instance.getItemCountByItemID(d_w.cost[0][0],BagTypeDefine.BAG_TYPE_ITEM)>=d_w.cost[0][1]?UpState.CAN_UP:(p_g&&r_f.instance.isWindow(d_w.cost[0][0]),UpState.NOT_ENOUGH):UpState.CAN_UP:(p_g&&b_p.broadcastNotice((j_x("15_2342_1971")+j_x("1896_1117_1012")+j_x("371_1148_1320")+j_x(1283))),UpState.NOT_UP):(p_g&&b_p.broadcastNotice((j_x("1148_2342_1117")+j_x("1012_1081_1375"))),UpState.MAX_UP)}return UpState.NOT_ACTIVTED},e.prototype.isHaveRedPoint=function(e){var p_l=this._dragonInfo[e];return p_l?!!this.dragonIsUpStarEx(p_l.star,e)||1==this.dragonIsUpLV(p_l.lv+1,e)||1==this.dragonIsUpStar(p_l.star+1,e)||SkillModel.instance.isRedPoint(p_l.id,p_l.lv,p_l.star,PassiveSkillType.DRAGON):this.dragonIsCanActive(e)},e.prototype.getFightById=function(e){return Iao(e,b_p,this)},e.prototype.dragonIsUpLV=function(e,p_l){var p_g=this.countId(e,p_l,1),b_s=this._dragonInfo[p_l];if(b_s){var d_u=this.starMaxLV(b_s.star,p_l),b_e=Config.dragon_dragonLevel[p_g];return b_s.lv<d_u&&b_e?BagModel.instance.getItemCountByItemID(b_e.cost[0][0],BagTypeDefine.BAG_TYPE_ITEM)>=b_e.cost[0][1]?UpState.CAN_UP:UpState.NOT_ENOUGH:UpState.MAX_UP}return UpState.NOT_ACTIVTED},e.prototype.getBasePropById=function(e){var p_l=this.countId(e.lv,e.id),p_g=Config.dragon_dragonLevel[p_l];if(p_g)return CharacterProperty.getPropertys(p_g.lvAttr)},e.prototype.reqDragonFeed=function(e){var p_l=new c2m_dragonsoul_feed;p_l.id=e,DB.instance.query(c2m_dragonsoul_feed,p_l)},e.prototype.onDragonInfoList=function(e){if(e.dragonsouls){for(var p_l in this._dragonInfo={},e.dragonsouls){var p_g=new DragonVo;p_g.InitVo(e.dragonsouls[p_l]),this._dragonInfo[p_g.id]=p_g}LED.event(l_r.DRAGONS_INFO_UPDATE)}},e.prototype.reqDragonInfoList=function(){var e=new c2m_dragonsoul_info;DB.instance.query(c2m_dragonsoul_info,e)},e.prototype.redPoint=function(){var e=!1;if(!p_k.instance.checkSystemOpen(FuncDefine.dragonPanel))return e;for(var p_l in Config.dragon_dragon){var p_g=Config.dragon_dragon[p_l];if(e=this.isHaveRedPoint(p_g.id))return!0}return!1},e.prototype.onDragonStarUp=function(e){this._dragonInfo[e.id]&&LED.event(l_r.DRAGON_STAR_UP,e.id)},e.prototype.dragonIsCanActive=function(e){if(this._dragonInfo[e])return!1;var p_l=Config.dragon_dragon[e],p_g=!1;if(p_l)if(p_l.itemActive&&0<p_l.itemActive.length)for(var b_s in p_g=!0,p_l.itemActive){var d_u=BagModel.instance.getItemCountByItemID(p_l.itemActive[b_s][0],BagTypeDefine.BAG_TYPE_ITEM);p_l.itemActive[b_s][1]>d_u&&(p_g=!1)}else null!=p_l.stateActive&&(p_g=StateModel.instance.isMore(p_l.stateActive));return p_g},e.prototype.getDragonPropInfo=function(e){var p_l=[],p_g=this._dragonInfo[e];if(p_g&&p_g.id==e){var b_s=Config.dragon_dragon[p_g.id],d_u=this.countId(p_g.lv,p_g.id),b_e=Config.dragon_dragonLevel[d_u],d_m=CharacterProperty.getPropertys(b_s.attr),d_w=CharacterProperty.getPropertys(b_e.attr,p_g.exp/b_e.num),f_t=CharacterProperty.getPropertys(b_e.lvAttr);CharacterProperty.mergePropertys(p_l,d_m),CharacterProperty.mergePropertys(p_l,d_w),CharacterProperty.mergePropertys(p_l,f_t)}return p_l},e.prototype.getActVoByType=function(e){var p_l=this._dragonInfo,p_g=[];for(var b_s in p_l){var d_u=Config.dragon_dragon[p_l[b_s].id];for(var b_e in e)p_l[b_s].isActive&&d_u.propType==e[b_e]&&p_g.push(p_l[b_s])}return p_g},e.prototype.reqDragonOp=function(e,p_l){var p_g=new c2m_dragonsoul_op;p_g.id=e,p_g.op=p_l,DB.instance.query(c2m_dragonsoul_op,p_g)},e.prototype.reqDragonUpStar=function(e){var p_l=new c2m_dragonsoul_up_star;p_l.id=e,DB.instance.query(c2m_dragonsoul_up_star,p_l)},e}(),DoubleRecordVo=function(){function e(){this.ackRecordArr=[],this.defRecordArr=[]}return e.prototype.parseData=function(e){if(e){var p_l=e.records;if(!(p_l.length<=0))for(var p_g=DoubleAreaModel.instance._selfTeamInfoArray[0].teamId,b_s=0,d_u=p_l;b_s<d_u.length;b_s++){var b_e=d_u[b_s],d_m=new x_double_pvp_record_info;d_m.recordId=b_e.recordId,d_m.ackTeamId=b_e.ackTeamId,d_m.ackName=b_e.ackName,d_m.ackTeamName=b_e.ackTeamName,d_m.ackCaptainName=b_e.ackCaptainName,d_m.ackMemberName=b_e.ackMemberName,d_m.ackSvrId=b_e.ackSvrId,d_m.defTeamId=b_e.defTeamId,d_m.defTeamName=b_e.defTeamName,d_m.defCaptainName=b_e.defCaptainName,d_m.defMemberName=b_e.defMemberName,d_m.defSvrId=b_e.defSvrId,d_m.winNum=b_e.winNum,d_m.isWin=b_e.isWin,d_m.ackIntegral=b_e.ackIntegral,d_m.defIntegral=b_e.defIntegral,d_m.matchType=b_e.matchType,d_m.isRevenge=b_e.isRevenge,d_m.time=b_e.time,b_e.ackTeamId==p_g?this.ackRecordArr.push(d_m):b_e.defTeamId==p_g&&this.defRecordArr.push(d_m)}}},e}(),DoubleBeInviteVo=function(){function e(){this.teamInfoArr=[]}return e.prototype.parseData=function(e){if(e)for(var p_l=0,p_g=e.team;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new x_double_pvp_team_info;d_u.name=b_s.name,d_u.member=b_s.member,d_u.ackPower=b_s.ackPower,d_u.defPower=b_s.defPower,d_u.rank=b_s.rank,d_u.teamId=b_s.teamId,d_u.member=b_s.member,d_u.svrId=b_s.svrId,this.teamInfoArr.push(d_u)}},e.prototype.parseData1=function(e){if(e||e.team){var p_l=new x_double_pvp_team_info;p_l.name=e.team.name,p_l.ackPower=e.team.ackPower,p_l.defPower=e.team.defPower,p_l.rank=e.team.rank,p_l.teamId=e.team.teamId,p_l.member=e.team.member,p_l.svrId=e.team.svrId,this.teamInfoArr.push(p_l)}},Object.defineProperty(e.prototype,"isBevite",{get:function(){return!(!this.teamInfoArr||!this.teamInfoArr.length)},enumerable:!0,configurable:!0}),e}(),DoubleAreaTeamVo=function(){function e(){this.frameArr=[],this.memberArr=[]}return e.prototype.parseData=function(e){if(e){for(var p_l=0,p_g=e.team;p_l<p_g.length;p_l++){var b_s=p_g[p_l];(d_m=new x_double_pvp_team_info).name=b_s.name,d_m.ackPower=b_s.ackPower,d_m.defPower=b_s.defPower,d_m.rank=b_s.rank,d_m.svrId=b_s.svrId,d_m.teamId=b_s.teamId,d_m.member=b_s.member,this.frameArr.push(d_m)}for(var d_u=0,b_e=this.frameArr;d_u<b_e.length;d_u++){var d_m;b_s=b_e[d_u],(d_m=new x_double_pvp_plr_info).name=b_s.member[0].name,d_m.entryId=b_s.member[0].entryId,d_m.fashionAvatar=b_s.member[0].fashionAvatar,d_m.headIcon=b_s.member[0].headIcon,d_m.pid=b_s.member[0].pid,d_m.ackPower=b_s.member[0].ackPower,d_m.defPower=b_s.member[0].defPower,d_m.defCloneArr=b_s.member[0].defCloneArr,d_m.ackCloneArr=b_s.member[0].ackCloneArr,1==d_m.ackCloneArr.length?(d_m.ackCloneArr.push(0),d_m.ackCloneArr.push(0)):2==d_m.ackCloneArr.length&&d_m.ackCloneArr.push(0),1==d_m.defCloneArr.length?(d_m.defCloneArr.push(0),d_m.defCloneArr.push(0)):2==d_m.defCloneArr.length&&d_m.defCloneArr.push(0),d_m.memberAckCloneArr=b_s.member[0].memberAckCloneArr,d_m.memberDefCloneArr=b_s.member[0].memberDefCloneArr,this.memberArr.push(d_m)}}},e}(),DoubleAreaSelfTeamVo=function(){function e(){this.name="",this.teamId=0,this.rank=0,this.power=0,this.svrId=0,this.member=[]}return e.prototype.parseData=function(e){if(e&&e.tema&&e.tema.teamId&&0!=e.tema.length){this.name=e.tema.name,this.teamId=e.tema.teamId,this.rank=e.tema.rank,this.member=[];var p_l=e.tema.member;if(p_l){for(var p_g=0,b_s=p_l;p_g<b_s.length;p_g++){var d_u=b_s[p_g];if(!d_u.name)return;var b_e=new x_double_pvp_plr_info;b_e.pid=d_u.pid,b_e.name=d_u.name,b_e.ackCloneArr=d_u.ackCloneArr,b_e.ackPower=d_u.ackPower,b_e.defCloneArr=d_u.defCloneArr,b_e.entryId=d_u.entryId,b_e.fashionAvatar=d_u.fashionAvatar,b_e.memberAckCloneArr=d_u.memberAckCloneArr,b_e.memberDefCloneArr=d_u.memberDefCloneArr,1==b_e.ackCloneArr.length?(b_e.ackCloneArr.push(0),b_e.ackCloneArr.push(0)):2==b_e.ackCloneArr.length&&b_e.ackCloneArr.push(0),1==b_e.defCloneArr.length?(b_e.defCloneArr.push(0),b_e.defCloneArr.push(0)):2==b_e.defCloneArr.length&&b_e.defCloneArr.push(0),b_e.headIcon=d_u.headIcon,b_e.defPower=d_u.defPower,this.member.push(b_e)}this.svrId=e.tema.svrId,this.power=e.tema.ackPower}}},Object.defineProperty(e.prototype,"haveTeam",{get:function(){return this.member&&0<this.member.length},enumerable:!0,configurable:!0}),e.prototype.deleteMemberById=function(e){if(this.member&&this.member.length){var p_l=0,p_g=this.member.length;for(p_l=0;p_l<p_g;p_l++)if(this.member[p_l].pid==e)return void this.member.splice(p_l,1)}},e}(),DoubleAreaInviteVo=function(){function e(){this.memberArr=[]}return e.prototype.parseData=function(e){if(e)for(var p_l=0,p_g=e.plrArr;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new x_double_pvp_plr_info;d_u.name=b_s.name,d_u.entryId=b_s.entryId,d_u.fashionAvatar=b_s.fashionAvatar,d_u.headIcon=b_s.headIcon,d_u.pid=b_s.pid,d_u.ackPower=b_s.ackPower,d_u.defPower=b_s.defPower,this.memberArr.push(d_u)}},e}(),DoubleAreaFightVo=function(){function e(){this.fightRet=[],this.memberArr=[]}return e.prototype.parseData=function(e){if(e){for(var p_l=0,p_g=e.fightRet;p_l<p_g.length;p_l++){var b_s=p_g[p_l];(d_m=new x_double_pvp_fight_ret).winTeamId=b_s.winTeamId,d_m.matchHp=b_s.matchHp,d_m.matchSurplusHp=b_s.matchSurplusHp,d_m.teamHp=b_s.teamHp,d_m.teamSurplusHp=b_s.teamSurplusHp,this.fightRet.push(d_m)}for(var d_u=0,b_e=e.member;d_u<b_e.length;d_u++){var d_m;if(!(b_s=b_e[d_u]).cloneEquip)return;(d_m=new x_double_pvp_match_plr_info).cloneEquip=b_s.cloneEquip,d_m.defCloneArr=b_s.defCloneArr,1==d_m.defCloneArr.length?(d_m.defCloneArr.push(0),d_m.defCloneArr.push(0)):2==d_m.defCloneArr.length&&d_m.defCloneArr.push(0),d_m.entryId=b_s.entryId,d_m.fashionAvatar=b_s.fashionAvatar,d_m.headIcon=b_s.headIcon,d_m.name=b_s.name,d_m.pid=b_s.pid,d_m.power=b_s.power,this.memberArr.push(d_m)}}},e}(),DoubeRankVo=function(){function e(){this.rankArr=[]}return e.prototype.parseData=function(e){if(e)for(var p_l=0,p_g=e.records;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new x_double_pvp_rank;d_u.rank=b_s.rank,d_u.teamId=b_s.teamId,d_u.inc=b_s.inc,d_u.name=b_s.name,d_u.svrId=b_s.svrId,d_u.captainName=b_s.captainName,d_u.captainHeadIcon=b_s.captainHeadIcon,d_u.captainEntryId=b_s.captainEntryId,d_u.captainFashionAvatar=b_s.captainFashionAvatar,d_u.memberName=b_s.memberName,d_u.memberHeadIcon=b_s.memberHeadIcon,d_u.memberEntryId=b_s.memberEntryId,d_u.memberFashionAvatar=b_s.memberFashionAvatar,this.rankArr.push(d_u)}},e}(),DoubeFramTeamVo=function(){function e(){this.frameArr=[],this.memberArr=[]}return e.prototype.parseData=function(e){if(e&&e.fame&&0!=e.fame.length){for(var p_l=0,p_g=e.fame;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new x_double_pvp_team_info;if(!b_s.name)return;d_u.name=b_s.name,d_u.ackPower=b_s.ackPower,d_u.defPower=b_s.defPower,d_u.rank=b_s.rank,d_u.svrId=b_s.svrId,d_u.teamId=b_s.teamId,d_u.member=b_s.member,this.frameArr.push(d_u)}for(var b_e=0,d_m=this.frameArr;b_e<d_m.length;b_e++){if(b_s=d_m[b_e],d_u=new x_double_pvp_plr_info,!b_s.member)return;d_u.name=b_s.member[0].name,d_u.entryId=b_s.member[0].entryId,d_u.fashionAvatar=b_s.member[0].fashionAvatar,d_u.headIcon=b_s.member[0].headIcon,d_u.pid=b_s.member[0].pid,d_u.ackPower=b_s.member[0].ackPower,d_u.defPower=b_s.member[0].defPower,d_u.ackCloneArr=b_s.member[0].ackCloneArr,d_u.defCloneArr=b_s.member[0].defCloneArr,1==d_u.ackCloneArr.length?(d_u.ackCloneArr.push(0),d_u.ackCloneArr.push(0)):2==d_u.ackCloneArr.length&&d_u.ackCloneArr.push(0),1==d_u.defCloneArr.length?(d_u.defCloneArr.push(0),d_u.defCloneArr.push(0)):2==d_u.defCloneArr.length&&d_u.defCloneArr.push(0),d_u.memberAckCloneArr=b_s.member[0].memberAckCloneArr,d_u.memberDefCloneArr=b_s.member[0].memberDefCloneArr,this.memberArr.push(d_u)}}},e}(),DoubleAreaModel=function(){function e(){this._teamName="",this._teamId=0,this._teamRank=0,this._teamIntegral=0,this._teamPower=0,this._teamWinNum=0,this._teamCaptainId=0,this._challengeNum=0,this._matchNum=0,this._rewardIdx=0,this._fameArray=[],this._teamInfoArray=[],this._teamInviteArray=[],this._teamBeInviteArray=[],this._selfTeamInfoArray=[],this._fightTeamInfoArray=[],this._inviteResult=0,this._invitePlayerName="",this._renameNum=0,this._lastMatchTime=0,this._cloneNumArray=[],this._buyMatchCount=0,this._buyChallengeCount=0,this._isDissolution=!1,this._sumIntegral=0,this._extraIntegral=0,this._rank=0,this._otherTeamName="",this._otherTeamId=0,this._otherTeamSvrId=0,this._otherTeamPower=0,this._matchIntegral=0,this._fightrResultArr=[],this._otherTeamMemberArr=[],this._fiends=0,this._teamMemberArr=[],this._memberCloneEquip=[],this._haveDeadArray=[],this._winResultArr=[],this._allRecordList=[],this._maxTeamRank=0,this._openTime=0,this._lastRank=0,this._lastTeamId=0,this._lastRankReward=-1,this._rankReward=0,this._allRankList=[],this._overRank=0,this._overTeamId=0,this._lastTeamName="",this._endTime=0,this._nextOpenTime=0,this._nextEndTime=0,this._isInFight=!1,this._isClose=!1,this._isShowRed=!1,this._overTeamName=""}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.addEventListener=function(){DB.instance.on(q2c_double_pvp_change_name.opcode.toString(),this,this.updateTeamName),DB.instance.on(q2c_double_pvp_info.opcode.toString(),this,this.updateDoulePvpInfo),DB.instance.on(q2c_double_pvp_team_list.opcode.toString(),this,this.updateDoublePvpTeamList),DB.instance.on(q2c_double_pvp_invitation_list.opcode.toString(),this,this.updateDoublePvpInvitationList),DB.instance.on(q2c_double_pvp_self_team.opcode.toString(),this,this.updateDoubleSelfTeamInfo),DB.instance.on(q2c_double_pvp_invitation_plr.opcode.toString(),this,this.updateDoubleInviteResult),DB.instance.on(q2c_double_pvp_be_invitation_list.opcode.toString(),this,this.updateDoubleBeInviteList),DB.instance.on(q2c_double_pvp_team_msg.opcode.toString(),this,this.updateDoublePvpTeamMsg),DB.instance.on(q2c_double_pvp_be_invitation_plr.opcode.toString(),this,this.updateDoubleBeInviteInfo),DB.instance.on(q2c_double_pvp_team_info.opcode.toString(),this,this.updateSelfTeamInfo),DB.instance.on(m2c_double_pvp_clone_formation.opcode.toString(),this,this.updateSelfCloneFormation),DB.instance.on(q2c_double_pvp_plr_update.opcode.toString(),this,this.updatePvpPlrInfo),DB.instance.on(q2c_double_pvp_member_clone_formation.opcode.toString(),this,this.updateMemberCloneFormation),DB.instance.on(q2c_double_pvp_match.opcode.toString(),this,this.updateMatch),DB.instance.on(q2c_double_pvp_record.opcode.toString(),this,this.updateRecordList),DB.instance.on(q2c_double_pvp_get_rank.opcode.toString(),this,this.updateRankList),DB.instance.on(q2c_red_push.opcode.toString(),this,this.updateRed),DB.instance.on(q2c_double_pvp_create_team_ok.opcode.toString(),this,this.updateCreateTeamResult)},Object.defineProperty(e.prototype,"showFriend",{get:function(){return this._fiends+1},enumerable:!0,configurable:!0}),e.prototype.updateRed=function(e){Yoe(e,this,LED,l_r)},e.prototype.updateMatch=function(e){this._otherTeamMemberArr=[],this._fightrResultArr=[],this._otherTeamName=e.name,this._otherTeamId=e.teamId,this._otherTeamSvrId=e.svrId,this._otherTeamPower=e.power,this._rank=e.rank,this._matchIntegral=e.matchIntegral,this._extraIntegral=e.extraIntegral,this._sumIntegral=e.sumIntegral;var p_l=new DoubleAreaFightVo;p_l.parseData(e),this._otherTeamMemberArr=p_l.memberArr,this._fightrResultArr=p_l.fightRet,this._teamMemberArr=p_l.memberArr,this._memberCloneEquip=e.memberCloneEquip,LED.event(l_r.DA_MATCH_UPDATE)},e.prototype.showActor=function(){var e=this._fiends,p_l=this._haveDeadArray,p_g=this.getTeamMemberArr();p_g&&(p_g.ackCloneArr[e]?this.createMemberActors(this._memberCloneEquip,!0):(p_l.push(p_g.pid),LgcM.ins.deleteActorEntity(1,p_g.pid)));for(var b_s=0,d_u=this._otherTeamMemberArr;b_s<d_u.length;b_s++){var b_e=d_u[b_s];b_e.defCloneArr[e]?this.createMemberActors(b_e):(p_l.push(b_e.pid),LgcM.ins.deleteActorEntity(1,b_e.pid))}this.initActors()},e.prototype.updateDoubleBeInviteList=function(e){this._teamBeInviteArray=[];var p_l=new DoubleBeInviteVo;p_l.parseData(e),this._teamBeInviteArray.push(p_l),LED.event(l_r.UPDATE_DA_BE_INVITE_LIST)},e.prototype.getCountHpById=function(e){var p_l=this.getOtherTeamMemberId(),p_g=this.getWinId(this._fiends);if(p_g){if(e==b_p.playerId)return LgcM.ins.heroVo.hpUpper;if(e==this.getTeamMemberId())return e==this._teamCaptainId?p_g.teamHp[0]:p_g.teamHp[1];for(var b_s=0;b_s<p_l.length;b_s++)if(e==p_l[b_s])return p_g.matchHp[b_s]}},e.prototype.getTeamArray=function(e){for(var p_l=0,p_g=this._teamInfoArray;p_l<p_g.length;p_l++){var b_s=p_g[p_l];if(b_s.frameArr[0].teamId==e)return b_s}return null},e.prototype.getTeamMemberId=function(){for(var e=0,p_l=this.getMyTeamMemberList();e<p_l.length;e++){var p_g=p_l[e];if(p_g.pid!=b_p._playerId)return p_g.pid}return 0},e.prototype.getCountLeftHpById=function(e){var p_l=this.getOtherTeamMemberId();if(this.curResult()){for(var p_g=0;p_g<this.getMyTeamMemberList().length;p_g++)if(e==this.getMyTeamMemberList()[p_g].pid)return this.curResult().teamSurplusHp[p_g];for(p_g=0;p_g<p_l.length;p_g++)if(e==p_l[p_g])return this.curResult().matchSurplusHp[p_g]}},e.prototype.updateRecordList=function(e){this._allRecordList=[];var p_l=new DoubleRecordVo;p_l.parseData(e),this._allRecordList.push(p_l),LED.event(l_r.DA_RECORD_UPDATE)},e.prototype.curResult=function(){return Esr(this)},e.prototype.getMyTeamId=function(){if(0!=this._selfTeamInfoArray.length)for(var e=0,p_l=this._selfTeamInfoArray;e<p_l.length;e++){var p_g=p_l[e];if(p_g&&p_g.haveTeam)return p_g.teamId}return 0},e.prototype.updateTeamName=function(e){this._teamName=e.name,0<=this._renameNum&&this._renameNum<3&&(this._renameNum=this._renameNum+1),UIM.instance.isOpenWin(UI.DoubleAreaTmRenamePanel)&&(UI.DoubleAreaTmRenamePanel.close(),b_p.broadcastNotice((j_x("1943_1511_402")+j_x(2142)))),LED.event(l_r.UPDATE_TEAM_NAME)},e.prototype.updateDoublePvpTeamMsg=function(e){var p_l=e.memberId!=b_p.playerId,p_g=e.captainId!=b_p.playerId,b_s="";1==e.type?(b_s=p_g?p_l?Utils.$((j_x("2413_1066")+"{1}"+j_x(145)+"{2}"+j_x("1710_203_743")+j_x("383_2413")),e.captainName,e.memberName):Utils.$(("{1}"+j_x("145_1176_1710")+j_x("203_743_383")+j_x(2413)),e.captainName):Utils.$((j_x("1176_145")+"{1}"+j_x("1710_203_743")+j_x("383_2413")),e.memberName),b_p.broadcastNotice(b_s)):2==e.type?b_s=Utils.$((j_x("2413_1869_1300")+j_x("1048_114"))):3==e.type?b_s=p_l?Utils.$(("{1}"+j_x("223_2456_743")+j_x("383_2413")),e.memberName):Utils.$((j_x("1176_223_2456")+j_x("743_383_2413"))):4==e.type&&(b_s=p_l?Utils.$(("{1}"+j_x("236_203_743")+j_x("383_2413")),e.memberName):Utils.$((j_x("1176_236_203")+j_x("743_383_2413")))),b_p.broadcastNotice(b_s),1==e.type&&p_l||4==e.type&&p_l?this.deleteMember(e.memberId):2==e.type||4==e.type&&!p_l||1==e.type&&!p_l?this.deleteMyTeamInfo():DoubleAreaControl.ins.reqSelfTeamInfo(e.teamId,1),LED.event(l_r.DA_TEAM_INFO_UPDATE)},e.prototype.getSelfTeamInfoArr=function(){return Gaq(this)},e.prototype.getHaveBeviteAll=function(){for(var e in this._teamBeInviteArray){var p_l=this._teamBeInviteArray[e];if(p_l.isBevite)return p_l}return null},e.prototype.teamIsDead=function(e,p_l){var p_g=0;for(var b_s in e)this.playerIsDead(e[b_s])||0==p_g&&(p_g=e[b_s]);return p_g},e.prototype.getMyFightTeamId=function(){return 0==this._fightTeamInfoArray.length?null:this._fightTeamInfoArray[0].teamId},e.prototype.getHaveOneCloneArrIsNull=function(){return 0==DoubleAreaHelp.getMyCloneArr(this._fiends)&&0==this.getMyTeamMemberArr(this._fiends)||0==this.getOtherTeamCloneArr(this._fiends).length},e.prototype.getIsFailed=function(e){var p_l=this.getWinId(this._fiends);if(p_l)if(this._fightTeamInfoArray[0].teamId==p_l.winTeamId){for(var p_g=0,b_s=this.getMyTeamMemberList();p_g<b_s.length;p_g++)if(b_s[p_g].pid==e)return!1}else if(this._otherTeamId==p_l.winTeamId)for(var d_u=0,b_e=this._otherTeamMemberArr;d_u<b_e.length;d_u++)if(b_e[d_u].pid==e)return!1;return!0},e.prototype.updateCreateTeamResult=function(e){Qpc(e,b_p,j_x)},e.prototype.checkTeamIsFull=function(e){for(var p_l=0,p_g=this._teamBeInviteArray[0].teamInfoArr;p_l<p_g.length;p_l++){var b_s=p_g[p_l];if(b_s.teamId==e)return!!b_s.member&&2<=b_s.member.length}return!1},e.prototype.checkHaveTeam=function(){if(0!=this._selfTeamInfoArray.length)for(var e=0,p_l=this._selfTeamInfoArray;e<p_l.length;e++){var p_g=p_l[e];if(p_g)return p_g.haveTeam}return!1},e.prototype.playerChangerTarget=function(e,p_l){var p_g=this.getOtherTeamCloneArr(this._fiends),b_s=[this.getMyTeamMemberArr(this._fiends),DoubleAreaHelp.getMyCloneArr(this._fiends)],d_u=[this.getTeamMemberId(),b_p.playerId],b_e=this.getOtherTeamMemberId(),d_m=0;return e?(d_m=b_e.indexOf(p_l),this.sortTargetId(d_u,b_s,p_g[d_m]),this.teamIsDead(d_u,p_l)):(d_m=d_u.indexOf(p_l),this.sortTargetId(b_e,p_g,b_s[d_m]),this.teamIsDead(b_e,p_l))},e.prototype.updateMemberCloneFormation=function(e){Uui(e,DoubleAreaHelp,LED,l_r)},e.prototype.getTeamMemberArr=function(){for(var e=0,p_l=this.getMyTeamMemberList();e<p_l.length;e++){var p_g=p_l[e];if(p_g.pid!=b_p._playerId)return p_g}return null},e.prototype.updateDoubleBeInviteInfo=function(e){var p_l=new DoubleBeInviteVo;p_l.parseData1(e),this._teamBeInviteArray.push(p_l),LED.event(l_r.DA_BE_INVITE)},e.prototype.updateRankList=function(e){this._allRankList=[];var p_l=new DoubeRankVo;p_l.parseData(e),this._allRankList.push(p_l),LED.event(l_r.DA_RANK_UPDATE)},e.prototype.isAtcBatterRed=function(e){for(var p_l=3<=MirrorSelfModel.ins.getAllActivateArray().length,p_g=e.length,b_s=0,d_u=0;d_u<p_g;d_u++)0==e[d_u]&&(b_s+=1);return e.length-b_s<3&&p_l},e.prototype.deleteMyTeamInfo=function(){Mvi(this)},e.prototype.countTargetDamage=function(e,p_l,p_g){LgcM.ins.getActorStdInfoById(e);var b_s=LgcM.ins.getActorStdInfoById(p_l),d_u=0;if(this.getIsFailed(e)){var b_e=this.getCountLeftHpById(p_l);if(b_e=Math.max(b_e,b_s.hpUpper/10),d_u=1*(b_s.hp-b_e)/10,b_s.hp-d_u<b_e)return b_s.hp>b_e?b_s.hp-b_e:0}else d_u=b_s.hpUpper/10*1;return d_u},e.prototype.createMemberActors=function(e,p_l){void 0===p_l&&(p_l=!1);var p_g,b_s=[],d_u=null;p_g=p_l?(b_s=e,d_u=this.getTeamMemberArr(),this.getMyTeamMemberArr(this._fiends)):(b_s=(d_u=e).cloneEquip,e.defCloneArr[this._fiends]);var b_e=Engine2d.PlayerVo.freeStdInfo(Engine2d.ActorTypeDefine.PLAYER,Engine2d.PlayerVo);if(b_e.id=d_u.pid,b_e.name=d_u.name,b_e.entryId=d_u.entryId,b_e.px=b_e.py=b_e.endPx=b_e.endPy=0,b_e.speed=LgcM.ins.heroVo.speed,b_e.rideId=1,b_e.fashionClothes=0,(b_e.fashionWeapon=0)<b_s.length)for(var d_m=0,d_w=b_s;d_m<d_w.length;d_m++){var f_t=d_w[d_m];f_t.cloneId==p_g&&(f_t.type==MirrorSelfEnum.Fashion?b_e.fashionClothes=f_t.equipId:f_t.type==MirrorSelfEnum.FWeapon?b_e.fashionWeapon=f_t.equipId:f_t.type==MirrorSelfEnum.Ride&&(b_e.rideId=f_t.equipId))}if(b_e.hp=Math.floor(this.getCountHpById(d_u.pid)),b_e.hpUpper=b_e.hp,!(b_e.hp<=0)){LgcM.ins.addActorInfo(Engine2d.ActorTypeDefine.PLAYER,b_e);var v_z=LgcM.ins.getActorById(b_e.id,Engine2d.ActorTypeDefine.PLAYER);if(v_z){v_z.fightingCtrl.changeSkin(b_e.fashionClothes,b_e.entryId,b_e.face);var d_h=Resource.ResManager.getDefaultWeaponAvatar(b_e.fashionWeapon,b_e.entryId);v_z.fightingCtrl.changeWeapon(d_h),v_z.changeRide(b_e.rideId),v_z.setHP(b_e.hp,b_e.hpUpper),b_e.hp<=0&&(v_z.stopAutoCopy(),v_z.die(0))}else LgcM.ins.addActorEntity(Engine2d.ActorTypeDefine.PLAYER,b_e),v_z=LgcM.ins.getActorById(b_e.id,Engine2d.ActorTypeDefine.PLAYER);v_z.setNameTxtVisible(!0)}},e.prototype.updateDoulePvpInfo=function(e){this._fameArray=[],this._teamIntegral=e.integral,this._challengeNum=e.challengeNum,this._teamCaptainId=e.captainId,this._teamWinNum=e.winNum,this._renameNum=e.changeNameNum,this._rewardIdx=e.rewardIdx,this._matchNum=e.matchCount,this._selfTeamInfoArray=[],this._lastMatchTime=e.matchTime,this._buyMatchCount=e.buyMatchCount,this._buyChallengeCount=e.buyChallengeCount,this._maxTeamRank=e.maxRank,this._openTime=e.openTime,this._lastRank=e.lastRank,this._lastTeamId=e.lastTeamId,this._lastRankReward=e.lastRankReward,this._rankReward=e.rankReward,this._overRank=e.overRank,this._overTeamId=e.overTeamId,this._overTeamName=e.overTeamName,this._lastTeamName=e.lastTeamName,this._endTime=e.endTime,this._nextOpenTime=e.nextOpenTime,this._nextEndTime=e.nextEndTime;var p_l=new DoubeFramTeamVo;p_l.parseData(e),this._fameArray.push(p_l);var p_g=new DoubleAreaSelfTeamVo;if(p_g.parseData(e),this._selfTeamInfoArray.push(p_g),!this._isInFight){this._fightTeamInfoArray=[];var b_s=new DoubleAreaSelfTeamVo;b_s.parseData(e),this._fightTeamInfoArray.push(b_s)}LED.event(l_r.UPDATE_DA_PVP_INFO)},e.prototype.updateSelfCloneFormation=function(e){Wca(e,DoubleAreaHelp,LED,l_r)},e.prototype.isShowBatterArrRed=function(){var e=3<=MirrorSelfModel.ins.getAllActivateArray().length,p_l=this.getMyArr();if(!p_l)return!1;for(var p_g=p_l.ackCloneArr.length,b_s=0,d_u=0,b_e=0;b_e<p_g;b_e++)0==p_l.ackCloneArr[b_e]&&(b_s+=1);var d_m=p_l.defCloneArr.length;for(b_e=0;b_e<p_g;b_e++)0==p_l.defCloneArr[b_e]&&(d_u+=1);return(p_g-b_s<3||d_m-d_u<3)&&e},e.prototype.isShowDouShuaiRed=function(){return Kws(this)},e.prototype.sortTargetId=function(p_l,p_g,b_s){if(b_s&&p_g&&!(p_g.length<=1)){var d_u=Config.clone_clone[b_s];if(d_u){var b_e=e.cloneFightSuq.length,d_m=e.cloneFightSuq,d_w=d_m.indexOf(d_u.type);if(-1!=d_w){var f_t=[];for(var v_z in p_g){var d_h=Config.clone_clone[p_g[v_z]];if(!d_h)return;var r_t=d_h.type,t_n=d_m.indexOf(r_t),f_y=d_w-t_n+1;d_w<=t_n?f_y=b_e+f_y:f_y-=b_e,f_t.push(f_y)}p_l.sort((function(e,p_g){var b_s=p_l.indexOf(e),d_u=p_l.indexOf(p_g);return f_t[d_u]-f_t[b_s]}))}}}},e.prototype.getOtherTeamCloneArr=function(e){for(var p_l=[],p_g=0,b_s=this._teamMemberArr;p_g<b_s.length;p_g++){var d_u=b_s[p_g];d_u.defCloneArr[e]&&p_l.push(d_u.defCloneArr[e])}return p_l},e.prototype.updateSelfTeamInfo=function(e){if(!this._isInFight){this._fightTeamInfoArray=[];var p_l=new DoubleAreaSelfTeamVo;p_l.parseData(e),this._fightTeamInfoArray.push(p_l)}this._selfTeamInfoArray=[];var p_g=new DoubleAreaSelfTeamVo;this._teamCaptainId=e.captainId,p_g.parseData(e),this._selfTeamInfoArray.push(p_g),LED.event(l_r.UPDATE_DA_SELF_TEAM_INFO),LED.event(l_r.DA_TEAM_INFO_UPDATE)},e.prototype.deleteMember=function(e){for(var p_l=0,p_g=this._selfTeamInfoArray;p_l<p_g.length;p_l++)p_g[p_l].deleteMemberById(e)},e.prototype.updatePvpPlrInfo=function(e){Qfh(e,this,LED,l_r)},e.prototype.getMyArr=function(){if(!this.getMyTeamMemberList())return null;for(var e=0,p_l=this.getMyTeamMemberList();e<p_l.length;e++){var p_g=p_l[e];if(p_g.pid==b_p._playerId)return p_g}},e.prototype.updateDoublePvpTeamList=function(e){var p_l=!(this._teamInfoArray=[]);if(e.team){var p_g=new DoubleAreaTeamVo;p_g.parseData(e),this._teamInfoArray.push(p_g)}if(0!=this._teamId)for(var b_s=this._teamInfoArray[0].frameArr,d_u=b_s.length,b_e=0;b_e<d_u;b_e++)if(b_s[b_e].teamId==this._teamId){var d_m=b_s[b_e];(b_s=[]).push(d_m),p_l=!0;break}this._isDissolution=!p_l,LED.event(l_r.UPDATE_DA_TEAM_LIST)},e.prototype.getMyTeamMemberArr=function(e){for(var p_l=0,p_g=this.getMyTeamMemberList();p_l<p_g.length;p_l++){var b_s=p_g[p_l];if(b_s.pid!=b_p._playerId&&b_s.ackCloneArr[e])return b_s.ackCloneArr[e]}return 0},e.prototype.getOtherTeamMemberId=function(){for(var e=[],p_l=0,p_g=this._otherTeamMemberArr;p_l<p_g.length;p_l++){var b_s=p_g[p_l];e.push(b_s.pid)}return e},e.prototype.playerIsDead=function(e){var p_l=!1;for(var p_g in this._haveDeadArray)e==this._haveDeadArray[p_g]&&(p_l=!0);return p_l},e.prototype.initActors=function(){var e=LgcM.ins.heroVo,p_l=Engine2d.Hero.local,p_g=DoubleAreaHelp.getMyCloneArr(this._fiends);if(p_g){if(e.hp=DoubleAreaHelp.countHp(b_p._playerId),e.hp<=0)return p_l.stopAutoCopy(),void p_l.die(0);p_l.visible=!0,e.isPlayerVisible=!0,p_l.initAutoCopy(GlobalDefine.doublePvp_born_pos),p_l.setNameTxtVisible(!0),p_l.setHP(e.hp,e.hpUpper);var b_s=MirrorSelfModel.ins.getSelfInfoMap[p_g];if(b_s){var d_u=MirrorSelfEnum,b_e=b_s.partList[d_u.FWeapon],d_m=b_s.partList[d_u.Fashion],d_w=b_s.partList[d_u.Ride].id,f_t=0,v_z=0;b_e.isHaveValue()&&(v_z=b_e.id),d_m.isHaveValue()&&(f_t=d_m.id),p_l.fightingCtrl.changeSkin(f_t,e.entryId,e.face);var d_h=Resource.ResManager.getDefaultWeaponAvatar(v_z,e.entryId);p_l.fightingCtrl.changeWeapon(d_h),p_l.changeRide(d_w)}}else this._haveDeadArray.push(e.id),e.isPlayerVisible=!1,p_l.visible=!1},e.prototype.checkSeasonReward=function(){var e=SyncTime.serverTime/1e3;0==this._lastRankReward&&0!=this._lastRank&&UI.DoubleAreaSeasonRewardPanel.open(1),0==this._rankReward&&60<e-this._endTime&&0!=this._overRank&&UI.DoubleAreaSeasonRewardPanel.open(0)},e.prototype.updateDoubleSelfTeamInfo=function(e){if(!this._isInFight){this._fightTeamInfoArray=[];var p_l=new DoubleAreaSelfTeamVo;p_l.parseData(e),this._fightTeamInfoArray.push(p_l)}this._selfTeamInfoArray=[];var p_g=new DoubleAreaSelfTeamVo;p_g.parseData(e),this._selfTeamInfoArray.push(p_g),DoubleAreaControl.ins.reqPvpInfo(),LED.event(l_r.UPDATE_DA_SELF_TEAM_INFO),LED.event(l_r.DA_TEAM_INFO_UPDATE)},e.prototype.updateDoubleInviteResult=function(e){var p_l;this._inviteResult=e.result,this._invitePlayerName=e.name,p_l=1==this._inviteResult?Utils.$(("{1}"+j_x("587_319_743")+j_x("1749_2046_383")+j_x("2413_1068_1777")),this._invitePlayerName):Utils.$(("{1}"+j_x("495_398_743")+j_x("1749_2046_383")+j_x("2413_1068_1777")),this._invitePlayerName),b_p.broadcastNotice(p_l),LED.event(l_r.UPDATE_DA_INVITE_RESULT)},e.prototype.getWinId=function(e){return Evq(e,this)},e.prototype.updateDoublePvpInvitationList=function(e){this._teamInviteArray=[];var p_l=new DoubleAreaInviteVo;p_l.parseData(e),this._teamInviteArray.push(p_l),LED.event(l_r.UPDATE_DA_INVITE_LIST)},e.prototype.getMyTeamMemberList=function(){return 0==this._fightTeamInfoArray.length?null:this._fightTeamInfoArray[0].member},e.prototype.sceneChange=function(){Config.map[b_p.mapID]&&600001==b_p.mapID?(this._isInFight=!0,UI.DoubleAreaTeamPkPanel.open(),b_p.registerAutoOpenPanel(UI.DoubleAreaFightPanel,b_p.lastMapID),this.showActor()):(this._isInFight=!1,LgcM.ins.heroVo.isPlayerVisible=!0,Engine2d.Hero.local.visible=!0)},e.cloneFightSuq=[1,4,2,3],e}(),DoubleAreaHelp=function(){function e(){}return e.getMyTeamCloneArr=function(e){for(var p_l=[],p_g=0,b_s=DoubleAreaModel.instance.getMyTeamMemberList();p_g<b_s.length;p_g++){var d_u=b_s[p_g];d_u.ackCloneArr[e]&&p_l.push(d_u.ackCloneArr[e])}return p_l},e.stopFight=function(){var e=DoubleAreaModel.instance.getTeamMemberId(),p_l=LgcM.ins.getActorById(e,Engine2d.ActorTypeDefine.PLAYER),p_g=DoubleAreaModel.instance.getOtherTeamMemberId();p_l&&p_l.stopAutoCopy();for(var b_s=0;b_s<p_g.length;b_s++){var d_u=LgcM.ins.getActorById(p_g[b_s],Engine2d.ActorTypeDefine.PLAYER);d_u&&d_u.stopAutoCopy()}Engine2d.Hero.local.stopAutoCopy()},e.startFight=function(){DoubleAreaModel.instance.showActor();var e=DoubleAreaModel.instance.getTeamMemberId(),p_l=DoubleAreaModel.instance.getOtherTeamMemberId(),p_g=LgcM.ins.getActorById(e,Engine2d.ActorTypeDefine.PLAYER);p_g&&(p_g.initDoubleCopy(1,GlobalDefine.doublePvp_born_pos),p_g.setShowDamage(!0));for(var b_s=0;b_s<p_l.length;b_s++){var d_u=LgcM.ins.getActorById(p_l[b_s],Engine2d.ActorTypeDefine.PLAYER);d_u&&(d_u.initDoubleCopy(b_s+2,GlobalDefine.doublePvp_born_pos),d_u.setShowDamage(!0))}Engine2d.Hero.local.initAutoCopy(GlobalDefine.pvp_born_pos),Engine2d.Hero.local.setShowDamage(!0),DoubleAreaModel.instance.getHaveOneCloneArrIsNull()&&Laya.timer.once(200,this,this.delaySendEvent),LED.event(l_r.DA_START_FIGHT)},e.getCfgRankReward=function(e){for(var p_l in Config.doublePvp_rankRewards){var p_g=Config.doublePvp_rankRewards[p_l];if(p_g.beginIdx<=e&&p_g.endIdx>=e)return p_g}return null},e.getHaveGoBatterCloneArray=function(e){for(var p_l=0,p_g=this.getMyTeamMemberList();p_l<p_g.length;p_l++){var b_s=p_g[p_l];if(b_s.pid==b_p._playerId)if(1==e){if(b_s.ackCloneArr&&0<b_s.ackCloneArr.length)return b_s.ackCloneArr}else if(2==e&&b_s.defCloneArr&&0<b_s.defCloneArr.length)return b_s.defCloneArr}},e.getMyCloneArr=function(e){for(var p_l=0,p_g=this.getMyTeamMemberList();p_l<p_g.length;p_l++){var b_s=p_g[p_l];if(b_s.pid==b_p._playerId&&0!=b_s.ackCloneArr[e])return b_s.ackCloneArr[e]}return 0},e.getCloneIsGoBatter=function(e,p_l){for(var p_g=0,b_s=this.getMyTeamMemberList();p_g<b_s.length;p_g++){var d_u=b_s[p_g];if(d_u.pid==b_p._playerId)if(1==p_l){if(d_u.ackCloneArr&&0<d_u.ackCloneArr.length)return-1!=d_u.ackCloneArr.indexOf(e)}else if(2==p_l&&d_u.defCloneArr&&0<d_u.defCloneArr.length)return-1!=d_u.defCloneArr.indexOf(e)}},e.updateInfoInTeam=function(e,p_l,p_g,b_s,d_u){void 0===e&&(e=0),void 0===p_l&&(p_l=0),void 0===p_g&&(p_g=[]),void 0===b_s&&(b_s=[]),void 0===d_u&&(d_u=!1);for(var b_e=DoubleAreaModel.instance._selfTeamInfoArray,d_m=0,d_w=this.getMyTeamMemberList();d_m<d_w.length;d_m++){var f_t=d_w[d_m];d_u&&f_t.pid==b_p._playerId?(f_t.ackCloneArr=p_g,f_t.defCloneArr=b_s,f_t.ackPower=e,f_t.defPower=p_l):d_u||f_t.pid==b_p._playerId||(f_t.ackCloneArr=p_g,f_t.defCloneArr=b_s)}if(0<b_e.length)for(var v_z=0,d_h=b_e[0].member;v_z<d_h.length;v_z++)f_t=d_h[v_z],d_u&&f_t.pid==b_p._playerId?(f_t.ackCloneArr=p_g,f_t.defCloneArr=b_s,f_t.ackPower=e,f_t.defPower=p_l):d_u||f_t.pid==b_p._playerId||(f_t.ackCloneArr=p_g,f_t.defCloneArr=b_s)},e.delaySendEvent=function(){Aul(LED,l_r)},e.countHp=function(e){return Wpn(e,b_p,LgcM)},e.getMyTeamMemberList=function(){return Mpm(DoubleAreaModel)},e.getMyTeamWinNum=function(){for(var e=0,p_l=0,p_g=0,b_s=DoubleAreaModel.instance._winResultArr;p_g<b_s.length;p_g++){var d_u=b_s[p_g];1==d_u?e+=1:0==d_u?e-=1:p_l+=1}return 0<e?1:e<0?0:0!=e||1!=p_l&&3!=p_l?void 0:2},e.getOtherTeamTargetId=function(e){void 0===e&&(e=!0);var p_l=this.getMyTeamMemberList(),p_g=DoubleAreaModel.instance._fiends,b_s=DoubleAreaModel.instance._otherTeamMemberArr,d_u=null,b_e=null,d_m=0,d_w=0,f_t=Utils.getRandom(0,1),v_z=0,d_h=0,r_t=0;return e?(d_u=b_s[0].defCloneArr[p_g],d_m=b_s[0].pid,d_h=b_s[0].power,1<b_s.length&&(b_e=b_s[1].defCloneArr[p_g],d_w=b_s[1].pid,r_t=b_s[1].power,v_z=b_s[f_t].pid)):(d_u=p_l[0].ackCloneArr[p_g],1<p_l.length&&(b_e=p_l[1].ackCloneArr[p_g],v_z=p_l[f_t].pid,r_t=p_l[1].ackPower,d_w=p_l[1].pid),d_m=p_l[0].pid,d_h=p_l[0].ackPower),!d_u&&b_e?d_w:!b_e&&d_u?d_m:d_u==b_e?d_h<r_t?d_m:r_t<d_h?d_w:v_z:b_e<d_u?4==d_u&&1==b_e?d_w:d_m:4==b_e?1==d_u?d_m:d_w:d_m},e}(),DoubleAreaControl=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.reqPvpInfo=function(){var e=new c2q_double_pvp_info;DB.instance.query(c2q_double_pvp_info,e)},e.prototype.reqMatch=function(){var e=new c2q_double_pvp_match;DB.instance.query(c2q_double_pvp_match,e)},e.prototype.reqChangeCloneFormation=function(e,p_l){var p_g=new c2m_double_pvp_clone_formation;p_g.type=e,p_g.formation=p_l,DB.instance.query(c2m_double_pvp_clone_formation,p_g)},e.prototype.reqChangeMap=function(){var e=new c2q_double_pvp_join_map;DB.instance.query(c2q_double_pvp_join_map,e)},e.prototype.reqGetRank=function(e){var p_l=new c2q_double_pvp_get_rank;p_l.type=e,DB.instance.query(c2q_double_pvp_get_rank,p_l)},e.prototype.reqTeamJoin=function(e){var p_l=new c2q_double_pvp_team_join;p_l.teamId=e,DB.instance.query(c2q_double_pvp_team_join,p_l)},e.prototype.reqChangeTeam=function(e,p_l){var p_g=new c2q_double_pvp_challenge;p_g.teamId=e,p_g.type=p_l,DB.instance.query(c2q_double_pvp_challenge,p_g)},e.prototype.reqChangeMemberCloneFormation=function(e,p_l){var p_g=new c2q_double_pvp_member_clone_formation;p_g.type=e,p_g.formation=p_l,DB.instance.query(c2q_double_pvp_member_clone_formation,p_g)},e.prototype.reqChangeTeamName=function(e,p_l){var p_g=new c2q_double_pvp_change_name;p_g.name=e,DB.instance.query(c2q_double_pvp_change_name,p_g)},e.prototype.reqInviteList=function(){var e=new c2w_double_pvp_invitation_list;DB.instance.query(c2w_double_pvp_invitation_list,e)},e.prototype.reqPvpTeamList=function(){var e=new c2q_double_pvp_team_list;DB.instance.query(c2q_double_pvp_team_list,e)},e.prototype.reqRefuseTeamInvite=function(e){var p_l=new c2q_double_pvp_invitation_refuse;p_l.teamId=e,DB.instance.query(c2q_double_pvp_invitation_refuse,p_l)},e.prototype.reqIntReward=function(){var e=new c2q_double_pvp_int_reward;DB.instance.query(c2q_double_pvp_int_reward,e)},e.prototype.reqAccptTeamInvite=function(e){var p_l=new c2q_double_pvp_invitation_accept;p_l.teamId=e,DB.instance.query(c2q_double_pvp_invitation_accept,p_l)},e.prototype.reqPvpTeamJoin=function(){var e=new c2q_double_pvp_team_join;DB.instance.query(c2q_double_pvp_team_join,e)},e.prototype.reqCreateTeam=function(e){void 0===e&&(e="");var p_l=new c2q_double_pvp_create_team;p_l.name=e,DB.instance.query(c2q_double_pvp_create_team,p_l)},e.prototype.reqClearCd=function(){var e=new c2m_double_pvp_match_clean_cool;DB.instance.query(c2m_double_pvp_match_clean_cool,e)},e.prototype.reqTeamLeave=function(){var e=new c2q_double_pvp_team_leave;DB.instance.query(c2q_double_pvp_team_leave,e)},e.prototype.reqRecordList=function(e,p_l){var p_g=new c2q_double_pvp_record;DB.instance.query(c2q_double_pvp_record,p_g)},e.prototype.reqInvite=function(e){var p_l=new c2q_double_pvp_invitation_plr;p_l.pid=e,DB.instance.query(c2q_double_pvp_invitation_plr,p_l)},e.prototype.reqBuyMatchCount=function(e){var p_l=new c2q_double_pvp_match_buy_count;p_l.time=e,DB.instance.query(c2q_double_pvp_match_buy_count,p_l)},e.prototype.reqSelfTeamInfo=function(e,p_l){var p_g=new c2q_double_pvp_team_info;p_g.teamId=e,p_g.type=p_l,DB.instance.query(c2q_double_pvp_team_info,p_g)},e.prototype.reqTeamKick=function(){var e=new c2q_double_pvp_team_kick;DB.instance.query(c2q_double_pvp_team_kick,e)},e.prototype.reqRevenge=function(e){var p_l=new c2q_double_pvp_revenge;p_l.recordId=e,DB.instance.query(c2q_double_pvp_revenge,p_l)},e.prototype.reqTeamDissolution=function(){var e=new c2q_double_pvp_team_dissolution;DB.instance.query(c2q_double_pvp_team_dissolution,e)},e.prototype.reqBeInviteList=function(){var e=new c2q_double_pvp_be_invitation_list;DB.instance.query(c2q_double_pvp_be_invitation_list,e)},e.prototype.reqRankReward=function(e){var p_l=new c2q_double_pvp_rank_reward;p_l.type=e,DB.instance.query(c2q_double_pvp_rank_reward,p_l)},e}(),DisCountReward=function(){function e(){this.isCut=!1}return e.prototype.updateData=function(e){Wkr(e,this)},e.prototype.clear=function(){Qri(this)},e}(),DiscountGiftInfo=function(){function e(){}return e.prototype.updateData=function(e){Wgc(e,this)},e}(),FriendBargainModel=function(){function e(){this._discountRewardList=[],this._friendList=new Array,this._isClickFriendBargain=!1,this.initCellInfo()}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.getCellInfoById=function(e){this.singleCellData=[];var p_l=Config.activity_friendDiscount_rewardDiscount;for(var p_g in p_l)p_l[p_g].id==e&&this.singleCellData.push(p_l[p_g]);return this.singleCellData},e.prototype.pbFriendDiscountLst=function(e){this._friendList=new Array;var p_l=Config.activity_friendDiscount_rewardDiscount[e.id];for(var p_g in e.friends)if(!(e.friends[p_g].qinmi<p_l.condition[0][1])){var b_s=new FriendVo,d_u=e.friends[p_g];b_s.pid=d_u.base.pid,b_s.name=d_u.base.name,b_s.lv=d_u.base.lv,b_s.stateLv=d_u.base.stateLv,b_s.combat=d_u.base.combat,b_s.entryId=d_u.base.entryId,b_s.headIcon=d_u.base.headIcon,b_s.fashionAvatar=d_u.base.fashionAvatar,b_s.qinmi=d_u.qinmi,b_s.relation=d_u.relation,b_s.status=d_u.status,b_s.time=d_u.time,b_s.todayAddQinmi=d_u.todayAddQinmi,b_s.lastAddQinmiTime=d_u.lastAddQinmiTime,b_s.bargainNum=d_u.todayDiscount,this._friendList.push(b_s)}LED.event(l_r.FRIEND_HELP_LIST_UPDATE)},e.prototype.initCellInfo=function(){var e=Config.activity_friendDiscount_rewardDiscount;for(var p_l in this._discountRewardList=[],e){var p_g=new DisCountReward;p_g.id=e[p_l].id,this._discountRewardList.push(p_g)}},e.prototype.getCellInfo=function(){return Wsl(this,Config)},e.prototype.pbFriendCountPrivate=function(e){},e.prototype.w2cBargainInfo=function(e){var p_l=Config.activity_friendDiscount_rewardDiscount;for(var p_g in p_l)this._discountRewardList[parseInt(p_g)-1].clear();if(e)for(var p_g in this.discountInfoArr=[],this._discountRewardList[0].bargainNum=e.discountTimes,e.rewardList)for(var b_s in this._discountRewardList)if(this._discountRewardList[b_s].id==e.rewardList[p_g].id)for(var d_u in this._discountRewardList[parseInt(b_s)].updateData(e.rewardList[p_g]),e.rewardList[p_g].disList){var b_e=new DiscountGiftInfo;b_e.updateData(e.rewardList[p_g].disList[d_u]),this.discountInfoArr.push(b_e)}LED.event(l_r.UPDATE_BARGAIN_LIST)},e.sortFriend_intimacy=function(e,p_l){return 2==e.status&&2==p_l.status?e.qinmi>p_l.qinmi?-1:e.qinmi<p_l.qinmi?1:e.bargainNum<p_l.bargainNum?1:e.bargainNum>p_l.bargainNum?-1:0:2==e.status&&2!=p_l.status?1:2!=e.status&&2==p_l.status?-1:e.qinmi>p_l.qinmi?-1:e.qinmi<p_l.qinmi?1:e.bargainNum<p_l.bargainNum?1:e.bargainNum>p_l.bargainNum?-1:0},Object.defineProperty(e.prototype,"Rewardlst",{get:function(){return this.discountInfoArr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"discountRewardList",{get:function(){return this._discountRewardList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DiscountInfoArr",{get:function(){return this.discountInfoArr},enumerable:!0,configurable:!0}),e.prototype.chechk_bargain_red=function(){return Osm(this)},e.prototype.reqFriendDiscountinfo=function(e){var p_l=new c2w_friend_discount_info;p_l.pid=e,DB.instance.query(c2w_friend_discount_info,p_l)},e.prototype.checkMainRed=function(e){var p_l=Config.activity_friendDiscount_rewardDiscount[e];for(var p_g in this._discountRewardList)if(this._discountRewardList[p_g].id==e&&this._discountRewardList[p_g].gold+p_l.priceLimit==p_l.price)return!0;return!1},e.prototype.reqFriendDiscountList=function(e){var p_l=new c2w_discount_friend_list;p_l.id=e,DB.instance.query(c2w_discount_friend_list,p_l)},e.prototype.checkAllBuyBtnRed=function(){var e=Config.activity_friendDiscount_rewardDiscount;for(var p_l in e)if(this.checkMainRed(parseInt(p_l))&&0==this._discountRewardList[parseInt(p_l)-1].bugRewardTime)return!0;return!1},e.prototype.reqFriendDiscount=function(e,p_l,p_g){var b_s=new c2w_friend_discount;b_s.id=e,b_s.type=p_l,b_s.pid=p_g,DB.instance.query(c2w_friend_discount,b_s)},e.prototype.reqFriendCountPrivateChat=function(e,p_l){var p_g=new c2w_friend_discount_invite;p_g.pid=e,p_g.id=p_l,DB.instance.query(c2w_friend_discount_invite,p_g)},e}(),OfflineModel=function(){function e(){this.dhOpenStateLv=0,this.dhOpenSubStateLv=0,this._isFirst=!0}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.showGainLinePanel=function(){this._isFirst&&this._isFirst&&RechargeModel.instance.cardInfos&&(this._isFirst=!1,this.offlineInfo&&this.offlineInfo.canGain&&Laya.timer.once(1e3,this,this.openOffinePanel))},e.prototype.openOffinePanel=function(){Cxb(UI)},e.prototype.resetFirstState=function(){Qka(this)},Object.defineProperty(e.prototype,"isDhOpen",{get:function(){return p_k.instance.checkSystemOpen(FuncDefine.dh)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canGain",{get:function(){return this.onlineInfo.canGain},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onlineInfo",{get:function(){return this._onlineInfo||(this._onlineInfo=new OnlineVO),this._onlineInfo},enumerable:!0,configurable:!0}),e.prototype.intimateChangeBuff=function(e){var p_l=Config.double_hangup_intimacy,p_g=0;for(var b_s in p_l)p_l[b_s].max<e&&(p_g=p_l[b_s].buffId);return p_g},e.prototype.countGainExpPct=function(){var e=100*StateModel.instance.getStateLv()+StateModel.instance.getStateSubLv(),p_l=Config.fb_hangup[e];p_l=p_l||Config.fb_hangup[1];var p_g=0;if(this.canGain){var b_s=Math.floor(this.onlineInfo.onlineTime/60);p_g=Math.min(100,b_s/p_l.limit*100)}return p_g},e.prototype.getOneselfCfg=function(){return Uhn(StateModel,Config)},e.prototype.intimateChangePct=function(e){var p_l=Config.double_hangup_intimacy,p_g=0;for(var b_s in p_l)p_l[b_s].max<e&&(p_g=p_l[b_s].addiPct);return p_g},e.prototype.addCardTime=function(){var e=0,p_l=RechargeModel.instance.cardInfos;if(!p_l)return e;var p_g=p_l[CardType.weekcard],b_s=p_l[CardType.lifeLongCard];return p_g&&(e+=Config.recharge_monthcard[p_g.id].offlineAddition),b_s&&(e+=Config.recharge_monthcard[b_s.id].offlineAddition),e},e.prototype.countReqSpaceOnline=function(e){var p_l=100*StateModel.instance.getStateLv()+StateModel.instance.getStateSubLv(),p_g=Config.fb_hangup[p_l];return e*(p_g=p_g||Config.fb_hangup[1]).limit/100},Object.defineProperty(e.prototype,"offlineInfo",{get:function(){return this._offlineInfo||(this._offlineInfo=new OfflineVO),this._offlineInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dhInfo",{get:function(){return this._dhInfo||(this._dhInfo=new DoubleHangVO),this._dhInfo},enumerable:!0,configurable:!0}),e.reqOnlineExpInfo=function(){DB.instance.query(c2m_hangup_online_reward,{})},e.reqDhInfo=function(){DB.instance.query(c2w_dh_info,new c2w_dh_info)},e.reqDhInviteList=function(){DB.instance.query(c2w_dh_invite_list,new c2w_dh_invite_list)},e.reqDhFriendList=function(){DB.instance.query(c2w_dh_friend_list,new c2w_dh_friend_list)},e.reqGetOfflineExp=function(e){var p_l=new c2m_hangup_get_reward;p_l.watchVideos=e,DB.instance.query(c2m_hangup_get_reward,p_l)},e.reqDhInvite=function(e){var p_l=new c2w_dh_invite;p_l.pid=e,DB.instance.query(c2w_dh_invite,p_l)},e.reqGetOnlineExp=function(e){var p_l=new c2m_hangup_get_reward;p_l.watchVideos=e,DB.instance.query(c2m_hangup_get_reward,p_l)},e.reqDhTakeExp=function(){DB.instance.query(c2m_dh_take_exp,new c2m_dh_take_exp)},e.reqDhAgree=function(e,p_l){var p_g=new c2w_dh_agree;p_g.pid=e,p_g.isAgree=p_l,DB.instance.query(c2w_dh_agree,p_g)},e.reqDhStop=function(){},Object.defineProperty(e.prototype,"hasInvite",{get:function(){return!!p_k.instance.checkSystemOpen(FuncDefine.dh)&&this.dhInviteList&&0<this.dhInviteList.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasTime",{get:function(){return!!p_k.instance.checkSystemOpen(FuncDefine.dh)&&0<this.dhInfo.dhLeftTime&&!this.dhInfo.hasPartner},enumerable:!0,configurable:!0}),e}(),OnlineVO=function(){function e(){this.sec=0,this.exp=0,this.copper=0,this.itemCount=0,this.reqLastTime=0}return Object.defineProperty(e.prototype,"onlineTime",{get:function(){var e=OfflineModel.instance.getOneselfCfg();return 60*Math.floor(this.exp/Math.max(1,e.exp))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canGain",{get:function(){return 0<this.exp&&0<this.onlineTime},enumerable:!0,configurable:!0}),e}(),OfflineVO=function(){function e(){this.sec=0,this.exp=0,this.copper=0,this.itemCount=0,this.gotRwd=!1}return e.prototype.paser=function(e){Kwi(e,this)},Object.defineProperty(e.prototype,"offLineTime",{get:function(){var e=OfflineModel.instance.getOneselfCfg(),p_l=60*Math.floor(this.exp/Math.max(1,e.exp));return Math.max(p_l,this.sec)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canGain",{get:function(){return 0<this.exp&&!this.gotRwd},enumerable:!0,configurable:!0}),e}(),DoubleHangVO=function(){function e(){this.dhLeftTime=0,this.dhEndTime=0,this.partnerId=0,this.partnerName="",this.partnerEnrtyId=0,this.qinmi=0,this.rewardRate=0}return e.prototype.update=function(e){this.dhEndTime=e.dhEndTime,this.leftCount=e.leftTimes,this.taskNum1=e.taskNum1,this.taskNum2=e.taskNum2,this.rewardRate=e.rewardRate?e.rewardRate:0,this.rewardRate=Math.floor(this.rewardRate),e.sinfo&&(this.scity=e.sinfo.city,this.sonline=e.sinfo.online,this.sbeginTime=e.sinfo.beginTime,this.sendTime=e.sinfo.endTime,this.ssex=e.sinfo.sex),e.tinfo&&(this.tpid=e.tinfo.pid,this.partnerId=e.tinfo.pid,this.partnerName=e.tinfo.name,this.partnerEnrtyId=e.tinfo.entryId,this.qinmi=e.qinmi,this.tsex=e.tinfo.sex,this.tcity=e.tinfo.city,this.tonline=e.tinfo.online,this.tbeginTime=e.tinfo.beginTime,this.tendTime=e.tinfo.endTime),e.tinfo||(this.partnerId=0,this.partnerName="",this.partnerEnrtyId=0,this.qinmi=0,this.tsex=-1,this.tcity=-1,this.tonline=0,this.tbeginTime=0,this.tendTime=0),e.sinfo||(this.scity=-1,this.sonline=0,this.sbeginTime=0,this.sendTime=0)},Object.defineProperty(e.prototype,"hasPartner",{get:function(){return 0<this.partnerId},enumerable:!0,configurable:!0}),e}(),successType,DhModel=function(){function e(){this._taskRanDom=[],this._dhListInfo=[]}return e.prototype.cityInit=function(){var e=Config.city,p_l="";for(var p_g in e)e[p_g]&&(p_l+=e[p_g].name+",");return p_l},e.prototype.onSuccess=function(e,p_l){switch(e){case 1:switch(p_l){case 1:return successType.DRAW;case 2:return successType.FILLED;case 3:return successType.SUCCESS}return 0;case 2:switch(p_l){case 1:return successType.SUCCESS;case 2:return successType.DRAW;case 3:return successType.FILLED}return 0;case 3:switch(p_l){case 1:return successType.FILLED;case 2:return successType.SUCCESS;case 3:return successType.DRAW}return 0}},e.prototype.dhListInfoUpdate=function(p_l){if(this._dhListInfo=[],p_l&&p_l.list&&p_l.list.length)for(var p_g in p_l.list)this._dhListInfo.push(p_l.list[p_g]);return this._dhListInfo.sort(e.sortFriend)},e.prototype.setTaskRanDom=function(){return this._taskRanDom&&null!=this._taskRanDom?this._taskRanDom:null},e.prototype.dhTaskRandom=function(e,p_l){if(e&&e&&e.length)for(var p_g in this._taskRanDom=[],e){var b_s=Config.double_hangup_question[e[p_g]];b_s&&p_l&&parseInt(p_g)+1>p_l.length&&this._taskRanDom.push(b_s),p_l&&p_l.length||this._taskRanDom.push(b_s)}},e.prototype.onSuccessTime=function(){var p_l=e.instance.dhmora,p_g=[0,0,0,0];if(!p_l)return p_g[0]++,p_g&&p_g.length?p_g:void 0;var b_s,d_u=p_l&&null!=p_l.res1?p_l.res1:null,b_e=p_l&&null!=p_l.res2?p_l.res2:null;if(b_p.playerId==p_l.pid2&&(d_u=p_l.res2,b_e=p_l.res1),p_l&&null!=p_l&&d_u&&b_e&&d_u.length&&b_e.length)for(var d_m in d_u)if(b_s=e.instance.onSuccess(d_u[d_m],b_e[d_m]))switch(b_s){case 1:p_g[0]++;break;case 2:p_g[2]++;break;case 3:p_g[1]+=2,p_g[3]+=2}return p_g&&p_g.length?p_g:null},e.sortFriend=function(e,p_l){return e.online===p_l.online?p_l.sex===e.sex?e.city===p_l.city?(e.beginTime===p_l.beginTime&&(e.pid,p_l.pid),e.beginTime-p_l.beginTime):e.city-p_l.city:p_l.sex-e.sex:p_l.online-e.online},e.prototype.dhtaskInit=function(){var e=Config.double_hangup_task,p_l=[];for(var p_g in OfflineModel.instance.dhInfo,e)e[p_g]&&null!=e[p_g]&&p_l.push(e[p_g]);return p_l&&p_l.length?p_l:null},e.prototype.setDhListInfo=function(){return this._dhListInfo&&null!=this._dhListInfo?this._dhListInfo:null},e.getDhTaskNum=function(e){switch(e){case 1:return(j_x("1282_2332_1737"));case 2:return(j_x("1282_2332_158"));case 3:return(j_x("1282_2332_1470"))}},e.prototype.onDhTaskRed=function(){var p_l=e.instance.dhinfo,p_g=(LgcM.ins.heroVo,!1);return!(!p_l.tinfo||!(p_l&&p_l.qid&&p_l.qid.length&&(p_g=!(3<=(p_l&&p_l.aid&&p_l.aid.length))))&&!(p_l&&p_l.aid&&p_l.aid.length&&(p_g=!(p_l&&3<=p_l.taskNum1))&&p_l.aid.length<3)&&(0!=p_g||!(p_g=!(p_l&&3<=p_l.taskNum2))||p_l.moraRound)&&(!p_l.tinfo||!p_g||p_l.aid&&!(p_l.aid.length<3)&&p_l.moraRound))},e.prototype.onTitleVo=function(){var p_l=Config.double_hangup_title,p_g=e.instance.dhinfo;if(p_l&&p_g)for(var b_s in p_l)if(p_g.moraWin&&2==p_l[b_s].type&&p_g.moraWin<p_l[b_s].condition)return p_l[b_s]},Object.defineProperty(e.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),e.prototype.reqDhRegister=function(e,p_l,p_g,b_s){var d_u=new c2w_dh_register;d_u.sex=e,d_u.city=p_l,d_u.beginTime=p_g,d_u.endTime=b_s,DB.instance.query(c2w_dh_register,d_u)},e.prototype.reqcDhList=function(){var e=new c2w_dh_list;DB.instance.query(c2w_dh_list,e)},e.prototype.reqDhAcceptTask=function(e){var p_l=new c2w_dh_accept_task;p_l.ty=e,DB.instance.query(c2w_dh_accept_task,p_l)},e.prototype.reqDhMora=function(e,p_l){var p_g=new c2w_dh_mora;p_g.idx=e,p_g.flag=p_l,DB.instance.query(c2w_dh_mora,p_g)},e.prototype.reqDhMoraReply=function(e,p_l,p_g){var b_s=new c2w_dh_mora_reply;b_s.op=e,b_s.pid=p_l,b_s.again=p_g,DB.instance.query(c2w_dh_mora_reply,b_s)},e.prototype.reqcDhAnswer=function(e,p_l){var p_g=new c2w_dh_answer;p_g.qId=e,p_g.aId=p_l,DB.instance.query(c2w_dh_answer,p_g)},e.prototype.reqDhMoraAgain=function(){var e=new c2w_dh_mora_again;DB.instance.query(c2w_dh_mora_again,e)},e.instance=new e,e}();!function(e){e[e.SUCCESS=1]="SUCCESS",e[e.FILLED=2]="FILLED",e[e.DRAW=3]="DRAW"}(successType=successType||{});var x_y=function(){function e(){DB.instance.on(m2c_hangup_get_reward.opcode.toString(),this,this.onOfflineReward),DB.instance.on(w2c_dh_info.opcode.toString(),this,this.onDoubleHangInfo),DB.instance.on(w2c_dh_friend_list.opcode.toString(),this,this.onDoubleHangFriendList),DB.instance.on(w2c_dh_invite_list.opcode.toString(),this,this.onDoubleHangInviteList),DB.instance.on(w2c_dh_invite.opcode.toString(),this,this.onDoubleHangInviteReturn),DB.instance.on(w2c_db_be_invited.opcode.toString(),this,this.onDoubleHangInvited),DB.instance.on(w2c_dh_agree.opcode.toString(),this,this.onDoubleHangAgreeReturn),DB.instance.on(m2c_dh_take_exp.opcode.toString(),this,this.onDoubleHangTakeExp),DB.instance.on(w2c_dh_stop.opcode.toString(),this,this.onDoubleHangStopReturn),DB.instance.on(w2c_dh_list.opcode.toString(),this,this.onDhListInfo),DB.instance.on(w2c_dh_task_question.opcode.toString(),this,this.onDhtaskQuestion),DB.instance.on(w2c_dh_mora.opcode.toString(),this,this.onDhmora),DB.instance.on(w2c_dh_mora_invite.opcode.toString(),this,this.onDhMoraInvite),DB.instance.on(w2c_dh_mora_agree.opcode.toString(),this,this.onDhMoraAgree),DB.instance.on(w2c_dh_again_fail.opcode.toString(),this,this.onDhAgainfail)}return e.prototype.onOfflineReward=function(e){Ohp(e,OfflineModel,LED,l_r)},e.prototype.onDhMoraInvite=function(e){e&&e.pid&&(DhModel.instance.dhPid=e.pid),LED.event(l_r.DH_MORAINVITE_UPDATE)},e.prototype.onDhtaskQuestion=function(e){((DhModel.instance.dhTaskquestion=e).id||e.id.length)&&DhModel.instance.dhTaskRandom(e.id,e.answer),LED.event(l_r.DOUBLEHANG_INFO_UPDATE),e||UI.DhTaskAnswerPanel.open()},e.prototype.onDoubleHangStopReturn=function(e){Iki(e,b_p,j_x,BroadcastType,Utils,OfflineModel)},e.prototype.onDhMoraAgree=function(e){Gzq(e,LED,l_r)},e.prototype.onDoubleHangInviteReturn=function(e){Aez(e,b_p,j_x,BroadcastType,Utils,OfflineModel)},e.prototype.onDoubleHangInvited=function(e){Grm(e,OfflineModel)},e.prototype.onDoubleHangInviteList=function(e){Wag(e,OfflineModel,LED,l_r)},e.prototype.onDoubleHangInfo=function(e){OfflineModel.instance.dhInfo.update(e),(DhModel.instance.dhinfo=e).qid&&null!=e.qid&&DhModel.instance.dhTaskRandom(e.qid,e.aid),LED.event(l_r.DOUBLEHANG_INFO_UPDATE),LED.event(l_r.HELPER_UPDATE_INFO)},e.prototype.onDoubleHangTakeExp=function(e){Mlh(e,b_p,j_x,BroadcastType,Utils,OfflineModel)},e.prototype.onDoubleHangAgreeReturn=function(e){Odl(e,b_p,j_x,BroadcastType,Utils,OfflineModel)},e.prototype.onDoubleHangFriendList=function(e){Ayp(e,OfflineModel,LED,l_r)},e.prototype.onDhListInfo=function(e){Ics(e,DhModel,LED,l_r)},e.prototype.onDhmora=function(e){Gta(e,DhModel,LED,l_r)},e.prototype.onDhAgainfail=function(e){var p_l=UIM.instance.isOpenWin(UI.DhTaskFggStartPanel),p_g=UIM.instance.isOpenWin(UI.DhTaskFggStopPanel),b_s=UIM.instance.isOpenWin(UI.DhTaskFggPanel);p_l&&UI.DhTaskFggStartPanel.close(),p_g&&UI.DhTaskFggStopPanel.close(),b_s&&UI.DhTaskFggPanel.close()},e}(),DecomposeModel=function(){function e(){this._showNum=12,this._showGodNum=20,this._equipList=[],this._godList=[],this._talisEquipList=[]}return e.prototype.addGodEquip=function(){Mpd(this,ItemTypeDefine)},e.prototype.isGodRed=function(){return Ocq(this)},e.prototype.getShowListByIndex=function(p_l){var p_g,b_s=[],d_u=0;switch(p_l){case e.INDEX_EQUIP:p_g=this._equipList,d_u=this._showNum;break;case e.INDEX_GODE:p_g=this._godList,d_u=this._showGodNum;break;case e.INDEX_TALISEQUIP:p_g=this._talisEquipList,d_u=this._showNum;break;default:p_g=[]}for(var b_e=0;b_e<d_u;++b_e)b_e<p_g.length?b_s.push(p_g[b_e].uuid):b_s.push("");return b_s},Object.defineProperty(e.prototype,"getGodListInfo",{get:function(){return this._godList},enumerable:!0,configurable:!0}),e.prototype.init=function(p_l){for(var p_g in this._equipList=[],this._godList=[],this._talisEquipList=[],p_l)this.addItemByTypeAndQuality(ItemTypeDefine.EQUIPMENT,p_l[p_g]),this.addItemByTypeAndQuality(e.INDEX_TALISEQUIP,p_l[p_g]);this.addItemByTypeAndQuality(ItemTypeDefine.GODEQUIP,-1)},e.prototype.addItemByTypeAndQuality=function(p_l,p_g){var b_s,d_u=0;switch(p_l){case ItemTypeDefine.EQUIPMENT:b_s=this._equipList,d_u=1;break;case ItemTypeDefine.GODEQUIP:b_s=this._godList,p_l=1,d_u=EquipSubClassDefine.EquipGod;break;case e.INDEX_TALISEQUIP:b_s=this._talisEquipList,p_l=1,d_u=EquipSubClassDefine.EquipTalis;break;default:console.log("add item type not exist",p_l)}var b_e=this.getItemByTypeAndQuality(p_l,p_g,d_u);for(var d_m in b_e)b_s.indexOf(b_e[d_m])<0&&b_s.push(b_e[d_m])},e.prototype.pbDecomposeEquip=function(e){for(var p_l=0,p_g=e.changeList;p_l<p_g.length;p_l++){var b_s=p_g[p_l];b_s.id==this._rewItem0?this._rewItem0Num=b_s.num:b_s.id==this._rewItem1?this._rewItem1Num=b_s.num:this._rewSoulElite=b_s.num}LED.event(l_r.DECOMPOSE_EQUIP_LIST_REFILL)},e.prototype.getAllTalismanPart=function(){for(var e={},p_l=1;p_l<6;p_l++)e[p_l]=TalismanModel.instance.getTalisEquipByPart(p_l,BagTypeDefine.BAG_TYPE_TALIS);return e},e.prototype.removeItemByTypeAndQuality=function(p_l,p_g){var b_s;switch(p_l){case ItemTypeDefine.EQUIPMENT:b_s=this._equipList;break;case ItemTypeDefine.GODEQUIP:b_s=this._godList;case e.INDEX_TALISEQUIP:b_s=this._talisEquipList}for(var d_u=b_s.length-1;0<=d_u;--d_u)Config.CItem(b_s[d_u].id).quality!=p_g&&-1!=p_g||b_s.splice(d_u,1)},e.prototype.getItemByTypeAndQuality=function(e,p_l,p_g){var b_s,d_u=BagModel.instance.getItemsByItemType(BagTypeDefine.BAG_TYPE_ITEM,e),b_e=[],d_m={};4==p_g&&1==e&&(d_m=this.getAllTalismanPart(),b_s=TalismanModel.instance.canWearEquipTalisNum());for(var d_w=0;d_w<d_u.length;d_w++){var f_t=Config.CItem(d_u[d_w].id);if(p_g==f_t.subclass&&4==p_g){var v_z=d_m[f_t.place];if(!v_z||v_z.length<=0)continue;if(v_z.length<b_s[f_t.quality])continue;var d_h=!1;for(var r_t in v_z)if(d_u[d_w].fighting>v_z[r_t].fighting){d_h=!0;break}if(d_h)continue}else if(f_t.entryId==LgcM.ins.heroVo.entryId&&f_t.mainclass==ItemClassDefine.MC_EQUIP&&f_t.subclass==ItemClassDefine.SUB_EQUIP_ROLE){var t_n=EquipModel.instance.getEquipByPlace(f_t.place);if((!t_n||EquipModel.instance.calcEquipFight(t_n)<EquipModel.instance.calcEquipFight(d_u[d_w]))&&4<=f_t.quality)continue}else if(p_g==f_t.subclass&&5==p_g){var f_y=f_t.suitId,p_q=d_m[f_y]||GodEquipModel.ins.getGodEquipBySuitId(f_y);if(!p_q[f_t.place]||p_q[f_t.place].fighting<d_u[d_w].fighting)continue;d_m[f_y]=p_q}(-1==p_l||f_t&&f_t.quality==p_l)&&(0!=p_g&&f_t.subclass==p_g?b_e.push(d_u[d_w]):0==p_g&&b_e.push(d_u[d_w]))}return b_e},e.isInTargetList=function(e,p_l){return Wtn(e,p_l)},e.prototype.reqDecomposeEquip=function(e,p_l){var p_g=new c2m_decompose_equip;p_g.itemUidList=new Array,p_g.type=e;for(var b_s=0;b_s<p_l.length;b_s++)p_g.itemUidList.push(p_l[b_s]);DB.instance.query(c2m_decompose_equip,p_g)},e.prototype.generateCnfKey=function(e,p_l,p_g,b_s){return Squ(e,p_l,p_g,b_s)},e.prototype.reqAutoDecompose=function(e,p_l){var p_g=new c2m_decompose_auto;p_g.type=e,p_g.qualitys=p_l,DB.instance.query(c2m_decompose_auto,p_g)},e.prototype.addItems=function(e,p_l){var p_g;for(var b_s in 0==p_l?p_g=this._equipList:2==p_l?p_g=this._godList:3==p_l&&(p_g=this._talisEquipList),e)e[b_s]&&p_g.indexOf(e[b_s])<0&&p_g.push(e[b_s])},e.prototype.getBagSoulItems=function(){var e=[],p_l=BagModel.instance.getItemInfosByBagType(BagTypeDefine.BAG_TYPE_ITEM);for(var p_g in p_l){var b_s=Config.CItem(p_l[p_g].id);b_s&&2==b_s.mainclass&&1==b_s.subclass&&e.push(p_l[p_g])}return e},e.prototype.getGodEquipDecomReward=function(e){var p_l=[];if(e&&0<e.length)for(var p_g in e){var b_s=e[p_g],d_u=Config.decompose_godEquipDecompose[b_s.id];p_l=GameDefine.mergeCfgNum(d_u.material,p_l)}for(var b_e=(p_l=b_p.getRewardDatas(p_l)||[]).length;b_e<this._showNum;b_e++)p_l.push(null);return p_l},e.INDEX_EQUIP=0,e.INDEX_GODE=2,e.INDEX_TALISEQUIP=3,e.instance=new e,e}(),CrossModel=function(){function e(){}return Object.defineProperty(e.prototype,"isSmallCross",{get:function(){return this._isSmallCross},set:function(e){this._isSmallCross=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBigOrLitterCross",{get:function(){return this._isBigOrLitterCross},set:function(e){this._isBigOrLitterCross=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"crossOpenTime",{get:function(){return this._crossOpenTime},set:function(e){this._crossOpenTime=e,this._isCrossOpen=0<e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCrossOpen",{get:function(){return this._isCrossOpen},enumerable:!0,configurable:!0}),e.prototype.sendCrossOpen=function(e){void 0===e&&(e=0);var p_l=new c2g_cross_open;p_l.serverType=e,DB.instance.query(c2g_cross_open,p_l)},e.ins=new e,e}(),UpState,l_d;l_d=UpState=UpState||{},l_d[l_d.NOT_ENOUGH=0]="NOT_ENOUGH",l_d[l_d.CAN_UP=1]="CAN_UP",l_d[l_d.MAX_UP=2]="MAX_UP",l_d[l_d.NOT_ACTIVTED=3]="NOT_ACTIVTED",l_d[l_d.NOT_UP=4]="NOT_UP";var z_x=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){Erg(DB,m2c_advert_Info,this,m2c_advert_one_advert,m2c_advert_recharge)},Object.defineProperty(e.prototype,"freeMapInfo",{get:function(){return this._freeMapInfo||(this._freeMapInfo={}),this._freeMapInfo},enumerable:!0,configurable:!0}),e.prototype.updateInfos=function(e){var p_l=this.freeMapInfo;if(e){for(var p_g in e.advertArr)p_l[e.advertArr[p_g].id]=e.advertArr[p_g];LED.event(l_r.FREE_RECHARGE_INFO)}},e.prototype.isCanRecharge=function(e,p_l){if(void 0===p_l&&(p_l=!1),GPlatform.isQQMini||GPlatform.isDebug){var p_g=this.freeMapInfo[e];if(!p_g)return!0;var b_s=this.getCfgById(e);return 0<p_g.lastTime+b_s.interval-SyncTime.serverTime/1e3?(p_l&&b_p.broadcastNotice((j_x("2166_2450_1614")+j_x("2171_283"))),!1):0<b_s.limit-p_g.num||(p_l&&b_p.broadcastNotice((j_x("2339_2308_235")+j_x("2348_1300_1876")+j_x(442)+""+j_x("421_2308_1953")+j_x("242_976"))),!1)}return!1},e.prototype.isShowRecharge=function(){return Ulu(GPlatform)},e.reqFreeRecInfo=function(){var e=new c2m_advert_Info;DB.instance.query(c2m_advert_Info,e)},e.prototype.getCfgById=function(e){return Cqh(e,Config)},e.prototype.updateSingleInfo=function(e){e&&(this.freeMapInfo[e.advert.id]=e.advert,LED.event(l_r.FREE_SINGLE_INFO))},e.prototype.freeRecNotice=function(e){e&&(b_p.broadcastNotice((j_x("2258_2376_402")+j_x(2142)),BroadcastType.WIN),b_p.broadcastNotice(("vip"+j_x("1241_144_1628")+j_x(371))+e.gold,1,"#71de66"))},e.reqFreeRecharge=function(e){var p_l=new c2m_advert_recharge;p_l.id=e,DB.instance.query(c2m_advert_recharge,p_l)},e}(),CommonOpType;!function(e){e[e.CHAT=0]="CHAT",e[e.LOTTERT=1]="LOTTERT",e[e.MARRY=2]="MARRY"}(CommonOpType=CommonOpType||{});var d_o=function(){function e(){this.itemStack=[],this.isOpenStartDeley=!1,this.lastTime={}}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){Mpt(LED,l_r,this)},e.prototype.pushDelayItem=function(e){e&&(this.itemStack[e.source]||(this.itemStack[e.source]=[]),this.isOpenStartDeley?this.itemStack[e.source].push(e):BagModel.instance.broadcastNotic(e.id,e.count,e.source))},e.prototype.reqPlayerinfo=function(e,p_l){var p_g=new c2w_plr_base_info;p_g.op=e,p_g.pid=p_l,DB.instance.query(c2w_plr_base_info,p_g)},e.prototype.updatePlayerInfo=function(e){switch(e.op){case CommonOpType.CHAT:n_d.instance.updatePrivatePlayerInfo(e.info);break;case CommonOpType.LOTTERT:LED.event(l_r.ACTIVITY_PALYER_INFO,e.info);break;case CommonOpType.MARRY:LED.event(l_r.MARRY_PALYER_INFO,e.info)}},e.prototype.popItem=function(e,p_l){void 0===p_l&&(p_l=!0);var p_g=this.itemStack[e];if(p_g&&0<p_g.length){if(p_l){var b_s=p_g[0];BagModel.instance.broadcastNotic(b_s.id,b_s.count,b_s.source)}this.itemStack[e].shift()}this.isOpenStartDeley=!1},e.prototype.onSceneChangeShowUI=function(){var e=b_p.lastFbId,p_l=Config.fb_ascent[e],p_g=Config.fb_yishou[e],b_s=Config.fb_xuanshang[e];if(p_l)(d_u=TeamModel.instance.getTeamVO(TeamAimsType.ASCENT)).teamInfoVo&&(d_u.teamInfoVo.isLeader||TeamHelp.openTeamPanel(d_u));else if(p_g)(d_u=TeamModel.instance.getTeamVO(TeamAimsType.RareAni)).teamInfoVo&&(d_u.teamInfoVo.isLeader||TeamHelp.openTeamPanel(d_u));else if(b_s){var d_u;(d_u=TeamModel.instance.getTeamVO(TeamAimsType.RewardBossAni)).teamInfoVo&&(d_u.teamInfoVo.isLeader||TeamHelp.openTeamPanel(d_u))}},e.prototype.isCurrentTimeExceeds=function(e,p_l,p_g){return void 0===p_l&&(p_l=0),void 0===p_g&&(p_g=""),!p_l||(this.lastTime[e]||(this.lastTime[e]=0),this.lastTime[e]+p_l<=SyncTime.serverTime?(this.lastTime[e]=SyncTime.serverTime,!0):(""!=p_g&&null!=p_g&&b_p.broadcastNotice(p_g),!1))},e.prototype.onSceneChange=function(){var e=b_p.lastFbId,p_l=Config.fb_ascent[e],p_g=Config.fb_yishou[e],b_s=Config.fb_xuanshang[e];if(p_l){if((d_u=TeamModel.instance.getTeamVO(TeamAimsType.ASCENT)).teamInfoVo&&(b_e=DungeonModel.instance.autoTeamEnterFbId)&&d_u.teamInfoVo.isLeader)return void j_a.sceIns().add(this,this.onEnterFb,[b_e,d_u.teamInfoVo.teamId,!1])}else if(p_g){if((d_u=TeamModel.instance.getTeamVO(TeamAimsType.RareAni)).teamInfoVo&&(b_e=DungeonModel.instance.autoTeamEnterFbId)&&d_u.teamInfoVo.isLeader)return void j_a.sceIns().add(this,this.onEnterFb,[b_e,d_u.teamInfoVo.teamId,!1])}else if(b_s){var d_u,b_e;if((d_u=TeamModel.instance.getTeamVO(TeamAimsType.RewardBossAni)).teamInfoVo&&(b_e=DungeonModel.instance.autoTeamEnterFbId)&&d_u.teamInfoVo.isLeader)return void j_a.sceIns().add(this,this.onEnterFb,[b_e,d_u.teamInfoVo.teamId,!0])}},e.prototype.removeAllItem=function(e,p_l){void 0===p_l&&(p_l=!0);var p_g=this.itemStack[e];if(p_g&&0<p_g.length){if(p_l)for(var b_s in p_g){var d_u=p_g[b_s];BagModel.instance.broadcastNotic(d_u.id,d_u.count,d_u.source)}this.itemStack[e].reverse(),this.itemStack[e]=[]}this.isOpenStartDeley=!1},e.prototype.onEnterFb=function(e,p_l,p_g){var b_s=function(e,p_l,p_g){Eph(e,p_l,p_g,TeamModel,DungeonModel)};LgcM.ins.isShowLoading?LED.on(l_r.SCENE_LOAD_OVER,this,(function e(p_l,d_u){LED.off(l_r.SCENE_LOAD_OVER,this,e),b_s(p_l,d_u,p_g)}),[e,p_l]):b_s(e,p_l,p_g)},e}(),WeatherType,WeatherController=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.checkWeather=function(e,p_l){var p_g=Engine2d.GameMap.defaultMap.checkFuncFlag(e,p_l);if(0<p_g&&this._lastFlag!=p_g){this.clear();for(var b_s=void 0,d_u=0;d_u<20;d_u++)(b_s=new WeatherEffectVo).playEffect(p_g)?(this._effectList||(this._effectList=[]),this._effectList.push(b_s)):b_s=null;this._lastFlag=p_g}else 0===p_g&&this.clear()},e.prototype.clear=function(){if(this._effectList){for(var e in this._effectList)this._effectList[e].dispose();this._effectList.length=0,this._lastFlag=0}},e}(),WeatherEffectVo=function(){function e(){}return e.prototype.playEffect=function(e){if(void 0===e&&(e=0),!e)return!1;var p_l="";switch(e){case WeatherType.WEATHER_RAIN:p_l="rain";break;case WeatherType.WEATHER_SUN:p_l="sun";break;case WeatherType.WEATHER_CLOUND:p_l="clound";break;case WeatherType.WEATHER_FOG:p_l="flog";break;case WeatherType.WEATHER_SAND:p_l="sand";break;case WeatherType.WEATHER_SNOW:p_l="snow"}return""!==p_l&&(this.ani=this.ani||Resource.ResManager.Instance.freeAnimation,this.ani.on(Laya.Event.COMPLETE,this,this.onAnimationPlayCompleted),this.ani.on(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onAnimLoadedComplete),this.setSkinRootUrl(p_l),this.setAction(p_l,0,!1,125),!0)},e.prototype.getPivotConfig=function(e){if(e){var p_l=Config.pivot;for(var p_g in p_l)if(p_l[p_g].avatar===e)return p_l[p_g]}return null},e.prototype.delayPlay=function(){this.ani.visible=!0,this.ani.play(0,this.ani.isLoop),null===this.ani.parent&&(Engine2d.GameMap.defaultMap.addAboveObject(this.ani),this.resetAnimPivot(this.ani));var e=Engine2d.Hero.local;if(e){var p_l=Stage.width/2,p_g=Stage.height/2,b_s=30+Math.random()*(p_l-50),d_u=50+Math.random()*(p_g-200);b_s=(.5<Math.random()?b_s:-b_s)+e.x,d_u=(.5<Math.random()?-d_u:d_u)+e.y,this.ani.pos(b_s,d_u)}else this.ani.pos(0,0)},e.prototype.onAnimationPlayCompleted=function(){this.ani&&0==this.ani.loop&&(this.ani.visible=!1,this.onAnimLoadedComplete(null))},e.prototype.onAnimLoadedComplete=function(e){if(void 0===e&&(e=null),this.ani&&this.ani.url==e||null===e){var p_l=1e3*Math.random();Laya.timer.once(p_l,this,this.delayPlay)}},e.prototype.resetAnimPivot=function(e){if(e){var p_l=e.getGraphicBounds();if(p_l&&0!=p_l.width&&0!=p_l.height){var p_g=p_l.height/2,b_s=this.getPivotConfig(e.avatar);b_s&&(p_g+=b_s.offsetPivotY),e.pivot(p_l.width/2,p_g)}}},e.prototype.setAction=function(e,p_l,p_g,b_s){void 0===p_g&&(p_g=!1),void 0===b_s&&(b_s=Engine2d.Animation.ANIMATION_INTERVAL),this.ani.setAction(e,p_l,p_g,b_s)},e.prototype.setSkinRootUrl=function(e){Esl(e,this,Resource,EffectType)},e.prototype.dispose=function(){Laya.timer.clear(this,this.delayPlay),this.ani&&(this.ani.visible=!0,this.ani.off(Laya.Event.COMPLETE,this,this.onAnimationPlayCompleted),this.ani.off(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onAnimLoadedComplete),this.ani.clear(),this.ani.removeSelf(),Resource.ResManager.Instance.recoverAnimation(this.ani),this.ani=null)},e}();!function(e){e[e.WEATHER_RAIN=4]="WEATHER_RAIN",e[e.WEATHER_SUN=8]="WEATHER_SUN",e[e.WEATHER_CLOUND=16]="WEATHER_CLOUND",e[e.WEATHER_FOG=32]="WEATHER_FOG",e[e.WEATHER_SAND=64]="WEATHER_SAND",e[e.WEATHER_SNOW=128]="WEATHER_SNOW"}(WeatherType=WeatherType||{});var x_j=function(){function e(){this.isSelfSkill=!1}return e.prototype.destroy=function(){Osd(this,Laya)},e.prototype.reset=function(){Izg(this)},e.freeVo=function(){return Sxm(Laya,e)},e}(),PropertyChanger=function(){function e(){this._propReflectList=new Object,this._propReflectList[Properties.name.ordinal]=this.updateName,this._propReflectList[Properties.hp.ordinal]=this.updateHP,this._propReflectList[Properties.hpUpper.ordinal]=this.updateHP,this._propReflectList[Properties.level.ordinal]=this.updateLevel,this._propReflectList[Properties.fight.ordinal]=this.updateFight,this._propReflectList[Properties.gold.ordinal]=this.updateWallet,this._propReflectList[Properties.copper.ordinal]=this.updateWallet,this._propReflectList[Properties.guildCtrb.ordinal]=this.updateWallet,this._propReflectList[Properties.honor.ordinal]=this.updateWallet,this._propReflectList[Properties.speed.ordinal]=this.updateSpeed,this._propReflectList[Properties.exp.ordinal]=this.updateExp,this._propReflectList[Properties.skillExp.ordinal]=this.updateSkillExp,this._propReflectList[Properties.stateLv.ordinal]=this.updateStateLv,this._propReflectList[Properties.stateNum.ordinal]=this.updateStateNum,this._propReflectList[Properties.ride.ordinal]=this.updateRide,this._propReflectList[Properties.hudun.ordinal]=this.updateHudun,this._propReflectList[Properties.hudunUpper.ordinal]=this.updateHudun,this._propReflectList[Properties.fightingAckTs.ordinal]=this.updateFightingTs1,this._propReflectList[Properties.fightingDefTs.ordinal]=this.updateFightingTs2,this._propReflectList[Properties.tsStove.ordinal]=this.updateTsStove,this._propReflectList[Properties.fbHelpTimes.ordinal]=this.updateFbHelpTimes,this._propReflectList[Properties.fbAssistTimes.ordinal]=this.updateFbAssistTimes,this._propReflectList[Properties.fbWildBossTimes.ordinal]=this.updateFbWildBossTimes,this._propReflectList[Properties.fbWildBossTimesCd.ordinal]=this.updateFbWildBossTimesCd,this._propReflectList[Properties.fbTsEquiptTimes.ordinal]=this.updateFbTsEquipTimes,this._propReflectList[Properties.fbTsEquiptRenew.ordinal]=this.updateFbTsEquipTimesCd,this._propReflectList[Properties.pagodaSweep.ordinal]=this.updatePagodaSweep,this._propReflectList[Properties.office.ordinal]=this.updateDfOfficLv,this._propReflectList[Properties.vip.ordinal]=this.updateDfvipLv,this._propReflectList[Properties.vipExp.ordinal]=this.updateDfvipexp,this._propReflectList[Properties.soulElite.ordinal]=this.updateSoulElite,this._propReflectList[Properties.banquetJoinTimes.ordinal]=this.updateBanquetTimes,this._propReflectList[Properties.asyncpvpPoint.ordinal]=this.updatePvpInfo,this._propReflectList[Properties.asyncpvpScore.ordinal]=this.updatePvpInfo,this._propReflectList[Properties.treasureLastTime.ordinal]=this.updateTreasureLastTime,this._propReflectList[Properties.fashionAvatar.ordinal]=this.updatefashion,this._propReflectList[Properties.fashionClothes.ordinal]=this.updatefashion,this._propReflectList[Properties.fashionWeapon.ordinal]=this.updatefashion,this._propReflectList[Properties.palaWorship.ordinal]=this.updatePalaWorship,this._propReflectList[Properties.xsExp.ordinal]=this.updatxsExp,this._propReflectList[Properties.xyExp.ordinal]=this.updatxyExp,this._propReflectList[Properties.headIcon.ordinal]=this.updatHeadIcon,this._propReflectList[Properties.dreamlandExp.ordinal]=this.updateDreamlandExp,this._propReflectList[Properties.settingFlags.ordinal]=this.updateSetData,this._propReflectList[Properties.arenaChallTimes.ordinal]=this.updateTimes,this._propReflectList[Properties.arenaVipBuyTimes.ordinal]=this.updateVipTimes,this._propReflectList[Properties.highRank.ordinal]=this.updateHistoryMaxRank,this._propReflectList[Properties.arenaChallCd.ordinal]=this.updateChallengeCD,this._propReflectList[Properties.arenaScore.ordinal]=this.updateArenaScore,this._propReflectList[Properties.mentalExp.ordinal]=this.updateMentalExp,this._propReflectList[Properties.goldReborn.ordinal]=this.updateReliveGoldTimes,this._propReflectList[Properties.greenReward.ordinal]=this.updateGreneBoss,this._propReflectList[Properties.dragonsoul.ordinal]=this.updateDragon,this._propReflectList[Properties.xyDrawScore.ordinal]=this.updatxyDrawScore,this._propReflectList[Properties.ysScore.ordinal]=this.updateysScore,this._propReflectList[Properties.sweetScore.ordinal]=this.updateSweetScore,this._propReflectList[Properties.heavenOpenState.ordinal]=this.updateHeavenOpenState,this._propReflectList[Properties.ringUsed.ordinal]=this.updateRingId,this._propReflectList[Properties.modifySexNum.ordinal]=this.updateModifySexNum,this._propReflectList[Properties.entryId.ordinal]=this.updateModifyEntryId,this._propReflectList[Properties.bodyLv.ordinal]=this.updateBobyId,this._propReflectList[Properties.bodySubLv.ordinal]=this.updateBobySubLevel,this._propReflectList[Properties.bodyProgress.ordinal]=this.updateBobyPrograss}return e.prototype.updateProfile=function(e,p_l,p_g,b_s){if("number"==typeof b_s&&(b_s=Math.floor(b_s)),null!=this._propReflectList[p_g])this._propReflectList[p_g](e,p_l,p_g,b_s);else{var d_u=LgcM.ins.getActorStdInfoById(e,p_l);if(d_u){var b_e=d_v.getName(p_g);if(""!=b_e){if(!PopPropManager.instance.isFirstTo){var d_m=d_u[b_e];null==d_m&&(d_m=0),0<(d_m=b_s-d_m)&&e===b_p.playerId&&PopPropManager.instance.popProp(b_e,d_m)}d_u[b_e]=b_s}}}e===b_p.playerId&&LED.event(l_r.HERO_ATT_CHANGE,{id:e,roleType:p_l,changeType:p_g,value:b_s})},e.prototype.updateTsStove=function(e,p_l,p_g,b_s){if(p_l==Engine2d.ActorTypeDefine.PLAYER||p_l==Engine2d.ActorTypeDefine.ROBOT){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);d_u&&d_u.tsStove!=b_s&&(d_u.tsStove=b_s,LED.event(l_r.TALISMAN_STOVE_REFINE))}},e.prototype.updateTimes=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);d_u&&(d_u.arenaChallTimes=b_s,b_p.playerId)},e.prototype.updatePagodaSweep=function(e,p_l,p_g,b_s){Wii(e,p_l,p_g,b_s,DungeonModel,LED,l_r)},e.prototype.updateSetData=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);d_u&&(d_u.settingFlags=b_s,e===b_p.playerId&&SetupModel.instance.updataSetUpInfo(b_s))},e.prototype.updateReliveGoldTimes=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);d_u&&(d_u.goldReborn=b_s,b_p.playerId)},e.prototype.updateFbWildBossTimesCd=function(e,p_l,p_g,b_s){Ild(e,p_l,p_g,b_s,DungeonModel,DungeonType,LED,l_r)},e.prototype.updateHudun=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);d_u&&(p_g===Properties.hudun.ordinal?d_u.hudun=b_s:p_g===Properties.hudunUpper.ordinal&&(d_u.hudunUpper=b_s)),LED.event(l_r.HUDUN_CHANGE,[e,p_l])},e.prototype.updateRide=function(e,p_l,p_g,b_s){if(p_l==Engine2d.ActorTypeDefine.PLAYER||p_l==Engine2d.ActorTypeDefine.ROBOT){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);if(d_u&&d_u.rideId!=b_s){d_u.rideId=b_s;var b_e=LgcM.ins.getActorById(e,p_l);b_e&&b_e.changeRide(d_u.getRideId()),LED.event(l_r.RIDE_ON_CHANGE,b_s)}}},e.prototype.updatePalaWorship=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);if(d_u){var b_e=d_v.getName(p_g);""!=b_e&&(d_u[b_e]=b_s),LED.event(l_r.PALACE_WORSHIP)}},e.prototype.updateBobySubLevel=function(e,p_l,p_g,b_s){Goc(e,p_l,p_g,b_s,bodyModel,LED,l_r)},e.prototype.updateHP=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);if(d_u){var b_e=d_u.isDead;if(p_g==Properties.hpUpper.ordinal){var d_m=b_s-d_u.hpUpper;0<d_m&&e===b_p.playerId&&PopPropManager.instance.popProp(Properties.hpUpper.name,d_m),d_u.hpUpper=b_s}else p_g==Properties.hp.ordinal&&(d_u.hp=b_s<0?0:b_s,d_u.isDead=0==d_u.hp);var d_w=LgcM.ins.getActorById(e,p_l);d_w&&(d_u.hp=d_u.hp<0?0:d_u.hp,d_w.setHP(d_u.hp,d_u.hpUpper),0===d_u.hp?(d_w.die(),e===b_p.playerId&&n_m.instance.pause(),Engine2d.CustomActor.selectedActor==d_w&&(Engine2d.CustomActor.selectedActor=null),p_l===Engine2d.ActorTypeDefine.MONSTER&&(d_w.dieBounceTo(),LgcM.ins.addDisappearObj(d_w.id,p_l)),LED.event(l_r.ACTOR_DIE,{actorID:e,actorType:p_l,changeType:p_g,value:b_s})):b_e&&0<d_u.hp&&(d_w.rawDie=d_u.isDead=!1,d_w.stand(),e===b_p.playerId&&(LED.event(l_r.HERO_RELIVE),n_m.instance.hangUping&&n_m.instance.recoverFighting())))}},e.prototype.updateDfOfficLv=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);d_u&&(d_u.dfofficLv=b_s,e==b_p.playerId&&LED.event(l_r.DF_LV_CHANGE))},e.prototype.updateExp=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);if(d_u){var b_e=b_s-d_u.exp;d_u.exp=b_s,e===b_p.playerId&&(0<b_e&&!PopPropManager.instance.isFirstTo&&b_p.broadcastNotice(Utils.$((j_x("531_1976_1241")+j_x(144)+" x{1}"),b_e),BroadcastType.ITEM_GAIN,"#00FF00"),LED.event(l_r.HERO_EXP_CHANGE))}},e.prototype.updateSkillExp=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);if(d_u){var b_e=d_u.skillExp,d_m=b_s-d_u.skillExp;d_u.skillExp=b_s,e===b_p.playerId&&(0!=b_e&&0<d_m&&!PopPropManager.instance.isFirstTo&&BroadcastNoticeManager.instance.popupSpecialItem(95,d_m),LED.event(l_r.HERO_SKILL_EXP_CHANGE))}},e.prototype.updatePvpInfo=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);if(d_u){var b_e=d_v.getName(p_g);""!=b_e&&(d_u[b_e]=b_s),LED.event(l_r.PVP_SCORE_POINT_UPDATE)}},e.prototype.updateSweetScore=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);d_u&&(d_u.marrySweetdDegree=b_s,e==b_p.playerId&&LED.event(l_r.UPDATE_SWEET_SCORE))},e.prototype.updateBanquetTimes=function(e,p_l,p_g,b_s){Utl(e,p_l,p_g,b_s,v_x)},e.prototype.updateysScore=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);d_u&&(d_u.ysScore=b_s,e==b_p.playerId&&LED.event(l_r.UPDATE_YSSCORE))},e.prototype.updateLevel=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);if(d_u){var b_e=b_s-d_u.level;d_u.level=b_s;var d_m=LgcM.ins.getActorById(e,p_l);d_m&&d_m.setLevelTxt(d_u.level),e==b_p.playerId&&(LED.event(l_r.HERO_LEVEL_CHANGE),LED.event(l_r.FB_RED_POINT_UPDATE),LED.event(l_r.HELPER_UPDATE_INFO),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.growUpFundActivityPanel),j_a.otherIns().add(SystemNoticeManager.instance,SystemNoticeManager.instance.checkSysOpen,null,10),j_a.otherIns().add(UIM.instance,UIM.instance.delayLvUp,[b_s,b_e]))}},e.prototype.updateGuildName=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);if(d_u){d_u.guildName=b_s;var b_e=LgcM.ins.getActorById(e,p_l);b_e&&b_e.setGuildTxt(b_s)}},e.prototype.updateDfvipLv=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);d_u.vipLv=b_s,d_u&&e==b_p.playerId&&(RechargeModel.instance.updateViplv(b_s),LED.event(l_r.RECHARGE_VIPLV_CHANGE))},e.prototype.updateFbAssistTimes=function(e,p_l,p_g,b_s){Wme(e,p_l,p_g,b_s,DungeonModel)},e.prototype.updateShield=function(e,p_l,p_g,b_s){if(p_l==Engine2d.ActorTypeDefine.PLAYER||p_l==Engine2d.ActorTypeDefine.ROBOT)(d_u=LgcM.ins.getActorStdInfoById(e,p_l))&&(d_u.shield!=b_s&&(d_u.shield=b_s)<=0&&(d_u.fightingTs1=d_u.fightingTs2=0,(b_e=LgcM.ins.getActorById(e,p_l))&&(b_e.changeTalismanModel(0,1),b_e.changeTalismanModel(0,2))),e===b_p.playerId&&LED.event(l_r.CHIELD_CHANGE));else if(p_l==Engine2d.ActorTypeDefine.MONSTER){var d_u,b_e;(d_u=LgcM.ins.getActorStdInfoById(e,p_l))&&d_u.shield!=b_s&&(d_u.shield=b_s)<=0&&(d_u.fightingTs1=d_u.fightingTs2=0,(b_e=LgcM.ins.getActorById(e,p_l))&&(b_e.changeTalismanModel(0,1),b_e.changeTalismanModel(0,2)))}},e.prototype.updateDreamlandExp=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);d_u&&(d_u.dreamlandExp=b_s,e===b_p.playerId&&LED.event(l_r.DREAMLANDMIAN_UPDATE_EXP))},e.prototype.updateFightingTs2=function(e,p_l,p_g,b_s){if(p_l==Engine2d.ActorTypeDefine.PLAYER||p_l==Engine2d.ActorTypeDefine.ROBOT)(d_u=LgcM.ins.getActorStdInfoById(e,p_l))&&(d_u.fightingTs2!=b_s&&(d_u.fightingTs2=b_s,(b_e=LgcM.ins.getActorById(e,p_l))&&b_e.changeTalismanModel(b_s,2)),e===b_p.playerId&&(LED.event(l_r.CHIELD_CHANGE),b_s&&TalismanModel.instance.updateTalismanFight(b_s,!1)));else if(p_l==Engine2d.ActorTypeDefine.MONSTER){var d_u,b_e;(d_u=LgcM.ins.getActorStdInfoById(e,p_l))&&d_u.fightingTs2!=b_s&&(d_u.fightingTs2=b_s,(b_e=LgcM.ins.getActorById(e,p_l))&&b_e.changeTalismanModel(b_s,2))}},e.prototype.updateBobyPrograss=function(e,p_l,p_g,b_s){Qvz(e,p_l,p_g,b_s,bodyModel,LED,l_r)},e.prototype.updateRingId=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);d_u&&(d_u.ringId=b_s)},e.prototype.updateMentalExp=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);if(d_u){var b_e=b_s-d_u.mentalExp;d_u.mentalExp=b_s,e===b_p.playerId&&(0<b_e&&BroadcastNoticeManager.instance.popupSpecialItem(21,b_e),LED.event(l_r.UPDATE_CITTA_INFO))}},e.prototype.updateFight=function(e,p_l,p_g,b_s){if(p_l==Engine2d.ActorTypeDefine.PLAYER||p_l==Engine2d.ActorTypeDefine.ROBOT){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);if(d_u&&d_u.fight!=b_s){var b_e=b_s-d_u.fight;b_e&&0!=d_u.fight&&(Laya.Browser.onAndroid||Laya.Browser.onIPhone||Laya.Browser.onMobile?j_a.otherIns().add(UIM.instance,UIM.instance.showFightingShowView,[b_e],10):Laya.timer.callLater(UIM.instance,UIM.instance.showFightingShowView,[b_e])),d_u.fight=b_s,e==b_p.playerId&&(LED.event(l_r.FIGHT_CHANGE,b_e),LED.event(l_r.FB_RED_POINT_UPDATE))}}},e.prototype.updateHistoryMaxRank=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);d_u&&(d_u.historyMaxRank=b_s,b_p.playerId)},e.prototype.updateBobyId=function(e,p_l,p_g,b_s){Kbz(e,p_l,p_g,b_s,bodyModel,LED,l_r)},e.prototype.updatxyExp=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);d_u&&(d_u.xyExp=b_s,e==b_p.playerId&&LED.event(l_r.BLACK_GODSTAR_UPDATE))},e.prototype.updateWallet=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);if(d_u){if(p_g===Properties.gold.ordinal)0<(b_e=b_s-d_u.gold)&&BroadcastNoticeManager.instance.popupSpecialItem(1,b_e);else if(p_g===Properties.guildCtrb.ordinal)0<(b_e=b_s-d_u.guildCtrb)&&BroadcastNoticeManager.instance.popupSpecialItem(4,b_e);else if(p_g===Properties.copper.ordinal){var b_e=b_s-d_u.copper;d_o.instance.isOpenStartDeley||0<b_e&&BroadcastNoticeManager.instance.popupSpecialItem(2,b_e)}var d_m=d_v.getName(p_g);""!=d_m&&(d_u[d_m]=b_s),LED.event(l_r.WALLET_CHANGE),LED.event(l_r.HELPER_UPDATE_INFO)}},e.prototype.updatHeadIcon=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);d_u&&(d_u.headIcon=b_s,e===b_p.playerId&&LED.event(l_r.HERO_ICON_CHANGE))},e.prototype.updateHeavenOpenState=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);d_u&&(d_u.heavenOpenState=b_s,LED.event(l_r.UPDATE_HEAVEN_OPENE))},e.prototype.updateFbTsEquipTimes=function(e,p_l,p_g,b_s){Ocu(e,p_l,p_g,b_s,DungeonModel,DungeonType,LED,l_r)},e.prototype.updateStateLv=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);if(d_u){d_u.stateLv=b_s,e==b_p.playerId&&(LED.event(l_r.HERO_STATE_CHANGE),LED.event(l_r.HELPER_UPDATE_INFO),LED.event(l_r.FB_RED_POINT_UPDATE),ActivityModel.instance.onAttChange());var b_e=LgcM.ins.getActorById(e,p_l);b_e&&b_e.setNameAndStateInfo()}},e.prototype.updatxyDrawScore=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);d_u&&(d_u.xyDrawScore=b_s,e==b_p.playerId&&LED.event(l_r.CARD_DRAWSCORE_UPDATE))},e.prototype.updateFbHelpTimes=function(e,p_l,p_g,b_s){Wqw(e,p_l,p_g,b_s,DungeonModel)},e.prototype.updateVipTimes=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);d_u&&(d_u.arenaVipBuyTimes=b_s,b_p.playerId)},e.prototype.updateStateNum=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);d_u&&(d_u.stateNum=b_s)},e.prototype.updatefashion=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);if(d_u){var b_e=d_v.getName(p_g);if(""!=b_e){d_u[b_e]=b_s;var d_m=LgcM.ins.getActorById(e,p_l);if(d_m){var d_w=d_u.entryId,f_t=d_u.getClotheId(),v_z=d_u.getWeaponId();d_m.fightingCtrl.changeSkin(f_t,d_w,d_u.face);var d_h=Resource.ResManager.getDefaultWeaponAvatar(v_z,d_w);d_m.fightingCtrl.changeWeapon(d_h),LED.event(l_r.FASHION_LIST)}}}},e.prototype.updateDragon=function(e,p_l,p_g,b_s){if(p_l==Engine2d.ActorTypeDefine.PLAYER||p_l==Engine2d.ActorTypeDefine.ROBOT){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);if(d_u&&d_u.dragonId!=b_s){d_u.dragonId=b_s;var b_e=LgcM.ins.getActorById(e,p_l);b_e&&b_e.updateStateEfts(),d_u.id==LgcM.ins.heroVo.id&&LED.event(l_r.DRAGON_CHANGE_EFFECTE,b_s)}}},e.prototype.updateModifySexNum=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);d_u&&(d_u.modifySexNum=b_s,e===b_p.playerId&&LED.event(l_r.HERO_SEX_CHANGE))},e.prototype.updateFbTsEquipTimesCd=function(e,p_l,p_g,b_s){Chc(e,p_l,p_g,b_s,DungeonModel,DungeonType,LED,l_r)},e.prototype.updateFbWildBossTimes=function(e,p_l,p_g,b_s){Ycx(e,p_l,p_g,b_s,DungeonModel,DungeonType,LED,l_r)},e.prototype.updatxsExp=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);if(d_u){var b_e=b_s-d_u.xsExp;d_u.xsExp=b_s,e==b_p.playerId&&(0<b_e&&BroadcastNoticeManager.instance.popupSpecialItem(15,b_e),LED.event(l_r.BLACK_GODSTAR_UPDATE))}},e.prototype.updateArenaScore=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);d_u&&(d_u.gymkhanaScore=b_s,e===b_p.playerId&&LED.event(l_r.GYMKHANA_REFRESH))},e.prototype.updateFightingTs1=function(e,p_l,p_g,b_s){if(p_l==Engine2d.ActorTypeDefine.PLAYER||p_l==Engine2d.ActorTypeDefine.ROBOT)(d_u=LgcM.ins.getActorStdInfoById(e,p_l))&&(d_u.fightingTs1!=b_s&&(d_u.fightingTs1=b_s,(b_e=LgcM.ins.getActorById(e,p_l))&&b_e.changeTalismanModel(b_s,1)),e===b_p.playerId&&(LED.event(l_r.CHIELD_CHANGE),b_s&&TalismanModel.instance.updateTalismanFight(b_s,!1)));else if(p_l==Engine2d.ActorTypeDefine.MONSTER){var d_u,b_e;(d_u=LgcM.ins.getActorStdInfoById(e,p_l))&&d_u.fightingTs1!=b_s&&(d_u.fightingTs1=b_s,(b_e=LgcM.ins.getActorById(e,p_l))&&b_e.changeTalismanModel(b_s,1))}},e.prototype.updateSpeed=function(e,p_l,p_g,b_s){if(p_l==Engine2d.ActorTypeDefine.PLAYER||p_l==Engine2d.ActorTypeDefine.ROBOT){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);if(d_u){var b_e=LgcM.ins.getActorById(e,p_l);b_e&&(d_u.speed=b_s,b_e.moveSpeed=b_s)}}},e.prototype.updateDfvipexp=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);d_u&&(d_u.vipExp=b_s,e==b_p.playerId&&LED.event(l_r.RECHARGE_VIPEXP_CHANGE))},e.prototype.updateName=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);if(d_u){d_u.name=b_s;var b_e=LgcM.ins.getActorById(e,p_l);b_e&&b_e.setNameAndStateInfo(),e===b_p.playerId&&LED.event(l_r.HERO_NAME_CHANGE)}},e.prototype.updateChallengeCD=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);d_u&&(d_u.gymkhanaChallengeCD=b_s,b_p.playerId)},e.prototype.updateSoulElite=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);d_u&&(d_u.soulElite=b_s,e==b_p.playerId&&LED.event(l_r.PET_SOUL_ELITE_CHANGE))},e.prototype.updateTreasureLastTime=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);if(d_u){var b_e=d_v.getName(p_g);""!=b_e&&(d_u[b_e]=b_s,LED.event(l_r.JBP_INFO_UPDATE))}},e.prototype.updateGreneBoss=function(e,p_l,p_g,b_s){Udx(e,p_l,p_g,b_s,DungeonModel,LED,l_r)},e.prototype.updateModifyEntryId=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.getActorStdInfoById(e,p_l);if(d_u&&(d_u.sex=b_s,d_u.entryId=b_s,e===b_p.playerId)){var b_e=LgcM.ins.getActorById(e,p_l);if(b_e){var d_m=d_u.entryId,d_w=d_u.getClotheId(),f_t=d_u.getWeaponId();b_e.fightingCtrl.changeSkin(d_w,d_m,d_u.face);var v_z=Resource.ResManager.getDefaultWeaponAvatar(f_t,d_m);b_e.fightingCtrl.changeWeapon(v_z),SetupModel.instance.updateHeadIcon(),LED.event(l_r.FASHION_LIST),LED.event(l_r.HERO_NAME_CHANGE),LED.event(l_r.SETUP_HEADICON_CHANGE)}}},e}(),PlaceTypeDefine,CharacterProperty=function(){function e(){}return e.calEquipFight=function(e){var p_l=Config.fightCoef,p_g=0;for(var b_s in e)for(var d_u in p_l)e[b_s][0]==p_l[d_u].propName&&(p_g+=Number(e[b_s][1])*p_l[d_u].coef);return Math.floor(p_g)},e.getPropertys=function(e,p_l,p_g,b_s){void 0===p_l&&(p_l=1),void 0===p_g&&(p_g=0),void 0===b_s&&(b_s="");var d_u,b_e,d_m=[];for(var d_w in e)if(b_e=d_v.getPropertyTypeByName(e[d_w][0])){var f_t=e[d_w][0]==b_s;(d_u=new PropInfo).propOrdinal=b_e.ordinal,d_u.value=f_t?e[d_w][1]*p_l+p_g:e[d_w][1]*p_l,d_m.push(d_u)}return d_m},e.getPlaceName=function(p_l){return Edj(p_l,e)},e.getJobName=function(p_l){return e.JOB_NAMES[p_l=null==p_l?0:p_l]},e.getPropertysByProp=function(e,p_l){for(var p_g in void 0===p_l&&(p_l=1),e)e[p_g].value=Math.floor(e[p_g].value*p_l);return e},e.getHeroPropertys=function(e,p_l){var p_g=LgcM.ins.heroVo,b_s=0;switch(e){case"hpUpper":b_s=p_g.hpUpper*(1+p_l/100);break;case"attack":b_s=p_g.attack*(1+p_l/100);break;case"defense":b_s=p_g.defense*(1+p_l/100);break;case"armorBreak":b_s=p_g.armorBreak*(1+p_l/100)}return b_s},e.mergePropertys=function(e,p_l){var p_g=!1,b_s=0,d_u=0;for(b_s=0;b_s<p_l.length;b_s++){for(p_g=!1,d_u=0;d_u<e.length;d_u++)if(e[d_u].propOrdinal==p_l[b_s].propOrdinal){e[d_u].value+=p_l[b_s].value,p_g=!0;break}p_g||e.push(p_l[b_s])}},e.PLACE_NAMES=["",(j_x("2328_2398")),(j_x("912_1855")),(j_x("2371_1855")),(j_x("732_1998")),(j_x("886_1855")),(j_x("6_1334")),(j_x("1727_1855")),(j_x("1605_1855")),(j_x("217_457")),(j_x("2446_1303")),(j_x("886_2084")),(j_x("1619_871"))],e.JOB_NAMES=[(j_x("1331_1876")),(j_x("189_884")),(j_x("189_671"))],e}(),PropInfo=function(){function e(){this.isCalFight=!0}return Object.defineProperty(e.prototype,"name",{get:function(){return d_v.getName(this.propOrdinal)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"desc",{get:function(){return d_v.getDesc(this.propOrdinal)},enumerable:!0,configurable:!0}),e}();!function(e){e[e.WEAPON=1]="WEAPON",e[e.HEAD=2]="HEAD",e[e.SOULDER=3]="SOULDER",e[e.CLOTH=4]="CLOTH",e[e.HAND=5]="HAND",e[e.BELT=6]="BELT",e[e.LEG=7]="LEG",e[e.FOOT=8]="FOOT",e[e.RING=9]="RING",e[e.NECKLACE=10]="NECKLACE",e[e.BRACELET=11]="BRACELET",e[e.GOBE=12]="GOBE"}(PlaceTypeDefine=PlaceTypeDefine||{});var b_j=function(){function e(){}return e.prototype.playEffect=function(e,p_l){this.effectID=p_l,this.mapId=e,this.ani=this.ani||Resource.ResManager.Instance.freeAnimation,this.ani.on(Laya.Event.COMPLETE,this,this.onAnimationPlayCompleted),this.ani.on(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onAnimLoadedComplete);var p_g=Config.effects[p_l];this.setSkinRootUrl(p_g.name);var b_s=0<p_g.pSpeed?p_g.pSpeed:Engine2d.Animation.ANIMATION_INTERVAL;return this.setAction(p_g.name,0,0<p_g.loop,b_s),this.checkExitView(),!0},e.prototype.setSkinRootUrl=function(e){Kgg(e,this,Resource,EffectType)},e.prototype.resetAnimPivot=function(e){if(e){var p_l=e.getGraphicBounds();p_l&&0!=p_l.width&&0!=p_l.height&&e.pivot(p_l.width/2,p_l.height/2)}},e.prototype.onAnimationPlayCompleted=function(){this.ani&&!1===this.ani.loop&&this.dispose()},e.prototype.setAction=function(e,p_l,p_g,b_s){void 0===p_g&&(p_g=!1),void 0===b_s&&(b_s=Engine2d.Animation.ANIMATION_INTERVAL),this.ani.setAction(e,p_l,p_g,b_s)},e.prototype.delayPlay=function(){if(Laya.timer.clear(this,this.delayPlay),this._needReborn=!1,this._fadeEndTime=0,this.ani.play(0,this.ani.isLoop),null===this.ani.parent&&0<this.effectID){var e=Config.effects[this.effectID];this._needRender&&(1===e.layer?Engine2d.GameMap.defaultMap.addUnderObject(this.ani):Engine2d.GameMap.defaultMap.addAboveObject(this.ani));var p_l=Engine2d.MapUtils.cxToPx(e.posX)*Engine2d.CustomMap.MAP_RATE,p_g=Engine2d.MapUtils.cyToPy(e.posY)*Engine2d.CustomMap.MAP_RATE;this.ani.pos(p_l,p_g),this._endTime=SyncTime.tickCount+e.mTime,this._needReborn=!!e.interval,0<e.fadeEndTime&&(this._fadeEndTime=this._endTime-e.fadeEndTime),this.fadeStart(e.fadeStartTime,1)}this.moveTo()},e.prototype.fadeStart=function(e,p_l){void 0===p_l&&(p_l=1),0<e&&(this._fadeCtrl||(this._fadeCtrl=new FadeOutController),this._fadeCtrl.startFade(this.ani,e,0,p_l))},e.prototype.onAnimLoadedComplete=function(e){if(this.ani&&this.ani.url==e){if(this.resetAnimPivot(this.ani),0<this.effectID){var p_l=Config.effects[this.effectID].delay;if(0<p_l)return void Laya.timer.once(p_l,this,this.delayPlay)}this.delayPlay()}},e.prototype.checkExitView=function(){var e=Engine2d.Hero.local;if(e){var p_l=e.getCurentCX(),p_g=e.getCurrentCY();if(0<this.effectID){var b_s=Config.effects[this.effectID];Math.abs(p_l-b_s.posX)<=12&&Math.abs(p_g-b_s.posY)<=18?this._needRender=!0:this._needRender=!1}}},e.prototype.dispose=function(){Laya.timer.clear(this,this.delayPlay),this.ani&&(this.ani.off(Laya.Event.COMPLETE,this,this.onAnimationPlayCompleted),this.ani.off(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onAnimLoadedComplete),Resource.ResManager.Instance.recoverAnimation(this.ani),this.ani=null),this._lineToCtrl&&this._lineToCtrl.dispose(),this._lineToCtrl=null,this._fadeCtrl=null,this.effectID=-1,this.mapId=-1},e.prototype.update=function(e){if(!this.ani)return!1;var p_l=SyncTime.tickCount;return p_l>this._endTime&&(this._needReborn?(this._needReborn=!1,this.checkNeedReborn()):this.ani.parent&&this.dispose()),this._needRender&&(0<this._fadeEndTime&&p_l>this._fadeEndTime&&(this.fadeStart(this._endTime-this._fadeEndTime,2),this._fadeEndTime=0),this._lineToCtrl&&this._lineToCtrl.update(e),this._fadeCtrl&&this._fadeCtrl.update(e)),!0},e.prototype.moveTo=function(){if(0<this.effectID){var e=Config.effects[this.effectID];if(0<e.mTime&&0<e.mSpeed){this._lineToCtrl||(this._lineToCtrl=new LineToController);var p_l=Engine2d.MapUtils.helpPoint,p_g=Engine2d.MapUtils.rotationToRadian(e.mDirAngle);p_l.x=Math.cos(p_g)*e.mSpeed,p_l.y=Math.sin(p_g)*e.mSpeed,p_l.x=parseInt(p_l.x.toFixed(2)),p_l.y=parseInt(p_l.y.toFixed(2)),this._lineToCtrl.startToMove(this.ani,p_l,e.mTime,Engine2d.MapUtils.cxToPx(e.posX),Engine2d.MapUtils.cyToPy(e.posY))}}},e.prototype.checkNeedReborn=function(){if(0<this.effectID){var e=Config.effects[this.effectID];if(e.interval&&0<e.interval.length){this.ani.removeSelf();var p_l=Math.round(Math.random()*e.interval.length);p_l>=e.interval.length&&(p_l=e.interval.length-1);var p_g=e.interval[p_l];Laya.timer.once(p_g,this,this.delayPlay)}}},e.prototype.zoomChangeMove=function(e){this._lineToCtrl&&this._lineToCtrl.zoomChangeMove(e)},e}(),MapZoomEffectVo=function(){function e(){}return e.prototype.playEffect=function(e,p_l,p_g,b_s,d_u){if(void 0===p_g&&(p_g=0),void 0===b_s&&(b_s=1),void 0===d_u&&(d_u=0),this._endTime=SyncTime.tickCount+p_l,this._delayTime=p_g,this._layout=d_u,this._type=b_s,!this.ani){this.ani=Resource.ResManager.Instance.freeAnimation,this.ani.on(Laya.Event.COMPLETE,this,this.onAnimationPlayCompleted),this.ani.on(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onAnimLoadedComplete),this.setSkinRootUrl(e);var b_e=Engine2d.Animation.ANIMATION_INTERVAL;this.setAction(e,0,!0,b_e)}return!0},e.prototype.changePlay=function(e,p_l){void 0===p_l&&(p_l=1);var p_g=this._type;if(p_g!==(this._type=p_l))switch(this._endTime=SyncTime.tickCount+e-this._delayTime,p_g){case 1:this.ani.alpha=1,this.stopMove(),this.fadeTo();break;case 2:this.ani.alpha=0,this.delayPlay();break;case 3:this.ani.alpha=1,this.delayPlay()}},e.prototype.setSkinRootUrl=function(e){Civ(e,this,Resource,EffectType)},e.prototype.setAction=function(e,p_l,p_g,b_s){void 0===p_g&&(p_g=!1),void 0===b_s&&(b_s=Engine2d.Animation.ANIMATION_INTERVAL),this.ani.setAction(e,p_l,p_g,b_s)},e.prototype.stopMove=function(){this._lineToCtrl&&(this._lineToCtrl.isStop=!0)},e.prototype.resetAnimPivot=function(e){if(e){var p_l=e.getGraphicBounds();p_l&&0!=p_l.width&&0!=p_l.height&&e.pivot(p_l.width/2,p_l.height/2)}},e.prototype.moveTo=function(){this._lineToCtrl||(this._lineToCtrl=new LineToController);var e=Engine2d.Hero.local;if(e){this._endTime=SyncTime.tickCount+600;var p_l=e.fightingCtrl.curDir,p_g=Engine2d.MapUtils.getReverDir(p_l),b_s=20*Math.random()+10,d_u=Engine2d.MapUtils.getVectorByDir(b_s,p_g);this._lineToCtrl.startToMove(this.ani,d_u,this._endTime-SyncTime.tickCount,-999,-999,0===this.ani.alpha?.7:-1)}else this.dispose()},e.prototype.delayPlay=function(){Laya.timer.clear(this,this.delayPlay),this.ani.play(0,this.ani.isLoop);var e=Stage.width/2,p_l=Stage.height,p_g=200*Math.random();p_g=e+(.5<Math.random()?p_g:-p_g),p_l=0===this._layout?450:Stage.height-500;var b_s=150*Math.random();b_s=p_l+(.5<Math.random()?b_s:-b_s),this.ani.pos(p_g,b_s),p_g=(.5<Math.random()?1:-1)*Math.random()*400,b_s=(0===this._layout?-300:300)+(.5<Math.random()?1:-1)*Math.random()*300,this.ani.pos(p_g,b_s),null===this.ani.parent&&Engine2d.Hero.local.fightingCtrl.addUnderChild(this.ani,0),1===this._type?this.moveTo():this.fadeTo()},e.prototype.fadeTo=function(){this._fadeCtrl||(this._fadeCtrl=new FadeOutController);var e=Engine2d.Hero.local;if(e){var p_l=e.fightingCtrl.curDir,p_g=Config.global[GlobalDefine.map_cloud_move].i_info,b_s=(new Laya.Point(4<p_l?-p_g:p_g,0),this._endTime-SyncTime.tickCount);this._fadeCtrl.startFade(this.ani,b_s,0,2===this._type?2:1)}else this.dispose()},e.prototype.onAnimLoadedComplete=function(e){if(this.ani&&this.ani.url==e){if(this.resetAnimPivot(this.ani),0<this._delayTime)return void Laya.timer.once(this._delayTime,this,this.delayPlay);this.delayPlay()}},e.prototype.onAnimationPlayCompleted=function(){this.ani&&!1===this.ani.loop&&this.dispose()},e.prototype.update=function(e){return!!this.ani&&(this._lineToCtrl&&(this._lineToCtrl.isStop||this._lineToCtrl.update(e)&&(this._lineToCtrl.isStop=!0,this.ani.alpha=.3,this.onAnimLoadedComplete(this.ani.url))),this._fadeCtrl&&this._fadeCtrl.update(e),!0)},e.prototype.dispose=function(){Laya.timer.clear(this,this.delayPlay),this.ani&&(this.ani.off(Laya.Event.COMPLETE,this,this.onAnimationPlayCompleted),this.ani.off(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onAnimLoadedComplete),Resource.ResManager.Instance.recoverAnimation(this.ani),this.ani=null),this._lineToCtrl&&this._lineToCtrl.dispose(),this._lineToCtrl=null,this._fadeCtrl=null},e}(),HangupType,HangupStateType,MapFunType;!function(e){e[e.FIGHTING=0]="FIGHTING",e[e.COPY=1]="COPY",e[e.DROP=2]="DROP"}(HangupType=HangupType||{}),function(e){e[e.FREE=0]="FREE",e[e.RUNING=1]="RUNING",e[e.HANG=2]="HANG"}(HangupStateType=HangupStateType||{}),function(e){e[e.CITY=1]="CITY",e[e.WILD=2]="WILD",e[e.HangUp=3]="HangUp",e[e.PVP=4]="PVP",e[e.FB_PALYER=5]="FB_PALYER"}(MapFunType=MapFunType||{});var n_m=function(){function e(){this._fightingPhase=new z_n(HangupType.FIGHTING),this._dropPhase=new h_s,this._copyPhase=new AutoCopyPhase,LED.on(l_r.SKILL_LIST_UPDATE,this,this.onSkillChange),LED.on(l_r.SKILL_DAZHAO_CHANGE,this,this.onSkillChange),LED.on(l_r.SKILL_PRIO_CHANGE,this,this.onSkillChange),LED.on(l_r.HERO_RELIVE,this,this.onHeroRelive),LED.on(l_r.ACTOR_ADDED,this,this.addPlayer)}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.addPlayer=function(e){var p_l=Config.map[b_p.mapID];if(p_l&&p_l.funType===MapFunType.HangUp){var p_g=e.type,b_s=e.id;if(b_s===b_p.playerId)return;var d_u=LgcM.ins.getActorById(b_s,p_g);d_u&&(d_u.initAutoCopy(),d_u.visible=!SetupModel.instance.isHidePlayer)}},e.prototype.stop=function(){Emb(this,LED,l_r)},e.prototype.onHeroRelive=function(){TaskManager.instance.isAutoTask&&TaskManager.instance.autoDoTask()},e.prototype.checkIsHangupMap=function(){Config.map[b_p.mapID],this.isHangUpMap()&&(this.startAuto(HangupType.COPY),Laya.timer.once(1e3,this,this.checkHangupMapIsHangup))},e.prototype.isHangUpMap=function(){if(Config.map){var e=Config.map[b_p.mapID];return e&&e.funType===MapFunType.HangUp}return!1},e.prototype.checkHangupMapIsHangup=function(){this.isHangUpMap()&&this._copyPhase&&(this._copyPhase.isHangUping()||this.startAuto(HangupType.COPY))},e.prototype.startAuto=function(e){void 0===e&&(e=HangupType.FIGHTING),Laya.timer.clear(this,this.startAuto),(this._type=e)==HangupType.FIGHTING?this._fightingPhase.startPhase():this._copyPhase.startPhase(),LED.event(l_r.HANG_UP_START)},e.prototype.onSkillChange=function(){this._hangUpList||(this._hangUpList=new Array),this._hangUpList.length=0;var e=SkillModel.instance.hookSkillList;for(var p_l in e)0<e[p_l]&&this._hangUpList.push(SkillModel.instance.getSkillVo(e[p_l]))},e.prototype.resetFightTime=function(e){void 0===e&&(e=300),this._fightingPhase.isHangUping()?this._fightingPhase.resetTime(e):this._copyPhase.isHangUping()&&this._copyPhase.resetTime(e)},Object.defineProperty(e.prototype,"stopCopyMove",{set:function(e){this.isHangUpMap()&&this._copyPhase&&(this._copyPhase.stopMove=e)},enumerable:!0,configurable:!0}),e.prototype.pause=function(){Ivh(this)},e.prototype.recoverFighting=function(){Kmk(this)},e.prototype.addPrioritySkill=function(e){return!!this.hangUping&&(this._type==HangupType.FIGHTING?this._fightingPhase.addPrioritySkill(e):this._copyPhase.addPrioritySkill(e),!0)},Object.defineProperty(e.prototype,"hangUping",{get:function(){return this._type===HangupType.FIGHTING?this.fightingPhase.isHangUping():this._copyPhase.isHangUping()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsFighting",{get:function(){return this._type==HangupType.FIGHTING},enumerable:!0,configurable:!0}),e.prototype.getNextSkill=function(e){if(void 0===e&&(e=-1),!this._hangUpList||0==this._hangUpList.length)return null;for(var p_l,p_g=this.getSkillIndex(e);p_g<this._hangUpList.length;p_g++)if((p_l=this._hangUpList[p_g]).id!=e&&!p_l.cdRuning)return p_l;var b_s,d_u,b_e=0;for(var d_m in this._hangUpList)!(p_l=this._hangUpList[d_m]).cdRuning&&p_l.clientPrio>b_e?(b_e=p_l.clientPrio,b_s=d_m):p_l.cdRuning||(d_u=p_l);if(b_s)return this._hangUpList[b_s];if(this._hangUpList[0]&&this._hangUpList[0].cdRuning){if(d_u)return d_u;this._hangUpList[0].clearCDTime()}return this._hangUpList[0]},e.prototype.getSkillIndex=function(e){if(void 0===e&&(e=-1),-1==e)return 0;var p_l=-1;for(var p_g in this._hangUpList)if(p_l++,this._hangUpList[p_g].id==e)return p_l;return 0},Object.defineProperty(e.prototype,"fightingPhase",{get:function(){return this._fightingPhase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropPhase",{get:function(){return this._dropPhase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"copyPhase",{get:function(){return this._copyPhase},enumerable:!0,configurable:!0}),e.prototype.update=function(e){this._fightingPhase&&this._fightingPhase.update(e),this._dropPhase&&this._dropPhase.update(e),this._copyPhase&&this._copyPhase.update(e)},e.prototype.leaveMap=function(){if(this.stop(),this._hangUpList&&!this._hangUpList.length)for(var e in this._hangUpList)this._hangUpList[e].clientPrio=0},e}(),AutoHangUpBase=function(){function e(e){void 0===e&&(e=0),this.m_type=0,this.m_state=0,this.m_type=e}return e.prototype.startPhase=function(){return Ynp(this)},e.prototype.resetState=function(){Ujn(this,HangupStateType)},e.prototype.pausePhase=function(){Gum(this,HangupStateType)},e.prototype.stopPhase=function(){Sel(this)},e.prototype.recoverFighting=function(){this.m_state===HangupStateType.HANG&&(this.m_state=HangupStateType.RUNING,this.addEvents())},e.prototype.checkRoleDie=function(e){return Ibs(e,LgcM)},Object.defineProperty(e.prototype,"hero",{get:function(){return Engine2d.Hero.local},enumerable:!0,configurable:!0}),e.prototype.addEvents=function(){},e.prototype.removeEvents=function(){},e.prototype.update=function(e){},e.prototype.isHangUping=function(){return Qej(this,HangupStateType)},e}(),MonEffectType,EffectShowManager=function(){function e(){this._skillEffects={},this._buffEffects={},this._mapEffects=[],this._mapZoomEffects=[]}return e.prototype.actorPosChange=function(){Gej(this)},e.prototype.showSkillEffect=function(e,p_l,p_g,b_s){b_s=b_s<0?0:b_s;var d_u=Config.skill_skill[p_g],b_e=(d_u=d_u||Config.skill_skill[1001001]).effects;if(b_e){var d_m=LgcM.ins.getActorById(e);if(!d_m)return;var d_w=void 0,f_t=this._skillEffects[e]||[],v_z=b_e[b_s];if(Array.isArray(v_z))for(var d_h in v_z){var r_t=v_z[d_h];d_w=Resource.ResManager.Instance.freeSkillEffectVo,"number"==typeof r_t?d_w.playEffect(d_m,p_l,p_g,r_t):d_w.playEffectByName(d_m,p_l,p_g,r_t,d_u.eftSpeed),f_t.push(d_w)}else d_w=Resource.ResManager.Instance.freeSkillEffectVo,"number"==typeof v_z?d_w.playEffect(d_m,p_l,p_g,v_z):d_w.playEffectByName(d_m,p_l,p_g,v_z,d_u.eftSpeed),f_t.push(d_w);this._skillEffects[e]=f_t}},e.prototype.playMapZoomEffect=function(e,p_l,p_g){void 0===p_g&&(p_g=0)},e.prototype.changeMap=function(){var e=Config.map[b_p.mapID].effects;if(e&&0<e.length)for(var p_l in e)this.playMapEffect(b_p.mapID,e[p_l])},e.prototype.clearSkillEffectById=function(e,p_l){var p_g=this._skillEffects[e];if(p_g){for(var b_s in p_g)p_g[b_s].skillID===p_l&&(p_g[b_s].dispose(),p_g[b_s]=null);delete this._skillEffects[e]}},e.prototype.clear=function(){for(var e in this._skillEffects){var p_l=this._skillEffects[e];for(var p_g in p_l)p_l[p_g].dispose();delete this._skillEffects[e]}for(var b_s in this._buffEffects){for(var d_u in p_l=this._buffEffects[b_s])p_l[d_u].dispose();delete this._buffEffects[b_s]}for(var b_e in this._mapEffects)this._mapEffects[b_e].dispose(),delete this._mapEffects[b_e];for(var d_m in this._mapZoomEffects)this._mapZoomEffects[d_m].dispose();this._mapZoomEffects.length=0},e.prototype.playMapEffect=function(e,p_l){var p_g=new b_j;p_g.playEffect(e,p_l),this._mapEffects.push(p_g)},e.prototype.clearBuffEffectByIdx=function(e,p_l){return Izr(e,p_l,this)},e.prototype.clearSkillEffect=function(e){var p_l=this._skillEffects[e];if(p_l){for(var p_g in p_l)p_l[p_g].dispose();delete this._skillEffects[e]}},e.prototype.getBuffEffectVo=function(e,p_l,p_g){void 0===p_g&&(p_g=-1);var b_s=this._buffEffects[e];if(b_s)for(var d_u in b_s)if(b_s[d_u].buffIdx===p_l&&b_s[d_u].effectID===p_g)return b_s[d_u];return null},e.prototype.showActionEffect=function(e,p_l,p_g,b_s,d_u){void 0===p_g&&(p_g=null),void 0===b_s&&(b_s=-1),void 0===d_u&&(d_u=-1);var b_e=LgcM.ins.getActorById(e);if(b_e&&(p_g||-1!==d_u)){var d_m=this._skillEffects[e]=this._skillEffects[e]||[],d_w=Resource.ResManager.Instance.freeSkillEffectVo;d_w.playEffectByName(b_e,p_l,-1,p_g,b_s,d_u),d_m.push(d_w)}},e.prototype.clearBuffEffect=function(e){var p_l=this._buffEffects[e];if(p_l){for(var p_g in p_l)p_l[p_g].dispose();delete this._skillEffects[e]}},e.prototype.update=function(e){var p_l,p_g,b_s;for(var d_u in this._skillEffects)for(var b_e=(d_m=this._skillEffects[d_u]).length-1;0<=b_e;b_e--)(p_l=d_m[b_e]).update(e)||(d_m.splice(b_e,1),p_l.dispose());for(var d_u in this._buffEffects){var d_m;for(b_e=(d_m=this._buffEffects[d_u]).length-1;0<=b_e;b_e--)(p_g=d_m[b_e]).update(e)||(d_m.splice(b_e,1),p_g.dispose())}for(b_e=this._mapEffects.length-1;0<=b_e;b_e--)(b_s=this._mapEffects[b_e])&&!b_s.update(e)&&(this._mapEffects.splice(b_e,1),b_s.dispose());for(b_e=0;b_e<this._mapZoomEffects.length;b_e++)this._mapZoomEffects[b_e].update(e)},e.prototype.showBuffEffect=function(e,p_l,p_g){var b_s=LgcM.ins.getActorById(e);if(b_s){var d_u=this._buffEffects[e];d_u=d_u||(this._buffEffects[e]=[]);var b_e=this.getBuffEffectVo(e,p_l.idx,p_g);b_e||((b_e=new BuffEffectVo).playEffect(b_s,p_l.idx,p_g),d_u.push(b_e))}},e.prototype.zoomMoveChangePos=function(e){for(var p_l in this._skillEffects)for(var p_g=(b_s=this._skillEffects[p_l]).length-1;0<=p_g;p_g--)parseFloat(p_l)===b_p.playerId?b_s[p_g].changePosByMapScale(e):b_s[p_g].dispose();for(var p_l in this._mapEffects)this._mapEffects[p_l].zoomChangeMove(e);for(var p_l in this._buffEffects){var b_s;for(p_g=(b_s=this._buffEffects[p_l]).length-1;0<=p_g;p_g--)b_s[p_g].zoomMoveScale(e)}},e.instance=new e,e}(),SkillEffectVo=function(){function e(){}return e.prototype.playEffect=function(e,p_l,p_g,b_s){if(!e)return!1;this._role=e,this.effectID=b_s,this.skillID=p_g,this.targetId=p_l,this.ani=this.ani||Resource.ResManager.Instance.freeAnimation,this.ani.off(Laya.Event.COMPLETE,this,this.onAnimationPlayCompleted),this.ani.off(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onAnimLoadedComplete),this.ani.on(Laya.Event.COMPLETE,this,this.onAnimationPlayCompleted),this.ani.on(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onAnimLoadedComplete);var d_u=Config.effects[b_s];if(!d_u)return!1;this.setSkinRootUrl(d_u.name);var b_e=0<d_u.pSpeed?d_u.pSpeed:Engine2d.Animation.ANIMATION_INTERVAL,d_m=0<=d_u.onlyDir?d_u.onlyDir:e.fightingCtrl.curDir;return this.setAction(d_u.name,d_m,0<d_u.loop,b_e),!0},e.prototype.setSkinRootUrl=function(e){Wsj(e,this,Resource,EffectType)},e.prototype.playEffectByName=function(e,p_l,p_g,b_s,d_u,b_e,d_m){if(void 0===d_u&&(d_u=-1),void 0===b_e&&(b_e=-1),void 0===d_m&&(d_m=-1),!e)return!1;var d_w=!1;if(0<b_e){var f_t=Config.effects[b_e];b_s=f_t.name,d_u=f_t.pSpeed,d_w=0<f_t.loop,d_m=0<=f_t.onlyDir?f_t.onlyDir:e.fightingCtrl.curDir}return this._role=e,this.effectID=b_e,this.skillID=p_g,this.targetId=p_l,this.ani=this.ani||Resource.ResManager.Instance.freeAnimation,this.ani.on(Laya.Event.COMPLETE,this,this.onAnimationPlayCompleted),this.ani.on(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onAnimLoadedComplete),this.setSkinRootUrl(b_s),d_u=0<d_u?d_u:Engine2d.Animation.ANIMATION_INTERVAL,d_m=0<=d_m?d_m:e.fightingCtrl.curDir,this.setAction(b_s,d_m,d_w,d_u),!0},e.prototype.changePosByMapScale=function(e){this.ani&&this.ani.parent&&this.ani.pos(this._curPx*e,this._curPy*e)},e.prototype.rotateAni=function(){if(this.ani&&(this.ani.rotation=0)<this.effectID){var e=Config.effects[this.effectID];if(2===e.rotateType&&0<=e.onlyDir){var p_l=45*(this._role.fightingCtrl.curDir-e.onlyDir);this.ani.rotation=p_l}}},e.prototype.effectPlay=function(){if(this.ani&&!(25<=Laya.timer.delta&&this._role.type!=Engine2d.ActorTypeDefine.PLAYER))if(this._role){if(this.ani.play(0,this.ani.isLoop),null===this.ani.parent){if(0<this.effectID&&1===(e=Config.effects[this.effectID]).layer?Engine2d.GameMap.defaultMap.addUnderObject(this.ani):Engine2d.GameMap.defaultMap.addAboveObject(this.ani),this.ani.pos(this._role.x,this._role.y),0<this.effectID){var e;if(0!=(e=Config.effects[this.effectID]).posX||0!=e.posY||0<e.rotateType){var p_l=this._role.x+Engine2d.MapUtils.cxToPx(e.posX),p_g=this._role.y+Engine2d.MapUtils.cyToPy(e.posY);if(1===e.rotateType){var b_s=45*(this._role.fightingCtrl.curDir-2),d_u=Engine2d.MapUtils.posRotationAngle(new Laya.Point(p_l,p_g),new Laya.Point(this._role.x,this._role.y),b_s);this.ani.pos(d_u.x,d_u.y)}else this.ani.pos(p_l,p_g)}0<e.scale&&(this.ani.scaleX=this.ani.scaleY=e.scale,4<this._role.fightingCtrl.curDir&&2!=e.rotateType&&(this.ani.scaleX=-this.ani.scaleX)),this.ani.scale(this.ani.scaleX*Engine2d.CustomActor.MODEL_SCALE,this.ani.scaleY*Engine2d.CustomActor.MODEL_SCALE),this._endTime=0<e.exitTime?e.exitTime+SyncTime.tickCount:-1}this._curPx=this.ani.x,this._curPy=this.ani.y}this.resetAnimPivot(this.ani),this.rotateAni(),this.moveTo()}else this._endTime=1},e.prototype.onAnimationPlayCompleted=function(){this.ani&&!1===this.ani.loop&&this.dispose()},e.prototype.onAnimLoadedComplete=function(e){if(this.ani&&this.ani.url==e){if(0<this.effectID){var p_l=Config.effects[this.effectID].delay;if(0<p_l)return void Laya.timer.once(p_l,this,this.delayPlay,null)}this.delayPlay()}},e.prototype.resetAnimPivot=function(e){if(e){var p_l=e.getGraphicBounds();if(p_l&&0!=p_l.width&&0!=p_l.height){var p_g=p_l.height/2,b_s=this.getPivotConfig(e.avatar);b_s?p_g+=b_s.offsetPivotY:this._role.fightingCtrl.bodyAni&&(p_g=this._role.fightingCtrl.bodyAni.pivotY),e.pivot(p_l.width/2,p_g)}else{var d_u=this._role.fightingCtrl.bodyAni.getGraphicBounds();d_u&&e.pivot(d_u.width/2,d_u.height/2)}}},e.prototype.delayPlay=function(){Mhu(this,Laya)},e.prototype.setAction=function(e,p_l,p_g,b_s){if(void 0===p_g&&(p_g=!1),void 0===b_s&&(b_s=Engine2d.Animation.ANIMATION_INTERVAL),0<this.skillID){var d_u=Config.skill_skill[this.skillID];d_u&&d_u.range&&"round"===d_u.range[0]&&(p_l=0)}this._delayEndTime=-1,this._endTime=-1,this.ani.setAction(e,p_l,p_g,b_s)},e.prototype.getPivotConfig=function(e){if(e){var p_l=Config.pivot;for(var p_g in p_l)if(p_l[p_g].avatar===e)return p_l[p_g]}return null},e.prototype.moveTo=function(){if(0<this.effectID){var e=Config.effects[this.effectID];if(0<e.mTime&&0<e.mSpeed){this._lineToCtrl||(this._lineToCtrl=new LineToController);var p_l=45*(this._role.fightingCtrl.curDir-2)+e.mDirAngle,p_g=new Laya.Point,b_s=Engine2d.MapUtils.rotationToRadian(p_l);p_g.x=Math.cos(b_s)*e.mSpeed,p_g.y=Math.sin(b_s)*e.mSpeed,p_g.x=parseInt(p_g.x.toFixed(2)),p_g.y=parseInt(p_g.y.toFixed(2)),this._lineToCtrl.startToMove(this.ani,p_g,e.mTime)}}},e.prototype.update=function(e){this._lineToCtrl&&this._lineToCtrl.update(e);var p_l=SyncTime.tickCount;return!(p_l>this._endTime&&0<this._endTime||(p_l>this._delayEndTime&&0<this._delayEndTime&&this.delayPlay(),!this.ani))},e.prototype.dispose=function(){this._delayEndTime=-1,Laya.timer.clear(this,this.delayPlay),this.ani&&(this.ani.off(Laya.Event.COMPLETE,this,this.onAnimationPlayCompleted),this.ani.off(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onAnimLoadedComplete),Resource.ResManager.Instance.recoverAnimation(this.ani),this.ani=null),this._role=null,this._curPx=this._curPy=0,this.effectID=-1,this._lineToCtrl&&this._lineToCtrl.dispose(),this._lineToCtrl=null,this._endTime=-1,Resource.ResManager.Instance.recoverSkillEffectVo(this)},e}(),BuffEffectVo=function(){function e(){}return e.prototype.playEffect=function(e,p_l,p_g){if(!e)return!1;this._role=e,this.effectID=p_g,this.buffIdx=p_l,this.ani=this.ani||Resource.ResManager.Instance.freeAnimation,this.ani.on(Laya.Event.COMPLETE,this,this.onAnimationPlayCompleted),this.ani.on(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onAnimLoadedComplete);var b_s=Config.effects[p_g];this.setSkinRootUrl(b_s.name);var d_u=0<b_s.pSpeed?b_s.pSpeed:Engine2d.Animation.ANIMATION_INTERVAL;return this.setAction(b_s.name,0,0<b_s.loop,d_u),!0},e.prototype.resetAnimPivot=function(e){if(e){var p_l=e.getGraphicBounds();p_l&&0!=p_l.width&&0!=p_l.height&&e.pivot(p_l.width/2,p_l.height/2)}},e.prototype.setSkinRootUrl=function(e){Kcu(e,this,Resource,EffectType)},e.prototype.setAction=function(e,p_l,p_g,b_s){void 0===p_g&&(p_g=!1),void 0===b_s&&(b_s=Engine2d.Animation.ANIMATION_INTERVAL),this.ani.setAction(e,p_l,p_g,b_s)},e.prototype.onAnimLoadedComplete=function(e){if(this.ani&&this.ani.url==e){if(0<this.effectID){var p_l=Config.effects[this.effectID].delay;if(0<p_l)return void Laya.timer.once(p_l,this,this.delayPlay)}this.delayPlay()}},e.prototype.onAnimationPlayCompleted=function(){this.ani&&0==this.ani.loop&&this.dispose()},e.prototype.update=function(e){return Kcw(e,this)},e.prototype.delayPlay=function(){if(this._role){if(this.ani.play(0,this.ani.isLoop),null===this.ani.parent)if(0<this.effectID){var e=Config.effects[this.effectID];1===e.layer?this._role.fightingCtrl.addUnderChild(this.ani):this._role.fightingCtrl.addPopChild(this.ani);var p_l=e.posX,p_g=e.posY;this.ani.pos(p_l,p_g),0<e.scale&&(this.ani.scaleX=this.ani.scaleY=e.scale)}else this._role.fightingCtrl.addPopChild(this.ani),this.ani.pos(0,0);this.resetAnimPivot(this.ani)}else this.dispose()},e.prototype.dispose=function(){this.ani&&(this.ani.off(Laya.Event.COMPLETE,this,this.onAnimationPlayCompleted),this.ani.off(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onAnimLoadedComplete),Resource.ResManager.Instance.recoverAnimation(this.ani),this.ani=null),this._role=null,this.effectID=-1,this.buffIdx=-1},e.prototype.zoomMoveScale=function(e){this.ani&&(this.ani.scaleX=this.ani.scaleY=e)},e}(),MountAniEffectVo=function(){function e(){}return e.prototype.playEffect=function(e,p_l,p_g,b_s,d_u){return void 0===p_g&&(p_g=0),void 0===b_s&&(b_s=100),void 0===d_u&&(d_u=0),!(!e||!p_l||(this._role=e,this._addType=d_u,this._speed=b_s,this._effectName=p_l,this.ani=this.ani||Resource.ResManager.Instance.freeAnimation,this.ani.on(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onAnimLoadedComplete),this.setSkinRootUrl(p_l),this.setAction(p_l,p_g,!0,b_s),0))},e.prototype.onAnimLoadedComplete=function(e){this.ani&&this.ani.url==e&&FrameRunManager.instance.frameAddTo(FrameRunType.EFFECT,e,this.delayPlay.bind(this))},e.prototype.setAction=function(e,p_l,p_g,b_s){void 0===p_g&&(p_g=!1),void 0===b_s&&(b_s=Engine2d.Animation.ANIMATION_INTERVAL),this.ani&&(e=this._effectName?this._effectName:e,b_s=0<this._speed?this._speed:b_s,this.ani.setAction(e,p_l,p_g,b_s))},e.prototype.delayPlay=function(){this.ani&&(this.ani.play(0,this.ani.isLoop),this.ani.scale(1,1),null===this.ani.parent&&(1===this._addType?this._role.fightingCtrl.addUnderChild(this.ani,0):this._role.fightingCtrl.addUnderChild(this.ani)),this.resetAnimPivot(this.ani))},e.prototype.setSkinRootUrl=function(e){Kuo(e,this,Resource,EffectType)},e.prototype.resetAnimPivot=function(e){if(e){var p_l=e.getGraphicBounds();if(p_l&&0!=p_l.width&&0!=p_l.height){var p_g=p_l.height/2,b_s=this.getPivotConfig(e.avatar);b_s?p_g+=b_s.offsetPivotY:this._role.fightingCtrl.bodyAni&&(p_g=this._role.fightingCtrl.bodyAni.pivotY),e.pivot(p_l.width/2,p_g)}}},e.prototype.getPivotConfig=function(e){if(e){var p_l=Config.pivot;for(var p_g in p_l)if(p_l[p_g].avatar===e)return p_l[p_g]}return null},Object.defineProperty(e.prototype,"visible",{set:function(e){this.ani&&(this.ani.visible=e)},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.ani&&(this.ani.off(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onAnimLoadedComplete),Resource.ResManager.Instance.recoverAnimation(this.ani),this.ani=null),this._role=null,this._effectName=null},e}(),MonsterEffectVo=function(){function e(){}return e.prototype.playEffectById=function(e,p_l,p_g,b_s){void 0===p_g&&(p_g=null),void 0===b_s&&(b_s=0),this._effectId=p_l;var d_u=Config.effects[p_l];this.playEffect(e,d_u.name,p_g,d_u.pSpeed,0<d_u.loop,b_s)},e.prototype.getPivotConfig=function(e){if(e){var p_l=Config.pivot;for(var p_g in p_l)if(p_l[p_g].avatar===e)return p_l[p_g]}return null},e.prototype.playEffect=function(e,p_l,p_g,b_s,d_u,b_e){return void 0===p_g&&(p_g=null),void 0===b_s&&(b_s=100),void 0===d_u&&(d_u=!1),void 0===b_e&&(b_e=0),!(!e||!p_l||(this._callBack=p_g,this._role=e,this._addType=b_e,this._isPlaying=!1,this.ani=this.ani||Resource.ResManager.Instance.freeAnimation,this.ani.on(Laya.Event.COMPLETE,this,this.onAnimationPlayCompleted),this.ani.on(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onAnimLoadedComplete),this.setSkinRootUrl(p_l),this.setAction(p_l,0,d_u,b_s),0))},e.prototype.setSkinRootUrl=function(e){Uqj(e,this,Resource,EffectType)},e.prototype.onAnimationPlayCompleted=function(){this.ani&&0==this.ani.loop&&(this._isPlaying=!1,null!=this._callBack?this._callBack.call(null):this.dispose())},e.prototype.delayPlay=function(){if(this.ani){if(this.ani.play(0,this.ani.isLoop),this.ani.scale(1,1),null===this.ani.parent){if(this._addType===MonEffectType.TOP)Engine2d.GameMap.defaultMap.addAboveObject(this.ani),this.ani.pos(this._role.x,this._role.y);else if(this._addType===MonEffectType.BUTTOM)this._role.fightingCtrl.addUnderChild(this.ani),this.ani.pos(0,0);else if(this._addType===MonEffectType.IN_BODY){this._role.fightingCtrl.addAppearanceChild(this.ani);var e=Config.obj_monster[this._role.id]?Config.obj_monster[this._role.id].hitPosY:0,p_l=10*Math.random()+1;e+=p_l=.5<Math.random()?p_l:-p_l,e+=-this._role.designHg/2,this.ani.pos(-10,e)}if(0<this._effectId&&Config.effects[this._effectId]){var p_g=Config.effects[this._effectId].scale;0<p_g&&this.ani.scale(p_g,p_g)}this._addType===MonEffectType.TOP&&this.ani.scale(this.ani.scaleX*Engine2d.CustomActor.MODEL_SCALE,this.ani.scaleY*Engine2d.CustomActor.MODEL_SCALE)}this.resetAnimPivot(this.ani)}},e.prototype.onAnimLoadedComplete=function(e){this.ani&&this.ani.url==e&&(this._isPlaying=!0,Laya.timer.callLater(this,this.delayPlay.bind(this)))},e.prototype.gotoAndStop=function(e){void 0===e&&(e=-1),this.ani&&this.ani.gotoAndStop(-1===e?this.ani.count-1:e)},e.prototype.resetAnimPivot=function(e){if(e){var p_l=e.getGraphicBounds();if(p_l&&0!=p_l.width&&0!=p_l.height){var p_g=p_l.height/2,b_s=this.getPivotConfig(e.avatar);b_s?p_g+=b_s.offsetPivotY:this._addType===MonEffectType.IN_BODY||this._role.fightingCtrl.bodyAni&&this._addType===MonEffectType.TOP&&(p_g=this._role.fightingCtrl.bodyAni.pivotY),e.pivot(p_l.width/2,p_g)}}},e.prototype.setAction=function(e,p_l,p_g,b_s){void 0===p_g&&(p_g=!1),void 0===b_s&&(b_s=Engine2d.Animation.ANIMATION_INTERVAL),this.ani.setAction(e,p_l,p_g,b_s)},e.prototype.dispose=function(){this._effectId=null,this._isPlaying=!1,this.ani&&(this.ani.off(Laya.Event.COMPLETE,this,this.onAnimationPlayCompleted),this.ani.off(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onAnimLoadedComplete),this.ani.clear(),this.ani.removeSelf(),this.ani=null),Laya.timer.clearAll(this),this._role=null,Resource.ResManager.Instance.recoverMonEffectVo(this)},Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0}),e.prototype.rePlay=function(){Uzs(this)},e}(),LineToController=function(){function e(){}return e.prototype.startToMove=function(e,p_l,p_g,b_s,d_u,b_e){void 0===b_s&&(b_s=-999),void 0===d_u&&(d_u=-999),void 0===b_e&&(b_e=-1),this._target=e,this._speed=p_l,this._time=p_g,this._changeAlpha=b_e,this._isStop=!1,this._sIndex=0,-999!=b_s?(this._curPosX=b_s*Engine2d.CustomMap.MAP_RATE,this._curPosY=d_u*Engine2d.CustomMap.MAP_RATE):(this._curPosX=e.x,this._curPosY=e.y,this._oriPos=new Laya.Point(this._curPosX,this._curPosY)),this._oriPos=new Laya.Point(b_s,b_s),this._lastTime=SyncTime.tickCount},e.prototype.update=function(e){var p_l=SyncTime.tickCount-this._lastTime;return!(p_l<this._time&&!this._isStop&&(this._target&&(this._sIndex++,this._target.x=this._curPosX+this._speed.x*this._sIndex,this._target.y=this._curPosY+this._speed.y*this._sIndex,0<=this._changeAlpha&&(this._target.alpha=p_l/this._time*this._changeAlpha+.3)),1))},e.prototype.zoomChangeMove=function(e){this._curPosX=this._oriPos.x*Engine2d.CustomMap.MAP_RATE,this._curPosY=this._oriPos.y*Engine2d.CustomMap.MAP_RATE,this._target&&(this._sIndex++,this._target.x=this._curPosX+this._speed.x*this._sIndex,this._target.y=this._curPosY+this._speed.y*this._sIndex,this._isStop=1<e)},Object.defineProperty(e.prototype,"isStop",{get:function(){return this._isStop},set:function(e){this._isStop=e},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){Uxl(this)},e}(),FadeOutController=function(){function e(){this._type=1}return e.prototype.startFade=function(e,p_l,p_g,b_s){void 0===b_s&&(b_s=1),this._target=e,this._time=p_l,this._type=b_s,this._isStart=!1,0<p_g?Laya.timer.once(p_g,this,this.delayFadeOut):this.delayFadeOut()},e.prototype.delayFadeOut=function(){Laya.timer.clear(this,this.delayFadeOut),this._isStart=!0,this._lastTime=SyncTime.tickCount,this._target.alpha=1===this._type?0:1},e.prototype.update=function(e){if(this._isStart){var p_l=SyncTime.tickCount-this._lastTime;p_l<this._time?2===this._type?this._target.alpha=(this._time-p_l)/this._time:this._target.alpha=p_l/this._time:this._isStart=!1}},e}(),PanelEffectVo=function(){function e(){}return e.prototype.playEffect=function(e,p_l,p_g,b_s,d_u,b_e,d_m,d_w){return void 0===d_u&&(d_u=Engine2d.Animation.ANIMATION_INTERVAL),void 0===b_e&&(b_e=!0),void 0===d_m&&(d_m=0),void 0===d_w&&(d_w=null),!!e&&(this._container=e,this.effectName=p_l,this._callBack=d_w,this._isAutoPlay=b_e,this.ani=this.ani||Resource.ResManager.Instance.freeAnimation,this.ani.on(Laya.Event.COMPLETE,this,this.onAnimationPlayCompleted),this.ani.on(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onAnimLoadedComplete),this.setSkinRootUrl(p_l,p_g),this.setAction(p_l,d_m,b_s,d_u),!0)},e.prototype.resetAnimPivot=function(e){if(e){var p_l=e.getGraphicBounds();p_l&&0!=p_l.width&&0!=p_l.height&&e.pivot(p_l.width/2,p_l.height/2)}},e.prototype.stop=function(){this._isAutoPlay=!1,this.ani&&(this.ani.loop&&(this.ani.loop=!1),this.ani.stop())},e.prototype.setAction=function(e,p_l,p_g,b_s){void 0===p_g&&(p_g=!1),void 0===b_s&&(b_s=Engine2d.Animation.ANIMATION_INTERVAL),this.ani.setAction(e,p_l,p_g,b_s)},e.prototype.startPlay=function(){this.ani.visible=!0,this._isAutoPlay=!0,this.ani.play(0,this.ani.isLoop),null===this.ani.parent&&this._container&&this._container.addChild(this.ani),this.resetAnimPivot(this.ani)},e.prototype.onAnimationPlayCompleted=function(){this.ani&&0==this.ani.loop&&(null!=this._callBack?this._callBack():this.dispose())},e.prototype.setSkinRootUrl=function(e,p_l){Uvy(e,p_l,this,Resource)},e.prototype.onAnimLoadedComplete=function(e){this.ani&&this.ani.url==e&&this._isAutoPlay&&this.startPlay()},e.prototype.dispose=function(){this.ani&&(this.ani.off(Laya.Event.COMPLETE,this,this.onAnimationPlayCompleted),this.ani.off(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onAnimLoadedComplete),Resource.ResManager.Instance.recoverAnimation(this.ani),this.ani=null,Resource.ResManager.Instance.recoverPanelEffectVo(this))},e}();!function(e){e[e.TOP=0]="TOP",e[e.BUTTOM=1]="BUTTOM",e[e.IN_BODY=2]="IN_BODY"}(MonEffectType=MonEffectType||{});var d_s=function(){function e(){this.dicPool={},this.C_ALPHA_T=150,this.C_STAND_T=600,this.C_SCALE_T=750,this.C_END_T=900,this.pool=new Array,this.arMoveImgs=new Array}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.setDisplayContainer=function(e){Sld(e,this)},e.prototype.popDamageCritOrDeadly=function(e,p_l,p_g,b_s){void 0===b_s&&(b_s=!0);var d_u=this.getCommonItem(e,p_l,p_g);d_u&&this.addItemTo(d_u,p_g,DamageTypeDefine.ICON_CRIT,p_l)},e.prototype.popDoge=function(e){Err(e,this,DamageTypeDefine)},e.prototype.getCommonItem=function(e,p_l,p_g,b_s){void 0===p_g&&(p_g=0),void 0===b_s&&(b_s=!1);var d_u=LgcM.ins.getActorById(e);if(!d_u||0==p_l)return null;if(d_u.x<0||d_u.y<0)return null;var b_e=0<this.pool.length?this.pool.pop():new TweenItem;b_e.time=SyncTime.tickCount,b_e.type=p_g,b_e.id=e,b_e.actorType=d_u.type;var d_m=d_u.fightingCtrl?Engine2d.MapUtils.getReverDir(d_u.fightingCtrl.curDir):0,d_w=Engine2d.MapUtils.coordToScreenXY(d_u.currentCx,d_u.currentCy);b_e.originX=d_w.x,b_e.originY=d_w.y-d_u.designHg/2;var f_t=45+Math.floor(5*Math.random());return f_t=Engine2d.MapUtils.rotationToRadian(f_t),b_e.speed=-Math.sqrt(1176/Math.sin(2*f_t)),b_e.quality=2.5,b_e.speed_x=b_e.speed*Math.cos(f_t),b_e.speed_y=b_e.speed*Math.sin(f_t),b_e.speed_x=d_m<5?-b_e.speed_x:b_e.speed_x,b_e.scaleMax=1.8,b_e.type==DamageTypeDefine.ICON_CRIT||b_e.type==DamageTypeDefine.ICON_DEADLY||b_e.type==DamageTypeDefine.ICON_CRIT_MINE||b_e.type==DamageTypeDefine.ICON_DEADLY_MINE||b_s?(b_e.upDis=30*Math.random()-200,b_e.xDis=(b_e.speed_x<0?-1:1)*(30*Math.random())):(b_e.upDis=30*Math.random()-150,b_e.xDis=(b_e.speed_x<0?-1:1)*(30*Math.random()),b_e.scaleMax=1.5),d_w=null,b_e},e.prototype.addItemICO=function(e,p_l){if(e){if(e.img=this.buildIcon(p_l),null==e.img||null==this.root)return void this.pool.push(e);e.img.x=e.originX,e.img.y=e.originY,this.root.addChild(e.img),this.arMoveImgs.push(e)}},e.prototype.popRecovery=function(e,p_l){var p_g=DamageTypeDefine.ICON_RECOVER,b_s=this.getCommonItem(e,p_l,p_g);b_s&&this.addItemTo(b_s,p_g,p_g,p_l)},e.prototype.buildNumsImg=function(e,p_l,p_g,b_s){void 0===b_s&&(b_s=-4);var d_u,b_e=Resource.ResUrl.getDamageIcon(e),d_m=Resource.ResUrl.getDamageNumUrl(p_l);""!=b_e&&((d_u=Resource.ResManager.Instance.getRes(b_e))||Laya.loader.load(b_e));var d_w=this.dicPool[p_l];if(null==d_w){var f_t=Resource.ResManager.Instance.getRes(d_m);f_t?d_w=this.dicPool[p_l]=Utils.splitTexture(f_t,11,1):Laya.loader.load(d_m)}var v_z=""!=b_e;if(v_z&&!d_u||!d_w)return null;var d_h=new Laya.Point,r_t=Resource.ResManager.Instance.freeDamageSprite,t_n=d_w[0].width,f_y=d_w[0].height,p_q=0;v_z&&(r_t.graphics.drawTexture(d_u),d_h.x=d_u.width,d_h.y=(d_u.height-f_y)/2,p_q=d_u.height>f_y?d_u.height:f_y),r_t.graphics.drawTexture(d_w[0],d_h.x,d_h.y,t_n,f_y),d_h.x+=t_n-2;for(var h_h,n_j=p_g.toString(),j_l=0;j_l<n_j.length;j_l++)h_h=parseInt(n_j.charAt(j_l)),r_t.graphics.drawTexture(d_w[h_h+1],d_h.x,d_h.y,t_n,f_y),d_h.x+=t_n+b_s;return r_t.size(d_h.x,p_q),r_t.pivot(d_h.x/2,p_q/2),d_h=null,r_t},e.prototype.popHitNums=function(e,p_l,p_g,b_s){p_g==DamageTypeDefine.S_DOGE?p_l==b_p.playerId?this.popDoge(p_l):e==b_p.playerId&&this.popMiss(p_l):p_g==DamageTypeDefine.S_DAMAGE?p_l==b_p.playerId?this.popDamage(p_l,b_s,!0):e==b_p.playerId&&this.popDamage(p_l,b_s,!1):p_g==DamageTypeDefine.S_CRIT?e==b_p.playerId?this.popDamageCritOrDeadly(p_l,b_s,DamageTypeDefine.ICON_CRIT,!1):this.popDamageCritOrDeadly(p_l,b_s,DamageTypeDefine.ICON_CRIT_MINE,!0):p_g==DamageTypeDefine.S_DEADLY&&(e==b_p.playerId?this.popDamageCritOrDeadly(p_l,b_s,DamageTypeDefine.ICON_DEADLY,!1):this.popDamageCritOrDeadly(p_l,b_s,DamageTypeDefine.ICON_DEADLY_MINE,!0))},e.prototype.popDamage=function(e,p_l,p_g){var b_s=p_g?DamageTypeDefine.ICON_SELF:DamageTypeDefine.ICON_OTHER,d_u=this.getCommonItem(e,p_l,b_s);d_u&&this.addItemTo(d_u,b_s,b_s,p_l)},e.prototype.addItemTo=function(e,p_l,p_g,b_s){if(e){if(e.img=this.buildNumsImg(p_l,p_g,b_s),null==e.img||null==this.root)return void this.pool.push(e);e.img.x=e.originX,e.img.y=e.originY,this.root.addChild(e.img),this.arMoveImgs.push(e)}},e.prototype.buildIcon=function(e){var p_l,p_g=Resource.ResUrl.getDamageIcon(e);if(""!=p_g&&((p_l=Resource.ResManager.Instance.getRes(p_g))||Laya.loader.load(p_g)),p_l){var b_s=new Laya.Sprite;return b_s.texture=p_l,b_s.size(p_l.width,p_l.height),b_s}return null},e.prototype.update=function(e){if(this.arMoveImgs&&this.arMoveImgs.length)for(var p_l=void 0,p_g=this.arMoveImgs.length-1;0<=p_g;p_g--)p_l=this.arMoveImgs[p_g],this.moveDamage(p_l)&&(this.arMoveImgs.splice(p_g,1),p_l.img&&Resource.ResManager.Instance.recoverSprite(p_l.img,PoolDefine.SPRITE_DAMAGE),p_l.img=null,this.pool.length<15?this.pool.push(p_l):p_l=null)},e.prototype.popMiss=function(e){Mya(e,this,DamageTypeDefine)},e.prototype.moveDamage=function(e){var p_l,p_g=SyncTime.tickCount-e.time;if(p_g<=this.C_ALPHA_T?(p_l=p_g/this.C_ALPHA_T,e.img.alpha=p_l,e.img.scaleX=e.img.scaleY=e.scaleMax*p_l,e.img.y=e.originY+e.upDis*p_l,e.img.x=e.originX+e.xDis*p_l):p_g>this.C_ALPHA_T&&p_g<=this.C_STAND_T&&(e.originY=e.img.y,e.originX=e.img.x,p_l=(p_g-this.C_ALPHA_T)/(this.C_STAND_T-this.C_ALPHA_T)),p_g>=this.C_STAND_T&&p_g<this.C_END_T){var b_s=(p_g-this.C_STAND_T)/100;p_g>=this.C_SCALE_T?(p_l=1-(p_g-this.C_SCALE_T)/(this.C_END_T-this.C_SCALE_T),e.img.alpha=p_l,e.img.scaleX=e.img.scaleY=e.scaleMax-.3+.6*p_l):(p_l=(p_g-this.C_STAND_T)/(this.C_SCALE_T-this.C_STAND_T),e.img.scaleX=e.img.scaleY=e.scaleMax+.3*p_l),e.img.y=e.originY+e.speed_y*b_s+9.8*e.quality*b_s*b_s/2,e.img.x=e.originX+e.speed_x*b_s}else if(p_g>this.C_END_T)return!0;return!1},e}(),TweenItem=function(){Eqj(this)},CollectController=function(){function e(){this._collectId=-1}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.startCollect=function(e,p_l,p_g){var b_s=LgcM.ins.getActorById(p_l,Engine2d.ActorTypeDefine.PLAYER);if(b_s){var d_u=LgcM.ins.getActorStdInfoById(e,Engine2d.ActorTypeDefine.COLLECT);if(d_u){var b_e=LgcM.ins.getActorById(d_u.id,Engine2d.ActorTypeDefine.COLLECT),d_m=Config.obj_collect[d_u.entryId];if(b_p.playerId===p_l){this._collectId=d_u.id;var d_w=Math.ceil(p_g-SyncTime.serverTime);0<d_w&&UI.ProgressPanel.setCountDownTime(0,d_w,d_m.progressDesc,Engine2d.Tools.BindDomain(this.collectComplete,this))}if(d_m.action){var f_t=Engine2d.MapUtils.calcPosDir(b_s.x,b_s.y,b_e.x,b_e.y);b_s.setAction(d_m.action,f_t,!0)}}}},e.prototype.stopCollect=function(e,p_l){if(-1!==this._collectId){var p_g=LgcM.ins.getActorById(p_l,Engine2d.ActorTypeDefine.PLAYER);p_g&&p_g.stand(),p_l===b_p.playerId&&UI.ProgressPanel.close(),this._collectId=-1}},e.prototype.collectComplete=function(){if(-1!==this._collectId){var e=LgcM.ins.getActorStdInfoById(this._collectId,Engine2d.ActorTypeDefine.COLLECT);e&&(1===Config.obj_collect[e.entryId].continueCollect&&b_p.reqCollect(e.id),LED.event(l_r.COLLECT_PICK_COMPLETE,e.id)),Engine2d.Hero.local.stand(),this._collectId=-1}},e}(),BuffShowController=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.addBuffEffect=function(e,p_l){var p_g=LgcM.ins.getActorStdInfoById(e,Engine2d.ActorTypeDefine.PLAYER);if(!p_g||p_g.isPlayerVisible){var b_s=Config.skill_buff[p_l.entryId];if(b_s){var d_u=b_s.clientEffect;if(d_u)for(var b_e in d_u){var d_m=d_u[b_e].effect;0<d_m&&EffectShowManager.instance.showBuffEffect(e,p_l,d_m)}}}},e.prototype.removeBuffEffect=function(e,p_l){p_l&&EffectShowManager.instance.clearBuffEffectByIdx(e,p_l.idx)},e.prototype.clearBuffEffect=function(e){Imw(e,EffectShowManager)},e.prototype.clear=function(){Eox(EffectShowManager)},e}(),BuffModel=function(){function e(){this._buffs={}}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.updateBuff=function(e,p_l){if(p_l){var p_g,b_s=this._buffs[e]=this._buffs[e]||new Array;for(var d_u in p_l)null===(p_g=this.getBuffInfoByIdx(e,p_l[d_u].idx))&&((p_g=new BuffVo).update(p_l[d_u]),b_s.push(p_g),BuffShowController.instance.addBuffEffect(e,p_g)),p_g.update(p_l[d_u]);e===b_p.playerId&&LED.event(l_r.BUFF_ADD,e)}},e.prototype.getBuffsByPId=function(e){var p_l=this._buffs[e];return p_l&&0!=p_l.length?p_l:null},e.prototype.removeBuffByObjId=function(e){var p_l=this._buffs[e];p_l&&0!=p_l.length&&(BuffShowController.instance.clearBuffEffect(e),this._buffs[e]=null,delete this._buffs[e])},e.prototype.removeBuff=function(e,p_l){var p_g;for(var b_s in p_l)p_g=this.removeBuffByIdx(e,p_l[b_s].buffIdx),BuffShowController.instance.removeBuffEffect(e,p_g);e===b_p.playerId&&LED.event(l_r.BUFF_REMOVE,e)},e.prototype.getBuffInfoByIdx=function(e,p_l){return Cmm(e,p_l,this)},e.prototype.removeBuffByIdx=function(e,p_l){var p_g=this._buffs[e];if(!p_g||0==p_g.length)return null;for(var b_s=0;b_s<p_g.length;b_s++)if(p_g[b_s].idx==p_l){var d_u=p_g[b_s];return p_g.splice(b_s,1),d_u}},e.prototype.clear=function(){Ids(this,BuffShowController)},e}(),BuffVo=function(){function e(){}return e.prototype.update=function(e){this.idx=e.idx,this.entryId=e.entryId,this.time=e.time,this.overlay=e.overlay,this.adderId=e.adderId,(this._endTime=0)<this.time&&(this._endTime=SyncTime.tickCount+this.time)},e.prototype.runTime=function(){return Kyh(this)},e.prototype.sulTime=function(){if(0===this._endTime)return 0;var e=this._endTime-SyncTime.tickCount;return e<0&&(e=0),e},e}(),CittaVoState,CittaVo=function(){function e(){this._state=0,this.isActiveClick=!1}return e.prototype.update=function(e,p_l){void 0===p_l&&(p_l=!1),p_l||0!==this.lv||(this.isNew=!0),this.id=e.skillId,this.lv=e.lv;var p_g=Config.skill_passive_mental[e.skillId];p_g&&(this.type=p_g.subtype,this.quality=p_g.grade,this.name=p_g.name,1==p_g.subtype&&(this.slot=e.slot),this._state=1)},e.prototype.init=function(e){var p_l=Config.skill_passive_mental[e];p_l&&(this.type=p_l.subtype,this.quality=p_l.grade,this.name=p_l.name)},e.prototype.revisionLv=function(e,p_l){void 0===p_l&&(p_l=-1),this.lv=e,-1!=p_l&&(this.star=p_l)},e.prototype.stateAlter=function(e){return Yry(e,this)},e.prototype.revisionSolt=function(e){return Aom(e,this)},e.prototype.isActive=function(){return Ocx(this,CittaVoState)},Object.defineProperty(e.prototype,"state",{get:function(){return this._state!=CittaVoState.ACTIVED&&CittaModule.instance.cittaCanCitta(this.id)?CittaVoState.CAN_ACTIVE:this._state},enumerable:!0,configurable:!0}),e.prototype.getSkillMaxLv=function(e){return Kav(e,parseInt,Config,this)},e.prototype.onAmuletPower=function(){var e=1e3*parseInt(this.id.toString().slice(0,4));return Config.skill_passive_mental[e+this.lv].fightNum?Config.skill_passive_mental[e+this.lv].fightNum:0},e.prototype.getSkillMaxStar=function(e){return Woh(e,parseInt,Config,this)},e.prototype.canDeloyCanUp=function(e){var p_l=1e3*parseInt(e.toString().slice(0,4)),p_g=LgcM.ins.heroVo,b_s=Config.skill_passive_mental[p_l+this.lv+1];return!!b_s&&(2==b_s.subtype&&p_g.mentalExp>=Config.skill_passive_mental[p_l+this.lv+1].consume[0][1]||!(1!=b_s.subtype||!b_p.checkConsume(Config.skill_passive_mental[e+this.lv+1].consume))||void 0)},e.prototype.getPower=function(){var e=1e3*parseInt(this.id.toString().slice(0,4)),p_l=CharacterProperty.getPropertys(Config.skill_passive_mental[e+this.lv].featureParam),p_g=CittaModule.instance.getUpStarConf(this.id,this.star);if(p_g&&p_g.attr){var b_s=CharacterProperty.getPropertys(p_g.attr);p_l?CharacterProperty.mergePropertys(p_l,b_s):p_l=b_s}if(b_p.calPropFight(p_l))return b_p.calPropFight(p_l)},e.prototype.canStarUp=function(e){void 0===e&&(e=!1);var p_l=CittaModule.instance.getUpStarConf(this.id,this.star+1);return!(!p_l||!p_l.cost)&&b_p.checkConsume(p_l.cost,e)},e}();!function(e){e[e.NO_ACTIVE=0]="NO_ACTIVE",e[e.ACTIVED=1]="ACTIVED",e[e.CAN_ACTIVE=2]="CAN_ACTIVE",e[e.STAR_UP=3]="STAR_UP"}(CittaVoState=CittaVoState||{});var l_v=function(){function e(){this.forBidRecordArr=[],this.beForBidRecordArr=[],this.silenceType=0}return e.prototype.parseData=function(e){if(e&&e.silenceRecord){for(var p_l=0,p_g=e.silenceRecord;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new x_silence_record;d_u.serverType=b_s.serverType,d_u.targetName=b_s.targetName,d_u.targetSid=b_s.targetSid,d_u.time=b_s.time,1==e.silenceType?this.forBidRecordArr.push(d_u):2==e.silenceType&&this.beForBidRecordArr.push(d_u)}this.silenceType=e.silenceType}},e}(),ChannelTypeDefine;!function(e){e[e.SYNTH=0]="SYNTH",e[e.WORLD=1]="WORLD",e[e.GUILD=2]="GUILD",e[e.HEARSAY=3]="HEARSAY",e[e.PM=4]="PM",e[e.SYSTEM=5]="SYSTEM",e[e.GUNPING=6]="GUNPING",e[e.MAP=7]="MAP",e[e.CROSS=8]="CROSS",e[e.GUNPING_SYSTEM=11]="GUNPING_SYSTEM",e[e.GUNPING_HEARSAY=12]="GUNPING_HEARSAY",e[e.CROSS_SYSTEM=13]="CROSS_SYSTEM"}(ChannelTypeDefine=ChannelTypeDefine||{});var n_d=function(){function n_d(){this._privateChatPlr=[],this._privateChatRec={},this.sendHistory=null,this.chatWordMax=50,this.isChatGuildRedPoint=!1,this.lastMsgTime={1:0,2:0,8:0},this._tempListRec={},this._reqChatRectHash={},this._reqBroadHash={},this._silenceCount=0,this._crossSilenceCount=0,this._cdEndTime=0,this._crossCdEndTime=0,this._targetName="",this._expireTime=0,this._crossTargetName="",this._crossExpireTime=0,this._teamId=0,this._silenceRecordInfo=[]}return n_d.prototype.update=function(){this._frameRunManager&&this._frameRunManager.frameRun()},Object.defineProperty(n_d.prototype,"SlienceRecordInfo",{get:function(){return null==this._silenceRecordInfo&&(this._silenceRecordInfo=[]),this._silenceRecordInfo},enumerable:!0,configurable:!0}),Object.defineProperty(n_d.prototype,"fristPlayerVO",{get:function(){return this._firstPriPlyVO},enumerable:!0,configurable:!0}),n_d.replaceFobidFunc=function(){for(var e=[],p_l=0;p_l<arguments.length;p_l++)e[p_l]=arguments[p_l];return""},n_d.prototype.doUpdatePrivatePlr=function(e,p_l){void 0===p_l&&(p_l=0);for(var p_g=[],b_s=0,d_u=e;b_s<d_u.length;b_s++){var b_e=d_u[b_s],d_m=new PrivateChatPlrVo(b_e);p_g.push(d_m),d_m.hasNewChat&&LED.event(l_r.CHAT_PRIVATE_REC_ADD)}this._privateChatPlr=p_g},n_d.prototype.chatRecPushList=function(e){this.isShow(ChannelTypeDefine.WORLD,e.channel)?(this._recList[ChannelTypeDefine.WORLD]||(this._recList[ChannelTypeDefine.WORLD]=[]),this._recList[ChannelTypeDefine.WORLD].push(e)):(this._recList[e.channel]||(this._recList[e.channel]=[]),this._recList[e.channel].push(e))},n_d.prototype.reqChatPrivatePlr=function(){var e=new c2w_chat_private_plr;DB.instance.query(c2w_chat_private_plr,e)},n_d.replaceFunc=function(){for(var e=[],p_l=0;p_l<arguments.length;p_l++)e[p_l]=arguments[p_l];var p_g=e[1].split(":"),b_s=n_d.tempVo.params,d_u=n_d.tempVo.channel;if(!b_s||0==b_s.length)return e[0];var b_e,d_m=b_s[parseInt(p_g[0])-1];if(1<p_g.length){var d_w=p_g[1];b_e="string"==typeof d_m?d_w===n_d.CLIENT_TALISMAN_KEY?d_m.split(n_d.TALISMAN_SPLIT):d_m.split(n_d.ITEM_SPLIT):d_m;var f_t=void 0,v_z=void 0,d_h=void 0;switch(d_w){case"item":case n_d.CLIENT_ITEM_KEY:var r_t=parseInt(b_e[0]);if(r_t<=0)return"";f_t=Utils.ItemUtils.getQualityColor(Config.CItem(r_t).quality);var t_n="["+Config.CItem(r_t).name+"]";d_m=Utils.setHref(t_n,Utils.$("item:{1}",d_m),f_t),b_e[1]&&1<parseInt(b_e[1])&&(t_n="x"+b_e[1],d_m+=Utils.setColor(t_n,f_t));break;case n_d.CLIENT_TALISMAN_KEY:var f_y=parseInt(b_e[0]),p_q=Config.talisman_talisman[f_y];0<f_y&&p_q&&(f_t=Utils.ItemUtils.getTalismanQualityColor(p_q.quality),d_m=Utils.setHref("["+p_q.name+"]",Utils.$("talisman:{1}",d_m),f_t));break;case"playerName":var h_h=parseInt(b_e[0]),n_j=b_e[1];f_t="#2c65ba",d_u!==ChannelTypeDefine.GUNPING&&d_u!==ChannelTypeDefine.GUNPING_HEARSAY&&d_u!==ChannelTypeDefine.GUNPING_SYSTEM||(f_t=Config.color[302].color),d_m=h_h!=b_p.playerId&&0!=h_h?Utils.setHref(n_j,Utils.$("playerName:{1}",h_h),f_t):Utils.setColor(n_j,f_t);break;case"playerNameArr":d_m="";for(var j_l=0;j_l<b_e.length;++j_l){var l_m=b_e[j_l],z_m=parseInt(l_m[0]),h_b=l_m[1];if(0==z_m)break;f_t="#2c65ba",d_u!==ChannelTypeDefine.GUNPING&&d_u!==ChannelTypeDefine.GUNPING_HEARSAY&&d_u!==ChannelTypeDefine.GUNPING_SYSTEM||(f_t=Config.color[302].color),d_m=z_m!=b_p.playerId&&0!=z_m?d_m+(0!=j_l?", ":"")+Utils.setHref(h_b,Utils.$("playerName:{1}",z_m),f_t):d_m+(0!=j_l?", ":"")+Utils.setColor(h_b,f_t)}break;case"copyName":var t_i=parseInt(b_e[0]);d_m=Utils.setColor(Config.fb_dungeon[t_i].name,Utils.Color.GREEN);break;case"team":var n_f=parseInt(b_e[0]),t_s=b_e[1],v_n=parseInt(b_e[2]),b_o=parseInt(b_e[3]),b_x=parseInt(b_e[4]),v_s=1==v_n?(j_x("33_562_1358")+j_x(1808)):(j_x("932_1835_223")+j_x(2456));d_m=Utils.setHref(v_s,Utils.$("team:{1},{2},{3},{4},{5}",n_f,t_s,v_n,b_o,b_x),Utils.Color.GREEN);break;case"monsterName":f_t="#2c65ba",d_u!==ChannelTypeDefine.GUNPING&&d_u!==ChannelTypeDefine.GUNPING_HEARSAY&&d_u!==ChannelTypeDefine.GUNPING_SYSTEM||(f_t=Config.color[302].color),v_z=parseInt(b_e[0]),d_h=b_e[1],d_m=Utils.setColor(d_h,f_t);break;case"monsterName2":f_t="#2c65ba",d_u!==ChannelTypeDefine.GUNPING&&d_u!==ChannelTypeDefine.GUNPING_HEARSAY&&d_u!==ChannelTypeDefine.GUNPING_SYSTEM||(f_t=Config.color[302].color),v_z=parseInt(b_e[0]),d_h=Config.obj_monster[v_z].name,d_m=Utils.setColor(d_h,f_t);break;case"level":var r_c=parseInt(b_e[0]),b_n=parseInt(b_e[1]);d_m=0<r_c?Config.state_state[r_c].desc:"",d_m=Utils.$(("{1}{2}"+j_x(2342)),d_m,b_n);break;case"mapName":var v_p=parseInt(b_e[0]);d_m=Config.map[v_p].name;break;case"story":d_m=Utils.setHref((j_x("711_2417_1109")+j_x(1808)),Utils.$("story:{1}",d_m),"#008931");break;case"guild":var d_d=String(b_e[1]);f_t="#008931",d_u!==ChannelTypeDefine.GUNPING&&d_u!==ChannelTypeDefine.GUNPING_HEARSAY&&d_u!==ChannelTypeDefine.GUNPING_SYSTEM||(f_t=Config.color[303].color),d_m=Utils.setHref(d_d,Utils.$("guild:{1}",d_m),f_t);break;case"dh":var h_q=parseInt(b_e[0]);d_m=Utils.setHref((j_x("571_1802_1068")+j_x(1777)),Utils.$("dh:{1}",h_q),"#008931");break;case"bossCome":d_m=Utils.setHref((j_x("711_2417_383")+j_x(832)),Utils.$("openWin:{1}",1402),"#008931");break;case"guildAuction":d_m=Utils.setHref((j_x("711_2417_793")+j_x(1027)),Utils.$("openWin:{1}",1114),"#008931");break;case"guildBoss":var x_f=parseInt(b_e[0]);d_m=Utils.setColor(Config.guild_guildBoss[x_f].name,"#008931");break;case"guildFbFight":d_m=Utils.setHref((j_x("711_2417_655")+j_x(383)),Utils.$("openWin:{1}",1117),"#008931");break;case"guildFbCheck":d_m=Utils.setHref((j_x("711_2417_5")+j_x(2450)),Utils.$("openWin:{1}",1117),"#008931");break;case"xyDraw":var j_s=parseInt(b_e[0]);if(Config.activity_drawcard_rewards[j_s]){var f_u=Config.activity_drawcard_rewards[j_s];if(f_u&&2===f_u.rewardType){var l_d=Config.CItem(f_u.rewardId);l_d=l_d||Config.xianyuan_god[f_u.rewardId],f_u&&l_d&&(f_t=Utils.ItemUtils.getQualityColor(l_d.quality),d_m=Utils.setColor(f_u.rewardName,f_t))}else if(f_u&&1===f_u.rewardType){var f_n=f_u.rewardId,G=Config.CItem(f_n).name;G=G||Config.xianyuan_god[f_n].name,f_t=Utils.ItemUtils.getQualityColor(Config.CItem(f_n).quality),d_m=Utils.setHref(G,Utils.$("item:{1}",d_m),f_t)}}break;case"banquet":d_m=Utils.setHref((j_x("352_1624_2295")+j_x(1755)),Utils.$("openWin:{1},{2}",1155,JSON.stringify([b_e[0]])),"#008931");break;case"banquetType":d_m=Utils.setColor(Config.banquet_banquet[b_e[0]].name,"#008931");break;case"FriendDiscount":d_m=Utils.setHref((j_x("711_2417_511")+j_x(603)),Utils.$("FriendDiscount:{1},{2}",b_s[0],b_s[1]),"#008931");break;case"DiscountRewardIdLine":var b_u=Config.activity_friendDiscount_rewardDiscount[b_s[1]];d_m=Utils.setColor(b_u.name,"#c17200");break;case"DiscountRewardId":var b_t=Config.activity_friendDiscount_rewardDiscount[b_s[1]];d_m=Utils.setColor(b_t.name,"#c17200");break;case"dreamAltar":d_m=Utils.setHref((j_x("665_2456_1715")+j_x(518)),Utils.$("dreamAltar:{1},{2}",1407,JSON.stringify([b_e[0]])),"#008931");break;case"openGive":d_m=Utils.setHref((j_x("239_2051")),Utils.$("openGive:{1},{2},{3}",1405,JSON.stringify(b_s[0][0]),JSON.stringify(b_s[0][1])),"#008931");break;case"tianjie":d_m=Utils.setHref((j_x("711_2417_1109")+j_x(1808)),Utils.$("tianjie:{1}",d_m),"#008931");break;case"redPacket":var j_v=n_d.tempVo.params;d_m=Utils.setHref((j_x("2273_456_130")),Utils.$("redPacket:{1}",j_v),"#008931");break;case"fightTeam":var f_w=n_d.tempVo.params[2][0];d_m=Utils.setHref((j_x("5_2450_383")+j_x(2413)),Utils.$("lookFightTeam:{1}",f_w),"#008931")}}return d_m},n_d.prototype.canChatrReq=function(e,p_l,p_g,b_s){var d_u=LgcM.ins.heroVo;if(e.msg&&""!=e.msg){e.msg=decodeURI(e.msg),e.msgId||(e.msg=Utils.html2Escape(e.msg)),(n_d.tempVo=e).channel!=ChannelTypeDefine.HEARSAY&&(e.msg=n_d.replaceFace(e.msg));var b_e=e.msg.replace(n_d.RELACE_REGEXP,n_d.replaceFobidFunc);if(b_e=(b_e=b_e.replace(n_d.RELACE_SPACEEXP,n_d.replaceFobidFunc)).replace(n_d.RELACE_JianREGEXP,n_d.replaceFobidFunc),e.msg=e.msg.replace(n_d.RELACE_REGEXP,n_d.replaceFunc),"@gm "!==e.msg.slice(0,4)){var d_m=b_e.replace(n_d.RELACE_ChatREGEXP,n_d.replaceFobidFunc);if(15<=d_m.length&&d_u.stateLv<=2)return p_l?p_l.push(p_g):this.chatRecPushList(e),p_l?LED.event(l_r.CHAT_PRIVATE_REC_ADD,[p_g]):LED.event(l_r.CHAT_REC_ADD,e),!1;if(2<d_u.stateLv&&d_u.stateLv<=3){var d_w=p_l?this.getMyPrivateRecList(b_s):this.getMyChatRecList(e.channel),f_t=!1,v_z=null,d_h=d_w.length;if(0<d_h){var r_t=d_w[d_h-1].msg;v_z=(r_t=(r_t=(r_t=r_t.replace(n_d.RELACE_REGEXP,n_d.replaceFobidFunc)).replace(n_d.RELACE_SPACEEXP,n_d.replaceFobidFunc)).replace(n_d.RELACE_JianREGEXP,n_d.replaceFobidFunc)).replace(n_d.RELACE_ChatREGEXP,n_d.replaceFobidFunc),f_t=.8<this.string_same(d_m,v_z)}if(f_t&&15<d_m.length)return p_l?p_l.push(p_g):this.chatRecPushList(e),p_l?LED.event(l_r.CHAT_PRIVATE_REC_ADD,[p_g]):LED.event(l_r.CHAT_REC_ADD,e),!1}}}return!0},n_d.prototype.getPrivatePlrLst=function(){return this._privateChatPlr.sort((function(e,p_l){return e.online&&p_l.online?p_l.lastTime-e.lastTime:p_l.online?1:e.online?-1:void 0})),this._privateChatPlr=this._privateChatPlr.slice(0,10),this._privateChatPlr},n_d.prototype.parseChatRec=function(e){if(!FriendModel.instance.isBlack(e.rec.pid)){this.recoverChannelMsg(e.rec.channel);var p_l=Laya.Pool.getItemByClass(ChatVo.PoolString,ChatVo);p_l.setChatRec(Object.keys(this._recList).length,e.rec),p_l.msg=p_l.msgId?Config.notice[p_l.msgId].value:p_l.msg,p_l.msg&&""!=p_l.msg&&(p_l.msg=decodeURI(p_l.msg),p_l.msgId||(p_l.msg=Utils.html2Escape(p_l.msg)),(n_d.tempVo=p_l).msg=p_l.msg.replace(n_d.RELACE_REGEXP,n_d.replaceFunc),p_l.channel!=ChannelTypeDefine.HEARSAY&&(p_l.msg=n_d.replaceFace(p_l.msg))),n_d.tempVo=null,p_l.channel!==ChannelTypeDefine.GUNPING?(p_l.channel===ChannelTypeDefine.GUNPING_HEARSAY?(b_p.gunping(p_l.msg),p_l.channel=ChannelTypeDefine.HEARSAY):p_l.channel===ChannelTypeDefine.GUNPING_SYSTEM&&(b_p.gunping(p_l.msg),p_l.channel=ChannelTypeDefine.SYSTEM),this.chatRecPushList(p_l),p_l.channel==ChannelTypeDefine.GUILD&&(this.isChatGuildRedPoint=!0),LED.event(l_r.CHAT_REC_ADD,p_l)):b_p.gunping(p_l.msg)}},n_d.prototype.clearChatPrivateData=function(){Sxd(this)},n_d.prototype.getChatRecSize=function(e){return Wri(e,ChannelTypeDefine,n_d)},n_d.prototype.checkSendMsg=function(e,p_l,p_g,b_s){if(0!=p_g){var d_u;if(b_s=b_s.replace(/[%]/g,"%25"),p_l&&0<p_l.length)for(var b_e in d_u=[],p_l)d_u.push(p_l[b_e].toLinkStr());e===ChannelTypeDefine.SYNTH&&(e=ChannelTypeDefine.WORLD),null!=this.lastMsgTime[e]&&(this.lastMsgTime[e]=SyncTime.serverTime),LgcM.ins.heroVo,this.reqChat(e,b_s,d_u,0,!0)}else b_p.broadcastNotice((j_x("571_1802_1273")+j_x("610_130_241")+j_x("1387_1492_1794")))},n_d.prototype.reqChat=function(e,p_l,p_g,b_s,d_u){void 0===b_s&&(b_s=0),void 0===d_u&&(d_u=!1);var b_e=new c2w_chat_req;b_e.channel=e||ChannelTypeDefine.WORLD,b_e.msg=p_l,b_e.msgParams="",b_e.msgId=b_s,p_g&&0<p_g.length&&(b_e.msgParams=JSON.stringify(p_g)),d_u&&!this.canChatReq(b_e.channel,b_e.msg,b_e.msgParams)&&GPlatform.isCheckChat||DB.instance.query(c2w_chat_req,b_e)},n_d.prototype.sendMsg=function(msg,channel,itemArr){if(msg&&0<msg.length&&(this.sendHistory||(this.sendHistory=[]),0!==this.sendHistory.length&&this.sendHistory[this.sendHistory.length-1]===msg||(this.sendHistory.push(msg),50<=this.sendHistory.length&&this.sendHistory.shift())),GPlatform.isRelease||"@cmd "!==msg.slice(0,5))return channel===ChannelTypeDefine.HEARSAY?(b_p.broadcastNotice((j_x("2040_822_2217")+j_x("2462_1919_571")+j_x(166))),!1):msg.length>this.chatWordMax&&(GPlatform.isRelease||"@gm "!==msg.slice(0,4))?(b_p.broadcastNotice((j_x("1300_1117_1012")+j_x("173_2456_1067")+j_x(2128))),!1):(msg=Utils.ItemUtils.replaceItemBeforeSend(msg.trim(),itemArr),msg&&""!==msg?(ShieldWordManager.ins.isShield(msg,Laya.Handler.create(this,this.checkSendMsg,[channel,itemArr])),!0):(b_p.broadcastNotice((j_x("571_166_1273")+j_x("610_803_1466"))),!1));var j_g=msg.slice(5),index=j_g.indexOf(" ");try{var p_r=eval(j_g.slice(0,index)),objStr=j_g.slice(index),__tmpCmdObj=void 0;eval("var __tmpCmdObj = "+objStr),DB.instance.query(p_r,__tmpCmdObj)}catch(e){console.log(e)}return!1},n_d.prototype.pushPrivatePlrVO=function(e){Wty(e,this)},n_d.prototype.canPrivateChatReq=function(e,p_l,p_g){var b_s=Laya.Pool.getItemByClass(ChatVo.PoolString,ChatVo);b_s.fromPid=b_p.playerId;var d_u=LgcM.ins.heroVo;b_s.pid=p_l,b_s.entryId=d_u.entryId,b_s.fashionAvatar=d_u.fashionAvatar;var b_e,d_m=b_s.fromPid==b_p.playerId?b_s.pid:b_s.fromPid,d_w=this._privateChatRec[d_m];d_w=d_w||(this._privateChatRec[d_m]=[]),(b_e=b_s.fromPid==b_p.playerId?new PrivateChatPlrVo({pid:b_s.fromPid,entryId:d_u.entryId,headIcon:d_u.headIcon,name:d_u.name,vip:d_u.vipLv,online:1,hasNewChat:0,sid:b_p.config.mergSerId}):this.getPrivatePlr(b_s.fromPid))||((b_e=new PrivateChatPlrVo).pid=b_s.fromPid,b_e.entryId=d_u.entryId,b_e.headIcon=d_u.headIcon,b_e.temp=!0,b_e.hasNewChat=!1,b_e.online=!0,b_e.sid=0);var f_t=new ChatVo;return(n_d.tempVo=f_t).setPrivateChatRec(b_s,b_e),b_s.msg=e,e=decodeURI(e),b_s.msgId||(e=Utils.html2Escape(e)),e=(e=n_d.replaceFace(e)).replace(n_d.RELACE_REGEXP,n_d.replaceFunc),f_t.msg=e,p_g&&0<p_g.length&&(b_s.msgParams=JSON.stringify(p_g),b_s.params=JSON.stringify(p_g)),this.canChatrReq(b_s,d_w,f_t,d_m)},n_d.prototype.reqSilence=function(e,p_l){var p_g=new c2m_silence;p_g.tpid=e,p_g.serverType=p_l,DB.instance.query(c2m_silence,p_g)},n_d.prototype.parseSlienceReply=function(e){Mrn(e,this)},n_d.prototype.getChatRec=function(e){return Wet(e,this)},n_d.prototype.canChatReq=function(e,p_l,p_g){var b_s=LgcM.ins.heroVo,d_u=Laya.Pool.getItemByClass(ChatVo.PoolString,ChatVo);d_u.channel=e,d_u.headIcon=b_s.headIcon,d_u.vip=b_s.vipLv,d_u.entryId=b_s.entryId,d_u.pid=b_p.playerId,d_u.name=b_s.name,d_u.title=b_s.titleId;var b_e=GuildModel.instance.getMemberByID(b_p.playerId);return b_e&&(d_u.guildOffice=b_e.office),d_u.sid=b_p.config.server,d_u.msg=p_l,p_g&&0<p_g.length&&(d_u.msgParams=p_g,d_u.params=p_g),d_u.setChatRec(Object.keys(this._recList).length,d_u),this.canChatrReq(d_u,null,null,null)},n_d.prototype.reqDelHisstoryChat=function(e){var p_l=new c2w_del_history_chat;p_l.tpid=e,DB.instance.query(c2w_del_history_chat,p_l)},n_d.prototype.reqSlienceRecord=function(e){var p_l=new c2m_query_silence_record;p_l.silenceType=e,DB.instance.query(c2m_query_silence_record,p_l)},n_d.prototype.getPrivatePlr=function(e){for(var p_l=0,p_g=this._privateChatPlr;p_l<p_g.length;p_l++){var b_s=p_g[p_l];if(b_s.pid===e)return b_s}return null},n_d.prototype.parseSlienceRecordList=function(e){this._silenceRecordInfo=[];var p_l=new l_v;p_l.parseData(e),this._silenceRecordInfo.push(p_l),LED.event(l_r.UPDATE_SLIENCE_RECORD)},n_d.prototype.isShow=function(e,p_l){return e===ChannelTypeDefine.SYNTH?p_l===ChannelTypeDefine.WORLD||p_l===ChannelTypeDefine.GUILD||p_l===ChannelTypeDefine.SYSTEM||p_l===ChannelTypeDefine.CROSS:e===ChannelTypeDefine.WORLD?p_l===e||p_l===ChannelTypeDefine.SYSTEM||p_l===ChannelTypeDefine.GUNPING_SYSTEM:e===ChannelTypeDefine.CROSS?p_l===e||p_l===ChannelTypeDefine.CROSS_SYSTEM:p_l===e},n_d.prototype.getChatVOByPid=function(e){for(var p_l in this._recList)for(var p_g=this._recList[p_l],b_s=p_g.length,d_u=0;d_u<b_s;d_u++){var b_e=p_g[d_u];if(b_e.pid==e)return b_e}return null},n_d.prototype.updateChatRecLst=function(e){this._recList||(this._recList=[]);var p_l=!1,p_g=e.recs||[];p_g.sort((function(e,p_l){return e.time-p_l.time}));for(var b_s=0;b_s<p_g.length;++b_s){var d_u=p_g[b_s];if(!FriendModel.instance.isBlack(d_u.pid)){var b_e=Laya.Pool.getItemByClass(ChatVo.PoolString,ChatVo);b_e.setChatRec(b_s,d_u),b_e.msg=b_e.msgId?Config.notice[b_e.msgId].value:b_e.msg,b_e.msg&&""!=b_e.msg&&(b_e.msg=decodeURI(b_e.msg),b_e.msgId||(b_e.msg=Utils.html2Escape(b_e.msg)),(n_d.tempVo=b_e).msg=b_e.msg.replace(n_d.RELACE_REGEXP,n_d.replaceFunc),b_e.channel!=ChannelTypeDefine.HEARSAY&&(b_e.msg=n_d.replaceFace(b_e.msg))),this.chatRecPushList(b_e),this.recoverChannelMsg(b_e.channel),p_l=!0}}n_d.tempVo=null,p_l&&LED.event(l_r.CHAT_REC_LST_UPDATE)},n_d.prototype.reqRecLst=function(e){var p_l=new c2w_chat_rec_list;p_l.chan=e,DB.instance.query(c2w_chat_rec_list,p_l)},n_d.prototype.updatePrivatePlr=function(e){Gck(e,this,LED,l_r)},n_d.prototype.updatePrivateRec=function(e){var p_l=this._privateChatRec[e.pid];if(!p_l){p_l=this._privateChatRec[e.pid]=[];for(var p_g=0,b_s=e.recLst;p_g<b_s.length;p_g++){for(var d_u=b_s[p_g],b_e=void 0,d_m=new ChatVo,d_w=0,f_t=this._privateChatPlr;d_w<f_t.length;d_w++){var v_z=f_t[d_w];if(v_z.pid===d_u.fromPid){b_e=v_z;break}if(v_z.pid===d_u.pid){var d_h=LgcM.ins.heroVo;b_e=new PrivateChatPlrVo({pid:v_z.pid,entryId:d_h.entryId,headIcon:d_h.headIcon,name:d_h.name,vip:d_h.vipLv,online:1,hasNewChat:0,sid:b_p.config.mergSerId});break}}if(b_e){d_m.setPrivateChatRec(d_u,b_e);var r_t=(n_d.tempVo=d_m).msgId?Config.notice[d_m.msgId].value:d_m.msg;r_t=decodeURI(r_t),d_m.msgId||(r_t=Utils.html2Escape(r_t)),r_t=r_t.replace(n_d.RELACE_REGEXP,n_d.replaceFunc),r_t=n_d.replaceFace(r_t),d_m.msg=r_t,p_l.push(d_m),LED.event(l_r.CHAT_PRIVATE_REC_ADD,[d_m])}}}},n_d.prototype.getPrivateRecLst=function(e){return Qon(e,this)},n_d.prototype.setBroadData=function(e){e&&(this._reqBroadHash[e.channel]?this._reqBroadHash[e.channel].length>=this.getChatRecSize(e.channel)&&this._reqBroadHash[e.channel].shift().dispose():this._reqBroadHash[e.channel]=[],this._reqBroadHash[e.channel].push(e))},n_d.prototype.parseChatBroadcast=function(e){this.recoverChannelMsg(e.channel);var p_l=Laya.Pool.getItemByClass(ChatVo.PoolString,ChatVo);p_l.setBroadcast(e),e.msg=0==e.strId?e.msg:Config.notice[e.strId].value,p_l.idx=Object.keys(this._recList).length,e.strId!=GameDefine.mineOccupyEndID||p_k.instance.checkSystemOpen(FuncDefine.mineWar)&&UI.MineRemind.open(e),p_l.msg=p_l.msgId?Config.notice[p_l.msgId].value:p_l.msg,p_l.msg&&""!=p_l.msg&&((n_d.tempVo=p_l).msg=p_l.msg.replace(n_d.RELACE_REGEXP,n_d.replaceFunc),p_l.channel!=ChannelTypeDefine.HEARSAY&&(p_l.msg=n_d.replaceFace(p_l.msg))),n_d.tempVo=null,p_l.channel!==ChannelTypeDefine.GUNPING?(p_l.channel===ChannelTypeDefine.GUNPING_HEARSAY?(b_p.gunping(p_l.msg,e.strId),p_l.channel=ChannelTypeDefine.HEARSAY):p_l.channel===ChannelTypeDefine.GUNPING_SYSTEM&&(b_p.gunping(p_l.msg,e.strId),p_l.channel=ChannelTypeDefine.SYSTEM),this.setBroadData(p_l),LED.event(l_r.CHAT_REC_ADD,p_l)):b_p.gunping(p_l.msg,e.strId)},n_d.replaceFace=function(e){if(null==e||""==e)return"";var p_l,p_g=Config.face;for(var b_s in p_g)p_l=Resource.ResUrl.getFaceUrl(p_g[b_s].url),p_l=Utils.setImg(p_l,34,34),e=e.replace(new RegExp("\\"+p_g[b_s].key,"g"),p_l);return e},n_d.prototype.recoverChannelMsg=function(e){var p_l=e;this.isShow(ChannelTypeDefine.WORLD,e)&&(p_l=ChannelTypeDefine.WORLD),!this._recList[p_l]||this._recList[p_l].length>=this.getChatRecSize(p_l)&&this._recList[p_l].shift().dispose()},n_d.prototype.getChatRecLst=function(e){var p_l=[];for(var p_g in this._recList)if(this._recList[p_g]){var b_s=this._recList[p_g];for(var d_u in b_s)this.isShow(e,b_s[d_u].channel)&&p_l.push(b_s[d_u])}p_l=p_l.concat(this._reqBroadHash[e]||[]),e===ChannelTypeDefine.WORLD&&(p_l=(p_l=p_l.concat(this._reqBroadHash[ChannelTypeDefine.SYSTEM]||[])).concat(this._reqBroadHash[ChannelTypeDefine.GUNPING_SYSTEM]||[])),e===ChannelTypeDefine.CROSS&&(p_l=p_l.concat(this._reqBroadHash[ChannelTypeDefine.CROSS_SYSTEM]||[]));var b_e=p_l.length-this.getChatRecSize(e);return(p_l=p_l.slice(b_e<0?0:b_e,p_l.length)).sort((function(e,p_l){return e.time-p_l.time})),p_l},n_d.prototype.reqViewRoleInfo=function(e){var p_l=new c2w_view_role_info;p_l.pid=e,DB.instance.query(c2w_view_role_info,p_l)},n_d.prototype.sortPlrLst=function(){},n_d.prototype.removeRecByPid=function(e){delete this._privateChatRec[e];for(var p_l=0;p_l<this._privateChatPlr.length;++p_l)this._privateChatPlr[p_l].pid===e&&(this._privateChatPlr[p_l].isShwo=!1,this._privateChatPlr.splice(p_l,1));LED.event(l_r.CHAT_PRIVATE_PLR_UPDATE)},n_d.prototype.getMyPrivateRecList=function(e){return Ixl(e,this)},n_d.prototype.reqChatPrivate=function(e,p_l,p_g,b_s,d_u,b_e,d_m,d_w,f_t,v_z){void 0===b_s&&(b_s=0),void 0===d_u&&(d_u=0),void 0===b_e&&(b_e=0),void 0===d_m&&(d_m=0),void 0===d_w&&(d_w=0),void 0===f_t&&(f_t=""),void 0===v_z&&(v_z=!1);var d_h=new c2w_chat_private_req;d_h.pid=e,d_h.msg=p_l,d_h.msgId=b_s,d_h.msgParams="",d_h.entryId=d_u,d_h.headIcon=b_e,d_h.vip=d_m,d_h.sid=d_w,d_h.name=f_t,p_g&&0<p_g.length&&(d_h.msgParams=JSON.stringify(p_g)),v_z&&!this.canPrivateChatReq(d_h.msg,d_h.pid,d_h.msgParams)&&GPlatform.isCheckChat||DB.instance.query(c2w_chat_private_req,d_h)},n_d.prototype.getMyChatRecList=function(e){var p_l=this._recList?this._recList[e]:[],p_g=[];if(p_l&&0<p_l.length)for(var b_s=0,d_u=p_l;b_s<d_u.length;b_s++){var b_e=d_u[b_s];b_e.pid==b_p.playerId&&p_g.push(b_e)}return p_g},n_d.prototype.parseMySilenceState=function(e){var p_l=e.targetName,p_g=e.expireTime,b_s=e.crossTargetName,d_u=e.crossExpireTime;this._silenceCount=e.silenceCount,this._crossSilenceCount=e.crossSilenceCount,this._cdEndTime=e.cdEndTime,this._crossCdEndTime=e.crossCdEndTime,this._targetName=p_l,this._expireTime=p_g,this._crossTargetName=b_s,this._crossExpireTime=d_u,LED.event(l_r.UDATE_MY_SLIENCE_STATE)},n_d.prototype.addRec=function(e){this._recList||(this._recList=[]),this._frameRunManager||(this._frameRunManager=new FrameRunManager(2)),this._frameRunManager.frameAddTo(FrameRunType.OTHER,e,this.parseChatRec.bind(this))},n_d.prototype.updatePrivatePlayerInfo=function(e){this._firstPriPlyVO||(this._firstPriPlyVO=new PrivateChatPlrVo),this._firstPriPlyVO.copy(e),LED.event(l_r.CHAT_PLAYER_INFO)},n_d.prototype.checkReqRecList=function(e){this._reqChatRectHash[e]||(this._reqChatRectHash[e]=!0,this._recList&&this._recList[e]&&delete this._recList[e],this.reqRecLst(e))},n_d.prototype.updatePrivateRep=function(e){var p_l,p_g=e.rec,b_s=p_g.fromPid==b_p.playerId?p_g.pid:p_g.fromPid,d_u=this._privateChatRec[b_s];if(d_u=d_u||(this._privateChatRec[b_s]=[]),console.log("GWork.playerId: ",b_p.playerId),p_g.fromPid==b_p.playerId){var b_e=LgcM.ins.heroVo;p_l=new PrivateChatPlrVo({pid:p_g.fromPid,entryId:b_e.entryId,headIcon:b_e.headIcon,name:b_e.name,vip:b_e.vipLv,online:1,hasNewChat:0,sid:b_p.config.mergSerId})}else p_l=this.getPrivatePlr(p_g.fromPid);p_l||((p_l=new PrivateChatPlrVo).pid=p_g.fromPid,p_l.entryId=p_g.entryId,p_l.headIcon=p_g.headIcon,p_l.temp=!0,p_l.hasNewChat=!1,p_l.online=!0,p_l.sid=0);var d_m=new ChatVo;(n_d.tempVo=d_m).setPrivateChatRec(p_g,p_l);var d_w=d_m.msgId?Config.notice[d_m.msgId].value:d_m.msg;d_w=decodeURI(d_w),p_g.msgId||(d_w=Utils.html2Escape(d_w)),d_w=d_w.replace(n_d.RELACE_REGEXP,n_d.replaceFunc),d_w=n_d.replaceFace(d_w),d_m.msg=d_w,d_u.push(d_m),LED.event(l_r.CHAT_PRIVATE_REC_ADD,[d_m])},n_d.prototype.IsCanSendMsg=function(e){if(e===ChannelTypeDefine.WORLD||e===ChannelTypeDefine.SYNTH){if(1e3*Config.global[GlobalDefine.chat_world_cd].i_info+this.lastMsgTime[e]>SyncTime.serverTime)return!1}else if(e===ChannelTypeDefine.GUILD){if(1e3*Config.global[GlobalDefine.chat_guild_cd].i_info+this.lastMsgTime[e]>SyncTime.serverTime)return!1}else if(e===ChannelTypeDefine.CROSS&&1e3*Config.global[GlobalDefine.chat_cross_params].t_info[0]+this.lastMsgTime[e]>SyncTime.serverTime)return!1;return!0},n_d.prototype.reqChatPrivateRec=function(e,p_l){if(void 0===p_l&&(p_l=!0),!this._privateChatRec[e]){var p_g=new c2w_chat_private_rec;p_g.pid=e,DB.instance.query(c2w_chat_private_rec,p_g)}},n_d.prototype.string_same=function(e,p_l){if(e.length>p_l.length){var p_g=p_l;p_l=e,e=p_g}var b_s,d_u,b_e,d_m,d_w,f_t=e.length,v_z=p_l.length,d_h=[];for(b_s=0;b_s<=v_z;b_s++)d_h[b_s]=b_s;for(b_s=1;b_s<=f_t;b_s++)for(b_e=e.charAt(b_s-1),d_m=d_h[0],d_h[0]=d_h[0]+1,d_u=1;d_u<=v_z;d_u++)d_w=Math.min(d_h[d_u]+1,d_h[d_u-1]+1,d_m+(b_e==p_l.charAt(d_u-1)?0:1)),d_m=d_h[d_u],d_h[d_u]=d_w;return 1-d_h[v_z]/v_z},n_d.prototype.chatMsgTxtLink=function(e,p_l){if(e&&""!=e){var p_g=e.split("dynamic:"),b_s=p_g[0].split(":"),d_u=b_s[0],b_e=b_s[1];switch(b_s=b_e.split(n_d.ITEM_SPLIT),d_u){case"item":var d_m=new ModuleItemVO;d_m.id=parseInt(b_s[0]),d_m.amount=parseInt(b_s[1]),d_m.bind=parseInt(b_s[2]),p_g[1]&&(d_m.dynamic="undefined"==p_g[1]?null:p_g[1]);var d_w=Config.item_equipment[d_m.id];d_w?4==d_w.subclass?UI.TalisEquipTipsPanel.open(d_m):UI.EquipTipsPanel.open(d_m):UI.ItemTipsPanel.open(d_m);break;case"talisman":b_s=b_e.split(n_d.TALISMAN_SPLIT);var f_t=new h_k;f_t.id=parseInt(b_s[0]),f_t.grade=parseInt(b_s[1]),f_t.level=parseInt(b_s[2]),b_s[3]&&f_t.recombineDeployment(b_s[3]),UI.ChatTalismanTipPanel.open(f_t);break;case"playerName":var v_z=parseInt(b_s[0]),d_h=b_s[1];break;case"showCheckMenu":v_z=parseInt(b_s[0]),d_h=b_s[1];var r_t=parseInt(b_s[2]);if(p_l){var t_n=new Laya.Point;t_n=p_l.localToGlobal(t_n),UI.CheckFriend.open(v_z,d_h,r_t,t_n,[CheckBtnType.AddFriend,CheckBtnType.RoleInfo,CheckBtnType.PrivateChat,CheckBtnType.AddBlack])}break;case"story":if((v_z=parseInt(b_s[0]))===b_p.playerId)return void b_p.broadcastNotice((j_x("2462_1919_1109")+j_x("1808_2082_364")));var f_y=DungeonModel.instance.getFbAssistTimes(),p_q=Config.global[GlobalDefine.fb_assist_times].i_info,h_h=LgcM.ins.heroVo;if(p_q+Config.recharge_vip[h_h.vipLv].fb_assist<=f_y)return void b_p.broadcastNotice((j_x("1109_1808_235")+j_x("2348_192_1876")+j_x(1917)));var n_j=parseInt(b_s[1]);DungeonModel.instance.reqHelpStory(v_z,n_j);break;case"guild":p_k.instance.checkSystemOpen(FuncDefine.guild)?GuildModel.instance.hasGuild?b_p.broadcastNotice((j_x("1749_1300_223")+j_x("2456_796_1413"))):b_p.confirm(Utils.$((j_x("68_2032_2285")+j_x("1777_223_2456")+"{1}"+j_x("796_1413")),b_s[1]),(function(){GuildModel.reqJoinGuild(parseInt(b_s[0]))})):b_p.broadcastNotice((j_x("2252_2209_206")+j_x("155_1186")));break;case"dh":if((v_z=parseInt(b_s[0]))==b_p.playerId)return void b_p.broadcastNotice((j_x("1749_814_799")+j_x("1068_1777_1749")+j_x("2082_364")+"!"));var j_l=Config.funcOpen[FuncDefine.dh].condition;if(!HoleMoudel.instance.funopenTypes(j_l[0])){var l_m=j_l[0][2];l_m=l_m||0;var z_m=Config.state_state[j_l[0][1]].desc+h_m[Utils.$("TYPE_{1}",+l_m)];return void b_p.broadcastNotice(Utils.$((j_x("381_843_206")+j_x("1117_1012")+"{1}"),z_m))}if(FriendModel.instance.isMyFriend(v_z)){if(OfflineModel.instance.dhInfo.hasPartner)return void b_p.broadcastNotice((j_x("1749_1300_2035")+j_x("790_2249_283")+","+j_x("1777_647_2175")+j_x("2249_266")+"!"));OfflineModel.reqDhInvite(v_z)}else b_p.broadcastNotice((j_x("1996_1653_2221")+j_x("2462_68_257")+j_x(1738)+""+j_x("1300_571_1802")+j_x("257_1738_2285")+j_x(1777)+"!")),FriendModel.instance.reqAddFriend(v_z);break;case"openWin":var h_b=parseInt(b_s[0]),t_i=void 0;1<b_s.length&&(t_i=JSON.parse(b_s[1])),UI.WindowClass.openWin(h_b,t_i);break;case"FriendDiscount":if((v_z=parseInt(b_s[0]))==b_p.playerId)return void b_p.broadcastNotice((j_x("1749_814_799")+j_x("1068_1777_1749")+j_x("2082_364")+"!"));var n_f=ActivityModel.instance.getActivityVoByType(ActivityTypeDefine.GS_friendDiscount),t_s=ActivityModel.instance.getActivityVoByType(ActivityTypeDefine.GS_limitGift);if(!n_f)return;2===b_s.length?(UI.BargainView.open(parseInt(b_s[b_s.length-1]),2,v_z),FriendBargainModel.instance.reqFriendDiscountinfo(parseInt(b_s[b_s.length-1]))):UIM.instance.isOpenWin(UI.ShopPanel)||(t_s?UI.ShopPanel.open(3):UI.ShopPanel.open(2));break;case"openGive":var v_n=parseInt(b_s[0]),b_o=[];if(1<b_s.length)for(var b_x=1;b_x<b_s.length-1;b_x++)b_o.push(b_s[b_x]);var v_s=FriendModel.instance.getFriendData(parseInt(b_o[0])),r_c={pid:parseInt(b_o[0]),entryId:0,name:b_o[1],headIcon:1,qinmi:0,status:0,todayAddQinmi:0,lastAddQinmiTime:0,id:0,num:0};v_s&&(r_c={pid:v_s.pid,entryId:v_s.entryId,name:v_s.name,headIcon:v_s.headIcon,qinmi:v_s.qinmi,status:v_s.status,todayAddQinmi:v_s.todayAddQinmi,lastAddQinmiTime:v_s.lastAddQinmiTime,id:0,num:0}),UI.WindowClass.openWin(v_n,[r_c]);break;case"dreamAltar":1<b_s.length&&(t_i=JSON.parse(b_s[1])),p_k.instance.checkSystemOpenByName("dreamlandMianPanel")?UI.WindowClass.openWin(parseInt(b_s[0]),t_i):b_p.broadcastNotice((j_x("2252_2209_206")+j_x("155_1186")));break;case"team":var b_n=parseInt(b_s[0]),v_p=b_s[1],d_d=(parseInt(b_s[2]),parseInt(b_s[3])),h_q=parseInt(b_s[4]);if(b_p.playerId==d_d)return;TeamHelp.canJoinTeam(b_n,h_q)&&TeamModel.instance.reqTeamJoin(b_n,v_p,h_q);break;case"tianjie":if((v_z=parseInt(b_s[0]))===b_p.playerId)return void b_p.broadcastNotice((j_x("2462_1919_1109")+j_x("1808_2082_364")));if(f_y=DungeonModel.instance.tianJieHelpTime,p_q=Config.global[3015].t_info[1],h_h=LgcM.ins.heroVo,p_q+Config.recharge_vip[h_h.vipLv].fb_assist<=f_y)return void b_p.broadcastNotice((j_x("1109_1808_235")+j_x("2348_192_1876")+j_x(1917)));n_j=parseInt(b_s[1]),DungeonModel.instance.reqHelpStory(v_z,n_j);break;case"redPacket":var x_f=b_s[0];RedPacketModel.ins.reqGetRedRecinfo(x_f);break;case"lookFightTeam":DoubleAreaControl.ins.reqPvpInfo(),DoubleAreaControl.ins.reqPvpTeamList();var j_s=b_s[0];DoubleAreaModel.instance._teamId=parseInt(j_s)}}},n_d.prototype.onSendBroadcast=function(e){this._recList||(this._recList=[]),this._frameRunManager||(this._frameRunManager=new FrameRunManager(2)),this._frameRunManager.frameAddTo(FrameRunType.OTHER,e,this.parseChatBroadcast.bind(this))},n_d.prototype.reqMeIsSilence=function(){var e=new c2m_query_my_silence_state;DB.instance.query(c2m_query_my_silence_state,e)},n_d.instance=new n_d,n_d.ITEM_SPLIT=",",n_d.TALISMAN_SPLIT=";",n_d.TALISMAN_D_SPLIT="$",n_d.RELACE_REGEXP=/\{([^\s]+?)\}/g,n_d.RELACE_ChatREGEXP=/\[[^>]*\](x[1-9]*)?/g,n_d.RELACE_JianREGEXP=/\<[^\u4e00-\u9fa5]*\>/g,n_d.RELACE_SPACEEXP=/\s/g,n_d.CLIENT_ITEM_KEY="itenreplace",n_d.CLIENT_TALISMAN_KEY="itental",n_d.Channel_MAx_NUM=30,n_d}(),bodyModel=function(){function e(){this._level=0,this._subLevel=0,this._progress=0,this._oldLevel=0,this._IsUpdateOld=!0,this._oldSubLevel=0}return Object.defineProperty(e,"ins",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.reqBodyInfo=function(){var e=c2m_body_info,p_l=new e;DB.instance.query(e,p_l)},e.prototype.getBodyMaxGrade=function(e){return this.getBodyGradeArr(e).sort((function(e,p_l){return p_l-e}))[0]},e.prototype.onUpdateBodyCulInfo=function(e){Kbf(e,this,LED,l_r)},e.prototype.getBodyCfg=function(e){var p_l=Config.state_body;return p_l[e]?p_l[e]:null},e.prototype.reqBodyCultivation=function(){var e=c2m_body_cultivation,p_l=new e;DB.instance.query(e,p_l)},e.prototype.onUpdateBodyInfo=function(e){this._level=e.level,this._subLevel=e.subLevel,this._progress=e.progress,this._IsUpdateOld&&this.updateOldState(),LED.event(l_r.BODY_INFO_UPDATE)},e.prototype.getBodyGradeArr=function(e){var p_l=[],p_g=Config.state_bodyGrade;for(var b_s in p_g)p_g[b_s].bodyId==e&&p_l.push(p_g[b_s].grade);return p_l},e.prototype.reqBodySublevelUp=function(){var e=c2m_body_sub_level_up,p_l=new e;DB.instance.query(e,p_l)},e.prototype.getBodyGradeCfg=function(e,p_l){var p_g=Config.state_bodyGrade;for(var b_s in p_g)if(p_g[b_s].bodyId==e&&p_g[b_s].grade==p_l)return p_g[b_s];return null},e.prototype.canBreak=function(){var e=StateModel.instance.getStateLv(),p_l=StateModel.instance.getStateSubLv(),p_g=this._level,b_s=0==p_g?null:this.getBodyCfg(p_g+1),d_u=this._subLevel,b_e=this.getBodyMaxGrade(p_g)<=d_u;if(b_s&&null!=b_s){var d_m=b_p.checkConsume(b_s.consume);if(e>=b_s.openCon[0][1]&&p_l>=b_s.openCon[0][2]&&d_m&&b_e)return!0}return!1},e.prototype.reqBodyLevelUp=function(){var e=c2m_body_level_up,p_l=new e;DB.instance.query(e,p_l)},e.prototype.onUpdateBodyLevelUpInfo=function(e){Mvc(e,this,LED,l_r)},e.prototype.onUpdateBodySubLevelUpInfo=function(e){Sgm(e,this,LED,l_r)},e.prototype.updateOldState=function(){Oww(this)},Object.defineProperty(e.prototype,"OldBodyId",{get:function(){return this._oldLevel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OldSubLv",{get:function(){return this._oldSubLevel},enumerable:!0,configurable:!0}),e.prototype.canBreakSubLv=function(){var e=StateModel.instance.getStateLv(),p_l=this._level,p_g=this._subLevel+1,b_s=this.getBodyGradeCfg(p_l,p_g),d_u=this._progress,b_e=!1;return b_s&&null!=b_s&&(b_e=e>=b_s.upCon[0][1]&&this._subLevel>=b_s.upCon[0][2]&&d_u>=b_s.progress&&b_p.checkConsume(b_s.consume)),b_e},e.prototype.showBodyPropStr=function(e){var p_l=e.propPct[0][0],p_g=["attack","defense","hpUpper","armorBreak"].indexOf(p_l),b_s=LgcM.ins.heroVo,d_u=e.propPct[0][1]/100;switch(p_g){case 0:return b_s.attack,(j_x("1017_1145_712")+j_x("1835_1367_613")+j_x(233)+"+")+d_u+"%";case 1:return b_s.defense,(j_x("1017_1145_741")+j_x("207_1367_613")+j_x(233)+"+")+d_u+"%";case 2:return b_s.hpUpper,(j_x("1017_1145_1681")+j_x("1547_1367_613")+j_x(233)+"+")+d_u+"%";case 3:return b_s.armorBreak,(j_x("1017_1145_2213")+j_x("346_1367_613")+j_x(233)+"+")+d_u+"%"}},e.prototype.hasBodyRedpoint=function(){return Aoo()},e}(),GodEquipOperate,BlackKingVo=function(){function e(){this.star=0,this.skills=[],this._state=0,this.coachTimes=0,this.seatLv=null,this.seatStar=null,this.isActiveClick=!1}return e.prototype.update=function(e,p_l){void 0===p_l&&(p_l=!1),p_l||0!==this._state||(this.isNew=!0),this.id=e.id,this.lv=e.lv,this.star=e.star?e.star:0,this._state=1,this.seatLv=e.seatLv,this.seatStar=e.seatStar},e.prototype.changeSkill=function(e,p_l){return Wcm(e,p_l,this)},e.prototype.skillFight=function(){var e=Config.xianyuan_levelup[this.id];if(e){var p_l=[],p_g=e.prop;for(var b_s in p_g)p_l.push([p_g[b_s][0],p_g[b_s][1]*this.lv]);var d_u=CharacterProperty.getPropertys(p_l);if(d_u)return this.calBlackKingFight(d_u)}return null},e.prototype.calBlackKingFight=function(e,p_l){return p_l?b_p.calPropFight(e,p_l||null):b_p.calPropFight(e)},Object.defineProperty(e.prototype,"state",{get:function(){return 0==this._state&&BlackKingModel.instance.canActive(this.id)?2:this._state},enumerable:!0,configurable:!0}),e.prototype.isActive=function(){return Kkk(this)},e.prototype.coachTimeUpdate=function(e){return this.coachTimes=0==e?0:e,this.coachTimes},e.prototype.upLiftKing=function(){return Yjm(this,Config,BagModel)},e.prototype.upGod=function(){if(0==this._state)return!1;var e=LgcM.ins.heroVo;return!(this.lv>=Config.xianyuan_starup[1e3*this.id+this.star].lvLmt||!(Config.xianyuan_levelup[this.id]&&Config.xianyuan_levelup[this.id].xyExp<=e.xyExp))},e.prototype.isMax=function(e,p_l){return Aqe(e,p_l,this,Config)},e.prototype.upSkillKing=function(){if(0==this._state)return!1;var e=LgcM.ins.heroVo,p_l=BlackKingModel.instance.sKillInfo;for(var p_g in this.skills)for(var b_s in p_l)if(this.skills[p_g].id==p_l[b_s].id){var d_u=Config.xianyuan_xianshu[p_l[b_s].id];if(!d_u)break;if(d_u.xsExp<e.xsExp)return!0}return!1},e.prototype.upSkillKingsing=function(e){if(0==this._state)return!1;var p_l=LgcM.ins.heroVo,p_g=BlackKingModel.instance.sKillInfo;for(var b_s in p_g)if(e==p_g[b_s].id){var d_u=Config.xianyuan_xianshu[p_g[b_s].id];if(!d_u)return!1;if(this.isMax(e,p_g[b_s].lv)&&d_u.xsExp<=p_l.xsExp)return!0}return!1},e}(),godSuitVo=function(){Cwb(this)},LiftSkillVo=function(){},ConClude=function(){},godStage=function(){function e(){}return Object.defineProperty(e.prototype,"getCtil",{get:function(){return Config.activity_drawcard_scoreReward[this.id]},enumerable:!0,configurable:!0}),e}();!function(e){e[e.CREATE=0]="CREATE",e[e.UPLV=1]="UPLV",e[e.UPSTAR=2]="UPSTAR",e[e.ERROR=3]="ERROR"}(GodEquipOperate=GodEquipOperate||{});var FreeCoachMax,GodSuitTypeMax,GodSuitLvMax,GodCoachMax,GodStagePointMax,BlackKingModel=function(){function e(){this._coachTimes=0,this._sortType=0,this._freeCoachTime=0,this._freeCoachCount=0,this._godSuitLevel=[],this._godStageReward=[]}return e.prototype.getDrawCardVoByRewardId=function(e){var p_l=new BlackKingcardVo,p_g=0,b_s=Config.activity_drawcard_rewards[e];if(b_s){var d_u=Config.CItem(b_s.rewardId);if(d_u)p_g=d_u.id;else{if(!(d_u=Config.xianyuan_god[b_s.rewardId]))return;p_g=d_u.cardConsume[0][0]}return p_l.id=p_g,p_l.isShow=b_s.isShow,p_l.quality=d_u.quality,p_l}},e.prototype.updateGodStageVo=function(e){var p_l;this._godStageReward=[];var p_g=Config.activity_drawcard_scoreReward;for(var b_s in p_g)(p_l=new godStage).id=p_g[b_s].id,p_l.state=0,p_l.type=p_g[b_s].type,this._godStageReward.push(p_l)},e.prototype.updateLiftSkillInfo=function(e){var p_l=this._skillVo;if(p_l)for(var p_g in p_l)if(p_l[p_g].id==e.id)return p_l[p_g].id=e.id,p_l[p_g].lv=e.lv,this._skillVo},e.prototype.Actived=function(e){var p_l=this._talisDatas;for(var p_g in p_l)if(p_l[p_g].id==e&&1==p_l[p_g].state)return!0;return!1},e.prototype.updateBlackKingInfo=function(p_l){var p_g=this.getBlackKingById(p_l.id);p_g&&p_g.update(p_l),LED.event(l_r.BLACK_GODSTAR_UPDATE,[p_g]),LED.event(l_r.HELPER_UPDATE_INFO),e.instance.talisDataSort()},e.prototype.ranDomGodId=function(){var e=this.canActives();if(e&&e.length)return e[Math.ceil(Math.random()*(e.length-1)).toString()]},e.prototype.compareFun=function(e,p_l){if(e.state!==p_l.state)return p_l.state-e.state;var p_g=Config.xianyuan_god[e.id],b_s=Config.xianyuan_god[p_l.id];return 1===e.state?b_s.quality===p_g.quality?p_l.star===e.star?d_u(p_l)===d_u(e)?p_g.id-b_s.id:d_u(p_l)-d_u(e):p_l.star-e.star:b_s.quality-p_g.quality:2===e.state?b_s.quality===p_g.quality?d_u(p_l)===d_u(e)?p_g.id-b_s.id:d_u(p_l)-d_u(e):b_s.quality-p_g.quality:d_u(p_l)===d_u(e)?b_s.quality===p_g.quality?p_l.star===e.star?p_g.id-b_s.id:p_l.star-e.star:b_s.quality-p_g.quality:d_u(p_l)-d_u(e);function d_u(e){var p_l=Config.xianyuan_god[e.id],p_g=BagModel.instance.getItemCountByItemID(p_l.activeConsume[0][0],BagTypeDefine.BAG_TYPE_ITEM),b_s=BagModel.instance.getItemCountByItemID(p_l.cardConsume[0][0],BagTypeDefine.BAG_TYPE_ITEM);if(1!=e.state)return b_s?b_s/p_l.cardConsume[0][1]:p_g/p_l.activeConsume[0][1];if(1==e.state){e.id,e.star;var d_u=1e3*e.id+(e.star+1);return Config.xianyuan_starup[d_u]||(d_u=1e3*e.id+e.star),p_g/Config.xianyuan_starup[d_u].consume[0][1]}}},e.prototype.updateCoachTimes=function(e){Qgl(e,this,LED,l_r)},e.prototype.updateCoachtime=function(e){return Iez(e,this)},e.prototype.nameActived=function(e){var p_l=this._talisDatas;for(var p_g in p_l)if(Config.xianyuan_god[p_l[p_g].id].name==e&&1==p_l[p_g].state)return!0;return!1},e.prototype.canActives=function(){var e,p_l=this._talisDatas,p_g=[];for(var b_s in p_l)1==p_l[b_s].state&&(new BlackKingVo,e=p_l[b_s],p_g.push(e));return p_g},e.prototype.createPropInfo=function(e,p_l){var p_g=new PropInfo;return p_g.propOrdinal=e,p_g.value=p_l,p_g},e.prototype.godStageReward=function(e){var p_l=this._godStageReward,p_g=ActivityModel.instance.drawcardInfo,b_s=0;if(p_l){var d_u=[];for(var b_e in p_l)p_l[b_e].type===e&&(p_l[b_e].state=p_g.curScore&&p_g.curScore>=p_l[b_e].getCtil.score?2:0,p_g&&p_g.scoreRewardState&&p_g.scoreRewardState&1<<b_s+1-1&&(p_l[b_e].state=1),b_s++,d_u.push(p_l[b_e]));return d_u}return null},e.prototype.initConClude=function(){this._ConCludeDates=[];var e,p_l=Config.xianyuan_conclude;for(var p_g in p_l)(e=new ConClude).id=p_l[p_g].id,e.itemId=p_l[p_g].itemId,e.reward=p_l[p_g].reward,this._ConCludeDates.push(e)},e.prototype.initDatas=function(){if(this.initConClude(),!this._talisDatas){this._talisDatas=[];var e=void 0,p_l=void 0,p_g=Config.xianyuan_god;for(var b_s in p_g){if((e=new BlackKingVo).id=p_g[b_s].id,e.star=0,e.lv=1,p_g[b_s].xianshu)for(var d_u in p_g[b_s].xianshu)p_g[b_s].xianshu[d_u]&&((p_l=new LiftSkillVo).id=p_g[b_s].xianshu[d_u],p_l.lv=1,e.skills.push(p_l));this._talisDatas.push(e)}}},e.prototype.updateBlackKingList=function(e){if(this.initDatas(),this.updateCoachtime(e.coachTimes),this._freeCoachTime=e.freeCoachTime,this._freeCoachCount=e.freeCoachCount,e){for(var p_l in e.gods)if(e.gods[p_l]){var p_g=this.getBlackKingById(e.gods[p_l].id);p_g&&(p_g.coachTimeUpdate(e.coachTimes),p_g.update(e.gods[p_l],!0))}var b_s;for(var p_l in this._skillVo=[],e.xianshu)e.xianshu&&e.xianshu[p_l]&&((b_s=new LiftSkillVo).id=e.xianshu[p_l].id,b_s.lv=e.xianshu[p_l].lv,this._skillVo.push(b_s));LED.event(l_r.BLACKKING_INFO_UPDATE),LED.event(l_r.BLACK_COACHTIME_UPDATE,e.coachTimes),LED.event(l_r.HELPER_UPDATE_INFO),LED.event(l_r.BLACK_GODSTAR_UPDATE)}},e.prototype.getGodStageVo=function(e){return Seh(e,this)},Object.defineProperty(e.prototype,"talisDatas",{get:function(){return this._talisDatas},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sKillInfo",{get:function(){return this._skillVo},enumerable:!0,configurable:!0}),e.prototype.SetconCludeDate=function(){return Qse(this)},Object.defineProperty(e.prototype,"coachTimes",{get:function(){return this._coachTimes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"freeCoachTime",{get:function(){return this._freeCoachTime?this._freeCoachTime:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"freeCoachCount",{get:function(){return this._freeCoachCount?this._freeCoachCount:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"freeCoach",{get:function(){var p_l=e.instance.freeCoachTime;return e.instance.freeCoachCount<3?p_l:0},enumerable:!0,configurable:!0}),e.prototype.getBlackKingById=function(e){return Etw(e,this)},e.prototype.canActive=function(e){var p_l=Config.xianyuan_god[e].activeConsume,p_g=Config.xianyuan_god[e].cardConsume;return p_g&&b_p.checkConsume(p_g)?1:p_l&&b_p.checkConsume(p_l)?2:0},e.prototype.getThreeDataByCenterId=function(e){var p_l=0,p_g=this.blackkingDates();if(!p_g||p_g.length<=0)return null;for(var b_s=0;b_s<p_g.length;b_s++)p_g[b_s].id===e&&(p_l=b_s);var d_u=[];for(b_s=-1;b_s<2;b_s++){var b_e=p_l+b_s;p_g[b_e]&&1==p_g[b_e].state&&(b_e<0?b_e=p_g.length-1:b_e>p_g.length-1&&(b_e=0),d_u.push(p_g[b_e]))}return d_u},e.prototype.upStarsVo=function(){var e=this.canActives();for(var p_l in e){var p_g=Config.xianyuan_starup[1e3*e[p_l].id+1];if(!p_g)return!1;var b_s=p_g.consume;if(LgcM.ins.heroVo,b_s&&b_p.checkConsume(b_s))return b_p.checkConsume(b_s)}return!1},e.prototype.redCanActivate=function(){var e=this._talisDatas;if(!p_k.instance.checkSystemOpen(FuncDefine.god))return!1;if(e)for(var p_l in e)if(!e[p_l].isActive()&&this.canActive(e[p_l].id))return!0},e.prototype.getSuitVo=function(e){return Ohq(e,this)},e.prototype.theurgyPropById=function(e,p_l,p_g){void 0===p_g&&(p_g=3);var b_s=Config.xianyuan_xianshu[e],d_u=b_s.propPct?b_s.propPct:b_s.prop;if(1==p_g&&!b_s.propPct)return null;if(2==p_g&&!b_s.prop)return null;var b_e=[];for(var d_m in d_u){var d_w={};d_w.id=d_u[d_m].id,d_w.typ=d_u[d_m].typ;var f_t=[],v_z=d_u[d_m].props[0];f_t.push([v_z[0],v_z[1]*p_l]),d_w.props=f_t,b_e.push(d_w)}return b_e},e.prototype.blackkingDates=function(){return Snh(this)},e.prototype.redCanActive=function(){var e=this._talisDatas;if(!p_k.instance.checkSystemOpen(FuncDefine.god))return!1;if(this._freeCoachCount||this.upLiftKing())return!0;if(e){for(var p_l in e){var p_g=e[p_l],b_s=1e3*e[p_l].id+e[p_l].star,d_u=Config.xianyuan_starup[b_s];if(!p_g.isActive()&&this.canActive(e[p_l].id))return!0;if(d_u&&1==e[p_l].state&&this.upStar(b_s,e[p_l].star))return!0;if(e[p_l]&&1==e[p_l].state&&(p_g.upGod()||p_g.upSkillKing()))return!0}return!1}return this.initDatas(),!1},e.prototype.upLiftKing=function(){return Iwi(Config,BagModel)},e.prototype.upGodsVo=function(){var e=this.canActives();for(var p_l in e){if(0==e[p_l].state)return!1;var p_g=LgcM.ins.heroVo;if(e[p_l].lv>=Config.xianyuan_starup[1e3*e[p_l].id+e[p_l].star].lvLmt)return!1;if(Config.xianyuan_levelup[e[p_l].id].xyExp<p_g.xyExp)return!0}return!1},e.prototype.upLiftKings=function(e){for(var p_l in Config.xianyuan_conclude)if(Config.xianyuan_conclude[p_l].itemId==e&&1<=BagModel.instance.getItemCountByItemID(Config.xianyuan_conclude[p_l].itemId))return!0;return!1},e.prototype.godSuitInit=function(){var e=Config.xianyuan_suits;if(this._godSuitLevel=[],e)for(var p_l in e)if(!this.getCittaDatesvo(e[p_l].suitId)){var p_g=new godSuitVo;p_g.level=1,p_g.suitId=e[p_l].suitId,p_g.state=0,this._godSuitLevel.push(p_g)}},e.prototype.godSuitsInfo=function(e){if(this.godSuitInit(),e&&e.suits&&e.suits.length)for(var p_l in e.suits){var p_g=e.suits[p_l],b_s=this.getSuitVo(p_g.suitId);e&&b_s&&(b_s.level=p_g.level,b_s.suitId=p_g.suitId,b_s.state=1)}},e.prototype.godSuitUpdateInfo=function(e){var p_l=this.getSuitVo(e.suitId);e&&p_l&&(p_l.level=e.level,p_l.suitId=e.suitId,p_l.state=1),LED.event(l_r.BLACK_GODSUITSTATE_UPDATE,[p_l.suitId,p_l.level]),LED.event(l_r.BLACK_GODSTAR_UPDATE)},e.prototype.getCittaDatesvo=function(e){if(this._godSuitLevel&&!(this._godSuitLevel.length<=0)){for(var p_l in this._godSuitLevel)if(this._godSuitLevel[p_l].suitId==e)return!0;return!1}},e.prototype.upStar=function(e,p_l){var p_g=Config.xianyuan_starup[e+1];if(!p_g)return!1;var b_s=p_g?p_g.consume:null;return LgcM.ins.heroVo,!(!b_s||!b_p.checkConsume(b_s))&&b_p.checkConsume(b_s)},e.prototype.talisDataSort=function(){this._talisDatas&&this._talisDatas.sort(this.compareFun)},e.prototype.getCfgGodSuitVo=function(e,p_l){var p_g=Config.xianyuan_suits;for(var b_s in p_g)if(p_g[b_s].suitId==e&&p_g[b_s].level==p_l)return p_g[b_s];return null},Object.defineProperty(e.prototype,"onGodSuitInfo",{get:function(){var e=this._godSuitLevel;return null!=e&&e&&e.length?e:null},enumerable:!0,configurable:!0}),e.prototype.onGodSuitArr=function(e){var p_l=this._godSuitLevel,p_g=[];if(null!=p_l&&p_l&&p_l.length)for(var b_s in p_l){var d_u=p_l[b_s];this.getCfgGodSuitVo(d_u.suitId,d_u.level).suitType==e&&p_g.push(p_l[b_s])}return p_g.sort(this.suitsCompareFun)},e.prototype.godIDSuitActivite=function(p_l){var p_g=this.onGodSuitInfo;if(p_g)for(var b_s in p_g){var d_u=p_g[b_s];if(d_u){var b_e=this.getCfgGodSuitVo(d_u.suitId,d_u.level);if(b_e.xianYuan)for(var d_m in b_e.xianYuan)if(b_e.xianYuan[d_m]==p_l)return e.instance.suitTypeRed(b_e.id)}}},e.prototype.suitCompareFun=function(e,p_l){return e.state===p_l.state?p_l.level===e.level?p_l.suitId-e.suitId:p_l.level-e.level:p_l.state-e.state},e.prototype.godSuitActivate=function(e){var p_l=this.getSuitVo(e);return!!p_l&&!!p_l.state},e.prototype.suitPlanDec=function(p_l){var p_g=e.instance.onGodSuitArr(p_l),b_s=0;for(var d_u in p_g)p_g[d_u]&&this.getSuitVo(p_g[d_u].suitId).state&&b_s++;return Utils.$("({1}/{2})",b_s,p_g.length)},e.prototype.godSuitCanActivate=function(p_l,p_g){var b_s=this.getCfgGodSuitVo(p_l,p_g);if(b_s){var d_u=0;if(b_s.xianYuan){for(var b_e in b_s.xianYuan){var d_m=e.instance.getBlackKingById(b_s.xianYuan[b_e]);d_m.lv>=b_s.lvCond&&d_m.star>=b_s.starCond&&d_u++}return d_u>=b_s.xianYuan.length}}return!1},e.prototype.suitProgressValue=function(p_l,p_g){switch(p_l){case 1:case 2:if(b_s(p_l))return b_s(p_l)}function b_s(p_l){var b_s=0;if(p_g.xianYuan){for(var d_u in p_g.xianYuan){var b_e=e.instance.getBlackKingById(p_g.xianYuan[d_u]);b_e&&1==b_e.state&&(1==p_l&&b_e.lv>=p_g.lvCond&&b_s++,2==p_l&&b_e.star>=p_g.starCond&&b_s++)}if(b_s)return[b_s,p_g.xianYuan.length]}return[0,p_g.xianYuan.length]}},e.prototype.suitTypeRed=function(p_l,p_g){if(void 0===p_l&&(p_l=0),void 0===p_g&&(p_g=0),p_g){var b_s=e.instance.onGodSuitArr(p_g);for(var d_u in b_s){var b_e=this.getSuitVo(b_s[d_u].suitId),d_m=e.instance.getCfgGodSuitVo(b_s[d_u].suitId,b_s[d_u].level);if(b_e&&1<b_e.level&&(d_m=e.instance.getCfgGodSuitVo(b_e.suitId,b_e.level)),!d_m)return;if(d_w(d_m))return!0}}else{if(d_m=Config.xianyuan_suits[p_l],(b_e=this.getSuitVo(d_m.suitId))&&1<b_e.level&&(d_m=e.instance.getCfgGodSuitVo(b_e.suitId,b_e.level)),!d_m)return;if(d_w(d_m))return!0}function d_w(p_l){var p_g=e.instance.godSuitActivate(p_l.suitId),b_s=Config.xianyuan_suits[p_l.id+1],d_u=b_s&&p_g?b_s:p_l,b_e=e.instance.suitProgressValue(1,d_u),d_m=e.instance.suitProgressValue(2,d_u),d_w=d_m[0]>=d_m[1]&&b_e[0]>=b_e[1];if(BagModel.instance.getItemCount(d_u.consume[0][0])>=d_u.consume[0][1]&&d_w&&p_l.level<GodSuitLvMax.MAX)return!0}return!1},e.prototype.suitsCompareFun=function(p_l,p_g){if(p_l.state!==p_g.state)return p_g.state-p_l.state;var b_s=e.instance.getCfgGodSuitVo(p_l.suitId,p_l.level),d_u=e.instance.getCfgGodSuitVo(p_g.suitId,p_g.level),b_e=d_w(b_s.id),d_m=d_w(d_u.id);return p_g.level===p_l.level?d_m===b_e?p_l.suitId-p_g.suitId:d_m-b_e:p_g.level-p_l.level;function d_w(p_l){var p_g=Config.xianyuan_suits[p_l];if(p_g){var b_s=e.instance.godSuitActivate(p_g.suitId),d_u=Config.xianyuan_suits[p_g.id+1],b_e=d_u&&b_s&&p_g.suitId==d_u.suitId?d_u:p_g,d_m=e.instance.suitProgressValue(2,b_e);return d_m[0]?d_m[0]:0}}},e.prototype.godSuitNum=function(){for(var p_l=0,p_g=1;p_g<=GodSuitTypeMax.TYPE;p_g++){var b_s=e.instance.onGodSuitArr(p_g);for(var d_u in b_s)e.instance.godSuitActivate(b_s[d_u].suitId)&&p_l++}return p_l},Object.defineProperty(e.prototype,"godSuitRed",{get:function(){for(var e=1;e<=GodSuitTypeMax.TYPE;e++)if(this.suitTypeRed(0,e))return!0;return!1},enumerable:!0,configurable:!0}),e.prototype.godSuitIndex=function(p_l){for(var p_g=1;p_g<=GodSuitTypeMax.TYPE;p_g++){var b_s=e.instance.onGodSuitArr(p_g).sort(this.suitCompareFun);for(var d_u in b_s){var b_e=this.getCfgGodSuitVo(b_s[d_u].suitId,b_s[d_u].level);if(b_e.xianYuan)for(var d_m in b_e.xianYuan)if(b_e.xianYuan[d_m]==p_l)return[p_g,parseInt(d_u)]}}},e.prototype.getActVoByType=function(e){var p_l=this._talisDatas,p_g=[];for(var b_s in p_l){var d_u=Config.xianyuan_god[p_l[b_s].id];for(var b_e in e)p_l[b_s].isActive()&&d_u.propType==e[b_e]&&p_g.push(p_l[b_s])}return p_g},e.prototype.redXianWei=function(e){var p_l=100*e.id+e.seatStar+1,p_g=Config.xianyuan_xianweiStar[p_l];if(null==e.seatLv||null==e.seatStar)return!1;if(0!=e.seatLv&&0!=e.seatStar){var b_s=100*e.id+e.seatStar,d_u=Config.xianyuan_xianweiStar[b_s],b_e=(Config.xianyuan_xianweiLevel[100*b_s+e.seatLv],Config.xianyuan_xianweiLevel[100*b_s+e.seatLv+1]);if(b_e||e.seatLv!=d_u.lvLmt)return d_w=!1,b_p.checkConsume(b_e.consume,!1);if(p_g){var d_m=!1;e.star>=p_g.xyStar&&(d_m=!0);var d_w=!1;return d_w=b_p.checkConsume(p_g.consume,!1),d_m&&d_w}return!1}var f_t=Config.global[3050],v_z=StateModel.instance.getStateLv(),d_h=StateModel.instance.getStateSubLv(),r_t=!1;return(v_z>f_t.t_info[0]||v_z==f_t.t_info[0]&&d_h>=f_t.t_info[1])&&(r_t=!0),d_m=!1,e.star>=p_g.xyStar&&(d_m=!0),d_w=!1,d_w=b_p.checkConsume(p_g.consume,!1),r_t&&d_m&&d_w},e.prototype.getXianWeiFightPercent=function(e){var p_l=0,p_g=100*e.id+e.seatStar,b_s=Config.xianyuan_xianweiStar[p_g];return b_s&&(p_l=b_s.effect),p_l},e.prototype.getXianWeiFight=function(e){var p_l=100*e.id+e.seatStar,p_g=Config.xianyuan_xianweiLevel[100*p_l+e.seatLv];if(!p_g)return 0;var b_s=CharacterProperty.getPropertys(p_g.prop);return b_p.calPropFight(b_s)},e.prototype.getXianweiCfgPropById=function(e){var p_l=[],p_g=Config.xianyuan_xianweiLevel[e].prop;for(var b_s in p_g)p_l.push([p_g[b_s][0],p_g[b_s][1]]);return CharacterProperty.getPropertys(p_l)},e.prototype.reqGodConClude=function(e){var p_l=new c2m_xianyuan_conclude;p_l.id=e,DB.instance.query(c2m_xianyuan_conclude,p_l)},e.prototype.reqGodStarUp=function(e){var p_l=new c2m_xianyuan_god_starup;p_l.id=e,DB.instance.query(c2m_xianyuan_god_starup,p_l)},e.prototype.reqGodSuitInfo=function(){var e=new c2m_xianyuan_suits;DB.instance.query(c2m_xianyuan_suits,e)},e.prototype.getCfgPropByLv=function(e,p_l){var p_g=[],b_s=Config.xianyuan_levelup[e].prop;for(var d_u in b_s)p_g.push([b_s[d_u][0],b_s[d_u][1]*p_l]);return CharacterProperty.getPropertys(p_g)},e.prototype.getFightById2=function(e){var p_l=this.getJBFight(e.id)/1e4,p_g=this.getXianWeiFightPercent(e)/1e4,b_s=this.getXianWeiFight(e),d_u=this.getFightById(e);return Math.floor(d_u*(1+p_l+p_g)+b_s)},e.prototype.reqGodCoach=function(e){var p_l=new c2m_xianyuan_coach;p_l.type=e,DB.instance.query(c2m_xianyuan_coach,p_l)},e.prototype.getBasePropById=function(e){return Mnx(e,this)},e.prototype.reqXianyuanSeatAct=function(e){var p_l=new c2m_xianyuan_seat_act;p_l.id=e,DB.instance.query(c2m_xianyuan_seat_act,p_l)},e.prototype.reqGodActive=function(e){var p_l=new c2m_xianyuan_god_active;p_l.id=e,DB.instance.query(c2m_xianyuan_god_active,p_l)},e.prototype.reqXianyuanSeatUpLv=function(e){var p_l=new c2m_xianyuan_seat_up_lv;p_l.id=e,DB.instance.query(c2m_xianyuan_seat_up_lv,p_l)},e.prototype.reqBlackKingValue=function(){var e=new c2m_xianyuan_info;DB.instance.query(c2m_xianyuan_info,e)},e.prototype.redAllXianWei=function(){var e=this._talisDatas,p_l=!1;for(var p_g in e){var b_s=e[p_g];if(this.redXianWei(b_s)){p_l=!0;break}}return p_l},e.prototype.getJBSuitId=function(e){var p_l=Config.xianyuan_suits;for(var p_g in p_l){var b_s=p_l[p_g];for(var d_u in b_s.xianYuan)if(b_s.xianYuan[d_u]==e)return b_s.suitId}},e.prototype.reqGodSuitUpLv=function(e){var p_l=new c2m_xianyuan_upsuit;p_l.suitId=e,DB.instance.query(c2m_xianyuan_upsuit,p_l)},e.prototype.getFightById=function(e){var p_l=this.getCfgPropByLv(e.id,e.lv),p_g=CharacterProperty.getPropertys(Config.xianyuan_starup[1e3*e.id+e.star].prop);return p_g?b_p.calPropFight(p_l)+b_p.calPropFight(p_g):b_p.calPropFight(p_l)},e.prototype.getJBFight=function(p_l){var p_g=this.getJBSuitId(p_l),b_s=e.instance.getSuitVo(p_g);return b_s?1!=b_s.state?0:e.instance.getCfgGodSuitVo(b_s.suitId,b_s.level).percent:0},e.prototype.reqLiftSkillUpLv=function(e){var p_l=new c2m_xianyuan_xianshu_lvup;p_l.id=e,DB.instance.query(c2m_xianyuan_xianshu_lvup,p_l)},e.prototype.reqGodUplv=function(e){var p_l=new c2m_xianyuan_god_lvup;p_l.id=e,DB.instance.query(c2m_xianyuan_god_lvup,p_l)},e.prototype.reqXianyuanSeatUpStar=function(e){var p_l=new c2m_xianyuan_seat_up_star;p_l.id=e,DB.instance.query(c2m_xianyuan_seat_up_star,p_l)},e.instance=new e,e}(),drawcardRecord=function(){},BlackKingcardVo=function(){};!function(e){e[e.MAX=10]="MAX"}(FreeCoachMax=FreeCoachMax||{}),function(e){e[e.TYPE=3]="TYPE"}(GodSuitTypeMax=GodSuitTypeMax||{}),function(e){e[e.MAX=24]="MAX"}(GodSuitLvMax=GodSuitLvMax||{}),function(e){e[e.MAX=20]="MAX"}(GodCoachMax=GodCoachMax||{}),function(e){e[e.MAX=50]="MAX"}(GodStagePointMax=GodStagePointMax||{});var BenefitType,BenefitModel=function(){function e(){this.shareSpaceTime=0,this.sharePanelFirstRed=!0}return e.prototype.updateInviteStatus=function(e){if(e){this._inviteStatus=[];var p_l=void 0;for(var p_g in e)e[p_g]&&((p_l=new InviteStatusVo).update(e[p_g]),this._inviteStatus.push(p_l))}},e.prototype.getRewardVo=function(e){return Qkf(e,this)},e.prototype.getInviteIds=function(){var e=[],p_l=Config.activity_invite_invite;if(p_l){var p_g=void 0;for(var b_s in p_l)1!=(p_g=p_l[b_s]).firstReward&&e.push(p_g.id)}return e},e.prototype.reqInviteRewardStatus=function(){DB.instance.query(c2w_invite_reward_status,new c2w_invite_reward_status)},e.prototype.reqInviteReportStatus=function(){DB.instance.query(c2w_invite_report_status,new c2w_invite_report_status)},e.prototype.shareClick=function(){var e=this.getInviteIds();if(e&&0<e.length){var p_l=Config.activity_invite_invite[e[0]].shareContent[0],p_g=this.shareSpaceTime+3e5-SyncTime.serverTime;return 0<p_g?(b_p.broadcastNotice((j_x("2224_176_1614")+j_x("2171_1702_2460")+j_x("1111_1902")+":")+Utils.formatTimeStr2(Math.floor(p_g/1e3))),!1):(this.shareSpaceTime=SyncTime.serverTime,ShareMgr.ins.allPfInvite(p_l.imageUrl,p_l.title),!0)}return!1},e.prototype.updateInviteRewardStatus=function(e){if(e){this._inviteRewardStatus=[];var p_l=void 0;for(var p_g in e)(p_l=new InviteRewardStatusVo).update(e[p_g]),this._inviteRewardStatus.push(p_l);LED.event(l_r.SHARE_REWARD_UPDATE)}},e.prototype.getInviteReportVo=function(e){return Mnz(e,this)},e.prototype.hasReward=function(){return Udh(this)},e.prototype.checkLevel=function(){if(0!==b_p.config.invitePid){var e=LgcM.ins.heroVo,p_l=Config.activity_invite_invite;if(this._inviteStatus)for(var p_g in this._inviteStatus)if(0===this._inviteStatus[p_g].status&&1!=p_l[this._inviteStatus[p_g].id].isReset){var b_s=p_l[this._inviteStatus[p_g].id].condition,d_u=StateModel.instance.getStateLv(),b_e=StateModel.instance.getStateSubLv();"level"===b_s[0]&&e.level>=b_s[2]?RecordManager.instance.sendInviteInfo(3,b_p.config.invitePid,b_p.config.inviteServerId,b_p.config.inviteName,{level:e.level}):"stateLv"===b_s[0]&&e.stateLv>=b_s[2]&&b_e>=b_s[3]&&RecordManager.instance.sendInviteInfo(3,b_p.config.invitePid,b_p.config.inviteServerId,b_p.config.inviteName,{stateLv:d_u,stateSubLv:b_e})}}},e.prototype.reqInviteReward=function(e){var p_l=new c2w_invite_get_reward;p_l.id=e,DB.instance.query(c2w_invite_get_reward,p_l)},e.instance=new e,e}(),InviteStatusVo=function(){function e(){}return e.prototype.update=function(e){Obh(e,this)},e}(),InviteRewardStatusVo=function(){function e(){}return e.prototype.update=function(e){Caf(e,this)},e}();!function(e){e[e.signin=0]="signin",e[e.share=1]="share",e[e.exchange=2]="exchange",e[e.herald=3]="herald"}(BenefitType=BenefitType||{});var v_x=function(){function e(){this._myBanquetInfo=null,this._banquetJoinTimes=0,this._BanquetListInfo=null}return e.prototype.getMyBanquetInfo=function(){return Wnk(this)},e.prototype.isBanquetEnd=function(e){if(!e)return!1;var p_l=Config.banquet_banquet[e.type];return!!(e.members&&e.members.length>=p_l.numLmt)||!!(e.time&&e.time+p_l.timeLmt<=SyncTime.serverTime/1e3)},e.prototype.onBanqueStart=function(e){Aaq(e,this,LED,l_r)},e.prototype.reqBanquetQuery=function(e){var p_l=new c2w_banquet_query;p_l.pid=e,DB.instance.query(c2w_banquet_query,p_l)},e.prototype.reqBanquetJoin=function(e,p_l){var p_g=new c2w_banquet_join;p_g.pid=e,p_g.grade=p_l,DB.instance.query(c2w_banquet_join,p_g)},e.prototype.hasRedPoint=function(){var e=0<this.getBanquetLeftJoinTimes(),p_l=!1;if(!p_k.instance.checkSystemOpen(FuncDefine.banquet))return!1;if(!e&&this._myBanquetInfo&&(p_l=this.isBanquetEnd(this._myBanquetInfo)),e&&this._BanquetListInfo)for(var p_g=0,b_s=this._BanquetListInfo;p_g<b_s.length;p_g++){var d_u=b_s[p_g],b_e=this.isBanquetEnd(d_u);b_e||(p_l=!b_e)}return p_l},e.prototype.onBanqueQuery=function(e){Skl(e,LED,l_r)},e.prototype.calcBanquetPoint=function(e){for(var p_l=0,p_g=0,b_s=e.members;p_g<b_s.length;p_g++){var d_u=b_s[p_g];p_l+=Config.banquet_grade[d_u.grade].point}return p_l},e.prototype.getBanquetLeftJoinTimes=function(){var e=Config.global[GlobalDefine.banquet_join_times].i_info-this._banquetJoinTimes;return e<0?0:e},e.prototype.onBanqueLst=function(e){Cvu(e,this,LED,l_r)},e.prototype.clacLeftTime=function(e){var p_l=Config.banquet_banquet[e.type],p_g=e.time+p_l.timeLmt-Math.floor(SyncTime.serverTime/1e3);return p_g<0?0:p_g},e.prototype.reqBanquetInfo=function(){var e=new c2w_banquet_info;DB.instance.query(c2w_banquet_info,e)},e.prototype.onBanqueJoin=function(e){Qlz(e,LED,l_r)},e.prototype.onBanquetInfo=function(e){Ybt(e,this,LED,l_r)},e.prototype.reqBanquetLst=function(){var e=new c2w_banquet_lst;DB.instance.query(c2w_banquet_lst,e)},e.prototype.onNewBanqueMsg=function(){Snp(this)},e.prototype.reqBanquetStart=function(e,p_l){var p_g=new c2w_banquet_start;p_g.type=e,p_g.isPublic=p_l?1:0,DB.instance.query(c2w_banquet_start,p_g)},e.prototype.updateBanquetJoinTimes=function(e){Kvl(e,this,LED,l_r)},e.prototype.reqBanquetReward=function(){var e=new c2w_banquet_reward;DB.instance.query(c2w_banquet_reward,e)},e.instance=new e,e}(),ItemSourceDefine=function(){function e(){}return e.HangupReward=3051,e.EquipDecompose=1053,e.ActDrawCard=30202,e.DrawCard=30201,e.lottert_ride=34004,e.lottert_fashion=34003,e.lottert_lucky=34022,e.lottert_dragon=34017,e.lottert_Mental=34012,e.lottert_Marry=34027,e.lottert_Fest=34032,e.lottert_Weekend=34038,e}(),ItemComposeModel=function(){function e(){this.ret=1,this.composeInfoArr=[]}return Object.defineProperty(e.prototype,"composeGod",{get:function(){if(null==this._composeGod){for(var e in this._composeGod={},Config.item_compose){var p_l=Config.item_compose[e],p_g=(Config.CItem(p_l.id),Config.item_composeType2[p_l.type]);p_g&&((b_s=this._composeGod[p_g.type]||new ComposeLayerVo).setData(p_l.type,p_l.id),this._composeGod[p_g.type]=b_s)}for(var e in this._composeGod){var b_s=this._composeGod[e];for(var d_u in b_s.type2Info)b_s.type2Info[d_u].sort((function(e,p_l){var p_g=Config.CItem(e),b_s=Config.CItem(p_l);return p_g.place-b_s.place}))}}return this._composeGod},enumerable:!0,configurable:!0}),e.prototype.getComposeGodBy2Type=function(e,p_l){var p_g=this.composeGod[e].type2Info[p_l];if(null==p_g)for(var b_s in this.composeGod){var d_u=this.composeGod[b_s];for(var b_e in d_u)return d_u[b_e]}return p_g||[]},e.prototype.reqComposeGodEquip=function(e,p_l){var p_g=new c2m_godEquip_compose;p_g.composeCount=p_l,p_g.composeItem=e,DB.instance.query(c2m_godEquip_compose,p_g)},e.prototype.reqCompose=function(e,p_l){var p_g=new c2m_compose_auto;p_g.composeCount=p_l,p_g.composeItem=e,DB.instance.query(c2m_compose_auto,p_g)},e.prototype.returnComposeNum=function(){return Gse(this)},e.prototype.getTreeData=function(e,p_l){void 0===e&&(e=1),void 0===p_l&&(p_l=0),Config.item_compose;var p_g,b_s="<data>",d_u=StateModel.instance.getStateLv(),b_e=1,d_m=0,d_w=!1,f_t="",v_z=Config.item_composeType;for(var d_h in v_z){var r_t="";if(d_w||(d_m++,b_e=1),e==v_z[d_h].type){if(e!=GameDefine.comp_God){for(var t_n in Config.item_compose)if((p_g=Config.item_compose[t_n]).type==v_z[d_h].id){var f_y=Config.CItem(p_g.id);if(!f_y)continue;if(Config.item_compose[f_y.id].stateLevel&&d_u<Config.item_compose[f_y.id].stateLevel)continue;if(Config.item_compose[f_y.id].taskLimit&&!p_p.instance.checkIsFinish(Config.item_compose[f_y.id].taskLimit))continue;d_w||(b_e++,d_w=p_l==p_g.id),r_t+="<leaf label='"+f_y.name+"' itemId= '"+f_y.id+"' isOpen='false'/>"}}else for(var t_n in Config.item_composeType2){var p_q=Config.item_composeType2[t_n];v_z[d_h].id==p_q.type&&(d_w||(b_e++,d_w=p_l==p_q.id),r_t+="<leaf label='"+p_q.name+"' itemId= '"+p_q.id+"' isOpen='false'/>")}if(0<r_t.length){var h_h=!1;""==f_t&&d_w&&(f_t=v_z[d_h].name,h_h=!0),b_s+="<item label= '"+v_z[d_h].name+"' isOpen='"+h_h+"' type ='"+v_z[d_h].id+"' >",b_s+=r_t,b_s+="</item>"}}}return b_s+="</data>",b_e=d_m+b_e-2,""==f_t&&(b_e=1),{xml:Laya.Utils.parseXMLFromString(b_s),num:b_e,openName:f_t}},e.prototype.returnComposeInfo=function(){return Sro(this)},e.prototype.getItemNumber=function(e){return Sob(e,BagModel)},e.prototype.returnData=function(p_l){this.ret=p_l.ret,this.composeitemid=p_l.composeItem,1==this.ret&&e.instance.reqComposeViewInfo()},e.prototype.can2LayerComposeByType=function(e,p_l){var p_g=this.getComposeGodByType(e);for(var b_s in p_g.type2Info){var d_u=p_g.type2Info;for(var b_e in d_u)for(var d_m in d_u[b_e])if(this.canCompose(d_u[b_e][d_m],p_l,!0))return!0}return!1},e.prototype.can3LayerComposeByType=function(e,p_l,p_g){return Mjl(e,p_l,p_g,this)},e.prototype.canComposeByType=function(e,p_l){var p_g=Config.item_compose;for(var b_s in p_g)if(e==p_g[b_s].type&&this.canCompose(Config.item_compose[b_s].id,p_l))return!0;return!1},e.prototype.requestBagInfo=function(){return Yvy(BagModel,BagTypeDefine)},e.prototype.getComposeTypeById=function(e){var p_l=Config.item_compose[e],p_g=0,b_s=0,d_u=Config.item_composeType2;if(null==p_l)for(var b_e in d_u){p_g=d_u[b_e].type,b_s=d_u[b_e].id;break}else{var d_m=d_u[p_l.type];if(!d_m)return[p_l.type,b_s];p_g=Config.item_composeType[d_m.type].type,b_s=d_m.type}return[p_g,b_s]},e.prototype.getComposeGodByType=function(e){return Ilb(e,this)},e.prototype.getcompositeinfo=function(e){return Ylm(e,Config)},e.prototype.allCanCompose=function(e,p_l){return Wkd(e,p_l,this)},e.prototype.getComposeItemInfo=function(e){Mld(e,this,LED,l_r)},e.prototype.getItemByid=function(e){return Ecf(e,BagModel,BagTypeDefine)},e.prototype.canCompose=function(p_l,p_g,b_s,d_u){void 0===d_u&&(d_u=!1);var b_e=Config.item_compose[p_l];if(!b_e)return!1;if(2===b_e.type||3===b_e.type)return!1;if(b_e.dayLimit){var d_m=e.instance.returnComposeInfo();if(!d_m)return!1;for(var d_w in d_m)if(Number(p_l)==d_m[d_w].composeItem&&d_m[d_w].dayCurCount>=b_e.dayLimit)return!1}var f_t=b_e.needItem,v_z=0,d_h=f_t?f_t.length:-1,r_t=BagModel.instance.getItemCountByItemIDs(f_t,b_s?-1:BagTypeDefine.BAG_TYPE_ITEM);for(var d_w in f_t){var t_n=f_t[d_w][0];f_t[d_w][1]<=r_t[t_n]?v_z++:d_u&&r_f.instance.isWindow(t_n)}return v_z==d_h},e.prototype.reqComposeViewInfo=function(){var e=new c2m_compose_ui_info;DB.instance.query(c2m_compose_ui_info,e)},e.instance=new e,e}(),ComposeLayerVo=function(){function e(){this.type2Info={}}return e.prototype.setData=function(e,p_l){Stm(e,p_l,this)},e}(),ConsumableModel=function(){function e(){this._infoVos=[]}return e.prototype.updateItemData=function(){this._infoVos=[];var e=BagModel.instance._useItemCounts,p_l=BagModel.instance.getItemsByItemType(BagTypeDefine.BAG_TYPE_ITEM,ItemTypeDefine.CONSUME);if(p_l)for(var p_g in p_l)if(Config.item_consumeable[p_l[p_g].id]&&Config.item_consumeable[p_l[p_g].id].quick)if(0<p_l[p_g].expireTime){var b_s=Config.item_consumeable[p_l[p_g].id];b_s&&b_s.useLimit&&e[p_l[p_g].id]?b_s.useLimit>e[p_l[p_g].id]&&this._infoVos.push(p_l[p_g]):this._infoVos.push(p_l[p_g])}else this._infoVos.push(p_l[p_g])},Object.defineProperty(e.prototype,"itemData",{get:function(){return this._infoVos},enumerable:!0,configurable:!0}),e.prototype.clearInfo=function(){Gpo(this)},e.instance=new e,e}(),AlienBeastModle=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"beasts",{get:function(){return this.beastVos||(this.beastVos={}),this.beastVos},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"beastsToArray",{get:function(){if(null==this.beastsArray||this.beastsArray.length<=0)for(var e in this.beastsArray=[],this.beasts)this.beastsArray.push(this.beasts[e]);return this.beastsArray},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"beastsActivedToArray",{get:function(){var e=[];for(var p_l in this.beasts)this.beasts[p_l].active&&e.push(this.beasts[p_l]);return e},enumerable:!0,configurable:!0}),e.prototype.getBeastCfg=function(){return Uiq(Config)},e.prototype.onAlienBeastEvolve=function(e){var p_l,p_g=this.beastVos[e.id];p_g?(p_l=!(p_g.evoLvGrade<e.evoLv||(UI.BeastResultShowPanel.showBlackBox(p_g,UI.BeastPanelType.EVOLVESUCC),0)),p_g.evoLvGrade=e.evoLv,p_g.variationGrade=e.varLv,LED.event(l_r.ALIEN_BEAST_EVOLVE,[p_g,!p_l])):b_p.broadcastNotice((j_x("1946_1558_206")+j_x("2335_1796")))},e.prototype.sortBeast=function(e,p_l){var p_g=Config.beast_beast[e.id],b_s=Config.beast_beast[p_l.id],d_u=p_g.activeCond[1],b_e=b_s.activeCond[1],d_m=0,d_w=0;for(var f_t in d_u)d_m=BagModel.instance.getItemCountByItemID(d_u[f_t][0],BagTypeDefine.BAG_TYPE_ITEM)/d_u[f_t][1]*100,d_w=BagModel.instance.getItemCountByItemID(b_e[f_t][0],BagTypeDefine.BAG_TYPE_ITEM)/b_e[f_t][1]*100;var v_z=d_w>=100*b_e.length&&!p_l.active,d_h=d_m>=100*d_u.length&&!e.active;return v_z&&d_h?b_s.quality-p_g.quality:v_z?1:d_h?-1:e.active&&p_l.active?b_s.quality==p_g.quality?p_l.level-e.level:b_s.quality-p_g.quality:p_l.active?1:e.active?-1:d_w==d_m?p_g.id-b_s.id:d_w-d_m},e.prototype.getActVoByType=function(e){var p_l=this.beasts,p_g=[];for(var b_s in p_l){var d_u=Config.beast_beast[p_l[b_s].id];for(var b_e in e)p_l[b_s].active&&d_u.propType==e[b_e]&&p_g.push(p_l[b_s])}return p_g},e.prototype.reqAlienBeastInfo=function(){var e=new c2m_beast_list;DB.instance.query(c2m_beast_list,e)},e.prototype.getBasePropById=function(e){return Gvy(e)},e.prototype.updateTalismanInfo=function(e){var p_l=this.beasts[e.id];(p_l=p_l||(this.beasts[e.id]=new AlienBeastVo)).setData(e)},e.prototype.getFightById=function(e){return e.active?b_p.calPropFight(this.getLvProps(e)):0},e.prototype.calPropShieldAdd=function(e){return Ugp(e)},e.prototype.isRedPoint=function(){for(var e in this.beasts){var p_l=this.beasts[e];if(p_l.active){if(p_l.isUpHaveRedPoint())return!0;if(p_l.isCanEvolve()==UpState.CAN_UP)return!0}else if(p_l.active)return!0}return!1},e.prototype.reqAlienBeastUpgrade=function(e){var p_l=new c2m_beast_upgrade;p_l.id=e,DB.instance.query(c2m_beast_upgrade,p_l)},e.prototype.getEvolveCfgByEvolveLv=function(e,p_l){if(!this.evolveCfg)for(var p_g in this.evolveCfg={},Config.beast_evolution){var b_s=Config.beast_evolution[p_g];this.evolveCfg[b_s.beastId]||(this.evolveCfg[b_s.beastId]=[]),this.evolveCfg[b_s.beastId][b_s.level]=b_s.id}return Config.beast_evolution[this.evolveCfg[e][p_l]]},e.prototype.getEvolveVarCfgByVarLv=function(e,p_l){if(!this.evolveVarCfg)for(var p_g in this.evolveVarCfg={},Config.beast_variation){var b_s=Config.beast_variation[p_g];this.evolveVarCfg[b_s.beastId]||(this.evolveVarCfg[b_s.beastId]=[]),this.evolveVarCfg[b_s.beastId][b_s.level]=b_s.id}return Config.beast_variation[this.evolveVarCfg[e][p_l]]},e.prototype.onBeastInfo=function(e){var p_l=this.beastVos[e.beasts.id];null==p_l&&(p_l=new AlienBeastVo),p_l.level<=0?(b_p.broadcastNotice((j_x("2335_1796_402")+j_x(2142))),p_l.setData(e.beasts),UI.BeastResultShowPanel.open(p_l,UI.BeastPanelType.ACTIVE),this.beastVos[p_l.id]=p_l):p_l.setData(e.beasts),LED.event(l_r.ALIEN_BEAST_INFO,[null,!0])},e.prototype.reqAlienBeastActive=function(e){var p_l=new c2m_beast_active;p_l.id=e,DB.instance.query(c2m_beast_active,p_l)},e.prototype.calDeploymentsApt=function(e){if(e){var p_l=0;for(var p_g in e)p_l+=e[p_g].calAptitude();return p_l}return 0},e.prototype.reqAlienBeastUpLv=function(e){var p_l=new c2m_beast_uplevel;p_l.id=e,DB.instance.query(c2m_beast_uplevel,p_l)},e.prototype.calPropHpAdd=function(e){return Wjc(e,Config,GlobalDefine)},e.prototype.onAlienBeastUpDeploy=function(e){this.beastVos[e.id]?(this.beastVos[e.id].setDeployData(e.ployId,e.ployLv,e.currentExp),LED.event(l_r.ALIEN_BEAST_DLOP_UP_S)):b_p.broadcastNotice((j_x("1946_1558_206")+j_x("2335_1796")))},e.prototype.onBeastUpLevel=function(e){this.beastVos[e.id]?(this.beastVos[e.id].level=e.level,LED.event(l_r.ALIEN_BEAST_INFO)):b_p.broadcastNotice((j_x("1946_1558_206")+j_x("2335_1796")))},e.prototype.onBeastInfoDatas=function(e){for(var p_l in this.beastVos={},e.beasts)(p_g=new AlienBeastVo).setData(e.beasts[p_l]),this.beastVos[p_g.id]=p_g;for(var p_l in Config.beast_beast){var p_g,b_s=Config.beast_beast[p_l];this.beastVos[b_s.id]||((p_g=new AlienBeastVo).ID=b_s.id,this.beastVos[b_s.id]=p_g)}LED.event(l_r.ALIEN_BEAST_INFOS)},e.prototype.calPropAdd=function(e){return Yrq(e,Config,GlobalDefine)},e.prototype.getLvProps=function(p_l){var p_g=[];p_g=b_p.getPropInfos([["hpUpper",0],["attack",0],["defense",0],["armorBreak",0]]);var b_s=Config.beast_beast[p_l.id];b_s.clineprop,p_g=b_p.addProps(b_s.clineprop,1,p_g);var d_u=Config.beast_upgrade[this.getUpStarCfgByStar(p_l.id,p_l.star)],b_e=d_u?d_u.prop:[];p_g=b_p.addProps(b_e,1,p_g);var d_m=e.instance.getEvolveCfgByEvolveLv(p_l.id,p_l.evoLvGrade),d_w=d_m?d_m.prop:[];p_g=b_p.addProps(d_w,1,p_g);var f_t=e.instance.getEvolveVarCfgByVarLv(p_l.id,p_l.variationGrade),v_z=f_t?f_t.prop:[];p_g=b_p.addProps(v_z,1,p_g),p_l.fixedProps,p_g=b_p.addProps(p_l.getFixedProps(),1,p_g);var d_h=p_l.deployProps||[];return b_p.addProps(d_h,1,p_g)},e.prototype.reqAlienBeastUpDeploy=function(e,p_l,p_g){var b_s=new c2m_beast_upploy;b_s.id=e,b_s.ployId=p_l,b_s.mode=p_g,DB.instance.query(c2m_beast_upploy,b_s)},e.prototype.onBeastUpStar=function(e){this.beastVos[e.id]?(this.beastVos[e.id].star=e.grade,LED.event(l_r.ALIEN_BEAST_INFO)):b_p.broadcastNotice((j_x("1946_1558_206")+j_x("2335_1796")))},e.prototype.getUpStarCfgByStar=function(e,p_l){if(!this.upStarCfg)for(var p_g in this.upStarCfg={},Config.beast_upgrade){var b_s=Config.beast_upgrade[p_g];this.upStarCfg[b_s.beastId]||(this.upStarCfg[b_s.beastId]=[]),this.upStarCfg[b_s.beastId][b_s.grade]=b_s.id}return this.upStarCfg[e][p_l]},e.prototype.reqBeastEvolve=function(e){var p_l=new c2m_beast_evolve;p_l.id=e,DB.instance.query(c2m_beast_evolve,p_l)},e}(),AdventureModel=function(){function e(){this.surAdventureCount=0,this.getAdventureByConf(),this.adventureInfo=[],this.endTimeArr=[]}return Object.defineProperty(e,"ins",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.getAdventureByConf=function(){Iqe(Config,this)},Object.defineProperty(e.prototype,"getQuestionConf",{get:function(){return this._questionConf},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getLimitShopConf",{get:function(){return this._limitShopConf},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getRechargeGiftConf",{get:function(){return this._rechargeGiftConf},enumerable:!0,configurable:!0}),e.prototype.reqBuyLimitShopItem=function(e){var p_l=new c2m_adventure_shop_buy;p_l.id=e,DB.instance.query(c2m_adventure_shop_buy,p_l)},e.prototype.questionSubmit=function(e,p_l){var p_g=new c2m_adventure_question;p_g.id=e,p_g.answerId=p_l,DB.instance.query(c2m_adventure_question,p_g)},e.prototype.compare=function(e,p_l){return e.endTime>p_l.endTime?1:-1},e.prototype.adventureHandle=function(e){e&&(LED.event(l_r.ADVENTURE_END,e),this.reqUpdateAdventureInfo())},e.prototype.reqUpdateAdventureInfo=function(){DB.instance.query(c2m_get_adventure_info,{})},e.prototype.updateAdventureInfo=function(e){for(var p_l in this.surAdventureCount=e.surAdventureCount,this.adventureInfo=[],this.adventureInfo_pb=[],this.endTimeArr=[],this.adventureInfo_pb=e.adventureInfo,this.adventureInfo_pb){var p_g=new AdventureVo,b_s=this.adventureInfo_pb[p_l],d_u=Config.global[GlobalDefine.adventure_time_last].i_info;p_g.id=b_s.id,p_g.type=b_s.type,p_g.triggerTime=b_s.triggerTime,p_g.endTime=p_g.triggerTime+d_u,p_g.isEnd=!1,p_g.rewardId=b_s.rewardId,(p_g.endStatus=1)==b_s.status?p_g.rechargeGiftStatus=1:p_g.rechargeGiftStatus=0,this.adventureInfo.push(p_g),0<p_g.endTime&&this.endTimeArr.push(p_g.endTime)}this.adventureInfo.sort(this.compare);var b_e=Config.global[GlobalDefine.adventure_max_daily].i_info;this.timeStr=b_e-e.surAdventureCount+"/"+b_e,LED.event(l_r.ADVENTURE_UPDATE_INFO)},e.prototype.reqRechargeGift=function(e,p_l){Cea(e,p_l,b_p)},e.prototype.reqAdventureGetReward=function(e){var p_l=new c2m_adventure_receive_recharge;p_l.id=e,DB.instance.query(c2m_adventure_receive_recharge,p_l)},e.prototype.fixTabList=function(){var e=new AdventureVo;e.id=1,e.type=-1,e.triggerTime=0,e.endTime=SyncTime.serverTime/1e3+400,e.isEnd=!1,e.rewardId=1,this.adventureInfo.length<5&&(this.adventureInfo.push(e),this.fixTabList()),this.adventureInfo.sort(this.compare)},e.prototype.giveUpAdventure=function(e){var p_l=new c2m_adventure_give_up;p_l.id=e,DB.instance.query(c2m_adventure_give_up,p_l)},e.prototype.adventureTrigger=function(){Edu(UI)},e.prototype.getEndTime=function(){return 0==this.endTimeArr.length?0:Math.min.apply(null,this.endTimeArr)},e}(),AdventureVo=function(){},JumpManager=function(){function e(){LED.on(l_r.SCENE_CHANGE,this,this.onSceneChange),LED.on(l_r.LOCAL_MOVE_END,this,this.onMoveEnd)}return e.init=function(){this._instance||(this._instance=new e)},Object.defineProperty(e,"instance",{get:function(){return this.init(),this._instance},enumerable:!0,configurable:!0}),e.prototype.onSceneChange=function(){this._jumpPoints&&(this._jumpPoints.length=0);var e=Config.map[b_p.mapID].jumpPoint;if(e){this._jumpPoints||(this._jumpPoints=[]);var p_l=void 0;for(var p_g in e)(p_l=new JumpPosVo).startPos=new Laya.Point(e[p_g][0],e[p_g][1]),p_l.endPos=new Laya.Point(e[p_g][2],e[p_g][3]),this._jumpPoints.push(p_l)}},e.prototype.delayJump=function(e,p_l){Laya.timer.clear(this,this.delayJump);var p_g=Engine2d.Hero.local;if(p_g.moveMainCtrl.isOnlyClientMove){var b_s=Engine2d.MapUtils.cxToPx(e),d_u=Engine2d.MapUtils.cyToPy(p_l);p_g.jumpTo(p_g.x,p_g.y,b_s,d_u,p_g.moveMainCtrl.calJumpSpeed(b_s,d_u))}else 0<LgcM.ins.heroVo.hp&&p_g.moveMainCtrl.reqMove(e,p_l,Engine2d.StandardActions.SA_JUMP)},e.prototype.getJumpTargetPos=function(e,p_l){if(this._jumpPoints)for(var p_g in this._jumpPoints)if(this._jumpPoints[p_g].checkIsStart(e,p_l))return new Laya.Point(this._jumpPoints[p_g].endPos.x,this._jumpPoints[p_g].endPos.y);return null},e.prototype.onMoveEnd=function(e){void 0===e&&(e=null);var p_l=Engine2d.Hero.local;if(p_l){var p_g=p_l.currentCx,b_s=p_l.currentCy,d_u=this.getJumpTargetPos(p_g,b_s);d_u&&Laya.timer.once(250,this,this.delayJump,[d_u.x,d_u.y])}},e.prototype.checkTargetIsJump=function(e,p_l){if(!this._jumpPoints||0==this._jumpPoints.length)return!1;var p_g=Engine2d.MapUtils.pxTocx(e),b_s=Engine2d.MapUtils.pyTocy(p_l);for(var d_u in this._jumpPoints)if(this._jumpPoints[d_u].checkIsEnd(p_g,b_s))return!0;return!1},e}(),JumpPosVo=function(){function e(){}return e.prototype.checkIsStart=function(e,p_l){return Erx(e,p_l,Engine2d,this)},e.prototype.checkIsEnd=function(e,p_l){return this.endPos.x==e&&this.endPos.y==p_l},e}(),UI;!function(e){var p_l;(p_l=e.WeekendTab||(e.WeekendTab={}))[p_l.RechargeGift=0]="RechargeGift",p_l[p_l.LottertDraw=1]="LottertDraw"}(UI=UI||{});var n_z=function(){function e(){this.day=0,this.state=0,this.items=[]}return e.prototype.parseData=function(e){if(e){this.items=[];for(var p_l=0,p_g=e.items;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new ModuleItemVO;d_u.id=b_s.id,d_u.amount=b_s.num,this.items.push(d_u)}this.day=e.day,this.state=e.receive_status}},e}(),WeekendGiftVo=function(){function e(){this.agio=0,this.productId=0,this.money=0,this.limit=0,this.items=[]}return e.prototype.parseData=function(e){if(e){for(var p_l=0,p_g=e.items;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new ModuleItemVO;d_u.id=b_s.id,d_u.amount=b_s.num,this.items.push(d_u)}this.agio=e.discount,this.giftName=e.money+(j_x("1263_861_130")),this.productId=e.grade,this.money=e.money,this.limit=e.limit,this.buy_count=e.buy_count,this.received_count=e.received_count,this.giftId=e.gift_id}},Object.defineProperty(e.prototype,"isCanReward",{get:function(){return 0<this.buy_count-this.received_count},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCanBuy",{get:function(){return 0==this.limit||this.buy_count<this.limit},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isState",{get:function(){return this.isCanReward?1:this.isCanBuy?2:3},enumerable:!0,configurable:!0}),e}(),WeekendActivityModel=function(){function e(){this._WeekendfristRed=!0}return Object.defineProperty(e,"ins",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"WeekendGift",{get:function(){return null==this._WeekendGift&&(this._WeekendGift=[]),this._WeekendGift},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"WeekendLoginVos",{get:function(){return null==this._WeekendLoginVos&&(this._WeekendLoginVos=[]),this._WeekendLoginVos},enumerable:!0,configurable:!0}),e.prototype.getWeekendTimeByVo=function(e){if(e){var p_l="";if(this._date||(this._date=new Date),e.type==ActivityTypeDefine.BG_loginActivity){var p_g=e.showTime||0;p_g=e.stop-p_g,p_l=Utils.formatTimeStr4(e.start,!1)+"-"+Utils.formatTimeStr4(p_g,!1)}else p_g=e.showTime||0,p_g=e.stop-p_g-SyncTime.serverTime/1e3,p_l=Utils.formatTimeStr(p_g);return p_l}},e.prototype.reqBuyGift=function(e,p_l){Ukm(e,p_l,b_p)},e.prototype.giftRedPoint=function(){var e=!1,p_l=this.WeekendGift;for(var p_g in p_l)if(p_l[p_g].isCanReward){e=!0;break}return e},e.prototype.onUpdateGiftInfo=function(e){this._WeekendGift=[];for(var p_l=0,p_g=e.recordArr;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new WeekendGiftVo;d_u.parseData(b_s),this._WeekendGift.push(d_u)}this._WeekendGift.sort((function(e,p_l){return e.isState==p_l.isState?e.money-p_l.money:e.isState-p_l.isState})),LED.event(l_r.WEEKEND_GIFT_INFO)},e.prototype.weekendRedPoint=function(e){return void 0===e&&(e=null),e?e.type==ActivityTypeDefine.BG_loginActivity?this.signRedPoint():e.type==ActivityTypeDefine.BG_newHolidayGift?this.giftRedPoint():this.lotterDrawRedPoint():this.giftRedPoint()||this.signRedPoint()||this.lotterDrawRedPoint()},e.prototype.signRedPoint=function(){var e=!1,p_l=this.WeekendLoginVos;for(var p_g in p_l)if(1==p_l[p_g].state){e=!0;break}return e},e.prototype.lotterDrawRedPoint=function(){var e=!1,p_l=n_t.instance.getTimeConsume(LotterType.WEEKEND);return n_t.instance.isConsumeCanShowRed(LotterType.WEEKEND,p_l[0][0])&&(e=BagModel.instance.getItemCountByItemID(p_l[0][0],BagTypeDefine.BAG_TYPE_ITEM)>=p_l[0][1]||e),e},e.prototype.reqGetGift=function(e){var p_l=c2w_bgaAct_holiday_gift_reward_get,p_g=new p_l;p_g.grade=e,p_g.activity_name=ActivityTypeDefine.BG_newHolidayGift,DB.instance.query(p_l,p_g)},e.prototype.reqGetReward=function(e){var p_l=c2w_bgaAct_login_activity_reward_get,p_g=new p_l;p_g.day=e,DB.instance.query(p_l,p_g)},e}(),GET_TYPE,RoundRewardManager=function(){function e(){this._serveRoundRankRewards={},this._personRoundRankRewards={},this._locaActionRewares={}}return e.prototype.init=function(){function e(e,p_l,p_g){var b_s,d_u,b_e,d_m;for(var d_w in void 0===p_g&&(p_g=0),e)d_u=(b_s=e[d_w]).rankType,b_e=b_s.round,0==p_g?(d_m=p_l[d_u]||{},void 0===(p_l[d_u]=d_m)[b_e]&&(d_m[b_e]=[]),d_m[b_e].push(b_s)):(null==p_l[d_u]&&(p_l[d_u]=[]),p_l[d_u].push(b_s))}e(Config.activity_serverReward,this._serveRoundRankRewards),e(Config.activity_rankReward,this._personRoundRankRewards);var p_l=this._locaActionRewares,p_g=[{type:ActivityTypeDefine.GS_dailyRecharge,cfg:Config.activity_recharge_dailyRecharge},{type:ActivityTypeDefine.GS_singleRecharge,cfg:Config.activity_recharge_singleRecharge},{type:ActivityTypeDefine.GS_acumRecharge,cfg:Config.activity_recharge_acumRecharge},{type:ActivityTypeDefine.GS_dailyConsumption,cfg:Config.activity_recharge_dailyConsumption},{type:ActivityTypeDefine.GS_limitGift,cfg:Config.activity_limitGift_items},{type:ActivityTypeDefine.BG_limitGift,cfg:Config.activity_limitGift_items},{type:ActivityTypeDefine.BG_singleRecharge,cfg:Config.activity_recharge_singleRecharge},{type:ActivityTypeDefine.BG_acumRecharge,cfg:Config.activity_recharge_acumRecharge},{type:ActivityTypeDefine.GS_opensvrContinuousRecharge,cfg:Config.activity_rushRank_opensvrContinuousRecharge}];for(var b_s in p_g){var d_u=p_g[b_s].cfg,b_e=p_g[b_s].type,d_m=new d_p;for(var d_w in d_m.activityType=b_e,d_m.cfg=d_u,p_l[b_e]=d_m,d_u)null==d_m.rounds[d_u[d_w].round]&&(d_m.rounds[d_u[d_w].round]=[]),d_m.rounds[d_u[d_w].round].push(d_u[d_w])}},e.calcConfigId=function(e,p_l){return Ynu(e,p_l)},e.prototype.getLocalRankRewards=function(e,p_l){return Gjg(e,p_l,this)},e.prototype.getBGARankRewards=function(e,p_l){return Myp(e,p_l,this)},e.prototype.getHandle=function(e,p_l,p_g){var b_s=ActivityModel.instance.getActivityVoByType(p_l);if(b_s){var d_u=p_g[e];if(!d_u)return null;var b_e=b_s.round;if(-1!=b_e)return d_u[b_e]}return null},e.prototype.getLocalActivityRewards=function(e){var p_l=ActivityModel.instance.getActivityVoByType(e);if(!p_l)return null;var p_g=this._locaActionRewares[e];if(p_g){var b_s=p_l.round;if(-1!=b_s)return p_g.rounds[b_s]}return null},e.prototype.getActRoundId=function(e){var p_l=Config.activity_activity[e],p_g=-1;if(p_l.param.hasOwnProperty("round")){var b_s=p_l.param.round,d_u=p_l.openDay,b_e=Utils.subtractDate(1e3*SyncTime.serverOpenTime,SyncTime.serverTime)+1;d_u<=b_e&&(p_g=b_s[(p_g=b_e%(b_s.length+1))-1])}return p_g},e.instance=new e,e}();!function(e){e[e.SERVE=1]="SERVE",e[e.PERSON=2]="PERSON"}(GET_TYPE=GET_TYPE||{});var d_p=function(){this.activityType="",this.cfg=null,this.rounds={}},RechargeRankVo=function(){function e(){this.rewardTime=0,this.mySelfRank=0,this.rankPlayer=[],this.rewardBit=0,this.scoreNum=0,this.rankMaxNum=0,this.rankType=0,this.funOpenId=0,this.targetNum=0}return e.prototype.setData=function(e){e&&(this.rewardBit=e.rewardBit,this.rankPlayer.length=0,this.rankPlayer.push(e.firstRank),this.rankPlayer.push(e.secondRank),this.rankPlayer.push(e.thirdRank),this.mySelfRank=e.myIdx||RechargeRankModel.invalidRank)},e.prototype.getTarRewardCfg=function(e,p_l){if(null==this._tarRewardCfg)for(var p_g in this._tarRewardCfg={},Config.activity_accRank_accReward){var b_s=Config.activity_accRank_accReward[p_g];if(b_s.type==p_l){var d_u=this._tarRewardCfg[b_s.round]||[];d_u.push(b_s),this._tarRewardCfg[b_s.round]=d_u}}return this._tarRewardCfg[e]||[]},e}(),RechargeRankModel=function(){function e(){}return Object.defineProperty(e,"actArr",{get:function(){return this._actArr||(this._actArr=[ActivityTypeDefine.BG_cs_chargeRank,ActivityTypeDefine.BG_cs_consumeGoldRank]),this._actArr},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ins",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actRankModel",{get:function(){return this._actRankModel||(this._actRankModel={}),this._actRankModel},enumerable:!0,configurable:!0}),e.prototype.getRankVo=function(e){var p_l=this.actRankModel[e];return p_l||(p_l=new RechargeRankVo,this.actRankModel[e]=p_l),p_l},e.prototype.rankRewardState=function(e){var p_l=3,p_g=this.getRankVo(e),b_s=ActivityModel.instance.getActivityConfigVoByType(e);if(!b_s)return 1;var d_u=ActivityModel.instance.getLottertShowTime(b_s.subVo[0]);return b_s.subVo[0].sulTime<=d_u&&(p_l=this.rankCfgMaxNum(e)<p_g.mySelfRank?1:0==p_g.rewardTime?0:2),p_l},e.prototype.onRecRankScore=function(p_l){Yyj(p_l,this,e,LED,l_r)},e.prototype.rankTargetScore=function(e,p_l,p_g,b_s){void 0===p_g&&(p_g=!1),void 0===b_s&&(b_s=!1);var d_u=this.getRankVo(e);d_u.targetNum=p_l,b_s&&(d_u.scoreNum=p_l),p_g&&LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,d_u.funOpenId)},e.prototype.onConsRankTargetScore=function(p_l){Mec(p_l,this,e,LED,l_r)},e.prototype.isTargerReward=function(e,p_l){var p_g=this.getRankVo(p_l).getTarRewardCfg(e,this.targetRewardType(p_l));for(var b_s in p_g){var d_u=p_g[b_s];if(0==this.targetState(d_u,p_l))return!0}return!1},e.prototype.getRankCfg=function(e,p_l){return Wev(e,p_l,RoundRewardManager)},e.prototype.updateAimRewardInfo=function(e,p_l){Uhy(e,p_l,this,LED,l_r)},e.prototype.onRecRankTargetScore=function(p_l){Cdb(p_l,this,e)},e.prototype.reqAimReward=function(e,p_l){var p_g;p_l==ActivityTypeDefine.BG_cs_chargeRank?p_g=c2w_get_charge_rank_target_reward:p_l==ActivityTypeDefine.BG_cs_consumeGoldRank&&(p_g=c2w_get_consume_rank_target_reward);var b_s=new p_g;b_s.id=e,DB.instance.query(p_g,b_s)},e.prototype.isTargetRewardById=function(e,p_l){var p_g=this.getRankVo(p_l);return 0!=p_g.rewardBit&&1==(1&p_g.rewardBit>>e-1)},e.prototype.rankCfgMaxNum=function(e){var p_l=this.getRankVo(e);if(!p_l.rankMaxNum){var p_g=this.getRankCfg(e,p_l.rankType);if(p_g){var b_s=p_g[p_g.length-1];b_s&&(p_l.rankMaxNum=b_s.endIdx)}}return p_l.rankMaxNum},e.prototype.addEventListener=function(){DB.instance.on(q2c_consume_value_changed_notify.opcode.toString(),this,this.onConsRankTargetScore),DB.instance.on(q2c_get_consume_rank_target_reward_reply.opcode.toString(),this,this.onConsAimRewardInfo),DB.instance.on(q2c_csaRec_consume_rank.opcode.toString(),this,this.onConsRankInfo),DB.instance.on(q2c_charge_value_changed_notify.opcode.toString(),this,this.onRecRankTargetScore),DB.instance.on(q2c_get_charge_rank_target_reward_reply.opcode.toString(),this,this.onRecAimRewardInfo),DB.instance.on(q2c_csaRec_charge_rank.opcode.toString(),this,this.onRecRankInfo)},e.prototype.onConsAimRewardInfo=function(p_l){Gdd(p_l,this,e)},e.prototype.onConsRankInfo=function(p_l){var p_g=e.actArr[1],b_s=this.getRankVo(p_g);b_s.funOpenId=FuncDefine.RecConsRank,b_s.rankType=RankType.KF_ConsumeRank,this.rankTargetScore(p_g,p_l.total,!1,!0),this.updateRankInfo(p_g,p_l)},e.prototype.targetRewardType=function(e){var p_l=101;return e==ActivityTypeDefine.BG_cs_consumeGoldRank&&(p_l=102),p_l},e.prototype.targetState=function(e,p_l){if(!e)return 2;var p_g=this.getRankVo(p_l),b_s=this.isTargetRewardById(e.index,p_l)?2:0;return 0==b_s&&(b_s=e.aim<=p_g.targetNum?0:1),b_s},e.prototype.onRecAimRewardInfo=function(p_l){Mgp(p_l,this,e)},e.prototype.onRecRankInfo=function(p_l){var p_g=e.actArr[0],b_s=this.getRankVo(p_g);b_s.scoreNum=p_l.total,b_s.rankType=RankType.KF_RechargeRank,b_s.funOpenId=FuncDefine.RechargeRank,this.rankTargetScore(p_g,p_l.serverCharge),this.updateRankInfo(p_g,p_l)},e.prototype.isRed=function(e,p_l,p_g){return void 0===p_g&&(p_g=!0),!(!p_g||0!=this.rankRewardState(p_l))||this.isTargerReward(e,p_l)},e.prototype.updateRankInfo=function(e,p_l){var p_g=this.getRankVo(e);p_g.setData(p_l),p_g.rewardTime!=p_l.rewardTime&&(p_g.rewardTime=p_l.rewardTime,LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,p_g.funOpenId)),LED.event(l_r.RECHARGE_RANK_INFO)},e.prototype.reqGetRankReward=function(e){var p_l;e==ActivityTypeDefine.BG_cs_chargeRank?p_l=c2w_get_charge_rank_reward:e==ActivityTypeDefine.BG_cs_consumeGoldRank&&(p_l=c2w_get_consume_rank_reward);var p_g=new p_l;DB.instance.query(p_l,p_g)},e.invalidRank=9999,e}(),openSvrSevenDiscoutVo=function(){function e(){this.agio=0,this.productId=0,this.money=0,this.limit=0,this.items=[]}return e.prototype.parseData=function(e){if(e){for(var p_l=0,p_g=e.reward;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new ModuleItemVO;d_u.id=b_s[0],d_u.amount=b_s[1],this.items.push(d_u)}this.giftName=e.name,this.productId=e.setId,this.giftId=e.id,this.money=e.money,this.limit=e.buyTime}},e.prototype.parseData_m=function(e){e&&(this.buy_count=e.buy_count,this.received_count=e.received_count,this.giftId=e.id)},Object.defineProperty(e.prototype,"isCanReward",{get:function(){return 0<this.buy_count-this.received_count},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCanBuy",{get:function(){return 0==this.limit||this.buy_count<this.limit},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isState",{get:function(){return this.isCanReward?1:this.isCanBuy?this.money<=0?1:2:3},enumerable:!0,configurable:!0}),e}(),openSvrSevenConRcVo=function(){function e(){this.days=0,this.money=0,this.items=[],this.type="",this.ids=0}return e.prototype.parseData=function(e){if(e){for(var p_l=0,p_g=e.reward;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new ModuleItemVO;d_u.id=b_s[0],d_u.amount=b_s[1],this.items.push(d_u)}this.days=e.day,this.ids=e.id,this.money=e.charge,this.giftName=(j_x("566_243"))+e.day+(j_x("2308_2258_2376"))+e.charge+(j_x(1263))}},e.prototype.getCanReward=function(){return 0==this.state&&this.conDays>=this.days&&this.totalMoney>=this.money},e}(),openSvrSevenActivityModel=function(){function e(){this._conRecDays=0,this._todayRec=0;var e=Config.activity_rushRank_opensvrDiscountRecharge,p_l=[];for(var p_g in e)e.hasOwnProperty(p_g)&&p_l.push(e[p_g]);this._discoutConf=p_l,this._openSvrDay=this.getOpenDay()}return Object.defineProperty(e,"ins",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){var e,p_l=[];for(var p_g in e=Config.activity_rushRank_opensvrContinuousRecharge)e.hasOwnProperty(p_g)&&p_l.push(e[p_g]);this._conRechargeConf=p_l},e.prototype.getOpenDay=function(){return Ept(SyncTime)},Object.defineProperty(e.prototype,"openSvrSevenRecInfo",{get:function(){return null==this._openSvrSevenRechargeInfo&&(this._openSvrSevenRechargeInfo=[]),this._openSvrSevenRechargeInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"oepnSvrSevenDiscout",{get:function(){return null==this._oepnSvrSevenDiscoutInfo&&(this._oepnSvrSevenDiscoutInfo=[]),this._oepnSvrSevenDiscoutInfo},enumerable:!0,configurable:!0}),e.prototype.onUpdateConRechargeInfo=function(e){this._openSvrSevenRechargeInfo=[];var p_l,p_g=[];for(var b_s in p_l=Config.activity_rushRank_opensvrContinuousRecharge)p_l.hasOwnProperty(b_s)&&p_g.push(p_l[b_s]);for(var d_u=0,b_e=p_g;d_u<b_e.length;d_u++){var d_m=b_e[d_u],d_w=new openSvrSevenConRcVo,f_t=e.rewardStatus>>d_m.day-1&1;d_w.parseData(d_m),d_w.state=f_t,d_w.conDays=e.continueDays,d_w.totalMoney=e.charge,d_w.type=ActivityTypeDefine.GS_opensvrContinuousRecharge,this._openSvrSevenRechargeInfo.push(d_w)}this._conRecDays=e.continueDays,this._todayRec=e.charge,LED.event(l_r.OPENSVRSEVEN_CONRECHARGE_INFO)},e.prototype.discoutRedPoint=function(){var e=!1,p_l=this._oepnSvrSevenDiscoutInfo;for(var p_g in p_l){if(p_l[p_g].isCanReward){e=!0;break}if(p_l[p_g].money<=0&&0<p_l[p_g].count){e=!0;break}}return e},e.prototype.onUpdateDiscoutInfo=function(e){var p_l;this._oepnSvrSevenDiscoutInfo=[],p_l=this._discoutConf;for(var p_g=0;p_g<p_l.length;p_g++)if(p_l[p_g].round==this._openSvrDay){var b_s=new openSvrSevenDiscoutVo;for(var d_u in b_s.parseData(p_l[p_g]),b_s.buy_count=0,b_s.received_count=0,b_s.giftId=0,e.recordArr){var b_e=e.recordArr[d_u];b_e.id==p_l[p_g].id&&(b_s.buy_count=b_e.buy_count,b_s.received_count=b_e.received_count,b_s.giftId=b_e.id)}0===p_l[p_g].money&&(b_s.giftId=p_l[p_g].id);var d_m=b_s.buy_count?b_s.buy_count:0;b_s.count=d_m<b_s.limit?b_s.limit-d_m:0,this._oepnSvrSevenDiscoutInfo.push(b_s)}LED.event(l_r.OPENSVRSEVEN_DISCOUT_INFO)},e.prototype.conRecRedPoint=function(){var e=!1,p_l=this.openSvrSevenRecInfo;for(var p_g in p_l)if(0==p_l[p_g].state&&p_l[p_g].conDays>=p_l[p_g].days&&p_l[p_g].totalMoney){e=!0;break}return e},e.prototype.reqBuyGift=function(e,p_l){Iyb(e,p_l,b_p)},e.prototype.reqGetOpenSvrDiscout=function(e){var p_l=c2w_gsaAct_opensvr_discount_recharge_reward,p_g=new p_l;p_g.id=e,DB.instance.query(p_l,p_g)},e.prototype.reqGetRecGift=function(e){var p_l=c2w_gsaAct_continue_recharge_reward,p_g=new p_l;p_g.id=e,DB.instance.query(p_l,p_g)},e.prototype.openSvrSevenRedPoint=function(e){if(void 0===e&&(e=null),!e)return this.conRecRedPoint()||this.discoutRedPoint();e.type==ActivityTypeDefine.GS_opensvrContinuousRecharge?this.conRecRedPoint():e.type==ActivityTypeDefine.GS_opensvrDiscountRecharge?this.discoutRedPoint():(e.type,ActivityTypeDefine.BG_acumRecharge)},e}(),openSvrTab=function(){function e(){this._tsGainRankTab=!1,this._conRechargeTab=!1,this._acumRechargeTab=!1,this._discoutRecharTab=!1}return Object.defineProperty(e,"ins",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tsGainRankTab",{get:function(){return this._tsGainRankTab},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"settsGainRankTab",{set:function(e){this._tsGainRankTab=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"conRechargeTab",{get:function(){return this._conRechargeTab},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setconRechargeTab",{set:function(e){this._conRechargeTab=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"acumRechargeTab",{get:function(){return this._acumRechargeTab},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setacumRechargeTab",{set:function(e){this._acumRechargeTab=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"discoutRecharTab",{get:function(){return this._discoutRecharTab},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setdiscoutRecharTab",{set:function(e){this._discoutRecharTab=e},enumerable:!0,configurable:!0}),e}(),UI;!function(e){var p_l;(p_l=e.MonthTab||(e.MonthTab={}))[p_l.ChristmasTarget=0]="ChristmasTarget",p_l[p_l.ActiveGift=1]="ActiveGift",p_l[p_l.ConRecharge=2]="ConRecharge",p_l[p_l.RechargeGift=3]="RechargeGift",p_l[p_l.TreasureHunt=4]="TreasureHunt",p_l[p_l.RedEnvelopes=5]="RedEnvelopes",p_l[p_l.SpringFestival=6]="SpringFestival"}(UI=UI||{});var h_o=function(){function e(){this.ty="",this.money=0,this.items=[],this.exchangeArr=[],this.cost_item=0,this.bestItems=[]}return e.prototype.parseData=function(e){if(e){for(var p_l=0,p_g=e.items;p_l<p_g.length;p_l++){var b_s=p_g[p_l];(f_t=new x_turntable_item).id=b_s.id,f_t.num=b_s.num,f_t.itemId=b_s.itemId,this.items.push(f_t)}for(var d_u=0,b_e=e.exchange;d_u<b_e.length;d_u++)b_s=b_e[d_u],(f_t=new ModuleItemVO).id=b_s.id,f_t.amount=b_s.num,this.exchangeArr.push(f_t);for(var d_m=0,d_w=e.bestItems;d_m<d_w.length;d_m++){var f_t;b_s=d_w[d_m],(f_t=new x_turntable_item).id=b_s.id,f_t.itemId=b_s.itemId,f_t.num=b_s.num,this.bestItems.push(f_t)}this.point=e.point,this.money=e.money,this.cost_item=e.cost_item}},e}(),MonthConRcVo=function(){function e(){this.days=0,this.money=0,this.items=[]}return e.prototype.parseData=function(e){if(e){for(var p_l=0,p_g=e.items;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new ModuleItemVO;d_u.id=b_s.id,d_u.amount=b_s.num,this.items.push(d_u)}this.days=e.days,this.money=e.money,this.giftName=(j_x("566_243"))+e.days+(j_x("2308_2258_2376"))+e.money+(j_x(1263))}},e.prototype.getCanReward=function(){return 0==this.state&&this.conDays>=this.days&&this.totalMoney>=this.money},e}(),MonthActivityModel=function(){function e(){this.creatPlayerTime=0,this._MonthfristRed=!0,this._todayActiveNumber=0,this._conRecDays=0,this._todayRec=0,this.taskRound=1,this.livenessRound=1,this.integralProgress=0,this.getChristmasTargetConf()}return Object.defineProperty(e,"ins",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MonthRecInfo",{get:function(){return null==this._monthRechargeInfo&&(this._monthRechargeInfo=[]),this._monthRechargeInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MonthAcGiftInfo",{get:function(){return null==this._monthActiveGiftInfo&&(this._monthActiveGiftInfo=[]),this._monthActiveGiftInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MonthGift",{get:function(){return null==this._monthGift&&(this._monthGift=[]),this._monthGift},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MonthTrHunt",{get:function(){return null==this._monthTrHuntInfo&&(this._monthTrHuntInfo=[]),this._monthTrHuntInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"LivenessInfo",{get:function(){return null==this._livenessInfoArr&&(this._livenessInfoArr=[]),this._livenessInfoArr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"taskInfoArr",{get:function(){return null==this._taskInfoArr&&(this._taskInfoArr=[]),this._taskInfoArr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"changeItemInfo",{get:function(){return this._changeItemInfo},enumerable:!0,configurable:!0}),e.prototype.getMonthTimeByVo=function(e){if(e){var p_l="";if(this._date||(this._date=new Date),e.type==ActivityTypeDefine.BG_loginActivity||e.type==ActivityTypeDefine.BG_activenessGift||e.type==ActivityTypeDefine.BG_continueRecharge||e.type==ActivityTypeDefine.BG_discountGift||e.type==ActivityTypeDefine.BG_turntableTreasure||e.type==ActivityTypeDefine.BG_redEnvelops){var p_g=e.showTime||0;p_g=e.stop-p_g,p_l=Utils.formatTimeStr4(e.start,!1)+"-"+Utils.formatTimeStr4(p_g,!1)}else p_l=e.type==ActivityTypeDefine.BG_changeItem?(p_g=e.showTime||0,p_g=e.stop-p_g,p_l=Utils.formatTimeStr4(e.start,!1)+"-"+Utils.formatTimeStr4(p_g,!1),p_g-=SyncTime.serverTime/1e3,p_l+"  "+Utils.formatTimeStr(p_g)):(p_g=e.showTime||0,p_g=e.stop-p_g-SyncTime.serverTime/1e3,Utils.formatTimeStr(p_g));return p_l}},e.prototype.getLivenessDataByRound=function(e){var p_l=[];for(var p_g in this._livenessInfoAll)this._livenessInfoAll[p_g].round===e&&p_l.push(this._livenessInfoAll[p_g]);return p_l},e.prototype.reqFestivalTargetInfo=function(){Cvz(ActivityModel,ActivityTypeDefine)},e.prototype.getChristmasTargetConf=function(){this._taskInfoAll=[],this._livenessInfoAll=[],this._livenessInfoArr=[],this._taskInfoArr=[];var e=Config.activity_festiReward_festiTarget,p_l=Config.activity_festiReward_festiReward;for(var p_g in e){var b_s=new TaskInfo_ChristmasTar;switch(b_s.id=e[p_g].id,b_s.round=e[p_g].round,b_s.totalProgress=e[p_g].condition[1],b_s.reward=e[p_g].reward,b_s.taskDec=e[p_g].name,b_s.getRewardStatus=0,b_s.currProgress=0,b_s.point=e[p_g].point,e[p_g].condition[0]){case"goldRecharge":b_s.targetType=0;break;case"goldConsume":b_s.targetType=1;break;case"dailyActiveness":b_s.targetType=2}this._taskInfoAll.push(b_s)}for(var d_u in p_l){var b_e=new LivenessInfo_ChristmasTar;b_e.currProgress=0,b_e.round=p_l[d_u].round,b_e.id=p_l[d_u].id,b_e.rewardStatus=-1,b_e.point=p_l[d_u].point,b_e.reward=p_l[d_u].reward,b_e.index=p_l[d_u].index,this._livenessInfoAll.push(b_e)}},e.prototype.updateChangeItemInfoData=function(e){Wji(e,this)},e.prototype.conRecRedPoint=function(){var e=!1,p_l=this._monthRechargeInfo;for(var p_g in p_l)if(0==p_l[p_g].state&&p_l[p_g].conDays>=p_l[p_g].days&&p_l[p_g].totalMoney>=p_l[p_g].money){e=!0;break}return e},e.prototype.reqGetRecGift=function(e){var p_l=c2w_bgaAct_continue_recharge_reward,p_g=new p_l;p_g.id=e,DB.instance.query(p_l,p_g)},e.prototype.activeGiftRedPoint=function(){var e=!1,p_l=this._monthActiveGiftInfo;for(var p_g in p_l)if(0==p_l[p_g].state&&p_l[p_g].totalActiveNumber>=p_l[p_g].money){e=!0;break}return e},e.prototype.reqChristmasLivenessReward=function(e){var p_l=new c2w_get_festival_integral_reward;p_l.id=e,DB.instance.query(c2w_get_festival_integral_reward,p_l)},e.prototype.christLivenessRedPoint=function(){for(var e in this.LivenessInfo){var p_l=this.LivenessInfo[e];if(this.getChristLivenessRedPoint(p_l.id))return!0}return!1},e.prototype.getLivinessDataById=function(e){return Wqo(e,this)},e.prototype.reqGetActiveGift=function(e){var p_l=c2w_bgaAct_activeness_gift_reward,p_g=new p_l;p_g.id=e,DB.instance.query(p_l,p_g)},e.prototype.christmasTaskCompareByType=function(e,p_l){return e.targetType==p_l.targetType?e.id-p_l.id:e.targetType-p_l.targetType},e.prototype.reqBuyGift=function(e,p_l){Ghk(e,p_l,b_p)},e.prototype.onUpdateConRecInfo=function(e){this._monthRechargeInfo=[];for(var p_l=0,p_g=e.records;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new MonthConRcVo,b_e=e.rewardStatus>>b_s.days-1&1;d_u.parseData(b_s),d_u.state=b_e,d_u.conDays=e.continueDays,d_u.totalMoney=e.charge,this._monthRechargeInfo.push(d_u)}this._conRecDays=e.continueDays,this._todayRec=e.charge,LED.event(l_r.MONTH_CONRECHARGE_INFO)},e.prototype.lotterDrawRedPoint=function(){var e=!1,p_l=this._monthTrHuntInfo;if(p_l){var p_g=p_l[0].cost_item;e=0<BagModel.instance.getItemCountByItemID(p_g,BagTypeDefine.BAG_TYPE_ITEM)||e}return e},e.prototype.monthRedPoint=function(e){return void 0===e&&(e=null),e?e.type==ActivityTypeDefine.BG_activenessGift?this.activeGiftRedPoint():e.type==ActivityTypeDefine.BG_continueRecharge?this.conRecRedPoint():e.type==ActivityTypeDefine.BG_discountGift?this.giftRedPoint():e.type==ActivityTypeDefine.BG_festivalTarget?this.christLivenessRedPoint()||this.getChristTaskRedPoint():e.type==ActivityTypeDefine.BG_changeItem?this.changeItemRed():this.lotterDrawRedPoint():this.conRecRedPoint()||this.activeGiftRedPoint()||this.giftRedPoint()||this.lotterDrawRedPoint()||this.christLivenessRedPoint()||this.getChristTaskRedPoint()},e.prototype.reqGetGift=function(e){var p_l=c2w_bgaAct_holiday_gift_reward_get,p_g=new p_l;p_g.grade=e,p_g.activity_name=ActivityTypeDefine.BG_discountGift,DB.instance.query(p_l,p_g)},e.prototype.getChristLivenessRedPoint=function(e,p_l){return void 0===p_l&&(p_l=0),1==this.getFestivaTarRewardStatus(e)},e.prototype.onUpdateActiveGiftInfo=function(e){this._monthActiveGiftInfo=[];for(var p_l=0,p_g=e.records;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new MonthAcGiftVo,b_e=e.rewardStatus>>b_s.id-1&1;d_u.parseData(b_s),d_u.state=b_e,d_u.totalActiveNumber=e.activeness,this._monthActiveGiftInfo.push(d_u)}this._todayActiveNumber=e.activeness,LED.event(l_r.MONTH_ACTIVE_INFO)},e.prototype.updateChristmasInfo=function(e){var p_l=e.taskProgress,p_g=this.getTastDataByRound(e.taskRound);for(var b_s in p_l)for(var d_u in p_g)p_g[d_u].id==p_l[b_s].id&&(p_g[d_u].currProgress=p_l[b_s].progress,p_g[d_u].getRewardStatus=p_l[b_s].status);if(p_l.length<=0)for(var d_u in p_g)p_g[d_u].currProgress=0,p_g[d_u].getRewardStatus=0;var b_e=p_g.sort(this.christmasTaskCompareByType);this._taskInfoArr=b_e.sort(this.christmasTaskCompare);var d_m=this.getLivenessDataByRound(e.integralRound);for(var d_w in d_m)d_u=d_m[d_w].id-1,d_m[d_w].rewardStatus=e.integralStatus>>d_u&1;this._livenessInfoArr=d_m,this.integralProgress=e.integralProgress,LED.event(l_r.CHRISTMASTARGET_UPDATE_INFO),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.MonthActivity)},e.prototype.christmasTaskCompare=function(e,p_l){var p_g=e.getRewardStatus,b_s=p_l.getRewardStatus;return(p_g=1==p_g?-1:p_g)==(b_s=1==b_s?-1:b_s)?e.id-p_l.id:p_g-b_s},e.prototype.reqChristmasTargetTaskReward=function(e){var p_l=new c2w_get_festival_task_reward;p_l.id=e,DB.instance.query(c2w_get_festival_task_reward,p_l)},e.prototype.giftRedPoint=function(){var e=!1,p_l=this._monthGift;for(var p_g in p_l)if(p_l[p_g].isCanReward){e=!0;break}return e},e.prototype.onUpdateTreasureHuntInfo=function(e){this._monthTrHuntInfo=[];var p_l=new h_o;p_l.parseData(e),this._monthTrHuntInfo.push(p_l),LED.event(l_r.MONTH_TR_HUNT_INFO)},e.prototype.getChristTaskRedPoint=function(){for(var e in this.taskInfoArr){var p_l=this.taskInfoArr[e];if(1===p_l.getRewardStatus&&p_l.currProgress>=p_l.totalProgress)return!0}return!1},e.prototype.changeItemRed=function(){var e=!1;if(this._changeItemInfo)for(var p_l in this._changeItemInfo){var p_g=this.changeItemInfo[p_l],b_s=[];for(var d_u in p_g.condition){var b_e=p_g.condition[d_u];b_s.push([b_e.id,b_e.num])}if(this.changeItemBtnRed(b_s,p_g.surCount)){e=!0;break}}return e},e.prototype.getTastDataByRound=function(e){var p_l=[];for(var p_g in this._taskInfoAll)this._taskInfoAll[p_g].round===e&&p_l.push(this._taskInfoAll[p_g]);return p_l},e.prototype.changeItemBtnRed=function(e,p_l){var p_g=!1;return b_p.checkConsume(e,!1)&&0<p_l&&(p_g=!0),p_g},e.prototype.getFestivaTarRewardStatus=function(e){var p_l=this.getLivinessDataById(e);return 0===p_l.rewardStatus?this.integralProgress>=p_l.point?1:2:1===p_l.rewardStatus&&this.integralProgress>=p_l.point?3:2},e.prototype.onUpdateGiftInfo=function(e){this._monthGift=[];for(var p_l=0,p_g=e.recordArr;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new WeekendGiftVo;d_u.parseData(b_s),this._monthGift.push(d_u)}this._monthGift.sort((function(e,p_l){return e.isState==p_l.isState?e.giftId-p_l.giftId:e.isState-p_l.isState})),LED.event(l_r.MONTH_GIFT_INFO)},e.prototype.reqChangeItem=function(e){var p_l=new c2w_change_item;p_l.id=e,DB.instance.query(c2w_change_item,p_l)},e.prototype.updateChangeItemNum=function(e){for(var p_l in this._changeItemInfo){var p_g=this.changeItemInfo[p_l];if(p_g.id==e){p_g.surCount-=1;break}}},e}(),LivenessInfo_ChristmasTar=function(){},TaskInfo_ChristmasTar=function(){},MonthAcGiftVo=function(){function e(){this.days=0,this.money=0,this.items=[]}return e.prototype.parseData=function(e){if(e){for(var p_l=0,p_g=e.items;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new ModuleItemVO;d_u.id=b_s.id,d_u.amount=b_s.num,this.items.push(d_u)}this.days=e.id,this.money=e.activeness,this.giftName=(j_x("2339_1254_1796")+j_x("1076_1035"))+this.money+(j_x("1163_1174_2111"))}},e}(),MergeSerGymModel=function(){function e(){this._rankPlayer=[],this._mySelfRank=0,this._rankRewardTime=0,this._rewardBit=0,this._mySelfHisRank=0}return Object.defineProperty(e,"ins",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rankCfgMaxNum",{get:function(){if(!this._rankMaxNum){var e=this.getRankCfg(ActivityTypeDefine.GS_arenaRushRank,RankType.SerGyRank);if(e){var p_l=e[e.length-1];p_l&&(this._rankMaxNum=p_l.endIdx)}}return this._rankMaxNum},enumerable:!0,configurable:!0}),e.prototype.addEventListener=function(){Wti(DB,w2c_get_arenaRush_target_reward_reply,this,w2c_gsaRec_arenaRush_rank,w2c_arenaRush_high_rank_changed)},e.prototype.onRankInfo=function(e){this._rewardBit=e.rewardBit,this._rankPlayer.length=0,this._rankPlayer.push(e.firstRank),this._rankPlayer.push(e.secondRank),this._rankPlayer.push(e.thirdRank),this._mySelfRank=e.myIdx,this._mySelfHisRank=e.highRank,this._rankRewardTime!=e.rewardTime&&(this._rankRewardTime=e.rewardTime,LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.serRankGymActivity)),LED.event(l_r.MERGE_GYM_INFO)},e.prototype.reqRankReward=function(){var e=new c2w_get_arenaRush_rank_reward;DB.instance.query(c2w_get_arenaRush_rank_reward,e)},e.prototype.rankRewardState=function(){var e=3,p_l=ActivityModel.instance.getActivityConfigVo(FuncDefine.serRankGymActivity);if(!p_l)return 1;var p_g=ActivityModel.instance.getLottertShowTime(p_l.subVo[0]);return p_l.subVo[0].sulTime<=p_g&&(e=this.rankCfgMaxNum<this.getMySelfRank()?1:0==this._rankRewardTime?0:2),e},e.prototype.targetState=function(e){if(!e)return 2;var p_l=this.isTargetRewardById(e.index)?2:0;return 0==p_l&&(p_l=e.condition>=this.getMySelfHisRank()?0:1),p_l},e.prototype.onAimRewardInfo=function(e){Ygb(e,this,LED,l_r,FuncDefine)},e.prototype.isTargetRewardById=function(e){return 0!=this._rewardBit&&1==(1&this._rewardBit>>e-1)},e.prototype.getMySelfRank=function(){return Ece(this,e)},e.prototype.isRed=function(){return Udm(this)},e.prototype.isTargerReward=function(){var e=Config.activity_mergeSvr_mergeSvrAim;for(var p_l in e){var p_g=e[p_l];if(!this.isTargetRewardById(p_g.index)&&p_g.condition>=this.getMySelfHisRank())return!0}return!1},e.prototype.onHisRankInfo=function(e){Omq(e,this,LED,l_r,FuncDefine)},e.prototype.getRankCfg=function(e,p_l){return Kid(e,p_l,RoundRewardManager)},e.prototype.isGetRankReward=function(e){void 0===e&&(e=!0);var p_l=!0;if(e){var p_g=ActivityModel.instance.getActivityConfigVo(FuncDefine.serRankGymActivity);if(!p_g)return!1;var b_s=ActivityModel.instance.getLottertShowTime(p_g.subVo[0]);p_l=p_g.subVo[0].sulTime<=b_s}return p_l&&0==this._rankRewardTime&&this.rankCfgMaxNum>=this.getMySelfRank()},e.prototype.getMySelfHisRank=function(){return Iay(this,e)},e.prototype.reqAimReward=function(e){var p_l=new c2w_get_arenaRush_target_reward;p_l.id=e,DB.instance.query(c2w_get_arenaRush_target_reward,p_l)},e.invalidRank=9999,e}(),MemberStateType,KriegEntryType,KriegMonsterType,AutoStep,PermissionType,BilingShowType,GuildKriegModel=function(){function e(){this._stateTip=[(j_x("1016_360")),(j_x("2462_2035_1796")+j_x("1878_283")),(j_x("1796_1878_283")),(j_x("48_383")+"boss"+j_x(283))],this._autoDatas={},this._kriegAutoCfg={},this._mapTypeHash={},this._fbHash={},this._settles=[],this._itemCellGlobalPos={},this.init()}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){GuildKriegLogic.instance.init();var e=Config.guild_guildKrieg;for(var p_l in e){var p_g=e[p_l],b_s=p_g.monsterType;if(100<p_g.mapType){var d_u=this._mapTypeHash[p_g.mapType]||{};(this._mapTypeHash[p_g.mapType]=d_u)[p_g.lv]=p_g,this._fbHash[p_g.fbId]=p_g}if(0!=b_s&&p_g.type==KriegEntryType.NPC){var b_e=Math.floor(b_s/100);null==this._kriegAutoCfg[b_e]&&(this._kriegAutoCfg[b_e]=[]),this._kriegAutoCfg[b_e].push(p_g)}p_g.type==KriegEntryType.NPC&&(null==this._kriegAutoCfg[KriegEntryType.NPC]&&(this._kriegAutoCfg[KriegEntryType.NPC]=[]),this._kriegAutoCfg[KriegEntryType.NPC].push(p_g))}for(var p_l in Config.guild_guildKriegSettle){var d_m=Config.guild_guildKriegSettle[p_l];null==this._settles[d_m.monster]&&(this._settles[d_m.monster]=[]),this._settles[d_m.monster].push(d_m)}},Object.defineProperty(e.prototype,"kriegVO",{get:function(){return this._kriegVO||(this._kriegVO=new p_w),this._kriegVO},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kriegAutoCfg",{get:function(){return this._kriegAutoCfg},enumerable:!0,configurable:!0}),e.prototype.updateBaseInfo=function(e){Gys(e,this,LED,l_r)},e.prototype.updateItemInfo=function(e,p_l){void 0===p_l&&(p_l=!1),this.kriegVO.updateItemInfo(e,p_l),LED.event(l_r.GUILD_MERIEG_MAIN_UI_UPDATE)},e.prototype.getKriegCfgByFbId=function(e){return Mks(e,this)},e.prototype.getMonsterData=function(e,p_l){if(!this.kriegVO.guild_krieg_boss_list)return null;var p_g=this.kriegVO.guild_krieg_boss_list.list;for(var b_s in p_g){var d_u=p_g[b_s],b_e=Config.guild_guildKrieg[d_u.cnfId];if(d_u.id==e&&b_e.mapType==p_l)return p_g[b_s]}return null},e.prototype.getRealBoss=function(){if(!this.kriegVO.guild_krieg_boss_list)return null;var e=this.kriegVO.guild_krieg_boss_list.list;for(var p_l in e){var p_g=e[p_l].id;if(this.getSettleCfgByEntryId(p_g))return e[p_l]}return null},e.prototype.checkInActityMap=function(){var e=b_p.fbId,p_l=!1,p_g=Config.guild_guildKrieg;for(var b_s in p_g)if(p_g[b_s].fbId==e){p_l=!0;break}return p_l},e.prototype.updateBossList=function(e){Cmb(e,this,LED,l_r)},e.prototype.reqBossList=function(){var e=GuildModel.instance.guildInfo;if(e){var p_l=new c2w_guild_krieg_base_list;p_l.gid=e.id,DB.instance.query(c2w_guild_krieg_base_list,p_l)}},e.prototype.checkInMainMap=function(){var e=Config.global[GlobalDefine.guildKriegFbId].i_info,p_l=Config.fb_dungeon[e].mapId;return b_p.mapID==p_l},e.prototype.checkIsBossMap=function(){var e=b_p.fbId,p_l=this.getKriegCfgByFbId(e);return p_l&&p_l.type==KriegEntryType.BOSS},e.prototype.getSettleCfgByEntryId=function(e){return Oyi(e,this)},e.prototype.reqLeaveMap=function(){DB.instance.query(c2w_guild_krieg_leave_map,{})},e.prototype.getStateTip=function(e){var p_l=e;return p_l<0||p_l>=this._stateTip.length?"":this._stateTip[p_l]},e.prototype.reqBaseInfo=function(e){void 0===e&&(e=!1),e?DB.instance.query(c2w_guild_krieg_base_info,{}):this.kriegVO.level||DB.instance.query(c2w_guild_krieg_base_info,{})},e.prototype.reqPermissionSetting=function(e){var p_l=new c2w_guild_krieg_setting_att;p_l.type=e,DB.instance.query(c2w_guild_krieg_setting_att,p_l)},e.prototype.reqMainUIInfo=function(){DB.instance.query(c2w_guild_krieg_main_ui_info,{})},e.prototype.getKriegCfgByLv=function(e,p_l){return Ogl(e,p_l,this)},e.prototype.reqMemberInfo=function(){DB.instance.query(c2w_guild_krieg_member_info,{})},e.prototype.reqUseItem=function(e,p_l){var p_g=new c2w_guild_krieg_use_prop;p_g.id=e,p_g.count=p_l,DB.instance.query(c2w_guild_krieg_use_prop,p_g)},e.prototype.reqEnterMap=function(){DB.instance.query(c2w_guild_krieg_enter_map,{})},e.prototype.updateMainUIInfo=function(e){Mzv(e,this,LED,l_r)},e.prototype.checkMonsterCDExceed=function(e){if(!e)return!0;if(e.cd){var p_l=SyncTime.serverTime/1e3;return p_l<e.cd&&console.log(9999999),0<p_l-e.cd}return!0},e.prototype.updateMemberInfo=function(e){Cbn(e,this,LED,l_r)},e.prototype.checkFirstOpenPermissionPanel=function(){if(!e.firstOpen&&GuildModel.instance.guildInfo){var p_l=GuildModel.instance.getMemberByID(b_p.playerId);p_l&&p_l.office==GuildOfficeDefine.HUIZHANG&&(e.firstOpen=!0,UI.GuildKriegPermissionPanel.open())}},Object.defineProperty(e.prototype,"autoData",{set:function(e){for(var p_l in this._autoDatas)delete this._autoDatas[p_l];for(var p_g in e)1==e[p_g]&&(this._autoDatas[p_g]=this._kriegAutoCfg[p_g])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoDatas",{get:function(){return this._autoDatas},enumerable:!0,configurable:!0}),e.prototype.pushCellPos=function(e,p_l){Amc(e,p_l,this)},e.prototype.getCellPos=function(e){return Sni(e,this)},e.prototype.clear=function(){Ajp(e,this)},e.firstOpen=!1,e.shield=!1,e}();!function(e){e[e.OFF_LINE=0]="OFF_LINE",e[e.OFF_ACTIVITY=1]="OFF_ACTIVITY",e[e.ACTIVITYING=2]="ACTIVITYING",e[e.DARE_BOSS=3]="DARE_BOSS"}(MemberStateType=MemberStateType||{}),function(e){e[e.MONSTER=1]="MONSTER",e[e.COLLECT=2]="COLLECT",e[e.BOSS=3]="BOSS",e[e.NPC=4]="NPC"}(KriegEntryType=KriegEntryType||{}),function(e){e[e.BOSS=1]="BOSS",e[e.ELITE=2]="ELITE",e[e.MONSTER=3]="MONSTER"}(KriegMonsterType=KriegMonsterType||{}),function(e){e[e.BOSS=1]="BOSS",e[e.ELITE=2]="ELITE",e[e.MONSTER=3]="MONSTER",e[e.COLLECT=4]="COLLECT"}(AutoStep=AutoStep||{}),function(e){e[e.ALL=1]="ALL",e[e.ELITE=2]="ELITE"}(PermissionType=PermissionType||{}),function(e){e[e.WIN=1]="WIN",e[e.COLLECT=2]="COLLECT"}(BilingShowType=BilingShowType||{});var RunState,GuildKriegLogic=function(){function e(){this._nextIndex=1,this._state=0,this.MAX_STEP=4,this.USE_ITEM_INVATER=1e3,this.HOSTING_URL="res/ui/activity/guild/scene/Clip_tuoguanzhong_eft.png",this._useItemLastTime=0}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){Qbl(LED,l_r,this)},e.prototype.checkAutoUseItem=function(){var e=GuildKriegModel.instance,p_l=e.kriegVO.mainInfo.props;if(p_l){var p_g=LgcM.ins.getActorStdInfoById(b_p.playerId,Engine2d.ActorTypeDefine.PLAYER);if(!(p_g.isDead||p_g.hp<=0))for(var b_s=p_l.length,d_u=0;d_u<b_s;d_u++){var b_e=p_l[d_u],d_m=Config.guild_guildKriegCollect[b_e.id].condition;if(b_e.cdExceed&&0<b_e.amount)if(d_m){var d_w=Math.floor(p_g.hp/p_g.hpUpper*100);d_m[0]>=d_w&&(0<d_m[1]&&d_w<=d_m[1]||0==d_m[1])&&e.reqUseItem(b_e.id,1)}else e.reqUseItem(b_e.id,1)}}},e.prototype.moveToNpc=function(e){var p_l=LgcM.ins.getActorInfosByType(Engine2d.ActorTypeDefine.NPC),p_g=Engine2d.Hero.local;if(LgcM.ins.heroVo,p_l)for(var b_s in p_l){var d_u=p_l[b_s];if(d_u.entryId==e){var b_e=LgcM.ins.getActorById(d_u.id);return p_g.moveToObj(b_e),!0}}return!1},e.prototype.onCancel=function(){Cka(this)},e.prototype.onPlayerAdd=function(e){e&&e.hasOwnProperty("id")&&Engine2d.Hero.local&&e.id==Engine2d.Hero.local.id&&this.checkShowStateClip()},e.prototype.clear=function(){Kth(this,GuildKriegModel)},e.prototype.pause=function(){Cgz(this,RunState,Laya)},e.prototype.start=function(){Enw(this,RunState,Laya)},e.prototype.getNpcVo=function(e){return Kfh(e,LgcM,Engine2d)},e.prototype.onUpdate=function(){if(LgcM.ins.isMapLoadOver)if(GuildKriegModel.autoUseItem){var e=this._useItemLastTime+this.USE_ITEM_INVATER;SyncTime.getTimer()>e&&(this._useItemLastTime=SyncTime.getTimer(),this.checkAutoUseItem())}else{var p_l=this.getCurStep();-1!=p_l&&(9999==p_l?this.moveToCollect():this.moveToNpc(p_l))&&this.pause()}},e.prototype.onSceneChange=function(){var e=this,p_l=GuildKriegModel.instance;if(GuildKriegModel.shield,!p_l.checkInActityMap())return UIM.instance.releaseUI(UI.GuildKriegAutoPanel),this.reset(),this.pause(),void UIM.instance.setMainLeftUIVisible(!0);p_l.checkIsBossMap()||(GuildKriegModel.autoUseItem=!1);var p_g=p_l.checkInMainMap();UIM.instance.setMainLeftUIVisible(!1),p_g?GuildKriegModel.autoHosting&&Laya.timer.once(4e3,this,(function(){e.start()})):this.pause()},e.prototype.reset=function(){this._nextIndex=1,GuildKriegModel.autoHosting=!1,GuildKriegModel.autoUseItem=!1,Engine2d.Hero.local&&Engine2d.Hero.local.removeStateClip()},e.prototype.onAutoStateChange=function(){if(GuildKriegModel.autoUseItem)this.start();else{var e=GuildKriegModel.autoHosting;this.checkShowStateClip(),e?this.start():this.onCancel()}},e.prototype.hang=function(){Avm(this,RunState)},e.prototype.onCollectComplete=function(){Gyn(this)},e.prototype.checkShowStateClip=function(){var e=GuildKriegModel.autoHosting,p_l=Engine2d.Hero.local;p_l&&(e?p_l.setStateClip(!0,this.HOSTING_URL,{clipX:2,clipY:4,interval:100}):p_l.removeStateClip())},e.prototype.moveToCollect=function(){var e=LgcM.ins.getNearActorByView(Engine2d.ActorTypeDefine.COLLECT),p_l=Engine2d.Hero.local;return!!e&&(p_l.moveToObj(e),!0)},e.prototype.getCurStep=function(){var e=GuildKriegModel.instance.autoDatas[this._nextIndex],p_l=-1;if(e){var p_g=void 0,b_s=void 0;if(this._nextIndex==AutoStep.COLLECT)p_l=9999;else for(b_s=e.length,p_g=0;p_g<b_s;p_g++)if(this.checkCanAttack(e[p_g].monsterType))return e[p_g].entryId}return this._nextIndex++,this._nextIndex>this.MAX_STEP&&(this._nextIndex=1),p_l},e.prototype.checkCanAttack=function(e){var p_l=GuildKriegModel.instance,p_g=p_l.kriegVO;if(!p_g.guild_krieg_boss_list)return!0;var b_s=p_g.guild_krieg_boss_list.list;if(!b_s)return!0;if(!b_s.length)return!0;var d_u=p_l.getKriegCfgByLv(e,p_g.level);if(d_u){var b_e=p_l.getMonsterData(d_u.entryId,e);if(b_e){var d_m=b_e.cd;if(!d_m)return!0;if(!(0<=SyncTime.serverTime/1e3-d_m))return!1}}return!0},e.prototype.destroy=function(){Uqm(this,LED,l_r)},e}();!function(e){e[e.HANG=0]="HANG",e[e.START=1]="START",e[e.PAUSE=2]="PAUSE"}(RunState=RunState||{});var h_a=function(){function e(){DB.instance.on(w2c_guild_krieg_main_ui_info.opcode.toString(),this,this.onMainUIInfo),DB.instance.on(w2c_guild_krieg_use_prop.opcode.toString(),this,this.onUseItem),DB.instance.on(w2c_guild_krieg_base_info.opcode.toString(),this,this.onBaseInfo),DB.instance.on(w2c_guild_krieg_member_info.opcode.toString(),this,this.onMemberInfo),DB.instance.on(w2c_guild_krieg_broadcast_guild_item.opcode.toString(),this,this.onBroadcastGuildItem),DB.instance.on(w2c_guild_krieg_boss_list.opcode.toString(),this,this.onBossList),DB.instance.on(m2c_guild_krieg_reward_info.opcode.toString(),this,this.onReward),DB.instance.on(w2c_guild_krieg_boss_reward_info.opcode.toString(),this,this.onReward)}return e.prototype.destory=function(){DB.instance.off(w2c_guild_krieg_main_ui_info.opcode.toString(),this,this.onMainUIInfo),DB.instance.off(w2c_guild_krieg_use_prop.opcode.toString(),this,this.onUseItem),DB.instance.off(w2c_guild_krieg_base_info.opcode.toString(),this,this.onBaseInfo),DB.instance.off(w2c_guild_krieg_member_info.opcode.toString(),this,this.onMemberInfo),DB.instance.off(w2c_guild_krieg_broadcast_guild_item.opcode.toString(),this,this.onBroadcastGuildItem),DB.instance.off(w2c_guild_krieg_boss_list.opcode.toString(),this,this.onBossList)},e.prototype.onUseItem=function(e){var p_l=Config.guild_guildKriegCollect[e.id].itemId,p_g=Config.CItem(p_l),b_s=p_g.name;b_p.broadcastNotice(Utils.$((j_x("402_2142_1365")+j_x(1876))+b_s),BroadcastType.ITEM_GAIN,Utils.ItemUtils.getQualityColor(p_g.quality)),GuildKriegModel.instance.updateItemInfo([{id:e.id,count:e.count,cd:e.cd}],!0)},e.prototype.onMemberInfo=function(e){Kbv(e,GuildKriegModel)},e.prototype.onBaseInfo=function(e){Aoy(e,GuildKriegModel)},e.prototype.onBroadcastGuildItem=function(e){Axm(e,GuildKriegModel)},e.prototype.onMainUIInfo=function(e){Akf(e,GuildKriegModel)},e.prototype.onBossList=function(e){Wpg(e,GuildKriegModel)},e.prototype.onReward=function(e){2==(GuildKriegModel.instance.kriegVO.guild_krieg_reward_info=e).type&&GuildKriegModel.instance.reqBaseInfo(!0),GuildKriegModel.instance.checkInActityMap()&&(0==e.type?UI.GuildKriegBillingPanel.open(BilingShowType.COLLECT):1==e.type?UI.GuildKriegBillingPanel.open(BilingShowType.WIN):2==e.type&&UI.GuildKriegWinPanel.open())},e}(),investmentVo=function(){function e(){this.days=0,this.ids=0,this.items=[],this.Status=-1,this.type="",this.isBuy=!1,this.isRewared=!1}return e.prototype.pasteData=function(e){if(e){for(var p_l=0,p_g=e.reward;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new ModuleItemVO;d_u.id=b_s[0],d_u.amount=b_s[1],this.items.push(d_u)}this.days=e.day,this.ids=e.id,this.titleName=(j_x(573))+this.days+(j_x(2308))}},e}(),growUpVo=function(){function e(){this.ids=0,this.items=[],this.type="",this.titleName="",this.Status=-1,this.isRewared=!1}return e.prototype.pasteDate=function(e){if(e){for(var p_l=0,p_g=e.reward;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new ModuleItemVO;d_u.id=b_s[0],d_u.amount=b_s[1],this.items.push(d_u)}this.ids=e.id,this.getLv=e.level,this.titleName=(j_x("1017_1145_15")+j_x("2342_1117_1012"))+this.getLv+(j_x(2342))}},e.prototype.getStatus=function(){var e=0;return growUpModel.ins.isbuyGrowUpFound?LgcM.ins.heroVo.level>=this.getLv?1==this.Status?e=-1:0==this.Status&&(e=1):e=2:e=LgcM.ins.heroVo.level>=this.getLv?3:0,e},e}(),growUpModel=function(){function e(){this._logined_day=0,this._buy_growUpFund=!1,this._buy_investment=!1,this._growUpActId=69,this._investmentActId=68,this.getConfig()}return Object.defineProperty(e,"ins",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){var e=[],p_l=Config.activity_investmentPlan_growUpFundReward,p_g=Config.activity_investmentPlan_investmentPlanReward;for(var b_s in p_l)p_l.hasOwnProperty(b_s)&&e.push(p_l[b_s]);for(var b_s in this._growConf=e,e=[],p_g)p_g.hasOwnProperty(b_s)&&e.push(p_g[b_s]);this._investmentConf=e;var d_u=Config.activity_investmentPlan_investmentSetId;for(var b_s in d_u)d_u[b_s],(j_x("1188_115_867")+j_x(2444))==d_u[b_s].name?this._invSetConf=d_u[b_s]:(j_x("402_1066_110")+j_x(221))==d_u[b_s].name&&(this._growUpSetConf=d_u[b_s])},Object.defineProperty(e.prototype,"growUpFundInfo",{get:function(){return null==this._growUpFundInfo&&(this._growUpFundInfo=[]),this._growUpFundInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"investmentInfo",{get:function(){return null==this._investmentInfo&&(this._investmentInfo=[]),this._investmentInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"growUpConf",{get:function(){return this._growConf||(this._growConf=[]),this._growConf},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isbuyGrowUpFound",{get:function(){return this._buy_growUpFund},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isbuyInvestment",{get:function(){return this._buy_investment},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loginedDays",{get:function(){return this._logined_day},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"invSetConf",{get:function(){return this._invSetConf},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"growUpSetConf",{get:function(){return this._growUpSetConf},enumerable:!0,configurable:!0}),e.prototype.onUpdateInvestmentInfo=function(e){this._investmentInfo=[];for(var p_l=0,p_g=this._investmentConf;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new investmentVo,b_e=e.rewardStatus>>b_s.day-1&1;d_u.pasteData(b_s),d_u.Status=b_e,d_u.type=ActivityTypeDefine.GS_investmentPlan,this._investmentInfo.push(d_u)}this._logined_day=e.days,this._buy_investment=0<e.isBuy,this._investmentStop=0<e.isStop,LED.event(l_r.INVESTMENT_UPDATE_INFO),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.growUpFundActivityPanel),this._investmentStop&&this.delActIcon()},e.prototype.reqBuyInvestment=function(){var e=this._invSetConf.money,p_l=this._invSetConf.setId;b_p.recharge(e,p_l)},e.prototype.reqGetInvestmentReward=function(e){var p_l=c2w_gsaAct_get_investment_plan_reward,p_g=new p_l;p_g.day=e,DB.instance.query(p_l,p_g)},e.prototype.reqGetGrowUpFundReward=function(e){var p_l=c2w_gsaAct_get_grow_up_reward,p_g=new p_l;p_g.id=e,DB.instance.query(p_l,p_g)},e.prototype.onUpdateGrowUpInfo=function(e){this._growUpFundInfo=[];for(var p_l=0,p_g=this._growConf;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new growUpVo;d_u.pasteDate(b_s);var b_e=e.rewardStatus>>b_s.id-1&1;d_u.type=ActivityTypeDefine.GS_growUpFund,d_u.Status=b_e,this._growUpFundInfo.push(d_u)}this._buy_growUpFund=0<e.isBuy,this._growUpFundStop=0<e.isStop,LED.event(l_r.GROWUPFOUND_UPDATE_INFO),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.growUpFundActivityPanel),this._growUpFundStop&&this.delActIcon()},e.prototype.investmentRedPoint=function(){var e=this._investmentInfo;for(var p_l in e)if(0==e[p_l].Status&&this._logined_day>=e[p_l].days&&this.isbuyInvestment)return!0;return!1},e.prototype.delActIcon=function(){this._growUpFundStop&&this._investmentStop&&(ActivityModel.instance.removeGSActivity(this._investmentActId),ActivityModel.instance.removeGSActivity(this._growUpActId))},e.prototype.reqBuyGrowUpFound=function(){var e=this._growUpSetConf.money,p_l=this._growUpSetConf.setId;b_p.recharge(e,p_l)},e.prototype.growUpFundRedPoint=function(){var e=this._growUpFundInfo;for(var p_l in e)if(0==e[p_l].Status&&LgcM.ins.heroVo.level>=e[p_l].getLv&&this._buy_growUpFund)return!0;return!1},e}(),UI;!function(e){var p_l;(p_l=e.FastivalTab||(e.FastivalTab={}))[p_l.loginReward=0]="loginReward",p_l[p_l.RechargeGift=1]="RechargeGift",p_l[p_l.LottertDraw=2]="LottertDraw"}(UI=UI||{});var p_e=function(){function e(){this.day=0,this.state=0,this.items=[]}return e.prototype.parseData=function(e){if(e){this.items=[];for(var p_l=0,p_g=e.items;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new ModuleItemVO;d_u.id=b_s.id,d_u.amount=b_s.num,this.items.push(d_u)}this.day=e.day,this.state=e.receive_status}},e}(),FestivalGiftVo=function(){function e(){this.agio=0,this.productId=0,this.money=0,this.limit=0,this.items=[]}return e.prototype.parseData=function(e){if(e){for(var p_l=0,p_g=e.items;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new ModuleItemVO;d_u.id=b_s.id,d_u.amount=b_s.num,this.items.push(d_u)}this.agio=e.discount,this.giftName=e.money+(j_x("1263_861_130")),this.productId=e.grade,this.money=e.money,this.limit=e.limit,this.buy_count=e.buy_count,this.received_count=e.received_count}},Object.defineProperty(e.prototype,"isCanReward",{get:function(){return 0<this.buy_count-this.received_count},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCanBuy",{get:function(){return 0==this.limit||this.buy_count<this.limit},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isState",{get:function(){return this.isCanReward?1:this.isCanBuy?2:3},enumerable:!0,configurable:!0}),e}(),FestivalActivityModel=function(){function e(){this._FestivalfristRed=!0}return Object.defineProperty(e,"ins",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"festivalGift",{get:function(){return null==this._festivalGift&&(this._festivalGift=[]),this._festivalGift},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"festivalLoginVos",{get:function(){return null==this._festivalLoginVos&&(this._festivalLoginVos=[]),this._festivalLoginVos},enumerable:!0,configurable:!0}),e.prototype.getFestivalTimeByVo=function(e){if(e){var p_l="";if(this._date||(this._date=new Date),e.type==ActivityTypeDefine.BG_loginActivity){var p_g=e.showTime||0;p_g=e.stop-p_g,p_l=Utils.formatTimeStr4(e.start,!1)+"-"+Utils.formatTimeStr4(p_g,!1)}else p_g=e.showTime||0,p_g=e.stop-p_g-SyncTime.serverTime/1e3,p_l=Utils.formatTimeStr(p_g);return p_l}},e.prototype.onUpdateGiftInfo=function(e){this._festivalGift=[];for(var p_l=0,p_g=e.recordArr;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new FestivalGiftVo;d_u.parseData(b_s),this._festivalGift.push(d_u)}this._festivalGift.sort((function(e,p_l){return e.isState==p_l.isState?e.money-p_l.money:e.isState-p_l.isState})),LED.event(l_r.FESTIVAL_GIFT_INFO)},e.prototype.giftRedPoint=function(){var e=!1,p_l=this.festivalGift;for(var p_g in p_l)if(p_l[p_g].isCanReward){e=!0;break}return e},e.prototype.festivalRedPoint=function(e){return void 0===e&&(e=null),e?e.type==ActivityTypeDefine.BG_loginActivity?this.signRedPoint():e.type==ActivityTypeDefine.BG_holidayGift?this.giftRedPoint():this.lotterDrawRedPoint():this.giftRedPoint()||this.signRedPoint()||this.lotterDrawRedPoint()},e.prototype.reqGetGift=function(e){var p_l=c2w_bgaAct_holiday_gift_reward_get,p_g=new p_l;p_g.grade=e,p_g.activity_name=ActivityTypeDefine.BG_holidayGift,DB.instance.query(p_l,p_g)},e.prototype.reqBuyGift=function(e,p_l){Qhz(e,p_l,b_p)},e.prototype.signRedPoint=function(){var e=!1,p_l=this.festivalLoginVos;for(var p_g in p_l)if(1==p_l[p_g].state){e=!0;break}return e},e.prototype.reqGetReward=function(e){var p_l=c2w_bgaAct_login_activity_reward_get,p_g=new p_l;p_g.day=e,DB.instance.query(p_l,p_g)},e.prototype.lotterDrawRedPoint=function(){var e=!1,p_l=n_t.instance.getTimeConsume(LotterType.FESTIVAL);return n_t.instance.isConsumeCanShowRed(LotterType.FESTIVAL,p_l[0][0])&&(e=BagModel.instance.getItemCountByItemID(p_l[0][0],BagTypeDefine.BAG_TYPE_ITEM)>=p_l[0][1]||e),e},e.prototype.onDaySignInfo=function(e){this._festivalLoginVos=[];for(var p_l=0,p_g=e.recordArr;p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=new p_e;d_u.parseData(b_s),this._festivalLoginVos.push(d_u)}this._festivalLoginVos.sort((function(e,p_l){return p_l.state==e.state?e.day-p_l.day:e.state-p_l.state})),LED.event(l_r.FESTIVAL_SIGN_INFO)},e}(),ChristamasControl=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bossListHp",{get:function(){return this._bossListHp},enumerable:!0,configurable:!0}),e.prototype.UpdataBossListHp=function(e){e.fbType==DungeonType.ChristamasBoss&&(this._bossListHp=e.lst)},e.prototype.getBossHP=function(e){return Wpe(e,this)},Object.defineProperty(e.prototype,"monsterBossInfo",{get:function(){return this._monsterBossInfo},enumerable:!0,configurable:!0}),e.prototype.addEventListener=function(){Ckk(DB,w2c_bg_christmas_beat_monster_info,this,w2c_bg_christmas_beat_monster_get_rank,w2c_bg_christmas_beat_monster_boss_refreshed)},e.prototype.monsterBossRefreshed=function(){Cez(Config,UI,BossTpyeTip)},e.prototype.removeEventListener=function(){Wwa(DB,w2c_bg_christmas_beat_monster_info,this,w2c_bg_christmas_beat_monster_get_rank,w2c_bg_christmas_beat_monster_boss_refreshed)},e.prototype.reqChristmasChallengeBoss=function(e){var p_l=new c2w_bg_christmas_beat_monster_challenge_boss;p_l.fbId=e,DB.instance.query(c2w_bg_christmas_beat_monster_challenge_boss,p_l)},e.prototype.onChristmasBeatMonsterRankInfo=function(e){Ylk(e,LED,l_r)},e.prototype.reqChristmasGetReward=function(e){var p_l=new c2w_bg_christmas_beat_monster_get_reward;p_l.fbId=e,DB.instance.query(c2w_bg_christmas_beat_monster_get_reward,p_l)},e.prototype.onChristmasBeatMonsterInfo=function(e){Mew(e,this,LED,l_r,FuncDefine)},e.prototype.reqChristmasBeatMonsterInfo=function(){var e=new c2w_bg_christmas_beat_monster_info;DB.instance.query(c2w_bg_christmas_beat_monster_info,e)},e.prototype.reqChristmasDeatDmgInfo=function(){var e=new c2w_bg_christmas_beat_dmg_info;DB.instance.query(c2w_bg_christmas_beat_dmg_info,e)},e.prototype.reqChristmasBeatMonsterRankInfo=function(e){var p_l=new c2w_bg_christmas_beat_monster_get_rank;p_l.fbId=e,DB.instance.query(c2w_bg_christmas_beat_monster_get_rank,p_l)},e.prototype.updateBossRed=function(e){var p_l=!1;return 2==e.state?0==e.challengeNum&&(p_l=!0):3==e.state&&0==e.rewardState&&(p_l=!0),p_l},e.prototype.isRed=function(){var e=!1;if(!this.monsterBossInfo)return!1;for(var p_l in this.monsterBossInfo)if(this.updateBossRed(this.monsterBossInfo[p_l])){e=!0;break}return e},e}(),BGASessionVo=function(){function e(){}return e.prototype.getSubVo=function(e){return Gdn(e,this)},e.prototype.getSubVoByType=function(e){return Myd(e,this)},e.prototype.openDay=function(){var e=SyncTime.serverTime,p_l=1e3*this.beginDayTime;return Utils.subtractDate(p_l,e)+1},e.prototype.canGain=function(){if(!this.subVos||0===this.subVos.length)return!1;var e,p_l=!1;if(this.subVos&&0<this.subVos.length)for(var p_g in p_l=!0,this.subVos)this.subVos[p_g]&&(e=BGActivityModel.instance.getActivityDecDataByType(this.session,this.subVos[p_g].type))&&!e.canGain()&&(p_l=!1);return p_l},e}(),BGASessionSubVo=function(){function e(){}return Object.defineProperty(e.prototype,"sulTime",{get:function(){if(0<this.stop){var e=SyncTime.serverTime,p_l=1e3*this.stop;return Math.floor((p_l-e)/1e3)}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inShowTime",{get:function(){return 0<this.param.showTime&&this.sulTime<=this.param.showTime?this.sulTime:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toShowTime",{get:function(){return 0<this.param.showTime&&this.sulTime>=this.param.showTime?this.sulTime-this.param.showTime:0},enumerable:!0,configurable:!0}),e}(),BGActBaseConfigVo=function(){function e(){}return e.prototype.canGain=function(){return Ize()},e}(),TimeLimitModel=function(){function e(){this._statuDic={},this.isReq=!1}return e.prototype.reqPowerStatus=function(){var e=new c2w_bgaAct_powerGain_rank_info;DB.instance.query(c2w_bgaAct_powerGain_rank_info,e)},e.prototype.reqPvpStatus=function(){var e=new c2w_bgaAct_async_pvp_rank_info;DB.instance.query(c2w_bgaAct_async_pvp_rank_info,e)},e.prototype.reqXianYuanStatus=function(){var e=new c2w_bgaAct_xianYuanGain_rank_info;DB.instance.query(c2w_bgaAct_xianYuanGain_rank_info,e)},e.prototype.reqStatus=function(e){e===ActivityTypeDefine.BG_powerGainRank?this.reqPowerStatus():e===ActivityTypeDefine.BG_talismanGainRank?this.reqTalismanStatus():e===ActivityTypeDefine.BG_talismanAptGainRank?this.reqTalismanAptStatus():e===ActivityTypeDefine.BG_xianYuanGainRank?this.reqXianYuanStatus():e===ActivityTypeDefine.BG_asyncPvpScoreGainRank&&this.reqPvpStatus()},e.prototype.setStatus=function(e,p_l){void 0===p_l&&(p_l=0),this._statuDic[e]=1==p_l,LED.event(l_r.ACTIVITY_HT_TIMELIMIT)},e.prototype.reqTalismanAptStatus=function(){var e=new c2w_bgaAct_talismanAptGain_rank_info;DB.instance.query(c2w_bgaAct_talismanAptGain_rank_info,e)},e.prototype.reqTalismanStatus=function(){var e=new c2w_bgaAct_talismanGain_rank_info;DB.instance.query(c2w_bgaAct_talismanGain_rank_info,e)},e.prototype.getStatus=function(e){return!!this._statuDic[e]&&this._statuDic[e]},e.instance=new e,e}(),OpenServiceVo=function(){},OpenServiceRankVo=function(){this.topThreeInfo={}},OpenServiceAimVo=function(){},OpenserType,OpenserviceModel=function(){function e(){this.rankTypeByDay={},this.dayByrankType={},this.init()}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.openServiceInfo=[];var e=Config.activity_rushRank_opensvrResourceUrl,p_l=Config.activity_rushRank_opensvrAim,p_g=Config.activity_rushRank_opensvrReward;for(var b_s in e){var d_u=new OpenServiceVo;d_u.id=e[b_s].id,d_u.actID=e[b_s].actID,d_u.resUrlcnf=e[b_s],d_u.OpenServiceAimInfo=[],d_u.OpenServiceRankInfo=[],d_u.rankType=e[b_s].rankType,d_u.actDefine=e[b_s].typeDefine;var b_e=Config.activity_activity[d_u.actID];d_u.showTime=b_e.param.showTime,b_e&&b_e.cycle&&b_e.cycle[0]&&(b_e.cycle[0],Math.floor(d_u.showTime/86400));var d_m=new Date(1e3*SyncTime.serverOpenTime),d_w=60*d_m.getHours()*60+60*d_m.getMinutes()+d_m.getSeconds();for(var f_t in d_u.startTime=SyncTime.serverOpenTime-d_w+86400*(b_e.openDay-1),d_u.endTime=d_u.startTime+86400*b_e.closeDay-d_u.showTime-86400*(b_e.openDay-1),d_u.rewardTime=0,p_l)if(e[b_s].rankType===p_l[f_t].rankType){var v_z=new OpenServiceAimVo;v_z.status=1,v_z.type=p_l[f_t].rankType,v_z.aimCnf=p_l[f_t],d_u.OpenServiceAimInfo.push(v_z)}for(var d_h in p_g)if(p_g[d_h].rankType===e[b_s].rankType){var r_t=new OpenServiceRankVo;r_t.rankIndex=0,r_t.type=p_g[d_h].rankType,r_t.rankCnf=p_g[d_h],d_u.OpenServiceRankInfo.push(r_t)}this.openServiceInfo.push(d_u),this.rankTypeByDay[parseInt(b_s)]=e[b_s].rankType,this.dayByrankType[e[b_s].rankType]=parseInt(b_s)}},e.prototype.reqRankByOpenAct=function(){for(var e=1;e<=8;e++)this.rankTypeByDay[e]&&this.openServiceInfo[e-1]&&1e3*this.openServiceInfo[e-1].startTime<=SyncTime.serverTime&&RankModel.instance.reqGetRank(this.rankTypeByDay[e],1)},e.prototype.saveTopThreeInfo=function(e,p_l){Cod(e,p_l,this)},e.prototype.updateAimCondition=function(e){var p_l=this.rankTypeByDay[e],p_g=RankModel.instance.getRankDataByType(p_l),b_s=this.getDataByDayNum(e);if(b_s&&b_s.OpenServiceAimInfo&&b_s.OpenServiceAimInfo.length)for(var d_u in b_s.OpenServiceAimInfo)p_g&&b_s.OpenServiceAimInfo[d_u].aimCnf.condition<=p_g.getOwnValue()&&0!=b_s.OpenServiceAimInfo[d_u].status&&(b_s.OpenServiceAimInfo[d_u].status=2);LED.event(l_r.UPDATE_MAIN_OPENSER_RED)},e.prototype.reqgetRewardInfo=function(){for(var e in this.openServiceInfo){var p_l=ActivityModel.instance.getActTypeByRankType(this.openServiceInfo[e].rankType);p_l&&1e3*this.openServiceInfo[e].startTime<=SyncTime.serverTime&&ActivityModel.reqActivityRecord(p_l)}},e.prototype.isGetLevelAimAward=function(){var e=this.getDataByDayNum(OpenserType.eightday);if(e&&this.isOpenAct(OpenserType.eightday))for(var p_l in e.OpenServiceAimInfo)if(2===e.OpenServiceAimInfo[p_l].status)return!0;return!1},e.prototype.getRankTypeByDay=function(e){return Yja(e,this)},e.prototype.isGetLevelActivityAward=function(){var e=this.getDataByDayNum(OpenserType.eightday),p_l=RankModel.instance.getRankDataByType(e.rankType);return!!(1e3*e.endTime<=SyncTime.serverTime&&!e.rewardTime&&p_l&&0<p_l.getOwnIndex()&&p_l.getOwnIndex()<=10)},e.prototype.updateRankIncValue=function(){for(var e in this.openServiceInfo){var p_l=RankModel.instance.getRankDataByType(this.dayByrankType[parseInt(e)+1]);this.openServiceInfo[e].incValue=p_l?p_l.getOwnValue():0}},e.prototype.isOpenAct=function(e){var p_l=this.getDataByDayNum(e);return!!p_l&&SyncTime.serverTime>1e3*p_l.startTime},e.prototype.defaultOpenTab=function(){var e=0;if(this.isGetLevelActivityAward()||this.isGetLevelAimAward())return 0;for(var p_l in this.openServiceInfo){if(this.mainRed(this.openServiceInfo[p_l].id))return this.openServiceInfo[p_l].id-1;if(this.isOpenAct(this.openServiceInfo[p_l].id)&&(e=this.openServiceInfo[p_l].id-1),this.openServiceInfo[p_l].id===SevenDay.SEVEN_DAY)return e}return 0},e.prototype.isGetActivityReward=function(e){var p_l=this.getDataByDayNum(e),p_g=RankModel.instance.getRankDataByType(p_l.rankType);return!!(1e3*p_l.endTime<=SyncTime.serverTime&&!p_l.rewardTime&&p_g&&0<p_g.getOwnIndex()&&p_g.getOwnIndex()<=10)},e.prototype.mainRed=function(e){return Okb(e,this)},e.prototype.reqRankReward=function(e){var p_l=new c2w_activity_get_reward;p_l.type=e,DB.instance.query(c2w_activity_get_reward,p_l)},e.prototype.clearTopThreeInfo=function(e){Avo(e,this)},e.prototype.iconRed=function(){for(var e=1;e<=SevenDay.SEVEN_DAY;e++)if(this.isOpenAct(e)&&this.mainRed(e))return!0;return!(!this.isGetLevelActivityAward()&&!this.isGetLevelAimAward())},e.prototype.getDataByDayNum=function(e){return Mgr(e,this)},e.prototype.isGetAimReard=function(e){var p_l=this.getDataByDayNum(e);if(p_l&&this.isOpenAct(e))for(var p_g in p_l.OpenServiceAimInfo)if(2===p_l.OpenServiceAimInfo[p_g].status)return!0;return!1},e.prototype.reqAimReward=function(e,p_l){var p_g=new c2w_gsaAct_get_aim_reward;p_g.actName=e,p_g.id=p_l,DB.instance.query(c2w_gsaAct_get_aim_reward,p_g)},e}();!function(e){e[e.eightday=8]="eightday"}(OpenserType=OpenserType||{});var d_q=function(){function e(){DB.instance.on(w2c_gsaRec_opensvr_rank.opcode.toString(),this,this.onReturnRewardInfo)}return e.prototype.onReturnRewardInfo=function(e){var p_l=OpenserviceModel.instance.openServiceInfo;if(p_l&&0<p_l.length){var p_g=ActivityModel.instance.getRankTypeByActType(e.actName);for(var b_s in p_l)if(p_l[b_s].rankType===p_g){var d_u=p_l[b_s].OpenServiceAimInfo;if(d_u&&0<d_u.length)for(var b_e in d_u)for(var d_m in e.aims)d_u[b_e].aimCnf.idx===e.aims[d_m]&&(d_u[b_e].status=0);p_l[b_s].rewardTime=e.rewardTime}}LED.event(l_r.UPDATE_REWARD_INFO_OPENSER),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.OpenServiceFisrtView)},e}(),KFopenSerModel=function(){function e(){this.KFstatus=-1,this.KFtype=0,this.rankServerValue=[],this._ownServerId=0}return e.prototype.updateKFdata=function(e){Ayz(e,this,LED,l_r)},Object.defineProperty(e.prototype,"KF_status",{get:function(){return this.KFstatus},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"KF_Type",{get:function(){return this.KFtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RankServerValue",{get:function(){return this.rankServerValue||[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OwnServerId",{get:function(){return this._ownServerId},enumerable:!0,configurable:!0}),e.prototype.isSameServer=function(e){return Cli(e,this)},e.prototype.isInRank=function(e,p_l){return Umr(e,p_l,ActivityTypeDefine)},e.prototype.getKFData=function(){var e=new w2c_gain_rank_qual_info;e.pid=264814,e.status=1,e.type=1,DB.instance.event(w2c_gain_rank_qual_info.opcode.toString(),e)},e.prototype.getKFPowerRankServerValue=function(){var e=new q2c_csaRec_powerGain_rank;e.rewardTime=15685e5,e.serverRewardTime=15685e5,e.serverId=1,e.info=new Array;for(var p_l=1;p_l<=3;p_l++){var p_g=new x_server_rank_info;p_g.serverId=p_l,p_g.val=60*p_l,e.info.push(p_g)}DB.instance.event(q2c_csaRec_powerGain_rank.opcode.toString(),e)},e.prototype.sortRankServerData=function(){this.rankServerValue.sort((function(e,p_l){return p_l.value-e.value}))},e.prototype.calEmenyValue_posX=function(e){for(var p_l=10,p_g=1;10<=e/p_l;)p_l*=10,p_g+=1;return p_g},e.prototype.reqGetTalismanReward=function(e){var p_l=new c2q_csaAct_talismanGain_rank_reward;p_l.type=e,DB.instance.query(c2q_csaAct_talismanGain_rank_reward,p_l)},e.prototype.reqGetXianYuanReward=function(e){var p_l=new c2q_csaAct_xianYuanGain_rank_reward;p_l.type=e,DB.instance.query(c2q_csaAct_xianYuanGain_rank_reward,p_l)},e.prototype.reqGetPowerReward=function(e){var p_l=new c2q_csaAct_powerGain_rank_reward;p_l.type=e,DB.instance.query(c2q_csaAct_powerGain_rank_reward,p_l)},e.prototype.getRewards=function(e,p_l,p_g){void 0===p_g&&(p_g=GET_TYPE.SERVE);var b_s=RoundRewardManager.instance;return p_g==GET_TYPE.SERVE?b_s.getBGARankRewards(e,p_l):b_s.getLocalRankRewards(e,p_l)},e.prototype.reqGetPvpReward=function(e){var p_l=new c2q_csaAct_asyncPvp_rank_reward;p_l.type=e,DB.instance.query(c2q_csaAct_asyncPvp_rank_reward,p_l)},e.prototype.getServerRankIndex=function(e){var p_l,p_g,b_s=0;for(var d_u in this.rankServerValue)p_g=this.rankServerValue[d_u],p_l=this.isInRank(p_g.value,e),p_g.serverID==this.OwnServerId&&p_l&&(b_s=parseInt(d_u)+1);return b_s},e.prototype.reqGetTalismanAptReward=function(e){var p_l=new c2q_csaAct_talismanAptGain_rank_reward;p_l.type=e,DB.instance.query(c2q_csaAct_talismanAptGain_rank_reward,p_l)},e.prototype.reqGetReward=function(e,p_l){e===ActivityTypeDefine.BG_cs_powerGainRank?this.reqGetPowerReward(p_l):e===ActivityTypeDefine.BG_cs_talismanGainRank?this.reqGetTalismanReward(p_l):e===ActivityTypeDefine.BG_cs_talismanAptGainRank?this.reqGetTalismanAptReward(p_l):e===ActivityTypeDefine.BG_cs_xianYuanGainRank?this.reqGetXianYuanReward(p_l):e===ActivityTypeDefine.BG_cs_asyncPvpScoreRank&&this.reqGetPvpReward(p_l)},e.prototype.updateKFServer=function(e,p_l){for(var p_g in void 0===p_l&&(p_l=""),this.rankServerValue=[],e.info){var b_s=new RankServerTotalValue;b_s.serverID=e.info[p_g].serverId,b_s.value=e.info[p_g].val,(p_l==ActivityTypeDefine.BG_cs_asyncPvpScoreRank||0<b_s.value)&&this.rankServerValue.push(b_s)}this.sortRankServerData(),this._ownServerId=e.serverId,LED.event(l_r.KF_UPDATE_SERVER_VALUE)},e.prototype.reqHaveKFstatus=function(e,p_l){var p_g=new c2w_gain_rank_qual_info;p_g.pid=e,p_g.type=p_l,DB.instance.query(c2w_gain_rank_qual_info,p_g)},e.prototype.getRankData=function(){var e=new q2c_rank_page;e.type=1,e.myIdx=1,e.page=1,e.pageCount=1,e.myVal=900,e.myTime=15685e5,e.item=new Array;for(var p_l=1;p_l<=3;p_l++){var p_g=new x_rank_item;p_g.serverId=p_l,p_g.entryId=1,p_g.fashionAvatar=0,p_g.fashionClothes=0,p_g.fashionWeapon=0,p_g.guildId=0,p_g.guildName="",p_g.id=26454,p_g.name="sss2",p_g.power=56461,p_g.rank=p_l,p_g.serverId=p_l,p_g.time=15685e5,e.item.push(p_g)}DB.instance.event(q2c_rank_page.opcode.toString(),e)},e.instance=new e,e}(),RankServerTotalValue=function(){function e(){}return e.prototype.setData=function(e){Egt(e,this)},e}(),DailyRechargeManager=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.getDailyRechargeDatas=function(){var e=[],p_l=ActivityTypeDefine.GS_dailyRecharge,p_g=RoundRewardManager.instance.getLocalActivityRewards(p_l);for(var b_s in p_g){var d_u=ActivityModel.instance.dailyRechargeVo;d_u?e.push({id:p_g[b_s].id,type:p_l,status:d_u.rewardStatus>>p_g[b_s].id-1&1,setId:p_g[b_s].setId}):e.push({id:p_g[b_s].id,type:p_l,status:0,setId:p_g[b_s].setId})}return e},e.prototype.getConsumptionConfigRewards=function(e,p_l){var p_g=Config.activity_recharge_dailyConsumption[e].setId;if(0<p_g){var b_s=LgcM.ins.heroVo,d_u=Config.activity_recharge_dailyConsumption;for(var b_e in d_u){var d_m=d_u[b_e];if(d_m.setId===p_g&&d_m.round==p_l)return b_p.getRewardDatasByEntryId(d_u[b_e].reward,b_s.entryId)}}return null},e.prototype.getSingleConfigRewards=function(e,p_l){var p_g=Config.activity_recharge_singleRecharge[e].setId;if(0<p_g){var b_s=LgcM.ins.heroVo,d_u=Config.activity_recharge_singleRecharge;for(var b_e in d_u){var d_m=d_u[b_e];if(d_m.setId===p_g&&d_m.round==p_l)return b_p.getRewardDatasByEntryId(d_u[b_e].reward,b_s.entryId)}}return null},e.prototype.getDailyConfigRewards=function(e,p_l){var p_g=Config.activity_recharge_dailyRecharge[e].setId;if(0<p_g){var b_s=LgcM.ins.heroVo,d_u=Config.activity_recharge_dailyRecharge;for(var b_e in d_u){var d_m=d_u[b_e];if(d_m.setId===p_g&&d_m.round==p_l)return b_p.getRewardDatasByEntryId(d_u[b_e].reward,b_s.entryId)}}return null},e.prototype.getSingleRechargeDates=function(e){void 0===e&&(e=ActivityTypeDefine.GS_singleRecharge);var p_l=[],p_g=RoundRewardManager.instance.getLocalActivityRewards(e);for(var b_s in p_g){var d_u=ActivityModel.instance.singleRechargeVo,b_e=1;if(d_u){b_e=0;for(var d_m=d_u.record?d_u.record.length:0,d_w=0;d_w<d_m;++d_w){var f_t=d_u.record[d_w],v_z=RoundRewardManager.calcConfigId(p_g[b_s].round,f_t.id);if(f_t&&v_z==p_g[b_s].id){b_e=d_u.record[d_w].amt>d_u.record[d_w].rwd?1:-1;break}}}p_l.push({id:p_g[b_s].id,type:e,status:b_e,setId:p_g[b_s].setId})}return p_l},e.prototype.getreChargeConsumeDates=function(){var e=[],p_l=ActivityTypeDefine.GS_dailyConsumption,p_g=RoundRewardManager.instance.getLocalActivityRewards(p_l);for(var b_s in p_g){var d_u=ActivityModel.instance.dailyConsumptionVo;d_u?e.push({id:p_g[b_s].id,type:p_l,status:d_u.rewardStatus>>p_g[b_s].id-1&1,setId:p_g[b_s].setId}):e.push({id:p_g[b_s].id,type:p_l,status:0,setId:p_g[b_s].setId})}return e},e.prototype.getAcumRechargeDates=function(e){void 0===e&&(e=ActivityTypeDefine.GS_acumRecharge);var p_l=[],p_g=RoundRewardManager.instance.getLocalActivityRewards(e);for(var b_s in p_g){var d_u=ActivityModel.instance.acumRechargeVo;d_u?p_l.push({id:p_g[b_s].id,type:e,status:d_u.rewardStatus>>p_g[b_s].setId-1&1,setId:p_g[b_s].setId}):p_l.push({id:p_g[b_s].id,type:e,status:1,setId:p_g[b_s].setId})}return p_l},e.prototype.getSAcumConfigRewards=function(e,p_l){var p_g=Config.activity_recharge_acumRecharge[e].setId;if(0<p_g){var b_s=LgcM.ins.heroVo,d_u=Config.activity_recharge_acumRecharge;for(var b_e in d_u){var d_m=d_u[b_e];if(d_m.setId===p_g&&d_m.round==p_l)return b_p.getRewardDatasByEntryId(d_u[b_e].reward,b_s.entryId)}}return null},e}(),BGActivityModel=function(){function e(){}return e.prototype.addActivityData=function(e){this._data_acts||(this._data_acts={}),this._data_acts;var p_l,p_g=this._data_acts[e.session]||[];for(var b_s in p_g)if(p_g[b_s].aid===e.aid){p_g[b_s]=e,p_l=!0;break}p_l||(p_g.push(e),this._data_acts[e.session]=p_g),LED.event(l_r.ACTIVITY_BGA_SINGLE_INFO,e)},e.prototype.getActivitysBySession=function(e){return this._data_acts?this._data_acts[e]:null},e.prototype.getTimeLimitAllRewards=function(e,p_l){return void 0===e&&(e=RankType.LimitGuildCtrb),void 0===p_l&&(p_l=""),RoundRewardManager.instance.getLocalRankRewards(e,p_l)},e.prototype.getActivityDecDataByType=function(e,p_l){return Uri(e,p_l,this)},e.prototype.getActivityDecData=function(e,p_l){return Sef(e,p_l,this)},e.prototype.getKFopenserAllrewards_id=function(e,p_l){return void 0===e&&(e=RankType.KF_powerGainRank),void 0===p_l&&(p_l=""),RoundRewardManager.instance.getLocalRankRewards(e,p_l)},e.prototype.getOpenSerAllRewards=function(e){void 0===e&&(e=RankType.RushPower);var p_l=[],p_g=Config.activity_rushRank_opensvrReward;for(var b_s in p_g)p_g[b_s].rankType===e&&p_l.push(p_g[b_s].id);return p_l},e.prototype.getKFopenSerAllRewards=function(e,p_l){return void 0===e&&(e=RankType.KF_powerGainRank),void 0===p_l&&(p_l=""),RoundRewardManager.instance.getLocalRankRewards(e,p_l)},e.instance=new e,e}(),ActivityTypeDefine=function(){function e(){}return e.GS_firstRecharge="GS_firstRecharge",e.GS_dailyRecharge="GS_dailyRecharge",e.GS_singleRecharge="GS_singleRecharge",e.GS_acumRecharge="GS_acumRecharge",e.GS_dailyConsumption="GS_dailyConsumption",e.GS_opensvrPowerrank="GS_opensvrPowerrank",e.GS_opensvrFbStoryrank="GS_opensvrFbStoryrank",e.GS_xsapvpRank="GS_xsapvpRank",e.GS_xgmb="GS_xgmb",e.GS_qltb="GS_qltb",e.GS_stateBoss="GS_stateBoss",e.GS_bossCome="GS_bossCome",e.GS_invite="GS_invite",e.GS_zuhe="GS_zuhe",e.GS_sgsq="GS_sgsq",e.GS_limitGift="GS_limitGift",e.GS_drawcard="GS_drawcard",e.GS_friendDiscount="GS_friendDiscount",e.GS_limitReward="GS_limitReward",e.GS_mineWar="GS_mineWar",e.CS_mineWar="CS_mineWar",e.GS_talismanGainRank="GS_talismanGainRank",e.GS_xianYuanGainRank="GS_xianYuanGainRank",e.CS_crossBoss="CS_crossBoss",e.GS_xxsb="GS_xxsb",e.GS_guildKrieg="GS_guildKrieg",e.GS_turntableFashion="GS_turntableFashion",e.GS_turntableRide="GS_turntableRide",e.GS_opensvrTsGainRank="GS_opensvrTsGainRank",e.GS_opensvrXyGainRank="GS_opensvrXyGainRank",e.GS_opensvrRideGainRank="GS_opensvrRideGainRank",e.GS_opensvrDragonGainRank="GS_opensvrDragonGainRank",e.GS_opensvrMentalGainRank="GS_opensvrMentalGainRank",e.GS_opensvrAsyncGainRank="GS_opensvrAsyncGainRank",e.GS_opensvrPowerGainRank="GS_opensvrPowerGainRank",e.CS_dragonPalaceBoss="CS_dragonPalaceBoss",e.CS_dragonPalaceBigBoss="CS_dragonPalaceBigBoss",e.GS_opensvrContinuousRecharge="GS_opensvrContinuousRecharge",e.GS_opensvrDiscountRecharge="GS_opensvrDiscountRecharge",e.GS_opensvrAcumRecharge="GS_acumRecharge",e.CS_guardingNanTianMen="CS_guardingNanTianMen",e.GS_investmentPlan="GS_investmentPlan",e.GS_growUpFund="GS_growUpFund",e.BG_roulette="BG_roulette",e.GS_xsbgRank="GS_xsbgRank",e.GS_opensvrTsrank="GS_opensvrTsrank",e.GS_xsbanquetRank="GS_xsbanquetRank",e.GS_powerGainRank="GS_powerGainRank",e.GS_talismanAptGainRank="GS_talismanAptGainRank",e.BG_powerGainRank="BG_powerGainRank",e.BG_talismanGainRank="BG_talismanGainRank",e.BG_talismanAptGainRank="BG_talismanAptGainRank",e.BG_xianYuanGainRank="BG_xianYuanGainRank",e.GS_xgmb_festival="GS_xgmb_festival",e.GS_qltb_festival="GS_qltb_festival",e.BG_cs_powerGainRank="BG_cs_powerGainRank",e.BG_cs_talismanGainRank="BG_cs_talismanGainRank",e.BG_cs_talismanAptGainRank="BG_cs_talismanAptGainRank",e.BG_cs_xianYuanGainRank="BG_cs_xianYuanGainRank",e.BG_asyncPvpScoreGainRank="BG_asyncPvpScoreGainRank",e.BG_cs_asyncPvpScoreRank="BG_cs_asyncPvpScoreRank",e.BG_limitGift="BG_limitGift",e.BG_singleRecharge="BG_singleRecharge",e.BG_acumRecharge="BG_acumRecharge",e.BG_loginActivity="BG_loginActivity",e.BG_turntableHoliday="BG_turntableHoliday",e.BG_holidayGift="BG_holidayGift",e.BG_newHolidayGift="BG_newHolidayGift",e.BG_turntableNewHoliday="BG_turntableNewHoliday",e.BG_continueRecharge="BG_continueRecharge",e.BG_activenessGift="BG_activenessGift",e.BG_discountGift="BG_discountGift",e.BG_turntableTreasure="BG_turntableTreasure",e.BG_redEnvelops="BG_redEnvelopes",e.BG_double11="BG_double11",e.id_invite=16,e.BG_cs_marrySweetRank="BG_cs_marrySweetRank",e.GS_arenaRushRank="GS_arenaRushRank",e.BG_festivalTarget="BG_festivalTarget",e.BG_cs_chargeRank="BG_cs_chargeRank",e.BG_cs_consumeGoldRank="BG_cs_consumeGoldRank",e.BG_christmasBeatMonster="BG_christmasBeatMonster",e.BG_changeItem="BG_changeItem",e.GS_xjmb="GS_xjmb",e}(),ActivityTypeEnum,ActivityModel=function(){function e(){this.firstRecharge_red=!1,this._actTypeHashRankType={},this._gsaActList=[],this._actList=[],this._sweetAfterFirstRank=[]}return Object.defineProperty(e.prototype,"sweetRewardTime",{get:function(){return this._sweetRewardTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sweetMyIdx",{get:function(){return this._sweetMyIdx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sweetMyVal",{get:function(){return this._sweetMyVal},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sweetFirstRank",{get:function(){return this._sweetFirstRank},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sweetAfterFirstRank",{get:function(){return this._sweetAfterFirstRank},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sweetRankPageItem",{get:function(){return this._sweetRankPageItem},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serOpenTimeVo",{get:function(){return this._serOpenTimeVo||(this._serOpenTimeVo=new SerOpenTimeVo),this._serOpenTimeVo},enumerable:!0,configurable:!0}),e.prototype.onAttChange=function(){if(!this._isAllOpen&&this._clientActivities){var e=!(this._isAllOpen=!0);for(var p_l in this._clientActivities)!1===this._clientActivities[p_l].isOpen&&(this._clientActivities[p_l].isOpen=this._clientActivities[p_l].canOpen(),!1===this._clientActivities[p_l].isOpen?this._isAllOpen=!1:e=!0);if(e&&LED.event(l_r.ACTIVITY_C_INFO),this.sActivities){var p_g=[];for(var p_l in this.sActivities)!1===this.sActivities[p_l].isOpen&&(this.sActivities[p_l].isOpen=this.sActivities[p_l].canOpen(),!1===this.sActivities[p_l].isOpen?this._isAllOpen=!1:p_g.push(this.sActivities[p_l]));for(;0<p_g.length;){var b_s=p_g.shift();LED.event(l_r.ACTIVITY_DY_OPEN,b_s)}}}},e.prototype.updateAct=function(){Uxf(this,LED,l_r)},e.prototype.createAct=function(e){var p_l=new ActivityConfigVo;p_l.activityId=e.id,p_l.isOpen=p_l.canOpen(),p_l.sortWeight=e.sort,p_l.iconRow=e.row,this._clientActivities.push(p_l)},e.prototype.initActivities=function(){if(!this._clientActivities){var e=function(e,p_l,p_g){void 0===p_g&&(p_g=0),d_u._actTypeHashRankType[e]={rankType:p_l,rankType1:p_g,activityType:e,rewardTime:0,kfServeRewardTime:0,kfPersonRewardTime:0}};this._clientActivities=[];var p_l=Config.funcOpen,p_g=void 0;for(var b_s in p_l)if(0===(p_g=p_l[b_s]).openType&&1===p_g.showType){if(p_g.id===FuncDefine.monthCard&&!GPlatform.isShowRecharge){this._actList.push(p_g);continue}this.createAct(p_g)}this.updateAct();var d_u=this;e(ActivityTypeDefine.GS_xsbgRank,RankType.LimitGuildCtrb),e(ActivityTypeDefine.GS_xsapvpRank,RankType.LimitPvP),e(ActivityTypeDefine.GS_xsbanquetRank,RankType.LimitYanHui),e(ActivityTypeDefine.GS_powerGainRank,RankType.LimitPowerGainRank),e(ActivityTypeDefine.GS_talismanGainRank,RankType.LimitTalismanGain),e(ActivityTypeDefine.GS_talismanAptGainRank,RankType.LimitTalismanAptGain),e(ActivityTypeDefine.GS_xianYuanGainRank,RankType.LimitTalismanXianYuanGain),e(ActivityTypeDefine.BG_powerGainRank,RankType.LimitPowerGainRank_HT),e(ActivityTypeDefine.BG_talismanGainRank,RankType.LimitTalismanGain_HT),e(ActivityTypeDefine.BG_talismanAptGainRank,RankType.LimitTalismanAptGain_HT),e(ActivityTypeDefine.BG_xianYuanGainRank,RankType.LimitTalismanXianYuanGain_HT),e(ActivityTypeDefine.GS_opensvrPowerrank,RankType.RushPower),e(ActivityTypeDefine.GS_opensvrTsrank,RankType.RushTalisman),e(ActivityTypeDefine.BG_cs_powerGainRank,RankType.KF_powerGainRank),e(ActivityTypeDefine.BG_cs_talismanGainRank,RankType.KF_talismanGainRank),e(ActivityTypeDefine.BG_cs_talismanAptGainRank,RankType.KF_talismanAptRank),e(ActivityTypeDefine.BG_cs_xianYuanGainRank,RankType.KF_XianYuanRank),e(ActivityTypeDefine.BG_asyncPvpScoreGainRank,RankType.BG_asyncPvpScoreGainRank),e(ActivityTypeDefine.BG_cs_asyncPvpScoreRank,RankType.KF_asyncPvpRank),e(ActivityTypeDefine.GS_xgmb,RankType.LimitActivityPersonal,RankType.LimitActivityGuild),e(ActivityTypeDefine.GS_xgmb_festival,RankType.LimitActivityPersonal_xgmb_festival,RankType.LimitActivityGuild_xgmb_festival),e(ActivityTypeDefine.GS_qltb,RankType.LimitActivityPersonal2,RankType.LimitActivityGuild2),e(ActivityTypeDefine.GS_qltb_festival,RankType.LimitActivityPersonal_qltb_festival,RankType.LimitActivityGuild_qltb_festival),e(ActivityTypeDefine.GS_opensvrFbStoryrank,RankType.OpenserviceLevel),e(ActivityTypeDefine.GS_opensvrTsGainRank,RankType.OpenServiceTalisman),e(ActivityTypeDefine.GS_opensvrXyGainRank,RankType.OpenServiceXianYuan),e(ActivityTypeDefine.GS_opensvrRideGainRank,RankType.OpenServiceRide),e(ActivityTypeDefine.GS_opensvrDragonGainRank,RankType.OpenServiceDragon),e(ActivityTypeDefine.GS_opensvrMentalGainRank,RankType.OpenServiceCitta),e(ActivityTypeDefine.GS_opensvrAsyncGainRank,RankType.OpenServicePVP),e(ActivityTypeDefine.GS_opensvrPowerGainRank,RankType.OpenServiceFight),e(ActivityTypeDefine.BG_cs_marrySweetRank,RankType.KF_marrySweetRank)}},e.prototype.getActCnfVo=function(e){var p_l;return(p_l=new ActivityConfigVo).activityId=e.id,p_l.isOpen=p_l.canOpen(),p_l.sortWeight=e.sort,p_l.iconRow=e.row,p_l},e.prototype.sortActivity=function(e,p_l){return Cwa(e,p_l)},Object.defineProperty(e.prototype,"clientActivities",{get:function(){return this._clientActivities},enumerable:!0,configurable:!0}),e.prototype.getActDataByType=function(e){return Isf(e,this)},e.prototype.addBGActivity=function(p_l){this.sActivities||(this.sActivities=[]);var p_g=p_l.icon||0;if(this.checkActCanOpen(p_g)){var b_s,d_u=this.getActivityConfigVo(p_g);d_u||(d_u=new ActivityConfigVo,FuncDefine.CarnivalAcitvity==p_g?d_u.isOpen=GPlatform.isQQVersion("8.2.0"):d_u.isOpen=p_k.instance.checkSystemOpen(p_g),d_u.activityId=p_g,(b_s=Config.funcOpen[p_g])?(d_u.sortWeight=b_s.sort,d_u.iconRow=b_s.row):console.log(("funcOpen"+j_x("2025_1971_1896")+j_x("1038_1012")),p_g),d_u.startTime=p_l.openTime,d_u.endTime=p_l.closeTime,this.sActivities.push(d_u),this.sActivities.sort(this.sortActivity)),d_u.subVo||(d_u.subVo=[]);var b_e=new ActivityVO;b_e.enum=ActivityTypeEnum.BG,b_e.type=p_l.type,b_e.bga_session=p_l.session,b_e.start=p_l.openTime,b_e.stop=p_l.closeTime,b_e.dec=p_l.txt,b_e.round=p_l.round,b_e.showTime=p_l.showTime||0,d_u.endTime<p_l.closeTime&&(d_u.endTime=p_l.closeTime),d_u.subVo.push(b_e),b_e.type==ActivityTypeDefine.BG_cs_asyncPvpScoreRank&&(this.crossPvpActVo=d_u),LED.event(l_r.ACTIVITY_DY_OPEN,d_u),e.reqActivityRecord(p_l.type),p_k.instance.dyActivityOpenToDo(b_e.type)}},e.prototype.getActTime=function(e){var p_l=0,p_g=0,b_s=Config.activity_activity[ActivityTypeDefine.id_invite];if(b_s){var d_u=2,b_e=0,d_m=30;b_s.cycle&&(d_u=b_s.cycle[0],b_s.cycle[1]),b_s.startTime&&(b_e=Utils.getHourTime(b_s.startTime),d_m=Utils.getHourTime(b_s.stopTime));var d_w=SyncTime.openDay;if(d_w<b_s.closeDay){var f_t=d_w%d_u,v_z=SyncTime.serverTime,d_h=new Date(v_z);d_h.setHours(0),d_h.setMinutes(0),d_h.setSeconds(0),p_l=b_e+(v_z=d_h.getTime())-SyncTime.getDayTime(f_t),p_g=SyncTime.getDayTime(d_u-f_t-1)+d_m+v_z}}return[p_l,p_g]},e.prototype.updateActDataSPTime=function(e,p_l,p_g){var b_s=this.getActDataByType(e);b_s&&(b_s.kfServeRewardTime=p_l,b_s.kfPersonRewardTime=p_g)},e.prototype.getRankTypeByActType=function(e){var p_l=this.getActDataByType(e);return p_l?p_l.rankType:-1},e.prototype.getActivityVoByType=function(e){if(!this.sActivities||0===this.sActivities.length)return null;for(var p_l in this.sActivities)if(this.sActivities[p_l].subVo&&0<this.sActivities[p_l].subVo.length)for(var p_g in this.sActivities[p_l].subVo)if(this.sActivities[p_l].subVo[p_g].type===e)return this.sActivities[p_l].subVo[p_g];return null},e.prototype.getStaticActivity=function(e){return Awj(e,this)},e.reqGSActivityQuery=function(){DB.instance.query(c2w_gsa_query,{})},e.prototype.addGSActivity=function(e){var p_l=e.id,p_g=e.startTime,b_s=e.endTime,d_u=e.round;if(this.sActivities||(this.sActivities=[]),p_l&&Config.activity_activity[p_l]){var b_e=Config.activity_activity[p_l].iconInfo||0;if(this.checkActCanOpen(b_e)){var d_m=this.getActivityConfigVo(b_e);d_m||((d_m=new ActivityConfigVo).isOpen=p_k.instance.checkSystemOpen(b_e),d_m.activityId=b_e,d_m.startTime=0,d_m.endTime=0,d_m.sortWeight=Config.funcOpen[b_e]?Config.funcOpen[b_e].sort:0,d_m.iconRow=Config.funcOpen[b_e]?Config.funcOpen[b_e].row:0,this.sActivities.push(d_m),this.sActivities.sort(this.sortActivity)),d_m.subVo||(d_m.subVo=[]);var d_w=new ActivityVO;d_w.enum=ActivityTypeEnum.GS,d_w.gsa_id=p_l,d_w.type=Config.activity_activity[p_l].type,d_w.start=p_g,d_w.stop=b_s,d_w.round=d_u;var f_t=b_s;d_m.endTime<f_t&&(d_m.endTime=f_t),d_m.subVo.push(d_w),"GS_turntableMarry"==d_w.type&&(this.marryLotterCfg=new ActivityConfigVo,this.marryLotterCfg.subVo=[],this.marryLotterCfg.subVo.push(d_w)),"CS_timeCrossBoss"==d_w.type&&(f_a.instance.hasOpenPanel=!1,LED.event(l_r.CROSS_BOSS_TIMEBOSS_OPEN)),LED.event(l_r.ACTIVITY_DY_OPEN,d_m),p_k.instance.dyActivityOpenToDo(d_w.type)}else this._gsaActList.push(e)}},e.prototype.removeGSActivity=function(e){if(this.sActivities&&0!==this.sActivities.length)for(var p_l=0;p_l<this.sActivities.length;++p_l){var p_g=this.sActivities[p_l];if(p_g.subVo&&0!==p_g.subVo.length)for(var b_s=0;b_s<p_g.subVo.length;++b_s)if(p_g.subVo[b_s].gsa_id===e){p_g.subVo.splice(b_s,1),0===p_g.subVo.length&&this.sActivities.splice(p_l,1);var d_u=Config.funcOpen[p_g.activityId];return d_u&&UI.WindowClass.closeWin(d_u.openWin),void LED.event(l_r.ACTIVITY_DY_CLOSE,p_g)}}},e.prototype.checkXsRankReward=function(e){void 0===e&&(e=null);var p_l=this.getActivityVoByType(e),p_g=this.getActDataByType(e);if(p_g){var b_s=p_g.rankType,d_u=RankModel.instance.getRankDataByType(b_s);if(p_l&&d_u){var b_e=p_g.rewardTime,d_m=d_u.getOwnIndex(),d_w=BGActivityModel.instance.getTimeLimitAllRewards(b_s,e);if(!d_w)return!1;if(!d_w)return!1;var f_t=d_w[d_w.length-1];if(p_l.inShowTime_KF&&0===b_e&&0<d_m&&d_m<=f_t.endIdx)return!0}return!1}},e.prototype.checkActCanOpen=function(e){return!!(e!==FuncDefine.firstRecharge&&e!==FuncDefine.acumRecharge&&e!==FuncDefine.dailyRecharge&&e!==FuncDefine.limitReward||GPlatform.isShowRecharge)},e.reqActivityRecord=function(e){DB.instance.query(c2w_activity_record,{type:e})},e.prototype.updateLimitGift=function(e){Crh(e,this,LED,l_r)},e.prototype.updateSweetGainRank=function(e){Erk(e,this)},e.prototype.updateCharge=function(){if(0<this._actList.length){for(var e=void 0,p_l=this._actList.length-1;0<=p_l;p_l--)e=this._actList[p_l],this.createAct(e),this._actList.splice(p_l,1);this.updateAct()}if(0<this._gsaActList.length){var p_g=void 0;for(p_l=this._gsaActList.length-1;0<=p_l;p_l--)p_g=this._gsaActList[p_l],this.addGSActivity(p_g),this._gsaActList.splice(p_l,1)}},e.prototype.checkOsRankReward=function(e){var p_l=this.getActivityVoByType(e),p_g=this.getActDataByType(e);if(!p_g)return!1;var b_s=p_g.rankType,d_u=RankModel.instance.getRankDataByType(b_s);if(p_l&&d_u){var b_e=p_g.rewardTime,d_m=d_u.getOwnIndex(),d_w=BGActivityModel.instance.getOpenSerAllRewards(b_s),f_t=d_w[d_w.length-1],v_z=Config.activity_rushRank_opensvrReward[f_t];if(p_l.inShowTime&&0===b_e&&v_z&&0<d_m&&d_m<=v_z.endIdx)return!0}return!1},e.prototype.updateLimitReward=function(e){Cpz(e,LimitRewardModel)},e.prototype.removeBGActivity=function(e){if(this.sActivities&&0!==this.sActivities.length)for(var p_l=0;p_l<this.sActivities.length;++p_l){var p_g=this.sActivities[p_l];if(p_g.subVo&&0!==p_g.subVo.length)for(var b_s=0;b_s<p_g.subVo.length;++b_s)if(p_g.subVo[b_s].type===e){p_g.subVo.splice(b_s,1),0===p_g.subVo.length&&this.sActivities.splice(p_l,1);var d_u=Config.funcOpen[p_g.activityId];return d_u&&UI.WindowClass.closeWin(d_u.openWin),void LED.event(l_r.ACTIVITY_DY_CLOSE,p_g)}}},e.prototype.checkKFServerReward=function(e){void 0===e&&(e=null);var p_l=this.getActivityVoByType(e);if(p_l){var p_g=this.getActDataByType(e),b_s=p_g?p_g.kfServeRewardTime:0;if(p_l.inShowTime_KF&&0===b_s&&this.checkServerIsOntheLst(e))return!0}return!1},e.prototype.updateBgLimitGift=function(e){Olg(e,this,LED,l_r)},e.prototype.getActTypeByRankType=function(e){for(var p_l in this._actTypeHashRankType){var p_g=this._actTypeHashRankType[p_l];if(p_g.rankType==e)return p_g.activityType}return null},e.prototype.checkServerIsOntheLst=function(e){var p_l,p_g=KFopenSerModel.instance.RankServerValue;for(var b_s in p_g)if((p_l=p_g[b_s]).serverID===KFopenSerModel.instance.OwnServerId)return KFopenSerModel.instance.isInRank(p_l.value,e);return!1},e.prototype.checkKFPersonalReward=function(e){void 0===e&&(e=null);var p_l=this.getActivityVoByType(e),p_g=this.getActDataByType(e);if(p_l&&p_g){var b_s=p_g.rankType,d_u=RankModel.instance.getRankDataByType_KF(b_s);if(d_u){var b_e=p_g.kfPersonRewardTime,d_m=d_u.getOwnIndex(),d_w=BGActivityModel.instance.getKFopenserAllrewards_id(b_s,e),f_t=d_w?d_w[d_w.length-1]:null;if(p_l.inShowTime_KF&&0===b_e&&f_t&&0<d_m&&d_m<=f_t.endIdx&&1==KFopenSerModel.instance.KF_status)return!0}}return!1},e.prototype.getActivityConfigVoByName=function(e){if(!this.sActivities||0===this.sActivities.length)return null;for(var p_l in this.sActivities){var p_g=Config.funcOpen[this.sActivities[p_l].activityId];if(p_g&&p_g.name===e)return this.sActivities[p_l]}return null},e.prototype.getActivityConfigVo=function(p_l){return Wni(p_l,FuncDefine,e,this)},e.prototype.getLimitGiftBuy=function(e,p_l){if(this.limitGiftInfo){var p_g=this.limitGiftInfo.list;for(var b_s in e-=100*p_l,p_g){var d_u=p_g[b_s];if(d_u.id==e)return d_u}return null}},e.prototype.getActivityConfigVoByType=function(e){if(!this.sActivities||0===this.sActivities.length)return null;for(var p_l in this.sActivities)if(this.sActivities[p_l].subVo&&0<this.sActivities[p_l].subVo.length)for(var p_g in this.sActivities[p_l].subVo)if(this.sActivities[p_l].subVo[p_g].type===e)return this.sActivities[p_l];return null},e.prototype.updateActDataRewardTime=function(e,p_l){var p_g=this.getActDataByType(e);p_g&&(p_g.rewardTime=p_l)},e.reqBGAConfig=function(e){DB.instance.query(c2w_bga_desc,{type:e})},e.prototype.reqSweetGainRankReward=function(){DB.instance.query(c2w_csaAct_sweetGain_rank_reward,{})},e.prototype.getLottertShowTime=function(e){var p_l=0,p_g=e.enum==ActivityTypeEnum.BG;if(e&&!p_g){var b_s=Config.activity_activity[e.gsa_id].param;p_l=b_s&&b_s.showTime?b_s.showTime:0}else p_l=e.showTime;return p_l},e.reqBGActivityQuery=function(){DB.instance.query(c2w_bga_query,{})},e.prototype.updateSweetRankPage=function(e){Geg(e,this)},e.instance=new e,e}(),ActivityVO=function(){function e(){}return Object.defineProperty(e.prototype,"sulTime",{get:function(){if(0<this.stop){var e=SyncTime.serverTime,p_l=1e3*this.stop;return Math.floor((p_l-e)/1e3)}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inShowTime",{get:function(){var e=Config.activity_activity[this.gsa_id];return e&&e.param&&0<e.param.showTime&&this.sulTime<=e.param.showTime?this.sulTime:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toShowTime",{get:function(){var e=Config.activity_activity[this.gsa_id];return e&&e.param&&0<e.param.showTime&&this.sulTime>=e.param.showTime?this.sulTime-e.param.showTime:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inShowTime_KF",{get:function(){return this.showTime&&this.sulTime<=this.showTime?this.sulTime:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toShowTime_KF",{get:function(){return this.showTime&&this.sulTime>=this.showTime?this.sulTime-this.showTime:0},enumerable:!0,configurable:!0}),e}(),ActivityConfigVo=function(){function e(){this.sortWeight=0,this.iconRow=0,this.isOpen=!1,this.isClick=!1}return e.prototype.canOpen=function(){return Aak(this,p_k)},e.prototype.canClose=function(){return Wjn(this)},e}(),SerOpenTimeVo=function(){function e(){}return Object.defineProperty(e.prototype,"openSerDay",{get:function(){return Utils.subtractDate(ActivityModel.instance.serOpenTimeVo.time,SyncTime.serverTime)+1},enumerable:!0,configurable:!0}),e}();!function(e){e[e.ST=0]="ST",e[e.GS=1]="GS",e[e.BG=2]="BG"}(ActivityTypeEnum=ActivityTypeEnum||{});var p_k=function(){function e(){}return e.prototype.dyActivityOpenToDo=function(e){var p_l=LgcM.ins.heroVo;if(e!=ActivityTypeDefine.GS_bossCome)if(e!=ActivityTypeDefine.GS_limitGift){if(e!=ActivityTypeDefine.GS_mineWar)if(e!=ActivityTypeDefine.BG_roulette)if(e!=ActivityTypeDefine.GS_drawcard)if(e!=ActivityTypeDefine.GS_friendDiscount){ActivityModel.reqActivityRecord(e);var p_g=ActivityModel.instance.getActDataByType(e);if(p_g){var b_s=p_g.rankType;RankModel.instance.reqGetRank(b_s,1),null!=p_g.rankType1&&RankModel.instance.reqGetRank(p_g.rankType1,1)}}else p_l&&p_l.id&&DB.instance.query(c2w_friend_discount_info,{pid:p_l.id});else DB.instance.query(c2m_drawcard_info,{actType:1});else DB.instance.query(c2w_roulette_record,{type:3})}else LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.shop);else{var d_u=Config.map[b_p.mapID];d_u&&d_u.funType&&(d_u.funType==MapFunType.CITY||d_u.funType==MapFunType.HangUp||d_u.funType==MapFunType.WILD)&&UI.BossComeRemindPanel.open()}},e.prototype.btnCanVisible=function(e){if(!e)return!1;switch(e.activityId){case FuncDefine.SevenDayServer:var p_l=!1;return 1==z_s.ins.openStatus&&(p_l=!0),p_l}return!0},e.prototype.checkSystemOpen=function(e,p_l){void 0===p_l&&(p_l=!1);var p_g=Config.funcOpen[e];if(p_g&&p_g.condition){var b_s=p_p.instance.mainVo,d_u=LgcM.ins.heroVo;if(!d_u)return!1;var b_e=void 0,d_m=void 0,d_w=p_g.condition.length;for(var f_t in p_g.condition)if(b_e=p_g.condition[f_t][0],d_m=p_g.condition[f_t][1],"level"===b_e)d_u.level>=d_m&&d_w--;else if("task"===b_e)(!b_s||b_s.id>d_m)&&d_w--;else if("statelv"===b_e){var v_z=StateModel.instance.getStateSubLv();p_l&&(v_z=null!=v_z?v_z:1/0),(d_u.stateLv>d_m||d_u.stateLv==d_m&&v_z>=(p_g.condition[f_t][2]||0))&&d_w--}else"isFlyUp"===b_e&&(1==d_m?d_u.heavenOpenState&&d_w--:d_w--);return 0===d_w}return!0},e.prototype.getCanReward=function(e,p_l){if(!p_l)return!1;var p_g=p_l;switch(p_g.activityId){case FuncDefine.office:case FuncDefine.vein:case FuncDefine.state:return p_g.canOpen();case FuncDefine.talisman:return ShopModel.instance.onTimer();case FuncDefine.welfare:if(p_g.canOpen()){var b_s=SigninModel.instance.canSignin(),d_u=SigninModel.instance.isShowRedPoint();return!!(b_s||d_u||BenefitModel.instance.hasReward())}return p_g.canOpen();case FuncDefine.stove:return ActivenessModel.instance.canGain();case FuncDefine.OpenServiceFisrtView:return OpenserviceModel.instance.iconRed()||openSvrSevenActivityModel.ins.discoutRedPoint()||openSvrSevenActivityModel.ins.conRecRedPoint()||ActivenessModel.instance.redSingle(ActivityTypeDefine.BG_acumRecharge);case FuncDefine.xsRank:return x_p.instance.xsRankHasReward();case FuncDefine.bossCome:return!0;case FuncDefine.stateBoss:return DungeonModel.instance.canEnterStateBoss();case FuncDefine.sgsq:case FuncDefine.xxsb:var b_e=Config.activity_sgsq_exchange,d_m=ActivityModel.instance.sgsqRechargeVo2,d_w=Config.activity_sgsq_exchange,f_t=ActivityModel.instance.xxsbRechargeVo,v_z=Config.activity_xjmb_exchange,d_h=ActivityModel.instance.xjmbRechargeVo;return this.checkSgsqRed(b_e,d_m)||this.checkSgsqRed(d_w,f_t)||this.checkSgsqRed(v_z,d_h);case FuncDefine.dailyRecharge:return!(!ActivenessModel.instance.redSingle(ActivityTypeDefine.GS_dailyRecharge)&&!ActivenessModel.instance.redSingle(ActivityTypeDefine.GS_dailyConsumption));case FuncDefine.acumRecharge:return!!(ActivenessModel.instance.redSingle(ActivityTypeDefine.GS_singleRecharge)||ActivenessModel.instance.redSingle(ActivityTypeDefine.GS_acumRecharge)||ActivenessModel.instance.redSingle(ActivityTypeDefine.BG_singleRecharge)||ActivenessModel.instance.redSingle(ActivityTypeDefine.BG_acumRecharge));case FuncDefine.firstRecharge:var r_t=ActivityModel.instance.firstRechargeVo;return!!(r_t&&600<=r_t.gold);case FuncDefine.shop:var t_n=ActivityModel.instance.getActivityVoByType(ActivityTypeDefine.GS_friendDiscount),f_y=ActivityModel.instance.getActivityVoByType(ActivityTypeDefine.GS_limitGift),p_q=this.checkSystemOpen(FuncDefine.FriendBargain);return t_n&&p_q&&!f_y?FriendBargainModel.instance.checkAllBuyBtnRed()||!FriendBargainModel.instance._isClickFriendBargain:t_n&&p_q||!f_y?FriendBargainModel.instance.checkAllBuyBtnRed()||!p_g.isClick||!FriendBargainModel.instance._isClickFriendBargain:!p_g.isClick;case FuncDefine.zuhe:return ZuHeModel.instance.hasReward;case FuncDefine.xgmb:case FuncDefine.qltb:case FuncDefine.xgmbFestival:case FuncDefine.qltbFestival:var h_h=p_g.subVo[0];if(h_h&&h_h.inShowTime){var n_j=h_h.type;if(LimitActivityModel.instance.checkGetRewards(LimitActivityRankType.personal,h_h)&&0==LimitActivityModel.instance.getRoleRwdTime(n_j))return!0;if(LimitActivityModel.instance.checkGetRewards(LimitActivityRankType.guild,h_h)&&0==LimitActivityModel.instance.getGuildRwdTime(n_j))return!0}return!1;case FuncDefine.rank:return null!=RankModel.instance.getRankDirction()&&RankModel.instance.checkIsHaveShip();case FuncDefine.findGod:var j_l=!(BagModel.instance.getItemCountByItemID(266113)<1),l_m=!(BagModel.instance.getItemCountByItemID(266114)<1),z_m=ActivityModel.instance.drawcardInfo;if(z_m){var h_b=SyncTime.serverTime/1e3,t_i=z_m.lastDrawTime,n_f=z_m.lastActDrawTime,t_s=Config.global[1100].i_info,v_n=Config.global[1101].i_info;if(t_i+t_s-h_b<=0||n_f+v_n-h_b<=0)return!0}return j_l||l_m;case FuncDefine.GodWealth:var b_o=ActivityModel.instance.rouletterecord;return 1==x_p.instance.ogOdwealth||!b_o||b_o.rechargeTotal!=b_o.rechargeCostCount&&(0<b_o.freeCount||0<b_o.rechargeCount);case FuncDefine.monthCard:return!!RechargeModel.instance.checkCardCanGet(CardType.lifeLongCard)||!!RechargeModel.instance.checkCardCanGet(CardType.weekcard)||!p_g.isClick;case FuncDefine.limitReward:return 0!=LimitRewardModel.instance.checkLimitRewardStatus();case FuncDefine.KFopensvrRank:var b_x=ActivityModel.instance.getActivityConfigVo(FuncDefine.KFopensvrRank);if(b_x){var v_s=b_x.subVo[0];return!!v_s&&(x_p.instance.KFRankHasPersonalReward(v_s.type)||x_p.instance.KFRankHasServerReward(v_s.type))}return!1;case FuncDefine.LottertDrawFashion:return n_t.instance.getMemberInfo(LotterType.FASHION).isRedPoint;case FuncDefine.LottertDrawRide:return n_t.instance.getMemberInfo(LotterType.RIDE).isRedPoint;case FuncDefine.LottertDrawLucky:return n_t.instance.getMemberInfo(LotterType.LUCKY).isRedPoint;case FuncDefine.LottertDrawMental:return n_t.instance.getMemberInfo(LotterType.HEART).isRedPoint;case FuncDefine.LottertDrawDragon:return n_t.instance.getMemberInfo(LotterType.DRAGON).isRedPoint;case FuncDefine.shop_1:return!ShopModel.instance.isBuyDiscountItem();case FuncDefine.FestivalActivity:for(var r_c=0,b_n=p_g.subVo;r_c<b_n.length;r_c++){var v_p=b_n[r_c];if(FestivalActivityModel.ins.festivalRedPoint(v_p))return!0}return FestivalActivityModel.ins._FestivalfristRed;case FuncDefine.WeekActivity:for(var d_d=0,h_q=p_g.subVo;d_d<h_q.length;d_d++)if(v_p=h_q[d_d],WeekendActivityModel.ins.weekendRedPoint(v_p))return!0;return WeekendActivityModel.ins._WeekendfristRed;case FuncDefine.MonthActivity:for(var x_f=0,j_s=p_g.subVo;x_f<j_s.length;x_f++){var f_u=j_s[x_f];if(MonthActivityModel.ins.monthRedPoint(f_u))return!0}return!1;case FuncDefine.openSvrSevenActivityPanel:return OpenserviceModel.instance.iconRed()||openSvrSevenActivityModel.ins.discoutRedPoint()||openSvrSevenActivityModel.ins.conRecRedPoint()||ActivenessModel.instance.redSingle(ActivityTypeDefine.BG_acumRecharge);case FuncDefine.growUpFundActivityPanel:return growUpModel.ins.growUpFundRedPoint()||growUpModel.ins.investmentRedPoint();case FuncDefine.SevenDayServer:return z_s.ins.isRed();case FuncDefine.serRankGymActivity:return MergeSerGymModel.ins.isRed();case FuncDefine.RechargeRank:return!!p_g.subVo[0]&&RechargeRankModel.ins.isRed(p_g.subVo[0].round,ActivityTypeDefine.BG_cs_chargeRank);case FuncDefine.RecConsRank:return!!p_g.subVo[0]&&RechargeRankModel.ins.isRed(p_g.subVo[0].round,ActivityTypeDefine.BG_cs_consumeGoldRank);case FuncDefine.ChristmasBeatMonster:return ChristamasControl.ins.isRed()}},e.prototype.checkSystemOpenByName=function(e,p_l){void 0===p_l&&(p_l=!1);var p_g=Config.Utils.getWindowByName(e);if(p_g&&0<p_g.funcID){var b_s=this.checkSystemOpen(p_g.funcID);return!b_s&&p_l&&b_p.broadcastNotice(Config.funcOpen[p_g.funcID].openError),b_s}return!0},e.prototype.checkSgsqRed=function(e,p_l){var p_g=0,b_s=0;if(!p_l||!e)return!1;if(e)for(var d_u in e)if(b_s++,b_p.checkConsume(e[d_u].material)){if(!p_l||!p_l.exchange)return!0;if(p_l.exchange&&p_l.exchange.length<1)return!0;if(p_l.exchange)for(var b_e in p_l.exchange)p_l.exchange[b_e].id==e[d_u].id&&p_l.exchange[b_e].num>=e[d_u].limit&&p_g++}return!(b_s<=p_g)&&0<p_g},e.instance=new e,e}(),ActivityIconManager=function(){function e(){this._iconHash={}}return e.prototype.addIcon=function(e,p_l){if(e){var p_g=Laya.Pool.getItemByClass("iconData",IconData);p_g.icon=e,p_g.open=!1,p_g.type=p_l,this._iconHash[p_l]=p_g}},e.prototype.start=function(){Qcy(this,Laya)},e.prototype.remove=function(e){Udn(e,this,Laya)},e.prototype.onFrameLoop=function(){var e=!0;for(var p_l in this._iconHash)e=!1,this._iconHash[p_l].onFrameLoop();e&&Laya.timer.clear(this,this.onFrameLoop)},e.instance=new e,e}(),IconData=function(){function e(){}return e.prototype.reset=function(){Yne(this)},e.prototype.getNextTime=function(){this._date||(this._date=new Date);var e=0;for(var p_l in Config.activity_activity){var p_g=Config.activity_activity[p_l];if(p_g.type==this.type){if(!p_g||null==p_g)return;var b_s=p_g.openDay;if(0<b_s&&Utils.subtractDate(1e3*SyncTime.serverOpenTime,SyncTime.serverTime)+1<b_s)return;var d_u=p_g.startTime.split(":"),b_e=this._date;b_e.setTime(SyncTime.serverTime),b_e.setHours(parseInt(d_u[0]),parseInt(d_u[1]),0,0);var d_m=b_e.getTime();if(d_u=p_g.stopTime.split(":"),b_e.setHours(parseInt(d_u[0]),parseInt(d_u[1]),0,0),d_m<SyncTime.serverTime&&SyncTime.serverTime<b_e.getTime())return this.nextTime=b_e.getTime(),void(this.open=!0);b_e.setTime(d_m),d_m>SyncTime.serverTime&&(0==e||e>b_e.getTime())&&(e=b_e.getTime()),b_e.setTime(d_m+864e5),b_e.getTime()>SyncTime.serverTime&&(0==e||e>b_e.getTime())&&(e=b_e.getTime()),this.nextTime=e,this.open=!1}}},e.prototype.onFrameLoop=function(){this.nextTime>=SyncTime.serverTime?this.open?(this.icon.visible||(this.icon.visible=!0,UIM.instance.getMainLetUI().sortRightBox()),this.icon.timeCountTxt&&(this.icon.timeCountTxt.text=this.formatTimeStr(Math.ceil((this.nextTime-SyncTime.serverTime)/1e3))+(j_x("1865_396_2426")))):this.nextTime-SyncTime.serverTime<18e5?(this.icon.visible||(this.icon.visible=!0,UIM.instance.getMainLetUI().sortRightBox()),this.icon.timeCountTxt&&(this.icon.timeCountTxt.text=this.formatTimeStr(Math.ceil((this.nextTime-SyncTime.serverTime)/1e3))+(j_x("1865_155_1186")))):this.icon.visible&&(this.icon.visible=!1,UIM.instance.getMainLetUI().sortRightBox()):(this.icon.visible&&(this.icon.visible=!1,UIM.instance.getMainLetUI().sortRightBox()),this.getNextTime())},e.prototype.formatTimeStr=function(e){var p_l=Math.floor(e/60),p_g=Math.floor(e-60*p_l);return(p_l<10?"0"+p_l:p_l)+":"+(p_g<10?"0"+p_g:p_g)},e}(),ActivityData=function(){},ActivenessExtraRewardStatus,ActivenessModel=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.updateInfo=function(e){this.init();var p_l=e.activeness;if(p_l&&0<p_l.length){for(var p_g in p_l){var b_s=this.getStateVo(p_l[p_g].id);b_s&&b_s.update(p_l[p_g])}this._rewardStates=this._rewardStates.sort(this.sortCompare)}for(var p_g in(!p_l||p_l.length<=0)&&this.init(1),this._exrRewards)this._exrRewards[p_g].reward=this.getExrStatus(this._exrRewards[p_g].id,e.exRewardStatus);LED.event(l_r.ACTIVENESS_INFO)},e.prototype.redSingle=function(e){if(!ActivityModel.instance.getActivityVoByType(e))return!1;if(e==ActivityTypeDefine.GS_singleRecharge||e==ActivityTypeDefine.BG_singleRecharge){var p_l=DailyRechargeManager.instance.getSingleRechargeDates(e);for(var p_g in p_l){var b_s=RoundRewardManager.instance.getLocalActivityRewards(e),d_u=p_l[p_g].id,b_e=0;if(p_q=ActivityModel.instance.singleRechargeVo)for(var d_m=p_q.record?p_q.record.length:0,d_w=0;d_w<d_m;++d_w){var f_t=RoundRewardManager.calcConfigId(b_s[p_g].round,p_q.record[d_w].id);if(p_q.record[d_w]&&f_t==d_u){if(p_q.record[d_w].amt>p_q.record[d_w].rwd)return b_e=1,!0;b_e=-1;break}}if(1=={id:d_u,status:b_e}.status)return!0}}else if(e==ActivityTypeDefine.GS_acumRecharge||e==ActivityTypeDefine.BG_acumRecharge){var v_z=DailyRechargeManager.instance.getAcumRechargeDates(e);for(var p_g in v_z){d_u=v_z[p_g].setId;var d_h=1;if((p_q=ActivityModel.instance.acumRechargeVo)&&(d_h=p_q.rewardStatus>>d_u-1&1,b_s=Config.activity_recharge_acumRecharge[v_z[p_g].id],0===d_h&&b_s&&(d_h=p_q.gold>=b_s.charge?0:-1)),0=={id:d_u,status:d_h}.status)return!0}}else if(e==ActivityTypeDefine.GS_dailyRecharge){var r_t=DailyRechargeManager.instance.getDailyRechargeDatas();for(var p_g in r_t){d_u=r_t[p_g].id;var t_n=1;if((p_q=ActivityModel.instance.dailyRechargeVo)&&(t_n=p_q.rewardStatus>>d_u-1&1,b_s=Config.activity_recharge_dailyRecharge[d_u],0===t_n&&b_s&&(t_n=p_q.gold>=b_s.charge?0:-1)),0=={id:d_u,status:t_n}.status)return!0}}else if(e==ActivityTypeDefine.GS_dailyConsumption){var f_y=DailyRechargeManager.instance.getreChargeConsumeDates();for(var p_g in f_y){d_u=f_y[p_g].id;var p_q,h_h=1;if((p_q=ActivityModel.instance.dailyConsumptionVo)&&(h_h=p_q.rewardStatus>>d_u-1&1,b_s=Config.activity_recharge_dailyConsumption[d_u],0===h_h&&b_s&&(h_h=p_q.gold>=b_s.gold?0:-1)),0=={id:d_u,status:h_h}.status)return!0}}return!1},e.prototype.reqActivenessReward=function(e){var p_l=new c2m_activeness_reward;p_l.id=e,DB.instance.query(c2m_activeness_reward,p_l)},e.prototype.updateRewardState=function(e){var p_l=this.getStateVo(e.id);p_l&&(p_l.reward=1,this._rewardStates=this._rewardStates.sort(this.sortCompare),LED.event(l_r.ACTIVENESS_SINGLE_UPDATE,p_l))},e.prototype.getExrDatas=function(){return Iiv(this)},e.prototype.sortCompare=function(e,p_l){var p_g=e.canGain()?0:1,b_s=p_l.canGain()?0:1;return p_g==b_s?e.reward===p_l.reward?e.id-p_l.id:e.reward-p_l.reward:p_g-b_s},e.prototype.isTip=function(){Ava(b_p,j_x,BroadcastType)},e.prototype.init=function(e){if(void 0===e&&(e=0),!this._rewardStates){var p_l=Config.activeness_activeness;this._rewardStates=[];var p_g=void 0;for(var b_s in p_l)(p_g=new ActivenessStateVo).id=p_l[b_s].id,p_g.targetCount=p_l[b_s].condition[1],this._rewardStates.push(p_g)}if(!this._exrRewards){this._exrRewards=[];var d_u=Config.activeness_reward,b_e=void 0;for(var b_s in d_u)(b_e=new ActivenessExrRewardVo).id=d_u[b_s].id,b_e.reward=0,this._exrRewards.push(b_e)}if(0<e){for(var b_s in p_l=Config.activeness_activeness,this._rewardStates=[],p_g=void 0,p_l)(p_g=new ActivenessStateVo).id=p_l[b_s].id,p_g.targetCount=p_l[b_s].condition[1],p_g.progress=0,this._rewardStates.push(p_g);LED.event(l_r.ACTIVENESS_SINGLE_UPDATE)}},e.prototype.updateExrRewardState=function(e){var p_l=this.getExrRewardVo(e.id);p_l&&(p_l.reward=1,this._rewardStates=this._rewardStates.sort(this.sortCompare),LED.event(l_r.ACTIVENESS_EXR_UPDATE)),Laya.timer.once(500,this,this.isTip)},e.prototype.getExrRewardVo=function(e){return Aav(e,this)},e.prototype.calPoint=function(){return Waz(this)},e.prototype.getExrStatus=function(e,p_l){return Whr(e,p_l)},e.prototype.canExtraReward=function(e){for(var p_l=this.calPoint(),p_g=Config.activeness_reward[e].point,b_s=0,d_u=this._exrRewards;b_s<d_u.length;b_s++){var b_e=d_u[b_s];if(b_e&&b_e.reward!=ActivenessExtraRewardStatus.hasget&&b_e.id==e&&p_g<=p_l)return!0}return!1},e.prototype.reqActivenessList=function(){var e=new c2m_activeness_list;DB.instance.query(c2m_activeness_list,e)},e.prototype.getDatas=function(){return Ymo(this)},e.prototype.canGain=function(){if(!this._rewardStates&&!this._exrRewards)return!1;if(this._rewardStates)for(var e in this._rewardStates)if(this._rewardStates[e].canGain())return!0;if(this._exrRewards){var p_l=this.calPoint();for(var e in this._exrRewards)if(this._exrRewards[e].canGain(p_l))return!0}return!1},e.prototype.getStateVo=function(e){return Qab(e,this)},e.prototype.updateProgress=function(e){var p_l=this.getStateVo(e.id);p_l&&(p_l.progress=e.progress,p_l.canGain()&&(this._rewardStates=this._rewardStates.sort(this.sortCompare)),LED.event(l_r.ACTIVENESS_SINGLE_UPDATE,p_l))},e.prototype.reqExreward=function(e){var p_l=new c2m_activeness_exreward;p_l.id=e,DB.instance.query(c2m_activeness_exreward,p_l)},e}(),ActivenessStateVo=function(){function e(){this.progress=0,this.reward=0}return e.prototype.update=function(e){Etc(e,this)},e.prototype.canGain=function(){return Idf(this)},Object.defineProperty(e.prototype,"point",{get:function(){var e=Config.activeness_activeness[this.id];return 1===this.reward?e.point:0},enumerable:!0,configurable:!0}),e}(),ActivenessExrRewardVo=function(){function e(){}return e.prototype.canGain=function(e){var p_l=Config.activeness_reward[this.id].point;return 0===this.reward&&p_l<=e},e}();!function(e){e[e.unget=0]="unget",e[e.hasget=1]="hasget"}(ActivenessExtraRewardStatus=ActivenessExtraRewardStatus||{});var r_f=function(){function e(){}return e.prototype.isWindow=function(e){var p_l=Config.itemGet[e];if(p_l)p_l&&p_l.shopId?UI.AccessPanel.open(e,0):UI.AccessTipPanel.open(e);else{var p_g=Config.CItem(e);p_g&&b_p.broadcastNotice(p_g.name+(j_x("2462_1779")))}},e.prototype.isWindows=function(e,p_l,p_g){void 0===p_l&&(p_l=0),void 0===p_g&&(p_g=0);var b_s=Config.itemGet[e];if(b_s)b_s&&b_s.shopId?UI.AccessPanel.open(e,p_l,p_g):UI.AccessTipPanel.open(e);else{var d_u=Config.CItem(e);d_u&&b_p.broadcastNotice(d_u.name+(j_x("2462_1779")))}},e.instance=new e,e}(),LgcM=function(){function e(){this._actorInfoDic={},this._actorEntityDic={},this._disappearDic={},this._isFirst=!0,this._downTarget=null,this._frameInterval=0,this._dataParse=-1,this.isShowScene=!1,this._resComplete=!1,this._breakDic={}}return Object.defineProperty(e.prototype,"isMapLoadOver",{get:function(){return this._isMapLoadOver},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isShowLoading",{get:function(){return!(!this._sceneLoadingPanel||!this._sceneLoadingPanel.parent)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loginLoadingUI",{set:function(e){this._loginLoadingUI=e},enumerable:!0,configurable:!0}),e.prototype.setLoginLoadingContent=function(e,p_l,p_g){void 0===p_l&&(p_l=!1),void 0===p_g&&(p_g=1),this._loginLoadingUI&&(this._loginLoadingUI.visible=!0,this._loginLoadingUI.setContent(e),this._loginLoadingUI.setProgressSpeed(p_g),p_l&&this._loginLoadingUI.startToLoad())},e.prototype.clearLoginRes=function(){Syk(Laya,Resource)},e.prototype.removeLoginLoadingUI=function(){this._loginLoadingUI&&this._loginLoadingUI.parent&&(b_p.isPloting||UIM.instance.hideUIMask(),this._loginLoadingUI.removeSelf(),this._loginLoadingUI.destroy(!0),this._loginLoadingUI=null,LED.event(l_r.SCENE_LOAD_OVER),Laya.timer.once(5e3,this,this.clearLoginRes))},e.prototype.init=function(e,p_l){if(!this._isInit){this._isInit=!0,p_l=GPlatform.concaveButtomY?GPlatform.stageHeight:p_l,this._mapContainer=new Laya.Sprite,Laya.stage.addChild(this._mapContainer),this._mapContainer.scrollRect=new Laya.Rectangle(0,0,e,p_l);var p_g=new Laya.Sprite;Laya.stage.addChild(p_g),UIM.instance.init(p_g),Engine2d.GameMap.defaultMap=new Engine2d.GameMap,Engine2d.GameMap.defaultMap.setDisplayContainer(this._mapContainer),Engine2d.GameMap.defaultMap.setDisplaySize(e,p_l),Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.onResize(),Laya.stage.on(Laya.Event.RESIZE,this,this.onResize),Laya.stage.on(Laya.Event.VISIBILITY_CHANGE,this,this.onVisibilityChange),LED.on(l_r.CLICK_ACTOR,this,this.onClickActor),LED.on(l_r.DROP_START_PICK,this,this.onDropPick),LED.on(l_r.COLLECT_START_PICK,this,this.onCollectStartPick),LED.on(l_r.LOCAL_POSCHANGED,this,this.heroPosChange),LED.on(l_r.SCENE_LOAD_OVER,this,this.onSceneLoadOver),d_s.instance.setDisplayContainer(this._mapContainer),JumpManager.init(),d_o.instance.init(),SetupModel.instance.initSetting(),this._loginLoadingUI&&this._loginLoadingUI.parent&&(UIM.instance.showUIMask(),SubpackageMgr.ins.setChildIndex(),Laya.stage.setChildIndex(this._loginLoadingUI,Laya.stage.numChildren-1)),Laya.ResourceManager.currentResourceManager.autoRelease=!GPlatform.isQQDelRes,console.log("GPlatform.isQQDelRes==",GPlatform.isQQDelRes),Laya.ResourceManager.currentResourceManager.autoReleaseMaxSize=452984832,Laya.Loader.stayReleaseRes=Resource.ResManager.Instance.stayReleaseImageRes.bind(Resource.ResManager.Instance),SubpackageMgr.ins.resetTopMaskSp()}},e.prototype.onVisibilityChange=function(e){Eyz(e,this,Laya)},e.prototype.setHide=function(e){void 0===e&&(e=!1),e?Laya.stage.renderingEnabled=!0:(Laya.stage.renderingEnabled=!1,GPlatform.isMap&&SyncTime.sendToHeartBeat(),GPlatform.isHide=!0)},Object.defineProperty(e.prototype,"isPop",{get:function(){return!GPlatform.isReconnectIng},enumerable:!0,configurable:!0}),e.prototype.onResize=function(e){void 0===e&&(e=null),UIM.instance.onResize()},e.prototype.changeMapToDo=function(){Yvg(this,j_a,UIM,LED,l_r)},e.prototype.deleteInfoById=function(e){Goq(e,this)},e.prototype.checkCanMove=function(){return Kph(GuildKriegModel,b_p,j_x)},e.prototype.delaySendToReady=function(){this.setProgressShowContent((j_x("506_2035_1529")+j_x("1713_836_2391")+"..."),2),GPlatform.isMap=!0,this.sendMapReady(),PopPropManager.instance.isFirstTo&&RecordManager.instance.sendRecord(RecordManager.API_ACCOUNT,{step:RecordTypeDefine.STEP_MAP_RES_LOAD_COMPLETE})},e.prototype.showScene=function(){this._isMapLoadOver=!0;var e=this._isFirst;this._isFirst&&(this._startTime=SyncTime.tickCount,UserLocalStore.saveData("userName",GConfig.inst.account),RecordManager.instance.reportInviteTo(),RecordManager.instance.reportServerInfo(),j_a.sceIns().add(RecordManager.instance,RecordManager.instance.sendRecordDevice),j_a.sceIns().add(this,this.delaySendServerInfo),this._isFirst=!1,WXPlatform.instance.gameInit(),HswxPlatform.instance.gameInit(),XjwxPlatform.instance.gameInit(),QQMiniPlatform.instance.gameInit(),H5XJPlatform.ins.gameInit(),RoundRewardManager.instance.init()),UIM.instance.showMainUI(),0<Config.map[b_p.mapID].dramaId&&LED.on(l_r.PLOTING_END,this,this.onSceneLoadOver),!this._sceneLoadingPanel||this._sceneLoadingPanel.parent||e||b_p.isPloting||j_a.sceIns().add(this,this.changeMapToDo),j_a.sceIns().add(UIM.instance,UIM.instance.showSceneChangeView),this.setProgressShowContent((j_x("506_2035_33")+j_x("2456_836_2391")+"..."),2),j_a.sceIns().add(this,this.delayChangeScene)},e.prototype.onBack=function(){Gtt(console)},e.prototype.deleteActorInfo=function(e,p_l){var p_g=this._actorInfoDic[e];if(null!=p_g){var b_s=p_g[p_l];null!=b_s&&(b_s.destroy()&&(b_s=null),delete p_g[p_l])}},e.prototype.clearMapData=function(){j_a.sceIns().add(this,this.clearAllActor),j_a.sceIns().add(this,this.clearDisappear),j_a.sceIns().add(Engine2d.GameMap.defaultMap,Engine2d.GameMap.defaultMap.clearMap),j_a.sceIns().add(Laya.AtlasResourceManager.instance,Laya.AtlasResourceManager.instance.freeMapAll),j_a.sceIns().add(Resource.MapResManager.instance,Resource.MapResManager.instance.clearFreeMemory,[!0]),Engine2d.FightingController.act_Dic={}},e.prototype.onMapSceResComplete=function(e){var p_l=e.x,p_g=e.y;if(n_m.instance.isHangUpMap()){var b_s=Config.map[b_p.mapID].entry;p_l=b_s[0],p_g=b_s[1]}this.setProgressShowContent((j_x("506_2035_223")+j_x("1770_118_1527")+j_x("737_115_1519")+"..."),2),Engine2d.GameMap.defaultMap.startParseMap(p_l,p_g);var d_u=Engine2d.GameMap.defaultMap.getMinimapUrl();Laya.loader.load(d_u,Laya.Handler.create(this,this.minimapLoadOver,[d_u]),null,Laya.Loader.IMAGE,1)},e.prototype.onMouseDown=function(e){UIM.instance.isOpenWin(UI.HelperPanel);var p_l=UIM.instance.getMainUI();p_l&&p_l.contains(e.target)?this._downTarget=e.target:this.onMouseClick(e)},e.prototype.addRobotEnity=function(e,p_l){this.addActorEntity(e,p_l);var p_g=this.getActorById(p_l.id,e);if(p_g){var b_s=Config.obj_robot[p_l.entryId].avatar;p_g.setSkinRootUrl(b_s)}},e.prototype.reloadData=function(){Qhw(this,j_x,Laya,Resource)},e.prototype.getBreak=function(e){return!!this._breakDic[e]&&this._breakDic[e]},e.prototype.parseConfig=function(){if(0!=this._dataParse)if(1==this._dataParse)this.loadResFirst();else{var e=Laya.loader.getRes(Resource.ResUrl.data);e?(this.setProgressShowContent((j_x("506_2035_1048")+j_x("1610_1451_745")+"..."),2),this._dataParse=0,Config.Parser.ConfigParser.load(e,this.loadResFirst.bind(this))):Laya.timer.callLater(this,this.reloadData)}},e.prototype.addCollectEnity=function(e,p_l){this.addActorEntity(e,p_l);var p_g=this.getActorById(p_l.id,e);if(p_g){var b_s=Config.obj_collect[p_l.entryId].avatar;p_g.setSkinRootUrl(b_s)}return p_g},e.prototype.updateUI=function(){var e=Config.map[b_p.mapID];e&&UI.showUI(e,e.showUI)},e.prototype.getActorById=function(e,p_l){void 0===p_l&&(p_l=-1),p_l=-1==p_l?this.getActorTypeByID(e):p_l;var p_g=this._actorEntityDic[p_l];return null!=p_g?p_g[e]:null},e.prototype.update=function(e){SyncTime.update(e),null!=this._mapContainer&&(this.updateActor(e),Engine2d.GameMap.defaultMap&&Engine2d.GameMap.defaultMap.update(e),Resource.MapResManager.instance.update(e),Resource.ResManager.Instance.update(),n_d.instance.update(),this._frameInterval++,this._frameInterval<2||(UIM.instance.update(e),Resource.SoundManager.instance.upadte(e),d_s.instance.update(e),n_m.instance.update(e),Engine2d.ActorPosSnapFactory.update(e),EffectShowManager.instance.update(e),BroadcastNoticeManager.instance.update(),this.disappearObj(),this._frameInterval=0,this.checkReleaseRes()))},e.prototype.addActorEntity=function(e,p_l){var p_g=this.createActor(e,p_l);if(null!=p_g){Engine2d.GameMap.defaultMap.addObject(p_g),p_g.scale(Engine2d.CustomActor.MODEL_SCALE,Engine2d.CustomActor.MODEL_SCALE),p_g.syncCurrentPxy(p_l.px,p_l.py);var b_s=this._actorEntityDic[e]||{},d_u=null!=(this._actorEntityDic[e]=b_s)[p_g.id];return d_u&&(console.log("----     isHasEntity",d_u,p_l.id),this.deleteActorEntity(e,p_l.id,!0)),b_s[p_g.id]=p_g,e!==Engine2d.ActorTypeDefine.PLAYER&&e!==Engine2d.ActorTypeDefine.ROBOT||(0<p_l.speed&&(p_g.defaultSpeed=p_l.speed),LED.event(l_r.ACTOR_ADDED,{type:e,id:p_l.id})),d_u}},e.stageWidth=function(){return Glk(Laya)},e.prototype.sendMapReady=function(){console.log("sendMapReady");var e=new c2m_ready;e.key=b_p.severKey,DB.instance.query(c2m_ready,e)},e.prototype.changeMapToDoFighting=function(){EffectShowManager.instance.changeMap(),j_a.sceIns().add(TaskManager.instance,TaskManager.instance.onSceneChange,null,2),j_a.sceIns().add(n_m.instance,n_m.instance.checkIsHangupMap,null,2),d_x.instance.sceneChange(),dreamlandModel.instance.sceneChange(),gymkhanaModel.instance.sceneChange(),DoubleAreaModel.instance.sceneChange()},e.prototype.onCollectStartPick=function(e){if(!n_m.instance.isHangUpMap()){var p_l=this.getActorStdInfoById(e,Engine2d.ActorTypeDefine.COLLECT);if(p_l){if(SyncTime.serverTime<p_l.freezeTime)return void b_p.broadcastNotice((j_x("1614_2171_283")+","+j_x("814_799_1155")+j_x(2194)));b_p.reqCollect(p_l.id)}}},e.prototype.clearDisappear=function(){Seu(this)},e.prototype.setBreak=function(){Qcc(this,GameDefine)},e.prototype.showSceneLoadingPanel=function(){this._sceneLoadingPanel||(this._sceneLoadingPanel=new UI.SceneLoadingPanel),this._isFirst?this.setProgressShowContent((j_x("506_2035_223")+j_x("1770_1895_1624")+j_x("115_1519")+"...")):(null==this._sceneLoadingPanel.parent&&(Laya.stage.addChild(this._sceneLoadingPanel),UIM.instance.isOpenWin(UI.EquipSwapTipPanel)&&b_p.registerAutoOpenPanel(UI.EquipSwapTipPanel,-1),SubpackageMgr.ins.resetTopMaskSp(),UIM.instance.closeAllWin()),Laya.timer.clear(this,this.hideLoadingPanel))},e.prototype.onSceneLoadOver=function(){this._isPreLoadOver?this.mapTileOverSendToReady():!b_p.isPloting&&this._isMapLoadOver&&(LED.off(l_r.PLOTING_END,this,this.onSceneLoadOver),Laya.timer.callLater(this,this.changeMapToDo))},e.prototype.deleteActorEntity=function(e,p_l,p_g){void 0===p_g&&(p_g=!0),e===Engine2d.ActorTypeDefine.MONSTER&&delete this._disappearDic[p_l];var b_s=this._actorEntityDic[e];if(null!=b_s){var d_u=b_s[p_l];if(delete b_s[p_l],d_u&&p_g&&(d_u.removeSelf(),e===Engine2d.ActorTypeDefine.MONSTER?d_u.clear():d_u.destroy()),d_u)return LED.event(l_r.ACTOR_REMOVED,{type:e,role:d_u}),null}return null},e.prototype.createActor=function(e,p_l){var p_g;switch(e){case Engine2d.ActorTypeDefine.PLAYER:(p_g=p_l.id==b_p.playerId?new Engine2d.Hero(p_l.id):new Engine2d.Player(p_l.id)).init();var b_s=p_l,d_u=b_s.entryId,b_e=b_s.getClotheId(),d_m=b_s.getWeaponId();p_g.fightingCtrl.changeSkin(b_e,d_u,p_l.face);var d_w=Resource.ResManager.getDefaultWeaponAvatar(d_m,d_u);p_g.fightingCtrl.changeWeapon(d_w),p_g.changeRide(b_s.getRideId());break;case Engine2d.ActorTypeDefine.MONSTER:case Engine2d.ActorTypeDefine.COLLECT:case Engine2d.ActorTypeDefine.DROP:(p_g=Resource.ResManager.Instance.freeActor(e)).id=p_l.id,p_g.init();break;case Engine2d.ActorTypeDefine.NPC:(p_g=new Engine2d.Npc(p_l.id)).init();break;case Engine2d.ActorTypeDefine.ROBOT:(p_g=new Engine2d.Robot(p_l.id)).init(),d_m=p_l.fashionWeapon,d_w=Resource.ResManager.getDefaultWeaponAvatar(d_m,d_u),p_g.fightingCtrl.changeWeapon(d_w),p_l.rideId&&p_g.changeRide(p_l.rideId)}return p_g},e.prototype.sendReady=function(){this.setProgressShowContent((j_x("506_2035_33")+j_x("2456_118_1527")+"..."),2),console.log("sendReady",GPlatform.isMap),this.init(Stage.width,Stage.height);var e=new c2w_ready;DB.instance.query(c2w_ready,e)},e.prototype.heroPosChange=function(){Yxd(EffectShowManager)},e.prototype.addNpcEnity=function(e,p_l){this.addActorEntity(e,p_l);var p_g=this.getActorById(p_l.id,e);if(p_g){var b_s=Config.obj_npc[p_l.entryId].avatar;p_g.setSkinRootUrl(b_s)}return p_g},e.prototype.delayMinimapLoadOver=function(){Engine2d.GameMap.defaultMap.setMinimapData(),this._isPreLoadOver=!0;var e=Resource.ResManager.Instance.getPreLoadRes("enterMap");e?(this.setProgressShowContent((j_x("506_2035_223")+j_x("1770_1895_1624")+j_x("115_1519")+"..."),2),Laya.loader.load(e,Laya.Handler.create(this,this.mapTileOverSendToReady))):this.mapTileOverSendToReady()},e.prototype.delaySendServerInfo=function(){Msx(ProtocolController)},e.stageHeight=function(){return Mtu(Laya)},e.prototype.delayLoadMapSceFile=function(e){var p_l=Config.map[e.mapId],p_g=Resource.MapResManager.instance.getMapUrl(e.mapId);Engine2d.GameMap.defaultMap.setMapInfo(p_l.name,e.mapId,p_g),Laya.loader.load(p_g,Laya.Handler.create(this,this.onMapSceResComplete,[e]),null,Laya.Loader.BUFFER,1)},e.prototype.mapTileOverSendToReady=function(){this._isPreLoadOver&&(this._isPreLoadOver=!1,this.setProgressShowContent((j_x("506_2035_1529")+j_x("1713_836_2391")+"..."),2),this.delaySendToReady())},e.prototype.onDropPick=function(p_l,p_g){if(void 0===p_g&&(p_g=!1),p_l&&this.checkCanMove()){var b_s=p_l.type,d_u=p_l.id;n_m.instance.isHangUpMap()&&!p_g?BagModel.instance.broadcastNotic(p_l.itemId,p_l.count):SkillModel.instance.reqPickDrop(p_l.id),e.ins.deleteActorInfo(b_s,d_u),e.ins.deleteActorEntity(b_s,d_u)}},e.prototype.delayClearRes=function(){Resource.ResManager.Instance.clearStayRes(!0),1==GPlatform.isGc&&MiniMain.triggerGC()},e.prototype.delActorEntityByID=function(e){for(var p_l in this._actorEntityDic){var p_g=this._actorEntityDic[p_l];if(null!=p_g){var b_s=p_g[e];return delete p_g[e],b_s}}return null},e.prototype.onMouseClick=function(e){var p_l;if(b_p.mapID&&(p_l=Config.map[b_p.mapID]),(!p_l||1==p_l.clickMove)&&e.target==Laya.stage&&null!=Engine2d.Hero.local){if(!this.checkCanMove())return;var p_g=Engine2d.GameMap.defaultMap.screenToCoord(Laya.stage.mouseX,Laya.stage.mouseY);Engine2d.Hero.local.clickMap(p_g.x,p_g.y)?(n_m.instance.stop(),TaskManager.instance.isAutoTask=!1,UIM.instance.getMainLetUI().taskCheckBox.selected=!1):b_p.broadcastNotice((j_x("2462_1163_562")+j_x("1069_932")))}},e.prototype.leaveMap=function(){if(b_p.lastMapID){var e=Resource.MapResManager.instance.getMapUrl(b_p.lastMapID);Laya.loader.cancelLoadByUrl(e)}Engine2d.CustomActor.selectedActor=null,WeatherController.instance.clear(),CollectController.instance.stopCollect(0,b_p.playerId),j_a.sceIns().add(n_m.instance,n_m.instance.leaveMap),j_a.sceIns().add(UIM.instance,UIM.instance.leaveMap),j_a.sceIns().add(Engine2d.ActorPosSnapFactory,Engine2d.ActorPosSnapFactory.leaveMap),j_a.sceIns().add(BroadcastNoticeManager.instance,BroadcastNoticeManager.instance.leaveMap),j_a.sceIns().add(BuffModel.instance,BuffModel.instance.clear),j_a.sceIns().add(this,this.delayClearRes),WeatherController.instance.clear()},e.prototype.delayHideUIMask=function(){Qnh(b_p,UIM,Resource,Config)},e.prototype.onClickActor=function(e){var p_l=Config.map[b_p.mapID];p_l&&1!=p_l.clickMove||this.checkCanMove()&&this.moveToTarget(e)},e.prototype.minimapLoadOver=function(e){Igi(e,j_a,this)},e.prototype.moveToTarget=function(e,p_l){if(void 0===p_l&&(p_l=!1),e){Engine2d.CustomActor.selectedActor=e,p_l&&(Engine2d.Hero.local.moveMainCtrl.isOnlyClientMove=p_l);var p_g=1;if(e.type===Engine2d.ActorTypeDefine.COLLECT){var b_s=this.getActorStdInfoById(e.id,Engine2d.ActorTypeDefine.COLLECT);if(!b_s)return;p_g=Config.obj_collect[b_s.entryId].awayNum}Engine2d.Hero.local.moveToObj(e,p_g)}},e.prototype.disappearObj=function(){var e,p_l,p_g,b_s,d_u=SyncTime.tickCount;for(var b_e in this._disappearDic)e=this._disappearDic[b_e].time,p_l=this._disappearDic[b_e].duration,p_g=this._disappearDic[b_e].type,b_s=this.getActorById(parseInt(b_e),p_g),p_l<(e=d_u-e)?(this.deleteActorEntity(p_g,parseInt(b_e)),delete this._disappearDic[b_e]):b_s&&(b_s.alpha=(p_l-e)/p_l)},e.prototype.onMouseUp=function(e){var p_l=this._downTarget;this._downTarget=null,e.target===p_l&&this.onMouseClick(e)},e.prototype.onResComplete=function(){this._resComplete||(this._resComplete=!0,RecordManager.instance.sendRecord(RecordManager.API_ACCOUNT,{step:RecordTypeDefine.STEP_PRE_RES_LOAD_COMPLETE}),Laya.loader.clearRes(Resource.ResUrl.data),Laya.loader.clearRes(Resource.ResUrl.errorTipsJson),ErrerTipCfg.ins.destoyObj()),this.sendReady()},e.prototype.loginSucced=function(){SyncTime.recordHeartTime(),SyncTime.checkLoginSucc(!0),DB.connetStatus===ConnetStatus.RESTART&&(n_d.instance.clearChatPrivateData(),UIM.instance.closeAllWin()),GPlatform.isMap?this.sendReady():this.parseConfig()},e.prototype.onBtnMouseDownSound=function(e){Une(e,Resource)},e.prototype.hideLoadingPanel=function(){Svu(Laya,this)},e.prototype.addBtnMouseDownListener=function(){Knn(Laya,this)},e.prototype.clearBreak=function(e){Iob(e,this)},e.prototype.getActorTypeByID=function(e){return Cfs(e,this,parseInt)},e.prototype.setProgressShowContent=function(e,p_l){void 0===p_l&&(p_l=1),this._sceneLoadingPanel&&null!=this._sceneLoadingPanel.parent&&this._sceneLoadingPanel.setContent(e),this._isFirst&&this._loginLoadingUI&&this.setLoginLoadingContent(e,!0,p_l)},e.prototype.appearMoveToTarget=function(e,p_l,p_g){void 0===p_g&&(p_g=!1);var b_s=this.getActorById(p_l.id,e);p_g?b_s.moveTo(p_l.px,p_l.py,p_l.endPx,p_l.endPy,p_l.speed,p_l.moveAction,p_l.face):p_l.moveAction?b_s.setAction(p_l.moveAction,p_l.face,!1):b_s.stand(p_l.face)},e.prototype.addDropEnity=function(e,p_l){this.addActorEntity(e,p_l),this.getActorById(p_l.id,e)&&LED.event(l_r.DROP_ADDED,p_l)},e.prototype.addDisappearObj=function(e,p_l,p_g){void 0===p_g&&(p_g=1e3),this.deleteActorInfo(p_l,e),this._disappearDic[e]={type:p_l,duration:p_g,time:SyncTime.tickCount}},e.prototype.addActorInfo=function(e,p_l){if(null!=p_l){var p_g=this._actorInfoDic[e]||{},b_s=null!=(this._actorInfoDic[e]=p_g)[p_l.id];return p_g[p_l.id]=p_l,b_s&&(console.log("----     isHas",b_s,p_l.id),this.deleteActorEntity(e,p_l.id,!0)),b_s}},e.prototype.delayChangeScene=function(){Laya.timer.clear(this,this.delayChangeScene);var e=Config.map[b_p.mapID],p_l=UIM.instance.getMainLetUI();e&&e.funType==MapFunType.CITY||e.funType==MapFunType.HangUp||e.funType==MapFunType.WILD?(GlobalData.isFb=!1,p_l&&p_l.isShowLeftBtn(!0)):(GlobalData.isFb=!0,p_l&&p_l.isShowLeftBtn(!1)),Laya.timer.callLater(this,this.hideLoadingPanel),GuideManager.instance.checkShowGuide();var p_g=Config.fb_dungeon[b_p.fbId],b_s=!!p_g&&p_g.isShowChapter;b_s?j_a.sceIns().add(UIM.instance,UIM.instance.showTitle,[b_s,b_p.fbId]):j_a.sceIns().add(UIM.instance,UIM.instance.showTitle,[!1,0]),Laya.timer.once(250,this,this.delayHideUIMask),LED.event(l_r.SCENE_CHANGE)},e.prototype.addMonsterEnity=function(e,p_l){this.addActorEntity(e,p_l);var p_g=this.getActorById(p_l.id,e);if(p_g){var b_s=Config.obj_monster[p_l.entryId].avatar;p_g.setSkinRootUrl(b_s)}return LED.event(l_r.MONSTER_ADD,[e,p_l.id]),p_g},e.prototype.loadResFirst=function(){if(this.setProgressShowContent((j_x("506_2035_589")+j_x("223_1770_115")+j_x(1519)+"..."),2),this._dataParse=1,b_p.config.isCreateInGame){var e=Resource.ResManager.Instance.getPreLoadRes("enterGame");if(e)return void Laya.loader.load(e,Laya.Handler.create(this,this.onResComplete))}this.onResComplete()},e.prototype.setEnterMapPre=function(e){this._isPreLoadOver=this._isMapLoadOver=!1,SyncTime.setServerTime(e.serverTime),b_p.lastMapID=b_p.mapID,b_p.lastFbId=b_p.fbId,b_p.mapID==e.mapId&&b_p.fbId==e.fbId||(this.leaveMap(),Laya.loader.clearUnLoaded());var p_l=0!=b_p.mapID;if(b_p.severKey=e.key,b_p.mapID=e.mapId,b_p.playerId=e.pid,b_p.fbId=e.fbId,GPlatform.isMap&&DB.connetStatus===ConnetStatus.RESTART)return DB.connetStatus=ConnetStatus.OPEN,this.setBreak(),void this.sendMapReady();this.setProgressShowContent((j_x("506_2035_223")+j_x("1770_118_1527")+j_x("2056_1283")+"..."),2),p_l&&this.showSceneLoadingPanel(),b_p.lastMapID!=b_p.mapID?this.delayLoadMapSceFile(e):(n_m.instance.isHangUpMap()||(this.clearAllActor(),this.clearDisappear()),this.delaySendToReady())},e.prototype.getActorStdInfoById=function(e,p_l){void 0===p_l&&(p_l=-1),p_l=-1==p_l?this.getActorTypeByID(e):p_l;var p_g=this._actorInfoDic[p_l];return null!=p_g?p_g[e]:null},Object.defineProperty(e.prototype,"heroVo",{get:function(){return this.getActorStdInfoById(b_p.playerId,Engine2d.ActorTypeDefine.PLAYER)},enumerable:!0,configurable:!0}),e.prototype.getSex=function(e){return 2==e?GameDefine.girl:GameDefine.boy},e.prototype.updateActor=function(e){var p_l,p_g;for(var b_s in this._actorEntityDic)for(var d_u in p_l=this._actorEntityDic[b_s])null!=(p_g=p_l[d_u])&&p_g.update(e)},e.prototype.getNearActors=function(e,p_l,p_g,b_s){void 0===p_l&&(p_l=-1),void 0===p_g&&(p_g=!1),void 0===b_s&&(b_s=!1);var d_u,b_e,d_m=p_l*p_l,d_w=[],f_t=this._actorInfoDic[e],v_z=Engine2d.Hero.local;if(null!=f_t)for(var d_h in f_t)d_u=f_t[d_h],b_e=this.getActorById(d_u.id,d_u.type),0!=d_u.isVisible&&null!=b_e&&b_e.id!=Engine2d.Hero.local.id&&(p_g&&!this.canAttack(d_u)||(-1===p_l?d_w.push(b_e):Engine2d.MapUtils.calcDistance2(v_z.x,v_z.y,b_e.x,b_e.y)<d_m&&d_w.push(b_e)));return b_s&&1<d_w.length&&(d_w=d_w.sort(this.sortActorFunc)),d_w},e.prototype.getNearIdByView=function(e,p_l,p_g){void 0===p_l&&(p_l=-1),void 0===p_g&&(p_g=!1);var b_s,d_u,b_e=this._actorInfoDic[e],d_m=Engine2d.Hero.local,d_w=2147483647,f_t=0;if(null!=b_e)for(var v_z in b_e)if(b_s=b_e[v_z],d_u=this.getActorById(b_s.id,b_s.type),0!=b_s.isVisible&&null!=d_u&&d_u.parent&&d_u.id!=Engine2d.Hero.local.id&&!d_u.rawDie&&(!p_g||this.canAttack(b_s))){var d_h=Engine2d.MapUtils.pxTocx(d_u.x),r_t=Engine2d.MapUtils.pxTocx(d_u.y);if(-1==p_l||Engine2d.MapUtils.checkDistance(d_h,r_t,p_l)){var t_n=Engine2d.MapUtils.calcDistance2(d_m.x,d_m.y,d_u.x,d_u.y);t_n<d_w&&(d_w=t_n,f_t=b_s.id)}}return f_t},e.prototype.getCurMem=function(){return Qho(Laya)},e.prototype.sortActorFunc=function(e,p_l){return Atj(e,p_l,Engine2d)},e.prototype.checkReleaseRes=function(){if(GPlatform.isRelease||GPlatform.isCheck){var p_l=SyncTime.tickCount;0<this._startTime&&5e3<p_l-this._startTime&&(this._startTime=p_l,GPlatform.isQQDelRes&&150<Laya.ResourceManager.currentResourceManager.memorySize/1024/1024?e.ins.releaseRes(!0,15):e.ins.releaseRes(!1))}},e.prototype.getActorInfos=function(e){return Aus(e,this)},e.prototype.playSkillBegin=function(p_l){if(p_l){var p_g=e.ins.getActorById(p_l.releaseId);if(p_g&&!p_g.rawDie&&p_g.fightingCtrl.playSkill(p_l),p_l.targetId&&p_l.releaseId){var b_s=e.ins.getActorById(p_l.targetId,Engine2d.ActorTypeDefine.MONSTER);b_s&&b_s.playHitEffect(!0)}}},e.prototype.getActorInfosByType=function(e){return Uub(e,this)},e.prototype.canAttack=function(e){return Igd(e,Engine2d)},e.prototype.clearActor=function(e){var p_l,p_g=this._actorInfoDic[e];if(p_g)for(var b_s in p_g)null!=(p_l=p_g[b_s])&&p_l.destroy()&&(p_l=null),delete p_g[b_s];if(p_g=this._actorEntityDic[e]){var d_u=void 0;for(var b_s in p_g)null!=(d_u=p_g[b_s])&&(d_u.removeSelf(),e===Engine2d.ActorTypeDefine.MONSTER?d_u.clear():d_u.destroy(),d_u=null),delete p_g[b_s]}},e.prototype.setShowHidePlayer=function(e){n_m.instance.isHangUpMap()&&this.showHidePlayer(e)},e.prototype.getNearActorByView=function(e,p_l,p_g){void 0===p_l&&(p_l=-1),void 0===p_g&&(p_g=!1);var b_s=this.getNearIdByView(e,p_l,p_g);return 0==b_s?null:this.getActorById(b_s,e)},e.prototype.showHidePlayer=function(e){var p_l=this._actorEntityDic[Engine2d.ActorTypeDefine.PLAYER];if(p_l)for(var p_g in p_l)p_l[p_g].id!=b_p.playerId&&(p_l[p_g].visible=e)},e.prototype.clearAllActor=function(){var e,p_l,p_g;for(var b_s in this._actorEntityDic)for(var d_u in e=this._actorEntityDic[b_s])null!=(p_l=e[d_u])&&(p_l.removeSelf(),parseFloat(b_s)===Engine2d.ActorTypeDefine.MONSTER?p_l.clear():p_l.destroy(),p_l=null),delete e[d_u];for(var b_s in this._actorInfoDic)for(var d_u in e=this._actorInfoDic[b_s])null!=(p_g=e[d_u])&&p_g.id!=b_p.playerId&&(p_g.destroy()&&(p_g=null),delete e[d_u]);Engine2d.GameMap.defaultMap.clearAllObj(),Engine2d.Hero.local=null},e.prototype.zoomMoveChangePos=function(e){var p_l;for(var p_g in this._actorEntityDic){var b_s=this._actorEntityDic[p_g];for(var d_u in b_s)null!=(p_l=b_s[d_u])&&p_l.zoomMoveChange(e)}},e.prototype.releaseRes=function(e,p_l){void 0===e&&(e=!1),void 0===p_l&&(p_l=0),UIM.instance.releaseUiRes(e?1e3*(35+p_l):GPlatform.UI_CACHE_TIME),Resource.ResManager.Instance.clearStayRes(e,e?100:-1)},e.ins=new e,e}(),GameMini=function(){function e(){this._isHot=!1,(e.inst=this).OnStart()}return e.prototype.OnStart=function(){if(console.log("GameMini_OnStart"),LgcM)this.start(),LoginManager.instance.start();else{var e=this;setTimeout((function(){e.OnStart()}),50)}},e.prototype.start=function(){if(LED.on("sendLinkOpen",this,this.sendLinkOpen),GPlatform.isDebug&&KeyBoardUtil.init(),GPlatform.isRelease){VivoPlatform.instance.init(),OPPOPlatform.instance.init(),HuaweiPlatform.ins.init(),QQMiniPlatform.instance.qqMiniInit(),WXPlatform.instance.init(),HswxPlatform.instance.init(),XjwxPlatform.instance.init(),H5XJPlatform.ins.init(),WanbaPlatform.instance.init(),v_t.ins.init(),MiniMain.onRegister(this.onShowCallBack.bind(this),this.onHideCallBack.bind(this)),MiniMain.inits();var e=MiniMain.getLaunchOptionsSync();e&&this.onShowCallBack(e)}Laya.timer.frameLoop(1,this,this.onLogicRun),GPlatform.isSubPackage&&(f_b.inst.loadVersion(),LgcM.ins.loginLoadingUI=LoginManager.instance.loginPanel,LgcM.ins.addBtnMouseDownListener())},e.prototype.onLogicRun=function(){Kev(Laya,LgcM,DB,FrameRunManager)},e.prototype.onShowCallBack=function(e){if(e){console.log("onShowCallBack",e),Resource.SoundManager.instance.onShow();var p_l=e.scene,p_g=e.query;if(LgcM.ins.setHide(!0),-1!=this.sceneData.indexOf(p_l))ShareMgr.ins._isCollected=!0,ShareMgr.ins.reqWechatCollect(),LED.event(l_r.WX_COLLECT);else if(p_g&&p_g.hasOwnProperty("account")){if(parseFloat(p_g.pid)===b_p.playerId||0<GConfig.inst.invitePid)return;GConfig.inst.inviteData=p_g}}},Object.defineProperty(e.prototype,"sceneData",{get:function(){if(!this._sceneData){var e=void 0;(e=GPlatform.isQQMini?[MiniSceneType.QQ_Top,MiniSceneType.QQ_Top2]:[MiniSceneType.MY,MiniSceneType.MY_TWO,MiniSceneType.QQMY_TWO]).push(MiniSceneType.PHONE_TABLE),this._sceneData=e}return this._sceneData},enumerable:!0,configurable:!0}),e.prototype.onHideCallBack=function(e){Qao(e,console,Resource,LgcM)},e.prototype.sendLinkOpen=function(){Gwa(this,f_b)},e.prototype.hotUpdate=function(){if(GPlatform.isWxMini||GPlatform.isQQMini){if(this._isHot)return;this._isHot=!0;var e=new Laya.HttpRequest;e.on(Laya.Event.COMPLETE,this,this.onHotUpdate);var p_l={};p_l.platform=GPlatform.platformDesc,p_l.pf=GPlatform.platform,GPlatform.addAgentMixSer(p_l),e.send(GConfig.inst.addr+RecordManager.API_HOT_UPDATE,JSON.stringify(p_l),"post","json")}},e.prototype.onHotUpdate=function(e){if(e&&e.content){var p_l=e.content;GPlatform.isXjWx&&(XjwxLoginManager.instance.envir=p_l.pay_env,ShieldWordManager.ins.isNeedShield=p_l.isShield),GPlatform.isGc=p_l.isGc,GPlatform.isQQDelRes=1==p_l.isQQDelRes,GPlatform.isIosShow=1==p_l.isIosShow,GPlatform.isCheckChat=1==p_l.isCheckChat}},e}(),Engine2d,Engine2d,Engine2d,Engine2d,Engine2d,Engine2d;!function(e){var p_l=(p_g.RELEASE_SKILL=1,p_g.TALK_TO_NPC=2,p_g.JUMP=3,p_g.HANG_UP=4,p_g.PICK=5,p_g.NPC=6,p_g.COLLECT_PICK=7,p_g);function p_g(){}e.PathEndActionType=p_l;var b_s=(d_u.prototype.setTo=function(e,p_l,p_g){void 0===p_l&&(p_l=null),void 0===p_g&&(p_g=null),this.action=e,this.actionData=p_l,this.actionData2=p_g},d_u);function d_u(e,p_l,p_g){void 0===e&&(e=null),void 0===p_l&&(p_l=null),void 0===p_g&&(p_g=null),this.action=e,this.actionData=p_l,this.actionData2=p_g}e.PathEndAction=b_s;var b_e=(d_m.prototype.destruct=function(){Cei(this)},d_m.prototype.clone=function(){var e=new d_m;return e.locationX=this.locationX,e.locationY=this.locationY,e.arrivedAction=this.arrivedAction,e.locationPx=this.locationPx,e.locationPy=this.locationPy,e},d_m.prototype.reset=function(){Ksh(this)},d_m);function d_m(){this.isPathing=!1}e.PathLocation=b_e}(Engine2d=Engine2d||{}),function(e){var p_l=(p_g.prototype.equals=function(e,p_l){return void 0===p_l&&(p_l=!1),(!p_l||e.nDir==this.nDir)&&e.nX==this.nX&&e.nY==this.nY},p_g);function p_g(e,p_l,p_g){this.nX=e,this.nY=p_l,this.nDir=p_g}e.ASPathNode=p_l;var b_s=(d_u.prototype.clear=function(){Uxm(this)},d_u.CSNONE=0,d_u.CSOPEN=1,d_u.CSCLOSE=2,d_u);function d_u(){}e.ASMapCell=b_s;var b_e=(Object.defineProperty(d_m.prototype,"m_aSMapCells",{get:function(){return e.GameMap.defaultMap.asMapCells},enumerable:!0,configurable:!0}),d_m.prototype.initMap=function(e,p_l,p_g){Cup(e,p_l,p_g,this)},d_m.prototype.closeCell=function(e){e.State==b_s.CSOPEN&&(e.Prev&&(e.Prev.Next=e.Next),e.Next&&(e.Next.Prev=e.Prev),e==this.m_lastOpenCell&&(this.m_lastOpenCell=e.Prev)),e.State=b_s.CSCLOSE},d_m.prototype.getBestPath=function(e,p_g,b_s,d_u){if(!this.isCaneMove(e,p_g,b_s,d_u))return null;var b_e,d_m=[];if(this.haveBlock(e,p_g,b_s,d_u)){var d_w=this.getPatch(e,p_g,b_s,d_u);if(!d_w)return null;var f_t=d_w.length;d_m.push(d_w[0]);var v_z=d_w[f_t-1],d_h=d_w[0];if(this.haveBlock(d_h.nX,d_h.nY,v_z.nX,v_z.nY))for(var r_t=0,t_n=void 0,f_y=void 0,p_q=void 0;r_t<f_t-1;){if(t_n=r_t+1,f_y=f_t-1,d_h=d_w[r_t],v_z=d_w[f_y],0==r_t||this.haveBlock(d_h.nX,d_h.nY,v_z.nX,v_z.nY)){for(;t_n<f_y;)v_z=d_w[p_q=this.parseInt(t_n+f_y>>1)],this.haveBlock(d_h.nX,d_h.nY,v_z.nX,v_z.nY)?f_y=p_q-1:t_n=p_q+1;v_z=d_w[f_y],this.haveBlock(d_h.nX,d_h.nY,v_z.nX,v_z.nY)&&f_y--}d_m.push(d_w[f_y]),r_t=f_y}else d_m.push(d_w[f_t-1])}else b_e=this.getMaskInfo(b_s,d_u),d_m.push(new p_l(b_e.X,b_e.Y,b_e.btDir));return d_m},d_m.prototype.isCaneMove=function(e,p_l,p_g,b_s){return!(e==p_g&&p_l==b_s||e<0||e>=this.m_nWidth||p_l<0||p_l>=this.m_nHeight||p_g<0||p_g>=this.m_nWidth||b_s<0||b_s>=this.m_nHeight||this.canNotMove(p_g,b_s))},d_m.prototype.getHCost3=function(e,p_l,p_g,b_s){var d_u=Math.abs(p_g-e),b_e=Math.abs(b_s-p_l),d_m=Math.min(d_u,b_e);return 14*d_m+10*(d_u+b_e-2*d_m)},d_m.prototype.parseInt=function(e){return Izn(e)},d_m.prototype.openCell=function(e){e.State=b_s.CSOPEN;var p_l=e.HCost+e.GCost;e.FValue=p_l;var p_g=this.m_lastOpenCell;if(p_g){for(;p_g.FValue<p_l;){if(null==p_g.Prev)return(p_g.Prev=e).Prev=null,void(e.Next=p_g);p_g=p_g.Prev}(e.Prev=p_g).Next?(e.Next=p_g.Next,p_g.Next.Prev=e,p_g.Next=e):(e.Next=null,p_g.Next=e,this.m_lastOpenCell=e)}else(this.m_lastOpenCell=e).Prev=null,e.Next=null},d_m.prototype.mySign=function(e){return 0<e?1:e<0?-1:0},d_m.prototype.getPatch=function(e,p_g,d_u,b_e){if(!this.isCaneMove(e,p_g,d_u,b_e))return null;this.reset(e,p_g);var d_w,f_t,v_z,d_h,r_t=!1,t_n=e,f_y=p_g,p_q=this.m_aSMapCells[f_y*this.m_nWidth+t_n];for(p_q.GCost=0,p_q.LastX=-1,p_q.LastY=-1,p_q.X=t_n,p_q.Y=f_y,p_q.MarkTag=this.m_nMarkTag,p_q.HCost=this.getHCost1(e,b_e,d_u,b_e);;){if(t_n==d_u&&f_y==b_e){r_t=!0;break}for(p_q.State!=b_s.CSCLOSE&&this.closeCell(p_q),d_w=0;d_w<8;++d_w)f_t=t_n+d_m.NEIGHBORPOS_X_VALUES[d_w],v_z=f_y+d_m.NEIGHBORPOS_Y_VALUES[d_w],f_t<0||f_t>=this.m_nWidth||v_z<0||v_z>=this.m_nHeight||(d_h=this.m_aSMapCells[v_z*this.m_nWidth+f_t],this.canNotMove(f_t,v_z)||(d_h.MarkTag!=this.m_nMarkTag||d_h.State==b_s.CSNONE?(d_h.MarkTag=this.m_nMarkTag,d_h.LastX=t_n,d_h.LastY=f_y,d_h.btDir=d_w,d_h.GCost=p_q.GCost+d_m.AS_MOVECOST[1&d_w],d_h.HCost=this.getHCost1(f_t,v_z,d_u,b_e),this.openCell(d_h)):d_h.State==b_s.CSOPEN&&d_h.GCost>p_q.GCost+d_m.AS_MOVECOST[1&d_w]&&(d_h.LastX=t_n,d_h.LastY=f_y,d_h.btDir=d_w,d_h.GCost=p_q.GCost+d_m.AS_MOVECOST[1&d_w],this.reopenCell(d_h))));if(null==(p_q=this.m_lastOpenCell))break;t_n=p_q.X,f_y=p_q.Y}if(r_t){for(var h_h=[];h_h.push(new p_l(p_q.X,p_q.Y,p_q.btDir)),!((p_q=this.m_aSMapCells[p_q.LastY*this.m_nWidth+p_q.LastX]).LastX<=0||p_q.MarkTag!=this.m_nMarkTag););return h_h}return null},d_m.prototype.getHCost2=function(e,p_l,p_g,b_s){var d_u=p_g-e,b_e=b_s-p_l;return 10*Math.sqrt(d_u*d_u+b_e*b_e)},d_m.prototype.haveBlock=function(e,p_l,p_g,b_s){var d_u,b_e=this.parseInt(p_g-e),d_m=this.parseInt(b_s-p_l),d_w=this.mySign(b_e),f_t=this.mySign(d_m);if(b_e=2*Math.abs(b_e),d_m=2*Math.abs(d_m),this._fPoint.x=e,this._fPoint.y=p_l,d_m<=b_e)for(d_u=(d_m>>1)-(b_e>>1),this._fPoint.x+=d_w;this._fPoint.x!=p_g;this._fPoint.x+=d_w){if(0!=d_u&&this.canNotMove(this._fPoint.x,this._fPoint.y))return!0;if(0<(d_u+=d_m)&&(this._fPoint.y+=f_t,d_u-=b_e,this.canNotMove(this._fPoint.x,this._fPoint.y)))return!0}else for(d_u=(b_e>>1)-(d_m>>1),this._fPoint.y+=f_t;this._fPoint.y!=b_s;this._fPoint.y+=f_t){if(0!=d_u&&this.canNotMove(this._fPoint.x,this._fPoint.y))return!0;if(0<(d_u+=b_e)&&(this._fPoint.x+=d_w,d_u-=d_m,this.canNotMove(this._fPoint.x,this._fPoint.y)))return!0}return!1},d_m.prototype.getHCost0=function(e,p_l,p_g,b_s){return Inm(e,p_l,p_g,b_s)},d_m.prototype.canNotMove=function(e,p_l){return Eqa(e,p_l,this)},d_m.prototype.getHCost1=function(e,p_l,p_g,b_s){return Qvt(e,p_l,p_g,b_s)},d_m.prototype.getMaskInfo=function(e,p_l){return Adi(e,p_l,this)},d_m.prototype.reset=function(e,p_l){Gvv(e,p_l,this)},d_m.prototype.reopenCell=function(e){var p_l=e.HCost+e.GCost;e.FValue=p_l;var p_g=e.Next;if(p_g&&p_g.FValue>p_l){for(;(p_g=p_g.Next)&&p_g.FValue>p_l;);e.Prev&&(e.Prev.Next=e.Next),e.Next&&(e.Next.Prev=e.Prev),p_g?((e.Next=p_g).Prev?(e.Prev=p_g.Prev,p_g.Prev.Next=e):e.Prev=null,p_g.Prev=e):(e.Prev=this.m_lastOpenCell,e.Next=null,this.m_lastOpenCell.Next=e,this.m_lastOpenCell=e)}},Object.defineProperty(d_m.prototype,"lastOpenCell",{get:function(){return this.m_lastOpenCell},set:function(e){this.m_lastOpenCell=e},enumerable:!0,configurable:!0}),Object.defineProperty(d_m.prototype,"aSMapCells",{get:function(){return this.m_aSMapCells},enumerable:!0,configurable:!0}),Object.defineProperty(d_m.prototype,"nWidth",{get:function(){return this.m_nWidth},set:function(e){this.m_nWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(d_m.prototype,"nHeight",{get:function(){return this.m_nHeight},set:function(e){this.m_nHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(d_m.prototype,"nMarkTag",{get:function(){return this.m_nMarkTag},set:function(e){this.m_nMarkTag=e},enumerable:!0,configurable:!0}),d_m.AS_MOVECOST=[14,10],d_m.NEIGHBORPOS_X_VALUES=[0,1,1,1,0,-1,-1,-1],d_m.NEIGHBORPOS_Y_VALUES=[-1,-1,0,1,1,1,0,-1],d_m);function d_m(e,p_l,p_g){this.RMOVECOST=14,this.DMOVECOST=10,this.m_nMarkTag=0,this._fPoint=new Laya.Point,this.initMap(e,p_l,p_g)}e.ASPath=b_e}(Engine2d=Engine2d||{}),function(e){var p_l=(Object.defineProperty(p_g.prototype,"Width",{get:function(){return this.m_nWidth},enumerable:!0,configurable:!0}),Object.defineProperty(p_g.prototype,"height",{get:function(){return this.m_nHeight},enumerable:!0,configurable:!0}),Object.defineProperty(p_g.prototype,"widthPix",{get:function(){return this.m_nWidthPixel},enumerable:!0,configurable:!0}),Object.defineProperty(p_g.prototype,"higPix",{get:function(){return this.m_nHeightPixel},enumerable:!0,configurable:!0}),Object.defineProperty(p_g.prototype,"cells",{get:function(){for(var e=[],p_l=this.m_Cells.length,p_g=0;p_g<p_l;++p_g)e.push(this.m_Cells[p_g].clone());return this.clearMapData(),e},enumerable:!0,configurable:!0}),Object.defineProperty(p_g.prototype,"fileId",{get:function(){return this.m_fileId},enumerable:!0,configurable:!0}),p_g.prototype.startParse=function(e){var p_l=Resource.MapResManager.instance.getMapUrl(e),p_g=Laya.loader.getRes(p_l),b_s=new Laya.Byte(p_g);this.load(b_s)},p_g.prototype.load=function(p_l){p_l.endian="littleEndian",p_l.getUint32(),p_l.getUint32();var p_g=p_l.getUint16(),b_s=p_l.getUint16();this.m_fileId=p_l.getInt32(),p_l.getInt32();var d_u=new Laya.Byte;d_u.endian=p_l.endian,d_u.writeArrayBuffer(p_l.__getBuffer(),p_l.pos),p_l=null,d_u.pos=0;var b_e=new Zlib.Inflate(new Uint8Array(d_u.__getBuffer())).decompress();p_l=new Laya.Byte(b_e),this.m_nWidth=p_g,this.m_nHeight=b_s,this.m_nWidthPixel=this.m_nWidth*e.CustomMap.MAPCELLUNITWIDTH,this.m_nHeightPixel=this.m_nHeight*e.CustomMap.MAPCELLUNITHEIGHT,this.clearMapData();for(var d_m=0;d_m<this.m_nWidth*this.m_nHeight;++d_m){var d_w=Laya.Pool.getItemByClass(PoolDefine.MAP_CELL,e.MapCell);d_w._nBkImgIdx=p_l.getUint16(),d_w._nFlags=p_l.getByte(),this.m_Cells.push(d_w)}},p_g.prototype.clearMapData=function(){if(this.m_Cells&&0<this.m_Cells.length){for(var e in this.m_Cells)this.m_Cells[e].clear();this.m_Cells.length=0}else this.m_Cells=[]},p_g.prototype.reDistributeMapLayers=function(p_l,p_g){for(var b_s=e.GameMap.defaultMap.calcMapContentRange(p_l,p_g,this.m_nWidth,this.m_nHeight),d_u=b_s._nLeft,b_e=b_s._nTop,d_m=b_s._nRight,d_w=b_s._nBottom,f_t=(e.CustomMap.MAPCELLUNITWIDTH,e.CustomMap.MAPCELLUNITHEIGHT,(p_g=b_e)*this.m_nWidth+d_u),v_z=(e.CustomMap.MAPCELLUNITWIDTH,e.CustomMap.MAPTILEHBLOCK,e.CustomMap.MAPCELLUNITHEIGHT,e.CustomMap.MAPTILEVBLOCK,new Array);p_g<=d_w;){p_l=d_u;for(var d_h=f_t;p_l<=d_m;){var r_t=this.m_Cells[d_h];null!=r_t&&0<r_t._nBkImgIdx&&null==r_t._bkImg&&v_z.push(r_t._nBkImgIdx),p_l+=e.CustomMap.MAPTILEHBLOCK,d_h+=e.CustomMap.MAPTILEHBLOCK}p_g+=e.CustomMap.MAPTILEVBLOCK,f_t+=this.m_nWidth*e.CustomMap.MAPTILEVBLOCK}return v_z},Object.defineProperty(p_g.prototype,"minimapUrl",{get:function(){return Resource.ResUrl.MAPRES_URL+this.fileId+"/minimap.jpg"},enumerable:!0,configurable:!0}),p_g.instance=new p_g,p_g);function p_g(){this.m_nWidth=0,this.m_nHeight=0,this.m_nWidthPixel=0,this.m_nHeightPixel=0,this.m_Cells=[]}e.MapPreParse=p_l}(Engine2d=Engine2d||{}),function(e){var p_l=(p_g.prototype.destruct=function(){Wzx(this)},p_g.prototype.load=function(p_l){void 0===p_l&&(p_l=null),this.m_lastFileId=this.m_fileId,p_l.endian="littleEndian",p_l.getUint32(),p_l.getUint32();var b_s=p_l.getUint16(),d_u=p_l.getUint16();this.m_fileId=p_l.getInt32(),p_l.getInt32();var b_e=new Laya.Byte;b_e.endian=p_l.endian,b_e.writeArrayBuffer(p_l.__getBuffer(),p_l.pos),b_e.pos=0,p_l&&(p_l.clear(),p_l=null);var d_m,d_w=new Zlib.Inflate(new Uint8Array(b_e.__getBuffer())).decompress();p_l=new Laya.Byte(d_w),b_e&&(b_e.clear(),b_e=null),this.m_nWidth=b_s,this.m_nHeight=d_u,this.m_nWidthPixel=this.m_nWidth*p_g.MAPCELLUNITWIDTH,this.m_nHeightPixel=this.m_nHeight*p_g.MAPCELLUNITHEIGHT,this.clearMapData();for(var f_t=0;f_t<d_u;++f_t)for(var v_z=0;v_z<b_s;++v_z)(d_m=Laya.Pool.getItemByClass(PoolDefine.MAP_CELL,e.MapCell))._nBkImgIdx=p_l.getUint16(),d_m._nFlags=p_l.getByte(),d_m.X=v_z,d_m.Y=f_t,d_m.canNotMove=!(d_m._nFlags!=e.MoveType.STOP_WALK),this.m_Cells.push(d_m);this.m_asPath?this.m_asPath.initMap(this.m_nWidth,this.m_nHeight,this):this.m_asPath=new e.ASPath(this.m_nWidth,this.m_nHeight,this),p_l&&(p_l.clear(),p_l=null)},p_g.prototype.getMinimapUrl=function(){return Icx(Resource,this)},p_g.prototype.clearMapData=function(){if(this.m_Cells&&0<this.m_Cells.length){for(var e in this.m_Cells)this.m_Cells[e].clear();this.m_Cells.length=0}else this.m_Cells=[]},Object.defineProperty(p_g.prototype,"mapWidth",{get:function(){return this.m_nWidth},enumerable:!0,configurable:!0}),Object.defineProperty(p_g.prototype,"mapHeight",{get:function(){return this.m_nHeight},enumerable:!0,configurable:!0}),p_g.prototype.getCell=function(e,p_l){return e<0||p_l<0||e>=this.m_nWidth||p_l>=this.m_nHeight?null:this.m_Cells[p_l*this.m_nWidth+e]},p_g.prototype.moveable=function(p_l,p_g){return!(p_l>=this.m_nWidth||p_g>=this.m_nHeight)&&this.m_Cells[p_g*this.m_nWidth+p_l]._nFlags!=e.MoveType.STOP_WALK},p_g.prototype.hidden=function(p_l,p_g){return!(p_l>=this.m_nWidth||p_g>=this.m_nHeight||!this.m_Cells[p_g*this.m_nWidth+p_l])&&this.m_Cells[p_g*this.m_nWidth+p_l]._nFlags==e.MoveType.HIDDEN},p_g.prototype.getCellIndex=function(e,p_l){return e<0||p_l<0||e>=this.m_nWidth||p_l>=this.m_nHeight?-1:p_l*this.m_nWidth+e},p_g.prototype.checkFuncFlag=function(p_l,p_g){if(p_l>=this.m_nWidth||p_g>=this.m_nHeight||!this.m_Cells[p_g*this.m_nWidth+p_l])return 0;var b_s=this.m_Cells[p_g*this.m_nWidth+p_l]._nFlags;return b_s>=e.MoveType.FUNC_TYPE?b_s:0},Object.defineProperty(p_g.prototype,"asMapCells",{get:function(){return this.m_Cells},enumerable:!0,configurable:!0}),Object.defineProperty(p_g.prototype,"fileId",{get:function(){return this.m_fileId},enumerable:!0,configurable:!0}),p_g.MAP_RATE=1,p_g.MAPTILEWIDTH=256,p_g.MAPTILEHEIGHT=256,p_g.MAPCELLUNITWIDTH=32,p_g.MAPCELLUNITHEIGHT=32,p_g.MAPTILEHBLOCK=8,p_g.MAPTILEVBLOCK=8,p_g.CELLFLG_UNMOVEABLE=32768,p_g.CELLFLG_HIDDEN=16384,p_g);function p_g(){this.m_Cells=[],this.m_nWidth=0,this.m_nHeight=0,this.m_nWidthPixel=0,this.m_nHeightPixel=0,this.m_fileId=0,this.m_lastFileId=0,this.isLoadMap=!1}e.CustomMap=p_l}(Engine2d=Engine2d||{}),function(e){var p_l=(p_g.takeActorPosSnap=function(p_l,p_g,b_s,d_u,b_e){if(void 0===b_s&&(b_s=!1),void 0===d_u&&(d_u=!1),void 0===b_e&&(b_e=!1),p_l&&p_l.parent&&p_l.fightingCtrl){p_l.fightingCtrl.curDir;var d_m=Laya.Pool.getItemByClass("ActorPosSnap",e.ActorPosSnap);d_m.takeActorSnap(p_l,p_g,b_s,d_u,b_e),d_m.scale(d_m.scaleX*e.CustomActor.MODEL_SCALE,d_m.scaleY*e.CustomActor.MODEL_SCALE),e.GameMap.defaultMap.addAboveObject(d_m),this._runSnapList.push(d_m)}},p_g.update=function(e){var p_l,p_g;for(p_l=this._runSnapList.length-1;-1<p_l;--p_l)(p_g=this._runSnapList[p_l]).update(e)||(this._runSnapList.splice(p_l,1),p_g.removeSelf(),p_g.scaleX=p_g.scaleY=1,Laya.Pool.recover("ActorPosSnap",p_g))},p_g.leaveMap=function(){Gxd(this,Laya)},p_g.clear=function(){for(var e in this._runSnapList)this._runSnapList[e].clear(),this._runSnapList[e].removeSelf(),this._runSnapList[e]=null;this._runSnapList.length=0},p_g._runSnapList=[],p_g);function p_g(){}e.ActorPosSnapFactory=p_l}(Engine2d=Engine2d||{}),function(e){var p_l,p_g;(p_g=p_l=e.RunStatus||(e.RunStatus={}))[p_g.Completed=1]="Completed",p_g[p_g.Failure=2]="Failure",p_g[p_g.Running=3]="Running";var b_s=(d_u.prototype.checkStatus=function(){return Usq(p_l)},d_u);function d_u(){}e.ActionBasicNode=b_s}(Engine2d=Engine2d||{});var d_v=function(){function e(p_l,p_g,b_s,d_u){this._name=p_l,this._ordinal=p_g,this._desc=b_s,this._priority=d_u,e.EnumContentDic[this._ordinal]=this}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ordinal",{get:function(){return this._ordinal},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"desc",{get:function(){return this._desc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"priority",{get:function(){return this._priority},enumerable:!0,configurable:!0}),e.prototype.isPercent=function(){return 50<this.ordinal&&this.ordinal<100},e.getName=function(p_l){return this.getPropertyType(p_l)?e.EnumContentDic[p_l].name:""},e.getDesc=function(p_l){return this.getPropertyType(p_l)?e.EnumContentDic[p_l].desc:""},e.getPropertyType=function(p_l){return e.EnumContentDic[p_l]?e.EnumContentDic[p_l]:null},e.getPropertyTypeByName=function(p_l){var p_g;for(var b_s in e.EnumContentDic)if((p_g=e.EnumContentDic[b_s])&&p_g.name==p_l)return p_g;return null},Object.defineProperty(e,"showPriorityTypes",{get:function(){var p_l,p_g=new Array;for(var b_s in e.EnumContentDic)(p_l=e.EnumContentDic[b_s])&&0<p_l.priority&&p_g.push(p_l);return p_g},enumerable:!0,configurable:!0}),e.getValue=function(e,p_l){return 50<e&&e<100?parseFloat((p_l/100).toFixed(2)):p_l},e.init=function(){for(var p_l in Config.prop){var p_g=Config.prop[p_l];Properties[p_g.name]=new e(p_g.name,p_g.id,p_g.showName,p_g.showPriority)}},e.EnumContentDic={},e}(),Properties,f_t;f_t=Properties=Properties||{},f_t.hpUpper=null,f_t.mpUpper=null,f_t.hpResume=null,f_t.mpResume=null,f_t.attack=null,f_t.defense=null,f_t.armorBreak=null,f_t.element=null,f_t.elementDefense=null,f_t.hit=null,f_t.dodge=null,f_t.cri=null,f_t.criDefense=null,f_t.criDamage=null,f_t.tough=null,f_t.deadly=null,f_t.deadlyDefense=null,f_t.speed=null,f_t.mpResume2=null,f_t.hpResume2=null,f_t.beAttackMpResumePer=null,f_t.distanceAddition=null,f_t.vampirism=null,f_t.hitPercent=null,f_t.dodgePercent=null,f_t.criPercent=null,f_t.criDefensePercent=null,f_t.criDamagePercent=null,f_t.toughPercent=null,f_t.deadlyPercent=null,f_t.deadlyDefensePercent=null,f_t.deadlyDamagePercent=null,f_t.damageDeepenPercent=null,f_t.damageReducePercent=null,f_t.hp=null,f_t.mp=null,f_t.level=null,f_t.exp=null,f_t.fight=null,f_t.fcm=null,f_t.fcmOnlineTotal=null,f_t.stateLv=null,f_t.stateNum=null,f_t.office=null,f_t.ride=null,f_t.vip=null,f_t.vipExp=null,f_t.name=null,f_t.headIcon=null,f_t.settingFlags=null,f_t.goldReborn=null,f_t.dragonsoul=null,f_t.createTime=null,f_t.ringUsed=null,f_t.entryId=null,f_t.modifySexNum=null,f_t.bodyLv=null,f_t.bodySubLv=null,f_t.bodyProgress=null,f_t.gold=null,f_t.copper=null,f_t.killvalue=null,f_t.guildCtrb=null,f_t.honor=null,f_t.soul=null,f_t.soulElite=null,f_t.banquetPoint=null,f_t.asyncpvpPoint=null,f_t.skillExp=null,f_t.xyExp=null,f_t.xsExp=null,f_t.dreamlandExp=null,f_t.integrity=null,f_t.evil=null,f_t.neutral=null,f_t.arenaScore=null,f_t.mentalExp=null,f_t.xyDrawScore=null,f_t.ysScore=null,f_t.sweetScore=null,f_t.fighting=null,f_t.stopping=null,f_t.dizzying=null,f_t.skillTargeNum=null,f_t.hudun=null,f_t.hudunUpper=null,f_t.fightingAckTs=null,f_t.fightingDefTs=null,f_t.tsStove=null,f_t.asyncpvpScore=null,f_t.fashionClothes=null,f_t.fashionWeapon=null,f_t.fashionAvatar=null,f_t.fbHelpTimes=null,f_t.fbAssistTimes=null,f_t.fbWildBossTimes=null,f_t.fbWildBossTimesCd=null,f_t.pagodaSweep=null,f_t.banquetJoinTimes=null,f_t.gid=null,f_t.guildName=null,f_t.palaWorship=null,f_t.dhAddition=null,f_t.treasureLastTime=null,f_t.arenaChallTimes=null,f_t.arenaVipBuyTimes=null,f_t.highRank=null,f_t.arenaChallCd=null,f_t.greenReward=null,f_t.fbTsEquiptTimes=null,f_t.fbTsEquiptRenew=null,f_t.xianYuanPower=null,f_t.ridePower=null,f_t.dragonPower=null,f_t.tsPower=null,f_t.mentalPower=null,f_t.trainingPower=null,f_t.godEquipPower=null,f_t.heavenOpenState=null,f_t.clonePower=null,f_t.reviseName=null,f_t.fashionWing=null;var r_r=function(){function e(){}return e.getRepositoryItem=function(e,p_l,p_g){void 0===e&&(e=0),void 0===p_l&&(p_l=1),void 0===p_g&&(p_g="");var b_s=new x_guild_repository_item;return b_s.uuid=p_g,b_s.num=p_l,b_s.itemid=e,b_s},e.getModuleItemVO=function(e,p_l){void 0===p_l&&(p_l=1);var p_g=new ModuleItemVO;return p_g.id=e,p_g.amount=p_l,p_g},e.getKvVO=function(e,p_l){var p_g=new kvVo;return p_g.key=e,p_g.value=p_l,p_g},e.getBagInfoVO=function(e,p_l,p_g){void 0===e&&(e=0),void 0===p_l&&(p_l=1),void 0===p_g&&(p_g="");var b_s=new BagInfoVO,d_u=new x_bag_item;return d_u.itemId=e,d_u.amount=p_l,d_u.uuid=p_g,b_s.update(d_u),b_s},e}(),ItemGetDefine=function(){function e(){}return e.rideUpStar=200015,e}(),GameDefine=function(){function e(){}return e.getQualityType=function(p_l,p_g){void 0===p_g&&(p_g=!1);var b_s=e.color_green,d_u=e.quality_green;switch(p_l){case"checkWhite":b_s=e.color_white,d_u=e.quality_white;break;case"checkBlue":b_s=e.color_blue,d_u=e.quality_blue;break;case"checkPurple":b_s=e.color_purple,d_u=e.quality_purple;break;case"checkBlue":b_s=e.color_blue,d_u=e.quality_blue;break;case"checkOrange":b_s=e.color_orange,d_u=e.quality_orange;break;case"checkRed":b_s=e.color_red,d_u=e.quality_red}return p_g?b_s:d_u},e.mergeCfgNum=function(e,p_l){var p_g=[],b_s=0,d_u={};if(e&&0<e.length){for(var b_e in p_l)d_u[p_l[b_e][0]]=p_l[b_e][1];for(var b_e in e)b_s=e[b_e][1],d_u[e[b_e][0]]?d_u[e[b_e][0]]+=b_s:d_u[e[b_e][0]]=b_s;for(var b_e in d_u)p_g.push([parseInt(b_e),d_u[b_e]])}else p_g=p_l;return p_g},e.mineOccupyEndID=381,e.boy=1,e.girl=2,e.comp_All=0,e.comp_hecheng=1,e.comp_furnace=2,e.comp_God=3,e.color_white="white",e.color_green="green",e.color_blue="blue",e.color_purple="purple",e.color_orange="orange",e.color_red="red",e.quality_white=1,e.quality_green=2,e.quality_blue=3,e.quality_purple=4,e.quality_orange=5,e.quality_red=6,e.colorList=[e.color_white,e.color_green,e.color_blue,e.color_purple,e.color_orange,e.color_red],e.colorDescList=[(j_x("2026_1145")),(j_x("1087_1145")),(j_x("1157_1145")),(j_x("651_1145")),(j_x("1113_1145")),(j_x("456_1145"))],e.qualityList=[e.quality_white,e.quality_green,e.quality_blue,e.quality_purple,e.quality_orange,e.quality_red],e.property_update="property_update",e.player_appear="player_appear",e}(),FuncDefine=function(){function e(){}return e.office=10001,e.vein=10002,e.state=10003,e.talisman=10004,e.ride=10005,e.personBoss=10006,e.strength=10007,e.pagoda=10008,e.wildBoss=10009,e.guild=10010,e.stateBoss=10011,e.dig=10012,e.stove=10013,e.pvp=10014,e.banquet=10015,e.soulMonster=10016,e.HoleFieldView=10017,e.monthCard=10018,e.dh=10019,e.friend=10020,e.shop=10021,e.welfare=10022,e.shop_1=10023,e.liveness=10024,e.rank=10025,e.PalaceView=10026,e.bossCome=10027,e.treasurepot=10028,e.treasurebox=10029,e.fashion=10030,e.title=10031,e.invite=10032,e.god=10033,e.findGod=10034,e.seal=10035,e.mineWar=10036,e.dreamlandMianPanel=10037,e.arena=10038,e.tssuit=10039,e.citta=10040,e.cabala=10041,e.ResourceBack=10042,e.TalismanEquipPanel=10043,e.ascent=10044,e.dragonPanel=10045,e.wildBossTs=10046,e.OfflineReward=10047,e.marry=10048,e.MedicineView=10049,e.yishouFb=10050,e.beast=10051,e.RefineBody=10052,e.godEquip=10053,e.liudaoFb=10054,e.heaven_open=10055,e.STBoss_Panel=10056,e.MirrorSelfPanel=10057,e.SouthSkyBoss=10058,e.SevenDayServer=10059,e.guildPvp=10060,e.wing=10061,e.body=10062,e.state_7=11001,e.state_8=11002,e.state_9=11003,e.state_10=11004,e.state_11=11005,e.state_12=11006,e.state_13=11007,e.state_14=11008,e.state_15=11009,e.talisman_1=12001,e.talisman_2=12002,e.talisman_3=12003,e.talisman_4=12004,e.talisman_5=12005,e.talisman_6=12006,e.talisman_7=12007,e.talisman_8=12008,e.talisman_9=12009,e.talisman_10=12010,e.talisman_11=12011,e.talisman_12=12012,e.webChat=100001,e.helper=100002,e.wanba_collect=100003,e.wanba_shared=100004,e.firstRecharge=1,e.dailyRecharge=2,e.acumRecharge=3,e.OpenServiceFisrtView=4,e.xsRank=5,e.xgmb=6,e.qltb=7,e.sgsq=8,e.zuhe=9,e.xgbx=10,e.GodWealth=11,e.qltbFestival=12,e.xgmbFestival=13,e.limitReward=14,e.KFopensvrRank=15,e.crossBossMainPanel=16,e.xxsb=17,e.sevenDay=18,e.guildKrieg=19,e.LottertDrawFashion=20,e.LottertDrawRide=21,e.FriendBargain=22,e.LottertDrawMental=23,e.LottertDrawLucky=24,e.LottertDrawDragon=25,e.LottertDrawMarry=26,e.FestivalActivity=27,e.WeekActivity=28,e.MonthActivity=29,e.SweetRankActivity=30,e.RedPacketActivity=31,e.CarnivalAcitvity=32,e.openSvrSevenActivityPanel=33,e.growUpFundActivityPanel=34,e.serRankGymActivity=35,e.RechargeRank=36,e.RecConsRank=37,e.ChristmasBeatMonster=38,e}(),ErrorDefine=function(){function e(){}return e.OK=0,e.OperationFailed=1,e.Test=2,e.OperationIsTooFrequent=3,e.MissingConfig=4,e.ConfigError=5,e.ServerExisting=6,e.goldNotEnough=11,e.copperNotEnough=12,e.killvalueNotEnough=13,e.guildCtrbNotEnough=14,e.honorNotEnough=15,e.soulNotEnough=16,e.soulEliteNotEnough=17,e.banquetPointNotEnough=18,e.asyncpvpPointNotEnough=19,e.skillExpNotEnough=20,e.xyExpNotEnough=21,e.xsExpNotEnough=22,e.dreamlandExpNotEnough=23,e.sweetScoreNotEnough=24,e.YourAccountLandedOtherPlace=101,e.YourClientSendPktTooFast=102,e.YourClientSendBytesTooFast=103,e.YourAccountHasBeenFrozen=104,e.DetetivedUsingPlugin=105,e.PleaseLoginFromFormalChannel=106,e.YourIpHasBeenFrozen=107,e.KickedByServerMaintain=108,e.KickedByGm=109,e.ServerIdDenide=110,e.RegisterRepeatedDenide=111,e.PlayerNameRepeatedDenide=112,e.RegistingPleaseWait=113,e.ReachMaxPlayerNumber=114,e.PlayerNameFiltered=115,e.PlayerNameNoBlank=116,e.PlayerNameTooLong=117,e.PlayerNameTooShort=118,e.PlayerNameUnavailable=119,e.PlayerNotExist=120,e.PlayerIsOffline=121,e.PlayerDataNotLoadedYet=122,e.AccountCannotHaveSpaces=123,e.PlayerNameNotChange=124,e.HeadIconEntryIdNotMatch=125,e.ChangeNameSuccess=126,e.NotOpen=127,e.NotFirstReviseName=128,e.PlayerSexNotChange=129,e.DeathCannotMove=201,e.MapNotExist=202,e.AlreadyInThisMap=203,e.PleaseExitCurrentMapFirst=204,e.LeavingMapserver=205,e.InMapServerAlready=206,e.NotInMapInstanceYet=207,e.MapForbidTeam=208,e.ChatSpeakFrequently=301,e.ChatTooManyChatContent=302,e.ChatLvLmt=303,e.ChatSilence=304,e.ChatCrossLvLmt=305,e.ItemNotExist=401,e.ItemBagNotExist=402,e.ItemBagIsFull=403,e.ItemCannotUseToTarget=404,e.ItemAmountNotEnough=405,e.ItemSortFrequent=406,e.ItemBagSlotNotEnough=407,e.ItemWrongNumber=408,e.ItemListIsEmpty=409,e.ItemIsCooling=410,e.ItemEquipmentEntryNotMatch=411,e.ItemEquipmentPartNotMatch=412,e.ItemEquipmentLvNotMatch=413,e.ItemIsUnvailable=414,e.ItemUseTimesLack=415,e.equipSlotNotEnough=416,e.MailNotExist=501,e.MailHaveAttachment=502,e.MailGetAttachmentFail=503,e.MailHasNoAttachment=504,e.TeamNotExist=601,e.TeamNotIn=602,e.TeamYouAreNotLeader=603,e.TeamMemberReachMax=604,e.TeamAlreadyInNow=605,e.TeamYouAlreadyHad=606,e.TeamTargetNotAccept=607,e.TeamCannotReEnter=608,e.TeamLeaveFb=609,e.FriendNumIsLimit=701,e.FriendTargetNumIsLimit=702,e.FriendTargetInBlack=703,e.FriendYouInTargetBlack=704,e.FriendAddSucc=705,e.FriendRefusedAdd=706,e.FriendAddReqSucc=707,e.FriendTargetAlreadyFriend=708,e.FriendBlackNumIsLimit=709,e.FriendBlackAddSelf=710,e.FriendGiveSuccess=711,e.FriendQinmiLmt=712,e.FriendGiveNotFriend=713,e.FriendQinmiTeamLmt=714,e.ChatPrivTargeBlack=715,e.ChatPrivSelfBlack=716,e.ShopBuyFailForBagSlotLimit=801,e.ShopBuyFailForLevelLimit=802,e.ShopBuyFailForCountLimit=803,e.ShopBuyFailForTimeLimit=804,e.ShopBuyFailForGuildCountLimit=805,e.ShopBuyFailForGuildLevelLimit=806,e.ShopBuyNeedCheckGuild=807,e.ShopBuyNotExist=808,e.ShopBuyDayLimit=809,e.ShopBuyWeekLimit=810,e.ShopBuyRandNotExist=811,e.ShopBuyFailForActivityNotOpen=812,e.ShopBuyFail=813,e.ShopBuyVipLvLmt=814,e.ShopBuyLimit=815,e.SkillTooFarFromTarget=901,e.SkillSelectedInValidTarget=902,e.SkillSelectedInvalidPosition=903,e.SkillPleaseCastLater=904,e.SkillTooNearFromTarget=905,e.SkillIsCoolDowning=906,e.SkillCastFailForMpNotEnough=907,e.SkillLevelUpFailForNotOwn=908,e.SkillLevelUpFailForLevelMax=909,e.SkillDenideForSilence=910,e.SkillNotLight=911,e.SkillLevelUpFailForStateLvNotEnough=912,e.SkillDeathCannotUse=913,e.SkillIsCasting=914,e.SkillCantFindRustPoint=915,e.SkillMentalStarLimit=916,e.FloatingCannotMove=951,e.FloatingCannotCast=952,e.StoppingCannotMove=953,e.StoppingCannotCast=954,e.FrozingCannotMove=955,e.FrozingCannotCast=956,e.DizzyingCannotMove=957,e.RustingCannotCast=958,e.RustingCannotMove=959,e.DizzyingCannotCast=960,e.StateNumNotEnough=1001,e.StateSubLvIsMax=1002,e.StateSubLvNotEnough=1003,e.StateIncreaseTimesLimit=1004,e.StateLvMax=1005,e.StateNumMax=1006,e.StateItemNotEnough=1007,e.StateBreakLevelLimit=1008,e.DecomposeEquipNotItem=1051,e.DecomposeEquipNotCnf=1052,e.DecomposeNotEquip=1053,e.DecomposeNotSoul=1054,e.DecomposeNotSoulElite=1055,e.DecomposeVipNotEnough=1056,e.DecomposeNotTsEquip=1057,e.PickNoPermission=1100,e.PickNoPermissionForNow=1101,e.PickErrorForBagFull=1102,e.DungeonLvNotEnough=1201,e.DungeonChallenging=1202,e.DungeonTargetChallenging=1203,e.DungeonWildBossTimesLimit=1204,e.DungeonWildBossEnterCd=1205,e.DungeonRewardHasToken=1206,e.DungeonNumHasCompleted=1207,e.DungeonEnterTaskNotComplete=1208,e.DungeonTargetPassCanntHelp=1209,e.DungeonNotPassCanntHelp=1210,e.DungeonAssistTimesLimit=1211,e.DungeonTargetOffline=1212,e.DungeonTargetHasPassed=1213,e.DungeonInFbCantEnterOther=1214,e.DungeonTaskNotFinished=1215,e.DungeonTargetNotValid=1216,e.DungeonNotOpen=1217,e.DungeonStateBossNotMatch=1218,e.DragonPalaceTimesLimit=1219,e.DragonPalaceTimeError=1220,e.TaskDoesNotExist=1301,e.TaskAcceptLevelNotEnough=1302,e.TaskAcceptLevelOverflow=1303,e.TaskHasBeenAccepted=1304,e.TaskConfingError=1305,e.TaskIsNotCompleted=1306,e.TaskCanotTransfer=1307,e.TaskTransferLvNotEnough=1308,e.TaskTransferVipNotEnough=1309,e.TaskChainCanExistOnlyOne=1310,e.GuildTaskNeedGuild=1401,e.GuildTaskHasBeenCompleted=1402,e.ActiveCodeServiceBusy=1501,e.ActiveCodeChannelException=1502,e.ActiveCodeServerNotRegisterYet=1503,e.ActiveCodeInvalid=1504,e.ActiveCodeServiceExeception=1505,e.ActiveCodeYouHadGot=1506,e.ActiveCodeTimesLimited=1507,e.ActiveCodeSinglePlayerTimesLimited=1508,e.ActiveCodeSucc=1509,e.ActiveCodeFormatError=1510,e.ActiveCodeThisCodeStopUsing=1511,e.ActiveCodeIllegal=1512,e.ActiveCodeNotAllowPlat=1513,e.ActiveCodeNotAllowServer=1514,e.TalismanStoveIsRefining=1601,e.TalismanIsRefining=1602,e.TalismanDeployUpFail=1603,e.TalismanDeployUpLvOverflow=1604,e.TalismanEngulfOverflow=1605,e.TsSpeelExist=1606,e.TsSpeelSlotMax=1607,e.TsSpeelMax=1608,e.TsSpeelUnExist=1609,e.TsSpeelCondTsCount=1610,e.TsEquipQualityNotEnought=1611,e.TsEquipNotExist=1612,e.TsEquipCnfError=1613,e.TsEquipQualityNotMatch=1614,e.TsLevelNotEnough=1615,e.TsQihunLevelLimit=1616,e.TsQihunNotLevelLimit=1617,e.TsQihunNotActive=1618,e.TsQihunAlreadyActive=1619,e.OfficeMaxLv=1701,e.OfficeStateLv=1702,e.OfficeStrengthLv=1703,e.OfficeStoneLv=1704,e.OfficeTalisman=1705,e.OfficeFacilityLvMax=1706,e.OfficeFighting=1707,e.OfficeLingqiNotEnough=1709,e.OfficeTreasureCd=1710,e.OfficeExpedTaskRefreshNotEnough=1711,e.OfficeExpedTaskNotInList=1712,e.OfficeExpedTalismanInvalid=1713,e.OfficeExpedTaskLimit=1714,e.OfficeExpedTaskNotAccept=1715,e.OfficeExpedTaskFinished=1716,e.OfficeExpedTaskRewardGet=1717,e.OfficeExpedTaskNotFinished=1718,e.OfficeExpedTaskCondition=1719,e.OfficeLvUp=1720,e.OfficeFacilityLvUp=1721,e.OfficeFacilityReset1=1722,e.OfficeFacilityReset2=1723,e.OfficeFacilityReset3=1724,e.BanquetEnd=1801,e.BanquetHasJoinOnce=1802,e.BanquetCantJoinSelf=1803,e.BanquetNotStart=1804,e.BanquetJoinTimesLmt=1805,e.SoulMonsterSlotAlreadyHave=1901,e.SoulMonsterBornCnf=1902,e.SoulMonsterFeedSlot=1903,e.SoulMonsterStatusChange=1904,e.SoulMonsterEliteEmpty=1905,e.SoulMonsterCnf=1906,e.SoulMonsterLvCnf=1907,e.SoulMonsterExpFull=1908,e.SoulMonsterEliteNotEnough=1909,e.SoulMonsterExpNotEnough=1910,e.SoulMonsterSlotMax=1911,e.SoulMonsterGlobalNotExist=1912,e.SoulMonsterRequestSelf=1913,e.SoulMonsterAlreadyMatch=1914,e.SoulMonsterAlreadyRequest=1915,e.SoulMonsterMatchSelf=1916,e.SoulMonsterMatchType=1917,e.SoulMonsterMatchRequest=1918,e.SoulMonsterSearchNotExist=1919,e.SoulMonsterSearchSelf=1920,e.SoulMonsterAlreadyEvolution=1921,e.SoulMonsterRequestNum=1922,e.RideAlreadyHave=2001,e.RideNotExist=2002,e.RideLevelCnfNotExist=2003,e.RideEquipNotExist=2004,e.RideEquipCnfError=2005,e.RideCombineNotExist=2006,e.RideMaxLv=2007,e.RideUpStarItemNotEnought=2008,e.RideUpLevelStarLimit=2009,e.GuildNameAlreadyExists=2101,e.GuildYouJHasJoinedOtherGuild=2102,e.GuildNameInvalid=2103,e.GuildCreateUseTokenItemFail=2104,e.GuildYouAreNotGuildKing=2105,e.GuildRepeatApply=2106,e.GuildAlreadyJoinGuild=2107,e.GuildNotExist=2108,e.GuildWasFull=2109,e.GuildTemporarilyUnableToJoin=2110,e.GuildApplyJoinLimit=2111,e.GuildDidNotJoinGuild=2112,e.GuildMemberNotExist=2113,e.GuildUnavailableJoinApply=2114,e.GuildNoApprovalPermission=2115,e.GuildNoChangeOfficePermission=2116,e.GuildNoKickPermission=2117,e.GuildNoImpeachPermission=2118,e.GuildNoEditNoticePermission=2119,e.GuildCantKickSelf=2120,e.GuildNoOfficeVacancy=2121,e.GuildPermissionError=2122,e.GuildLeaderCantLeaveGuild=2123,e.GuildNoticeInvalid=2124,e.GuildApplicantHasJoinedOtherGuild=2125,e.GuildSkillFullLevel=2126,e.GuildLevelNotEnough=2127,e.GuildHasCheckedIn=2128,e.GuildCheckinGiftHasGet=2129,e.GuildGetGiftNeedCheckIn=2130,e.GuildRefusedToInvite=2131,e.GuildUnavailableInvite=2132,e.GuildChangeNameSucceed=2133,e.GuildRenameNoPermission=2134,e.GuildDisbandOnePeople=2135,e.GuildAuctionItemSaled=2136,e.GuildAuctionItemPass=2137,e.GuildHelpTimesLmt=2138,e.GuildHelpAssistTimesLmt=2139,e.GuildHelpTargetProgressFull=2140,e.GuildHelpGiftToken=2141,e.GuildHelpCantHelpSelf=2142,e.GuildNoOpenBossPermission=2143,e.GuildBossNotKilled=2144,e.GuildBossNotOpen=2145,e.GuildBossOpenTimeInvalid=2146,e.GuildBossChallengeTimesLmt=2147,e.GuildBossOpenFreeTimesLmt=2148,e.GuildBossAlreadyOpen=2149,e.GuildBossKilled=2150,e.GuildHelpGiftCond=2151,e.GuildWealthNotEnough=2152,e.GuildBossNotInTime=2153,e.GuildBossChallengeCD=2154,e.GuildKriegItemNotEnough=2155,e.GuildKriegItemCD=2156,e.GuildKriegEnterBossMax=2157,e.GuildKriegEnterOfficeNotEnount=2158,e.GuildKriegSetAttType=2159,e.GuildKriegFinishSettle=2160,e.GuildKriegRebornCd=2161,e.GuildKriegPlayerExitGuild=2162,e.GuildKriegCloseGuild=2163,e.GuildKriegPlayerBreakGuild=2164,e.GuildRepostoryDeductItemFail=2165,e.GuildRepostorySlotLimit=2166,e.GuildRepostoryNotMember=2167,e.GuildRepostoryNotMgrPermission=2168,e.GuildRepostoryExchangeJoinCD=2169,e.GuildRepostoryNotItem=2170,e.GuildRepostoryItemNumLimit=2171,e.GuildRepostoryScoreLimit=2172,e.VipRewardHasObtained=2201,e.MonthcardDailyRewardHasObtained=2202,e.SignErrorSignDay=2301,e.SignWrongSign=2302,e.SignRewardDayError=2303,e.SignRewardDayNotExist=2304,e.FuncOpenRewardAlreadyTake=2401,e.FuncOpenRewardCondition=2402,e.CollectCanNotWhenCasting=2501,e.CollectTooManyCollector=2502,e.CollectTooManyTimes=2503,e.CollectNeedTask=2504,e.CollectFreezed=2505,e.WorshipAlready=2601,e.BgaExpire=2701,e.BgaError=2702,e.BgaTLGBNeedJoinSomeTime=2703,e.ActivityNotOpen=2704,e.GsaRankEnd=2705,e.GsaExchangeLimit=2706,e.GsaLimitGiftBuyLimit=2707,e.GsaRushRankTitlePopUps=2708,e.InviteCond=2711,e.InviteRewardLmt=2712,e.GsaMinewarLackVit=2721,e.GsaMinewarNotRushing=2722,e.GsaMinewarMineBeOccupied=2723,e.GsaMinewarSlotBeProtected=2724,e.GsaMinewarInCombat=2725,e.GsaMinewarLackToken=2726,e.GsaMinewarSameGuild=2727,e.GsaMinewarEnterTreNotRushing=2728,e.GsaMinewarSameServer=2729,e.GsaMinewarHolePlaceNotEnouth=2730,e.GsaXgmbEnterGuildAfterStop=2751,e.BgaLoginActivityDayLimit=2761,e.BgaLoginActivityDayAlready=2762,e.MineNotExit=2801,e.MineMoveSame=2802,e.MineLeaveHomeSoulLimit=2803,e.MineCanNotMove=2804,e.MineVitLack=2805,e.MineExchangeSoulFull=2806,e.MineExchangeVitLack=2807,e.MineAttackSameGuild=2808,e.MineTargeNotInSame=2809,e.MineRobSameGuild=2810,e.OnlyHomeTownExchange=2811,e.MiniNoAttackToken=2812,e.MiniNoRobberyToken=2813,e.MineFull=2814,e.MineMoveCooldown=2815,e.MineBuyRobFull=2816,e.MineCantAckIdle=2817,e.MineTimeLimit=2818,e.StrengthStoneNotEnough=2901,e.TitleActiveCondition=3001,e.DreamlandLeaderCanntProtect=3090,e.DreamlandAlreadyInLand=3091,e.DreamlandFull=3092,e.DreamlandFinished=3093,e.DreamlandTargetNotExists=3094,e.DreamlandBreakCD=3095,e.DreamlandStateLess=3096,e.DreamlandProtected=3097,e.DreamlandQueryNone=3098,e.DreamlandHosterBreak=3099,e.DreamlandProtectTimeFull=3100,e.AsyncpvpNeedRandTs=3101,e.AsyncpvpNoTs=3102,e.AsyncpvpTargetNotOnRank=3103,e.AsyncpvpMatchCD=3104,e.AsyncpvpShopBuyCondition=3105,e.AsyncpvpNotBuyShop=3106,e.MineWarLeaveFbFirst=3151,e.TargetHideTalisman=3152,e.TargetHideXianyuan=3153,e.TargetHideGodEquip=3154,e.MentalCond=3161,e.MentalSlotNotOpen=3162,e.MentalSlotMax=3163,e.FashionActiveFail=3201,e.ArenaChallCd=3203,e.ArenaChallCount=3204,e.ArenaTitlePopUps=3205,e.ArenaShopBuyRankLimit=3206,e.ArenaTargetRankChange=3207,e.ArenaRankDownTips=3208,e.arenaScoreNotEnough=3209,e.StateUnpassCdTips=3210,e.DhLeftTimeNotEnough=3301,e.DhTargetLeftTimeNotEnough=3302,e.DhAlreadyHangup=3303,e.DhTargetAlreadyHangup=3304,e.DhHasnotInvite=3305,e.DhNotFriend=3306,e.DhInvited=3307,e.DhLeftTimesNotEnough=3308,e.DhTargetLeftTimesNotEnough=3309,e.DhTaskNeedDH=3310,e.DhTaskTimesLimit=3311,e.DhTargetTaskTimesLimit=3312,e.DhMoraInviteTooOften=3313,e.DhRejectMoraInvite=3314,e.DhSettlePop=3315,e.BossComeNotOpen=3401,e.BossComeInFb=3402,e.BossComeTimesLimit=3403,e.BossComeChallengeCD=3404,e.BossComeHasBeenKilled=3405,e.BossComeInspireMax=3406,e.BossComeTargetHasNoScore=3407,e.BossComeNotStop=3408,e.WeChatCollectRewardGet=3501,e.SharedRewardGot=3502,e.NotCollectedYet=3503,e.NotSharedYet=3504,e.ZuheCond=3601,e.ZuheRewardToken=3602,e.XianYuanAlreadyActive=3701,e.XianYuanNotActive=3702,e.XianYuanGodMaxLv=3703,e.XianYuanGodMaxLvStar=3704,e.XianYuanGodMaxStar=3705,e.XianYuanGodStarItemNotEnough=3706,e.XianYuanNotLearn=3707,e.XianYuanXSMaxLv=3708,e.XYUpSuitNotGodLv=3709,e.XYUpSuitNotStar=3710,e.XYEqUpLvMax=3711,e.XYEqUpLvNotStar=3712,e.XYEqUpStarMax=3713,e.XYEqUpStarNotState=3714,e.XYEqUpStarNotGodStar=3715,e.XYEqUpStarNotEqLv=3716,e.XYEqUpSuitNotGodLv=3717,e.XYEqUpSuitNotGodStar=3718,e.XYNotGodStar=3719,e.ComposeDayMax=3801,e.ComposeItemNotExist=3802,e.OfficeSubStateLv=3803,e.RouletteStartNotEnough=3810,e.RouletteActClose=3811,e.RouletteGoldNotEnough=3812,e.FriendDiscountDayLimit=3813,e.FriendDiscountBuyLimit=3814,e.CrossBossBeAttacking=3901,e.DreamlandBreak=3902,e.CrossBossJoinLimit=3903,e.DragonSoulAlreadyHave=4001,e.DragonSoulNotExist=4002,e.DragonSoulLevelCnfNotExist=4003,e.DragonSoulMaxLv=4004,e.DragonSoulStarCnfNotExist=4005,e.DragonSoulUpLevelStarLimit=4006,e.DragonSoulUpStarItemNotEnough=4007,e.DrawCardExist=4008,e.DrawCardScoreNotEnough=4009,e.MarryTargetNotMe=4101,e.MarryTargetNotSex=4102,e.MarryLevelNotEnough=4103,e.MarryNotFriend=4104,e.MarryQinmiNotEnough=4105,e.MarryTimeNotEnough=4106,e.AlreadyHasMarry=4107,e.MarryAlreadyRequest=4108,e.MarryRequestsFull=4109,e.RingInfoNotExist=4110,e.RingCnfNotExist=4111,e.RingMaxLv=4112,e.MarryNotExist=4113,e.LovevalueInfoNotExist=4114,e.LovevalueCnfNotExist=4115,e.LovevalueMaxLv=4116,e.RewardAlreadyGet=4117,e.NotMarryInfo=4118,e.MarryNotOnline=4119,e.MarryBuyTimeLimit=4120,e.MarrySweetLevelLimit=4121,e.MarryCanNotSet=4122,e.MarryIllusionNotAct=4123,e.MarryIllusionIsAct=4124,e.MarryIllusionActCnfNotExist=4125,e.MarryIllusionStarMax=4126,e.TeamDoesNotExist=4201,e.TeamHasJoined=4202,e.TeamPlayerIsInFb=4203,e.TeamIsInFb=4204,e.TeamIsFull=4205,e.TeamInviteNeedLeader=4206,e.TeamRefuseInvite=4207,e.TeamLeaderCantLeave=4208,e.TeamNeedLeader=4209,e.TeamNeedAims=4210,e.TeamCannotJoin=4211,e.TeamCannotHelp=4212,e.TeamCantEnterFb=4213,e.TeamAscentSeekLack=4214,e.TeamHasCreate=4215,e.BeastPloyUpLvOverflow=4301,e.BeastPloyUpFail=4302,e.PetPloyUpLvOverflow=4401,e.PetPloyUpFail=4402,e.PagodaRollFail=4501,e.TrainingAlreadyHave=4601,e.TrainingNotExist=4602,e.TrainingExceedLvUpper=4603,e.TrainingConfigErr=4604,e.GodEquipItemNonexistent=4701,e.GodEquipComposeNumErr=4702,e.GodEquipItemNotEnough=4703,e.redEnvelopesRedCountNotEnough=4801,e.redEnvelopesRedNonexistent=4802,e.redEnvelopesRedReceived=4803,e.redEnvelopesRedSlow=4804,e.redEnvelopesRedBeOverdue=4805,e.cloneEquipNotEnough=4901,e.clonePreviousNotEnough=4902,e.cloneCnfNotEnough=4903,e.cloneUsing=4904,e.cloneEquipNotExist=4905,e.cloneNotOpen=4906,e.cloneNeedNotEnough=4907,e.cloneWearTypeErr=4908,e.cloneNotAct=4909,e.cloneLevelMax=4910,e.cloneIsAct=4911,e.cloneIsBreachEquipStarNotEnough=4912,e.advertCnfNotEnough=5e3,e.advertNumNotEnough=5001,e.advertTimeNotYet=5002,e.silenceCountLimit=5101,e.silenceStateLimit=5102,e.silenceAlready=5103,e.manyPvpHeavenNoOpen=5200,e.guardingNTMCountLimit=5300,e.guardingNTMAttackCountLimit=5301,e.guardingNTMAttackTimeLimit=5302,e.guardingNTMTimeLimit=5303,e.guardingNTMNoClone=5304,e.doublePvpInfoNotSync=5400,e.doublePvpInTeam=5401,e.doublePvpNotInTeam=5402,e.doublePvpPlrNoOnLine=5403,e.doublePvpInvitationBeOverdue=5404,e.doublePvpTeamNotExist=5405,e.doublePvpTeamNumberIsFull=5406,e.doublePvpTeamNoCaptain=5407,e.doublePvpTeamNotMemberKick=5408,e.doublePvpTeamCaptainNoLeave=5409,e.doublePvpChangeNameNum=5410,e.doublePvpNameExist=5411,e.doublePvpCloneNumToBig=5412,e.doublePvpCloneNoAct=5413,e.doublePvpTarPlrInTeam=5414,e.doublePvpChangeNameErr=5415,e.doublePvpMatchNumNotEnough=5416,e.doublePvpMatchCooling=5417,e.doublePvpMatchBuyNumNotEnough=5418,e.doublePvpChallengeNumNotEnough=5419,e.doublePvpFormationTypeErr=5420,e.doublePvpNotMember=5421,e.doublePvpHasCloneNotExist=5422,e.doublePvpHasCloneIdRepeat=5423,e.doublePvpMatchfail=5424,e.doublePvpChallengeNotInRank=5425,e.doublePvpTeamIntNotEnough=5426,e.doublePvpIsRevenge=5427,e.doublePvpRevengeErr=5428,e.doublePvpRankReward=5429,e.doublePvpLastRankReward=5430,e.doublePvpLastNotQualifications=5431,e.doublePvpNotNextIntReward=5432,e.doublePvpInFb=5433,e.doublePvpNotMatchTeam=5434,e.AdventureIsTimeOut=5435,e.AdventureQuestionNotAnswer=5436,e.AdventureRechargeHasBeenSendMail=5437,e.LastChangeItemUnfinish=5438,e.ChangeItemNotCount=5439,e.ChangeItemClose=5440,e.GuildPvpCloneHireed=5500,e.GuildPvpKillNumNotEnough=5501,e.GuildPvpFightOver=5502,e.GuildPvpNodeNoDeclareWar=5503,e.GuildPvpOtherDeclareWar=5504,e.GuildPvpHeavenNoOccupy=5505,e.GuildPvpNeedDeclareWar=5506,e.GuildPvpNeedOccupy=5507,e.GuildPvpMayAckSelfNode=5508,e.GuildPvpNumErr=5509,e.GuildPvpCloneBusy=5510,e.GuildPvpCloneHpNotEnough=5511,e.GuildPvpDispatchTypeErr=5512,e.GuildPvpCloneNotDispatch=5513,e.GuildPvpCloneInFight=5514,e.GuildPvpNotNodeReward=5515,e.GuildPvpCloneInDispatch=5516,e.GuildPvpNodeFree=5517,e.GuildPvpNeedElder=5518,e.GuildPvpNeedElderDiscard=5519,e.GuildPvpNodeNoInPeace=5520,e.GuildPvpNodeDiscardOk=5521,e.GuildPvpNodeDeclareWarOk=5522,e.GuildPvpRetreatOk=5523,e.GuildPvpCannotRecovery=5524,e.NotReachStateLv=5600,e.NotReachSubStateLv=5601,e.BodyCultivationFull=5602,e.BodySubLevelNotFull=5603,e.BodySubLevelMax=5604,e.BodyLevelMax=5605,e.BodyCultivationNotFull=5606,e.Ok=1e5,e.PhpLoadMailDbFail=100001,e.PhpCmdNotExist=100002,e.PhpLoadSilenceDbFail=100003,e.PhpLoadFreezeDbFail=100004,e.PhpUnfreezeByPidFail=100005,e.PhpUnfreezeByIpFail=100006,e.PhpInviteReportFail=100007,e.rank=100008,e}(),Config,Config,Config;!function(e){var p_l=(p_g.init=function(){for(var p_l in e.window){var p_g=e.window[p_l];this.windowRef[p_g.className]=p_g.id}},p_g.parseActivityEndTime=function(e){return Cce(e,p_g)},p_g.getWindowByName=function(p_l){var p_g=this.windowRef[p_l];return p_g?e.window[p_g]:null},p_g.isInActivityTime=function(e){var p_l=this.parseActivityStartTime(e),p_g=this.parseActivityEndTime(e);return SyncTime.serverTime>=p_l&&SyncTime.serverTime<p_g},p_g.parseActivityStartTime=function(e){return Yyn(e,p_g)},p_g.parseActivityKeepTime=function(e){var p_l=e.startTime.split(":"),p_g=Number(p_l[0]),b_s=Number(p_l[1]||0),d_u=Number(p_l[2]||0),b_e=new Date(SyncTime.serverTime);b_e.setHours(p_g),b_e.setMinutes(b_s),b_e.setSeconds(d_u);var d_m=Math.floor(b_e.getTime()/1e3);return p_l=e.stopTime.split(":"),p_g=Number(p_l[0]),b_s=Number(p_l[1]||0),d_u=Number(p_l[2]||0),(b_e=new Date(SyncTime.serverTime)).setHours(p_g),b_e.setMinutes(b_s),b_e.setSeconds(d_u),Math.floor(b_e.getTime()/1e3)-d_m},p_g.parseStrTime=function(e){if(!e&&""==e)return 0;var p_l=e.split(":"),p_g=Number(p_l[0]),b_s=Number(p_l[1]||0),d_u=Number(p_l[2]||0),b_e=new Date(SyncTime.serverTime);return b_e.setHours(p_g),b_e.setMinutes(b_s),b_e.setSeconds(d_u),Math.floor(b_e.valueOf()/1e3)},p_g.nextActTime=function(e,p_l){var p_g=new Date(1e3*p_l).getDay();0===p_g&&(p_g=7);var b_s=e.week.filter((function(e){return 0<e&&e<=7}));if(b_s&&0<b_s.length)for(var d_u=p_g;;){7<++d_u&&(d_u-=7);for(var b_e=-1,d_m=0;d_m<b_s.length;++d_m)if(b_s[d_m]===d_u){b_e=d_m;break}if(0<=b_e){var d_w=b_s[b_e]-p_g;return d_w<0&&(d_w+=7),p_l+86400*d_w}}return 0},p_g.windowRef={},p_g);function p_g(){}e.Utils=p_l}(Config=Config||{}),function(e){function p_l(){}var p_g,b_s;p_g=e.Parser||(e.Parser={}),p_l.load=function(p_g,b_s){Kuz(p_g,b_s,console,j_x,p_l,Laya,e)},p_l.unzip=function(e){return Crg(e,pako)},p_l.doParse=function(p_g,b_s){var d_u;console.log((j_x("1048_847_1451")+j_x(745)));var b_e,d_m=null,d_w=null,f_t=null,v_z=null,d_h=0,r_t=0,t_n=msgpack.Decoder(),f_y={};t_n.on("data",(function(p_l){if(d_u){if(!d_m&&0!==d_m)return d_m=p_l,d_w=0,void(f_t=[]);if((d_w||0===d_w)&&d_w<d_m){var p_g=p_l.split("|"),b_s=p_g[0],t_n=p_g[1];return f_t.push([b_s,t_n]),void(d_m<=++d_w&&(d_w=null))}if(null==v_z)return"number"!=typeof p_l?void console.error("rowCount unpack type error, except number, got",z_c(p_l)):void(0===p_l?f_t=d_w=d_m=d_u=null:v_z=p_l);var p_q=f_t[r_t],h_h=p_q[0],n_j=p_q[1];(b_e=b_e||{})[h_h]=p_l,"table"!==n_j&&"array"!==n_j&&"object"!==n_j||"string"==typeof p_l&&(b_e[h_h]=""!=p_l?JSON.parse(p_l):null),++r_t>=f_t.length&&(d_u[b_e.id]=b_e,b_e=null,r_t=0,v_z<=++d_h&&(d_h=0,f_t=d_w=d_m=v_z=d_u=null))}else d_u=(d_u=e[p_l])||(f_y[p_l]=e[p_l]={})})).on("end",(function(){p_l.afterLoad(),GPlatform.isDebug&&console.log((j_x("1451_745_1048")+j_x("847_1917_432")),f_y),b_s&&b_s(),p_g=null})),t_n.end(p_g)},p_l.fastMod=function(e){},p_l.afterLoad=function(){Gte(e,d_v)},b_s=p_l,p_g.ConfigParser=b_s}(Config=Config||{}),function(e){e.achievement_achStart=null,e.achievement_achievement=null,e.activeness_activeness=null,e.activeness_reward=null,e.activityType=null,e.activity_accRank_accReward=null,e.activity_activity=null,e.activity_drawcard_rewards=null,e.activity_drawcard_round=null,e.activity_drawcard_scoreReward=null,e.activity_festiReward_festiReward=null,e.activity_festiReward_festiTarget=null,e.activity_friendDiscount_rewardDiscount=null,e.activity_investmentPlan_growUpFundReward=null,e.activity_investmentPlan_investmentPlanReward=null,e.activity_investmentPlan_investmentSetId=null,e.activity_invite_invite=null,e.activity_limitGift_items=null,e.activity_limitReward_limitReward=null,e.activity_mergeSvr_mergeSvrAim=null,e.activity_minewar_achievement=null,e.activity_minewar_exchange=null,e.activity_minewar_mines=null,e.activity_minewar_rankReward=null,e.activity_qltbFestival_exchange=null,e.activity_qltbFestival_keys=null,e.activity_qltb_exchange=null,e.activity_qltb_keys=null,e.activity_rankReward=null,e.activity_recharge_acumRecharge=null,e.activity_recharge_dailyConsumption=null,e.activity_recharge_dailyRecharge=null,e.activity_recharge_singleRecharge=null,e.activity_rushRank_KFpromote=null,e.activity_rushRank_guildShow=null,e.activity_rushRank_opensvrAim=null,e.activity_rushRank_opensvrContinuousRecharge=null,e.activity_rushRank_opensvrDiscountRecharge=null,e.activity_rushRank_opensvrResourceUrl=null,e.activity_rushRank_opensvrReward=null,e.activity_serverReward=null,e.activity_sgsq_exchange=null,e.activity_turntable_exchange=null,e.activity_turntable_gifts=null,e.activity_turntable_mainShops=null,e.activity_xgmbFestival_exchange=null,e.activity_xgmbFestival_keys=null,e.activity_xgmb_exchange=null,e.activity_xgmb_keys=null,e.activity_xjmb_exchange=null,e.activity_xxsb_exchange=null,e.activity_zuhe_zuheAct=null,e.activity_zuhe_zuheType=null,e.adventure_adventure_question=null,e.adventure_adventure_recharge=null,e.adventure_adventure_shop=null,e.adventure_adventure_trigger=null,e.advert_advert=null,e.asyncpvp_asyncpvpShop=null,e.asyncpvp_danGrading=null,e.asyncpvp_shop=null,e.asyncpvp_winningStreak=null,e.banquet_banquet=null,e.banquet_grade=null,e.beast_beast=null,e.beast_evolution=null,e.beast_ploy=null,e.beast_upgrade=null,e.beast_uplevel=null,e.beast_variation=null,e.bosscome_rewards=null,e.character=null,e.city=null,e.clone_clone=null,e.clone_cloneLevel=null,e.clone_starUp=null,e.color=null,e.commonCd=null,e.decompose_decompose=null,e.decompose_godEquipDecompose=null,e.decompose_soulDecompose=null,e.decompose_tsEquipDecompose=null,e.doublePvp_points=null,e.doublePvp_pointsRewards=null,e.doublePvp_rankRewards=null,e.double_hangup_intimacy=null,e.double_hangup_question=null,e.double_hangup_task=null,e.double_hangup_title=null,e.dragon_dragon=null,e.dragon_dragonLevel=null,e.dragon_dragonStar=null,e.drama=null,e.dreamland_dreamland=null,e.dreamland_dreamlandSkill=null,e.effects=null,e.enlargeMap=null,e.error=null,e.face=null,e.fashion_fashion=null,e.fashion_upgrade=null,e.fb_ascent=null,e.fb_crossboss=null,e.fb_drangonPalace=null,e.fb_dungeon=null,e.fb_gerenboss=null,e.fb_green_boss_reward=null,e.fb_hangup=null,e.fb_marry_fb=null,e.fb_pagoda=null,e.fb_state_choose=null,e.fb_state_choose_question=null,e.fb_state_stage=null,e.fb_stateboss_reward=null,e.fb_story=null,e.fb_wildboss=null,e.fb_xuanshang=null,e.fb_yishou=null,e.fightCoef=null,e.friend_friend_activeness=null,e.friend_give=null,e.funcOpen=null,e.global=null,e.godEquip_godEquipM=null,e.godEquip_suit=null,e.guide_guide=null,e.guide_guidePhase=null,e.guildPvp_cloneHire=null,e.guildPvp_guildPvpHolds=null,e.guildPvp_killReward=null,e.guildPvp_multipleReward=null,e.guild_guildAuction=null,e.guild_guildBoss=null,e.guild_guildCheckin=null,e.guild_guildCheckinReward=null,e.guild_guildContribute=null,e.guild_guildFlag=null,e.guild_guildHelpItem=null,e.guild_guildKrieg=null,e.guild_guildKriegCollect=null,e.guild_guildKriegSettle=null,e.guild_guildLevel=null,e.guild_guildOffice=null,e.guild_guildRepository=null,e.guild_guildShop=null,e.gymkhana_gymkhanaShop=null,e.gymkhana_maxRankReward=null,e.gymkhana_rankReward=null,e.hangup=null,e.headIcon=null,e.helper=null,e.itemGet=null,e.item_coin=null,e.item_compose=null,e.item_composeType=null,e.item_composeType2=null,e.item_consumeable=null,e.item_equipment=null,e.item_material=null,e.item_petSpirit=null,e.item_sort=null,e.layout=null,e.map=null,e.marry_achv=null,e.marry_love_value=null,e.marry_ring=null,e.marry_ringAct=null,e.marry_ringStar=null,e.marry_sweet=null,e.minewar_box=null,e.minewar_mines=null,e.nameList=null,e.notice=null,e.obj_collect=null,e.obj_monster=null,e.obj_monster_fb=null,e.obj_npc=null,e.obj_robot=null,e.office_attic=null,e.office_expedTask=null,e.office_expedition=null,e.office_facilities=null,e.office_mine=null,e.office_office=null,e.office_treasure=null,e.palace_palace=null,e.paopao=null,e.pivot=null,e.platform=null,e.player_level=null,e.player_property=null,e.preLoadRes=null,e.prop=null,e.rank_charmRankReward=null,e.rank_ranklist=null,e.rank_worship=null,e.reborn=null,e.recharge_goldShop=null,e.recharge_monthcard=null,e.recharge_recharge=null,e.recharge_redPacket=null,e.recharge_vip=null,e.restore_restore=null,e.ride_ride=null,e.ride_rideCombine=null,e.ride_rideCombineType=null,e.ride_rideLevel=null,e.ride_rideSkill=null,e.ride_rideStar=null,e.seven_day_task_seven_activeness=null,e.seven_day_task_seven_reward=null,e.seven_day_task_seven_reward_last=null,e.sevenday_sevenday=null,e.shop_shop=null,e.sign_sign=null,e.sign_signCount=null,e.skill_buff=null,e.skill_mental_gird=null,e.skill_mental_star=null,e.skill_passive_beast=null,e.skill_passive_dragon=null,e.skill_passive_fashion=null,e.skill_passive_god=null,e.skill_passive_godEquip=null,e.skill_passive_guild=null,e.skill_passive_marry=null,e.skill_passive_mental=null,e.skill_passive_mental_extra=null,e.skill_passive_ride=null,e.skill_passive_role=null,e.skill_passive_sweet=null,e.skill_passive_talisman=null,e.skill_passive_training=null,e.skill_skill=null,e.skill_skillUp=null,e.soulmonster_soulBorn=null,e.soulmonster_soulCost=null,e.soulmonster_soulEggBorn=null,e.soulmonster_soulLevel=null,e.soulmonster_soulSlot=null,e.soulmonster_soulmonster=null,e.soundPathMar=null,e.source=null,e.state_body=null,e.state_bodyGrade=null,e.state_state=null,e.state_stateIncrease=null,e.state_stateSub=null,e.strength_strength=null,e.strength_strengthFull=null,e.strength_strengthPart=null,e.switchScene=null,e.systemNotice=null,e.talisman_awaken=null,e.talisman_deployment=null,e.talisman_proptype=null,e.talisman_qihunLevel=null,e.talisman_qihunStar=null,e.talisman_speelSlot=null,e.talisman_stove=null,e.talisman_strength=null,e.talisman_strengthPart=null,e.talisman_suits=null,e.talisman_talisman=null,e.talisman_talismanopen=null,e.talisman_upgrade=null,e.talisman_uplevel=null,e.talisman_uplevelCrit=null,e.talisman_variation=null,e.task_task=null,e.title_title=null,e.title_titleLevel=null,e.training_training=null,e.training_trainingLevel=null,e.training_trainingStar=null,e.window=null,e.xianyuan_coach=null,e.xianyuan_conclude=null,e.xianyuan_equip=null,e.xianyuan_equipLv=null,e.xianyuan_equipStar=null,e.xianyuan_equipSuits=null,e.xianyuan_god=null,e.xianyuan_levelup=null,e.xianyuan_starup=null,e.xianyuan_suits=null,e.xianyuan_xianshu=null,e.xianyuan_xianweiLevel=null,e.xianyuan_xianweiStar=null}(Config=Config||{});var z_r=function(){function e(){}return e.recharge_first=1,e.recharge_daily=2,e.recharge_single=3,e.recharge_add=4,e.recharge_consume=5,e.openSer_power=11,e.openSer_talisman=12,e.timeLimit_gctrb=21,e.timeLimit_pvp=22,e.timeLimit_banquet=23,e.limitActivity_xgmb=31,e.limitActivity_qltb=32,e.backGround_GodWealth=41,e.office_system=1010001,e.vein_system=1010002,e.state_system=1010003,e.talisman_system=1010004,e.ride_system=1010005,e.personBoss_system=1010006,e.strength=1010007,e.pagoda_system=1010008,e.wildBoss_system=1010009,e.guild_system=1010010,e.stateBoss_system=1010011,e.dig_system=1010012,e.stove_system=1010013,e.pvp_system=1010014,e.banquet_system=1010015,e.soulMonster_system=1010016,e.field_system=1010017,e.monthCard=1010018,e.dh=1010019,e.friend_system=1010020,e.shop_system=1010021,e.welfare_system=1010022,e.activity_system=1010023,e.liveness_system=1010024,e.rank_system=1010025,e.PalaceView_systm=1010026,e.bossCome_systm=1010027,e.treasurepot_systm=1010028,e.treasurebox_systm=1010029,e.invite_system=1010032,e.god_system=1010033,e.findGod_system=1010034,e.ts_fengyin=1010035,e.arena_system=1010038,e.ascent_system=1010044,e}(),ReelEffecte=function(){function e(){}return e.prototype.InitEffecteDate=function(e,p_l,p_g){void 0===p_g&&(p_g=""),e&&(this.reelBox?this.reelBox.parent=e.parent:(this.reelBox=new Laya.Box,e.parent?e.parent.addChild(this.reelBox):e.addChild(this.reelBox)),this.reelEffecte||(this.reelEffecte=new n_k,e.addChild(this.reelEffecte)),p_l&&""!=p_l&&(this.reelImage||(this.reelImage=new Laya.Image,this.reelImage.skin=p_l,this.reelImageScale=new Laya.Point(1,1),this.reelBox.addChild(this.reelImage))),this.reelLabel||(this.reelLabel=new Laya.HTMLDivElement,this.reelBox.addChild(this.reelLabel),this.reelLabel.style.fontSize=24,this.reelLabel.style.color="#444675",this.reelLabel.width=400),this.reelLabel.innerHTML=p_g,this.SetBoxPos(e))},e.prototype.reelEffecteOver=function(){var e=this.reelBox,p_l=this.reelEffecte;Laya.timer.once(1500,this,(function(){e.visible=!1,p_l&&(p_l.visible=!1)}))},e.prototype.SetImageScale=function(e,p_l){this.reelImage&&e&&(this.reelImage.scale(p_l.x,p_l.y),this.reelImageScale.x=p_l.x,this.reelImageScale.y=p_l.y,this.SetBoxPos(e))},e.prototype.SetBoxPos=function(p_l){if(p_l){var p_g=0,b_s=0;this.reelImage&&(b_s=this.reelImage.height*this.reelImageScale.y,p_g=this.reelImage.width*this.reelImageScale.x),this.reelLabel&&""!=this.reelLabel.innerHTML&&(this.reelLabel.y=b_s+e.Space,this.reelLabel.x=(this.reelImage.width*this.reelImageScale.x-this.reelLabel.contextWidth)/2,b_s+=this.reelLabel.style.fontSize+e.Space),this.reelBox&&this.reelBox.pos(p_l.x-p_g/2,p_l.y-b_s/2)}},e.prototype.PlayEffecte=function(){if(this.reelEffecte&&this.reelBox&&this.reelImage){this.reelEffecte.visible=!0;var e=this.reelBox;e.visible=!1,this.reelEffecte.actBackFunc=null,this.reelEffecte.changeModel("effects/others"),this.reelEffecte.setAction("holeBanner",0,!1,130),Laya.timer.once(600,this,(function(){this.reelEffecte.visible=!0,e.visible=!0})),this.reelEffecte.IsPlayStand=!1,this.reelEffecte.actBackFunc=this.reelEffecteOver.bind(this)}},e.prototype.reelEffecteStop=function(){Upm(Laya,this)},e.prototype.reelClearEffecte=function(){this.reelImage&&this.reelImage.destroy(),this.reelLabel&&this.reelLabel.destroy(),this.reelBox&&this.reelBox.destroy(),this.reelImage=null,this.reelLabel=null,this.reelBox=null},e.prototype.SetText=function(e,p_l){Mps(e,p_l,this)},e.prototype.clearRes=function(){this.reelEffecte&&(this.reelEffecteStop(),this.reelEffecte.clearRes())},e.Space=10,e}(),PageGroupList=function(){function e(e,p_l,p_g,b_s,d_u){this._curPage=1,this._maxPage=1,this._pageCount=5,this._list=e,this._preBtn=p_g,this._nextBtn=b_s,this._mLabel=d_u,this._pageCount=p_l,p_g.on(Laya.Event.CLICK,this,this.onBtnClick),b_s.on(Laya.Event.CLICK,this,this.onBtnClick)}return e.prototype.onBtnClick=function(e){var p_l=e.target;if(p_l){if(p_l==this._preBtn){if(this._curPage--,this._curPage<1)return void(this._curPage=1)}else if(p_l==this._nextBtn&&(this._curPage++,this._curPage>this._maxPage))return void(this._curPage=this._maxPage);this.setLabel(),this.setContent()}},Object.defineProperty(e.prototype,"selectEnable",{set:function(e){this._list.selectEnable=e,this._list.selectedIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectHandler",{set:function(e){this._list.selectHandler=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderHandler",{set:function(e){this._list.renderHandler=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return this._list.selectedIndex},set:function(e){this._list.selectedIndex=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItem",{get:function(){return this._list.selectedItem},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"array",{set:function(e){if(this._datas!=e){var p_l=(this._datas=e).length/this._pageCount;this._maxPage=Math.floor(e.length/this._pageCount)+(0<p_l?1:0),this._curPage=1,this.setContent(),this.setLabel()}},enumerable:!0,configurable:!0}),e.prototype.setContent=function(){var e=(this._curPage-1)*this._pageCount,p_l=this._datas.slice(e,e+this._pageCount);this._list.array=p_l},e.prototype.setLabel=function(){this._mLabel&&(this._mLabel.text=Utils.$("{1}/{2}",this._curPage,this._maxPage))},Object.defineProperty(e.prototype,"curPage",{get:function(){return this._curPage},set:function(e){this._curPage!=e&&(this._curPage=e,this.setContent(),this.setLabel())},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){Ahj(this)},e}(),UI,UI,UI;!function(e){var p_l=(Object.defineProperty(p_g.prototype,"num",{get:function(){return this.value},set:function(e){this.value=e,this.container.removeChildren(),this.sp=b_p.buildNumsImg(this.skin,this.value,10,1,null,this.offset),this.sp.x=this.container.width-this.sp.width>>1+this.offset,this.sp.parent||this.container.addChild(this.sp)},enumerable:!0,configurable:!0}),p_g);function p_g(e,p_l){void 0===p_l&&(p_l=0);var p_g=(this.container=e).getChildByName("clip");this.skin=p_g.skin,this.offset=p_l,this.container.removeChildren()}e.NumClip=p_l}(UI=UI||{}),function(e){var p_l=(p_g.prototype.setValue=function(e,p_l){this.value=e/p_l,this._txt&&(this._txt.text=Utils.$("{1}/{2}",e,p_l))},Object.defineProperty(p_g.prototype,"value",{set:function(e){this._barImg.mask=null,e=(e=1<e?1:e)<0?0:e;var p_l,p_g=this._barImg.width,b_s=this._barImg.height;0==this._drawType?(this._sprite_gra.graphics.clear(),this._sprite_gra.graphics.drawRect(0,0,p_g*e,b_s,"#16aabb")):(this._sprite_gra.graphics.clear(),this._sprite_gra.graphics.drawRect(0,b_s*(1-e),p_g,b_s*e,"#16aabb")),this._sprite_gra.visible=!1,this._sprite_gra.parent||this._barImg.addChild(this._sprite_gra),this._barImg.mask=this._sprite_gra,this._cursor&&((p_l=p_g-this._cursor.width)<0||p_l+this._cursor.width>this._barImg.width?this._cursor.visible=!1:(this._cursor.visible=!0,this._cursor.x=p_l+this._barImg.x)),this._barEft&&((p_l=p_g-this._barEft.width)<0||p_l+this._barEft.width>this._barImg.width?this._barEft.visible=!1:this._barEft.x=(p_l+this._barImg.x+this._barEftOffset)*e)},enumerable:!0,configurable:!0}),Object.defineProperty(p_g.prototype,"visible",{set:function(e){this._barImg&&(this._barImg.visible=e),this._bgImg&&(this._bgImg.visible=e),this._cursor&&(this._cursor.visible=e),this._txt&&(this._txt.visible=e),this._barEft&&(this._barEft.visible=e),this._sprite_gra&&(this._sprite_gra.visible=e)},enumerable:!0,configurable:!0}),p_g);function p_g(e,p_l,p_g,b_s,d_u,b_e,d_m){void 0===p_g&&(p_g=null),void 0===b_s&&(b_s=null),void 0===d_u&&(d_u=null),void 0===b_e&&(b_e=0),void 0===d_m&&(d_m=0),this._barImg=e,this._bgImg=p_l,this._cursor=p_g,this._txt=b_s,this._barEft=d_u,this._barEftOffset=b_e,this._drawType=d_m,this._sprite_gra=new Laya.Sprite,this._barImg.mask=this._sprite_gra,this.value=0}e.MaskProgressBar=p_l}(UI=UI||{}),function(e){var p_l=(p_g.playOnce=function(e,p_l,p_g,b_s,d_u){if(e&&p_l&&""!==p_l){var b_e=(p_g=p_g||{}).clipUrl,d_m=p_g.clipX,d_w=p_g.clipY,f_t=p_g.interval,v_z=p_g.blendMode,d_h=p_g.x,r_t=p_g.y,t_n=e.getChildByName(p_l);if(t_n)t_n.isPlaying||(t_n.visible=!0,t_n.play(!1),t_n.on(Laya.Event.COMPLETE,this,this.onEffComplete,[e,t_n,p_g,b_s]));else{if(!b_e||!d_m||!d_w)return;(t_n=new Laya.Clip(b_e,d_m,d_w)).name=p_l,t_n.interval=f_t||50,d_h&&(t_n.x=d_h),r_t&&(t_n.y=r_t),v_z&&(t_n.blendMode=v_z),d_u&&(t_n.width=d_u.x,t_n.height=d_u.y),e.addChild(t_n),t_n.on(Laya.Event.LOADED,this,this.onEffLoaded,[e,t_n,p_g,b_s])}}},p_g.onEffLoaded=function(e,p_l,p_g,b_s){b_s?(p_l.x=b_s.x,p_l.y=b_s.y):(p_l.x=(e.width>>1)-(p_l.width>>1),p_l.y=(e.height>>1)-(p_l.height>>1)),p_l.play(!1),p_l.on(Laya.Event.COMPLETE,this,this.onEffComplete,[e,p_l,p_g])},p_g.onEffComplete=function(e,p_l,p_g,b_s){Ieg(e,p_l,p_g,b_s)},p_g.playLoop=function(e,p_l,p_g,b_s,d_u,b_e,d_m){if(e&&p_l&&""!==p_l){var d_w=(b_s=b_s||{}).clipUrl,f_t=b_s.clipX,v_z=b_s.clipY,d_h=b_s.interval,r_t=b_s.blendMode,t_n=b_s.x,f_y=b_s.y,p_q=e.getChildByName(p_l);if(p_q)d_w&&""!=d_w?(p_q.skin=d_w,p_q.visible=!0,p_q.play()):(p_q.visible=!1,p_q.stop());else{if(!d_w||!f_t||!v_z)return;(p_q=new Laya.Clip(d_w,f_t,v_z)).name=p_l,p_q.interval=d_h||50,t_n&&(p_q.x=t_n),f_y&&(p_q.y=f_y),r_t&&(p_q.blendMode=r_t),b_e&&(p_q.width=b_e.x,p_q.height=b_e.y),e.addChild(p_q),d_m&&e.setChildIndex(p_q,d_m),p_q.on(Laya.Event.LOADED,this,this.onLoopLoaded,[e,p_q,b_s,d_u,p_g])}}},p_g.hideEffect=function(e,p_l){var p_g=e.getChildByName(p_l);p_g&&(p_g.visible=!1,p_g.stop())},p_g.clearRes=function(e,p_l){var p_g=e.getChildByName(p_l);p_g&&(p_g.visible=!1,p_g.stop(),n_e.clearRes([p_g.skin]))},p_g.onLoopLoaded=function(e,p_l,p_g,b_s,d_u){if(b_s)p_l.x=b_s.x,p_l.y=b_s.y;else{var b_e=d_u||e;p_l.x=b_e.width-p_l.width>>1,p_l.y=b_e.height-p_l.height>>1,d_u&&(p_l.x+=b_e.x,p_l.y+=b_e.y)}p_l.play()},p_g);function p_g(){}e.EffectPlayer=p_l}(UI=UI||{});var r_n=function(){function e(){}return e.prototype.obtainAssetEffect=function(e,p_l,p_g){for(var b_s=[],d_u=0;d_u<10;d_u++){var b_e=Laya.Pool.getItemByClass("coinImageEffect",Laya.Image),d_m=Config.item_coin[e].minIcon;b_e.skin=Resource.ResUrl.getIconUrl(d_m);var d_w=Math.round(100*Math.random()),f_t=Math.round(100*Math.random()),v_z=p_l.x+d_w,d_h=p_l.y+f_t;b_e.pos(v_z,d_h),b_s.push(b_e),Laya.stage.addChild(b_e)}function r_t(e){null!=e&&(e.skin=null,e.x=e.y=0,e.removeSelf(),Laya.Pool.recover("coinImageEffect",e))}Laya.timer.once(500,this,(function(){for(var e=.1,p_l=0,d_u=b_s;p_l<d_u.length;p_l++){var b_e=d_u[p_l];e+=.1,Laya.Tween.to(b_e,{f_u:p_g.x,j_l:p_g.y,alpha:.5},1e3*e,null,Laya.Handler.create(this,r_t,[b_e],!0))}}))},e.prototype.flyLittleToBagEffect=function(e,p_l,p_g,b_s,d_u,b_e){void 0===d_u&&(d_u=1.5);var d_m=Laya.Pool.getItemByClass("flyLittleToBagEffect",Laya.Image),d_w=Resource.ResUrl.getIconUrl(e);function f_t(e){null!=e&&(e.skin=null,e.x=e.y=0,e.removeSelf(),Laya.Pool.recover("flyLittleToBagEffect",e),null!=b_e&&b_e())}d_m.skin=d_w,d_m.scale(b_s,b_s),d_m.pos(p_l.x,p_l.y),d_m.alpha=1,Laya.stage.addChild(d_m),Laya.timer.once(500,this,(function(){Laya.Tween.to(d_m,{f_u:p_g.x,j_l:p_g.y,alpha:.5,scaleX:d_u,scaleY:d_u},400,null,Laya.Handler.create(this,f_t,[d_m],!0))}))},e.prototype.flyToBagEffect=function(e,p_l,p_g,b_s){var d_u=Laya.Pool.getItemByClass("flyToBagEffect",Laya.Image),b_e=Resource.ResUrl.getIconUrl(e);function d_m(e){null!=e&&(e.skin=null,e.x=e.y=0,e.removeSelf(),Laya.Pool.recover("flyToBagEffect",e))}d_u.skin=b_e,d_u.pos(p_l.x,p_l.y),Laya.stage.addChild(d_u),Laya.timer.once(500,this,(function(){Laya.Tween.to(d_u,{f_u:p_g.x,j_l:p_g.y,alpha:.5,scaleX:.3,scaleY:.3},400,null,Laya.Handler.create(this,d_m,[d_u],!0))}))},e.prototype.clickScaleEffect=function(e,p_l,p_g){Laya.Tween.to(e,{scaleX:p_l,scaleY:p_l},1e3*p_g,null,Laya.Handler.create(this,(function(e){null!=e&&(e.scaleX=1,e.scaleY=1)}),[e]))},e.prototype.shakeEffect=function(e,p_l,p_g,b_s){function d_u(e,p_l,p_g,b_s){Laya.Tween.to(e,{rotation:-b_s},1e3*p_g,null,Laya.Handler.create(this,b_e,[e,p_l,p_g,b_s],!0),10,!0)}var b_e=function(e,p_l,p_g,b_s){Laya.Tween.to(e,{rotation:b_s},1e3*p_g,null,Laya.Handler.create(this,d_u,[e,p_l,p_g,b_s],!0),10,!0)};d_u(e,p_l,p_g,b_s)},e.prototype.floatEffect=function(e,p_l,p_g,b_s){function d_u(e,p_l,p_g,b_s){var d_u=p_l+b_s;Laya.Tween.to(e,{j_l:d_u},1e3*p_g,null,Laya.Handler.create(this,b_e,[e,p_l,p_g,b_s],!0),100,!0)}var b_e=function(e,p_l,p_g,b_s){var b_e=p_l-b_s;Laya.Tween.to(e,{j_l:b_e},1e3*p_g,null,Laya.Handler.create(this,d_u,[e,p_l,p_g,b_s],!0),100,!0)};d_u(e,p_l,p_g,b_s)},e.prototype.playLvUpEffect=function(){this._lvUpEffect||(this._lvUpEffect=new EffectUpVo),this._lvUpEffect.playLvUpEffect(0),this._lvUpEffect1||(this._lvUpEffect1=new EffectUpVo),this._lvUpEffect1.playLvUpEffect(1)},e.prototype.flyToBagEffectSkew=function(e,p_l,p_g,b_s,d_u,b_e){void 0===b_s&&(b_s=[0,0]);var d_m=Laya.Pool.getItemByClass("flyToBagEffectSkew",Laya.Image),d_w=Resource.ResUrl.getIconUrl(e);function f_t(e){null!=e&&(e.skin=null,e.x=e.y=0,e.removeSelf(),Laya.Pool.recover("flyToBagEffectSkew",e))}d_m.skin=d_w,d_m.pos(p_l.x,p_l.y),d_m.skew(0,0),d_m.scale(d_u,d_u),Laya.stage.addChild(d_m),Laya.timer.once(600,this,(function(){Laya.Tween.to(d_m,{f_u:p_g.x,j_l:p_g.y,alpha:.5,scaleX:.1,scaleY:.1,skewX:-75,skewY:75},500,null,Laya.Handler.create(this,f_t,[d_m],!0))}))},e.prototype.shakeRedPacket=function(e,p_l,p_g,b_s,d_u){function b_e(e,p_l,p_g,b_s){Laya.Tween.to(e,{rotation:-b_s},1e3*p_g,null,Laya.Handler.create(this,d_m,[e,p_l,p_g,b_s],!0),10,!0)}void 0===d_u&&(d_u=!1);var d_m=function(e,p_l,p_g,b_s){d_u?Laya.Tween.to(e,{rotation:b_s},1e3*p_g,null,Laya.Handler.create(this,d_w,[],!0),10,!0):Laya.Tween.to(e,{rotation:b_s},1e3*p_g,null,Laya.Handler.create(this,b_e,[e,p_l,p_g,b_s],!0),10,!0),d_u=!0},d_w=function(){Laya.Tween.to(e,{rotation:0},1e3*p_g,null),Laya.timer.once(1e3,this,d_m,[e,p_l,p_g,b_s]),d_u=!1};b_e(e,p_l,p_g,b_s)},e.instance=new e,e}(),EffectUpVo=function(){function e(){}return e.prototype.playLvUpEffect=function(e){this._lvUpEffect||(this._lvUpEffect=Resource.ResManager.Instance.freeAnimation,this._effectDir=e,this._lvUpEffect.rootUrl=Resource.ResUrl.getEffectRootUrl(0),this._lvUpEffect.avatar=0===e?"others/levelUp":"others/levelUp02",this._lvUpEffect.on(Laya.Event.COMPLETE,this,this.onLvEffectPlayComplete),this._lvUpEffect.on(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onLvEffectLoadedComplete),this._lvUpEffect.setAction(0===e?"levelUp":"levelUp02",0,!1,67))},e.prototype.onLvEffectPlayComplete=function(){this._lvUpEffect&&(this._lvUpEffect.off(Laya.Event.COMPLETE,this,this.onLvEffectPlayComplete),this._lvUpEffect.off(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onLvEffectLoadedComplete),this._lvUpEffect.clear(),this._lvUpEffect.removeSelf(),Resource.ResManager.Instance.recoverAnimation(this._lvUpEffect),this._lvUpEffect=null)},e.prototype.resetAnimPivot=function(e){if(e){var p_l=e.getGraphicBounds();if(p_l&&0!=p_l.width&&0!=p_l.height){var p_g=p_l.height/2,b_s=this.getPivotConfig(e.avatar);b_s&&(p_g+=b_s.offsetPivotY),e.pivot(p_l.width/2,p_g)}}},e.prototype.onLvEffectLoadedComplete=function(e){var p_l=Engine2d.Hero.local;p_l?this._lvUpEffect&&this._lvUpEffect.url==e&&(this._lvUpEffect.play(0,this._lvUpEffect.isLoop),0===this._effectDir?p_l.fightingCtrl.addUnderChild(this._lvUpEffect,0):p_l.fightingCtrl.addPopChild(this._lvUpEffect),this._lvUpEffect.pos(0,0),this.resetAnimPivot(this._lvUpEffect)):this.onLvEffectPlayComplete()},e.prototype.getPivotConfig=function(e){if(e){var p_l=Config.pivot;for(var p_g in p_l)if(p_l[p_g].avatar===e)return p_l[p_g]}return null},e}(),Engine2d;!function(e){var p_l=(p_g.MakeLong=function(e,p_l){return Whi(e,p_l)},p_g.getTimer=function(){return Ovs(Laya)},p_g.getPivotConfig=function(e){if(e){var p_l=Config.pivot;for(var p_g in p_l)if(p_l[p_g].avatar===e)return p_l[p_g]}return null},p_g.BindDomain=function(e,p_l){return Acp(e,p_l)},p_g.$=function(e){for(var p_l,b_s=[],d_u=1;d_u<arguments.length;d_u++)b_s[d_u-1]=arguments[d_u];var b_e=0,d_m=-1,d_w=-1,f_t=e.indexOf("{",b_e);if(-1==f_t||0==b_s.length)return e;do{if(-1==(d_w=e.indexOf("}",f_t+1)))break;p_l=f_t+1<(d_m=e.indexOf(":",f_t+1))&&d_m<d_w?Number(e.substring(f_t+1,d_m)):Number(e.substring(f_t+1,d_w)),isNaN(p_l)||p_l==Math.abs(p_l)&&0<p_l&&p_l<=b_s.length&&(p_g.stringBuilder.writeUTFBytes(e.substring(b_e,f_t)),null!=b_s[p_l-1]&&p_g.stringBuilder.writeUTFBytes(b_s[p_l-1].toString()),b_e=d_w+1)}while(-1!=(f_t=e.indexOf("{",f_t+1)));p_g.stringBuilder.writeUTFBytes(e.substring(b_e)),p_g.stringBuilder.pos=0;var v_z=p_g.stringBuilder.readUTFBytes(p_g.stringBuilder.length);return p_g.stringBuilder.clear(),v_z},p_g.stringBuilder=new Laya.Byte,p_g);function p_g(){}e.Tools=p_l;var b_s=(d_u.prototype.clear=function(){Qno(this)},d_u);function d_u(){this._nLeft=0,this._nTop=0,this._nRight=0,this._nBottom=0}e.Rectangle=b_s;var b_e=(d_m.absCeil=function(e){var p_l=0<e?1:-1;return Math.ceil(Math.abs(e))*p_l},d_m.absRound=function(e){var p_l=0<e?1:-1;return Math.round(Math.abs(e))*p_l},d_m.int2String=function(e,p_l){var p_g,b_s,d_u=[],b_e=e;if(0==b_e)d_u.push(0);else for(;0<b_e;)p_g=Math.floor(b_e/10),b_s=b_e%10,d_u.push(b_s),b_e=p_g;var d_m="",d_w=d_u.length,f_t=0,v_z=0;if(d_w<p_l){var d_h=p_l-d_w;for(v_z=0;v_z<d_h;v_z++)d_m+="0";for(;0<d_u.length;)d_m+=""+d_u.pop()}else for(f_t=0;f_t<p_l;f_t++)0<d_u.length&&(d_m=""+d_u.shift()+d_m);return d_u=null,d_m},d_m);function d_m(){}e.MathUtils=b_e;var d_w=(f_t.getReverDir=function(e){var p_l=e<0?0:e;return 4<=p_l?p_l-4:p_l+4},f_t.calcForwardPosition=function(e,p_l,p_g,b_s,d_u){switch(void 0===d_u&&(d_u=null),d_u=d_u||new Laya.Point,p_g){case 0:return d_u.setTo(e,p_l-b_s);case 1:return d_u.setTo(e+b_s,p_l-b_s);case 2:return d_u.setTo(e+b_s,p_l);case 3:return d_u.setTo(e+b_s,p_l+b_s);case 4:return d_u.setTo(e,p_l+b_s);case 5:return d_u.setTo(e-b_s,p_l+b_s);case 6:return d_u.setTo(e-b_s,p_l);case 7:return d_u.setTo(e-b_s,p_l-b_s);default:throw new Error((j_x("867_2043_711")+j_x("2221_425_745")+j_x("1702_1860_1204")+j_x("743_814_407")+j_x("2046_2221_883")+":")+p_g)}},f_t.calcPosRadian=function(e,p_l,p_g,b_s){return Mcz(e,p_l,p_g,b_s,f_t)},f_t.pxTocx=function(p_l){return Iqy(p_l,e)},f_t.radianToDir=function(e){return Yjh(e,f_t)},f_t.coordToPixels=function(e,p_l){return new Laya.Point(f_t.cxToPx(e),f_t.cyToPy(p_l))},f_t.checkDirIsMirror=function(e,p_l){return!(0==e&&4==p_l||0==p_l&&4==e||e==p_l)&&this.getDirMirror(e)==this.getDirMirror(p_l)},f_t.dirToRadian=function(e){return Obx(e,f_t)},f_t.pyTocy=function(p_l){return Mkx(p_l,e)},f_t.getMaxDistance=function(e,p_l,p_g,b_s){var d_u=p_g-e,b_e=b_s-p_l;return d_u<0&&(d_u=-d_u),b_e<0&&(b_e=-b_e),b_e<d_u?d_u:b_e},f_t.checkDistance=function(p_l,p_g,b_s){var d_u=this.pxTocx(e.Hero.local.x),b_e=this.pyTocy(e.Hero.local.y);return!(Math.abs(d_u-p_l)>b_s||Math.abs(b_e-p_g)>b_s)},f_t.calcPointsForwordStep=function(e,p_l,p_g,b_s,d_u){return Grq(e,p_l,p_g,b_s,d_u,f_t)},f_t.cxToPx=function(p_l,p_g){return void 0===p_g&&(p_g=.5),(p_l+p_g)*e.CustomMap.MAPCELLUNITWIDTH},f_t.calcPosDir=function(e,p_l,p_g,b_s){return Aan(e,p_l,p_g,b_s,f_t)},f_t.adjustRadian=function(e){return(e%=f_t.PI2)<0&&(e+=f_t.PI2),e},f_t.calcForwardPosByRadian=function(e,p_l,p_g,b_s){var d_u=e+b_e.absRound(b_s*Math.cos(p_g)),d_m=p_l+b_e.absRound(b_s*Math.sin(p_g));return new Laya.Point(d_u,d_m)},f_t.cyToPy=function(p_l,p_g){return void 0===p_g&&(p_g=.5),(p_l+p_g)*e.CustomMap.MAPCELLUNITHEIGHT},f_t.calcDistance=function(e,p_l,p_g,b_s){return Eao(e,p_l,p_g,b_s)},f_t.calcSimpleDistance=function(e,p_l,p_g,b_s){return Ili(e,p_l,p_g,b_s)},f_t.calcDistance2=function(e,p_l,p_g,b_s){return Afz(e,p_l,p_g,b_s)},f_t.calcForwardDirection=function(e,p_l,p_g,b_s){return e==p_g?p_l<=b_s?4:0:p_l==b_s?p_g<e?6:2:e<p_g?b_s<p_l?1:3:b_s<p_l?7:5},f_t.getDirMirror=function(e){return 5==e?3:6==e?2:7==e?1:e},f_t.calcActorsDir=function(e,p_l){return Axt(e,p_l,f_t)},f_t.getMouseCoord=function(){return Yqz()},Object.defineProperty(f_t,"screenDirection",{get:function(){return null},enumerable:!0,configurable:!0}),f_t.calcAngle=function(e,p_l,p_g,b_s){var d_u=180*Math.atan2(b_s-p_l,p_g-e)/Math.PI;return(d_u%=360)<0&&(d_u+=360),d_u},f_t.posRotationAngle=function(e,p_l,p_g){var b_s=new Laya.Point;return b_s.x=(e.x-p_l.x)*Math.cos(p_g)-(e.y-p_l.y)*Math.sin(p_g)+p_l.x,b_s.y=(e.x-p_l.x)*Math.sin(p_g)-(e.y-p_l.y)*Math.cos(p_g)+p_l.y,b_s},f_t.findNearestMovableNode=function(p_l,p_g,b_s,d_u,b_e,d_m){void 0===d_m&&(d_m=!0);var d_w,v_z=new Laya.Point;if(d_m&&b_e.moveable(b_s,d_u))v_z.x=b_s,v_z.y=d_u,d_w=!0;else{b_e!=e.GameMap.defaultMap&&(p_l=b_e.mapWidth>>1,p_g=b_e.mapHeight>>1);for(var d_h=f_t.calcForwardDirection(b_s,d_u,p_l,p_g),r_t=3;0<--r_t;)if(v_z=f_t.calcForwardPosition(b_s,d_u,d_h,r_t),b_e.moveable(v_z.x,v_z.y)){d_w=!0;break}if(!d_w){for(var t_n=f_t.calcDistance(p_l,p_g,b_s,d_u),f_y=f_t.calcPosRadian(p_l,p_g,b_s,d_u);v_z=f_t.calcForwardPosByRadian(p_l,p_g,f_y,t_n>>=1),b_e.moveable(v_z.x,v_z.y)?(d_w=!0,p_l=v_z.x,p_g=v_z.y):(b_s=v_z.x,d_u=v_z.y),0<t_n;);d_w&&(v_z.x=p_l,v_z.y=p_g)}}return d_w||(v_z.x=p_l,v_z.y=p_g),v_z},f_t.rotationToRadian=function(e){var p_l=3.1416*(e=isNaN(e)?0:e)/180;return f_t.adjustRadian(p_l)},f_t.coordToScreenXY=function(p_l,p_g){return Ilf(p_l,p_g,e)},f_t.findNearestMovablePxy=function(e,p_l,p_g,b_s,d_u,b_e,d_m){void 0===b_e&&(b_e=3),void 0===d_m&&(d_m=null);var d_w=f_t.calcForwardDirection(p_g,b_s,e,p_l);return f_t.calcForwardPosition(p_g,b_s,d_w,b_e,d_m)},f_t.rotationToDir=function(e){var p_l=(e=isNaN(e)?90:e)/f_t.radianRate;return p_l=f_t.adjustRadian(p_l),f_t.radianToDir(p_l)},f_t.radianToRotation=function(e){var p_l=e*f_t.radianRate;return 180<p_l?p_l-=360:p_l<-180&&(p_l+=360),p_l},f_t.getVectorByDir=function(e,p_l){switch(p_l){case 0:return new Laya.Point(0,-e);case 1:return new Laya.Point(e,-e);case 2:return new Laya.Point(e,0);case 3:return new Laya.Point(e,e);case 4:return new Laya.Point(0,e);case 5:return new Laya.Point(-e,e);case 6:return new Laya.Point(-e,0);case 7:return new Laya.Point(-e,-e);default:throw new Error((j_x("867_2043_711")+j_x("2221_425_745")+j_x("1702_1860_1204")+j_x("743_814_407")+j_x("2046_2221_883")+":")+p_l)}},f_t.radianRate=180/Math.PI,f_t.angleRate=Math.PI/180,f_t.dirRadian=Math.PI/4,f_t.PI2=2*Math.PI,f_t.rotationRate=45,f_t.helpPoint=new Laya.Point,f_t);function f_t(){}e.MapUtils=d_w}(Engine2d=Engine2d||{});var z_j=function(){function e(){}return e.goodAlert=function(e,p_l,p_g,b_s,d_u,b_e,d_m){void 0===b_e&&(b_e=0),void 0===d_m&&(d_m=1);var d_w=BagModel.instance.getItemCountByItemID(e,d_m),f_t=Config.itemGet[p_g],v_z=f_t?f_t.shopId2:0;0<=d_w-p_l?Laya.Handler.create(b_s,d_u).run():r_f.instance.isWindows(e,v_z,b_e)},e.setListScroll=function(e,p_l,p_g,b_s){void 0===p_l&&(p_l=!0),void 0===p_g&&(p_g=200),void 0===b_s&&(b_s=50),p_l?e.vScrollBarSkin||(e.vScrollBarSkin=""):e.hScrollBarSkin||(e.hScrollBarSkin=""),e.scrollBar.elasticBackTime=p_g,e.scrollBar.elasticDistance=b_s},e.consumeToHtmlText=function(e,p_l,p_g,b_s,d_u){void 0===p_g&&(p_g="<br>"),void 0===b_s&&(b_s=["#b4fbf2"]),void 0===d_u&&(d_u=0);var b_e,d_m="",d_w=0;for(var f_t in p_l){d_w+=1,b_e=p_l[f_t];var v_z=Config.CItem(b_e[0]);if(v_z){var d_h=Utils.setImg(Resource.ResUrl.getIconUrl(v_z.icon),e.x,e.y),r_t=BagModel.instance.getItemCountByItemID(b_e[0],BagTypeDefine.BAG_TYPE_ITEM),t_n=r_t>=b_e[1]?b_s[0]:b_s[1],f_y=Utils.$("{1}/{2}",b_p.calsulate(r_t),b_e[1]);d_m+="<br>"!=p_g&&0!=d_u&&d_w%d_u==0?Utils.$("{1}{2}{3}{4}",d_h,Utils.setSpace(1),Utils.setColor(f_y,t_n),"<br>"):Utils.$("{1}{2}{3}{4}",d_h,Utils.setSpace(1),Utils.setColor(f_y,t_n),p_g)}}return d_m},e.setTree=function(e,p_l,p_g,b_s){void 0===p_l&&(p_l=null),void 0===p_g&&(p_g=null),void 0===b_s&&(b_s="kong"),p_g&&(e.renderHandler=Laya.Handler.create(p_l,p_g,null,!1)),"kong"==b_s&&(e.scrollBarSkin="")},e.getPercent=function(e,p_l,p_g){void 0===p_g&&(p_g=10),e<0&&(e=0);var b_s=Math.floor(e/p_l*p_g);return 0<p_g&&(b_s/=p_g),b_s},e.isGoodEnough=function(e,p_l,p_g){return void 0===p_g&&(p_g=1),p_l<=BagModel.instance.getItemCountByItemID(e,p_g)},e.copyList=function(e,p_l){void 0===p_l&&(p_l=0);for(var p_g=[],b_s=e.length,d_u=p_l;d_u<b_s;d_u++)p_g.push(e[d_u]);return p_g},e.getNewList=function(e,p_l){for(var p_g,b_s=[],d_u=e.length,b_e=0;b_e<d_u;b_e++)p_g=e[b_e],b_s.push(p_g[p_l]);return b_s},e.setList=function(e,p_l,p_g,b_s){void 0===p_l&&(p_l=null),void 0===p_g&&(p_g=null),void 0===b_s&&(b_s=null),p_g&&(e.renderHandler=Laya.Handler.create(p_l,p_g,null,!1)),b_s&&(e.selectEnable=!0,e.selectHandler=Laya.Handler.create(p_l,b_s,null,!1))},e.createShowVo=function(e,p_l,p_g,b_s){void 0===p_l&&(p_l=!1),void 0===p_g&&(p_g=!1),void 0===b_s&&(b_s=null);var d_u=new p_y;return d_u.type=e,d_u.isLock=p_l,d_u.isRp=p_g,d_u.data=b_s,d_u},e.countPer=function(e,p_l,p_g,b_s){void 0===p_g&&(p_g=!1),void 0===b_s&&(b_s=1);var d_u=e/p_l,b_e=Math.round(100*d_u);return p_g&&b_e<=0&&(b_e=b_s),100<=b_e&&(b_e=100),b_e},e.rewardToHtmlText=function(e,p_l,p_g,b_s,d_u){void 0===b_s&&(b_s="<br>"),void 0===d_u&&(d_u=0);var b_e="",d_m=0;for(var d_w in p_g){d_m+=1;var f_t=p_g[d_w],v_z=Config.CItem(f_t[0]);if(v_z){var d_h=Utils.setImg(Resource.ResUrl.getIconUrl(v_z.icon),e,p_l),r_t=f_t[1];b_e+="<br>"!=b_s&&0!=d_u&&d_m%d_u==0?Utils.$("{1}{2}x{3}{4}",d_h,Utils.setSpace(1),r_t,"<br>"):Utils.$("{1}{2}x{3}{4}",d_h,Utils.setSpace(1),r_t,b_s)}}return b_e},e.setGray=function(e,p_l){void 0===p_l&&(p_l=!0),e.gray=p_l,e.mouseEnabled=!p_l},e.isLoadJsonList=function(e,p_l,p_g,b_s){void 0===b_s&&(b_s=null);for(var d_u,b_e=[],d_m=0,d_w=e.length,f_t=0;f_t<d_w;f_t++){var v_z=e[f_t];d_u=Resource.ResUrl.BASE_URL+v_z+".json",Laya.loader.getRes(d_u)?d_m++:b_e.push(d_u)}var d_h=d_m==d_w;return d_h||Laya.loader.load(b_e,Laya.Handler.create(p_l,p_g,b_s)),d_h},e.centerList=function(e,p_l,p_g,b_s,d_u){var b_e=d_u,d_m=p_l.length;d_m<p_g&&(b_e=b_s-(d_m*e.getCell(0).width+e.spaceX*(d_m-1))>>1),e.x=b_e},e.isLoadJson=function(e,p_l,p_g,b_s){void 0===b_s&&(b_s=null);var d_u=Resource.ResUrl.BASE_URL+e+".json";return!!Laya.loader.getRes(d_u)||(Laya.loader.load(d_u,Laya.Handler.create(p_l,p_g,b_s)),!1)},e.setHtml=function(e,p_l,p_g,b_s,d_u,b_e,d_m){void 0===p_l&&(p_l=28),void 0===p_g&&(p_g="#ffffff"),void 0===b_s&&(b_s=10),void 0===d_u&&(d_u="center"),void 0===b_e&&(b_e="SimHei"),void 0===d_m&&(d_m=!0),e.style.fontSize=p_l,e.style.color=p_g,e.style.leading=b_s,e.style.align=d_u,e.style.wordWrap=d_m,e.style.font=b_e},e.centerListScale=function(e,p_l,p_g,b_s,d_u){var b_e,d_m=p_l.length,d_w=e.getCell(0);b_e=p_g<=d_m?(b_s-(p_g*d_w.width*d_w.scaleX+p_g*e.spaceX*d_w.scaleX))/2:(b_s-(d_m*d_w.width*d_w.scaleX+p_g*e.spaceX*d_w.scaleX))/2,e.x=b_e},e.getMoneyName=function(e,p_l){void 0===p_l&&(p_l=-1);var p_g="";return e==ItemType.money&&(p_g=(j_x("36_1582"))),0<p_l&&(p_g=p_l+p_g),p_g},e.createNumList=function(e,p_l){void 0===p_l&&(p_l=0);for(var p_g=[],b_s=0;b_s<e;b_s++)p_g.push(b_s+p_l);return p_g},e.createMenuVo=function(e,p_l,p_g,b_s,d_u,b_e,d_m,d_w){void 0===d_u&&(d_u=null),void 0===b_e&&(b_e=3),void 0===d_m&&(d_m=null),void 0===d_w&&(d_w=!0);var f_t=Laya.Pool.getItemByClass("menuVo",d_b);return f_t.pid=e,f_t.name=p_l,f_t.menuList=p_g,f_t.fun=b_s,f_t.dir=b_e,f_t.data=d_u,f_t.pos=d_m||new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY),f_t.showArrow=d_w,f_t},e}(),Utils;!function(e){var p_l=(Object.defineProperty(p_g,"Filter_Light",{get:function(){return this.filter_light||(this.filter_light=new Laya.ColorFilter([2,0,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0,0,2,0])),this.filter_light},enumerable:!0,configurable:!0}),p_g.WHITE="#FFFFFF",p_g.RED="#B92929",p_g.GREEN="#00802E",p_g.GRAY_PURPLE="#42435A",p_g.SKY_BLUE="#4A728E",p_g.BROWN="#644107",p_g.DEPTH_PURPLE="#2C2F62",p_g.NAME_GREEN="#71DE66",p_g.NAME_RED="#E32828",p_g.NAME_WHITE="#d8dcec",p_g);function p_g(){}e.Color=p_l;var b_s=(d_u.getTalismanQualityColor=function(e){var p_l=e-2;return p_l=2e3+(p_l<1?1:p_l),Config.color[p_l].color},d_u.replaceItemBeforeSend=function(p_l,p_g){if(p_g){var b_s=0,d_u=void 0;for(var b_e in p_g)b_s++,p_l=Config.talisman_talisman[p_g[b_e].id]?this.replaceTalismanBeforeSend(p_l,p_g[b_e],b_s):(d_u=1<p_g[b_e].amount?e.$("[{1}]x{2}",p_g[b_e].name,p_g[b_e].amount):e.$("[{1}]",p_g[b_e].name),p_l.replace(d_u," {"+b_s+":"+n_d.CLIENT_ITEM_KEY+"} "))}return p_l},d_u.getQualityColor=function(e){return Cig(e,Config)},d_u.getQuaColorsName=function(e){return Kxg(e,j_x,Config)},d_u.replaceTalismanBeforeSend=function(p_l,p_g,b_s){return p_g&&(p_l=p_l.replace(e.$("[{1}]",p_g.name)," {"+b_s+":"+n_d.CLIENT_TALISMAN_KEY+"} ")),p_l},d_u);function d_u(){}e.ItemUtils=b_s,e.splitTexture=function(e,p_l,p_g){void 0===p_l&&(p_l=1),void 0===p_g&&(p_g=1);for(var b_s,d_u=new Array,b_e=e.width/p_l,d_m=e.height/p_g,d_w=0;d_w<p_l;d_w++)for(var f_t=0;f_t<p_g;f_t++)(b_s=Laya.Texture.createFromTexture(e,d_w*b_e,f_t*d_m,b_e,d_m))&&d_u.push(b_s);return d_u},e.setImg=function(p_l,p_g,b_s){return p_l=e.formatURL(p_l),e.$("<img src='{1}' style='width:{2}px ;height:{3}px;' ></img>",p_l,p_g,b_s)},e.setSpace=function(e){void 0===e&&(e=1);for(var p_l="",p_g=0;p_g<e;p_g++)p_l+="&nbsp;";return p_l},e.formatTimeStr4=function(e,p_l){if(void 0===p_l&&(p_l=!0),0==e)return"";var p_g=new Date;return p_g.setTime(1e3*e),((p_l?p_g.getFullYear()+(j_x(643)):"")+(p_g.getMonth()+1)+(j_x(693))+p_g.getDate()+(j_x(1254))+p_g.getHours()+(j_x(1702))+p_g.getMinutes()+(j_x(2224))).replace(/\b(\d)\b/g,"0$1")},e.updateVo=function(e,p_l){for(var p_g in p_l||{})if(p_l.hasOwnProperty(p_g)){var b_s=p_l[p_g];e[p_g]=b_s}return e},e.setColor=function(p_l,p_g,b_s,d_u){return void 0===b_s&&(b_s=0),void 0===d_u&&(d_u="#000000"),0<b_s?e.$("<span style='stroke:{1};strokeColor:{2};color:{3}'>{4}</span>",b_s,d_u,p_g,p_l):e.$("<span style='color:{1};'>{2}</span>",p_g,p_l)},e.parseJsonToObjs=function(e,p_l,p_g){if(p_g){p_l=p_l||{};var b_s={};for(var d_u in p_l){var b_e=new p_g;for(var d_m in p_l[d_u])p_l[d_u].hasOwnProperty(d_m)&&(b_e[d_m]=p_l[d_u][d_m]);p_l[d_u][e]&&(b_s[parseInt(p_l[d_u][e])]=b_e)}return b_s}},e.formatTimeStr=function(e){var p_l=Math.floor(e/3600),p_g=Math.floor((e-60*p_l*60)/60),b_s=Math.floor(e-60*p_l*60-60*p_g);return(0<=p_l&&p_l<10?"0"+p_l:p_l)+":"+(p_g<10?"0"+p_g:p_g)+":"+(b_s<10?"0"+b_s:b_s)},e.formatURL=function(e){return GPlatform.isWxMini||GPlatform.isQQMini?Laya.URL.formatURL(e):(GPlatform.isRelease&&(e=Laya.ResourceVersion.addVersionPrefix(e)),e)},e.getRandom=function(e,p_l){return Mbl(e,p_l)},e.formatTimeStr4_other=function(e,p_l){if(void 0===p_l&&(p_l=!0),0==e)return"";var p_g=new Date;return p_g.setTime(1e3*e),((p_l?p_g.getFullYear()+"/":"")+(p_g.getMonth()+1)+"/"+p_g.getDate()).replace(/\b(\d)\b/g,"0$1")},e.binarySearch=function(e,p_l){for(var p_g,b_s=0,d_u=p_l.length-1;b_s<d_u;)if(e<p_l[p_g=(b_s+d_u)/2])d_u=p_g-1;else{if(!(e>p_l[p_g]))return e==p_l[p_g]?p_g:-1;b_s=1+p_g}},e.html2Escape=function(e){return e.replace(/[<>&"]/g,(function(e){return{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"}[e]}))},e.getHourTime=function(p_l,p_g){void 0===p_g&&(p_g=!0);var b_s=p_l.split(":"),d_u=e.dealZero(b_s[0]),b_e=e.dealZero(b_s[1]),d_m=e.dealZero(b_s[2]);return p_g?1e3*(60*d_u*60+60*b_e+d_m):[d_u,b_e,d_m]},e.formatTimeStr3=function(e){if(0==e)return"";var p_l=new Date;p_l.setTime(1e3*e);var p_g=p_l.getFullYear()+(j_x(643))+(p_l.getMonth()+1)+(j_x(693))+p_l.getDate()+(j_x(1254)+" ");return(p_g+=p_l.getHours()+":"+p_l.getMinutes()+":"+p_l.getSeconds()).replace(/\b(\d)\b/g,"0$1")},e.setHref=function(p_l,p_g,b_s){return void 0===b_s&&(b_s="#00FF00"),e.$("<span style='color:{1};' href='{2}'>{3}</span>",b_s,p_g,p_l)},e.limmitStrClear=function(e){var p_l="";return e==p_l||null==e?p_l:p_l=(p_l=e.replace(/[^\u4e00-\u9fa5a-zA-Z0-9\w]/g,"")).replace(/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g,"")},e.formatTimeStr5=function(e){var p_l=Math.floor(e/60),p_g=Math.floor(e-60*p_l);return(p_l<10?"0"+p_l:p_l)+":"+(p_g<10?"0"+p_g:p_g)},e.fmtDate=function(e,p_l){void 0===p_l&&(p_l="yyyy-MM-dd hh:mm:ss"),e.toLocaleString();var p_g={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),b_x:e.getMilliseconds()};for(var b_s in/(y+)/.test(p_l)&&(p_l=p_l.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),p_g)new RegExp("("+b_s+")").test(p_l)&&(p_l=p_l.replace(RegExp.$1,1==RegExp.$1.length?p_g[b_s]:("00"+p_g[b_s]).substr((""+p_g[b_s]).length)));return p_l},e.NameLimmit=function(){return Sbi()},e.isSameDay=function(e,p_l){var p_g="number"==typeof e?new Date(1e3*e):e,b_s="number"==typeof p_l?new Date(1e3*p_l):p_l;return p_g.getFullYear()===b_s.getFullYear()&&p_g.getMonth()===b_s.getMonth()&&p_g.getDate()===b_s.getDate()},e.subtractDate=function(e,p_l,p_g,b_s){void 0===e&&(e=0),void 0===p_l&&(p_l=0),void 0===p_g&&(p_g=null),void 0===b_s&&(b_s=null);var d_u=60*(new Date).getTimezoneOffset()*1e3,b_e=e,d_m=p_l;p_g&&b_s&&(b_e=p_g.getTime(),d_m=b_s.getTime());var d_w=Math.floor((b_e-d_u)/864e5),f_t=Math.floor((d_m-d_u)/864e5);return b_e<0&&d_w--,d_m<0&&f_t--,f_t-d_w},e.formaNum=function(e){var p_l=[(j_x(2374)),(j_x(1737)),(j_x(158)),(j_x(1470)),(j_x(2107)),(j_x(379)),(j_x(1223)),(j_x(1247)),(j_x(1170)),(j_x(251)),(j_x(545))];return p_l[e]?p_l[e]:e.toString()},e.formatTimeStr2_new=function(p_l,p_g){void 0===p_g&&(p_g=!1);var b_s=Math.floor(p_l/86400),d_u=Math.floor(p_l%86400/3600),b_e=Math.floor(p_l%3600/60),d_m=p_l%60;if(p_g){var d_w="";return d_w+=9<b_s?b_s+":":"0"+b_s+":",d_w+=9<d_u?d_u+":":"0"+d_u+":",(d_w+=9<b_e?b_e+":":"0"+b_e+":")+(9<d_m?Math.floor(d_m):"0"+Math.floor(d_m))}return e.$(("{1}"+j_x("1747_1702")+"{2}"+j_x(2224)+"{3}"+j_x(2081)),d_u+24*b_s,b_e,d_m)},e.dealZero=function(e){return 2==e.length&&Number(e.charAt(0))<0?Number(e.charAt(1)):Number(e)},e.formatTimeStr2=function(p_l,p_g){void 0===p_g&&(p_g=!1);var b_s=Math.floor(p_l/86400),d_u=Math.floor(p_l%86400/3600),b_e=Math.floor(p_l%3600/60),d_m=p_l%60;if(p_g){var d_w="";return 0<b_s&&(d_w+=b_s+(j_x(2308))),(0<b_s||0<d_u)&&(d_w+=d_u+(j_x(1702))),(0<b_s||0<d_u||0<b_e)&&(d_w+=b_e+(j_x(2224))),(0<b_s||0<d_u||0<b_e||0<d_m)&&(d_w+=Math.floor(d_m)+(j_x(2081))),d_w}return e.$(("{1}"+j_x("1747_1702")+"{2}"+j_x(2224)+"{3}"+j_x(2081)),d_u+24*b_s,b_e,d_m)},e.setStroke=function(p_l,p_g,b_s){return void 0===p_g&&(p_g=2),void 0===b_s&&(b_s="#000000"),e.$("<span style='stroke:{1};strokeColor:{2};'>{3}</span>",p_g,b_s,p_l)},e.formatTimeStr6=function(e){var p_l=Math.floor(e/60),p_g=Math.floor(p_l/60),b_s="";return 1<=p_g?b_s=p_g+(j_x("1747_1702")):p_l<60&&0<p_l?b_s=p_l+(j_x("2224_1394")):e<60&&(b_s=Math.floor(e)+(j_x(2081))),b_s},e.escape2Html=function(e){var p_l={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"'};return e.replace(/&(lt|gt|nbsp|amp|quot);/gi,(function(e,p_g){return p_l[p_g]}))},e.getPosNum=function(e){for(var p_l=[],p_g=e.toString(),b_s=0;b_s<p_g.length;b_s++){var d_u=p_g.charAt(b_s);p_l.push(Number(d_u))}return p_l},e.formatTimeStr7=function(e,p_l){if(void 0===p_l&&(p_l=!0),0==e)return"";var p_g=new Date;return p_g.setTime(1e3*e),((p_l?p_g.getFullYear()+"/":"")+(p_g.getMonth()+1)+"/"+p_g.getDate()+" "+p_g.getHours()+":"+p_g.getMinutes()).replace(/\b(\d)\b/g,"0$1")},e.getPos=function(e,p_l,p_g,b_s,d_u,b_e){var d_m=e%p_l*(p_g+d_u),d_w=Math.floor(e/p_l)*(b_s+b_e);return new Laya.Point(d_m,d_w)},e.$=Engine2d.Tools.$}(Utils=Utils||{});var t_z=function(){function e(){}return e.printShopName=function(e){var p_l=Config.shop_shop[e.id],p_g=Config.CItem(p_l.itemId);return p_g?p_g.name:""},e}(),SyncTime=function(){function e(){}return Object.defineProperty(e,"isSocketClose",{get:function(){return 0<b_p.playerId&&15e3<e.tickCount-this._lastHeartTime},enumerable:!0,configurable:!0}),e.resetSocketState=function(){Azq(this,e)},e.update=function(e){this._tickCount=e,0<this._tickCount&&15e3<this._tickCount-this._lastHeartTime&&this.sendToHeartBeat()},Object.defineProperty(e,"tickCount",{get:function(){return 0<this._tickCount?this._tickCount:this.getTimer()},enumerable:!0,configurable:!0}),e.recordHeartTime=function(){},e.sendToHeartBeat=function(){this._lastHeartTime=e.tickCount,this.heartNum++,2==this.heartNum&&GPlatform.isHide&&(GPlatform.isHide=!1,GPlatform.isIOS&&(console.log("ios Break line"),this._retryCount=2,this.checkLoginSucc())),DB.instance.query(c2g_heartbeat,new c2g_heartbeat)},Object.defineProperty(e,"retryCount",{get:function(){return this._retryCount},enumerable:!0,configurable:!0}),e.retrySendToLinkSocket=function(){GPlatform.isReconnectIng||(this._retryCount++,b_p.closeConfirm(),DB.instance.reload(),Laya.timer.once(2500,this,this.checkLoginSucc),this.isReconect&&(GPlatform.isReconnectIng=!0,Laya.timer.once(3e3,this,this.clearReconnect)))},Object.defineProperty(e,"isReconect",{get:function(){return!(!GPlatform.isQQMini&&!GPlatform.isWxMini)},enumerable:!0,configurable:!0}),e.clearReconnect=function(){Yoa(GPlatform)},e.checkLoginSucc=function(e){void 0===e&&(e=!1),e?(1<this._retryCount&&b_p.broadcastNotice((j_x("566_420_402")+j_x(2142)),BroadcastType.ERROR,"#00FF00",!0),GPlatform.isMap||(NetDB.connetStatus=ConnetStatus.OPEN),DB.instance.clearCloseTimeKey(),b_p.closeConfirm(),Laya.timer.clear(this,this.checkLoginSucc),Laya.timer.clear(this,this.clearReconnect),this.clearReconnect()):(NetDB.connetStatus=ConnetStatus.RESTART,2<=this._retryCount?DB.instance.showCloseTip((j_x("1300_1088_155")+j_x("566_420")+","+j_x("932_1835_1374")+j_x("1787_1723_2000"))):DB.instance.showCloseTip((j_x("1176_2046_1772")+j_x("1448_2462_1715")+j_x("1908_4")+","+j_x("932_1835_1374")+j_x("1787_566_420"))))},e.setServerTime=function(e){return e!=this._serverTime&&(this._serverTime=e,this._upTimer=this.getTimer(),this._offsetTime=this._serverTime-this.getTimer(),!0)},Object.defineProperty(e,"dateTime",{get:function(){return new Date(this.tickCount+this._offsetTime)},enumerable:!0,configurable:!0}),e.getStandardServerTime=function(){return Ydy(this)},Object.defineProperty(e,"serverTime",{get:function(){return this._serverTime+(this.getTimer()-this._upTimer)},enumerable:!0,configurable:!0}),e.getTimer=function(){return Exg(Laya)},e.setZone=function(e){this._zone=e,this._offsetTime=60*((new Date).getTimezoneOffset()+60*this.getZone())*1e3},e.getZone=function(){return Aab(this)},e.timeSpan=function(p_l){var p_g=new Date(e.serverTime);return new Date(p_l).getTime()-p_g.getTime()},Object.defineProperty(e,"openDay",{get:function(){return Utils.subtractDate(1e3*e.serverOpenTime,e.serverTime)+1},enumerable:!0,configurable:!0}),e.getDayTime=function(e,p_l){void 0===e&&(e=1),void 0===p_l&&(p_l=!0);var p_g=24*e*60*60;return p_l&&(p_g*=1e3),p_g},e._zone=8,e.DAY_SECOND=86400,e._retryCount=0,e.heartNum=0,e}(),LongPushUtil=function(){function e(){this._longPushTime=0,this._longPushLastTime=0,this._longPushLastInterval=1e3,this._longPushInterval=300}return Object.defineProperty(e.prototype,"longPushTime",{get:function(){return this._longPushTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longPushLastTime",{get:function(){return this._longPushLastTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longPushLastInterval",{get:function(){return this._longPushLastInterval},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longPushInterval",{get:function(){return this._longPushInterval},enumerable:!0,configurable:!0}),Object.defineProperty(e,"inst",{get:function(){return null==this._inst&&(this._inst=new e),this._inst},enumerable:!0,configurable:!0}),e.prototype.bingLongPushBtn=function(e,p_l){She(e,p_l,this)},e.prototype.onAnyBtnMU=function(){Wgf(this)},e.prototype.onAnyBtnMD=function(){Ouw(this,SyncTime,Laya)},e.prototype.clearLoopPush=function(){null!=this._bingObj&&this._bingObj.stage.off(Laya.Event.MOUSE_UP,this,this.onAnyBtnMU),this._longPushTime=0,this._longPushLastTime=0,this._bingObj=null,this._callBack=null,Laya.timer.clear(this,this.activateBtnLoop)},e.prototype.activateBtnLoop=function(){var e=SyncTime.serverTime;if(e-this._longPushTime>=this._longPushLastInterval-20){var p_l=e-this._longPushLastTime;(0===this._longPushLastTime||p_l>=this._longPushInterval-20)&&(this._callBack.call(this._bingObj),this._longPushLastTime=e)}},e}(),Keyboard=laya.events.Keyboard,KeyBoardUtil=function(){function e(){}return e.init=function(){document.onkeydown=function(e){window.event,e.ctrlKey&&(e.keyCode==Keyboard.ENTER&&Laya.DebugPanel&&Laya.DebugPanel.init(),e.keyCode==Keyboard.G&&UI.TestPanel.open(),e.keyCode==Keyboard.I&&(GPlatform.isIosShow=!0),e.shiftKey&&e.keyCode==Keyboard.Q&&(GPlatform.isNotRecharge=!GPlatform.isNotRecharge),e.shiftKey&&e.keyCode==Keyboard.S&&(GPlatform.isRelease=!0,LoginManager.instance.updateServerList(!0)),e.shiftKey&&e.keyCode==Keyboard.E&&(GPlatform.isWarn=!GPlatform.isWarn))}},e}(),FrameRunType,FrameRunManager=function(){function e(e){void 0===e&&(e=16),this._dataDic={},this._packageMaxCount=1,this._runTime=-1,this._blockCount=0,this._frameTime=38,this._currentCount=0,this._packageMaxCount=e}return e.prototype.frameRun=function(){var e=SyncTime.tickCount;-1===this._lastTime&&(this._lastTime=e);var p_l=e-this._lastTime;if(this._frameTime>=p_l||!Laya.stage.isVisibility||8<this._blockCount){for(var p_g in this._currentCount=0,this._dataDic)this.runItem(this._dataDic[p_g],parseInt(p_g));24<e-this._runTime&&(this._runTime=-1),this._blockCount=0}else this._blockCount++,this._runTime=SyncTime.tickCount;this._lastTime=e},e.prototype.isCanRunNext=function(){var e=SyncTime.tickCount-this._lastTime;return this._frameTime>=e&&this._runTime<0},e.prototype.runItem=function(e,p_l){if(!(this._currentCount>=this._packageMaxCount&&p_l!=FrameRunType.MAP)){if(e&&0<e.length){var p_g=SyncTime.tickCount-this._lastTime;if(this._frameTime>=p_g||!Laya.stage.isVisibility||8<this._blockCount){var b_s=e.shift();null!=b_s.callBack&&b_s.callBack(b_s.value),this.runItem(e,p_l)}}p_l!=FrameRunType.MAP&&this._currentCount++}},e.prototype.frameAddTo=function(e,p_l,p_g,b_s){void 0===b_s&&(b_s=!1);var d_u=this._dataDic[e];(d_u=d_u||(this._dataDic[e]=[])).push({callBack:p_g,value:p_l}),!b_s&&Laya.stage.isVisibility||this.runItem(d_u,e)},e.prototype.clear=function(e){Aqb(e,this)},e.instance=new e,e}();!function(e){e[e.SOCKET_SEND=1]="SOCKET_SEND",e[e.SOCKET_REC=2]="SOCKET_REC",e[e.MONSTER_ADD=3]="MONSTER_ADD",e[e.EFFECT=4]="EFFECT",e[e.OTHER=5]="OTHER",e[e.MAP=6]="MAP"}(FrameRunType=FrameRunType||{});var j_a=function(){function e(e){void 0===e&&(e=1),this._dataArr=[],this._packageMaxCount=1,this._currentCount=0,this._packageMaxCount=e}return e.sceIns=function(){return this._instance||(this._instance=new e(1)),this._instance},e.prototype.changeFrameInterval=function(e){this._isStart&&Laya.timer.frameLoop(e,this,this.frameRun)},e.prototype.add=function(e,p_l,p_g,b_s,d_u){void 0===b_s&&(b_s=1),void 0===d_u&&(d_u=!1),!d_u&&Laya.stage.isVisibility?(this._dataArr.push({caller:e,callBack:p_l,args:p_g}),this._isStart&&1==b_s||(this._isStart=!0,Laya.timer.frameLoop(b_s,this,this.frameRun))):this.runItem({caller:e,callBack:p_l,args:p_g})},e.itemIns=function(){return this._instance2||(this._instance2=new e(1)),this._instance2},e.prototype.frameRun=function(){this._dataArr.length?this.runItem(this._dataArr.shift()):(this._isStart=!1,Laya.timer.clear(this,this.frameRun))},e.prototype.stop=function(){this._isStart&&(this._dataArr.length=0,this._isStart=!1,Laya.timer.clear(this,this.frameRun))},e.actorIns=function(){return this._instance1||(this._instance1=new e(1)),this._instance1},e.otherIns=function(){return this._instance3||(this._instance3=new e(2)),this._instance3},e.prototype.runItem=function(e){e&&null!=e.callBack&&e.callBack.apply(e.caller,e.args),this._currentCount++,this._currentCount<this._packageMaxCount&&this.runItem(this._dataArr.shift())},e}(),ArrayUtil=function(){function e(){}return e.insertAt=function(e,p_l,p_g){var b_s=e.length;if(p_l<0)e[b_s]=p_g;else{for(var d_u=b_s;p_l<d_u;--d_u)e[d_u]=e[d_u-1];e[p_l]=p_g}},e.removeAt=function(e,p_l){var p_g=e.length-1;if(p_g<p_l)return null;for(var b_s=e[p_l],d_u=p_l;d_u<p_g;++d_u)e[d_u]=e[d_u+1];return e.length=p_g,b_s},e.removeRange=function(e,p_l,p_g,b_s){void 0===b_s&&(b_s=null);var d_u=e.length-p_g;if(d_u<p_l&&(d_u=p_l),null!=b_s)for(var b_e=p_l+p_g>e.length?e.length:p_l+p_g,d_m=p_l;d_m<b_e;++d_m)b_s[d_m-p_l]=e[d_m];for(var d_w=p_l;d_w<d_u;++d_w)e[d_w]=e[d_w+p_g];e.length=d_u},e.removeAll=function(e,p_l){for(var p_g=0;-1!=(p_g=e.indexOf(p_l,p_g));){for(var b_s=e.length-1,d_u=p_g;d_u<b_s;++d_u)e[d_u]=e[d_u+1];e.length=b_s}},e.remove=function(e,p_l){return Cks(e,p_l)},e}(),AlertUtil=function(){function e(){}return e.hasTip=function(p_l){return Ciy(p_l,e,UserLocalStore)},e.createKey=function(e){var p_l=new Date;return"alert_"+p_l.getMonth()+"_"+p_l.getDate()+"_"+b_p.playerId+e},e.saveKey=function(p_l){Wpd(p_l,e,UserLocalStore)},e}(),Resource;!function(e){var p_l=(Object.defineProperty(p_g,"instance",{get:function(){return this._instance||(this._instance=new p_g),this._instance},enumerable:!0,configurable:!0}),p_g.prototype.initSoundState=function(){Kqz(this,SetupModel,Laya)},Object.defineProperty(p_g.prototype,"canPlayBgm",{set:function(e){this._canPlayBgm!=e&&((this._canPlayBgm=e)?this.playBackMusic(this._backFile):""!=this._backFile&&null!=this._backFile&&(GPlatform.isVivo?this.playBackMusic(""):Laya.SoundManager.stopMusic()))},enumerable:!0,configurable:!0}),Object.defineProperty(p_g.prototype,"canPlaySound",{set:function(e){this._canPlaySound!=e&&0==(this._canPlaySound=e)&&Laya.SoundManager.stopAllSound()},enumerable:!0,configurable:!0}),p_g.prototype.playBackMusic=function(e,p_l){if(void 0===p_l&&(p_l=!0),GPlatform.isVivo){if(this._vivoMusic&&this._vivoMusic.src&&(this._vivoMusic.volume=0,this._vivoMusic.stop(),this._vivoMusic.src=""),this._vivoMusic=null,e&&this._canPlayBgm){var p_g=this.getBackMusicUrl(e);p_g=Laya.URL.formatURL(p_g),this._vivoMusic=Laya.VVMiniAdapter.window.qg.createInnerAudioContext(),this._vivoMusic.src=p_g,console.log("play music",p_g),this._vivoMusic.volume=1,this._vivoMusic.loop=!0,this._vivoMusic.play()}e&&(this._backFile=e)}else{if(""!=this._backFile&&null!=this._backFile&&this._backFile!=e&&(Laya.SoundManager.stopMusic(),Laya.SoundManager.destroySound(this.getBackMusicUrl(this._backFile))),this._backFile=e,0==this._canPlayBgm)return;if(null==e||""==e)return;p_g=this.getBackMusicUrl(this._backFile),Laya.SoundManager.playMusic(p_g,p_l?0:1)}},p_g.prototype.playSound=function(e,p_l){if(void 0===p_l&&(p_l=!1),this._canPlaySound){for(var p_g=0;p_g<this._soundArr.length;p_g++)if(e==this._soundArr[p_g].fileUrl)return this._soundArr[p_g].isPlaying&&Laya.SoundManager.stopSound(e),this._soundArr[p_g].setPlayState(!0),Laya.SoundManager.playSound(e,p_l?0:1,Laya.Handler.create(this,this.soundPlayCommplet,[this._soundArr[p_g]],!1)),void(this._soundArr[p_g].lastTick=SyncTime.tickCount);var b_s=new SoundInfo;b_s.fileUrl=e,b_s.lastTick=SyncTime.tickCount,b_s.setPlayState(!0),this._soundArr.push(b_s),Laya.SoundManager.playSound(e,p_l?0:1,Laya.Handler.create(this,this.soundPlayCommplet,[b_s],!1))}},p_g.prototype.playSoundByName=function(p_l,p_g,b_s){void 0===p_g&&(p_g=!0),void 0===b_s&&(b_s=!1);var d_u=e.ResUrl.SOUND_URL+"/game/"+p_l;p_g||(d_u=e.ResUrl.SOUND_URL+p_l),-1===p_l.indexOf(".")&&(d_u=e.ResUrl.SOUND_URL+"/game/"+p_l+".mp3"),this.playSound(d_u,!0)},p_g.prototype.upadte=function(e){for(var p_l,b_s=this._soundArr.length-1;0<=b_s;b_s--)p_l=e-this._soundArr[b_s].lastTick,p_g.SOUND_CACHE_TIME<p_l&&(Laya.SoundManager.destroySound(this._soundArr[b_s].fileUrl),this._soundArr.splice(b_s,1))},p_g.prototype.soundPlayCommplet=function(e){Yjd(e,console)},p_g.prototype.playSoundById=function(p_l,p_g){void 0===p_g&&(p_g=!0);var b_s=Config.soundPathMar[p_l];if(b_s){var d_u=e.ResUrl.SOUND_URL+"/game/"+b_s.soundPath;p_g||(d_u=e.ResUrl.SOUND_URL+b_s.soundPath),-1===b_s.soundPath.indexOf(".")&&(d_u=e.ResUrl.SOUND_URL+"/game/"+b_s.soundPath+".mp3"),this.playSound(d_u)}},p_g.prototype.onShow=function(){GPlatform.isVivo?this.playBackMusic(this._backFile):(GPlatform.isYZX||GPlatform.isHuaWei)&&(this._beforeHideBgm&&(this.canPlayBgm=!0),this._beforeHideSound&&(this.canPlaySound=!0),this._beforeHideBgm=!1,this._beforeHideSound=!1)},p_g.prototype.getBackMusicUrl=function(p_l){return-1===p_l.indexOf(".")?e.ResUrl.SOUND_URL+"/bg/"+p_l+".mp3":e.ResUrl.SOUND_URL+"/bg/"+p_l},p_g.prototype.playGameSound=function(p_l,p_g){void 0===p_g&&(p_g=!0);var b_s=e.ResUrl.SOUND_URL+"/game/"+p_l;p_g||(b_s=e.ResUrl.SOUND_URL+p_l),-1===p_l.indexOf(".")&&(b_s=e.ResUrl.SOUND_URL+"/game/"+p_l+".mp3"),this.playSound(b_s)},p_g.prototype.stopSoundByName=function(p_l,p_g){void 0===p_g&&(p_g=!0);var b_s=e.ResUrl.SOUND_URL+"/game/"+p_l;p_g||(b_s=e.ResUrl.SOUND_URL+p_l),-1===p_l.indexOf(".")&&(b_s=e.ResUrl.SOUND_URL+"/game/"+p_l+".mp3"),Laya.SoundManager.stopSound(b_s)},p_g.prototype.playSkillSound=function(p_l){var p_g=e.ResUrl.SOUND_URL+"/skill/"+p_l;-1===p_l.indexOf(".")&&(p_g=e.ResUrl.SOUND_URL+"/skill/"+p_l+".mp3"),this.playSound(p_g)},p_g.prototype.onHide=function(){GPlatform.isVivo?this.playBackMusic(""):(GPlatform.isYZX||GPlatform.isHuaWei)&&(this._beforeHideBgm=this._canPlayBgm,this._beforeHideSound=this._canPlaySound,this._beforeHideBgm&&(this.canPlayBgm=!1),this._beforeHideSound&&(this.canPlaySound=!1))},p_g.SOUND_CACHE_TIME=6e4,p_g);function p_g(){this._backFile="",this._canPlayBgm=!0,this._canPlaySound=!0,Laya.SoundManager.autoReleaseSound=!1,this._soundArr=new Array}e.SoundManager=p_l}(Resource=Resource||{});var n_e=function(){function e(){}return e.clearRes=function(e){for(var p_l,p_g=GPlatform.isDispose,b_s=e.length,d_u=0;d_u<b_s;d_u++)p_l=e[d_u],p_g?this.ignoreList[p_l]?Laya.loader.clearTextureRes(p_l):Laya.loader.clearRes(p_l):Laya.loader.clearTextureRes(p_l)},e.selectClearType=function(e,p_l){void 0===p_l&&(p_l=!1),p_l?Laya.loader.clearRes(e):Laya.loader.clearTextureRes(e)},e.ignoreList={},e}(),Resource;!function(e){var p_l=(Object.defineProperty(p_g,"Instance",{get:function(){return this._instance||(this._instance=new p_g),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(p_g.prototype,"freeSprite",{get:function(){return Laya.Pool.getItemByClass(PoolDefine.FREE_MAP_SPRITE,Laya.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(p_g.prototype,"freeDamageSprite",{get:function(){return Laya.Pool.getItemByClass(PoolDefine.FREE_DAMAGE_SPRITE,Laya.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(p_g.prototype,"freeAnimation",{get:function(){return Laya.Pool.getItemByClass(PoolDefine.ANIMATION,Engine2d.Animation)},enumerable:!0,configurable:!0}),Object.defineProperty(p_g.prototype,"freeSkillEffectVo",{get:function(){return Laya.Pool.getItemByClass(PoolDefine.SKILL_EFFECT,SkillEffectVo)},enumerable:!0,configurable:!0}),p_g.prototype.recoverSkillEffectVo=function(e){e&&Laya.Pool.recover(PoolDefine.SKILL_EFFECT,e)},Object.defineProperty(p_g.prototype,"freeMonEffectVo",{get:function(){return Laya.Pool.getItemByClass(PoolDefine.MON_EFFECT,MonsterEffectVo)},enumerable:!0,configurable:!0}),p_g.prototype.recoverMonEffectVo=function(e){e&&Laya.Pool.recover(PoolDefine.MON_EFFECT,e)},Object.defineProperty(p_g.prototype,"freePanelEffectVo",{get:function(){return Laya.Pool.getItemByClass(PoolDefine.PANEL_EFFECT,PanelEffectVo)},enumerable:!0,configurable:!0}),p_g.prototype.recoverPanelEffectVo=function(e){e&&Laya.Pool.recover(PoolDefine.PANEL_EFFECT,e)},p_g.prototype.recoverActor=function(e,p_l){var p_g=PoolDefine.ACTOR+e;p_l&&Laya.Pool.recover(p_g,p_l)},p_g.prototype.recoverAnimation=function(e){if(e){var p_l=e.url;e.stop(),e.clear(),e.removeSelf(),Laya.Pool.recover(PoolDefine.ANIMATION,e),p_l&&Laya.loader.clearTextureRes(p_l)}},p_g.prototype.reUseAniRes=function(e){e&&this._stayRes[e]&&(this._stayRes[e]=null,delete this._stayRes[e])},p_g.getDefaultPlayerAvatar=function(e,p_l){var p_g=Config.fashion_fashion;if(e&&p_g[e]&&p_g[e].avatar)return p_g[e].avatar[p_l-1];var b_s=Config.global[GlobalDefine.default_skin];return b_s&&b_s.t_info[p_l-1]?"role/"+b_s.t_info[p_l-1][0]:1===p_l?"role/actor001":"role/actor002"},p_g.prototype.releasePool=function(e){Gez(e,Laya)},p_g.getUIEffect=function(e,p_l){return void 0===p_l&&(p_l=null),null!=e&&""!=e&&((p_l=p_l||new Laya.Clip).skin=e),p_l},p_g.prototype.onLoadComplete=function(e){if(null!=e&&""!=e){var p_l=this._res[e];if(null!=p_l){var p_g=p_l.callBack;null!=p_g&&p_g(e,p_l.args),delete p_l.args}delete this._res[e]}},p_g.getDefaultWeaponAvatar=function(e,p_l){var p_g=Config.fashion_fashion;if(e&&p_g[e]&&p_g[e].avatar)return p_g[e].avatar[p_l-1];var b_s=Config.global[GlobalDefine.default_skin];return b_s&&b_s.t_info[p_l-1]?"weapon/"+b_s.t_info[p_l-1][1]:1===p_l?"weapon/weapon01":"weapon/weapon02"},p_g.prototype.clearStayRes=function(e,p_l){void 0===e&&(e=!1),void 0===p_l&&(p_l=-1),e&&this.releasePool([PoolDefine.ACTOR+Engine2d.Drop,PoolDefine.ACTOR+Engine2d.Collect]);var b_s,d_u=SyncTime.tickCount;for(var b_e in this._stayRes)0<this._stayRes[b_e]&&(b_s=d_u-this._stayRes[b_e],((p_l=0<p_l?p_l:p_g.RES_CACHE_TIME)<b_s||e)&&(Laya.loader.clearTextureRes(b_e),this._stayRes[b_e]=null,delete this._stayRes[b_e]))},p_g.prototype.stayReleaseImageRes=function(e,p_l){void 0===p_l&&(p_l=!0),e&&(p_l?this._stayRes[e]=SyncTime.tickCount:this._stayRes[e]&&(this._stayRes[e]=null,delete this._stayRes[e]))},p_g.prototype.onBackRenderImage=function(e){if(e){var p_l=e.callBack;null!=p_l&&p_l.call(null,e.args)}},p_g.prototype.clearAll=function(){Cjo(this)},p_g.getBloodUrls=function(e){if(1<e){var p_l=Config.global[GlobalDefine.fb_boss_blood_num].i_info;e=p_l<e?p_l:e;for(var p_g=["res/ui/bossTX/progress_blood$bar.png"],b_s=1;b_s<e;b_s++)p_g.push("res/ui/bossTX/progress_blood$bar_0"+b_s+".png");return p_g}return null},p_g.prototype.getPreUrls=function(p_l){var p_g=Config.preLoadRes[p_l];if(p_g.imageRes||p_g.modelRes||p_g.atlasRes){var b_s=[],d_u=void 0;if(p_g.imageRes)for(var b_e in p_g.imageRes)d_u=p_g.imageRes[b_e],b_s.push({url:e.ResUrl.BASE_URL+d_u,type:Laya.Loader.IMAGE,priority:4});if(p_g.atlasRes)for(var b_e in p_g.atlasRes)d_u=p_g.atlasRes[b_e],b_s.push({url:e.ResUrl.BASE_URL+d_u,type:Laya.Loader.ATLAS,priority:4});if(p_g.modelRes)for(var b_e in p_g.modelRes){var d_m=p_g.modelRes[b_e].act,d_w=p_g.modelRes[b_e].dirs;for(var f_t in d_w)d_u=d_m+"/"+d_w[f_t]+".json",b_s.push({url:e.ResUrl.BASE_URL+d_u,type:Laya.Loader.JSON,priority:4})}return b_s}return null},p_g.prototype.update=function(){},p_g.prototype.checkCancelLoad=function(){Qtg(this)},p_g.prototype.getImg=function(e,p_l,p_g,b_s){void 0===p_l&&(p_l=null),void 0===p_g&&(p_g=0),void 0===b_s&&(b_s=0);var d_u=this.getRes(e);return null==p_l&&(p_l=this.freeSprite),null!=d_u?(p_l.texture=d_u,0<p_g&&(p_l.scaleX=p_g/d_u.width),0<b_s&&(p_l.scaleY=b_s/d_u.height),p_l.event(Laya.Event.COMPLETE)):this.loadRes(e,Laya.Loader.IMAGE,this.onImgLoadCallBack,{sp:p_l,wid:p_g,hg:b_s},3),p_l},p_g.prototype.loadRes=function(e,p_l,p_g,b_s,d_u){void 0===b_s&&(b_s=null),void 0===d_u&&(d_u=2),null==this.getRes(e)?(this._res[e]||(this._res[e]={isLoad:!1,args:[]}),this._res[e].args=this._res[e].args||[],this._res[e].args.push(b_s),this._res[e].isLoaded||(this._res[e].callBack=p_g.bind(this),this._res[e].isLoaded=!0,Laya.loader.load(e,Laya.Handler.create(this,this.onLoadComplete,[e],!1),null,p_l,d_u))):null!=p_g&&p_g(e,[b_s])},p_g.prototype.onImgLoadCallBack=function(e,p_l){var p_g=this.getRes(e);if(p_g)for(var b_s=0;b_s<p_l.length;b_s++){var d_u=p_l[b_s].sp;null!=p_g&&null!=d_u&&d_u.getStyle()&&d_u.getStyle()._tf&&(d_u.texture=p_g,0<p_l[b_s].wid&&(d_u.scaleX=p_l[b_s].wid/p_g.width),0<p_l[b_s].hg&&(d_u.scaleY=p_l[b_s].hg/p_g.height),d_u.event(Laya.Event.COMPLETE))}this._res[e].args&&delete this._res[e].args},p_g.prototype.getPreLoadRes=function(e,p_l){void 0===p_l&&(p_l=null);var p_g,b_s,d_u=Config.preLoadRes;for(var b_e in d_u)if(d_u[b_e].triggerCondition[0]===e){switch(b_s=!1,e){case"enterGame":b_p.config.isCreateInGame&&(p_g=this.getPreUrls(d_u[b_e].id)),b_s=!0;break;case"finishTask":d_u[b_e].triggerCondition[1]===p_l?(p_g=this.getPreUrls(d_u[b_e].id),b_s=!0):d_u[b_e].triggerCondition[1]<p_l&&(b_s=!0);break;case"enterMap":var d_m=p_p.instance.mainVo,d_w=LgcM.ins.heroVo;d_u[b_e].limit&&("lv"===d_u[b_e].limit[0]&&d_w?(d_w.level<d_u[b_e].limit[1]&&(p_g=this.getPreUrls(d_u[b_e].id)),b_s=!0):"task"===d_u[b_e].limit[0]&&d_m&&(d_m.id<d_u[b_e].limit[1]&&(p_g=this.getPreUrls(d_u[b_e].id)),b_s=!0))}b_s&&(d_u[b_e]=null,delete d_u[b_e])}return p_g},p_g.prototype.stayReleaseAniRes=function(e){e&&(this._stayRes[e]=SyncTime.tickCount)},p_g.prototype.freeActor=function(e){var p_l=PoolDefine.ACTOR+e;return e===Engine2d.ActorTypeDefine.MONSTER?Laya.Pool.getItemByClass(p_l,Engine2d.Monster):e===Engine2d.ActorTypeDefine.PLAYER?Laya.Pool.getItemByClass(p_l,Engine2d.Player):e===Engine2d.ActorTypeDefine.COLLECT?Laya.Pool.getItemByClass(p_l,Engine2d.Collect):e===Engine2d.ActorTypeDefine.DROP?Laya.Pool.getItemByClass(p_l,Engine2d.Drop):null},p_g.prototype.getRes=function(e){return Ydj(e,Laya)},p_g.getQualityColor=function(e){var p_l=Config.color[201].color;switch(e){case 1:p_l=Config.color[201].color;break;case 2:p_l=Config.color[202].color;break;case 3:p_l=Config.color[203].color;break;case 4:p_l=Config.color[204].color;break;case 5:p_l=Config.color[205].color;break;case 6:p_l=Config.color[206].color}return p_l},p_g.getQualityEft=function(p_l,p_g,b_s){var d_u;void 0===p_g&&(p_g=null),void 0===b_s&&(b_s=!1);var b_e,d_m=4;return b_e=b_s?(d_u=e.ResUrl.getTalisEquipQualityEftUrl(p_l),d_m=4,2):(d_u=e.ResUrl.getQualityEftUrl(p_l),d_m=4,3),""!=d_u?((p_g=p_g||new Laya.Clip).skin=d_u,p_g.interval=82,p_g.clipX=d_m,p_g.clipY=b_e):p_g&&(p_g.removeSelf(),p_g=null),p_g},p_g.prototype.cancelLoadByUrl=function(e){null!=this._res[e]&&(Laya.loader.cancelLoadByUrl(e),this._res[e]=null,delete this._res[e])},p_g.prototype.recoverSprite=function(e,p_l){void 0===p_l&&(p_l=1),e&&(e.x=e.y=0,e.removeSelf(),p_l===PoolDefine.SPRITE_MAP?(e.graphics.clear(),e.texture=null):(e.alpha=1,e.scaleX=e.scaleY=1,e.texture=null,e.graphics.clear(!0),Laya.Pool.recover(PoolDefine.FREE_DAMAGE_SPRITE,e)))},p_g.prototype.releaseAniByUrl=function(e){Gij(e,Laya)},p_g.getHeadUrl=function(p_l,p_g,b_s){var d_u;if(void 0===b_s&&(b_s=!1),p_g){var b_e=Config.headIcon[p_g];b_e&&b_e.asset&&!b_s?d_u=e.ResUrl.ASSETS_URL+b_e.asset+".png":b_e&&b_e.asset&&b_s&&(d_u=e.ResUrl.ASSETS_URL+b_e.bigAsset+".png")}return d_u||e.ResUrl.ASSETS_URL+(b_s?"headIcon/mainJob0"+p_l+".png":"headIcon/headJob0"+p_l+".png")},p_g.RES_CACHE_TIME=5e3,p_g);function p_g(){this._res={},this._stayRes={},this._checkTime=-1}e.ResManager=p_l}(Resource=Resource||{});var x_p=function(){function e(){this.ogOdwealth=!0,this._stateHash={}}return e.prototype.getState=function(e){return null!=this._stateHash[e]&&this._stateHash[e]},e.prototype.updateKFPersonalRank=function(e){void 0===e&&(e=null);var p_l=ActivityModel.instance.checkKFPersonalReward(e);this._stateHash[e+"1"]=p_l},e.prototype.xsRankHasReward=function(e){return void 0===e&&(e=null),this.getState(e)},e.prototype.updateOsRank=function(e){void 0===e&&(e=null);var p_l=ActivityModel.instance.checkOsRankReward(e);this._stateHash[e]=p_l},e.prototype.updateXsRank=function(e){void 0===e&&(e=null);var p_l=ActivityModel.instance.checkXsRankReward(e);this._stateHash[e]=p_l},e.prototype.KFRankHasPersonalReward=function(e){return void 0===e&&(e=null),this.getState(e+"1")},e.prototype.updateKFServerRank=function(e){void 0===e&&(e=null);var p_l=ActivityModel.instance.checkKFServerReward(e);this._stateHash[e+"2"]=p_l},e.prototype.osRankHasReward=function(e){return void 0===e&&(e=null),this.getState(e)},e.prototype.KFRankHasServerReward=function(e){return void 0===e&&(e=null),this.getState(e+"2")},e.instance=new e,e}(),PoolDefine=function(){function e(){}return e.POP_PANEL="POP_PANEL",e.FREE_MAP_SPRITE="FREE_MAP_SPRITE",e.FREE_DAMAGE_SPRITE="FREE_DAMAGE_SPRITE",e.ACTOR="ACTOR_",e.ANIMATION="ANIMATION",e.MAP_CELL="MAP_CELL",e.SKILL_EFFECT="SKILL_EFFECT",e.MON_EFFECT="MON_EFFECT",e.PANEL_EFFECT="PANEL_EFFECT",e.ALERT_PANEL="ALERT_PANEL",e.ALERT_ERROR_PANEL="ALERT_ERROR_PANEL",e.ALERT_ITEM_SPECIAL_PANEL="ALERT_ITEM_SPECIAL_PANEL",e.ACTIVITY_BASE="ACTIVITY_BASE",e.ACTIVITY_BGA="ACTIVITY_BGA",e.ACTIVITY_COMMON="ACTIVITY_COMMON",e.SHOP_DATA="SHOP_DATA",e.SPRITE_MAP=1,e.SPRITE_DAMAGE=2,e.SPRITE_RED_PACK=3,e}(),Resource;!function(e){var p_l=(Object.defineProperty(p_g,"instance",{get:function(){return this._instance||(this._instance=new p_g),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(p_g.prototype,"masaikeUrl",{get:function(){return e.ResUrl.MAPRES_URL+"masaike.png"},enumerable:!0,configurable:!0}),Object.defineProperty(p_g.prototype,"masaikeTex",{get:function(){return Laya.loader.getRes(this.masaikeUrl)},enumerable:!0,configurable:!0}),Object.defineProperty(p_g.prototype,"frameRunManager",{get:function(){return this._frameRunManager||(this._frameRunManager=new j_a),this._frameRunManager},enumerable:!0,configurable:!0}),p_g.prototype.update=function(e){2e4<e-this._lastTick&&(this._lastTick=e,this.m_curBuildCount),this.frameRunManager.frameRun()},p_g.prototype.loadTileImage=function(e,p_l){if(e){var p_g=this.getTileImgUrl(e._nBkImgIdx,p_l);this.m_tileRes[p_g]?this.m_tileRes[p_g].time=-1:this.m_tileRes[p_g]={posX:e._posX,posY:e._posY,time:-1};var b_s=Laya.loader.getRes(p_g);b_s?this.onLoadTileImage(p_l,p_g,b_s):Laya.loader.loadMap(p_g,Laya.Handler.create(this,this.onLoadTileImage,[p_l,p_g]),null,Laya.Loader.IMAGE,1),e.clearPos()}},p_g.prototype.preProgress=function(e){null!=this._preProgressFunc&&this._preProgressFunc.call(null,e)},p_g.prototype.getMapUrl=function(p_l){return Uuv(p_l,e,Config)},p_g.prototype.clearFreeMemory=function(e){var p_l,p_g;for(var b_s in void 0===e&&(e=!1),Laya.timer.clearAll(this),SyncTime.tickCount,this.m_tileRes)p_l=this.m_tileRes[b_s].time,(e||0<p_l)&&(e||p_g||(p_g=!0,Engine2d.GameMap.defaultMap.clearBuilding(null,null,null)),this.m_tileRes[b_s]=null,delete this.m_tileRes[b_s],n_e.selectClearType(b_s,GPlatform.isQQDelRes),b_s=null);if(e)this.m_curBuildCount=0,this.m_tileRes={},this._preProgressFunc=null,this._preBackFunc=null;else if(p_g)for(var b_s in this.m_curBuildCount=0,Engine2d.GameMap.defaultMap.setMinimapData(),this.m_tileRes)this.setLoadTileImage(b_s),this.m_tileRes[b_s].time=-1},p_g.prototype.preComplete=function(){Uay(this)},p_g.prototype.getTileImgUrl=function(p_l,p_g){if(p_l){for(var b_s=p_l.toString();b_s.length<5;)b_s="0"+b_s;var d_u=Math.floor(p_l%1e4/1e3);return e.ResUrl.MAPRES_URL+p_g+"/"+d_u+"/"+b_s+".jpg"}},p_g.prototype.checkIsDraw=function(e,p_l,p_g){void 0===p_g&&(p_g=!1);var b_s=this.getTileImgUrl(e,p_l);return!(!this.m_tileRes[b_s]||!Laya.loader.getRes(b_s)||(p_g&&(this.m_tileRes[b_s].time=-1),0))},p_g.prototype.resetTileTimeState=function(){Gll(this)},p_g.prototype.preLoadTiles=function(e,p_l,p_g,b_s){this._preProgressFunc=p_g;var d_u=Engine2d.MapPreParse.instance.reDistributeMapLayers(e,p_l);if(d_u&&0<d_u.length){for(var b_e=void 0,d_m=[],d_w=0;d_w<d_u.length;d_w++)b_e=this.getTileImgUrl(d_u[d_w],b_s),d_m.push({url:b_e,type:Laya.Loader.IMAGE,priority:0});null!=p_g?Laya.loader.loadMap(d_m,Laya.Handler.create(this,this.preComplete),Laya.Handler.create(this,this.preProgress,null,!1)):Laya.loader.loadMap(d_m)}else null!=p_g&&this.preProgress(1)},p_g.prototype.onLoadTileImage=function(e,p_l,p_g){Engine2d.GameMap.defaultMap.fileId==e&&this.m_tileRes[p_l]&&p_g&&(this.setLoadTileImage(p_l),this.frameRunManager.add(this,this.setLoadTileImage.bind(this),[p_l]))},p_g.prototype.checkRemoveTile=function(e,p_l,p_g,b_s){var d_u,b_e;for(var d_m in this.m_tileRes)d_u=this.m_tileRes[d_m].posX+Engine2d.CustomMap.MAPCELLUNITWIDTH,b_e=this.m_tileRes[d_m].posY+Engine2d.CustomMap.MAPCELLUNITHEIGHT,(d_u<e||b_e<p_l||p_g<d_u||b_s<b_e)&&-1===this.m_tileRes[d_m].time&&(this.m_tileRes[d_m].time=SyncTime.tickCount,Laya.loader.getRes(d_m)||Laya.loader.cancelLoadByUrl(d_m))},p_g.prototype.setLoadTileImage=function(e){var p_l=Laya.loader.getRes(e);p_l&&this.m_tileRes[e]&&(this.m_curBuildCount++,Engine2d.GameMap.defaultMap.setBuilding(p_l,this.m_tileRes[e].posX,this.m_tileRes[e].posY))},p_g.CLEAR_SPACE_TIME=15e3,p_g.BUILDING_MAX_COUNT=200,p_g);function p_g(){this.m_tileRes={},this._lastTick=0,this.m_curBuildCount=0}e.MapResManager=p_l}(Resource=Resource||{});var p_y=function(){},kvVo=function(){},ItemType,ItemClassDefine=function(){function e(){}return e.ITEM=0,e.MC_EQUIP=1,e.MC_MAT=2,e.MC_CON=3,e.SUB_PET=1,e.SUB_EQUIP_ROLE=1,e}();!function(e){e[e.gold=1]="gold",e[e.money=2]="money"}(ItemType=ItemType||{});var b_p=function(){function e(){}return Object.defineProperty(e,"config",{get:function(){return GConfig.inst},enumerable:!0,configurable:!0}),Object.defineProperty(e,"playerId",{get:function(){return this._playerId},set:function(e){this._playerId=e,this.config.playerId=e},enumerable:!0,configurable:!0}),e.isSameServer=function(p_l){return Wfc(p_l,e)},e.buildNumsImg=function(p_l,p_g,b_s,d_u,b_e,d_m,d_w){void 0===b_s&&(b_s=10),void 0===d_u&&(d_u=1),void 0===b_e&&(b_e=null),void 0===d_m&&(d_m=0),void 0===d_w&&(d_w=!1);var f_t=e.NumsPool[p_l];if(null==f_t){var v_z=Resource.ResManager.Instance.getRes(p_l);if(v_z)f_t=e.NumsPool[p_l]=Utils.splitTexture(v_z,b_s,d_u);else{var d_h=Array.prototype.slice.call(arguments);Laya.loader.load(p_l,Laya.Handler.create(this,this.buildNumsImg,d_h,!0))}}if(null==f_t)return null;var r_t=new Laya.Point;(b_e=b_e||new Laya.Sprite).graphics.clear(!0);var t_n=f_t[0].width,f_y=f_t[0].height;d_w&&(b_e.graphics.drawTexture(f_t[0],r_t.x,r_t.y,t_n,f_y),r_t.x+=t_n+d_m);for(var p_q,h_h=p_g.toString(),n_j=0;n_j<h_h.length;n_j++)p_q=parseInt(h_h.charAt(n_j)),d_w&&p_q++,b_e.graphics.drawTexture(f_t[p_q],r_t.x,r_t.y,t_n,f_y),r_t.x+=t_n+d_m;return b_e.size(r_t.x-d_m,f_y),b_e},e.reqBackWildMap=function(){var e=new c2w_back_wild;DB.instance.query(c2w_back_wild,e)},e.recharge=function(p_l,p_g){void 0===p_l&&(p_l=6),void 0===p_g&&(p_g=-1);var b_s=GPlatform.isIOS;if(-1!=GPlatform.testRecharge&&(p_l=GPlatform.testRecharge),GPlatform.isAndroidPay&&(b_s=!0),b_s){if(GPlatform.isXjWx)return void XjwxPlatform.instance.recharge(p_l,p_g);if(GPlatform.isQQMini)return void e.broadcastNotice(("ios"+j_x("2287_2462_837")+j_x("8_2258_2376")));if(GPlatform.isHuoshuWx){var d_u=HswxLoginManager.instance.iosPayClose();if(d_u)return void e.broadcastNotice(d_u)}}if(GPlatform.isNotRecharge)return e.notRechargeTip(),!0;var b_e=GPlatform.platformDesc;return""!=b_e&&(e.sendGetOrderInfo(b_e,p_l,p_g),!0)},e.getRankSp=function(p_l,p_g,b_s){void 0===p_g&&(p_g=null),void 0===b_s&&(b_s=0);var d_u=Resource.ResUrl.getRankNumUrl();return e.buildRankImg(d_u,p_l,10,1,p_g,b_s)},e.getRewardDatasByEntryId=function(e,p_l){if(void 0===p_l&&(p_l=0),!e||0===e.length)return null;for(var p_g=[],b_s=e.length,d_u=0;d_u<b_s;d_u++)if(0===d_u||d_u===p_l){var b_e=this.getRewardDatas(e[d_u]);b_e&&(p_g=p_g.concat(b_e))}return p_g},e.getRide=function(){return Cdx(LgcM)},e.confirm=function(e,p_l,p_g,b_s,d_u,b_e,d_m,d_w){void 0===p_l&&(p_l=null),void 0===b_s&&(b_s=!1),void 0===d_u&&(d_u=!1),void 0===b_e&&(b_e=!1),void 0===d_m&&(d_m=!1),void 0===d_w&&(d_w=""),z_j.isLoadJson("window/tips/confirm",this,this.confirm,[e,p_l,p_g,b_s,d_u,b_e,d_m,d_w])&&UI.ConfirmPanel.open(e,p_l,p_g,b_s,d_u,b_e,d_m,d_w)},e.playDrama=function(p_l,p_g){void 0===p_g&&(p_g=!1);var b_s=e.isPloting;e.isPloting=!1;var d_u=Config.drama[p_l];if(d_u){if(d_u.condition&&0<d_u.condition.length){var b_e=d_u.condition[0],d_m=d_u.condition[1];switch(b_e){case"task":var d_w=TaskManager.instance.isTaskInit,f_t=p_p.instance.mainVo;d_w?f_t&&f_t.id<=d_m?e.isPloting=!0:b_s&&(UI.DramaPanel.instance.parent?UI.DramaPanel.close():(UI.DramaPanel.instance.onRemove(),UIM.instance.hideUIMask())):TaskManager.instance.dramaId=p_l;break;case"level":var v_z=LgcM.ins.heroVo;v_z&&v_z.level<=d_m&&(e.isPloting=!0)}}else e.isPloting=!0;if(e.isPloting){if(SystemNoticeManager.instance.isOpening)return e.isPloting=!1,void(SystemNoticeManager.instance.dramaId=p_l);0<d_u.win||(1===d_u.type?j_a.sceIns().add(UI.DramaPanelTwo.instance,UI.DramaPanelTwo.open,[p_l,p_g],10):UI.DramaPanel.open(p_l,p_g))}}},e.broadcastError=function(e,p_l){if(0!==e){var p_g=ErrerTipCfg.ins.getErrorById(e);if(p_g){var b_s=p_g.desc;if(p_l&&0<p_l.length){for(var d_u=[],b_e=0;b_e<p_l.length;++b_e)d_u.push("string"==typeof p_l[b_e]?p_l[b_e]:p_l[b_e].value);d_u.unshift(b_s),b_s=Utils.$.apply(null,d_u)}this.broadcastNotice(b_s,0==p_g.pos?BroadcastType.ERROR:p_g.pos,p_g.color)}else this.broadcastNotice((j_x("1329_271")+": ")+e)}},e.canAttack=function(e){var p_l=LgcM.ins.heroVo;if(p_l&&e)switch(e.type){case Engine2d.ActorTypeDefine.MONSTER:return!0;case Engine2d.ActorTypeDefine.PLAYER:if(e.camp!=p_l.camp)return!0}return!0},e.getNumSp=function(p_l,p_g,b_s,d_u){void 0===b_s&&(b_s=null),void 0===d_u&&(d_u=0);var b_e=null,d_m=10,d_w=!1;return p_l===NumType.FIGHTING?b_e=Resource.ResUrl.getFightingNumUrl(1):p_l===NumType.FIGHTING_SMALL?b_e=Resource.ResUrl.getFightingNumUrl(2):p_l===NumType.PROP?(b_e=Resource.ResUrl.getFightingNumUrl(3),d_w=!0,d_m=11):p_l===NumType.GUILD?b_e=Resource.ResUrl.getFightingNumUrl(4):p_l===NumType.GUILDRANK?b_e=Resource.ResUrl.getFightingNumUrl(5):p_l===NumType.VIP?b_e=Resource.ResUrl.getVipNumUrl():p_l===NumType.RECHARGELV?b_e=Resource.ResUrl.getFightingNumUrl(6):p_l===NumType.RECHARGEGOLD?b_e=Resource.ResUrl.getFightingNumUrl(7):p_l===NumType.RECHARGEMONEY?b_e=Resource.ResUrl.getFightingNumUrl(8):p_l===NumType.FASHION?b_e=Resource.ResUrl.getFashionUrl():p_l===NumType.FIGHTING_BIG?b_e=Resource.ResUrl.getFightingNumUrl(9):p_l===NumType.XIANSHILIBAO?b_e=Resource.ResUrl.getFightingNumUrl(10):p_l===NumType.FINGT_BIG?b_e=Resource.ResUrl.getFightingNumUrl(11):p_l===NumType.QUALIFICATION?b_e=Resource.ResUrl.getFightingNumUrl(12):p_l===NumType.GUILDLISTRANK?b_e=Resource.ResUrl.getFightingNumUrl(13):p_l===NumType.DUJIE?b_e=Resource.ResUrl.getFightingNumUrl(14):p_l===NumType.NUMCIP?b_e=Resource.ResUrl.getFightingNumUrl(15):p_l===NumType.BUY_MONEY?b_e=Resource.ResUrl.getFightingNumUrl(16):p_l===NumType.PRICE_LIMIREWARD?b_e=Resource.ResUrl.getFightingNumUrl(17):p_l===NumType.SERVER_TOTAL_VALUE?b_e=Resource.ResUrl.getFightingNumUrl(18):p_l===NumType.FESTIVAL_NUM&&(b_e=Resource.ResUrl.getFightingNumUrl(19)),p_l===NumType.OPEN_SER_DISC&&(b_e=Resource.ResUrl.getFightingNumUrl(20)),b_e&&""!=b_e?e.buildNumsImg(b_e,p_g,d_m,1,b_s,d_u,d_w):null},e.reqClickNpc=function(e){var p_l=new c2m_click_npc;p_l.objId=e,DB.instance.query(c2m_click_npc,p_l)},e.closeConfirm=function(){Wzm(UI)},e.calsulate=function(e){var p_l=((e=e||0)/1e4).toString(),p_g=(e/1e8).toString(),b_s=(e%1e4).toString();"0"==p_l&&(p_l=""),"0"==b_s&&(b_s="");var d_u="";if(1<=parseInt(p_l)&&parseInt(p_l)<=9999){var b_e=parseInt(p_l)?parseInt(p_l).toString():"",d_m=b_s.slice(0,2);parseInt(d_m)%10==0&&(d_m=b_s.slice(0,1)),d_u=b_e+Utils.$((".{1}"+j_x(729)),d_m),""==d_m&&(d_u=b_e+(j_x(729)))}if(9999<parseInt(p_l)){p_l=((e-1e8*parseInt(p_g))/1e4).toString();var d_w=parseInt(p_g)?parseInt(p_g).toString():"";d_m=(b_e=parseInt(p_l)?parseInt(p_l).toString():"").slice(0,2),parseInt(d_m)%10==0&&(d_m=b_e.slice(0,1)),d_u=d_w+Utils.$((".{1}"+j_x(2377)),d_m),""==d_m&&(d_u=d_w+(j_x(2377)))}return""!=d_u?d_u:e.toString()},e.getPctProps=function(e,p_l,p_g){void 0===p_g&&(p_g=0);var b_s=[],d_u={};if(p_l)for(var b_e=0,d_m=p_l;b_e<d_m.length;b_e++){var d_w=d_m[b_e];0<d_w.length?d_u[d_w[0]]=(d_u[d_w[0]]||0)+d_w[1]:d_u[d_w.name]=(d_u[d_w.name]||0)+d_w.value}for(var f_t in e){var v_z=e[f_t].value*(p_l?d_u[e[f_t].name]||0:p_g)/1e4;b_s.push([e[f_t].name,v_z])}return b_s},e.getItemWeight=function(e){var p_l=Config.CItem(e);for(var p_g in Config.item_sort){var b_s=Config.item_sort[p_g];if(p_l.mainclass==b_s.mainclass&&p_l.subclass==b_s.subclass)return b_s.weight}return 99},e.reqCollect=function(e){var p_l=new c2m_collect_req;p_l.id=e,DB.instance.query(c2m_collect_req,p_l)},e.reqEnterFb=function(p_l,p_g,b_s,d_u){return void 0===p_g&&(p_g=null),void 0===b_s&&(b_s=0),void 0===d_u&&(d_u=0),!!this.checkReqEnterFb()&&(DungeonModel.instance.isInFb?(e.broadcastNotice((j_x("1300_1241_2035")+j_x("1443_944_283"))),p_g&&UIM.instance.isOpenWin(p_g)&&UIM.close(p_g),!1):(this.registerAutoOpenPanel(p_g,b_s),DungeonModel.instance.reqEnterFb(p_l,d_u),!0))},e.getDfofficLv=function(){LgcM.ins.getActorTypeByID(this.playerId);var e=LgcM.ins.getActorStdInfoById(this.playerId);return e?e.dfofficLv:1},e.getRideSp=function(e,p_l){void 0===p_l&&(p_l=null);var p_g=Config.ride_ride[e];p_g&&Utils.$("/{1}",p_g.model)},e.broadcastNotOpen=function(){Obo(this,j_x)},e.broadcastNotice=function(e,p_l,p_g,b_s){void 0===p_l&&(p_l=1),void 0===p_g&&(p_g="#FF0000"),void 0===b_s&&(b_s=null),BroadcastNoticeManager.instance.broadcastNotice(e,p_l,p_g,b_s)},e.gunping=function(e,p_l){void 0===p_l&&(p_l=0),UI.GunPingView.open(e,p_l)},e.checkCoin=function(e,p_l,p_g){return void 0===p_g&&(p_g=!1),!(this.getCoin(e)<p_l&&(p_g&&r_f.instance.isWindow(e),1))},e.getCoinDesc=function(e){return Oip(e,Config)},e.checkItemConsume=function(e,p_l){return Siz(e,p_l,BagModel,BagTypeDefine)},e.getCoin=function(e){var p_l=LgcM.ins.heroVo;if(p_l){var p_g=Config.item_coin[e];if(p_g&&p_g.proName)return p_l[p_g.proName];switch(e){case CoinDefine.GOLD:return p_l.gold||0;case CoinDefine.COPPER:return p_l.copper||0;case 11:return p_l.soulElite||0;case 12:return p_l.banquetPoint||0;case 13:return p_l.asyncpvpPoint||0;case CoinDefine.SKILL_EXP:return p_l.skillExp||0;case CoinDefine.GCTRB:return p_l.guildCtrb||0;case CoinDefine.GYMKHANA:return p_l.gymkhanaScore||0}}return 0},e.checkConsume=function(e,p_l){if(void 0===p_l&&(p_l=!1),e&&0<e.length)for(var p_g in e){var b_s=e[p_g][0],d_u=e[p_g][1];if(100<=b_s){if(BagModel.instance.getItemCountByItemID(b_s,BagTypeDefine.BAG_TYPE_ITEM)<d_u)return p_l&&r_f.instance.isWindow(b_s),!1}else if(!this.checkCoin(b_s,d_u))return p_l&&r_f.instance.isWindow(b_s),!1}return!0},e.getRewardDatas=function(e,p_l){void 0===p_l&&(p_l=0);var p_g=e;if(!p_g||0===p_g.length)return null;var b_s,d_u,b_e,d_m=p_g.length,d_w=[];for(b_s=0;b_s<d_m;b_s++){var f_t=p_g[b_s][0];b_e=!1,99<f_t&&1!=p_l?b_e=!0:2!=p_l&&f_t<100&&(b_e=!0),b_e&&((d_u=new ModuleItemVO).amount=p_g[b_s][1],p_g[b_s][2]&&(d_u.bind=p_g[b_s][2]),d_u.id=f_t,0!=d_u.amount&&d_w.push(d_u))}return d_w},e.checkReqEnterFb=function(){var p_l=BagModel.instance.getItemEquipCount();return!(BagSize.BAG_SIZE_EQUIP-p_l<Config.global[GlobalDefine.fb_enter_check_item_count].i_info&&(e.confirm((j_x("1166_130_283")+j_x("1289_671_2348")+j_x("716_1747_558")+"20"+j_x("1777_1496_140")+j_x("1865_33_2456")+""),(function(){UI.DecomposePanel.open(0)})),1))},e.reqEnterFbByType=function(e,p_l,p_g){return void 0===p_l&&(p_l=null),void 0===p_g&&(p_g=0),!!this.checkReqEnterFb()&&(this.registerAutoOpenPanel(p_l,p_g),DungeonModel.instance.reqEnterFbByType(e),!0)},e.calPropFight=function(e,p_l){if(!e||0===e.length)return 0;var p_g=Config.fightCoef,b_s=0,d_u={};if(p_l)for(var b_e=0,d_m=p_l;b_e<d_m.length;b_e++){var d_w=d_m[b_e];d_u[d_w[0]]=(d_u[d_w[0]]||0)+d_w[1]}for(var f_t in e)if(e[f_t].isCalFight)for(var v_z in p_g)if(e[f_t].name==p_g[v_z].propName){var d_h=e[f_t].value*p_g[v_z].coef;d_u[e[f_t].name]&&(d_h+=d_h*d_u[e[f_t].name]/1e4),b_s+=d_h}return Math.floor(b_s)},e.addProps=function(e,p_l,p_g){if(void 0===p_l&&(p_l=1),!e||0===e.length)return p_g;var b_s,d_u,b_e,d_m;for(var d_w in p_g=p_g||[],e){for(var f_t in d_u=0<e[d_w].length?(b_s=e[d_w][0],e[d_w][1]*p_l):(b_s=e[d_w].name,e[d_w].value*p_l),b_e=!1,p_g)if((d_m=p_g[f_t]).name===b_s){d_m.value+=d_u,b_e=!0;break}if(!b_e){var v_z=d_v.getPropertyTypeByName(b_s);v_z&&((d_m=new PropInfo).propOrdinal=v_z.ordinal,d_m.value=d_u,p_g.push(d_m))}}return p_g},e.notRechargeTip=function(){Enp(e,j_x)},e.unregisterAutoOpenPanel=function(e){e&&UIM.instance.unsetAutoOpenMapKey(e)},e.sendGetOrderInfo=function(p_l,p_g,b_s){void 0===p_l&&(p_l="wx"),void 0===p_g&&(p_g=6),void 0===b_s&&(b_s=-1),RecordManager.instance.orderInfo.setData(b_s,p_g,p_l);var d_u={},b_e=LgcM.ins.heroVo,d_m=GConfig.inst;if(d_u.agent_id=d_m.agentId,d_u.account=d_m.account,d_u.level=b_e.level,d_u.money=GPlatform.payTest?.01:p_g,d_u.pid=b_e.id,d_u.product_id=b_s,d_u.server_id=d_m.server,d_u.game_id=GPlatform.game_id,d_u.time=Math.floor((new Date).getTime()/1e3),2===GPlatform.platfromType)d_u.zoneid=WanbaLoginManager.instance.wanbaData.platform,d_u.pf=WanbaLoginManager.instance.wanbaData.pf,d_u.openkey=WanbaLoginManager.instance.wanbaData.openkey,d_u.platform=WanbaLoginManager.instance.wanbaData.platform,d_u.openid=WanbaLoginManager.instance.wanbaData.openid;else if(GPlatform.isVivo){var d_w=VivoLoginManager.instance.vivoData;d_u.openid=d_w.openid,d_u.zoneid=GConfig.inst.server.toString(),d_u.product_id=b_s.toString(),d_u.appid=d_w.appid}else if(GPlatform.isOPPO){var f_t=OPPOLoginManager.instance.oppoData;d_u.appid=f_t.appid,d_u.openid=f_t.js_code,d_u.engineVersion=SubpackageMgr.ins.platformVersion}else if(GPlatform.isQQMini){var v_z=QQMiniLoginManager.instance.qqMiniData;d_u.openid=v_z.openid,d_u.zoneid=GConfig.inst.server.toString(),d_u.pf=v_z.pf,d_u.product_id=b_s.toString(),d_u.appid=v_z.appid,d_u.session_key=v_z.session_key}else if(GPlatform.isXjWx){var d_h=XjwxLoginManager.instance.xjwxData;d_u.openid=d_h.openid,d_u.zone_id="1",d_u.pf=d_h.pf,d_u.product_id=b_s.toString(),d_u.appid=d_h.appid,d_u.session_key=d_h.session_key}else GPlatform.isHuaWei?d_u.source=p_l:GPlatform.isXJH5?d_u.source=p_l:d_u.source=0<GPlatform.game_channel_id?GPlatform.game_channel_id:p_l;var r_t=RecordManager.instance.getSign(d_u,!1);if(r_t+=GConfig.inst.app_secret,console.log("sign",r_t),r_t=Md5.toMd5(r_t),d_u.sign=r_t,d_u.name=b_e.name,GPlatform.addAgentMixSer(d_u),GPlatform.isXJH5){var t_n=H5XJLoginManager.instance.agentBase;d_u.channel_id=t_n.channel_id}console.log("sendGetOrderInfo",p_g,b_s,d_u),e.sendGetOrderInfoToPhp(d_u)},e.getPropInfos=function(e){if(e){var p_l=[],p_g=void 0;for(var b_s in e)(p_g=d_v.getPropertyTypeByName(e[b_s][0]))&&p_l.push(this.createPropInfo(p_g.ordinal,e[b_s][1]));return p_l}return null},e.sendGetOrderInfoToPhp=function(p_l){var p_g=JSON.stringify(p_l),b_s=new Laya.HttpRequest;b_s.on(Laya.Event.COMPLETE,e,e.onOrderConfig),b_s.send(GConfig.inst.addr+RecordManager.API_ORDER,p_g,"post","json"),console.log((j_x("531_2111_411")+j_x("2263_281_1590")+" req"),p_g)},e.registerAutoOpenPanel=function(e,p_l,p_g,b_s){void 0===b_s&&(b_s=!0),e&&(b_s&&UIM.close(e),p_l&&UIM.instance.setAutoOpenMapKey(e,p_l,p_g))},e.changeActStar=function(e,p_l,p_g){var b_s;void 0===p_g&&(p_g=5);for(var d_u=0;d_u<5;d_u++)if(b_s=e.getChildByName("star"+d_u)){var b_e=(p_g-p_l)*b_s.width/2;b_s.visible=d_u<p_l,b_s.x=b_e*(d_u+1)}},e.getLevel=function(){LgcM.ins.getActorTypeByID(this.playerId);var e=LgcM.ins.getActorStdInfoById(this.playerId);return e?e.level:1},e.drawSameIcons=function(e,p_l,p_g,b_s){if(void 0===p_g&&(p_g=0),void 0===b_s&&(b_s=null),!e)return b_s;var d_u=new Laya.Point;(b_s=b_s||new Laya.Sprite).graphics.clear();for(var b_e=e.width,d_m=e.height,d_w=0;d_w<p_l;d_w++)b_s.graphics.drawTexture(e,d_u.x,d_u.y,b_e,d_m),d_u.x+=b_e+p_g;return b_s.size(d_u.x,d_m),b_s},e.createPropInfo=function(e,p_l){var p_g=new PropInfo;return p_g.propOrdinal=e,p_g.value=p_l,p_g},e.buildRankImg=function(p_l,p_g,b_s,d_u,b_e,d_m){void 0===b_s&&(b_s=10),void 0===d_u&&(d_u=1),void 0===b_e&&(b_e=null),void 0===d_m&&(d_m=0);var d_w=e.RankPool[p_l[0]],f_t=e.RankPool[p_l[1]],v_z=e.RankPool[p_l[3]];if(!d_w||!f_t||!v_z){d_w=Resource.ResManager.Instance.getRes(p_l[0]),f_t=Resource.ResManager.Instance.getRes(p_l[1]);var d_h=Resource.ResManager.Instance.getRes(p_l[2]);d_w&&f_t&&d_h?v_z=e.RankPool[p_l[2]]=Utils.splitTexture(d_h,10,1):(Laya.loader.load(p_l[0]),Laya.loader.load(p_l[1]),Laya.loader.load(p_l[2]))}if(!d_w||!f_t||!v_z)return null;var r_t=new Laya.Point;function t_n(e){return Math.floor((f_y-e)/2)}r_t.x+=d_m,(b_e=b_e||new Laya.Sprite).graphics.clear();var f_y=Math.max(d_w.height,f_t.height,v_z[0].height);b_e.graphics.drawTexture(d_w,r_t.x,t_n(d_w.height),d_w.width,d_w.height),r_t.x+=d_w.width;for(var p_q,h_h=v_z[0].width,n_j=v_z[0].height,j_l=t_n(n_j),l_m=p_g.toString(),z_m=0;z_m<l_m.length;z_m++)p_q=parseInt(l_m.charAt(z_m)),b_e.graphics.drawTexture(v_z[p_q],r_t.x,j_l,h_h,n_j),r_t.x+=h_h;return b_e.graphics.drawTexture(f_t,r_t.x,t_n(f_t.height),f_t.width,f_t.height),r_t.x+=f_t.width,b_e.size(r_t.x,f_y),b_e},e.onOrderConfig=function(e){GPlatform.isWanba?WanbaPlatform.instance.orderParamsBack(e):GPlatform.isWx?WXPlatform.instance.orderParamsBack(e):GPlatform.isXjWx?XjwxPlatform.instance.orderParamsBack(e):GPlatform.isHuoshuWx?HswxPlatform.instance.orderParamsBack(e):GPlatform.isVivo?VivoPlatform.instance.orderParamsBack(e):GPlatform.isQQMini?QQMiniPlatform.instance.orderParamsBack(e):GPlatform.isOPPO?OPPOPlatform.instance.orderParamsBack(e):GPlatform.isHuaWei?HuaweiPlatform.ins.orderParamsBack(e):GPlatform.isXJH5?H5XJPlatform.ins.orderParamsBack(e):GPlatform.isYZX?v_t.ins.orderParamsBack(e):H5Platform.ins.orderParamsBack(e)},Object.defineProperty(e,"canClickMove",{get:function(){var p_l=Config.map[e.mapID];return!(!p_l||1!==p_l.clickMove)},enumerable:!0,configurable:!0}),e.reload=function(){if(GPlatform.isWxMini||GPlatform.isQQMini)Laya.Browser.window.location.reload();else{var e=Laya.Browser.window.location.href;if(e&&"string"==typeof e){var p_l="t="+Math.floor(999*Math.random());e=-1!=e.indexOf("t=")?e.replace("t=",p_l):e+"?"+p_l}if(H5YzxLoginManager.instance.recordUserInfo(Sdk.YZX.Save_Exit),GPlatform.isH5)return void H5Platform.ins.logout();Laya.Browser.window.location.href=e}},e.lastMapID=0,e.mapID=0,e.lastFbId=0,e.fbId=0,e._playerId=0,e.playerName="",e.playerLevel=0,e.severKey=0,e.isPloting=!1,e.NumsPool={},e.RankPool={},e.DYNAMIC=1,e}(),SoundInfo=function(){function e(){this.fileUrl="",this.lastTick=0,this.isPlaying=!1}return e.prototype.setPlayState=function(e){Uml(e,this)},e}(),Resource;!function(e){var p_l=(p_g.ANIMATION_LOAD_COMPLETE="animation_load_Complete",p_g.PARSE_ERROR="parseError",p_g);function p_g(){}e.ResourceEvent=p_l}(Resource=Resource||{});var d_b=function(){Qgj(this)},CheckBtnType,r_t,BaseUI;r_t=CheckBtnType=CheckBtnType||{},r_t[r_t.AddFriend=0]="AddFriend",r_t[r_t.RoleInfo=1]="RoleInfo",r_t[r_t.PrivateChat=2]="PrivateChat",r_t[r_t.AddBlack=3]="AddBlack",r_t[r_t.delFriend=4]="delFriend",r_t[r_t.kill=5]="kill",r_t[r_t.Forbidden=6]="Forbidden",function(e){var p_l,p_g=(p_l=laya.ui.View,__extends(b_s,p_l),b_s.prototype.init=function(){Mpi(this,Laya)},b_s.prototype.onAdded=function(){Use(this,Laya)},b_s.prototype.close=function(){},b_s.prototype.onRemove=function(){Umv(this,Laya)},b_s.prototype.onClick=function(e){var p_l=e.target;if(p_l)switch(p_l.name){case"closeBtn":this.close();break;case"backBtn":this.back()}},b_s.prototype.back=function(){},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.BaseDialog=p_g}(BaseUI=BaseUI||{});var BroadcastType,BroadcastNoticeManager=function(){function e(){this._panelDic={}}return e.prototype.popupSpecialItem=function(e,p_l){Yas(e,p_l,j_a,this)},e.prototype.moveComplete=function(e){if(e){var p_l=this.getPanels(e),p_g=p_l.shift();for(var b_s in p_g&&p_g.removeSelf(),p_l)if(null==p_l[b_s].parent)return void this.addToShow(p_l[b_s])}},e.prototype.calCurPosY=function(e){void 0===e&&(e=1);for(var p_l=this.getPanels(e),p_g=0,b_s=p_l.length-1;0<=b_s;b_s--)p_l[b_s].parent&&(p_g++,p_l[b_s].moveY(400-p_g*p_l[b_s].height));return 400},e.prototype.broadcastNotice=function(e,p_l,p_g,b_s){if(void 0===p_l&&(p_l=1),void 0===p_g&&(p_g="#FF0000"),void 0===b_s&&(b_s=null),e){var d_u="main/warn_alert";if(p_l!=BroadcastType.WIN&&(d_u=p_l==BroadcastType.ERROR?"window/tips/alert_error":"window/tips/alert"),z_j.isLoadJson(d_u,this,this.broadcastNotice,[e,p_l,p_g,b_s]))if(p_l==BroadcastType.WIN)UI.WarnPanel.open(e);else{var b_e=this.getPanels(p_l),d_m=p_l===BroadcastType.ERROR?Laya.Pool.getItemByClass(PoolDefine.ALERT_ERROR_PANEL,AlertErrorPanel):Laya.Pool.getItemByClass(PoolDefine.ALERT_PANEL,AlertPanel);d_m.setContent(e,p_l,p_g,Engine2d.Tools.BindDomain(this.moveComplete,this));var d_w=p_l===BroadcastType.ERROR?3:5;if(p_l===BroadcastType.ERROR){if(!b_s&&!(b_s=LgcM.ins.isPop))return;if(b_e.length>=d_w){var f_t=b_e.shift();f_t&&f_t.clear()}this.addToShow(d_m)}else b_e.length<d_w&&this.addToShow(d_m);b_e.push(d_m)}}},e.prototype.delayPopItem=function(e,p_l){if(z_j.isLoadJson("window/tips/alert_special_item",this,this.delayPopItem,[e,p_l])){var p_g=Laya.Pool.getItemByClass(PoolDefine.ALERT_ITEM_SPECIAL_PANEL,AlertSpecialItemPanel);p_g.lastTime=this.getItemPanelTime(),p_g.x=Stage.width/2,p_g.y=400,p_g.setData(e,p_l),this._itemPanels.push(p_g)}},e.prototype.getItemPanelTime=function(){return this._itemPanels||(this._itemPanels=[]),this._itemPanels&&0<this._itemPanels.length?this._itemPanels[this._itemPanels.length-1].lastTime+200:SyncTime.tickCount-200},e.prototype.update=function(){if(this._itemPanels)for(var e=void 0,p_l=this._itemPanels.length-1;0<=p_l;p_l--){var p_g=(e=this._itemPanels[p_l]).update();0===p_g?(e.x=Stage.width/2,UIM.instance.addToTopLayer(e)):2===p_g&&(this._itemPanels.splice(p_l,1),e.clear(),e=null)}},e.prototype.addToShow=function(e){Wtf(e,Stage,this,UIM)},e.prototype.getPanels=function(e){return Ckg(e,this)},e.prototype.leaveMap=function(){var e;for(var p_l in this._panelDic){for(var p_g in e=this._panelDic[p_l])e[p_g].clear();e.length=0}if(this._itemPanels){for(var b_s=this._itemPanels.length-1;0<=b_s;b_s--)this._itemPanels[b_s].clear(),this._itemPanels[b_s]=null;this._itemPanels=null}},e.instance=new e,e}(),AlertErrorPanel=function(e){function p_l(){var p_l=e.call(this)||this;return p_l.on(Laya.Event.ADDED,p_l,p_l.onAdded),p_l}return __extends(p_l,e),p_l.prototype.onAdded=function(){Qpk(this,Laya)},p_l.prototype.moveY=function(e){this.y==e||this._tween||Laya.Tween.to(this,{j_l:e},200,null,null,null,!0,!0)},p_l.prototype.tweenComplete=function(){this._tween&&(this._tween.clear(),this._tween=null),this.removeSelf(),Laya.Pool.recover(PoolDefine.ALERT_ERROR_PANEL,this),null!=this._callBack&&this._callBack.call(null,this._type),this._callBack=null,this.valueTxt.text=null},p_l.prototype.delayMove=function(){Laya.timer.clear(this,this.delayMove);var e=this.y-100;this._tween=Laya.Tween.to(this,{f_u:this.x,j_l:e,alpha:0},500,null,Laya.Handler.create(this,this.tweenComplete),null,!0)},p_l.prototype.setContent=function(e,p_l,p_g,b_s){void 0===p_l&&(p_l=1),void 0===p_g&&(p_g="#FF0000"),void 0===b_s&&(b_s=null),this._callBack=b_s,this._type=p_l,this.valueTxt.color=p_g,this.valueTxt.text=e,this._lastTime=SyncTime.tickCount},Object.defineProperty(p_l.prototype,"content",{get:function(){return this.valueTxt.text},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"lastTime",{get:function(){return this._lastTime},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),p_l.prototype.clear=function(){Laya.timer.clear(this,this.delayMove),this._tween&&(this._tween.clear(),this._tween=null),this._callBack=null,this.valueTxt.text=null,this.removeSelf(),Laya.Pool.recover(PoolDefine.ALERT_ERROR_PANEL,this)},p_l}(ui.window.tips.alert_errorUI),AlertPanel=function(e){function p_l(){var p_l=e.call(this)||this;return p_l.on(Laya.Event.ADDED,p_l,p_l.onAdded),p_l}return __extends(p_l,e),p_l.prototype.onAdded=function(){this.alpha=1,Laya.timer.once(this._type===BroadcastType.ERROR?2e3:800,this,this.delayMove)},p_l.prototype.moveY=function(e){this.y==e||this._tween||Laya.Tween.to(this,{j_l:e},200,null,null,null,!0,!0)},p_l.prototype.delayMove=function(){Laya.timer.clear(this,this.delayMove);var e=(this._type,BroadcastType.ERROR,this.y-100),p_l=(this._type,BroadcastType.ERROR,500);this._tween=Laya.Tween.to(this,{f_u:this.x,j_l:e,alpha:0},p_l,null,Laya.Handler.create(this,this.tweenComplete),null,!0)},p_l.prototype.tweenComplete=function(){this._tween&&(this._tween.clear(),this._tween=null),this.removeSelf(),Laya.Pool.recover(PoolDefine.ALERT_PANEL,this),null!=this._callBack&&this._callBack.call(null,this._type),this._callBack=null,this.valueTxt.text=null},p_l.prototype.setContent=function(e,p_l,p_g,b_s){void 0===p_l&&(p_l=1),void 0===p_g&&(p_g="#FF0000"),void 0===b_s&&(b_s=null),this._callBack=b_s,this._type=p_l,this.valueTxt.color=p_g,this.valueTxt.text=e,this._lastTime=SyncTime.tickCount},Object.defineProperty(p_l.prototype,"content",{get:function(){return this.valueTxt.text},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"lastTime",{get:function(){return this._lastTime},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),p_l.prototype.clear=function(){Laya.timer.clear(this,this.delayMove),this._tween&&(this._tween.clear(),this._tween=null),this._callBack=null,this.valueTxt.text=null,this.removeSelf(),Laya.Pool.recover(PoolDefine.ALERT_PANEL,this)},p_l}(ui.window.tips.alertUI),AlertSpecialItemPanel=function(e){function p_l(){var p_l=e.call(this)||this;return p_l.C_S_BIG_T=66,p_l.C_S_SMALL_T=100,p_l.C_S_BIG_TWO_T=200,p_l.C_S_ORI_T=333,p_l.C_STAND_T=400,p_l.C_MOVE_T=1200,p_l.C_ALPHA_T=200,p_l.on(Laya.Event.ADDED,p_l,p_l.onAdded),p_l}return __extends(p_l,e),p_l.prototype.onAdded=function(){Cdq(this,SyncTime,Resource)},Object.defineProperty(p_l.prototype,"lastTime",{get:function(){return this._lastTime},set:function(e){this._lastTime=e},enumerable:!0,configurable:!0}),p_l.prototype.setData=function(e,p_l){var p_g=Config.CItem(e);if(p_g.subclass==EquipSubClassDefine.EquipTalis?this.iconSp.scale(.625,.625):this.iconSp.scale(1,1),this.valueTxt.color=Utils.ItemUtils.getQualityColor(p_g.quality),this.valueTxt.changeText(Utils.$("{1} x{2}",p_g.name,b_p.calsulate(p_l))),p_g.icon&&""!=p_g.icon){var b_s=Resource.ResUrl.getIconUrl(p_g.icon);this.iconSp=Resource.ResManager.Instance.getImg(b_s,this.iconSp)}this.bgQuaClip.index=p_g.quality-1},p_l.prototype.update=function(){var e=SyncTime.tickCount-this.lastTime;if(!this.parent)return e<300?-1:0;if(e<=this.C_ALPHA_T&&(this.alpha=e/this.C_ALPHA_T),e<=this.C_S_BIG_T){var p_l=e/this.C_S_BIG_T;this.scaleX=this.scaleY=1+1*p_l}else if(e<this.C_S_SMALL_T)p_l=1-(e-this.C_S_BIG_T)/(this.C_S_SMALL_T-this.C_S_BIG_T),this.scaleX=this.scaleY=1+1*p_l;else if(e<this.C_S_BIG_TWO_T)p_l=(e-this.C_S_SMALL_T)/(this.C_S_BIG_TWO_T-this.C_S_SMALL_T),this.scaleX=this.scaleY=1+.3*p_l;else if(e<this.C_S_ORI_T)p_l=1-(e-this.C_S_BIG_TWO_T)/(this.C_S_ORI_T-this.C_S_BIG_TWO_T),this.scaleX=this.scaleY=1+.3*p_l;else if(e<this.C_STAND_T);else{if(!(e<this.C_MOVE_T))return 2;p_l=(e-this.C_STAND_T)/(this.C_MOVE_T-this.C_STAND_T),this.y=this._lastPosY+-.16*(e-this.C_STAND_T),this.alpha=1-p_l}return 1},p_l.prototype.clear=function(){Amg(this,Laya,PoolDefine)},p_l}(ui.window.tips.alert_special_itemUI),Config;!function(e){e[e.ERROR=1]="ERROR",e[e.WIN=2]="WIN",e[e.ITEM_GAIN=3]="ITEM_GAIN"}(BroadcastType=BroadcastType||{}),function(e){e.CItem=function(p_l){return e.item_coin[p_l]?e.item_coin[p_l]:e.item_consumeable[p_l]?e.item_consumeable[p_l]:e.item_equipment[p_l]?e.item_equipment[p_l]:e.item_material[p_l]?e.item_material[p_l]:e.item_petSpirit[p_l]?e.item_petSpirit[p_l]:null},e.CPassiveSkill=function(p_l){return e.skill_passive_role[p_l]?e.skill_passive_role[p_l]:e.skill_passive_talisman[p_l]?e.skill_passive_talisman[p_l]:e.skill_passive_guild[p_l]?e.skill_passive_guild[p_l]:e.skill_passive_ride[p_l]?e.skill_passive_ride[p_l]:null}}(Config=Config||{});var h_u=function(){function e(){this.id=0,this.level=0}return Object.defineProperty(e.prototype,"name",{get:function(){if(0<this.id){var e=Config.CItem(this.id);if(e)return e.name}return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cdRuning",{get:function(){return!1},enumerable:!0,configurable:!0}),e}(),TimeVo=function(e){function p_l(){var p_l=e.call(this)||this;return p_l._lastTime=0,p_l._cdDuration=0,p_l._endTime=0,p_l}return __extends(p_l,e),p_l.prototype.setCDTime=function(e,p_l){864e5<p_l&&(console.log(("cd"+j_x("1860_2456_1702")+j_x("2460_254_1066")+", cd "),p_l),p_l=0),this._lastTime=e,this._cdDuration=p_l,this._endTime=this._lastTime+p_l},p_l.prototype.clearCDTime=function(){Qfz(this,SyncTime)},Object.defineProperty(p_l.prototype,"cdDuration",{get:function(){return this._cdDuration},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"lastTime",{get:function(){return this._lastTime},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"runTime",{get:function(){if(0==this._lastTime)return 0;var e=SyncTime.serverTime-this._lastTime;return e>this._cdDuration&&(e=this._cdDuration),e},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"remainTime",{get:function(){if(0==this._lastTime)return 0;var e=SyncTime.serverTime,p_l=this._endTime-e;return p_l<0&&(p_l=0),p_l},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"cdRuning",{get:function(){if(0==this._lastTime)return!1;var e=SyncTime.serverTime;return 0<this._endTime-e},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"cdExceed",{get:function(){if(0==this._lastTime)return!0;var e=SyncTime.serverTime;return this._endTime-e<0},enumerable:!0,configurable:!0}),p_l}(h_u),ModuleItemVO=function(e){function p_l(){var p_l=e.call(this)||this;return p_l._flag=0,p_l}return __extends(p_l,e),p_l.prototype.TalisEquip=function(){return Qrk(Config,this)},p_l.prototype.GodEquip=function(){return Iyi(Config,this)},p_l.prototype.setCommonCD=function(e,p_l){this._commonCD||(this._commonCD=new TimeVo),this._commonCD.setCDTime(e,p_l)},Object.defineProperty(p_l.prototype,"commonCDRuning",{get:function(){return!!this._commonCD&&this._commonCD.cdRuning},enumerable:!0,configurable:!0}),p_l.prototype.getCommonCD=function(){return Yox(this)},Object.defineProperty(p_l.prototype,"cdRuning",{get:function(){if(this.commonCDRuning)return!0;if(0==this._lastTime)return!1;var e=SyncTime.serverTime;return 0<this._endTime-e},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"dynamic",{get:function(){return this.m_dynamic},set:function(e){this.m_dynamic=e},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"name",{get:function(){if(0<this.id){if(!this.m_name||""==this.m_name){var e=Config.CItem(this.id);e&&(this.m_name=e.name)}return 1==this.isTemporary?Utils.$(("("+j_x("996_1702")+"){1}"),this.m_name):this.m_name}return null},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"exceed",{get:function(){var e=Config.CItem(this.id).timeLimit,p_l=1e3*this.createTime+1e3*e;return!(0<SyncTime.timeSpan(p_l))},enumerable:!0,configurable:!0}),p_l.prototype.toLinkStr=function(){return Gic(this,n_d)},p_l.prototype.calcFight=function(){return Gby(EquipModel,this)},Object.defineProperty(p_l.prototype,"setFlag",{set:function(e){this._flag=e},enumerable:!0,configurable:!0}),p_l}(TimeVo),BagInfoVO=function(e){function p_l(){var p_l=e.call(this)||this;return p_l.usedTime=0,p_l._quality=1,p_l._state=0,p_l}return __extends(p_l,e),p_l.prototype.update=function(e){this.id=e.itemId,this.uuid=e.uuid,this.slot=e.slot,this.amount=e.amount,this.bind=e.bind,this.createTime=e.createTime,this.expireTime=e.expireTime,this.fighting=0,this.isTemporary=0,this.dynamic=e.dynamic;var p_l=Config.CItem(e.itemId);p_l&&(this._quality=p_l.quality,this._state=p_l.stateLevel),this._talisID=0,this._cItem=p_l,this.calcFight(),this.countTalisID()},Object.defineProperty(p_l.prototype,"cItem",{get:function(){return this._cItem},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"quality",{get:function(){return this._quality||1},set:function(e){this._quality=e},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"state",{get:function(){return this._state||0},set:function(e){this._state=e},enumerable:!0,configurable:!0}),p_l.prototype.countTalisID=function(){if(this.TalisEquip()&&null!=this.slot){this._talisID=0;var e=this.serverSlot.toString().length-1,p_l=Math.pow(10,e)*BagTypeDefine.BAG_TYPE_TALIS,p_g=(this.serverSlot-this.place-p_l)/EquipDefine.TalisNum;for(var b_s in Config.talisman_talisman)Config.talisman_talisman[b_s].bagIndex==p_g&&(this._talisID=Config.talisman_talisman[b_s].id)}return this._talisID},Object.defineProperty(p_l.prototype,"talisID",{get:function(){return this._talisID},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"clientSlot",{get:function(){return this.slot-1<0?0:this.slot-1},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"serverSlot",{get:function(){return this.slot},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"place",{get:function(){return 0<this.id?Config.CItem(this.id).place:-1},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"isNone",{get:function(){return 0==this.id},enumerable:!0,configurable:!0}),p_l}(ModuleItemVO),SkillVo=function(e){function p_l(){var p_l=e.call(this)||this;return p_l.prio=0,p_l.type=1,p_l.passiveArr=null,p_l.clientPrio=0,p_l}return __extends(p_l,e),p_l.prototype.setSkillInfo=function(e){Kvb(e,this)},p_l.prototype.updatePrio=function(e){Upn(e,this)},p_l.prototype.updateInfo=function(e){Iok(e,this)},p_l.prototype.isLvUp=function(){return this.level>this._lastLv&&(this._lastLv=this.level,!0)},Object.defineProperty(p_l.prototype,"upLv",{get:function(){if(this.level>this._lastLv){var e=this.level-this._lastLv;return this._lastLv=this.level,e}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"name",{get:function(){return this.isActiveSkill()?Config.skill_skill[this.id].name:Config.CPassiveSkill(this.id).name},enumerable:!0,configurable:!0}),p_l.prototype.isActiveSkill=function(){return Gec(Config,this)},p_l}(ModuleItemVO),ChatVo=function(){function e(){}return e.prototype.init=function(){Ksm(this)},e.prototype.setPrivateChatRec=function(e,p_l){this.idx=-1,this.channel=ChannelTypeDefine.PM,this.pid=e.fromPid,this.entryId=e.entryId,this.name=p_l.name,this.vip=p_l.vip,this.bubble=e.bubble,this.fashionAvatar=e.fashionAvatar,this.msg=e.msg,this.msgId=e.msgId,this.flags=e.flags,this.headIcon=p_l.headIcon,this.sid=p_l.sid,this.temp=p_l.temp,this.time=e.time,e.msgParams&&0<e.msgParams.length?this.params=JSON.parse(e.msgParams):this.params=[]},e.prototype.setBroadcast=function(e){if(this.idx=-1,this.channel=e.channel,this.time=e.time,e.strId){var p_l=Config.notice[e.strId];this.msg=p_l?p_l.value:""}else this.msg=e.msg;e.msgParams&&0<e.msgParams.length?this.params=JSON.parse(e.msgParams):this.params=[]},e.prototype.buildMsg=function(){var e="";return this.name&&(e+=this.name+": "),this.params,e+this.msg},e.prototype.setChatRec=function(e,p_l){this.idx=e,this.channel=p_l.channel,this.pid=p_l.pid,this.entryId=p_l.entryId,this.headIcon=p_l.headIcon,this.name=p_l.name,this.vip=p_l.vip,this.bubble=p_l.bubble,this.fashionAvatar=p_l.fashionAvatar,this.title=p_l.title,this.msg=p_l.msg,this.msgId=p_l.msgId,this.sid=p_l.sid,this.guildOffice=p_l.guildOffice,this.flags=0,this.time=p_l.time,p_l.msgParams&&0<p_l.msgParams.length?this.params=JSON.parse(p_l.msgParams):this.params=[]},e.prototype.dispose=function(){Ogr(this,Laya,e)},e.PoolString="ChatVo",e}(),PrivateChatPlrVo=function(){function e(e){this.pid=0,this.entryId=0,this.headIcon=0,this.name="",this.vip=0,this.online=!1,this.hasNewChat=!1,this.lastTime=0,this.isShwo=!1,this.temp=!1,this.sid=0,e&&(this.pid=e.pid,this.entryId=e.entryId,this.headIcon=e.headIcon,this.name=e.name,this.vip=e.vip,this.online=0!==e.online,this.hasNewChat=0!==e.hasNewChat,this.lastTime=e.lastTime,this.isShwo=!0,this.sid=e.sid)}return e.prototype.copy=function(e){if(e)for(var p_l in e)this.hasOwnProperty(p_l)&&(this[p_l]=e[p_l])},e}(),MailVo=function(e){if(this.idx=e.idx,this.flag=e.flag,this.createTime=e.createTime,this.title=e.title,this.content=e.content,0<e.attackment.length){if("[]"==e.attackment)return void(this.attackment=[]);try{JSON.parse(e.attackment)}catch(e){return}this.attackment=b_p.getRewardDatas(JSON.parse(e.attackment))}else this.attackment=[]},DungeonInfoVo=function(){function e(){this.id=0,this.count=0,this.lastTime=0,this.firstPass=0,this.remind=!1}return e.prototype.setDungeonInfo=function(e){Mei(e,this)},e}(),DungeonRoomVo=function(){Ovp(this)},GerenBossVo=function(){function e(){}return e.prototype.setRaw=function(e,p_l){Kun(e,p_l,this)},e}(),StoryFbRoomVo=function(){},DungeonPlrInfoVo=function(){function e(){}return e.prototype.setData=function(e){Qnw(e,this)},e}(),DungeonTeamVo=function(){function e(){}return e.prototype.setData=function(e){this.member||(this.member=[]);for(var p_l=0;p_l<e.member.length;++p_l)this.member[p_l]||(this.member[p_l]=new DungeonPlrInfoVo),this.member[p_l].setData(e.member[p_l]);this.member.length>e.member.length&&(this.member=this.member.slice(0,e.member.length))},e}(),UI,ItemBoxDefine;!function(e){var p_l,p_g=(p_l=ui.main.checkFriendUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Arh(Laya,this)},b_s.prototype.onStageClick=function(e){e&&e.target==this||e.target==this.listBox||b_s.close()},b_s.prototype.onRenderItem=function(e,p_l){var p_g=e.dataSource;null!=p_g&&(e.getChildByName("btn").getChildByName("clip").index=p_g)},b_s.prototype.onRemove=function(){Wua(Laya,this)},b_s.open=function(e,p_l,p_g,d_u,b_e,d_m){void 0===b_e&&(b_e=[]),void 0===d_m&&(d_m=!1),null==b_s.instance&&(b_s.instance=new b_s),null==b_s.instance.parent&&Laya.stage.addChild(b_s.instance),b_s.instance.updateData(e,p_l,p_g,d_u,b_e),b_s.instance._isCorss=d_m},b_s.prototype.onListSelect=function(p_l){if(-1!=p_l){var p_g=this.listBox.getCell(p_l);if(p_g&&p_g.dataSource){switch(p_g.dataSource){case CheckBtnType.AddFriend:FriendModel.instance.reqAddFriend(this._pID);break;case CheckBtnType.RoleInfo:n_d.instance.reqViewRoleInfo(this._pID);break;case CheckBtnType.PrivateChat:e.ChatTallPanel.close(),e.ChatPrivatePanel.open(this._pID);break;case CheckBtnType.AddBlack:FriendModel.instance.showAddBlackTip(this._pID);break;case CheckBtnType.Forbidden:if(b_s.instance._isCorss){if(TitleModel.instance.canCsPrivilegeHaveGain){n_d.instance.reqMeIsSilence(),FriendModel.instance.showForbidRecordTip(this._pID,this._pName,2);break}b_p.broadcastNotice((j_x("206_2333_1896")+j_x("321_1350_2101")+j_x(1274)))}else{if(TitleModel.instance.canPrivilegeHaveGain){n_d.instance.reqMeIsSilence(),FriendModel.instance.showForbidRecordTip(this._pID,this._pName,1);break}b_p.broadcastNotice((j_x("206_2333_1896")+j_x("321_1350_2101")+j_x(1274)))}}b_s.close()}}},b_s.prototype.delayAddListener=function(){Aoq(Laya,this)},b_s.prototype.updateData=function(e,p_l,p_g,b_s,d_u){switch(void 0===d_u&&(d_u=[]),this._pID=e,this._pName=p_l,this.arrowImg.scaleX=1,this.arrowImg.rotation=0,p_g){case 0:this.arrowImg.x=this.width-this.arrowImg.width>>1,this.arrowImg.y=this.arrowImg.height,b_s.x=b_s.x-this.width/2,b_s.y=0,this.arrowImg.rotation=90;break;case 1:this.arrowImg.x=this.width-this.arrowImg.width,this.arrowImg.y=this.height-this.arrowImg.height>>1,b_s.x=b_s.x-this.width,b_s.y=b_s.y-this.height/2,this.arrowImg.scaleX=-1;break;case 2:this.arrowImg.x=(this.width-this.arrowImg.width>>1)+this.arrowImg.width/2,this.arrowImg.y=this.height-this.arrowImg.height/2,b_s.x=b_s.x-this.width/2+15,b_s.y=b_s.y-this.height,this.arrowImg.rotation=-90;break;case 3:this.arrowImg.x=0,this.arrowImg.y=(this.height-this.arrowImg.height>>1)+this.arrowImg.height/2,b_s.x=b_s.x,b_s.y=b_s.y-this.height/2}this.pos(b_s.x<0?0:b_s.x,b_s.y<0?0:b_s.y),this.bg.height=62*d_u.length+21,this.height=this.bg.height+12,this.listBox.height=this.bg.height-21,this.listArray=d_u,this.listBox.array=this.listArray},b_s.close=function(){null!=b_s.instance&&Laya.stage.removeChild(b_s.instance)},b_s);function b_s(){var e=p_l.call(this)||this;return e._isCorss=!1,e.mouseEnabled=!0,z_j.setList(e.listBox,e,e.onRenderItem,e.onListSelect),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.CheckFriend=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.main.checkMenuUI,__extends(b_s,p_l),Object.defineProperty(b_s,"ins",{get:function(){return this._ins||(this._ins=new b_s),this._ins},enumerable:!0,configurable:!0}),b_s.prototype.onAdded=function(){Gek(Laya,this)},b_s.show=function(e){e&&(e.isAutoClose&&b_s.close(),null==b_s.ins.parent&&Laya.stage.addChild(b_s.ins),b_s.ins.updateData(e))},b_s.prototype.updateData=function(e){this._vo=e,this.arrowImg.scaleX=1,this.arrowImg.rotation=0;var p_l=e.pos;this.arrowImg.visible=e.showArrow,this.bg.height=62*e.menuList.length+21,this.height=this.bg.height+12;var p_g=new Laya.Point,b_s=this.arrowImg.width,d_u=this.arrowImg.height;if(e.showArrow)switch(e.dir){case 0:p_g.x=this.width-b_s>>1,p_g.y=d_u,p_l.x=p_l.x-this.width/2,p_l.y=0,this.arrowImg.rotation=90;break;case 1:p_g.x=this.width-b_s,p_g.y=this.height-d_u>>1,p_l.x=p_l.x-this.width,p_l.y=p_l.y-this.height/2,this.arrowImg.scaleX=-1;break;case 2:p_g.x=(this.width-b_s>>1)+b_s/2,p_g.y=this.height-d_u/2,p_l.x=p_l.x-this.width/2+15,p_l.y=p_l.y-this.height,this.arrowImg.rotation=-90;break;case 3:p_g.x=0,p_g.y=(this.height-d_u>>1)+d_u/2,p_l.x=p_l.x,p_l.y=p_l.y-this.height/2}p_l.x+this.width>GPlatform.stageWidth&&(p_l.x=GPlatform.stageWidth-this.width),p_l.y+this.height>GPlatform.stageHeight&&(p_l.y=GPlatform.stageHeight-this.height),p_l.y-this.height<0&&(p_l.y=0),this.x=p_l.x<0?0:p_l.x,this.y=p_l.y<0?0:p_l.y,this.arrowImg.pos(p_g.x,p_g.y),this.menuList.height=this.bg.height-21,this.menuList.array=e.menuList},b_s.prototype.updateItem=function(e){var p_l=e.dataSource;null!=p_l&&(e.getChildByName("btn").getChildByName("menuWord").index=p_l)},b_s.prototype.onStageClick=function(e){e&&e.target==this||e.target==this.menuList||b_s.close()},b_s.prototype.onSelect=function(e){-1!=e&&(this._vo&&this._vo.fun&&this._vo.fun.runWith(e),this.menuList.selectedIndex=-1,b_s.close())},b_s.prototype.onRemove=function(){Gdl(Laya,this)},b_s.prototype.delayListener=function(){Cst(Laya,this)},b_s.close=function(){null!=b_s.ins&&b_s.ins.removeSelf()},b_s);function b_s(){var e=p_l.call(this)||this;return z_j.setList(e.menuList,e,e.updateItem,e.onSelect),z_j.setListScroll(e.menuList),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.CheckMenu=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.itemUI,__extends(b_s,p_l),Object.defineProperty(b_s.prototype,"dataSource",{set:function(p_l){null!=p_l&&(this.item.isShowQuaEft=!1,this.item.setItemData(p_l,ItemBoxDefine.MODULE_ITEM),this.item.nameTxt.visible=!1,this.nameTxt.visible=!1,(new e.ItemBox).isUseGlow=!0)},enumerable:!0,configurable:!0}),b_s);function b_s(){return p_l.call(this)||this}e.Item=p_g}(UI=UI||{}),function(e){var p_l,p_g,b_s,d_u=(p_g=ui.window.itemBoxUI,__extends(b_e,p_g),b_e.prototype.destroy=function(e){this.icon&&this.icon.texture&&this.icon.texture.url&&Laya.loader.clearTextureRes(this.icon.texture.url),this.clearQualityEffect(),p_g.prototype.destroy.call(this,e)},Object.defineProperty(b_e.prototype,"isUseGlow",{get:function(){return this._isUseGlow},set:function(e){if(e!==this._isUseGlow){var p_l=(this._isUseGlow=e)?14:-14;this.height+=p_l;for(var p_g=0;p_g<this.numChildren;++p_g){var b_s=this.getChildAt(p_g);"number"==typeof b_s.y&&(b_s.y+=p_l)}}},enumerable:!0,configurable:!0}),Object.defineProperty(b_e.prototype,"isShowRightTick",{get:function(){return this._isShowRightTick},set:function(e){this._isShowRightTick=e,this.updateRightTickImg()},enumerable:!0,configurable:!0}),b_e.prototype.updateRightTickImg=function(){var e=this.isShowRightTick&&(!this.numTxt.visible||""==this.numTxt.text);this._isNotNum&&(e=this._isShowRightTick),this.rightTickImg.visible=e},Object.defineProperty(b_e.prototype,"isNotNum",{set:function(e){this._isNotNum=e},enumerable:!0,configurable:!0}),b_e.prototype.onRemove=function(e){this.bg.hasListener(Laya.Event.CLICK)&&this.bg.off(Laya.Event.CLICK,this,this.onClick)},b_e.prototype.startCoolCD=function(e,p_l){this._coolCD||(this._coolCD=new d_w(this.icon.width,this.icon.height),this.icon.parent.addChild(this._coolCD),this._coolCD.x=this.icon.x,this._coolCD.y=this.icon.y,this._coolCD.on("itemBox_cd_complete",this,this.cdComplete)),this._coolCD.startCD(e,p_l)},b_e.prototype.setIcon=function(e){if(""!=e){this._iconUrl=Laya.URL.formatURL(e),this.icon.visible=!0;var p_l=Laya.loader.getRes(e);p_l?(p_l.url=this._iconUrl,this.loadComplete(p_l)):(this.icon.scaleX=this.icon.scaleY=1,Laya.loader.load(e,Laya.Handler.create(this,this.loadComplete),null,Laya.Loader.IMAGE,3))}else this.icon.visible=!1},b_e.prototype.checkItemCD=function(e,p_l){if(void 0===p_l&&(p_l=!1),p_l)this.removeCoolCD();else if(e&&0<e.remainTime){if(e.cdExceed)return void this.removeCoolCD();this.startCoolCD(e.runTime,e.cdDuration)}else if(e&&e.commonCDRuning){var p_g=e.getCommonCD();this.startCoolCD(p_g.runTime,p_g.cdDuration)}else this.removeCoolCD()},b_e.prototype.setQuality=function(e){this.bg.index=e-1,this.isShowQuaEft?(this._quaEft=Resource.ResManager.getQualityEft(e,this._quaEft),this._quaEft&&(this._quaEft.index=0,this._quaEft.play(),null===this._quaEft.parent&&this.addChild(this._quaEft),this._quaEft.on(Laya.Event.LOADED,this,this.resetEffectPos))):this.clearQualityEffect()},b_e.prototype.getShowName=function(){return Uck(this)},b_e.prototype.onClick=function(e){Ojo(e,this)},b_e.prototype.resetEffectPos=function(){if(this._quaEft){this._quaEft.off(Laya.Event.LOADED,this,this.resetEffectPos);var e=0===this.bg.width?102:this.bg.width,p_l=0===this.bg.height?102:this.bg.height;this._quaEft.x=this.bg.x+(e-this._quaEft.width>>1),this._quaEft.y=this.bg.y+(p_l-this._quaEft.height>>1),this._quaEft.play()}},b_e.prototype.setCount=function(e,p_l,p_g){void 0===p_l&&(p_l="x"),void 0===p_g&&(p_g=!1);var b_s=b_p.calsulate(e);this.alwaysShowNum?this.setNumTxt(b_s):!this.isShowNum||!p_g&&e<=1?this.setNumTxt(""):this.setNumTxt(p_l+b_s)},b_e.prototype.setName=function(e,p_l,p_g){void 0===p_l&&(p_l="#485260"),void 0===p_g&&(p_g=!0),this.nameTxt.parent||this.addChild(this.nameTxt),this.nameTxt.bold=p_g,this.nameTxt.visible=!0,this.nameTxt.color=p_l,this.nameTxt.text=e},b_e.prototype.openTip=function(){if(this._sourType==ItemBoxDefine.BAG_INFO&&this._itemData){var p_l=this._itemData;if(p_l&&0<p_l.id){var p_g=Config.item_consumeable[p_l.id];if(p_g)1===p_g.subclass?e.TalismanItemPanel.open(p_l):p_l.uuid&&2===p_g.subclass?(e.TalismanItemUseSuccPanel.itemId=p_l.id,e.ItemConsumTipsPanel.open(p_l,-1)):3===p_g.subclass?p_g.func&&!BlackKingModel.instance.Actived(p_g.func[0][0])?e.WindowClass.openWin(p_g.func[0][1]):e.ItemConsumTipsPanel.open(p_l,-1):4===p_g.subclass?e.AlienBeastItemPanel.open(p_l):5===p_g.subclass?(e.BeastItemUseSuccPanel.itemId=p_l.id,e.ItemConsumTipsPanel.open(p_l,-1)):p_l.uuid?e.ItemConsumTipsPanel.open(p_l):e.ItemTipsPanel.open(p_l);else if(Config.item_equipment[p_l.id]){var b_s=Config.item_equipment[p_l.id].subclass;4==b_s?e.TalisEquipTipsPanel.open(p_l):5==b_s?e.GodEquipTipsPanel.open(p_l):e.EquipTipsPanel.open(p_l)}else e.ItemTipsPanel.open(p_l)}}else if(this._sourType==ItemBoxDefine.BAG_INFO_TEMP&&this._itemData)LED.event(l_r.CHAT_ITEM_SHOW,this._itemData);else if(this._sourType==ItemBoxDefine.MODULE_ITEM){var d_u=this._itemData;d_u&&0<d_u.id&&(Config.item_equipment[d_u.id]?e.EquipTipsPanel.open(d_u):e.ItemTipsPanel.open(d_u))}else if(this._sourType==ItemBoxDefine.SKILL_CONFIG)(b_e=this._itemData)&&0<b_e.id&&e.SkillTipsPanel.open(b_e);else if(this._sourType==ItemBoxDefine.SKILL_USE){var b_e;(b_e=this._itemData)&&0<b_e.id&&Engine2d.Hero.local.releaseSkill(b_e.id)}},b_e.prototype.clearQualityEffect=function(){this._quaEft&&(this._quaEft.removeSelf(),this._quaEft.dispose()),this._quaEft=null},b_e.prototype.tweenComplete=function(){this._upNumLab&&(this._upNumLab.removeSelf(),this._upNumLab.destroy(),this._upNumLab=null)},b_e.prototype.loadComplete=function(e){if(e&&this.icon){if(this._iconUrl!=e.url)return;this.icon.texture=e;var p_l=this._itemData;this.icon.visible=!0,p_l&&this.isTalisEquip()?(this.icon.scaleX=90/e.width,this.icon.scaleY=90/e.height):this.icon.scaleX=this.icon.scaleY=1,this._iconUrl=null}},b_e.prototype.setGray=function(e){GPlatform.isH5?(this.bg.gray=e,this.iconBox.gray=e):(GPlatform.isQQMini||GPlatform.isWxMini)&&(this.shade.visible=e)},b_e.prototype.setItemData=function(e,p_l,p_g){void 0===p_l&&(p_l=2),void 0===p_g&&(p_g=!0),this._itemData=e,this._sourType=p_l,this.icon.visible=this.nameTxt.visible=!1,this.tickImage.visible=this.isShowTick,this.setGray(!1);var b_s="x",d_u=!1,b_e=1,d_m=0,d_w="";if(p_l==ItemBoxDefine.BAG_INFO||p_l==ItemBoxDefine.BAG_INFO_TEMP){var f_t=e;f_t&&0<f_t.id?(this.icon.visible=!0,d_m=f_t.amount,(d_h=Config.CItem(f_t.id))&&(d_h.icon&&""!=d_h.icon&&(d_w=Resource.ResUrl.getIconUrl(d_h.icon)),b_e=d_h.quality),this.setBagItemName(f_t.id,p_l)):(this.icon.visible=!0,d_m=0,d_w="",this.setBagItemName(0,p_l)),this.isRunCD&&this.checkItemCD(f_t)}else if(p_l==ItemBoxDefine.SKILL_CONFIG||p_l==ItemBoxDefine.SKILL_USE){if(b_s="",e){d_u=!0;var v_z=void 0;Config.skill_skill[e.id]?(v_z=SkillModel.instance.getSkillVo(e.id),this.setGray(!v_z),this.tickImage.visible=SkillModel.instance.isDazhaoActive(e.id)):(v_z=SkillModel.instance.getPassiveVo(e.id))||this.setGray(!0),this.isShowName?this.setName(e.name,"#66758a"):this.setName("","#66758a"),""!=e.icon&&(d_w=Resource.ResUrl.getIconUrl(e.icon)),d_m=v_z?v_z.level:1,this.isRunCD&&this.checkItemCD(v_z,!v_z)}}else if(p_l==ItemBoxDefine.MODULE_ITEM){var d_h,r_t=e;r_t&&0<r_t.id?(this.icon.visible=!0,d_m=r_t.amount,(d_h=Config.CItem(r_t.id))&&(d_h.icon&&""!=d_h.icon&&(d_w=Resource.ResUrl.getIconUrl(d_h.icon)),b_e=d_h.quality),this.setBagItemName(r_t.id,p_l)):(this.icon.visible=!1,d_m=0,d_w="",this.setBagItemName(0,p_l))}this.setIcon(d_w),this.setCount(d_m,b_s,d_u),this.updateRightTickImg(),this.setQuality(b_e),p_g?this.bg.on(Laya.Event.CLICK,this,this.onClick):this.bg.hasListener(Laya.Event.CLICK)&&this.bg.off(Laya.Event.CLICK,this,this.onClick)},b_e.prototype.getQualityEffect=function(){return Cbs(this)},b_e.prototype.setBagItemName=function(e,p_l){var p_g="";if(this.isShowName){var b_s=Config.item_equipment[e];if(b_s&&p_l==ItemBoxDefine.BAG_INFO){if(p_g="Lv."+b_s.level,b_s.stateLevel){var d_u=Config.state_state[b_s.stateLevel];d_u&&(p_g=1<b_s.level?d_u.desc+"Lv."+b_s.level:d_u.desc)}}else{var b_e=Config.CItem(e);b_e&&""!=b_e.name&&(p_g=b_e.name)}}this.setName(p_g)},b_e.prototype.isTalisEquip=function(){return Qvx(this,Config)},b_e.prototype.setNumTxt=function(e,p_l){void 0===p_l&&(p_l=1001),this.numTxt.text=e,this.numTxt.color=Config.color[p_l].color},b_e.prototype.playNumMoveEft=function(e){if(e){this._upNumLab||(this._upNumLab=new Laya.Label,this._upNumLab.font=b_p.config.font,this._upNumLab.fontSize=35,this._upNumLab.width=120,this._upNumLab.height=35,this._upNumLab.align="center",this._upNumLab.color="#099c2c",this._upNumLab.bold=!0,this._upNumLab.stroke=2,this._upNumLab.strokeColor="#000000"),this._upNumLab.text="+"+e,this._upNumLab.parent||(this._upNumLab.x=this.width-this._upNumLab.width>>1,Laya.stage.addChild(this._upNumLab));var p_l=this.localToGlobal(new Laya.Point);this._upNumLab.x=p_l.x+(this.width-this._upNumLab.width)/2,this._upNumLab.y=p_l.y+30,this._upNumLab.alpha=1,Laya.Tween.to(this._upNumLab,{j_l:this._upNumLab.y-80,alpha:0},500,null,Laya.Handler.create(this,this.tweenComplete),500,!0,!0)}},b_e.prototype.cdComplete=function(){Upf(this)},b_e.prototype.removeCoolCD=function(){this._coolCD&&(this._coolCD.destoryAll(),this._coolCD.parent&&this.removeChild(this._coolCD),this._coolCD=null)},b_e.prototype.isGray=function(){return GPlatform.isH5?this.bg.gray:!(!GPlatform.isQQMini&&!GPlatform.isWxMini)&&this.shade.visible},Object.defineProperty(b_e.prototype,"isShowSelect",{get:function(){return this._isShowSelect},set:function(e){this._isShowSelect=e,this.checkSelect.visible=e},enumerable:!0,configurable:!0}),Object.defineProperty(b_e.prototype,"isSelect",{get:function(){return this.isShowSelect?this.checkSelect.selected:this.isShowRightTick},enumerable:!0,configurable:!0}),Object.defineProperty(b_e.prototype,"setClickSelect",{set:function(e){this.checkSelect.mouseEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(b_e.prototype,"isShowBg",{set:function(e){this.bg.visible=e},enumerable:!0,configurable:!0}),b_e.prototype.setBgAlpha=function(e){void 0===e&&(e=0),this.bg.alpha=e},b_e);function b_e(){var e=p_g.call(this)||this;return e._isUseGlow=!1,e.isShowName=!0,e.isShowNum=!0,e.alwaysShowNum=!1,e.isShowTick=!1,e.isRunCD=!0,e.isShowQuaEft=!0,e._isShowRightTick=!1,e._isShowSelect=!1,e._isNotNum=!1,e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.ItemBox=d_u,(b_s=p_l=e.CoolDownMCExShape||(e.CoolDownMCExShape={}))[b_s.Rect=1]="Rect",b_s[b_s.Circle=2]="Circle",b_s[b_s.pie=3]="pie";var d_m,d_w=(d_m=Laya.Sprite,__extends(f_t,d_m),f_t.prototype.updateView=function(){if(this._shapState===p_l.pie){this.graphics.clear();var e=this._mySize.x/2;this.graphics.drawPie(e,e,5+e,this._startAndEndAngle.x,this._startAndEndAngle.y,"#434c56")}},f_t.prototype.startCD=function(e,p_l,p_g,b_s){return void 0===p_g&&(p_g=100),void 0===b_s&&(b_s=0),!(p_l<e||(this._runTime=e,this._maxTime=p_l,this._fixNumber=b_s,this._frameSec=p_g,this.updateLabel(),Laya.timer.loop(p_g,this,this.timeCD),0))},f_t.prototype.updateLabel=function(){var e=(this._maxTime-this._runTime)/1e3,p_l=e.toFixed(this._fixNumber);this._timeTxt.text=p_l+"s",this._startAndEndAngle.x=270-e/(this._maxTime/1e3)*360,this.updateView()},f_t.prototype.timeCD=function(){return Omg(this)},f_t.prototype.destoryAll=function(){Qhe(Laya,this)},f_t);function f_t(e,p_g,b_s,d_u,b_e){void 0===b_s&&(b_s=p_l.Rect),void 0===d_u&&(d_u=-90),void 0===b_e&&(b_e=270);var d_w=d_m.call(this)||this;return d_w._fixNumber=1,d_w._frameSec=100,d_w.graphics.drawCircle,b_s===p_l.Rect?d_w.graphics.drawRect(0,0,e,p_g,"#434c56"):b_s===p_l.Circle?d_w.graphics.drawCircle(e/2,e/2,e/2,"#434c56"):b_s===p_l.pie&&d_w.graphics.drawPie(e/2,e/2,e/2,d_u,b_e,"#434c56"),d_w._shapState=b_s,d_w.size(e,p_g),d_w._mySize=new Laya.Point(e,p_g),d_w._startAndEndAngle=new Laya.Point(d_u,b_e),d_w._timeTxt=new Laya.Label,d_w._timeTxt.width=e,d_w._timeTxt.height=24,d_w._timeTxt.align="center",d_w._timeTxt.color="#ffffff",d_w._timeTxt.font=b_p.config.font,d_w._timeTxt.fontSize=b_p.config.fontSize,d_w.addChild(d_w._timeTxt),d_w._timeTxt.pos(0,(d_w.height-d_w._timeTxt.height)/2),d_w.alpha=.8,d_w}e.CoolDownMCEx=d_w;var v_z,d_h=(v_z=Laya.Sprite,__extends(r_t,v_z),r_t.prototype.startCD=function(e,p_l){return Uan(e,p_l,this,Laya)},r_t.prototype.timeCD=function(){return Uyi(this)},r_t.prototype.drawPie=function(){Enf(this)},r_t.prototype.destoryAll=function(){Laya.timer.clear(this,this.timeCD),this._sprite_gra&&(this._sprite_gra.graphics.clear(),this._sprite_gra.destroy()),this.graphics.clear(),this._sprite_gra=null,this.parent&&this.parent.removeChild(this)},r_t);function r_t(e,p_l,p_g){var b_s=v_z.call(this)||this;return b_s.graphics.drawRect(0,0,p_l,p_g,"#FF0000"),b_s.size(p_l,p_g),b_s._sprite_gra=new Laya.Sprite,b_s._sprite_gra.alpha=.7,b_s.mask=b_s._sprite_gra,b_s}e.CoolDownMC=d_h}(UI=UI||{}),function(e){e[e.BAG_INFO=1]="BAG_INFO",e[e.MODULE_ITEM=2]="MODULE_ITEM",e[e.SKILL_VO=3]="SKILL_VO",e[e.SKILL_CONFIG=4]="SKILL_CONFIG",e[e.SHOP_VO=5]="SHOP_VO",e[e.SKILL_USE=6]="SKILL_USE",e[e.BAG_INFO_TEMP=7]="BAG_INFO_TEMP"}(ItemBoxDefine=ItemBoxDefine||{}),function(e){var p_l,p_g=(p_l=ui.window.itemPvSkillUI,__extends(b_s,p_l),Object.defineProperty(b_s.prototype,"skillId",{get:function(){return this._skillId},enumerable:!0,configurable:!0}),Object.defineProperty(b_s.prototype,"skillTipType",{get:function(){return this._skillTipType},enumerable:!0,configurable:!0}),b_s.prototype.updateSkillUI=function(e,p_l,p_g,b_s){void 0===p_g&&(p_g=null),void 0===b_s&&(b_s=!1);var d_u=SkillModel.instance.getConfigSkillTypeByPvType(p_l)[e];this.icon.skin=Resource.ResUrl.getIconUrl(d_u.icon),this._isTip=b_s,this._skillId=e,this._skillTipType=p_l,this._voDate=p_g,this.onBingTip(),this.isPointRed();var b_e=SkillModel.instance.getPassiveVoById(Math.floor(this._skillId/1e3),this._skillTipType),d_m=0;b_e&&(d_m=b_e.level);var d_w=0;0<d_m&&(d_w=MirrorSelfModel.ins.addSKillLVByEquipId(p_g.id)),this._nowLevel=d_m,this.skillLevel.text="Lv."+(d_m+d_w)+"  "+d_u.name,this.shade.visible=!SkillModel.instance.checkActive(Math.floor(e/1e3),p_l),LED.on(l_r.SKILL_INFO_UPDATE,this,this.updateActivate)},b_s.prototype.updateActivate=function(){var e=0,p_l=SkillModel.instance.getPassiveVoById(Math.floor(this._skillId/1e3),this._skillTipType);p_l?(0===this._nowLevel&&p_l.level===this._nowLevel+1&&(this.activateClip.on(Laya.Event.COMPLETE,this,this.stopActivateClicp),this.activateClip.visible=!0,this.activateClip.play(!1)),e=p_l.level):this.stopActivateClicp(),this.skillLevel.text="Lv."+e,this.shade.visible=!SkillModel.instance.checkActive(Math.floor(this._skillId/1e3),this._skillTipType),this.isPointRed()},b_s.prototype.isPointRed=function(){var e,p_l=SkillModel.instance.getPassiveVoById(Math.floor(this._skillId/1e3),this._skillTipType);e=p_l?p_l.id+p_l.level:SkillModel.instance.countMarrySkillId(Math.floor(this._skillId/1e3),1);var p_g=SkillModel.instance.canOpenPvSkill(e,this._voDate,this._skillTipType,!1);this.rp.visible=p_g},b_s.prototype.onAdded=function(){Yxv(this)},b_s.prototype.onTipClick=function(){Yga(e,this)},b_s.prototype.stopActivateClicp=function(){Qox(this,Laya)},b_s.prototype.onBingTip=function(){this._isTip?this.on(Laya.Event.CLICK,this,this.onTipClick):this.off(Laya.Event.CLICK,this,this.onTipClick)},b_s.prototype.onRemove=function(){Kan(this,Laya,LED,l_r)},b_s);function b_s(){var e=p_l.call(this)||this;return e._isTip=!1,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.ItemPvSkill=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.main.popupMenuUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Qce(this,Laya)},b_s.prototype.onItemSelect=function(e){-1!=e&&(console.log("  select "+e),null!=this.handlers&&null!=this.handlers[e]&&this.handlers[e].run(),b_s.close())},b_s.prototype.delayAddListener=function(){Oym(Laya,this)},b_s.open=function(e,p_l){null==b_s.instance&&(b_s.instance=new b_s),null==b_s.instance.parent&&Laya.stage.addChild(b_s.instance),b_s.instance.updateData(e,p_l)},b_s.prototype.onRemove=function(){Qlb(Laya,this)},b_s.prototype.onItemRender=function(e,p_l){Gho(e,p_l)},b_s.prototype.onStageClick=function(e){e&&e.target==this||this.contains(e.target)||b_s.close()},b_s.prototype.updateData=function(e,p_l){var p_g=e.length;this.bg.height=50*p_g+50,this.list.height=50*p_g,this.list.array=e,this.handlers=p_l;var b_s=Laya.stage.mouseX,d_u=Laya.stage.mouseY;this.pos(b_s<0?0:b_s+this.bg.width>Stage.width?Stage.width-this.bg.width:b_s,d_u<0?0:d_u+this.bg.height>Stage.height?Stage.height-this.bg.height:d_u)},b_s.close=function(){null!=b_s.instance&&Laya.stage.removeChild(b_s.instance)},b_s);function b_s(){var e=p_l.call(this)||this;return e.mouseEnabled=!0,e.list.selectEnable=!0,e.list.selectHandler=Laya.Handler.create(e,e.onItemSelect,null,!1),e.list.renderHandler=Laya.Handler.create(e,e.onItemRender,null,!1),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.PopupMenu=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.main.progressUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Qxm(this,Stage)},b_s.prototype.onRemove=function(){Gjx(Laya,this)},b_s.setCountDownTime=function(e,p_l,p_g,d_u,b_e){void 0===p_g&&(p_g=""),void 0===d_u&&(d_u=null),void 0===b_e&&(b_e=!1),this.open(),b_s.instance.setCountDownTime(e,p_l,p_g,d_u,b_e)},b_s.prototype.reset=function(){Ipj(this)},b_s.open=function(){null==b_s.instance&&(b_s.instance=new b_s),null==b_s.instance.parent&&UIM.instance.addToBottomLayer(b_s.instance)},b_s.prototype.setCountDownTime=function(e,p_l,p_g,b_s,d_u){void 0===p_g&&(p_g=""),void 0===b_s&&(b_s=null),void 0===d_u&&(d_u=!1),this._callBack=b_s,this._isRight=d_u,this._runTime=e,this._maxTime=p_l,this.valueTxt.text=p_g,this.setProValue(!0),e<p_l&&Laya.timer.loop(30,this,this.setProValue)},b_s.prototype.setProValue=function(e){if(void 0===e&&(e=!1),e||(this._runTime+=30),this._runTime>=this._maxTime)return Laya.timer.clear(this,this.setProValue),b_s.close(),this.reset(),void(null!==this._callBack&&this._callBack.call(null));var p_l=this._isRight?this._maxTime-this._runTime:this._runTime;this.proBar.value=p_l/this._maxTime},b_s.prototype.setContent=function(e,p_l){void 0===p_l&&(p_l=""),Laya.timer.clear(this,this.setProValue),this.reset(),this.proBar.value=e,this.valueTxt.text=p_l},b_s.setContent=function(e,p_l){void 0===p_l&&(p_l=""),this.open(),b_s.instance.setContent(e,p_l)},b_s.close=function(){null!=b_s.instance&&b_s.instance.removeSelf()},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.ProgressPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.propBoxUI,__extends(b_s,p_l),b_s.prototype.updatePropItem=function(e,p_l){Ckf(e,p_l,this,d_v)},b_s);function b_s(){return p_l.call(this)||this}e.PropBox=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.comPropShowUI,__extends(d_u,p_l),d_u.open=function(e,p_l){UIM.open(d_u,null,{propArr:e,titleArr:p_l},!1,!1,!0,!0)},d_u.prototype.onAdded=function(){Gvj(this,Laya)},d_u.close=function(){Oek(UIM,d_u)},d_u.prototype.updateView=function(e,p_l){var p_g=e.getChildByName("title"),b_s=e.getChildByName("listProp"),d_u=e.dataSource;if(d_u){var b_e=this.dataSource.titleArr;b_e&&b_e.length>p_l&&(p_g.text=b_e[p_l]),b_s.array=this.convertToString(d_u)}},d_u.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":d_u.close()}},d_u.prototype.onRemoved=function(){Oxa(this,Laya)},d_u.prototype.convertToString=function(e){var p_l=[];for(var p_g in e){var b_s=e[p_g].desc+""+Math.floor(e[p_g].value);p_l.push(b_s)}return p_l},d_u);function d_u(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.propList.renderHandler=p_g.create(e,e.updateView,null,!1),z_j.setListScroll(e.propList),e}e.PropShowPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.main.loadingUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Qwj(this,Laya)},b_s.prototype.onRemove=function(){Scf(UIM,this,Laya,LED,l_r)},b_s.prototype.delayPlay=function(){Spl(Laya,this)},b_s.prototype.changeAdapt=function(){if(GPlatform.needAdapt){var e=GPlatform.stageHeight-this.topSpace;this.height=e}},b_s.prototype.onComplete=function(){Clz(Laya,this)},b_s.prototype.hidePanel=function(){},b_s.prototype.setContent=function(e){},b_s.prototype.setProgress=function(e){},b_s.prototype.resetSite=function(e){void 0===e&&(e=null),this.x=Stage.width-this.width>>1,this.y=this.topSpace},Object.defineProperty(b_s.prototype,"topSpace",{get:function(){return GPlatform.concaveOffsetY},enumerable:!0,configurable:!0}),b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.door_move.addLabel("complete",e.door_move.count-1),e.changeAdapt(),e}e.SceneLoadingPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.main.uiLoadingUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Caw(this)},b_s.prototype.onRemove=function(){this.clip_effect&&this.clip_effect.stop()},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.UILoadingPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.main.warn_alertUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Cfc(this,Laya)},b_s.prototype.onRemove=function(){},b_s.prototype.setContent=function(e){Knp(e,this)},b_s.open=function(e,p_l){void 0===p_l&&(p_l=!1),z_j.isLoadJson("main/warn_alert",this,this.open,[e,p_l])&&(null==b_s.instance&&(b_s.instance=new b_s),b_s.instance.parent||Laya.stage.addChild(b_s.instance),b_s.instance.resetSite(),b_s.instance.setContent(e))},b_s.prototype.onMouseDown=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close()}},b_s.prototype.resetSite=function(e){void 0===e&&(e=null),this.x=Stage.width-this.width>>1,this.y=Stage.height-this.height>>1},b_s.close=function(){null!=b_s.instance&&b_s.instance.removeSelf()},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.WarnPanel=p_g}(UI=UI||{});var l_r=function(e){function p_l(){return null!==e&&e.apply(this,arguments)||this}return __extends(p_l,e),p_l.OPEN_SUCC="OPEN_SUCC",p_l.SHOW_CREATEROLE="SHOW_CREATEROLE",p_l.LOGIN_SUCCEED="LOGIN_SUCCEED",p_l.LOCAL_PATH_START="LOCAL_PATH_START",p_l.LOCAL_MOVE_END="LOCAL_MOVE_END",p_l.DUMMY_MOVE_END="DUMMY_MOVE_END",p_l.LOCAL_POSCHANGED="AE_LcPosChg",p_l.MAINACTOR_CREATED="MACTCRTD",p_l.ACTOR_ADDED="ACTADD",p_l.ACTOR_REMOVED="ACTRMV",p_l.ACTOR_DIE="ACTDIED",p_l.HERO_RELIVE="HERO_RELIVE",p_l.SELECTED_ACTOR_CHANGE="SELECTED_ACTOR_CHANGE",p_l.HERO_ATT_CHANGE="HERO_ATT_CHANGE",p_l.HERO_LEVEL_CHANGE="HERO_LEVEL_CHANGE",p_l.HERO_EXP_CHANGE="HERO_EXP_CHANGE",p_l.HERO_SKILL_EXP_CHANGE="HERO_SKILL_EXP_CHANGE",p_l.HERO_STATE_CHANGE="HERO_STATE_CHANGE",p_l.WALLET_CHANGE="WALLET_CHANGE",p_l.CHIELD_CHANGE="CHIELD_CHANGE",p_l.FIGHT_CHANGE="FIGHT_CHANGE",p_l.ACTOR_ACTION_END="ACTOR_ACTION_END",p_l.SKILL_BEGIN="SKILL_BEGIN",p_l.HERO_NAME_CHANGE="HERO_NAME_CHANGE",p_l.HERO_ICON_CHANGE="HERO_ICON_CHANGE",p_l.HERO_SEX_CHANGE="HERO_SEX_CHANGE",p_l.MONSTER_ADD="MONSTER_ADD",p_l.DROP_ADDED="DROP_ADDED",p_l.DROP_START_PICK="DROP_START_PICK",p_l.COLLECT_START_PICK="COLLECT_START_PICK",p_l.COLLECT_PICK_COMPLETE="COLLECT_PICK_COMPLETE",p_l.BUFF_ADD="BUFF_ADD",p_l.BUFF_REMOVE="BUFF_REMOVE",p_l.HUDUN_CHANGE="HUDUN_CHANGE",p_l.SCENE_LOAD_OVER="SCENE_LOAD_OVER",p_l.SCENE_CHANGE="SCENE_CHANGE",p_l.SCENE_CHANGED_SHOW_UI="SCENE_CHANGED_SHOW_UI",p_l.PLOTING_START="PLOTING_START",p_l.PLOTING_END="PLOTING_END",p_l.WIN_MODAL_CLICK="WIN_MODAL_CLICK",p_l.Map_ZOOM_COMPLETE="Map_ZOOM_COMPLETE",p_l.FB_STORY_ROOM_LIST="FB_STORY_ROOM_LIST",p_l.FB_WILD_BOSS_LIST="FB_WILD_BOSS_LIST",p_l.FB_STATE_BOSS_LIST="FB_STATE_BOSS_LIST",p_l.FB_HELP_TIMES_UPDATE="FB_HELP_TIMES_UPDATE",p_l.FB_ASSIST_TIMES_UPDATE="FB_ASSIST_TIMES_UPDATE",p_l.FB_WILDBOSS_TIMES_UPDATE="FB_WILDBOSS_TIMES_UPDATE",p_l.FB_DMG_RANK_UPDATE="FB_DMG_RANK_UPDATE",p_l.FB_SER_DMG_RANK_UPDATE="FB_SER_DMG_RANK_UPDATE",p_l.FB_SELF_DMG_RANK_UPDATE="FB_SELF_DMG_RANK_UPDATE",p_l.FB_BOSS_ID_UPDATE="FB_BOSS_ID_UPDATE",p_l.FB_TEAM_LIST_UPDATE="FB_TEAM_LIST_UPDATE",p_l.FB_PLR_LIST_UPDATE="FB_PLR_LIST_UPDATE",p_l.FB_TEAM_UPDATE="FB_TEAM_UPDATE",p_l.FB_RANK_FB_UPDATE="FB_RANK_FB_UPDATE",p_l.FB_PAGODA_SWEEP_UPDATE="FB_PAGODA_SWEEP_UPDATE",p_l.FB_STATEBOSS_DMG_RANK_UPDATE="FB_STATEBOSS_DMG_RANK_UPDATE",p_l.FB_INFO_UPDATE="FB_INFO_UPDATE",p_l.FB_SET_ATTACK_TARGET_TYPE="FB_SET_ATTACK_TARGET_TYPE",p_l.FB_RED_POINT_UPDATE="FB_RED_POINT_UPDATE",p_l.FB_STATE_START_DMG="FB_STATE_START_DMG",p_l.FB_RESULT="FB_RESULT",p_l.FB_NEXTFB="FB_NEXTFB",p_l.FB_PK_LIST="FB_PK_LIST",p_l.FB_HURT_REWARD_STATUS="FB_HURT_REWARD_STATUS",p_l.FB_WIN="FB_WIN",p_l.FB_LOSE="FB_LOSE",p_l.QUIETFB="QUIETFB",p_l.ALREAD_GET_AWARD="ALREAD_GET_AWARD",p_l.QUIETPAGODA="QUIETPAGODA",p_l.WAILBOSS_REMiND_CHANG_RED="WAILBOSS_REMiND_CHANG_RED",p_l.FB_STATE_STAGE="FB_STATE_STAGE",p_l.GO_DIRECTLYFB="GO_DIRECTLYFB",p_l.ONE_KEY_PASS_LEVEL_REWARD="ONE_KEY_PASS_LEVEL_REWARD",p_l.REFRESH_FB_LEVEL="REFRESH_FB_LEVEL",p_l.UPDATE_PAGODA_SWEEP="UPDATE_PAGODA_SWEEP",p_l.ONEKEY_PAGODA_PASS="ONEKEY_PAGODA_PASS",p_l.ONEKEY_PAGODA_PASS_UPDATE_VIEW="ONEKEY_PAGODA_PASS_UPDATE_VIEW",p_l.CROSS_BOSS_INFO="CROSS_BOSS_INFO",p_l.CROSS_BOSS_KillED="CROSS_BOSS_KillED",p_l.CROSS_BOSS_OWENER="CROSS_BOSS_OWENER",p_l.CROSS_BOSS_REf_TIMES="CROSS_BOSS_REf_TIMES",p_l.CROSS_BOSS_TIMEBOSS_OPEN="CROSS_BOSS_TIMEBOSS_OPEN",p_l.FB_GRENEBOSS_REWARD_INFO="FB_GRENEBOSS_REWARD_INFO",p_l.FB_GRENEBOSS_REWARD="FB_GRENEBOSS_REWARD",p_l.FB_WILDBOSS_INSPIRE="FB_WILDBOSS_INSPIRE",p_l.CELEAR_SKILL_CD="CELEAR_SKILL_CD",p_l.SKILL_LIST_UPDATE="SKILL_LIST_UPDATE",p_l.SKILL_PRIO_CHANGE="SKILL_PRIO_CHANGE",p_l.SKILL_DAZHAO_CHANGE="SKILL_DAZHAO_CHANGE",p_l.SKILL_CD_UPDATE="SKILL_CD_UPDATE",p_l.SKILL_INFO_UPDATE="SKILL_INFO_UPDATE",p_l.SKILL_RELEASE_OVER="SKILL_RELEASE_OVER",p_l.HANG_UP_START="HANG_UP_START",p_l.HANG_UP_STOP="HANG_UP_STOP",p_l.CLICK_ACTOR="CLICK_ACTOR",p_l.SKILL_HIT="SKILL_HIT",p_l.STATE_INFO_UPDATE="STATE_INFO_UPDATE",p_l.STATE_TIMESLIST_CHANGE="STATE_TIMESLIST_CHANGE",p_l.STATE_LV_UP="STATE_LV_CHANGE",p_l.STATE_SUB_LV_UP="STATE_SUB_LV_UP",p_l.STATE_LV_UP_EFT_COMPLETE="STATE_LV_UP_EFF_COMPLETE",p_l.STATE_LV_REWARD_PANLE_SHOW="STATE_LV_REWARD_PANLE_SHOW",p_l.DRAGONS_INFO_UPDATE="DRAGONS_INFO_UPDATE",p_l.DRAGON_ONE_INFO_UPDATE="DRAGON_ONE_INFO_UPDATE",p_l.DRAGON_STAR_UP="DRAGON_STAR_UP",p_l.DRAGON_CHANGE_EFFECTE="DRAGON_CHANGE_EFFECTE",p_l.ITEM_INFO_UPDATE="ITEM_INFO_UPDATE",p_l.ITEM_ADD="ITEM_ADD",p_l.ITEM_REMOVE="ITEM_REMOVE",p_l.ITEM_AMOUNT_CHANGE="ITEM_AMOUNT_CHANGE",p_l.ITEM_SORT_CHANGE="ITEM_SORT_CHANGE",p_l.ITEM_CD_UPDATE="ITEM_CD_UPDATE",p_l.ITEM_USE_DEL="ITEM_USE_DEL",p_l.ITEM_SWAP="ITEM_SWAP",p_l.EQUIP_SWAP_TIP="EQUIP_SWAP_TIP",p_l.USECONSUMABLE="USECONSUMABLE",p_l.CHECK_BAG_IS_UPDATE="CHECK_BAG_IS_UPDATE",p_l.SUCCEECOMPOSE="SUCCEECOMPOSE",p_l.TIPS_USE_ITEM="TIPS_USE_ITEM",p_l.GET_CONSUMABLE_USE_INFO="GET_CONSUMABLE_USE_INFO",p_l.ROLE_REPOINT_UPDATE="ROLE_REPOINT_UPDATE",p_l.ISSAMEITEM="ISSAMEITEM",p_l.EQUIPTTIPSINFO="EQUIPTTIPSINFO",p_l.CHAT_REC_LST_UPDATE="CHAT_REC_LST_UPDATE",p_l.CHAT_REC_ADD="CHAT_REC_ADD",p_l.CHAT_CROSS_OPEN="CHAT_CROSS_OPEN",p_l.CHAT_PRIVATE_PLR_UPDATE="CHAT_PRIVATE_PLR_UPDATE",p_l.CHAT_PRIVATE_PLR_REFRESH="CHAT_PRIVATE_PLR_REFRESH",p_l.CHAT_PRIVATE_REC_UPDATE="CHAT_PRIVATE_REC_UPDATE",p_l.CHAT_PRIVATE_REC_ADD="CHAT_PRIVATE_REC_ADD",p_l.CHAT_PRIVATE_REC_NEW="CHAT_PRIVATE_REC_NEW",p_l.CHAT_ITEM_SHOW="CHAT_ITEM_SHOW",p_l.TRANSMIT_PALACE="TRANSMIT_PALACE",p_l.CHAT_PLAYER_INFO="CHAT_PLAYER_INFO",p_l.UDATE_MY_SLIENCE_STATE="UDATE_MY_SLIENCE_STATE",p_l.UPDATE_SLIENCE_RECORD="UPDATE_SLIENCE_RECORD",p_l.FRIEND_FRIEND_LIST_UPDATE="FRIEND_FRIEND_LIST_UPDATE",p_l.FRIEND_HELP_LIST_UPDATE="FRIEND_HELP_LIST_UPDATE",p_l.FRIEND_RECOMMEND_LIST_UPDATE="FRIEND_RECOMMEND_LIST_UPDATE",p_l.FRIEND_REQUEST_LIST_UPDATE="FRIEND_REQUEST_LIST_UPDATE",p_l.FRIEND_BLACK_LIST_UPDATE="FRIEND_BLACK_LIST_UPDATE",p_l.FRIEND_HAVE_FRIEND_REQUEST="FRIEND_HAVE_FRIEND_REQUEST",p_l.UPDATA_FRIEND_GIFT="UPDATA_FRIEND_GIFT",p_l.FRIEND_UPDATE_REWARD="FRIEND_UPDATE_REWARD",p_l.UPDATE_PRIVATECHAT_VIEW="UPDATE_PRIVATECHAT_VIEW",p_l.OFFLINE_UPDATE="OFFLINE_UPDATE",p_l.DOUBLEHANG_INFO_UPDATE="DOUBLEHANG_INFO_UPDATE",p_l.DOUBLEHANG_FRIENDLIST_UPDATE="DOUBLEHANG_FRIENDLIST_UPDATE",p_l.DOUBLEHANG_INVITELIST_UPDATE="DOUBLEHANG_INVITELIST_UPDATE",p_l.DH_INFO_UPDATE="DH_INFO_UPDATE",p_l.DH_MORAAGREE_UPDATE="DH_MORAAGREE_UPDATE",p_l.DH_MORAINVITE_UPDATE="DH_MORAINVITE_UPDATE",p_l.DH_MORACDTIME_UPDATE="DH_MORACDTIME_UPDATE",p_l.DH_MORA_INFO="DH_MORA_INFO",p_l.DECOMPOSE_EQUIP_LIST_UPDATE="DECOMPOSE_EQUIP_LIST_UPDATE",p_l.DECOMPOSE_EQUIP_LIST_REFILL="DECOMPOSE_EQUIP_LIST_REFILL",p_l.ACHIEVEMENT_INFO_UPDATE="ACHIEVEMENT_INFO_UPDATE",p_l.STRENGTH_INFO_UPDATE="STRENGTH_INFO_UPDATE",p_l.STRENGTH_PARTITION_UPDATE="STRENGTH_PARTITION_UPDATE",p_l.STRENGTH_AUTO_UPDATE="STRENGTH_AUTO_UPDATE",p_l.RIDE_LIST_UPDATE="RIDE_LIST_UPDATE",p_l.RIDE_PER_UPDATE="RIDE_PER_UPDATE",p_l.RIDE_ON_CHANGE="RIDE_ON_CHANGE",p_l.RIDE_COMBINE_SUCC="RIDE_COMBINE_SUCC",p_l.RIDE_UPSTART_SUCC="RIDE_UPSTART_SUCC",p_l.MAIL_LIST_NEW="MAIL_LIST_NEW",p_l.MAIL_LIST_REFRESH="MAIL_LIST_REFRESH",p_l.TASK_INIT_INFO="TASK_INIT_INFO",p_l.TASK_ACCEPT="TASK_ACCEPT",p_l.TASK_COMPLETE="TASK_COMPLETE",p_l.TASK_PROGRESS_UPDATE="TASK_PROGRESS_UPDATE",p_l.SHOP_DATA_UPDATE="SHOP_DATA_UPDATE",p_l.TALISMAN_INFO_UPDATE="TALISMAN_INFO_UPDATE",p_l.TALISMAN_UP_UPDATE="TALISMAN_UP_UPDATE",p_l.TALISMAN_UP_CRIT="TALISMAN_UP_CRIT",p_l.TALISMAN_DEPLOY_UPDATE="TALISMAN_DEPLOY_UPDATE",p_l.TALISMAN_DEPLOY_UPDATE_SUCCESS="TALISMAN_DEPLOY_UPDATE_SUCCESS",p_l.TALISMAN_DEPLOY_UPDATE_FAIL="TALISMAN_DEPLOY_UPDATE_FAIL",p_l.TALISMAN_FIGHT_UPDATE="TALISMAN_FIGHT_UPDATE",p_l.TALISMAN_SPIRIT_UPDATE="TALISMAN_SPIRIT_UPDATE",p_l.TALISMAN_STOVE_REFINE="TALISMAN_STOVE_REFINE",p_l.TALISMAN_STOVESTOP_REFINE="TALISMAN_STOVESTOP_REFINE",p_l.TALISMAN_ATTR_UPDATE="TALISMAN_ATTR_UPDATE",p_l.TALISMAN_SUIT_UPDATE="TALISMAN_SUIT_UPDATE",p_l.TALISMAN_EQUIP_ACTIVE="TALISMAN_EQUIP_ACTIVE",p_l.TALISMAN_SOUL_ACTIVE="TALISMAN_SOUL_ACTIVE",p_l.TALISMAN_SOUL_UP_LEVEL="TALISMAN_SOUL_UP_LEVEL",p_l.TALISMAN_SOUL_UP_STAR="TALISMAN_SOUL_UP_STAR",p_l.DF_LV_CHANGE="DF_LV_CHANGE",p_l.KM_DATA_UPDATE=" KM_DATA_UPDATE",p_l.KM_LV_CHANGE="KM_LV_CHANGE",p_l.KM_Criti_EFFECTE="KM_Criti_EFFECTE",p_l.KM_RED_UPDATE="KM_RED_UPDATE",p_l.FACILITY_UPDATE="FACILITY_UPDATE",p_l.JBP_INFO_UPDATE="JBP_INFO_UPDATE",p_l.JBP_GETMONEY_UPDATE="JBP_GETMONEY_UPDATE",p_l.TREASYREBOX_INFO_UPDATE="TREASYREBOX_INFO_UPDATE",p_l.TALISMAN_IMG_UPDATE="TALISMAN_IMG_UPDATE",p_l.TALISMANS_LIST_UPDATE="TALISMANS_LIST_UPDATE",p_l.TASK_START_UPDATE="TASK_START_UPDATE",p_l.PET_INFO_UPDATE="PET_INFO_UPDATE",p_l.PET_GROWN_INFO_UPDATE="PET_GROWN_INFO_UPDATE",p_l.PET_SEARCH_INFO="PET_SEARCH_INFO",p_l.PET_MATCH_APPLY_INFOS="PET_MATCH_APPLY_INFOS",p_l.PET_SOUL_ELITE_CHANGE="PET_SOUL_ELITE_CHANGE",p_l.PET_REQUST_HISTORY="PET_REQUST_HISTORY",p_l.PET_EFT_PLAY="PET_EFT_PLAY",p_l.BANQUET_INFO_UPDATE="BANQUET_INFO_UPDATE",p_l.BANQUET_START_SUCCESS="BANQUET_START_SUCCESS",p_l.BANQUET_LST_UPDATE="BANQUET_LST_UPDATE",p_l.BANQUET_JOIN_SUCCESS="BANQUET_JOIN_SUCCESS",p_l.BANQUET_QUERY_RESULT="BANQUET_QUERY_RESULT",p_l.BANQUET_TIMES_UPDATE="BANQUET_TIMES_UPDATE",p_l.BANQUET_LIST_ITEM_SELECT="BANQUET_LIST_ITEM_SELECT",p_l.PVP_SCORE_POINT_UPDATE="PVP_SCORE_POINT_UPDATE",p_l.PVP_RECORD_UPDATE="PVP_RECORD_UPDATE",p_l.PVP_ATTACK_TS_CHANGE="PVP_ATTACK_TS_CHANGE",p_l.PVP_CHASE_KILL="PVP_CHASE_KILL",p_l.PVP_ROUND_INFO="PVP_ROUND_INFO",p_l.PVP_SHOP_INFO="PVP_SHOP_INFO",p_l.PVP_RANDOM_TS="PVP_RANDOM_TS",p_l.PVP_GLOBAL_RECORD_UPDATE="PVP_GLOBAL_RECORD_UPDATE",p_l.PVP_EXCHANGE_UPDATE="PVP_EXCHANGE_UPDATE",p_l.PVP_PRE_RANK="PVP_PRE_RANK",p_l.PVP_TALISMAN_SELECT="PVP_TALISMAN_SELECT",p_l.PVP_MATCH_UPDATE="PVP_MATCH_UPDATE",p_l.PVP_SEASON_RECORD="PVP_SEASON_RECORD",p_l.PVP_CROSS_STATE="PVP_CROSS_STATE",p_l.PVP_SEARCH_KILL="PVP_SEARCH_KILL",p_l.GUILD_REQUEST_UPDATE="GUILD_REQUEST_UPDATE",p_l.GUILD_LIST_UPDATE="GUILD_LIST_UPDATE",p_l.GUILD_INFO_UPDATE="GUILD_INFO_UPDATE",p_l.GUILD_FLAG_CHANGE="GUILD_FLAG_CHANGE",p_l.GUILD_MEMBER_UPDATE="GUILD_MEMBER_UPDATE",p_l.GUILD_CHECKIN_UPDATE="GUILD_CHECKIN_UPDATE",p_l.GUILD_EXCHANGE_UPDATE="GUILD_EXCHANGE_UPDATE",p_l.GUILD_AUCTION_LIST="GUILD_AUCTION_LIST",p_l.GUILD_AUCTION_HISTORY="GUILD_AUCTION_HISTORY",p_l.GUILD_AUCTION_REC="GUILD_AUCTION_REC",p_l.GUILD_AUCTION_BID="GUILD_AUCTION_BID",p_l.GUILD_AUCTION_BUY="GUILD_AUCTION_BUY",p_l.GUILD_BOSS_LIST="GUILD_BOSS_LIST",p_l.GUILD_BOSS_RANK="GUILD_BOSS_RANK",p_l.GUILD_HELP_INFO="GUILD_HELP_INFO",p_l.GUILD_HELP_LIST="GUILD_HELP_LIST",p_l.GUILD_HELP_MY_LIST="GUILD_HELP_MY_LIST",p_l.GUILD_TIP_UPDATE="GUILD_TIP_UPDATE",p_l.GUILD_REPOSITORY="GUILD_REPOSITORY",p_l.GUILD_REPOSITORY_RECORD="GUILD_REPOSITORY_RECORD",p_l.GUILD_REPOSITORY_SCORE="GUILD_REPOSITORY_SCORE",p_l.SIGNIN_INFO="SIGNIN_INFO",p_l.SIGNIN_SECCESS="SIGNIN_SECCESS",p_l.SIGNIN_TOTAL_REWARD_GETTING="SIGNIN_TOTAL_REWARD_GETTING",p_l.ALREADY_FIFTEEN_DAY="ALREADY_FIFTEEN_DAY",p_l.RECHARGE_VIP_INFO="RECHARGE_VIP_INFO",p_l.RECHARGE_VIPLV_CHANGE="RECHARGE_VIPLV_CHANGE",p_l.RECHARGE_VIPEXP_CHANGE="RECHARGE_VIPLV_CHANGE",p_l.MONTHCARD_BUY_INFO="MONTHCARD_BUY_INFO",p_l.RECHARGE_RECHARGESTATUS_INFO="RECHARGE_RECHARGESTATUS_INFO",p_l.UPDATE_VIP_INFO="UPDATE_VIP_INFO",p_l.UPDATE_VIPLV_INFO="UPDATE_VIPLV_INFO",p_l.RANK_UPDATE="RANK_UPDATE",p_l.RANK_WORSHIP_INFO="RANK_WORSHIP_INFO",p_l.RANK_WORSHIP_RESULT="RANK_WORSHIP_RESULT",p_l.KF_RANK_UPDATE="KF_RANK_UPDATE",p_l.ACTIVITY_BGA_INFO="ACTIVITY_BGA_INFO",p_l.ACTIVITY_BGA_SINGLE_INFO="ACTIVITY_BGA_SINGLE_INFO",p_l.ACTIVITY_C_INFO="ACTIVITY_C_INFO",p_l.ACTIVITY_DY_OPEN="ACTIVITY_DY_OPEN",p_l.ACTIVITY_DY_CLOSE="ACTIVITY_DY_CLOSE",p_l.ACTIVITY_BGA_TIMELIMIT="ACTIVITY_BGA_TIMELIMIT",p_l.ACTIVITY_BGA_OPENSVR="ACTIVITY_BGA_OPENSVR",p_l.ACTIVITY_HT_TIMELIMIT="ACTIVITY_HT_TIMELIMIT",p_l.ACTIVITY_CONFIG_UPDATE="ACTIVITY_CONFIG_UPDATE",p_l.ACTIVITY_FUNCOPEN_UPDATE="ACTIVITY_FUNCOPEN_UPDATE",p_l.ACTIVITY_BGA_FIRST_RECHARGE="ACTIVITY_BGA_FIRST_RECHARGE",p_l.ACTIVITY_BGA_DAILY_RECHARGE="ACTIVITY_BGA_DAILY_RECHARGE",p_l.ACTIVITY_BGA_CONSUME_RECHARGE="ACTIVITY_BGA_CONSUME_RECHARGE",p_l.ACTIVITY_BGA_SINGLE_RECHARGE="ACTIVITY_BGA_SINGLE_RECHARGE",p_l.ACTIVITY_BGA_ACUM_RECHARGE="ACTIVITY_BGA_SACUM_RECHARGE",p_l.ACTIVITY_BGA_RANK="ACTIVITY_BGA_RANK",p_l.ACTIVITY_BGA_SGSQ="ACTIVITY_BGA_SGSQ",p_l.ACTIVITY_LOTTERT_INFO="ACTIVITY_LOTTERT_INFO",p_l.ACTIVITY_LOTTERT_DRAW="ACTIVITY_LOTTERT_DRAW",p_l.ACTIVITY_LOTTERT_RECORD="ACTIVITY_LOTTERT_RECORD",p_l.ACTIVITY_LOTTERT_RANK="ACTIVITY_LOTTERT_RANK",p_l.ACTIVITY_PALYER_INFO="ACTIVITY_PALYER_INFO",p_l.ADD_ITEMS_DALAY_SHOW="ADD_ITEMS_DALAY_SHOW",p_l.SYSTEM_NOTICE_IFNO="SYSTEM_NOTICE_IFNO",p_l.SYSTEM_NOTICE_INIT="SYSTEM_NOTICE_INIT",p_l.SYSTEM_NOTICE_OPEN="SYSTEM_NOTICE_OPEN",p_l.MINE_LIST="MINE_LIST",p_l.MINE_DETAIL="MINE_DETAIL",p_l.MINE_ROLE_INFO="MINE_ROLE_DETAIL",p_l.MINE_RECORDS="MINE_RECORDS",p_l.MINE_FIGHT_RESULT="MINE_FIGHT_RESULT",p_l.MINE_GET_BOX="MINE_GET_BOX",p_l.MINE_EXCHANGE="MINE_EXCHANGE",p_l.MINE_MOVE="MINE_MOVE",p_l.MINE_TIP="MINE_TIP",p_l.MINE_EXCHANGE_UPDATE="MINE_EXCHANGE_UPDATE",p_l.MINE_ROBED_REMIND="MINE_ROBED_REMIND",p_l.ACTIVENESS_INFO="ACTIVENESS_INFO",p_l.ACTIVENESS_SINGLE_UPDATE="ACTIVENESS_SINGLE_UPDATE",p_l.ACTIVENESS_ISTWEEN_INFO="ACTIVENESS_ISTWEEN_INFO",p_l.ACTIVENESS_EXR_UPDATE="ACTIVENESS_EXR_UPDATE",p_l.SEVEN_INFO="SEVEN_INFO",p_l.SEVEN_GET_AWARD_RESULT="SEVEN_GET_AWARD_RESULT",p_l.END_SEVEN_AWARD="END_SEVEN_AWARD",p_l.TITLE_INFO_UPDATE="TITLE_INFO_UPDATE",p_l.LIMIT_ACTIVITY_INFO="LIMIT_ACTIVITY_INFO",p_l.RETURN_LIMIACTIVE_INFO="RETURN_LIMIACTIVE_INFO",p_l.PALACE_INFO="PALACE_INFO",p_l.PALACE_WORSHIP="PALACE_WORSHIP",p_l.UPDATE_PALAWORSHIP="UPDATE_PALAWORSHIP",p_l.FASHION_LIST="FASHION_LIST",p_l.FASHION_ACTIVITY="FASHION_ACTIVITY",p_l.FASHION_USE="FASHION_USE",p_l.FASHION_UPGRADE="FASHION_UPGRADE",p_l.FASHION_QINMIDU="FASHION_QINMIDU",p_l.MOONBOX_INFO="MOONBOX_INFO",p_l.MOONBOX_START_TASK="MOONBOX_START_TASK",p_l.MOONBOX_GET_TASK_REWARD="MOONBOX_GET_TASK_REWARD",p_l.MOONBOX_STOP_TAST="MOONBOX_STOP_TAST",p_l.BOSSCOME_INFO_UPDATE="BOSSCOME_INFO_UPDATE",p_l.BOSSCOME_CHALLENGELIST="BOSSCOME_CHALLENGELIST",p_l.BOSSCOME_PLAYERRANK="BOSSCOME_PLAYERRANK",p_l.BOSSCOME_GUILDRANK="BOSSCOME_GUILDRANK",p_l.BOSSCOME_KILLRECORD="BOSSCOME_KILLRECORD",p_l.BOSSCOME_ROB_INFO="BOSSCOME_ROB_INFO",p_l.BOSSCOME_CHALLENGERECORD="BOSSCOME_CHALLENGERECORD",p_l.BOSSCOME_BUY_TIMES="BOSSCOME_BUY_TIMES",p_l.BOSSCOME_INSPIRE_SUCCESS="BOSSCOME_INSPIRE_SUCCESS",p_l.REQUEST_ENEMY_INFO="REQUEST_ENEMY_INFO",p_l.ACTIVITY_BGA_INVITE_INFO="ACTIVITY_BGA_INVITE_INFO",p_l.WX_COLLECT="WX_COLLECT",p_l.SHARE_REWARD_UPDATE="SHARE_REWARD_UPDATE",p_l.SHARE="WANBA_SHARE",p_l.WANBA_COLLECT="WANBA_COLLECT",p_l.ACTIVITY_ZUHE_UPDATE="ACTIVITY_ZUHE_UPDATE",p_l.GET_ZUHE_AWARD="GET_ZUHE_AWARD",p_l.DELAYED_GET_AWARD="DELAYED_GET_AWARD",p_l.ACTIVITY_LIMIT_GIFT_UPDATE="ACTIVITY_LIMIT_GIFT_UPDATE",p_l.BLACKKING_INFO_UPDATE="BLACKKING_INFO_UPDATE",p_l.BLACK_COACHTIME_UPDATE="BLACK_COACHTIME_UPDATE",p_l.BLACK_GODSTAR_UPDATE="BLACK_GODSTAR_UPDATE",p_l.BLACK_LIFTSKILLINFO_UPDATE="BLACK_LIFTSKILLINFO_UPDATE",p_l.BLACK_GODKING_UPDATE="BLACK_GODKING_UPDATE",p_l.BLACK_GODSUITSTATE_UPDATE="BLACK_GODSUITSTATE_UPDATE",p_l.BLACK_GODSUITSTATE_INFO="BLACK_GODSUITSTATE_INFO",p_l.BLACK_GODSUITSTATE_ITEMINFO="BLACK_GODSUITSTATE_ITEMINFO",p_l.BLACK_GODSUIT_OPEN="BLACK_GODSUIT_OPEN",p_l.GOD_EQUIP_SUIT_INFO="GOD_EQUIP_SUIT_INFO",p_l.GOD_EQUIP_SUIT_UPINFO="GOD_EQUIP_SUIT_UPINFO",p_l.GOD_EQUIP_LVUP_INFO="GOD_EQUIP_LVUP_INFO",p_l.GOD_EQUIP_START_INFO="GOD_EQUIP_START_INFO",p_l.GOD_EQUIP_INFO="GOD_EQUIP_INFO",p_l.MINEWAR_MYINFO_UPDATE="MINEWAR_MYINFO_UPDATE",p_l.MINEWAR_MINEINFO_UPDATE="MINEWAR_MINEINFO_UPDATE",p_l.MINEWAR_MINE_DETAIL="MINEWAR_MINE_DETAIL",p_l.MINEWAR_BATTLE_RESULT="MINEWAR_BATTLE_RESULT",p_l.MINEWAR_EXCHANGE_UPDATE="MINEWAR_EXCHANGE_UPDATE",p_l.MINEWAR_ACHIEVE_UPDATE="MINEWAR_ACHIEVE_UPDATE",p_l.MINEWAR_STATUS_UPDATE="MINEWAR_STATUS_UPDATE",p_l.MINEWAR_ENTERSLOT="MINEWAR_ENTERSLOT",p_l.MINEWAR_RECARDS="MINEWAR_RECARDS",p_l.MINEWAR_BROADCAST="MINEWAR_BROADCAST",p_l.MINEWAR_MOVE="MINEWAR_MOVE",p_l.CARD_INFO_UPDATE="CARD_INFO_UPDATE",p_l.CARD_SCUCCESS_UPDATE="CARD_SCUCCESS_UPDATE",p_l.CARD_RECORD_UPDATE="CARD_RECORD_UPDATE",p_l.CARD_DRAWSCORE_UPDATE="CARD_DRAWSCORE_UPDATE",p_l.SETUP_HEADICON_INFO="SETUP_HEADICON_INFO",p_l.SETUP_MUSIC_CHANGE="SETUP_MUSIC_CHANGE",p_l.SETUP_HEADICON_CHANGE="SETUP_HEADICON_CHANGE",p_l.GODWEALTH_UPDATE_INFO="GODWEALTH_UPDATE_INFO",p_l.GODWEALTH_UPDATE_RECORD="GODWEALTH_UPDATE_RECORD",p_l.TALISMANSEAL_UPDATE_INFO="TALISMANSEAL_UPDATE_INFO",p_l.TALISMANSEAL_UPDATE_CHANGE="TALISMANSEAL_UPDATE_CHANGE",p_l.UPDATE_BARGAIN_LIST="UPDATE_BARGAIN_LIST",p_l.UPDATE_SHOP_RED="UPDATE_SHOP_RED",p_l.UPDATE_SHARE_STATUR="UPDATE_SHARE_STATUR",p_l.DREAMLAND_QUERY_INFO="DREAMLAND_QUERY_INFO",p_l.DREAMLAND_JOIN_INFO="DREAMLAND_JOIN_INFO",p_l.DREAMLAND_START_INFO="DREAMLAND_START_INFO",p_l.DREAMLAND_SKILL_INFO_LIST="DREAMLAND_QUERY_INFO",p_l.DREAMLANDMIAN_INFO_LIST="DREAMLANDMIAN_INFO_LIST",p_l.DREAMLANDMIAN_UPDATE_EXP="DREAMLANDMIAN_UPDATE_EXP",p_l.GYMKHANA_SKILL="GYMKHANA_SKILL",p_l.GYMKHANA_MAIN_INFO="GYMKHANA_MAIN_INFO",p_l.GYMKHANA_RECORD_INFO="GYMKHANA_RECORD_INFO",p_l.GYMKHANA_REFRESH="GYMKHANA_REFRESH",p_l.GYMKHANA_SHOP="GYMKHANA_SHOP",p_l.ACTORDID="ACTORDID",p_l.GYMKHANA_RED_POINT="GYMKHANA_RED_POINT",p_l.GYMKHANA_BUY_COUNT="GYMKHANA_BUY_COUNT",p_l.HELPER_UPDATE_INFO="HELPER_UPDATE_INFO",p_l.CHECK_ROLE_TALIS_INFO="CHECK_ROLE_TALIS_INFO",p_l.CHECK_ROLE_BLACK_INFO="CHECK_ROLE_BLACK_INFO",p_l.CHECK_ROLE_GOD_EQUIP_INFO="CHECK_ROLE_GOD_EQUIP_INFO",p_l.UPDATE_RESTORE="UPDATE_RESTORE",p_l.UPDATE_FINDRESOURCE="UPDATE_FINDRESOURCE",p_l.ONE_KEY_FIND="ONE_KEY_FIND",p_l.UPDATE_CITTA_INFO="UPDATRE_CITTA_INFO",p_l.UPDATE_CITTAUP_INFO="UPDATE_CITTAUP_INFO",p_l.UPDATE_CITTARED_INFO="UPDATE_CITTARED_INFO",p_l.OPSER_UPDATE_DATA="OPSER_UPDATE_DATA",p_l.UPDATE_REWARD_INFO_OPENSER="UPDATE_REWARD_INFO_OPENSER",p_l.UPDATE_MAIN_OPENSER_RED="UPDATE_MAIN_OPENSER_RED",p_l.ACTIVITY_LIMIT_REWARD_UPDATE="ACTIVITY_LIMIT_REWARD_UPDATE",p_l.AMEND_CLICK_NUM="AMEND_CLICK_NUM",p_l.KF_DATA_UPDATE="KF_DATA_UPDATE",p_l.KF_UPDATE_SERVER_VALUE="KF_UPDATE_SERVER_VALUE",p_l.FB_UPDATE_INFO="FB_UPDATE_INFO",p_l.SEVEN_TARGET_TASK_UPDATE="SEVEN_TARGET_TASK_UPDATE",p_l.SEVEN_TARGET_LIVINESS_UPDATE="SEVEN_TARGET_LIVINESS_UPDATE",p_l.SEVENDAT_TASK_UPDATE="SEVENDAT_TASK_UPDATE",p_l.SEVENDAY_SCHUEDLE_UPDATE="SEVENDAY_SCHUEDLE_UPDATE",p_l.SEVENDAY_DEFAULT_INDEX="SEVENDAY_DEFAULT_INDEX",p_l.GUILD_MERIEG_BASE_UPDATE="GUILD_MERIEG_BASE_UPDATE",p_l.GUILD_MERIEG_MEMBER_INFO_UPDATE="GUILD_MERIEG_MEMBER_INFO_UPDATE",p_l.GUILD_MERIEG_MAIN_UI_UPDATE="GUILD_MERIEG_MAIN_UI_UPDATE",p_l.GUILD_MERIEG_ITEM_UPDATE="GUILD_MERIEG_ITEM_UPDATE",p_l.GUILD_MERIEG_AUTO_STATE_CHANGE="GUILD_MERIEG_AUTO_STATE_CHANGE",p_l.GUILD_MERIEG_BOSS_LIST_UPDATE="GUILD_MERIEG_BOSS_LIST_UPDATE",p_l.MARRY_REGISTER_UPDATE="MARRY_REGISTER_UPDATE",p_l.PROPOSE_TO_INVITE="PROPOSE_TO_INVITE",p_l.MARRY_RING_INFO_UPDATE="MARRY_RING_INFO_UPDATE",p_l.MARRY_RING_STAR_UPDATE="MARRY_RING_STAR_UPDATE",p_l.MARRY_ACHIEVEMENT_UPDATE="MARRY_ACHIEVEMENT_UPDATE",p_l.LOVER_INFO_UPDATE="LOVER_INFO_UPDATE",p_l.GET_LOVERVALUE_AWARD="GET_LOVERVALUE_AWARD",p_l.LOVERVALUE_UPDATE="LOVERVALUE_UPDATE",p_l.LOVERVALUE_AWARD_INFO="LOVERVALUE_AWARD_INFO",p_l.MARRYFB_ENTER_TIMES="MARRYFB_ENTER_TIMES",p_l.SUCCESS_BUY_FBCOUNT="SUCCESS_BUY_FBCOUNT",p_l.UPDATE_CURRENY_LAYER="UPDATE_CURRENY_LAYER",p_l.UPDATE_MARRY_LIST="UPDATE_MARRY_LIST",p_l.MARRY_PALYER_INFO="MARRY_PALYER_INFO",p_l.TEAM_LIST="TEAM_LIST",p_l.TEAM_REQ_LIST="TEAM_REQ_LIST",p_l.TEAM_INFO_UPDATE="TEAM_INFO_UPDATE",p_l.TEAM_BE_INVITE="TEAM_BE_INVITE",p_l.TEAM_INVITE_LIST="TEAM_INVITE_LIST",p_l.ASCENT_UPDATE="ASCENT_UPDATE",p_l.RAREANIMAL_UPDATE="RAREANIMAL_UPDATE",p_l.UPDATE_YSSCORE="UPDATE_YSSCORE",p_l.ALIEN_BEAST_INFOS="ALIEN_BEAST_INFOS",p_l.ALIEN_BEAST_INFO="ALIEN_BEAST_INFO",p_l.ALIEN_BEAST_DLOP_UP_S="ALIEN_BEAST_DLOP_UP_S",p_l.ALIEN_BEAST_DLOP_UP_F="ALIEN_BEAST_DLOP_UP_F",p_l.ALIEN_BEAST_EVOLVE="ALIEN_BEAST_EVOLVE",p_l.DEPLOY_EXP_CHANGE="DEPLOY_EXP_CHANGE",p_l.FESTIVAL_SIGN_INFO="FESTIVAL_SIGN_INFO",p_l.FESTIVAL_GIFT_INFO="FESTIVAL_GIFT_INFO",p_l.FESTIVAL_LOTTER_INFO="FESTIVAL_LOTTERDRAW_INFO",p_l.FESTIVAL_LOTTERT_RECORD="FESTIVAL_LOTTERT_RECORD",p_l.FESTIVAL_LOTTERT_DRAW="ACTIVITY_LOTTERT_DRAW",p_l.WEEKEND_SIGN_INFO="WEEKEND_SIGN_INFO",p_l.WEEKEND_GIFT_INFO="WEEKEND_GIFT_INFO",p_l.WEEKEND_LOTTER_INFO="WEEKEND_LOTTERDRAW_INFO",p_l.WEEKEND_LOTTERT_RECORD="WEEKEND_LOTTERT_RECORD",p_l.WEEKEND_LOTTERT_DRAW="ACTIVITY_LOTTERT_DRAW",p_l.REFINE_BODY_INFO="REFINE_BODY_INFO",p_l.REFINE_BODY_ONE_INFO="REFINE_BODY_ONE_INFO",p_l.REFINE_BODY_UP_LV="REFINE_BODY_UP_LV",p_l.REFINE_BODY_UP_STAR="REFINE_BODY_UP_STAR",p_l.REFINE_BODY_ACTIVE="REFINE_BODY_ACTIVE",p_l.MONTH_CONRECHARGE_INFO="MONTH_CONRECHARGE_INFO",p_l.MONTH_GIFT_INFO="MONTH_GIFT_INFO",p_l.MONTH_ACTIVE_INFO="MONTH_ACTIVE_INFO",p_l.MONTH_TR_HUNT_INFO="MONTH_TR_HUNT_INFO",p_l.MONTH_RED_PACKET_INFO="MONTH_RED_PACKET_INFO",p_l.UPDATE_SWEET_SCORE="UPDATE_SWEET_SCORE",p_l.MARRY_SWEET_INFO="MARRY_SWEET_INFO",p_l.MARRY_SWEET_INFO_LOG="MARRY_SWEET_INFO_LOG",p_l.MARRY_SWEET_UPGRADE="MARRY_SWEET_UPGRADE",p_l.REWARD_BOSS_UPDATE="REWARD_BOSS_UPDATE",p_l.FB_HEAVEN_OPEN_INFO="FB_HEAVEN_OPEN_INFO",p_l.FB_HEAVEN_OPEN_WATCH="FB_HEAVEN_OPEN_WATCH",p_l.ST_BOSS_RANK="ST_BOSS_RANK",p_l.ST_BOSS_INFO="ST_BOSS_INFO",p_l.ST_BOSS_BUY_TIME="ST_BOSS_BUY_TIME",p_l.SWEETGAIN_RANK="SWEETGAIN_RANK",p_l.SWEET_RANK_PAGE="SWEET_RANK_PAGE",p_l.RED_PACKET_INFO="RED_PACKET_INFO",p_l.RED_PACKET_RECE_INFO="RED_PACKET_RECE_INFO",p_l.RED_PACKET_AC_INFO="RED_PACKET_AC_INFO",p_l.RED_PACKET_REC_INFO="RED_PACKET_REC_INFO",p_l.RED_PACKER_RESULT="RED_PACKER_RESULT",p_l.RED_PACKET_STOP="RED_PACKET_STOP",p_l.RED_PACKET_ALL_INFO="RED_PACKET_ALL_INFO",p_l.RED_PACKET_RECORD_UPDATE="RED_PACKET_RECORD_UPDATE",p_l.RED_PACKET_SEND_RESULT="RED_PACKET_SEND_RESULT",p_l.MIRROR_SELF_INFO="MIRROR_SELF_INFO",p_l.MIRROR_SELF_WEAR="MIRROR_SELF_WEAR",p_l.MIRROR_SELF_ACT="MIRROR_SELF_ACT",p_l.MIRROR_SELF_LV="MIRROR_SELF_LV",p_l.MIRROR_SELF_GRADE="MIRROR_SELF_GRADE",p_l.Xinyue_Gift_Status="Xinyue_Gift_Status",p_l.FREE_RECHARGE_INFO="FREE_RECHARGE_INFO",p_l.FREE_SINGLE_INFO="FREE_SINGLE_INFO",p_l.OPENSVRSEVEN_CONRECHARGE_INFO="OPENSVRSEVEN_CONRECHARGE_INFO",p_l.OPENSVRSEVEN_DISCOUT_INFO="OPENSVRSEVEN_DISCOUT_INFO",p_l.SEVENDAY_ACTIVE_INFO="SEVENDAY_ACTIVE_INFO",p_l.SEVENDAY_RED_PACKET_INFO="SEVENDAY_RED_PACKET_INFO",p_l.GUARDING_NANTIANMEN_INFO="GUARDING_NANTIANMEN_INFO",p_l.GUARDING_NANTIANMEN_ATTACK="GUARDING_NANTIANMEN_ATTACK",p_l.GUARDING_NANTIANMEN_ATTACK_RECORD="GUARDING_NANTIANMEN_ATTACK_RECORD",p_l.GUARDING_NANTIANMEN_DEFENSE_RECORD="GUARDING_NANTIANMEN_DEFENSE_RECORD",p_l.GUARDING_NANTIANMEN_CLONE="GUARDING_NANTIANMEN_CLONE",p_l.GUARDING_NANTIANMEN_CLONES="GUARDING_NANTIANMEN_CLONES",p_l.UPDATE_TEAM_NAME="UPDATE_TEAM_NAME",p_l.UPDATE_DA_PVP_INFO="UPDATE_DA_PVP_INFO",p_l.UPDATE_DA_TEAM_LIST="UPDATE_DA_TEAM_LIST",p_l.UPDATE_DA_INVITE_LIST="UPDATE_DA_INVITE_LIST",p_l.UPDATE_DA_SELF_TEAM_INFO="UPDATE_DA_SELF_TEAM_INFO",p_l.UPDATE_DA_INVITE_RESULT="UPDATE_DA_INVITE_RESULT",p_l.UPDATE_DA_BE_INVITE_LIST="UPDATE_DA_BE_INVITE_LIST",p_l.DA_BE_INVITE="DA_BE_INVITE",p_l.DA_TEAM_INFO_UPDATE="DA_TEAM_INFO_UPDATE",p_l.DA_CLONE_FORMATION_UPDATE="DA_CLONE_FORMATION_UPDATE",p_l.DA_MATCH_UPDATE="DA_MATCH_UPDATE",p_l.DA_START_FIGHT="DA_START_FIGHT",p_l.DA_RECORD_UPDATE="DA_RECORD_UPDATE",p_l.DA_RANK_UPDATE="DA_RANK_UPDATE",p_l.DA_CAN_OPEN_FINAL_RESULT="DA_CAN_OPEN_FINAL_RESULT",p_l.DA_REFRESH_RED="DA_REFRESH_RED",p_l.UPDATE_HEAVEN_OPENE="UPDATE_HEAVEN_OPEN",p_l.UPDATE_HEAVEN_SCORE="UPDATE_HEAVEN_SCORE",p_l.GROWUPFOUND_UPDATE_INFO="GROWUPFOUND_UPDATE_INFO",p_l.INVESTMENT_UPDATE_INFO="INVESTMENT_UPDATE_INFO",p_l.MERGE_SEVENDAY_INFO="MERGE_SEVENDAY_INFO",p_l.MERGE_SEVENDAY_GET="MERGE_SEVENDAY_GET",p_l.MERGE_SEVENDAY_STATUS="MERGE_SEVENDAY_STATUS",p_l.MERGE_GYM_INFO="MERGE_GYM_INFO",p_l.MERGE_GYM_TAR_REW="MERGE_GYM_TAR_REW",p_l.CHRISTMASTARGET_UPDATE_INFO="CHRISTMASTARGET_UPDATE_INFO",p_l.RECHARGE_RANK_INFO="RECHARGE_RANK_INFO",p_l.RECHARGE_TAR_REW="RECHARGE_TAR_REW",p_l.RECHARGE_UPDATE_SC="RECHARGE_UPDATE_SC",p_l.CHRISTMAS_BOSS_INFO="CHRISTMAS_BOSS_INFO",p_l.CHRISTMAS_BOSS_RANK_INFO="CHRISTMAS_BOSS_RANK_INFO",p_l.ADVENTURE_UPDATE_INFO="ADVENTURE_UPDATE_INFO",p_l.ADVENTURE_END="ADVENTURE_END",p_l.CHANGE_ITEM_INFO="CHANGE_ITEM_INFO",p_l.CHANGE_ITEM="CHANGE_ITEM",p_l.GUILD_CITY_PLAYER_DETAILS="GUILD_CITY_PLAYER_DETAILS",p_l.GUILD_CITYS_INFO="GUILD_WAR_INFO",p_l.GUILD_CITY_INFO="GUILD_CITY_INFO",p_l.GUILD_CLONE_INFO="GUILD_CLONE_INFO",p_l.GUILD_CITY_REWARD="GUILD_CITY_REWARD",p_l.GUILD_CITY_REWARD_RED="GUILD_CITY_REWARD_RED",p_l.GUILD_EMPLOY_INFO="GUILD_EMPLOY_INFO",p_l.GUILD_CITY_Fight="GUILD_CITY_Fight",p_l.GUILD_CITY_Fight_PLAYER="GUILD_CITY_Fight_PLAYER",p_l.GUILD_REWARD_GET="GUILD_REWARD_GET",p_l.GUILD_KILL_INFO="GUILD_KILL_INFO",p_l.CITY_WAR_END="CITY_WAR_END",p_l.CITY_NOTICE_TIP="CITY_NOTICE_TIP",p_l.BODY_INFO_UPDATE="BODY_INFO_UPDATE",p_l.BODY_CUL_INFO_UPDATE="BODY_CUL_INFO_UPDATE",p_l.BODY_SUB_LEVEL_UP_INFO_UPDATE="BODY_SUB_LEVEL_UP_INFO_UPDATE",p_l.BODY_LEVEL_UP_INFO_UPDATE="BODY_LEVEL_UP_INFO_UPDATE",p_l.BOBY_OPEN_UP_PROPETY_PANEL="BOBY_OPEN_UP_PROPETY_PANEL",p_l}(Laya.Event),Button=Laya.Button,AddButtonGroup=function(e){function p_l(p_l,p_g,b_s,d_u,b_e){var d_m=e.call(this)||this;return d_m._curIndex=1,p_l&&p_l.on(Laya.Event.CLICK,d_m,d_m.onBtnClick),p_g&&p_g.on(Laya.Event.CLICK,d_m,d_m.onBtnClick),b_s&&b_s.on(Laya.Event.CLICK,d_m,d_m.onBtnClick),d_u&&d_u.on(Laya.Event.CLICK,d_m,d_m.onBtnClick),d_m._fButton=p_l,d_m._cutButton=p_g,d_m._addButton=b_s,d_m._lButton=d_u,d_m._mLabel=b_e,d_m.setLabel(),d_m}return __extends(p_l,e),p_l.prototype.onBtnClick=function(e){var p_l=e.target;p_l&&(p_l==this._fButton?this._curIndex=this._min:p_l==this._cutButton?(this._curIndex--,this._curIndex=this._curIndex<this._min?this._min:this._curIndex):p_l==this._addButton?(this._curIndex++,this._curIndex=this._curIndex>this._max?this._max:this._curIndex):p_l==this._lButton&&(this._curIndex=this._max),this.setLabel())},p_l.prototype.setLabel=function(){this._mLabel&&(this._mLabel.text=this._curIndex.toString())},p_l.prototype.setMax=function(e,p_l){Gqi(e,p_l,this)},Object.defineProperty(p_l.prototype,"curNum",{get:function(){return this._curIndex},enumerable:!0,configurable:!0}),p_l}(Laya.Sprite),UI,ScriptType;!function(e){var p_l,p_g=(p_l=ui.window.bossHpBarUI,__extends(b_s,p_l),b_s.prototype.setRenderData=function(e,p_l){void 0===p_l&&(p_l=ScriptType.BOSS),this._bossVo=e,this._type=p_l},b_s.prototype.update=function(){if(this._bossVo){var e=LgcM.ins.getActorStdInfoById(this._bossVo.id,Engine2d.ActorTypeDefine.MONSTER);if(!e)return this.hpBar.value=0,this.hpTxt.text="0/0",void(this.bloodNumTxt.visible=!1);var p_l=Config.obj_monster[e.entryId]&&1<Config.obj_monster[e.entryId].bloodSubsection?Config.obj_monster[e.entryId].bloodSubsection:null,p_g=p_l?Resource.ResManager.getBloodUrls(p_l):null;this.hpBar.setBarSkins(p_g,p_l),this.bloodNumTxt.visible=!!p_g;var b_s=e.hp,d_u=e.hpUpper,b_e=b_s/d_u;if(b_e!=this.hpBar.value){if(this.hpBar.value=b_e,this._type==ScriptType.BOSS){var d_m=Math.floor(100*b_e)+"%";this.hpTxt.text=d_m}else this.hpTxt.text=b_s+"/"+d_u;this.bloodNumTxt.text=0<this.hpBar.barSkinIndex?"x"+(this.hpBar.barSkinIndex+1):""}}},b_s.prototype.onAdded=function(){},b_s.prototype.onRemove=function(){},b_s);function b_s(){var e=p_l.call(this)||this;return e._type=0,e}e.BossHpBar=p_g}(UI=UI||{}),function(e){e[e.BOSS=1]="BOSS",e[e.MONSTER=2]="MONSTER"}(ScriptType=ScriptType||{});var p_c=function(e){function p_l(p_l,p_g,b_s){void 0===p_g&&(p_g=!0),void 0===b_s&&(b_s=!1);var d_u=e.call(this)||this;if(d_u._lastIndex=-1,d_u._lastSelcteTime=0,d_u._isOpenCd=!1,d_u._tab=p_l,d_u._isOpenCd=b_s,p_l&&(d_u._lastIndex=p_l.selectedIndex,p_l.selectHandler=Laya.Handler.create(d_u,d_u.onTabSelect,null,!1),p_g))for(var b_e=0;b_e<p_l.numChildren;++b_e)d_u.changeClipIndex(b_e,b_e===d_u._lastIndex?2:1);return d_u}return __extends(p_l,e),p_l.prototype.onTabSelect=function(e){Sws(e,this)},p_l.prototype.setlastIndex=function(e){Wha(e,this)},p_l.prototype.changeClipIndex=function(e,p_l){if(-1!=e){var p_g=this._tab.getChildAt(e);if(p_g){var b_s=p_g.getChildByName("clip");null==b_s&&(b_s=p_g.getChildAt(0)),b_s&&2==b_s.clipY&&1<b_s.clipX?b_s.index=1==p_l?b_s.index%b_s.clipX:b_s.index%b_s.clipX+b_s.clipX:b_s&&2==b_s.clipY&&1===b_s.clipX&&(b_s.index=1==p_l?0:1)}}},p_l.updateTabClip=function(e){for(var p_l=0;p_l<e.numChildren;++p_l){var p_g=e.getChildAt(p_l);if(p_g){var b_s=p_g.getChildByName("clip");(b_s=b_s||p_g.getChildAt(0))&&(2==b_s.clipY&&1<b_s.clipX?b_s.index=p_l!=e.selectedIndex?b_s.index%b_s.clipX:b_s.index%b_s.clipX+b_s.clipX:2==b_s.clipY&&1===b_s.clipX&&(b_s.index=p_l!=e.selectedIndex?0:1))}}},p_l.changePanelCD=200,p_l}(Laya.Sprite),PLAY_TYPE,ScrollNum=function(e){function p_l(p_l,p_g){void 0===p_l&&(p_l=0),void 0===p_g&&(p_g=NumType.FIGHTING_BIG);var b_s=e.call(this)||this;return b_s._interval=800,b_s._num=0,b_s._gap=0,b_s._curNum=0,b_s._calcNum=0,b_s._gap=p_l,b_s._type=p_g,b_s._imageNumber=new Laya.Sprite,b_s.addChild(b_s._imageNumber),b_s.show(0),b_s}return __extends(p_l,e),Object.defineProperty(p_l.prototype,"isSendUpdateEvent",{get:function(){return this._isSendUpdateEvent},set:function(e){this._isSendUpdateEvent=e},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"interval",{get:function(){return this._interval},set:function(e){this._interval=e},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"imageNumber",{get:function(){return this._imageNumber},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"number",{get:function(){return this._curNum},set:function(e){this._run&&(this.stop(),this.show(e)),this._curNum!=e&&(this._curNum=e,this.show(this._curNum))},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"runing",{get:function(){return this._run},enumerable:!0,configurable:!0}),p_l.prototype.play=function(e){void 0===e&&(e=0),this._run&&(this._curNum+=this._num),this._num=e,this._playType=e<0?PLAY_TYPE.SUB:PLAY_TYPE.ADD,this._calcNum=this._curNum,this._curTime=Laya.Browser.now(),this._completeTime=this._curTime+this._interval,this.calcAverageValue(),this.starEnterFrame()},p_l.prototype.onEnterFrame=function(){Iir(this)},p_l.prototype.starEnterFrame=function(){Aql(this,Laya)},p_l.prototype.show=function(e){Ela(e,b_p,this)},p_l.prototype.stop=function(){Mxh(this)},p_l.prototype.calcAverageValue=function(){Ujw(this)},p_l.prototype.onComplete=function(e){Swz(e,dispatchEvent)},p_l.prototype.clear=function(){Giu(this)},p_l.prototype.update=function(){if(Laya.Browser.now()<this._completeTime){var e=void 0;this._calcNum+=this._average,this._playType==PLAY_TYPE.ADD?this._calcNum>this._curNum+this._num&&(e=!0):this._playType==PLAY_TYPE.SUB&&this._calcNum<this._curNum+this._num&&(e=!0),e&&(this.stop(),this._calcNum=this._curNum+this._num,this._curNum=this._calcNum,this.sendPlayCompleteEvent()),this.show(this._calcNum),this._isSendUpdateEvent&&this.event(p_l.PLAY_UPDATE)}else this._curNum+=this._num,this.show(this._curNum),this.stop(),this.sendPlayCompleteEvent()},p_l.prototype.removeEnterFrame=function(){Wwx(Laya,this)},p_l.prototype.sendPlayCompleteEvent=function(){Csk(this,p_l)},Object.defineProperty(p_l.prototype,"numGap",{set:function(e){this._gap!=e&&b_p.getNumSp(this._type,this._curNum,this._imageNumber,this._gap)},enumerable:!0,configurable:!0}),p_l.PLAY_COMPLETE="ScrollText_Play_Complete_Event",p_l.PLAY_UPDATE="ScrollText_Play_Update_Event",p_l}(Laya.Sprite),Engine2d,Engine2d,Engine2d,Engine2d,Engine2d,Engine2d,Engine2d,Engine2d,Engine2d,Engine2d,Engine2d,Engine2d,Engine2d,Engine2d;!function(e){e[e.ADD=1]="ADD",e[e.SUB=-1]="SUB"}(PLAY_TYPE=PLAY_TYPE||{}),function(e){var p_l,p_g=(b_e.prototype.clear=function(){this.type===e.ActorTypeDefine.PLAYER&&(this.isPlayerVisible=!0),this.id=0,this.name=null,this.px=this.py=this.endPx=this.endPy=0,this.isVisible=!0,this.isDead=!1},b_e.prototype.destroy=function(){this.clear();var e=b_e._pools[this.type]||[];return!(e.length<15&&(e.push(this),b_e._pools[this.type]=e,1))},b_e.freeStdInfo=function(e,p_l){var p_g=b_e._pools[e]||[];return p_g?p_g.pop()||new p_l:null},b_e._pools={},b_e),b_s=(p_l=e.ActorBaseVo=p_g,__extends(d_u,p_l),d_u.prototype.parser=function(e){this.id=e.id,this.itemId=e.itemId,this.face=0,this.px=e.ctx.px,this.py=e.ctx.py,this.endPx=e.ctx.endPx,this.endPy=e.ctx.endPy,this.speed=e.ctx.movingSpeed,this.belong=e.belong,this.monsterEntryId=e.monsterEntryId,this.name=Config.CItem(this.itemId)?Config.CItem(this.itemId).name:"",this.always=!1},d_u.prototype.canDrop=function(){return Gyq(this,b_p)},d_u.prototype.isFlyTo=function(){return Yzt(Config,this,ItemClassDefine)},d_u);function d_u(){var p_g=p_l.call(this)||this;return p_g.type=e.ActorTypeDefine.DROP,p_g}function b_e(){this.face=0,this.hp=100,this.hpUpper=100,this.isVisible=!0,this.isDead=!1,this.speed=500,this.xyExp=0,this.xsExp=0,this.xyDrawScore=0,this.ysScore=0,this.dreamlandExp=0}e.DropVo=b_s;var d_m,d_w=(__extends(f_t,d_m=p_g),f_t.prototype.parser=function(p_l){Gqm(p_l,this,e)},f_t);function f_t(){var p_l=d_m.call(this)||this;return p_l.type=e.ActorTypeDefine.MONSTER,p_l}e.MonsterVo=d_w;var v_z,d_h=(__extends(r_t,v_z=p_g),r_t.prototype.parser=function(p_l){Omf(p_l,this,e)},r_t);function r_t(){var p_l=v_z.call(this)||this;return p_l.type=e.ActorTypeDefine.NPC,p_l}e.NpcVo=d_h;var t_n,f_y=(__extends(p_q,t_n=p_g),p_q.prototype.parser=function(p_l){Wxu(p_l,this,e)},p_q);function p_q(){var p_l=t_n.call(this)||this;return p_l.type=e.ActorTypeDefine.COLLECT,p_l}e.CollectVo=f_y;var h_h,n_j,j_l=(__extends(h_b,n_j=p_g),h_b.prototype.parser=function(p_l){Yck(p_l,this,LgcM,e)},h_b.prototype.getClotheId=function(){return this.getCurCloneCfg()?this.cFaClothes:this.fashionClothes},h_b.prototype.getCurCloneCfg=function(){return Wgt(Config,this)},h_b.prototype.getWeaponId=function(){return this.getCurCloneCfg()?this.cFaWeapon:this.fashionWeapon},h_b.prototype.getRideId=function(){return this.getCurCloneCfg()?this.cRideId:this.rideId},h_b.prototype.getDragonId=function(){return this.getCurCloneCfg()?this.cDragonId:this.dragonId},h_b),l_m=(h_h=e.PlayerVo=j_l,__extends(z_m,h_h),z_m.prototype.parser=function(p_l){Cts(p_l,this,e)},z_m);function z_m(){var p_l=h_h.call(this,e.ActorTypeDefine.ROBOT)||this;return p_l.pid=0,p_l}function h_b(p_l){void 0===p_l&&(p_l=e.ActorTypeDefine.PLAYER);var p_g=n_j.call(this)||this;return p_g.attack=0,p_g.defense=0,p_g.armorBreak=0,p_g.element=0,p_g.elementDefense=0,p_g.hit=0,p_g.dodge=0,p_g.cri=0,p_g.criDefense=0,p_g.hitPercent=0,p_g.dodgePercent=0,p_g.criPercent=0,p_g.criDefensePercent=0,p_g.criDamagePercent=0,p_g.toughPercent=0,p_g.deadlyPercent=0,p_g.deadlyDefensePercent=0,p_g.damageDeepenPercent=0,p_g.damageReducePercent=0,p_g.exp=0,p_g.fight=0,p_g.stateLv=0,p_g.dragonId=0,p_g.tsStove=0,p_g.asyncpvpPoint=0,p_g.asyncpvpScore=0,p_g.honor=0,p_g.skillExp=0,p_g.integrity=0,p_g.evil=0,p_g.neutral=0,p_g.arenaChallTimes=0,p_g.arenaVipBuyTimes=0,p_g.historyMaxRank=0,p_g.gymkhanaChallengeCD=0,p_g.gymkhanaScore=0,p_g.goldReborn=0,p_g.settingFlags=0,p_g.isPlayerVisible=!0,p_g.sex=GameDefine.boy,p_g.type=p_l,p_g}e.RobotVo=l_m}(Engine2d=Engine2d||{}),function(e){var p_l,p_g=(p_l=Laya.Sprite,__extends(b_s,p_l),b_s.prototype.getCurentCX=function(){return Yoh(this)},b_s.prototype.calcDisplayIndex=function(e){for(var p_l,p_g=e.numChildren-1;-1<p_g&&!(null!=(p_l=e.getChildAt(p_g))&&p_l.m_nCurrentCY<=this.m_nCurrentCY);)p_g--;for(;-1<p_g&&!((p_l=e.getChildAt(p_g)).m_nSortRowLevel<this.m_nSortRowLevel);){if(p_l.m_nSortRowLevel==this.m_nSortRowLevel){if(p_l.m_nCurrentCY!=this.m_nCurrentCY)break;if(p_l.m_nCurrentCX>this.m_nCurrentCX)break;if(p_l.m_nCurrentCX==this.m_nCurrentCX&&p_l.m_nSortLevel<=this.m_nSortLevel)break}p_g--}return p_g+1},b_s.prototype.getCurrentCY=function(){return Okn(this)},b_s.prototype.despatchParent=function(){null!=this.parent&&this.parent.removeChild(this)},b_s.prototype.setCurrentPxy=function(p_l,p_g){var b_s=e.MapUtils.pxTocx(p_l),d_u=e.MapUtils.pyTocy(p_g);b_s==this.m_nCurrentCX&&d_u==this.m_nCurrentCY||this.sortOnContainer(this.m_nCurrentCX,b_s,this.m_nCurrentCY,d_u),this.m_nCurrentCX=b_s,this.m_nCurrentCY=d_u,this.x=p_l,this.y=p_g},b_s.prototype.update=function(e){},b_s.prototype.setCurrentCxy=function(p_l,p_g){p_l==this.m_nCurrentCX&&p_g==this.m_nCurrentCY||this.sortOnContainer(this.m_nCurrentCX,p_l,this.m_nCurrentCY,p_g),this.m_nCurrentCX=p_l,this.m_nCurrentCY=p_g,this.x=e.MapUtils.cxToPx(p_l),this.y=e.MapUtils.cyToPy(p_g)},b_s.prototype.sortOnContainer=function(e,p_l,p_g,b_s){var d_u=this.parent;if(d_u){var b_e,d_m,d_w,f_t=d_u.numChildren;if(d_m=d_w=d_u.getChildIndex(this),b_s<p_g){for(d_m--;-1<d_m&&!((b_e=d_u.getChildAt(d_m)).m_nCurrentCY<=b_s);)d_m--;for(;-1<d_m&&!((b_e=d_u.getChildAt(d_m)).m_nSortRowLevel<this.m_nSortRowLevel);){if(b_e.m_nSortRowLevel==this.m_nSortRowLevel){if(b_e.m_nCurrentCY!=b_s)break;if(b_e.m_nCurrentCX>p_l)break;if(b_e.m_nCurrentCX==p_l&&b_e.m_nSortLevel<=this.m_nSortLevel)break}d_m--}d_m++}else if(p_g<b_s){for(d_m++;d_m<f_t&&!((b_e=d_u.getChildAt(d_m)).m_nCurrentCY>=b_s);)d_m++;for(;d_m<f_t&&!((b_e=d_u.getChildAt(d_m)).m_nSortRowLevel>this.m_nSortRowLevel);){if(b_e.m_nSortRowLevel==this.m_nSortRowLevel){if(b_e.m_nCurrentCY!=b_s)break;if(b_e.m_nCurrentCX<p_l)break;if(b_e.m_nCurrentCX==p_l&&b_e.m_nSortLevel>=this.m_nSortLevel)break}d_m++}d_m--}else if(p_l<e){for(d_m++;d_m<f_t&&!((b_e=d_u.getChildAt(d_m)).m_nSortRowLevel>this.m_nSortRowLevel);){if(b_e.m_nSortRowLevel==this.m_nSortRowLevel){if(b_e.m_nCurrentCY!=b_s)break;if(b_e.m_nCurrentCX<p_l)break;if(b_e.m_nCurrentCX==p_l&&b_e.m_nSortLevel>=this.m_nSortLevel)break}d_m++}d_m--}else if(e<p_l){for(d_m--;-1<d_m&&!((b_e=d_u.getChildAt(d_m)).m_nSortRowLevel<this.m_nSortRowLevel);){if(b_e.m_nSortRowLevel==this.m_nSortRowLevel){if(b_e.m_nCurrentCY!=b_s)break;if(b_e.m_nCurrentCX>p_l)break;if(b_e.m_nCurrentCX==p_l&&b_e.m_nSortLevel<=this.m_nSortLevel)break}d_m--}d_m++}d_m!=d_w&&d_u.setChildIndex(this,d_m)}},b_s);function b_s(){var e=p_l.call(this)||this;return e.m_nCurrentCX=0,e.m_nCurrentCY=0,e.m_nSortLevel=0,e.m_nSortRowLevel=0,e}e.MapDisplayObject=p_g}(Engine2d=Engine2d||{}),function(e){var p_l,p_g=(b_s.SA_RUN="run",b_s.SA_STAND="stand",b_s.SA_DEAD="dead",b_s.SA_BORN="born",b_s.SA_JUMP="charge",b_s.SA_SIT="sit",b_s.SA_SING="skill",b_s.SA_COLLECT="collect",b_s.SA_SHOW="show",b_s.SA_STATE="state",b_s);function b_s(){}e.StandardActions=p_g,(p_l=e.ActorTypeDefine||(e.ActorTypeDefine={}))[p_l.PLAYER=1]="PLAYER",p_l[p_l.MONSTER=2]="MONSTER",p_l[p_l.NPC=3]="NPC",p_l[p_l.COLLECT=4]="COLLECT",p_l[p_l.DROP=5]="DROP",p_l[p_l.ROBOT=7]="ROBOT",p_l[p_l.FAKE_PLAYER=9]="FAKE_PLAYER",p_l[p_l.PET=10]="PET",p_l[p_l.WEAPON=100]="WEAPON",p_l[p_l.WING=101]="WING",p_l[p_l.MOUNT=102]="MOUNT",p_l[p_l.EFFECT=103]="EFFECT";var d_u,b_e=(d_u=Laya.Animation,__extends(d_m,d_u),d_m.prototype.clear=function(){Adc(this)},d_m.prototype.reClear=function(){this.x=this.y=0,d_u.prototype.clear.call(this),this.m_url&&(Laya.loader.cancelLoadByUrl(this.m_url),Laya.loader.clearTextureRes(this.m_url)),this.getStyle()||this.setStyle(Laya.Style.EMPTY),this.scaleX=this.scaleY=1,this.pivot(0,0),this.alpha=1,this.visible=!1,this.m_isModel=!1,this._url=null,this.m_action=null,this.m_direction=-1,this.m_isLoop=!1,this.m_isBoss=!1,this.m_scale=1,this.m_interval=d_m.ANIMATION_INTERVAL,this.avatar=null,this.m_url=null},d_m.prototype.loadAtlas=function(e,p_l,p_g,b_s,b_e){return-1!=(this.m_url=e).indexOf("role/")&&(b_s=0),b_e=this.m_isModel?3:1,d_u.prototype.loadAtlas.call(this,e,p_l,p_g,b_s,b_e)},d_m.prototype.getPackageUrl=function(p_l,p_g){return p_g=e.MapUtils.getDirMirror(p_g),this.m_isBoss?p_g=3:0!==p_g&&4!==p_g||this.avatar&&-1!=this.avatar.indexOf("monster")&&-1===this.rootUrl.indexOf("effects")&&(p_g=0===p_g?1:3),this.rootUrl+"/"+p_l+"/"+p_g+".json"},d_m.prototype.setAction=function(e,p_l,p_g,b_s,d_u,b_e,d_w){if(void 0===p_g&&(p_g=!1),void 0===b_s&&(b_s=d_m.ANIMATION_INTERVAL),void 0===d_u&&(d_u=1),void 0===b_e&&(b_e=!1),void 0===d_w&&(d_w=!1),null!=e&&-1!=p_l){this.m_isModel=b_e,this.m_isLoop=p_g,this.m_interval=b_s,this.m_scale=d_u,this.m_isBoss=d_w,this.scaleY=this.scaleX=1;var f_t=this.getPackageUrl(e,p_l);this.m_action!=e||this.m_direction!=p_l||f_t!=this.m_url?(this.m_url&&this.m_url!=f_t&&(this.m_url&&!Laya.loader.getRes(this.m_url)&&Laya.loader.cancelLoadByUrl(this.m_url),this._url=this.m_url,GPlatform.isQQDelRes&&Resource.ResManager.Instance.stayReleaseAniRes(this.m_url)),this.m_action=e,this.m_direction=p_l,f_t===this.m_url?this.onAtlasLoadComplete(f_t,!1):(this.m_url=f_t,this.loadAtlas(this.m_url,Laya.Handler.create(this,this.onAtlasLoadComplete,[f_t],!0),null,2))):this.onAtlasLoadComplete(f_t,!1),f_t&&GPlatform.isQQDelRes&&Resource.ResManager.Instance.reUseAniRes(f_t)}},d_m.prototype.clearLastRes2=function(e){this._url&&this._url!=this.m_url&&!e&&Resource.ResManager.Instance.stayReleaseAniRes(this._url),d_u.prototype.clearLastRes2.call(this,e)},d_m.prototype.play=function(e,p_l,p_g,b_s){this.m_url&&Resource.ResManager.Instance.reUseAniRes(this.m_url),d_u.prototype.play.call(this,e,p_l,p_g,b_s)},d_m.prototype.onAtlasLoadComplete=function(e,p_l){void 0===p_l&&(p_l=!0),this._style?this.m_url&&this.m_url!=e||(this.rotation=0,this.alpha=1,this.visible=!0,this.interval!=this.m_interval&&(this.interval=this.m_interval),1!=this.m_scale&&(this.scaleX=this.scaleY=this.m_scale),4<this.m_direction&&(this.scaleX=-this.scaleX),GPlatform.isQQDelRes&&!this.m_isLoop&&p_l&&Resource.ResManager.Instance.stayReleaseAniRes(e),this.event(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,e)):Laya.loader.clearTextureRes(e)},Object.defineProperty(d_m.prototype,"url",{get:function(){return this.m_url},enumerable:!0,configurable:!0}),Object.defineProperty(d_m.prototype,"dir",{get:function(){return this.m_direction},enumerable:!0,configurable:!0}),Object.defineProperty(d_m.prototype,"action",{get:function(){return this.m_action},enumerable:!0,configurable:!0}),Object.defineProperty(d_m.prototype,"isLoop",{get:function(){return this.m_isLoop},enumerable:!0,configurable:!0}),Object.defineProperty(d_m.prototype,"curScale",{get:function(){return this.m_scale},enumerable:!0,configurable:!0}),Object.defineProperty(d_m.prototype,"speed",{get:function(){return this.m_interval},enumerable:!0,configurable:!0}),d_m.ANIMATION_INTERVAL=110,d_m.SHOW_INTERVAL=110,d_m);function d_m(){var e=d_u.call(this)||this;return e.m_action=null,e.m_direction=-1,e.m_interval=d_m.ANIMATION_INTERVAL,e.m_isModel=!1,e.m_isLoop=!1,e.m_scale=1,e.m_isBoss=!1,e.rootUrl=null,e}e.Animation=b_e}(Engine2d=Engine2d||{}),function(e){var p_l,p_g,b_s=(p_g=e.MapDisplayObject,__extends(d_m,p_g),Object.defineProperty(d_m.prototype,"actBackFunc",{set:function(e){this._actionBackFunc=e},enumerable:!0,configurable:!0}),d_m.prototype.init=function(){this.initController();var p_l=LgcM.ins.getActorStdInfoById(this.id,this.type),p_g=p_l.type===e.ActorTypeDefine.MONSTER?1:0;this.initProgressHP(p_g),this.initNameTxt(),this.resetSize(d_m.DefalutWidth,d_m.DefalutHeight),this.setNameTxt(p_l.name),this.setHP(p_l.hp,p_l.hpUpper,!0),this.setLevelTxt(p_l.level),this.updatePosTxt()},d_m.prototype.resetBounds=function(e,p_l,p_g){void 0===p_g&&(p_g=!1),p_g&&this.resetSize(e,p_l)},d_m.prototype.initStateClip=function(e,p_l){this.m_stateClip||(this.m_stateClip=new Laya.Clip,this.m_stateClip.skin=e,this.m_stateClip.clipX=p_l.clipX,this.m_stateClip.clipY=p_l.clipY,this.m_stateClip.interval=p_l.interval,this.m_fightingCtrl.addPopChild(this.m_stateClip),this.resetSize(this._designWid,this._designHg))},d_m.prototype.initGuildTxt=function(){this.m_guildTxt||(this.m_guildTxt=new Laya.Label,this.m_guildTxt.mouseEnabled=!1,this.m_guildTxt.font=b_p.config.font,this.m_guildTxt.fontSize=b_p.config.fontSize,this.m_guildTxt.width=4*d_m.DefalutWidth,this.m_guildTxt.height=35,this.m_guildTxt.align="center",this.m_guildTxt.color="#ffc85e",this.m_guildTxt.stroke=2,this.m_guildTxt.strokeColor="#000000",this.m_fightingCtrl.addPopChild(this.m_guildTxt),this.resetSize(this._designWid,this._designHg))},d_m.prototype.initNameTxt=function(e){void 0===e&&(e="#E32828"),this.m_nameTxt||(this.m_nameTxt=new Laya.HTMLDivElement,this.m_nameTxt.mouseEnabled=!1,this.m_nameTxt.style.font=b_p.config.font,this.m_nameTxt.style.fontSize=b_p.config.fontSize,this.m_nameTxt.style.width=4*d_m.DefalutWidth,this.m_nameTxt.style.height=35,this.m_nameTxt.style.align="center",this.m_nameTxt.style.color=e,this.m_nameTxt.style.letterSpacing=1,this.m_fightingCtrl.addPopChild(this.m_nameTxt),this.resetSize(this._designWid,this._designHg))},d_m.prototype.initProgressHP=function(e){void 0===e&&(e=0),this.m_progressHP||(this.m_progressHP=new Laya.ProgressBar(Resource.ResUrl.getProgressBarSkin(e),!0),this.m_progressHP.speedTime=100,this.m_progressHP.isMaskProgress=!0,this.m_fightingCtrl.addPopChild(this.m_progressHP),this.m_progressHP.size(141,14))},d_m.prototype.setNameColor=function(e){this.m_nameTxt&&(this.m_nameTxt.style.color=e)},Object.defineProperty(d_m.prototype,"designHg",{get:function(){return this._designHg||(this._designHg=d_m.DefalutHeight),this._designHg},enumerable:!0,configurable:!0}),Object.defineProperty(d_m.prototype,"designWid",{get:function(){return this._designWid||(this._designWid=d_m.DefalutWidth),this._designWid},enumerable:!0,configurable:!0}),d_m.prototype.resetSize=function(e,p_l){this._designWid=e;var p_g=-(this._designHg=p_l);this.m_progressShield&&this.m_progressShield.pos(-this.m_progressShield.width/2,p_g),this.m_progressHP&&(p_g-=this.m_progressHP.height,this.m_progressHP.pos(-this.m_progressHP.width/2,p_g)),this.m_nameTxt&&this.m_nameTxt.visible&&(p_g-=this.m_nameTxt.height,this.m_nameTxt.pos(-this.m_nameTxt.width/2,p_g)),this.m_guildTxt&&(p_g-=this.m_guildTxt.height,this.m_guildTxt.pos(-this.m_guildTxt.width/2,p_g)),this.m_stateClip&&(p_g-=this.m_stateClip.height,this.m_stateClip.pos(-this.m_stateClip.width/2,p_g)),this.m_titleIcon&&this.m_titleIcon.texture&&(p_g-=this.m_titleIcon.texture.height,this.m_titleIcon.pos(-this.m_titleIcon.texture.width/2,p_g))},d_m.prototype.initController=function(){this.m_needMoveCtrl&&!this.m_moveCtrl&&(this.m_moveCtrl=new e.MoveActorController(this,e.Tools.BindDomain(this.coordChangeCallBack,this))),null==this.m_fightingCtrl&&(this.m_fightingCtrl=new e.FightingController(this,this.m_moveCtrl,e.Tools.BindDomain(this.bodyLoadedComplete,this),e.Tools.BindDomain(this.aniPlayComplete,this))),this.moveSpeed=500},d_m.prototype.onClick=function(e){this.id!=b_p.playerId&&LED.event(l_r.CLICK_ACTOR,this)},d_m.prototype.setShieldProgress=function(e,p_l){0!==e?(this.m_progressShield||(this.m_progressShield=new Laya.ProgressBar(Resource.ResUrl.getProgressBarSkin(2)),this.m_fightingCtrl.addPopChild(this.m_progressShield),this.m_progressShield.size(141,14),this._designWid?this.resetSize(this._designWid,this._designHg):this.resetSize(d_m.DefalutWidth,d_m.DefalutHeight)),this.m_progressShield.value=e/p_l,this.m_progressShield.visible=0!=e):this.m_progressShield&&(this.m_progressShield.visible=0!=e)},d_m.prototype.setHP=function(e,p_l,p_g){if(void 0===p_g&&(p_g=!1),this.m_progressHP&&(this._isShowNameHp||p_g)){var b_s=e/p_l;b_s=b_s<0?0:b_s,this.m_progressHP.on(Laya.Event.CHANGE,this,this.setHPComplete),this.hpValue=b_s}},Object.defineProperty(d_m.prototype,"hpValue",{get:function(){return this.m_progressHP?this.m_progressHP.value:0},set:function(e){this.m_progressHP&&(this.m_progressHP.value=e)},enumerable:!0,configurable:!0}),d_m.prototype.setHPComplete=function(){this.m_progressHP&&(this.m_progressHP.visible=this._isShowNameHp&&0<this.m_progressHP.value,this.setNameTxtVisible(this.m_progressHP.visible))},d_m.prototype.setNameAndStateInfo=function(){},Object.defineProperty(d_m.prototype,"isShowNameHp",{get:function(){return this._isShowNameHp},set:function(p_l){if(this._isShowNameHp=p_l,!this.m_nameTxt){var p_g=LgcM.ins.heroVo,b_s=LgcM.ins.getActorStdInfoById(this.id,this.type);if(!b_s||!p_g)return;this.initNameTxt();var d_u=b_s.camp!=p_g.camp||b_s.type===e.ActorTypeDefine.MONSTER?Utils.Color.WHITE:Utils.Color.NAME_GREEN,b_e=b_s.type===e.ActorTypeDefine.MONSTER?Config.obj_monster[b_s.entryId].name:b_s.name;this.setNameTxt(b_e,d_u)}this.setHPComplete(),this.resetSize(this._designWid,this._designHg)},enumerable:!0,configurable:!0}),d_m.prototype.setNameTxt=function(e,p_l){void 0===p_l&&(p_l=null),this.m_nameTxt&&(p_l&&(this.m_nameTxt.style.color=p_l),this.m_nameTxt.innerHTML=e)},d_m.prototype.die=function(p_l){void 0===p_l&&(p_l=-1),this.m_moveCtrl&&this.m_moveCtrl.clearPath(),this.rawDie=!0,this.setAction(e.StandardActions.SA_DEAD,-1==p_l?this.m_fightingCtrl.curDir:p_l,!1)},d_m.prototype.coordChangeCallBack=function(){this.m_nCurrentCX==this.currentCx&&this.m_nCurrentCY==this.currentCy||(this.sortOnContainer(this.m_nCurrentCX,this.currentCx,this.m_nCurrentCY,this.currentCy),this.m_nCurrentCX=this.currentCx,this.m_nCurrentCY=this.currentCy)},d_m.prototype.setCurrentCxy=function(e,p_l){null!=this.m_moveCtrl?this.m_moveCtrl.setCurrentCxy(e,p_l,!0):p_g.prototype.setCurrentCxy.call(this,e,p_l)},d_m.prototype.removeStateClip=function(){this.m_stateClip&&(this.m_stateClip.stop(),this.m_stateClip.removeSelf(),this.m_stateClip.destroy(),this.m_stateClip=null,this.resetSize(this._designWid,this._designHg))},d_m.prototype.bodyLoadedComplete=function(e){this.m_moveCtrl&&this.m_moveCtrl.bodyLoadedComplete()},d_m.prototype.run=function(p_l){Afi(p_l,this,e)},d_m.prototype.updateTitle=function(){var e=LgcM.ins.getActorStdInfoById(this.id,this.type);if(e&&e.titleId&&Config.title_title[e.titleId]){this.m_titleIcon||(this.m_titleIcon=new Laya.Sprite,this.m_titleIcon.mouseEnabled=!1,this.m_fightingCtrl.addPopChild(this.m_titleIcon));var p_l=Config.title_title[e.titleId];this.m_titleIcon.on(Laya.Event.COMPLETE,this,this.onTitleLoad),this.m_titleIcon=Resource.ResManager.Instance.getImg(Resource.ResUrl.getIconUrl(p_l.icon),this.m_titleIcon)}else this.m_titleIcon&&(this.m_titleIcon.removeSelf(),this.m_titleIcon.destroy(),this.m_titleIcon=null,this.resetSize(this._designWid,this._designHg))},d_m.prototype.setAction=function(p_l,p_g,b_s,d_u){void 0===d_u&&(d_u=e.Animation.ANIMATION_INTERVAL),this.m_fightingCtrl.setAction(p_l,p_g,b_s,d_u)},d_m.prototype.onTitleLoad=function(){Msq(this,Laya)},d_m.prototype.setStateClip=function(e,p_l,p_g){e?(this.initStateClip(p_l,p_g),this.m_stateClip.play()):this.removeStateClip()},d_m.prototype.jump=function(p_l){Yhg(p_l,this,e)},d_m.prototype.setLevelTxt=function(e){},d_m.prototype.born=function(p_l){Kzw(p_l,this,e)},d_m.prototype.aniPlayComplete=function(p_l,p_g){p_l!=e.StandardActions.SA_DEAD&&this.stand(p_g),null!=this._actionBackFunc&&this._actionBackFunc.apply(null,[p_l,p_g])},d_m.prototype.setGuildTxt=function(e){e?(this.initGuildTxt(),this.m_guildTxt.changeText("["+e+"]")):this.m_guildTxt&&(this.m_guildTxt.removeSelf(),this.m_guildTxt.destroy(),this.m_guildTxt=null,this.resetSize(this._designWid,this._designHg))},d_m.prototype.stand=function(p_l){void 0===p_l&&(p_l=-1),this.setAction(e.StandardActions.SA_STAND,-1==p_l?this.m_fightingCtrl.curDir:p_l,!0)},d_m.prototype.sit=function(p_l,p_g){void 0===p_g&&(p_g=!1),this.setAction(e.StandardActions.SA_SIT,p_l,p_g)},d_m.prototype.setNameTxtVisible=function(e){this.m_progressHP&&(this.m_progressHP.visible=e),this.m_nameTxt&&(this.m_nameTxt.visible=e),this.m_progressShield&&(this.m_progressShield.visible=e),this.m_guildTxt&&(this.m_guildTxt.visible=e)},d_m.prototype.updatePosTxt=function(){},d_m.prototype.setSkinRootUrl=function(e){this.fightingCtrl&&this.fightingCtrl.setSkinRootUrl(e)},d_m.prototype.update=function(e){p_g.prototype.update.call(this,e),null!=this.m_moveCtrl&&this.m_moveCtrl.update(e),this.m_fightingCtrl&&this.m_fightingCtrl.update(e)},Object.defineProperty(d_m.prototype,"moveSpeed",{set:function(e){null!=this.m_moveCtrl&&(this.m_moveCtrl.speed=e)},enumerable:!0,configurable:!0}),Object.defineProperty(d_m.prototype,"defaultSpeed",{get:function(){return null!=this.m_moveCtrl?this.m_moveCtrl.defaultSpeed:200},set:function(e){null!=this.m_moveCtrl&&(this.m_moveCtrl.defaultSpeed=e)},enumerable:!0,configurable:!0}),Object.defineProperty(d_m.prototype,"currentCx",{get:function(){return e.MapUtils.pxTocx(this.x/e.CustomMap.MAP_RATE)},enumerable:!0,configurable:!0}),Object.defineProperty(d_m.prototype,"currentCy",{get:function(){return e.MapUtils.pyTocy(this.y/e.CustomMap.MAP_RATE)},enumerable:!0,configurable:!0}),d_m.prototype.moveTo=function(e,p_l,p_g,b_s,d_u,b_e,d_m){void 0===b_e&&(b_e=null),void 0===d_m&&(d_m=-1),null!=this.m_moveCtrl&&(this.m_moveCtrl.moveTo(e,p_l,p_g,b_s,d_u,b_e,d_m),LED.event("movetotarget"))},d_m.prototype.moveToCxy=function(p_l,p_g,b_s,d_u,b_e,d_m,d_w){void 0===d_m&&(d_m=null),void 0===d_w&&(d_w=-1),null!=this.m_moveCtrl&&(p_l=e.MapUtils.cxToPx(p_l),p_g=e.MapUtils.cyToPy(p_g),b_s=e.MapUtils.cxToPx(b_s),d_u=e.MapUtils.cyToPy(d_u),this.m_moveCtrl.moveTo(p_l,p_g,b_s,d_u,b_e,d_m,d_w))},d_m.prototype.jumpTo=function(e,p_l,p_g,b_s,d_u){null!=this.m_moveCtrl&&this.m_moveCtrl.jumpToPxy(p_g,b_s,d_u)},d_m.prototype.syncCurrentPxy=function(e,p_l,p_g){void 0===p_g&&(p_g=-1),p_g=p_g&&0<p_g?p_g:0,this.m_moveCtrl?(this.m_moveCtrl.syncCurrentPxy(e,p_l),0<p_g?this.stand(p_g):this.stand(this.m_moveCtrl.dir)):(this.setCurrentPxy(e,p_l),this.stand(p_g))},Object.defineProperty(d_m.prototype,"fightingCtrl",{get:function(){return this.m_fightingCtrl},enumerable:!0,configurable:!0}),Object.defineProperty(d_m,"selectedActor",{get:function(){return this._selectedActor},set:function(p_l){if(p_l!=this._selectedActor){if(this._selectedActor&&(this._selectedActor.type!==e.ActorTypeDefine.MONSTER||this._selectedActor.rawDie||(this._selectedActor.isShowNameHp=!1)),p_l&&p_l.type===e.ActorTypeDefine.MONSTER){var p_g=LgcM.ins.getActorStdInfoById(p_l.id,p_l.type);p_g&&Config.obj_monster[p_g.entryId]&&3===Config.obj_monster[p_g.entryId].type?p_l.isShowNameHp=!1:p_l.isShowNameHp=!0}this._selectedActor=p_l}LED.event(l_r.SELECTED_ACTOR_CHANGE,p_l)},enumerable:!0,configurable:!0}),d_m.prototype.destroy=function(e){this.m_progressShield&&(this.m_progressShield.removeSelf(),this.m_progressShield.destroy(!0),this.m_progressShield=null),this.m_fightingCtrl.dispose(),this.m_moveCtrl&&this.m_moveCtrl.dispose(),this.needDestroy()?(this.m_progressHP&&(this.m_progressHP.off(Laya.Event.CHANGE,this,this.setHPComplete),this.m_progressHP.removeSelf(),this.m_progressHP.destroy(!0),this.m_progressHP=null),this.m_nameTxt&&(this.m_nameTxt.removeSelf(),this.m_nameTxt.destroy(!0),this.m_nameTxt=null),p_g.prototype.destroy.call(this,!0)):(this.alpha=1,this.visible=!0,Resource.ResManager.Instance.recoverActor(this.type,this)),this._isShowNameHp=!1,this.rawDie=!1,this._zoomMoveRate=1},d_m.prototype.isBoss=function(){if(this.type===e.ActorTypeDefine.MONSTER){var p_l=LgcM.ins.getActorStdInfoById(this.id,this.type);if(!p_l)return!1;var p_g=Config.obj_monster[p_l.entryId];if(p_g&&3===p_g.type)return!0}return!1},d_m.prototype.resetHitArea=function(){b_p.canClickMove&&this.id!=b_p.playerId&&(this.type!==e.ActorTypeDefine.PLAYER&&this.type!==e.ActorTypeDefine.MONSTER&&this.type!==e.ActorTypeDefine.COLLECT&&this.type!==e.ActorTypeDefine.DROP||(this.mouseEnabled=!0,this.hitArea=new Laya.Rectangle(-this._designWid/2-20,20-this._designHg,this._designWid+40,this._designHg+40),this.on(Laya.Event.CLICK,this,this.onClick)))},d_m.prototype.takePosSnap=function(e,p_l,p_g,b_s){void 0===p_l&&(p_l=!1),void 0===p_g&&(p_g=!1),void 0===b_s&&(b_s=!1),this.fightingCtrl&&this.fightingCtrl.takePosSnap(e,p_l,p_g,b_s)},d_m.prototype.needDestroy=function(){return Ygd()},d_m.prototype.zoomMoveChange=function(e){this.parent&&this.m_moveCtrl&&this.m_moveCtrl.refleshPos(e)},Object.defineProperty(d_m.prototype,"zoomMoveRate",{get:function(){return this._zoomMoveRate},enumerable:!0,configurable:!0}),d_m.prototype.setCurrentPxy=function(p_l,b_s){Yzb(p_l,b_s,p_g,this,e)},d_m.prototype.clear=function(){this.m_progressShield&&(this.m_progressShield.removeSelf(),this.m_progressShield.destroy(!0),this.m_progressShield=null),this.m_fightingCtrl.clearAnimaOnly(),this.m_moveCtrl&&this.m_moveCtrl.clear(),this.m_progressHP&&(this.m_progressHP.visible=!1),this.m_nameTxt&&(this.m_nameTxt.visible=!1),this._isShowNameHp=!1,this.rawDie=!1,this._zoomMoveRate=1,this.visible=!0,this.alpha=1,Resource.ResManager.Instance.recoverActor(this.type,this)},d_m.MODEL_SCALE=.9,d_m.DefalutHeight=150,d_m.DefalutWidth=100,d_m),d_u=(p_l=e.CustomActor=b_s,__extends(b_e,p_l),b_e.prototype.init=function(){Yii(this,Laya)},b_e.prototype.updatePos=function(){var p_l=DungeonModel.instance.dropList.length,p_g=Utils.getPos(p_l,3,this._nameUI.width,this._nameUI.height,this.sWidth,5),b_s=110+p_g.x+120,d_u=GPlatform.stageHeight/4+80+p_g.y,b_e=e.GameMap.defaultMap.screenToCoord(b_s,d_u),d_m=e.MapUtils.cxToPx(b_e.x),d_w=e.MapUtils.cyToPy(b_e.y);this._pos.x=d_m,this._pos.y=d_w,this.x=d_m,this.y=d_w;var f_t=!(p_l>=DungeonModel.instance.dropShowMax);this.visible=f_t},Object.defineProperty(b_e.prototype,"sWidth",{get:function(){return this._nameUI?this._nameUI.sWidth:0},enumerable:!0,configurable:!0}),Object.defineProperty(b_e.prototype,"info",{get:function(){return LgcM.ins.getActorStdInfoById(this.id,e.ActorTypeDefine.DROP)},enumerable:!0,configurable:!0}),b_e.prototype.onAdd=function(){this._nameUI||(this._nameUI=Laya.Pool.getItemByClass("dropui",e.DropNameUI)),this.info&&this._nameUI.setData(this.info.itemId),this.updatePos(),this.addChild(this._nameUI),this.fightingCtrl.bodyAni.visible=!1,Laya.timer.once(2500,this,this.pickUp)},b_e.prototype.onRemove=function(){Laya.timer.clear(this,this.pickUp),this.tweenComplete(),this._nameUI&&this._nameUI.removeSelf()},b_e.prototype.pickUp=function(){Laya.timer.clear(this,this.pickUp);var e=t_s.local;if(e){var p_l=e.y-b_s.DefalutHeight/2;this._tween=Laya.Tween.to(this,{f_u:e.x,j_l:p_l},400,Laya.Ease.circIn,Laya.Handler.create(this,this.tweenComplete),null,!0)}},b_e.prototype.tweenComplete=function(){this._tween&&(this._tween.clear(),this._tween=null),this.info&&LED.event(l_r.DROP_START_PICK,this.info)},Object.defineProperty(b_e.prototype,"x",{set:function(e){this._x=this._pos.x},enumerable:!0,configurable:!0}),Object.defineProperty(b_e.prototype,"y",{set:function(e){this._y=this._pos.y},enumerable:!0,configurable:!0}),b_e);function b_e(p_g){void 0===p_g&&(p_g=0);var b_s=p_l.call(this,p_g,e.ActorTypeDefine.DROP)||this;return b_s._pos=new Laya.Point(0,0),b_s}function d_m(e,p_l){void 0===e&&(e=0),void 0===p_l&&(p_l=1);var b_s=p_g.call(this)||this;return b_s.id=0,b_s.type=0,b_s.m_needMoveCtrl=!1,b_s.rawDie=!1,b_s._isShowNameHp=!1,b_s._zoomMoveRate=1,b_s.rawDie=!1,b_s.type=p_l,b_s.id=e,b_s.mouseEnabled=!0,b_s.m_needMoveCtrl=!0,b_s}e.Drop=d_u;var d_w,f_t=(__extends(v_z,d_w=b_s),v_z.prototype.init=function(){this._isFistInit=!0,this.initController(),this.initProgressHP(1),this.m_progressHP.pos(-this.m_progressHP.width/2,-b_s.DefalutHeight),this.m_progressHP.visible=!1,this.initPaopao();var e=LgcM.ins.getActorStdInfoById(this.id,this.type);this.setHP(e.hp,e.hpUpper,!0),this.setNameTxt(e.name?e.name:Config.obj_monster[e.entryId].name),this.changeTalismanModel(e.fightingTs1,1),this.changeTalismanModel(e.fightingTs2,2),this.resetSize(b_s.DefalutWidth,b_s.DefalutHeight),this.resetHitArea()},v_z.prototype.bounceComplete=function(p_l){if(-1!==p_l){var p_g=Config.obj_monster[p_l];p_g&&p_g.disappearEffect&&(this.effectPlayComplete(),this._effectVo=Resource.ResManager.Instance.freeMonEffectVo,this._effectVo.playEffect(this,p_g.disappearEffect,e.Tools.BindDomain(this.effectPlayComplete,this))),this._footEft&&this._footEft.gotoAndStop()}},v_z.prototype.update=function(e){d_w.prototype.update.call(this,e),this.m_paopaoCtrl&&this.m_paopaoCtrl.update()},v_z.prototype.startPlayFootEffect=function(){Klf(this)},v_z.prototype.bodyLoadedComplete=function(p_l){d_w.prototype.bodyLoadedComplete.call(this,p_l);var p_g=LgcM.ins.getActorStdInfoById(this.id,this.type);if(p_g){var b_s=Config.obj_monster[p_g.entryId];if(b_s&&b_s.bornEffect&&this._isFistInit){this._isFistInit=!1,this._effectVo=Resource.ResManager.Instance.freeMonEffectVo;var d_u=this._effectVo.playEffect(this,b_s.bornEffect,e.Tools.BindDomain(this.effectPlayComplete,this),50);this.alpha=d_u?.7:1}if(b_s&&0<b_s.scale){var b_e=this.fightingCtrl.bodyAni.dir,d_m=b_s.scale;this.fightingCtrl.bodyAni.scale(4<b_e?-d_m:d_m,d_m)}}},v_z.prototype.playHitEffect=function(e){void 0===e&&(e=!1),20<=Laya.timer.delta||!this.visible||(this._hitEffectVo=this._hitEffectVo||Resource.ResManager.Instance.freeMonEffectVo,this._hitEffectVo.isPlaying||this._hitEffectVo.playEffectById(this,901,null,MonEffectType.IN_BODY))},v_z.prototype.initProgressHP=function(e){void 0===e&&(e=0),this.m_progressHP||(this.m_progressHP=new Laya.ProgressBar(Resource.ResUrl.getProgressBarSkin(e),!0),this.m_progressHP.speedTime=100,this.m_fightingCtrl.addPopChild(this.m_progressHP),this.m_progressHP.size(141,14))},v_z.prototype.changeTalismanModel=function(e,p_l){void 0===e&&(e=0),void 0===p_l&&(p_l=1);var p_g=Config.talisman_talisman[e],b_s=0===e?"":p_g?p_g.avatar:"",d_u=0,b_e=0;if(0<e&&p_g){var d_m=p_g.offset;d_m&&(d_u=d_m[0],b_e=d_m[1])}1===p_l?this.fightingCtrl.changeTsAttackModel(b_s,p_g?p_g.scale:1,d_u,b_e):this.fightingCtrl.changeTsDefModel(b_s,p_g?p_g.scale:1,d_u,b_e)},v_z.prototype.setBlendMode=function(e){void 0===e&&(e=0),Laya.timer.clear(this,this.setBlendMode),this.fightingCtrl&&this.fightingCtrl.bodyAni&&!this.rawDie&&(1===e?(this.fightingCtrl.bodyAni.filters=[Utils.Color.Filter_Light],Laya.timer.once(150,this,this.setBlendMode,[0],!0)):this.fightingCtrl.bodyAni.filters=null)},v_z.prototype.dieBounceTo=function(){var p_l=this.fightingCtrl.curDir,p_g=4<=(p_l=p_l<0?0:p_l)?p_l-4:p_l+4,b_s=e.MapUtils.calcForwardPosition(this.currentCx,this.currentCy,p_g,4);if(b_s){var d_u=LgcM.ins.getActorStdInfoById(this.id,this.type),b_e=d_u?d_u.entryId:-1,d_m=e.MapUtils.cxToPx(b_s.x)*e.CustomMap.MAP_RATE,d_w=e.MapUtils.cyToPy(b_s.y)*e.CustomMap.MAP_RATE;Laya.Tween.to(this,{f_u:d_m,j_l:d_w},220,null,Laya.Handler.create(this,this.bounceComplete,[b_e]))}},v_z.prototype.initPaopao=function(){if(!this.m_paopaoCtrl){var p_l=LgcM.ins.getActorStdInfoById(this.id,this.type),p_g=Config.obj_monster[p_l.entryId];p_g&&p_g.paopaos&&(this.m_paopaoCtrl=new e.PaopaoController(this),this.m_paopaoCtrl.setContent(p_g.paopaos),this.m_paopaoCtrl.setPosY(-200))}},v_z.prototype.destroy=function(e){d_w.prototype.destroy.call(this,e),this.effectPlayComplete(),this._footEft&&(this._footEft.dispose(),this._footEft=null),this._hitEffectVo&&(this._hitEffectVo.dispose(),this._hitEffectVo=null),this.m_paopaoCtrl&&(this.m_paopaoCtrl.dispose(),this.m_paopaoCtrl=null),Laya.timer.clear(this,this.setBlendMode)},v_z.prototype.effectPlayComplete=function(){this.alpha=1,this._effectVo&&(this._effectVo.dispose(),this._effectVo=null,this._isPlayFootEft&&(this._isPlayFootEft=!1,this._footEft=Resource.ResManager.Instance.freeMonEffectVo,this._footEft.playEffect(this,"gw_yun01",null,50,!0,1)))},v_z.prototype.clear=function(){this._isPlayFootEft=!1,this.effectPlayComplete(),this._footEft&&(this._footEft.dispose(),this._footEft=null),this._hitEffectVo&&(this._hitEffectVo.dispose(),this._hitEffectVo=null),this.m_paopaoCtrl&&(this.m_paopaoCtrl.dispose(),this.m_paopaoCtrl=null),this.m_titleTxt&&(this.m_titleTxt.removeSelf(),this.m_titleTxt.destroy(!0),this.m_titleTxt=null),Laya.timer.clear(this,this.setBlendMode),d_w.prototype.clear.call(this)},v_z);function v_z(p_l){return void 0===p_l&&(p_l=0),d_w.call(this,p_l,e.ActorTypeDefine.MONSTER)||this}e.Monster=f_t;var d_h,r_t=(__extends(t_n,d_h=b_s),t_n.prototype.init=function(){this.initController(),this.initNameTxt(Utils.Color.NAME_GREEN);var p_l=LgcM.ins.getActorStdInfoById(this.id,this.type),p_g=Config.obj_npc[p_l.entryId];this.setNameTxt(p_l.name?p_l.name:p_g.name),this.m_Info=p_l,0===p_g.click&&(this.hitArea=new Laya.Rectangle(-40,-50,80,100),this.on(Laya.Event.CLICK,this,this.onClick)),p_g.title&&(this.m_titleTxt=new Laya.TextInput,this.m_titleTxt.mouseEnabled=!1,this.m_titleTxt.font=b_p.config.font,this.m_titleTxt.fontSize=b_p.config.fontSize,this.m_titleTxt.width=4*b_s.DefalutWidth,this.m_titleTxt.height=25,this.m_titleTxt.align="center",this.m_titleTxt.color="#0ae9ec",this.m_fightingCtrl.addPopChild(this.m_titleTxt),this.m_titleTxt.zOrder=101,this.m_titleTxt.text=p_g.title),p_g.paopaos&&0<p_g.paopaos.length&&(this.m_paopaoCtrl=new e.PaopaoController(this),this.m_paopaoCtrl.setContent(p_g.paopaos)),this.m_NpcCfg=p_g,this.resetSize(b_s.DefalutWidth,b_s.DefalutHeight)},t_n.prototype.resetBounds=function(e,p_l,p_g){void 0===p_g&&(p_g=!1),p_g&&this.resetSize(e,p_l);var b_s=this.m_NpcCfg;b_s&&0===b_s.click&&(e=b_s.scale?b_s.scale*e:e,p_l=b_s.scale?b_s.scale*p_l:p_l,this.hitArea=new Laya.Rectangle(-e/2,-p_l,e,p_l))},t_n.prototype.bodyLoadedComplete=function(e){if(d_h.prototype.bodyLoadedComplete.call(this,e),this.m_Info){var p_l=this.m_NpcCfg;if(p_l&&0<p_l.scale){var p_g=this.fightingCtrl.bodyAni.dir,b_s=p_l.scale;this.fightingCtrl.bodyAni.scale(4<p_g?-b_s:b_s,b_s)}}},t_n.prototype.resetSize=function(e,p_l){var p_g=this.m_NpcCfg;p_g&&(e=p_g.scale?p_g.scale*e:e,p_l=p_g.scale?p_g.scale*p_l:p_l);var b_s=-p_l;this.m_nameTxt&&(b_s-=this.m_nameTxt.height,this.m_nameTxt.pos(-this.m_nameTxt.width/2,b_s)),this.m_titleTxt&&(b_s-=this.m_titleTxt.height,this.m_titleTxt.pos(-this.m_titleTxt.width/2,b_s)),this.m_paopaoCtrl&&this.m_paopaoCtrl.setPosY(b_s),this.resetHitArea()},t_n.prototype.destroy=function(e){d_h.prototype.destroy.call(this,e),this.m_paopaoCtrl&&(this.m_paopaoCtrl.dispose(),this.m_paopaoCtrl=null)},t_n);function t_n(p_l){return void 0===p_l&&(p_l=0),d_h.call(this,p_l,e.ActorTypeDefine.NPC)||this}e.Npc=r_t;var f_y,p_q=(__extends(h_h,f_y=b_s),h_h.prototype.init=function(){this.initController(),this.hitArea=new Laya.Rectangle(-40,-50,80,100),this.on(Laya.Event.CLICK,this,this.onClick)},h_h.prototype.resetBounds=function(e,p_l,p_g){void 0===p_g&&(p_g=!1),p_g&&this.resetSize(e,p_l),LgcM.ins.getActorStdInfoById(this.id,this.type),this.hitArea=new Laya.Rectangle(-e/2,-p_l,e,p_l)},h_h);function h_h(p_l){return void 0===p_l&&(p_l=0),f_y.call(this,p_l,e.ActorTypeDefine.COLLECT)||this}e.Collect=p_q;var n_j,j_l,l_m=(__extends(t_i,j_l=b_s),t_i.prototype.init=function(){j_l.prototype.init.call(this),this.m_nameTxt.style.color=Utils.Color.NAME_GREEN;var e=LgcM.ins.getActorStdInfoById(this.id,this.type);e&&(this.changeTalismanModel(e.fightingTs1,1),this.changeTalismanModel(e.fightingTs2,2),this.setNameAndStateInfo(),this.setGuildTxt(e.guildName),this.updateTitle(),this.isShowNameHp=!0,Config.map[b_p.mapID].id<10&&this.resetHitArea())},t_i.prototype.initDoubleCopy=function(e,p_l){void 0===p_l&&(p_l=-1),this._autoPlayCtrl||(this._autoPlayCtrl=new p_h(this)),this._autoPlayCtrl.setPos(e,p_l)},t_i.prototype.changeRide=function(e){void 0===e&&(e=0),this.fightingCtrl&&this.fightingCtrl.changeMount(e)},t_i.prototype.updateStateEfts=function(){var e=LgcM.ins.getActorStdInfoById(this.id,this.type);if(e&&e.isPlayerVisible){var p_l=Config.dragon_dragon[e.getDragonId()];if(p_l){var p_g=p_l.effect;if(p_g&&0<p_g.length){for(var b_s in this.stateEfts=this.stateEfts||[],this.stateEfts)this.stateEfts[b_s].dispose();for(var b_s in this.stateEfts=[],p_g){var d_u=new BuffEffectVo;d_u.playEffect(this,-1,p_g[b_s]),this.stateEfts.push(d_u)}}}}},t_i.prototype.destroy=function(e){j_l.prototype.destroy.call(this,e),this._autoPlayCtrl&&(this._autoPlayCtrl.clear(),this._autoPlayCtrl=null)},t_i.prototype.setCurrentPxy=function(p_l,p_g){j_l.prototype.setCurrentPxy.call(this,p_l,p_g),e.GameMap.defaultMap.hidden(this.m_nCurrentCX,this.m_nCurrentCY)?this.alpha=.6:this.alpha=1,WeatherController.instance.checkWeather(this.m_nCurrentCX,this.m_nCurrentCY)},t_i.prototype.setNameTxtVisible=function(e){j_l.prototype.setNameTxtVisible.call(this,e),this.m_teamTag&&(this.m_teamTag.visible=e?this.IsHaveTeam:e)},t_i.prototype.setNameAndStateInfo=function(){var e=LgcM.ins.heroVo,p_l=LgcM.ins.getActorStdInfoById(this.id,this.type);if(p_l&&e){var p_g=Utils.Color.NAME_GREEN,b_s=Config.state_state[p_l.stateLv],d_u=Utils.setStroke(p_l.name,2)+Utils.setSpace()+Utils.setColor(Utils.$(" [{1}]",b_s.desc),"#f0ecd8",2,b_s.strokeColor);this.setNameTxt(d_u,p_g),this.updateStateEfts()}},t_i.prototype.stopAutoCopy=function(){this._autoPlayCtrl&&this._autoPlayCtrl.clear()},t_i.prototype.changeTalismanModel=function(e,p_l){var p_g;void 0===e&&(e=0),void 0===p_l&&(p_l=1);var b_s="";0<e&&(p_g=Config.talisman_talisman[e],b_s=0===e?"":p_g?p_g.avatar:"");var d_u=0,b_e=0;if(0<e&&p_g){var d_m=p_g.offset;d_m&&(d_u=d_m[0],b_e=d_m[1])}1===p_l?this.fightingCtrl.changeTsAttackModel(b_s,p_g?p_g.scale:1,d_u,b_e):this.fightingCtrl.changeTsDefModel(b_s,p_g?p_g.scale:1,d_u,b_e)},t_i.prototype.initAndShowTeamTag=function(e){if(!this.m_teamTag){if(!e)return;this.m_teamTag=new Laya.Sprite,this.m_teamTag.mouseEnabled=!1,this.m_teamTag.size(51,52),this.m_fightingCtrl.addPopChild(this.m_teamTag),this.m_teamTag=Resource.ResManager.Instance.getImg(Resource.ResUrl.getIconUrl("office/zudui_qizhi.png"),this.m_teamTag)}e?(this.m_teamTag.visible=!0,this.IsHaveTeam=!0,this.m_teamTag.pos(-this.m_teamTag.width-this.m_nameTxt.contextWidth/2+5,this.m_progressHP.y-this.m_teamTag.height)):(this.m_teamTag.visible=!1,this.IsHaveTeam=!1)},t_i.prototype.setShowDamage=function(e){this._autoPlayCtrl||(this._autoPlayCtrl=new p_h(this)),this._autoPlayCtrl.IsShowHP=e},t_i.prototype.initAutoCopy=function(e){void 0===e&&(e=-1),this._autoPlayCtrl||(this._autoPlayCtrl=new p_h(this)),this._autoPlayCtrl.init(e)},t_i.prototype.update=function(e){j_l.prototype.update.call(this,e),this._autoPlayCtrl&&this._autoPlayCtrl.update(e)},Object.defineProperty(t_i.prototype,"moveActorCtrl",{get:function(){return this.m_moveCtrl},enumerable:!0,configurable:!0}),t_i.prototype.checkIsSameTarget=function(e,p_l){return Ckt(e,p_l,this)},t_i),z_m=(n_j=e.Player=l_m,__extends(h_b,n_j),h_b);function h_b(p_l){return void 0===p_l&&(p_l=0),n_j.call(this,p_l,e.ActorTypeDefine.ROBOT)||this}function t_i(p_l,p_g){void 0===p_l&&(p_l=0),void 0===p_g&&(p_g=e.ActorTypeDefine.PLAYER);var b_s=j_l.call(this,p_l,p_g)||this;return b_s.IsHaveTeam=!1,b_s.mouseEnabled=!0,b_s}e.Robot=z_m;var n_f,t_s=(__extends(v_n,n_f=l_m),v_n.prototype.initController=function(){this.m_needMoveCtrl&&(this.m_moveCtrl=new e.MoveMainController(this,e.Tools.BindDomain(this.coordChangeCallBack,this))),null==this.m_fightingCtrl&&(this.m_fightingCtrl=new e.FightingMainController(this,this.m_moveCtrl,e.Tools.BindDomain(this.bodyLoadedComplete,this),e.Tools.BindDomain(this.aniPlayComplete,this))),this.moveSpeed=500},v_n.prototype.coordChangeCallBack=function(){Asl(n_f,this,LED,l_r)},v_n.prototype.releaseSkill=function(e,p_l,p_g){return void 0===p_l&&(p_l=!1),void 0===p_g&&(p_g=!0),this.fightingMainCtrl.releaseSkill(e,p_l,p_g)},Object.defineProperty(v_n.prototype,"moveMainCtrl",{get:function(){return this.m_moveCtrl},enumerable:!0,configurable:!0}),Object.defineProperty(v_n.prototype,"fightingMainCtrl",{get:function(){return this.m_fightingCtrl},enumerable:!0,configurable:!0}),v_n.prototype.clickMap=function(e,p_l,p_g,b_s){if(void 0===p_g&&(p_g=null),void 0===b_s&&(b_s=!0),this.isSkillPlaying())return b_s&&b_p.broadcastNotice((j_x("1105_2191_2243")+j_x("1919_283")+","+j_x("2462_1919_562")+j_x(1069))),!1;if(this.moveMainCtrl.isJumping)return b_s&&b_p.broadcastNotice((j_x("372_1076_283")+","+j_x("2462_1919_562")+j_x(1069))),!1;var d_u=LgcM.ins.heroVo;return 0<d_u.dizzying?(b_s&&b_p.broadcastNotice((j_x("1340_730_283")+","+j_x("2462_1919_562")+j_x(1069))),!1):0<d_u.stopping?(b_s&&b_p.broadcastNotice((j_x("4_1920_283")+","+j_x("2462_1919_562")+j_x(1069))),!1):this.moveMainCtrl.leaveFor(e,p_l,p_g)},v_n.prototype.moveToObj=function(p_l,p_g){if(void 0===p_g&&(p_g=1),p_l){var b_s,d_u=LgcM.ins.getActorStdInfoById(p_l.id,p_l.type);p_l.type===e.ActorTypeDefine.NPC?b_s=new e.PathEndAction(e.PathEndActionType.NPC,d_u.id,d_u.entryId):p_l.type===e.ActorTypeDefine.COLLECT&&(b_s=new e.PathEndAction(e.PathEndActionType.COLLECT_PICK,d_u.id,d_u.entryId));var b_e=e.CustomMap.MAPCELLUNITWIDTH*p_g;if(e.MapUtils.calcDistance2(p_l.x,p_l.y,v_n.local.x,v_n.local.y)<=b_e*b_e){var d_m=this.moveMainCtrl.pathLocation;return d_m.arrivedAction=b_s,void LED.event(l_r.LOCAL_MOVE_END,d_m)}var d_w=e.MapUtils.calcPointsForwordStep(p_l.currentCx,p_l.currentCy,this.currentCx,this.currentCy,p_g);v_n.local.clickMap(d_w.x,d_w.y,b_s)}},v_n.prototype.isSkillPlaying=function(){return Mdf(this)},v_n.prototype.isMoving=function(){return!!this.m_moveCtrl&&this.m_moveCtrl.isMoving},v_n.prototype.canceMove=function(){Yxq(this)},Object.defineProperty(v_n.prototype,"needMoveMap",{set:function(e){this.moveMainCtrl.needMoveMap=e},enumerable:!0,configurable:!0}),v_n);function v_n(e){void 0===e&&(e=0);var p_l=n_f.call(this,e)||this;return v_n.local=p_l}e.Hero=t_s}(Engine2d=Engine2d||{}),function(e){var p_l,p_g=(p_l=ui.scene.DropNameUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){this._bezierPoints=[],this.x=0,Math.random(),this._bezierPoints=this.computeBezier([this.point(this.x,this.y),this.point(this.x-30-0,this.y-350-0),this.point(this.x-100-0,this.y+50),this.point(this.x-120-0,this.y)],24,this._bezierPoints);var e=Math.floor(500*Math.random());this._isJumpFirst=!0;var p_l=this;this.visible=!1,Laya.timer.once(e,this,(function(){p_l.visible=!0,Laya.timer.loop(32,p_l,p_l.moveJump)}))},b_s.prototype.point=function(e,p_l){return new Laya.Point(e,p_l)},b_s.prototype.computeBezier=function(e,p_l,p_g){void 0===p_g&&(p_g=null);for(var b_s=1/(p_l-1),d_u=p_g.length=0;d_u<p_l;d_u++)p_g[d_u]=this.culBezierPoint(e,d_u*b_s);return p_g},b_s.prototype.onRemove=function(){Mdo(Laya,this)},b_s.prototype.culBezierPoint=function(e,p_l,p_g){void 0===p_g&&(p_g=null),p_g=p_g||new Laya.Point;var b_s=3*(e[1].x-e[0].x),d_u=3*(e[2].x-e[1].x)-b_s,b_e=e[3].x-e[0].x-b_s-d_u,d_m=3*(e[1].y-e[0].y),d_w=3*(e[2].y-e[1].y)-d_m,f_t=e[3].y-e[0].y-d_m-d_w,v_z=p_l*p_l,d_h=v_z*p_l;return p_g.x=b_e*d_h+d_u*v_z+b_s*p_l+e[0].x,p_g.y=f_t*d_h+d_w*v_z+d_m*p_l+e[0].y,p_g},b_s.prototype.moveJump=function(){if(this._bezierPoints&&this._bezierPoints.length){var e=this._bezierPoints.shift();this.x=e.x,this.y=e.y,0===this._bezierPoints.length&&this._isJumpFirst&&(this._isJumpFirst=!1,Laya.timer.loop(4,this,this.moveJump),this._bezierPoints=this.computeBezier([this.point(this.x,this.y),this.point(this.x,this.y-100),this.point(this.x,this.y+20),this.point(this.x,this.y)],10,this._bezierPoints))}},b_s.prototype.setData=function(e){var p_l=Config.CItem(e);if(p_l){this.txt_name.color=Utils.ItemUtils.getQualityColor(p_l.quality),this.txt_name.text=p_l.name;var p_g=p_l.quality-1;p_g=p_g<0?0:p_g,this.clip_bg.index=p_g,this.item.isShowName=!1,this.item.isShowNum=!1,this.item.isShowBg=!1,this.item.isShowQuaEft=!1,this.item.setItemData(p_l)}},b_s);function b_s(){var e=p_l.call(this)||this;e._speed=2e-5,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.scaleX=e.scaleY=.7;var p_g=.7*e.width;return e.sWidth=e.width-p_g,e.width=p_g,e.height*=.7,e}e.DropNameUI=p_g}(Engine2d=Engine2d||{}),function(e){var p_l=(p_g.prototype.init=function(){this._underAppearance=new Laya.Sprite,this._actor.addChild(this._underAppearance),this._appearance=new Laya.Sprite,this._actor.addChild(this._appearance),this._popUpContainer=new Laya.Sprite,this._actor.addChild(this._popUpContainer),this._popUpContainer.mouseEnabled=!1,this._bodyAni=Laya.Pool.getItemByClass(PoolDefine.ANIMATION,e.Animation),this._appearance.addChild(this._bodyAni),this._bodyAni.on(Laya.Event.COMPLETE,this,this.onAnimationPlayCompleted),this._bodyAni.on(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onAnimLoadedComplete),this._bodyAni.mouseThrough=!0,this._bodyAni.pos(0,0)},p_g.prototype.addUnderChild=function(e,p_l){void 0===p_l&&(p_l=-1),this._underAppearance&&(0<=p_l?this._underAppearance.addChildAt(e,p_l):this._underAppearance.addChild(e))},p_g.prototype.addPopChild=function(e){this._popUpContainer&&this._popUpContainer.addChild(e)},p_g.prototype.addAppearanceChild=function(e){this._appearance&&this._appearance.addChild(e)},p_g.prototype.update=function(e){},p_g.prototype.sit=function(p_l,p_g){void 0===p_g&&(p_g=e.Animation.ANIMATION_INTERVAL),this.setAction(e.StandardActions.SA_SIT,p_l,!0,p_g)},p_g.prototype.collect=function(p_l,p_g){void 0===p_g&&(p_g=e.Animation.ANIMATION_INTERVAL),this.setAction(e.StandardActions.SA_COLLECT,p_l,!0,p_g)},p_g.prototype.state=function(p_l,p_g){void 0===p_l&&(p_l=0),void 0===p_g&&(p_g=e.Animation.ANIMATION_INTERVAL),this.setAction(e.StandardActions.SA_STATE,p_l,!0,p_g)},p_g.prototype.stand=function(p_l,p_g){void 0===p_g&&(p_g=e.Animation.ANIMATION_INTERVAL),this.setAction(e.StandardActions.SA_STAND,p_l,!0,p_g)},p_g.prototype.removePopChild=function(e){this._popUpContainer&&this._popUpContainer.addChild(e)},p_g.prototype.clearPopChild=function(){Sfu(this)},p_g.prototype.show=function(p_l,p_g){void 0===p_l&&(p_l=0),void 0===p_g&&(p_g=e.Animation.ANIMATION_INTERVAL),this.setAction(e.StandardActions.SA_SHOW,p_l,!0,p_g)},p_g.prototype.changeSkin=function(e,p_l,p_g){void 0===p_g&&(p_g=-1);var b_s=Resource.ResManager.getDefaultPlayerAvatar(e,p_l);this.setSkinRootUrl(b_s),p_g=-1===p_g?0:p_g,this.stand(p_g)},p_g.prototype.run=function(p_l,p_g){void 0===p_g&&(p_g=e.Animation.ANIMATION_INTERVAL),this.setAction(e.StandardActions.SA_RUN,p_l,!0,p_g)},p_g.prototype.setSkinRootUrl=function(e,p_l){void 0===p_l&&(p_l=!1),this._bodyAni.rootUrl=Resource.ResUrl.BASE_URL+e+"/",this._bodyAni.avatar=e,this._weaponAni&&p_l&&(this._weaponAni.removeSelf(),this._weaponAni.destroy(),this._weaponAni=null)},p_g.prototype.setAction=function(p_l,p_g,b_s,d_u){if(void 0===b_s&&(b_s=!1),void 0===d_u&&(d_u=e.Animation.ANIMATION_INTERVAL),this.isHide)this._bodyAni.visible=!1;else{this._bodyAni.visible=!0,p_l!==e.StandardActions.SA_SIT&&p_l!==e.StandardActions.SA_SING||(p_g=0),p_l!==e.StandardActions.SA_RUN&&p_l!==e.StandardActions.SA_STAND||this._mountAni&&(p_l=e.StandardActions.SA_STAND);var b_e=this.isBoss;this.setMountAction(p_l,p_g,b_s,d_u),this._talismanDefModel&&(this._talismanDefModel.visible=p_l!=e.StandardActions.SA_SIT&&p_l!=e.StandardActions.SA_COLLECT),this._bodyAni.setAction(p_l,p_g,b_s,d_u,1,!0,b_e),this._weaponAni&&this._weaponAni.setAction(p_l,p_g,b_s,d_u,1,!0),this._wingAni&&(p_l=p_l&&-1!=p_l.indexOf("attack")?p_l:e.StandardActions.SA_STAND,this._wingAni.setAction(p_l,p_g,b_s,d_u,1,!0))}},Object.defineProperty(p_g.prototype,"isBoss",{get:function(){return!!(this._actor&&this._actor instanceof e.CustomActor)&&this._actor.isBoss()},enumerable:!0,configurable:!0}),p_g.prototype.onAnimLoadedComplete=function(e){if(this._bodyAni&&this._bodyAni.url===e){if(!this._actor)return void this.dispose();this._bodyAni.pos(0,0),this._bodyAni.play(0,this._bodyAni.isLoop),null!=this._bodyLoadedCallBack&&this._bodyLoadedCallBack.call(null,[e]),this.checkLoadComplete()}},p_g.prototype.playAttackTsFadeOut=function(e){this._talismanAttModel&&(this._bornEft=this.showTsModel(this._bornEft,"effects/others",1,this._talismanAttModel.x,this._talismanAttModel.y,20,"fb_disappear"),Laya.Tween.to(this._talismanAttModel,{alpha:0,scaleX:0,scaleY:0},400,null,Laya.Handler.create(this,this.playAttackFadeOutComplete,[e]),null,!0))},p_g.prototype.changeTsAttackModel=function(e,p_l,p_g,b_s){if(void 0===p_l&&(p_l=1),void 0===p_g&&(p_g=-80),void 0===b_s&&(b_s=-120),!this.isHide)if(null==e||""===e)this._talismanAttModel&&(this._talismanAttModel.parent?this.playAttackTsFadeOut(null):(Resource.ResManager.Instance.recoverAnimation(this._talismanAttModel),this._talismanAttModel=null));else{if(this._talismanAttModel&&this._talismanAttModel.parent)return void this.playAttackTsFadeOut({url:e,scale:p_l,offsetX:p_g,offsetY:b_s});this._talismanAttModel=this.showTsModel(this._talismanAttModel,e,p_l,p_g,b_s)}},p_g.prototype.playDefTsFadeOut=function(e){this._talismanDefModel&&Laya.Tween.to(this._talismanDefModel,{alpha:0},400,null,Laya.Handler.create(this,this.playDefComplete,[e]),null,!0)},p_g.prototype.onWeaponAnimLoadedComplete=function(p_l){if(this._weaponAni&&this._weaponAni.url===p_l){if(!this._actor)return;this._weaponAni.play(0,this._weaponAni.isLoop),this.checkLoadComplete(),this._weaponAni.visible=this.curAction!=e.StandardActions.SA_SIT&&this.curAction!=e.StandardActions.SA_SING}},p_g.prototype.onOtherAnimLoadedComplete=function(e,p_l){e&&e.url==p_l&&(e.isPlaying||e.play(0,e.isLoop),this.resetAnimPivot(e),e===this._talismanDefModel&&(e.stop(),this.playDefTsBorn()),e===this._talismanAttModel&&this.playAttackTsBorn(),e===this._mountAni&&(this.checkLoadComplete(),this._mountAni.visible=!0),e===this._bornEft&&(this._appearance.setChildIndex(this._bornEft,0),Laya.Tween.to(this._bornEft,{alpha:0,scaleX:0,scaleY:0},400,null,null,null,!0)))},p_g.prototype.showTsModel=function(p_l,p_g,b_s,d_u,b_e,d_m,d_w){return void 0===b_s&&(b_s=1),void 0===d_u&&(d_u=10),void 0===b_e&&(b_e=-35),void 0===d_m&&(d_m=e.Animation.ANIMATION_INTERVAL),void 0===d_w&&(d_w=null),null==(p_l=p_l||Resource.ResManager.Instance.freeAnimation).parent&&this._appearance.addChild(p_l),p_l.x=d_u,p_l.y=b_e,p_l.rootUrl=Resource.ResUrl.BASE_URL+p_g+"/",p_l.on(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onOtherAnimLoadedComplete,[p_l]),p_l.setAction(null!=d_w?d_w:e.StandardActions.SA_STAND,0,!0,d_m,b_s,!0),p_l},p_g.prototype.checkLoadComplete=function(e){if(void 0===e&&(e=!1),e){if(this._checkCount++,4<this._checkCount)return}else this._checkCount=0;var p_l=0;this._bodyAni&&(this.resetAnimPivot(this._bodyAni,!0)||p_l++,this._bodyAni.pos(0,0)),this._weaponAni&&(this.resetAnimPivot(this._weaponAni,!1,!0)?this._weaponAni.visible=!0:(p_l++,this._weaponAni.visible=!1),this._weaponAni.pos(0,0)),this._mountAni&&(this.resetAnimPivot(this._mountAni)?this._mountAni.visible=!0:(p_l++,this._mountAni.visible=!1),this._mountAni.pos(0,0),this.changeMountEftPivot()),this._wingAni&&(this.resetAnimPivot(this._wingAni)?this._wingAni.visible=!0:(p_l++,this._wingAni.visible=!1),this._wingAni.pos(0,0)),0<p_l&&Laya.timer.once(150,this,this.checkLoadComplete,[!0])},p_g.prototype.setMountAction=function(p_l,p_g,b_s,d_u){if(void 0===b_s&&(b_s=!1),void 0===d_u&&(d_u=e.Animation.ANIMATION_INTERVAL),this._mountAni&&(p_l===e.StandardActions.SA_SIT||p_l===e.StandardActions.SA_SING||p_l===e.StandardActions.SA_COLLECT?this._mountAni.visible=!1:this._mountAni.visible=!0,this._mountAni.setAction(e.StandardActions.SA_STAND,p_g,!0,d_u,1,!0),this._mountEfts))for(var b_e in this._mountEfts)this._mountEfts[b_e].setAction(e.StandardActions.SA_STAND,p_g,!0,d_u),this._mountEfts[b_e].visible=this._mountAni.visible},p_g.prototype.changeTsDefModel=function(e,p_l,p_g,b_s){if(void 0===p_l&&(p_l=1),void 0===p_g&&(p_g=10),void 0===b_s&&(b_s=-35),!this.isHide)if(null==e||""===e)this._talismanDefModel&&(this._talismanDefModel.parent?this.playDefTsFadeOut(null):(Resource.ResManager.Instance.recoverAnimation(this._talismanDefModel),this._talismanDefModel=null));else{if(this._talismanDefModel&&this._talismanDefModel.parent)return void this.playDefTsFadeOut({url:e,scale:p_l,offsetX:p_g,offsetY:b_s});this._talismanDefModel=this.showTsModel(this._talismanDefModel,e,p_l,p_g,b_s)}},p_g.prototype.playDefBornComplete=function(){this._talismanDefModel&&this._talismanDefModel.play(0,this._talismanDefModel.isLoop)},p_g.prototype.changeWing=function(p_l,p_g){if(void 0===p_l&&(p_l=""),void 0===p_g&&(p_g=e.Animation.ANIMATION_INTERVAL),!this.isHide){var b_s="wing/wing01";this._wingAni||(this._wingAni=Resource.ResManager.Instance.freeAnimation),null===this._wingAni.parent&&this._underAppearance.addChild(this._wingAni),this._wingAni.pos(0,0),this._wingAni.avatar=b_s,this._wingAni.rootUrl=Resource.ResUrl.BASE_URL+b_s+"/",this._wingAni.on(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onWingAnimLoadedComplete);var d_u=this._bodyAni.action?this._bodyAni.action:e.StandardActions.SA_STAND;d_u=d_u&&-1!=d_u.indexOf("attack")?d_u:e.StandardActions.SA_STAND,this._wingAni.setAction(d_u,this._bodyAni.dir,this._bodyAni.isLoop,p_g,1,!0)}},p_g.prototype.changeWeapon=function(p_l,p_g){if(void 0===p_g&&(p_g=e.Animation.ANIMATION_INTERVAL),!this.isHide)if(null===p_l||""===p_l)this._weaponAni&&(this._weaponAni.off(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onOtherAnimLoadedComplete),Resource.ResManager.Instance.recoverAnimation(this._weaponAni),this._weaponAni=null);else{this._weaponAni||(this._weaponAni=Resource.ResManager.Instance.freeAnimation),null===this._weaponAni.parent&&this._appearance.addChild(this._weaponAni),this._weaponAni.pos(0,0),this._weaponAni.avatar=p_l,this._weaponAni.rootUrl=Resource.ResUrl.BASE_URL+p_l+"/",this._weaponAni.on(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onWeaponAnimLoadedComplete);var b_s=this._bodyAni.action?this._bodyAni.action:e.StandardActions.SA_STAND;this._weaponAni.setAction(b_s,this._bodyAni.dir,this._bodyAni.isLoop,p_g,1,!0)}},p_g.prototype.changeMountEftPivot=function(){if(this._mountEfts)for(var e in this._mountEfts)this._mountEfts[e].ani&&this._mountEfts[e].resetAnimPivot(this._mountEfts[e].ani)},p_g.prototype.onWingAnimLoadedComplete=function(e){if(this._wingAni&&this._wingAni.url===e){if(!this._actor)return;this._wingAni.play(0,this._wingAni.isLoop),this.checkLoadComplete(),this._wingAni.removeSelf(),this._wingAni.dir<3||5<this._wingAni.dir?this._appearance.addChild(this._wingAni):this._underAppearance.addChild(this._wingAni)}},p_g.prototype.playDefTsBorn=function(){if(this._talismanDefModel){var p_l=UIM.instance.getMainUI();if(p_l){this._talismanDefModel.scaleX=this._talismanDefModel.scaleY=.1;var p_g=p_l.getDefTsPos();(p_g=e.GameMap.defaultMap.screenToCoord(p_g.x,p_g.y)).x=Math.abs(this._actor.currentCx-p_g.x),p_g.y=Math.abs(this._actor.currentCy-p_g.y),p_g.x*=e.CustomMap.MAPCELLUNITWIDTH,p_g.y*=e.CustomMap.MAPCELLUNITHEIGHT;var b_s=this._talismanDefModel.x,d_u=this._talismanDefModel.y;this._talismanDefModel.x=-p_g.x,this._talismanDefModel.y=-p_g.y;var b_e=this._talismanDefModel.curScale;Laya.Tween.to(this._talismanDefModel,{scaleX:b_e,scaleY:b_e,f_u:b_s,j_l:d_u},1e3,null,Laya.Handler.create(this,this.playDefBornComplete),null,!0)}}},p_g.prototype.changeMount=function(p_l,p_g){if(void 0===p_l&&(p_l=0),void 0===p_g&&(p_g=-1),!this.isHide){if(0<(this._rideId=p_l)&&Config.ride_ride[p_l]){var b_s=Config.ride_ride[p_l].model;this._mountAni||(this._mountAni=Resource.ResManager.Instance.freeAnimation),null===this._mountAni.parent&&(this._underAppearance.addChildAt(this._mountAni,0),this._mountAni.visible=!1),this._mountAni.x=this._mountAni.y=0,p_g=-1===p_g?this._bodyAni.dir:p_g,this._mountAni.avatar=b_s,this._mountAni.rootUrl=Resource.ResUrl.BASE_URL+b_s+"/",this._mountAni.on(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onOtherAnimLoadedComplete,[this._mountAni]),this._mountAni.setAction(e.StandardActions.SA_STAND,p_g,!0,this._bodyAni.interval,1,!0)}else this._mountAni&&(this._mountAni.off(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onOtherAnimLoadedComplete),Resource.ResManager.Instance.recoverAnimation(this._mountAni),this._mountAni=null);this.changeMountEffect()}},p_g.prototype.onAnimationPlayCompleted=function(){this._bodyAni&&0==this._bodyAni.loop&&this._aniPlayEndCallBack.call(null,this._bodyAni.action,this._bodyAni.dir)},p_g.prototype.playAttackFadeOutComplete=function(e){if(this._bornEft&&(this._bornEft.scaleX=this._bornEft.scaleY=0,this._bornEft.alpha=0,Resource.ResManager.Instance.recoverAnimation(this._bornEft),this._bornEft=null),!e)return Resource.ResManager.Instance.recoverAnimation(this._talismanAttModel),void(this._talismanAttModel=null);this.showTsModel(this._talismanAttModel,e.url,e.scale,e.offsetX,e.offsetY)},p_g.prototype.playAttackTsBorn=function(){if(this._talismanAttModel){var p_l=UIM.instance.getMainUI();if(p_l){this._talismanAttModel.scaleX=this._talismanAttModel.scaleY=.1;var p_g=p_l.getAttackTsPos();(p_g=e.GameMap.defaultMap.screenToCoord(p_g.x,p_g.y)).x=Math.abs(this._actor.currentCx-p_g.x),p_g.y=Math.abs(this._actor.currentCy-p_g.y),p_g.x*=e.CustomMap.MAPCELLUNITWIDTH,p_g.y*=e.CustomMap.MAPCELLUNITHEIGHT;var b_s=this._talismanAttModel.x,d_u=this._talismanAttModel.y;this._talismanAttModel.x=-p_g.x,this._talismanAttModel.y=-p_g.y;var b_e=this._talismanAttModel.curScale;Laya.Tween.to(this._talismanAttModel,{scaleX:b_e,scaleY:b_e,f_u:b_s,j_l:d_u},1e3,null,null,null,!0)}}},p_g.prototype.playDefComplete=function(e){return Ocf(e,Resource,this)},p_g.prototype.changeMountEffect=function(){if(this._mountEfts){for(var e in this._mountEfts)this._mountEfts[e].dispose();this._mountEfts=null}if(this._rideId&&Config.ride_ride[this._rideId]){var p_l=Config.ride_ride[this._rideId].effects;if(p_l){this._mountEfts=[];var p_g=void 0;for(var e in p_l)(p_g=new MountAniEffectVo).playEffect(this._actor,p_l[e][0],this._mountAni.dir,p_l[e][1],p_l[e][2]),this._mountEfts.push(p_g)}}else this._rideId=null},p_g.prototype.resetAnimPivot=function(p_l,p_g,b_s){if(void 0===p_g&&(p_g=!1),void 0===b_s&&(b_s=!1),!p_l)return!0;var d_u=p_l.getGraphicBounds();if(d_u&&0!=d_u.width&&0!=d_u.height){var b_e=d_u.height/2,d_m=d_u.width/2,d_w=e.Tools.getPivotConfig(p_l.avatar);if(d_w){if(b_e+=d_w.offsetPivotY,p_g){var f_t=!1;d_w.size&&(f_t=!0,this._actor.resetSize(d_w.size[0],d_w.size[1])),d_w.bounds&&this._actor.resetBounds(d_w.bounds[0],d_w.bounds[1],!f_t)}0==d_w.posX&&0==d_w.posY||(p_l.x=d_w.posX,p_l.y=d_w.posY)}else b_s&&this._bodyAni&&(b_e=this._bodyAni.pivotY,d_m=this._bodyAni.pivotX);return p_l.pivotX!=d_m&&(p_l.pivotX=d_m),p_l.pivotY!=b_e&&(p_l.pivotY=b_e),!0}return!1},Object.defineProperty(p_g.prototype,"curAction",{get:function(){return this._bodyAni.action},enumerable:!0,configurable:!0}),Object.defineProperty(p_g.prototype,"curDir",{get:function(){return this._bodyAni?this._bodyAni.dir:4},enumerable:!0,configurable:!0}),Object.defineProperty(p_g.prototype,"isActionPlaying",{get:function(){return this._bodyAni.isPlaying},enumerable:!0,configurable:!0}),Object.defineProperty(p_g.prototype,"bodyAni",{get:function(){return this._bodyAni},enumerable:!0,configurable:!0}),Object.defineProperty(p_g.prototype,"mountAni",{get:function(){return this._mountAni},enumerable:!0,configurable:!0}),p_g.prototype.stop=function(){this._bodyAni&&this._bodyAni.stop(),this._talismanAttModel&&this._talismanAttModel.stop(),this._talismanDefModel&&this._talismanDefModel.stop()},Object.defineProperty(p_g.prototype,"aniDuration",{get:function(){return this._bodyAni.frames.length*this._bodyAni.interval},enumerable:!0,configurable:!0}),p_g.prototype.dispose=function(){if(this._isFadeOut)this.fadeOut();else{var p_l=!0;this._actor&&this._actor instanceof e.CustomActor&&(p_l=this._actor.needDestroy()),p_l?null!=this._bodyAni&&(this._bodyAni.off(Laya.Event.COMPLETE,this,this.onAnimationPlayCompleted),this._bodyAni.off(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onAnimLoadedComplete),Resource.ResManager.Instance.cancelLoadByUrl(this._bodyAni.url),Resource.ResManager.Instance.recoverAnimation(this._bodyAni),this._bodyAni=null):(Resource.ResManager.Instance.cancelLoadByUrl(this._bodyAni.url),Resource.ResManager.Instance.stayReleaseAniRes(this._bodyAni.url)),null!=this._mountAni&&(Resource.ResManager.Instance.cancelLoadByUrl(this._mountAni.url),Resource.ResManager.Instance.recoverAnimation(this._mountAni),this._mountAni=null),this._rideId=null,this.changeMountEffect(),null!=this._weaponAni&&(Resource.ResManager.Instance.cancelLoadByUrl(this._weaponAni.url),Resource.ResManager.Instance.recoverAnimation(this._weaponAni),this._weaponAni=null),null!=this._wingAni&&(Resource.ResManager.Instance.cancelLoadByUrl(this._wingAni.url),Resource.ResManager.Instance.recoverAnimation(this._wingAni),this._wingAni=null),this._talismanDefModel&&(Resource.ResManager.Instance.cancelLoadByUrl(this._talismanDefModel.url),Resource.ResManager.Instance.recoverAnimation(this._talismanDefModel),this._talismanDefModel=null),this._talismanAttModel&&(Resource.ResManager.Instance.cancelLoadByUrl(this._talismanAttModel.url),Resource.ResManager.Instance.recoverAnimation(this._talismanAttModel),this._talismanAttModel=null),this._actor&&this._actor.parent&&this._actor.removeSelf(),this._actor=null,this._popUpContainer&&(this._popUpContainer.removeSelf(),this._popUpContainer.destroy(!0)),this._underAppearance&&(this._underAppearance.removeSelf(),this._underAppearance.destroy(!0)),this._appearance&&(this._appearance.removeSelf(),this._appearance.destroy(!0)),Laya.timer.clearAll(this),this._popUpContainer=this._underAppearance=this._appearance=null}},p_g.prototype.fadeOut=function(){},Object.defineProperty(p_g.prototype,"isFadeOut",{get:function(){return this._isFadeOut},enumerable:!0,configurable:!0}),p_g.prototype.takePosSnap=function(e,p_l,p_g,b_s){if(void 0===p_l&&(p_l=!1),void 0===p_g&&(p_g=!1),void 0===b_s&&(b_s=!1),p_l){var d_u=this._bodyAni.index;this._actor&&this._actor.parent&&this._bodyAni.frames&&null!=this._bodyAni.frames&&e.setBodySnap(this._bodyAni.frames[d_u],this._bodyAni.dir,this._bodyAni.x,this._bodyAni.y,this._bodyAni.pivotX,this._bodyAni.pivotY)}},Object.defineProperty(p_g.prototype,"getPlayerInfo",{get:function(){if(this._actor&&this._actor instanceof e.CustomActor){var p_l=LgcM.ins.getActorStdInfoById(this._actor.id,e.ActorTypeDefine.PLAYER);if(p_l)return p_l}return null},enumerable:!0,configurable:!0}),Object.defineProperty(p_g.prototype,"isHide",{get:function(){var e=this.getPlayerInfo;return e&&!e.isPlayerVisible},enumerable:!0,configurable:!0}),p_g.prototype.clearAnimaOnly=function(){null!=this._bodyAni&&this._bodyAni.reClear(),null!=this._mountAni&&this._mountAni.reClear(),null!=this._weaponAni&&this._weaponAni.reClear(),this._talismanDefModel&&this._talismanDefModel.reClear(),this._talismanAttModel&&this._talismanAttModel.reClear()},p_g);function p_g(e,p_l,p_g){void 0===p_g&&(p_g=null),this._nAction=-1,this._actor=e,this._bodyLoadedCallBack=p_l,this._aniPlayEndCallBack=p_g,this.init(),this._isFadeOut=!1}e.ModelController=p_l}(Engine2d=Engine2d||{}),function(e){var p_l=(p_g.prototype.clone=function(){var e=new p_g;return this.read(e),e},p_g.prototype.read=function(e){Avu(e,this)},p_g.prototype.getSpeed=function(e){return Ybs(e)},p_g.prototype.getMountSpeed=function(e){return Kvz(e,this)},p_g);function p_g(){}e.MoveNode=p_l;var b_s,d_u=(Object.defineProperty(d_w.prototype,"moveEndTime",{get:function(){return this.m_nMoveEndTime},enumerable:!0,configurable:!0}),Object.defineProperty(d_w.prototype,"currentPy",{get:function(){return this.m_actor.y/e.CustomMap.MAP_RATE},enumerable:!0,configurable:!0}),Object.defineProperty(d_w.prototype,"currentPx",{get:function(){return this.m_actor.x/e.CustomMap.MAP_RATE},enumerable:!0,configurable:!0}),Object.defineProperty(d_w.prototype,"targetCx",{get:function(){return e.MapUtils.pxTocx(this._nTargetPx)},enumerable:!0,configurable:!0}),Object.defineProperty(d_w.prototype,"targetCy",{get:function(){return e.MapUtils.pyTocy(this._nTargetPy)},enumerable:!0,configurable:!0}),Object.defineProperty(d_w.prototype,"targetPy",{get:function(){return this._nTargetPy},enumerable:!0,configurable:!0}),Object.defineProperty(d_w.prototype,"targetPx",{get:function(){return this._nTargetPx},enumerable:!0,configurable:!0}),Object.defineProperty(d_w.prototype,"dir",{get:function(){return this.m_nDir},set:function(e){0<=e&&(this.m_nDir=e)},enumerable:!0,configurable:!0}),d_w.prototype.reset=function(){Eut(this)},d_w.prototype.pixelsToCoord=function(e,p_l){},d_w.prototype.moveToNext=function(){var p_l=this.popPath();p_l&&this.moveTo(this.currentPx,this.currentCy,e.MapUtils.cxToPx(p_l.nX),e.MapUtils.cyToPy(p_l.nY),this.defaultSpeed)},d_w.prototype.setCurrentCxy=function(e,p_l,p_g){void 0===p_g&&(p_g=!1),e==this.currentCx&&p_l==this.currentCy&&!p_g||(this.coordToPixels(e,p_l),this.setPixelXY(this._nTargetPx,this._nTargetPy))},d_w.prototype.coordToPixels=function(p_l,p_g){Qcf(p_l,p_g,this,e)},d_w.prototype.cancelMove=function(){Ofn(this)},d_w.prototype.update=function(e){this.m_nMoveEndTime&&(this.m_nMoveEndTime>e?this.doMove(e):this.endMove()),this._paths&&(this.m_nMoveEndTime<=0&&0<this._paths.length?this.moveToNext():this.m_nMoveEndTime<=0&&0===this._paths.length&&this.targetLocationArrived())},d_w.prototype.targetLocationArrived=function(){this._paths&&this.m_actor.event(l_r.DUMMY_MOVE_END),this._paths=null},d_w.prototype.dispose=function(){this._paths&&(this._paths.length=0);var p_l=!(this._paths=null);this.m_actor&&this.m_actor instanceof e.CustomActor&&(p_l=this.m_actor.needDestroy()),p_l&&(this.m_actor=null,this.m_coordChangeCallBack=null),this.m_actor=null},d_w.prototype.clear=function(){Mig(this)},d_w.prototype.setPixelXY=function(e,p_l){this.setActorPos(e,p_l),this._nTargetPx=this.m_nCurrentPx=e,this._nTargetPy=this.m_nCurrentPy=p_l,null!=this.m_coordChangeCallBack&&this.m_coordChangeCallBack.call(null)},Object.defineProperty(d_w.prototype,"speed",{get:function(){return this.m_nSpeed},set:function(e){this.m_nSpeed=e},enumerable:!0,configurable:!0}),Object.defineProperty(d_w.prototype,"defaultSpeed",{get:function(){return-1===this.m_defaultSpeed?250:this.m_defaultSpeed},set:function(e){-1===this.m_defaultSpeed&&(this.m_defaultSpeed=e)},enumerable:!0,configurable:!0}),Object.defineProperty(d_w.prototype,"currentCy",{get:function(){return e.MapUtils.pyTocy(this.m_nCurrentPy)},enumerable:!0,configurable:!0}),Object.defineProperty(d_w.prototype,"currentCx",{get:function(){return e.MapUtils.pxTocx(this.m_nCurrentPx)},enumerable:!0,configurable:!0}),d_w.prototype.clearPath=function(){this._paths&&(this._paths.length=0)},d_w.prototype.endMove=function(){Wes(this)},d_w.prototype.setPaths=function(e,p_l){void 0===p_l&&(p_l=!1),this._paths=e,this._paths&&this._paths.length&&p_l&&this.moveToNext()},d_w.prototype.addPath=function(e){Evz(e,this)},d_w.prototype.popPath=function(){return Uyv(this)},d_w.prototype.getTick=function(){return Oce(SyncTime)},d_w.prototype.resetCurrentPos=function(){Oat(this,e)},d_w.prototype.setActorPos=function(e,p_l){Qlw(e,p_l,this)},d_w.prototype.moveTo=function(p_l,p_g,b_s,d_u,b_e){this._nTargetPx==b_s&&this._nTargetPy==d_u||(this._nTargetPx=b_s,this._nTargetPy=d_u,this.resetCurrentPos(),!b_e||isNaN(b_e)?b_e=this.m_nSpeed:this.m_nSpeed=b_e,this.m_nMoveLen=Math.floor(e.MapUtils.calcDistance(this.m_nCurrentPx,this.m_nCurrentPy,this._nTargetPx,this._nTargetPy)),this.m_dwRadian=e.MapUtils.calcPosRadian(this.m_nCurrentPx,this.m_nCurrentPy,this._nTargetPx,this._nTargetPy),this.m_nMoveStartTime=this.getTick(),this.calSpeed(),this.m_nDir=Math.floor(e.MapUtils.radianToDir(this.m_dwRadian)),this.moving=!0)},d_w.prototype.doMove=function(e){var p_l=this.getTick()-this.m_nMoveStartTime,p_g=Math.floor(this.m_dwMoveSpeed*Math.cos(this.m_dwRadian)*p_l),b_s=Math.floor(this.m_dwMoveSpeed*Math.sin(this.m_dwRadian)*p_l);this.setActorPos(this.m_nCurrentPx+p_g,this.m_nCurrentPy+b_s)},d_w.prototype.calSpeed=function(){Qic(this)},d_w.prototype.refleshPos=function(e){void 0===e&&(e=1)},d_w),b_e=(b_s=e.MoveController=d_u,__extends(d_m,b_s),d_m.prototype.setBounds=function(e,p_l,p_g,b_s){Wop(e,p_l,p_g,b_s,this)},d_m.prototype.moveTo=function(e,p_l,p_g,d_u,b_e){Guv(e,p_l,p_g,d_u,b_e,b_s,this)},d_m.prototype.resetCurrentPos=function(){Kha(this)},d_m.prototype.coordToPixels=function(p_l,p_g){Gih(p_l,p_g,this,e)},d_m.prototype.endMove=function(){Utn(b_s,this)},d_m.prototype.doMove=function(e){var p_l=e-this.m_nMoveStartTime,p_g=Math.floor(this.m_dwMoveSpeed*Math.cos(this.m_dwRadian)*p_l),b_s=Math.floor(this.m_dwMoveSpeed*Math.sin(this.m_dwRadian)*p_l);this.applyToTarget(this.m_nCurrentPx+p_g,this.m_nCurrentPy+b_s)},d_m.prototype.applyToTarget=function(p_l,p_g){p_l<this._left&&(p_l=this._left),p_l>this._right&&(p_l=this._right),p_g<this._top&&(p_g=this._top),p_g>this._bottom&&(p_g=this._bottom),p_l=Math.floor(p_l),p_g=Math.floor(p_g),this.processPx=p_l,this.processPy=p_g,this.funLocate.call(null,-this.processPx*e.CustomMap.MAP_RATE,-this.processPy*e.CustomMap.MAP_RATE,e.CustomMap.MAP_RATE)},d_m.prototype.dispose=function(){Qmb(b_s,this)},d_m.prototype.setPixelXY=function(e,p_l){Quo(e,p_l,this)},d_m.prototype.refleshPos=function(e){void 0===e&&(e=1),this.moving||null!=this.funLocate&&this.funLocate.call(null,-this.processPx*e,-this.processPy*e,e)},d_m);function d_m(e,p_l){var p_g=b_s.call(this,e,p_l)||this;return p_g.processPx=0,p_g.processPy=0,p_g}function d_w(e,p_l){this.moving=!1,this.m_defaultSpeed=-1,this.m_nCurrentPx=0,this.m_nCurrentPy=0,this._nTargetPx=0,this._nTargetPy=0,this.m_actor=e,this.m_coordChangeCallBack=p_l,this.reset()}e.MoveMapController=b_e;var f_t,v_z,d_h=(__extends(f_y,v_z=d_u),f_y.prototype.update=function(e){this.m_nMoveEndTime&&this.m_boJumping&&(this.m_nMoveEndTime>e?this.runJump(e):this.endJump()),v_z.prototype.update.call(this,e)},f_y.prototype.jumpTo=function(p_l,p_g,b_s){void 0===b_s&&(b_s=0),this.jumpToPxy(e.MapUtils.cxToPx(p_l),e.MapUtils.cyToPy(p_g),b_s)},f_y.prototype.endJump=function(){Ams(this)},f_y.prototype.runJump=function(p_l){125<p_l-this.m_jumCurTime&&(this.m_jumCurTime=p_l,e.ActorPosSnapFactory.takeActorPosSnap(this.actor,800,!0))},f_y.prototype.moveTo=function(e,p_l,p_g,b_s,d_u,b_e,d_m){void 0===b_e&&(b_e=null),void 0===d_m&&(d_m=-1),this._nTargetPx==p_g&&this._nTargetPy==b_s||(v_z.prototype.moveTo.call(this,e,p_l,p_g,b_s,d_u),b_e?(d_m=0<=d_m?d_m:this.dir,this.actor.setAction(b_e,d_m,!1)):this.m_boJumping||this.actor.run(this.dir))},f_y.prototype.endMove=function(){Otr(v_z,this)},f_y.prototype.bodyLoadedComplete=function(){},f_y.prototype.jumpToPxy=function(p_l,p_g,b_s){void 0===b_s&&(b_s=0),this.m_boJumping=!0,this.actor.jump(e.MapUtils.calcPosDir(this.actor.x,this.actor.y,p_l,p_g)),this.moveTo(this.actor.x,this.actor.y,p_l,p_g,b_s)},f_y.prototype.doMove=function(e){v_z.prototype.doMove.call(this,e),this.actor&&this.actor.updatePosTxt()},f_y.prototype.setActorPos=function(e,p_l){Krf(e,p_l,this)},Object.defineProperty(f_y.prototype,"actor",{get:function(){return this.m_actor},enumerable:!0,configurable:!0}),Object.defineProperty(f_y.prototype,"isMoving",{get:function(){return this.moving},enumerable:!0,configurable:!0}),Object.defineProperty(f_y.prototype,"isJumping",{get:function(){return this.m_boJumping},enumerable:!0,configurable:!0}),f_y.prototype.checkCurIsSame=function(p_l,p_g){return!!this.actor&&e.MapUtils.pxTocx(this.actor.x/e.CustomMap.MAP_RATE)==p_l&&e.MapUtils.pyTocy(this.actor.y/e.CustomMap.MAP_RATE)==p_g},f_y.prototype.syncCurrentPxy=function(e,p_l){Ulz(e,p_l,this)},Object.defineProperty(f_y.prototype,"actorVo",{get:function(){return LgcM.ins.getActorStdInfoById(this.actor.id,this.actor.type)},enumerable:!0,configurable:!0}),f_y.prototype.calJumpSpeed=function(p_l,p_g){return Wpq(p_l,p_g,e,this)},f_y.prototype.refleshPos=function(e){void 0===e&&(e=1),this.moving&&this.endMove(),null!=this.actor&&(this.actor.x=this.processPx*e,this.actor.y=this.processPy*e)},f_y),r_t=(f_t=e.MoveActorController=d_h,__extends(t_n,f_t),Object.defineProperty(t_n.prototype,"needMoveMap",{set:function(e){this._needMoveMap=e},enumerable:!0,configurable:!0}),Object.defineProperty(t_n.prototype,"pathLocation",{get:function(){return this._pathLocation},enumerable:!0,configurable:!0}),Object.defineProperty(t_n.prototype,"isOnlyClientMove",{get:function(){return this._isOnlyClientMove},set:function(e){this._isOnlyClientMove=e},enumerable:!0,configurable:!0}),t_n.prototype.update=function(e){f_t.prototype.update.call(this,e),this.m_nMoveEndTime||this._boUnderPath&&this.hasPath&&this._isOnlyClientMove&&this.moveToNext()},t_n.prototype.moveToNext=function(){var p_l=this.popPath();p_l&&(0==this._isOnlyClientMove?this.reqMove(p_l.nX,p_l.nY):this.moveTo(this.currentPx,this.currentPy,e.MapUtils.cxToPx(p_l.nX),e.MapUtils.cyToPy(p_l.nY),this.actorVo.speed),p_l=null)},t_n.prototype.popPath=function(){return this._aAsPath?this._aAsPath.pop():f_t.prototype.popPath.call(this)},t_n.prototype.leaveFor=function(e,p_l,p_g){if(void 0===p_g&&(p_g=null),this._boUnderFlyFor=!1,this._pathLocation&&this._pathLocation.locationX==e&&this._pathLocation.locationY==p_l)return!0;this.clearPath();var b_s=this.pathTo(e,p_l,p_g);return b_s&&this.moveToNext(),b_s},Object.defineProperty(t_n.prototype,"asPath",{get:function(){return this._aAsPath},enumerable:!0,configurable:!0}),Object.defineProperty(t_n.prototype,"hasPath",{get:function(){return null!=this._aAsPath&&0<this._aAsPath.length},enumerable:!0,configurable:!0}),t_n.prototype.moveTo=function(p_l,p_g,b_s,d_u,b_e,d_m,d_w){void 0===d_m&&(d_m=null),void 0===d_w&&(d_w=-1),this._nTargetPx==b_s&&this._nTargetPy==d_u||(f_t.prototype.moveTo.call(this,p_l,p_g,b_s,d_u,b_e,d_m,d_w),b_e=this.m_boJumping?.65*b_e:b_e,this._needMoveMap&&e.GameMap.defaultMap.moveTo(p_l,p_g,b_s,d_u,b_e),this.m_boJumping)},t_n.prototype.cancelMove=function(){Knl(f_t,this)},t_n.prototype.clearPath=function(){f_t.prototype.clearPath.call(this),this._aAsPath&&(this._aAsPath.length=0),this._pathLocation&&this._pathLocation.destruct(),this._boUnderPath=!1},t_n.prototype.endMove=function(){var e=this.moving;f_t.prototype.endMove.call(this),e&&this.hasPath?this.moveToNext():(this.actor.stand(this.dir),this.targetLocationArrived())},t_n.prototype.endPath=function(){Iat(this)},t_n.prototype.pathTo=function(p_l,p_g,b_s){void 0===b_s&&(b_s=null);var d_u=!1;if(p_l!=this.targetCx||p_g!=this.targetCy){var b_e=e.GameMap.defaultMap.getPath(p_l,p_g,this.currentCx,this.currentCy);b_e&&b_e.length&&(this._pathLocation.locationX=p_l,this._pathLocation.locationY,this._pathLocation.arrivedAction=b_s,this._aAsPath=b_e,this._boUnderPath=d_u=!0,LED.event(l_r.LOCAL_PATH_START,b_e))}else this._pathLocation.locationX=p_l,this._pathLocation.locationY,this._pathLocation.arrivedAction=b_s,this.isMoving||this.targetLocationArrived();return d_u},t_n.prototype.delayEnd=function(e){Cpl(e,Laya,this,LED,l_r)},t_n.prototype.targetLocationArrived=function(){var e=this._pathLocation;this._pathLocation&&this._pathLocation.arrivedAction&&(e=this._pathLocation.clone()),n_m.instance.isHangUpMap()?Laya.timer.once(600,this,this.delayEnd,[e]):LED.event(l_r.LOCAL_MOVE_END,e),this.endPath(),this._pathLocation.destruct(),this._boUnderFlyFor=!1},t_n.prototype.getPathCount=function(){return this._aAsPath?this._aAsPath.length:0},Object.defineProperty(t_n.prototype,"isMoving",{get:function(){return this.hasPath&&this._boUnderPath||this.moving||this.isJumping},enumerable:!0,configurable:!0}),t_n.prototype.syncCurrentPxy=function(p_l,p_g){f_t.prototype.syncCurrentPxy.call(this,p_l,p_g),this._boUnderFlyFor?this.targetLocationArrived():this.clearPath(),this._needMoveMap&&e.GameMap.defaultMap.syncCurrentPxy(p_l,p_g)},t_n.prototype.dispose=function(){Abq(f_t,this)},t_n.prototype.reqMove=function(p_l,p_g,b_s,d_u){if(void 0===b_s&&(b_s=null),void 0===d_u&&(d_u=null),e.GameMap.defaultMap.moveable(p_l,p_g)){var b_e=new c2m_movement_start;return b_e.fpx=this.currentPx,b_e.fpy=this.currentPy,b_e.tpx=e.MapUtils.cxToPx(p_l),b_e.tpy=e.MapUtils.cyToPy(p_g),b_e.session=0,b_e.act=b_s,b_e.speed=b_s==e.StandardActions.SA_JUMP?this.calJumpSpeed(b_e.tpx,b_e.tpy):d_u,DB.instance.query(c2m_movement_start,b_e),!0}return!1},t_n);function t_n(p_l,p_g){var b_s=f_t.call(this,p_l,p_g)||this;return b_s._isOnlyClientMove=!1,b_s._pathLocation=new e.PathLocation,b_s._needMoveMap=!0,b_s}function f_y(e,p_l){var p_g=v_z.call(this,e,p_l)||this;return p_g.m_boJumping=!1,p_g.m_jumCurTime=0,p_g.processPx=0,p_g.processPy=0,p_g}e.MoveMainController=r_t}(Engine2d=Engine2d||{}),function(e){var p_l=(p_g.prototype.setPosY=function(e){this._startPosY=e,this._paopaoPanel&&this._paopaoPanel.pos(-this._paopaoPanel.width/2,e-this._paopaoPanel.height-10)},p_g.prototype.update=function(){var e=SyncTime.tickCount-this._lastTime;e>this._interval?(this.updateContent(),this._lastTime=SyncTime.tickCount):e>this._stayTime&&(this._paopaoPanel.visible=!1)},p_g.prototype.setContent=function(e){var p_l=Config.global[GlobalDefine.npc_paopao_time].t_info;this._contents=e,this._interval=1e3*p_l[1],this._stayTime=1e3*p_l[0],this._lastTime=SyncTime.tickCount,this._curIndex=0,this._paopaoPanel||(this._paopaoPanel=new d_u,this._actor.fightingCtrl.addPopChild(this._paopaoPanel),this._paopaoPanel.visible=!1,this.updateContent())},p_g.prototype.updateContent=function(){this._paopaoPanel&&(this._paopaoPanel.visible=!0,this._paopaoPanel.content=this._contents[this._curIndex],this._paopaoPanel.pos(-this._paopaoPanel.width/2,this._startPosY-this._paopaoPanel.height-10),this._curIndex++,this._curIndex>=this._contents.length&&(this._curIndex=0))},p_g.prototype.dispose=function(){this._paopaoPanel&&(this._paopaoPanel.destroy(),this._paopaoPanel=null)},p_g);function p_g(e){this._startPosY=0,this._actor=e}e.PaopaoController=p_l;var b_s,d_u=(b_s=ui.window.npc.chat_paopaoUI,__extends(b_e,b_s),Object.defineProperty(b_e.prototype,"content",{set:function(e){this.contentTxt.innerHTML=e;var p_l=this.contentTxt.contextWidth<this._rect.width?this._rect.width:this.contentTxt.contextWidth;this.contentTxt.width=p_l;var p_g=this.contentTxt.contextHeight<this._rect.height?this._rect.height:this.contentTxt.contextHeight;this.contentTxt.height=p_g,this.bgImg.width=p_l+15,this.bgImg.height=p_g+45,this.width=this.bgImg.width,this.height=this.bgImg.height},enumerable:!0,configurable:!0}),b_e);function b_e(){var e=b_s.call(this)||this;return e.contentTxt.style.font=b_p.config.font,e.contentTxt.style.valign="middle",e.contentTxt.style.color=Config.global[GlobalDefine.npc_paopao_time].s_info,e.contentTxt.style.fontSize=b_p.config.fontSize,e.contentTxt.style.wordWrap=!0,e._rect=new Laya.Rectangle(e.contentTxt.x,e.contentTxt.y,e.contentTxt.width,e.contentTxt.height),e}e.PaopaoChatLine=d_u}(Engine2d=Engine2d||{}),function(e){var p_l,p_g=(p_l=Laya.Sprite,__extends(b_s,p_l),b_s.prototype.takeActorSnap=function(e,p_l,p_g,b_s,d_u){void 0===b_s&&(b_s=!1),void 0===d_u&&(d_u=!1),e.takePosSnap(this,p_g,b_s,d_u),this.x=e.x,this.y=e.y,this._dwKeepTime=p_l,this._dwDisappearTick=SyncTime.tickCount+p_l,this.alpha=.7},b_s.prototype.setBodySnap=function(e,p_l,p_g,b_s,d_u,b_e){void 0===p_g&&(p_g=0),void 0===b_s&&(b_s=0),void 0===d_u&&(d_u=0),void 0===b_e&&(b_e=0),this._bodySp.scaleX=4<p_l?-1:1,this._bodySp.graphics=e,this._bodySp.x=p_g,this._bodySp.y=b_s,this._bodySp.pivot(d_u,b_e)},b_s.prototype.update=function(e){var p_l=this._dwDisappearTick-e;return p_l<=0?(this.clear(),!1):(this._bodySp.graphics&&(this.alpha=p_l/this._dwKeepTime*.7),!0)},b_s.prototype.clear=function(){this._bodySp.graphics&&this._bodySp.graphics.clear(!0)},b_s);function b_s(){var e=p_l.call(this)||this;return e._bodySp=new Laya.Sprite,e.addChild(e._bodySp),e.mouseEnabled=e._bodySp.mouseEnabled=!1,e}e.ActorPosSnap=p_g}(Engine2d=Engine2d||{}),function(e){var p_l,p_g=(p_l=e.CustomMap,__extends(b_s,p_l),b_s.prototype.update=function(e){},b_s.prototype.rebuildDisplayArea=function(e,p_l){Ork(e,p_l,this)},b_s.prototype.sortPostion=function(e,p_l){var p_g=this.m_currentTilePos.distance(e._posX,e._posY),b_s=this.m_currentTilePos.distance(p_l._posX,p_l._posY);if(b_s<p_g)return-1;if(p_g<b_s)return 1;var d_u=this.m_currentTilePos.x-e._posX-(this.m_currentTilePos.y-e._posY),b_e=this.m_currentTilePos.x-p_l._posX-(this.m_currentTilePos.y-p_l._posY);return d_u<0&&(d_u=-d_u),b_e<0&&(b_e=-b_e),d_u<b_e?-1:b_e<d_u?1:0},b_s.prototype.setCurrentPosition=function(e,p_l,p_g){void 0===p_g&&(p_g=!1),e<0||p_l<0||e>=this.m_nWidth||p_l>=this.m_nHeight||this.m_nCurrentX==e&&this.m_nCurrentY==p_l&&0==p_g||(this.m_nCurrentX=e,this.m_nCurrentY=p_l,this.showMapContent(e,p_l))},b_s.prototype.setDisplayContainer=function(e){this.m_mapLayerRoot.parent&&this.m_mapLayerRoot.parent.removeChild(this.m_mapLayerRoot),(this.m_DiplayContainer=e)&&e.addChild(this.m_mapLayerRoot)},b_s.prototype.reDistributeMapLayers=function(p_l,p_g,b_s){void 0===b_s&&(b_s=!0);var d_u,b_e=this.calcMapContentRange(p_l,p_g),d_m=b_e._nLeft,d_w=b_e._nTop,f_t=b_e._nRight,v_z=b_e._nBottom,d_h=d_m*e.CustomMap.MAPCELLUNITWIDTH,r_t=d_w*e.CustomMap.MAPCELLUNITHEIGHT,t_n=(p_g=d_w)*this.m_nWidth+d_m,f_y=e.CustomMap.MAPCELLUNITWIDTH*e.CustomMap.MAPTILEHBLOCK,p_q=e.CustomMap.MAPCELLUNITHEIGHT*e.CustomMap.MAPTILEVBLOCK,h_h=e.MapUtils.cxToPx(p_l),n_j=e.MapUtils.cyToPy(p_g);this.m_currentTilePos.x=h_h/e.CustomMap.MAPTILEWIDTH>>0,this.m_currentTilePos.y=n_j/e.CustomMap.MAPTILEHEIGHT>>0;for(var j_l=!0;p_g<=v_z;){p_l=d_m;for(var l_m=d_h,z_m=t_n;p_l<=f_t;){var h_b=this.m_Cells[z_m];null!=h_b&&0<h_b._nBkImgIdx&&(j_l&&(j_l=!1,Resource.MapResManager.instance.resetTileTimeState()),Resource.MapResManager.instance.checkIsDraw(h_b._nBkImgIdx,this.m_fileId,!0)||(h_b.setPos(l_m,r_t),(d_u=d_u||new Array).push(h_b))),p_l+=e.CustomMap.MAPTILEHBLOCK,l_m+=f_y,z_m+=e.CustomMap.MAPTILEHBLOCK}p_g+=e.CustomMap.MAPTILEVBLOCK,r_t+=p_q,t_n+=this.m_nWidth*e.CustomMap.MAPTILEVBLOCK}if(d_u){1<d_u.length&&(d_u=d_u.sort(this.sortPostion.bind(this)));for(var t_i=0;t_i<d_u.length;t_i++)Resource.MapResManager.instance.loadTileImage(d_u[t_i],this.m_fileId);d_u=null}return null},b_s.prototype.calcMapContentRange=function(p_l,p_g,d_u,b_e){void 0===d_u&&(d_u=-1),void 0===b_e&&(b_e=-1),this._rect||(this._rect=new e.Rectangle);var d_m=this._rect;return d_m._nLeft=p_l-this.m_nHCellCount-e.CustomMap.MAPTILEHBLOCK,d_m._nTop=p_g-this.m_nVCellCount-e.CustomMap.MAPTILEVBLOCK+b_s.MAP_VERTICAL_OFFSET_COORD,d_m._nRight=p_l+this.m_nHCellCount+e.CustomMap.MAPTILEHBLOCK,d_m._nBottom=p_g+this.m_nVCellCount+e.CustomMap.MAPTILEVBLOCK-b_s.MAP_VERTICAL_OFFSET_COORD,d_m._nLeft<0&&(d_m._nLeft=0),d_m._nTop<0&&(d_m._nTop=0),d_m._nLeft-=d_m._nLeft%e.CustomMap.MAPTILEHBLOCK,d_m._nTop-=d_m._nTop%e.CustomMap.MAPTILEVBLOCK,d_u=0<d_u?d_u:this.m_nWidth,b_e=0<b_e?b_e:this.m_nHeight,d_m._nRight>=d_u&&(d_m._nRight=d_u-1),d_m._nBottom>=b_e&&(d_m._nBottom=b_e-1),d_m},b_s.prototype.updateLayersPosition=function(){},b_s.prototype.setLayersPosition=function(e,p_l,p_g){void 0===p_g&&(p_g=1),this.m_mapLayerRoot.x=e+this.m_nDisplayCenterX+this.m_nLayersOffsetX,b_s.CANMOVETOEDGE&&(0<this.m_mapLayerRoot.x?this.m_mapLayerRoot.x=0:this.m_mapLayerRoot.x<this.m_nDisplayWidth-this.m_nWidthPixel*p_g&&(this.m_mapLayerRoot.x=this.m_nDisplayWidth-this.m_nWidthPixel*p_g)),this.m_mapLayerRoot.y=p_l+this.m_nDisplayCenterY+this.m_nLayersOffsetY,b_s.CANMOVETOEDGE&&(0<this.m_mapLayerRoot.y?this.m_mapLayerRoot.y=0:this.m_mapLayerRoot.y<this.m_nDisplayHeight-this.m_nHeightPixel*p_g&&(this.m_mapLayerRoot.y=this.m_nDisplayHeight-this.m_nHeightPixel*p_g))},b_s.prototype.removeOutOfDisplaySizeImages=function(e,p_l){},b_s.prototype.getRoundResByPos=function(e,p_l){return Aaj(e,p_l,this)},b_s.prototype.showMapContent=function(e,p_l){Ago(e,p_l,this)},b_s.prototype.clearBuilding=function(e,p_l,p_g){Qcd(e,p_l,p_g,this)},b_s.prototype.setMinimapData=function(){this.m_Ground.graphics.clear(!0);var p_l=this.getMinimapUrl(),p_g=Laya.loader.getRes(p_l);if(p_g){var b_s=this.m_nWidth*e.CustomMap.MAPCELLUNITWIDTH,d_u=this.m_nHeight*e.CustomMap.MAPCELLUNITHEIGHT;this.m_Ground.graphics.drawTexture(p_g,0,0,b_s,d_u)}},b_s.prototype.setBuilding=function(e,p_l,p_g){e&&this.m_Ground.graphics.drawTexture(e,p_l,p_g,e.width,e.height)},b_s.prototype.updateContent=function(){},b_s.prototype.mapGray=function(e,p_l){if(void 0===p_l&&(p_l=!1),e<1){if(this.m_GroundMark||(this.m_GroundMark=new Laya.Sprite,this.m_GroundMark.graphics.drawRect(0,0,Stage.width,Stage.height,"#000000"),this.m_GroundMark.alpha=0),!this.m_GroundMark.parent){this.m_Ground.addChild(this.m_GroundMark);var p_g=this.m_Ground.globalToLocal(new Laya.Point(0,0));this.m_GroundMark.pos(p_g.x,p_g.y),p_l&&(this.m_GroundMark.alpha=0),Laya.Tween.to(this.m_GroundMark,{alpha:.15},300)}}else this.m_GroundMark&&this.m_GroundMark.parent&&this.m_GroundMark.removeSelf()},Object.defineProperty(b_s.prototype,"mapContent",{get:function(){return this.m_Ground},enumerable:!0,configurable:!0}),b_s.prototype.setDisplaySize=function(p_l,p_g){p_l==this.m_nDisplayWidth&&p_g==this.m_nDisplayHeight||(this.m_nDisplayWidth=p_l,this.m_nDisplayHeight=p_g,this.m_nDisplayCenterX=p_l/2,this.m_nDisplayCenterY=p_g/2+e.CustomMap.MAPCELLUNITHEIGHT,this.m_nHCellCount=Math.floor(this.m_nDisplayCenterX/e.CustomMap.MAPCELLUNITWIDTH),this.m_nDisplayWidth%e.CustomMap.MAPCELLUNITWIDTH&&this.m_nHCellCount++,this.m_nVCellCount=Math.floor(this.m_nDisplayCenterY/e.CustomMap.MAPCELLUNITHEIGHT),this.m_nDisplayHeight%e.CustomMap.MAPCELLUNITHEIGHT&&this.m_nVCellCount++,this.isLoadMap&&this.updateMapContent())},b_s.prototype.updateMapContent=function(){Swi(this)},b_s.prototype.clearAllObj=function(){if(this.m_Object&&this.m_Object.numChildren)for(;0<this.m_Object.numChildren;)this.m_Object.removeChildAt(0)},b_s.prototype.addAboveObject=function(e){Gzz(e,this)},b_s.prototype.removeAboveObject=function(e){Ama(e,this)},b_s.prototype.screenToCoord=function(p_l,p_g){var b_s=new Laya.Point(Math.floor(p_l-this.m_mapLayerRoot.x)/e.CustomMap.MAPCELLUNITWIDTH,Math.floor(p_g-this.m_mapLayerRoot.y)/e.CustomMap.MAPCELLUNITHEIGHT);return b_s.x<0&&(b_s.x=0),b_s.x>=this.m_nWidth&&(b_s.x=this.m_nWidth-1),b_s.y<0&&(b_s.y=0),b_s.y>=this.m_nHeight&&(b_s.y=this.m_nHeight-1),b_s.x=Math.floor(b_s.x),b_s.y=Math.floor(b_s.y),b_s},b_s.prototype.addUnderObject=function(e){Soi(e,this)},b_s.prototype.removeUnderObject=function(e){Gdo(e,this)},b_s.prototype.addObject=function(e){Aru(e,this)},b_s.prototype.coordToScreenXY=function(p_l,p_g){return Adh(p_l,p_g,this,e)},b_s.prototype.removeObject=function(e){Gpq(e,this)},b_s.prototype.clearMap=function(){if(this.m_Ground.graphics.clear(!0),0<this.m_lastFileId&&this.m_lastFileId!=this.m_fileId){var e=Resource.ResUrl.MAPRES_URL+this.m_lastFileId+"/minimap.jpg";Laya.loader.clearTextureRes(e)}},b_s.MAP_VERTICAL_OFFSET_COORD=-1,b_s.CANMOVETOEDGE=!0,b_s);function b_s(){var e=p_l.call(this)||this;return e.m_nCurrentX=0,e.m_nCurrentY=0,e.m_nHCellCount=0,e.m_nVCellCount=0,e.m_nShowContentX=0,e.m_nShowContentY=0,e.m_nDisplayWidth=0,e.m_nDisplayHeight=0,e.m_nDisplayCenterX=0,e.m_nDisplayCenterY=0,e.m_nLayersOffsetX=0,e.m_nLayersOffsetY=0,e.m_DiplayContainer=null,e.m_helpPoint=new Laya.Point,e.m_mapLayerRoot=new Laya.Sprite,e.m_Ground=new Laya.Sprite,e.m_mapLayerRoot.addChild(e.m_Ground),e.m_under=new Laya.Sprite,e.m_mapLayerRoot.addChild(e.m_under),e.m_Object=new Laya.Sprite,e.m_mapLayerRoot.addChild(e.m_Object),e.m_aboveObject=new Laya.Sprite,e.m_mapLayerRoot.addChild(e.m_aboveObject),e.m_currentTilePos=new Laya.Point,e}e.CustomRenderMap=p_g}(Engine2d=Engine2d||{}),function(e){var p_l,p_g,b_s=(p_g=e.CustomRenderMap,__extends(d_m,p_g),d_m.prototype.loadMap=function(e,p_l,p_g){this.isLoadMap=!1,this.setMapInfo(e,p_l,p_g);var b_s=[];b_s.push({url:p_g,type:Laya.Loader.BUFFER}),Laya.loader.load(b_s,Laya.Handler.create(this,this.startParseMap))},d_m.prototype.setMapInfo=function(e,p_l,p_g){Gbv(e,p_l,p_g,this)},Object.defineProperty(d_m.prototype,"mapId",{get:function(){return this.m_nMapID},enumerable:!0,configurable:!0}),d_m.prototype.startParseMap=function(e,p_l){var p_g=Laya.loader.getRes(this.m_url),b_s=new Laya.Byte(p_g);this.load(b_s),this.isLoadMap=!0,b_s&&(b_s.clear(),b_s=null)},d_m.prototype.endMove=function(){},d_m.prototype.startSetMap=function(e,p_l){Owe(e,p_l,this)},d_m.prototype.isCaneMove=function(e,p_l,p_g,b_s){return!!this.m_asPath&&this.m_asPath.isCaneMove(e,p_l,p_g,b_s)},d_m.prototype.getTick=function(){return Ybp(SyncTime)},d_m.prototype.update=function(e){Wml(e,p_g,this)},d_m.prototype.getGlobalPoint=function(e,p_l){var p_g=new Laya.Point(e,p_l);return this.m_mapLayerRoot.localToGlobal(p_g),p_g},d_m.prototype.shake=function(e,p_l,p_g,b_s){void 0===e&&(e=1),void 0===p_l&&(p_l=10),void 0===p_g&&(p_g=10),void 0===b_s&&(b_s=320),this._nShakeRangeX=p_l*e,this._nShakeRangeY=p_g*e,this._dwShakingOverTick=SyncTime.tickCount+b_s},d_m.prototype.stopMove=function(){Mag(this)},d_m.prototype.moveTo=function(e,p_l,p_g,b_s,d_u){},d_m.prototype.getPath=function(e,p_l,p_g,b_s){return void 0===p_g&&(p_g=-1),void 0===b_s&&(b_s=-1),-1==p_g&&(p_g=this.m_nCurrentX),-1==b_s&&(b_s=this.m_nCurrentY),this.m_asPath?this.m_asPath.getBestPath(p_g,b_s,e,p_l):null},d_m.prototype.processMove=function(e){},d_m.prototype.runShakeEffect=function(e){if(SyncTime.tickCount<this._dwShakingOverTick){var p_l=this.m_nLayersOffsetX,p_g=this.m_nLayersOffsetY;this.m_nLayersOffsetX=-this._nShakeRangeX/2+SyncTime.tickCount%this._nShakeRangeX,this.m_nLayersOffsetY=-this._nShakeRangeY/2+SyncTime.tickCount%this._nShakeRangeY,p_l===this.m_nLayersOffsetX&&0!=this._nShakeRangeX&&(this.m_nLayersOffsetX+=1e3*Math.random()%11-6),p_g===this.m_nLayersOffsetY&&0!=this._nShakeRangeY&&(this.m_nLayersOffsetY+=1e3*Math.random()%11-6)}else this.m_nLayersOffsetX=this.m_nLayersOffsetY=0,this._dwShakingOverTick=0},d_m),d_u=(p_l=e.CustomGameMap=b_s,__extends(b_e,p_l),b_e.prototype.moveTo=function(e,p_g,b_s,d_u,b_e){p_l.prototype.moveTo.call(this,e,p_g,b_s,d_u,b_e),this._moveCtrl.moving&&this.suspendMove(),this._moveCtrl.moveTo(e,p_g,b_s,d_u,b_e)},b_e.prototype.updateZoomMove=function(){var p_l=SyncTime.tickCount;if(p_l<=this._zoomEndTime){var p_g=this._zoomEndTime-p_l;p_g=this._distZoomValue<0?1+p_g/this._zoomMoveTime*Math.abs(this._distZoomValue):1+(1-p_g/this._zoomMoveTime)*Math.abs(this._distZoomValue),this.zoomMoveTo(p_g)}else this.zoomMoveTo(e.CustomMap.MAP_RATE),this._zoomEndTime=this._zoomMoveTime=0,Laya.timer.once(500,this,this.delayZoomComplete)},b_e.prototype.setCurrentXY=function(e,p_l){null!=this._moveCtrl&&this._moveCtrl.setCurrentCxy(e,p_l,!0),this.setCurrentPosition(e,p_l)},b_e.prototype.update=function(e){0<this._dwShakingOverTick&&(this.runShakeEffect(e),this._moveCtrl.moving||this.updateLayersPosition()),p_l.prototype.update.call(this,e),this._moveCtrl.update(e),this._moveCtrl.moving&&this.processMove(e),0<this._zoomMoveTime&&this.updateZoomMove()},b_e.prototype.suspendMove=function(){Ypf(this)},b_e.prototype.zoomMoveTo=function(e){Qko(e,this,LgcM,EffectShowManager)},b_e.prototype.updateLayersPosition=function(){var p_l=this._moveCtrl.processPx*e.CustomMap.MAP_RATE,p_g=this._moveCtrl.processPy*e.CustomMap.MAP_RATE;this.setLayersPosition(-p_l,-p_g,e.CustomMap.MAP_RATE)},b_e.prototype.delayZoomComplete=function(){Iyx(Laya,this,LED,l_r,e)},b_e.prototype.endMove=function(){Oit(this)},b_e.prototype.syncCurrentPxy=function(e,p_l){null!=this._moveCtrl&&(this._moveCtrl.setPixelXY(e,p_l),this._moveCtrl.endMove()),this.setCurrentPosition(this._moveCtrl.currentCx,this._moveCtrl.currentCy,!0)},b_e.prototype.processMove=function(p_l){var p_g=Math.floor(this._moveCtrl.processPx/e.CustomMap.MAPCELLUNITWIDTH),b_s=Math.floor(this._moveCtrl.processPy/e.CustomMap.MAPCELLUNITHEIGHT);(Math.abs(p_g-this.m_nShowContentX)>e.CustomMap.MAPTILEHBLOCK||Math.abs(b_s-this.m_nShowContentY)>e.CustomMap.MAPTILEVBLOCK)&&this.showMapContent(p_g,b_s)},b_e.prototype.changeMapZoomMove=function(p_l,p_g){return void 0===p_l&&(p_l=1.2),p_l!==e.CustomMap.MAP_RATE&&(Laya.timer.clear(this,this.delayZoomComplete),this._distZoomValue=p_l-e.CustomMap.MAP_RATE,e.CustomMap.MAP_RATE=p_l,this._zoomMoveTime=p_g,this._zoomEndTime=SyncTime.tickCount+p_g,!0)},Object.defineProperty(b_e.prototype,"isZoomMoving",{get:function(){return 0<this._zoomEndTime},enumerable:!0,configurable:!0}),b_e.prototype.clearMap=function(){p_l.prototype.clearMap.call(this),this.m_Ground&&(this.m_Ground.scaleX=this.m_Ground.scaleY=1,this._zoomMoveTime=0,e.CustomMap.MAP_RATE=1,this._zoomEndTime=0),Laya.timer.clear(this,this.delayZoomComplete)},Object.defineProperty(b_e,"defaultMap",{get:function(){return b_e._defaultMap},set:function(e){b_e._defaultMap=e},enumerable:!0,configurable:!0}),b_e._defaultMap=null,b_e);function b_e(){var p_g=p_l.call(this)||this;return p_g._distZoomValue=0,p_g._moveCtrl=new e.MoveMapController(p_g.m_mapLayerRoot,e.Tools.BindDomain(p_g.endMove,p_g)),p_g._moveCtrl.funLocate=e.Tools.BindDomain(p_g.setLayersPosition,p_g),p_g}function d_m(){var e=p_g.call(this)||this;return e.m_sMapName="",e.m_nMapID=0,e.m_url="",e.m_EffectLayer=new Laya.Sprite,e.m_mapLayerRoot.addChild(e.m_EffectLayer),e}e.GameMap=d_u}(Engine2d=Engine2d||{}),function(e){var p_l=(p_g.prototype.equals=function(e,p_l){return void 0===p_l&&(p_l=!1),(!p_l||e.nDir==this.nDir)&&e.nX==this.nX&&e.nY==this.nY},p_g);function p_g(e,p_l,p_g){this.nX=e,this.nY=p_l,this.nDir=p_g}e.ASPathNode=p_l;var b_s=(d_u.prototype.clear=function(){Yzv(this)},d_u.CSNONE=0,d_u.CSOPEN=1,d_u.CSCLOSE=2,d_u);function d_u(){}e.ASMapCell=b_s;var b_e=(Object.defineProperty(d_m.prototype,"m_aSMapCells",{get:function(){return e.GameMap.defaultMap.asMapCells},enumerable:!0,configurable:!0}),d_m.prototype.initMap=function(e,p_l,p_g){Efq(e,p_l,p_g,this)},d_m.prototype.canNotMove=function(e,p_l){return Gkx(e,p_l,this)},d_m.prototype.getMaskInfo=function(e,p_l){return Unr(e,p_l,this)},d_m.prototype.getHCost3=function(e,p_l,p_g,b_s){var d_u=Math.abs(p_g-e),b_e=Math.abs(b_s-p_l),d_m=Math.min(d_u,b_e);return 14*d_m+10*(d_u+b_e-2*d_m)},d_m.prototype.parseInt=function(e){return Qxj(e)},d_m.prototype.getPatch=function(e,p_g,d_u,b_e){if(!this.isCaneMove(e,p_g,d_u,b_e))return null;this.reset(e,p_g);var d_w,f_t,v_z,d_h,r_t=!1,t_n=e,f_y=p_g,p_q=this.m_aSMapCells[f_y*this.m_nWidth+t_n];for(p_q.GCost=0,p_q.LastX=-1,p_q.LastY=-1,p_q.X=t_n,p_q.Y=f_y,p_q.MarkTag=this.m_nMarkTag,p_q.HCost=this.getHCost1(e,b_e,d_u,b_e);;){if(t_n==d_u&&f_y==b_e){r_t=!0;break}for(p_q.State!=b_s.CSCLOSE&&this.closeCell(p_q),d_w=0;d_w<8;++d_w)f_t=t_n+d_m.NEIGHBORPOS_X_VALUES[d_w],v_z=f_y+d_m.NEIGHBORPOS_Y_VALUES[d_w],f_t<0||f_t>=this.m_nWidth||v_z<0||v_z>=this.m_nHeight||(d_h=this.m_aSMapCells[v_z*this.m_nWidth+f_t],this.canNotMove(f_t,v_z)||(d_h.MarkTag!=this.m_nMarkTag||d_h.State==b_s.CSNONE?(d_h.MarkTag=this.m_nMarkTag,d_h.LastX=t_n,d_h.LastY=f_y,d_h.btDir=d_w,d_h.GCost=p_q.GCost+d_m.AS_MOVECOST[1&d_w],d_h.HCost=this.getHCost1(f_t,v_z,d_u,b_e),this.openCell(d_h)):d_h.State==b_s.CSOPEN&&d_h.GCost>p_q.GCost+d_m.AS_MOVECOST[1&d_w]&&(d_h.LastX=t_n,d_h.LastY=f_y,d_h.btDir=d_w,d_h.GCost=p_q.GCost+d_m.AS_MOVECOST[1&d_w],this.reopenCell(d_h))));if(null==(p_q=this.m_lastOpenCell))break;t_n=p_q.X,f_y=p_q.Y}if(r_t){for(var h_h=[];h_h.push(new p_l(p_q.X,p_q.Y,p_q.btDir)),!((p_q=this.m_aSMapCells[p_q.LastY*this.m_nWidth+p_q.LastX]).LastX<=0||p_q.MarkTag!=this.m_nMarkTag););return h_h}return null},d_m.prototype.closeCell=function(e){e.State==b_s.CSOPEN&&(e.Prev&&(e.Prev.Next=e.Next),e.Next&&(e.Next.Prev=e.Prev),e==this.m_lastOpenCell&&(this.m_lastOpenCell=e.Prev)),e.State=b_s.CSCLOSE},d_m.prototype.mySign=function(e){return 0<e?1:e<0?-1:0},d_m.prototype.haveBlock=function(e,p_l,p_g,b_s){var d_u,b_e=this.parseInt(p_g-e),d_m=this.parseInt(b_s-p_l),d_w=this.mySign(b_e),f_t=this.mySign(d_m);if(b_e=2*Math.abs(b_e),d_m=2*Math.abs(d_m),this._fPoint.x=e,this._fPoint.y=p_l,d_m<=b_e)for(d_u=(d_m>>1)-(b_e>>1),this._fPoint.x+=d_w;this._fPoint.x!=p_g;this._fPoint.x+=d_w){if(0!=d_u&&this.canNotMove(this._fPoint.x,this._fPoint.y))return!0;if(0<(d_u+=d_m)&&(this._fPoint.y+=f_t,d_u-=b_e,this.canNotMove(this._fPoint.x,this._fPoint.y)))return!0}else for(d_u=(b_e>>1)-(d_m>>1),this._fPoint.y+=f_t;this._fPoint.y!=b_s;this._fPoint.y+=f_t){if(0!=d_u&&this.canNotMove(this._fPoint.x,this._fPoint.y))return!0;if(0<(d_u+=b_e)&&(this._fPoint.x+=d_w,d_u-=d_m,this.canNotMove(this._fPoint.x,this._fPoint.y)))return!0}return!1},d_m.prototype.reset=function(e,p_l){Sgs(e,p_l,this)},d_m.prototype.getHCost2=function(e,p_l,p_g,b_s){var d_u=p_g-e,b_e=b_s-p_l;return 10*Math.sqrt(d_u*d_u+b_e*b_e)},d_m.prototype.isCaneMove=function(e,p_l,p_g,b_s){return!(e==p_g&&p_l==b_s||e<0||e>=this.m_nWidth||p_l<0||p_l>=this.m_nHeight||p_g<0||p_g>=this.m_nWidth||b_s<0||b_s>=this.m_nHeight||this.canNotMove(p_g,b_s))},d_m.prototype.getHCost1=function(e,p_l,p_g,b_s){return Ire(e,p_l,p_g,b_s)},d_m.prototype.getHCost0=function(e,p_l,p_g,b_s){return Efp(e,p_l,p_g,b_s)},d_m.prototype.openCell=function(e){e.State=b_s.CSOPEN;var p_l=e.HCost+e.GCost;e.FValue=p_l;var p_g=this.m_lastOpenCell;if(p_g){for(;p_g.FValue<p_l;){if(null==p_g.Prev)return(p_g.Prev=e).Prev=null,void(e.Next=p_g);p_g=p_g.Prev}(e.Prev=p_g).Next?(e.Next=p_g.Next,p_g.Next.Prev=e,p_g.Next=e):(e.Next=null,p_g.Next=e,this.m_lastOpenCell=e)}else(this.m_lastOpenCell=e).Prev=null,e.Next=null},d_m.prototype.getBestPath=function(e,p_g,b_s,d_u){if(!this.isCaneMove(e,p_g,b_s,d_u))return null;var b_e,d_m=[];if(this.haveBlock(e,p_g,b_s,d_u)){var d_w=this.getPatch(e,p_g,b_s,d_u);if(!d_w)return null;var f_t=d_w.length;d_m.push(d_w[0]);var v_z=d_w[f_t-1],d_h=d_w[0];if(this.haveBlock(d_h.nX,d_h.nY,v_z.nX,v_z.nY))for(var r_t=0,t_n=void 0,f_y=void 0,p_q=void 0;r_t<f_t-1;){if(t_n=r_t+1,f_y=f_t-1,d_h=d_w[r_t],v_z=d_w[f_y],0==r_t||this.haveBlock(d_h.nX,d_h.nY,v_z.nX,v_z.nY)){for(;t_n<f_y;)v_z=d_w[p_q=this.parseInt(t_n+f_y>>1)],this.haveBlock(d_h.nX,d_h.nY,v_z.nX,v_z.nY)?f_y=p_q-1:t_n=p_q+1;v_z=d_w[f_y],this.haveBlock(d_h.nX,d_h.nY,v_z.nX,v_z.nY)&&f_y--}d_m.push(d_w[f_y]),r_t=f_y}else d_m.push(d_w[f_t-1])}else b_e=this.getMaskInfo(b_s,d_u),d_m.push(new p_l(b_e.X,b_e.Y,b_e.btDir));return d_m},d_m.prototype.reopenCell=function(e){var p_l=e.HCost+e.GCost;e.FValue=p_l;var p_g=e.Next;if(p_g&&p_g.FValue>p_l){for(;(p_g=p_g.Next)&&p_g.FValue>p_l;);e.Prev&&(e.Prev.Next=e.Next),e.Next&&(e.Next.Prev=e.Prev),p_g?((e.Next=p_g).Prev?(e.Prev=p_g.Prev,p_g.Prev.Next=e):e.Prev=null,p_g.Prev=e):(e.Prev=this.m_lastOpenCell,e.Next=null,this.m_lastOpenCell.Next=e,this.m_lastOpenCell=e)}},Object.defineProperty(d_m.prototype,"lastOpenCell",{get:function(){return this.m_lastOpenCell},set:function(e){this.m_lastOpenCell=e},enumerable:!0,configurable:!0}),Object.defineProperty(d_m.prototype,"aSMapCells",{get:function(){return this.m_aSMapCells},enumerable:!0,configurable:!0}),Object.defineProperty(d_m.prototype,"nWidth",{get:function(){return this.m_nWidth},set:function(e){this.m_nWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(d_m.prototype,"nHeight",{get:function(){return this.m_nHeight},set:function(e){this.m_nHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(d_m.prototype,"nMarkTag",{get:function(){return this.m_nMarkTag},set:function(e){this.m_nMarkTag=e},enumerable:!0,configurable:!0}),d_m.AS_MOVECOST=[14,10],d_m.NEIGHBORPOS_X_VALUES=[0,1,1,1,0,-1,-1,-1],d_m.NEIGHBORPOS_Y_VALUES=[-1,-1,0,1,1,1,0,-1],d_m);function d_m(e,p_l,p_g){this.RMOVECOST=14,this.DMOVECOST=10,this.m_nMarkTag=0,this._fPoint=new Laya.Point,this.initMap(e,p_l,p_g)}e.ASPath=b_e}(Engine2d=Engine2d||{}),function(e){var p_l,p_g=(p_l=e.ASMapCell,__extends(b_s,p_l),b_s.prototype.clear=function(){Itm(p_l,this,Laya,PoolDefine)},b_s.prototype.setPos=function(e,p_l){Oug(e,p_l,this)},b_s.prototype.clearPos=function(){Kxn(this)},b_s.prototype.clone=function(){return Ymz(Laya,PoolDefine,b_s,this)},b_s);function b_s(){var e=null!==p_l&&p_l.apply(this,arguments)||this;return e._nBkImgIdx=0,e._nFtImgIdx=0,e._nFtObjIdx=0,e._nFlags=0,e._bkImg=null,e}e.MapCell=p_g;var d_u=(b_e.CAN_WALK=0,b_e.STOP_WALK=1,b_e.HIDDEN=3,b_e.FUNC_TYPE=4,b_e);function b_e(){}e.MoveType=d_u}(Engine2d=Engine2d||{}),function(e){var p_l,p_g=(p_l=e.MapDisplayObject,__extends(b_s,p_l),b_s.prototype.getMoveSpeed=function(){return Klx(this)},b_s.prototype.setMoveSpeed=function(e){Ahl(e,this)},b_s.prototype.isDisappeared=function(){return Muo(this)},b_s.prototype.endMove=function(){0<this.m_dwMoveStartTick&&(this.m_dwMoveStartTick=0,this.setCurrentCxy(this.m_nMoveTargetX,this.m_nMoveTargetY))},b_s.prototype.setCurrentCxy=function(e,p_g){0<this.m_dwMoveStartTick&&this.endMove(),p_l.prototype.setCurrentCxy.call(this,e,p_g)},b_s.prototype.update=function(e){0<this.m_dwMoveStartTick&&(e<this.m_dwMoveEndTick?this.processMove(e-this.m_dwMoveStartTick):this.endMove())},b_s.prototype.moveTo=function(p_l,p_g,b_s){if(void 0===b_s&&(b_s=0),p_l!=this.m_nCurrentCX||p_g!=this.m_nCurrentCY){if(0<this.m_dwMoveStartTick){if(p_l==this.m_nMoveTargetX&&p_g==this.m_nMoveTargetY)return;this.endMove()}var d_u;this.sortOnContainer(this.m_nCurrentCX,p_l,this.m_nCurrentCY,p_g),d_u=0==b_s?this.m_dwMoveSpeed:b_s,this.m_nMoveTargetX=p_l,this.m_nMoveTargetY=p_g,this.m_dwMoveEndTick=this.m_dwMoveStartTick+d_u,this.m_dMoveLongX=Number((p_l-this.m_nCurrentCX)*e.CustomMap.MAPCELLUNITWIDTH)/d_u,this.m_dMoveLongY=Number((p_g-this.m_nCurrentCY)*e.CustomMap.MAPCELLUNITHEIGHT)/d_u}},b_s.prototype.processMove=function(p_l){var p_g=(this.m_nCurrentCX+.5)*e.CustomMap.MAPCELLUNITWIDTH+this.m_dMoveLongX*p_l,b_s=(this.m_nCurrentCY+.5)*e.CustomMap.MAPCELLUNITHEIGHT+this.m_dMoveLongY*p_l;this.x=Math.floor(p_g),this.y=Math.floor(b_s)},b_s.prototype.setDirection=function(e){Urq(e,this)},b_s.prototype.isMoving=function(){return Qhb(this)},b_s.prototype.getDirection=function(){return Wxi(this)},b_s);function b_s(){var e=p_l.call(this)||this;return e.m_dwMoveSpeed=1e3,e.m_dwMoveStartTick=0,e.m_dwMoveEndTick=0,e.m_nMoveTargetX=0,e.m_nMoveTargetY=0,e.m_nDirection=0,e.m_dMoveLongX=0,e.m_dMoveLongY=0,e.m_boDisappeared=!1,e}e.MapMoveObject=p_g}(Engine2d=Engine2d||{}),function(e){var p_l,p_g=(p_l=ui.window.tips.accessItemUI,__extends(b_s,p_l),b_s.prototype.onAdd=function(e){this.useNumTxt.text="1",0<this.dataSource[2].shopNum&&(this.useNumTxt.text=this.dataSource[2].shopNum.toString()),this.tweenImg.visible=!1,this.updateList(this.dataSource),this.cutBtn.on(Laya.Event.CLICK,this,this.onClick),this.cutTenBtn.on(Laya.Event.CLICK,this,this.onClick),this.addBtn.on(Laya.Event.CLICK,this,this.onClick),this.addTenBtn.on(Laya.Event.CLICK,this,this.onClick),this.useBtn.on(Laya.Event.CLICK,this,this.onbuyClick),this.closeBtn.on(Laya.Event.CLICK,this,this.isclose),this.backbtn.on(Laya.Event.CLICK,this,this.isclose),this.updateData()},b_s.prototype.onRemove=function(){Ufp(this,Laya)},b_s.prototype.updateData=function(){var e=this.dataSource[0].vo,p_l=Config.itemGet[e].shopId;if(this.dataSource[1].shopid&&(p_l=this.dataSource[1].shopid),p_l){var p_g=ShopModel.instance.getShopItemVo(p_l),b_s=parseInt(this.useNumTxt.text),d_u=Config.shop_shop[p_g.id];if(p_g&&d_u){var b_e=d_u.price[0][1];Math.floor(d_u.discount),d_u.discount<100&&(this.singleTxt.text=String(b_e),0==this.moneyClip.index&&(b_e<=this.heroVo.gold&&(this.singleTxt.color="#3da72c"),b_e>this.heroVo.gold&&(this.singleTxt.color="#e53d26")),1==this.moneyClip.index&&(b_e<=this.heroVo.copper&&(this.singleTxt.color="#3da72c"),b_e>this.heroVo.copper&&(this.singleTxt.color="#e53d26")),11==this.moneyClip.index&&(b_e<=this.heroVo.banquetPoint&&(this.singleTxt.color="#008931"),b_e>this.heroVo.banquetPoint&&(this.singleTxt.color="#c92828"))),0==d_u.discount&&(this.singleTxt.text=String(b_e)),100<=d_u.discount&&(this.singleTxt.text=String(b_e)),this.useNumTxt.text=b_s.toString()+"/"+(d_u.dayNum-p_g.dayNum).toString(),0==d_u.dayNum&&(this.useNumTxt.text=b_s.toString());var d_m=Config.CItem(d_u.itemId),d_w=d_u.price[0][0];this.numTxt.text=(parseInt(this.singleTxt.text)*parseInt(this.useNumTxt.text)).toString(),this.moneyClip.index=d_w-1,this.moneyall.index=d_w-1,this.nameTxt.text=d_m.name;var f_t=Config.CItem(d_u.itemId),v_z=new ModuleItemVO;if(Config.item_equipment[f_t.id]){var d_h=3.5*Config.item_equipment[f_t.id].basePropFixed[0][1],r_t=.2*Config.item_equipment[f_t.id].basePropFixed[0][1];"attack"!=f_t.basePropFixed[0][0]&&"defense"!=f_t.basePropFixed[0][0]||(v_z.id=d_u.itemId,v_z.bind=1,v_z.amount=d_u.num,v_z.fighting=d_h),"hpUpper"==f_t.basePropFixed[0][0]&&(v_z.id=d_u.itemId,v_z.bind=1,v_z.amount=d_u.num,v_z.fighting=r_t),this.itemBox.isShowName=!1,this.itemBox.isShowNum=!0,this.itemBox.setNumTxt("10"),this.itemBox.setItemData(v_z,ItemBoxDefine.BAG_INFO,!0)}(Config.item_material[f_t.id]||Config.item_consumeable[f_t.id])&&(v_z.id=d_u.itemId,v_z.bind=1,v_z.amount=d_u.num,this.itemBox.isShowName=!1,this.itemBox.isShowNum=!0,this.itemBox.setItemData(v_z,ItemBoxDefine.BAG_INFO,!0)),p_g.dayNum&&(this.useNumTxt.text=b_s.toString()+"/"+(d_u.dayNum-p_g.dayNum).toString()),p_g.dayNum||(this.useNumTxt.text=b_s.toString()+"/"+d_u.dayNum.toString()),0==d_u.dayNum&&(this.useNumTxt.text=b_s.toString()),!p_g.dayNum&&0==d_u.dayNum&&0<d_u.weekNum&&(this.useNumTxt.text=b_s.toString()+"/"+d_u.weekNum.toString()),p_g.dayNum&&0==d_u.dayNum&&0<d_u.weekNum&&(this.useNumTxt.text=b_s.toString()+"/"+(d_u.weekNum-p_g.dayNum).toString()),parseInt(this.singleTxt.text)*b_s>this.heroVo.gold?this.numTxt.color="#e53d26":this.numTxt.color="#280505"}}},b_s.prototype.onClick=function(e){var p_l=e.target;if(p_l&&""!=p_l.name){var p_g=ShopModel.instance.getShopDatas(ShopType.COMMON),b_s=this.dataSource[0].vo,d_u=Config.itemGet[b_s].shopId;if(this.dataSource[1].shopid&&(d_u=this.dataSource[1].shopid),d_u){this.dataSource[1].shopid&&(d_u=this.dataSource[1].shopid);var b_e=p_g[d_u-20001-(ShopModel.instance.getShopDisplayeDataNum(ShopType.COMMON)||0)];if(b_e){var d_m=parseInt(this.useNumTxt.text),d_w=Config.shop_shop[d_u];if(d_w){switch(p_l.name){case"cutBtn":d_m-=1;break;case"cutTenBtn":d_m-=10;break;case"addBtn":d_m+=1;break;case"addTenBtn":d_m+=10}d_m=999<(d_m=d_m<1?1:d_m)?999:d_m,d_w.dayNum&&0<d_w.dayNum&&(0<d_w.weekNum&&(d_m>d_w.dayNum&&!b_e.dayNum&&(b_p.broadcastNotice((j_x("1355_2420_2348")+j_x("716_1300_1117")+j_x("1081_1375_2128")+j_x(489))),d_m=d_m>d_w.dayNum?d_w.dayNum:d_m),b_e.dayNum&&d_m>d_w.dayNum-b_e.dayNum&&(b_p.broadcastNotice((j_x("1355_2420_2348")+j_x("716_1300_1117")+j_x("1081_1375_2128")+j_x(489))),d_m=d_m>d_w.dayNum-b_e.dayNum?d_w.dayNum-b_e.dayNum:d_m)),0==d_w.weekNum&&(d_w.dayNum&&d_m>d_w.dayNum&&!b_e.dayNum&&(b_p.broadcastNotice((j_x("1355_2420_2348")+j_x("716_1300_1117")+j_x("1081_1375_2128")+j_x(489))),d_m=d_m>d_w.dayNum?d_w.dayNum:d_m),b_e.dayNum&&d_m>d_w.dayNum-b_e.dayNum&&(b_p.broadcastNotice((j_x("1355_2420_2348")+j_x("716_1300_1117")+j_x("1081_1375_2128")+j_x(489))),d_m=d_m>d_w.dayNum-b_e.dayNum?d_w.dayNum-b_e.dayNum:d_m))),0<d_w.weekNum&&d_m>d_w.weekNum&&(b_p.broadcastNotice((j_x("1355_2420_2348")+j_x("716_1300_1117")+j_x("1081_1375_2128")+j_x(489))),d_m=d_m>d_w.weekNum?d_w.weekNum:d_m),b_e.dayNum&&(this.useNumTxt.text=d_m.toString()+"/"+(d_w.dayNum-b_e.dayNum).toString()),b_e.dayNum||(this.useNumTxt.text=d_m.toString()+"/"+d_w.dayNum.toString()),0==d_w.dayNum&&0<d_w.weekNum&&(d_m>d_w.weekNum-b_e.dayNum&&b_p.broadcastNotice((j_x("1355_2420_2348")+j_x("716_1300_1117")+j_x("1081_1375_2128")+j_x(489))),d_m=d_m>d_w.weekNum-b_e.dayNum?d_w.weekNum-b_e.dayNum:d_m,this.useNumTxt.text=d_m.toString()+"/"+(d_w.weekNum-b_e.dayNum).toString(),b_e.dayNum||(this.useNumTxt.text=d_m.toString()+"/"+d_w.weekNum.toString(),d_m>d_w.weekNum-0&&b_p.broadcastNotice((j_x("1355_2420_2348")+j_x("716_1300_1117")+j_x("1081_1375_2128")+j_x(489))))),0==d_w.dayNum&&0==d_w.weekNum&&(999<d_m&&b_p.broadcastNotice((j_x("1355_2420_2348")+j_x("716_1300_1117")+j_x("1081_1375_2128")+j_x(489))),d_m=999<(d_m=d_m<1?1:d_m)?999:d_m,this.useNumTxt.text=d_m.toString()),parseInt(this.singleTxt.text)*d_m>this.heroVo.gold?this.numTxt.color="#e53d26":this.numTxt.color="#010f06",d_m=999<(d_m=d_m<1?1:d_m)?999:d_m,this.numTxt.text=(parseInt(this.singleTxt.text)*d_m).toString()}}}}},b_s.prototype.onbuyClick=function(){var e=ShopModel.instance.getShopDatas(ShopType.COMMON),p_l=this.dataSource[0].vo,p_g=Config.itemGet[p_l].shopId;this.dataSource[1].shopid&&(p_g=this.dataSource[1].shopid);var d_u=null;if(e)for(var b_e in e)e[b_e].id==p_g&&(d_u=e[b_e]);if(d_u){var d_m=Config.shop_shop[d_u.id];if(d_m){var d_w=StateModel.instance.getStateLv();if(Config.CItem(d_m.itemId),d_m.lv>this.heroVo.level)return b_p.broadcastNotice((j_x("15_2342_2462")+j_x("656_481_1624")+j_x(100))),!1;if(d_m.stateLv>d_w)return b_p.broadcastNotice((j_x("381_843_2462")+j_x("656_481_1624")+j_x(100))),!1;if(!b_p.checkCoin(d_m.price[0][0],d_m.price[0][1])){var f_t=Config.item_coin[d_m.price[0][0]];return f_t&&b_p.broadcastNotice(f_t.name+(j_x("2462_1779"))),!1}if(d_m.lv<=this.heroVo.level&&!d_u.dayNum&&!d_u.weekNum)return ShopModel.instance.reqShopbuyList(d_u.id,parseInt(this.useNumTxt.text)),b_s.close(),!1;if(d_u.dayNum+parseInt(this.useNumTxt.text)<=d_m.dayNum&&d_m.lv<=this.heroVo.level)return d_u.dayNum,ShopModel.instance.reqShopbuyList(d_u.id,parseInt(this.useNumTxt.text)),b_s.close(),!1;if((d_u.dayNum>=d_m.dayNum&&0!=d_m.dayNum||0!=d_m.weekNum&&d_u.weekNum>=d_m.weekNum)&&null!=d_u.dayNum)return b_p.broadcastNotice((j_x("1761_415_2462")+j_x(1779))),b_s.close(),!1;if(0==d_m.weekNum){if(d_u.dayNum+parseInt(this.useNumTxt.text)>d_m.dayNum&&0!=d_m.dayNum)return b_p.broadcastNotice((j_x("1327_1254_1355")+j_x("2420_235_2348")+j_x("1360_2128"))),b_s.close(),!1;if(0==d_m.dayNum)return ShopModel.instance.reqShopbuyList(d_u.id,parseInt(this.useNumTxt.text)),b_s.close(),!1}if(0==d_m.dayNum){if(d_u.weekNum+parseInt(this.useNumTxt.text)>d_m.weekNum&&0!=d_m.weekNum)return b_p.broadcastNotice((j_x("944_722_1355")+j_x("2420_235_2348")+j_x("1360_2128"))),b_s.close(),!1;if(d_u.weekNum+parseInt(this.useNumTxt.text)<=d_m.weekNum&&0==d_m.dayNum)return ShopModel.instance.reqShopbuyList(d_u.id,parseInt(this.useNumTxt.text)),b_s.close(),!1}}return!0}},Object.defineProperty(b_s.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),b_s.prototype.updateList=function(e){var p_l=this.dataSource[0].vo,p_g=Config.itemGet[p_l];if(p_g){this.list.array=p_g.func,3<this.list.array.length&&this.createTween(this.tweenImg);var b_s=Config.shop_shop[p_g.shopId];if(b_s){var d_u=b_s.price[0][1],b_e=Math.floor(b_s.discount)/100;b_s.discount<100?this.singleTxt.text=String(d_u*b_e):this.singleTxt.text=String(d_u)}}},b_s.prototype.isclose=function(){Sut(b_s)},b_s.prototype.updateItem=function(e,p_l){Gok(e,p_l)},b_s.prototype.createTweens=function(e){e.y=893,laya.utils.Tween.to(e,{j_l:873},500,Laya.Ease.linearIn,Laya.Handler.create(this,this.createTween,[e]))},b_s.prototype.tweenStop=function(e){Csw(e,laya)},b_s.open=function(e,p_l,p_g){void 0===p_g&&(p_g=0),UIM.open(b_s,null,[{vo:e},{shopid:p_l},{shopNum:p_g}],!1,!1,!0)},b_s.prototype.createTween=function(e){e.visible=!0,e.y=873,laya.utils.Tween.to(e,{j_l:893},500,Laya.Ease.linearIn,Laya.Handler.create(this,this.createTweens,[e]))},b_s.close=function(){Qmm(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.list.vScrollBarSkin="",e.list.scrollBar.elasticDistance=100,e.list.scrollBar.elasticBackTime=200,e.list.itemRender=b_e,e.list.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.on(Laya.Event.ADDED,e,e.onAdd),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.AccessPanel=p_g;var d_u,b_e=(d_u=ui.window.tips.accessitemvoUI,__extends(d_m,d_u),d_m.prototype.onAdded=function(){Ubx(this,Laya)},d_m.prototype.onRemove=function(){Cpx(this,Laya)},d_m.prototype.setItemData=function(e,p_l){Qyp(e,p_l,this)},d_m.prototype.isWindow=function(p_l){p_l.target;var b_s=this.dataSource;if(b_s){b_s&&b_s.index;var d_u=b_s[1],b_e=parseInt(b_s[2]),d_m=UIM.instance.isOpenWin(e.TalismanDeployUpPanel),d_w=UIM.instance.isOpenWin(e.ConCludeKingUpPanel),f_t=UIM.instance.isOpenWin(e.BanquetStartPanel),v_z=UIM.instance.isOpenWin(e.BlackKingPanel);d_m&&e.TalismanDeployUpPanel.close(),d_w&&e.ConCludeKingUpPanel.close(),f_t&&e.BanquetStartPanel.close(),v_z&&e.BlackKingPanel.close(),UIM.instance.isOpenWin(e.BeastUpDlopPanel)&&e.BeastUpDlopPanel.close();var d_h=null;0<=b_e&&(d_h=[b_e],b_s[3]&&d_h.push(parseInt(b_s[3]))),e.WindowClass.openWin(d_u,d_h),p_g.close(),e.AccessTipPanel.close()}},d_m);function d_m(){var e=d_u.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.AccessItemvo=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.tips.accessitemTipUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Etn(this,Laya)},b_s.prototype.onRemove=function(){Erq(this,Laya)},b_s.prototype.updateList=function(e){var p_l=Config.itemGet[e];if(p_l){var p_g=Config.CItem(p_l.id);if(p_g){this.list.array=p_l.func,3<this.list.array.length&&this.createTween(this.tweenImg);var b_s=new ModuleItemVO;b_s.id=e,b_s.bind=1,b_s.amount=0,this.itemBox.isShowName=!1,this.itemBox.setItemData(b_s,ItemBoxDefine.MODULE_ITEM,!0),this.nameLab.text=p_g.name}}},b_s.prototype.createTween=function(e){e.visible=!0,e.y=574,laya.utils.Tween.to(e,{j_l:594},500,Laya.Ease.linearIn,Laya.Handler.create(this,this.createTweens,[e]))},b_s.prototype.tweenStop=function(e){Usk(e,laya)},b_s.open=function(e){Gdu(e,UIM,b_s)},b_s.prototype.isclose=function(){Avh(b_s)},b_s.prototype.createTweens=function(e){e.y=594,laya.utils.Tween.to(e,{j_l:574},500,Laya.Ease.linearIn,Laya.Handler.create(this,this.createTween,[e]))},b_s.prototype.updateItem=function(e,p_l){Kcl(e,p_l)},b_s.close=function(){Oec(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.list.vScrollBarSkin="",p_g.list.scrollBar.elasticDistance=100,p_g.list.scrollBar.elasticBackTime=200,p_g.list.itemRender=e.AccessItemvo,p_g.list.renderHandler=Laya.Handler.create(p_g,p_g.updateItem,null,!1),p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g}e.AccessTipPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.ancient.ancient_tailsmanUI,__extends(b_s,p_l),b_s.prototype.onAdd=function(){this.tabList.array=this.dataSource.subVo,this.tabList.selectedIndex=this.tabList.selectedIndex<0?0:this.tabList.selectedIndex,this.upDateList(),LED.on(l_r.ACTIVITY_BGA_SGSQ,this,this.updateTalisman),this.closeBtn.on(Laya.Event.CLICK,this,this.onClick),this.backBtn.on(Laya.Event.CLICK,this,this.onClick)},b_s.prototype.updateItem=function(e,p_l){Gcw(e,p_l)},b_s.prototype.sortFunc=function(e,p_l){var p_g,b_s,d_u=ActivityModel.instance.sgsqRechargeVo,b_e=TalismanModel.instance.getTalismanVos(),d_m=1,d_w=1;if(d_u)for(var f_t in d_u.exchange)d_u.exchange[f_t].id==e.id?e.limit>=d_u.exchange[f_t].num&&(d_m=-1):d_u.exchange[f_t].id==p_l.id&&e.limit>=d_u.exchange[f_t].num&&(d_w=-1);if(b_e)for(var f_t in b_e)e.talismanid==b_e[f_t].id?d_m=-1:p_l.talismanid==b_e[f_t].id&&(d_w=-1);return(p_g=-1!=d_m?b_p.checkConsume(e.material)?1:0:-1)==(b_s=-1!=d_w?b_p.checkConsume(p_l.material)?1:0:-1)?e.id-p_l.id:b_s-p_g},b_s.prototype.onRemove=function(){Ucf(this,Laya,LED,l_r)},b_s.prototype.onUpdateArray=function(){this.AncientTalismanVo&&(this.list.array=this.AncientTalismanVo.sort(this.sortFunc)),this.dataSource,this.updateTimeTxt()},b_s.prototype.tabSelect=function(e){Igc(e,this)},b_s.prototype.updateTalisman=function(){Yur(this)},b_s.prototype.updateTimeTxt=function(){var e=this.dataSource,p_l=-1;for(var p_g in e.subVo)e.subVo[p_g].type==this._selectType&&(p_l=parseInt(p_g));if(!(p_l<0)&&e&&e.subVo[p_l].start&&e.subVo[p_l].stop){this.timeTxt.text=Utils.formatTimeStr4(e.subVo[p_l].start,!1)+"-"+Utils.formatTimeStr4(e.subVo[p_l].stop,!1);var b_s=1e3*e.subVo[p_l].stop-SyncTime.serverTime;0<b_s?(Laya.timer.once(1e3,this,this.updateTimeTxt),this.countDownTxt.text=Utils.formatTimeStr(Math.floor(b_s/1e3))):this.countDownTxt.text=(j_x("1796_1878_1300")+j_x("396_2426"))}},b_s.prototype.onClick=function(){Alf(b_s)},b_s.prototype.tabListRender=function(e,p_l){if(e&&e.dataSource){var p_g=e.getChildByName("tabRed");p_g&&(p_g.visible=this.checkTabRed(e.dataSource.type));var b_s=e.getChildByName("clip");b_s&&(e.dataSource.type==ActivityTypeDefine.GS_xxsb?b_s.index=0:e.dataSource.type==ActivityTypeDefine.GS_sgsq?b_s.index=1:e.dataSource.type==ActivityTypeDefine.GS_xjmb?b_s.index=2:b_s.visible=!1);var d_u=e.getChildByName("selectImg");this.tabList.selectedIndex==p_l?d_u.visible=!0:d_u.visible=!1}},b_s.prototype.upDateList=function(){this.dataSource;var e,p_l="",p_g=this.tabList.getItem(this.tabList.selectedIndex);if(p_g){if(p_g.type==ActivityTypeDefine.GS_sgsq)p_l=ActivityTypeDefine.GS_sgsq,e=Config.activity_sgsq_exchange;else if(p_g.type==ActivityTypeDefine.GS_xxsb)e=Config.activity_xxsb_exchange,p_l=ActivityTypeDefine.GS_xxsb;else{if(p_g.type!=ActivityTypeDefine.GS_xjmb)return;e=Config.activity_xjmb_exchange,p_l=ActivityTypeDefine.GS_xjmb}this._selectType=p_l}if(this.titleimg.skin="res/ui/activity/"+e[1].resources[0],this.desc1.changeText(e[1].desc1),this.desc2.changeText(e[1].desc2),this.desc3.changeText(e[1].desc3),e)for(var b_s in this.AncientTalismanVo=[],e){var d_u;d_u=e[b_s],this.AncientTalismanVo.push(d_u)}this.onUpdateArray(),ActivityModel.reqActivityRecord(p_l)},b_s.open=function(e){console.log(JSON.stringify(e)),e||b_p.broadcastNotice((j_x("1796_1878_206")+j_x("155_1186"))),UIM.open(b_s,["activity/ancientTailsman.atlas"],e,!1,!1,!0,!0)},b_s.prototype.checkTabRed=function(e){var p_l,p_g;if(e==ActivityTypeDefine.GS_xxsb)p_g=ActivityModel.instance.xxsbRechargeVo,p_l=Config.activity_xxsb_exchange;else if(e==ActivityTypeDefine.GS_sgsq)p_g=ActivityModel.instance.sgsqRechargeVo2,p_l=Config.activity_sgsq_exchange;else{if(e!=ActivityTypeDefine.GS_xjmb)return!1;p_g=ActivityModel.instance.xjmbRechargeVo,p_l=Config.activity_xjmb_exchange}var b_s=0,d_u=0;if(p_l)for(var b_e in p_l)if(d_u++,b_p.checkConsume(p_l[b_e].material)){if(!p_g||!p_g.exchange)return!0;if(p_g.exchange&&p_g.exchange.length<1)return!0;if(p_g.exchange)for(var d_m in p_g.exchange)p_g.exchange[d_m].id==p_l[b_e].id&&p_g.exchange[d_m].num>=p_l[b_e].limit&&b_s++}return!(d_u<=b_s)&&0<b_s},b_s.close=function(){Ozm(UIM,b_s)},b_s.prototype.onClickHelp=function(){Gfx(p_q)},b_s);function b_s(){var e=p_l.call(this)||this;return e.list.vScrollBarSkin="",e.list.scrollBar.elasticDistance=100,e.list.scrollBar.elasticBackTime=200,e.list.itemRender=b_e,e._selectType="",e.list.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),z_j.setList(e.tabList,e,e.tabListRender,e.tabSelect),e.on(Laya.Event.ADDED,e,e.onAdd),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.AncientTalismanPanel=p_g;var d_u,b_e=(d_u=ui.window.activity.bga.ancient.ancient_cellUI,__extends(d_m,d_u),d_m.prototype.onclick=function(e){var p_l=this.dataSource;if(p_l){var p_g=b_p.checkConsume(p_l.material)?"#008931":"#c92828",b_s=BagModel.instance.getItemCountByItemID(p_l.material[0][0],BagTypeDefine.BAG_TYPE_ITEM),d_u=Config.CItem(e[0][0]);j_y.confirmt(e[0][0],Utils.$((j_x("68_2032_1661")+j_x(1502)+"<font color='#444765' >{1}</font>"+j_x(844)+"{2}"+j_x("1763_1713_799")+j_x(869)+"<br>"+j_x("1327_711_2333")+j_x("1896_2348_716")+":<font color='{3}'>{4}</font>"),e[0][1],d_u.name,p_g,b_s),this.sureToOpen,[this.dataSource])}},d_m.prototype.setIcon=function(e){""!=e?(this.materialsicon.visible=!0,this.materialsicon=Resource.ResManager.Instance.getImg(e,this.materialsicon)):this.materialsicon.visible=!1},d_m.prototype.setDeploymentDatas=function(e){Gfj(e,f_t)},d_m.prototype.sureToOpen=function(e){if(e&&b_p.checkConsume(e[0][0][0][0].material)){var p_l=ActivityModel.instance.sgsqRechargeVo,p_g=new c2w_gsaAct_sgsq_exchange;return p_g.id=e[0][0][0][0].id,p_g.ty=p_l.ty,DB.instance.query(c2w_gsaAct_sgsq_exchange,p_g),void r_t.open(e[0][0][0][0])}b_p.broadcastNotice((j_x("50_2124_2462")+j_x(1779)))},d_m.prototype.setItemVo=function(e){this.exchangeBtn.label=(j_x("1763_1713"));var p_l=ActivityModel.instance.sgsqRechargeVo,p_g=TalismanModel.instance.getTalismanVos(),b_s=e;this.exchangeBtn.disabled=!1;var d_u=TalismanModel.instance.getTalismanById(b_s.talismanid),b_e=BagModel.instance.getItemCountByItemID(b_s.material[0][0],BagTypeDefine.BAG_TYPE_ITEM);this.exchangeNum.text=b_e+"/"+b_s.material[0][1];var d_m=d_u?d_u.deployments.slice():null;if(d_m){for(var d_w in d_m)d_m[d_w].level=1;this.bgimg.skin="res/ui/activity/"+e.resources[1],this.bg.skin="res/ui/activity/"+e.resources[2];var f_t=TalismanModel.instance.calDeploymentsApt(d_m);if(b_p.getNumSp("FINGT_BIG",f_t,this.intelicon,-13),this.nameLab.text=Config.talisman_talisman[b_s.talismanid].name,this.fightingDesc.text=Config.talisman_talisman[b_s.talismanid].fightingDesc[1],this.redPoint.visible=!1,this.exchangeNum.color="#c92828",b_p.checkConsume(b_s.material)&&(this.exchangeNum.color="#71de66",this.redPoint.visible=!0),p_l)for(var d_w in p_l.exchange)p_l.exchange[d_w].id==b_s.id&&b_s.limit>=p_l.exchange[d_w].num&&(this.exchangeBtn.disabled=!0,this.exchangeBtn.label=(j_x("1300_1763_1713")),this.redPoint.visible=!1);if(p_g)for(var d_w in p_g)b_s.talismanid==p_g[d_w].id&&(this.exchangeBtn.disabled=!0,this.exchangeBtn.label=(j_x("1300_1763_1713")),this.redPoint.visible=!1);this.namedesc.color=this.contentDiv.style.color=e.colour,this.contentDiv.style.fontSize=22,this.contentDiv.style.wordWrap=!0,this.contentDiv.style.valign="top",this.contentDiv.style.leading=15,this.contentDiv.innerHTML=b_s.desc[0],this.bg.height=1<b_s.desc.length?230:138,1<b_s.desc.length&&(this.contentDiv.innerHTML=b_s.desc[0]+"<br>"+b_s.desc[1]),this.lawBtn.on(Laya.Event.CLICK,this,this.setDeploymentDatas,[d_u.deployments]),this.exchangeBtn.on(Laya.Event.CLICK,this,this.onclick,[b_s.material]);var v_z=Config.talisman_talisman[b_s.talismanid];this.showRoleModel(v_z.avatar,v_z.showAct,b_s.scale,b_s.transform);var d_h=Config.CItem(b_s.material[0][0]);this.setIcon(Resource.ResUrl.getIconUrl(d_h.icon))}},d_m.prototype.showRoleModel=function(e,p_l,p_g,b_s){void 0===p_l&&(p_l="stand"),void 0===p_g&&(p_g=1),void 0===b_s&&(b_s=[0,0]),e&&""!=e&&(this._roleModel||(this._roleModel=new n_k,this.icon.addChild(this._roleModel)),this._roleModel.changeModel(e),this._roleModel.pos(b_s[0],b_s[1]),this._roleModel.scale(p_g,p_g),this._roleModel.setAction(p_l,0,!0))},d_m.prototype.clearRes=function(){this._roleModel&&this._roleModel.clearRes()},d_m);function d_m(){return d_u.call(this)||this}e.AncientCellPanel=b_e;var d_w,f_t=(d_w=ui.window.activity.bga.ancient.lawtipUI,__extends(v_z,d_w),v_z.prototype.onAdd=function(){Kex(this,Laya)},v_z.prototype.tweenStop=function(e){Seb(e,laya)},v_z.prototype.createTween=function(e){e.visible=!0,e.y=560,laya.utils.Tween.to(e,{j_l:570},500,Laya.Ease.linearIn,Laya.Handler.create(this,this.createTweens,[e]))},v_z.prototype.onRemove=function(){Kes(this,Laya)},v_z.prototype.init=function(){var e=this.dataSource;this.deploymentList.mouseEnabled=!1,this.arrowsImg.visible=!1,this.height=4<e.length?484:384,this.bgimg.height=4<e.length?479:369,this.deploymentList.height=4<e.length?407:307,this.bottomImg.height=4<e.length?382:270,8==e.length&&(this.height=600,this.bgimg.height=593,this.deploymentList.height=511,this.bottomImg.height=505),8<e.length&&(this.deploymentList.mouseEnabled=!0,this.height=600,this.bgimg.height=593,this.deploymentList.height=511,this.bottomImg.height=505,this.createTween(this.arrowsImg)),this.deploymentList.array=this.dataSource},v_z.prototype.createTweens=function(e){e.y=570,laya.utils.Tween.to(e,{j_l:560},500,Laya.Ease.linearIn,Laya.Handler.create(this,this.createTween,[e]))},v_z.prototype.updateItem=function(e,p_l,p_g){e===this.deploymentList&&(p_l.setItemData(p_l.dataSource),p_l.redPoint.visible=!1,p_l.mouseEnabled=!1)},v_z.prototype.onclick=function(){Yti(v_z)},v_z.open=function(e){Swf(e,UIM,v_z)},v_z.close=function(){Cyq(UIM,v_z)},v_z);function v_z(){var e=d_w.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdd),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.LawtipPanel=f_t;var d_h,r_t=(d_h=ui.window.activity.bga.ancient.acquisitiontipUI,__extends(t_n,d_h),t_n.prototype.onAdd=function(){var e=this.dataSource;if(e){var p_l=TalismanModel.instance.getTalismanById(e.talismanid);p_l.level=1,p_l.grade=1;var p_g=TalismanModel.instance.getLvProps(p_l),b_s=b_p.calPropFight(p_g);b_p.getNumSp("FINGT_BIG",b_s,this.fight,-13);var d_u=Config.talisman_talisman[e.talismanid];this.showRoleModel(d_u.avatar,d_u.showAct,e.scale,e.transform),this.nameDesc.text=Config.talisman_talisman[e.talismanid].name,this.on(Laya.Event.CLICK,this,this.onClick)}},t_n.prototype.onClick=function(p_l){switch(p_l.target.name){case"goActivite":t_n.close(),e.TalismanPanel.open()}t_n.close()},t_n.open=function(e){0<e?UIM.open(t_n,["activity/ancientTailsman.atlas"],e,null,null,!0,!0):UIM.open(t_n,null,e,null,null,!0,!0)},t_n.prototype.showRoleModel=function(e,p_l,p_g,b_s){void 0===p_l&&(p_l="stand"),void 0===p_g&&(p_g=1),void 0===b_s&&(b_s=[0,0]),e&&""!=e&&(this._roleModel||(this._roleModel=new n_k,this.icon.addChild(this._roleModel)),this._roleModel.changeModel(e),this._roleModel.pos(b_s[0],b_s[1]),this._roleModel.scale(p_g,p_g),this._roleModel.setAction(p_l,0,!0))},t_n.prototype.onRemove=function(){Upy(this,Laya)},t_n.close=function(){Ust(UIM,t_n)},t_n);function t_n(){var e=d_h.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdd),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.AcquisitionTipPanel=r_t;var f_y,p_q=(f_y=ui.window.activity.bga.ancient.AncientTailmanHelpTipUI,__extends(h_h,f_y),h_h.prototype.onCloseBtnClick=function(){Qow(h_h)},h_h.prototype.onRemove=function(){Obs(this,Laya)},h_h.prototype.onAdded=function(){Awg(this,Laya)},h_h.open=function(){Amt(UIM,h_h)},h_h.close=function(){Mnn(UIM,h_h)},h_h);function h_h(){var e=f_y.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.AncientTalismanHelpTip=p_q}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.recharge.dailyRechargeUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(e){var p_l=this.dataSource;p_l.startTime=p_l.endTime=0,this.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.ACTIVITY_BGA_DAILY_RECHARGE,this,this.updateRechargeData),LED.on(l_r.ACTIVITY_BGA_CONSUME_RECHARGE,this,this.updateRechargeData),this.tab.selectedIndex=0,this.updateTimeTxt();var p_g=p_l.subVo||[];for(var b_s in p_g){var d_u=p_g[b_s];(0===p_l.startTime||d_u.start<p_l.startTime)&&(p_l.startTime=d_u.start),(0===p_l.endTime||d_u.stop>p_l.endTime)&&(p_l.endTime=d_u.stop),ActivityModel.reqActivityRecord(d_u.type)}},b_s.prototype.updateRechargeData=function(){if(0===this.tab.selectedIndex){this.bgimg.skin="res/ui/activity/mei_03.jpg";var e=DailyRechargeManager.instance.getDailyRechargeDatas();this.list.array=e.sort(this.compareFun),this.firstclp.index=1,this.consumeclp.index=0}1===this.tab.selectedIndex&&(this.bgimg.skin="res/ui/activity/mei_04.jpg",e=DailyRechargeManager.instance.getreChargeConsumeDates(),this.list.array=e.sort(this.compareFun),this.firstclp.index=0,this.consumeclp.index=1),this.updateTimeTxt(),this.list.scrollBar.value=0,this.firstRed.visible=ActivenessModel.instance.redSingle(ActivityTypeDefine.GS_dailyRecharge),this.consumeRed.visible=ActivenessModel.instance.redSingle(ActivityTypeDefine.GS_dailyConsumption)},b_s.prototype.compareFun=function(e,p_l){return e.status===p_l.status?e.id-p_l.id:e.status-p_l.status},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close()}},b_s.prototype.updateTimeTxt=function(){var e=this.dataSource;this.timeTxt.text=Utils.formatTimeStr4(e.startTime,!1)+"-"+Utils.formatTimeStr4(e.endTime,!1);var p_l=1e3*e.endTime-SyncTime.serverTime;0<p_l?(Laya.timer.once(1e3,this,this.updateTimeTxt),this.countDownTxt.text=Utils.formatTimeStr(Math.floor(p_l/1e3))):this.countDownTxt.text=(j_x("1796_1878_1300")+j_x("396_2426"))},b_s.open=function(e){(e=e||ActivityModel.instance.getActivityConfigVo(FuncDefine.dailyRecharge))?UIM.open(b_s,["activity.atlas","recharge.atlas"],e,!1,!1,!0,!0):b_p.broadcastNotice((j_x("1796_1878_206")+j_x("155_1186")))},b_s.prototype.onTabSelect=function(e){-1!==e&&this.updateListData()},b_s.prototype.onRemove=function(e){Kxy(e,this,Laya,LED,l_r)},b_s.prototype.updateListData=function(){Ytl(this)},b_s.prototype.updateItem=function(e,p_l){e&&e.setData(e.dataSource,this.dataSource)},b_s.close=function(){Aku(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.list.vScrollBarSkin="",e.list.scrollBar.elasticDistance=100,e.list.scrollBar.elasticBackTime=200,e.list.itemRender=b_e,e.list.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.tab.selectHandler=Laya.Handler.create(e,e.onTabSelect,null,!1),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.tab.selectedIndex=-1,e}e.DailyRechargePanel=p_g;var d_u,b_e=(d_u=ui.window.recharge.dailyRechargeCellUI,__extends(d_m,d_u),d_m.prototype.setData=function(e,p_l){var p_g,b_s=e.id;if(this._type=e.type,this._type===ActivityTypeDefine.GS_dailyRecharge){var d_u=Config.activity_recharge_dailyRecharge[b_s],b_e=ActivityModel.instance.dailyRechargeVo,d_m=1;this.proBar.visible=!0,b_e&&(this.proBar.value=b_e.gold/d_u.charge,this.barTxt.text=Utils.$("{1}/{2}",b_e.gold,d_u.charge),0==(d_m=b_e.rewardStatus>>b_s-1&1)?(this.redpoint.visible=!0,this.rewardBtn.disabled=!1,this.rewardBtn.label=b_e.gold>=d_u.charge?(j_x("1174_2111")):(j_x("711_2417_2258")+j_x(2376)),this.redpoint.visible=b_e.gold>=d_u.charge,d_m=b_e.gold>=d_u.charge?0:-1):(1===d_m?(this.redpoint.visible=!1,this.rewardBtn.label=(j_x("1300_1174_2111"))):(this.redpoint.visible=!1,this.rewardBtn.label=b_e.gold>=d_u.charge?(j_x("1174_2111")):(j_x("711_2417_2258")+j_x(2376))),this.rewardBtn.disabled=!0)),p_g=DailyRechargeManager.instance.getDailyConfigRewards(b_s,p_l.subVo[0].round),this.rewardList.array=p_g,this.titleTxt.text=Utils.$((j_x("2339_1254_2258")+j_x(2376)+"{1}"+j_x("1263_869")),d_u.charge),this.rewardBtn.dataSource={id:b_s,status:d_m,setId:e.setId}}else if(this._type===ActivityTypeDefine.GS_dailyConsumption){d_u=Config.activity_recharge_dailyConsumption[b_s],b_e=ActivityModel.instance.dailyConsumptionVo;var d_w=1;this.proBar.visible=!0,b_e&&(b_e.gold||(b_e.gold=0,this.proBar.value=b_e.gold/d_u.gold,this.barTxt.text=Utils.$("{1}/{2}",b_e.gold,d_u.gold),0==(d_w=b_e.rewardStatus>>b_s-1&1)?(this.redpoint.visible=!0,this.rewardBtn.disabled=!1,this.rewardBtn.label=b_e.gold>=d_u.gold?(j_x("1174_2111")):(j_x("711_2417_1661")+j_x(2218)),this.redpoint.visible=b_e.gold>=d_u.gold,d_w=b_e.gold>=d_u.gold?0:-1):(1===d_w?(this.redpoint.visible=!1,this.rewardBtn.label=(j_x("1300_1174_2111"))):(this.redpoint.visible=!1,this.rewardBtn.label=b_e.gold>=d_u.gold?(j_x("1174_2111")):(j_x("711_2417_1661")+j_x(2218))),this.rewardBtn.disabled=!0)),b_e.gold&&(this.proBar.value=b_e.gold/d_u.gold,this.barTxt.text=Utils.$("{1}/{2}",b_e.gold,d_u.gold),0==(d_w=b_e.rewardStatus>>b_s-1&1)?(this.redpoint.visible=!0,this.rewardBtn.disabled=!1,this.rewardBtn.label=b_e.gold>=d_u.gold?(j_x("1174_2111")):(j_x("711_2417_1661")+j_x(2218)),this.redpoint.visible=b_e.gold>=d_u.gold,d_w=b_e.gold>=d_u.gold?0:-1):(1===d_w?(this.redpoint.visible=!1,this.rewardBtn.label=(j_x("1300_1174_2111"))):(this.redpoint.visible=!1,this.rewardBtn.label=b_e.gold>=d_u.gold?(j_x("1174_2111")):(j_x("711_2417_1661")+j_x(2218))),this.rewardBtn.disabled=!0))),p_g=DailyRechargeManager.instance.getConsumptionConfigRewards(b_s,p_l.subVo[1].round),this.rewardList.array=p_g,this.titleTxt.text=Utils.$((j_x("2339_1254_1661")+j_x(2218)+"{1}"+j_x("1263_869")),d_u.gold),this.rewardBtn.dataSource={id:b_s,status:d_w,setId:e.setId}}},d_m.prototype.updateItem=function(e,p_l){e&&(e.isShowName=!1,e.isShowNum=!0,e.isShowTick=!1,e.setItemData(e.dataSource,ItemBoxDefine.MODULE_ITEM))},d_m.prototype.onClick=function(p_l){this.dataSource.type;var b_s=p_l.target;if(b_s){var d_u;if(this._type===ActivityTypeDefine.GS_dailyRecharge&&(d_u=b_s.dataSource)){var b_e=d_u.status;0===b_e?DB.instance.query(c2w_gsaAct_daily_recharge_reward,{id:d_u.setId}):-1===b_e&&(p_g.close(),e.RechargePanel.open())}if(this._type===ActivityTypeDefine.GS_dailyConsumption&&(d_u=b_s.dataSource)){var d_m=d_u.status;0===d_m?DB.instance.query(c2w_gsaAct_daily_consumption_reward,{id:d_u.setId}):-1===d_m&&(p_g.close(),e.ShopAllPanel.open())}}},d_m);function d_m(){var p_l=d_u.call(this)||this;return p_l.rewardBtn.on(Laya.Event.CLICK,p_l,p_l.onClick),p_l.rewardList.itemRender=e.ItemBox,p_l.rewardList.renderHandler=Laya.Handler.create(p_l,p_l.updateItem,null,!1),p_l}e.DailyRechargeCell=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.recharge.firstrechargeUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){LED.on(l_r.ACTIVITY_BGA_FIRST_RECHARGE,this,this.updateDate),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.firstRecharge);var p_l=Config.talisman_talisman[GlobalDefine.firstcharge];this.showRoleModels(p_l.avatar,p_l.showAct);var p_g=FuncDefine.firstRecharge,b_s=LgcM.ins.heroVo,d_u=Config.activity_activity[p_g],b_e=d_u.conf.rewards[0].reward;this.list.array=b_p.getRewardDatasByEntryId(b_e,b_s.entryId),ActivityModel.reqActivityRecord(d_u.type),ActivityModel.instance.firstRecharge_red=!0,UIM.instance.isOpenWin(e.MonthCardPanel)&&e.MonthCardPanel.close(),this.closebtn.on(Laya.Event.CLICK,this,this.onclick),this.backbtn.on(Laya.Event.CLICK,this,this.onclick),this.onebtn.on(Laya.Event.CLICK,this,this.onClickOne),this.twobtn.on(Laya.Event.CLICK,this,this.onClickTwo),this.threebtn.on(Laya.Event.CLICK,this,this.onClickThree),this.fourbtn.on(Laya.Event.CLICK,this,this.onClickFour)},b_s.prototype.showRoleModels=function(e,p_l){void 0===p_l&&(p_l="stand"),e&&""!=e&&(this._roleModel||(this._roleModel=new n_k,this.modelContainer.addChild(this._roleModel)),this._roleModel.changeModel(e),this._roleModel.setAction(p_l,0,!0))},b_s.prototype.onClickFour=function(){Ulh(b_p,Config)},b_s.prototype.onClickOne=function(){Wrp(b_p,Config)},b_s.prototype.onClickThree=function(){Oga(b_p,Config)},b_s.prototype.updateItem=function(e,p_l){e&&(e.isShowName=!1,e.setItemData(e.dataSource),e.setQuality(5))},b_s.prototype.removeRoleModel=function(){this._roleModel&&(this._roleModel.dispose(),this._roleModel.removeSelf(),this._roleModel=null)},b_s.prototype.onClickTwo=function(){Cxd(b_p,Config)},b_s.open=function(){GPlatform.isShowRecharge&&UIM.open(b_s,["recharge.atlas"],null,!1,!1,!0,!1)},b_s.prototype.onRemove=function(){this.closebtn.off(Laya.Event.CLICK,this,this.onclick),this.backbtn.off(Laya.Event.CLICK,this,this.onclick),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.firstRecharge),LED.off(l_r.ACTIVITY_BGA_FIRST_RECHARGE,this,this.updateDate),this._roleModel&&this._roleModel.clearRes(),this.onebtn.off(Laya.Event.CLICK,this,this.onClickOne),this.twobtn.off(Laya.Event.CLICK,this,this.onClickTwo),this.threebtn.off(Laya.Event.CLICK,this,this.onClickThree),this.fourbtn.off(Laya.Event.CLICK,this,this.onClickFour)},b_s.prototype.onclick=function(){Opq(b_s)},b_s.prototype.updateDate=function(){var e=ActivityModel.instance.firstRechargeVo,p_l=TalismanModel.instance.getTalismanById(Config.activity_activity[1].talismanId),p_g=TalismanModel.instance.calDeploymentsApt(p_l.deployments);b_p.getNumSp("FINGT_BIG",p_g,this.qualityIcon,-11),0<e.gold&&b_s.close()},b_s.close=function(){Cwi(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.list.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.FirstRechargePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.activity.bga.share.shareUI,__extends(d_u,p_l),d_u.prototype.init=function(){Gyt(this,Laya)},d_u.prototype.onRemove=function(){Kon(e,this,Laya,LED,l_r)},d_u.prototype.onAdd=function(){this.list.repeatX=5,this.list.repeatY=1,ShareMgr.ins.reqFristShareInfo(),this.list.renderHandler=p_g.create(this,this.onRender,[this.list],!1),this.on(Laya.Event.CLICK,this,this.onclick),LED.on(l_r.SHARE,this,this.updateShare),this.updateBtn()},d_u.prototype.updateShare=function(){Irh(this)},d_u.prototype.onclick=function(p_l){switch(p_l.target){case this.btnClose:this.closeSelf();break;case this.btnShare:if(this.statu==StateDefine.statu_no)if(GPlatform.isWanba)WanbaLoginManager.instance.wanbaData.isChannel(AgentWanba.WX)?e.ShareGuild.open():WanbaPlatform.instance.wbShare();else if(GPlatform.isXjWx)XjwxPlatform.instance.xjwxShare();else if(GPlatform.isWx)WXPlatform.instance.dlwxShare();else if(GPlatform.isHuoshuWx)HswxPlatform.instance.hswxShare();else if(GPlatform.isQQMini)QQMiniPlatform.instance.share();else if(GPlatform.isH5){var p_g=Config.activity_invite_invite[101];if(p_g){var b_s=p_g.shareContent[0];H5Platform.ins.onShareMessage(b_s.title,b_s.desc)}}else GPlatform.isXJH5?H5XJPlatform.ins.showShare():GPlatform.isYZX?H5YzxLoginManager.instance.isSupportShare?v_t.ins.share():e.ShareGuild.open():ShareMgr.ins.reqShare();break;case this.btnReward:ShareMgr.ins.reqShareReward()}},d_u.prototype.updateBtn=function(){var e=Config.activity_invite_invite[101].reward;this.list.array=e;var p_l=ShareMgr.ins.canRewardShare;this.btnReward.visible=p_l,this.btnShare.visible=!p_l;var p_g=ShareMgr.ins.isHasShareReward,b_s=p_l?(j_x("1174_2111_2235")+j_x(83)):(j_x("1190_282_1336")+j_x(223));p_g&&(b_s=(j_x("1300_1174_2111"))),this.btnReward.label=b_s,z_j.setGray(this.btnReward,p_g),p_g&&this.closeSelf()},Object.defineProperty(d_u.prototype,"statu",{get:function(){return ShareMgr.ins._fristShareStatu},enumerable:!0,configurable:!0}),d_u.prototype.onRender=function(e,p_l,p_g){if(e==this.list){var b_s=p_l.getChildByName("itemBox"),d_u=p_l.dataSource;b_s.isShowName=!1,b_s.isShowTick=!1;var b_e=new ModuleItemVO;b_s.isShowQuaEft=!1,b_e.id=d_u[0],b_e.amount=0,b_s.setItemData(b_e),b_s.bg.alpha=0}},d_u.prototype.closeSelf=function(){Aft(d_u)},d_u.open=function(){Odg(UIM,d_u)},d_u.close=function(){Acr(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e.init(),e}e.FirstSharePanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.activity.bga.godwealth.godwealthUI,__extends(d_u,p_l),d_u.prototype.init=function(){Wgo(this,Laya)},d_u.prototype.upDatepanel=function(){var e=ActivityModel.instance.rouletterecord,p_l=ActivityModel.instance.rouletteinfo;if(ActivityModel.instance.roulettestart,p_l){if(this.rewardbox&&this.rewardbox._childs&&0<this.rewardbox._childs.length&&0<p_l.conf.length)for(var p_g=0;p_g<this.rewardbox.numChildren;++p_g){var b_s=this.rewardbox.getChildAt(p_g);if(b_s){var d_u=b_s.getChildByName("clip1"),b_e=b_s.getChildByName("clip2"),d_m=b_s.getChildByName("clip3"),d_w=(p_l.conf[p_g],p_l.conf[p_g]),f_t=d_w/100%10,v_z=d_w/1e3%10,d_h=d_w/1e4%10;d_u.index=parseInt(f_t.toString()),b_e.index=parseInt(v_z.toString()),d_m.index=parseInt(d_h.toString()),0==d_m.index&&(d_m.visible=!1,0==b_e.index&&(b_e.visible=!1))}}var r_t=this.dataSource;if(!r_t||!r_t.subVo[0]||!r_t.subVo[0].type)return;var t_n=ActivityModel.instance.getActivityConfigVoByType(r_t.subVo[0].type),f_y=SyncTime.serverTime/1e3;t_n&&0<t_n.subVo[0].stop-f_y&&(Laya.timer.clear(this,this.onTimer),Laya.timer.loop(1e3,this,this.onTimer))}if(e){this.god_redpoint.visible=!1;var p_q=ActivityModel.instance.rouletterecord;(0<p_q.freeCount||0<p_q.rechargeCount)&&(this.god_redpoint.visible=!0),3==p_q.type&&(this.listdesctxt.visible=!0,this.freeCounttxt.style.color="#f0ecd8",this.freeCounttxt.style.fontSize=22,this.freeCounttxt.style.font="SimHei",this.freeCounttxt.style.wordWrap=!0,this.freeCounttxt.style.align="center",this.freeCounttxt.style.valign="center",this.freeCounttxt.style.leading=15,this.freetxt.text="",0<p_q.freeCount&&(this.freetxt.text="",this.freeCounttxt.innerHTML=Utils.$((j_x("2339_1254_1163")+j_x("2195_235_2348")+":{1}"),p_q.freeCount)),p_q.freeCount<=0&&(this.freeCounttxt.innerHTML=Utils.$((j_x("1644_2258_2376")+"{1}"+j_x("1263_869_531")+j_x("1976_2195_2235")+j_x("235_2348")+"{2}/{3}"),p_q.needGold,Utils.setColor(Utils.$("{1}",p_q.rechargeCount),"#71de66"),Utils.setColor(Utils.$("{1}",p_q.rechargeTotal-p_q.rechargeCostCount),"#71de66"))),p_q.rechargeTotal==p_q.rechargeCostCount&&(this.freetxt.text=(j_x("2339_1254_2195")+j_x("2235_235_2348")+j_x("1300_1117_1067")+j_x(2128)+" 0"+j_x("932_1374_745")),this.freeCounttxt.innerHTML=""),p_q.recordArr&&0<p_q.recordArr.length&&p_q.recordArr[0].name&&(this.listdesctxt.visible=!1,this.list.array=p_q.recordArr,this.list.scrollBar.value=27*this.list.array.length),0<p_q.curInputGold&&(this.moneyCount.text=Utils.$(("{1}"+j_x("1263_869")),p_q.curInputGold)))}},d_u.prototype.ClearEffect=function(){if(this.coinEffecteModels){if(0<this.coinEffecteModels.length)for(var e=0,p_l=this.coinEffecteModels;e<p_l.length;e++)p_l[e].dispose();this.coinEffecteModels=[]}},d_u.prototype.PlayFullScenseCoin=function(e,p_l,p_g,b_s,d_u,b_e,d_m){if(this.coinEffecteModels){var d_w=function(d_w){var v_z=Math.floor(Math.random()*d_m);Laya.timer.once(d_u*d_w+v_z,t_n,(function(){function d_u(e){var d_u=p_l*d_w+e;if(d_u<v_z.coinEffecteModels.length){var d_h=v_z.coinEffecteModels[d_u];d_h.visible=!0,d_h.changeModel("effects/others");var r_t=Math.floor(Math.random()*b_s+p_g),t_n=Math.floor(Math.random()*d_m);d_h.pos(e*f_t+r_t-30,r_t),d_h.setAction("moneyRain",0,!0,300),d_h.IsPlayStand=!1,Laya.Tween.to(d_h,{j_l:Stage.height},b_e+t_n,null,Laya.Handler.create(v_z,(function(){d_h.visible=!1})))}}for(var v_z=this,d_h=0;d_h<e;d_h++)d_u(d_h)}))};this.ModelContainer.visible=!0;var f_t=Stage.width/(e-1);if(Stage.height,this.coinEffecteModels.length<=0)for(var v_z=0;v_z<p_l;v_z++)for(var d_h=0;d_h<e;d_h++){var r_t=new n_k;this.ModelContainer.addChild(r_t),this.coinEffecteModels.push(r_t)}var t_n=this;for(v_z=0;v_z<p_l;v_z++)d_w(v_z);Laya.timer.once(d_u*(.7*p_l)+b_e,this,(function(){this.ModelContainer.visible=!1}))}},d_u.prototype.onRecord=function(){Chb(d_m)},d_u.prototype.onAdded=function(){x_p.instance.ogOdwealth=!1,this.rewardBtn.mouseEnabled=!0,this.list.vScrollBarSkin="",this.list.repeatY=50,this.list.scrollBar.elasticBackTime=500,this.list.scrollBar.elasticDistance=200,this.list.renderHandler=p_g.create(this,this.updateItem,[this.list],!1),DB.instance.query(c2w_roulette_info,{}),DB.instance.query(c2w_roulette_record,{type:3}),this.on(Laya.Event.CLICK,this,this.onClick),this.record.on(Laya.Event.CLICK,this,this.onRecord),LED.on(l_r.GODWEALTH_UPDATE_INFO,this,this.upDatepanel),LED.on(l_r.GODWEALTH_UPDATE_RECORD,this,this.upDateAngle),this.onTimer()},d_u.prototype.createTweento=function(e,p_l){this.rewardBtn.mouseEnabled=!0,laya.utils.Tween.clearAll(e),Laya.timer.once(500,v_z,v_z.open),this.PlayFullScenseCoin(10,6,-100,300,200,800,200),DB.instance.query(c2w_roulette_get_reward,{})},d_u.prototype.onRemove=function(){Iae(this,Laya,laya,LED,l_r)},d_u.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":d_u.close();break;case"rewardBtn":var p_l=ActivityModel.instance.rouletterecord;if(!p_l)return;if(p_l.freeCount<=0&&p_l.rechargeCount<=0){b_p.broadcastNotice((j_x("2195_2235_235")+j_x("2348_2462_1779")),1,"#FF0000");break}if(b_p.checkCoin(1,p_l.curInputGold)){DB.instance.query(c2w_roulette_start,{});break}b_p.broadcastNotice((j_x("1263_869_2462")+j_x(1779)),1,"#FF0000");break;case"helpBtn":t_n.open()}},d_u.prototype.onTimer=function(){var e=this.dataSource;if(e){var p_l=SyncTime.serverTime/1e3;!e&&!e.subVo||!e.subVo[0]||e.subVo.length<=0?Laya.timer.clear(this,this.onTimer):e&&e.subVo&&e.subVo[0]&&0<e.subVo.length?0<e.subVo[0].stop-p_l&&(this.activitydatetxt.text=Utils.formatTimeStr2(e.subVo[0].sulTime,!0)):Laya.timer.clear(this,this.onTimer)}},d_u.prototype.updateItem=function(e,p_l,p_g){if(this.visible&&e==this.list){var b_s=p_l.getChildByName("desctxt");b_s.style.color="#42435a",b_s.style.fontSize=22,b_s.style.font="SimHei",b_s.style.wordWrap=!0,b_s.style.align="left",b_s.style.valign="center",b_s.style.leading=15;var d_u=p_l.dataSource;b_s.innerHTML=Utils.$(("{1}:"+j_x("2035_141_2364")+j_x("1802_869_531")+j_x("1976_743")+"{2}"+j_x("1785_365_1516")+","+j_x("989_1976_743")+"{3}"+j_x("1263_869")+","+j_x("1724_455_1047")+j_x(1726)),d_u.name,d_u.mult/100,Utils.setColor(Utils.$("{1}",d_u.getGold),"#00802e"))}},d_u.prototype.upDateAngle=function(){Eqe(ActivityModel,this)},d_u.prototype.createTween=function(e,p_l){var p_g;e.rotation=0,this.rewardBtn.mouseEnabled=!1,p_g=1800+36*p_l+72,laya.utils.Tween.to(e,{rotation:p_g},1e3,Laya.Ease.linearOut,Laya.Handler.create(this,this.createTweenfrom,[e,p_g]))},d_u.open=function(e){(e=e||ActivityModel.instance.getActivityConfigVo(FuncDefine.GodWealth))?UIM.open(d_u,["activity/roulette.atlas"],e):b_p.broadcastNotice((j_x("1796_1878_206")+j_x("155_1186")))},d_u.prototype.createTweenfrom=function(e,p_l){p_l+=288,laya.utils.Tween.to(e,{rotation:p_l},1e3,Laya.Ease.linearOut,Laya.Handler.create(this,this.createTweento,[e,p_l]))},d_u.close=function(){Ule(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e.coinEffecteModels=[],e.init(),e}e.GodWealthPanel=b_s;var b_e,d_m=(b_e=ui.window.activity.bga.godwealth.godwealthrewardUI,__extends(d_w,b_e),d_w.prototype.init=function(){Unt(this,Laya)},d_w.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":d_w.close()}},d_w.prototype.upDatelist=function(){var e=ActivityModel.instance.rouletterecord;if(e&&(this.listdesctxt.visible=!0,1==e.type&&e.recordArr&&0<e.recordArr.length&&e.recordArr[0].name)){this.listdesctxt.visible=!1;for(var p_l=[],p_g=e.recordArr.length-1;0<=p_g;p_g--){var b_s=new x_roulette_record;b_s.getGold=e.recordArr[p_g].getGold,b_s.intputGold=e.recordArr[p_g].intputGold,b_s.mult=e.recordArr[p_g].mult,b_s.name=e.recordArr[p_g].name,b_s.time=e.recordArr[p_g].time,p_l.push(b_s)}this.list.array=p_l}},d_w.prototype.onAdded=function(){this.list.vScrollBarSkin="",this.list.repeatY=50,this.list.scrollBar.elasticBackTime=500,this.list.scrollBar.elasticDistance=200,this.list.renderHandler=p_g.create(this,this.updateItem,[this.list],!1),DB.instance.query(c2w_roulette_record,{type:1}),this.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.GODWEALTH_UPDATE_INFO,this,this.upDatelist)},d_w.prototype.updateItem=function(e,p_l,p_g){if(this.visible&&e==this.list){var b_s=p_l.getChildByName("desctxt");b_s.style.color="#42435a",b_s.style.fontSize=21,b_s.style.font="SimHei",b_s.style.wordWrap=!0,b_s.style.align="left",b_s.style.valign="center",b_s.style.leading=10;var d_u=p_l.dataSource,b_e=parseInt((d_u.mult/100).toString()),d_m=d_u.mult%100/10;b_s.innerHTML=Utils.$(("{1}:"+j_x("1188_2456")+"{2}"+j_x("1263_869_531")+j_x("1976_743")+"{3}"+j_x("1785_365_1516")+","+j_x("989_1976_743")+"{4}"+j_x("1263_869")),Utils.formatTimeStr4(d_u.time,!1),d_u.intputGold,b_e+d_m/10,Utils.setColor(Utils.$("{1}",d_u.getGold),"#00802e"))}},d_w.prototype.onRemove=function(){Ugu(this,Laya,LED,l_r)},d_w.open=function(){Ype(UIM,d_w)},d_w.close=function(){Itr(UIM,d_w)},d_w);function d_w(){var e=b_e.call(this)||this;return e.init(),e}e.GodWealthRewardListPanel=d_m;var f_t,v_z=(f_t=ui.window.activity.bga.godwealth.rewardTipUI,__extends(d_h,f_t),d_h.prototype.init=function(){Gbe(this,Laya)},d_h.prototype.onUPdate=function(){var e=ActivityModel.instance.rouletterecord,p_l=ActivityModel.instance.rouletteinfo,p_g=ActivityModel.instance.roulettestart;if(p_g&&e){this.desc.style.color="#f0ecd8",this.desc.style.fontSize=22,this.desc.style.font="SimHei",this.desc.style.wordWrap=!0,this.desc.style.align="left",this.desc.style.valign="center",this.desc.style.leading=15;var b_s=p_l.conf[p_g.mult-1],d_u=b_s/100%10,b_e=b_s/1e3%10,d_m=b_s/1e4%10,d_w=d_m.toString()+b_e.toString()+d_u.toString();d_m<1&&(d_w=b_e.toString()+d_u.toString(),b_e<1&&(d_w=d_u.toString()));var f_t=Math.floor(e.curInputGold*parseInt(d_w));this.desc.innerHTML=Utils.$((j_x("531_1976")+"{1}"+j_x("1785_365_1516")+","+j_x("989_1976")+"{2}"+j_x("1263_869")),d_w,Utils.setColor(Utils.$("{1}",f_t),"#71de66")),DB.instance.query(c2w_roulette_record,{type:3})}},d_h.open=function(){Ihs(UIM,d_h)},d_h.prototype.onAdded=function(){Gei(this)},d_h.prototype.onRemove=function(){},d_h.close=function(){Qcs(UIM,d_h)},d_h);function d_h(){var e=f_t.call(this)||this;return e.init(),e}e.rewardTipPanel=v_z;var r_t,t_n=(r_t=ui.window.activity.bga.godwealth.godwealthhelpUI,__extends(f_y,r_t),f_y.prototype.onAdded=function(){Kuv(this,Laya)},f_y.open=function(){Eig(UIM,f_y)},f_y.prototype.onRemoved=function(){Ynd(this,Laya)},f_y.prototype.onClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":f_y.close()}},f_y.close=function(){Eau(UIM,f_y)},f_y);function f_y(){var e=r_t.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.GodWealthHelpPanel=t_n}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.KFopenSer.KFopenSerHelpUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Cwd(this,Laya)},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close()}},b_s.prototype.onRemove=function(){Yty(this,Laya)},b_s.open=function(){Qnb(UIM,b_s)},b_s.close=function(){Olx(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.KFopenSerHelp=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.KFopenSer.KFopenSerRankUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Ybk(this,Laya)},b_s.prototype.openSelectPanel=function(p_l){var p_g=this.selectItem;if(p_g){if(!d_x.instance.getIsCan(this.isCross))return;var b_s=new PvpRecordVo;b_s.pid=p_g.getPlayerId(),b_s.ori=1,b_s.isCross=this.isCross,e.PvpChallengeSelectedPanel.open(b_s)}},b_s.prototype.selectPerson=function(p_l){if(-1!=p_l){var p_g=this.personLst.getCell(p_l).dataSource;if(p_g){if(this.isCross&&KFopenSerModel.instance.isSameServer(p_g.getServerId()))return;this.selectItem=p_g;var b_s=z_j.createMenuVo(p_g.getPlayerId(),p_g.getPlayName(),[CheckBtnType.kill],Laya.Handler.create(this,this.openSelectPanel,null,!1));e.CheckMenu.show(b_s)}this.personLst.selectedIndex=-1}},b_s.prototype.updateServerLstData=function(e,p_l){if(e){var p_g=e.dataSource,b_s=p_l+1,d_u=e.getChildByName("rankClip"),b_e=e.getChildByName("serverId"),d_m=e.getChildByName("integral"),d_w=e.getChildByName("rankIdx");b_s<=3?d_u.index=p_l:d_w.text=b_s.toString(),d_u.visible=b_s<=3,b_e.text=p_g.serverID+(j_x(1998)),d_m.text=p_g.value.toString(),d_w.visible=3<b_s,p_g.serverID===KFopenSerModel.instance.OwnServerId?b_e.color=d_m.color=d_w.color="#00802e":b_e.color=d_m.color=d_w.color="#b92929"}},b_s.prototype.onRemoved=function(){},b_s.prototype.updateLstData=function(e){var p_l,p_g=this.KFhaveSatus_box.getChildByName("playerName"),b_s=this.KFhaveSatus_box.getChildByName("serverId"),d_u=this.KFhaveSatus_box.getChildByName("rankIdx"),b_e=this.KFhaveSatus_box.getChildByName("rankValue"),d_m=this.KFhaveSatus_box.getChildByName("nametxt"),d_w=this.KFhaveSatus_box.getChildByName("rank_txt"),f_t=!1,v_z=5==this._type?ActivityTypeDefine.BG_cs_asyncPvpScoreRank:"";if(0===e){this.KFhaveSatus_box.visible=!0,this.serverTitle_box.visible=this.serverLst.visible=!0,this.personTitle_box.visible=this.personLst.visible=!1;var d_h=KFopenSerModel.instance.getServerRankIndex(v_z);p_l=KFopenSerModel.instance.RankServerValue,this.serverLst.array=p_l,this.notRankdata_txt.text=(j_x("2287_814_34")+j_x("1998_1067_1077")),this.notRankdata_txt.visible=!(0<p_l.length),d_m.visible=p_g.visible=d_w.visible=b_e.visible=!1,this.notKFstatus_txt.visible=!1,d_u.text=0<d_h?d_h.toString():(j_x("206_1067_1077"))}else 1===e&&(0===KFopenSerModel.instance.KF_status?(this.notKFstatus_txt.visible=!0,this.KFhaveSatus_box.visible=!1):(this.notKFstatus_txt.visible=!1,this.KFhaveSatus_box.visible=!0),this.serverTitle_box.visible=this.serverLst.visible=!1,this.personTitle_box.visible=this.personLst.visible=!0,p_l=this._rankVo?this._rankVo.getItems():[],this.personLst.array=p_l,this.notRankdata_txt.text=(j_x("2287_814_2217")+j_x("1738_1067_1077")),this.notRankdata_txt.visible=!(0<p_l.length),d_m.visible=p_g.visible=d_w.visible=b_e.visible=!0,p_g.text=this.heroVo.name,b_s.text=KFopenSerModel.instance.OwnServerId.toString(),b_e.text=this.getScore(),d_u.text=this._rankVo&&this._rankVo.getOwnIndex()?this._rankVo.getOwnIndex().toString():(j_x("206_1067_1077")),v_z==ActivityTypeDefine.BG_cs_asyncPvpScoreRank&&(f_t=!0));b_s.text=KFopenSerModel.instance.OwnServerId+(j_x(1998)),this.txtKill.visible=f_t,this.personLst.height=f_t?530:571},b_s.prototype.onTabSelect=function(e){Mdr(e,this)},b_s.prototype.getScore=function(){var e=(j_x(814)),p_l=this._rankVo;if(this.isCross&&5==this._type){if(p_l)for(var p_g=p_l.getItems(),b_s=void 0,d_u=LgcM.ins.heroVo,b_e=0;b_e<p_g.length;b_e++)if((b_s=p_g[b_e]).getPlayerId()==d_u.id&&KFopenSerModel.instance.isSameServer(b_s.getServerId())){e=b_s.getValue()+"";break}}else p_l&&(e=p_l.getOwnValue().toString());return e},b_s.prototype.updatePersonLstData=function(e,p_l){if(e){var p_g=e.dataSource,b_s=p_g.getRankIndex(),d_u=e.getChildByName("rankClip"),b_e=e.getChildByName("serverId"),d_m=e.getChildByName("value"),d_w=e.getChildByName("rankIdx"),f_t=e.getChildByName("name");d_u.visible=b_s<=3,d_w.visible=3<b_s,b_s<=3?d_u.index=b_s-1:d_w.text=b_s.toString(),b_e.text=p_g.getServerId()+(j_x(1998)),d_m.text=p_g.getValue().toString(),f_t.text=p_g.getPlayName(),p_g.getServerId()===KFopenSerModel.instance.OwnServerId?b_e.color=d_m.color=d_w.color=f_t.color="#00802e":b_e.color=d_m.color=d_w.color=f_t.color="#b92929"}},b_s.prototype.updateTitle=function(){var e=this.KFhaveSatus_box.getChildByName("rank_txt"),p_l="";if(this.dataSource)switch(this.dataSource[1]){case 1:p_l=(j_x("383_767_2452")+j_x(443));break;case 2:p_l=(j_x("799_869_383")+j_x("767_2452_443"));break;case 3:p_l=(j_x("799_869_115")+j_x("1621_2452_443"));break;case 4:p_l=(j_x("189_438_2452")+j_x(443));break;case 5:p_l=(j_x("514_2224_2452")+j_x(443))}this.serverLab.text=this.personallab.text=p_l,e.text=""!=p_l?p_l+":":""},Object.defineProperty(b_s.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),b_s.prototype.onClickClose=function(){Sph(this)},b_s.open=function(e,p_l,p_g){void 0===p_g&&(p_g=0),UIM.open(b_s,null,[e,p_l,p_g],!1,!1,!0)},b_s.prototype.close=function(){Irj(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),z_j.setList(e.serverLst,e,e.updateServerLstData),z_j.setListScroll(e.serverLst),z_j.setList(e.personLst,e,e.updatePersonLstData,e.selectPerson),z_j.setListScroll(e.personLst),e.tab.selectHandler=Laya.Handler.create(e,e.onTabSelect,null,!1),e}e.KFopenSerRank=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.KFopenSer.KFopenSerRewardUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){if(LED.on(l_r.KF_UPDATE_SERVER_VALUE,this,this.onUpdateRedPoint),this.tab.selectedIndex=0,this.dataSource){var e=this.dataSource[1];0<e.sulTime&&Laya.timer.loop(1e3,this,this.updateSulTime,[e]),this.personalredpoint.visible=this.tab.items[1].visible,this.updateSulTime(e),this.onSelectMenuTap(0),this.onUpdateRedPoint(),this.getReward.on(Laya.Event.CLICK,this,this.onClickGetReward),this.closebtn.on(Laya.Event.CLICK,this,this.onClickClose),this.backbtn.on(Laya.Event.CLICK,this,this.onClickClose)}},b_s.prototype.onSelectMenuTap=function(e){if(-1!==e){this.getReward.visible=!0,this.tab.selectedIndex=e;var p_l=this.dataSource[0],p_g=(this.dataSource[1],0===this.tab.selectedIndex?GET_TYPE.SERVE:GET_TYPE.PERSON),b_s=ActivityModel.instance.getRankTypeByActType(p_l);if(this.list.array=KFopenSerModel.instance.getRewards(b_s,p_l,p_g),this._rankType=b_s,this.onUpdateRedPoint(),0===e){this.ranking_box.visible=!0,this.notstatus.visible=!1;var d_u=KFopenSerModel.instance.getServerRankIndex(p_l);this.rankingidx.text=0<d_u?d_u.toString():(j_x("206_1067_1077")),this.ranking.text=(j_x("34_1998_2434")+j_x(1511)+":")}else{var b_e=RankModel.instance.getRankDataByType_KF(this._rankType);this.rankingidx.text=b_e&&b_e.getOwnIndex()?b_e.getOwnIndex().toString():(j_x("206_1067_1077")),this.ranking_box.visible=0!==KFopenSerModel.instance.KF_status,this.notstatus.visible=0===KFopenSerModel.instance.KF_status,this.ranking.text=(j_x("844_455_2434")+j_x(1511)+":"),this.getReward.visible=1===KFopenSerModel.instance.KF_status}}},b_s.prototype.updateItem=function(e,p_l){if(e){if(-1==this.tab.selectedIndex)return;e.setData(e.dataSource,this.tab.selectedIndex)}},b_s.prototype.onRemoved=function(){Sxj(LED,l_r,this,Laya)},b_s.open=function(e,p_l){Uym(e,p_l,UIM,b_s)},b_s.prototype.updateSulTime=function(e){0<e.inShowTime_KF?(this.countdowndec.text=(j_x("1174_2235_810")+j_x("867_1702")),this.countdown_txt.text=Utils.formatTimeStr(e.sulTime)):(this.countdowndec.text=(j_x("1796_1878_810")+j_x("867_1702")),this.countdown_txt.text=Utils.formatTimeStr(e.toShowTime_KF))},b_s.prototype.onClickGetReward=function(){if(this.dataSource)if(this.dataSource[1].inShowTime_KF<=0)b_p.broadcastNotice((j_x("1796_1878_206")+j_x("396_2426")));else{var e=this.dataSource[0],p_l=0===this.tab.selectedIndex?1:0;KFopenSerModel.instance.reqGetReward(e,p_l)}},b_s.prototype.onUpdateRedPoint=function(){var e=this.dataSource[0];this.personalredpoint.visible=x_p.instance.KFRankHasPersonalReward(e)&&1===KFopenSerModel.instance.KF_status,this.serverredpoint.visible=x_p.instance.KFRankHasServerReward(e),this.getrewardred.visible=0===this.tab.selectedIndex?x_p.instance.KFRankHasServerReward(e):x_p.instance.KFRankHasPersonalReward(e),this.getReward.disabled=!this.getrewardred.visible;var p_l,p_g=ActivityModel.instance.getActDataByType(e);p_g&&(p_l=0===this.tab.selectedIndex?0<p_g.kfServeRewardTime:0<p_g.kfPersonRewardTime),this.alreadyget.visible=p_l},b_s.prototype.onClickClose=function(){Amb(this)},b_s.prototype.close=function(){Sfs(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e._rankType=RankType.KF_powerGainRank,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.list.vScrollBarSkin="",e.list.scrollBar.elasticDistance=100,e.list.scrollBar.elasticBackTime=200,e.list.itemRender=b_e,e.list.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.tab.selectHandler=Laya.Handler.create(e,e.onSelectMenuTap,null,!1),e}e.KFopenSerReward=p_g;var d_u,b_e=(d_u=ui.window.activity.bga.KFopenSer.KFopenSerReward_cellUI,__extends(d_m,d_u),d_m.prototype.setData=function(e,p_l){var p_g=e;this.list.array=b_p.getRewardDatas(p_g.reward),p_g.beginIdx===p_g.endIdx?this.rank_txt.text=(j_x(573))+p_g.beginIdx+(j_x(1511)):this.rank_txt.text=(j_x(573))+p_g.beginIdx+"-"+p_g.endIdx+(j_x(1511))},d_m.prototype.updateItemData=function(e,p_l){e&&(e.isShowName=!1,e.isShowQuaEft=!1,e.setItemData(e.dataSource))},d_m);function d_m(){var p_l=d_u.call(this)||this;return p_l.list.itemRender=e.ItemBox,p_l.list.renderHandler=Laya.Handler.create(p_l,p_l.updateItemData,null,!1),p_l}e.KFopenSerRewardCell=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.KFopenSer.KFopenSerTargetUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){LED.on(l_r.KF_DATA_UPDATE,this,this.onUpdateKFstatus),LED.on(l_r.KF_RANK_UPDATE,this,this.updateRankLst),LED.on(l_r.KF_UPDATE_SERVER_VALUE,this,this.onUpdateServerValue);var e=this.dataSource,p_l=LgcM.ins.heroVo;if(e){switch(e.subVo[0].type){case ActivityTypeDefine.BG_cs_powerGainRank:this.title_clip.index=0,this.bg.skin="res/ui/activity/kfOpenSer/bg_zhanli.jpg",KFopenSerModel.instance.reqHaveKFstatus(p_l.id,1003),RankModel.instance.reqGetRank_KF(RankType.KF_powerGainRank,1),this._type=1,this.rankIncrease.text=(j_x("383_767_2452")+j_x(443));break;case ActivityTypeDefine.BG_cs_talismanGainRank:this.title_clip.index=1,this.bg.skin="res/ui/activity/kfOpenSer/bg_fabao.jpg",KFopenSerModel.instance.reqHaveKFstatus(p_l.id,1004),RankModel.instance.reqGetRank_KF(RankType.KF_talismanGainRank,1),this._type=2,this.rankIncrease.text=(j_x("799_869_383")+j_x("767_2452_443"));break;case ActivityTypeDefine.BG_cs_talismanAptGainRank:this.title_clip.index=2,this.bg.skin="res/ui/activity/kfOpenSer/bg_zizhi.jpg",KFopenSerModel.instance.reqHaveKFstatus(p_l.id,1005),RankModel.instance.reqGetRank_KF(RankType.KF_talismanAptRank,1),this._type=3,this.rankIncrease.text=(j_x("799_869_115")+j_x("1621_2452_443"));break;case ActivityTypeDefine.BG_cs_xianYuanGainRank:this.title_clip.index=3,this.bg.skin="res/ui/activity/kfOpenSer/bg_xianyuan.jpg",KFopenSerModel.instance.reqHaveKFstatus(p_l.id,1006),RankModel.instance.reqGetRank_KF(RankType.KF_XianYuanRank,1),this._type=4,this.rankIncrease.text=(j_x("189_438_2452")+j_x(443))}b_s._clearRes=this.bg.skin,ActivityModel.reqActivityRecord(e.subVo[0].type),this.activityTime_txt.text=Utils.formatTimeStr4(e.subVo[0].start,!1)+"-"+Utils.formatTimeStr4(e.subVo[0].stop-e.subVo[0].showTime,!1),0<e.subVo[0].sulTime&&Laya.timer.loop(1e3,this,this.updateSulTime,[e.subVo[0]]),this.updateSulTime(e.subVo[0])}},b_s.prototype.updateRankLst=function(){var e,p_l;this.subVo.type===ActivityTypeDefine.BG_cs_powerGainRank?(e=RankType.KF_powerGainRank,this.rank_protome.text=(j_x("383_767_2452")+j_x(443)+":")):this.subVo.type===ActivityTypeDefine.BG_cs_talismanGainRank?(e=RankType.KF_talismanGainRank,this.rank_protome.text=(j_x("799_869_2452")+j_x(443)+":")):this.subVo.type===ActivityTypeDefine.BG_cs_talismanAptGainRank?(e=RankType.KF_talismanAptRank,this.rank_protome.text=(j_x("799_869_115")+j_x("1621_2452_443")+":")):this.subVo.type===ActivityTypeDefine.BG_cs_xianYuanGainRank&&(e=RankType.KF_XianYuanRank,this.rank_protome.text=(j_x("189_438_2452")+j_x(443)+":")),this._rankVo=p_l=RankModel.instance.getRankDataByType_KF(e),this.rankLst.array=p_l?p_l.getItems():[],this._rankVo?this.notRankdata.visible=!this._rankVo.getItems().length:this.notRankdata.visible=!0,this.myIdx.text=p_l?p_l.getOwnIndex().toString():(j_x(814)),this.rank_protome_num.text=p_l?p_l.getOwnValue().toString():(j_x(814))},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"rewardBtn":e.KFopenSerReward.open(this.subVo.type,this.subVo);break;case"rankBtn":e.KFopenSerRank.open(this._rankVo,this._type);break;case"check_promotebtn":e.KFPromoteView.open(this._type);break;case"detailsBtn":e.KFopenSerHelp.open()}},b_s.prototype.onUpdateServerValue=function(){var e=KFopenSerModel.instance.RankServerValue;0<e.length?(this.serverList.array=e,this.serverList.visible=!0,this.none.visible=!1):(this.none.visible=!0,this.serverList.visible=!1),this.twoServer.visible=!1,this.moreServer.visible=!0;var p_l=x_p.instance.KFRankHasPersonalReward(this.subVo.type)||x_p.instance.KFRankHasServerReward(this.subVo.type);(this.rewardredpoint.visible=p_l)?(this.rewardredpoint.visible=!0,r_n.instance.shakeEffect(this.rewardBtn,1.2,.1,10)):(this.rewardredpoint.visible=!1,Laya.Tween.clearAll(this.rewardBtn),this.rewardBtn.rotation=0)},b_s.prototype.onRemoved=function(){Uaq(LED,l_r,this,Laya)},b_s.prototype.updateItem=function(e,p_l){var p_g=e.getChildByName("ranking"),b_s=e.getChildByName("rankname"),d_u=e.getChildByName("serverid"),b_e=e.getChildByName("rankValue"),d_m=e.dataSource;p_l<3&&(p_g.text=d_m.getRankIndex().toString(),b_s.text=d_m.getPlayName(),d_u.text=d_m.getServerId()+(j_x(1998)),b_e.text=d_m.getValue().toString(),d_m.getServerId()===KFopenSerModel.instance.OwnServerId?p_g.color=b_s.color=d_u.color=b_e.color="#00802e":p_g.color=b_s.color=d_u.color=b_e.color="#b92929")},b_s.prototype.updateRankItem=function(e,p_l){if(null!=e.dataSource){var p_g=e.getChildByName("serverRank"),b_s=e.getChildByName("serverName"),d_u=e.getChildByName("integral"),b_e=e.dataSource;p_g.text=(p_l+1).toString(),b_s.text=b_e.serverID+(j_x(1998)),d_u.text=b_e.value.toString(),b_e.serverID===KFopenSerModel.instance.OwnServerId?p_g.color=b_s.color=d_u.color="#71de66":p_g.color=b_s.color=d_u.color="#e32828"}},Object.defineProperty(b_s.prototype,"subVo",{get:function(){return this.dataSource.subVo[0]},enumerable:!0,configurable:!0}),b_s.prototype.onUpdateKFstatus=function(){-1!==KFopenSerModel.instance.KF_status&&0!==KFopenSerModel.instance.KF_Type&&(this.check_promotebtn.visible=!0,0===KFopenSerModel.instance.KF_status?(this.notget_Img.visible=this.notGetKFopenser.visible=!0,this.rank_box.visible=this.getKFstatus_img.visible=!1,this.check_promotebtn.visible=!1):1===KFopenSerModel.instance.KF_status&&(this.notget_Img.visible=this.notGetKFopenser.visible=!1,this.rank_box.visible=this.getKFstatus_img.visible=!0,1003===KFopenSerModel.instance.KF_Type?this.getKFstatus_img.skin="res/ui/activity/kfOpenSer/wenzi_zhanli.png":1004===KFopenSerModel.instance.KF_Type?this.getKFstatus_img.skin="res/ui/activity/kfOpenSer/wenzi_fabao.png":1005===KFopenSerModel.instance.KF_Type?this.getKFstatus_img.skin="res/ui/activity/kfOpenSer/wenzi_zizhi.png":1006===KFopenSerModel.instance.KF_Type&&(this.getKFstatus_img.skin="res/ui/activity/kfOpenSer/wenzi_xianyuan.png")))},b_s.prototype.updateSulTime=function(e){var p_l=e.sulTime-e.showTime;0<p_l?(this.countDown_txt.text=Utils.formatTimeStr(p_l),this.countDown_txt.color=Utils.Color.NAME_GREEN):(this.countDown_txt.text=(j_x("1796_1878_1300")+j_x("396_2426")),this.countDown_txt.color=Utils.Color.NAME_RED,Laya.timer.clear(this,this.updateSulTime))},b_s.open=function(p_l){(p_l=p_l||ActivityModel.instance.getActivityConfigVo(FuncDefine.KFopensvrRank))?p_l.subVo&&p_l.subVo[0].type==ActivityTypeDefine.BG_cs_asyncPvpScoreRank?e.CrossPvpPanel.open():UIM.open(b_s,["activity/kfOpenSer.atlas"],p_l,!1,!1,!0):b_p.broadcastNotice((j_x("1796_1878_206")+j_x("155_1186")))},b_s.close=function(){Mjs(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.on(Laya.Event.CLICK,e,e.onClick),e.rankLst.repeatY=3,e.rankLst.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.serverList.renderHandler=Laya.Handler.create(e,e.updateRankItem,null,!1),e.serverList.vScrollBarSkin="",e.serverList.scrollBar.elasticDistance=100,e.serverList.scrollBar.elasticBackTime=200,e}e.KFopenSerTarget=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.KFopenSer.KFProtomoteViewUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){this.list.renderHandler=Laya.Handler.create(this,this.updateList,null,!1);var e=[],p_l=Config.activity_rushRank_KFpromote;for(var p_g in p_l)p_l[p_g].type===this.dataSource&&e.push(p_l[p_g]);this.list.array=e,this.closeBtn.on(Laya.Event.CLICK,this,this.onClickClose)},b_s.prototype.onRemove=function(){},b_s.prototype.updateList=function(e,p_l){if(e.dataSource){e.getChildByName("dec_text").text=e.dataSource.dec;var p_g=e.getChildByName("goto_text");p_g.mouseEnabled=!0,p_g.on(Laya.Event.CLICK,this,this.onClick,[e.dataSource.id])}},b_s.open=function(e){void 0===e&&(e=1),UIM.open(b_s,null,e,!1,!1,!0,!0)},b_s.prototype.onClick=function(p_l){var p_g=Config.activity_rushRank_KFpromote[p_l];p_g&&p_g.func&&(TaskManager.instance.taskMsgTxtLink(p_g.func[0]),this.close()),UIM.instance.isOpenWin(e.KFopenSerTarget)&&e.KFopenSerTarget.close()},b_s.prototype.onClickClose=function(){Mds(this)},b_s.prototype.close=function(){Qah(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.KFPromoteView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.openService.openSerRankListUI,__extends(b_s,p_l),b_s.open=function(e){Ioj(e,UIM,b_s)},b_s.prototype.onAdded=function(e){if(this.dataSource){this._dayNum=parseInt(this.dataSource);var p_l=OpenserviceModel.instance.getDataByDayNum(this._dayNum),p_g=RankModel.instance.getRankDataByType(p_l.rankType),b_s=LgcM.ins.heroVo;p_g&&p_g.getItems()&&p_g.getItems().length?(this.list.array=p_g.getItems(),this.myNameTxt.text=b_s.name,this.myRankTxt.text=p_g.getOwnIndex()?p_g.getOwnIndex().toString():(j_x("206_1067_1077")),this.myRankValue.text=p_g.getOwnValue().toString()):(this.list.array=[],this.myNameTxt.text=b_s.name,this.myRankTxt.text=(j_x("206_1067_1077")),this.myRankValue.text="0"),this.ranktype.text=p_l.resUrlcnf.rankdec}this.closeBtn.on(Laya.Event.CLICK,this,this.onClickClose)},b_s.prototype.updateItem=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("rankClip"),d_u=e.getChildByName("nameTxt"),b_e=e.getChildByName("powerTxt"),d_m=e.getChildByName("rankTxt");d_m.changeText(""),b_s.visible=!1;var d_w=p_g.getRankIndex();if(d_w<4?(b_s.visible=!0,b_s.index=d_w-1):d_m.changeText(d_w.toString()),d_u.text=p_g.getPlayName(),this.dataSource)if(this._dayNum===OpenserType.eightday){var f_t=Config.fb_story[p_g.getValue()];f_t&&f_t.layer?b_e.text=(f_t.layer+1).toString():b_e.text=""}else b_e.text=p_g.getValue().toString()},b_s.prototype.onRemove=function(){},b_s.prototype.close=function(){Ist(UIM,b_s)},b_s.prototype.onClickClose=function(){Yey(this)},b_s);function b_s(){var e=p_l.call(this)||this;return e._dayNum=1,e.list.vScrollBarSkin="",e.list.scrollBar.elasticDistance=100,e.list.scrollBar.elasticBackTime=200,e.list.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.OpenSerRankListView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.openService.openSerAim_cellUI,__extends(b_s,p_l),b_s.prototype.setDataAim=function(e,p_l){if(e){this.dec_lab.text=e.aimCnf.desc,this.list.array=b_p.getRewardDatas(e.aimCnf.reward),this.getbtn.disabled=0===e.status||1===e.status,this.getbtn.label=0===e.status?(j_x("1300_1174_2111")):(j_x("1174_2111_2235")+j_x(83));var p_g=ActivityModel.instance.getActTypeByRankType(e.aimCnf.rankType);this.redpoint.visible=2===e.status,p_g&&e.aimCnf&&e.aimCnf.idx&&this.getbtn.on(Laya.Event.CLICK,this,this.onClickGet,[p_g,e.aimCnf.idx]),this.dec_lab.color=0==e.status||2==e.status?"#e71de66":"#e32828"}},b_s.prototype.updateItem=function(e,p_l){e&&e.dataSource&&(e.isShowName=!1,e.isShowQuaEft=!1,e.setItemData(e.dataSource))},b_s.prototype.onClickGet=function(e,p_l){e&&p_l&&OpenserviceModel.instance.reqAimReward(e,p_l)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.type=1,p_g.list.itemRender=e.ItemBox,p_g.list.renderHandler=Laya.Handler.create(p_g,p_g.updateItem,null,!1),p_g}e.OpenServiceAim_Cell=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.openService.openSer_firstUI,__extends(b_s,p_l),b_s.open=function(){Ulj(UIM,b_s)},b_s.prototype.updateData=function(){var e=OpenserviceModel.instance.openServiceInfo;this.typeName.skin="res/ui/activity/openSer/"+e[this._curSelect].resUrlcnf.typeName,this.itemName.skin="res/ui/activity/openSer/"+e[this._curSelect].resUrlcnf.itemName,this.show_clip.skin="res/ui/activity/openSer/"+e[this._curSelect].resUrlcnf.item,this.type_clip.skin="res/ui/activity/openSer/"+e[this._curSelect].resUrlcnf.torTitleName,this.explain_lab.text=e[this._curSelect].resUrlcnf.dec,this.tomorrow_box.visible=!0,this.levelbox.visible=!1,this.curActivityTime_lab.text=Utils.formatTimeStr4_other(e[this._curSelect].startTime)+"-"+Utils.formatTimeStr4_other(e[this._curSelect].endTime),this._curSelect+1===1&&(this.tomorrow_box.visible=!1,this.levelbox.visible=!0,this.activityTime.text=this.curActivityTime_lab.text);var p_l=e[this._curSelect];p_l&&p_l.resUrlcnf&&p_l.resUrlcnf.dec?this.tor_activityTime.text=Utils.formatTimeStr4_other(p_l.startTime)+"-"+Utils.formatTimeStr4_other(p_l.endTime):this.tomorrow_box.visible=!1,this.updateTabBtnStatus(),this.onTimer(this._curSelect+1),Laya.timer.loop(1e3,this,this.onTimer,[this._curSelect+1])},b_s.prototype.onTimer=function(e){if(e){var p_l=OpenserviceModel.instance.getDataByDayNum(e);if(1e3*p_l.endTime<=SyncTime.serverTime)this.currCountDown_lab.text=(j_x("1796_1878_1300")+j_x("396_2426"));else if(1e3*p_l.startTime>SyncTime.serverTime)this.currCountDown_lab.text=(j_x("1796_1878_206")+j_x("155_1186"));else{var p_g=p_l.endTime-Math.floor(SyncTime.serverTime/1e3);this.currCountDown_lab.text=Utils.formatTimeStr2_new(p_g)}if(1===e){var b_s=OpenserviceModel.instance.getDataByDayNum(OpenserType.eightday);1e3*b_s.endTime<=SyncTime.serverTime?this.countdowm.text=(j_x("1796_1878_1300")+j_x("396_2426")):1e3*b_s.startTime>SyncTime.serverTime?this.countdowm.text=(j_x("1796_1878_206")+j_x("155_1186")):(p_g=b_s.endTime-Math.floor(SyncTime.serverTime/1e3),this.countdowm.text=Utils.formatTimeStr2_new(p_g))}else{var d_u=OpenserviceModel.instance.getDataByDayNum(e+1);d_u&&(1e3*d_u.endTime<=SyncTime.serverTime?this.tor_coutdown.text=(j_x("1796_1878_1300")+j_x("396_2426")):1e3*d_u.startTime>SyncTime.serverTime?this.tor_coutdown.text=(j_x("1796_1878_206")+j_x("155_1186")):(p_g=d_u.endTime-Math.floor(SyncTime.serverTime/1e3),this.tor_coutdown.text=Utils.formatTimeStr2_new(p_g)))}}},b_s.prototype.onClickEnter=function(){Sku(e,this)},b_s.prototype.onClickEnterLevel=function(){Uuq(e,OpenserType,this)},b_s.prototype.onRemoved=function(){Cpy(LED,l_r,this,Laya)},b_s.prototype.onUpdateRankInfo=function(){Aud(OpenserviceModel,OpenserType,this)},b_s.prototype.onClickClose=function(){Ojw(b_s)},b_s.prototype.onSelectTabSeven=function(p_l){switch(this.tabSeven.selectedIndex){case 0:break;case 1:e.openSvrSevenActivityPanel.open(null,1),b_s.close();break;case 2:e.openSvrSevenActivityPanel.open(null,2),b_s.close();break;case 3:e.openSvrSevenActivityPanel.open(null,3),b_s.close()}},b_s.prototype.onTweenTo=function(){this.currday_box.x=-this.currday_box.width,this.tomorrow_box.x=this.width,this.levelbox.x=this.width,Laya.Tween.to(this.currday_box,{f_u:70},100),Laya.Tween.to(this.tomorrow_box,{f_u:48},100),Laya.Tween.to(this.levelbox,{f_u:48},100)},b_s.prototype.updateTabBtnStatus=function(){this.currDay_red.visible=OpenserviceModel.instance.mainRed(this._curSelect+1),this.levelred.visible=OpenserviceModel.instance.isGetLevelActivityAward()||OpenserviceModel.instance.isGetLevelAimAward();for(var e=OpenserviceModel.instance,p_l=e.openServiceInfo,p_g=0;p_g<p_l.length;p_g++)switch(p_g+1){case SevenDay.ONE_DAY:this.red_0.visible=e.mainRed(p_g+1)||OpenserviceModel.instance.isGetLevelAimAward()||OpenserviceModel.instance.isGetLevelActivityAward(),this.rankRed.visible=e.mainRed(p_g+1)||OpenserviceModel.instance.isGetLevelAimAward()||OpenserviceModel.instance.isGetLevelActivityAward();case SevenDay.TWO_DAY:this.red_1.visible=e.mainRed(p_g+1),this.mask_1.visible=!e.isOpenAct(p_g+1),this.rankRed.visible=e.mainRed(p_g+1);case SevenDay.THREE_DAY:this.red_2.visible=e.mainRed(p_g+1),this.mask_2.visible=!e.isOpenAct(p_g+1),this.rankRed.visible=e.mainRed(p_g+1);case SevenDay.FOUR_DAY:this.red_3.visible=e.mainRed(p_g+1),this.mask_3.visible=!e.isOpenAct(p_g+1),this.rankRed.visible=e.mainRed(p_g+1);case SevenDay.FIVE_DAY:this.red_4.visible=e.mainRed(p_g+1),this.mask_4.visible=!e.isOpenAct(p_g+1),this.rankRed.visible=e.mainRed(p_g+1);case SevenDay.SIX_DAY:this.red_5.visible=e.mainRed(p_g+1),this.mask_5.visible=!e.isOpenAct(p_g+1),this.rankRed.visible=e.mainRed(p_g+1);case SevenDay.SEVEN_DAY:this.red_6.visible=e.mainRed(p_g+1),this.mask_6.visible=!e.isOpenAct(p_g+1),this.rankRed.visible=e.mainRed(p_g+1)}},b_s.prototype.setOpenSvrTab=function(){var e;if(ActivityModel.instance.getActivityConfigVo(FuncDefine.OpenServiceFisrtView),e=ActivityModel.instance.getActivityConfigVo(FuncDefine.openSvrSevenActivityPanel))for(var p_l=0;p_l<e.subVo.length;p_l++)switch(e.subVo[p_l].type.toString()){case ActivityTypeDefine.GS_opensvrTsGainRank:openSvrTab.ins.settsGainRankTab=!0;break;case ActivityTypeDefine.GS_opensvrContinuousRecharge:openSvrTab.ins.setconRechargeTab=!0;break;case ActivityTypeDefine.GS_acumRecharge:openSvrTab.ins.setacumRechargeTab=!0;break;case ActivityTypeDefine.GS_opensvrDiscountRecharge:openSvrTab.ins.setdiscoutRecharTab=!0}else console.log((j_x("155_1998_1247")+j_x("1254_1796_1878")+j_x("1971_155_1186")+"("+j_x("1514_1855")+")"));this.item0.visible=!0,this.item1.visible=openSvrTab.ins.discoutRecharTab,this.item2.visible=openSvrTab.ins.conRechargeTab,this.item3.visible=openSvrTab.ins.acumRechargeTab,0==this.item1.visible?(this.item2.x=151,this.item3.x=301):(this.item2.x=301,this.item3.x=452),0==this.item2.visible&&(0==this.item1.visible?this.item3.x=151:(this.item1.x=151,this.item3.x=301))},b_s.close=function(){Yye(UIM,b_s)},b_s.prototype.onUpdateRed=function(){Erj(this)},b_s.prototype.onAdded=function(){Kmo(LED,l_r,this,Laya,OpenserviceModel)},b_s.prototype.onSelectTab=function(e){Mrm(e,this)},b_s.prototype.upDateTabRedPoint=function(){Cfr(ActivenessModel,ActivityTypeDefine,this,openSvrSevenActivityModel)},b_s);function b_s(){var e=p_l.call(this)||this;return e._curSelect=0,e.levelbox.visible=e.tomorrow_box.visible=!1,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.tab.selectHandler=Laya.Handler.create(e,e.onSelectTab,null,!1),e.tabSeven.selectHandler=Laya.Handler.create(e,e.onSelectTabSeven,null,!1),e}e.OpenServiceFisrtView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.openService.openService_MainUI,__extends(b_s,p_l),b_s.open=function(e){Anp(e,UIM,b_s)},b_s.close=function(){Eui(UIM,b_s)},b_s.prototype.onRemoved=function(){Ufl(LED,l_r,this)},b_s.prototype.isAim=function(e){return Uoi(e)},b_s.prototype.updateData=function(){this.getreward.disabled=!0,this.alreadyget_lmg.visible=!1,this.getReward_red.visible=!1;var p_l,p_g=OpenserviceModel.instance.getDataByDayNum(this._dayNum),b_s=OpenserviceModel.instance.getRankTypeByDay(this._dayNum),d_u=RankModel.instance.getRankDataByType(b_s);d_u&&(1e3*p_g.endTime<=SyncTime.serverTime&&(p_g.rewardTime?this.alreadyget_lmg.visible=!0:(this.getreward.disabled=!1,d_u&&0<d_u.getOwnIndex()&&d_u.getOwnIndex()<=10&&(this.getReward_red.visible=!0))),this.title.skin=this._strUrl+p_g.resUrlcnf.title,this.myRankdec.text=p_g.resUrlcnf.rankdec,this._dayNum===OpenserType.eightday?(p_l=Config.fb_story[d_u.getOwnValue()])&&p_l.layer?this.myvalue.text=(p_l.layer+1).toString():this.myvalue.text="":this.myvalue.text=d_u?d_u.getOwnValue().toString():"0",this.rankValue.text=d_u?d_u.getOwnIndex().toString():(j_x("206_1067_1077")),0===this._curSelect?(this.list.array=p_g.OpenServiceRankInfo,this.list.itemRender=e.OpenServiceRank_Cell,this.bgTitle.visible=!0,this.bg_aim.visible=!1,this.bgTitle.skin=this._strUrl+p_g.resUrlcnf.baseMap,this.bg.skin="res/ui/activity/openSer/bg_chongbang.jpg",this.promotelab.visible=!0,this.promotelab.text=p_g.resUrlcnf.tips,(p_l=Config.activity_activity[p_g.actID])&&p_l.conf&&p_l.conf.desc&&(this.rules.text=p_l.conf.desc),this.checkrank.visible=!0,this.getreward.visible=!0,this.rankvaluedec.visible=this.rankValue.visible=!0):(this.list.array=p_g.OpenServiceAimInfo.sort((function(e,p_l){return e.status!=p_l.status?p_l.status-e.status:e.aimCnf.id-p_l.aimCnf.id})),this.list.itemRender=e.OpenServiceAim_Cell,this.bg.skin="res/ui/activity/openSer/bg_chongbangmubiao.jpg",this.promotelab.visible=!1,this.rules.text=(j_x("1796_1878_2075")+j_x("2460_1117_1012")+j_x("804_1077_1964")+j_x(949)+""+j_x("282_1163_1174")+j_x("2111_2235_83")),this.checkrank.visible=!1,this.getreward.visible=!1,this.rankvaluedec.visible=this.rankValue.visible=!1,this.bg_aim.visible=!0,this.bgTitle.visible=!1),this.updateTabRed())},b_s.prototype.updateItem=function(e,p_l){this.isAim(e)?e.setDataAim(e.dataSource,p_l):e.setDataRank(e.dataSource,p_l,this._dayNum)},b_s.prototype.onClickRankList=function(){Qzn(e,this)},b_s.prototype.onSelect=function(e){Ygh(e,this,OpenserviceModel)},b_s.prototype.onClickPromote=function(){Ooa(OpenserviceModel,this,e)},b_s.prototype.onClickGetReward=function(){var e=OpenserviceModel.instance.getDataByDayNum(this._dayNum),p_l=OpenserviceModel.instance.getRankTypeByDay(this._dayNum),p_g=RankModel.instance.getRankDataByType(p_l);if(p_g&&0<p_g.getOwnIndex()&&p_g.getOwnIndex()<=10)OpenserviceModel.instance.reqRankReward(e.actDefine);else{var b_s=Config.error[ErrorDefine.rank];b_s&&b_p.broadcastNotice(b_s.desc)}},b_s.prototype.onAdded=function(){if(LED.on(l_r.RANK_UPDATE,this,this.onUpdateRank),LED.on(l_r.REQUEST_ENEMY_INFO,this,this.onReturnTophree),LED.on(l_r.UPDATE_REWARD_INFO_OPENSER,this,this.updateData),this.dataSource){this.tab.selectedIndex=this._curSelect,this._dayNum=parseInt(this.dataSource),OpenserviceModel.instance.clearTopThreeInfo(this._dayNum);var e=OpenserviceModel.instance.getDataByDayNum(this._dayNum),p_l=RankModel.instance.getRankDataByType(e.rankType);if(p_l){var p_g=p_l.getItems();if(p_g&&0<p_g.length)for(var b_s in p_g)parseInt(b_s)<3&&this.topThreeId.push(p_g[b_s].getPlayerId());this.reqPlayerInfo()}this.updateData()}this.onTime(),this.updateTabRed(),Laya.timer.loop(1e3,this,this.onTime),this.closebtn.on(Laya.Event.CLICK,this,this.onClickClose),this.backbtn.on(Laya.Event.CLICK,this,this.onClickClose),this.checkrank.on(Laya.Event.CLICK,this,this.onClickRankList),this.getreward.on(Laya.Event.CLICK,this,this.onClickGetReward),this.promotelab.on(Laya.Event.CLICK,this,this.onClickPromote)},b_s.prototype.onTime=function(){var e=OpenserviceModel.instance.getDataByDayNum(this._dayNum);if(e)if(1e3*e.startTime>=SyncTime.serverTime)this.act_countdown.text=(j_x("1796_1878_206")+j_x("155_1186"));else if(1e3*e.endTime<=SyncTime.serverTime)this.act_countdown.text=(j_x("1796_1878_1300")+j_x("396_2426"));else{var p_l=e.endTime-Math.floor(SyncTime.serverTime/1e3);this.act_countdown.text=Utils.formatTimeStr2_new(p_l)}},b_s.prototype.onReturnTophree=function(p_l){OpenserviceModel.instance.saveTopThreeInfo(this._dayNum,p_l.base);var p_g=OpenserviceModel.instance.getDataByDayNum(this._dayNum);if(0<this.topThreeId.length){var b_s=this.topThreeId.shift();n_d.instance.reqViewRoleInfo(b_s)}else 0===this._curSelect?this.list.array=p_g.OpenServiceRankInfo:this.list.array=p_g.OpenServiceAimInfo.sort((function(e,p_l){return e.status!=p_l.status?p_l.status-e.status:e.aimCnf.id-p_l.aimCnf.id})),this.list.array=0===this._curSelect?p_g.OpenServiceRankInfo:p_g.OpenServiceAimInfo,this.list.itemRender=0===this._curSelect?e.OpenServiceRank_Cell:e.OpenServiceAim_Cell},b_s.prototype.reqPlayerInfo=function(){if(0<this.topThreeId.length){var e=this.topThreeId.shift();n_d.instance.reqViewRoleInfo(e)}},b_s.prototype.updateTabRed=function(){this._dayNum===OpenserType.eightday?(this.red_0.visible=OpenserviceModel.instance.isGetLevelActivityAward(),this.red_1.visible=OpenserviceModel.instance.isGetLevelAimAward()):(this.red_0.visible=OpenserviceModel.instance.isGetActivityReward(this._dayNum),this.red_1.visible=OpenserviceModel.instance.isGetAimReard(this._dayNum))},b_s.prototype.onClickClose=function(){Uam(b_s)},b_s.prototype.onUpdateRank=function(){Ycr(this)},b_s);function b_s(){var e=p_l.call(this)||this;return e._dayNum=1,e._curSelect=0,e.topThreeId=[],e._strUrl="res/ui/activity/openSer/",e.list.vScrollBarSkin="",e.list.scrollBar.elasticBackTime=100,e.list.scrollBar.elasticDistance=200,e.list.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.tab.selectHandler=Laya.Handler.create(e,e.onSelect,null,!1),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.OpenServiceMainView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.openService.openSerRank_CellUI,__extends(b_s,p_l),b_s.prototype.setDataRank=function(e,p_l,p_g){if(this.firstImg.visible=!1,this.await_lab.visible=!1,this.rankbg.visible=this.rankvalue_img.visible=!1,e){if(this.otherbox.visible=this.headbox.visible=!1,this.list.array=b_p.getRewardDatas(e.rankCnf.normalreward),e.rankCnf.specialreward){this.spec_img.visible=!0;var b_s=new ModuleItemVO;b_s.id=e.rankCnf.specialreward[0][0],b_s.amount=e.rankCnf.specialreward[0][1],this.spec_itembox.setItemData(b_s)}else this.spec_img.visible=!1;if(p_l<3){var d_u=OpenserviceModel.instance.getDataByDayNum(p_g).topThreeInfo[p_l];if(this.firstImg.visible=!0,this.headbox.visible=!0,this.firstImg.skin="res/ui/activity/openSer/dikuang_"+(4+p_l)+".png",d_u){var b_e=Config.fashion_fashion[d_u.fashionAvatar];if(b_e&&b_e.avatar){var d_m=b_e.avatar[0];d_m=Resource.ResUrl.getIconUrl(d_m),this.head_sp=Resource.ResManager.Instance.getImg(d_m,this.head_sp)}d_u.entryId&&null!=d_u.headIcon&&""!=d_u.name?(this.avatarImg.visible=!0,this.avatarImg.skin=Resource.ResManager.getHeadUrl(d_u.entryId,d_u.headIcon),this.playName.visible=!0,this.playName.text=d_u.name):(this.avatarImg.visible=!1,this.playName.visible=!0)}else this.headbox.visible=!1,this.avatarImg.visible=!1,this.await_lab.visible=!0}else this.otherbox.visible=!0,this.rankbg.visible=this.rankvalue_img.visible=!0,this.rankvalue_img.skin="res/ui/activity/openSer/"+e.rankCnf.img+".png",this.rankbg.skin="res/ui/activity/openSer/dikuang_3.png"}},b_s.prototype.updateItem=function(e,p_l){e&&e.dataSource&&(e.isShowName=!1,e.isShowQuaEft=!1,e.setItemData(e.dataSource))},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.type=2,p_g.list.hScrollBarSkin="",p_g.list.itemRender=e.ItemBox,p_g.list.renderHandler=Laya.Handler.create(p_g,p_g.updateItem,null,!1),p_g}e.OpenServiceRank_Cell=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.openService.promoteTipsUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){if(this.dataSource){var e=[];for(var p_l in Config.activity_rushRank_guildShow){var p_g=Config.activity_rushRank_guildShow[p_l];this.dataSource==p_g.type&&e.push(Config.activity_rushRank_guildShow[p_l])}this.list.array=e,this.closeBtn.on(Laya.Event.CLICK,this,this.onClickClose)}},b_s.prototype.updateList=function(e,p_l){if(e.dataSource){e.getChildByName("dec_text").text=e.dataSource.name;var p_g=e.getChildByName("goto_text");p_g.mouseEnabled=!0,p_g.on(Laya.Event.CLICK,this,this.onClick,[e.dataSource.id])}},b_s.open=function(e){Wlq(e,UIM,b_s)},b_s.prototype.onRemove=function(){},b_s.prototype.onClick=function(p_l){var p_g=Config.activity_rushRank_guildShow[p_l];p_g&&p_g.func&&(TaskManager.instance.taskMsgTxtLink(p_g.func[0]),this.close()),UIM.instance.isOpenWin(e.OpenServiceMainView)&&e.KFopenSerTarget.close(),e.OpenServiceFisrtView.close(),e.OpenServiceMainView.close()},b_s.prototype.onClickClose=function(){Cib(this)},b_s.prototype.close=function(){Cxn(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.mouseEnabled=!0,e.list.vScrollBarSkin="",e.list.spaceY=10,e.list.renderHandler=Laya.Handler.create(e,e.updateList,null,!1),e}e.promoteTipsView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.collect.WanbaCollectPanelUI,__extends(b_s,p_l),b_s.prototype.init=function(){Ord(this,Laya)},b_s.prototype.onAdd=function(){Crt(this,Laya,LED,l_r,ShareMgr)},b_s.prototype.dealAdd=function(){this.isReward?ShareMgr.ins.reqRelevanceReward():ShareMgr.ins.allRelevance()},b_s.prototype.onclick=function(e){switch(e.target){case this.btnClose:b_s.close();break;case this.btnAdd:this.dealAdd()}},b_s.prototype.updateCollect=function(){Wol(this)},b_s.prototype.onRemove=function(){Gzs(this,Laya,LED,l_r)},b_s.prototype.updateData=function(){Cdg(Config,FuncDefine,this,b_p)},b_s.prototype.updateBtn=function(){var e=this.isHasReward,p_l=this.isReward?(j_x("1174_2111_2235")+j_x(83)):(j_x("1190_282_1336")+j_x(223));e&&(p_l=(j_x("1300_1174_2111"))),this.btnAdd.label=p_l,z_j.setGray(this.btnAdd,e)},Object.defineProperty(b_s.prototype,"isReward",{get:function(){return this.statu==StateDefine.statu_get},enumerable:!0,configurable:!0}),Object.defineProperty(b_s.prototype,"isHasReward",{get:function(){return this.statu==StateDefine.statu_has},enumerable:!0,configurable:!0}),Object.defineProperty(b_s.prototype,"statu",{get:function(){return ShareMgr.ins._relevanceStatus},enumerable:!0,configurable:!0}),b_s.prototype.updateItem=function(e,p_l){Gmc(e,p_l)},b_s.open=function(){Mvj(UIM,b_s)},b_s.close=function(){Ejy(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.RelevanceOAccPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.share.shareGuideUI,__extends(b_s,p_l),b_s.prototype.onAdd=function(){Esa(this,Laya,LED,l_r)},b_s.open=function(){Gph(UIM,b_s)},b_s.prototype.onRemove=function(){Iun(Laya,this,LED,l_r)},b_s.prototype.updateShare=function(){Mlz(b_s)},b_s.prototype.stageClick=function(){Yfd(b_s)},b_s.prototype.stageResize=function(){Srf(this,Stage)},b_s.close=function(){Kwu(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdd),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.ShareGuild=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.recharge.singlerechargeUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(e){if(this.dataSource){var p_l=this.dataSource.vo;p_l.startTime=p_l.endTime=0,this.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.ACTIVITY_BGA_SINGLE_RECHARGE,this,this.updateRechargeData),LED.on(l_r.ACTIVITY_BGA_ACUM_RECHARGE,this,this.updateRechargeData),this.tab.selectedIndex=this.dataSource.index,this.updateTimeTxt();var p_g=p_l.subVo||[];for(var b_s in p_g){var d_u=p_g[b_s];(0===p_l.startTime||d_u.start<p_l.startTime)&&(p_l.startTime=d_u.start),(0===p_l.endTime||d_u.stop>p_l.endTime)&&(p_l.endTime=d_u.stop),ActivityModel.reqActivityRecord(d_u.type),this.rechargeTypes.push(d_u.type)}}},b_s.prototype.updateTimeTxt=function(){if(this.dataSource){var e=this.dataSource.vo;Laya.timer.clear(this,this.updateTimeTxt),this.timeTxt.text=Utils.formatTimeStr4(e.startTime,!1)+"-"+Utils.formatTimeStr4(e.endTime,!1);var p_l=1e3*e.endTime-SyncTime.serverTime;0<p_l?(Laya.timer.once(1e3,this,this.updateTimeTxt),this.countDownTxt.text=Utils.formatTimeStr(Math.floor(p_l/1e3))):this.countDownTxt.text=(j_x("1796_1878_1300")+j_x("396_2426"))}},b_s.prototype.compareFun=function(e,p_l){return e.status===p_l.status?e.id-p_l.id:p_l.status-e.status},b_s.prototype.updateListData=function(){1===this.tab.selectedIndex&&this.updateConsumeData(0),0===this.tab.selectedIndex&&this.updateConsumeData(1),this.updateRechargeData()},b_s.prototype.updateItem=function(e,p_l){if(e){if(!this.dataSource)return;e.setData(e.dataSource,this.dataSource.vo)}},b_s.prototype.onTabSelect=function(e){-1!==e&&this.updateListData()},b_s.prototype.onRemove=function(e){Stz(e,this,Laya,LED,l_r)},b_s.prototype.updateConsumeData=function(e){this.tab.selectedIndex===e&&(this.list.array=null)},b_s.prototype.updateRechargeData=function(){if(this.dataSource.vo){if(0===this.tab.selectedIndex){this.bgimg.skin="res/ui/activity/mei_01.jpg";var e=ActivityTypeDefine.BG_singleRecharge;e=-1!=this.rechargeTypes.indexOf(e)?e:ActivityTypeDefine.GS_singleRecharge;var p_l=DailyRechargeManager.instance.getSingleRechargeDates(e);this.list.array=p_l.sort(this.compareFun),this.singleclp.index=1,this.acumclp.index=0}1===this.tab.selectedIndex&&(this.bgimg.skin="res/ui/activity/mei_02.jpg",e=ActivityTypeDefine.BG_acumRecharge,e=-1!=this.rechargeTypes.indexOf(e)?e:ActivityTypeDefine.GS_acumRecharge,p_l=DailyRechargeManager.instance.getAcumRechargeDates(e),this.list.array=p_l.sort(this.newcompareFun),this.singleclp.index=0,this.acumclp.index=1),this.updateTimeTxt(),this.list.scrollBar.value=0;var p_g=ActivenessModel.instance.redSingle(ActivityTypeDefine.GS_singleRecharge),b_s=ActivenessModel.instance.redSingle(ActivityTypeDefine.GS_acumRecharge);this.singRed.visible=p_g||ActivenessModel.instance.redSingle(ActivityTypeDefine.BG_singleRecharge),this.acumRed.visible=b_s||ActivenessModel.instance.redSingle(ActivityTypeDefine.BG_acumRecharge)}},b_s.prototype.newcompareFun=function(e,p_l){return e.status===p_l.status?e.id-p_l.id:e.status-p_l.status},b_s.open=function(e,p_l){void 0===p_l&&(p_l=0),"number"==typeof e&&(p_l=e,e=null),(e=e||ActivityModel.instance.getActivityConfigVo(FuncDefine.acumRecharge))?UIM.open(b_s,["activity.atlas","recharge.atlas"],{vo:e,index:p_l},!1,!1,!0,!0):b_p.broadcastNotice((j_x("1796_1878_206")+j_x("155_1186")))},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close()}},b_s.close=function(){Knm(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.rechargeTypes=[],e.list.vScrollBarSkin="",e.list.scrollBar.elasticDistance=100,e.list.scrollBar.elasticBackTime=200,e.list.itemRender=b_e,e.list.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.tab.selectHandler=Laya.Handler.create(e,e.onTabSelect,null,!1),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.tab.selectedIndex=-1,e}e.SingleRechargePanel=p_g;var d_u,b_e=(d_u=ui.window.recharge.singlerechargecellUI,__extends(d_m,d_u),d_m.prototype.setData=function(e,p_l){var p_g=e.id;this._type=e.type;var b_s=LgcM.ins.heroVo;if(this._type===ActivityTypeDefine.GS_singleRecharge||this._type===ActivityTypeDefine.BG_singleRecharge){var d_u=Config.activity_recharge_singleRecharge[p_g],b_e=ActivityModel.instance.singleRechargeVo,d_m=e.status;this.proBar.visible=!1,this.barTxt.text="",b_e&&(1===d_m?(this.redpoint.visible=!0,this.rewardBtn.disabled=!1,this.rewardBtn.label=(j_x(1174)+" "+j_x(2111))):-1===d_m?(this.redpoint.visible=!1,this.rewardBtn.disabled=!0,this.rewardBtn.label=(j_x("1300_1174_2111"))):(this.redpoint.visible=!1,this.rewardBtn.disabled=!1,this.rewardBtn.label=(j_x("711_2417_2258")+j_x(2376)))),this.rewardList.array=b_p.getRewardDatasByEntryId(d_u.reward,b_s.entryId),this.titleTxt.text=Utils.$((j_x("2339_1254_2263")+j_x("2065_2258_2376")+"{1}"+j_x("1263_869")),d_u.charge),this.rewardBtn.dataSource={id:p_g,status:d_m,setId:e.setId}}if(this._type===ActivityTypeDefine.GS_acumRecharge||this._type===ActivityTypeDefine.BG_acumRecharge){d_u=Config.activity_recharge_acumRecharge[p_g],b_e=ActivityModel.instance.acumRechargeVo;var d_w=e.status;this.proBar.visible=!0,b_e&&(b_e.gold?(this.proBar.value=b_e.gold/d_u.charge,this.barTxt.text=Utils.$("{1}/{2}",b_e.gold,d_u.charge),0===d_w?(this.redpoint.visible=!0,this.rewardBtn.disabled=!1,this.rewardBtn.label=(b_e.gold,d_u.charge,""),this.rewardBtn.label=b_e.gold>=d_u.charge?(j_x("1174_2111")):(j_x("711_2417_2258")+j_x(2376)),this.redpoint.visible=b_e.gold>=d_u.charge,d_w=b_e.gold>=d_u.charge?0:-1):1===d_w&&(this.redpoint.visible=!1,this.rewardBtn.disabled=!0,this.rewardBtn.label=(j_x("1300_1174_2111")))):(this.proBar.value=0,this.redpoint.visible=!1,this.barTxt.text=Utils.$("{1}/{2}",0,d_u.charge),d_w=b_e.gold>=d_u.charge?0:-1)),this.rewardList.array=b_p.getRewardDatasByEntryId(d_u.reward,b_s.entryId),this.titleTxt.text=Utils.$((j_x("2339_1254_1874")+j_x("867_2258_2376")+"{1}"+j_x("1263_869")),d_u.charge),this.rewardBtn.dataSource={id:p_g,status:d_w,setId:e.setId}}},d_m.prototype.updateItem=function(e,p_l){e&&(e.isShowName=!1,e.isShowNum=!0,e.isShowTick=!1,e.setItemData(e.dataSource,ItemBoxDefine.MODULE_ITEM))},d_m.prototype.onClick=function(p_l){if(this.dataSource){this.dataSource.type;var b_s=p_l.target;if(b_s){var d_u;if((this._type===ActivityTypeDefine.GS_singleRecharge||this._type===ActivityTypeDefine.BG_singleRecharge)&&(d_u=b_s.dataSource)){var b_e=d_u.status;1===b_e?this._type===ActivityTypeDefine.BG_singleRecharge?DB.instance.query(c2w_bgaAct_single_recharge_reward,{id:d_u.setId}):DB.instance.query(c2w_gsaAct_single_recharge_reward,{id:d_u.setId}):0===b_e&&(p_g.close(),e.RechargePanel.open())}if((this._type===ActivityTypeDefine.GS_acumRecharge||this._type===ActivityTypeDefine.BG_acumRecharge)&&(d_u=b_s.dataSource)){var d_m=d_u.status;0===d_m?this._type===ActivityTypeDefine.BG_acumRecharge?DB.instance.query(c2w_bgaAct_acum_recharge_reward,{id:d_u.setId}):DB.instance.query(c2w_gsaAct_acum_recharge_reward,{id:d_u.setId}):-1===d_m&&(p_g.close(),e.openSvrSevenActivityPanel.close(),e.RechargePanel.open())}}}},d_m);function d_m(){var p_l=d_u.call(this)||this;return p_l.rewardBtn.on(Laya.Event.CLICK,p_l,p_l.onClick),p_l.rewardList.itemRender=e.ItemBox,p_l.rewardList.renderHandler=Laya.Handler.create(p_l,p_l.updateItem,null,!1),p_l}e.SingleRechargeCell=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.timeLimit.timeLimit_descUI,__extends(b_s,p_l),b_s.open=function(e){Obk(e,UIM,b_s)},b_s.close=function(){Ovv(UIM,b_s)},b_s);function b_s(){return p_l.call(this)||this}e.TimeLimitDetailsPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.timeLimit.timeLimit_firstUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(e){this.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.ACTIVITY_BGA_RANK,this,this.updateList),LED.on(l_r.ACTIVITY_BGA_TIMELIMIT,this,this.updateList),LED.on(l_r.ACTIVITY_HT_TIMELIMIT,this,this.updateList),LgcM.ins.heroVo;var p_l=this.dataSource;for(var p_g in p_l.subVo){var b_s=p_l.subVo[p_g];ActivityModel.reqActivityRecord(b_s.type);var d_u=void 0;b_s.type===ActivityTypeDefine.GS_xsbgRank?d_u=RankType.LimitGuildCtrb:b_s.type===ActivityTypeDefine.GS_xsapvpRank?d_u=RankType.LimitPvP:b_s.type===ActivityTypeDefine.GS_xsbanquetRank?d_u=RankType.LimitYanHui:b_s.type===ActivityTypeDefine.BG_powerGainRank?d_u=RankType.LimitPowerGainRank_HT:b_s.type===ActivityTypeDefine.BG_talismanGainRank||b_s.type===ActivityTypeDefine.BG_talismanAptGainRank?d_u=RankType.LimitTalismanAptGain_HT:b_s.type===ActivityTypeDefine.BG_xianYuanGainRank?d_u=RankType.LimitTalismanXianYuanGain_HT:b_s.type===ActivityTypeDefine.GS_powerGainRank?d_u=RankType.LimitPowerGainRank:b_s.type===ActivityTypeDefine.GS_talismanGainRank?d_u=RankType.LimitTalismanGain:b_s.type===ActivityTypeDefine.GS_talismanAptGainRank?d_u=RankType.LimitTalismanAptGain:b_s.type===ActivityTypeDefine.GS_xianYuanGainRank?(d_u=RankType.LimitGuildCtrb,d_u=RankType.LimitTalismanXianYuanGain):b_s.type===ActivityTypeDefine.BG_asyncPvpScoreGainRank&&(d_u=RankType.BG_asyncPvpScoreGainRank),b_s.enum==ActivityTypeEnum.BG&&TimeLimitModel.instance.reqStatus(b_s.type),d_u&&RankModel.instance.reqGetRank(d_u,1)}this.list.array=p_l.subVo.sort((function(e,p_l){return e.stop-p_l.stop}))},b_s.open=function(e){(e=e||ActivityModel.instance.getActivityConfigVo(FuncDefine.xsRank))?UIM.open(b_s,["activity.atlas","activity/openSer.atlas"],e,!1,!1,!0):b_p.broadcastNotice((j_x("1796_1878_206")+j_x("155_1186")))},b_s.prototype.onRemove=function(e){Ske(e,this,Laya,LED,l_r)},b_s.prototype.updateItem=function(e,p_l){e&&e.setData(e.dataSource)},b_s.prototype.updateList=function(){Epa(this)},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close()}},b_s.close=function(){Shz(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.list.vScrollBarSkin="",e.list.scrollBar.elasticDistance=100,e.list.scrollBar.elasticBackTime=200,e.list.itemRender=b_e,e.list.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.TimeLimitFirstPanel=p_g;var d_u,b_e=(d_u=ui.window.activity.bga.timeLimit.timeLimit_first_cellUI,__extends(d_m,d_u),d_m.prototype.clean=function(){d_u.prototype.clean.call(this);var e=this.dataSource;e&&0<e.sulTime&&Laya.timer.clear(this,this.updateSulTime),this.goBtn.off(Laya.Event.CLICK,this,this.onBtnClick)},d_m.prototype.setData=function(e){var p_l,p_g,b_s;this.dataSource=e,this.bgImg_0.visible=e.type===ActivityTypeDefine.GS_xsapvpRank||e.type===ActivityTypeDefine.BG_asyncPvpScoreGainRank,this.bgImg_1.visible=e.type===ActivityTypeDefine.GS_xsbgRank,this.bgImg_2.visible=e.type===ActivityTypeDefine.GS_xsbanquetRank,this.bgImg_3.visible=e.type===ActivityTypeDefine.BG_powerGainRank||e.type===ActivityTypeDefine.GS_powerGainRank,this.bgImg_4.visible=e.type===ActivityTypeDefine.BG_talismanGainRank||e.type===ActivityTypeDefine.GS_talismanGainRank,this.bgImg_5.visible=e.type===ActivityTypeDefine.BG_talismanAptGainRank||e.type===ActivityTypeDefine.GS_talismanAptGainRank,this.bgImg_6.visible=e.type===ActivityTypeDefine.BG_xianYuanGainRank||e.type===ActivityTypeDefine.GS_xianYuanGainRank,this.getChildByName("haveKFstatus").visible=TimeLimitModel.instance.getStatus(e.type),e.enum==ActivityTypeEnum.BG?(p_l=e.showTime,p_g=e.stop-p_l,b_s=e.sulTime-p_l,this.timeTxt.text=Utils.formatTimeStr4(e.start,!1)+"-"+Utils.formatTimeStr4(p_g,!1)):(p_l=Config.activity_activity[e.gsa_id].param,p_g=e.stop-p_l.showTime,b_s=e.sulTime-p_l.showTime,p_l.showTime&&(this.timeTxt.text=Utils.formatTimeStr4(e.start,!1)+"-"+Utils.formatTimeStr4(p_g,!1))),0<(this._sulTime=b_s)&&Laya.timer.loop(1e3,this,this.updateSulTime),this.updateSulTime(),this.goBtn.dataSource=e,this.goBtn.on(Laya.Event.CLICK,this,this.onBtnClick),this.redPoint.visible=x_p.instance.xsRankHasReward(e.type)},d_m.prototype.onBtnClick=function(p_l){Ubi(p_l,this,e)},d_m.prototype.updateSulTime=function(){this.dataSource&&(this.dataSource,--this._sulTime,0<this._sulTime?(this.timeCountTxt.text=Utils.formatTimeStr(this._sulTime),this.timeCountTxt.color=Utils.Color.NAME_GREEN,this.running.visible=!0,this.stoped.visible=!1):(this.timeCountTxt.text=(j_x("1796_1878_1300")+j_x("396_2426")),this.timeCountTxt.color=Utils.Color.NAME_RED,Laya.timer.clear(this,this.updateSulTime),this.stoped.visible=!0,this.running.visible=!1))},d_m);function d_m(){return d_u.call(this)||this}e.TimeLimitFirstCell=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.timeLimit.timeLimit_rank_descUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(e){Kbs(e,this,Laya)},b_s.prototype.updateData=function(){if(this._rankVo){this.list.array=this._rankVo.getItems();var e=LgcM.ins.heroVo;this._rankVo.getRankType()==RankType.LimitGuildCtrb?this.myNameTxt.text=e.guildName?e.guildName:(j_x("206_223_2456")+j_x("796_1413")):this.myNameTxt.text=e.name;var p_l=this._rankVo.getOwnIndex();this.myRankTxt.text=100<p_l||0==p_l?"10000+":p_l.toString();var p_g=this._rankVo.getRankType()===RankType.RushTalisman?(j_x("799_869_1367")+j_x("383_767")+":"):(j_x("1367_383_767")+":");switch(this._rankVo.getRankType()){case RankType.LimitGuildCtrb:p_g=(j_x("796_1413_300")+j_x("45_2452_443")),this.rankTxt1.text=(j_x("796_1413_1511")+j_x(2101)),this.myNameTxt0.text=(j_x("796_1413")+":");break;case RankType.LimitPvP:p_g=(j_x("832_869_2281")+j_x("514_2224_2452")+j_x(443)),this.rankTxt1.text=(j_x("855_386_1511")+j_x(2101)),this.myNameTxt0.text=(j_x("1511_2101")+":");break;case RankType.LimitYanHui:p_g=(j_x("1755_695_514")+j_x("2224_2452_443")),this.rankTxt1.text=(j_x("855_386_1511")+j_x(2101)),this.myNameTxt0.text=(j_x("1511_2101")+":");break;case RankType.LimitPowerGainRank:case RankType.LimitPowerGainRank_HT:p_g=(j_x("383_767_2452")+j_x(443)),this.rankTxt1.text=(j_x("855_386_1511")+j_x(2101)),this.myNameTxt0.text=(j_x("1511_2101"));break;case RankType.LimitTalismanGain:case RankType.LimitTalismanGain_HT:p_g=(j_x("799_869_383")+j_x("767_2452_443")),this.rankTxt1.text=(j_x("855_386_1511")+j_x(2101)),this.myNameTxt0.text=(j_x("1511_2101"));break;case RankType.LimitTalismanAptGain:case RankType.LimitTalismanAptGain_HT:p_g=(j_x("799_869_115")+j_x("1621_2452_443")),this.rankTxt1.text=(j_x("855_386_1511")+j_x(2101)),this.myNameTxt0.text=(j_x("1511_2101"));break;case RankType.LimitTalismanXianYuanGain:case RankType.LimitTalismanXianYuanGain_HT:p_g=(j_x("189_438_383")+j_x("767_2452_443")),this.rankTxt1.text=(j_x("855_386_1511")+j_x(2101)),this.myNameTxt0.text=(j_x("1511_2101"))}this.myPowerTxt.text=p_g+":"+this._rankVo.getOwnValue().toString(),this.rankTxt2.text=p_g}},b_s.prototype.updateItem=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("rankClip"),d_u=e.getChildByName("nameTxt"),b_e=e.getChildByName("powerTxt"),d_m=e.getChildByName("rankTxt");d_m.changeText(""),b_s.visible=!1;var d_w=p_g.getRankIndex();d_w<4?(b_s.visible=!0,b_s.index=d_w-1):d_m.changeText(d_w.toString()),d_u.text=this._rankVo.getRankType()==RankType.LimitGuildCtrb?p_g.getGuildName():p_g.getPlayName(),b_e.text=p_g.getValue().toString()},b_s.prototype.onCloseClick=function(e){Amp(e,b_s)},b_s.open=function(e){Ito(e,UIM,b_s)},b_s.prototype.onRemove=function(e){Utk(e,this,Laya)},b_s.close=function(){Qvb(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.list.vScrollBarSkin="",e.list.scrollBar.elasticDistance=100,e.list.scrollBar.elasticBackTime=200,e.list.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.TimeLimitRankDetailsPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.timeLimit.timeLimit_rankUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(e){if(this.dataSource){var p_l=this.dataSource;p_l.type===ActivityTypeDefine.GS_xsbgRank?this.rankList.itemRender=f_t:this.rankList.itemRender=b_e,this.reqRankdata(p_l),ActivityModel.reqActivityRecord(p_l.type),this.updateTitleInfo(),this.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.ACTIVITY_BGA_RANK,this,this.onUpdateRankInfo),LED.on(l_r.ACTIVITY_BGA_TIMELIMIT,this,this.updateSulTime)}},b_s.prototype.onUpdateRankInfo=function(e){this._rankVo=e;var p_l=this.dataSource;this.rankList.array=RoundRewardManager.instance.getLocalRankRewards(e.getRankType(),p_l.type),this.rankList.scrollTo(0);var p_g=this._rankVo.getOwnIndex();this.myRankTxt1.text=this.myRankTxt.text=100<p_g||0===p_g?"10000+":p_g.toString(),this.updateSulTime()},b_s.prototype.onRemove=function(e){Ijj(e,this,Laya,LED,l_r)},b_s.prototype.reqRankdata=function(e){this.KFstatus.visible=!1;var p_l=ActivityModel.instance.getActDataByType(e.type);if(p_l){var p_g=p_l.rankType;RankModel.instance.reqGetRank(p_g,1),this.KFstatus.visible=TimeLimitModel.instance.getStatus(e.type)}},b_s.prototype.updateItem=function(e,p_l){if(e){var p_g=this.dataSource;if(!p_g)return;var b_s=ActivityModel.instance.getRankTypeByActType(p_g.type);e.setData(e.dataSource,b_s)}},b_s.prototype.onClick=function(p_l){var p_g=p_l.target,d_u=this.dataSource;switch(p_g.name){case"closeBtn":case"backBtn":b_s.close();break;case"rankBtn":e.TimeLimitRankDetailsPanel.open(this._rankVo);break;case"detailsBtn":e.TimeLimitDetailsPanel.open(d_u);break;case"b_get":d_u.type===ActivityTypeDefine.GS_xsbgRank?DB.instance.query(c2w_gsaAct_tmguildctrb_rank_reward,{}):d_u.type===ActivityTypeDefine.GS_xsapvpRank?DB.instance.query(c2w_gsaAct_tmapvpscore_rank_reward,{}):d_u.type===ActivityTypeDefine.GS_xsbanquetRank?DB.instance.query(c2w_gsaAct_tmbanquet_rank_reward,{}):d_u.type===ActivityTypeDefine.BG_powerGainRank?DB.instance.query(c2w_bgaAct_powerGain_rank_reward,{}):d_u.type===ActivityTypeDefine.BG_talismanGainRank?DB.instance.query(c2w_bgaAct_talismanGain_rank_reward,{}):d_u.type===ActivityTypeDefine.BG_talismanAptGainRank?DB.instance.query(c2w_bgaAct_talismanAptGain_rank_reward,{}):d_u.type===ActivityTypeDefine.BG_xianYuanGainRank?DB.instance.query(c2w_bgaAct_xianYuanGain_rank_reward,{}):d_u.type===ActivityTypeDefine.GS_powerGainRank?DB.instance.query(c2w_gsaAct_powerGain_rank_reward,{}):d_u.type===ActivityTypeDefine.GS_talismanGainRank?DB.instance.query(c2w_gsaAct_talismanGain_rank_reward,{}):d_u.type===ActivityTypeDefine.GS_talismanAptGainRank?DB.instance.query(c2w_gsaAct_talismanAptGain_rank_reward,{}):d_u.type===ActivityTypeDefine.GS_xianYuanGainRank?DB.instance.query(c2w_gsaAct_xianYuanGain_rank_reward,{}):d_u.type==ActivityTypeDefine.BG_asyncPvpScoreGainRank?DB.instance.query(c2w_bgaAct_async_pvp_rank_reward,{}):d_u.type==ActivityTypeDefine.BG_cs_asyncPvpScoreRank&&DB.instance.query(c2w_bgaAct_async_pvp_rank_reward,{})}},b_s.open=function(e){Qmk(e,UIM,b_s)},b_s.prototype.updateTitleInfo=function(){var e=this.dataSource,p_l=Config.activity_activity[e.gsa_id];this.bgImg_0.visible=e.type===ActivityTypeDefine.GS_xsapvpRank||e.type===ActivityTypeDefine.BG_asyncPvpScoreGainRank,this.bgImg_1.visible=e.type===ActivityTypeDefine.GS_xsbgRank,this.bgImg_2.visible=e.type===ActivityTypeDefine.GS_xsbanquetRank,this.bgImg_3.visible=e.type===ActivityTypeDefine.BG_powerGainRank||e.type===ActivityTypeDefine.GS_powerGainRank,this.bgImg_4.visible=e.type===ActivityTypeDefine.BG_talismanGainRank||e.type===ActivityTypeDefine.GS_talismanGainRank,this.bgImg_5.visible=e.type===ActivityTypeDefine.BG_talismanAptGainRank||e.type===ActivityTypeDefine.GS_talismanAptGainRank,this.bgImg_6.visible=e.type===ActivityTypeDefine.BG_xianYuanGainRank||e.type===ActivityTypeDefine.GS_xianYuanGainRank;var p_g=e.showTime?e.showTime:p_l.param?p_l.param.showTime:0,b_s=e.dec;e.dec||(b_s=Config.activity_activity[e.gsa_id].conf.desc),this.descTxt.text=b_s,this.timeTxt.text=(j_x("1796_1878_1702")+j_x(2460)+"")+Utils.formatTimeStr4(e.start,!1)+"-"+Utils.formatTimeStr4(e.stop-p_g,!1),0<e.sulTime&&Laya.timer.loop(1e3,this,this.updateSulTime),this.updateSulTime()},b_s.prototype.updateSulTime=function(){var e=this.dataSource;if(e){var p_l=e.type,p_g=ActivityModel.instance.getActDataByType(p_l);if(p_g){var b_s=Config.activity_activity[e.gsa_id],d_u=e.sulTime,b_e=e.showTime?e.showTime:b_s.param?b_s.param.showTime:0,d_m=p_g.rewardTime;this.getBox.visible=d_u<b_e,this.activitynotend.visible=b_e<=d_u,0<d_u?(this.timeCountTxt.text=this.getBox.visible?(j_x("1796_1878_1300")+j_x("396_2426")):Utils.formatTimeStr(d_u-b_e),this.timeCountTxt1.text=Utils.formatTimeStr(d_u),d_u===b_e&&(this.reqRankdata(e),ActivityModel.reqActivityRecord(e.type))):(this.timeCountTxt1.text=this.timeCountTxt.text=(j_x("1796_1878_1300")+j_x("396_2426")),Laya.timer.clear(this,this.updateSulTime)),this.b_get.disabled=0<d_m;var d_w=this._rankVo?this._rankVo.getOwnIndex():0,f_t=this._rankVo?BGActivityModel.instance.getTimeLimitAllRewards(this._rankVo.getRankType(),p_l):[],v_z=f_t?f_t[f_t.length-1]:null;this.redPoint.visible=x_p.instance.xsRankHasReward(e.type),v_z&&(this.noReward.visible=!(d_w&&d_w<=v_z.endIdx),this.b_get.visible=!!(0===d_m&&d_w&&d_w<=v_z.endIdx)),this.i_got.visible=0<d_m}}},b_s.close=function(){Gjz(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.rankList.vScrollBarSkin="",e.rankList.scrollBar.elasticDistance=100,e.rankList.scrollBar.elasticBackTime=200,e.rankList.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.TimeLimitRankPanel=p_g;var d_u,b_e=(d_u=ui.window.activity.bga.timeLimit.timeLimit_rank_cellUI,__extends(d_m,d_u),d_m.prototype.updateItem=function(e,p_l){e&&(e.isShowName=!1,e.isShowTick=!1,e.isShowQuaEft=!1,e.setItemData(e.dataSource))},d_m.prototype.setData=function(e,p_l){if(e.beginIdx===e.endIdx?this.rankTxt.text=(j_x(573))+e.beginIdx+(j_x(1511)):this.rankTxt.text=(j_x(573))+e.beginIdx+"~"+e.endIdx+(j_x(1511)),this.rewardList.array=b_p.getRewardDatas(e.reward),e.title){this.titleBox.visible=!0;var p_g=Config.title_title[e.title];Resource.ResManager.Instance.getImg(Resource.ResUrl.getIconUrl(p_g.icon),this.titleIcon,110,38)}else this.titleBox.visible=!1},d_m);function d_m(){var p_l=d_u.call(this)||this;return p_l.rewardList.array=null,p_l.rewardList.itemRender=e.ItemBox,p_l.rewardList.renderHandler=Laya.Handler.create(p_l,p_l.updateItem,null,!1),p_l}e.TimeLimitRankCell=b_e;var d_w,f_t=(d_w=ui.window.activity.bga.timeLimit.timeLimit_rank_cell_gctrbUI,__extends(v_z,d_w),v_z.prototype.updateItem=function(e,p_l){e&&(e.isShowName=!1,e.isShowTick=!1,e.isShowQuaEft=!1,e.setItemData(e.dataSource))},v_z.prototype.setData=function(e,p_l){if(e.beginIdx===e.endIdx?this.rankTxt.text=(j_x(573))+e.beginIdx+(j_x(1511)):this.rankTxt.text=(j_x(573))+e.beginIdx+"~"+e.endIdx+(j_x(1511)),e.leaderReward?(this.rewardList.array=b_p.getRewardDatas(e.leaderReward),this.rewardList1.array=b_p.getRewardDatas(e.reward)):(this.rewardList.array=b_p.getRewardDatas(e.reward),this.rewardList1.array=null),e.leaderTitle){this.titleIcon.visible=!0;var p_g=Config.title_title[e.leaderTitle];Resource.ResManager.Instance.getImg(Resource.ResUrl.getIconUrl(p_g.icon),this.titleIcon,110,38)}else this.titleIcon.visible=!1},v_z);function v_z(){var p_l=d_w.call(this)||this;return p_l.rewardList.array=null,p_l.rewardList.itemRender=e.ItemBox,p_l.rewardList.renderHandler=Laya.Handler.create(p_l,p_l.updateItem,null,!1),p_l.rewardList1.array=null,p_l.rewardList1.itemRender=e.ItemBox,p_l.rewardList1.renderHandler=Laya.Handler.create(p_l,p_l.updateItem,null,!1),p_l}e.TimeLimitRankCell1=f_t}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.platformWin.TXDialogPanelUI,__extends(b_s,p_l),b_s.prototype.init=function(){Skh(this,Laya,e,z_j)},b_s.prototype.renderItem=function(e,p_l){Gtx(e,p_l)},b_s.prototype.onRemove=function(){Ugr(this,Laya)},b_s.prototype.onAdd=function(){Syy(this,Laya,Config,GlobalDefine,b_p)},b_s.prototype.onclick=function(e){switch(e.target){case this.btnClose:b_s.close()}},b_s.open=function(){Kjt(UIM,b_s)},b_s.close=function(){Yth(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.TXDialogPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.collect.WanbaCollectPanelUI,__extends(b_s,p_l),b_s.prototype.init=function(){Aka(this,Laya)},b_s.prototype.updateBtn=function(){var e=ShareMgr.ins.canRewardRelevance,p_l=ShareMgr.ins.isHasRelReward,p_g=e?(j_x("1174_2111_2235")+j_x(83)):(j_x("1190_282_1336")+j_x(223));p_l&&(p_g=(j_x("1300_1174_2111"))),this.btnAdd.label=p_g,z_j.setGray(this.btnAdd,p_l)},b_s.prototype.onAdd=function(){Uvo(this,Laya,LED,l_r,ShareMgr)},b_s.prototype.updateItem=function(e,p_l){Inq(e,p_l)},b_s.prototype.updateCollect=function(){Oot(this)},b_s.prototype.onRemove=function(){Uhe(this,Laya,LED,l_r)},b_s.prototype.dealAdd=function(){ShareMgr.ins.canRewardRelevance?ShareMgr.ins.reqRelevanceReward():GPlatform.isYZX?v_t.ins.sendToDesktop():Sdk.Wanba.canToDisktop?WanbaPlatform.instance.collectTime<=0?(WanbaPlatform.instance.startTime(),WanbaPlatform.instance.wbCollect()):b_p.broadcastNotice((j_x("506_2035_1573")+j_x(2004)+""+j_x("1777_15_1427"))):WanbaPlatform.instance.followWechat()},b_s.prototype.onclick=function(e){switch(e.target){case this.btnClose:b_s.close();break;case this.btnAdd:this.dealAdd()}},b_s.prototype.updateData=function(){(GPlatform.isYZX||GPlatform.isWanba&&Sdk.Wanba.canToDisktop)&&(this.txt_line1.text=(j_x("1336_223_2277")+j_x("1509_1527_949")+j_x("1012_886_1879")+j_x("2327_151_282")+j_x("1163_2221_1929")),this.txt_line2.text=(j_x("669_387_33")+j_x("2456_2277_1509")+""+j_x("495_1702_1163")+j_x("192_531_1976")+j_x("192_2379_310")+j_x("359_1375_861")+j_x(1682)+""),GPlatform.isWanba&&WanbaLoginManager.instance.wanbaData.onPC&&(this.txt_line1.text=(j_x("1336_223_2277")+j_x("1509_1527_949")+j_x("1012_29_1252")+j_x("2327_151_282")+j_x("1163_2221_1929"))));var e=Config.funcOpen[FuncDefine.wanba_collect];this.rewardList.array=b_p.getRewardDatas(e.reward)},b_s.open=function(){Qes(UIM,b_s)},b_s.close=function(){Scw(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.WanbaCollectPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.yzxDialog.YZXDialogPanelUI,__extends(b_s,p_l),b_s.prototype.init=function(){Yvu(this,Laya)},b_s.prototype.dealAdd=function(){ShareMgr.ins._isCollected?ShareMgr.ins.reqWechatReward():v_t.ins.dialog()},b_s.prototype.onRemove=function(){Sad(this,Laya,LED,l_r)},b_s.prototype.updateItem=function(e,p_l){Eyx(e,p_l)},b_s.prototype.updateBtn=function(){if(1!=ShareMgr.ins._fristCollectStatus){var e=ShareMgr.ins._isCollected?(j_x("1174_2111_2235")+j_x(83)):(j_x("1190_282_1336")+j_x(223));this.btnAdd.label=e}else b_s.close()},b_s.prototype.onclick=function(e){switch(e.target){case this.btnClose:b_s.close();break;case this.btnAdd:this.dealAdd()}},b_s.prototype.updateData=function(){var e=Config.global[GlobalDefine.wechat_collect_reward_func_id].i_info,p_l=Config.funcOpen[e];this.rewardList.array=b_p.getRewardDatas(p_l.reward)},b_s.prototype.onAdd=function(){Uyt(this,Laya,LED,l_r)},b_s.open=function(){Yla(UIM,b_s)},b_s.prototype.updateCollect=function(){Gsc(this)},b_s.close=function(){Yyy(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.YZXDialogPanel=p_g}(UI=UI||{});var d_f=function(e){function p_l(){var p_l=e.call(this)||this;return p_l.type=z_r.openSer_power,p_l}return __extends(p_l,e),p_l}(BGActBaseConfigVo),BGAFirstRechargeVo=function(e){function p_l(){var p_l=e.call(this)||this;return p_l.gold=0,p_l.rewardTime=0,p_l}return __extends(p_l,e),p_l}(BGActBaseConfigVo),BGADailyRechargeVo=function(e){function p_l(){var p_l=e.call(this)||this;return p_l.gold=0,p_l.rewardStatus=0,p_l.type=z_r.recharge_daily,p_l}return __extends(p_l,e),p_l.prototype.getStatus=function(e){return Seg(e,this)},p_l.prototype.canGain=function(){var e=Config.activity_recharge_dailyRecharge,p_l=!1;for(var p_g in e)if(0===this.getStatus(e[p_g].id)&&this.gold>=e[p_g].charge){p_l=!0;break}return p_l},p_l}(BGActBaseConfigVo),BGADailyConsumeVo=function(e){function p_l(){var p_l=e.call(this)||this;return p_l.type=z_r.recharge_consume,p_l}return __extends(p_l,e),p_l.prototype.getStatus=function(e){return Kqp(e,this)},p_l}(BGActBaseConfigVo),BGADailySingleRechargeVo=function(e){function p_l(){var p_l=e.call(this)||this;return p_l.type=z_r.recharge_single,p_l}return __extends(p_l,e),p_l.prototype.getStatus=function(e){for(var p_l=-1,p_g=0;p_g<this.singlerwd.length;++p_g)this.singlerwd[p_g].id===e&&(p_l=p_g);if(p_l<0)return-1;var b_s=this.singlerwd[p_l];return b_s?b_s.amt>b_s.rwd?0:1:-1},p_l}(BGActBaseConfigVo),BGADailyAcumRechargeVo=function(e){function p_l(){var p_l=e.call(this)||this;return p_l.type=z_r.recharge_add,p_l}return __extends(p_l,e),p_l.prototype.getStatus=function(e){return Sqk(e,this)},p_l}(BGActBaseConfigVo),BGASingleVO=function(){},UI,OpenState;!function(e){var p_l,p_g=(p_l=ui.window.activity.bga.carnival.carnivalUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Kzn(this,Laya)},b_s.prototype.onRemove=function(){Wxn(this,Laya)},b_s.prototype.updateTime=function(){var e=this.activityVOs[0];e&&e.vo.type!=ActivityTypeDefine.BG_loginActivity&&(this.timeLabel.text=MonthActivityModel.ins.getMonthTimeByVo(e.vo),this.activityLabel.text=MonthActivityModel.ins.getMonthTimeByVo(e.vo))},b_s.open=function(e,p_l){void 0===p_l&&(p_l=0),(e=e||ActivityModel.instance.getActivityConfigVo(FuncDefine.CarnivalAcitvity))?UIM.open(b_s,["activity/festivals.atlas"],{},!1):b_p.broadcastNotice((j_x("1796_1878_206")+j_x("155_1186")))},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"joinBtn":Laya.Browser.onAndroid&&GPlatform.isQQMini&&Sdk.QQMini.openUrl("https://mobile.qzone.qq.com/l?g=8115")}},b_s.close=function(e){void 0===e&&(e=!1),UIM.close(b_s,e,[])},b_s);function b_s(){var e=p_l.call(this)||this;return e.activityVOs={},e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.CarnivalPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.Christmas.ChristamasRankingUI,__extends(d_u,p_l),d_u.prototype.updateRewardList=function(e,p_l){var p_g=e.getChildByName("rankLab"),b_s=e.getChildByName("nameLab"),d_u=e.getChildByName("dmgLab"),b_e=e.dataSource;b_s.text=b_e.name,d_u.text=b_e.damage+"",p_g.text=p_l+1+""},d_u.prototype.onRemove=function(){Uof(this,Laya,LED,l_r)},d_u.open=function(e){UIM.open(d_u,["common.atlas"],{bossId:e},!1,!1)},d_u.prototype.updateUI=function(e){var p_l=e.rank+"",p_g=0;null==e.rank&&(p_l=(j_x("206_1067_1077"))),null!=e.elem&&(p_g=e.elem),this.myRankLab.text=p_l,this.myDmgLab.text=p_g+"",this.rewardLst.array=e.list},d_u.close=function(){Qom(UIM,d_u)},d_u.prototype.onAdded=function(){Ajw(this,Laya,LED,l_r,ChristamasControl)},d_u.prototype.selectRewardList=function(e){},d_u.prototype.close=function(){Epd(d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.rewardLst.renderHandler=p_g.create(e,e.updateRewardList,null,!1),e.rewardLst.selectHandler=p_g.create(e,e.selectRewardList,null,!1),e.rewardLst.array=null,e}e.ChristamasRanking=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.Christmas.ChristmasKillHelpTipUI,__extends(b_s,p_l),b_s.prototype.onCloseBtnClick=function(){Cxl(b_s)},b_s.prototype.onRemove=function(){Kdu(this,Laya)},b_s.prototype.onAdded=function(){Aph(this,Laya)},b_s.open=function(){Ecl(UIM,b_s)},b_s.close=function(){Wkt(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.ChristmasKillHelpTip=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.Christmas.ChristmasKillPanelUI,__extends(d_u,p_l),d_u.prototype.updateBossList=function(e,p_l){var p_g=e.getChildByName("bossTimeText"),b_s=e.getChildByName("iconImg"),d_u=e.getChildByName("shade"),b_e=e.getChildByName("rp"),d_m=e.getChildByName("hasRun"),d_w=e.getChildByName("hasKill"),f_t=e.dataSource;d_w.visible=!1,d_m.visible=!1,b_e.visible=!0,d_u.visible=!0,2==f_t.state||3==f_t.state&&0==f_t.rewardState?(d_u.visible=!1,1==f_t.challengeNum&&2==f_t.state&&(b_e.visible=!1)):b_e.visible=!1,3==f_t.state?d_w.visible=!0:4==f_t.state&&(d_m.visible=!0);var v_z=Config.fb_dungeon[f_t.fbId],d_h=Config.obj_monster[v_z.monster];b_s.skin=Resource.ResUrl.getIconUrl(d_h.icon);var r_t=new Date(1e3*f_t.beginTime);p_g.text=Utils.fmtDate(r_t,"hh:mm")},d_u.prototype.onAdded=function(){this.closeBtn.on(Laya.Event.CLICK,this,this.close),this.backBtn.on(Laya.Event.CLICK,this,this.close),this.i_pre.on(Laya.Event.CLICK,this,this.onPreClick),this.i_next.on(Laya.Event.CLICK,this,this.onNextClick),this.tipBtn.on(Laya.Event.CLICK,this,this.onTipBtnClick),this.enterBtn.on(Laya.Event.CLICK,this,this.onEnterBtnClick),this.bossList.scrollBar.on(Laya.Event.CHANGE,this,this.onRideListScroll),this.helpBtn.on(Laya.Event.CLICK,this,this.onHelpBtn),LED.on(l_r.CHRISTMAS_BOSS_INFO,this,this.updateUI),LED.on(l_r.CHRISTMAS_BOSS_RANK_INFO,this,this.updateRanking),DungeonModel.instance.reqBossLst(DungeonType.ChristamasBoss),ChristamasControl.ins.reqChristmasBeatMonsterInfo()},d_u.prototype.onPreClick=function(){0<this.bossList.startIndex-4?this.bossList.scrollTo(this.bossList.startIndex-4):this.bossList.scrollTo(0)},d_u.prototype.onHelpBtn=function(){Cjw(e)},d_u.prototype.gameTimeCount=function(){if(-1!=this.bossList.selectedIndex){var e,p_l=this.bossList.selectedItem,p_g=Math.floor(SyncTime.serverTime/1e3);1==p_l.state?e=p_l.beginTime-p_g:2==p_l.state&&(e=p_l.beginTime+p_l.bossRetainTime-p_g),this.setTimeCount(e)}},d_u.prototype.updateReq=function(){Sbu(ChristamasControl)},d_u.prototype.setTimeCount=function(e){if(UIM.instance.isOpenWin(d_u)&&0<e){var p_l=this.bossList.selectedItem,p_g=void 0;1==p_l.state?p_g=("Boss"+j_x("896_1787_810")+j_x("867_1702")+""):2==p_l.state&&(p_g=("Boss"+j_x("2176_873_810")+j_x("867_1702")+"")),this.bossRefreshTime.text=p_g+Utils.formatTimeStr(e),Laya.timer.once(1e3,this,this.setTimeCount,[e-1])}},d_u.prototype.updateRanking=function(e){var p_l,p_g=[];p_l=3<=e.list.length?3:e.list.length;for(var b_s=0;b_s<p_l;b_s++)p_g.push(e.list[b_s]);this.rankLst.array=p_g},d_u.prototype.selectBossList=function(e){if(Laya.timer.clear(this,this.setTimeCount),-1!=e){var p_l=this.bossList.selectedItem;ChristamasControl.ins.reqChristmasBeatMonsterRankInfo(p_l.fbId);var p_g=[];for(var b_s in p_l.items){var d_u=p_l.items[b_s];p_g.push([d_u.id,d_u.num])}for(var b_e=b_p.getRewardDatas(p_g);b_e.length<5;)b_e.push(null);this.goodsList.array=b_e;var d_m=Config.fb_dungeon[p_l.fbId],d_w=Config.obj_monster[d_m.monster];if(this._actorShowModel.changeModel(d_w.avatar),this._actorShowModel.stand(3),this.rankLst.array,this.challengeTimes.visible=!1,this.enterBtn.disabled=!0,this.enterRed.visible=!1,this.bossRefreshTime.visible=!1,this.bossRefreshTime.text="",2==p_l.state?(this.bossRefreshTime.visible=!0,this.challengeTimes.visible=!0,this.enterBtn.disabled=!1,p_l.challengeNum?this.challengeTimes.color="#c92828":(this.enterRed.visible=!0,this.challengeTimes.color="#71de66"),this.challengeTimes.text=(j_x("48_383_235")+j_x(2348)+"")+(1-p_l.challengeNum)+"/1",this.enterBtn.label=(j_x("48_383")),this.gameTimeCount()):3==p_l.state?p_l.rewardState?this.enterBtn.label=(j_x("1300_1174_2111")):(this.enterBtn.label=(j_x("1174_2111")),this.enterBtn.disabled=!1,this.enterRed.visible=!0):4==p_l.state?this.enterBtn.label=(j_x("1300_2176_1069")):(this.bossRefreshTime.visible=!0,this.enterBtn.label=(j_x("206_43_1835")),this.gameTimeCount()),this.bossName.text=""+d_w.name+"",3==p_l.state)this.bossHP.value=0,this.bossHPText.text="0%";else{var f_t=ChristamasControl.ins.getBossHP(p_l.fbId);this.bossHP.value=f_t.hp/f_t.hpUpper,this.bossHPText.text=Math.floor(f_t.hp/f_t.hpUpper*100)+"%"}}},d_u.prototype.updateGoodsList=function(e,p_l){Ior(e,p_l)},d_u.prototype.onNextClick=function(){this.bossList.startIndex+4<this.bossList.length-4?this.bossList.scrollTo(this.bossList.startIndex+4):this.bossList.scrollTo(this.bossList.length-4)},d_u.prototype.onEnterBtnClick=function(){if(-1!=this.bossList.selectedIndex){var e=this.bossList.selectedItem;if(2==e.state)if(e.challengeNum){var p_l=Config.global[3045];b_p.confirm((j_x("48_383_235")+j_x("2348_1300_1365")+j_x("1876_1917")+","+j_x("33_2456_1443")+j_x("944_1661_1502"))+p_l.i_info+(j_x("1263_869")+""),(function(){b_p.registerAutoOpenPanel(d_u,b_p.mapID,(function(){d_u.open()})),ChristamasControl.ins.reqChristmasChallengeBoss(e.fbId)}))}else b_p.registerAutoOpenPanel(d_u,b_p.mapID,(function(){d_u.open()})),ChristamasControl.ins.reqChristmasChallengeBoss(e.fbId);else 3==e.state&&(e.rewardState||(ChristamasControl.ins.reqChristmasGetReward(e.fbId),ChristamasControl.ins.reqChristmasBeatMonsterInfo()))}},d_u.prototype.onRemove=function(){Esn(this,Laya,LED,l_r)},d_u.prototype.updateSelectIndex=function(){var e,p_l;this.bossList.selectedIndex=-1;for(var p_g=0;p_g<this.bossList.array.length;p_g++){var b_s=this.bossList.array[p_g];if((2==b_s.state||3==b_s.state&&0==b_s.rewardState)&&(e=p_g),1==b_s.state){p_l=p_g;break}}null==e&&null!=p_l&&(e=p_l),null==e&&null==p_l&&(e=this.bossList.array.length-1),this.bossList.selectedIndex=e,this.bossList.scrollTo(e)},d_u.prototype.updateInfoTime=function(){Laya.timer.clear(this,this.updateReq);var e,p_l=Math.floor(SyncTime.serverTime/1e3),p_g=ChristamasControl.ins.monsterBossInfo,b_s=p_g[0].beginTime;if(p_l<b_s)e=b_s-p_l;else for(var d_u=0;d_u<p_g.length;d_u++)if(p_g[d_u+1]){if(p_g[d_u].beginTime<=p_l&&p_g[d_u+1].beginTime>p_l){if(p_l<p_g[d_u].beginTime+p_g[d_u].bossRetainTime){e=p_g[d_u].beginTime+p_g[d_u].bossRetainTime-p_l;break}e=p_g[d_u+1].beginTime-p_l;break}}else if(p_l<p_g[d_u].beginTime+p_g[d_u].bossRetainTime){e=p_g[d_u].beginTime+p_g[d_u].bossRetainTime-p_l;break}0<e&&Laya.timer.once(1e3*e+1e3,this,this.updateReq)},d_u.prototype.onTipBtnClick=function(){Afq(this,e)},d_u.prototype.onRideListScroll=function(){if(this.i_next.visible=this.bossList.scrollBar.value<this.bossList.scrollBar.max,this.i_pre.visible=0<this.bossList.scrollBar.value,this.nextRed.visible=this.preRed.visible=!1,0<this.bossList.startIndex)for(var e=0;e<this.bossList.startIndex;++e)if(ChristamasControl.ins.updateBossRed(this.bossList.array[e])){this.preRed.visible=!0;break}if(this.bossList.startIndex+4<this.bossList.length)for(e=this.bossList.startIndex+4;e<this.bossList.length;++e)if(ChristamasControl.ins.updateBossRed(this.bossList.array[e])){this.nextRed.visible=!0;break}},d_u.open=function(){Yeb(UIM,d_u)},d_u.close=function(){Idd(UIM,d_u)},d_u.prototype.updateRankList=function(e,p_l){var p_g=e.getChildByName("nameLab"),b_s=e.dataSource;p_g.text="  "+(p_l+1)+"    "+b_s.name},d_u.prototype.updateUI=function(){Qgu(ChristamasControl,this)},d_u.prototype.close=function(){Umb(d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.bossList.hScrollBarSkin="",e.bossList.renderHandler=p_g.create(e,e.updateBossList,null,!1),e.bossList.selectHandler=p_g.create(e,e.selectBossList,null,!1),e.bossList.array=null,e.goodsList.renderHandler=p_g.create(e,e.updateGoodsList,null,!1),e.goodsList.array=null,e.rankLst.renderHandler=p_g.create(e,e.updateRankList,null,!1),e.rankLst.array=null,e._actorShowModel=new n_k,e.bossBody.addChild(e._actorShowModel),e}e.ChristmasKillPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.festivals.festivalGift_cellUI,__extends(b_s,p_l),b_s.prototype.init=function(){Yrk(this,e,z_j,Laya)},b_s.prototype.setIndex=function(e){Qld(e,this)},b_s.prototype.onClickRecBtn=function(){var e=FestivalActivityModel.ins.festivalGift;if(0<this.index&&!e[this.index-1].isCanReward)b_p.broadcastNotice((j_x("774_1624_1355")+j_x("2420_1067_1737")+j_x("844_977_425")+j_x("861_130")));else{var p_l=this.dataSource;p_l&&(p_l.isCanReward?FestivalActivityModel.ins.reqGetGift(p_l.productId):p_l.isCanBuy&&(p_l.money,FestivalActivityModel.ins.reqBuyGift(p_l.productId,p_l.money)))}},b_s.prototype.updateCell=function(){var e=this.dataSource;if(this.dataSource){var p_l,p_g=e.money.toString().length;this.numSprite.x=this.numPoint.x+Math.max(0,27*(3-p_g)/2),b_p.getNumSp(NumType.FESTIVAL_NUM,e.money,this.numSprite,-10),this.list.array=e.items,this.redPoint.visible=e.isCanReward,this.agioLabel.text=e.agio+(j_x(1786)),this.limitLabel.color=3==e.isState?"#e32828":"#00802e",this.limitLabel.text=0<e.limit?Utils.$((j_x("2128_1355")+"{1}/{2}"),e.buy_count,e.limit):"",this.rechargeBtn.disabled=!1,this.originalNum.text=Utils.$(("("+j_x("2153_603")+"{1}"+j_x(1263)+")"),Math.floor(e.money/e.agio*100));var b_s=FestivalActivityModel.ins.festivalGift;0<this.index&&!b_s[this.index-1].isCanReward&&3!=e.isState?this.tipLabel.visible=!0:this.tipLabel.visible=!1,p_l=e.isCanReward?(j_x("1163_1174_2111")):e.isCanBuy?(j_x("1355_2420")):(this.rechargeBtn.disabled=!0,(j_x("1300_1008_1482"))),this.rechargeBtn.label=p_l}},b_s.prototype.renderList=function(e,p_l){e&&e.dataSource&&(e.isShowName=!1,e.setItemData(e.dataSource))},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e.numPoint=new Laya.Point(e.numSprite.x,e.numSprite.y),e}e.FestivalGiftCell=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.festivals.festivalsGiftPanelUI,__extends(b_s,p_l),b_s.prototype.init=function(){Slx(this,Laya,e,z_j)},b_s.prototype.updateView=function(){Idh(this,FestivalActivityModel)},b_s.prototype.onRemove=function(){Cgy(LED,l_r,this)},b_s.prototype.onAdded=function(){var e=this.dataSource;e&&(ActivityModel.reqActivityRecord(e.type),LED.on(l_r.FESTIVAL_GIFT_INFO,this,this.updateView))},b_s.prototype.renderList=function(e,p_l){e&&e.setIndex(p_l),e.updateCell()},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.FestivalGiftPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.festivals.festivalTurntableUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){this.on(Laya.Event.CLICK,this,this.onClick),this.helpBtn.on(Laya.Event.CLICK,this,this.onHelpBtnClick),LED.on(l_r.ITEM_ADD,this,this.updateConsume),LED.on(l_r.ITEM_REMOVE,this,this.updateConsume),LED.on(l_r.ITEM_AMOUNT_CHANGE,this,this.updateConsume),LED.on(l_r.WALLET_CHANGE,this,this.updateConsume),LED.on(l_r.ACTIVITY_LOTTERT_INFO,this,this.updateViewInfo),LED.on(l_r.ACTIVITY_LOTTERT_DRAW,this,this.playAni),LED.on(l_r.ACTIVITY_LOTTERT_RECORD,this,this.updateRecordList);var e=this.dataSource;this.lightImage.rotation=0,this.rotateNeedle.rotation=0,this.checkAni.selected=!this.isTween,this.checkTen.selected=this.isTenContinue,ActivityModel.reqActivityRecord(e.type),this.isBgActivity=e.enum==ActivityTypeEnum.BG,n_t.instance.reqRecordInfo(this.tagName,RecordType.AllSer,this.isBgActivity),this.updateView()},b_s.prototype.onHelpBtnClick=function(){Udk(e,this)},b_s.prototype.updateItems=function(){var e=n_t.instance.getCfgByNameAndRound(this.tagName,n_t.instance.countActivityRound(this.tagName));if(e)for(var p_l in e.cfgByRound){var p_g=this.items.getChildByName("item"+p_l);p_g&&(p_g.dataSource=e.cfgByRound[p_l],this.renderItem(p_g,parseInt(p_l)))}},b_s.prototype.onRemove=function(){LED.off(l_r.ITEM_ADD,this,this.updateConsume),LED.off(l_r.ITEM_REMOVE,this,this.updateConsume),LED.off(l_r.ITEM_AMOUNT_CHANGE,this,this.updateConsume),LED.off(l_r.WALLET_CHANGE,this,this.updateConsume),this.off(Laya.Event.CLICK,this,this.onClick),this.helpBtn.off(Laya.Event.CLICK,this,this.onHelpBtnClick),LED.off(l_r.ACTIVITY_LOTTERT_INFO,this,this.updateViewInfo),LED.off(l_r.ACTIVITY_LOTTERT_DRAW,this,this.playAni),LED.off(l_r.ACTIVITY_LOTTERT_RECORD,this,this.updateRecordList),d_o.instance.isOpenStartDeley=!1,LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.FestivalActivity)},b_s.prototype.stopAni=function(){Mdz(this,d_o,ItemSourceDefine,Laya)},b_s.prototype.updateRecordList=function(e){e.ty==this.tagName&&e&&e.mode==RecordType.AllSer&&(e.records&&0<e.records.length?(e.records.sort((function(e,p_l){return e.time-p_l.time})),this.recordList.array=e.records,this.recordList.scrollTo(this.recordList.array.length-2),this.recordList.visible=!0,this.recordNull.visible=!1):(this.recordList.visible=!1,this.recordNull.visible=!0))},b_s.prototype.playAni=function(e){if(e.ty==this.tagName)if(this.isTween&&1==e.times){this.isPlayAni=!0;var p_l=n_t.instance.getCfgByNameAndRound(e.ty,n_t.instance.countActivityRound(e.ty));if(!p_l)return;this.rotateNeedle.rotation=this.lightImage.rotation=Math.floor(this.lightImage.rotation%360);var p_g=n_t.instance.countAngle(p_l,e.res[0],this.lightImage.rotation),b_s=360*p_g.circle+p_g.Angle;Laya.Tween.to(this.rotateNeedle,{rotation:b_s},2e3,Laya.Ease.circOut,Laya.Handler.create(this,this.aniComplete,[e])),Laya.Tween.to(this.lightImage,{rotation:b_s},2e3,Laya.Ease.circOut,Laya.Handler.create(this,this.aniComplete,[e]))}else j_a.otherIns().add(this,this.aniComplete,[e])},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"goBtn":if(this.isPlayAni)return;var p_g=this.dataSource,b_s=this.getLottertShowTime(p_g);if(p_g.sulTime-b_s<=0)return void b_p.broadcastNotice((j_x("2462_2035_1796")+j_x("1878_1702_2460")+j_x(1273)));var d_u=n_t.instance.getTimeConsume(this.tagName,this.isTenContinue);if(!b_p.checkConsume(d_u,!0))return;if(d_u[0][0]<100){var b_e=Config.CItem(d_u[0][0]);b_e&&b_p.confirm(Utils.$((j_x("68_2032_1661")+j_x(1502)+"{1}{2}"+j_x("2195_2235")+""),d_u[0][1],b_e.name),this.onClickGoBtn.bind(this),null,!1,!1,!1,!0,"tagName")}else this.onClickGoBtn();break;case"checkAni":this.isTween=!this.isTween;break;case"checkTen":this.isTenContinue=!this.isTenContinue;break;case"recordClick":e.LottertDrawRecordPanel.open(this.tagName,this.isBgActivity);break;case"exchangeBtn":this.redPoint.visible=n_t.instance.getMemberInfo(this.tagName).isRedPoint=!1,e.LottertDrawExchangePanel.open(this.tagName,this.isBgActivity)}},b_s.prototype.renderBox=function(e,p_l){var p_g=e.getChildByName("playerName"),b_s=e.getChildByName("content"),d_u=e.getChildByName("item"),b_e=e.dataSource,d_m="";if(b_e&&b_e.recs&&0<b_e.recs.length)for(var d_w in b_e.recs){var f_t=n_t.instance.getGiftCfgById(this.tagName,b_e.recs[d_w]),v_z=Config.CItem(f_t.reward[0]),d_h=",";parseInt(d_w)==b_e.recs.length-1&&(d_h=""),d_m+=Utils.$("{1}*{2}{3}",v_z.name,f_t.reward[1],d_h)}p_g.text=b_e.name,d_u.text=d_m,b_s.x=p_g.x+p_g.textField.textWidth+3,d_u.x=b_s.x+b_s.textField.textWidth+3},b_s.prototype.updateView=function(){Oaa(this)},b_s.prototype.getLottertShowTime=function(e){var p_l=0;if(e&&!this.isBgActivity){var p_g=Config.activity_activity[e.gsa_id].param;p_l=p_g&&p_g.showTime?p_g.showTime:0}else p_l=e.showTime;return p_l},b_s.prototype.onClickGoBtn=function(){d_o.instance.isOpenStartDeley=!0;var e=this.isTenContinue?10:1;n_t.instance.reqStartTurn(this.tagName,e,this.isBgActivity)},b_s.prototype.renderItem=function(p_l,p_g){var b_s=p_l.getChildByName("itembox1");b_s||((b_s=new e.ItemBox).name="itembox1",p_l.addChild(b_s));var d_u=new ModuleItemVO;d_u.id=p_l.dataSource.reward[0],d_u.amount=p_l.dataSource.reward[1],b_s.setItemData(d_u),b_s.setName("")},b_s.prototype.updateViewInfo=function(){Klw(n_t,this)},b_s.prototype.updateConsume=function(e){void 0===e&&(e=null);var p_l,p_g=n_t.instance.getTimeConsume(this.tagName),b_s=Config.CItem(p_g[0][0]),d_u=BagModel.instance.getItemCountByItemID(p_g[0][0],BagTypeDefine.BAG_TYPE_ITEM),b_e=d_u>=p_g[0][1]?"#71de66":"#e32828";p_l=p_g[0][0]<100?Utils.setImg(Resource.ResUrl.getIconUrl(b_s.icon),40,40)+Utils.setColor(Utils.$("{1}",p_g[0][1]),b_e):Utils.setImg(Resource.ResUrl.getIconUrl(b_s.icon),40,40)+Utils.setColor(Utils.$("{1}/{2}",d_u,p_g[0][1]),b_e),this.consume.innerHTML=p_l},b_s.prototype.aniComplete=function(p_l){Yji(p_l,this,n_t,RecordType,RankModel,e)},b_s);function b_s(){var e=p_l.call(this)||this;return e.isTween=!0,e.isTenContinue=!1,e.isPlayAni=!1,e.tagName=LotterType.FESTIVAL,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.recordClick.mouseEnabled=!0,z_j.setList(e.recordList,e,e.renderBox),z_j.setListScroll(e.recordList),z_j.setHtml(e.consume,22,"#f0ecd8",10,"center"),e.consume.mouseThrough=!0,e}e.FestivalLottertDrawPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.festivals.festivalsUI,__extends(b_s,p_l),b_s.prototype.sortActivity=function(){for(var p_l,p_g=!(this.activityPos=[e.FastivalTab.LottertDraw,e.FastivalTab.RechargeGift,e.FastivalTab.loginReward]),b_s=0,d_u=0,b_e=this.dataSource.data.subVo;d_u<b_e.length;d_u++){var d_m=b_e[d_u],d_w=-1;switch(d_m.type){case ActivityTypeDefine.BG_loginActivity:d_w=e.FastivalTab.loginReward,p_l=e.FestivalSignPanel,b_s=2;break;case ActivityTypeDefine.BG_holidayGift:d_w=e.FastivalTab.RechargeGift,p_l=e.FestivalGiftPanel,b_s=1;break;case ActivityTypeDefine.BG_turntableHoliday:d_w=e.FastivalTab.LottertDraw,p_l=e.FestivalLottertDrawPanel,p_g=!(b_s=0)}if(0<=d_w)if(this.activityVOs[d_w]){var f_t=this.activityVOs[d_w];f_t.vo=d_m,f_t.type=p_l,f_t.needComsumRed=p_g,f_t.clipIndex=b_s}else this.activityVOs[d_w]={vo:d_m,type:p_l,panel:null,needComsumRed:p_g,clipIndex:b_s}}for(var v_z=[],d_h=0;d_h<this.activityPos.length;d_h++)this.activityVOs[this.activityPos[d_h]]&&v_z.push(this.activityPos[d_h]);this.activityPos=v_z},b_s.prototype.removeChildPanel=function(e){e&&e.parent&&e.removeSelf()},b_s.prototype.onRemove=function(){Kps(this,Laya,LED,l_r)},b_s.prototype.updateConsumeRed=function(){for(var e in this.activityPos)this.activityVOs[this.activityPos[e]].needComsumRed&&this.updatePoint(parseInt(e),this.activityPos[e])},b_s.prototype.setCellSelect=function(e,p_l){var p_g=this.tabList.getCell(e);if(p_g){var b_s=p_g.getChildByName("selectClip"),d_u=b_s.getChildByName("clip");b_s.selected=p_l,d_u.index=p_l?e+3:e}},b_s.prototype.renderItem=function(e,p_l){var p_g=e.dataSource,b_s=this.activityVOs[p_g];if(b_s){var d_u=e.getChildByName("red");e.getChildByName("selectClip").getChildByName("clip").index=b_s.clipIndex,d_u.visible=FestivalActivityModel.ins.festivalRedPoint(b_s.vo)}},b_s.open=function(e,p_l){void 0===p_l&&(p_l=0),(e=e||ActivityModel.instance.getActivityConfigVo(FuncDefine.FestivalActivity))?UIM.open(b_s,["activity/festivals.atlas","activity/turnTable.atlas"],{index:p_l,data:e},!1):b_p.broadcastNotice((j_x("1796_1878_206")+j_x("155_1186")))},b_s.prototype.onAdded=function(){if(this.dataSource){var e=this.dataSource.index||0;this.sortActivity(),this.on(Laya.Event.CLICK,this,this.onMouseClick),this.tabList.array=this.activityPos,this.tabList.selectedIndex=e,Laya.timer.loop(1e3,this,this.updateTime),LED.on(l_r.ITEM_ADD,this,this.updateConsumeRed),LED.on(l_r.ITEM_REMOVE,this,this.updateConsumeRed),LED.on(l_r.ITEM_AMOUNT_CHANGE,this,this.updateConsumeRed),LED.on(l_r.FESTIVAL_SIGN_INFO,this,this.updatePoint),LED.on(l_r.FESTIVAL_GIFT_INFO,this,this.updatePoint)}},b_s.prototype.addPanelByIndex=function(e){var p_l=this.activityVOs[e];if(!p_l)return null;var p_g=p_l.panel;return p_g||(p_g=new p_l.type,p_l.panel=p_g),p_g.dataSource=p_l.vo,this.panelContent.addChild(p_g),p_g.visible=!0,p_g},b_s.prototype.updateTime=function(){var e=this.activityVOs[this.currentOpen];e&&e.vo.type!=ActivityTypeDefine.BG_loginActivity&&(this.timeLabel.text=FestivalActivityModel.ins.getFestivalTimeByVo(e.vo))},b_s.prototype.hideShowChildPanel=function(e,p_l){e&&e.parent&&(e.visible=p_l)},b_s.prototype.onTabSelect=function(e){if(-1!=e){var p_l=this.tabList.getCell(e),p_g=this.activityPos[e];if(p_l&&null!=p_g){var b_s=this.activityVOs[p_g];if(b_s){var d_u=this.activityVOs[this.currentOpen];d_u&&this.hideShowChildPanel(d_u.panel,!1),b_s&&b_s.panel&&b_s.panel.parent?(b_s.panel,this.hideShowChildPanel(b_s.panel,!0)):this.addPanelByIndex(p_g),this.setCellSelect(this.currentIndex,!1),this.setCellSelect(e,!0),this.currentIndex=e,this.currentOpen=p_g,this.timeLabel.text=FestivalActivityModel.ins.getFestivalTimeByVo(b_s.vo),this.bg.skin=this.festivalImage(b_s.vo),this.activityLabel.text=b_s.vo.dec,FestivalActivityModel.ins._FestivalfristRed=!1}}}},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close()}},b_s.prototype.updatePoint=function(e,p_l){void 0===e&&(e=-1),void 0===p_l&&(p_l=-1),e=-1==e?this.currentIndex:e,p_l=-1==p_l?this.currentOpen:p_l;var p_g=this.activityVOs[p_l];if(p_g){var b_s=this.tabList.getCell(e);b_s&&(b_s.getChildByName("red").visible=FestivalActivityModel.ins.festivalRedPoint(p_g.vo))}},b_s.prototype.festivalImage=function(e){return e?e.type==ActivityTypeDefine.BG_loginActivity?"res/ui/activity/festivals/bg_denglu.png":e.type==ActivityTypeDefine.BG_holidayGift?"res/ui/activity/festivals/bg_chongzhi.png":"res/ui/activity/festivals/bg_zhuanpan.png":""},b_s.close=function(e){void 0===e&&(e=!1),UIM.close(b_s,e,["res/ui/activity/festivals/zhuanpan_di.png","res/ui/activity/festivals/bg_zhuanpan.png","res/ui/activity/festivals/bg_denglu.png","res/ui/activity/festivals/bg_chongzhi.png"])},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),z_j.setList(p_g.tabList,p_g,p_g.renderItem,p_g.onTabSelect),p_g.activityPos=[e.FastivalTab.LottertDraw,e.FastivalTab.RechargeGift,e.FastivalTab.loginReward],p_g.currentIndex=-1,p_g.activityVOs={},p_g.currentOpen=-1,p_g}e.FestivalMainPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.festivals.festivalSign_cellUI,__extends(b_s,p_l),b_s.prototype.init=function(){Mcn(this,e,z_j,Laya)},b_s.prototype.onClickRecBtn=function(){var e=this.dataSource;e&&1==e.state&&FestivalActivityModel.ins.reqGetReward(e.day)},b_s.prototype.renderList=function(e,p_l){e&&e.dataSource&&(e.isShowName=!1,e.setItemData(e.dataSource))},b_s.prototype.updateCell=function(){var e,p_l=this.dataSource;this.dataSource&&(this.titleClip.index=p_l.day,this.list.array=p_l.items,e=3==p_l.state?(j_x("1300_1241_1174")+j_x(2111)):(j_x("1174_2111_2235")+j_x(83)),this.redPoint.visible=1==p_l.state,this.rechargeBtn.disabled=1!=p_l.state,this.rechargeBtn.label=e)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.FestivalSignCell=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.festivals.festivalsSignPanelUI,__extends(b_s,p_l),b_s.prototype.init=function(){Asp(this,Laya,e,z_j)},b_s.prototype.updateView=function(){Kul(this,FestivalActivityModel)},b_s.prototype.onRemove=function(){Iuh(LED,l_r,this)},b_s.prototype.onAdded=function(){var e=this.dataSource;e&&(ActivityModel.reqActivityRecord(e.type),LED.on(l_r.FESTIVAL_SIGN_INFO,this,this.updateView))},b_s.prototype.renderList=function(e,p_l){e&&e.updateCell()},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.FestivalSignPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.growUpPlan.growUpPlanActivityUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(e){this.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.GROWUPFOUND_UPDATE_INFO,this,this.upDateGrowUpPanel),LED.on(l_r.INVESTMENT_UPDATE_INFO,this,this.upDateInvestmentPanel),LED.on(l_r.HERO_LEVEL_CHANGE,this,this.upDateGrowUpPanel),this.dataSource&&(this.dataSource.vo,this.tab.selectedIndex=this.dataSource.index,this.showTab(),this.updateTimeTxt())},b_s.prototype.updatePanelData=function(){if(this.dataSource.vo){if(0===this.tab.selectedIndex){this.growUpFund_list.visible=!1,this.investmentPlan_list.visible=!0,this.bgimg.skin="res/ui/activity/bg_touzijihua.png",this.tittleImg.skin="res/ui/activity/title_touzijihua.png",this.investmentPlan_list.itemRender=e.growUpFundCell;var p_l=growUpModel.ins.investmentInfo;this.investmentPlan_list.array=p_l.sort(this.investmentCompareFun),this.investmentPlan_list.scrollBar.value=0}else 1===this.tab.selectedIndex&&(this.growUpFund_list.visible=!0,this.investmentPlan_list.visible=!1,this.bgimg.skin="res/ui/activity/bg_chengzhangjijin.png",this.tittleImg.skin="res/ui/activity/title_chengzhangjijin.png",this.growUpFund_list.itemRender=e.growUpFundCell,p_l=growUpModel.ins.growUpFundInfo,this.growUpFund_list.array=p_l.sort(this.growUpCompareFun),this.growUpFund_list.scrollBar.value=0);this.updateTimeTxt(),this.upDateTabRedPoint()}},b_s.prototype.updateItem_investment=function(e){e&&e.setInvestmentPanlData(e.dataSource)},b_s.prototype.upDateInvestmentPanel=function(){Cta(growUpModel,this)},b_s.prototype.upDateTabRedPoint=function(){Ejk(this,growUpModel)},b_s.prototype.showTab=function(){var e,p_l,p_g=ActivityModel.instance.getActivityConfigVo(FuncDefine.growUpFundActivityPanel);for(var b_s in p_g.subVo)p_g.subVo[b_s].type==ActivityTypeDefine.GS_growUpFund?e=p_g.subVo[b_s]:p_g.subVo[b_s].type==ActivityTypeDefine.GS_investmentPlan&&(p_l=p_g.subVo[b_s]);e||p_l||console.log((j_x("1796_1878_1971")+j_x("155_1186")+".")),this.item0.visible=!!p_l,this.item1.visible=!!e,this.item0.visible?this.item1.x=151:this.item1.x=0},b_s.prototype.updateListData=function(){switch(this.tab.selectedIndex){case 0:this.investmentPlan_list.array=null;break;case 1:this.growUpFund_list.array=null;break;default:this.growUpFund_list.array=null,this.investmentPlan_list.array=null}this.updatePanelData()},b_s.prototype.updateProText=function(e){void 0===e&&(e=!1);var p_l=0;switch(this.tab.selectedIndex){case 0:var p_g=growUpModel.ins.loginedDays;this.proText.text=(j_x("1874_867_1723")+j_x("2000_2308_2348")+"")+p_g,p_l=growUpModel.ins.invSetConf.money,this.b_buy.label=(j_x("1188_115"))+p_l+(j_x(1263)),growUpModel.ins.isbuyInvestment?(this.b_buy.visible=!1,this.timeTxt.visible=!1):(this.b_buy.visible=!0,this.timeTxt.visible=!e);break;case 1:var b_s=LgcM.ins.heroVo;this.proText.text=(j_x("1327_711_1017")+j_x("1145_15_2342")+"")+b_s.level,p_l=growUpModel.ins.growUpSetConf.money,this.b_buy.label=(j_x("1188_115"))+p_l+(j_x(1263)),growUpModel.ins.isbuyGrowUpFound?(this.b_buy.visible=!1,this.timeTxt.visible=!1):(this.b_buy.visible=!0,this.timeTxt.visible=!e);break;default:this.proText.text=""}},b_s.prototype.onTabSelect=function(e){-1!==e&&this.updateListData()},b_s.open=function(e,p_l){void 0===p_l&&(p_l=0),(e=e||ActivityModel.instance.getActivityConfigVo(FuncDefine.growUpFundActivityPanel))?UIM.open(b_s,["activity.atlas","shop.atlas","recharge.atlas","activity/openSer.atlas"],{vo:e,index:p_l},!1,!1,!0,!0):b_p.broadcastNotice((j_x("1796_1878_206")+j_x("155_1186")))},b_s.prototype.growUpCompareFun=function(e,p_l){return e.Status==p_l.Status?e.ids-p_l.ids:e.Status-p_l.Status},b_s.prototype.upDateGrowUpPanel=function(){Keo(growUpModel,this)},b_s.prototype.updateTimeTxt=function(){if(this.dataSource){var e=this.dataSource.vo;Laya.timer.clear(this,this.updateTimeTxt);var p_l,p_g=e.subVo,b_s=0;if(0===this.tab.selectedIndex)for(var d_u in p_g)p_g[d_u].type==ActivityTypeDefine.GS_investmentPlan&&(b_s=p_g[d_u].start+604800-SyncTime.serverTime/1e3,p_l=(j_x("155_1998_1895")+j_x("1355_810_867")+j_x(1702)+": "));else if(1===this.tab.selectedIndex)for(var d_u in p_g)p_g[d_u].type==ActivityTypeDefine.GS_growUpFund&&(b_s=p_g[d_u].start+604800-SyncTime.serverTime/1e3,p_l=(j_x("155_1998_1895")+j_x("1355_810_867")+j_x(1702)+": "));0<b_s?(Laya.timer.once(1e3,this,this.updateTimeTxt),this.timeTxt.text=p_l+Utils.formatTimeStr2(Math.floor(b_s),!0),this.updateProText()):(this.timeTxt.visible=!1,this.updateProText(!0))}},b_s.prototype.updateItem_growUp=function(e){e&&e.setGrowUpFoundData(e.dataSource)},b_s.prototype.investmentCompareFun=function(e,p_l){return e.Status===p_l.Status?e.days-p_l.days:e.Status-p_l.Status},b_s.prototype.onRemove=function(e){Oth(e,this,Laya,LED,l_r)},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"b_buy":0==this.tab.selectedIndex?growUpModel.ins.reqBuyInvestment():1==this.tab.selectedIndex&&growUpModel.ins.reqBuyGrowUpFound()}},b_s.close=function(){Qaj(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.tab.selectHandler=Laya.Handler.create(e,e.onTabSelect,null,!1),e.tab.selectedIndex=-1,z_j.setListScroll(e.growUpFund_list,!0,200,100),z_j.setListScroll(e.investmentPlan_list,!0,200,100),z_j.setList(e.growUpFund_list,e,e.updateItem_growUp),z_j.setList(e.investmentPlan_list,e,e.updateItem_investment),e}e.growUpFundActivityPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.growUpPlan.growUpPlanCellUI,__extends(b_s,p_l),b_s.prototype.setGrowUpFoundData=function(e){this.proBar.visible=!1,e.Status;var p_l,p_g=e.ids;switch(e.getStatus()){case 0:this.rewardBtn.label=(j_x("1174_2111")),this.redpoint.visible=!1,this.rewardBtn.disabled=!0,p_l=0;break;case 1:this.rewardBtn.label=(j_x("1174_2111")),this.redpoint.visible=!0,this.rewardBtn.disabled=!1,p_l=1;break;case 2:this.rewardBtn.label=(j_x("1174_2111")),this.redpoint.visible=!1,this.rewardBtn.disabled=!0,p_l=0;break;case 3:this.rewardBtn.label=(j_x("1174_2111")),this.redpoint.visible=!1,this.rewardBtn.disabled=!1,p_l=0;break;case-1:this.rewardBtn.label=(j_x("1300_1174_2111")),this.redpoint.visible=!1,this.rewardBtn.disabled=!0,p_l=-1}this.rewardList.array=e.items,this.titleTxt.text=e.titleName,this.barTxt.text=LgcM.ins.heroVo.level+"/"+e.getLv,this.barTxt.visible=!0,this.barTxt.color=LgcM.ins.heroVo.level>=e.getLv?"#00802e":"#FF0000",this.rewardBtn.dataSource={id:p_g,status:p_l,type:ActivityTypeDefine.GS_growUpFund}},b_s.prototype.setInvestmentPanlData=function(e){this.barTxt.visible=!1,this.proBar.visible=!1;var p_l,p_g=e.Status,b_s=e.ids;p_l=!growUpModel.ins.isbuyInvestment&&b_s<=growUpModel.ins.loginedDays?(this.rewardBtn.label=(j_x("1174_2111")),this.redpoint.visible=!1,this.rewardBtn.disabled=!1,0):growUpModel.ins.loginedDays>=e.days&&growUpModel.ins.isbuyInvestment&&0==p_g?(this.rewardBtn.label=(j_x("1174_2111")),this.redpoint.visible=!0,this.rewardBtn.disabled=!1,1):growUpModel.ins.loginedDays>=e.days&&growUpModel.ins.isbuyInvestment&&1==p_g?(this.redpoint.visible=!1,this.rewardBtn.disabled=!0,this.rewardBtn.label=(j_x("1300_1174_2111")),-1):(this.redpoint.visible=!1,this.rewardBtn.disabled=!0,this.rewardBtn.label=(j_x("1174_2111")),0),this.titleTxt.text=e.titleName,this.rewardList.array=e.items,this.rewardBtn.dataSource={id:b_s,status:p_l,isBuy:e.isBuy,type:ActivityTypeDefine.GS_investmentPlan}},b_s.prototype.onClick=function(e){if(this.dataSource){var p_l=e.target;if(p_l)if(p_l.dataSource.type===ActivityTypeDefine.GS_growUpFund){if(!this.dataSource)return;(p_g=p_l.dataSource).status?growUpModel.ins.reqGetGrowUpFundReward(p_g.id):growUpModel.ins.reqBuyGrowUpFound()}else if(p_l.dataSource.type===ActivityTypeDefine.GS_investmentPlan){if(!this.dataSource)return;var p_g;(p_g=p_l.dataSource).id<=growUpModel.ins.loginedDays&&!growUpModel.ins.isbuyInvestment?growUpModel.ins.reqBuyInvestment():p_g.status?growUpModel.ins.reqGetInvestmentReward(p_g.id):growUpModel.ins.reqBuyInvestment()}}},b_s.prototype.updateItem=function(e,p_l){e&&(e.isShowName=!1,e.isShowNum=!0,e.isShowTick=!1,e.setItemData(e.dataSource,ItemBoxDefine.MODULE_ITEM))},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.rewardBtn.on(Laya.Event.CLICK,p_g,p_g.onClick),p_g.rewardList.itemRender=e.ItemBox,z_j.setList(p_g.rewardList,p_g,p_g.updateItem),p_g}e.growUpFundCell=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.guild.guildKriegAutoPanelUI,__extends(b_s,p_l),b_s.prototype.onClick=function(e){var p_l=e.target;if(p_l){var p_g=p_l.name;if("closeBtn"==p_g)b_s.close();else if("autoBtn"==p_g)if(this._autoBtnState)this._autoBtnState=!1,this.autoBtn.label=Utils.$((j_x("155_2086_1479")+j_x(652))),this.cancelAuto();else{if(!this.checkCanAuto())return void b_p.broadcastNotice(Utils.$((j_x("1777_517_1191")+j_x("774_1624_1479")+j_x("652_2046_517")+j_x(2446))));this.autoStart(),this._autoBtnState=!0,this.autoBtn.label=Utils.$((j_x("2111_1661_1479")+j_x(652)))}else if(-1!=p_g.indexOf("check")){var d_u=parseInt(p_g.charAt(5)),b_e=d_u+1,d_m=p_l;this._checks[b_e]&&!d_m.selected?delete this._checks[b_e]:this._checks[d_u+1]=1,this._autoBtnState&&(this._autoBtnState=!1,this.autoBtn.label=Utils.$((j_x("155_2086_1479")+j_x(652))),this.cancelAuto())}}},b_s.prototype.onRemove=function(){Wkc(this,Laya)},b_s.prototype.cancelAuto=function(){Osu(GuildKriegModel,LED,l_r)},b_s.prototype.onUpdate=function(){Syl(this)},b_s.prototype.checkCanAuto=function(){for(var e in this._checks)if(null!=this._checks[e]&&0!=this._checks[e])return!0;return!1},b_s.prototype.onAdded=function(){Gla(this,Laya)},b_s.prototype.autoStart=function(){GuildKriegModel.instance.autoData=this._checks,GuildKriegModel.autoHosting=!0,LED.event(l_r.GUILD_MERIEG_AUTO_STATE_CHANGE),b_s.close(),b_p.broadcastNotice(Utils.$((j_x("1300_155_1186")+j_x("1479_652"))))},b_s.prototype.updateView=function(){Umg(GuildKriegModel)},b_s.open=function(){Mkc(UIM,b_s)},b_s.close=function(){Awc(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e._checks={},e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.GuildKriegAutoPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.guild.guildKriegBillingPanelUI,__extends(b_s,p_l),b_s.prototype.updateView=function(){var e=GuildKriegModel.instance.kriegVO.guild_krieg_reward_info;if(e){var p_l,p_g=Config.guild_guildKrieg[e.rewardCnfId],b_s=b_p.getRewardDatas(p_g.reward),d_u=e.rewards;for(var b_e in d_u){var d_m=new ModuleItemVO;d_m.id=Config.guild_guildKriegCollect[d_u[b_e].id].itemId,d_m.amount=d_u[b_e].count,d_m.dynamic="weight",(p_l=p_l||[]).push(d_m)}this._showType==BilingShowType.WIN?(this.winBox.visible=!0,this.collectBox.visible=!1,this.ownRewardList.array=b_s,this.guildRewardList.array=p_l):this._showType==BilingShowType.COLLECT&&(this.winBox.visible=!1,this.collectBox.visible=!0,this.collectRewardList.array=b_s,this.collectGuildRewardList.array=p_l),(this._showType==BilingShowType.WIN?this.winRemainTxt:this.collectTimeTxt).text=Utils.$(("{1}"+j_x(2081)),this.MAX_TIME)}},b_s.prototype.onAdded=function(){Mwi(this,Laya)},b_s.prototype.onRemove=function(){Laya.timer.clearAll(this),this._showType==BilingShowType.WIN&&GuildKriegModel.instance.reqLeaveMap()},b_s.open=function(e){Eyl(e,UIM,b_s)},b_s.prototype.onTimer=function(){this._time--,(this._showType==BilingShowType.WIN?this.winRemainTxt:this.collectTimeTxt).text=Utils.$(("{1}"+j_x(2081)),this._time),this._time<=0&&b_s.close()},b_s.prototype.onItemRender=function(e,p_l,p_g){if(p_l){p_l.setItemData(p_l.dataSource,ItemBoxDefine.MODULE_ITEM);var b_s=p_l.dataSource;if(b_s&&"weight"==b_s.dynamic){var d_u=p_l.localToGlobal(new Laya.Point),b_e=GuildKriegModel.instance.getCellPos(p_l.dataSource.id);if(b_e){var d_m=Config.CItem(b_s.id).icon;r_n.instance.flyToBagEffect(d_m,d_u,b_e,null)}}}},b_s.close=function(){Ohr(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.MAX_TIME=5,p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g.ownRewardList.vScrollBarSkin="",p_g.ownRewardList.renderHandler=Laya.Handler.create(p_g,p_g.onItemRender,[p_g.ownRewardList],!1),p_g.ownRewardList.itemRender=e.ItemBox,p_g.guildRewardList.vScrollBarSkin="",p_g.guildRewardList.renderHandler=Laya.Handler.create(p_g,p_g.onItemRender,[p_g.guildRewardList],!1),p_g.guildRewardList.itemRender=e.ItemBox,p_g.collectRewardList.vScrollBarSkin="",p_g.collectRewardList.renderHandler=Laya.Handler.create(p_g,p_g.onItemRender,[p_g.collectRewardList],!1),p_g.collectRewardList.itemRender=e.ItemBox,p_g.collectGuildRewardList.vScrollBarSkin="",p_g.collectGuildRewardList.renderHandler=Laya.Handler.create(p_g,p_g.onItemRender,[p_g.collectGuildRewardList],!1),p_g.collectGuildRewardList.itemRender=e.ItemBox,p_g}e.GuildKriegBillingPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.guild.guildKriegBossSceneUI,__extends(b_s,p_l),b_s.prototype.updateView=function(){var e=GuildKriegModel.instance.kriegVO,p_l=GuildKriegModel.instance.checkIsBossMap();this.bloodTipTxt.visible=this.itemBox.visible=this.infoBox.visible=p_l,this.dropList.visible=!p_l,this.dropTipTxt.visible=!p_l,p_l&&this.updateItemList(),this.difficultTxt.text=Utils.$((j_x("696_1035")+"{1}"),e.level)},b_s.prototype.updateTime=function(){if(this.refMonsterInfo(),this._stopTime&&!this._isOpen){this._date||(this._date=new Date),this._date.setTime(SyncTime.serverTime),this._date.setHours(this._stopTime[0],this._stopTime[1],0,0);var e=(this._date.getTime()-SyncTime.serverTime)/1e3;e<0&&(e=0,this._isOpen=!0);var p_l=Utils.formatTimeStr(e);this.timeTxt.text=p_l}},b_s.prototype.onChange=function(e){Kgt(e,GuildKriegModel,this,LED,l_r)},b_s.prototype.onAutoStateChange=function(){Uat(this,GuildKriegModel)},b_s.prototype.onDropItemRender=function(e,p_l){if(e){var p_g=e.dataSource,b_s=e.getChildByName("dropIcon"),d_u=e.getChildByName("dropIconBG"),b_e=Config.guild_guildKriegCollect[p_g[0]],d_m=Config.CItem(b_e.itemId),d_w=Resource.ResUrl.getIconUrl(d_m.icon);b_s=Resource.ResManager.Instance.getImg(d_w,b_s),d_u.index=d_m.quality-1}},b_s.open=function(){Qla(UIM,b_s)},b_s.prototype.updateItemList=function(){Kvm(this)},b_s.prototype.onRemove=function(){Moq(this,Laya,LED,l_r)},b_s.prototype.onAdd=function(){GuildKriegModel.instance.reqBaseInfo(),GuildKriegModel.instance.reqMainUIInfo(),this.updateView(),this.refMonsterInfo(),this.refShieldIcon(),this.onAutoStateChange(),this.autoCheckBox.selected=!1,UIM.instance.setMainLeftUIVisible(!1),this.on(Laya.Event.CLICK,this,this.onClick),this.autoCheckBox.on(Laya.Event.CHANGE,this,this.onChange),LED.on(l_r.GUILD_MERIEG_MAIN_UI_UPDATE,this,this.updateItemList),LED.on(l_r.GUILD_MERIEG_AUTO_STATE_CHANGE,this,this.onAutoStateChange),Laya.timer.loop(500,this,this.updateTime)},b_s.prototype.onItemRender=function(e,p_l){e&&e.setItemData(e.dataSource)},b_s.prototype.refShieldIcon=function(){Kta(GuildKriegModel,this,LgcM)},b_s.prototype.refMonsterInfo=function(){if(this._monsterVo){this.hpBar.update();var e=GuildKriegModel.instance.getSettleCfgByEntryId(this._monsterVo.entryId);if(e)for(var p_l=this._monsterVo.hp,p_g=this._monsterVo.hpUpper,b_s=Math.floor(p_l/p_g*100),d_u=e.length,b_e=0;b_e<d_u;b_e++){var d_m=(r_t=e[b_e]).hp;if(d_m[0]>=b_s&&d_m[1]<=b_s){this.levelTxt.text=r_t.score,d_u<=b_e+1&&d_m[0]==d_m[1]?this.bossTipTxt.text="":(r_t=b_e+1>=e.length?r_t:e[b_e+1],this.bossTipTxt.text=Utils.$(("BOSS"+j_x("1839_716_1317")+j_x(1012)+"{1}%"+j_x("371_803")),r_t.hp[0]),this.nextLevelTxt.text=r_t.score);break}}}else{var d_w=LgcM.ins.getActorInfos(Engine2d.ActorTypeDefine.MONSTER);if(d_w){if(this._monsterVo=d_w[0],!this._monsterVo)return void console.log(("fuck "+j_x("2462_1163_1919")+j_x("68_1466")));var f_t=Config.obj_monster[this._monsterVo.entryId];if(!f_t)return;this.bossNameTxt.text=f_t.name,this.headIcon.skin=Resource.ResUrl.getIconUrl(f_t.icon);var v_z=GuildKriegModel.instance.checkIsBossMap(),d_h=v_z?ScriptType.BOSS:ScriptType.MONSTER;if(this.hpBar.setRenderData(this._monsterVo,d_h),!v_z){var r_t,t_n=(r_t=GuildKriegModel.instance.getKriegCfgByFbId(b_p.fbId)).weight;this.dropList.array=t_n}}}},b_s.prototype.onClick=function(p_l){var p_g=p_l.target;if(p_g)switch(p_g.name){case"exitBtn":b_p.confirm(Utils.$((j_x("68_2032_1016")+j_x("155_1406_1194")+j_x("383_76"))),(function(){GuildKriegModel.instance.reqLeaveMap()}));break;case"funBtn":this.funBox.visible=!this.funBox.visible;break;case"shieldBtn":var b_s=GuildKriegModel.shield;b_s=!b_s,this.shieldIcon.visible=b_s,GuildKriegModel.shield=b_s,LgcM.ins.showHidePlayer(!b_s);break;case"guildBtn":e.GuildKriegMemberPanel.open();break;case"autoBtn":e.GuildKriegAutoPanel.open();break;case"permissionBtn":e.GuildKriegPermissionPanel.open();break;case"autoingBtn":e.GuildKriegAutoPanel.open();break;case"ruleBtn":e.GuildKriegHelpPanel.open();break;case"rewardBtn":e.GuildKriegLevelPanel.open()}},b_s.prototype.onSelect=function(p_l){var p_g=this.dropList.array[p_l],b_s=Config.guild_guildKriegCollect[p_g[0]];this._moduleItemVo||(this._moduleItemVo=new ModuleItemVO),this._moduleItemVo.id=b_s.itemId,e.ItemTipsPanel.open(this._moduleItemVo)},b_s.close=function(){Uzk(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;p_g._items=[],p_g.on(Laya.Event.ADDED,p_g,p_g.onAdd),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g.itemList.renderHandler=Laya.Handler.create(p_g,p_g.onItemRender,null,!1),p_g.itemList.itemRender=e.KriegItemCell,p_g.dropList.vScrollBarSkin="",p_g.dropList.renderHandler=Laya.Handler.create(p_g,p_g.onDropItemRender,null,!1),p_g.dropList.selectHandler=Laya.Handler.create(p_g,p_g.onSelect,null,!1);var b_s=Config.guild_guildKriegCollect,d_u=[];for(var b_e in b_s)d_u.push(b_s[b_e]);p_g._items=d_u;var d_m=Config.global[GlobalDefine.guildKriegActityId].i_info,d_w=Config.activity_activity[d_m];if(d_w){var f_t=d_w.stopTime.split(":");p_g._stopTime=[parseInt(f_t[0]),parseInt(f_t[1])]}return p_g}e.GuildKriegBossSceneUI=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.guild.guildKriegHelpPanelUI,__extends(b_s,p_l),b_s.prototype.onClick=function(e){var p_l=e.target;if(p_l)switch(p_l.name){case"closeBtn":b_s.close()}},b_s.open=function(){Cap(UIM,b_s)},b_s.prototype.onAdded=function(){Mry(this,Laya)},b_s.prototype.onRemove=function(){Epp(this,Laya)},b_s.close=function(){Ebo(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.scrollPanel.vScrollBarSkin="",e.scrollPanel.vScrollBar.elasticBackTime=200,e.scrollPanel.vScrollBar.elasticDistance=50,e.scrollPanel.vScrollBar.visible=!1,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.GuildKriegHelpPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.GuildKriegIconViewUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Aks(this,Laya)},b_s.prototype.onRemoved=function(){Ehq(this,Laya)},b_s.prototype.onClick=function(){Sdn(e)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e}e.GuildKriegIconView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.guild.guildKriegLevelPanelUI,__extends(b_s,p_l),b_s.prototype.updateView=function(){Snd(GuildKriegModel,this)},b_s.prototype.show=function(e){this._doTween=!0;var p_l=GuildKriegModel.instance,p_g=p_l.kriegVO,b_s=p_l.kriegAutoCfg[KriegMonsterType.BOSS][0];if(b_s=p_l.getKriegCfgByLv(b_s.monsterType,e)){var d_u=p_l.getSettleCfgByEntryId(b_s.entryId);d_u.sort((function(e,p_l){return p_l.id-e.id})),this.list.array=d_u}var b_e=p_g.level==this._maxLevel,d_m=e==p_g.level&&!b_e,d_w=d_m?(j_x("1327_711_696")+j_x(1035)+""):(j_x("2379_1737_696")+j_x(1035)+"");this.curLevelBtn.visible=!d_m,this.nextLevelBtn.visible=d_m,this.infoTxt.text=b_e?Utils.$((j_x("1327_711_1300")+j_x("68_1081_2251")+j_x("15_2342"))):Utils.$((j_x("160_603_1117")+j_x(1012)+"S"+j_x("581_1694_192")+j_x("1067_2379_235")+j_x("1796_1878_696")+j_x("1035_1409_1628")+j_x(2251)+"1"+j_x(2342))),this.curLevelTxt.text=Utils.$(d_w+"{1}",e)},b_s.prototype.onRemove=function(){Qyd(this,Laya)},b_s.prototype.onAdded=function(){Srx(this,Laya)},b_s.prototype.onClick=function(e){var p_l=e.target;if(p_l)switch(p_l.name){case"closeBtn":case"backBtn":b_s.close();break;case"curLevelBtn":this.updateView();break;case"nextLevelBtn":var p_g=GuildKriegModel.instance.kriegVO;if(p_g.level+1>this._maxLevel)return;this.show(p_g.level+1)}},b_s.prototype.onItemRender=function(e,p_l){var p_g=this;if(e){var b_s=e,d_u=e.dataSource;b_s.setItemData(d_u,p_l),Laya.Tween.clearAll(b_s),this._doTween&&(b_s.x=this.list.x+this.list.width+100,Laya.Tween.to(b_s,{f_u:0},200,Laya.Ease.bounceInOut,Laya.Handler.create(this,(function(){p_g._doTween=!1}))))}},b_s.open=function(){Ymh(UIM,b_s)},b_s.close=function(){Meg(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g.list.vScrollBarSkin="",p_g.list.scrollBar.elasticDistance=100,p_g.list.scrollBar.elasticBackTime=200,p_g.list.renderHandler=Laya.Handler.create(p_g,p_g.onItemRender,null,!1),p_g.list.itemRender=e.KriegLevelCell,p_g._maxLevel=Config.global[GlobalDefine.guildKriegBossMaxLevel].i_info,p_g}e.GuildKriegLevelPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.guild.guildKriegMemberPanelUI,__extends(b_s,p_l),b_s.prototype.onClick=function(e){var p_l=e.target;if(p_l)switch(p_l.name){case"closeBtn":b_s.close()}},b_s.prototype.onAdded=function(){Kki(this,Laya,LED,l_r,GuildKriegModel)},b_s.open=function(){Sfr(UIM,b_s)},b_s.prototype.onRemove=function(){Uby(this,Laya,LED,l_r)},b_s.prototype.updateView=function(){Anj(GuildKriegModel,this)},b_s.prototype.sort=function(e,p_l){return Imt(e,p_l)},b_s.prototype.onUpdate=function(){Aar(this)},b_s.prototype.onItemRender=function(e,p_l){if(e){var p_g=e,b_s=e.dataSource;p_g.setItemData(b_s,p_l)}},b_s.close=function(){Whm(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g.list.vScrollBarSkin="",p_g.list.scrollBar.elasticDistance=100,p_g.list.scrollBar.elasticBackTime=200,p_g.list.renderHandler=Laya.Handler.create(p_g,p_g.onItemRender,null,!1),p_g.list.itemRender=e.KriegMemberCell,p_g}e.GuildKriegMemberPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.guild.guildKriegPanelUI,__extends(b_s,p_l),b_s.prototype.onClick=function(p_l){var p_g=p_l.target;if(p_g)switch(p_g.name){case"closeBtn":case"backBtn":b_s.close();break;case"enterBtn":if(!GuildModel.instance.hasGuild)return void b_p.broadcastNotice(Utils.$((j_x("1777_320_223")+j_x("2456_796_1413")+"")));GuildKriegModel.instance.reqEnterMap();break;case"helpBtn":e.GuildKriegHelpPanel.open()}},b_s.prototype.updateView=function(){var e=GuildKriegModel.instance.kriegVO;this.levelTxt.text=Utils.$((j_x("696_1035_15")+j_x(2342)+"{1}"),e.level),this.rewardList.array=this._rewards,1==e.state&&(Laya.timer.clear(this,this.updateTime),this.timeTxt.text=Utils.$(("BOSS"+j_x("1300_1629_1835")+j_x(236))))},b_s.prototype.onAdded=function(){this._openState=OpenState.NOT_START,GuildKriegModel.instance.reqBaseInfo(),Laya.timer.loop(1e3,this,this.updateTime),this.updateTime(),this.updateView(),this.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.GUILD_MERIEG_BASE_UPDATE,this,this.onUpdate)},b_s.prototype.onUpdate=function(){Iuw(this)},b_s.prototype.updateTime=function(e){if(void 0===e&&(e=0),this._startTime&&this._stopTime&&this._openState!=OpenState.END){var p_l,p_g=this.getNextTime();p_l=this._openState==OpenState.NOT_SERVE?Utils.$((j_x("155_1998_573")+"{1}"+j_x("2308_155_1186")),this._serveDay):this._openState==OpenState.OPEN?Utils.$(("{1}"+j_x("1865_396_2426")),Utils.formatTimeStr(Math.ceil((p_g-SyncTime.serverTime)/1e3))):Utils.$(("{1}"+j_x("1865_155_1186")),Utils.formatTimeStr(Math.ceil((p_g-SyncTime.serverTime)/1e3))),this.timeTxt.text=p_l}},b_s.prototype.onRemove=function(){Eum(this,Laya,LED,l_r)},b_s.open=function(){Wto(UIM,b_s)},b_s.prototype.getNextTime=function(){if(!(0<this._serveDay&&Utils.subtractDate(1e3*SyncTime.serverOpenTime,SyncTime.serverTime)+1<this._serveDay)){this._date||(this._date=new Date);var e=0,p_l=this._date;p_l.setTime(SyncTime.serverTime),p_l.setHours(this._startTime[0],this._startTime[1],0,0);var p_g=p_l.getTime();return p_l.setHours(this._stopTime[0],this._stopTime[1],0,0),p_g<SyncTime.serverTime&&SyncTime.serverTime<p_l.getTime()?(e=p_l.getTime(),this._openState=OpenState.OPEN):(p_l.setTime(p_g),p_g>SyncTime.serverTime&&(0==e||e>p_l.getTime())&&(e=p_l.getTime()),p_l.setTime(p_g+864e5),p_l.getTime()>SyncTime.serverTime&&(0==e||e>p_l.getTime())&&(e=p_l.getTime()),this._openState=OpenState.NOT_START),e}this._openState=OpenState.NOT_SERVE},b_s.prototype.destroy=function(e){Iyj(e,p_l,this)},b_s.prototype.onItemRender=function(e,p_l){if(e){var p_g=e;p_g.isShowName=!1,p_g.setItemData(e.dataSource,ItemBoxDefine.MODULE_ITEM,!0)}},b_s.close=function(){Ujq(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;p_g._openState=OpenState.NOT_START,p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g.rewardList.renderHandler=Laya.Handler.create(p_g,p_g.onItemRender,null,!1),p_g.rewardList.itemRender=e.ItemBox;var b_s=Config.global[GlobalDefine.guildKriegFbId].i_info,d_u=Config.global[GlobalDefine.guildKriegActityId].i_info,b_e=Config.fb_dungeon[b_s].firstPassReward;p_g._rewards=b_p.getRewardDatas(b_e);var d_m=Config.activity_activity[d_u];if(d_m){var d_w=d_m.startTime.split(":");p_g._startTime=[parseInt(d_w[0]),parseInt(d_w[1])],d_w=d_m.stopTime.split(":"),p_g._stopTime=[parseInt(d_w[0]),parseInt(d_w[1])],p_g._serveDay=d_m.openDay}return p_g}e.GuildKriegPanel=p_g}(UI=UI||{}),function(e){e[e.NOT_SERVE=0]="NOT_SERVE",e[e.NOT_START=1]="NOT_START",e[e.OPEN=2]="OPEN",e[e.END=3]="END"}(OpenState=OpenState||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.guild.guildKriegPermissionPanelUI,__extends(b_s,p_l),b_s.prototype.onClick=function(e){var p_l=e.target;if(p_l)switch(p_l.name){case"closeBtn":b_s.close();break;case"enterBtn":var p_g=0==this.group.selectedIndex?PermissionType.ALL:PermissionType.ELITE;GuildKriegModel.instance.reqPermissionSetting(p_g),GuildKriegModel.instance.kriegVO.permission=p_g,b_s.close()}},b_s.prototype.onSelected=function(){Gxp(this)},b_s.prototype.onMouseDown=function(){this._isMaster||b_p.broadcastNotice(Utils.$((j_x("86_1896_627")+j_x("796_2060_1919")+j_x("1679_1943_910")+j_x(745))))},b_s.prototype.updateView=function(){var e=GuildKriegModel.instance.kriegVO.permission-1,p_l=e<0?0:e;if(this.group.selectedIndex=p_l,GuildModel.instance.guildInfo){var p_g=GuildModel.instance.getMemberByID(b_p.playerId);p_g&&p_g.office==GuildOfficeDefine.HUIZHANG?this._isMaster=!0:this._isMaster=!1}this.allCheck.mouseEnabled=this._isMaster,this.eliteCheck.mouseEnabled=this._isMaster,this._isMaster&&this.refCheckState()},b_s.prototype.onRemove=function(){Qii(this,Laya)},b_s.open=function(){Qbt(UIM,b_s)},b_s.prototype.onAdded=function(){Uss(this,Laya)},b_s.prototype.refCheckState=function(){for(var e=this.group.selectedIndex,p_l=this.group.numChildren,p_g=0;p_g<p_l;p_g++){var b_s=this.group.getChildAt(p_g);b_s&&(b_s.mouseEnabled=p_g!=e)}},b_s.close=function(){Gey(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.GuildKriegPermissionPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.guild.guildKriegSceneUI,__extends(b_s,p_l),b_s.prototype.updateView=function(){var e=GuildKriegModel.instance.kriegVO;this.levelTxt.text=Utils.$((j_x("1327_711_696")+j_x(1035)+"{1}"),e.level),this.bossNameTxt.text=Config.obj_npc[this._bossCfg.entryId].name,this.updateItemList()},b_s.prototype.onRemove=function(){Egq(this,Laya,LED,l_r)},b_s.prototype.onAdd=function(){GuildKriegModel.instance.reqBaseInfo(),GuildKriegModel.instance.reqMainUIInfo(),this.updateView(),this.updateMonsterList(),this.refShieldIcon(),this.onAutoStateChange(),UIM.instance.setMainLeftUIVisible(!1),this.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.GUILD_MERIEG_MAIN_UI_UPDATE,this,this.onUpdate),LED.on(l_r.GUILD_MERIEG_BASE_UPDATE,this,this.onUpdate),LED.on(l_r.GUILD_MERIEG_BOSS_LIST_UPDATE,this,this.updateMonsterList),LED.on(l_r.GUILD_MERIEG_AUTO_STATE_CHANGE,this,this.onAutoStateChange),Laya.timer.loop(1e3,this,this.updateTime)},b_s.prototype.onUpdate=function(){Wje(this)},b_s.prototype.onItemRender=function(e,p_l,p_g){e===this.monsterList?p_l.setData(p_l.dataSource):e===this.itemList&&p_l.setItemData(p_l.dataSource)},b_s.prototype.updateTime=function(){if(this._stopTime&&!this._isOpen){this._date||(this._date=new Date),this._date.setTime(SyncTime.serverTime),this._date.setHours(this._stopTime[0],this._stopTime[1],0,0);var e=(this._date.getTime()-SyncTime.serverTime)/1e3;e<0&&(e=0,this._isOpen=!0,Laya.timer.clear(this,this.updateTime));var p_l=Utils.formatTimeStr(e);this.timeTxt.text=p_l}},b_s.prototype.updateItemList=function(){Ipx(this)},b_s.prototype.onGuildInfoUpdate=function(){Ivr(LED,l_r,this,GuildKriegModel)},b_s.prototype.updateMonsterList=function(){if(this.monsterList.array=this._monsters,this.tipArrowIcon.visible=3<this._monsters.length,GuildKriegModel.instance.checkFirstOpenPermissionPanel(),this._bossCfg){var e=Config.global[GlobalDefine.guildKriegEnterBossCount].i_info,p_l=GuildKriegModel.instance.getRealBoss();if(p_l){var p_g=p_l.hp/p_l.hpUpper;this.bossHPBar.value=p_g,this.bossHpTxt.text=Math.floor(100*p_g)+"%",this.dareNumTxt.text=Utils.$("{1}/{2}",p_l.count,e)}else this.dareNumTxt.text=Utils.$("{1}/{2}",0,e)}},b_s.prototype.onAutoStateChange=function(){Qqi(this,GuildKriegModel)},b_s.prototype.destroy=function(e){Sxs(e,p_l,this)},b_s.prototype.refShieldIcon=function(){Uwj(GuildKriegModel,this,LgcM)},b_s.prototype.onClick=function(p_l){var p_g=p_l.target;if(p_g)switch(p_g.name){case"exitBtn":b_p.confirm(Utils.$((j_x("68_2032_1016")+j_x("155_1406_1194")+j_x("383_76"))),(function(){GuildKriegModel.instance.reqLeaveMap()}));break;case"funBtn":this.funBox.visible=!this.funBox.visible;break;case"dareBtn":this.dareBox.visible=!this.dareBox.visible;break;case"bossAttackBtn":GuildKriegLogic.instance.moveToNpc(this._bossCfg.entryId);break;case"shieldBtn":var b_s=GuildKriegModel.shield;b_s=!b_s,this.shieldIcon.visible=b_s,GuildKriegModel.shield=b_s,LgcM.ins.showHidePlayer(!b_s);break;case"guildBtn":e.GuildKriegMemberPanel.open();break;case"autoBtn":e.GuildKriegAutoPanel.open();break;case"permissionBtn":e.GuildKriegPermissionPanel.open();break;case"autoingBtn":e.GuildKriegAutoPanel.open();break;case"ruleBtn":e.GuildKriegHelpPanel.open();break;case"rewardBtn":e.GuildKriegLevelPanel.open()}},b_s.open=function(){Mmn(UIM,b_s)},b_s.close=function(){Gxc(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;p_g._items=[],p_g._monsters=[],p_g.on(Laya.Event.ADDED,p_g,p_g.onAdd),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g.monsterList.vScrollBarSkin="",p_g.monsterList.scrollBar.elasticDistance=100,p_g.monsterList.scrollBar.elasticBackTime=200,p_g.monsterList.renderHandler=Laya.Handler.create(p_g,p_g.onItemRender,[p_g.monsterList],!1),p_g.monsterList.itemRender=e.KriegDareCell,p_g.itemList.renderHandler=Laya.Handler.create(p_g,p_g.onItemRender,[p_g.itemList],!1),p_g.itemList.itemRender=e.KriegItemCell;var b_s=Config.guild_guildKriegCollect,d_u=[];for(var b_e in b_s)d_u.push(b_s[b_e]);p_g._items=d_u;var d_m=GuildKriegModel.instance.kriegAutoCfg,d_w=d_m[KriegMonsterType.BOSS];p_g._bossCfg=d_w[0],d_w=d_m[KriegEntryType.NPC];for(var f_t=1;f_t<d_w.length;f_t++)p_g._monsters.push(d_w[f_t]);p_g.bossHPBar.value=1;var v_z=Config.global[GlobalDefine.guildKriegActityId].i_info,d_h=Config.activity_activity[v_z];if(d_h){var r_t=d_h.stopTime.split(":");p_g._stopTime=[parseInt(r_t[0]),parseInt(r_t[1])]}return GuildModel.instance.guildInfo?GuildKriegModel.instance.reqBossList():LED.on(l_r.GUILD_INFO_UPDATE,p_g,p_g.onGuildInfoUpdate),p_g}e.GuildKriegSceneUI=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.guild.guildKriegWinPanelUI,__extends(b_s,p_l),b_s.prototype.updateView=function(){var e=GuildKriegModel.instance.kriegVO,p_l=e.guild_krieg_reward_info;if(p_l){var p_g=Config.guild_guildKriegSettle[p_l.cnfId];if(p_g){var b_s=b_p.getRewardDatas(p_g.reward);if(this.rewardList.array=b_s,this.levelTxt.text=e.level.toString(),p_g){this.assessTxt.text=p_g.score;var d_u=this.assessIcon.skin,b_e=d_u.lastIndexOf("/");d_u=d_u.substring(0,b_e+1)+p_g.score+".png",this.assessIcon.skin=d_u}this.timeTxt.text=Utils.$(("{1}"+j_x(2081)),this.MAX_TIME)}}},b_s.prototype.onRemove=function(){Sps(this,Laya,GuildKriegModel)},b_s.prototype.onTimer=function(){this._time--,this.timeTxt.text=Utils.$(("{1}"+j_x(2081)),this._time),this._time<=0&&b_s.close()},b_s.prototype.onItemRender=function(e,p_l){if(e){var p_g=e;p_g.isShowName=!1,p_g.setItemData(e.dataSource,ItemBoxDefine.MODULE_ITEM,!0)}},b_s.prototype.onAdded=function(){Qtk(this,Laya)},b_s.prototype.onClick=function(e){var p_l=e.target;p_l&&"exitBtn"==p_l.name&&b_s.close()},b_s.open=function(){Cyw(UIM,b_s)},b_s.close=function(){Our(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.MAX_TIME=10,p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g.rewardList.vScrollBarSkin="",p_g.rewardList.renderHandler=Laya.Handler.create(p_g,p_g.onItemRender,null,!1),p_g.rewardList.itemRender=e.ItemBox,p_g}e.GuildKriegWinPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.guild.dareCellUI,__extends(b_s,p_l),b_s.prototype.setData=function(e){var p_l=e;this._renderData=p_l;var p_g=Config.obj_npc[p_l.entryId];if(p_g){this.monsterNameTxt.text=p_g.name,this.dropList.array=e.weight,this.attackBtn.label=Utils.$((j_x("712_1835"))),this.attackBtn.mouseEnabled=!0,this.attackBtn.gray=!1,this._moduleItemVo||(this._moduleItemVo=new ModuleItemVO);var b_s=GuildKriegModel.instance,d_u=b_s.kriegVO,b_e=b_s.getKriegCfgByLv(p_l.monsterType,d_u.level);if(b_e){var d_m=GuildKriegModel.instance.getMonsterData(b_e.entryId,p_l.monsterType);if(d_m&&d_m.cd&&!b_s.checkMonsterCDExceed(d_m))return this.onTime(d_m),void Laya.timer.loop(1e3,this,this.onTime,[d_m])}}},b_s.prototype.onAdded=function(){Ykd(this,Laya)},b_s.prototype.onTime=function(e){var p_l=SyncTime.serverTime/1e3;if(e.cd>p_l){var p_g=e.cd-p_l,b_s=Utils.formatTimeStr2(p_g,!0);this.attackBtn.label=b_s,this.attackBtn.mouseEnabled=!1,this.attackBtn.gray=!0}else this.attackBtn.label=Utils.$((j_x("712_1835"))),Laya.timer.clearAll(this),this.attackBtn.mouseEnabled=!0,this.attackBtn.gray=!1},b_s.prototype.onSelect=function(p_l){var p_g=this.dropList.array[p_l],b_s=Config.guild_guildKriegCollect[p_g[0]];this._moduleItemVo.id=b_s.itemId,e.ItemTipsPanel.open(this._moduleItemVo)},b_s.prototype.onItemRender=function(e,p_l){if(e){var p_g=e.dataSource,b_s=e.getChildByName("dropIcon"),d_u=e.getChildByName("dropIconBG"),b_e=Config.guild_guildKriegCollect[p_g[0]],d_m=Config.CItem(b_e.itemId),d_w=Resource.ResUrl.getIconUrl(d_m.icon);b_s=Resource.ResManager.Instance.getImg(d_w,b_s),d_u.index=d_m.quality-1}},b_s.prototype.onClick=function(e){this._renderData&&GuildKriegLogic.instance.moveToNpc(this._renderData.entryId)},b_s.prototype.onRemove=function(){Eag(this,Laya)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.dropList.vScrollBarSkin="",e.dropList.renderHandler=Laya.Handler.create(e,e.onItemRender,null,!1),e.dropList.selectHandler=Laya.Handler.create(e,e.onSelect,null,!1),e}e.KriegDareCell=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.guild.ItemCellUI,__extends(b_s,p_l),b_s.prototype.setItemData=function(e){var p_l=e;this._renderData=p_l;var p_g=Config.CItem(p_l.itemId);this.iconBG.index=p_g.quality-1;var b_s=GuildKriegModel.instance,d_u=Resource.ResUrl.getIconUrl(p_g.icon);this.icon=Resource.ResManager.Instance.getImg(d_u,this.icon);var b_e=b_s.kriegVO.getItemVoById(p_l.id),d_m=b_e?b_e.amount:0;this.numTxt.text=d_m.toString(),this._num=d_m,this._moduleItemVo||(this._moduleItemVo=new ModuleItemVO),this._moduleItemVo.id=p_l.itemId;var d_w=b_s.checkIsBossMap();if(this.useBtn.visible=d_w,this.checkUseBtnState(),b_e&&this.checkItemCD(b_e),!b_s.getCellPos(p_l.itemId)){var f_t=this.localToGlobal(new Laya.Point);b_s.pushCellPos(p_l.itemId,f_t)}},b_s.prototype.checkItemCD=function(e,p_l){if(void 0===p_l&&(p_l=!1),p_l)this.removeCoolCD();else if(e&&0<e.remainTime){if(e.cdExceed)return void this.removeCoolCD();this.startCoolCD(e.runTime,e.cdDuration)}else if(e&&e.commonCDRuning){var p_g=e.getCommonCD();this.startCoolCD(p_g.runTime,p_g.cdDuration)}else this.removeCoolCD()},b_s.prototype.checkUseBtnState=function(){this.useBtn.visible&&(this.useBtn.gray=this._num<=0,this.useBtn.mouseEnabled=0<this._num,this.useBtn.on(Laya.Event.CLICK,this,this.onClick))},b_s.prototype.startCoolCD=function(p_l,p_g){this._coolCD||(this._coolCD=new e.CoolDownMCEx(this.icon.width*this.icon.scaleX,this.icon.height*this.icon.scaleY,e.CoolDownMCExShape.Rect),this.icon.parent.addChild(this._coolCD),this._coolCD.x=this.icon.x,this._coolCD.y=this.icon.y,this._coolCD.on("itemBox_cd_complete",this,this.cdComplete)),this._coolCD.startCD(p_l,p_g),this.useBtn.gray=!0,this.useBtn.mouseEnabled=!1},b_s.prototype.onClick=function(e){this._renderData&&GuildKriegModel.instance.reqUseItem(this._renderData.id,1)},b_s.prototype.cdComplete=function(){Kvi(this)},b_s.prototype.onAdded=function(){Ssk(this,Laya)},b_s.prototype.removeCoolCD=function(){this._coolCD&&(this._coolCD.destoryAll(),this._coolCD.parent&&this.removeChild(this._coolCD),this._coolCD=null,this.checkUseBtnState())},b_s.prototype.onImageClick=function(p_l){this._moduleItemVo&&e.ItemTipsPanel.open(this._moduleItemVo)},b_s.prototype.onRemove=function(){Cny(this,Laya)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.KriegItemCell=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.guild.LevelCellUI,__extends(b_s,p_l),b_s.prototype.setItemData=function(e,p_l){var p_g=e,b_s=this.levelIcon.skin,d_u=b_s.lastIndexOf("/");b_s=b_s.substring(0,d_u+1)+p_g.score+".png",this.levelIcon.skin=b_s,this.hpPerTxt.text=0<p_g.hp[0]?Utils.$("{1}%-{2}%",p_g.hp[0],p_g.hp[1]):"0%";var b_e=b_p.getRewardDatas(p_g.reward);this.itemList.array=b_e},b_s.prototype.onItemRender=function(e,p_l){if(e){var p_g=e;p_g.isShowName=!1,p_g.setItemData(e.dataSource,ItemBoxDefine.MODULE_ITEM,!0)}},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.itemList.vScrollBarSkin="",p_g.itemList.renderHandler=Laya.Handler.create(p_g,p_g.onItemRender,null,!1),p_g.itemList.itemRender=e.ItemBox,p_g}e.KriegLevelCell=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.guild.MemberCellUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){},b_s.prototype.onRemove=function(){},b_s.prototype.setItemData=function(e,p_l){var p_g;this.nameTxt.text=e.name,p_g=e.type==MemberStateType.OFF_LINE?Config.color[101].color:e.type==MemberStateType.OFF_ACTIVITY?Config.color[106].color:Config.color[102].color,this.stateTxt.color=p_g,this.stateTxt.text=this._module.getStateTip(e.type);var b_s=e.collects,d_u=b_s?b_s.length:0;b_s&&b_s.sort((function(e,p_l){return e.id-p_l.id}));for(var b_e=0;b_e<d_u;b_e++){var d_m=b_s[b_e];this["itemNum"+d_m.id%1e3].text=d_m.count.toString()}},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e._module=GuildKriegModel.instance,e}e.KriegMemberCell=p_g}(UI=UI||{});var p_w=function(){function e(){this.permission=0}return e.prototype.setMainInfo=function(e){this.mainInfo.props=[];var p_l=e.props;for(var p_g in p_l){var b_s=p_l[p_g];if(b_s){var d_u=this.getItemVoById(b_s.id);d_u||(d_u=new GuildKriegItemVo,this.mainInfo.props.push(d_u)),d_u.id=b_s.id,d_u.amount=b_s.count,d_u.cd=1e3*b_s.cd,d_u.cd&&d_u.setCDTime(SyncTime.serverTime,d_u.cd-SyncTime.serverTime)}}},Object.defineProperty(e.prototype,"mainInfo",{get:function(){return this._mainInfo||(this._mainInfo=new GuildKriegMainUIVO),this._mainInfo},enumerable:!0,configurable:!0}),e.prototype.getItemVoById=function(e){return Sfx(e,this)},e.prototype.updateItemInfo=function(e,p_l){if(void 0===p_l&&(p_l=!1),e)for(var p_g in e){var b_s=e[p_g];if(b_s){var d_u=b_s.id,b_e=this.getItemVoById(d_u);b_e||((b_e=new GuildKriegItemVo).id=b_s.id,this.mainInfo.props||(this.mainInfo.props=[]),this.mainInfo.props.push(b_e)),b_e.amount=b_s.count,p_l&&(b_e.cd=1e3*b_s.cd,b_e.cd?b_e.setCDTime(SyncTime.serverTime,b_e.cd-SyncTime.serverTime):b_e.setCDTime(0,0))}}},e.prototype.clear=function(){Kdk(this)},e}(),GuildKriegMainUIVO=function(){},GuildKriegItemVo=function(e){function p_l(){return null!==e&&e.apply(this,arguments)||this}return __extends(p_l,e),p_l}(ModuleItemVO);!function(e){var p_l,p_g=(p_l=ui.window.activity.bga.mSGymRank.MergeSerGymItemUI,__extends(b_s,p_l),b_s.prototype.updateView=function(e,p_l){var p_g=MergeSerGymModel.ins;this.list.array=b_p.getRewardDatas(e.reward),this.rankBox.visible=!1;var b_s=e.beginIdx==e.endIdx;this.noBox.visible=!b_s;var d_u=p_g._rankPlayer[p_l+1];if(this.nullTip.visible=!1,b_s)if(this.rankNum.skin="res/ui/activity/mergeSer/"+e.rankUrl,d_u){this.playerName.text=d_u.name;var b_e="res/ui/activity/mergeSer/head_pannel.png",d_m=Config.fashion_fashion[d_u.fashionAvatar];d_m&&d_m.avatar&&0<d_m.avatar.length&&(b_e=Resource.ResUrl.getIconUrl(d_m.avatar[0])),this.headIcon.skin=Resource.ResManager.getHeadUrl(d_u.entryId||1,d_u.headIcon||2),this.headImg.skin=b_e,this.rankBox.visible=!0}else this.nullTip.visible=!0;else this.rankImage.skin="res/ui/activity/mergeSer/"+e.rankUrl},b_s.prototype.renderItem=function(e,p_l){Kxe(e,p_l)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.list.itemRender=e.ItemBox,z_j.setList(p_g.list,p_g,p_g.renderItem),z_j.setListScroll(p_g.list,!1),p_g}e.MergeSerGymItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.mSGymRank.MergeSerGymRankUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){this.dataSource&&(ActivityModel.reqActivityRecord(ActivityTypeDefine.GS_arenaRushRank),this.on(Laya.Event.CLICK,this,this.onMouseClick),LED.on(l_r.MERGE_GYM_INFO,this,this.updateView),LED.on(l_r.MERGE_GYM_TAR_REW,this,this.updateTargetBtn),Laya.timer.loop(1e3,this,this.updateTime),this.rewardBtn.disabled=!0,this.noRewardTip.visible=!1)},b_s.prototype.updateView=function(){var e=MergeSerGymModel.ins,p_l=e.getMySelfRank();this.currentRank.text=p_l==MergeSerGymModel.invalidRank?(j_x("206_1067_1077")):p_l+"";var p_g=e.getRankCfg(ActivityTypeDefine.GS_arenaRushRank,RankType.SerGyRank);!p_g||p_g.length<=0||(this.renderFristBox(p_g[0],e._rankPlayer[0]),this.list.array=p_g.slice(1),this.updateTargetBtn(),this.updateTime())},b_s.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"targetBtn":e.MergeSerTargetPanel.open();break;case"rewardBtn":(j_x("1300_1917_396"))==this.countdownLab.text&&MergeSerGymModel.ins.reqRankReward();break;case"gymLab":e.gymkhanaPanel.open();break;case"rankLab":e.MergeSerRankShow.open()}},b_s.prototype.renderItem=function(e,p_l){Gem(e,p_l)},b_s.prototype.onRemove=function(){Wfq(this,Laya,LED,l_r)},b_s.open=function(e,p_l){void 0===p_l&&(p_l=0),(e=e||ActivityModel.instance.getActivityConfigVo(FuncDefine.serRankGymActivity))?UIM.open(b_s,["activity/mergeSer.atlas"],{index:p_l,data:e},!1):b_p.broadcastNotice((j_x("1796_1878_206")+j_x("155_1186")))},b_s.prototype.updateTargetBtn=function(){Syi(this,MergeSerGymModel)},b_s.prototype.updateTime=function(){var e=this.dataSource.data.subVo[0],p_l=MergeSerGymModel.ins,p_g=ActivityModel.instance.getLottertShowTime(e);this.timeLab.text=Utils.formatTimeStr4(e.start,!1)+"-"+Utils.formatTimeStr4(e.stop-p_g,!1);var b_s=p_l.rankRewardState();this.btnRed(this.rewardBtn,0==b_s),this.rewardBtn.visible=0==b_s||3==b_s,this.noRewardTip.visible=1==b_s,this.gotIamge.visible=2==b_s,this.rewardBtn.disabled=3==b_s,e.sulTime>p_g?(this.countdownLab.text=Utils.formatTimeStr(e.sulTime-p_g),this.countdownLab.color="#00802e"):(this.countdownLab.text=(j_x("1300_1917_396")),this.countdownLab.color="#e32828",Laya.timer.clearAll(this))},b_s.prototype.btnRed=function(e,p_l){void 0===p_l&&(p_l=!1);var p_g=e._childs[0];p_g&&(p_g.visible=p_l)},b_s.prototype.renderFristBox=function(e,p_l){if(e){this.ranklist.array=b_p.getRewardDatas(e.reward);var p_g=b_p.getRewardDatas(e.specialReward);if(this.specialItem.isShowName=!1,this.specialItem.setItemData(p_g[0]),this.rankBox.visible=!1,p_l){var b_s="res/ui/activity/mergeSer/head_pannel.png",d_u=Config.fashion_fashion[p_l.fashionAvatar];d_u&&d_u.avatar&&0<d_u.avatar.length&&(b_s=Resource.ResUrl.getIconUrl(d_u.avatar[0])),this.headIcon.skin=Resource.ResManager.getHeadUrl(p_l.entryId||1,p_l.headIcon||2),this.headImg.skin=b_s,this.rankBox.visible=!0,this.playerName.text=p_l.name,this.nullTip.visible=!1}else this.nullTip.visible=!0}},b_s.prototype.renderRankItem=function(e,p_l){Chv(e,p_l)},b_s.close=function(e){void 0===e&&(e=!1),UIM.close(b_s,e,["res/ui/marry/image_bg.jpg"])},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g.ranklist.itemRender=e.ItemBox,z_j.setList(p_g.ranklist,p_g,p_g.renderRankItem),z_j.setListScroll(p_g.ranklist,!1),p_g.list.itemRender=e.MergeSerGymItem,z_j.setListScroll(p_g.list),z_j.setList(p_g.list,p_g,p_g.renderItem),p_g}e.MergeSerGymPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.gymkhana.gymkhanaRankUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){LED.on(l_r.RANK_UPDATE,this,this.updateView),this.on(Laya.Event.CLICK,this,this.onClick),RankModel.instance.reqGetRank(RankType.GymkhanaRank,1)},b_s.prototype.updateView=function(){var e=Config.rank_ranklist[RankType.GymkhanaRank].maxCount,p_l=gymkhanaModel.instance.gymkhanaInfo;this.rankNum.text=p_l.selfRankNum<e?p_l.selfRankNum.toString():(j_x("206_1067_1077")),this.historyRankNum.text=0<gymkhanaModel.instance.historyMaxRank?gymkhanaModel.instance.historyMaxRank.toString():(j_x(814));var p_g=RankModel.instance.getRankDataByType(RankType.GymkhanaRank);p_l.selfRankNum<=0&&(this.rankNum.text=(j_x("206_1067_1077"))),p_g?(this.rankList.array=p_g.getItems(),this.rankNull.visible=!1):(this.rankList.array=[],this.rankNull.visible=!0)},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close()}},b_s.open=function(){Wpv(UIM,b_s)},b_s.prototype.RenderRankItem=function(e,p_l){var p_g=e.getChildByName("rankNum"),b_s=e.getChildByName("rankFight"),d_u=e.getChildByName("name"),b_e=e.getChildByName("guildName"),d_m=e.getChildByName("rankClip");e.dataSource&&(b_e.text=""==e.dataSource.getGuildName()?(j_x(814)):e.dataSource.getGuildName(),d_u.text=e.dataSource.getPlayName(),b_s.text=e.dataSource.getFight().toString(),e.dataSource.getRankIndex()<=3?(d_m.index=e.dataSource.getRankIndex()-1,p_g.visible=!1,d_m.visible=!0):(p_g.text=e.dataSource.getRankIndex().toString(),p_g.visible=!0,d_m.visible=!1))},b_s.prototype.SelectItem=function(e){var p_l=this.rankList.getCell(e);p_l&&p_l&&p_l.dataSource&&(p_l.dataSource.getPlayerId()<1e4?b_p.broadcastNotice((j_x("1964_949_68")+j_x("189_1019_1653")+j_x("383_403_1285")+j_x("2462_1919_5")+j_x("2450_281_1590"))):gymkhanaModel.instance.reqGymkhanaRoleInfo(p_l.dataSource.getPlayerId()))},b_s.prototype.onRemove=function(){Cdy(LED,l_r,this,Laya)},b_s.close=function(){Gbg(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.rankList.vScrollBarSkin="",e.rankList.scrollBar.elasticDistance=200,e.rankList.scrollBar.elasticBackTime=500,e.rankList.renderHandler=Laya.Handler.create(e,e.RenderRankItem,null,!1),e.rankList.selectHandler=Laya.Handler.create(e,e.SelectItem,null,!1),e.rankList.selectEnable=!0,e}e.gymkhanaRankPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=e.gymkhanaRankPanel,__extends(b_s,p_l),b_s.prototype.onAdded=function(){LED.on(l_r.RANK_UPDATE,this,this.updateView),this.on(Laya.Event.CLICK,this,this.onClick);var e=ActivityModel.instance.getActivityConfigVo(FuncDefine.serRankGymActivity),p_l=ActivityModel.instance.getLottertShowTime(e.subVo[0]);this.rankType=RankType.GymkhanaRank,e&&e.subVo[0].sulTime<=p_l&&(this.rankType=RankType.SerGyRank),RankModel.instance.reqGetRank(this.rankType,1)},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close()}},b_s.prototype.onRemove=function(){Qnq(LED,l_r,this,Laya)},b_s.open=function(){Saw(UIM,b_s)},b_s.prototype.updateView=function(){Config.rank_ranklist[this.rankType].maxCount;var e=MergeSerGymModel.ins.getMySelfRank();this.rankNum.text=e!=MergeSerGymModel.invalidRank?e+"":(j_x("206_1067_1077"));var p_l=MergeSerGymModel.ins.getMySelfHisRank();this.historyRankNum.text=p_l!=MergeSerGymModel.invalidRank?p_l.toString():(j_x(814));var p_g=RankModel.instance.getRankDataByType(this.rankType);p_g?(this.rankList.array=p_g.getItems(),this.rankNull.visible=!1):(this.rankList.array=[],this.rankNull.visible=!0)},b_s.close=function(){Wgh(UIM,b_s)},b_s);function b_s(){return p_l.call(this)||this}e.MergeSerRankShow=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.mSGymRank.MergeSerTargetItemUI,__extends(b_s,p_l),b_s.prototype.updateView=function(){var e=MergeSerGymModel.ins,p_l=this.dataSource;this.list.array=b_p.getRewardDatas(p_l.rewards),this.gotImage.visible=e.isTargetRewardById(p_l.index),this.rewardBtn.visible=!this.gotImage.visible,this.titleRank.text=(j_x("2434_562_2235")+j_x(83))+p_l.condition+(j_x(1511));var p_g=e.getMySelfHisRank();this.redPoint.visible=p_l.condition>=p_g&&this.rewardBtn.visible,this.rewardBtn.disabled=p_l.condition<p_g},b_s.prototype.renderItem=function(e,p_l){Wgz(e,p_l)},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"rewardBtn":this.dataSource&&MergeSerGymModel.ins.reqAimReward(this.dataSource.index)}},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.list.itemRender=e.ItemBox,z_j.setList(p_g.list,p_g,p_g.renderItem),p_g.on(Laya.Event.CLICK,p_g,p_g.onMouseClick),p_g}e.MergeSerTargetItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.mSGymRank.MergeSerTargetUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){var e=MergeSerGymModel.ins.getMySelfRank();this.rankNum.text=e!=MergeSerGymModel.invalidRank?e+"":(j_x("206_1067_1077")),this.on(Laya.Event.CLICK,this,this.onMouseClick),LED.on(l_r.MERGE_GYM_TAR_REW,this,this.updateView),this.updateView()},b_s.prototype.onRemove=function(){Gmg(LED,l_r,this,Laya)},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close()}},b_s.prototype.updateView=function(){this.list.array=this.cfgs.sort((function(e,p_l){var p_g=MergeSerGymModel.ins;return p_g.targetState(e)-p_g.targetState(p_l)}))},b_s.open=function(){Yjt(UIM,b_s)},b_s.prototype.renderItem=function(e,p_l){Mow(e,p_l)},b_s.close=function(){Syw(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;for(var b_s in p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g.list.itemRender=e.MergeSerTargetItem,z_j.setListScroll(p_g.list),z_j.setList(p_g.list,p_g,p_g.renderItem),p_g.cfgs=[],Config.activity_mergeSvr_mergeSvrAim)p_g.cfgs.push(Config.activity_mergeSvr_mergeSvrAim[b_s]);return p_g}e.MergeSerTargetPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.month.ChristmasTarget_cellUI,__extends(b_s,p_l),b_s.prototype.setData=function(e,p_l){var p_g,b_s=e.getRewardStatus,d_u=e.id,b_e=Config.activity_festiReward_festiTarget[d_u].condition[0];p_g=1==b_s&&e.currProgress>=e.totalProgress?(this.redpoint.visible=!0,this.rewardBtn.disabled=!1,this.rewardBtn.label=(j_x(1174)+" "+j_x(2111)),this.rewardBtn.visible=!0,!(this.lingquImg.visible=!1)):2==b_s?(this.redpoint.visible=!1,this.rewardBtn.disabled=!0,this.rewardBtn.label=(j_x("1300_1174_2111")),this.rewardBtn.visible=!1,!(this.lingquImg.visible=!0)):(this.redpoint.visible=!1,this.rewardBtn.disabled=!1,this.rewardBtn.label=(j_x(711)+" "+j_x(2417)),this.rewardBtn.visible=!0,this.lingquImg.visible=!1);var d_m=b_p.getRewardDatas(e.reward);this.rewardList.array=d_m,this.titleTxt.text=e.taskDec,this.barText.text="("+e.currProgress+"/"+e.totalProgress+")",this.addPointText.text=(j_x("514_2224")+"+")+e.point,this.barText.color=e.currProgress>=e.totalProgress?"#00802e":"#FF0000",this.rewardBtn.dataSource={id:d_u,status:p_g,targetType:b_e},4<e.reward.length&&(this.rewardList.hScrollBarSkin="",this.rewardList.mouseEnabled=!0)},b_s.prototype.updateItem=function(e,p_l){e&&(e.isShowName=!1,e.isShowNum=!0,e.isShowTick=!1,e.setItemData(e.dataSource,ItemBoxDefine.MODULE_ITEM))},b_s.prototype.onClick=function(p_l){if(this.dataSource){this.dataSource.type;var p_g=p_l.target;if(p_g){var b_s=p_g.dataSource;b_s&&(b_s.status?MonthActivityModel.ins.reqChristmasTargetTaskReward(b_s.id):"goldRecharge"==b_s.targetType?(e.MonthMainPanel.close(),e.RechargePanel.open()):"goldConsume"==b_s.targetType?(e.MonthMainPanel.close(),e.ShopPanel.open(2)):"dailyActiveness"==b_s.targetType&&(e.MonthMainPanel.close(),e.TargetPanel.open()))}}},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.rewardBtn.on(Laya.Event.CLICK,p_g,p_g.onClick),p_g.rewardList.itemRender=e.ItemBox,p_g.rewardList.renderHandler=Laya.Handler.create(p_g,p_g.updateItem,null,!1),p_g}e.ChristmasTargetCell=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.month.ChristmasTargetPanelUI,__extends(b_s,p_l),b_s.prototype.init=function(){Aaz(this,Laya,e,z_j)},b_s.prototype.renderList=function(e,p_l){if(e){if(!this.dataSource)return;e.setData(e.dataSource,this.dataSource.vo)}},b_s.prototype.onRemove=function(){Eri(LED,l_r,this)},b_s.prototype.onAdded=function(){var e=this.dataSource;e&&(ActivityModel.reqActivityRecord(e.type),LED.on(l_r.CHRISTMASTARGET_UPDATE_INFO,this,this.updateView),this.updateView())},b_s.prototype.updateView=function(){Ggi(Config,MonthActivityModel,this)},b_s.AcumRecharge=3,b_s.Active=1,b_s.AcumCost=2,b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.ChristmasTargetPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.SweepAwardPageUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Ase(LED,l_r,this,Laya)},b_s.prototype.onCLlick=function(e){Ipg(e,MonthActivityModel)},b_s.prototype.updateTaskData=function(){this.reminderlabel.text="";var e=this.dataSource[0];if(this.dataSource[1],e){var p_l=MonthActivityModel.ins.getLivinessDataById(e);if(p_l&&p_l.reward){switch(this.awardlist.array=b_p.getRewardDatas(p_l.reward),MonthActivityModel.ins.integralProgress,MonthActivityModel.ins.getFestivaTarRewardStatus(e)){case 1:this.getBtn.label=(j_x("1174_2111")),this.getBtn.disabled=!1,this.redpoint.visible=!0;break;case 2:this.getBtn.label=(j_x("1174_2111")),this.getBtn.disabled=!0,this.redpoint.visible=!1;break;case 3:this.getBtn.label=(j_x("1300_1174_2111")),this.getBtn.disabled=!0,this.redpoint.visible=!1}this.getBtn.on(Laya.Event.CLICK,this,this.onCLlick,[e]),this.awardlist.width=324}this.awardlist.array.length<=3?this.awardlist.x=(this.bg.width+2*this.bg.x)/2-(100*this.awardlist.array.length+(this.awardlist.length-1)*this.awardlist.spaceX)/2:this.awardlist.x=140}},b_s.prototype.updateData=function(e,p_l){e.dataSource&&(e.isShowName=!1,e.isShowNum=!0,e.setItemData(e.dataSource))},b_s.prototype.onCilickClose=function(){Icp(this)},b_s.prototype.onRemoved=function(){Mnh(LED,l_r,this)},b_s.open=function(e,p_l){Arm(e,p_l,UIM,b_s)},b_s.prototype.close=function(){Oew(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),z_j.setList(e.awardlist,e,e.updateData),z_j.setListScroll(e.awardlist,!1),e}e.ChristmasTargetReward=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.month.monthConRechargePanelUI,__extends(b_s,p_l),b_s.prototype.init=function(){Uvn(this,Laya,e,z_j)},b_s.prototype.onAdded=function(){var e=this.dataSource;e&&(ActivityModel.reqActivityRecord(e.type),LED.on(l_r.MONTH_ACTIVE_INFO,this,this.updateView))},b_s.prototype.updateView=function(){Czl(MonthActivityModel,this)},b_s.prototype.newcompareFun=function(e,p_l){return e.state===p_l.state?e.days-p_l.days:e.state-p_l.state},b_s.prototype.onRemove=function(){Ywv(LED,l_r,this)},b_s.prototype.renderList=function(e,p_l){if(e){if(!this.dataSource)return;e.setData(e.dataSource,this.dataSource.vo)}},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.MonthAcitiveGiftPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.month.monthConRecharge_cellUI,__extends(b_s,p_l),b_s.prototype.setData=function(e,p_l){var p_g,b_s=e.state,d_u=e.days;p_g=0==b_s&&e.totalActiveNumber>=e.money?(this.redpoint.visible=!0,this.rewardBtn.disabled=!1,this.rewardBtn.label=(j_x(1174)+" "+j_x(2111)),!0):1==b_s?(this.redpoint.visible=!1,this.rewardBtn.disabled=!0,!(this.rewardBtn.label=(j_x("1300_1174_2111")))):(this.redpoint.visible=!1,this.rewardBtn.disabled=!1,!(this.rewardBtn.label=(j_x("437_223_1796")+j_x("1076_1035")))),this.rewardList.array=e.items,this.titleTxt.text=e.giftName,this.rewardBtn.dataSource={id:d_u,status:p_g},4<e.items.length&&(this.rewardList.hScrollBarSkin="",this.rewardList.mouseEnabled=!0)},b_s.prototype.updateItem=function(e,p_l){e&&(e.isShowName=!1,e.isShowNum=!0,e.isShowTick=!1,e.setItemData(e.dataSource,ItemBoxDefine.MODULE_ITEM))},b_s.prototype.onClick=function(p_l){if(this.dataSource){this.dataSource.type;var p_g=p_l.target;if(p_g){var b_s=p_g.dataSource;b_s&&(b_s.status?MonthActivityModel.ins.reqGetActiveGift(b_s.id):(e.MonthMainPanel.close(),e.TargetPanel.open()))}}},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.rewardBtn.on(Laya.Event.CLICK,p_g,p_g.onClick),p_g.rewardList.itemRender=e.ItemBox,p_g.rewardList.renderHandler=Laya.Handler.create(p_g,p_g.updateItem,null,!1),p_g}e.MonthActiveGiftCell=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.month.monthConRecharge_cellUI,__extends(b_s,p_l),b_s.prototype.setData=function(e,p_l){var p_g,b_s=e.state,d_u=e.days;p_g=0==b_s&&e.conDays>=e.days?(this.redpoint.visible=!0,this.rewardBtn.disabled=!1,this.rewardBtn.label=(j_x(1174)+" "+j_x(2111)),!0):1==b_s?(this.redpoint.visible=!1,this.rewardBtn.disabled=!0,!(this.rewardBtn.label=(j_x("1300_1174_2111")))):(this.redpoint.visible=!1,this.rewardBtn.disabled=!1,!(this.rewardBtn.label=(j_x("711_2417_2258")+j_x(2376)))),this.rewardList.array=e.items,this.titleTxt.text=e.giftName,this.rewardBtn.dataSource={id:d_u,status:p_g}},b_s.prototype.updateItem=function(e,p_l){e&&(e.isShowName=!1,e.isShowNum=!0,e.isShowTick=!1,e.setItemData(e.dataSource,ItemBoxDefine.MODULE_ITEM))},b_s.prototype.onClick=function(p_l){if(this.dataSource){this.dataSource.type;var p_g=p_l.target;if(p_g){var b_s=p_g.dataSource;b_s&&(b_s.status?MonthActivityModel.ins.reqGetRecGift(b_s.id):(e.MonthMainPanel.close(),e.RechargePanel.open()))}}},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.rewardBtn.on(Laya.Event.CLICK,p_g,p_g.onClick),p_g.rewardList.itemRender=e.ItemBox,p_g.rewardList.renderHandler=Laya.Handler.create(p_g,p_g.updateItem,null,!1),p_g}e.MonthConRechargeCell=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.month.monthConRechargePanelUI,__extends(b_s,p_l),b_s.prototype.init=function(){Kve(this,Laya,e,z_j)},b_s.prototype.onAdded=function(){var e=this.dataSource;e&&(ActivityModel.reqActivityRecord(e.type),LED.on(l_r.MONTH_CONRECHARGE_INFO,this,this.updateView))},b_s.prototype.onRemove=function(){Kpf(LED,l_r,this)},b_s.prototype.newcompareFun=function(e,p_l){return e.state===p_l.state?e.days-p_l.days:e.state-p_l.state},b_s.prototype.updateView=function(){Wwv(MonthActivityModel,this)},b_s.prototype.renderList=function(e,p_l){if(e){if(!this.dataSource)return;e.setData(e.dataSource,this.dataSource.vo)}},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.MonthConRechargePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.month.monthGift_cellUI,__extends(b_s,p_l),b_s.prototype.init=function(){Cpv(this,e,z_j,Laya)},b_s.prototype.onClickRecBtn=function(){var e=this.dataSource;e&&(e.isCanReward?MonthActivityModel.ins.reqGetGift(e.productId):e.isCanBuy&&(e.money,MonthActivityModel.ins.reqBuyGift(e.productId,e.money)))},b_s.prototype.updateCell=function(){var e=this.dataSource;if(this.dataSource){var p_l,p_g=e.money.toString().length;this.numSprite.x=this.numPoint.x+Math.max(0,27*(3-p_g)/2),b_p.getNumSp(NumType.FESTIVAL_NUM,e.money,this.numSprite,-10),this.list.array=e.items,this.redPoint.visible=e.isCanReward,this.agioLabel.text=e.agio+(j_x(1786)),this.limitLabel.color=3==e.isState?"#e32828":"#00802e",this.limitLabel.text=0<e.limit?Utils.$((j_x("2128_1355")+"{1}/{2}"),e.buy_count,e.limit):"",this.rechargeBtn.disabled=!1,this.originalNum.text=Utils.$(("("+j_x("2153_603")+"{1}"+j_x(1263)+")"),Math.floor(e.money/e.agio*100)),p_l=e.isCanReward?(j_x("1163_1174_2111")):e.isCanBuy?(j_x("1355_2420")):(this.rechargeBtn.disabled=!0,(j_x("1300_1008_1482"))),this.rechargeBtn.label=p_l,4<e.items.length&&(this.list.hScrollBarSkin="",this.list.mouseEnabled=!0)}},b_s.prototype.setIndex=function(e){Evh(e,this)},b_s.prototype.renderList=function(e,p_l){e&&e.dataSource&&(e.isShowName=!1,e.setItemData(e.dataSource))},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e.numPoint=new Laya.Point(e.numSprite.x,e.numSprite.y),e}e.MonthGiftCell=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.month.monthGiftPanelUI,__extends(b_s,p_l),b_s.prototype.init=function(){Ixk(this,Laya,e,z_j)},b_s.prototype.updateView=function(){Wci(this,MonthActivityModel)},b_s.prototype.onRemove=function(){Msa(LED,l_r,this)},b_s.prototype.onAdded=function(){var e=this.dataSource;e&&(ActivityModel.reqActivityRecord(e.type),LED.on(l_r.MONTH_GIFT_INFO,this,this.updateView))},b_s.prototype.renderList=function(e,p_l){e&&e.setIndex(p_l),e.updateCell()},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.MonthGiftPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.month.monthUI,__extends(b_s,p_l),b_s.prototype.sortActivity=function(){for(var p_l,p_g=!(this.activityPos=[e.MonthTab.ChristmasTarget,e.MonthTab.ActiveGift,e.MonthTab.ConRecharge,e.MonthTab.RechargeGift,e.MonthTab.TreasureHunt,e.MonthTab.RedEnvelopes,e.MonthTab.SpringFestival]),b_s=0,d_u=0,b_e=this.dataSource.data.subVo;d_u<b_e.length;d_u++){var d_m=b_e[d_u],d_w=-1;switch(d_m.type){case ActivityTypeDefine.BG_continueRecharge:d_w=e.MonthTab.ConRecharge,p_l=e.MonthConRechargePanel,b_s=2;break;case ActivityTypeDefine.BG_activenessGift:d_w=e.MonthTab.ActiveGift,p_l=e.MonthAcitiveGiftPanel,b_s=1;break;case ActivityTypeDefine.BG_turntableTreasure:d_w=e.MonthTab.TreasureHunt,p_l=e.MonthTreasureHuntPanel,b_s=4,p_g=!0;break;case ActivityTypeDefine.BG_discountGift:d_w=e.MonthTab.RechargeGift,p_l=e.MonthGiftPanel,b_s=3;break;case ActivityTypeDefine.BG_redEnvelops:d_w=e.MonthTab.RedEnvelopes,p_l=e.MonthRedPacketPanel,b_s=5;case ActivityTypeDefine.BG_festivalTarget:d_w=e.MonthTab.ChristmasTarget,p_l=e.ChristmasTargetPanel,b_s=0;break;case ActivityTypeDefine.BG_changeItem:d_w=e.MonthTab.SpringFestival,p_l=e.MonthSpringFestival,b_s=6}if(0<=d_w)if(this.activityVOs[d_w]){var f_t=this.activityVOs[d_w];f_t.vo=d_m,f_t.type=p_l,f_t.needComsumRed=p_g,f_t.clipIndex=b_s}else this.activityVOs[d_w]={vo:d_m,type:p_l,panel:null,needComsumRed:p_g,clipIndex:b_s}}for(var v_z=[],d_h=0;d_h<this.activityPos.length;d_h++)this.activityVOs[this.activityPos[d_h]]&&v_z.push(this.activityPos[d_h]);this.activityPos=v_z},b_s.prototype.updateChristmasTarget=function(e){if(void 0===e&&(e=!0),e){this.scheduleBox.visible=!0,this.timeLabelBox.visible=!1;var p_l=MonthActivityModel.ins.LivenessInfo;if(p_l&&0<p_l.length){this.schedule1_txt.text=Utils.$(("{1}"+j_x("514_2224")),p_l[0].point),this.schedule2_txt.text=Utils.$(("{1}"+j_x("514_2224")),p_l[1].point),this.schedule3_txt.text=Utils.$(("{1}"+j_x("514_2224")),p_l[2].point),this.progress.value=MonthActivityModel.ins.integralProgress/100,this.progress_txt.text=MonthActivityModel.ins.integralProgress+"/100",this.updateChristmasTimeText();var p_g=MonthActivityModel.ins.getFestivaTarRewardStatus(p_l[0].id),b_s=MonthActivityModel.ins.getFestivaTarRewardStatus(p_l[1].id),d_u=MonthActivityModel.ins.getFestivaTarRewardStatus(p_l[2].id);this.schedule1_img.visible=3==p_g,this.schedule2_img.visible=3==b_s,this.schedule3_img.visible=3==d_u,this.schedule1_red.visible=MonthActivityModel.ins.getChristLivenessRedPoint(p_l[0].id,0),this.schedule2_red.visible=MonthActivityModel.ins.getChristLivenessRedPoint(p_l[1].id,1),this.schedule3_red.visible=MonthActivityModel.ins.getChristLivenessRedPoint(p_l[2].id,2),this.setChrimasLinessItemData(p_l[0].id,this.icon1_img),this.setChrimasLinessItemData(p_l[1].id,this.icon2_img),this.setChrimasLinessItemData(p_l[2].id,this.icon3_img)}else b_p.broadcastNotice((j_x("2142_1919_1946")+j_x(811)+"!"))}else this.scheduleBox.visible=!1,this.timeLabelBox.visible=!0},b_s.prototype.onRemove=function(){Otp(this,Laya,LED,l_r,FuncDefine)},b_s.prototype.removeChildPanel=function(e){e&&e.parent&&e.removeSelf()},b_s.prototype.updateConsumeRed=function(){for(var e in this.activityPos)this.activityVOs[this.activityPos[e]].needComsumRed&&this.updatePoint(parseInt(e),this.activityPos[e])},b_s.prototype.updateRechargeInfo=function(){Iju(MonthActivityModel,this,j_x)},b_s.prototype.updateChristmasTimeText=function(){if(this.dataSource){var e,p_l=this.dataSource.data.subVo,p_g=0;for(var b_s in p_l)p_l[b_s].type==ActivityTypeDefine.BG_festivalTarget&&(p_l[b_s].start,p_g=p_l[b_s].stop);Laya.timer.clear(this,this.updateChristmasTimeText),0<(e=p_g-SyncTime.serverTime/1e3)?(Laya.timer.once(1e3,this,this.updateChristmasTimeText),this.christmasTarTime_label.text=Utils.formatTimeStr2(Math.floor(e),!0)):this.christmasTarTime_label.text=(j_x("1796_1878_1300")+j_x("396_2426")),this.christmasTarTime_label.visible=!0}},b_s.prototype.renderItem=function(e,p_l){var p_g=e.dataSource,b_s=this.activityVOs[p_g];if(b_s){e.getChildByName("rp").visible=MonthActivityModel.ins.monthRedPoint(b_s.vo);var d_u=e.getChildByName("iconSp"),b_e="res/assets/systemOpen/yuemoActDoc_0"+(p_g+1)+".png";d_u=Resource.ResManager.Instance.getImg(b_e,d_u,106,106);var d_m=e.getChildByName("btn");Resource.ResManager.Instance.getImg(b_e,d_m,106,106)}},b_s.prototype.helpBtnUpdat=function(e){e.vo.type==ActivityTypeDefine.BG_changeItem?(this.helpBtn.visible=!0,this.helpBtn.on(Laya.Event.CLICK,this,this.onClickHelpBtn)):this.helpBtn.off(Laya.Event.CLICK,this,this.onClickHelpBtn)},b_s.prototype.updateTime=function(){var e=this.activityVOs[this.currentOpen];e&&e.vo.type!=ActivityTypeDefine.BG_loginActivity&&(this.timeLabel.text=MonthActivityModel.ins.getMonthTimeByVo(e.vo),this.time.text=MonthActivityModel.ins.getMonthTimeByVo(e.vo))},b_s.prototype.setCellSelect=function(e,p_l){Cyr(e,p_l,this)},b_s.prototype.addPanelByIndex=function(p_l){var p_g=this.activityVOs[p_l];if(!p_g)return null;var b_s=p_g.panel;return b_s||(b_s=new p_g.type,p_g.panel=b_s),b_s.dataSource=p_g.vo,4==p_l?this.panelContent_xunbao.addChild(b_s):p_l==e.MonthTab.ChristmasTarget?this.ChrismaterpanelContent.addChild(b_s):this.panelContent.addChild(b_s),b_s.visible=!0,b_s},b_s.prototype.onTabSelect=function(e){if(-1!=e){var p_l=this.tabList.getCell(e),p_g=this.activityPos[e];if(p_l&&null!=p_g){var b_s=this.activityVOs[p_g];if(b_s){var d_u=this.activityVOs[this.currentOpen];d_u&&this.hideShowChildPanel(d_u.panel,!1),b_s&&b_s.panel&&b_s.panel.parent?(b_s.panel,this.hideShowChildPanel(b_s.panel,!0)):this.addPanelByIndex(p_g),this.setCellSelect(this.currentIndex,!1),this.setCellSelect(e,!0),this.currentIndex=e,this.currentOpen=p_g,this.timeLabel.text=MonthActivityModel.ins.getMonthTimeByVo(b_s.vo),this.bg.skin=this.monthImage(b_s.vo),this.activityLabel.text=b_s.vo.dec,MonthActivityModel.ins._MonthfristRed=!1,this.activeBox.visible=b_s.vo.type==ActivityTypeDefine.BG_activenessGift,this.rechargeBox.visible=b_s.vo.type==ActivityTypeDefine.BG_continueRecharge,this.timeLabel.visible=b_s.vo.type!=ActivityTypeDefine.BG_turntableTreasure&&b_s.vo.type!=ActivityTypeDefine.BG_redEnvelops,this.activityLabel.visible=b_s.vo.type!=ActivityTypeDefine.BG_turntableTreasure&&b_s.vo.type!=ActivityTypeDefine.BG_redEnvelops,this.xunbao.visible=b_s.vo.type==ActivityTypeDefine.BG_turntableTreasure,this.activity.text=b_s.vo.dec,this.time.text=MonthActivityModel.ins.getMonthTimeByVo(b_s.vo),this.tishiImg.visible=b_s.vo.type==ActivityTypeDefine.BG_turntableTreasure,this.activityTimeLabel.visible=b_s.vo.type!=ActivityTypeDefine.BG_redEnvelops,this.activityDesLabel.visible=b_s.vo.type!=ActivityTypeDefine.BG_redEnvelops,this.blackBg.visible=b_s.vo.type!=ActivityTypeDefine.BG_redEnvelops,this.helpBtn.visible=!1,this.helpBtnUpdat(b_s),b_s.vo.type!=ActivityTypeDefine.BG_festivalTarget?this.updateChristmasTarget(!1):this.updateChristmasTarget(!0)}}}},b_s.prototype.hideShowChildPanel=function(e,p_l){e&&e.parent&&(e.visible=p_l)},b_s.prototype.updatePoint=function(e,p_l){void 0===e&&(e=-1),void 0===p_l&&(p_l=-1),e=-1==e?this.currentIndex:e,p_l=-1==p_l?this.currentOpen:p_l;var p_g=this.activityVOs[p_l];if(p_g){var b_s=this.tabList.getCell(e);b_s&&(b_s.getChildByName("rp").visible=MonthActivityModel.ins.monthRedPoint(p_g.vo))}},b_s.prototype.monthImage=function(e){if(!e)return"";var p_l="";return e.type==ActivityTypeDefine.BG_activenessGift?p_l="res/ui/activity/festivals/yuemo_huoyuedu.png":e.type==ActivityTypeDefine.BG_continueRecharge?p_l="res/ui/activity/festivals/yuemo_recharge.png":e.type==ActivityTypeDefine.BG_discountGift?p_l="res/ui/activity/festivals/yuemo_zhekou.png":e.type==ActivityTypeDefine.BG_redEnvelops?p_l="res/ui/activity/festivals/yuemo_hongbaohaoli.png":e.type==ActivityTypeDefine.BG_changeItem&&(p_l="res/ui/activity/festivals/yuemo_duihuanbg.png"),p_l},b_s.open=function(e,p_l){void 0===p_l&&(p_l=0),(e=e||ActivityModel.instance.getActivityConfigVo(FuncDefine.MonthActivity))?UIM.open(b_s,["activity/festivals.atlas","activity/turnTable.atlas"],{index:p_l,data:e},!1):b_p.broadcastNotice((j_x("1796_1878_206")+j_x("155_1186")))},b_s.close=function(e){void 0===e&&(e=!1),UIM.close(b_s,e,["res/ui/activity/festivals/yuemo_huoyuedu.png","res/ui/activity/festivals/yuemo_recharge.png","res/ui/activity/festivals/yuemo_zhekou.png","res/ui/activity/festivals/yuemo_xunbao.png"])},b_s.prototype.onMouseClick=function(p_l){var p_g=p_l.target,d_u=MonthActivityModel.ins.LivenessInfo;switch(p_g.name){case"closeBtn":case"backBtn":b_s.close();break;case"schedule1_btn":d_u&&1<d_u.length&&d_u[0]&&e.ChristmasTargetReward.open(d_u[0].id,1);break;case"schedule2_btn":d_u&&1<d_u.length&&d_u[1]&&e.ChristmasTargetReward.open(d_u[1].id,2);break;case"schedule3_btn":d_u&&1<d_u.length&&d_u[2]&&e.ChristmasTargetReward.open(d_u[2].id,3)}},b_s.prototype.onAdded=function(){if(this.dataSource){var e=this.dataSource.index||0;this.sortActivity(),this.on(Laya.Event.CLICK,this,this.onMouseClick),this.tabList.array=this.activityPos,this.tabList.selectedIndex=e,Laya.timer.loop(1e3,this,this.updateTime),LED.on(l_r.ITEM_ADD,this,this.updateConsumeRed),LED.on(l_r.ITEM_REMOVE,this,this.updateConsumeRed),LED.on(l_r.ITEM_AMOUNT_CHANGE,this,this.updateConsumeRed),LED.on(l_r.MONTH_CONRECHARGE_INFO,this,this.updatePoint),LED.on(l_r.MONTH_ACTIVE_INFO,this,this.updateActivenessInfo),LED.on(l_r.MONTH_ACTIVE_INFO,this,this.updatePoint),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.MonthActivity),LED.on(l_r.MONTH_CONRECHARGE_INFO,this,this.updateRechargeInfo),LED.on(l_r.MONTH_GIFT_INFO,this,this.updatePoint),LED.on(l_r.CHRISTMASTARGET_UPDATE_INFO,this,this.updateChristmasTarget),LED.on(l_r.CHRISTMASTARGET_UPDATE_INFO,this,this.updatePoint),LED.on(l_r.CHANGE_ITEM,this,this.updatePoint),this.tabList.scrollTo(this.tabList.selectedIndex),this.updateActivenessInfo()}},b_s.prototype.updateActivenessInfo=function(){Irt(MonthActivityModel,this)},b_s.prototype.onClickHelpBtn=function(){Sex(console,j_x,e)},b_s.prototype.setChrimasLinessItemData=function(e,p_l){var p_g=Config.activity_festiReward_festiReward[e];p_g&&p_g.showItem?p_l.skin=Resource.ResUrl.getIconUrl(p_g.showItem):console.log((j_x("1971_1896_1761")+j_x("415_281_1590")))},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),z_j.setList(p_g.tabList,p_g,p_g.renderItem,p_g.onTabSelect),p_g.activityPos=[e.MonthTab.ChristmasTarget,e.MonthTab.ActiveGift,e.MonthTab.ConRecharge,e.MonthTab.RechargeGift,e.MonthTab.TreasureHunt,e.MonthTab.RedEnvelopes,e.MonthTab.SpringFestival],p_g.currentIndex=-1,p_g.activityVOs={},p_g.currentOpen=-1,p_g}e.MonthMainPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.month.monthRedPacketUI,__extends(b_s,p_l),b_s.prototype.init=function(){Uzo(this,Laya)},b_s.prototype.onAdded=function(){Cep(this)},b_s.prototype.onRemove=function(){},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.MonthRedPacketPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.month.monthConRechargePanelUI,__extends(b_s,p_l),b_s.prototype.init=function(){Qqw(this,Laya,e,z_j)},b_s.prototype.onAdded=function(){var e=this.dataSource;e&&(ActivityModel.reqActivityRecord(e.type),LED.on(l_r.CHANGE_ITEM_INFO,this,this.updateView),LED.on(l_r.ITEM_ADD,this,this.updateView),LED.on(l_r.CHANGE_ITEM,this,this.updateView))},b_s.prototype.updateView=function(){var e=MonthActivityModel.ins.changeItemInfo;this.list.array=e.sort((function(e,p_l){return e.id-p_l.id}))},b_s.prototype.onRemove=function(){Wnv(LED,l_r,this)},b_s.prototype.renderList=function(e,p_l){if(e){if(!this.dataSource)return;e.setData(this.dataSource.vo)}},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.MonthSpringFestival=p_g;var d_u,b_e=(d_u=ui.window.activity.bga.month.SpringFestivalHelpTipUI,__extends(d_m,d_u),d_m.prototype.onCloseBtnClick=function(){Mbi(d_m)},d_m.prototype.onRemove=function(){Iyr(this,Laya)},d_m.open=function(){Uwb(UIM,d_m)},d_m.prototype.onAdded=function(){Ahr(this,Laya)},d_m.close=function(){Qln(UIM,d_m)},d_m);function d_m(){var e=d_u.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.SpringFestivalHelpTip=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.month.SpringFestival_cellUI,__extends(b_s,p_l),b_s.prototype.setData=function(e){var p_l=this.dataSource;this.titleTxt.text=p_l.surCount+"/"+p_l.count,this.titleTxt2.text=this._strGift[p_l.isLimit],this.rewardBtn.disabled=!1,0<p_l.surCount?this.titleTxt.color="#008931":(this.titleTxt.color="#ef2b2b",this.rewardBtn.disabled=!0),this.goodsItem.isShowName=!1;var p_g=b_p.getRewardDatas([[p_l.changeId,p_l.changeNum]]);for(var b_s in this.goodsItem.setItemData(p_g[0]),this._itemArray.length=0,p_l.condition){var d_u=p_l.condition[b_s];this._itemArray.push([d_u.id,d_u.num])}for(var b_e=b_p.getRewardDatas(this._itemArray);b_e.length<4;)b_e.push(null);this.goodsList.array=b_e,this.redPoint.visible=MonthActivityModel.ins.changeItemBtnRed(this._itemArray,p_l.surCount)},b_s.prototype.updateItem=function(e,p_l){if(e){var p_g=e.dataSource,b_s=e.getChildByName("goodsItem"),d_u=e.getChildByName("goodsNum");if(!p_g)return b_s.setItemData(p_g),void(d_u.text="");b_s.isShowName=!1,b_s.isShowNum=!1,b_s.setItemData(p_g);var b_e=BagModel.instance.getItemCountByItemID(p_g.id,BagTypeDefine.BAG_TYPE_ITEM);d_u.text=b_e+"/"+p_g.amount,b_e>=p_g.amount?d_u.color="#71de66":d_u.color="#ef2b2b"}},b_s.prototype.onClick=function(e){var p_l=this.dataSource;p_l&&(b_p.checkConsume(this._itemArray,!0)&&0<p_l.surCount?MonthActivityModel.ins.reqChangeItem(p_l.id):0==p_l.surCount&&b_p.broadcastNotice((j_x("1763_1713_235")+j_x("2348_1300_1365")+j_x("1876_1917"))))},b_s);function b_s(){var e=p_l.call(this)||this;return e._itemArray=[],e._strGift=[(j_x("1644_1254_1763")+j_x("1713_235_2348")),(j_x("2128_4_1763")+j_x("1713_235_2348"))],e.rewardBtn.on(Laya.Event.CLICK,e,e.onClick),e.goodsList.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.redPoint.visible=!1,e}e.MonthSpringFestivalCell=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.month.monthTreasureHuntPanelUI,__extends(b_s,p_l),b_s.prototype.init=function(){Mxo(this,Laya)},b_s.prototype.onAdded=function(){var e=this.dataSource;e&&(ActivityModel.reqActivityRecord(e.type),this.isBgActivity=e.enum==ActivityTypeEnum.BG,LED.on(l_r.MONTH_TR_HUNT_INFO,this,this.updateView),LED.on(l_r.ACTIVITY_LOTTERT_DRAW,this,this.playAni),n_t.instance.reqRecordInfo(this.tagName,RecordType.AllSer,this.isBgActivity),LED.on(l_r.ACTIVITY_LOTTERT_INFO,this,this.updateViewInfo),LED.on(l_r.ACTIVITY_LOTTERT_DRAW,this,this.playAni),LED.on(l_r.ACTIVITY_LOTTERT_RECORD,this,this.updateRecordList),this.on(Laya.Event.CLICK,this,this.onClick))},b_s.prototype.onClickGoBtn=function(){var e=this.dataSource,p_l=this.getLottertShowTime(e);if(e.sulTime-p_l<=0)b_p.broadcastNotice((j_x("2462_2035_1796")+j_x("1878_1702_2460")+j_x(1273)));else{var p_g=MonthActivityModel.ins.MonthTrHunt,b_s=p_g[0].cost_item,d_u=this.isTenContinue?10:1;if(BagModel.instance.getItemCountByItemID(b_s,BagTypeDefine.BAG_TYPE_ITEM)<d_u)r_f.instance.isWindow(p_g[0].cost_item);else{var b_e=Config.CItem(b_s);b_e?b_p.confirm(Utils.$((j_x("68_2032_1661")+j_x(1502)+"{1}{2}"+j_x("2195_2235")+""),d_u,b_e.name),this.onConfirmFun.bind(this),null,!1,!1,!1,!0,"tagName"):this.onConfirmFun()}}},b_s.prototype.aniComplete=function(p_l){Iaf(p_l,n_t,this,RecordType,RankModel,e)},b_s.prototype.onConfirmFun=function(){var e=this.isTenContinue?10:1;n_t.instance.reqStartTurn(this.tagName,e,this.isBgActivity)},b_s.prototype.getLottertShowTime=function(e){var p_l=0;if(e&&!this.isBgActivity){var p_g=Config.activity_activity[e.gsa_id].param;p_l=p_g&&p_g.showTime?p_g.showTime:0}else p_l=e.showTime;return p_l},b_s.prototype.updateItems=function(){for(var e=MonthActivityModel.ins.MonthTrHunt,p_l=e[0].items,p_g=e[0].bestItems,b_s=0;b_s<p_l.length;b_s++){var d_u=this.items.getChildByName("item"+b_s);d_u&&(d_u.dataSource=p_l[b_s],this.renderItem(d_u,b_s));var b_e=this.items.getChildByName("itemGrand"+b_s);b_e&&(b_e.dataSource=p_g[b_s],this.renderItem(b_e,b_s))}},b_s.prototype.renderBox=function(e,p_l){var p_g=e.getChildByName("playerName"),b_s=e.getChildByName("content"),d_u=e.getChildByName("item"),b_e=e.dataSource,d_m="";if(b_e&&b_e.recs&&0<b_e.recs.length)for(var d_w in b_e.recs){var f_t=MonthActivityModel.ins.MonthTrHunt,v_z=f_t[0].items,d_h=f_t[0].bestItems,r_t=b_e.recs[d_w];for(var t_n in v_z)if(v_z[t_n].id==r_t){var f_y=Config.CItem(v_z[t_n].itemId),p_q=",";parseInt(t_n)==b_e.recs.length-1&&(p_q=""),d_m+=Utils.$("{1}*{2}{3}",f_y.name,v_z[t_n].num,p_q)}for(var h_h in d_h)d_h[h_h].id==r_t&&(f_y=Config.CItem(d_h[h_h].itemId),p_q=",",parseInt(h_h)==b_e.recs.length-1&&(p_q=""),d_m+=Utils.$("{1}*{2}{3}",f_y.name,d_h[h_h].num,p_q))}p_g.text=b_e.name,d_u.text=d_m,b_s.x=p_g.x+p_g.textField.textWidth+3,d_u.x=b_s.x+b_s.textField.textWidth+3},b_s.prototype.updateConsume=function(e){void 0===e&&(e=null);var p_l,p_g,b_s=MonthActivityModel.ins.MonthTrHunt,d_u=Config.CItem(b_s[0].cost_item),b_e=BagModel.instance.getItemCountByItemID(b_s[0].cost_item,BagTypeDefine.BAG_TYPE_ITEM),d_m=1<=b_e?"#00802e":"#fa0a0a",d_w=10<=b_e?"#00802e":"#fa0a0a";p_l=Utils.setImg(Resource.ResUrl.getIconUrl(d_u.icon),40,40)+Utils.setColor(Utils.$("{1}","x1"),d_m)+Utils.setColor(Utils.$("{1}",("(10"+j_x("514_2224")+")")),"#00802e"),p_g=Utils.setImg(Resource.ResUrl.getIconUrl(d_u.icon),40,40)+Utils.setColor(Utils.$("{1}","x10"),d_w)+Utils.setColor(Utils.$("{1}",("(100"+j_x("514_2224")+")")),"#00802e"),this.oneConsume.innerHTML=p_l,this.tenConsume.innerHTML=p_g},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"oneGetBtn":this.isTenContinue=!1,this.onClickGoBtn();break;case"tenGetBtn":this.isTenContinue=!0,this.onClickGoBtn();break;case"recordClick":e.LottertDrawRecordPanel.open(this.tagName,this.isBgActivity);break;case"exchangeBtn":e.LottertDrawExchangePanel.open(this.tagName,this.isBgActivity)}},b_s.prototype.updateView=function(){Knb(this)},b_s.prototype.renderItem=function(p_l,p_g){var b_s=p_l.getChildByName("itembox1");b_s||((b_s=new e.ItemBox).name="itembox1",p_l.addChild(b_s));var d_u=new ModuleItemVO;d_u.id=p_l.dataSource.itemId,d_u.amount=p_l.dataSource.num,b_s.setItemData(d_u),b_s.setName("")},b_s.prototype.updateViewInfo=function(){Gqx(n_t,this)},b_s.prototype.onRemove=function(){Ajx(this,Laya,LED,l_r,FuncDefine)},b_s.prototype.playAni=function(e){e.ty==this.tagName&&j_a.otherIns().add(this,this.aniComplete,[e])},b_s.prototype.updateRecordList=function(e){e.ty==this.tagName&&e&&e.mode==RecordType.AllSer&&(e.records&&0<e.records.length?(e.records.sort((function(e,p_l){return e.time-p_l.time})),this.recordList.array=e.records,this.recordList.scrollTo(this.recordList.array.length-2),this.recordList.visible=!0,this.recordNull.visible=!1):(this.recordList.visible=!1,this.recordNull.visible=!0))},b_s);function b_s(){var e=p_l.call(this)||this;return e.tagName=LotterType.TREASURE,e.isTenContinue=!1,e.init(),z_j.setList(e.recordList,e,e.renderBox),z_j.setListScroll(e.recordList),e.recordClick.mouseEnabled=!0,e.exchangeBtn.mouseEnabled=!0,z_j.setHtml(e.oneConsume,22,"#f0ecd8",10,"center"),z_j.setHtml(e.tenConsume,22,"#f0ecd8",10,"center"),e.oneConsume.mouseThrough=!0,e.tenConsume.mouseThrough=!0,e}e.MonthTreasureHuntPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.openSvrSeven.openSvrSevenActivityUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(e){this.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.OPENSVRSEVEN_CONRECHARGE_INFO,this,this.upDateConRecharegePanel),LED.on(l_r.OPENSVRSEVEN_DISCOUT_INFO,this,this.upDateDisCoutPanel),LED.on(l_r.ACTIVITY_BGA_ACUM_RECHARGE,this,this.updateRechargeData),this.dataSource&&(this.dataSource.vo,this.tab.selectedIndex=this.dataSource.index,this.setOpenSvrTab(),this.updateTimeTxt())},b_s.prototype.onRemove=function(e){Ggj(e,this,Laya,LED,l_r)},b_s.prototype.ConRechargecompareFun=function(e,p_l){return e.state===p_l.state?e.days-p_l.days:e.state-p_l.state},b_s.prototype.updateItem_leiji=function(e,p_l){if(e){if(!this.dataSource)return;e.setData(e.dataSource,this.dataSource.vo)}},b_s.open=function(e,p_l){void 0===p_l&&(p_l=0),(e=e||ActivityModel.instance.getActivityConfigVo(FuncDefine.openSvrSevenActivityPanel))?(p_l=p_l||1,UIM.open(b_s,["activity.atlas","shop.atlas","recharge.atlas","activity/openSer.atlas"],{vo:e,index:p_l},!1,!1,!0,!0)):b_p.broadcastNotice((j_x("1796_1878_206")+j_x("155_1186")))},b_s.prototype.newcompareFun=function(e,p_l){return e.status===p_l.status?e.id-p_l.id:e.status-p_l.status},b_s.prototype.setOpenSvrTab=function(){var e,p_l;if(e=ActivityModel.instance.getActivityConfigVo(FuncDefine.OpenServiceFisrtView),p_l=ActivityModel.instance.getActivityConfigVo(FuncDefine.openSvrSevenActivityPanel),e||p_l){if(p_l)for(var p_g=0;p_g<p_l.subVo.length;p_g++)switch(p_l.subVo[p_g].type.toString()){case ActivityTypeDefine.GS_opensvrTsGainRank:openSvrTab.ins.settsGainRankTab=!0;break;case ActivityTypeDefine.GS_opensvrContinuousRecharge:openSvrTab.ins.setconRechargeTab=!0;break;case ActivityTypeDefine.GS_acumRecharge:openSvrTab.ins.setacumRechargeTab=!0;break;case ActivityTypeDefine.GS_opensvrDiscountRecharge:openSvrTab.ins.setdiscoutRecharTab=!0}if(e)for(p_g=0;p_g<e.subVo.length;p_g++)switch(e.subVo[p_g].type.toString()){case ActivityTypeDefine.GS_opensvrTsGainRank:openSvrTab.ins.settsGainRankTab=!0;break;case ActivityTypeDefine.GS_opensvrContinuousRecharge:openSvrTab.ins.setconRechargeTab=!0;break;case ActivityTypeDefine.GS_acumRecharge:openSvrTab.ins.setacumRechargeTab=!0;break;case ActivityTypeDefine.GS_opensvrDiscountRecharge:openSvrTab.ins.setdiscoutRecharTab=!0}}else console.log((j_x("155_1998_1247")+j_x("1254_1796_1878")+j_x("1971_155_1186")+"("+j_x("1514_1855")+")?"));this.item0.visible=openSvrTab.ins.tsGainRankTab,this.item1.visible=openSvrTab.ins.discoutRecharTab,this.item2.visible=openSvrTab.ins.conRechargeTab,this.item3.visible=openSvrTab.ins.acumRechargeTab,0==this.item0.visible?(this.item1.x=0,this.item2.x=151,this.item3.x=301,0==this.item1.visible?(this.item2.x=0,this.item3.x=151):(this.item1.x=0,this.item2.x=151,this.item3.x=301),0==this.item2.visible&&(0==this.item1.visible?this.item3.x=0:(this.item1.x=0,this.item3.x=151))):(0==this.item1.visible?(this.item2.x=151,this.item3.x=301):(this.item2.x=301,this.item3.x=452),0==this.item2.visible&&(0==this.item1.visible?this.item3.x=151:(this.item1.x=151,this.item3.x=301)))},b_s.prototype.upDateDisCoutPanel=function(){Iqj(openSvrSevenActivityModel,this)},b_s.prototype.updateListData=function(){switch(this.tab.selectedIndex){case 0:this.updateConsumeData(1),this.updateConsumeData(2),this.updateConsumeData(3);break;case 1:this.updateConsumeData(0),this.updateConsumeData(2),this.updateConsumeData(3);break;case 2:this.updateConsumeData(0),this.updateConsumeData(1),this.updateConsumeData(3);break;case 3:this.updateConsumeData(0),this.updateConsumeData(1),this.updateConsumeData(2)}this.updateRechargeData()},b_s.prototype.disCoutCompareFun=function(e,p_l){return e.isState==p_l.isState?e.giftId-p_l.giftId:e.isState-p_l.isState},b_s.prototype.upDateTabRedPoint=function(){Osi(ActivenessModel,ActivityTypeDefine,this,openSvrSevenActivityModel)},b_s.prototype.updateRechargeData=function(){if(this.dataSource.vo){if(2===this.tab.selectedIndex){this.bgimg.skin="res/ui/activity/bg_kaifulianchong.png",this.tittleImg.skin="res/ui/activity/title_kaifulianchong.png",this.dayTextBox.visible=!0,this.acmRechargeBox.visible=!0,this.rechargelabel_guding.text=(j_x("2339_1254_1874")+j_x("867_2258_2376")+"");var p_l=ActivityTypeDefine.GS_opensvrContinuousRecharge;this.list.itemRender=b_e,this.list.renderHandler=this._conRechargeListHandler;var p_g=openSvrSevenActivityModel.ins.openSvrSevenRecInfo;this.list.array=p_g.sort(this.ConRechargecompareFun)}else if(1===this.tab.selectedIndex)this.bgimg.skin="res/ui/activity/bg_kaifulibao.png",this.tittleImg.skin="res/ui/activity/title_kaifulibao.png",this.dayTextBox.visible=!1,this.acmRechargeBox.visible=!1,p_l=ActivityTypeDefine.GS_opensvrDiscountRecharge,this.list.itemRender=f_t,this.list.renderHandler=this._discoutRechargeListHandler,this.list.array=openSvrSevenActivityModel.ins.oepnSvrSevenDiscout.sort(this.disCoutCompareFun);else if(3===this.tab.selectedIndex){this.bgimg.skin="res/ui/activity/bg_kaifuleichong.png",this.tittleImg.skin="res/ui/activity/title_kaifuleichong.png",this.dayTextBox.visible=!1,this.acmRechargeBox.visible=!0,p_l=ActivityTypeDefine.GS_opensvrAcumRecharge,this.list.itemRender=e.SingleRechargeCell,this.list.renderHandler=Laya.Handler.create(this,this.updateItem_leiji,null,!1);var d_u=ActivityModel.instance.acumRechargeVo;this.rechargeLabel.text=100*d_u.gold+(j_x("1263_869")),this.rechargelabel_guding.text=(j_x("2339_1254_1874")+j_x("867_2258_2376")+"");var d_m=DailyRechargeManager.instance.getAcumRechargeDates(p_l);this.list.array=d_m.sort(this.newcompareFun)}else 0===this.tab.selectedIndex&&(b_s.close(),e.OpenServiceFisrtView.open());this.updateTimeTxt(),this.list.scrollBar.value=0,this.kaifuRed.visible=!1,this.conRed.visible=!1,this.discoutRed.visible=!1,this.upDateTabRedPoint()}},b_s.prototype.upDateConRecharegePanel=function(){Krs(openSvrSevenActivityModel,this)},b_s.prototype.updateItem=function(e){e&&e.setData(e.dataSource,this.dataSource.vo)},b_s.prototype.updateRechargeInfo=function(){Ioo(openSvrSevenActivityModel,this,j_x)},b_s.prototype.updateConsumeData=function(e){this.tab.selectedIndex===e&&(this.list.array=null),this.list.array=null},b_s.prototype.onTabSelect=function(e){-1!==e&&this.updateListData()},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close()}},b_s.prototype.updateTimeTxt=function(){if(this.dataSource){var e=this.dataSource.vo;Laya.timer.clear(this,this.updateTimeTxt);var p_l=e.subVo,p_g=0;if(1===this.tab.selectedIndex){for(var b_s in p_l)if(p_l[b_s].type==ActivityTypeDefine.GS_opensvrDiscountRecharge){var d_u=p_l[b_s].stop;this.timeTxt.text=Utils.formatTimeStr4(d_u,!1),this.timeTxt.visible=!1,p_g=d_u-SyncTime.serverTime/1e3}}else if(2===this.tab.selectedIndex)for(var b_s in p_l)p_l[b_s].type==ActivityTypeDefine.GS_opensvrContinuousRecharge&&(d_u=p_l[b_s].stop,this.timeTxt.text=Utils.formatTimeStr4(d_u,!1),this.timeTxt.visible=!1,p_g=d_u-SyncTime.serverTime/1e3);else if(3===this.tab.selectedIndex)for(var b_s in p_l)p_l[b_s].type==ActivityTypeDefine.GS_acumRecharge&&(d_u=p_l[b_s].stop,this.timeTxt.text=Utils.formatTimeStr4(d_u,!1),this.timeTxt.visible=!1,p_g=d_u-SyncTime.serverTime/1e3);0<p_g?(Laya.timer.once(1e3,this,this.updateTimeTxt),this.countDownTxt.text=Utils.formatTimeStr(Math.floor(p_g))):this.countDownTxt.text=(j_x("1796_1878_1300")+j_x("396_2426"));var b_e=openSvrSevenActivityModel.ins._conRecDays,d_m=openSvrSevenActivityModel.ins._todayRec;this.dayLabel.text=b_e+(j_x(2308)),this.rechargeLabel.text=d_m+(j_x(1263)),this.rechargelabel_guding.text=(j_x("2339_1254_1874")+j_x("867_2258_2376")+""),3===this.tab.selectedIndex&&(this.rechargeLabel.text=100*d_m+(j_x("1263_869")),this.rechargelabel_guding.text=(j_x("2339_1254_1874")+j_x("867_2258_2376")+""))}},b_s.prototype.updateItem_xglb=function(e){e&&e.update(e.dataSource,this.dataSource.vo)},b_s.close=function(){Wnd(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.rechargeTypes=[],e.list.vScrollBarSkin="",e.list.scrollBar.elasticBackTime=200,e.list.scrollBar.elasticDistance=100,e.list.itemRender=b_e,e.list.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.tab.selectHandler=Laya.Handler.create(e,e.onTabSelect,null,!1),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.tab.selectedIndex=-1,e._conRechargeListHandler=Laya.Handler.create(e,e.updateItem,null,!1),e._discoutRechargeListHandler=Laya.Handler.create(e,e.updateItem_xglb,null,!1),e}e.openSvrSevenActivityPanel=p_g;var d_u,b_e=(d_u=ui.window.activity.bga.openSvrSeven.openSvrSevenActivityCellUI,__extends(d_m,d_u),d_m.prototype.setData=function(e,p_l){if(e.id,this._type=e.type||"",this._type===ActivityTypeDefine.GS_opensvrContinuousRecharge){this.barTxt.visible=!1,this.proBar.visible=!1;var p_g,b_s=e.state,d_u=e.ids;p_g=0==b_s&&e.conDays>=e.days?(this.rewardBtn.label=(j_x("1174_2111")),this.redpoint.visible=!0,!(this.rewardBtn.disabled=!1)):1==b_s?(this.redpoint.visible=!1,this.rewardBtn.disabled=!0,!(this.rewardBtn.label=(j_x("1300_1174_2111")))):(this.redpoint.visible=!1,this.rewardBtn.disabled=!1,!(this.rewardBtn.label=(j_x("711_2417_2258")+j_x(2376)))),this.rewardList.array=e.items,this.titleTxt.text=e.giftName,this.rewardBtn.dataSource={id:d_u,status:p_g}}else this._type===ActivityTypeDefine.GS_opensvrDiscountRecharge?(this.barTxt.visible=!1,this.proBar.visible=!1):(this._type,ActivityTypeDefine.GS_opensvrAcumRecharge)},d_m.prototype.onClick=function(p_l){if(this.dataSource){var b_s=p_l.target;if(b_s){if(this._type===ActivityTypeDefine.GS_opensvrContinuousRecharge){if(!this.dataSource)return;(d_u=b_s.dataSource)&&(d_u.status?openSvrSevenActivityModel.ins.reqGetRecGift(d_u.id):(p_g.close(),e.RechargePanel.open()))}else this._type,ActivityTypeDefine.GS_opensvrAcumRecharge;var d_u=b_s.dataSource;console.log(b_s.dataSource)}}},d_m.prototype.updateItem=function(e,p_l){e&&(e.isShowName=!1,e.isShowNum=!0,e.isShowTick=!1,e.setItemData(e.dataSource,ItemBoxDefine.MODULE_ITEM))},d_m);function d_m(){var p_l=d_u.call(this)||this;return p_l.rewardBtn.on(Laya.Event.CLICK,p_l,p_l.onClick),p_l.rewardList.itemRender=e.ItemBox,p_l.rewardList.renderHandler=Laya.Handler.create(p_l,p_l.updateItem,null,!1),p_l}e.openSvrSevenActivityCell=b_e;var d_w,f_t=(d_w=ui.window.activity.bga.openSvrSeven.openSvrSevenxglb_cellUI,__extends(v_z,d_w),v_z.prototype.onRender=function(e,p_l){Akz(e,p_l)},v_z.prototype.onClick=function(e){var p_l=this.dataSource;p_l&&(p_l.isCanReward?openSvrSevenActivityModel.ins.reqGetOpenSvrDiscout(p_l.giftId):p_l.isCanBuy&&(0<p_l.money?openSvrSevenActivityModel.ins.reqBuyGift(p_l.productId,p_l.money):openSvrSevenActivityModel.ins.reqGetOpenSvrDiscout(p_l.giftId)))},v_z.prototype.update=function(e,p_l){var p_g=e,b_s=e.id,d_u=e.buy_count||0,b_e=d_u<p_g.limit?p_g.limit-d_u:0;this.t_limit.text=0<p_g.limit?Utils.$((j_x("1355_2420_235")+j_x(2348)+": {1}/{2}"),b_e,p_g.limit):"",this.t_limit.color=0<b_e?"#00802e":"#b92929",e.isCanReward?(this.b_buy.label=(j_x("1174_2111")),this.redpoint.visible=!0,this.b_buy.disabled=!1):0<b_e?(this.b_buy.label=(j_x("1190_282_1355")+j_x(2420)),this.redpoint.visible=!1,this.b_buy.disabled=!1):(this.b_buy.label=(j_x("1300_1008_2416")),this.redpoint.visible=!1,this.b_buy.disabled=!0),e.money<=0&&(0<b_e?(this.b_buy.label=(j_x("1174_2111")),this.redpoint.visible=!0,this.b_buy.disabled=!1):(this.b_buy.label=(j_x("1300_1008_2416")),this.redpoint.visible=!1,this.b_buy.disabled=!0)),this.b_buy.dataSource={id:b_s,type:p_l.type},this.list.array=p_g.items,this.sp_num=b_p.getNumSp(NumType.OPEN_SER_DISC,p_g.money,this.sp_num,-11)},v_z);function v_z(){var e=d_w.call(this)||this;return e.b_buy.on(Laya.Event.CLICK,e,e.onClick),e.list.renderHandler=Laya.Handler.create(e,e.onRender,null,!1),e}e.openSvrsevenXglbCell=f_t}(UI=UI||{});var l_a=function(e){function p_l(){var p_l=e.call(this)||this;return p_l._lineBox1=new Laya.Box,p_l.addChild(p_l._lineBox1),p_l.on(Laya.Event.ADDED,p_l,p_l.onAdded),p_l.showCommonActivityIcon(),p_l.showDyActivityIcon(),p_l}return __extends(p_l,e),p_l.prototype.onAdded=function(e){Wtd(e,this,LED,l_r)},p_l.prototype.tweenComplete=function(){this._moveTween&&this._moveTween.clear(),this._moveTween=null,this._targetPosX!=this._oriPosX&&(this.visible=!1)},p_l.prototype.getTarget=function(e){for(var p_l,p_g=this._lineBox1.numChildren,b_s=0;b_s<p_g;b_s++)if((p_l=this._lineBox1.getChildAt(b_s))&&p_l.checkFuncId(e))return p_l;return null},p_l.prototype.showDyActivityIcon=function(){var e=ActivityModel.instance.sActivities;if(e&&0<e.length)for(var p_l in e)if(!this.checkHasIcon(e[p_l])&&0!==e[p_l].activityId&&Config.funcOpen[e[p_l].activityId]&&e[p_l].isOpen){var p_g=Laya.Pool.getItemByClass(PoolDefine.ACTIVITY_COMMON,ActivityGSAIcon);p_g.setData(e[p_l]),this.addToBox(p_g,e[p_l].iconRow)}this.resetPos()},p_l.prototype.clear=function(){this._lineBox1.removeChildren(0,this._lineBox1.numChildren),this._lineBox2&&this._lineBox2.removeChildren(0,this._lineBox2.numChildren),this._lineBox3&&this._lineBox3.removeChildren(0,this._lineBox3.numChildren)},p_l.prototype.isShowing=function(){return Ehy(this)},p_l.prototype.clearDyIcon=function(){this._lineBox2&&(this._lineBox2.removeChildren(0,this._lineBox2.numChildren),this.resetPos()),this._lineBox3&&(this._lineBox3.removeChildren(0,this._lineBox3.numChildren),this.resetPos())},p_l.prototype.showCommonActivityIcon=function(){var e=ActivityModel.instance.clientActivities;if(e&&0<e.length)for(var p_l in e)if(!this.checkHasIcon(e[p_l])&&e[p_l].isOpen){var p_g=Laya.Pool.getItemByClass(PoolDefine.ACTIVITY_BASE,ActivityIcon);p_g.setData(e[p_l]),this.addToBox(p_g,e[p_l].iconRow)}this.resetPos()},p_l.prototype.addToBox=function(e,p_l){var p_g=this.getLineBox(p_l);p_g&&(p_g.addChild(e),p_g.mouseThrough=!0)},p_l.prototype.resetPos=function(){this.resetBox(this._lineBox1),this._lineBox2&&(this._lineBox2.y=ActivityBaseIcon.defaultHeight,this.resetBox(this._lineBox2)),this._lineBox3&&(this._lineBox3.y=ActivityBaseIcon.defaultHeight,this._lineBox2&&(this._lineBox3.y+=Math.ceil(this._lineBox2.numChildren/8)*ActivityBaseIcon.defaultHeight),this.resetBox(this._lineBox3))},p_l.prototype.hideDyActivityIcon=function(e){var p_l=this.getLineBox(e.iconRow);if(p_l)for(var p_g=0;p_g<p_l.numChildren;++p_g){var b_s=p_l.getChildAt(p_g);if(b_s.configVo.activityId==e.activityId&&b_s.configVo.canClose())return b_s.removeSelf(),void this.resetPos()}},p_l.prototype.resetBox=function(e){if(e){for(var p_l=[],p_g=0;p_g<e.numChildren;++p_g)p_l.push(e.getChildAt(p_g));for(p_l.sort((function(e,p_l){return e.configVo.sortWeight-p_l.configVo.sortWeight})),p_g=0;p_g<e.numChildren;++p_g)e.setChildIndex(p_l[p_g],p_g),this.setIconPos(e,p_l[p_g],p_g)}},p_l.prototype.setIconPos=function(e,p_l,p_g){e===this._lineBox2?(p_l.y=Math.floor(p_g/8)*p_l.height,p_l.x=p_g%8*p_l.width):(p_l.x=p_g*p_l.width,p_l.y=0)},p_l.prototype.getLineBox=function(e,p_l){var p_g;return void 0===p_l&&(p_l=ActivityIconType.ACTIVITY_COMMON),1===e?p_g=this._lineBox1:2===e?(this._lineBox2||(this._lineBox2=new Laya.Box,this.addChild(this._lineBox2)),p_g=this._lineBox2):3===e&&(this._lineBox3||(this._lineBox3=new Laya.Box,this.addChild(this._lineBox3)),p_g=this._lineBox3),p_g},p_l.prototype.showMoveEft=function(e){void 0===e&&(e=!1),this._moveTween&&this._moveTween.clear(),this._moveTween=null,this._targetPosX=e?this._oriPosX:-700,this.x!=this._targetPosX?(this.visible=!0,this._moveTween=Laya.Tween.to(this,{f_u:this._targetPosX},300,Laya.Ease.circInOut,Laya.Handler.create(this,this.tweenComplete),null,!0)):this.visible=e},p_l.prototype.checkHasIcon=function(e){var p_l=this.getLineBox(e.iconRow);if(!p_l)return!0;for(var p_g=0;p_g<p_l.numChildren;++p_g){var b_s=p_l.getChildAt(p_g);if(b_s.configVo.activityId==e.activityId)return b_s.setData(e),!0}return!1},p_l.prototype.clearBGAIcon=function(){this._lineBox3&&this._lineBox3.removeChildren(0,this._lineBox3.numChildren)},p_l.prototype.getTargetByFuncName=function(e){for(var p_l,p_g=this._lineBox1.numChildren,b_s=0;b_s<p_g;b_s++)if((p_l=this._lineBox1.getChildAt(b_s))&&p_l.checkFuncName(e))return p_l;if(this._lineBox2)for(p_g=this._lineBox2.numChildren,b_s=0;b_s<p_g;b_s++)if((p_l=this._lineBox2.getChildAt(b_s))&&p_l.checkFuncName(e))return p_l;return null},p_l}(Laya.Sprite),ActivityIconType,ActivityBaseIcon=function(e){function p_l(){var p_l=e.call(this)||this;return p_l.iconClip.on(Laya.Event.MOUSE_DOWN,p_l,p_l.onMouseDown),p_l.iconClip.on(Laya.Event.MOUSE_OUT,p_l,p_l.onMouseUp),Laya.stage.on(Laya.Event.MOUSE_UP,p_l,p_l.onMouseUp),p_l.showGlintEft(!1),p_l.timeCountTxt.text="",p_l.timeCountBg.visible=!1,p_l}return __extends(p_l,e),p_l.prototype.setData=function(e){Cdh(e,this,Laya)},p_l.prototype.onMouseUp=function(e){this._isMouseDown&&(this._isMouseDown=!1,this._tween&&this._tween.clear(),this._tween=null,this._tween=Laya.Tween.to(this,{j_l:this.y_stay},200,null,null,null,!0),e.type==Laya.Event.MOUSE_UP&&this.onCellClick(e))},p_l.prototype.onMouseDown=function(e){this._isMouseDown=!0,this._tween&&this._tween.clear(),this._tween=null,this.y_stay=this.y,this._tween=Laya.Tween.to(this,{j_l:this.y_stay-15},200,null,null,null,!0)},p_l.prototype.onRemove=function(e){this._isMouseDown=!1,this.off(Laya.Event.REMOVED,this,this.onRemove);var p_l=this._type===ActivityIconType.ACTIVITY_BASE?PoolDefine.ACTIVITY_BASE:PoolDefine.ACTIVITY_COMMON;Laya.Pool.recover(p_l,this)},p_l.prototype.onCellClick=function(e){Ufo(e,LgcM)},p_l.prototype.updateRedPoint=function(){},p_l.prototype.showGlintEft=function(e){(this.glintEffect.visible=e)?this.glintEffect.play():this.glintEffect.stop()},Object.defineProperty(p_l,"defaultWid",{get:function(){return 78},enumerable:!0,configurable:!0}),Object.defineProperty(p_l,"defaultHeight",{get:function(){return 84},enumerable:!0,configurable:!0}),p_l}(ui.window.activity.activity_icon_cellUI),ActivityIcon=function(e){function p_l(){var p_l=e.call(this)||this;return p_l.iconClip.name="icon_act",p_l._type=ActivityIconType.ACTIVITY_COMMON,p_l}return __extends(p_l,e),p_l.prototype.onRemove=function(p_l){Kww(p_l,LED,l_r,this,e)},p_l.prototype.updateInfo=function(e){this._configVo&&this._configVo.activityId===e&&(this.updateRedPoint(),this.visible=p_k.instance.btnCanVisible(this._configVo))},p_l.prototype.setData=function(p_l){if(LED.on(l_r.ACTIVITY_FUNCOPEN_UPDATE,this,this.updateInfo),e.prototype.setData.call(this,p_l),this._configVo=p_l){var p_g=Config.funcOpen[this._configVo.activityId];this.iconClip.index=p_g.icon_index}this.updateRedPoint()},p_l.prototype.updateRedPoint=function(){if(this.redPoint.visible=!1,this._configVo){var e=Config.funcOpen[this._configVo.activityId];this.redPoint.visible=e&&e.needFirstRed&&!this._configVo.isClick||p_k.instance.getCanReward(this._type,this._configVo)}this.showGlintEft(this.redPoint.visible)},p_l.prototype.onCellClick=function(p_l){if(e.prototype.onCellClick.call(this,p_l),this._configVo){if(this._configVo.isClick||(this._configVo.isClick=!0,this.updateRedPoint()),this._configVo.activityId==FuncDefine.CarnivalAcitvity)return void(Laya.Browser.onAndroid&&GPlatform.isQQMini&&Sdk.QQMini.openUrl("https://mobile.qzone.qq.com/l?g=8115"));var p_g=Config.funcOpen[this._configVo.activityId].openWin;0<p_g&&UI.WindowClass.openWin(p_g,[this._configVo])}},Object.defineProperty(p_l.prototype,"configVo",{get:function(){return this._configVo},enumerable:!0,configurable:!0}),p_l.prototype.checkFuncId=function(e){return Qbp(e,this)},p_l.prototype.checkFuncName=function(e){if(this._configVo){var p_l=Config.funcOpen[this._configVo.activityId];if(p_l&&p_l.name===e)return!0}return!1},p_l}(ActivityBaseIcon),ActivityGSAIcon=function(e){function p_l(){return e.call(this)||this}return __extends(p_l,e),p_l.prototype.onCellClick=function(p_l){Kxw(p_l,e,this)},p_l.prototype.timeRemoveCellIcon=function(){Alu(Laya,this,ActivityModel)},p_l.prototype.setData=function(p_l){Laya.timer.clear(this,this.updateTime),e.prototype.setData.call(this,p_l),this._configVo&&Config.funcOpen[this._configVo.activityId].needCountdown?(this.timeCountBg.visible=!0,Laya.timer.loop(1e3,this,this.updateTime,null,!0)):p_l.activityId==FuncDefine.growUpFundActivityPanel?(this.timeCountBg.visible=!0,Laya.timer.loop(1e3,this,this.updateTime,null,!0)):(this.timeCountTxt.text="",this.timeCountBg.visible=!1)},p_l.prototype.updateTime=function(){if(Config.funcOpen[this._configVo.activityId].needCountdown&&0<this.configVo.endTime){if(this.redPoint.visible=!1,this.timeCountBg.visible=!0,!this.configVo.subVo[0]||0==this.configVo.subVo.length)return void ActivityModel.instance.removeGSActivity(this._configVo.activityId);var e=Config.activity_activity[this.configVo.subVo[0].gsa_id],p_l=0;this.configVo.subVo[0]&&this.configVo.subVo[0].showTime?p_l=this.configVo.subVo[0].showTime:e&&e.param&&e.param.showTime&&(p_l=e.param.showTime);var p_g=p_l?this.configVo.endTime-Math.floor(SyncTime.serverTime/1e3)-p_l:this.configVo.endTime-Math.floor(SyncTime.serverTime/1e3),b_s=this.configVo.activityId;if(b_s==FuncDefine.openSvrSevenActivityPanel){var d_u=0;if(this.configVo.subVo){for(var b_e in d_u=this.configVo.subVo[0].stop,this.configVo.subVo)d_u>=this.configVo.subVo[b_e].stop&&(d_u=this.configVo.subVo[b_e].stop);p_g=p_l?d_u-Math.floor(SyncTime.serverTime/1e3)-p_l:d_u-Math.floor(SyncTime.serverTime/1e3)}}if(b_s==FuncDefine.OpenServiceFisrtView||b_s==FuncDefine.xsRank||b_s==FuncDefine.FestivalActivity||b_s==FuncDefine.WeekActivity||b_s==FuncDefine.MonthActivity){if(b_s!=FuncDefine.FestivalActivity&&b_s!=FuncDefine.WeekActivity&&p_k.instance.getCanReward(1,this.configVo))return this.timeCountTxt.text=(j_x("1163_1174_2235")),void(this.redPoint.visible=!0);var d_m=[];for(var b_e in p_l=0,this.configVo.subVo){var d_w=this.configVo.subVo[b_e];Config.activity_activity[d_w.gsa_id]?Config.activity_activity[d_w.gsa_id].param&&Config.activity_activity[d_w.gsa_id].param.showTime&&(p_l=Config.activity_activity[d_w.gsa_id].param.showTime):p_l=this.configVo.subVo[b_e].showTime,p_l=p_l||0;var f_t=d_w.stop-p_l;d_m.push(f_t)}for(d_m.sort((function(e,p_l){return e-p_l}));0<d_m.length&&(p_g=(f_t=d_m.shift())-Math.floor(SyncTime.serverTime/1e3))<=0;);}0<p_g?this.timeCountTxt.text=Utils.formatTimeStr(p_g):(this.timeCountTxt.text=(j_x("1300_396_2426")),Laya.timer.clear(this,this.updateTime),p_k.instance.getCanReward(1,this.configVo)?(this.timeCountTxt.text=(j_x("1163_1174_2235")),this.redPoint.visible=!0):this._configVo.activityId&&(0<p_l?Laya.timer.once(1e3*p_l,this,this.timeRemoveCellIcon):ActivityModel.instance.removeGSActivity(this._configVo.activityId)))}else this.configVo.activityId==FuncDefine.growUpFundActivityPanel?p_k.instance.getCanReward(1,this.configVo)?(this.timeCountTxt.text=(j_x("1163_1174_2235")),this.timeCountBg.visible=!0,this.redPoint.visible=!0):(this.timeCountTxt.text="",this.timeCountBg.visible=!1):(this.timeCountTxt.text="",this.timeCountBg.visible=!1,Laya.timer.clear(this,this.updateTime))},p_l.prototype.onRemove=function(p_l){Eyf(p_l,Laya,this,e)},p_l.prototype.updateInfo=function(e){this._configVo&&this._configVo.activityId===e&&(this.updateRedPoint(),this.updateTime())},p_l}(ActivityIcon);!function(e){e[e.ACTIVITY_BASE=0]="ACTIVITY_BASE",e[e.ACTIVITY_COMMON=1]="ACTIVITY_COMMON"}(ActivityIconType=ActivityIconType||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.recConsRank.rechargeRankUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){this.dataSource&&this.dataSource.data&&(this._clipTab.on("tabSelect",this,this.onTabChange),this.tab.selectedIndex=0,this.actStr=this.dataSource.data.subVo[0].type,ActivityModel.reqActivityRecord(this.actStr),this.goShopBtn.label=(j_x("711_2417_2258")+j_x(2376)),this.title.skin="res/ui/activity/mergeSer/title_recharge.png",this.actStr==ActivityTypeDefine.BG_cs_consumeGoldRank&&(this.title.skin="res/ui/activity/mergeSer/title_consume.png",this.goShopBtn.label=(j_x("711_2417_1820")+j_x(21))),this.on(Laya.Event.CLICK,this,this.onMouseClick),LED.on(l_r.RECHARGE_RANK_INFO,this,this.updateView),LED.on(l_r.RECHARGE_UPDATE_SC,this,this.updateScore),Laya.timer.loop(1e3,this,this.updateTime))},b_s.prototype.onTabChange=function(e,p_l){switch(this.mainBox.visible=!1,0<p_l&&this.hidePanel(p_l-1),e){case 0:this.mainBox.visible=!0;break;case 1:case 2:this.showPanel(e-1,this.actStr)}},b_s.prototype.btnRed=function(e,p_l){void 0===p_l&&(p_l=!1);var p_g=e._childs[0];p_g&&(p_g.visible=p_l)},b_s.prototype.showPanel=function(e,p_l){if(!this.panelList[e]){var p_g=this.panelType[e];this.panelList[e]=new p_g}return this.panelList[e].dataSource=p_l,this.addChildAt(this.panelList[e],1),this.panelList[e]},b_s.prototype.onRemove=function(){Umw(this,Laya,LED,l_r)},b_s.prototype.updateScore=function(){Wvt(RechargeRankModel,this)},b_s.prototype.updateView=function(){var e=this.dataSource.data.subVo[0],p_l=RechargeRankModel.ins.getRankVo(this.actStr),p_g=p_l.mySelfRank;this.btnRed(this.targetBtn,RechargeRankModel.ins.isTargerReward(e.round,this.actStr)),this.currentRank.text=p_g==RechargeRankModel.invalidRank?(j_x("206_1067_1077")):p_g+"",this.updateScore();var b_s=RechargeRankModel.ins.getRankCfg(this.actStr,p_l.rankType);!b_s||b_s.length<=0||(this.renderFristBox(b_s[0],p_l.rankPlayer[0]),this.list.array=b_s.slice(1),this.updateTime())},b_s.prototype.renderItem=function(e,p_l){Yru(e,p_l,this)},b_s.prototype.renderRankItem=function(e,p_l){Qdb(e,p_l)},b_s.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"rewardBtn":var p_g=RechargeRankModel.ins.rankRewardState(this.actStr);0==p_g?RechargeRankModel.ins.reqGetRankReward(this.actStr):1==p_g?b_p.broadcastNotice((j_x("1749_206_1067")+j_x(1077))):3==p_g&&b_p.broadcastNotice((j_x("1796_1878_396")+j_x("2426_1865_2221")+j_x("1163_1174_2111")));break;case"goShopBtn":this.actStr==ActivityTypeDefine.BG_cs_consumeGoldRank?e.ShopAllPanel.open(ShopConstant.type_prop):e.RechargePanel.open()}},b_s.prototype.updateTime=function(){var e=this.dataSource.data.subVo[0],p_l=RechargeRankModel.ins,p_g=ActivityModel.instance.getLottertShowTime(e);this.timeLab.text=Utils.formatTimeStr4(e.start,!1)+"-"+Utils.formatTimeStr4(e.stop-p_g,!1);var b_s=p_l.rankRewardState(this.actStr),d_u=p_l.getRankVo(this.actStr);this.btnRed(this.rewardBtn,0==b_s),this.rewardBtn.visible=0==d_u.rewardTime&&0<d_u.scoreNum,this.gotIamge.visible=2==b_s,this.goShopBtn.visible=!this.rewardBtn.visible&&2!=b_s,e.sulTime>p_g?(this.countdownLab.text=Utils.formatTimeStr(e.sulTime-p_g),this.countdownLab.color="#00802e"):(this.countdownLab.text=(j_x("1300_1917_396")),this.countdownLab.color="#e32828",Laya.timer.clearAll(this))},b_s.prototype.renderFristBox=function(e,p_l){if(e){this.ranklist.array=b_p.getRewardDatas(e.reward);var p_g=b_p.getRewardDatas(e.specialReward);if(this.specialItem.isShowName=!1,this.specialItem.setItemData(p_g[0]),this.rankBox.visible=!1,this.rankNum.visible=!0,p_l){var b_s="res/ui/activity/mergeSer/head_pannel.png",d_u=Config.fashion_fashion[p_l.fashionAvatar];d_u&&d_u.avatar&&0<d_u.avatar.length&&(b_s=Resource.ResUrl.getIconUrl(d_u.avatar[0])),this.headIcon.skin=Resource.ResManager.getHeadUrl(p_l.entryId||1,p_l.headIcon||2),this.headImg.skin=b_s,this.rankBox.visible=!0,this.playerName.text="s."+p_l.sid+p_l.name,this.nullTip.visible=!1}else this.nullTip.visible=!0}},b_s.prototype.hidePanel=function(e){this.panelList[e]&&this.removeChild(this.panelList[e])},b_s.open=function(e,p_l){void 0===p_l&&(p_l=0),e?UIM.open(b_s,["activity/mergeSer.atlas"],{index:p_l,data:e},!1):b_p.broadcastNotice((j_x("1796_1878_206")+j_x("155_1186")))},b_s.close=function(e){void 0===e&&(e=!1),UIM.close(b_s,e,["res/ui/marry/image_bg.jpg"])},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g._clipTab=new p_c(p_g.tab),p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g.ranklist.itemRender=e.ItemBox,z_j.setList(p_g.ranklist,p_g,p_g.renderRankItem),z_j.setListScroll(p_g.ranklist,!1),p_g.list.itemRender=e.RechargeRankItem,z_j.setListScroll(p_g.list),z_j.setList(p_g.list,p_g,p_g.renderItem),p_g.panelType=[e.RechargeRankShow,e.RechargeTargetPanel],p_g.panelList=[],p_g}e.RechargeRankPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=e.RechargeRankPanel,__extends(b_s,p_l),b_s.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"rewardBtn":var p_g=RechargeRankModel.ins.rankRewardState(this.actStr);0==p_g?RechargeRankModel.ins.reqGetRankReward(this.actStr):1==p_g?b_p.broadcastNotice((j_x("1749_206_1067")+j_x(1077))):3==p_g&&b_p.broadcastNotice((j_x("1796_1878_396")+j_x("2426_1865_2221")+j_x("1163_1174_2111")));break;case"goShopBtn":this.actStr==ActivityTypeDefine.BG_cs_consumeGoldRank?e.ShopAllPanel.open(ShopConstant.type_prop):e.RechargePanel.open()}},b_s.open=function(e,p_l){void 0===p_l&&(p_l=0),e?UIM.open(b_s,["activity/mergeSer.atlas"],{index:p_l,data:e},!1):b_p.broadcastNotice((j_x("1796_1878_206")+j_x("155_1186")))},b_s.close=function(e){void 0===e&&(e=!1),UIM.close(b_s,e,["res/ui/marry/image_bg.jpg"])},b_s);function b_s(){return p_l.call(this)||this}e.ConsumeRankPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.recConsRank.rechargeRankItemUI,__extends(b_s,p_l),b_s.prototype.updateView=function(e,p_l,p_g){var b_s=RechargeRankModel.ins;this.list.array=b_p.getRewardDatas(e.reward),this.rankBox.visible=!1;var d_u=e.beginIdx==e.endIdx;this.noBox.visible=!d_u;var b_e=b_s.getRankVo(p_g).rankPlayer[p_l+1];if(this.nullTip.visible=!1,this.rankNum.visible=d_u)if(this.rankNum.skin="res/ui/activity/mergeSer/"+e.rankUrl,b_e){this.playerName.text="s."+b_e.sid+b_e.name;var d_m="res/ui/activity/mergeSer/head_pannel.png",d_w=Config.fashion_fashion[b_e.fashionAvatar];d_w&&d_w.avatar&&0<d_w.avatar.length&&(d_m=Resource.ResUrl.getIconUrl(d_w.avatar[0])),this.headIcon.skin=Resource.ResManager.getHeadUrl(b_e.entryId||1,b_e.headIcon||2),this.headImg.skin=d_m,this.rankBox.visible=!0}else this.nullTip.visible=!0;else this.rankImage.skin="res/ui/activity/mergeSer/"+e.rankUrl},b_s.prototype.renderItem=function(e,p_l){Yvs(e,p_l)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.list.itemRender=e.ItemBox,z_j.setList(p_g.list,p_g,p_g.renderItem),z_j.setListScroll(p_g.list,!1),p_g}e.RechargeRankItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.recConsRank.RechargeRankShowUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){this.actStr=this.dataSource,LED.on(l_r.KF_RANK_UPDATE,this,this.updateView),this.on(Laya.Event.CLICK,this,this.onClick);var e=RechargeRankModel.ins.getRankVo(this.actStr);this.goShopBtn.label=(j_x("711_2417_2258")+j_x(2376)),this.actStr==ActivityTypeDefine.BG_cs_consumeGoldRank&&(this.goShopBtn.label=(j_x("711_2417_1820")+j_x(21))),RankModel.instance.reqGetRank(e.rankType,1);var p_l=Config.rank_ranklist[e.rankType].condition;this.tipLab.text=("Tips"+j_x("514_2224")+"")+p_l+(j_x("2060_1919_1067")+j_x(1077)+""),LED.on(l_r.RECHARGE_UPDATE_SC,this,this.updateScore)},b_s.prototype.onRemove=function(){Syd(LED,l_r,this,Laya)},b_s.prototype.updateScore=function(){Wqj(RechargeRankModel,this)},b_s.prototype.updateView=function(){var e=RechargeRankModel.ins.getRankVo(this.actStr),p_l=(Config.rank_ranklist[e.rankType].maxCount,e.mySelfRank);this.rankNum.text=p_l!=RechargeRankModel.invalidRank?p_l+"":(j_x("206_1067_1077"));var p_g=RankModel.instance.getRankDataByType_KF(e.rankType);this.updateScore();var b_s=p_g.getItems();b_s&&0<=b_s.length?(this.rankList.array=p_g.getItems(),this.rankNull.visible=!1):(this.rankList.array=[],this.rankNull.visible=!0)},b_s.prototype.renderItem=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("rankNum"),d_u=e.getChildByName("name"),b_e=e.getChildByName("rankClip"),d_m=e.getChildByName("num");p_g&&(d_u.text="s."+p_g.getServerId()+p_g.getPlayName(),d_m.text=p_g.getValue().toString(),p_g.getRankIndex()<=3?(b_e.index=p_g.getRankIndex()-1,b_s.visible=!1,b_e.visible=!0):(b_s.text=p_g.getRankIndex().toString(),b_s.visible=!0,b_e.visible=!1))},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"goShopBtn":this.actStr==ActivityTypeDefine.BG_cs_consumeGoldRank?e.ShopAllPanel.open(ShopConstant.type_prop):e.RechargePanel.open()}},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),z_j.setListScroll(e.rankList),z_j.setList(e.rankList,e,e.renderItem),e}e.RechargeRankShow=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.recConsRank.rechargeTargetItemUI,__extends(b_s,p_l),b_s.prototype.updateView=function(e){this.actStr=e;var p_l=RechargeRankModel.ins.getRankVo(this.actStr),p_g=this.dataSource;this.list.array=b_p.getRewardDatas(p_g.reward),this.gotImage.visible=RechargeRankModel.ins.isTargetRewardById(p_g.index,e),this.rewTarBtn.visible=!this.gotImage.visible;var b_s=(j_x("34_1998_2258")+j_x("2376_1117_1012"));this.actStr==ActivityTypeDefine.BG_cs_consumeGoldRank&&(b_s=(j_x("844_455_1661")+j_x("2218_1117_1012"))),this.titleRank.text=b_s+p_g.aim+(j_x(2224));var d_u=p_l.targetNum;this.redPoint.visible=p_g.aim<=d_u&&this.rewTarBtn.visible,this.rewTarBtn.disabled=p_g.aim>d_u},b_s.prototype.renderItem=function(e,p_l){Qid(e,p_l)},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"rewTarBtn":this.dataSource&&RechargeRankModel.ins.reqAimReward(this.dataSource.index,this.actStr)}},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.list.itemRender=e.ItemBox,z_j.setList(p_g.list,p_g,p_g.renderItem),p_g.on(Laya.Event.CLICK,p_g,p_g.onMouseClick),p_g}e.RechargeTargetItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.recConsRank.rechargeTargetUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){this.actStr=this.dataSource;var e=RechargeRankModel.ins.getRankVo(this.actStr);this.rankNum.text=e.targetNum+"",this.on(Laya.Event.CLICK,this,this.onMouseClick),LED.on(l_r.RECHARGE_TAR_REW,this,this.updateView),this.goShopBtn.label=(j_x("711_2417_2258")+j_x(2376)),this.titleLab.text=(j_x("34_1998_1874")+j_x("867_514_2224")+""),this.tipsLab.text=(j_x("34_1998_1874")+j_x("867_514_2224")+j_x("1117_1012_1964")+j_x(949)+","+j_x("282_1163_1174")+j_x("2111_310_359")+j_x("2235_83")),this.actStr==ActivityTypeDefine.BG_cs_consumeGoldRank&&(this.goShopBtn.label=(j_x("711_2417_1820")+j_x(21)),this.titleLab.text=(j_x("844_455_1874")+j_x("867_514_2224")+""),this.tipsLab.text=(j_x("844_455_1874")+j_x("867_514_2224")+j_x("1117_1012_1964")+j_x(949)+","+j_x("282_1163_1174")+j_x("2111_310_359")+j_x("2235_83"))),this.updateView()},b_s.prototype.onRemove=function(){Wlz(LED,l_r,this,Laya)},b_s.prototype.updateView=function(){var e=this.actStr,p_l=RechargeRankModel.ins,p_g=p_l.getRankVo(this.actStr),b_s=ActivityModel.instance.getActivityConfigVoByType(e),d_u=p_g.getTarRewardCfg(b_s.subVo[0].round,p_l.targetRewardType(e));this.list.array=d_u.sort((function(p_l,p_g){var b_s=RechargeRankModel.ins;return b_s.targetState(p_l,e)-b_s.targetState(p_g,e)}))},b_s.prototype.renderItem=function(e,p_l){Ozt(e,p_l,this)},b_s.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"goShopBtn":this.actStr==ActivityTypeDefine.BG_cs_consumeGoldRank?e.ShopAllPanel.open(ShopConstant.type_prop):e.RechargePanel.open()}},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g.list.itemRender=e.RechargeTargetItem,z_j.setListScroll(p_g.list),z_j.setList(p_g.list,p_g,p_g.renderItem),p_g}e.RechargeTargetPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.weekend.weekendGift_cellUI,__extends(b_s,p_l),b_s.prototype.init=function(){Wyy(this,e,z_j,Laya)},b_s.prototype.setIndex=function(e){Kpt(e,this)},b_s.prototype.onClickRecBtn=function(){var e=WeekendActivityModel.ins.WeekendGift;if(0<this.index&&!e[this.index-1].isCanReward)b_p.broadcastNotice((j_x("774_1624_1355")+j_x("2420_1067_1737")+j_x("844_977_425")+j_x("861_130")));else{var p_l=this.dataSource;p_l&&(p_l.isCanReward?WeekendActivityModel.ins.reqGetGift(p_l.productId):p_l.isCanBuy&&(p_l.money,WeekendActivityModel.ins.reqBuyGift(p_l.productId,p_l.money)))}},b_s.prototype.updateCell=function(){var e=this.dataSource;if(this.dataSource){var p_l,p_g=e.money.toString().length;this.numSprite.x=this.numPoint.x+Math.max(0,27*(3-p_g)/2),b_p.getNumSp(NumType.FESTIVAL_NUM,e.money,this.numSprite,-10),this.list.array=e.items,this.redPoint.visible=e.isCanReward,this.agioLabel.text=e.agio+(j_x(1786)),this.limitLabel.color=3==e.isState?"#e32828":"#00802e",this.limitLabel.text=0<e.limit?Utils.$((j_x("2128_1355")+"{1}/{2}"),e.buy_count,e.limit):"",this.rechargeBtn.disabled=!1,this.originalNum.text=Utils.$(("("+j_x("2153_603")+"{1}"+j_x(1263)+")"),Math.floor(e.money/e.agio*100));var b_s=WeekendActivityModel.ins.WeekendGift;0<this.index&&!b_s[this.index-1].isCanReward&&3!=e.isState?this.tipLabel.visible=!0:this.tipLabel.visible=!1,p_l=e.isCanReward?(j_x("1163_1174_2111")):e.isCanBuy?(j_x("1355_2420")):(this.rechargeBtn.disabled=!0,(j_x("1300_1008_1482"))),this.rechargeBtn.label=p_l}},b_s.prototype.renderList=function(e,p_l){e&&e.dataSource&&(e.isShowName=!1,e.setItemData(e.dataSource))},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e.numPoint=new Laya.Point(e.numSprite.x,e.numSprite.y),e}e.WeekendGiftCell=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.weekend.weekendGiftPanelUI,__extends(b_s,p_l),b_s.prototype.init=function(){Ech(this,Laya,e,z_j)},b_s.prototype.updateView=function(){Apr(this,WeekendActivityModel)},b_s.prototype.onRemove=function(){Snb(LED,l_r,this)},b_s.prototype.onAdded=function(){var e=this.dataSource;e&&(ActivityModel.reqActivityRecord(e.type),LED.on(l_r.WEEKEND_GIFT_INFO,this,this.updateView))},b_s.prototype.renderList=function(e,p_l){e&&e.setIndex(p_l),e.updateCell()},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.WeekendGiftPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.weekend.weekendTurntableUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){this.on(Laya.Event.CLICK,this,this.onClick),this.helpBtn.on(Laya.Event.CLICK,this,this.onHelpBtnClick),LED.on(l_r.ITEM_ADD,this,this.updateConsume),LED.on(l_r.ITEM_REMOVE,this,this.updateConsume),LED.on(l_r.ITEM_AMOUNT_CHANGE,this,this.updateConsume),LED.on(l_r.WALLET_CHANGE,this,this.updateConsume),LED.on(l_r.ACTIVITY_LOTTERT_INFO,this,this.updateViewInfo),LED.on(l_r.ACTIVITY_LOTTERT_DRAW,this,this.playAni),LED.on(l_r.ACTIVITY_LOTTERT_RECORD,this,this.updateRecordList);var e=this.dataSource;this.lightImage.rotation=0,this.rotateNeedle.rotation=0,this.checkAni.selected=!this.isTween,this.checkTen.selected=this.isTenContinue,ActivityModel.reqActivityRecord(e.type),this.isBgActivity=e.enum==ActivityTypeEnum.BG,n_t.instance.reqRecordInfo(this.tagName,RecordType.AllSer,this.isBgActivity),this.updateView()},b_s.prototype.onClickGoBtn=function(){d_o.instance.isOpenStartDeley=!0;var e=this.isTenContinue?10:1;n_t.instance.reqStartTurn(this.tagName,e,this.isBgActivity)},b_s.prototype.renderItem=function(p_l,p_g){var b_s=p_l.getChildByName("itembox1");b_s||((b_s=new e.ItemBox).name="itembox1",p_l.addChild(b_s));var d_u=new ModuleItemVO;d_u.id=p_l.dataSource.reward[0],d_u.amount=p_l.dataSource.reward[1],b_s.setItemData(d_u),b_s.setName("")},b_s.prototype.updateItems=function(){var e=n_t.instance.getCfgByNameAndRound(this.tagName,n_t.instance.countActivityRound(this.tagName));if(e)for(var p_l in e.cfgByRound){var p_g=this.items.getChildByName("item"+p_l);p_g&&(p_g.dataSource=e.cfgByRound[p_l],this.renderItem(p_g,parseInt(p_l)))}},b_s.prototype.onRemove=function(){LED.off(l_r.ITEM_ADD,this,this.updateConsume),LED.off(l_r.ITEM_REMOVE,this,this.updateConsume),LED.off(l_r.ITEM_AMOUNT_CHANGE,this,this.updateConsume),LED.off(l_r.WALLET_CHANGE,this,this.updateConsume),this.off(Laya.Event.CLICK,this,this.onClick),this.helpBtn.off(Laya.Event.CLICK,this,this.onHelpBtnClick),LED.off(l_r.ACTIVITY_LOTTERT_INFO,this,this.updateViewInfo),LED.off(l_r.ACTIVITY_LOTTERT_DRAW,this,this.playAni),LED.off(l_r.ACTIVITY_LOTTERT_RECORD,this,this.updateRecordList),d_o.instance.isOpenStartDeley=!1,LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.WeekActivity)},b_s.prototype.getLottertShowTime=function(e){var p_l=0;if(e&&!this.isBgActivity){var p_g=Config.activity_activity[e.gsa_id].param;p_l=p_g&&p_g.showTime?p_g.showTime:0}else p_l=e.showTime;return p_l},b_s.prototype.renderBox=function(e,p_l){var p_g=e.getChildByName("playerName"),b_s=e.getChildByName("content"),d_u=e.getChildByName("item"),b_e=e.dataSource,d_m="";if(b_e&&b_e.recs&&0<b_e.recs.length)for(var d_w in b_e.recs){var f_t=n_t.instance.getGiftCfgById(this.tagName,b_e.recs[d_w]);if(!f_t)return;var v_z=Config.CItem(f_t.reward[0]),d_h=",";parseInt(d_w)==b_e.recs.length-1&&(d_h=""),d_m+=Utils.$("{1}*{2}{3}",v_z.name,f_t.reward[1],d_h)}p_g.text=b_e.name,d_u.text=d_m,b_s.x=p_g.x+p_g.textField.textWidth+3,d_u.x=b_s.x+b_s.textField.textWidth+3},b_s.prototype.stopAni=function(){Qbu(this,d_o,ItemSourceDefine,Laya)},b_s.prototype.updateConsume=function(e){void 0===e&&(e=null);var p_l,p_g=n_t.instance.getTimeConsume(this.tagName),b_s=Config.CItem(p_g[0][0]),d_u=BagModel.instance.getItemCountByItemID(p_g[0][0],BagTypeDefine.BAG_TYPE_ITEM),b_e=d_u>=p_g[0][1]?"#71de66":"#e32828";p_l=p_g[0][0]<100?Utils.setImg(Resource.ResUrl.getIconUrl(b_s.icon),40,40)+Utils.setColor(Utils.$("{1}",p_g[0][1]),b_e):Utils.setImg(Resource.ResUrl.getIconUrl(b_s.icon),40,40)+Utils.setColor(Utils.$("{1}/{2}",d_u,p_g[0][1]),b_e),this.consume.innerHTML=p_l},b_s.prototype.updateViewInfo=function(){Myk(n_t,this)},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"goBtn":if(this.isPlayAni)return;var p_g=this.dataSource,b_s=this.getLottertShowTime(p_g);if(p_g.sulTime-b_s<=0)return void b_p.broadcastNotice((j_x("2462_2035_1796")+j_x("1878_1702_2460")+j_x(1273)));var d_u=n_t.instance.getTimeConsume(this.tagName,this.isTenContinue);if(!b_p.checkConsume(d_u,!0))return;if(d_u[0][0]<100){var b_e=Config.CItem(d_u[0][0]);b_e&&b_p.confirm(Utils.$((j_x("68_2032_1661")+j_x(1502)+"{1}{2}"+j_x("2195_2235")+""),d_u[0][1],b_e.name),this.onClickGoBtn.bind(this),null,!1,!1,!1,!0,"tagName")}else this.onClickGoBtn();break;case"checkAni":this.isTween=!this.isTween;break;case"checkTen":this.isTenContinue=!this.isTenContinue;break;case"recordClick":e.LottertDrawRecordPanel.open(this.tagName,this.isBgActivity);break;case"exchangeBtn":this.redPoint.visible=n_t.instance.getMemberInfo(this.tagName).isRedPoint=!1,e.LottertDrawExchangePanel.open(this.tagName,this.isBgActivity)}},b_s.prototype.updateRecordList=function(e){e.ty==this.tagName&&e&&e.mode==RecordType.AllSer&&(e.records&&0<e.records.length?(e.records.sort((function(e,p_l){return e.time-p_l.time})),this.recordList.array=e.records,this.recordList.scrollTo(this.recordList.array.length-2),this.recordList.visible=!0,this.recordNull.visible=!1):(this.recordList.visible=!1,this.recordNull.visible=!0))},b_s.prototype.updateView=function(){Iub(this)},b_s.prototype.onHelpBtnClick=function(){Oup(e,this)},b_s.prototype.playAni=function(e){if(e.ty==this.tagName)if(this.isTween&&1==e.times){this.isPlayAni=!0;var p_l=n_t.instance.getCfgByNameAndRound(e.ty,n_t.instance.countActivityRound(e.ty));if(!p_l)return;this.rotateNeedle.rotation=this.lightImage.rotation=Math.floor(this.lightImage.rotation%360);var p_g=n_t.instance.countAngle(p_l,e.res[0],this.lightImage.rotation),b_s=360*p_g.circle+p_g.Angle;Laya.Tween.to(this.rotateNeedle,{rotation:b_s},2e3,Laya.Ease.circOut,Laya.Handler.create(this,this.aniComplete,[e])),Laya.Tween.to(this.lightImage,{rotation:b_s},2e3,Laya.Ease.circOut,Laya.Handler.create(this,this.aniComplete,[e]))}else j_a.otherIns().add(this,this.aniComplete,[e])},b_s.prototype.aniComplete=function(p_l){Wei(p_l,this,n_t,RecordType,RankModel,e)},b_s);function b_s(){var e=p_l.call(this)||this;return e.isTween=!0,e.isTenContinue=!1,e.isPlayAni=!1,e.tagName=LotterType.WEEKEND,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.recordClick.mouseEnabled=!0,z_j.setList(e.recordList,e,e.renderBox),z_j.setListScroll(e.recordList),z_j.setHtml(e.consume,22,"#f0ecd8",10,"center"),e.consume.mouseThrough=!0,e}e.WeekendLottertDrawPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.weekend.weekendUI,__extends(b_s,p_l),b_s.prototype.sortActivity=function(){for(var p_l,p_g=!(this.activityPos=[e.WeekendTab.LottertDraw,e.WeekendTab.RechargeGift]),b_s=0,d_u=0,b_e=this.dataSource.data.subVo;d_u<b_e.length;d_u++){var d_m=b_e[d_u],d_w=-1;switch(d_m.type){case ActivityTypeDefine.BG_newHolidayGift:d_w=e.WeekendTab.RechargeGift,p_l=e.WeekendGiftPanel,b_s=1;break;case ActivityTypeDefine.BG_turntableNewHoliday:d_w=e.WeekendTab.LottertDraw,p_l=e.WeekendLottertDrawPanel,p_g=!(b_s=0)}if(0<=d_w)if(this.activityVOs[d_w]){var f_t=this.activityVOs[d_w];f_t.vo=d_m,f_t.type=p_l,f_t.needComsumRed=p_g,f_t.clipIndex=b_s}else this.activityVOs[d_w]={vo:d_m,type:p_l,panel:null,needComsumRed:p_g,clipIndex:b_s}}for(var v_z=[],d_h=0;d_h<this.activityPos.length;d_h++)this.activityVOs[this.activityPos[d_h]]&&v_z.push(this.activityPos[d_h]);this.activityPos=v_z},b_s.prototype.addPanelByIndex=function(e){var p_l=this.activityVOs[e];if(!p_l)return null;var p_g=p_l.panel;return p_g||(p_g=new p_l.type,p_l.panel=p_g),p_g.dataSource=p_l.vo,this.panelContent.addChild(p_g),p_g.visible=!0,p_g},b_s.prototype.updateConsumeRed=function(){for(var e in this.activityPos)this.activityVOs[this.activityPos[e]].needComsumRed&&this.updatePoint(parseInt(e),this.activityPos[e])},b_s.prototype.hideShowChildPanel=function(e,p_l){e&&e.parent&&(e.visible=p_l)},b_s.prototype.onTabSelect=function(e){if(-1!=e){var p_l=this.tabList.getCell(e),p_g=this.activityPos[e];if(p_l&&null!=p_g){var b_s=this.activityVOs[p_g];if(b_s){var d_u=this.activityVOs[this.currentOpen];d_u&&this.hideShowChildPanel(d_u.panel,!1),b_s&&b_s.panel&&b_s.panel.parent?(b_s.panel,this.hideShowChildPanel(b_s.panel,!0)):this.addPanelByIndex(p_g),this.setCellSelect(this.currentIndex,!1),this.setCellSelect(e,!0),this.currentIndex=e,this.currentOpen=p_g,this.timeLabel.text=WeekendActivityModel.ins.getWeekendTimeByVo(b_s.vo),this.bg.skin=this.festivalImage(b_s.vo),this.activityLabel.text=b_s.vo.dec,WeekendActivityModel.ins._WeekendfristRed=!1}}}},b_s.prototype.removeChildPanel=function(e){e&&e.parent&&e.removeSelf()},b_s.open=function(e,p_l){void 0===p_l&&(p_l=0),(e=e||ActivityModel.instance.getActivityConfigVo(FuncDefine.WeekActivity))?UIM.open(b_s,["activity/festivals.atlas","activity/turnTable.atlas"],{index:p_l,data:e},!1):b_p.broadcastNotice((j_x("1796_1878_206")+j_x("155_1186")))},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close()}},b_s.prototype.renderItem=function(e,p_l){var p_g=e.dataSource,b_s=this.activityVOs[p_g];if(b_s){var d_u=e.getChildByName("red");e.getChildByName("selectClip").getChildByName("clip").index=b_s.clipIndex,d_u.visible=WeekendActivityModel.ins.weekendRedPoint(b_s.vo)}},b_s.prototype.festivalImage=function(e){return e?e.type==ActivityTypeDefine.BG_loginActivity?"res/ui/activity/festivals/bg_denglu.png":e.type==ActivityTypeDefine.BG_newHolidayGift?"res/ui/activity/festivals/bg_zhoumolibao.png":"res/ui/activity/festivals/bg_zhoumozhuanpan.png":""},b_s.prototype.updateTime=function(){var e=this.activityVOs[this.currentOpen];e&&e.vo.type!=ActivityTypeDefine.BG_loginActivity&&(this.timeLabel.text=WeekendActivityModel.ins.getWeekendTimeByVo(e.vo))},b_s.prototype.onAdded=function(){if(this.dataSource){var e=this.dataSource.index||0;this.sortActivity(),this.on(Laya.Event.CLICK,this,this.onMouseClick),this.tabList.array=this.activityPos,this.tabList.selectedIndex=e,Laya.timer.loop(1e3,this,this.updateTime),LED.on(l_r.ITEM_ADD,this,this.updateConsumeRed),LED.on(l_r.ITEM_REMOVE,this,this.updateConsumeRed),LED.on(l_r.ITEM_AMOUNT_CHANGE,this,this.updateConsumeRed),LED.on(l_r.WEEKEND_SIGN_INFO,this,this.updatePoint),LED.on(l_r.WEEKEND_GIFT_INFO,this,this.updatePoint)}},b_s.prototype.onRemove=function(){Mli(this,Laya,LED,l_r)},b_s.prototype.setCellSelect=function(e,p_l){var p_g=this.tabList.getCell(e);if(p_g){var b_s=p_g.getChildByName("selectClip"),d_u=b_s.getChildByName("clip");b_s.selected=p_l,d_u.index=p_l?e+3:e}},b_s.prototype.updatePoint=function(e,p_l){void 0===e&&(e=-1),void 0===p_l&&(p_l=-1),e=-1==e?this.currentIndex:e,p_l=-1==p_l?this.currentOpen:p_l;var p_g=this.activityVOs[p_l];if(p_g){var b_s=this.tabList.getCell(e);b_s&&(b_s.getChildByName("red").visible=WeekendActivityModel.ins.weekendRedPoint(p_g.vo))}},b_s.close=function(e){void 0===e&&(e=!1),UIM.close(b_s,e,["res/ui/activity/festivals/zhuanpan_di.png","res/ui/activity/festivals/bg_zhoumozhuanpan.png","res/ui/activity/festivals/bg_denglu.png","res/ui/activity/festivals/bg_zhoumolibao.png"])},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),z_j.setList(p_g.tabList,p_g,p_g.renderItem,p_g.onTabSelect),p_g.activityPos=[e.WeekendTab.LottertDraw,e.WeekendTab.RechargeGift],p_g.currentIndex=-1,p_g.activityVOs={},p_g.currentOpen=-1,p_g}e.WeekendMainPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.weekend.weekendSign_cellUI,__extends(b_s,p_l),b_s.prototype.init=function(){Uok(this,e,z_j,Laya)},b_s.prototype.onClickRecBtn=function(){var e=this.dataSource;e&&1==e.state&&WeekendActivityModel.ins.reqGetReward(e.day)},b_s.prototype.renderList=function(e,p_l){e&&e.dataSource&&(e.isShowName=!1,e.setItemData(e.dataSource))},b_s.prototype.updateCell=function(){var e,p_l=this.dataSource;this.dataSource&&(this.titleClip.index=p_l.day,this.list.array=p_l.items,e=3==p_l.state?(j_x("1300_1241_1174")+j_x(2111)):(j_x("1174_2111_2235")+j_x(83)),this.redPoint.visible=1==p_l.state,this.rechargeBtn.disabled=1!=p_l.state,this.rechargeBtn.label=e)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.WeekendSignCell=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.weekend.weekendSignPanelUI,__extends(b_s,p_l),b_s.prototype.init=function(){Cjf(this,Laya,e,z_j)},b_s.prototype.onAdded=function(){var e=this.dataSource;e&&(ActivityModel.reqActivityRecord(e.type),LED.on(l_r.WEEKEND_SIGN_INFO,this,this.updateView))},b_s.prototype.updateView=function(){Myv(this,WeekendActivityModel)},b_s.prototype.onRemove=function(){Ezm(LED,l_r,this)},b_s.prototype.renderList=function(e,p_l){e&&e.updateCell()},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.WeekendSignPanel=p_g}(UI=UI||{});var n_k=function(e){function p_l(){var p_l=e.call(this)||this;return p_l._IsPlayStand=!0,p_l._IsShow=!1,p_l._lastPosX=p_l._lastPosY=-1,p_l._modelCtrl=new ShowModelController(p_l,Engine2d.Tools.BindDomain(p_l.bodyLoadedComplete,p_l),Engine2d.Tools.BindDomain(p_l.aniPlayComplete,p_l)),p_l}return __extends(p_l,e),Object.defineProperty(p_l.prototype,"actBackFunc",{set:function(e){this._actionBackFunc=e},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"IsPlayStand",{set:function(e){this._IsPlayStand=e},enumerable:!0,configurable:!0}),p_l.prototype.bodyLoadedComplete=function(e){Kch(e,this,Laya)},p_l.prototype.changeModel=function(e){Cgu(e,this)},p_l.prototype.state=function(e,p_l){void 0===e&&(e=0),void 0===p_l&&(p_l=Engine2d.Animation.SHOW_INTERVAL),this._modelCtrl.state(e,p_l)},p_l.prototype.changRide=function(e,p_l,p_g){void 0===p_l&&(p_l=0),void 0===p_g&&(p_g=Engine2d.Animation.SHOW_INTERVAL),this._modelCtrl.changeMount(e,p_l),this._modelCtrl.setMountAction(Engine2d.StandardActions.SA_STAND,p_l,!0,p_g)},p_l.prototype.show=function(e,p_l){void 0===e&&(e=0),void 0===p_l&&(p_l=Engine2d.Animation.SHOW_INTERVAL),this._modelCtrl.show(e,p_l)},p_l.prototype.sit=function(e,p_l){void 0===e&&(e=4),void 0===p_l&&(p_l=Engine2d.Animation.SHOW_INTERVAL),this._modelCtrl.sit(e,p_l)},p_l.prototype.collect=function(e,p_l){void 0===e&&(e=6),void 0===p_l&&(p_l=Engine2d.Animation.SHOW_INTERVAL),this._modelCtrl.collect(e,p_l)},p_l.prototype.stand=function(e,p_l){void 0===e&&(e=4),void 0===p_l&&(p_l=Engine2d.Animation.SHOW_INTERVAL),this._modelCtrl.stand(e,p_l)},p_l.prototype.aniPlayComplete=function(e,p_l){this._IsPlayStand&&this._modelCtrl.stand(p_l),null!=this._actionBackFunc&&this._actionBackFunc.apply(null,[e,p_l])},p_l.prototype.changWeapon=function(e,p_l){void 0===p_l&&(p_l=Engine2d.Animation.SHOW_INTERVAL),this._modelCtrl.changeWeapon(e,p_l)},Object.defineProperty(p_l.prototype,"ShowRid",{set:function(e){this._IsShow=e},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"HaveRid",{set:function(e){this._modelCtrl.HaveRid=e},enumerable:!0,configurable:!0}),p_l.prototype.setMountScale=function(e,p_l){Kht(e,p_l,this)},p_l.prototype.AddRoleHeadSprite=function(e){Ajn(e,this)},p_l.prototype.SetTopPos=function(e){Epi(e,this)},p_l.prototype.clearStateEfts=function(){Krm(this)},p_l.prototype.playSkillAni=function(e,p_l,p_g){void 0===p_g&&(p_g=!0);var b_s=Config.skill_skill[e],d_u=1001001==(b_s=b_s||Config.skill_skill[1001001]).id,b_e=b_s.act?b_s.act[0]:b_s.act,d_m=b_s.actSpeed?b_s.actSpeed[0]:Engine2d.Animation.ANIMATION_INTERVAL;b_s.actTime&&b_s.actTime[0],b_s.act&&(1<b_s.act.length&&d_u&&(b_e=b_s.act[0],d_m=b_s.actSpeed[0]?b_s.actSpeed[0]:Engine2d.Animation.ANIMATION_INTERVAL,!b_s.actTime||b_s.actTime[0]&&b_s.actTime[0]),b_e&&this.setAction(b_e,p_l,p_g,d_m))},p_l.prototype.showStateEfts=function(e,p_l){if(void 0===p_l&&(p_l=0),this.clearStateEfts(),e&&0<e.length)for(var p_g in this.stateEfts=this.stateEfts||[],e){var b_s=new StateEffectVo;b_s.playEffect(this._modelCtrl,e[p_g],p_l),this.stateEfts.push(b_s)}},p_l.prototype.changRoleSkin=function(e,p_l,p_g,b_s,d_u){if(void 0===p_l&&(p_l=!1),void 0===p_g&&(p_g=!0),void 0===b_s&&(b_s=1),void 0===d_u&&(d_u=1),e.type===Engine2d.ActorTypeDefine.PLAYER){var b_e=e,d_m=Resource.ResManager.getDefaultPlayerAvatar(d_u,b_e.entryId);this.changeModel(d_m),p_l?this.collect():(p_g?this.show():this.stand(),this._IsShow&&this.changRide(b_e.rideId,3)),d_m=Resource.ResManager.getDefaultWeaponAvatar(b_s,b_e.entryId),this.changWeapon(d_m)}else if(e.type===Engine2d.ActorTypeDefine.MONSTER){var d_w=e;d_m=Config.obj_monster[d_w.entryId].avatar,this.changeModel(d_m),p_g?this.show():this.stand()}},p_l.prototype.setAction=function(e,p_l,p_g,b_s){void 0===p_g&&(p_g=!1),void 0===b_s&&(b_s=Engine2d.Animation.SHOW_INTERVAL),this._modelCtrl.setAction(e,p_l,p_g,b_s)},Object.defineProperty(p_l.prototype,"curDir",{get:function(){return this._modelCtrl.curDir},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"curAct",{get:function(){return this._modelCtrl.curAction},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"modelBounds",{get:function(){return this._modelCtrl.bodyAni.getGraphicBounds()},enumerable:!0,configurable:!0}),p_l.prototype.startWave=function(e,p_l,p_g){void 0===p_g&&(p_g=!0),-1===this._lastPosX?(this._lastPosX=this.x,this._lastPosY=this.y):(this.x=this._lastPosX,this.y=this._lastPosY),this._dis=e,this._speed=p_l,this._isVerDir=p_g,Laya.timer.loop(30,this,this.loop)},p_l.prototype.stopWave=function(){0<this._dis&&(Laya.timer.clear(this,this.loop),this.x=this._lastPosX,this.y=this._lastPosY)},p_l.prototype.loop=function(){this._isVerDir?(Math.abs(this.y-this._lastPosY)>=this._dis&&(this._speed=-this._speed),this.y+=this._speed):(Math.abs(this.x-this._lastPosX)>=this._dis&&(this._speed=-this._speed),this.x+=this._speed)},Object.defineProperty(p_l.prototype,"fightingCtrl",{get:function(){return this._modelCtrl},enumerable:!0,configurable:!0}),p_l.prototype.stop=function(){Ssq(this)},p_l.prototype.destroy=function(p_l){Exj(p_l,e,this)},p_l.prototype.dispose=function(){this.clearStateEfts(),this.stopWave(),this._modelCtrl&&(this._modelCtrl.dispose(),this._modelCtrl=null)},p_l.prototype.clearRes=function(){this._modelCtrl&&this._modelCtrl.clearAnimaOnly(),this.clearStateEfts()},p_l}(Laya.Sprite),StateEffectVo=function(){function e(){}return e.prototype.playEffect=function(e,p_l,p_g){if(void 0===p_g&&(p_g=0),!e)return!1;this.ctrl=e,this.effectID=p_l,this.offsetY=p_g,this.ani=this.ani||Resource.ResManager.Instance.freeAnimation,this.ani.on(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onAnimLoadedComplete);var b_s=Config.effects[p_l];this.setSkinRootUrl(b_s.name);var d_u=0<b_s.pSpeed?b_s.pSpeed:Engine2d.Animation.ANIMATION_INTERVAL;return this.setAction(b_s.name,0,0<b_s.loop,d_u),!0},e.prototype.setSkinRootUrl=function(e){Kam(e,this,Resource,EffectType)},e.prototype.dispose=function(){this.ani&&(this.ani.off(Resource.ResourceEvent.ANIMATION_LOAD_COMPLETE,this,this.onAnimLoadedComplete),Resource.ResManager.Instance.recoverAnimation(this.ani),this.ani=null),this.effectID=-1},e.prototype.onAnimLoadedComplete=function(e){if(this.ani&&this.ani.url==e){if(0<this.effectID){var p_l=Config.effects[this.effectID].delay;if(0<p_l)return void Laya.timer.once(p_l,this,this.delayPlay)}this.delayPlay()}},e.prototype.resetAnimPivot=function(e){if(e){var p_l=e.getGraphicBounds();p_l&&0!=p_l.width&&0!=p_l.height&&e.pivot(p_l.width/2,p_l.height/2)}},e.prototype.setAction=function(e,p_l,p_g,b_s){void 0===p_g&&(p_g=!1),void 0===b_s&&(b_s=Engine2d.Animation.ANIMATION_INTERVAL),this.ani.setAction(e,p_l,p_g,b_s)},e.prototype.delayPlay=function(){if(this.ctrl){if(this.ani.play(0,!0),null===this.ani.parent&&0<this.effectID){var e=Config.effects[this.effectID];1===e.layer?this.ctrl.addUnderChild(this.ani):this.ctrl.addPopChild(this.ani);var p_l=e.posX,p_g=e.posY;this.ani.pos(p_l,p_g+this.offsetY)}this.resetAnimPivot(this.ani)}else this.dispose()},e.prototype.onAnimationPlayCompleted=function(){this.ani&&0==this.ani.loop&&this.dispose()},e.prototype.update=function(e){return Spr(e,this)},e.prototype.zoomMoveScale=function(e){this.ani&&(this.ani.scaleX=this.ani.scaleY=e)},e}(),ShowModelController=function(e){function p_l(p_l,p_g,b_s){void 0===b_s&&(b_s=null);var d_u=e.call(this,p_l,p_g,b_s)||this;return d_u._IsHaveRid=!1,d_u}return __extends(p_l,e),p_l.prototype.clearLastRes=function(){this._bodyAni&&this._bodyAni.clearLastRes2(!0),this._weaponAni&&this._weaponAni.clearLastRes2(!0),this._mountAni&&this._mountAni.clearLastRes2(!0)},p_l.prototype.resetAnimPivot=function(p_l,p_g,b_s){if(void 0===p_g&&(p_g=!1),void 0===b_s&&(b_s=!1),!p_l)return!0;var d_u=p_l.getGraphicBounds();if(d_u&&0!=d_u.width&&0!=d_u.height){var b_e=d_u.height/2,d_m=d_u.width/2;if(this._IsHaveRid){if(p_l==this._mountAni)return e.prototype.resetAnimPivot.call(this,p_l,p_g,b_s);var d_w=Engine2d.Tools.getPivotConfig(p_l.avatar);d_w?(b_e+=d_w.showPivot[1],d_m+=d_w.showPivot[0]):b_s&&this._bodyAni&&(b_e=this._bodyAni.pivotY,d_m=this._bodyAni.pivotX)}return p_l.pivotX=d_m,p_l.pivotY=b_e,!0}return this._timeId,!1},p_l.prototype.setMountScale=function(e,p_l){this._mountAni&&this._mountAni.scale(e,p_l)},p_l.prototype.SetRoleHeadSprite=function(e){Ssw(e,this)},Object.defineProperty(p_l.prototype,"HaveRid",{get:function(){return this._IsHaveRid},set:function(e){this._IsHaveRid=e,this._mountAni&&(this._mountAni.visible=e)},enumerable:!0,configurable:!0}),p_l.prototype.SetTopPos=function(e){if(this._bodyAni){var p_l=this._bodyAni.getGraphicBounds(),p_g=Engine2d.Tools.getPivotConfig(this._bodyAni.avatar);if(p_l&&0!=p_l.width&&0!=p_l.height){var b_s=p_l.height/4-30,d_u=p_l.width/8;p_g&&(b_s=p_g.size[1]/2+105,d_u=p_g.size[0]/2+5),e.pos(-d_u,-b_s)}else e.pos(-44,-185)}},p_l}(Engine2d.ModelController);!function(e){var p_l,p_g=(p_l=ui.window.adventure.adventureGiveUpPopupUI,__extends(b_s,p_l),b_s.prototype.init=function(){Agy(this,Laya)},b_s.prototype.onAdded=function(){Yhu(this)},b_s.open=function(e){Itq(e,UIM,b_s)},b_s.prototype.onRemoved=function(){},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":case"cancelBtn":b_s.close();break;case"confirmBrn":this.adventureId&&AdventureModel.ins.giveUpAdventure(this.adventureId),b_s.close()}b_s.close()},b_s.close=function(){Uzx(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.AdventureGiveUpPopup=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.adventure.adventureLimitShopPanelUI,__extends(b_s,p_l),b_s.prototype.init=function(e){e&&(this.panelInfo=e);var p_l=AdventureModel.ins.getLimitShopConf,p_g=this.panelInfo.rewardId;this.discount_label.index=p_l[p_g].discount,this.needMoney=p_l[p_g].money[0][1],this.moneyLabel.text=""+this.needMoney,this.moneyLabel.color=b_p.checkCoin(1,this.needMoney)?"#71de66":"#e32828",this.limitShop_list.array=b_p.getRewardDatas(p_l[p_g].item_show),this.maskBox.visible=!1,this.endTime=e.endTime,this.setTimeText(),this.discount_label.visible=!1},b_s.prototype.onAdded=function(){Iqd(this,Laya,LED,l_r)},b_s.prototype.setMaskBox=function(e){(this.maskBox.visible=e)?(z_j.setGray(this.buy_btn),z_j.setGray(this.GiveUp_btn),Laya.timer.clearAll(this),this.timeText.text=(j_x("1300_396_2426"))):(z_j.setGray(this.buy_btn,e),z_j.setGray(this.GiveUp_btn,e))},b_s.prototype.adventureComplete=function(e){e==this.panelInfo.id&&(this.setMaskBox(!0),this.GiveUp_btn.label=(j_x("1300_396_2426")),this.buy_btn.gray=!0,this.buy_btn.mouseEnabled=!1)},b_s.prototype.renderItem=function(e,p_l){e&&(e.isShowName=!1,e.isShowTick=!1,e.isShowQuaEft=!1,e.setItemData(e.dataSource))},b_s.prototype.setTimeText=function(){var e;Laya.timer.clear(this,this.setTimeText),0<(e=this.endTime-SyncTime.serverTime/1e3)?(Laya.timer.once(1e3,this,this.setTimeText),this.timeText.text=Utils.formatTimeStr(Math.floor(e)),this.timeText.color="#f0ecd8",this.timeText.visible=!0):(this.timeText.visible=!0,this.setMaskBox(!0))},b_s.prototype.onBuyItem=function(){b_p.checkCoin(1,this.needMoney)?AdventureModel.ins.reqBuyLimitShopItem(this.panelInfo.id):b_p.broadcastNotice((j_x("1263_869_2462")+j_x(1779)))},b_s.prototype.adventureEndHandel=function(e){if(e)switch(e.endType){case 1:this.adventureComplete(e.id);break;case 2:this.adventureTimeOut(e.id);break;case 3:this.adventureGiveUp(e.id)}},b_s.prototype.giveUpAdventure=function(){Odv(e,this)},b_s.prototype.adventureGiveUp=function(e){e==this.panelInfo.id&&(this.setMaskBox(!0),this.GiveUp_btn.label=(j_x("1300_2191_482")),this.buy_btn.gray=!0,this.buy_btn.mouseEnabled=!1)},b_s.prototype.adventureTimeOut=function(e){e==this.panelInfo.id&&(this.setMaskBox(!0),this.GiveUp_btn.label=(j_x("1300_396_2426")),this.buy_btn.gray=!0,this.buy_btn.mouseEnabled=!1)},b_s.prototype.onRemove=function(){Ghj(this,Laya,LED,l_r)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g.limitShop_list.itemRender=e.ItemBox,p_g.needMoney=0,z_j.setList(p_g.limitShop_list,p_g,p_g.renderItem),p_g}e.AdventureLimitShopPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.adventure.adventureMainPanelUI,__extends(b_s,p_l),b_s.prototype.sortAdventure=function(){var e=AdventureModel.ins.adventureInfo;0<e.length&&(this.adventureVOs=e,this.tabList.array=this.adventureVOs)},b_s.prototype.updateLeftTime=function(){Asf(this,AdventureModel)},b_s.prototype.onAdded=function(e){this.adventureVOs=[],AdventureModel.ins.reqUpdateAdventureInfo(),this.on(Laya.Event.CLICK,this,this.onMouseClick),LED.on(l_r.ADVENTURE_END,this,this.adventureEnd),this.dataSource&&(this.sortAdventure(),this.updateLeftTime(),this.tabList.selectedIndex=0)},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close()}},b_s.prototype.onRemove=function(e){Sul(e,this,Laya,LED,l_r)},b_s.prototype.renderItem=function(e,p_l){e?e.setData():console.log("adventure box not exit.")},b_s.prototype.adventureEnd=function(e){if(0<this.adventureVOs.length){for(var p_l in this.adventureVOs)if(this.adventureVOs[p_l].id==e.id){this.adventureVOs[p_l].endStatus=-2;var p_g=this.adventureVOs[p_l].endTime;this.adventureVOs[p_l].endTime=0,4==e.endType&&(this.adventureVOs[p_l].endStatus=-3,this.adventureVOs[p_l].endTime=p_g)}this.tabList.array=this.adventureVOs}},b_s.prototype.onTabSelect=function(e){-1!==e&&(this.adventureVOs[e]&&-1==this.adventureVOs[e].endStatus||this.updatePanel(e))},b_s.prototype.updatePanel=function(p_l){var p_g,d_u=this.adventureVOs[p_l];if(d_u){if(this.hideAndShowPanel(p_l),!this.panelContenBox.getChildByName(d_u.id+""))switch(d_u.type){case 1:(p_g=new e.AdventureRechargeGiftPanel).init(d_u),this.panelContenBox.addChild(p_g),p_g.name=""+d_u.id,this.panelContenBox.visible=!0;break;case 2:(p_g=new e.AdventureLimitShopPanel).init(d_u),this.panelContenBox.addChild(p_g),p_g.name=""+d_u.id,this.panelContenBox.visible=!0;break;case 3:(p_g=new e.AdventureQuestionPanel).init(d_u),this.panelContenBox.addChild(p_g),p_g.name=""+d_u.id,this.panelContenBox.visible=!0;break;case-1:this.panelContenBox.visible=!1}}else b_s.close()},b_s.prototype.hideAndShowPanel=function(e){var p_l=this.adventureVOs[e];for(var p_g in this.panelContenBox._childs)this.panelContenBox._childs[p_g].name==p_l.id?this.panelContenBox._childs[p_g].visible=!0:this.panelContenBox._childs[p_g].visible=!1},b_s.open=function(e,p_l){void 0===p_l&&(p_l=0),UIM.open(b_s,["adventure.atlas"],{vo:e,index:p_l},!1,!1,!0,!0)},b_s.close=function(){Qfy(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),z_j.setList(p_g.tabList,p_g,p_g.renderItem,p_g.onTabSelect),p_g.tabList.itemRender=e.adventure_tabCell,p_g.tabList.selectedIndex=-1,z_j.setListScroll(p_g.tabList,!1),p_g.adventureVOs=[],p_g}e.AdventureMainPanel=p_g;var d_u,b_e=(d_u=ui.window.adventure.adventure_effectUI,__extends(d_m,d_u),d_m.prototype.init=function(){Mwx(this,Laya)},d_m.prototype.stopEffect=function(){Qxn(d_m)},d_m.prototype.playEffect=function(){var e=new Laya.Point;e.x=this.stage.width/2,e.y=this.stage.height/2;var p_l=new Laya.Point,p_g=UIM.instance.getMainLetUI();(new Laya.Image).skin="res/ui/mainUI/Button_adventure.png",p_g&&(p_l=p_g.btn_adventure.localToGlobal(p_l)),this.flyLittleToBagEffect("res/ui/mainUI/Button_adventure.png",e,p_l,.1,2,this.stopEffect)},d_m.open=function(e){void 0===e&&(e=0),UIM.open(d_m,["activity/festivals.atlas","activity/turnTable.atlas"],e,!1,!1,!0,!0)},d_m.prototype.flyLittleToBagEffect=function(e,p_l,p_g,b_s,d_u,b_e){void 0===d_u&&(d_u=1.5);var d_m=Laya.Pool.getItemByClass("flyLittleToBagEffect",Laya.Image);function d_w(e){null!=e&&(e.skin=null,e.x=e.y=0,e.removeSelf(),Laya.Pool.recover("flyLittleToBagEffect",e),null!=b_e&&b_e())}function f_t(e,p_l){void 0===p_l&&(p_l=2),Laya.Tween.to(e,{scaleX:p_l,scaleY:p_l},500,null,Laya.Handler.create(this,v_z,e,!0))}d_m.skin=e,d_m.scale(b_s,b_s),d_m.pos(p_l.x,p_l.y),d_m.alpha=1,Laya.stage.addChild(d_m),d_m.pivotX=d_m.width/2,d_m.pivotY=d_m.height/2,d_m.anchorX=.5,d_m.anchorX=.5;var v_z=function(){Laya.Tween.to(d_m,{f_u:p_g.x,j_l:p_g.y,alpha:.5,scaleX:1,scaleY:1},500,null,Laya.Handler.create(this,d_w,[d_m],!0))};Laya.timer.once(500,this,(function(){Laya.Tween.to(d_m,{f_u:p_l.x,j_l:p_l.y,scaleX:d_u,scaleY:d_u},200,null,Laya.Handler.create(this,f_t,[d_m,d_u],!0))}))},d_m.prototype.onClick=function(e){Ysp(e,d_m)},d_m.prototype.onAdded=function(){Qnj(this)},d_m.prototype.onRemoved=function(){},d_m.close=function(){Gsg(UIM,d_m)},d_m.panel=null,d_m);function d_m(){var e=d_u.call(this)||this;return e.init(),e}e.adventure_effectPanel=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.adventure.adventureAnswerQusetionPanelUI,__extends(b_s,p_l),b_s.prototype.init=function(e){e&&(this.panelInfo=e);var p_l=AdventureModel.ins.getQuestionConf,p_g=e.rewardId;this.questionText.wordWrap=!0,this.questionText.text=""+p_l[p_g].topic,this.answer1.text=p_l[p_g].answer_A,this.answer2.text=p_l[p_g].answer_B,this.answer3.text=p_l[p_g].answer_C,this.maskBox.visible=!1,this.answerSelectRa.selectedIndex,this.endTime=e.endTime,this.setTimeText()},b_s.prototype.questionSubmit=function(){0<=this.answerSelectRa.selectedIndex&&this.answerSelectRa.selectedIndex<3?(AdventureModel.ins.questionSubmit(this.panelInfo.id,this.answerSelectRa.selectedIndex+1),console.log(this.answerSelectRa.selectedIndex),this.setMaskBox(!0)):(b_p.broadcastNotice((j_x("206_517_1191")+j_x("740_759"))),UIM.instance.getMainLetUI().onAdventure())},b_s.prototype.adventureComplete=function(e){e==this.panelInfo.id&&(this.setMaskBox(!0),this.GiveUp_btn.label=(j_x("1300_396_2426")))},b_s.prototype.giveUpAdventure=function(){Sha(e,this)},b_s.prototype.onRemove=function(){Ivm(this,Laya,LED,l_r)},b_s.prototype.onAdded=function(){Ins(this,Laya,LED,l_r)},b_s.prototype.adventureGiveUp=function(e){e==this.panelInfo.id&&(this.setMaskBox(!0),this.GiveUp_btn.label=(j_x("1300_2191_482")))},b_s.prototype.setMaskBox=function(e){(this.maskBox.visible=e)?(z_j.setGray(this.answer_btn),z_j.setGray(this.GiveUp_btn),this.answerSelectRa.mouseEnabled=!e,Laya.timer.clearAll(this),this.timeText.text=(j_x("1300_396_2426"))):(z_j.setGray(this.answer_btn,e),z_j.setGray(this.GiveUp_btn,e),this.answerSelectRa.mouseEnabled=!e)},b_s.prototype.adventureTimeOut=function(e){e==this.panelInfo.id&&(this.setMaskBox(!0),this.GiveUp_btn.label=(j_x("1300_396_2426")))},b_s.prototype.adventureEndHandel=function(e){if(e)switch(e.endType){case 1:this.adventureComplete(e.id);break;case 2:this.adventureTimeOut(e.id);break;case 3:this.adventureGiveUp(e.id)}},b_s.prototype.setTimeText=function(){var e;Laya.timer.clear(this,this.setTimeText),0<(e=this.endTime-SyncTime.serverTime/1e3)?(Laya.timer.once(1e3,this,this.setTimeText),this.timeText.text=Utils.formatTimeStr(Math.floor(e)),this.timeText.color="#f0ecd8",this.timeText.visible=!0):(this.timeText.visible=!0,this.setMaskBox(!0))},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.AdventureQuestionPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.adventure.adventureRechargeGiftPanelUI,__extends(b_s,p_l),b_s.prototype.init=function(e){e&&(this.panelInfo=e),this.buyBtnType=1;var p_l=AdventureModel.ins.getRechargeGiftConf,p_g=e.rewardId;this.discount_label.index=p_l[p_g].discount,this.recharge_list.array=b_p.getRewardDatas(p_l[p_g].reward),this.endTime=e.endTime,this.maskBox.visible=!1,this.needMoney=p_l[p_g].money,this.buy_img_clip.index=this.needMoney,this.buy_btn.mouseEnabled=!0,this.productId=p_l[p_g].setId,1==e.rechargeGiftStatus?(this.adventureCanGetReward(this.panelInfo.id),this.buyBtnType=2):(this.buy_img.visible=!0,this.getClip.visible=!1,this.buyBtnType=1),this.discount_label.visible=!1,this.setTimeText()},b_s.prototype.adventureTimeOut=function(e){e==this.panelInfo.id&&(this.setMaskBox(!0),this.buyBtnType=3,this.buy_btn.mouseEnabled=!1,this.GiveUp_btn.label=(j_x("1300_396_2426")),this.getClip.visible=!1,this.getClip.gray=!0,this.buy_img.visible=!0,this.buy_img.gray=!1,this.getClip.index=0)},b_s.prototype.giveUpAdventure=function(){Ysd(e,this)},b_s.prototype.setTimeText=function(){var e;Laya.timer.clear(this,this.setTimeText),0<(e=this.endTime-SyncTime.serverTime/1e3)?(Laya.timer.once(1e3,this,this.setTimeText),this.timeText.text=Utils.formatTimeStr(Math.floor(e)),this.timeText.color="#f0ecd8",this.timeText.visible=!0):(this.timeText.visible=!0,this.setMaskBox(!0))},b_s.prototype.onAdded=function(){Mwt(this,Laya,LED,l_r)},b_s.prototype.adventureEndHandel=function(e){if(e)switch(e.endType){case 1:this.adventureComplete(e.id);break;case 2:this.adventureTimeOut(e.id);break;case 3:this.adventureGiveUp(e.id);break;case 4:this.adventureCanGetReward(e.id)}},b_s.prototype.renderItem=function(e,p_l){e&&(e.isShowName=!1,e.isShowTick=!1,e.isShowQuaEft=!1,e.setItemData(e.dataSource))},b_s.prototype.setMaskBox=function(e){(this.maskBox.visible=e)?(z_j.setGray(this.buy_btn),z_j.setGray(this.GiveUp_btn),Laya.timer.clearAll(this),this.timeText.text=(j_x("1300_396_2426"))):(z_j.setGray(this.buy_btn,e),z_j.setGray(this.GiveUp_btn,e))},b_s.prototype.adventureComplete=function(e){e==this.panelInfo.id&&(this.setMaskBox(!0),this.buyBtnType=3,this.buy_btn.mouseEnabled=!1,this.GiveUp_btn.label=(j_x("1300_396_2426")),this.getClip.visible=!0,this.buy_img.visible=!1,this.getClip.index=1)},b_s.prototype.onBuyItem=function(){1==this.buyBtnType?AdventureModel.ins.reqRechargeGift(this.needMoney,this.productId):2==this.buyBtnType&&(AdventureModel.ins.reqAdventureGetReward(this.panelInfo.id),this.buyBtnType=3,this.adventureComplete(this.panelInfo.id))},b_s.prototype.adventureCanGetReward=function(e){e==this.panelInfo.id&&(this.buyBtnType=2,this.buy_btn.mouseEnabled=!0,this.GiveUp_btn.label=(j_x("1300_396_2426")),this.GiveUp_btn.gray=!0,this.GiveUp_btn.mouseEnabled=!1,this.getClip.visible=!0,this.getClip.gray=!1,this.getClip.index=0,this.buy_img.visible=!1,this.buy_img.gray=!0)},b_s.prototype.adventureGiveUp=function(e){e==this.panelInfo.id&&(this.setMaskBox(!0),this.buyBtnType=3,this.buy_btn.mouseEnabled=!1,this.GiveUp_btn.label=(j_x("1300_2191_482")),this.getClip.visible=!1,this.buy_img.visible=!0,this.getClip.index=0)},b_s.prototype.onRemove=function(){Cuz(this,Laya,LED,l_r)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g.recharge_list.itemRender=e.ItemBox,z_j.setList(p_g.recharge_list,p_g,p_g.renderItem),p_g}e.AdventureRechargeGiftPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.adventure.adventure_tabCellUI,__extends(b_s,p_l),b_s.prototype.setData=function(e){e=this.dataSource;var p_l=this.getChildByName("t_time"),p_g=this.getChildByName("btn"),b_s=this.getChildByName("rp"),d_u=e.type,b_e=e.endStatus,d_m=e.endTime;1==e.rechargeGiftStatus?b_s.visible=!0:b_s.visible=0<d_m-SyncTime.serverTime/1e3;var d_w=this.getChildByName("iconImg"),f_t="res/ui/adventure/adventure_0"+d_u+".png";p_g.mouseEnabled=!0,-1==b_e?f_t="res/ui/adventure/adventure_04.png":-3==b_e&&(b_s.visible=!0),d_w.skin=f_t,this.setTabListTimeLabel(e,p_l,p_g,b_s)},b_s.prototype.setTabListTimeLabel=function(e,p_l,p_g,b_s){Laya.timer.clear(this,this.setTabListTimeLabel);var d_u,b_e=e.endStatus;p_l.visible=!0,0<(d_u=e.endTime-SyncTime.serverTime/1e3)?(Laya.timer.once(1e3,this,this.setTabListTimeLabel,[e,p_l,p_g,b_s]),p_l.text=Utils.formatTimeStr(Math.floor(d_u)),p_l.color="#d8dcec",p_l.visible=!0):(p_l.visible=!0,p_l.text=(j_x("1300_396_2426"))),-1==b_e?(p_g.mouseEnabled=!1,p_l.visible=!0,p_l.text=(j_x("206_2090_571")),b_s.visible=!1):-2==b_e?(p_g.mouseEnabled=!1,p_l.visible=!0,p_l.text=(j_x("1300_396_2426")),b_s.visible=!1):-3==b_e&&(p_g.mouseEnabled=!0,p_l.visible=!0,b_s.visible=!0)},b_s);function b_s(){return p_l.call(this)||this}e.adventure_tabCell=p_g}(UI=UI||{});var h_k=function(e){function p_l(){var p_l=e.call(this)||this;return p_l.grade=0,p_l._state=0,p_l.level=0,p_l.deployExp=0,p_l.skillExp=0,p_l.speel=0,p_l.speeltime=0,p_l.strength=[],p_l.deployments=[],p_l.fixedProps=[],p_l.isActiveClick=!1,p_l.fight=0,p_l.qihunLevel=0,p_l.qihunStar=0,p_l}return __extends(p_l,e),Object.defineProperty(p_l.prototype,"name",{get:function(){return 0<this.id?Config.talisman_talisman[this.id].name:null},enumerable:!0,configurable:!0}),p_l.prototype.toLinkStr=function(){var e=this.id+n_d.TALISMAN_SPLIT+this.grade+n_d.TALISMAN_SPLIT+this.level;if(this.deployments&&this.deployments.length){e+=n_d.TALISMAN_SPLIT;for(var p_l=0;p_l<this.deployments.length;p_l++)e=e+this.deployments[p_l].toLinkStr()+n_d.TALISMAN_D_SPLIT}return e},p_l.prototype.recombineDeployment=function(e){var p_l=e.split(n_d.TALISMAN_D_SPLIT);if(p_l)for(var p_g=void 0,b_s=0;b_s<p_l.length;b_s+=2)p_l[b_s]&&((p_g=new TalismanDeploymentVo).id=parseInt(p_l[b_s]),p_g.level=parseInt(p_l[b_s+1]),p_g.tId=this.id,this.deployments.push(p_g))},Object.defineProperty(p_l.prototype,"star",{get:function(){return this.grade},enumerable:!0,configurable:!0}),p_l.prototype.update=function(e,p_l){if(void 0===p_l&&(p_l=!1),p_l||this._state!==TalismanSuitState.NO_ACTIVE||(this.isNew=!0,this._awakenOdlTimes=this.awakenTimes),this.id=e.id,this.grade=e.grade,this.level=e.level,this.stove=e.stove,this.refineTime=e.refineTime,this.deployExp=e.deployExp,this.skillExp=e.skillExp,this.speel=e.speel,this.speeltime=e.speelTime,this._state=TalismanSuitState.ACTIVED,this.strength=e.strength||[],this.awakenTimes=e.awakenTimes||0,this.qihunLevel=e.qihunLevel,this.qihunStar=e.qihunStar,e.deployment)for(var p_g in e.deployment)this.changeDeploment(e.deployment[p_g].id,e.deployment[p_g].level);if(e.fixedAttr)for(var p_g in this.fixedProps=[],e.fixedAttr){var b_s=this.getFixedProp(e.fixedAttr[p_g].ty);b_s?b_s.value=e.fixedAttr[p_g].val:((b_s=new PropInfo).propOrdinal=e.fixedAttr[p_g].ty,b_s.value=e.fixedAttr[p_g].val,this.fixedProps.push(b_s))}this.fight=b_p.calPropFight(TalismanModel.instance.getLvProps(this))},p_l.prototype.getSpeelValue=function(e,p_l){return Gjv(e,p_l,this)},p_l.prototype.getFixedProp=function(e){return Mui(e,this)},p_l.prototype.changeDeploment=function(e,p_l){return Uxv(e,p_l,this)},Object.defineProperty(p_l.prototype,"state",{get:function(){if(this._state==TalismanSuitState.NO_ACTIVE){if(TalismanModel.instance.canActive(this.id))return TalismanSuitState.HAVE_ACTIVE;if(TalismanModel.instance.canShow(this.id))return-1}return this._state},enumerable:!0,configurable:!0}),p_l.prototype.isActive=function(){return Afa(this,TalismanSuitState)},p_l.prototype.isSpeel=function(){return Mlc(this)},Object.defineProperty(p_l.prototype,"stoveRemainTime",{get:function(){if(0<this.refineTime){var e=Config.global[GlobalDefine.talisman_refine_sec].i_info,p_l=this.refineTime+e-SyncTime.serverTime/1e3;return p_l<0&&(p_l=0),p_l}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"maxLv",{get:function(){var e=TalismanModel.instance.getUpgradeConfig(this.id,this.grade);return e?e.levelUpper:this.level},enumerable:!0,configurable:!0}),p_l.prototype.getDeloyVo=function(e){return Gfp(e,this)},p_l.prototype.canDeloyCanUp=function(){return Qqq(this,TalismanModel)},Object.defineProperty(p_l.prototype,"deployProps",{get:function(){var e=b_p.getPropInfos([["hpUpper",0],["attack",0],["defense",0],["armorBreak",0]]),p_l=[];if(this.deployments){for(var p_g in this.deployments){var b_s=this.deployments[p_g],d_u=b_s.calAptitude(),b_e=Config.talisman_deployment[b_s.id].type,d_m=void 0;switch(b_e){case"shield":d_m=d_u*TalismanModel.instance.calPropShieldAdd(this.level);break;case"hpUpper":d_m=d_u*TalismanModel.instance.calPropHpAdd(this.level);break;default:d_m=d_u*TalismanModel.instance.calPropAdd(this.level)}p_l.push([b_e,d_m])}e=b_p.addProps(p_l,1,e)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"suitPct",{get:function(){for(var e=0,p_l=0,p_g=TalismanModel.instance.getSuitDatas();p_l<p_g.length;p_l++){var b_s=p_g[p_l];1===b_s.state&&0<=Config.talisman_suits[b_s.curLvId].talisman.indexOf(this.id)&&(e+=Config.talisman_suits[b_s.curLvId].percent)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"suitProps",{get:function(){var e=b_p.getPropInfos([["hpUpper",0],["attack",0],["defense",0],["armorBreak",0]]),p_l=this.deployProps,p_g=this.suitPct,b_s=b_p.getPctProps(p_l,null,p_g);return b_p.addProps(b_s,1,e)},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"facilityPcts",{get:function(){return HoleMoudel.instance.getFacilityTalismanProps(this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"soulProps",{get:function(){if(0==this.qihunLevel)return[];var e=b_p.getPropInfos([["hpUpper",0],["attack",0],["defense",0],["armorBreak",0]]),p_l=this.soulPcts;return b_p.addProps(p_l,this.qihunLevel,e)},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"soulPcts",{get:function(){return TalismanModel.instance.getSoulProps(this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"soulEffs",{get:function(){return TalismanModel.instance.getSoulEff(this.id,this.qihunStar)},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"facilityProps",{get:function(){var e=b_p.getPropInfos([["hpUpper",0],["attack",0],["defense",0],["armorBreak",0]]),p_l=this.facilityPcts,p_g=this.deployProps,b_s=b_p.getPctProps(p_g,p_l);return b_p.addProps(b_s,1,e)},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"blackkingPcts",{get:function(){var e=b_p.getPropInfos([["hpUpper",0],["attack",0],["defense",0],["armorBreak",0]]),p_l=BlackKingModel.instance.sKillInfo,p_g=[];if(p_l)for(var b_s in p_l){var d_u=BlackKingModel.instance.theurgyPropById(p_l[b_s].id,p_l[b_s].lv,1);if(d_u){var b_e=d_u[0];b_e&&b_e.id==this.id&&(p_g=b_p.addProps(b_e.props,1,p_g))}}return b_p.addProps(p_g,1,e)},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"blackkingProps",{get:function(){var e=b_p.getPropInfos([["hpUpper",0],["attack",0],["defense",0],["armorBreak",0]]),p_l=BlackKingModel.instance.sKillInfo,p_g=[];if(p_l)for(var b_s in p_l){var d_u=BlackKingModel.instance.theurgyPropById(p_l[b_s].id,p_l[b_s].lv,2);if(d_u){var b_e=d_u[0];b_e&&b_e.id==this.id&&(p_g=b_p.addProps(b_e.props,1,p_g))}}return b_p.addProps(p_g,1,e)},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"blackkingTotalProps",{get:function(){var e=b_p.getPropInfos([["hpUpper",0],["attack",0],["defense",0],["armorBreak",0]]),p_l=this.deployProps,p_g=this.blackkingPcts,b_s=b_p.getPctProps(p_l,p_g);e=b_p.addProps(b_s,1,e);var d_u=this.blackkingProps;return b_p.addProps(d_u,1,e)},enumerable:!0,configurable:!0}),p_l}(ModuleItemVO),TalismanDeploymentVo=function(){function e(){this.level=1}return e.prototype.calAptitude=function(){return Ojc(Config,this)},e.prototype.calNextAptitude=function(){return Muc(Config,this)},Object.defineProperty(e.prototype,"talismanVo",{get:function(){return TalismanModel.instance.getTalismanById(this.tId)},enumerable:!0,configurable:!0}),e.prototype.toLinkStr=function(){return Gwc(this,n_d)},e}(),TalismanSuitVo=function(){function e(){this.level=0,this._state=TalismanSuitState.NO_ACTIVE}return e.prototype.update=function(e){Ogw(e,this,TalismanSuitState)},Object.defineProperty(e.prototype,"state",{get:function(){if(this._state==TalismanSuitState.NO_ACTIVE){var e=Config.talisman_suits[this.configId];if(this.canActive(e))return TalismanSuitState.HAVE_ACTIVE}return this._state},enumerable:!0,configurable:!0}),e.prototype.canActive=function(e){for(var p_l in e.talisman){var p_g=TalismanModel.instance.getTalismanById(e.talisman[p_l]);if(e.condition){if(!p_g||p_g.level<e.condition)return!1}else if(!p_g||p_g.grade<e.gradeLimit)return!1}return!!e.consume&&b_p.checkConsume(e.consume)},e.prototype.isActive=function(){return Osr(this,TalismanSuitState)},e.prototype.calMeetLvNum=function(){var e=this.nextLvId;if(e){var p_l=0,p_g=Config.talisman_suits[e];for(var b_s in p_g.talisman){var d_u=TalismanModel.instance.getTalismanById(p_g.talisman[b_s]);p_g.condition?d_u&&d_u.level>=p_g.condition&&p_l++:d_u&&d_u.grade>p_g.gradeLimit-1&&p_l++}return p_l}return 0},e.prototype.GetIfString=function(){var e=this.nextLvId;if(e){var p_l=Config.talisman_suits[e];for(var p_g in p_l.talisman)if(p_l.condition)return 1}return 0},e.prototype.canLvUp=function(){var e=this.nextLvId;if(0<e){var p_l=Config.talisman_suits[e];if(!p_l.consume){for(var p_g in p_l.talisman){var b_s=TalismanModel.instance.getTalismanById(p_l.talisman[p_g]);if(!b_s)break;if(p_l.condition){if(b_s.level<p_l.condition)return!1}else if(b_s&&b_s.grade<p_l.gradeLimit)return!1}return!0}if(this.canActive(p_l))return!0}return!1},Object.defineProperty(e.prototype,"curLvId",{get:function(){var e=this.configId+this.level-1,p_l=Config.talisman_suits[e];return p_l&&p_l.suitId===this.suitId?e:-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextLvId",{get:function(){var e=this.configId+this.level,p_l=Config.talisman_suits[e];return p_l&&p_l.suitId===this.suitId?e:-1},enumerable:!0,configurable:!0}),e.prototype.checkIsExit=function(e){var p_l=Config.talisman_suits[this.configId];if(p_l&&p_l.talisman)for(var p_g in p_l.talisman)if(p_l.talisman[p_g]===e)return!0;return!1},e}(),AlienBeastVo=function(){function e(){this.star=0,this.state=0,this.level=0,this.deployExp=0,this.deployments=[],this.fixedProps=[],this.init()}return e.prototype.init=function(){Qnp(this)},Object.defineProperty(e.prototype,"beastName",{get:function(){var e=Config.beast_beast[this.id],p_l=AlienBeastModle.instance.getEvolveVarCfgByVarLv(this.id,this.variationGrade),p_g="";return p_l&&(p_g=p_l.name+"."),p_g+e.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"beastNameIcon",{get:function(){return 0<this.variationGrade&&this.variationGrade<=5?"res/ui/beast/yihua_"+this.variationGrade+".png":5<this.variationGrade?"res/ui/beast/yihua_5.png":""},enumerable:!0,configurable:!0}),e.prototype.toLinkStr=function(){var e=this.id+n_d.TALISMAN_SPLIT+this.star+n_d.TALISMAN_SPLIT+this.level;if(this.deployments&&this.deployments.length){e+=n_d.TALISMAN_SPLIT;for(var p_l=0;p_l<this.deployments.length;p_l++)e=e+this.deployments[p_l].toLinkStr()+n_d.TALISMAN_D_SPLIT}return e},Object.defineProperty(e.prototype,"ID",{set:function(e){var p_l=Config.beast_beast[e];if(p_l)for(var p_g in this.id=e,this.deployments=[],p_l.ploy){var b_s=new AlienBeastDeploymentVo;b_s.id=p_l.ploy[p_g],b_s.tId=this.id,this.deployments.push(b_s)}},enumerable:!0,configurable:!0}),e.prototype.setData=function(e){if(this.id=e.id,this.variationGrade=e.variation,this.star=e.grade,this.state=1,this.level=e.level,this.deployExp=e.ployExp,this.evoLvGrade=e.evolution,e.ploys)for(var p_l in this.deployments=[],e.ploys){var p_g=new AlienBeastDeploymentVo;p_g.id=e.ploys[p_l].id,p_g.level=e.ploys[p_l].level,p_g.tId=this.id,this.deployments.push(p_g)}if(e.fixedAttr)for(var p_l in this.fixedProps=[],e.fixedAttr){var b_s=this.getFixedProp(e.fixedAttr[p_l].ty);b_s?b_s.value=e.fixedAttr[p_l].val:((b_s=new PropInfo).propOrdinal=e.fixedAttr[p_l].ty,b_s.value=e.fixedAttr[p_l].val,this.fixedProps[p_l]=b_s)}},e.prototype.getFixedProp=function(e){return this.fixedProps?this.fixedProps[e]:null},e.prototype.getFixedProps=function(){return Yqo(this)},e.prototype.setDeployData=function(e,p_l,p_g){for(var b_s in this.deployments){var d_u=this.deployments[b_s];d_u.id==e&&(d_u.level=p_l,this.deployExp=p_g)}},Object.defineProperty(e.prototype,"deployProps",{get:function(){var e=b_p.getPropInfos([["hpUpper",0],["attack",0],["defense",0],["armorBreak",0]]),p_l=[];if(this.deployments){for(var p_g in this.deployments){var b_s=this.deployments[p_g],d_u=b_s.calAptitude(),b_e=Config.beast_ploy[b_s.id].type,d_m=void 0;switch(b_e){case"shield":d_m=d_u*AlienBeastModle.instance.calPropShieldAdd(this.level);break;case"hpUpper":d_m=d_u*AlienBeastModle.instance.calPropHpAdd(this.level);break;default:d_m=d_u*AlienBeastModle.instance.calPropAdd(this.level)}p_l.push([b_e,d_m])}e=b_p.addProps(p_l,1,e)}return e},enumerable:!0,configurable:!0}),e.prototype.isUpLv=function(e,p_l,p_g){if(void 0===e&&(e=!1),void 0===p_l&&(p_l=1),void 0===p_g&&(p_g=null),this.active){var b_s=Config.beast_upgrade[AlienBeastModle.instance.getUpStarCfgByStar(this.id,this.star)].levelUpper,d_u=Config.beast_uplevel[this.level];if(this.level+p_l<=b_s){if(d_u&&0<d_u.consume.length){for(var b_e in d_u.consume){var d_m=0;if(p_g&&(d_m=p_g[d_u.consume[b_e][0]]?p_g[d_u.consume[b_e][0]]:0),BagModel.instance.getItemCountByItemID(d_u.consume[b_e][0],BagTypeDefine.BAG_TYPE_ITEM)-d_m<d_u.consume[b_e][1])return UpState.NOT_ENOUGH}return UpState.CAN_UP}return UpState.MAX_UP}return UpState.MAX_UP}},e.prototype.canDeloyCanUp=function(){if(this.deployments)for(var e in this.deployments)if(this.deployments[e].canDeployUp(this.id,this.deployments[e].id)==UpState.CAN_UP)return!0;return!1},e.prototype.oneKeyUpLv=function(e){for(var p_l=1,p_g=[];this.isUpLv(!1,p_l,p_g)==UpState.CAN_UP;)for(var b_s in p_l++,(void 0).cost){var d_u=(void 0).cost[b_s][0],b_e=p_g[d_u]?p_g[d_u]:0;b_e+=(void 0).cost[b_s],p_g[d_u]=b_e}return p_l},e.prototype.starMaxLV=function(e,p_l){var p_g=Config.dragon_dragonStar[0];return p_g?p_g.limitLv:0},e.prototype.isCanEvolve=function(e,p_l){if(void 0===e&&(e=!1),void 0===p_l&&(p_l=1),!this.active)return UpState.NOT_UP;var p_g=this.evoLvGrade+p_l,b_s=AlienBeastModle.instance.getEvolveCfgByEvolveLv(this.id,p_g);return b_s?b_s.consume?b_p.checkConsume(b_s.consume,e)?UpState.CAN_UP:UpState.NOT_ENOUGH:UpState.MAX_UP:(e&&b_p.broadcastNotice((j_x("15_784_1117")+j_x("1012_1081_1375"))),UpState.MAX_UP)},e.prototype.isUpStar=function(e,p_l,p_g){if(void 0===e&&(e=!1),void 0===p_l&&(p_l=1),void 0===p_g&&(p_g=null),this.active){var b_s=this.star+p_l,d_u=Config.beast_upgrade[AlienBeastModle.instance.getUpStarCfgByStar(this.id,this.star)];if(Config.beast_upgrade[AlienBeastModle.instance.getUpStarCfgByStar(this.id,b_s)]){if(this.level>=d_u.levelUpper){if(!d_u.consume)return UpState.CAN_UP;for(var b_e in d_u.consume){var d_m=0;if(p_g&&(d_m=p_g[d_u.consume[b_e][0]]?p_g[d_u.consume[b_e][0]]:0),BagModel.instance.getItemCountByItemID(d_u.consume[b_e][0],BagTypeDefine.BAG_TYPE_ITEM)-d_m<d_u.consume[b_e][1])return e&&r_f.instance.isWindow(d_u.consume[0][0]),UpState.NOT_ENOUGH}return UpState.CAN_UP}return e&&b_p.broadcastNotice((j_x("15_2342_1971")+j_x("1896_1117_1012")+j_x("371_1148_1320")+j_x(1283))),UpState.NOT_UP}return e&&b_p.broadcastNotice((j_x("1148_2342_1117")+j_x("1012_1081_1375"))),UpState.MAX_UP}},e.prototype.isActive=function(e){void 0===e&&(e=!1);var p_l=Config.beast_beast[this.id];return"item"==p_l.activeCond[0]&&b_p.checkConsume(p_l.activeCond[1],e)},e.prototype.isUpHaveRedPoint=function(){return this.active?this.isUpLv()==UpState.CAN_UP||this.isUpStar()==UpState.CAN_UP||this.canDeloyCanUp():this.isActive(!1)},Object.defineProperty(e.prototype,"active",{get:function(){return 0<this.level},enumerable:!0,configurable:!0}),e}(),AlienBeastDeploymentVo=function(e){function p_l(){var p_l=e.call(this)||this;return p_l.init(),p_l}return __extends(p_l,e),p_l.prototype.init=function(){Kby(this)},p_l.prototype.toLinkStr=function(){return Esi(this,n_d)},p_l.prototype.calAptitude=function(){return Yci(Config,this)},p_l.prototype.calNextAptitude=function(){return Msm(Config,this)},p_l.prototype.canDeployUp=function(e,p_l){var p_g=AlienBeastModle.instance.beasts[e];if(!p_g.active)return UpState.NOT_UP;var b_s=Config.beast_ploy[p_l],d_u=Config.beast_upgrade[AlienBeastModle.instance.getUpStarCfgByStar(p_g.id,p_g.star)].depLvUpper<=this.level;return 0<b_s.exp&&p_g.deployExp>=b_s.exp&&!d_u?UpState.CAN_UP:b_s.consume&&b_p.checkConsume(b_s.consume)&&!d_u?UpState.CAN_UP:UpState.MAX_UP},p_l}(TalismanDeploymentVo);!function(e){var p_l,p_g=(p_l=ui.window.AlienBeast.beast_helpUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Sbg(this,Laya)},b_s.prototype.onClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":b_s.close()}},b_s.prototype.onRemoved=function(){Sjt(this,Laya)},b_s.open=function(){Kqo(UIM,b_s)},b_s.close=function(){Gjs(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.BeastHelpPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.AlienBeast.alienBeastPanelUI,__extends(b_s,p_l),b_s.prototype.init=function(){this._clipTab=new p_c(this.tab),this._modelPoint=new Laya.Point,this._modelPoint.x=this.modelContainer.x,this._modelPoint.y=this.modelContainer.y,this._textStartPos=this.upCostBox.y,z_j.setListScroll(this.list,!1),this.consumeLab.style.fontSize=20,this._currentSelect=this.tab.selectedIndex=this.list.selectedIndex=-1,z_j.setList(this.list,this,this.updateListItem,this.selectList),z_j.setListScroll(this.deploymentList,!0),this.deploymentList.renderHandler=Laya.Handler.create(this,this.updateItem,[this.deploymentList],!1),this.propList.renderHandler=Laya.Handler.create(this,this.updateItem,[this.propList],!1),this.on(Laya.Event.ADDED,this,this.onAdded),this.on(Laya.Event.REMOVED,this,this.onRemove),this.redPoint.visible=this.redPoint_0.visible=this.redPoint_1.visible=!1},b_s.prototype.selectList=function(e){e<0||!this.list.array||!this.list.array[e]||(this._currentSelect=e,this.dataSource=this.list.array[e],0==this.tab.selectedIndex?this.updateView():1==this.tab.selectedIndex&&(this._beastEvolvePanel.updateData(this.dataSource),this.updateFosterInfo()))},b_s.prototype.stopUpLvEffect=function(){this.upLvEft&&(this.upLvEft.off(Laya.Event.COMPLETE,this,this.stopUpLvEffect),this.upLvEft.visible=!1,this.upLvEft.stop()),this.stopUpPropEffect()},b_s.prototype.upBtnClick=function(){var e=this.dataSource;0<this._clickCount?LongPushUtil.inst.clearLoopPush():e?e.level<=0?(e.isActive(!0)&&AlienBeastModle.instance.reqAlienBeastActive(e.id),LongPushUtil.inst.clearLoopPush()):(this._clickCount=this.upCheckBox.selected?5:0,this.sendLvUp(!0)):LongPushUtil.inst.clearLoopPush()},b_s.prototype.setDeploymentDatas=function(e){Avp(e,this,AlienBeastModle,j_x)},b_s.prototype.sendLvUp=function(p_l){void 0===p_l&&(p_l=!0);var p_g=this.dataSource;if(p_g){var b_s=Config.beast_upgrade[AlienBeastModle.instance.getUpStarCfgByStar(p_g.id,p_g.star)];if(!b_s)return p_l&&b_p.broadcastNotice((j_x("15_2342_1300")+j_x("1117_1067_2128"))),this._clickCount=0,void LongPushUtil.inst.clearLoopPush();var d_u=Config.beast_beast[p_g.id];if(p_g.level==b_s.levelUpper){if(this._clickCount=0,LongPushUtil.inst.clearLoopPush(),p_g.star==d_u.maxGrade)return void(p_l&&b_p.broadcastNotice((j_x("1300_1117_1081")+j_x("1375_784_2342"))));e.BeastUpStarPanel.open(p_g)}else{if(!b_p.checkConsume(Config.beast_uplevel[p_g.level].consume))return p_l&&(e.BeastUpStarPanel.close(),r_f.instance.isWindow(Config.beast_uplevel[p_g.level].consume[0][0])),this._clickCount=0,void LongPushUtil.inst.clearLoopPush();AlienBeastModle.instance.reqAlienBeastUpLv(p_g.id)}}},b_s.prototype.onRemove=function(){this.upBtn.off(Laya.Event.MOUSE_DOWN,this,this.onUpBtnMD),this.off(Laya.Event.CLICK,this,this.onClick),LED.off(l_r.ALIEN_BEAST_INFOS,this,this.updateView),LED.off(l_r.ALIEN_BEAST_INFO,this,this.updateData),LED.off(l_r.ALIEN_BEAST_EVOLVE,this,this.updateData),LED.off(l_r.ALIEN_BEAST_DLOP_UP_S,this,this.updateDeployData),LED.off(l_r.ITEM_ADD,this,this.onItemUpdate),LED.off(l_r.ITEM_AMOUNT_CHANGE,this,this.onItemUpdate),LED.off(l_r.ITEM_REMOVE,this,this.onItemUpdate),LED.off(l_r.SKILL_INFO_UPDATE,this,this.updateDeployData),this.list.scrollBar.off(Laya.Event.CHANGE,this,this.onListScroll),this._currentSelect=this.tab.selectedIndex=this.list.selectedIndex=-1,this.stopUpLvEffect(),this._clickCount=0,this._beastEvolvePanel&&(this._beastEvolvePanel.visible=!1,this._beastEvolvePanel.offListener()),this._effectContent&&this._effectContent.clearRes()},b_s.prototype.updateItem=function(e,p_l,p_g){if(this.dataSource,e===this.deploymentList)p_l.setItemData(p_l.dataSource);else{var b_s=p_l.dataSource,d_u=p_l.getChildByName("nameTxt"),b_e=p_l.getChildByName("valueTxt"),d_m=d_v.getPropertyType(b_s.propOrdinal);d_u.text=d_m.desc+":",LgcM.ins.heroVo,d_m.isPercent()?b_e.text=Utils.$("{1}%",b_s.value/100):b_e.text=Utils.$("{1}",Math.floor(b_s.value))}},b_s.prototype.onTabSelect=function(p_l,p_g){-1!==p_l&&(this._clickCount=0,this.upBox.visible=0==p_l,this.onListScroll(),this.updateFosterInfo(),1===p_l?(null==this._beastEvolvePanel&&(this._beastEvolvePanel=new e.BeastUpEvolvePanel,this._beastEvolvePanel.onListener(),this.addChild(this._beastEvolvePanel),this.setChildIndex(this._beastEvolvePanel,2)),this.dataSource&&(this._beastEvolvePanel.updateData(this.dataSource),this._beastEvolvePanel.visible=!0)):(null==this.dataSource?this.list.selectedIndex=0:this.updateView(),this._beastEvolvePanel&&(this._beastEvolvePanel.visible=!1)))},b_s.prototype.updataPanelState=function(){var e=this.dataSource;if(e){var p_l=Config.beast_beast[e.id];this.nameTxt.text=e.beastName,this.nameTxt.color=Resource.ResManager.getQualityColor(p_l.quality);var p_g="";this.consumeLab.visible=!0;var b_s=AlienBeastModle.instance.getEvolveVarCfgByVarLv(e.id,e.variationGrade);if(b_s?this.showBeastEffect(b_s.effect):this._effectContent&&(this._effectContent.visible=!1),this.upCostBox.y=this._textStartPos,e.active){this.lvTxt.text=Utils.$(("{1}"+j_x(813)),e.level);var d_u=e.isUpLv(),b_e=e.isUpStar();if(this.notActive.visible=!1,d_u==UpState.CAN_UP||d_u==UpState.NOT_ENOUGH){this.costTitleTxt.changeText((j_x("1661_1502")+":")),this.upBtn.label=(j_x(371)+"  "+j_x(2342)),this.upCheckBox.visible=!0,this.upBtn.visible=!0;var d_m=Config.beast_uplevel[e.level].consume;p_g=z_j.consumeToHtmlText(this.iconSize,d_m,Utils.setSpace(1),["#71de66","#e32828"])}else b_e==UpState.CAN_UP||b_e==UpState.NOT_ENOUGH?(this.upBtn.label=(j_x(371)+"  "+j_x(784)),this.consumeLab.visible=!1,this.costTitleTxt.changeText((j_x("371_784_1163")+j_x("1628_2251_15")+j_x("2342_1067_2128"))),this.upCheckBox.visible=!0,this.upBtn.visible=!0):(this.consumeLab.visible=!1,this.costTitleTxt.changeText(("      "+j_x("1300_1463_2342"))),this.upCheckBox.visible=!1,this.upBtn.visible=!1,this.upCostBox.y=455)}else this.notActive.visible=!0,this.lvTxt.text=Utils.$(("{1}"+j_x(813)),1),this.costTitleTxt.changeText((j_x("1661_1502")+":")),this.upCheckBox.visible=!1,this.upBtn.visible=!0,this.upBtn.label=(j_x("2335_1796")),d_m=p_l.activeCond[1],p_g=z_j.consumeToHtmlText(this.iconSize,d_m,Utils.setSpace(1),["#71de66","#e32828"]);var d_w=p_l.quality-3;this.nameTxt.color=Utils.ItemUtils.getTalismanQualityColor(p_l.quality),this.bgQuaClip.index=d_w<0?0:d_w,this._clickCount=0,TalismanModel.instance.changeActStar(this.starBox,e.star);var f_t=p_l.ui_offset||[0,0];this.modelContainer.pos(this._modelPoint.x+f_t[0],this._modelPoint.y+f_t[1]),this.modelContainer.scale(p_l.ui_scale,p_l.ui_scale),Resource.ResManager.Instance.getImg(Resource.ResUrl.getIconUrl(p_l.icon),this.modelContainer),this.dataSource=e,this.updateDeployData(),this.consumeLab.innerHTML=p_g,this.nameIcon.skin=e.beastNameIcon}},b_s.prototype.stopUpPropEffect=function(){this.upPropEft&&(this.upPropEft.off(Laya.Event.COMPLETE,this,this.stopUpPropEffect),this.upPropEft.visible=!1,this.upPropEft.stop())},b_s.open=function(e){void 0===e&&(e=null),AlienBeastModle.instance.beastsToArray.length<=0||UIM.open(b_s,["beast.atlas"],e,!1)},b_s.prototype.updateView=function(){if(this.list.selectedIndex<0)this.list.selectedIndex=0;else{var e=this.dataSource;this.updateData(e,!0)}},b_s.prototype.showBeastEffect=function(e){this._effectContent||(this._effectContent=new n_k,this.effectModel.addChild(this._effectContent)),this._effectContent.visible=!0,this._effectContent.changeModel("effects/beast"),this._effectContent.setAction(e,0,!0)},b_s.prototype.updateDeployData=function(e){void 0===e&&(e=null);var p_l=this.dataSource;this.propList.array=AlienBeastModle.instance.getLvProps(p_l);var p_g=Config.beast_beast[p_l.id];p_g&&0<p_g.propType?(this.typeClip.visible=!0,this.typeClip_di.visible=!0,this.typeClip.index=p_g.propType-1):(this.typeClip.visible=!1,this.typeClip_di.visible=!1),Config.beast_beast[this.dataSource.id];var b_s=b_p.calPropFight(this.propList.array);b_p.getNumSp(NumType.FIGHTING,b_s,this.fightSp,-10),e&&this.playUpPropEffect(),this.setDeploymentDatas(p_l.deployments),this.updateFosterInfo()},b_s.prototype.playUpPropEffect=function(){this.upPropEft&&(this.upPropEft.visible=!0,this.upPropEft.play(!1),this.upPropEft.on(Laya.Event.COMPLETE,this,this.stopUpPropEffect))},b_s.prototype.onItemUpdate=function(e){var p_l=this.dataSource;e&&e.id&&0==this.tab.selectedIndex?this.setDeploymentDatas(p_l.deployments):(this.updateFosterInfo(),this.updateData(p_l,!0))},b_s.prototype.playUpLvEffect=function(){this.upLvEft&&(this.upLvEft.visible=!0,this.upLvEft.play(!1),this.upLvEft.on(Laya.Event.COMPLETE,this,this.stopUpLvEffect)),this.playUpPropEffect()},b_s.prototype.updatePvSkillItem=function(){var e=Config.beast_beast[this.dataSource.id];if(e.skill){var p_l=new x_h(e.id,e.name,this.dataSource.level,this.dataSource.star,PassiveSkillType.BEAST);this.pvSkillItem.visible=!0,this.pvSkillItem.updateSkillUI(e.skill[0],PassiveSkillType.BEAST,p_l,!0)}else this.pvSkillItem.visible=!1},b_s.prototype.updateFosterInfo=function(){this.redPoint.visible=this.redPoint_0.visible=this.redPoint_1.visible=!1,this.redPoint.visible=!1;var e=this.dataSource;if(e){var p_l=e.isUpLv()==UpState.CAN_UP||e.isUpStar()==UpState.CAN_UP,p_g=e.canDeloyCanUp(),b_s=!e.active&&e.isActive();this.redPoint_0.visible=p_l||b_s||p_g,this.redPoint.visible=p_l||b_s}e&&(this.redPoint_1.visible=e.isCanEvolve()==UpState.CAN_UP)},b_s.prototype.updateListItem=function(e,p_l){if(-1!=p_l){var p_g=e.dataSource;if(p_g){var b_s=e.getChildByName("t_name"),d_u=e.getChildByName("t_lv"),b_e=e.getChildByName("starBox"),d_m=e.getChildByName("icon"),d_w=e.getChildByName("shade"),f_t=e.getChildByName("rp"),v_z=e.getChildByName("bg"),d_h=Config.beast_beast[p_g.id];if(v_z.index=d_h.quality-1,f_t.visible=p_g.isCanEvolve()==UpState.CAN_UP||p_g.isUpHaveRedPoint()||SkillModel.instance.isRedPoint(p_g.id,p_g.level,p_g.star,PassiveSkillType.BEAST),d_w.visible=!p_g.active,p_g.active)d_u.color="#f0ecd9",d_u.text="lv."+p_g.level;else{var r_t=Config.beast_beast[p_g.id];if("item"==r_t.activeCond[0]){var t_n=r_t.activeCond[1],f_y=BagModel.instance.getItemCountByItemID(t_n[0][0],BagTypeDefine.BAG_TYPE_ITEM);f_y>=t_n[0][1]?d_u.color="#71de66":d_u.color="#e32828",d_u.text=Utils.$("{1}/{2}",f_y,t_n[0][1])}}TalismanModel.instance.changeActStar(b_e,p_g.star),d_m.skin=Resource.ResUrl.getIconUrl(d_h.icon),b_s.text=p_g.beastName,b_s.color=Resource.ResManager.getQualityColor(d_h.quality)}}},b_s.prototype.updateData=function(e,p_l){if(void 0===e&&(e=null),void 0===p_l&&(p_l=!1),!p_l&&(this.playUpLvEffect(),Resource.SoundManager.instance.playSoundById(6,!1),this.dataSource&&this.dataSource.isUpLv()==UpState.CAN_UP?this._clickCount--:this._clickCount=0,0<this._clickCount))Laya.timer.callLater(this,this.sendLvUp,[!1]);else{var p_g=this.list.cells[this.list.selectedIndex];p_g&&this.updateListItem(p_g,this.list.selectedIndex),this.updataPanelState(),this.updatePvSkillItem()}},b_s.prototype.onUpBtnMD=function(){var e=this;this.upCheckBox.selected||LongPushUtil.inst.bingLongPushBtn(this,(function(){e.upBtnClick()}))},b_s.prototype.onClick=function(p_l){var p_g=p_l.target,d_u=this.dataSource;switch(p_g.name){case"backBtn":case"closeBtn1":b_s.close();break;case"upBtn":this.upBtnClick();break;case"helpBtn":e.BeastHelpPanel.open();break;case"checkBtn":var b_e=[],d_m=[],d_w=[["hpUpper",0],["attack",0],["defense",0],["armorBreak",0]];b_e=b_p.getPropInfos(d_w);var f_t=Config.beast_beast[d_u.id].clineprop||[];b_e=b_p.addProps(f_t,1,b_e);var v_z=Config.beast_upgrade[AlienBeastModle.instance.getUpStarCfgByStar(d_u.id,d_u.star)],d_h=v_z?v_z.prop:[];b_e=b_p.addProps(d_h,1,b_e);var r_t=d_u.deployProps||[];b_e=b_p.addProps(r_t,1,b_e),d_m.push(b_e);var t_n=d_u.getFixedProps();d_m.push(0<t_n.length?t_n:b_p.getPropInfos(d_w)),e.PropShowPanel.open(d_m,[(j_x("115_1621_223")+j_x(402)+""),(j_x("534_720_223")+j_x(402)+"")]);break;case"leftBtn":0<this.list.startIndex-4?this.list.scrollTo(this.list.startIndex-4):this.list.scrollTo(0);break;case"rightBtn":this.list.startIndex+4<this.list.length-4?this.list.scrollTo(this.list.startIndex+4):this.list.scrollTo(this.list.length-4)}},b_s.prototype.onAdded=function(){this.upBtn.on(Laya.Event.MOUSE_DOWN,this,this.onUpBtnMD),this._clipTab.on("tabSelect",this,this.onTabSelect),this.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.ALIEN_BEAST_INFOS,this,this.updateView),LED.on(l_r.ALIEN_BEAST_INFO,this,this.updateData),LED.on(l_r.ALIEN_BEAST_DLOP_UP_S,this,this.updateDeployData),LED.on(l_r.ITEM_ADD,this,this.onItemUpdate),LED.on(l_r.ITEM_AMOUNT_CHANGE,this,this.onItemUpdate),LED.on(l_r.ALIEN_BEAST_EVOLVE,this,this.updateData),LED.on(l_r.ITEM_REMOVE,this,this.onItemUpdate),LED.on(l_r.SKILL_INFO_UPDATE,this,this.updateDeployData),this.list.scrollBar.on(Laya.Event.CHANGE,this,this.onListScroll),this._beastEvolvePanel&&this._beastEvolvePanel.onListener();var e=AlienBeastModle.instance.beastsToArray.sort(AlienBeastModle.instance.sortBeast);this.list.array=e,this.tab.selectedIndex=0,this.stopUpLvEffect(),this._clickCount=0},b_s.prototype.onListScroll=function(){if(this.rightBtn.visible=this.list.scrollBar.value<this.list.scrollBar.max,this.leftBtn.visible=0<this.list.scrollBar.value,this.leftRedPoint.visible=this.rightRedPoint.visible=!1,0<this.list.startIndex)for(var e=0;e<this.list.startIndex;++e)if((p_l=this.list.array[e]).isCanEvolve()==UpState.CAN_UP||p_l.isUpHaveRedPoint()){this.leftRedPoint.visible=!0;break}if(this.list.startIndex+4<this.list.length)for(e=this.list.startIndex+4;e<this.list.length;++e){var p_l;if((p_l=this.list.array[e]).isCanEvolve()==UpState.CAN_UP||p_l.isUpHaveRedPoint()){this.rightRedPoint.visible=!0;break}}},b_s.prototype.destroy=function(e){Gay(e,p_l,this)},b_s.close=function(e){void 0===e&&(e=!1),UIM.close(b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.iconSize=new Laya.Point(30,30),e.init(),e}e.BeastMainPanel=p_g;var d_u,b_e=(d_u=ui.window.talisman.deploymentCellUI,__extends(d_m,d_u),d_m.prototype.onAdd=function(e){Wxj(e,this,Laya)},d_m.prototype.onRemove=function(e){Qxz(e,this,Laya)},d_m.prototype.onClick=function(p_l){if(this._isChatShow)this.off(Laya.Event.CLICK,this,this.onClick);else if(this.dataSource){var p_g=this.dataSource,b_s=p_g.tId;AlienBeastModle.instance.beasts[b_s].active?p_g&&e.BeastUpDlopPanel.open(p_g):b_p.broadcastNotice((j_x("1946_1558_206")+j_x("2335_1796")+","+j_x("814_799_179")+j_x(93)))}},d_m.prototype.setItemData=function(e,p_l){void 0===p_l&&(p_l=!1),this._isChatShow=p_l;var p_g=Config.beast_ploy[e.id];if(this.nameTxt.text=p_g.name,this.lvTxt.text=Utils.$(("{1}"+j_x(2342)),e.level),p_g.icon){var b_s=Resource.ResUrl.getIconUrl(p_g.icon);this.icon=Resource.ResManager.Instance.getImg(b_s,this.icon)}this.typeTxt.text=p_g.typeName,this.propTxt.text=(e.level*p_g.aptitude).toString(),this.dataSource=e,this._isChatShow?this.redPoint.visible=!1:this.redPoint.visible=e.canDeployUp(e.tId,e.id)==UpState.CAN_UP},d_m);function d_m(){var e=d_u.call(this)||this;return e.on(Laya.Event.REMOVED,e,e.onRemove),e.on(Laya.Event.ADDED,e,e.onAdd),e}e.BeastDeployCell=b_e}(UI=UI||{}),function(e){var p_l,p_g,b_s=(p_l=ui.window.AlienBeast.beastResultShowPanelUI,__extends(d_u,p_l),d_u.prototype.onAdded=function(){Mrc(this,Laya)},d_u.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":d_u.close()}},d_u.prototype.onRemove=function(){this.off(Laya.Event.CLICK,this,this.onClick),d_u.blackBox&&d_u.blackBox.parent&&Laya.stage.removeChild(d_u.blackBox),this.effect.off(Laya.Event.COMPLETE,this,this.stopUpLvEffect)},d_u.prototype.updateData=function(){var p_l=this.dataSource.vo,p_g="res/ui/beast/jihuochenggong_di.png",b_s="res/ui/beast/jihuochenggong.png";if(this.effectImage.visible=!1,p_l){switch(this.dataSource.panelType){case e.BeastPanelType.ACTIVE:b_s="res/ui/beast/jihuochenggong_di.png",p_g="res/ui/beast/jihuochenggong.png",this.effect.visible=!0,this.effect.play(!1);break;case e.BeastPanelType.EVOLVESUCC:b_s="res/ui/beast/yihuachenggong_di.png",p_g="res/ui/beast/yihuachenggong.png",this.effect.visible=!0,this.effect.play(!1);break;case e.BeastPanelType.EVOLVEFAIl:b_s="res/ui/beast/jinhuashibai_di.png",p_g="res/ui/beast/jinhuashibai.png",this.effect.visible=!1}var b_e=Config.beast_beast[p_l.id];this.bg.skin=b_s,this.title.skin=p_g,this.icon.skin=Resource.ResUrl.getIconUrl(b_e.icon),d_u.srcPath.push(p_g),d_u.srcPath.push(b_s),this.beastName.text=p_l.beastName,this.nameIcon.skin=p_l.beastNameIcon,this.ani1.play(0,!1)}},d_u.prototype.stopUpLvEffect=function(){Gmq(this)},d_u.open=function(e,p_l){void 0===p_l&&(p_l=0),UIM.open(d_u,null,{vo:e,panelType:p_l},!1,!1,!0,!0)},d_u.showBlackBox=function(e,p_l){if(void 0===p_l&&(p_l=0),null==d_u.blackBox){(d_u.blackBox=new Laya.Box).pos(0,0);var p_g=new Laya.Sprite;p_g.graphics.drawRect(0,0,Stage.width,Stage.height,"#000000"),p_g.alpha=.8;var b_s=new Laya.Label;b_s.text=(j_x("1737_154_1836")+j_x("1845_1171_767")+j_x("2035_1946_1558")+j_x("2198_1273_1798")+j_x(571)+""+j_x("1920_2198_155")+j_x("2086_33_562")+j_x("1250_1946")),b_s.fontSize=30,b_s.color="#d8dcec",d_u.blackBox.addChild(p_g),d_u.blackBox.addChild(b_s),b_s.pos((Stage.width-b_s.width)/2,Stage.height/2)}else if(d_u.blackBox.parent)return;UIM.instance.addToTopLayer(d_u.blackBox),Laya.timer.once(3e3,this,(function(){d_u.blackBox&&d_u.blackBox.parent&&UIM.instance.removeTopLayer(d_u.blackBox),d_u.open(e,p_l)}))},d_u.close=function(){Gpw(UIM,d_u)},d_u.srcPath=[],d_u);function d_u(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.BeastResultShowPanel=b_s,(p_g=e.BeastPanelType||(e.BeastPanelType={}))[p_g.ACTIVE=0]="ACTIVE",p_g[p_g.EVOLVESUCC=1]="EVOLVESUCC",p_g[p_g.EVOLVEFAIl=2]="EVOLVEFAIl"}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.talisman.deploymentUpUI,__extends(b_s,p_l),b_s.prototype.init=function(){Kdz(this,Laya)},b_s.prototype.stopUpLvEffect=function(){this.upLvEft&&(this.upLvEft.off(Laya.Event.COMPLETE,this,this.stopUpLvEffect),this.upLvEft.visible=!1,this.upLvEft.stop())},b_s.prototype.playFailEffect=function(){this.upFailEft&&(this.upFailEft.visible=!0,this.upFailEft.play(!1),this.upFailEft.on(Laya.Event.COMPLETE,this,this.stopFailEffect))},b_s.prototype.stopFailEffect=function(){this.upFailEft&&(this.upFailEft.off(Laya.Event.COMPLETE,this,this.stopFailEffect),this.upFailEft.visible=!1,this.upFailEft.stop())},b_s.prototype.onClick=function(e){var p_l=e.target;switch(p_l.name){case"closeBtn":b_s.close();break;case"upBtn":var p_g=p_l.dataSource[0],d_u=this.dataSource;if(!d_u)return;var b_e=AlienBeastModle.instance.beasts[d_u.tId];if(!b_e||!b_e.active)return void b_p.broadcastNotice((j_x("1946_1558_206")+j_x("2335_1796")));var d_m=Config.beast_ploy[d_u.id];if(-1===p_g&&b_e.deployExp<d_m.exp)return r_f.instance.isWindow(94),void b_p.broadcastNotice((j_x("1241_144_2462")+j_x(1779)));var d_w=Config.beast_ploy[d_u.id].consume[0][1];if(-1!=p_g&&BagModel.instance.getItemCountByItemID(p_g,BagTypeDefine.BAG_TYPE_ITEM)<d_w)return void r_f.instance.isWindow(Config.beast_ploy[d_u.id].consume[0][0]);AlienBeastModle.instance.reqAlienBeastUpDeploy(d_u.tId,d_u.id,-1===p_g?1:2)}},b_s.open=function(e){void 0===e&&(e=null),UIM.open(b_s,["talisman.atlas"],e,!1,!1,!0)},b_s.prototype.onItemUpdate=function(e){void 0===e&&(e=null),this.dataSource&&this.updateData(this.dataSource)},b_s.prototype.updateData=function(e,p_l){void 0===e&&(e=null),void 0===p_l&&(p_l=!1);var p_g=Config.beast_ploy[e.id];this.nameTxt.text=p_g.name,this.lvTxt.text=e.level.toString(),this.title.skin="res/ui/beast/xuemaishengji.png";var b_s=AlienBeastModle.instance.beasts[e.tId],d_u=Config.beast_upgrade[AlienBeastModle.instance.getUpStarCfgByStar(e.tId,b_s.star)];if(this.maxLevelTipTxt.text=Utils.$((j_x("1081_2251_1163")+j_x("371_2342_1012")+"{1}"+j_x(2342)+""+j_x("1628_2251_799")+j_x("869_1148_2342")+j_x("1163_1628_2251")+j_x("1067_2128")),d_u.depLvUpper),p_g.icon){var b_e=Resource.ResUrl.getIconUrl(p_g.icon);this.icon=Resource.ResManager.Instance.getImg(b_e,this.icon)}this.dreamlandAddbox.visible=!1,this.nameBox.y=40,this.curEffectTxt.text=p_g.typeName+e.calAptitude(),this.upEffectTxt.text=p_g.typeName+e.calNextAptitude();var d_m=p_g.consume.concat();0<p_g.exp&&d_m.push([-1,p_g.exp]),this.list.array=d_m,this.dataSource=e},b_s.prototype.onAdded=function(){this.on(Laya.UIEvent.CLICK,this,this.onClick),LED.on(l_r.ALIEN_BEAST_DLOP_UP_S,this,this.playUpLvEffect),LED.on(l_r.ALIEN_BEAST_DLOP_UP_F,this,this.playFailEffect),LED.on(l_r.ITEM_ADD,this,this.onItemUpdate),LED.on(l_r.ITEM_REMOVE,this,this.onItemUpdate),LED.on(l_r.ITEM_AMOUNT_CHANGE,this,this.onItemUpdate);var e=this.dataSource;e&&this.updateData(e,!0),this.stopUpLvEffect()},b_s.prototype.updateItem=function(e,p_l){var p_g=this.dataSource;if(null!=p_g){var b_s=e.dataSource,d_u=b_s[0],b_e=e.getChildByName("itemBox").getChildByName("iconSp"),d_m=0<d_u?Resource.ResUrl.getIconUrl(Config.CItem(d_u).icon):Resource.ResUrl.getIconUrl(Config.CItem(99).icon);b_e=b_e&&Resource.ResManager.Instance.getImg(d_m,b_e);var d_w=e.getChildByName("hBox"),f_t=d_w.getChildByName("nameTxt"),v_z=d_w.getChildByName("countTxt"),d_h=e.getChildByName("rateTxt"),r_t=e.getChildByName("upBtn"),t_n=e.getChildByName("redPoint"),f_y=Config.beast_ploy[p_g.id];d_h.text=(j_x("371_2342_229")+j_x(1916)+"")+f_y.rate/100+"%";var p_q=AlienBeastModle.instance.beasts[p_g.tId],h_h=Config.beast_upgrade[AlienBeastModle.instance.getUpStarCfgByStar(p_g.tId,p_q.star)];if(h_h){var n_j=h_h.depLvUpper<=p_g.level;if(0<d_u){var j_l=Config.CItem(d_u),l_m=BagModel.instance.getItemCountByItemID(d_u,BagTypeDefine.BAG_TYPE_ITEM);f_t.text=Utils.$("{1}",j_l.name),v_z.text=Utils.$("({1}/{2})",l_m,b_s[1]),v_z.color=b_s[1]>l_m?Utils.Color.RED:Utils.Color.GREEN,t_n.visible=l_m>=b_s[1]&&!n_j}else p_q&&d_u<=0&&(f_t.text=Utils.$((j_x("1839_543_1241")+j_x(144))),v_z.text=Utils.$("({1}/{2})",p_q?p_q.deployExp:0,b_s[1]),v_z.color=b_s[1]>p_q.deployExp?Utils.Color.RED:Utils.Color.GREEN,d_h.text=(j_x("371_2342_229")+j_x(1916)+"100%"),t_n.visible=p_q.deployExp>=b_s[1]&&!n_j),p_q&&d_u<=0&&(f_t.text=Utils.$((j_x("1839_543_1241")+j_x(144))),v_z.text=Utils.$("({1}/{2})",p_q?p_q.deployExp:0,b_s[1]),v_z.color=b_s[1]>p_q.deployExp?Utils.Color.RED:Utils.Color.GREEN,d_h.text=(j_x("371_2342_229")+j_x(1916)+"100%"),t_n.visible=p_q.deployExp>=b_s[1]&&!n_j);r_t.dataSource=[d_u],f_t.width=f_t.textField.textWidth,v_z.width=v_z.textField.textWidth,d_w.refresh()}}},b_s.prototype.playUpLvEffect=function(){this.upLvEft&&(this.upLvEft.visible=!0,this.upLvEft.play(!1),this.upLvEft.on(Laya.Event.COMPLETE,this,this.stopUpLvEffect),Resource.SoundManager.instance.playSoundById(1,!1),this.updateData(this.dataSource))},b_s.prototype.onRemove=function(){Yxo(this,Laya,LED,l_r)},b_s.close=function(){Swg(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.nameTitlePosY=e.nameBox.y,e.init(),e}e.BeastUpDlopPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.AlienBeast.beastUpVariationPanelUI,__extends(b_s,p_l),b_s.prototype.onListener=function(){Cqz(LED,l_r,this,Laya)},b_s.prototype.onClick=function(e){switch(e.target.name){case"evolveBtn":var p_l=this.dataSource;p_l&&(p_l.isCanEvolve(!0)==UpState.CAN_UP&&AlienBeastModle.instance.reqBeastEvolve(p_l.id),p_l.level<=0&&b_p.broadcastNotice((j_x("1946_1558_206")+j_x("2335_1796"))))}},b_s.prototype.offListener=function(){Uzb(LED,l_r,this,Laya)},b_s.prototype.updateData=function(e,p_l){if(void 0===p_l&&(p_l=!1),e){this.dataSource=e;var p_g=Config.beast_beast[e.id],b_s=p_g.v_ui_offset||[0,0],d_u=Resource.ResUrl.getIconUrl(p_g.icon);this.setIcon(d_u,this.icon),this.icon.pos(this._modelPoint.x+b_s[0],this._modelPoint.y+b_s[1]),this.icon.scale(p_g.v_ui_scale,p_g.v_ui_scale),this.beastName.text=e.beastName+" ("+e.evoLvGrade+(j_x(643)+")"),this.beastName.color=Resource.ResManager.getQualityColor(p_g.quality),e.active?this.notActive.visible=!1:this.notActive.visible=!0;var b_e,d_m=AlienBeastModle.instance.getEvolveCfgByEvolveLv(e.id,e.evoLvGrade),d_w=AlienBeastModle.instance.getEvolveCfgByEvolveLv(e.id,e.evoLvGrade+1),f_t=AlienBeastModle.instance.getEvolveVarCfgByVarLv(e.id,e.variationGrade);e.evoLvGrade<=0&&e.evoLvGrade<=0?(this.startNull.visible=!0,this.crurentProp.visible=!1):(this.startNull.visible=!1,this.crurentProp.visible=!0,(b_e={})[2]=d_m?CharacterProperty.getPropertys(d_m.prop):[],f_t&&b_p.addProps(f_t.prop,1,b_e[2]),TalismanModel.instance.setProp(this.crurentProp,b_e,"<br>",["#4a728e","#00802e"],2)),f_t?this.showBeastEffect(f_t.effect):this._effectContent&&(this._effectContent.visible=!1),d_w?(this.maxNull.visible=!1,this.nextProp.visible=!0,this.tipLabel.visible=!0,this.evolveBtn.visible=!0,(b_e={})[2]=CharacterProperty.getPropertys(d_w.prop),f_t&&b_p.addProps(f_t.prop,1,b_e[2]),TalismanModel.instance.setProp(this.nextProp,b_e,"<br>",["#4a728e","#00802e"],2),this.consumeHtml.innerHTML=z_j.consumeToHtmlText(this.point,d_w.consume,Utils.setSpace(1),[Utils.Color.GREEN,Utils.Color.RED])):(this.maxNull.visible=!0,this.nextProp.visible=!1,this.consumeHtml.innerHTML=Utils.setColor((j_x("33_191_1300")+j_x("1117_1012_1081")+j_x("1375_15_2342")),"#00802e"),this.tipLabel.visible=!1,this.evolveBtn.visible=!1),p_l?(this.effect.play(!1),this.effect.visible=!0):this.effect.visible=!1,this.nameIcon.skin=e.beastNameIcon;var v_z=Config.beast_beast[e.id];v_z&&0<v_z.propType?(this.typeClip.visible=!0,this.typeClip_di.visible=!0,this.typeClip.index=v_z.propType-1):(this.typeClip.visible=!1,this.typeClip_di.visible=!1)}},b_s.open=function(e){Sue(e,UIM,b_s)},b_s.prototype.showBeastEffect=function(e){this._effectContent||(this._effectContent=new n_k,this.effectModel.addChild(this._effectContent)),this._effectContent.visible=!0,this._effectContent.changeModel("effects/beast"),this._effectContent.setAction(e,0,!0)},b_s.prototype.onRemove=function(){},b_s.prototype.onAdded=function(){},b_s.prototype.setIcon=function(e,p_l){""!=e?(p_l.visible=!0,p_l=Resource.ResManager.Instance.getImg(e,p_l)):p_l.visible=!1},b_s.prototype.updateItem=function(e,p_l){var p_g=new ModuleItemVO;p_g.id=e.dataSource[0],p_g.amount=e.dataSource[1],e.setItemData(p_g),e.scale(.8,.8)},b_s.prototype.upEffectComplete=function(){Yso(this)},b_s.close=function(){Oct(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.crurentProp.style.fontSize=22,e.crurentProp.style.leading=5,e.crurentProp.style.color="#f0ecd8",e.nextProp.style.fontSize=22,e.nextProp.style.leading=5,e.nextProp.style.color="#f0ecd8",e.point=new Laya.Point(60,60),e.consumeHtml.style.fontSize=24,e.consumeHtml.style.color="#f0ecd8",e.consumeHtml.style.valign="center",e.consumeHtml.style.align="center",e._modelPoint=new Laya.Point,e._modelPoint.x=e.icon.x,e._modelPoint.y=e.icon.y,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.BeastUpEvolvePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.AlienBeast.beastUpgradeSuccUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Kjk(this)},b_s.open=function(e){Mqs(e,UIM,b_s)},b_s.prototype.setIcon=function(e,p_l){""!=e?(p_l.visible=!0,p_l=Resource.ResManager.Instance.getImg(e,p_l)):p_l.visible=!1},b_s.prototype.updateData=function(){var e=this.dataSource;if(e){var p_l=Config.beast_beast[e.id];TalismanModel.instance.changeActStar(this.starBox,e.star);var p_g=Resource.ResUrl.getIconUrl(p_l.icon);this.setIcon(p_g,this.modelContainer),this.propTxt1.text=this.propTxt2.text="";var b_s=Config.beast_upgrade[AlienBeastModle.instance.getUpStarCfgByStar(e.id,e.star-1)],d_u=Config.beast_upgrade[AlienBeastModle.instance.getUpStarCfgByStar(e.id,e.star)];b_s&&(this.propTxt1.text=Utils.$(("{1}"+j_x(2342)+"\n{2}"+j_x(2342)),b_s.levelUpper,e.star-1)),d_u&&(this.propTxt2.text=Utils.$(("{1}"+j_x(2342)+"\n{2}"+j_x(2342)),d_u.levelUpper,d_u.depLvUpper))}},b_s.prototype.onRemove=function(){Meo(this)},b_s.prototype.updateItem=function(e,p_l){Who(e,p_l)},b_s.close=function(){Oae(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.BeastUpgradeSuccPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.AlienBeast.beast_upgradeUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Qen(this,Laya)},b_s.prototype.updateItem=function(e,p_l){if(e.isShowName=!1,e.setItemData(e.dataSource,ItemBoxDefine.MODULE_ITEM,!0),this.costList.contains(e)){var p_g=e.dataSource,b_s=BagModel.instance.getItemCountByItemID(p_g.id);e.numTxt.color=b_s<p_g.amount?Utils.Color.RED:Utils.Color.NAME_GREEN,e.numTxt.text=b_s+"/"+p_g.amount}},b_s.prototype.onClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":b_s.close();break;case"upBtn":var p_l=this.dataSource,p_g=Config.beast_upgrade[AlienBeastModle.instance.getUpStarCfgByStar(p_l.id,p_l.star)];if(!p_g)return void b_p.broadcastNotice((j_x("1300_1117_1067")+j_x(2128)));if(!b_p.checkConsume(p_g.consume))return r_f.instance.isWindow(p_g.consume[0][0]),void b_s.close();AlienBeastModle.instance.reqAlienBeastUpgrade(p_l.id),this._isSucc=!0,Resource.SoundManager.instance.playSoundById(7,!1),this.playEffect(this.effect_left)}},b_s.prototype.setNextGradeData=function(){var e=this.dataSource,p_l=Config.beast_beast[e.id],p_g=999,b_s=Config.beast_upgrade[AlienBeastModle.instance.getUpStarCfgByStar(e.id,e.star)];b_s&&(this.propTxt.text=b_s.propDesc,this.costList.array=b_p.getRewardDatas(b_s.consume),this.redPoint.visible=b_s.consume&&BagModel.instance.checkConsume(this.costList.array),b_s.consume||(p_g=e.star));var d_u=e.star+1;d_u=p_g<d_u?p_g:d_u,TalismanModel.instance.changeActStar(this.starBox_1,d_u),this.lvTxt_1.text=0<e.level?Utils.$(("{1}"+j_x(2342)),e.level):"",this.nameTxt_1.color=Utils.ItemUtils.getTalismanQualityColor(p_l.quality),this.nameTxt_1.changeText(p_l.name);var b_e=p_l.quality-3;this.bgQuaClip_1.index=b_e<0?0:b_e;var d_m=Resource.ResUrl.getIconUrl(p_l.icon);this.setIcon(d_m,this.icon_1)},b_s.prototype.onRemove=function(){Wuw(this,Laya)},b_s.prototype.playEffectComplete=function(e){e&&(e.visible=!1,e===this.effect_left?this.playEffect(this.effect_mid):e===this.effect_mid?this.playEffect(this.effect_right):b_s.close())},b_s.prototype.openSuccPanel=function(){if(this._isSucc){var p_l=this.dataSource;p_l&&e.BeastUpgradeSuccPanel.open(p_l),this._isSucc=!1}},b_s.prototype.setCurGradeData=function(){var e=this.dataSource,p_l=Config.beast_beast[e.id];this.lvTxt.text=0<e.level?Utils.$(("{1}"+j_x(2342)),e.level):"",TalismanModel.instance.changeActStar(this.starBox,e.star),this.nameTxt.color=Utils.ItemUtils.getTalismanQualityColor(p_l.quality),this.nameTxt.changeText(p_l.name);var p_g=p_l.quality-3;this.bgQuaClip.index=p_g<0?0:p_g;var b_s=Resource.ResUrl.getIconUrl(p_l.icon);this.setIcon(b_s,this.icon)},b_s.prototype.updateData=function(){Oph(this)},b_s.open=function(e){Aqx(e,UIM,b_s)},b_s.prototype.playEffect=function(e){e&&(e.visible=!0,e.play(!1))},b_s.prototype.setIcon=function(e,p_l){""!=e?(p_l.visible=!0,p_l=Resource.ResManager.Instance.getImg(e,p_l)):p_l.visible=!1},b_s.close=function(){Ojj(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.rewardList.itemRender=e.ItemBox,p_g.costList.itemRender=e.ItemBox,p_g.rewardList.renderHandler=Laya.Handler.create(p_g,p_g.updateItem,null,!1),p_g.costList.renderHandler=Laya.Handler.create(p_g,p_g.updateItem,null,!1),p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g}e.BeastUpStarPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.bag.TalismanItemTipPanelUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){var e=this.dataSource;if(this.titleImage.skin="res/ui/common/xzys.png",e&&e.id){var p_l=Config.item_consumeable[e.id].effects;this._type="randAddDeployExp"===p_l[0][0]?0:1;var p_g=AlienBeastModle.instance.beastsActivedToArray;p_g&&1<p_g.length&&(p_g=p_g.sort(this.compareFun)),this.list_select.array=p_g,this.updateCount();var b_s=Config.CItem(e.id);this.txt_name.text=b_s.name,this.txt_desc.text=b_s.desc}this.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.TALISMAN_ATTR_UPDATE,this,this.updateAttr)},b_s.open=function(e){Ery(e,UIM,b_s)},b_s.prototype.onRemove=function(){Grl(this,Laya,LED,l_r)},b_s.prototype.onClick=function(e){var p_l=e.target;switch(p_l.name){case"closeBtn":case"backBtn":b_s.close();break;case"btn_use":this.onUseBtnClick(p_l)}},b_s.prototype.onUseBtnClick=function(e){var p_l=this.dataSource;if(0==this._count)return b_p.broadcastNotice(Config.CItem(p_l.id).name+(j_x("2462_1779"))),void LongPushUtil.inst.clearLoopPush();var p_g=e.dataSource.id,b_s=BagModel.instance.getItemInfoByUuid(BagTypeDefine.BAG_TYPE_ITEM,p_l.uuid);(b_s=b_s||BagModel.instance.getItemById(BagTypeDefine.BAG_TYPE_ITEM,p_l.id))&&BagModel.instance.reqUseItem(b_s.uuid,1,p_g)},b_s.prototype.updateAttr=function(){Qrb(this)},b_s.prototype.updateCount=function(e){void 0===e&&(e=!1);var p_l=this.dataSource;p_l&&(this._count=BagModel.instance.getItemCountByItemID(p_l.id,BagTypeDefine.BAG_TYPE_ITEM),this.txt_count.text="x"+this._count,this.txt_count.color=this._count<=0?"#ff0000":"#00802e",0==this._count&&e&&LED.event(l_r.ITEM_USE_DEL,p_l.id))},b_s.prototype.updateItem=function(e,p_l){if(e){var p_g=e.dataSource,b_s=Config.beast_beast[p_g.id],d_u=e.getChildByName("iconSp"),b_e=Resource.ResUrl.getIconUrl(b_s.icon);d_u=Resource.ResManager.Instance.getImg(b_e,d_u,90,90);var d_m=e.getChildByName("txt_name"),d_w=e.getChildByName("txt_level"),f_t=e.getChildByName("txt_exp"),v_z=e.getChildByName("txt_exp_title"),d_h=e.getChildByName("btn_use"),r_t=e.getChildByName("clip_qua"),t_n=e.getChildByName("type_clip"),f_y=e.getChildByName("fight_txt");d_m.text=p_g.beastName,d_w.text=Utils.$((j_x("15_2342")+":{1}"),p_g.level),f_t.text=p_g.deployExp+"",r_t.index=b_s.quality-1,t_n.visible=!1,f_t.visible=v_z.visible=0===this._type,d_h.dataSource=p_g,d_h.on(Laya.Event.MOUSE_DOWN,this,this.onUseBtnMD);var p_q=AlienBeastModle.instance.getLvProps(p_g),h_h=b_p.calPropFight(p_q);f_y.text=(j_x("383_767")+":")+h_h}},b_s.prototype.compareFun=function(e,p_l){var p_g=Config.beast_beast[e.id],b_s=Config.beast_beast[p_l.id];return b_s.quality===p_g.quality?e.level===p_l.level?p_g.id-b_s.id:p_l.level-e.level:b_s.quality-p_g.quality},b_s.prototype.onUseBtnMD=function(e){var p_l=this,p_g=e.target;LongPushUtil.inst.bingLongPushBtn(this,(function(){p_l.onUseBtnClick(p_g)}))},b_s.close=function(){Ciq(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e._count=0,z_j.setList(e.list_select,e,e.updateItem),z_j.setListScroll(e.list_select,!0),e}e.AlienBeastItemPanel=p_g;var d_u,b_e=(d_u=ui.window.bag.TalismanItemSuccPanelUI,__extends(d_m,d_u),d_m.prototype.onAdded=function(){var e=this.dataSource.type,p_l=this.dataSource.infos,p_g=0<d_m.count?d_m.count:1;if(this.list_show.array=1<p_l.length?this.onMergeAtt(p_l):p_l,Config.CItem(d_m.itemId)){var b_s=Config.CItem(d_m.itemId).name;this.txt_num.text=1===e?Utils.$((j_x("1749_42_1365")+j_x("1876_743")+"{1}"+j_x(944)+"{2}"),p_g,b_s):Utils.$((j_x("1749_42_1365")+j_x("1876_743")+"{1}"+j_x(844)+"{2}"),p_g,b_s);var d_u=this.list_show.length,b_e=Math.ceil(d_u/this.list_show.repeatX);if(b_e<this.list_show.repeatY){var d_w=0;0<d_u&&(d_w=this.list_show.getCell(0).height),this.bg.height=b_e*d_w+this.list_show.y+10,this.height=this.bg.height+50}else this.bg.height=this.panelStartheight-50,this.height=this.panelStartheight;this.y=Stage.height-this.panelStartheight>>1,this.clickTipLab.y=this.height+5}else d_m.close()},d_m.prototype.onRemove=function(){Glm(d_m)},d_m.prototype.onMergeAtt=function(e){var p_l=[];for(var p_g in e){var b_s=!1;for(var d_u in p_l)if(e[p_g].tsId===p_l[d_u].tsId){p_l[d_u].val+=e[p_g].val,b_s=!0;break}b_s||p_l.push(e[p_g])}return p_l},d_m.open=function(e,p_l){void 0===p_l&&(p_l=0),e&&UIM.open(d_m,null,{infos:e,type:p_l},!1,!1,!0,!0)},d_m.prototype.updateItem=function(e,p_l){if(e){var p_g=e.dataSource,b_s=e.getChildByName("txt_exp");p_g.ty?b_s.text=d_v.getDesc(p_g.ty)+"+"+p_g.val:b_s.text=(j_x("980_799_1241")+j_x(144)+"+")+p_g.val;var d_u=Config.beast_beast[p_g.tsId],b_e=e.getChildByName("iconSp"),d_m=Resource.ResUrl.getIconUrl(d_u.icon);b_e=Resource.ResManager.Instance.getImg(d_m,b_e,90,90)}},d_m.close=function(){Mac(UIM,d_m)},d_m);function d_m(){var e=d_u.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.list_show.vScrollBarSkin="",e.list_show.scrollBar.elasticDistance=100,e.list_show.scrollBar.elasticBackTime=200,e.panelStartheight=e.height,e.list_show.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e}e.BeastItemUseSuccPanel=b_e}(UI=UI||{});var BagSortType,BagTypeDefine,BagSize,ItemTypeDefine,ItemQualityDefine,BagBaseModel=function(){function e(){this.m_commonCds={},this.m_selfCds={}}return e.prototype.getSelfCD=function(e){return this.m_selfCds[e]?this.m_selfCds[e]:null},e.prototype.reqUseItem=function(e,p_l,p_g){void 0===p_g&&(p_g=0);var b_s=new c2m_item_use;b_s.uuid=e,b_s.num=p_l,b_s.tid=p_g,DB.instance.query(c2m_item_use,b_s);var d_u=BagModel.instance.getItemInfoByUuid(BagTypeDefine.BAG_TYPE_ITEM,e);d_u&&("VIP"+j_x("221_656"))==d_u.name&&b_p.broadcastNotice(("vip"+j_x("1241_144_1628")+j_x(371))+Config.global[1904].i_info*p_l,1,"#71de66")},e.prototype.getCommonCD=function(e){if(!Config.CItem(e))return null;var p_l=Config.CItem(e).hasOwnProperty("ccd")?Config.CItem(e).ccd:null;if(!p_l)return null;var p_g=this.m_commonCds[p_l];if(p_g)for(var b_s in p_g)if(p_g[b_s].id==e)return p_g[b_s];return null},e.prototype.reqItemSort=function(e){var p_l=new c2m_item_sort;p_l.bagType=e,DB.instance.query(c2m_item_sort,p_l)},e.prototype.initCommonCDGroup=function(){if(!this.m_commonCds){this.m_commonCds={};var e=Config.item_consumeable;for(var p_l in e){var p_g=e[p_l].hasOwnProperty("ccd")?e[p_l].ccd:null;if(p_g){var b_s=this.m_commonCds[p_g]||[],d_u=new TimeVo;d_u.id=e[p_l].id,d_u.setCDTime(0,Config.commonCd[p_g].cd),b_s.push(d_u),this.m_commonCds[p_g]=b_s}}}},e.prototype.changeItemCd=function(e,p_l,p_g,b_s){return void 0===b_s&&(b_s=!1),!1},e.prototype.reqGetItemInfos=function(e){var p_l=new c2m_item_bag_items;p_l.type=e,DB.instance.query(c2m_item_bag_items,p_l)},e.prototype.changeNewItemCommonCD=function(e){for(var p_l in this.initCommonCDGroup(),this.m_commonCds)for(var p_g in this.m_commonCds[p_l]){var b_s=this.m_commonCds[p_l][p_g];if(!b_s.cdExceed&&b_s.id==e.id)return void e.setCommonCD(b_s.lastTime,b_s.cdDuration)}},e.prototype.reqLimitTimeItemUseCount=function(){var e=new c2m_item_cd;DB.instance.query(c2m_item_cd,e)},e}(),BagModel=function(e){function p_l(){var p_g=e.call(this)||this;return p_g._datas={},p_g._useItemCounts={},p_g._equipNum=0,p_g.curTabCount=0,LED.on(l_r.GET_CONSUMABLE_USE_INFO,p_g,p_l.getItemUseInfo),p_g}return __extends(p_l,e),p_l.getItemUseInfo=function(e){var p_l=e.list||[];for(var p_g in p_l){var b_s=p_l[p_g];if(b_s.itemId){Config.CItem(b_s.itemId);var d_u=UIM.instance.getMainUI();if(UIM.instance.getMainLetUI(),!UI.ConsumableTipsPanel.ItemPos)return;var b_e=UI.ConsumableTipsPanel.ItemPos,d_m=new Laya.Point;if(1==b_s.itemId)d_m=d_u.goldTxt.localToGlobal(d_m),r_n.instance.obtainAssetEffect(b_s.itemId,b_e,d_m);else if(2==b_s.itemId)d_m=d_u.copperTxt.localToGlobal(d_m),r_n.instance.obtainAssetEffect(b_s.itemId,b_e,d_m);else if(95==b_s.itemId){d_m=d_u.skillBtn.localToGlobal(d_m);var d_w=Config.item_coin[b_s.itemId].icon;r_n.instance.flyToBagEffect(d_w,b_e,d_m,null)}else d_m=UIM.instance.getMainUI().dongfuBtn.localToGlobal(d_m),d_w=Config.CItem(b_s.itemId).icon,r_n.instance.flyToBagEffect(d_w,b_e,d_m,null)}}},p_l.prototype.getEquipInfos=function(){for(var e=this.getItemInfosByBagType(BagTypeDefine.BAG_TYPE_EQUIPMENT),p_l=new Array(EquipDefine.PartNum),p_g=0,b_s=e;p_g<b_s.length;p_g++){var d_u=b_s[p_g];p_l[d_u.place-1]=d_u}return p_l},p_l.prototype.initBagInfo=function(e,p_g,b_s){e&&(this._datas[p_g]=[]),this._datas[p_g]||(this._datas[p_g]=[]);var d_u,b_e,d_m,d_w=this._datas[p_g];for(var f_t in b_s)(d_u=new BagInfoVO).update(b_s[f_t]),d_w.push(d_u),(b_e=this.getSelfCD(d_u.id))&&0<b_e.remainTime&&d_u.setCDTime(b_e.lastTime,b_e.cdDuration),(d_m=this.getCommonCD(d_u.id))&&0<d_m.remainTime&&d_u.setCommonCD(d_m.lastTime,d_m.cdDuration);d_w.length,this._equipNum=p_l.instance.getItemsByItemType(BagTypeDefine.BAG_TYPE_ITEM,ItemTypeDefine.EQUIPMENT).length,LED.event(l_r.ITEM_INFO_UPDATE,p_g)},p_l.prototype.updateHelperInfo=function(){Gsi(LED,l_r)},p_l.prototype.setDayUseTime=function(e,p_l){var p_g=this.getItemInfosByBagType(BagTypeDefine.BAG_TYPE_ITEM),b_s=this._useItemCounts;for(var d_u in p_g)b_s[d_u]&&(p_g[d_u].usedTime=b_s[d_u])},p_l.prototype.compareSortFun=function(e,p_l){var p_g=Config.CItem(e.id),b_s=Config.CItem(p_l.id);if(Config.item_equipment[e.id])return e.expireTime!=p_l.expireTime?p_l.expireTime-e.expireTime:p_g.quality===b_s.quality?p_g.level===b_s.level?p_l.id-e.id:b_s.level-p_g.level:b_s.quality-p_g.quality;if(e.expireTime!=p_l.expireTime)return p_l.expireTime-e.expireTime;var d_u=b_p.getItemWeight(e.id),b_e=b_p.getItemWeight(p_l.id);return d_u===b_e?p_g.quality===b_s.quality?p_l.id-e.id:b_s.quality-p_g.quality:d_u-b_e},p_l.prototype.addItem=function(e,p_l,p_g){void 0===p_g&&(p_g=0);var b_s=this.getItemInfosByBagType(e),d_u=new BagInfoVO;d_u.update(p_l),b_s.push(d_u),this.changeNewItemCommonCD(d_u),LED.event(l_r.ITEM_ADD,{bagType:e,id:d_u.id,source:p_g});var b_e=LgcM.ins.heroVo;if(b_e){if(e===BagTypeDefine.BAG_TYPE_ITEM&&EquipModel.instance.isEquipTips(d_u,b_e.entryId)&&LED.event(l_r.EQUIP_SWAP_TIP,d_u),Laya.timer.once(160,this,this.updateHelperInfo),j_a.itemIns().add(this,this.updateConsumInfo,[e,d_u]),e===BagTypeDefine.BAG_TYPE_ITEM){Config.CItem(d_u.id).mainclass==ItemTypeDefine.EQUIPMENT&&this._equipNum++;var d_m={bagType:e,uuid:d_u.uuid,id:d_u.id,source:p_g,count:d_u.amount};p_g==ItemSourceDefine.lottert_ride||p_g==ItemSourceDefine.lottert_fashion?d_o.instance.pushDelayItem(d_m):j_a.itemIns().add(this,this.broadcastNotic,[d_u.id,d_u.amount,p_g])}200052!=p_l.itemId&&200084!=p_l.itemId||j_a.itemIns().add(this,this.broadcastNotic,[p_l.itemId])}},p_l.prototype.getItemCount=function(e){var p_l=this.getItemInfosByBagType(BagTypeDefine.BAG_TYPE_ITEM),p_g=0;if(p_l&&0<p_l.length)for(var b_s in p_l)e==p_l[b_s].id&&(p_g+=p_l[b_s].amount);return p_g},p_l.prototype.updateItemSort=function(e,p_l){for(var p_g in p_l)this.updateAmount(e,p_l[p_g].uuid,p_l[p_g].amount,0,!0);var b_s=this.getItemInfosByBagType(e);1<b_s.length&&(this._datas[e]=b_s.sort(this.compareSortFun)),LED.event(l_r.ITEM_SORT_CHANGE)},p_l.prototype.getItemInfoByUuid=function(e,p_l){for(var p_g=0,b_s=this.getItemInfosByBagType(e);p_g<b_s.length;p_g++){var d_u=b_s[p_g];if(d_u.uuid===p_l)return d_u}return null},p_l.prototype.getItemEquipCount=function(){for(var e=0,p_l=0,p_g=this._datas[BagTypeDefine.BAG_TYPE_ITEM]||[];p_l<p_g.length;p_l++){var b_s=p_g[p_l],d_u=Config.item_equipment[b_s.id];d_u&&1===d_u.mainclass&&++e}return e},p_l.prototype.getItemsByItemType=function(e,p_l,p_g){void 0===p_l&&(p_l=0),void 0===p_g&&(p_g=-1);var b_s=this.getItemInfosByBagType(e),d_u=[];for(var b_e in b_s)if(Config.CItem(b_s[b_e].id)){var d_m=Config.CItem(b_s[b_e].id).mainclass,d_w=Config.CItem(b_s[b_e].id).subclass;p_l===ItemTypeDefine.ITEM?d_m!=ItemTypeDefine.EQUIPMENT&&d_u.push(b_s[b_e]):d_m===p_l&&(-1===p_g?d_u.push(b_s[b_e]):p_g===d_w&&d_u.push(b_s[b_e]))}return d_u},p_l.prototype.getBagItemsByType=function(e,p_l,p_g){void 0===p_l&&(p_l=0),void 0===p_g&&(p_g=-1);var b_s=this.getItemsByItemType(e,p_l,p_g);this.curTabCount=b_s.length;var d_u=!0;if(p_l===ItemTypeDefine.EQUIPMENT&&this.curTabCount>BagSize.BAG_SIZE_EQUIP&&(this.curTabCount=BagSize.BAG_SIZE_EQUIP,b_s=b_s.slice(0,300),d_u=!1),d_u){var b_e=p_l===ItemTypeDefine.EQUIPMENT?30:35,d_m=b_s.length<b_e?b_s.length:b_s.length%5;if(0<d_m||0==b_s.length){d_m=b_s.length<b_e?b_e-d_m:5-d_m;var d_w=[];d_w=d_w.concat(b_s);for(var f_t=void 0,v_z=0;v_z<d_m;v_z++)(f_t=new BagInfoVO).id=0,d_w.push(f_t);return d_w}}return b_s},p_l.prototype.updateAmount=function(e,p_l,p_g,b_s,d_u){void 0===b_s&&(b_s=0),void 0===d_u&&(d_u=!1);for(var b_e,d_m=this.getItemInfosByBagType(e),d_w=0,f_t=0;f_t<d_m.length;f_t++)if((b_e=d_m[f_t]).uuid==p_l){d_w=p_g-b_e.amount,0==(b_e.amount=p_g)&&d_u&&d_m.splice(f_t,1);break}if(!d_u&&b_e){var v_z={bagType:e,uuid:p_l,id:b_e.id,source:b_s,count:d_w};LED.event(l_r.ITEM_AMOUNT_CHANGE,v_z),Laya.timer.once(160,this,this.updateHelperInfo),0<d_w&&0!=b_e.amount&&(b_s==ItemSourceDefine.lottert_ride||b_s==ItemSourceDefine.lottert_fashion?d_o.instance.pushDelayItem(v_z):j_a.itemIns().add(this,this.broadcastNotic,[b_e.id,d_w,b_s]))}b_e&&j_a.itemIns().add(this,this.updateConsumInfo,[e,b_e])},p_l.prototype.showDecompose=function(e){void 0===e&&(e=0),b_p.confirm((j_x("1166_130_1466")+j_x("2460_2462_1779")+""+j_x("68_2032_372")+j_x("122_1012_2402")+j_x(266)+""),(function(){UI.DecomposePanel.open(e)}))},p_l.prototype.calcEquipSwap=function(e){if(void 0===e&&(e=!0),UIM.instance.getMainLetUI()){for(var p_l=this.getItemInfosByBagType(BagTypeDefine.BAG_TYPE_ITEM),p_g=this.getEquipInfos(),b_s=[],d_u=LgcM.ins.heroVo,b_e=0,d_m=p_l;b_e<d_m.length;b_e++){var d_w=d_m[b_e];if(EquipModel.instance.isEquipTips(d_w,d_u.entryId,p_g)){var f_t=d_w.place,v_z=b_s[f_t-1];(!v_z||v_z.fighting<d_w.fighting)&&(b_s[f_t-1]=d_w)}}for(var d_h=0,r_t=b_s;d_h<r_t.length;d_h++){var t_n=r_t[d_h];t_n&&(e?LED.event(l_r.EQUIP_SWAP_TIP,t_n):EquipModel.instance.reqWearEquip(t_n.uuid))}}},p_l.prototype.changeItemCd=function(e,p_l,p_g,b_s){void 0===b_s&&(b_s=!1);var d_u,b_e=this.getItemInfosByBagType(BagTypeDefine.BAG_TYPE_ITEM);for(var d_m in b_e)b_e[d_m].id==e&&(b_s?b_e[d_m].setCommonCD(p_l,p_g):b_e[d_m].setCDTime(p_l,p_g),d_u=!0);if(this.m_selfCds||(this.m_selfCds={}),!b_s){var d_w=new TimeVo;d_w.setCDTime(p_l,p_g),this.m_selfCds[e]=d_w}return d_u},p_l.prototype.removeItem=function(e,p_l){for(var p_g,b_s=this.getItemInfosByBagType(e),d_u=0;d_u<b_s.length;d_u++)if((p_g=b_s[d_u]).uuid==p_l){b_s.splice(d_u,1);break}p_l&&p_g&&p_g.id&&(e==BagTypeDefine.BAG_TYPE_ITEM&&Config.CItem(p_g.id).mainclass==ItemTypeDefine.EQUIPMENT&&this._equipNum--,LED.event(l_r.ITEM_REMOVE,{bagType:e,uuid:p_l,id:p_g.id}),Laya.timer.once(160,this,this.updateHelperInfo)),p_g=null},p_l.prototype.setFlag=function(e){var p_l=this.getItemInfosByBagType(BagTypeDefine.BAG_TYPE_ITEM);for(var p_g in p_l)p_l[p_g].id===e&&(p_l[p_g]._flag=1)},p_l.prototype.checkFreeSlot=function(e){for(var p_l={},p_g=0,b_s=e;p_g<b_s.length;p_g++){var d_u=b_s[p_g];p_l[d_u.id]||(p_l[d_u.id]=0),p_l[d_u.id]+=d_u.amount}var b_e=0;for(var d_m in p_l){var d_w=Number(d_m),f_t=Config.CItem(d_w);f_t&&f_t.stacks&&(b_e+=Math.ceil(p_l[d_w]/f_t.stacks))}var v_z=this.getItemsByItemType(BagTypeDefine.BAG_TYPE_ITEM,ItemTypeDefine.EQUIPMENT).length;return BagSize.BAG_SIZE_EQUIP-v_z>=b_e},p_l.prototype.isConsumable=function(e){return Ark(e)},p_l.prototype.getItemInfosByBagType=function(e){return Aow(e,this)},p_l.prototype.delayDispatchAct=function(e){200052==e&&LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.sgsq),200084==e&&LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.xxsb)},p_l.prototype.changeCommonCD=function(e,p_l,p_g){var b_s;this.initCommonCDGroup();var d_u,b_e=this.m_commonCds[e];if(b_e)for(var d_m in b_e)(d_u=b_e[d_m]).setCDTime(p_l,p_g),this.changeItemCd(d_u.id,p_l,p_g,!0)&&(b_s=!0);return b_s},p_l.prototype.checkComposeRedPoint=function(e){void 0===e&&(e=1);var p_l,p_g,b_s=Config.item_compose;for(var d_u in b_s)if(2!==(p_l=(p_g=b_s[d_u]).type)&&3!==p_l){if(e!=GameDefine.comp_All){if(e==GameDefine.comp_God){var b_e=ItemComposeModel.instance.getComposeTypeById(p_g.id),d_m=b_e[0];b_e[1],p_l=d_m}else{var d_w=Config.item_composeType[p_g.type];if(!d_w)continue;p_l=d_w.type}if(p_l!=e)continue}if(ItemComposeModel.instance.canCompose(p_g.id,1,p_l==GameDefine.comp_God))return!0}return!1},p_l.prototype.checkConsume=function(e,p_l){if(void 0===p_l&&(p_l=!1),!e)return!0;for(var p_g=0,b_s=e;p_g<b_s.length;p_g++){var d_u=b_s[p_g];if(this.getItemCountByItemID(d_u.id,BagTypeDefine.BAG_TYPE_ITEM)<d_u.amount)return p_l&&r_f.instance.isWindow(d_u.id),!1}return!0},p_l.prototype.getItemsById=function(e,p_l){void 0===p_l&&(p_l=1);var p_g=this.getItemInfosByBagType(p_l);if(p_g&&0<p_g.length){var b_s=[];for(var d_u in p_g)e==p_g[d_u].id&&b_s.push(p_g[d_u])}return null},p_l.prototype.broadcastNotic=function(e,p_l,p_g){if(void 0===p_g&&(p_g=0),p_g!==ItemSourceDefine.HangupReward&&p_g!=ItemSourceDefine.ActDrawCard&&p_g!=ItemSourceDefine.DrawCard){var b_s=Config.CItem(e);b_s&&(1==b_s.mainclass&&1==b_s.subclass||!(3<=b_s.quality||p_g==ItemSourceDefine.EquipDecompose)?b_p.broadcastNotice(Utils.$("{1} x{2}",b_s.name,p_l),BroadcastType.ITEM_GAIN,Utils.ItemUtils.getQualityColor(b_s.quality)):BroadcastNoticeManager.instance.popupSpecialItem(e,p_l))}},p_l.prototype.updateConsumInfo=function(e,p_l){if(p_l){var p_g=Config.CItem(p_l.id);if(p_g&&e==BagTypeDefine.BAG_TYPE_ITEM&&this.isConsumable(p_g))if(0<p_l.expireTime){var b_s=Config.item_consumeable[p_l.id];b_s&&b_s.useLimit&&this._useItemCounts[p_l.id]?b_s.useLimit>this._useItemCounts[p_l.id]&&LED.event(l_r.USECONSUMABLE,p_l):LED.event(l_r.USECONSUMABLE,p_l)}else LED.event(l_r.USECONSUMABLE,p_l)}},p_l.prototype.getItemCountByItemIDs=function(e,p_l){void 0===p_l&&(p_l=-1);var p_g,b_s={};p_g=-1==p_l?(p_g=(p_g=this.getItemInfosByBagType(BagTypeDefine.BAG_TYPE_ITEM)).concat(this.getItemInfosByBagType(BagTypeDefine.BAG_TYPE_EQUIPMENT))).concat(this.getItemInfosByBagType(BagTypeDefine.BAG_TYPE_GOD)):this.getItemInfosByBagType(p_l);var d_u=0,b_e=0;for(var d_m in e){if(b_e=b_s[d_u=e[d_m][0]]||0,d_u<100)b_e+=b_p.getCoin(d_u);else for(var d_w in p_g)p_g[d_w].id==d_u&&(b_e+=p_g[d_w].amount);b_s[d_u]=b_e}return b_s},p_l.prototype.getItemById=function(e,p_l){void 0===e&&(e=-1);var p_g=this.getItemInfosByBagType(e);if(p_g&&0<p_g.length)for(var b_s in p_g)if(p_l==p_g[b_s].id)return p_g[b_s];return null},p_l.prototype.getItemCountByItemID=function(e,p_l){if(void 0===p_l&&(p_l=-1),e<100)return b_p.getCoin(e);var p_g;p_g=-1==p_l?(p_g=(p_g=this.getItemInfosByBagType(BagTypeDefine.BAG_TYPE_ITEM)).concat(this.getItemInfosByBagType(BagTypeDefine.BAG_TYPE_EQUIPMENT))).concat(this.getItemInfosByBagType(BagTypeDefine.BAG_TYPE_GOD)):this.getItemInfosByBagType(p_l);var b_s=0;for(var d_u in p_g)p_g[d_u].id==e&&(b_s+=p_g[d_u].amount);return b_s},p_l.prototype.swapItem=function(e,p_l,p_g,b_s,d_u,b_e){if(e!==b_s){for(var d_m,d_w=this.getItemInfosByBagType(e),f_t=this.getItemInfosByBagType(b_s),v_z=-1,d_h=0;d_h<d_w.length;++d_h)if((f_y=d_w[d_h]).uuid===p_l){v_z=d_h,d_m=f_y;break}if(!(v_z<0)){var r_t,t_n=-1;if(d_u&&0<d_u.length)for(d_h=0;d_h<f_t.length;++d_h){var f_y;if((f_y=f_t[d_h]).uuid===d_u){t_n=d_h,r_t=f_y;break}}t_n<0?(d_w.splice(v_z,1),f_t.push(d_m),d_m.slot=b_e):(d_m.slot=b_e,r_t.slot=p_g,r_t.countTalisID(),d_w.splice(v_z,1,r_t),f_t.splice(t_n,1,d_m)),d_m.countTalisID();var p_q={bagType1:e,uuid1:p_l,bagType2:b_s,uuid2:d_u};LED.event(l_r.ITEM_SWAP,p_q)}}},p_l.sortFun=function(e,p_l){void 0===p_l&&(p_l=1),e.sort((function(e,p_g){switch(p_l){case BagSortType.STATE:return e.state===p_g.state?p_g.quality===e.quality?p_g.level===e.level?e.id-p_g.id:p_g.level-e.level:p_g.quality-e.quality:p_g.state-e.state;case BagSortType.QUALITY:return p_g.quality===e.quality?p_g.level===e.level?e.id-p_g.id:p_g.level-e.level:p_g.quality-e.quality;case BagSortType.LEVEL:return p_g.level===e.level?e.id-p_g.id:p_g.level-e.level;case BagSortType.ID:return p_g.id-e.id}}))},p_l.instance=new p_l,p_l}(BagBaseModel),SkillTypeDefine,PassiveSkillType,SkillSelectDefine;!function(e){e[e.QUALITY=1]="QUALITY",e[e.STATE=2]="STATE",e[e.LEVEL=3]="LEVEL",e[e.ID=4]="ID"}(BagSortType=BagSortType||{}),function(e){e[e.BAG_TYPE_ITEM=1]="BAG_TYPE_ITEM",e[e.BAG_TYPE_EQUIPMENT=2]="BAG_TYPE_EQUIPMENT",e[e.BAG_TYPE_RIDE=5]="BAG_TYPE_RIDE",e[e.BAG_TYPE_TALIS=6]="BAG_TYPE_TALIS",e[e.BAG_TYPE_GOD=7]="BAG_TYPE_GOD"}(BagTypeDefine=BagTypeDefine||{}),function(e){e[e.BAG_SIZE_EQUIP=300]="BAG_SIZE_EQUIP"}(BagSize=BagSize||{}),function(e){e[e.ITEM=0]="ITEM",e[e.EQUIPMENT=1]="EQUIPMENT",e[e.MATERIAL=2]="MATERIAL",e[e.CONSUME=3]="CONSUME",e[e.SPIRIT=4]="SPIRIT",e[e.TALISEQUIPMENT=6]="TALISEQUIPMENT",e[e.GODEQUIP=7]="GODEQUIP"}(ItemTypeDefine=ItemTypeDefine||{}),function(e){e[e.GREEN=2]="GREEN",e[e.BLUE=3]="BLUE",e[e.PURPLE=4]="PURPLE",e[e.ORANGE=5]="ORANGE",e[e.RED=6]="RED"}(ItemQualityDefine=ItemQualityDefine||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.bagUI,__extends(d_u,p_l),d_u.prototype.init=function(){this._listHeight=this.list.height,this.list.array=[],this.list.vScrollBarSkin="",this.list.scrollBar.elasticDistance=100,this.list.scrollBar.elasticBackTime=200,this.combinebtn.visible=!1,this._clipTab=new p_c(this.tab),this.tab.selectedIndex=-1},d_u.prototype.onSelectItem=function(e){Ykv(e,LED,l_r,BagModel)},d_u.prototype.onClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":d_u.close();break;case"smeltBtn2":e.DecomposePanel.open(0),d_u.close(!0);break;case"smeltBtn":e.DecomposePanel.open(2),d_u.close(!0);break;case"addBtn":e.VipRechardePanel.open();break;case"combinebtn":e.ItemComposePanel.open(),d_u.close(!0)}},d_u.prototype.updateVisable=function(){var e=this.tab.selectedIndex;this.equipBox.visible=1==e,this.smeltBtn.visible=2==e||3==e,this.list.height=1==e?this._listHeight:this._listHeight+this.equipBox.height},d_u.prototype.checkLimitTimeItem=function(){var p_l=BagModel.instance.getItemsByItemType(BagTypeDefine.BAG_TYPE_ITEM,ItemTypeDefine.CONSUME),p_g=[],b_s=Math.floor(SyncTime.serverTime/1e3);for(var d_u in p_l)0<p_l[d_u].expireTime&&p_l[d_u].expireTime-b_s<=this._time&&(p_l[d_u]._flag||p_g.push(p_l[d_u]));if(p_g&&0<p_g.length){for(var d_u in p_g)BagModel.instance.setFlag(p_g[d_u].id);e.LimitTimeTipsView.open(p_g)}},d_u.prototype.destroy=function(e){Mgs(e,p_l,this)},d_u.prototype.setBagCount=function(){this.bagCountTxt.text=Utils.$("{1}/{2}",BagModel.instance.curTabCount,BagSize.BAG_SIZE_EQUIP)},d_u.prototype.onAdded=function(){this._clipTab.on("tabSelect",this,this.onTabSelect),this.on(Laya.UIEvent.CLICK,this,this.onClick),LED.on(l_r.ITEM_INFO_UPDATE,this,this.updateListInfo),LED.on(l_r.ITEM_ADD,this,this.updateListInfo),LED.on(l_r.ITEM_REMOVE,this,this.updateListInfo),LED.on(l_r.ITEM_SORT_CHANGE,this,this.updateListInfo),LED.on(l_r.ITEM_AMOUNT_CHANGE,this,this.updateListInfo),LED.on(l_r.ITEM_CD_UPDATE,this,this.updateListInfo);var e=this.dataSource&&-1<this.dataSource.index?this.dataSource.index:1;this.tab.selectedIndex=e,this.list.renderHandler=p_g.create(this,this.updateItem,null,!1),this.list.selectHandler=Laya.Handler.create(this,this.onSelectItem,null,!1),this.checkLimitTimeItem(),this.updateListInfo()},d_u.open=function(e,p_l){void 0===e&&(e=-1),void 0===p_l&&(p_l=!1),BagModel.instance.reqItemSort(BagTypeDefine.BAG_TYPE_ITEM),UIM.open(d_u,["bag.atlas"],{index:e},p_l)},d_u.prototype.onTabSelect=function(e,p_l){if(-1!=e){switch(e){case 0:case 1:this.updateListInfo();break;case 2:case 3:b_p.broadcastNotOpen(),this.tab.selectedIndex=p_l||0}this.updateVisable()}},d_u.prototype.onRemove=function(){Wmq(this,Laya,LED,l_r)},d_u.prototype.updateListInfo=function(){if(2!==this.tab.selectedIndex){var e=ItemTypeDefine.ITEM,p_l=-1;1===this.tab.selectedIndex?e=ItemTypeDefine.EQUIPMENT:3===this.tab.selectedIndex&&(e=ItemTypeDefine.MATERIAL,p_l=ItemClassDefine.SUB_PET),this.list.selectedIndex=-1;var p_g=BagTypeDefine.BAG_TYPE_ITEM,b_s=BagModel.instance.getBagItemsByType(p_g,e,p_l);this.list.array=b_s,this.rp_consume.visible=0<BagModel.instance.getItemsByItemType(p_g,ItemTypeDefine.CONSUME).length,this.setBagCount()}},d_u.prototype.updateItem=function(e,p_l){if(e){e.itemBox.setItemData(e.dataSource,ItemBoxDefine.BAG_INFO,!0);var p_g=e.dataSource,b_s=Config.CItem(p_g.id);b_s&&b_s.mainclass===ItemTypeDefine.CONSUME?e.rp.visible=!0:e.rp.visible=!1}},d_u.close=function(e){void 0===e&&(e=!1),UIM.close(d_u,e)},d_u);function d_u(){var e=p_l.call(this)||this;return e._listHeight=0,e._time=3600,e.init(),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.BagPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.tips.itemUseTipUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){this._infoVos=ConsumableModel.instance.itemData,this.x=Stage.width-this.width-30+1e3,this.y=UIM.instance.getMainLetUI().getTaskBottonY()-this.height+1e3,this.updateData(this._infoVos[this._infoVos.length-1]);var e=Stage.width-this.width-30;Laya.Tween.to(this,{f_u:e,j_l:UIM.instance.getMainLetUI().getTaskBottonY()-this.height},100),this.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.ISSAMEITEM,this,this.updateSameData),LED.on(l_r.ITEM_USE_DEL,this,this.updateShow)},b_s.prototype.updateData=function(e){e&&e.name?this.itemBox&&(this.itemBox.isShowRightTick=this.itemBox.isShowTick=!1,this.itemBox.isShowName=this.itemBox.isShowNum=!0,this.itemBox.setItemData(e)):b_s.close()},b_s.prototype.clear=function(){Kbj(ConsumableModel,b_s)},b_s.prototype.updateShow=function(e){void 0===e&&(e=null);var p_l=this._infoVos.length;if(0<p_l)if(e){for(var p_g=p_l-1;0<=p_g;p_g--)this._infoVos[p_g].id==e&&this._infoVos.splice(p_g,1);0==(p_l=this._infoVos.length)?this.clear():this.updateData(this._infoVos[p_l-1])}else this.updateData(this._infoVos[p_l-1]);else this.clear()},b_s.prototype.getItemUseInfo=function(e){var p_l=e.list||[];for(var p_g in p_l){var b_s=p_l[p_g];if(b_s.itemId){Config.CItem(b_s.itemId);var d_u=UIM.instance.getMainUI(),b_e=new Laya.Point;b_e=this.itemBox.localToGlobal(b_e);var d_m=new Laya.Point;if(1==b_s.itemId)d_m=d_u.goldTxt.localToGlobal(d_m),r_n.instance.obtainAssetEffect(b_s.itemId,b_e,d_m);else if(2==b_s.itemId)d_m=d_u.copperTxt.localToGlobal(d_m),r_n.instance.obtainAssetEffect(b_s.itemId,b_e,d_m);else if(95==b_s.itemId){d_m=d_u.skillBtn.localToGlobal(d_m);var d_w=Config.item_coin[b_s.itemId].icon;r_n.instance.flyToBagEffect(d_w,b_e,d_m,null)}else d_m=UIM.instance.getMainUI().dongfuBtn.localToGlobal(d_m),d_w=Config.CItem(b_s.itemId).icon,r_n.instance.flyToBagEffect(d_w,b_e,d_m,null)}}},b_s.open=function(e,p_l,p_g){void 0===p_g&&(p_g=0),UIM.open(b_s,null,{info:e,num:p_l,targetId:p_g},!1,!1)},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"closeBtn":ConsumableModel.instance.clearInfo(),b_s.close();break;case"useBtn":this._infoVos=ConsumableModel.instance.itemData;var p_g=this._infoVos.pop();if(p_g){var d_u=Config.item_consumeable[p_g.id];d_u&&(b_s.ItemPos=this.itemBox.localToGlobal(new Laya.Point),1==d_u.subclass?p_k.instance.checkSystemOpen(FuncDefine.talisman)&&e.TalismanItemPanel.open(p_g):2==d_u.subclass?(e.TalismanItemUseSuccPanel.itemId=p_g.id,e.TalismanItemUseSuccPanel.count=p_g.amount,BagModel.instance.reqUseItem(p_g.uuid,p_g.amount)):4===d_u.subclass?e.AlienBeastItemPanel.open(p_g):5===d_u.subclass?(e.BeastItemUseSuccPanel.itemId=p_g.id,e.ItemConsumTipsPanel.open(p_g,-1)):"addTitle"==d_u.effects[0][0]&&TitleModel.instance.isTitleAct(d_u)||BagModel.instance.reqUseItem(p_g.uuid,p_g.amount,this._targetId)),this.updateShow()}}},b_s.prototype.onRemoved=function(){Yeo(this,Laya,LED,l_r)},b_s.prototype.updateSameData=function(e){if(this.parent){if(this._infoVos=ConsumableModel.instance.itemData,e)for(var p_l in this._infoVos)if(this._infoVos[p_l].uuid==e.uuid)return void this.updateData(this._infoVos[this._infoVos.length-1])}else b_s.open(e,e.amount)},b_s.close=function(){Cpu(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.mouseEnabled=!0,e.mouseThrough=!1,e}e.ConsumableTipsPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.tips.equipSwapTipUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){this._infoVos=EquipModel.instance.itemData,this.x=Stage.width-this.width-30+1e3,this.y=UIM.instance.getMainLetUI().getTaskBottonY()-this.height+1e3,this.updateData(this._infoVos[this._infoVos.length-1]);var e=Stage.width-this.width-30;Laya.Tween.to(this,{f_u:e,j_l:UIM.instance.getMainLetUI().getTaskBottonY()-this.height},100),this.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.EQUIPTTIPSINFO,this,this.updateSameData)},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":EquipModel.instance.clearInfo(),b_s.close();break;case"swapBtn":this._infoVos=EquipModel.instance.itemData;var p_l=this._infoVos.pop();p_l&&(EquipModel.instance.reqWearEquip(p_l.uuid),0<this._infoVos.length?this.updateData(this._infoVos[this._infoVos.length-1]):(EquipModel.instance.clearInfo(),b_s.close()))}},b_s.prototype.onRemoved=function(){Ixr(this,Laya,LED,l_r)},b_s.open=function(e,p_l,p_g){void 0===p_g&&(p_g=0),UIM.instance.getMainLetUI()&&UIM.open(b_s,null,{info:e,num:p_l,targetId:p_g},!1,!1)},b_s.prototype.updateSameData=function(e){if(this.parent){if(this._infoVos=EquipModel.instance.itemData,e)for(var p_l in this._infoVos)if(this._infoVos[p_l].id==e.id)return void this.updateData(this._infoVos[this._infoVos.length-1])}else b_s.open(e,e.amount)},b_s.prototype.updateData=function(e){if(e&&e.name){this.itemBox.isShowRightTick=this.itemBox.isShowTick=!1,this.itemBox.isShowName=this.itemBox.isShowNum=!0;var p_l=Config.CItem(e.id);this.lvTxt.text=p_l?"Lv."+p_l.level:"",this.itemBox.setItemData(e)}else b_s.close()},b_s.close=function(){Ymu(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.mouseEnabled=!0,e.mouseThrough=!1,e}e.EquipSwapTipPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.tips.equipTipUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Abg(this,Laya)},b_s.prototype.updateItem=function(e,p_l){if(e){var p_g=e.dataSource,b_s=e.getChildByName("valueTxt"),d_u=d_v.getPropertyType(p_g.propOrdinal);d_u.isPercent()?b_s.text=Utils.$("{1} +{2}%",d_u.desc,d_v.getValue(p_g.propOrdinal,p_g.value)):b_s.text=Utils.$("{1} +{2}",d_u.desc,p_g.value)}},b_s.prototype.onStageClick=function(e){var p_l=e.target;p_l&&this.contains(p_l)||this.closeSelf()},b_s.prototype.resite=function(){var e=this.legendBox.visible?this.legendBox.height:0;e+=this.strengthBox.visible?this.strengthBox.height:0,this.bgImg.height=this.baseTxt.y+this.baseTxt.height+25+e,this.tipTxt.y=this.bgImg.height,this.height=this.bgImg.height,this.y=Stage.height-this.height>>1,e=this.baseTxt.y+this.baseTxt.height+25,this.legendBox.visible&&(this.legendBox.y=e,e+=this.legendBox.height+5),this.strengthBox.visible&&(this.strengthBox.y=e)},b_s.prototype.onDelay=function(){Gpy(Laya,this)},b_s.open=function(e){for(var p_l=[],p_g=1;p_g<arguments.length;p_g++)p_l[p_g-1]=arguments[p_g];UIM.open(b_s,null,{itemVo:e},!1,!1,!0)},b_s.prototype.destroy=function(e){Cso(e,p_l,this)},b_s.prototype.onRemove=function(){Uyy(Laya,this)},b_s.prototype.closeSelf=function(){Csf(b_s)},b_s.prototype.setProp=function(e,p_l){var p_g,b_s="";for(var d_u in p_l){p_g=p_l[d_u];var b_e=d_v.getPropertyType(p_g.propOrdinal);b_e.isPercent()?b_s+=Utils.$("{1} +{2}%<br>",b_e.desc,d_v.getValue(p_g.propOrdinal,p_g.value)):b_s+=Utils.$("{1} +{2}<br>",b_e.desc,p_g.value)}e.innerHTML=b_s,e.height=e.contextHeight},b_s.prototype.updateData=function(){if(this._infoVo=this.dataSource.itemVo,this._infoVo){var e=Config.item_equipment[this._infoVo.id],p_l=LgcM.ins.heroVo,p_g=e.quality;this.realmTxt.color=e.stateLevel<=p_l.stateLv||!e.stateLevel?Utils.Color.WHITE:Utils.Color.RED,this.realmTxt.text=Config.state_state[e.stateLevel].desc;var b_s=Config.color[200+p_g].color;this.nameTxt.color=b_s,this.nameTxt.text=e.name,this._infoVo.fighting||this._infoVo.calcFight(),this.fightingTxt.text=this._infoVo.fighting.toString(),this.jobTxt.color=e.entryId!=p_l.entryId&&e.entryId?Utils.Color.RED:Utils.Color.WHITE,this.jobTxt.text=CharacterProperty.getJobName(e.entryId),this.lvTxt.color=e.level<=p_l.level||!e.level?Utils.Color.WHITE:Utils.Color.RED,this.lvTxt.text=e.level+(j_x(2342)),this._itemBox.setItemData(this._infoVo,ItemBoxDefine.BAG_INFO,!1),this.quiltyClip.index=p_g-1;var d_u=CharacterProperty.getPropertys(e.basePropFixed);if(this.setProp(this.baseTxt,d_u),BagModel.instance.getItemInfoByUuid(BagTypeDefine.BAG_TYPE_EQUIPMENT,this._infoVo.uuid)){var b_e=StrengthModel.instance.getProInfoByPartition(e.place);0<b_e.length?this.setProp(this.strengthTxt,b_e):this.strengthBox.visible=!1}else this.strengthBox.visible=!1;this.strengthLab.text=this._oldStrengthLab+("("+j_x("464_191")+"+")+StrengthModel.instance.getPartitionLv(e.place)+")"}else this.realmTxt.text="",this.nameTxt.text="",this.fightingTxt.text="",this.jobTxt.color="#fa3c3c",this.jobTxt.text="",this.strengthLab.text=this._oldStrengthLab,this.baseTxt.innerHTML="",this.baseTxt.height=this.baseTxt.contextHeight,this.strengthBox.visible=!1;this.legendBox.visible=!1,this.resite()},b_s.close=function(){Khj(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;p_g.changeBtn.visible=!1,p_g._itemBox||(p_g._itemBox=new e.ItemBox,p_g._itemBox.isShowName=p_g._itemBox.isShowNum=!1,p_g.itemIcon.parent.addChild(p_g._itemBox),p_g._itemBox.x=p_g.itemIcon.x,p_g._itemBox.y=p_g.itemIcon.y,p_g.itemIcon.visible=!1);var b_s=Config.color[202].color;return z_j.setHtml(p_g.strengthTxt,22,b_s,10,"left",b_p.config.font,!1),z_j.setHtml(p_g.baseTxt,22,b_s,10,"left",b_p.config.font,!1),z_j.setHtml(p_g.baseTxt,22,b_s,10,"left",b_p.config.font,!1),p_g._oldStrengthLab=p_g.strengthLab.text,p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g}e.EquipTipsPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.godEquip.composeUI,__extends(b_s,p_l),b_s.prototype.init=function(){Qwe(this,Laya,z_j)},b_s.prototype.updateView=function(){this.updateCombineView();var e=ItemComposeModel.instance.getTreeData(this.getGodTypeByIndex(3),this.dataSource.itemId),p_l=e.xml,p_g=e.num,b_s=e.openName;this.godTypeTree.xml=p_l,""==b_s&&this.godTypeTree.setItemState(0,!0),this.godTypeTree.selectedIndex=p_g||1,this.godTypeTree.spaceLeft=0},b_s.prototype.stopPlayClip1Ani=function(e,p_l){Yqh(e,p_l,ItemComposeModel)},b_s.prototype.onPlayClipAni=function(e,p_l){},b_s.prototype.updateCombineView=function(e,p_l){var p_g;void 0===e&&(e=-1),void 0===p_l&&(p_l=-1),-1!=e&&-1!=p_l||(e=(p_g=ItemComposeModel.instance.getComposeTypeById(this.dataSource.itemId))[0],p_l=p_g[1]),this.godPart.array=ItemComposeModel.instance.getComposeGodBy2Type(e,p_l)},b_s.prototype.renderTreeItem=function(e,p_l){var p_g=e.getChildByName("label");p_g.text=e.dataSource.label;var b_s=e.getChildByName("redpoint"),d_u="#42435a",b_e=e.dataSource.itemId;if(b_e){var d_m=Config.item_composeType2[b_e].type;b_s.visible=ItemComposeModel.instance.can3LayerComposeByType(d_m,e.dataSource.itemId,1),d_u="#d8dcec"}else b_s.visible=ItemComposeModel.instance.can2LayerComposeByType(e.dataSource.type,1);p_g.color=d_u},b_s.prototype.onUpdateView=function(e){if(void 0===e&&(e=!0),e){for(var p_l=b_p.getRewardDatas(Config.item_compose[this.godPart.selectedItem].needItem),p_g=p_l.length;p_g<3;p_g++)p_l.push(null);this.cosumeList.array=p_l,z_j.centerList(this.cosumeList,p_l,this._showNum,this.rightBox.width,this._listX)}this.godTypeTree.fresh()},b_s.prototype.udpateConsumableItem=function(e,p_l){if(-1!=p_l){var p_g=this.godPart.selectedItem;if(e.itemBox.isShowName=!1,e&&p_g)if(null==e.dataSource)e.numlabel.visible=!1,e.icon.visible=!0,e.itemBox.isShowNum=!1,e.itemBox.setItemData(null);else if(e.icon.visible=!1,e.itemBox.setItemData(e.dataSource,ItemBoxDefine.BAG_INFO,!0),e.numlabel.visible=!0,Config.item_compose[p_g]){var b_s=Config.item_compose[p_g].needItem;null==ItemComposeModel.instance.getItemByid(b_s[p_l][0])&&(e.numlabel.text="0/1");var d_u=ItemComposeModel.instance.getItemNumber(b_s[p_l][0]);e.numlabel.text=d_u+"/"+b_s[p_l][1],e.numlabel.bold=!0,e.numlabel.stroke=2,d_u>=b_s[p_l][1]?e.numlabel.color="#71de66":e.numlabel.color="#b92929";var b_e=new ModuleItemVO,d_m=this.item;b_e.id=Config.item_compose[p_g].id,b_e.amount=1,d_m.visible=!0,d_m.isShowName=!1,Config.CItem(p_g),d_m.setItemData(b_e,ItemBoxDefine.BAG_INFO,!0)}}},b_s.prototype.renderPartList=function(e,p_l){var p_g=e.getChildByName("partBtn");p_g.label=CharacterProperty.getPlaceName(Config.CItem(e.dataSource).place);var b_s=e.getChildByName("redpoint"),d_u=e.dataSource;d_u&&(b_s.visible=ItemComposeModel.instance.canCompose(d_u,1,!0)),p_l==this._index?p_g.selected=!0:p_g.selected=!1},b_s.prototype.onClick=function(e){switch(e.target.name){case"composeBtn":var p_l=null!=this.godPart.selectedItem?this.godPart.selectedItem:-1;if(!Config.item_compose[p_l])return;ItemComposeModel.instance.canCompose(p_l,1,!0,!0)&&this.stopPlayClip1Ani(p_l,1)}},b_s.prototype.slectePartItem=function(e){-1!=e&&this.godPart.getItem(e)&&(this._index=e,this.onUpdateView(!0))},b_s.prototype.onRemoved=function(){Wcb(this,Laya,LED,l_r)},b_s.prototype.onAdded=function(){Keh(this,Laya,LED,l_r,ItemComposeModel)},b_s.prototype.onChange=function(){var e=this.godTypeTree.selectedItem;if(e&&e.itemId){var p_l=parseInt(e.itemId);this._type=Config.item_composeType2[p_l].type,this.updateCombineView(this._type,p_l),(this.dataSource.part||0)==this.godPart.selectedIndex?this.onUpdateView(!0):this.godPart.selectedIndex=this.dataSource.part||0}else e&&e.type&&(this._type=e.type)},b_s.prototype.getGodTypeByIndex=function(e){switch(e){case 1:return GameDefine.comp_hecheng;case 2:return GameDefine.comp_furnace;case 3:return GameDefine.comp_God}},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.GodComposePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.bag.hechengUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Wjf(this,Laya,LED,l_r,ItemComposeModel)},b_s.prototype.ontreerender=function(e,p_l){e.getChildByName("label").text=e.dataSource.label;var p_g=e.getChildByName("redpoint");e.dataSource.itemId?p_g.visible=ItemComposeModel.instance.canCompose(e.dataSource.itemId,this.composeNum):p_g.visible=ItemComposeModel.instance.canComposeByType(e.dataSource.type,this.composeNum)},b_s.prototype.onChange=function(){this.combineTree.selectedItem.itemId&&(this.consumablelist.array=b_p.getRewardDatas(Config.item_compose[this.combineTree.selectedItem.itemId].needItem),this.onRefresh(!1))},b_s.prototype.stopPlayClip2Ani=function(){this.clip3&&(this.clip2.visible=!1,this.clip2.stop(),this.clip2.off(Laya.Event.COMPLETE,this,this.stopPlayClip2Ani),this.clip3.visible=!0,this.clip3.play(!1),this.clip3.on(Laya.Event.COMPLETE,this,this.stopPlayClipAni3))},b_s.prototype.onClick=function(e){var p_l=e.target;this.combinebtn.disabled=!1;var p_g=this.changenumbox.getChildByName("useNumTxt");switch(this.composeNum=parseInt(p_g.text),p_l.name){case"combinebtn":if(this.combineTree.selectedItem.itemId){for(var b_s=Config.item_compose[this.combineTree.selectedItem.itemId].needItem,d_u=0;d_u<this.consumablelist.length;d_u++)if(ItemComposeModel.instance.getItemNumber(b_s[d_u][0])<b_s[d_u][1])return void r_f.instance.isWindow(b_s[d_u][0]);var b_e=ItemComposeModel.instance.returnComposeInfo();for(var d_u in b_e)if(Number(this.combineTree.selectedItem.itemId)==b_e[d_u].composeItem){if(Config.item_compose[this.combineTree.selectedItem.itemId].dayLimit){if(b_e[d_u].dayCurCount>=Config.item_compose[this.combineTree.selectedItem.itemId].dayLimit){b_p.broadcastNotice((j_x("1300_1117_1012")+j_x("2339_1254_481")+j_x("402_235_2348")));break}this.onPlayClipAni(this.combineTree.selectedItem.itemId,this.composeNum);break}this.onPlayClipAni(this.combineTree.selectedItem.itemId,this.composeNum);break}this.composeNum=1}break;case"addBtn":this.composeNum+=1;break;case"cutBtn":this.composeNum-=1;break;case"cutTenBtn":this.composeNum-=10;break;case"addTenBtn":this.composeNum+=10;break;case"closebtn":case"backbtn":this.close()}this.onAddCount()},b_s.prototype.onList=function(e,p_l){if(e&&(e.itemBox.setItemData(e.dataSource,ItemBoxDefine.MODULE_ITEM,!0),e.itemBox.isShowName=!0,e.itemBox.isShowNum=!1,Config.item_compose[this.combineTree.selectedItem.itemId])){var p_g=Config.item_compose[this.combineTree.selectedItem.itemId].needItem;null==ItemComposeModel.instance.getItemByid(p_g[p_l][0])&&(e.numlabel.text="0/1"),e.numlabel.text=ItemComposeModel.instance.getItemNumber(p_g[p_l][0])+"/"+p_g[p_l][1],e.numlabel.bold=!0,e.numlabel.stroke=2,ItemComposeModel.instance.getItemNumber(p_g[p_l][0])>=p_g[p_l][1]?e.numlabel.color="#71de66":e.numlabel.color="#b92929";var b_s=new ModuleItemVO,d_u=this.compounditembg.getChildByName("item"),b_e=this.compounditembg.getChildByName("composeItemName");b_s.id=Config.item_compose[this.combineTree.selectedItem.itemId].id,b_s.amount=1,d_u.visible=!0,d_u.isShowName=!1;var d_m=Config.CItem(this.combineTree.selectedItem.itemId);b_e.visible=!0,b_e.text=d_m.name,d_u.setItemData(b_s)}},b_s.prototype.stopPlayClipAni3=function(){Qrr(this,Laya)},b_s.prototype.onPlayClipAni=function(e,p_l){this.clip1&&(this.clip1.visible=!0,this.clip1.play(!1),this.clip1.on(Laya.Event.COMPLETE,this,this.stopPlayClip1Ani,[e,p_l]))},b_s.prototype.onAddCount=function(){var e=this.changenumbox.getChildByName("useNumTxt");if(this.combineTree.selectedItem&&null!=this.combineTree.selectedItem.itemId){var p_l=Config.item_compose[this.combineTree.selectedItem.itemId].dayLimit,p_g=Config.item_compose[this.combineTree.selectedItem.itemId].needItem,b_s=[];if(0!=p_l)if(p_l>this.composeNum){for(var d_u in p_g){var b_e=BagModel.instance.getItemCountByItemID(p_g[d_u][0])/p_g[d_u][1];Math.floor(b_e),b_s.push(b_e)}var d_m=b_s.sort(),d_w=this.composeNum>p_l?p_l:this.composeNum;this.composeNum=d_m[0]>d_w?d_w:d_m[0]}else this.composeNum=p_l;else{for(var d_u in p_g)b_e=BagModel.instance.getItemCountByItemID(p_g[d_u][0])/p_g[d_u][1],Math.floor(b_e),b_s.push(b_e);d_m=b_s.sort(),d_w=this.composeNum>p_l?this.composeNum:p_l,this.composeNum=d_m[0]>d_w?d_w:d_m[0]}}this.composeNum<=0&&(this.composeNum=1),this.composeNum=Math.floor(this.composeNum),e.text=this.composeNum.toString()},b_s.prototype.onRemoved=function(){Acj(this,Laya,LED,l_r)},b_s.prototype.stopPlayClip1Ani=function(e,p_l){this.clip2&&(this.clip1.visible=!1,this.clip1.off(Laya.Event.COMPLETE,this,this.stopPlayClip1Ani),this.clip1.stop(),ItemComposeModel.instance.reqCompose(Number(e),p_l),this.clip2.visible=!0,this.clip2.play(!1),this.clip2.on(Laya.Event.COMPLETE,this,this.stopPlayClip2Ani))},b_s.open=function(){Uoa(UIM,b_s)},b_s.prototype.updateCombineView=function(){var e=ItemComposeModel.instance.getTreeData(),p_l=e.xml;e.num,this.combineTree.spaceLeft=0,this.combineTree.xml=p_l},b_s.prototype.onRefresh=function(e){if(void 0===e&&(e=!0),e&&this.consumablelist.refresh(),this.combineTree.fresh(),this.combineTree.selectedItem&&this.combineTree.selectedItem.itemId)if(Config.item_compose[this.combineTree.selectedItem.itemId].dayLimit){var p_l=ItemComposeModel.instance.returnComposeInfo();for(var p_g in p_l)Number(this.combineTree.selectedItem.itemId)==p_l[p_g].composeItem&&(p_l[p_g].dayCurCount>=Config.item_compose[this.combineTree.selectedItem.itemId].dayLimit&&(p_l[p_g].dayCurCount=Config.item_compose[this.combineTree.selectedItem.itemId].dayLimit),this.everydaymaxnum.text=(j_x("1644_1254_481")+j_x("402_1067_2128")+"")+p_l[p_g].dayCurCount+"/"+Config.item_compose[this.combineTree.selectedItem.itemId].dayLimit.toString())}else this.everydaymaxnum.text=""},b_s.prototype.close=function(){Oow(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.composeNum=1,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.consumablelist.renderHandler=Laya.Handler.create(e,e.onList,null,!1),e.combineTree.renderHandler=Laya.Handler.create(e,e.ontreerender,null,!1),e.combineTree.scrollBarSkin="",e}e.ItemComposePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.tips.itemTipUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Ikk(this,Laya)},b_s.prototype.onClick=function(p_l){var p_g=p_l.target,d_u=parseInt(this.useNumTxt.text);switch(p_g.name){case"cutBtn":if(!this._isBatch)return void e.WarnPanel.open((j_x("389_2217_1841")+j_x("2462_1919_1910")+j_x("716_1365_1876")));d_u=--d_u<1?1:d_u,this.setUseNumTxt(d_u);break;case"cutTenBtn":if(!this._isBatch)return void e.WarnPanel.open((j_x("389_2217_1841")+j_x("2462_1919_1910")+j_x("716_1365_1876")));d_u=(d_u-=10)<1?1:d_u,this.setUseNumTxt(d_u);break;case"addBtn":if(!this._isBatch)return void e.WarnPanel.open((j_x("389_2217_1841")+j_x("2462_1919_1910")+j_x("716_1365_1876")));if(0<this.dataSource.useMax&&d_u>this.dataSource.useMax)return void b_p.broadcastNotice((j_x("2217_1841_1365")+j_x("1876_1300_1117")+j_x("1081_1375")));d_u++,0<this.dataSource.useMax&&(d_u=Math.min(d_u,this.dataSource.useMax)),d_u=d_u>this._infoVo.amount?this._infoVo.amount:d_u,this.setUseNumTxt(d_u);break;case"addTenBtn":if(!this._isBatch)return void e.WarnPanel.open((j_x("389_2217_1841")+j_x("2462_1919_1910")+j_x("716_1365_1876")));if(0<this.dataSource.useMax&&d_u>this.dataSource.useMax)return void b_p.broadcastNotice((j_x("2217_1841_1365")+j_x("1876_1300_1117")+j_x("1081_1375")));d_u=(d_u+=10)>this._infoVo.amount?this._infoVo.amount:d_u,0<this.dataSource.useMax&&(d_u=Math.min(d_u,this.dataSource.useMax)),this.setUseNumTxt(d_u);break;case"useBtn":if(this._targetId&&Config.talisman_talisman[this._targetId]&&(e.TalismanItemUseSuccPanel.count=d_u),this._targetId&&Config.beast_beast[this._targetId]&&(e.BeastItemUseSuccPanel.count=d_u),this._useFun)this.dataSource.paraArr.unshift(d_u),this._useFun.call(null,this.dataSource.paraArr);else{var b_e=this.dataSource.info,d_m=Config.item_consumeable[b_e.id];"addTitle"==d_m.effects[0][0]&&TitleModel.instance.isTitleAct(d_m)||BagModel.instance.reqUseItem(this._infoVo.uuid,d_u,this._targetId)}b_s.close();break;case"closeBtn":b_s.close()}},b_s.prototype.onTimer=function(){var e=Math.floor(SyncTime.serverTime/1e3);this._infoVo&&0<this._infoVo.expireTime?(this._infoVo.expireTime-e<0&&(this.countDowntxt.text=""),this.countDowntxt.text=(j_x("810_867_1702")+"")+Utils.formatTimeStr(this._infoVo.expireTime-e)):(this.countDowntxt.text="",Laya.timer.clear(this,this.onTimer))},b_s.prototype.onDelay=function(){Qfk(Laya,this)},b_s.prototype.onStageClick=function(e){var p_l=e.target;p_l&&this.contains(p_l)||b_s.close()},b_s.prototype.updateData=function(){if(this._infoVo=this.dataSource.info,this._targetId=this.dataSource.targetId,this._useFun=this.dataSource.useFun,this._infoVo){var e=null;if(this._useFun?(e=Config.CItem(this._infoVo.id),this._isBatch=!0):(e=Config.item_consumeable[this._infoVo.id],this._isBatch=1==e.batch),this._isBatch&&-1!=this._targetId){var p_l=this._infoVo.amount;0<this.dataSource.useMax&&(p_l=Math.min(this._infoVo.amount,this.dataSource.useMax)),this.setUseNumTxt(p_l)}else this.setUseNumTxt(1);this.descTxt.text=e.desc,this.lvTxt.text=Utils.$(("{1}"+j_x(2342)),e.level),this.numTxt.text=b_p.calsulate(this._infoVo.amount),this.nameTxt.text=e.name,this.qualityTxt.color=Utils.ItemUtils.getQualityColor(e.quality),this.qualityTxt.text=Utils.$((j_x("415_2342")+":{1}"),Config.color[1e3+e.quality].name2),this._itemBox.setItemData(this._infoVo,ItemBoxDefine.BAG_INFO),this.onTimer(),Laya.timer.loop(1e3,this,this.onTimer)}},b_s.prototype.destroy=function(e){Uzr(e,p_l,this)},b_s.prototype.setUseNumTxt=function(e){Qkk(e,this)},b_s.prototype.onRemove=function(){Gsy(this,Laya)},b_s.open=function(e,p_l,p_g,d_u,b_e){void 0===p_l&&(p_l=0),void 0===p_g&&(p_g=null),void 0===d_u&&(d_u=[]),void 0===b_e&&(b_e=-1),UIM.open(b_s,null,{info:e,targetId:p_l,useFun:p_g,paraArr:d_u,useMax:b_e},!1,!1,!0)},b_s.close=function(){Kll(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g._itemBox||(p_g._itemBox=new e.ItemBox,p_g._itemBox.isShowName=p_g._itemBox.isShowNum=!1,p_g.itemIcon.parent.addChild(p_g._itemBox),p_g._itemBox.x=p_g.itemIcon.x,p_g._itemBox.y=p_g.itemIcon.y,p_g.itemIcon.visible=!1),p_g.countDowntxt.text="",p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g}e.ItemConsumTipsPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.bag.ItemFurnacePanelUI,__extends(b_s,p_l),b_s.prototype.init=function(){Swk(this,Laya,z_j)},b_s.open=function(e){void 0===e&&(e=0),UIM.open(b_s,["officeStove.atlas"],{itemId:e})},b_s.prototype.changTab=function(p_l){if(void 0===p_l&&(p_l=0),-1!=p_l){this._lastMenu&&(this._lastMenu.index=0),this._lastBtn&&(this._lastBtn.selected=!1);var p_g=this.menuList.getCell(p_l),b_s=p_g.getChildByName("btn");b_s.selected=!0,this._lastBtn=b_s;var d_u=p_g.getChildByName("imgWord");d_u.index=1,this._lastMenu=d_u;var b_e=this._godComposePanel;b_e&&(b_e.visible=!1),2==(this._curtype=p_l)?((b_e=b_e||(this._godComposePanel=new e.GodComposePanel)).dataSource=this.dataSource,this.rightBox.visible=!1,b_e.parent||(this.addChild(b_e),this.addChildAt(b_e,2)),b_e.visible=!0):(this.rightBox.visible=!0,this.updateCombineView(),this.onChange())}},b_s.prototype.updateMenuItem=function(e,p_l){var p_g=e.dataSource;if(p_g){var b_s=e.getChildByName("imgWord"),d_u=e.getChildByName("imgRp"),b_e=e.getChildByName("imgLock"),d_m=p_g.type==GameDefine.comp_furnace?1:2;b_s.skin=2==p_l?"res/ui/officeStove/Clip_officeStove_03.png":"res/ui/officeStove/Clip_officeStove_0"+d_m+".png",d_u.visible=p_g.isRp,b_e.visible=p_g.isLock}},b_s.prototype.getGodTypeByIndex=function(e){switch(e){case 1:return GameDefine.comp_hecheng;case 2:return GameDefine.comp_furnace;case 3:return GameDefine.comp_God}},b_s.prototype.onClick=function(e){var p_l=e.target;this.combinebtn.disabled=!1,this.composeNum=parseInt(this.useNumTxt.text);var p_g=!1;switch(p_l.name){case"combinebtn":var b_s=this.combineTree.selectedItem?this.combineTree.selectedItem.itemId:-1,d_u=Config.item_compose[b_s];if(!d_u)return;for(var b_e=d_u.needItem,d_m=0;d_m<this.consumablelist.length;d_m++)if(ItemComposeModel.instance.getItemNumber(b_e[d_m][0])<b_e[d_m][1])return void r_f.instance.isWindow(b_e[d_m][0]);var d_w=this.getCurNum(b_s),f_t=d_w[0];d_w[1]<=f_t?this.maxTip():this.onPlayClipAni(b_s,this.composeNum),this.composeNum=1;break;case"addBtn":this.composeNum+=1,p_g=!0;break;case"cutBtn":this.composeNum-=1,p_g=!0;break;case"cutTenBtn":this.composeNum-=10,p_g=!0;break;case"addTenBtn":this.composeNum+=10,p_g=!0;break;case"closebtn":case"backbtn":this.close()}p_g&&this.updateCount(!0)},b_s.prototype.onPlayClipAni=function(e,p_l){this.clip1&&(this.clip1.visible=!0,this.clip1.play(!1),this.clip1.on(Laya.Event.COMPLETE,this,this.stopPlayClip1Ani,[e,p_l]))},b_s.prototype.updateTreeItem=function(e,p_l){var p_g=e.getChildByName("label");p_g.text=e.dataSource.label;var b_s=e.getChildByName("redpoint"),d_u="#42435a";2!=this._curtype&&(e.dataSource.itemId?(b_s.visible=ItemComposeModel.instance.canCompose(e.dataSource.itemId,this.composeNum),d_u="#d8dcec"):b_s.visible=ItemComposeModel.instance.canComposeByType(e.dataSource.type,this.composeNum)),p_g.color=d_u},b_s.prototype.stopPlayClip1Ani=function(e,p_l){Kmb(e,p_l,this,Laya,ItemComposeModel)},b_s.prototype.updateMenu=function(e){void 0===e&&(e=!0);for(var p_l,p_g=[],b_s=1;b_s<4;b_s++)p_l=BagModel.instance.checkComposeRedPoint(b_s),p_g.push(z_j.createShowVo(b_s,!1,p_l));this.menuList.array=p_g},b_s.prototype.onAdded=function(){this.on(Laya.Event.CLICK,this,this.onClick),this.combineTree.on(Laya.Event.CHANGE,this,this.onChange),LED.on(l_r.CHECK_BAG_IS_UPDATE,this,this.onRefresh),LED.on(l_r.SUCCEECOMPOSE,this,this.onRefresh);var e=this.dataSource.itemId,p_l=0;if(0==e){var p_g=Config.item_compose[e];p_g&&(p_l=Config.item_composeType[p_g.type].type==GameDefine.comp_hecheng?1:0)}else p_l=e;this.menuList.selectedIndex=p_l,this.clip1.visible=!1,this.combinebtn.disabled=!1,ItemComposeModel.instance.reqComposeViewInfo()},b_s.prototype.updateCount=function(e){var p_l;if(void 0===e&&(e=!1),this.combineTree.selectedItem&&null!=(p_l=this.combineTree.selectedItem.itemId)){var p_g=Config.item_compose[p_l],b_s=p_g.dayLimit,d_u=p_g.needItem,b_e=[];if(0!=b_s)if(b_s>this.composeNum){for(var d_m in d_u){var d_w=BagModel.instance.getItemCountByItemID(d_u[d_m][0])/d_u[d_m][1];Math.floor(d_w),b_e.push(d_w)}var f_t=b_e.sort(),v_z=this.composeNum>b_s?b_s:this.composeNum;this.composeNum=f_t[0]>v_z?v_z:f_t[0]}else this.composeNum=b_s;else{for(var d_m in d_u)d_w=BagModel.instance.getItemCountByItemID(d_u[d_m][0])/d_u[d_m][1],Math.floor(d_w),b_e.push(d_w);f_t=b_e.sort(),v_z=this.composeNum>b_s?this.composeNum:b_s,this.composeNum=f_t[0]>v_z?v_z:f_t[0]}}this.composeNum=Math.floor(this.composeNum);var d_h=this.getCurNum(p_l),r_t=d_h[0],t_n=d_h[1]-r_t,f_y=!1;0<t_n?this.composeNum<=0?this.composeNum=1:this.composeNum>t_n&&(this.composeNum=t_n,f_y=!0):t_n<=0&&(this.composeNum=t_n,f_y=!0),f_y&&e&&this.maxTip(),this.useNumTxt.text=this.composeNum.toString()},b_s.prototype.maxTip=function(){Kdn(b_p,j_x)},b_s.prototype.onRemoved=function(){this.off(Laya.Event.CLICK,this,this.onClick),LED.off(l_r.CHECK_BAG_IS_UPDATE,this,this.onRefresh),LED.off(l_r.SUCCEECOMPOSE,this,this.onRefresh),this.combineTree.xml=null,this.menuList.selectedIndex=-1;var e=this._godComposePanel;e&&e.parent&&e.removeSelf()},b_s.prototype.onChange=function(){var e=this.combineTree.selectedItem;if(e&&e.itemId){var p_l=b_p.getRewardDatas(Config.item_compose[this.combineTree.selectedItem.itemId].needItem);this.consumablelist.array=p_l,z_j.centerList(this.consumablelist,p_l,this._showNum,this.rightBox.width,this._listX),this.onRefresh(!1)}},b_s.prototype.updateCombineView=function(){var e=ItemComposeModel.instance.getTreeData(this.getGodTypeByIndex(this._curtype+1),this.dataSource.itemId),p_l=e.xml,p_g=e.num,b_s=e.openName;this.combineTree.xml=p_l,""==b_s&&this.combineTree.setItemState(0,!0),this.combineTree.selectedIndex=p_g||1,this.combineTree.spaceLeft=0},b_s.prototype.udpateConsumableItem=function(e,p_l){if(-1!=p_l&&e&&this.combineTree.selectedItem){e.itemBox.setItemData(e.dataSource,ItemBoxDefine.MODULE_ITEM,!0),e.itemBox.isShowName=!1,e.itemBox.isShowNum=!1;var p_g=Config.item_compose[this.combineTree.selectedItem.itemId];if(p_g){var b_s=p_g.needItem;null==ItemComposeModel.instance.getItemByid(b_s[p_l][0])&&(e.numlabel.text="0/1"),e.numlabel.text=ItemComposeModel.instance.getItemNumber(b_s[p_l][0])+"/"+b_s[p_l][1],e.numlabel.bold=!0,e.numlabel.stroke=2,ItemComposeModel.instance.getItemNumber(b_s[p_l][0])>=b_s[p_l][1]?e.numlabel.color="#71de66":e.numlabel.color="#b92929";var d_u=new ModuleItemVO,b_e=this.item;d_u.id=p_g.id,d_u.amount=1,b_e.visible=!0,b_e.isShowName=!1,b_e.isShowQuaEft=!1,b_e.setBgAlpha(),Config.CItem(this.combineTree.selectedItem.itemId),b_e.setItemData(d_u)}}},b_s.prototype.getCurNum=function(e){var p_l,p_g=ItemComposeModel.instance.returnComposeInfo(),b_s=0,d_u=Config.item_compose[e],b_e=d_u?d_u.dayLimit:99;for(var d_m in p_g)e==(p_l=p_g[d_m]).composeItem&&(b_s=p_l.dayCurCount);return[b_s,b_e]},b_s.prototype.onRefresh=function(e){if(void 0===e&&(e=!0),e&&(this.consumablelist.refresh(),this.updateMenu()),this.combineTree.fresh(),this.combineTree.selectedItem){var p_l=this.combineTree.selectedItem.itemId,p_g=Config.item_compose[p_l];if(p_g){var b_s=ItemComposeModel.instance.returnComposeInfo(),d_u=void 0;for(var b_e in b_s)d_u=b_s[b_e],p_l==b_s[b_e].composeItem&&(d_u.dayCurCount>=p_g.dayLimit&&(d_u.dayCurCount=p_g.dayLimit),this.everydaymaxnum.text=(j_x("1644_1254_481")+j_x("402_1067_2128")+"")+d_u.dayCurCount+"/"+p_g.dayLimit.toString())}else this.everydaymaxnum.text=""}this.updateCount()},b_s.prototype.close=function(){Yse(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.composeNum=1,e.init(),e}e.ItemFurnacePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.tips.itemTip2UI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Ipf(this,Laya)},b_s.prototype.onRemove=function(){Qgv(Laya,this)},b_s.prototype.onDelay=function(){Odo(Laya,this)},b_s.prototype.destroy=function(e){Kns(e,p_l,this)},b_s.prototype.onStageClick=function(e){var p_l=e.target;p_l&&this.contains(p_l)||b_s.close()},b_s.prototype.updateData=function(){if(this._infoVo=this.dataSource,this._infoVo){var e=Config.CItem(this._infoVo.id);this.descTxt.text=e.desc,this.lvTxt.text=Utils.$(("{1}"+j_x(2342)),0<e.level?e.level:1),this._infoVo.amount<=0?(this.numTxt.visible=!1,this.numLab.visible=!1):(this.numTxt.text=b_p.calsulate(this._infoVo.amount),this.numTxt.visible=!0,this.numLab.visible=!0),this.nameTxt.text=e.name,this._itemBox.setItemData(this._infoVo,ItemBoxDefine.BAG_INFO,!1);var p_l=this.descTxt.text.split("\n");p_l&&2<p_l.length?this.bg.height=this._oriHeight+34*(p_l.length-2):this.bg.height=this._oriHeight}},b_s.open=function(e){Eab(e,UIM,b_s)},b_s.close=function(){Owu(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g._itemBox||(p_g._itemBox=new e.ItemBox,p_g._itemBox.isShowName=p_g._itemBox.isShowNum=!1,p_g.itemIcon.parent.addChild(p_g._itemBox),p_g._itemBox.x=p_g.itemIcon.x,p_g._itemBox.y=p_g.itemIcon.y,p_g.itemIcon.visible=!1),p_g._oriHeight=p_g.bg.height,p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g}e.ItemTipsPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.bag.limitTimeItemTipUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){var e=this.dataSource;e&&0<e.length&&(this.list.array=e),this.sureBtn.on(Laya.Event.CLICK,this,this.onClickClose),this.closeBtn.on(Laya.Event.CLICK,this,this.onClickClose)},b_s.prototype.onUpdateItemInfo=function(e,p_l){e&&(e.isShowName=e.isShowNum=!1,e.setItemData(e.dataSource))},b_s.prototype.onRemoved=function(){},b_s.open=function(e){Gza(e,UIM,b_s)},b_s.prototype.onClickClose=function(){Wwk(this)},b_s.prototype.close=function(){Imz(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.list.hScrollBarSkin="",p_g.list.itemRender=e.ItemBox,p_g.list.renderHandler=Laya.Handler.create(p_g,p_g.onUpdateItemInfo,null,!1),p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemoved),p_g}e.LimitTimeTipsView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.tips.skillTipUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Spv(this,Laya)},b_s.prototype.onStageClick=function(e){var p_l=e.target;p_l&&this.contains(p_l)||b_s.close()},b_s.prototype.updateData=function(){if(this._cData=this.dataSource,this._cData){var e=this._cData,p_l=0<e.level?e.level:1;this.lvTxt.text=Utils.$(("{1}"+j_x(2342)),p_l),this.nameTxt.text=e.name;var p_g=!1,b_s=Config.skill_skill[e.id],d_u="";if(b_s)d_u=b_s.conditionDec;else{var b_e=SkillModel.instance.getActPassSkillCond(e.id);0!==b_e[0]&&(d_u+=Utils.$((j_x("15_2342_1012")+j_x(1117)+"{1}"+j_x(2342)+"   "),Math.abs(b_e[0]))),0!==b_e[1]&&(d_u+=Utils.$((j_x("1863_360_413")+j_x("764_1012_1117")+"{1}"+j_x(413)+"   "),Math.abs(b_e[1]))),p_g=!0}this.condTxt.text=d_u,this.typeTxt.text=p_g?(j_x("1629_1878_2243")+j_x(1919)):(j_x("1863_1878_2243")+j_x(1919)),this.descTxt.innerHTML=SkillModel.instance.getSkillDesc(e.id,p_l),this._itemBox.isShowName=!1,this._itemBox.setItemData(this._cData,ItemBoxDefine.SKILL_CONFIG)}},b_s.prototype.onRemove=function(){Wro(Laya,this)},b_s.prototype.destroy=function(e){Gjl(e,p_l,this)},b_s.open=function(e){Gfl(e,UIM,b_s)},b_s.prototype.onDelay=function(){Qbi(Laya,this)},b_s.close=function(){Acz(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g._itemBox||(p_g._itemBox=new e.ItemBox,p_g._itemBox.isShowName=p_g._itemBox.isShowNum=!1,p_g.itemIcon.parent.addChild(p_g._itemBox),p_g._itemBox.x=p_g.itemIcon.x,p_g._itemBox.y=p_g.itemIcon.y,p_g.itemIcon.visible=!1),z_j.setHtml(p_g.descTxt,22,"#f4e6ba",10,"left"),p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g}e.SkillTipsPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.bag.TalismanItemTipPanelUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){var e=this.info;if(e&&e.id){var p_l=Config.item_consumeable[e.id].effects;this._type="randAddDeployExp"===p_l[0][0]?0:1;var p_g=TalismanModel.instance.getTalismanSealArr(!1);p_g&&1<p_g.length&&(p_g=p_g.sort(this.compareFun)),this.list_select.array=p_g,this.updateCount(),this._name=Config.CItem(e.id).name,this.txt_name.text=this._name,this.txt_desc.text=Config.CItem(e.id).desc}this.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.TALISMAN_ATTR_UPDATE,this,this.updateAttr)},b_s.prototype.onRemove=function(){Qxd(this,Laya,LED,l_r)},b_s.prototype.updateAttr=function(){Sei(this)},b_s.prototype.updateCount=function(e){void 0===e&&(e=!1),this.info&&(this._count=BagModel.instance.getItemCountByItemID(this.info.id,BagTypeDefine.BAG_TYPE_ITEM),this.txt_count.text="x"+this._count,this.txt_count.color=this._count<=0?"#ff0000":"#00802e",0==this._count&&e&&LED.event(l_r.ITEM_USE_DEL,this.info.id))},Object.defineProperty(b_s.prototype,"info",{get:function(){return this.dataSource},enumerable:!0,configurable:!0}),b_s.prototype.compareFun=function(e,p_l){var p_g=Config.talisman_talisman[e.id],b_s=Config.talisman_talisman[p_l.id];return TalismanModel.instance.sortType,b_s.quality===p_g.quality?e.level===p_l.level?p_g.id-b_s.id:p_l.level-e.level:b_s.quality-p_g.quality},b_s.prototype.onClick=function(e){var p_l=e.target;switch(p_l.name){case"closeBtn":case"backBtn":b_s.close();break;case"btn_use":this.onUseBtnClick(p_l)}},b_s.open=function(e){Spq(e,UIM,b_s)},b_s.prototype.onUseBtnClick=function(e){if(0==this._count)return b_p.broadcastNotice(this._name+(j_x("2462_1779"))),void LongPushUtil.inst.clearLoopPush();var p_l=e.dataSource.id,p_g=BagModel.instance.getItemInfoByUuid(BagTypeDefine.BAG_TYPE_ITEM,this.info.uuid);(p_g=p_g||BagModel.instance.getItemById(BagTypeDefine.BAG_TYPE_ITEM,this.info.id))&&BagModel.instance.reqUseItem(p_g.uuid,1,p_l)},b_s.prototype.updateItem=function(e,p_l){if(e){var p_g=e.dataSource,b_s=Config.talisman_talisman[p_g.id],d_u=e.getChildByName("iconSp"),b_e=Resource.ResUrl.getIconUrl(b_s.icon);d_u=Resource.ResManager.Instance.getImg(b_e,d_u);var d_m=e.getChildByName("txt_name"),d_w=e.getChildByName("txt_level"),f_t=e.getChildByName("txt_exp"),v_z=e.getChildByName("txt_exp_title"),d_h=e.getChildByName("btn_use"),r_t=e.getChildByName("clip_qua"),t_n=e.getChildByName("type_clip"),f_y=e.getChildByName("fight_txt");d_m.text=b_s.name,d_w.text=Utils.$((j_x("15_2342")+":{1}"),p_g.level),f_t.text=p_g.deployExp+"",r_t.index=b_s.quality-1,t_n.index=b_s.proType-1,f_t.visible=v_z.visible=0===this._type,d_h.dataSource=p_g,d_h.off(Laya.Event.MOUSE_DOWN,this,this.onUseBtnMD),d_h.on(Laya.Event.MOUSE_DOWN,this,this.onUseBtnMD);var p_q=TalismanModel.instance.getLvProps(p_g),h_h=b_p.calPropFight(p_q);f_y.text=(j_x("383_767")+":")+h_h}},b_s.prototype.onUseBtnMD=function(e){var p_l=this,p_g=e.target;LongPushUtil.inst.bingLongPushBtn(this,(function(){p_l.onUseBtnClick(p_g)}))},b_s.close=function(){Mtm(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.list_select.vScrollBarSkin="",e.list_select.scrollBar.elasticDistance=100,e.list_select.scrollBar.elasticBackTime=200,e.list_select.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e}e.TalismanItemPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.bag.TalismanItemSuccPanelUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){var e=this.dataSource.type,p_l=this.dataSource.infos,p_g=0<b_s.count?b_s.count:1;if(this.list_show.array=1<p_l.length?this.onMergeAtt(p_l):p_l,Config.CItem(b_s.itemId)){var d_u=Config.CItem(b_s.itemId).name;this.txt_num.text=1===e?Utils.$((j_x("1749_42_1365")+j_x("1876_743")+"{1}"+j_x(944)+"{2}"),p_g,d_u):Utils.$((j_x("1749_42_1365")+j_x("1876_743")+"{1}"+j_x(844)+"{2}"),p_g,d_u);var b_e=this.list_show.length,d_m=Math.ceil(b_e/this.list_show.repeatX);if(d_m<this.list_show.repeatY){var d_w=0;0<b_e&&(d_w=this.list_show.getCell(0).height),this.bg.height=d_m*d_w+this.list_show.y+10,this.height=this.bg.height+50}else this.bg.height=this.panelStartheight-50,this.height=this.panelStartheight;this.y=Stage.height-this.panelStartheight>>1,this.clickTipLab.y=this.height+5}else b_s.close()},b_s.prototype.onMergeAtt=function(e){var p_l=[];for(var p_g in e){var b_s=!1;for(var d_u in p_l)if(e[p_g].tsId===p_l[d_u].tsId){p_l[d_u].val+=e[p_g].val,b_s=!0;break}b_s||p_l.push(e[p_g])}return p_l},b_s.prototype.updateItem=function(e,p_l){if(e){var p_g=e.dataSource,b_s=e.getChildByName("txt_exp");p_g.ty?b_s.text=d_v.getDesc(p_g.ty)+"+"+p_g.val:b_s.text=(j_x("980_799_1241")+j_x(144)+"+")+p_g.val;var d_u=Config.talisman_talisman[p_g.tsId],b_e=e.getChildByName("iconSp"),d_m=Resource.ResUrl.getIconUrl(d_u.icon);b_e=Resource.ResManager.Instance.getImg(d_m,b_e)}},b_s.prototype.onRemove=function(){Clx(b_s)},b_s.open=function(e,p_l){void 0===p_l&&(p_l=0),e&&UIM.open(b_s,null,{infos:e,type:p_l},!1,!1,!0,!0)},b_s.close=function(){Wbi(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.list_show.vScrollBarSkin="",e.list_show.scrollBar.elasticDistance=100,e.list_show.scrollBar.elasticBackTime=200,e.panelStartheight=e.height,e.list_show.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e}e.TalismanItemUseSuccPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.banquet.banquetEndUI,__extends(b_s,p_l),b_s.open=function(e){Utv(e,UIM,b_s)},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"confirmBtn":case"closeBtn":v_x.instance.reqBanquetReward()}},b_s.close=function(){Oyl(UIM,b_s)},b_s.prototype.updateItem=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("indexLab"),d_u=e.getChildByName("nameLab"),b_e=e.getChildByName("pointLab");b_s.text=String(p_l+1),d_u.text=p_g.base.name;var d_m=Config.banquet_grade[p_g.grade];b_e.text=String(d_m.point)},b_s.prototype.onRemove=function(){Eff(this,Laya,LED,l_r)},b_s.prototype.onAdded=function(){Adt(this,Laya,LED,l_r,v_x)},b_s.prototype.onBanquetInfo=function(e){Klt(e,v_x,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.plrLst.vScrollBarSkin="",e.plrLst.scrollBar.elasticBackTime=100,e.plrLst.scrollBar.elasticDistance=200,e.plrLst.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e}e.BanquetEndPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.banquet.banquetJoinUI,__extends(b_s,p_l),b_s.open=function(e){Erz(e,UIM,b_s)},b_s.prototype.onAdded=function(){Sov(this,Laya,Config)},b_s.prototype.onRemove=function(){Ikt(this,Laya)},b_s.prototype.onMouseClick=function(e){var p_l=e.target;switch(p_l.name){case"closeBtn":case"backBtn":b_s.close();break;case"consumeBtn":var p_g=this.dataSource;if(!p_g)return;var d_u=p_l.parent.dataSource;v_x.instance.reqBanquetJoin(p_g.host.pid,d_u.id)}},b_s.close=function(){Mam(UIM,b_s)},b_s.prototype.updateItem=function(e,p_l){var p_g=e.dataSource,d_u=e.getChildByName("itemBox"),b_e=e.getChildByName("nameLab"),d_m=e.getChildByName("goldClip"),d_w=e.getChildByName("amtLab"),f_t=e.getChildByName("reward1Lab"),v_z=e.getChildByName("reward2Lab"),d_h=e.getChildByName("consumeBtn");if(b_e.text=p_g.name,d_u.isShowName=!1,d_u.isShowNum=!1,d_u.isShowTick=!1,p_g.gold){var r_t=new ModuleItemVO;r_t.id=1,r_t.amount=p_g.gold,d_u.setItemData(r_t,ItemBoxDefine.MODULE_ITEM),d_m.visible=!0,d_w.x=d_m.x+d_m.width+10;var t_n=LgcM.ins.heroVo.gold;d_w.color=p_g.gold>t_n?b_s.AMT_LABEL_RED:b_s.AMT_LABEL_GREEN,d_w.text=String(p_g.gold),d_h.disabled=p_g.gold>t_n}else if(p_g.consume){var f_y=b_p.getRewardDatas(p_g.consume);d_u.setItemData(f_y[0],ItemBoxDefine.MODULE_ITEM),d_m.visible=!1,d_w.x=d_m.x;var p_q=Config.CItem(f_y[0].id);d_w.text=p_q.name+" * "+f_y[0].amount;var h_h=BagModel.instance.getItemCountByItemID(f_y[0].id,BagTypeDefine.BAG_TYPE_ITEM);d_w.color=f_y[0].amount>h_h?b_s.AMT_LABEL_RED:b_s.AMT_LABEL_GREEN,d_h.disabled=f_y[0].amount>h_h}else d_u.setItemData(null,ItemBoxDefine.MODULE_ITEM),d_m.visible=!1,d_w.text="",d_h.disabled=!0;p_g.memberPoint===p_g.point?(f_t.text=(j_x("2235_83")+""+j_x("2295_1755_2033")+j_x("183_769_299")+j_x(2033))+(p_g.point<0?p_g.point:"+"+p_g.point)+(j_x("514_2224")),v_z.text="",f_t.color=p_g.point<0?b_s.REWARD_NEG:b_s.REWARD_POS):(f_t.text=(j_x("2235_83")+""+j_x("2295_1755_2033"))+(p_g.memberPoint<0?p_g.memberPoint:"+"+p_g.memberPoint)+(j_x("514_2224")+""),v_z.text=(j_x("769_299_2033"))+(p_g.point<0?p_g.point:"+"+p_g.point)+(j_x("514_2224")),f_t.color=p_g.memberPoint<0?b_s.REWARD_NEG:b_s.REWARD_POS,v_z.color=p_g.point<0?b_s.REWARD_NEG:b_s.REWARD_POS)},b_s.AMT_LABEL_GREEN="#3da72c",b_s.AMT_LABEL_RED="#9f4543",b_s.REWARD_POS="#5b6675",b_s.REWARD_NEG="#f80e04",b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.itemLst.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e}e.BanquetJoinPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.banquet.banquetUI,__extends(b_s,p_l),b_s.open=function(e){UIM.open(b_s,["shop.atlas","zudui.atlas","banquet.atlas"],{pid:e})},b_s.prototype.onBanquetInfo=function(p_l){var p_g=this.banquetTab.selectedIndex;if(0===p_g)this.setView(p_l?this.infoView:this.startView),p_l&&(this.infoView.setInfo(p_l,!0),v_x.instance.isBanquetEnd(p_l)&&e.BanquetEndPanel.open(p_l));else if(1===p_g){var b_s=this.infoView.dataSource;p_l&&b_s&&b_s.host.pid===p_l.host.pid&&this.infoView.setInfo(p_l,!1)}},b_s.prototype.onJoinSuccess=function(p_l,p_g){e.BanquetJoinPanel.close(),v_x.instance.reqBanquetLst(),b_x.open(p_l,p_g),this.infoView.setInfo(p_l),this.infoView.scrollMember(b_p.playerId),b_p.broadcastNotice((j_x("2295_1755_402")+j_x(2142)),1,"#71de66"),this.updateRedPoint(1,v_x.instance.hasRedPoint())},b_s.prototype.onAdded=function(){this.on(Laya.Event.CLICK,this,this.onMouseClick),LED.on(l_r.BANQUET_INFO_UPDATE,this,this.onBanquetInfo),LED.on(l_r.BANQUET_START_SUCCESS,this,this.onBanquetStartSuccess),LED.on(l_r.BANQUET_LST_UPDATE,this,this.onBanquetLst),LED.on(l_r.BANQUET_LIST_ITEM_SELECT,this,this.onListSelect),LED.on(l_r.BANQUET_JOIN_SUCCESS,this,this.onJoinSuccess),LED.on(l_r.BANQUET_QUERY_RESULT,this,this.onQueryResult),this.banquetTab.selectedIndex=0,this.removeChild(this.startView),this.updateRedPoint(0,!1),this.updateRedPoint(1,v_x.instance.hasRedPoint()),this.updateRedPoint(2,!1);var e=this.dataSource.pid;e&&(this.banquetTab.selectedIndex=e,this.setView(this.infoView)),this.updateView()},b_s.prototype.setView=function(e){var p_l=[this.startView,this.infoView,this.lstView,this.shopView];if(!(p_l.indexOf(e)<0)){for(var p_g=-1,b_s=0;b_s<this.numChildren;++b_s)if(this.getChildAt(b_s)===e){p_g=b_s;break}for(b_s=0;b_s<p_l.length;++b_s)e!==p_l[b_s]&&this.removeChild(p_l[b_s]);p_g<0&&this.addChildAt(e,this._viewIdx)}},b_s.prototype.updateRedPoint=function(e,p_l){var p_g=this.banquetTab.getChildByName("item"+e);if(p_g){var b_s=p_g.getChildByName("rpImg");b_s&&(b_s.visible=!!p_l)}},b_s.prototype.onBanquetLst=function(e){Idw(e,this)},b_s.prototype.onListSelect=function(e){var p_l=this;setTimeout((function(){p_l.infoView.setInfo(e,!1)}),0),this.setView(this.infoView)},b_s.prototype.onQueryResult=function(e,p_l){this.isDetailInfo()&&this.infoView.setInfo(p_l,!1)},b_s.prototype.onBanquetStartSuccess=function(){Ghy(v_x,e)},b_s.prototype.onTabSelect=function(e){this.updateView(),0===e&&this.infoView.scrollTop()},b_s.prototype.updateView=function(){var e=this.banquetTab.selectedIndex;switch(v_x.instance.reqBanquetInfo(),e){case 0:v_x.instance.getMyBanquetInfo()?this.setView(this.infoView):this.setView(this.startView);break;case 1:v_x.instance.reqBanquetLst(),this.setView(this.lstView);break;case 2:this.setView(this.shopView)}},b_s.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":this.isDetailInfo()?(this.setView(this.lstView),v_x.instance.reqBanquetLst()):(e.BanquetEndPanel.close(),e.BanquetJoinPanel.close(),e.BanquetQueryPanel.close(),e.BanquetStartTipPanel.close(),h_b.close(),b_s.close());break;case"descBtn":b_n.open()}},b_s.close=function(){Ohv(UIM,b_s)},b_s.prototype.onRemove=function(){Ogv(this,Laya,LED,l_r)},b_s.prototype.isDetailInfo=function(){return 1===this.banquetTab.selectedIndex&&!!this.infoView.parent},b_s);function b_s(){var e=p_l.call(this)||this;e._viewIdx=-1,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.banquetTab.selectHandler=Laya.Handler.create(e,e.onTabSelect,null,!1);for(var p_g=[e.startView,e.infoView,e.lstView,e.shopView],b_s=0;b_s<e.numChildren;++b_s){var d_u=e.getChildAt(b_s);if(0<=p_g.indexOf(d_u)){e._viewIdx=b_s;break}}return e}e.BanquetPanel=p_g;var d_u,b_e=(d_u=ui.window.banquet.banquetStartUI,__extends(d_m,d_u),d_m.prototype.onAdded=function(){Whc(this,Laya)},d_m.prototype.onRemove=function(){Yqj(this,Laya)},d_m.prototype.onMouseClick=function(e){var p_l=e.target;switch(p_l.name){case"confirmBtn":var p_g=p_l.parent.dataSource;if(p_g.gold&&!b_p.checkCoin(1,p_g.gold))return void b_p.broadcastError(ErrorDefine.goldNotEnough);if(p_g.consume&&!BagModel.instance.checkConsume(b_p.getRewardDatas(p_g.consume)))return void b_p.broadcastError(ErrorDefine.ItemAmountNotEnough);v_x.instance.reqBanquetStart(p_g.id,!0)}},d_m.prototype.updateView=function(){Cdc(this,Config)},d_m.prototype.updateItem=function(e,p_l){for(var p_g=e.dataSource,b_s=e.getChildByName("itemBox1"),d_u=e.getChildByName("itemBox2"),b_e=e.getChildByName("cond1Lab"),d_w=e.getChildByName("cond2Lab"),f_t=e.getChildByName("condGoldLab"),v_z=[b_s,d_u],d_h=[b_e,d_w],r_t=b_p.getRewardDatas(p_g.consume,ItemBoxDefine.MODULE_ITEM)||[],t_n=0;t_n<v_z.length;++t_n){var f_y=v_z[t_n],p_q=d_h[t_n],h_h=r_t[t_n];if(f_y.isShowName=!1,f_y.isShowNum=!1,f_y.isShowTick=!1,f_y.setItemData(h_h,ItemBoxDefine.MODULE_ITEM,!0),h_h){var n_j=BagModel.instance.getItemCountByItemID(h_h.id,BagTypeDefine.BAG_TYPE_ITEM);p_q.text=""+n_j+"/"+h_h.amount+"",p_q.color=n_j<h_h.amount?d_m.CondLabColorNotEnouth:d_m.CondLabColorOk,p_q.visible=!0}else p_q.visible=!1}f_t.text=String(p_g.gold)},d_m.CondLabColorOk="#3da72c",d_m.CondLabColorNotEnouth="#d8dcec",d_m);function d_m(){var e=d_u.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.banquetLst.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e}e.BanquetStartView=b_e;var d_w,f_t=(d_w=ui.window.banquet.banquetInfoUI,__extends(v_z,d_w),v_z.prototype.onAdded=function(){Ypa(this,Laya)},v_z.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"confirmBtn":e.BanquetJoinPanel.open(this.dataSource)}},v_z.prototype.onRemove=function(){Ogp(this,Laya)},v_z.prototype.scrollTop=function(){Gjc(this)},v_z.prototype.setInfo=function(e,p_l){if(void 0===p_l&&(p_l=null),this.dataSource=e,this.infoView.setInfo(e?e.members:null),Laya.timer.clear(this,this.onCDTimer),e){var p_g=Config.banquet_banquet[e.type];this.bgPanel.removeChild(this.bgImg),this.bgPanel.removeChild(this.bg2Img),this.bgPanel.addChildAt(1===e.type?this.bgImg:this.bg2Img,0);var b_s=this.memberLst.getCell(0);this.memberLst.height=b_s.y+b_s.height*Math.floor(p_g.numLmt/2),this.nameLab.text=this.nameLab2.text=e.host.name;var d_u=Resource.ResManager.getHeadUrl(e.host.entryId,e.host.headIcon);Resource.ResManager.Instance.getImg(d_u,this.headImg);var b_e=Config.fashion_fashion[e.host.fashionAvatar];if(b_e&&b_e.avatar&&0<b_e.avatar.length){var d_m=Resource.ResUrl.getIconUrl(b_e.avatar[0]);Resource.ResManager.Instance.getImg(d_m,this.frameImg),this.borderImg.visible=!1,this.frameImg.visible=!0}else this.borderImg.visible=!0,this.frameImg.visible=!1;this.sitLab.text=String(e.members.length)+"/"+p_g.numLmt,this.idLab.text=String(e.host.pid);var d_w=v_x.instance.clacLeftTime(e);this.cdLab.text=Utils.formatTimeStr(d_w),0<d_w&&Laya.timer.loop(1e3,this,this.onCDTimer);var f_t=v_x.instance.calcBanquetPoint(e);this.pointLab.text=String(f_t),this.confirmBtn.disabled=!1,null!==p_l&&(this.confirmBtn.visible=!1===p_l),this.memberLst.array=[],this.memberLst.array=e.members,e.host.pid!==b_p.playerId&&Laya.timer.loop(3e3,this,this.onUpdateTimer,null,!0)}else this.confirmBtn.disabled=!0,this.cdLab.text=Utils.formatTimeStr(0)},v_z.prototype.scrollMember=function(e){var p_l=this.dataSource;if(p_l){for(var p_g=-1,b_s=0;b_s<p_l.members.length;++b_s)if(p_l.members[b_s].base.pid===e){p_g=b_s;break}if(!(p_g<0)){this.bgPanel.vScrollBar.value=0;var d_u=this.memberLst.getCell(p_g),b_e=new Laya.Point(d_u.x,d_u.y);b_e=this.memberLst.localToGlobal(b_e);var d_m=(b_e=this.bgPanel.globalToLocal(b_e)).y-(this.bgPanel.height-d_u.height>>1);d_m>this.bgPanel.vScrollBar.max&&(d_m=this.bgPanel.vScrollBar.max),d_m<this.bgPanel.vScrollBar.min&&(d_m=this.bgPanel.vScrollBar.min),this.bgPanel.vScrollBar.value=d_m}}},v_z.prototype.updateItem=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("nameLab"),d_u=e.getChildByName("headImg"),b_e=e.getChildByName("borderImg"),d_m=e.getChildByName("frameImg");b_s.text=p_g.base.name;var d_w=Config.fashion_fashion[p_g.base.fashionAvatar];if(d_w&&d_w.avatar&&0<d_w.avatar.length){if(d_m){var f_t=Resource.ResUrl.getIconUrl(d_w.avatar[0]);Resource.ResManager.Instance.getImg(f_t,d_m),d_m.visible=!0}b_e&&(b_e.visible=!1)}else b_e&&(b_e.visible=!0),d_m&&(d_m.visible=!1);if(d_u){var v_z=Resource.ResManager.getHeadUrl(p_g.base.entryId,p_g.base.headIcon);Resource.ResManager.Instance.getImg(v_z,d_u)}},v_z.prototype.onCDTimer=function(){var e=this.dataSource,p_l=v_x.instance.clacLeftTime(e);this.cdLab.text=Utils.formatTimeStr(p_l),0===p_l&&Laya.timer.clear(this,this.onCDTimer)},v_z.prototype.onUpdateTimer=function(){var e=this.dataSource;e&&e.host.pid&&v_x.instance.reqBanquetQuery(e.host.pid)},v_z);function v_z(){var e=d_w.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.memberLst.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e}e.BanquetInfoView=f_t;var d_h,r_t=(d_h=ui.window.banquet.banquetInfo2UI,__extends(t_n,d_h),t_n.prototype.onAdded=function(){Adl(this)},t_n.prototype.onRemove=function(){},t_n.prototype.updateItem=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("idxLab"),d_u=e.getChildByName("nameLab"),b_e=e.getChildByName("box1"),d_m=e.getChildByName("box2"),d_w=e.getChildByName("box3");b_s.text=p_l+1+"",d_u.text=p_g.base.name;var f_t,v_z=Config.banquet_grade[p_g.grade];if(b_e.visible=v_z&&!!v_z.gold,d_m.visible=!b_e.visible&&0<v_z.point,d_w.visible=!b_e.visible&&!d_m.visible,b_e.visible)f_t=b_e.getChildByName("pointLab"),b_e.getChildByName("goldLab").text=""+v_z.gold;else if(d_m.visible){f_t=d_m.getChildByName("pointLab");var d_h=d_m.getChildByName("itemLab"),r_t=Config.CItem(v_z.consume[0][0]);d_h.text=r_t.name}else d_w.visible&&(f_t=d_w.getChildByName("pointLab"));f_t.text=(0<v_z.point?"+":"")+v_z.point},t_n.prototype.setInfo=function(e){Syv(e,this)},t_n);function t_n(){var e=d_h.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.list.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.list.vScrollBarSkin="",e.list.scrollBar.elasticBackTime=100,e.list.scrollBar.elasticDistance=200,e}e.BanquetLstInfoView=r_t;var f_y,p_q=(f_y=ui.window.banquet.banquetLstUI,__extends(h_h,f_y),h_h.prototype.onAdded=function(){Kct(this,Laya,LED,l_r)},h_h.prototype.onRemove=function(){Iah(this,Laya,LED,l_r)},h_h.prototype.updateItem=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("nameLab"),d_u=e.getChildByName("numLab");b_s.text=p_g.host.name;var b_e=Config.banquet_banquet[p_g.type];d_u.text=p_g.members.length+"/"+b_e.numLmt},h_h.prototype.updateTimes=function(){Wqx(this,v_x,Config,GlobalDefine)},h_h.prototype.onSelect=function(e){if(!(e<0)){this.sitLst.selectedIndex=-1;var p_l=this.sitLst.array[e];LED.event(l_r.BANQUET_LIST_ITEM_SELECT,[p_l])}},h_h.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"queryBtn":e.BanquetQueryPanel.open()}},h_h.prototype.setLst=function(e){Idx(e,this)},h_h);function h_h(){var e=f_y.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.sitLst.selectEnable=!0,e.sitLst.selectHandler=Laya.Handler.create(e,e.onSelect,null,!1),e.sitLst.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e}e.BanquetLstView=p_q;var n_j,j_l=(n_j=ui.window.banquet.banquetShopUI,__extends(l_m,n_j),l_m.prototype.onAdded=function(){Moj(LED,l_r,this,ShopModel,ShopType)},l_m.prototype.updateItem=function(e,p_l){Yvk(e,p_l)},l_m.prototype.updatePoint=function(){Owf(this,b_p,LgcM)},l_m.prototype.onRemove=function(){Eku(LED,l_r,this)},l_m.prototype.updateShopList=function(){var e=ShopModel.instance.getShopDatas(ShopType.BANQUET);e===this.shopList.array?this.shopList.refresh():this.shopList.array=e},l_m);function l_m(){var p_l=n_j.call(this)||this;return p_l.on(Laya.Event.ADDED,p_l,p_l.onAdded),p_l.on(Laya.Event.REMOVED,p_l,p_l.onRemove),p_l.shopList.vScrollBarSkin="",p_l.shopList.scrollBar.elasticBackTime=500,p_l.shopList.repeatY=30,p_l.shopList.scrollBar.elasticDistance=200,p_l.shopList.selectEnable=!0,p_l.shopList.itemRender=e.ShopItemView,p_l.shopList.renderHandler=Laya.Handler.create(p_l,p_l.updateItem,null,!1),p_l}e.BanquetShopView=j_l;var z_m,h_b=(z_m=ui.window.banquet.banquetStartUI,__extends(t_i,z_m),t_i.open=function(){Mxq(UIM,t_i)},t_i.prototype.onRemove=function(){Eqq(this,Laya,LED,l_r)},t_i.prototype.updateView=function(){Epo(this,Config)},t_i.close=function(){Wie(UIM,t_i)},t_i.prototype.onAdded=function(){Ewg(this,Laya,LED,l_r)},t_i.prototype.onMouseClick=function(e){var p_l=e.target;switch(p_l.name){case"closeBtn":case"backBtn":t_i.close();break;case"confirmBtn":var p_g=p_l.parent.dataSource;if(p_g.gold&&!b_p.checkCoin(1,p_g.gold))return b_p.broadcastError(ErrorDefine.goldNotEnough),void r_f.instance.isWindow(1);if(p_g.consume&&!BagModel.instance.checkConsume(b_p.getRewardDatas(p_g.consume)))for(var b_s=0;b_s<p_g.consume.length;b_s++)if(BagModel.instance.checkConsume(b_p.getRewardDatas([p_g.consume[b_s]])),!BagModel.instance.checkConsume(b_p.getRewardDatas([p_g.consume[b_s]])))return r_f.instance.isWindow(p_g.consume[b_s][0]),void b_p.broadcastError(ErrorDefine.ItemAmountNotEnough);v_x.instance.reqBanquetStart(p_g.id,!0)}},t_i.prototype.updateItem=function(e,p_l){for(var p_g=e.dataSource,b_s=e.getChildByName("itemBox1"),d_u=e.getChildByName("itemBox2"),b_e=e.getChildByName("cond1Lab"),d_m=e.getChildByName("cond2Lab"),d_w=e.getChildByName("condGoldLab"),f_t=[b_s,d_u],v_z=[b_e,d_m],d_h=b_p.getRewardDatas(p_g.consume,ItemBoxDefine.MODULE_ITEM)||[],r_t=0;r_t<f_t.length;++r_t){var t_n=f_t[r_t],f_y=v_z[r_t],p_q=d_h[r_t];if(t_n.isShowName=!1,t_n.isShowNum=!1,t_n.isShowTick=!1,t_n.setItemData(p_q,ItemBoxDefine.MODULE_ITEM,!0),p_q){var h_h=BagModel.instance.getItemCountByItemID(p_q.id,BagTypeDefine.BAG_TYPE_ITEM);f_y.text=""+h_h+"/"+p_q.amount+"",f_y.color=h_h<p_q.amount?t_i.CondLabColorNotEnouth:t_i.CondLabColorOk,f_y.visible=!0}else f_y.visible=!1}d_w.text=String(p_g.gold)},t_i.prototype.onBanquetStartSuccess=function(){Wgp(t_i)},t_i.CondLabColorOk="#3da72c",t_i.CondLabColorNotEnouth="#d8dcec",t_i);function t_i(){var e=z_m.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.banquetLst.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e}e.BanquetStartPanel=h_b;var n_f,t_s=(n_f=ui.window.banquet.banquetStartEntryUI,__extends(v_n,n_f),v_n.prototype.onAdded=function(){Kor(this,Laya)},v_n.prototype.onRemove=function(){Mle(this,Laya)},v_n.prototype.onMouseClick=function(e){switch(e.target.name){case"startBtn":h_b.open()}},v_n);function v_n(){var e=n_f.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.BanquetStartEntryView=t_s;var b_o,b_x=(b_o=ui.window.banquet.banquetThancksUI,__extends(v_s,b_o),v_s.open=function(e,p_l){UIM.open(v_s,["rank.atlas","guild.atlas"],{info:e,grade:p_l},!1,!1,!0)},v_s.prototype.onAutoClose=function(){Yxs(UIM,v_s)},v_s.prototype.onDelay=function(){Epc(Laya,this)},v_s.prototype.onClickStage=function(e){var p_l=e.target;p_l&&this.contains(p_l)||v_s.close()},v_s.prototype.onAdded=function(){Gbx(Laya,this)},v_s.close=function(){Sus(UIM,v_s)},v_s.prototype.onRemove=function(){Laya.stage.off(Laya.Event.CLICK,this,this.onClickStage),LED.off(l_r.RANK_WORSHIP_RESULT,this,this.updateView),this.dataSource=null,this.roleModel&&this.roleModel.clearRes()},v_s.prototype.updateView=function(){var e=this.dataSource?this.dataSource.info:null,p_l=this.dataSource?this.dataSource.grade:0,p_g=Config.banquet_grade[p_l];if(this.nameLab.text=e?e.host.name:"",this.tellLab.text=p_g?p_g.tell:"",this.modelContainer.visible=!!e,e){var b_s=new Engine2d.ActorBaseVo;b_s.id=e.host.pid,b_s.entryId=e.host.entryId,b_s.type=Engine2d.ActorTypeDefine.PLAYER,this.roleModel.changRoleSkin(b_s,!1,!0,e.host.fashionWeapon,e.host.fashionClothes)}},v_s);function v_s(){var e=b_o.call(this)||this;return e.roleModel=new n_k,e.modelContainer.addChild(e.roleModel),e.modelContainer.scaleX=1.2,e.modelContainer.scaleY=1.2,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.BanquetJoinSuccessView=b_x;var r_c,b_n=(r_c=ui.window.banquet.banquetDescUI,__extends(v_p,r_c),v_p.open=function(){Owd(UIM,v_p)},v_p.prototype.onAdded=function(){Gna(this,Laya)},v_p.close=function(){Kek(UIM,v_p)},v_p.prototype.onRemove=function(){Kgv(this,Laya)},v_p.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":v_p.close()}},v_p);function v_p(){var e=r_c.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.BanquetDescPanel=b_n}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.banquet.banquetQueryUI,__extends(b_s,p_l),b_s.open=function(){Sgr(UIM,b_s)},b_s.close=function(){Iaj(UIM,b_s)},b_s.prototype.onQueryResult=function(e,p_l){1===e?b_p.broadcastError(ErrorDefine.PlayerNotExist):2===e&&b_p.broadcastError(ErrorDefine.BanquetNotStart),this.setInfo(p_l)},b_s.prototype.onAdded=function(){Ehh(this,Laya,LED,l_r)},b_s.prototype.onRemove=function(){Knw(this,Laya,LED,l_r)},b_s.prototype.setInfo=function(e){if(this.dataSource=e){this.nameLab.text=e.host.name;var p_l=Config.banquet_banquet[e.type];this.typeLab.text=p_l.name,this.sitLab.text=e.members.length+"/"+p_l.numLmt,Laya.timer.clear(this,this.onTimer);var p_g=v_x.instance.clacLeftTime(e);this.timeLab.text=Utils.formatTimeStr(p_g),0<p_g&&Laya.timer.loop(1e3,this,this.onTimer)}else this.nameLab.text="",this.typeLab.text="",this.sitLab.text="",this.timeLab.text=""},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"queryBtn":var p_l=this.idTxt.text;v_x.instance.reqBanquetQuery(Number(p_l));break;case"confirmBtn":var p_g=this.dataSource;p_g&&(LED.event(l_r.BANQUET_LIST_ITEM_SELECT,[p_g]),b_s.close())}},b_s.prototype.onTimer=function(){var e=this.dataSource;if(!e)return this.timeLab.text=Utils.formatTimeStr(0),void Laya.timer.clear(this,this.onTimer);var p_l=v_x.instance.clacLeftTime(e);this.timeLab.text=Utils.formatTimeStr(p_l),0===p_l&&Laya.timer.clear(this,this.onTimer)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.BanquetQueryPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.banquet.banquetStartTipUI,__extends(b_s,p_l),b_s.open=function(e){Yxx(e,UIM,b_s)},b_s.close=function(){Quy(UIM,b_s)},b_s.prototype.onAdded=function(){Wjy(this,Laya,Config,Utils)},b_s.prototype.onRemove=function(){Mrs(this,Laya)},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"confirmBtn":case"closeBtn":b_s.close()}},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.BanquetStartTipPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.benefit.benefitUI,__extends(b_s,p_l),b_s.prototype.init=function(){Iii(this,Laya)},b_s.prototype.onSelectMenuTap=function(e){-1!=e&&this.updateTab(e)},b_s.open=function(e){void 0===e&&(e=null),UIM.open(b_s,["benefit.atlas"],{benefitType:e},!1,!1,!0)},b_s.prototype.refreshShareRedPoint=function(){Atz(this,BenefitType)},b_s.prototype.delMenu=function(e,p_l){var p_g=p_l.indexOf(e);-1!=p_g&&p_l.splice(p_g,1)},b_s.prototype.onClose=function(){Iee(b_s)},b_s.prototype.updateMenuRp=function(e){var p_l=this.showTypeList.indexOf(e);if(-1!=p_l){var p_g=this.menuTap.getCell(p_l);e==BenefitType.share&&(BenefitModel.instance.sharePanelFirstRed=!1),p_g.getChildByName("redImg").visible=this.isShowRp(e)}},b_s.prototype.getType=function(e){var p_l=0;return e<this.showTypeList.length&&(p_l=this.showTypeList[e]),p_l},b_s.prototype.initMenu=function(){Wak(this,BenefitType,ShareMgr,BenefitModel)},b_s.close=function(){Uww(UIM,b_s)},b_s.prototype.onMenuRender=function(e,p_l){if(null!=e.dataSource){var p_g=e.getChildByName("clip"),b_s=e.getChildByName("redImg"),d_u=this.showTypeList[p_l],b_e=this.allTypeList.indexOf(d_u),d_m=this._iconList[b_e];p_g.index=d_m,b_s.visible=this.isShowRp(d_u),e.label=""}},b_s.prototype.onAdded=function(){var e=BenefitType.signin,p_l=this.dataSource.benefitType;"number"==typeof p_l&&(e=p_l),this.curTapType=e,this.updateTab(this.getIndex(e,!0)),this.refreshShareRedPoint(),BenefitModel.instance.reqInviteRewardStatus(),LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,10022),this.closeBtn.on(Laya.Event.CLICK,this,this.onClose),this.backBtn.on(Laya.Event.CLICK,this,this.onClose),LED.on(l_r.SIGNIN_INFO,this,this.refreshSigninRedPoint),LED.on(l_r.SIGNIN_SECCESS,this,this.refreshSigninRedPoint),LED.on(l_r.SHARE_REWARD_UPDATE,this,this.refreshShareRedPoint),this.refreshSigninRedPoint()},b_s.prototype.updatePanel=function(){switch(this.curTapType){case BenefitType.signin:this.signinPanel.updateView();break;case BenefitType.share:this.shareView.updateView();break;case BenefitType.exchange:}},b_s.prototype.getLocalTime=function(e,p_l){var p_g=new Date(1e3*e),b_s=p_g.getFullYear()+"-",d_u=(p_g.getMonth()+1<10?"0"+(p_g.getMonth()+1):p_g.getMonth()+1)+"-",b_e=(p_g.getDate()<10?"0"+p_g.getDate():p_g.getDate())+" ",d_m=p_g.getHours()+":",d_w=p_g.getMinutes()+":",f_t=p_g.getSeconds();return 1==p_l?b_s+d_u+b_e:2==p_l?b_s+d_u+b_e+d_m+d_w+f_t:3==p_l?b_e:void 0},b_s.prototype.refreshSigninRedPoint=function(){Irv(this,BenefitType,LED,l_r)},b_s.prototype.updateBtn=function(e){this._lastBtn&&(this._lastBtn.selected=!1);var p_l=this.menuTap.getCell(e);p_l.selected=!0,this._lastBtn=p_l},b_s.prototype.getIndex=function(e,p_l){void 0===p_l&&(p_l=!1);var p_g=(p_l?this.showTypeList:this.allTypeList).indexOf(e);return-1==p_g&&(p_g=0),p_g},b_s.prototype.updateTab=function(e){Yss(e,this)},b_s.prototype.isShowRp=function(e){var p_l=!1;switch(e){case BenefitType.signin:var p_g=SigninModel.instance.canSignin(),b_s=SigninModel.instance.isShowRedPoint();p_l=p_g||b_s;break;case BenefitType.share:p_l=BenefitModel.instance.hasReward()}return p_l},b_s.prototype.onRemove=function(){Eam(this,Laya,LED,l_r)},b_s.prototype.getUnix=function(e){return e=e.replace(/-/g,"/"),new Date(e).getTime()},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.BenefitView=p_g;var d_u,b_e=(d_u=ui.window.benefit.exchangeViewUI,__extends(d_m,d_u),d_m.prototype.init=function(){for(var e=(j_x("2092_1777_2075")+j_x(1427)),p_l=[GPlatform.game_channel_id,GPlatform.game_id,b_p.config.channel_id],p_g=0;p_g<p_l.length;p_g++){var b_s=p_l[p_g],d_u=Config.platform[b_s];if(d_u){e=d_u.desc;break}}GPlatform.isHuaWei||GPlatform.isXJH5?(this.title.visible=!1,this.txtNote.visible=!1):(this.title.visible=!0,this.txtNote.visible=!0,this.title.skin=GPlatform.isWxMini?"res/ui/benefit/exchange_01.png":"res/ui/benefit/exchange_02.png"),this.qqdesc.text=e},d_m.prototype.onClick=function(){var e=this.txt_input.text;if(e){var p_l=new c2w_activecode_get;p_l.code=e,DB.instance.query(c2w_activecode_get,p_l)}else b_p.broadcastNotice((j_x("1777_173_2456")+j_x("1763_1713_909")))},d_m);function d_m(){var e=d_u.call(this)||this;return e.btn_up.on(Laya.Event.CLICK,e,e.onClick),e.init(),e}e.ExchangePanel=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.benefit.shareViewUI,__extends(b_s,p_l),b_s.prototype.updateView=function(){Cvs(LED,l_r,this)},b_s.prototype.updateData=function(){Khc(this,BenefitModel)},b_s.prototype.updateItem=function(e,p_l){Sbd(e,p_l)},b_s.prototype.onClick=function(p_l){BenefitModel.instance.shareClick()&&e.BenefitView.close()},b_s.prototype.destroy=function(e){Uzw(e,this,Laya,LED,l_r,p_l)},b_s);function b_s(){var e=p_l.call(this)||this;return e.list_invite.vScrollBarSkin="",e.list_invite.scrollBar.elasticDistance=100,e.list_invite.scrollBar.elasticBackTime=200,e.list_invite.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.btn_invite.on(Laya.Event.CLICK,e,e.onClick),e}e.SharePanel=p_g;var d_u,b_e=(d_u=ui.window.benefit.share_cellUI,__extends(d_m,d_u),d_m.prototype.onClick=function(e){var p_l=this.dataSource;if(p_l){var p_g=BenefitModel.instance.getRewardVo(p_l);p_g&&1===p_g.status&&BenefitModel.instance.reqInviteReward(p_l)}},d_m.prototype.removeTime=function(){Qui(Laya,this)},d_m.prototype.updateTime=function(){var e=ActivityModel.instance.getActTime(ActivityTypeDefine.id_invite)[1]-SyncTime.serverTime;this._remianTime=Math.floor(e/1e3),this.removeTime(),0<this._remianTime&&(this.onTimer(),Laya.timer.loop(1e3,this,this.onTimer))},d_m.prototype.setItemData=function(e){var p_l=Config.activity_invite_invite[e];this.box_exchange.visible=1==p_l.isReset,this.txt_timeLimit.visible=!this.box_exchange.visible;for(var p_g=b_p.getRewardDatas(p_l.reward);p_g.length<3;)p_g.push(null);this.rewardList.array=p_g;var b_s=p_l.condition[1],d_u=0,b_e=BenefitModel.instance.getRewardVo(e);b_e?(d_u=b_e.progress,this.btn_reward.disabled=0===b_e.status):this.btn_reward.disabled=!0;var d_m=p_l.desc+"<span color='#008931'>"+Utils.$("({1} / {2})",d_u,b_s)+"</span>";this.txt_condition_desc.innerHTML=d_m,this.updateTime()},d_m.prototype.onInviteClick=function(){BenefitModel.instance.shareClick()&&e.BenefitView.close()},d_m.prototype.updateItem=function(e,p_l){Qsz(e,p_l)},d_m.prototype.onTimer=function(){this._remianTime<=0?this.updateTime():(this.txt_timeLimit.text=(j_x("1896_407_2075")+"")+Utils.formatTimeStr(this._remianTime),this._remianTime--)},d_m);function d_m(){var e=d_u.call(this)||this;return e._remianTime=0,e._shareSpaceTime=0,e.txt_condition_desc.style.font=b_p.config.font,e.txt_condition_desc.style.fontSize=b_p.config.fontSize,e.txt_condition_desc.style.align="left",e.txt_condition_desc.style.color="#4a728e",e.rewardList.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.btn_reward.on(Laya.Event.CLICK,e,e.onClick),e.btn_invite.on(Laya.Event.CLICK,e,e.onInviteClick),e}e.ShareCell=b_e}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.blackking.backingStatusGrowUpTipUI,__extends(d_u,p_l),d_u.prototype.updateNowList=function(e,p_l){var p_g=d_v.getPropertyType(e.dataSource.propOrdinal),b_s=e.getChildByName("descTxt"),d_u=e.getChildByName("valueTxt");b_s.text=p_g.desc,d_u.text=e.dataSource.value.toString(),p_g.isPercent()?d_u.text=Utils.$("{1}%",e.dataSource.value/100):d_u.text=Utils.$("{1}",e.dataSource.value)},d_u.prototype.onCloseBtnClick=function(){Wcl(d_u)},d_u.prototype.onAdded=function(){Edd(this,Laya)},d_u.prototype.updateUI=function(){Ijq(this)},d_u.prototype.onRemove=function(){Mwo(this,Laya)},d_u.prototype.updateNextBox=function(){this.nextBox.visible=!0,this.maxLvText.visible=!1;var e,p_l,p_g=this.dataSource.xianyuanInfo;p_l=6==p_g.seatLv?(e=100*p_g.id+p_g.seatStar+1,1):(e=100*p_g.id+p_g.seatStar,p_g.seatLv+1);var b_s=Config.xianyuan_xianweiStar[e];if(b_s){var d_u=Config.xianyuan_xianweiLevel[100*e+p_l];this.nextName.text=Utils.$("{1}.{2}",d_u.name,b_s.name),this.nextProp.text=Utils.$((j_x("189_438_613")+j_x("233_1514_151")+j_x("1628_371")+"{1}%"),b_s.effect/1e4*100);var b_e=BlackKingModel.instance.getXianweiCfgPropById(d_u.id);this.nextList.array=b_e}else this.nextBox.visible=!1,this.maxLvText.visible=!0},d_u.open=function(e){UIM.open(d_u,null,{xianyuanInfo:e},!1,!1,!0,!0)},d_u.prototype.updateNowBox=function(){var e=this.dataSource.xianyuanInfo,p_l=100*e.id+e.seatStar,p_g=Config.xianyuan_xianweiStar[p_l],b_s=Config.xianyuan_xianweiLevel[100*p_l+e.seatLv];this.nowName.text=Utils.$("{1}.{2}",b_s.name,p_g.name),this.NowPorp.text=Utils.$((j_x("189_438_613")+j_x("233_1514_151")+j_x("1628_371")+"{1}%"),p_g.effect/1e4*100);var d_u=BlackKingModel.instance.getXianweiCfgPropById(b_s.id);this.nowList.array=d_u},d_u.close=function(){Wpa(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.nowList.renderHandler=p_g.create(e,e.updateNowList,null,!1),e.nowList.array=null,e.nextList.renderHandler=p_g.create(e,e.updateNowList,null,!1),e.nextList.array=null,e}e.BackingStatusGrowUpTip=b_s}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.blackking.blackingStatusUI,__extends(d_u,p_l),d_u.prototype.updateBackingList=function(e,p_l){var p_g=e.getChildByName("goodsImg"),b_s=e.getChildByName("needText2"),d_u=e.dataSource,b_e=Config.CItem(d_u[0]);p_g.skin=Resource.ResUrl.getIconUrl(b_e.icon);var d_m=BagModel.instance.getItemCountByItemID(d_u[0],BagTypeDefine.BAG_TYPE_ITEM);b_s.text=d_m+"/"+d_u[1],d_m>=d_u[1]?b_s.color="#008931":b_s.color="#ef2b2b"},d_u.prototype.updatePropList=function(e,p_l){var p_g=d_v.getPropertyType(e.dataSource.propOrdinal),b_s=e.getChildByName("descTxt"),d_u=e.getChildByName("valueTxt");b_s.text=p_g.desc,d_u.text=e.dataSource.value.toString(),p_g.isPercent()?d_u.text=Utils.$("{1}%",e.dataSource.value/100):d_u.text=Utils.$("{1}",e.dataSource.value);var b_e=this.dataSource.xianyuanInfo;0!=b_e.seatLv&&0!=b_e.seatStar?(b_s.color="#4a728e",d_u.color="#008931"):(b_s.color="#6b6b6b",d_u.color="#6b6b6b")},d_u.prototype.activateUpdate=function(){Egz(this)},d_u.prototype.onStopSucceedLevel=function(){Sjc(this,Laya)},d_u.prototype.onStopAni=function(){Wpb(this,Laya)},d_u.prototype.onAdded=function(){Avw(this,Laya,LED,l_r)},d_u.prototype.updateUI=function(){this.hideGunImg(),this._isOk=null,this._enterStatu=null;var e,p_l=this.dataSource.xianyuanInfo,p_g=100*p_l.id+p_l.seatStar+1,b_s=Config.xianyuan_xianweiStar[p_g];if(this.has_backing.visible=!0,this.has_backing2.visible=!0,this.null_backing3.visible=!1,this.needHtml.visible=!1,this.nameBox.visible=!1,this.maxLvText.visible=!1,this.enterBtn.visible=!0,0!=p_l.seatLv&&0!=p_l.seatStar){this.gainText.text=(j_x("189_425_613")+j_x(233)),this.gainText1.text=(j_x("189_425_1628")+j_x(371)),this.activateUpdate(),this.nameBox.visible=!0;var d_u=100*p_l.id+p_l.seatStar,b_e=Config.xianyuan_xianweiStar[d_u],d_m=Config.xianyuan_xianweiLevel[100*d_u+p_l.seatLv],d_w=Config.xianyuan_xianweiLevel[100*d_u+p_l.seatLv+1];this.nameFront.index=p_l.seatLv-1,this.nameBack.index=p_l.seatStar-1;var f_t,v_z=BlackKingModel.instance.getXianweiCfgPropById(d_m.id);if(this.propList.array=v_z,d_w||p_l.seatLv!=b_e.lvLmt)this.enterBtn.label=(j_x(951)+" "+j_x(969)),t_n=!(this._enterStatu=1),t_n=b_p.checkConsume(d_w.consume,!1),e=d_w.consume,this._isOk=t_n;else if(b_s){this.enterBtn.label=(j_x(971)+" "+j_x(371));var d_h=!(this._enterStatu=2),r_t=void 0;p_l.star>=b_s.xyStar?(r_t="#008931",d_h=!0):r_t="#ef2b2b",this.needHtml.innerHTML=Utils.setColor(Utils.$((j_x("774_1624_189")+j_x("438_1117_1012")+"{1}"+j_x(1148)),b_s.xyStar),r_t);var t_n=!(this.needHtml.visible=!0);t_n=b_p.checkConsume(b_s.consume,!1),e=b_s.consume,this._isOk=t_n&&d_h}else this.maxLvText.visible=!0,this.has_backing2.visible=!1,this.enterBtn.visible=!1;f_t=b_s?Utils.$((j_x("2379_784_1623")+j_x("1514_151_1628")+j_x(371)+"{1}%"),b_s.effect/1e4*100):(j_x("1300_1012_1117")+j_x("1081_1375_2342")),this.propText.text=Utils.$("{1}({2})",Utils.$((j_x("189_438_613")+j_x("233_1514_151")+j_x("1628_371")+"{1}%"),b_e.effect/1e4*100),f_t)}else{this.enterBtn.label=(j_x(1245)+" "+j_x(845)),this.null_backing3.visible=!0,this.gainText.text=(j_x("189_425_613")+j_x(233)+"("+j_x("206_2335_1796")+")"),this.gainText1.text=(j_x("189_425_1628")+j_x(371)+"("+j_x("206_2335_1796")+")"),this.notActivateUpdate(),this._enterStatu=0;var f_y=Config.global[3050],p_q=Config.state_state[f_y.t_info[0]],h_h=Config.state_stateSub[100*f_y.t_info[0]+f_y.t_info[1]];d_w=Config.xianyuan_xianweiLevel[100*b_s.id+p_l.seatLv+1],v_z=BlackKingModel.instance.getXianweiCfgPropById(d_w.id),this.propList.array=v_z,this.propText.text=Utils.$((j_x("189_438_613")+j_x("233_1514_151")+j_x("1628_371")+"{1}%"),b_s.effect/1e4*100);var n_j,j_l,l_m=r_t=void 0,z_m=StateModel.instance.getStateLv(),h_b=StateModel.instance.getStateSubLv(),t_i=!1;z_m>f_y.t_info[0]||z_m==f_y.t_info[0]&&h_b>=f_y.t_info[1]?(r_t="#008931",t_i=!0):r_t="#ef2b2b",d_h=!1,p_l.star>=b_s.xyStar?(l_m="#008931",d_h=!0):l_m="#ef2b2b",n_j=Utils.setColor(Utils.$((j_x("381_843_1117")+j_x(1012)+"{1}.{2}    "),p_q.desc,h_h.desc),r_t),j_l=Utils.setColor(Utils.$((j_x("774_1624_189")+j_x("438_1117_1012")+"{1}"+j_x(1148)),b_s.xyStar),l_m),this.needHtml.innerHTML=n_j+Utils.setSpace(8)+j_l,t_n=!(this.needHtml.visible=!0),t_n=b_p.checkConsume(b_s.consume,!1),e=b_s.consume,this._isOk=t_i&&d_h&&t_n}this.enterRed.visible=this._isOk,this.updateSeatStarByLv(p_l.seatLv);var n_f=Config.xianyuan_god[p_l.id],t_s=Resource.ResUrl.getIconUrl(n_f.pic);Resource.ResManager.Instance.getImg(t_s,this.xianyuan),this.hasBackingList.array=e},d_u.prototype.onSucceedJieStop=function(){Sjp(this,Laya)},d_u.prototype.notActivateUpdate=function(){Elp(this)},d_u.prototype.stuteOriginalXY=function(){for(var e=this._stuteXYArr.length=0;e<5;e++){var p_l=this["status"+e];this._stuteXYArr.push([p_l.x,p_l.y])}},d_u.prototype.stopAllAni=function(){this.ani1.isPlaying&&this.onStopAni(),this.succeedJie.isPlaying&&this.onSucceedJieStop(),this.succeedLevel.isPlaying&&this.onStopSucceedLevel()},d_u.prototype.onCloseBtnClick=function(){Snq(d_u)},d_u.open=function(e){UIM.open(d_u,["karma/xianwei.atlas"],{xianyuanInfo:e},!1,!1,!0)},d_u.prototype.updateSeatStarByLv=function(e){e<1&&(e=1);for(var p_l=e-2,p_g=0;p_g<5;p_g++){var b_s=this["status"+p_g],d_u=this["gunImg"+p_g];p_g<=p_l?(b_s.index=0,d_u&&0<p_g&&(d_u.visible=!0)):b_s.index=1}},d_u.prototype.onHelpBtnClick=function(){Umi(d_m)},d_u.prototype.hideGunImg=function(){Evi(this)},d_u.prototype.onGrowUpClick=function(){var p_l=this.dataSource.xianyuanInfo;0!=p_l.seatLv&&0!=p_l.seatStar?e.BackingStatusGrowUpTip.open(this.dataSource.xianyuanInfo):b_p.broadcastNotice((j_x("2335_1796_189")+j_x(425)+","+j_x("2060_1919_5")+j_x("2450_189_425")+j_x("402_1066")))},d_u.prototype.onEnterClick=function(){var e=(new Date).getTime();if(null==this._tiemDate||e-this._tiemDate>=this._cdBtn)if(this._tiemDate=e,this.ani1.isPlaying)b_p.broadcastNotice((j_x("371_784_254")+j_x("1314_2462_1919")+j_x("932_1835")));else{var p_l=this.dataSource.xianyuanInfo;0==this._enterStatu?this._isOk?BlackKingModel.instance.reqXianyuanSeatAct(p_l.id):b_p.broadcastNotice((j_x("1971_1896_1117")+j_x("1012_2335_1796")+j_x("189_425_582")+j_x("774_2046_1320")+j_x(1283))):1==this._enterStatu?this._isOk?(BlackKingModel.instance.reqXianyuanSeatUpLv(p_l.id),this.onStopSucceedLevel(),this.succeedLevel.visible=!0,this.succeedLevel.on(Laya.Event.COMPLETE,this,this.onStopSucceedLevel),this.succeedLevel.play(!1)):b_p.broadcastNotice((j_x("371_2342_582")+j_x("774_2046_1661")+j_x("1502_2462_1779"))):2==this._enterStatu&&(this._isOk?(BlackKingModel.instance.reqXianyuanSeatUpStar(p_l.id),this.ani1.on(Laya.Event.COMPLETE,this,this.onStopAni),this.ani1.play(0,!1),this.hideGunImg()):b_p.broadcastNotice((j_x("1971_1896_1117")+j_x("1012_371_784")+j_x("189_425_582")+j_x("774_2046_1320")+j_x(1283)))),this._isOk||b_p.checkConsume(this.hasBackingList.array,!0)}},d_u.prototype.onRemove=function(){Gsf(this,Laya,LED,l_r)},d_u.prototype.setStuteOriginaLXY=function(){for(var e=0;e<5;e++){var p_l=this["status"+e];p_l.x=this._stuteXYArr[e][0],p_l.y=this._stuteXYArr[e][1]}},d_u.close=function(){Gnb(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e._stuteXYArr=[],e._cdBtn=500,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.propList.renderHandler=p_g.create(e,e.updatePropList,null,!1),e.propList.array=null,e.hasBackingList.renderHandler=p_g.create(e,e.updateBackingList,null,!1),e.hasBackingList.array=null,e.ani1.index=0,e.stuteOriginalXY(),z_j.setHtml(e.needHtml,22,"#4a728e",10,"center","SimHei"),e.needHtml.style.valign="middle",e}e.BlackingStatus=b_s;var b_e,d_m=(b_e=ui.window.blackking.backingStatusTipUI,__extends(d_w,b_e),d_w.open=function(){Amy(UIM,d_w)},d_w.close=function(){Wrh(UIM,d_w)},d_w);function d_w(){return b_e.call(this)||this}e.BackingStatusTip=d_m}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.blackking.blackking_cardUI,__extends(d_u,p_l),d_u.prototype.init=function(){this.on(Laya.Event.ADDED,this,this.onAdded),this.on(Laya.Event.REMOVED,this,this.onRemove),this._cardTab=new p_c(this.cardTab),this.activenessProList.renderHandler=p_g.create(this,this.updateActivenessExrItem,null,!1)},d_u.prototype.btnSkin=function(e){this.titleImg.skin="res/ui/karma/xunxian_zi_0"+(e+1)+".png",this.listBgimg.skin="res/ui/karma/xianyuan_tu_0"+(5+e)+".png",this.activityDate.visible=0<e,this.activitydatetxt.visible=0<e;var p_l="res/ui/karma/Button_benqizhuda.png",p_g="res/ui/karma/Button_jifen.png";this.featBtn.skin=0<e?p_l:p_g,this.shopBtn.visible=0<e,this.shopBtn.skin=0<e?p_g:p_l},d_u.open=function(e){void 0===e&&(e=null);var p_l=Config.map[b_p.mapID];p_l&&p_l.cross?b_p.broadcastNotice((j_x("1327_711_836")+j_x("2391_814_799")+j_x("33_562_179")+j_x(93)+"")):UIM.open(d_u,["karma.atlas","palace.atlas","limitActivity.atlas","achievement.atlas"],null,!1)},d_u.prototype.updateItem=function(e,p_l,p_g){if(this.visible&&e==this.list){var b_s=p_l.getChildByName("desctxt");b_s.style.color="#d8dcec",b_s.style.fontSize=22,b_s.style.font="SimHei",b_s.style.wordWrap=!0,b_s.style.align="left",b_s.style.valign="center",b_s.style.leading=15;var d_u,b_e=p_l.dataSource,d_m=Config.activity_drawcard_rewards[b_e.rewards];if(!d_m)return;if(!(d_u=Config.CItem(d_m.rewardId)?Config.CItem(d_m.rewardId):Config.xianyuan_god[d_m.rewardId]))return;var d_w=Utils.ItemUtils.getQualityColor(d_u.quality);b_s.innerHTML=Utils.$(("{1}:"+j_x("531_1976_743")+":{2}"),b_e.name,Utils.setColor(Utils.$("{1}",d_u.name),d_w))}},d_u.prototype.onAdded=function(){this.featBtn.visible=!0,this.notDesc.visible=!1,this.list.vScrollBarSkin="",this.list.repeatY=50,this.list.scrollBar.elasticBackTime=500,this.list.scrollBar.elasticDistance=200,this._cardTab.on("tabSelect",this,this.onTabSelect),this.btnSkin(0),this.exemptimg.visible=!1,this.onecardImg.visible=!0,this.list.renderHandler=p_g.create(this,this.updateItem,[this.list],!1),this.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.CARD_RECORD_UPDATE,this,this.updateRecordList),LED.on(l_r.CARD_INFO_UPDATE,this,this.updateRecordList),LED.on(l_r.CARD_SCUCCESS_UPDATE,this,this.updateRecordList),DB.instance.query(c2m_drawcard_info,{actType:1}),DB.instance.query(c2m_drawcard_record,{type:1,isSelf:0}),this.cardTab.selectedIndex=0,DB.instance.query(c2w_activity_record,{type:ActivityTypeDefine.GS_drawcard})},d_u.prototype.updateActivenessExrItem=function(e,p_l){var p_g=e.dataSource,b_s=Config.activity_drawcard_scoreReward[p_g.id],d_u=e.getChildByName("countTxt"),b_e=(e.getChildByName("meetImg"),e.getChildByName("getBtn")),d_m=e.getChildByName("redPoint1"),d_w=e.getChildByName("numTxt"),f_t=e.getChildByName("receivdImg");d_u.text=b_s?b_s.score.toString():"0";var v_z=2==p_g.state;d_m.visible=v_z,e.gray=2!=p_g.state,f_t.visible=1==p_g.state,d_w.text="X"+p_g.getCtil.reward[0][1];var d_h=this.cardTab.selectedIndex;if(b_s&&b_s.reward){var r_t=Config.CItem(b_s.reward[0][0]);b_e.skin=Resource.ResUrl.getIconUrl(r_t.icon)}b_e.on(Laya.Event.CLICK,this,this.onExrCellClick,[p_g,d_h,e])},d_u.prototype.onExrCellClick=function(p_l,p_g,b_s,d_u){if(d_u.target&&p_l)if(b_s.getChildByName("redPoint1").visible)DB.instance.query(c2m_drawcard_get_score_reward,{confId:p_l.id}),Laya.timer.callLater(this,(function(e){DB.instance.query(c2m_drawcard_info,{actType:e+1})}),[p_g]);else{var b_e=Config.activity_drawcard_scoreReward[p_l.id];b_e&&b_e.reward&&(this._info||(this._info=new BagInfoVO),this._info.amount=b_e.reward[0][1],this._info.id=b_e.reward[0][0],e.ItemTipsPanel.open(this._info))}},d_u.prototype.tweenStop=function(e){Igu(e,laya)},d_u.prototype.onRemove=function(){Agt(this,Laya,LED,l_r)},d_u.prototype.onClick=function(p_l){var p_g=p_l.target,b_s=this.cardTab.selectedIndex<=0?266113:266114,b_e=100;switch(ActivityModel.instance.drawcardstatus&&(b_e=100*ActivityModel.instance.drawcardstatus.round),p_g.name){case"backBtn":case"closeBtn":d_u.close();break;case"singleCardBtn":var d_w=this.cardTab.selectedIndex;0<d_w&&(d_w=2);var f_t=[[b_s,1]];b_p.checkConsume([f_t[0]])||(j_x("1163_2345_2218")+j_x("2195_2235"))==this.countdownTxt.text?h_h.open(d_w):r_f.instance.isWindow(b_s);break;case"tenCardBtn":1<(d_w=this.cardTab.selectedIndex+1)&&(d_w=3),f_t=[[b_s,10]];var d_h=this.cardTab.selectedIndex<=0?Config.itemGet[266113].shopId2:Config.itemGet[266114].shopId2;if(b_p.checkConsume(f_t))h_h.open(d_w);else{var r_t=BagModel.instance.getItemCountByItemID(b_s,BagTypeDefine.BAG_TYPE_ITEM);0<r_t?r_f.instance.isWindows(b_s,0,10-r_t):r_f.instance.isWindows(b_s,d_h)}break;case"previewBtn":d_m.open(this.cardTab.selectedIndex);break;case"recordBtn":v_z.open(this.cardTab.selectedIndex+1);break;case"featBtn":if(0==this.cardTab.selectedIndex&&0==this.shopBtn.visible)return e.ShopAllPanel.open(ShopType.INTEGRAL),void d_u.close();var f_y=this.cardTab.selectedIndex<=0?Config.activity_drawcard_rewards[1].Adshow:Config.activity_drawcard_rewards[b_e+1].Adshow;t_n.open(f_y);break;case"helpBtn":t_i.open();break;case"shopBtn":e.ShopAllPanel.open(ShopType.INTEGRAL),d_u.close()}},d_u.prototype.createTweens=function(e,p_l,p_g,b_s){e.y=p_g,laya.utils.Tween.to(e,{j_l:p_l},b_s,Laya.Ease.linearIn,Laya.Handler.create(this,this.createTween,[e,p_l,p_g,b_s]))},d_u.prototype.setIcons=function(e,p_l,p_g,b_s,d_u){void 0===p_g&&(p_g=[0,0]),void 0===b_s&&(b_s=[0,0]),void 0===d_u&&(d_u=[0,0]),""!=p_l?(d_u&&e.pos(b_s[0]+d_u[0],b_s[1]+d_u[1]),e.visible=!0,(e=Resource.ResManager.Instance.getImg(p_l,e)).scale(p_g[0],p_g[1])):e.visible=!1},d_u.prototype.onTabSelect=function(e,p_l){-1!=e&&(this.btnSkin(e),1==e&&(DB.instance.query(c2m_drawcard_info,{actType:2}),DB.instance.query(c2m_drawcard_record,{type:2,isSelf:0})),1!=e&&(this.bgImg.skin="res/ui/karma/xianyuan_tu_0"+(e+1)+".jpg",DB.instance.query(c2m_drawcard_info,{actType:1}),DB.instance.query(c2m_drawcard_record,{type:1,isSelf:0})))},d_u.prototype.setIcon=function(e,p_l,p_g){void 0===p_g&&(p_g=[0,0]),""!=p_l?(e=Resource.ResManager.Instance.getImg(p_l,e)).scale(p_g[0],p_g[1]):e.visible=!1},d_u.prototype.onTimer=function(){var e=ActivityModel.instance.drawcardInfo,p_l=SyncTime.serverTime/1e3,p_g=e.lastDrawTime,b_s=Config.global[1100].i_info;if(1==this.cardTab.selectedIndex&&(p_g=e.lastActDrawTime,b_s=Config.global[1101].i_info),0<p_g+b_s-p_l){if(0<p_g){if(this.countdownTxt.visible=!0,p_g<=0)return void Laya.timer.clear(this,this.onTimer);this.countdownTxt.text=Utils.formatTimeStr(p_g+b_s-p_l),this.exemptimg.visible=!1,this.onecardImg.visible=!0}}else this.countdownTxt.text=(j_x("1163_2345_2218")+j_x("2195_2235")),this.singleHbox.visible=!1,this.redPoint_3.visible=!0,this.exemptimg.visible=!0,this.onecardImg.visible=!1,Laya.timer.clear(this,this.onTimer)},d_u.prototype.createTween=function(e,p_l,p_g,b_s){e.visible=!0,e.y=p_l,laya.utils.Tween.to(e,{j_l:p_g},b_s,Laya.Ease.linearIn,Laya.Handler.create(this,this.createTweens,[e,p_l,p_g,b_s]))},d_u.prototype.updateRecordList=function(){this.notDesc.visible=!1;var e=this.cardTab.selectedIndex,p_l=ActivityModel.instance.drawcardRecord,p_g=ActivityModel.instance.drawcardInfo;if(p_g){var b_s=p_g.curScore;b_s=b_s||0,this.activenessBar.value=b_s/GodStagePointMax.MAX,this.activenessCountTxt.text=b_s.toString(),this.activenessProList.array=BlackKingModel.instance.godStageReward(e+1);var d_u=[],b_e=10==p_g.drawTimes?0:p_g.drawTimes,d_m=10==p_g.actDrawTiems?0:p_g.actDrawTiems;this.godQuity.skin=e<=0?"res/ui/karma/xyActTxt_zi.png":"res/ui/karma/xyActTxt_cheng.png";var d_w=e<=0?10-b_e:10-d_m;this.descicon.x=10<=d_w?153:163,b_p.getNumSp(NumType.FIGHTING,d_w,this.descicon,-15);var f_t=100;if(ActivityModel.instance.drawcardstatus&&(f_t=100*ActivityModel.instance.drawcardstatus.round),1==e){var v_z=Config.activity_drawcard_rewards[f_t+1];if(!v_z)return;v_z.actBg&&(Resource.ResUrl.getIconUrl(v_z.actBg),this.bgImg.skin="res/ui/"+v_z.actBg+".jpg")}this.activityDate.visible=0<e,this.activitydatetxt.visible=0<e;var d_h=SyncTime.serverTime/1e3,r_t=ActivityModel.instance.drawcardInfo,t_n=e<=0?266113:266114;if(this.tenConsumeTxt.text=BagModel.instance.getItemCountByItemID(t_n)+"/10",this.singleConsumeTxt.text=BagModel.instance.getItemCountByItemID(t_n)+"/1",this.redPoint_3.visible=!(BagModel.instance.getItemCountByItemID(t_n)<10),this.redPoint_4.visible=!(BagModel.instance.getItemCountByItemID(t_n)<1),this.redPoint_0.visible=!(BagModel.instance.getItemCountByItemID(266113)<1),this.redPoint_1.visible=!(BagModel.instance.getItemCountByItemID(266114)<1),this.money1.skin="res/ui/karma/"+(e+14).toString()+".png",this.money2.skin="res/ui/karma/"+(e+14).toString()+".png",this.item1.visible=!1,r_t){var f_y=SyncTime.serverTime/1e3,p_q=r_t.lastDrawTime,h_h=r_t.lastActDrawTime,n_j=Config.global[1100].i_info,j_l=Config.global[1101].i_info;p_q+n_j-f_y<=0&&(this.redPoint_0.visible=!0),h_h+j_l-f_y<=0&&(this.redPoint_1.visible=!0)}if((j_x("1163_2345_2218")+j_x("2195_2235"))==this.countdownTxt.text&&(this.singleHbox.visible=!1),(j_x("1163_2345_2218")+j_x("2195_2235"))!=this.countdownTxt.text&&(this.singleHbox.visible=!0),0<r_t.openTime&&(this.activitydatetxt.text="",d_h>r_t.openTime&&(this.item1.visible=!0,this.activitydatetxt.text=Utils.formatTimeStr4(r_t.openTime,!1)+"-"+Utils.formatTimeStr4(r_t.endTime,!1))),this.list.array=[],p_l&&p_l.list&&0<p_l.list.length){for(var l_m=p_l.list.length-1;0<=l_m;l_m--)for(var z_m in p_l.list[l_m].rewards){var h_b=new drawcardRecord;h_b.name=p_l.list[l_m].name,h_b.rewards=p_l.list[l_m].rewards[z_m],d_u.push(h_b)}if(1==p_l.isSelf||p_l.type!=e+1)return;d_u&&(this.list.array=d_u,this.list.array.length<=0&&(this.notDesc.visible=!0))}r_t&&(this.onTimer(),(j_x("1163_2345_2218")+j_x("2195_2235"))==this.countdownTxt.text&&(this.singleHbox.visible=!1),(j_x("1163_2345_2218")+j_x("2195_2235"))!=this.countdownTxt.text&&(this.singleHbox.visible=!0),Laya.timer.clear(this,this.onTimer),Laya.timer.loop(1e3,this,this.onTimer))}},d_u.close=function(){var e=100;ActivityModel.instance.drawcardstatus&&(e=100*ActivityModel.instance.drawcardstatus.round);var p_l=Config.activity_drawcard_rewards[e+1];if(p_l){var p_g=Resource.ResUrl.getIconUrl(p_l.actBg);UIM.close(d_u,!1,["res/ui/karma/xianyuan_tu_01.jpg","res/ui/karma/xianyuan_tu_02.jpg",p_g])}},d_u);function d_u(){var e=p_l.call(this)||this;return e.init(),e}e.BlackKingCardPanel=b_s;var b_e,d_m=(b_e=ui.window.blackking.card_rewardUI,__extends(d_w,b_e),d_w.prototype.init=function(){Ccu(this,Laya)},d_w.prototype.compareFun=function(e,p_l){return e.isShow===p_l.isShow?p_l.quality===e.quality?e.id-p_l.id:p_l.quality-e.quality:p_l.isShow-e.isShow},d_w.prototype.updateItem=function(e,p_l,p_g){if(this.visible&&(e==this.list||e==this.list2)){var b_s=0,d_u=p_l.dataSource,b_e=Config.CItem(d_u.id);b_e&&(b_s=b_e.id),b_e||(b_s=Config.xianyuan_god[d_u.id].cardConsume[0][0]),p_l.isShowName=!1,p_l.isShowTick=!1;var d_m=new ModuleItemVO;p_l.isShowQuaEft=!1,d_m.id=b_s,d_m.amount=0,p_l.setItemData(d_m)}},d_w.prototype.onClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":d_w.close()}},d_w.prototype.onAdded=function(){Qyk(this,e,p_g,Laya)},d_w.prototype.updateList=function(){var e=Config.activity_drawcard_rewards,p_l=[],p_g=[],b_s=100*(this.dataSource.index+1),d_u=100*this.dataSource.index;if(ActivityModel.instance.drawcardstatus&&0<this.dataSource.index&&(b_s=100*(ActivityModel.instance.drawcardstatus.round+1),d_u=100*ActivityModel.instance.drawcardstatus.round),e)for(var b_e in e)if(e[b_e].id<b_s&&e[b_e].id>d_u&&e[b_e]){if(2==e[b_e].isShow||3==e[b_e].isShow){var d_m=d_w(b_e);p_l.push(d_m)}1==e[b_e].isShow&&(d_m=d_w(b_e),p_g.push(d_m))}function d_w(p_l){if(p_l){var p_g=void 0;p_g=new BlackKingcardVo;var b_s=0,d_u=Config.CItem(e[p_l].rewardId);return d_u&&(b_s=d_u.id),d_u||(b_s=Config.xianyuan_god[e[p_l].rewardId].cardConsume[0][0],d_u=Config.xianyuan_god[e[p_l].rewardId]),p_g.id=b_s,p_g.isShow=e[p_l].isShow,Config.CItem(e[p_l].rewardId)||Config.xianyuan_god[e[p_l].rewardId]?(p_g.quality=d_u.quality,p_g):null}}var f_t=p_l.length%6,v_z=p_l.length/6,d_h=parseInt(v_z.toString());0<f_t&&(d_h+=1);var r_t=p_g.length%6,t_n=p_g.length/6,f_y=parseInt(t_n.toString());0<r_t&&(f_y+=1),8<=d_h+f_y&&(4<d_h&&(d_h=4,this.list.vScrollBarSkin="",this.list.scrollBar.elasticBackTime=500,this.list.scrollBar.elasticDistance=200),4<f_y&&(f_y=4,this.list2.vScrollBarSkin="",this.list2.scrollBar.elasticBackTime=500,this.list2.scrollBar.elasticDistance=200)),this.box2.y=489+103*(d_h-3),p_l=p_l.sort(this.compareFun),p_g=p_g.sort(this.compareFun),this.list.height=308+103*(d_h-3),this.list2.height=308+103*(f_y-3),this.list.array=p_l,this.list2.array=p_g},d_w.open=function(e){UIM.open(d_w,["karma.atlas"],{index:e},!1,!1,!0,!0)},d_w.prototype.onRemove=function(){Srw(this,Laya)},d_w.close=function(){Apd(UIM,d_w)},d_w);function d_w(){var e=b_e.call(this)||this;return e.init(),e}e.CardRewardPanel=d_m;var f_t,v_z=(f_t=ui.window.blackking.card_rewardrecordUI,__extends(d_h,f_t),d_h.prototype.init=function(){Kia(this,Laya)},d_h.prototype.updateItem=function(e,p_l,p_g){if(this.visible&&e==this.list){var b_s=p_l.getChildByName("desctxt");b_s.style.color="#4a728e",b_s.style.fontSize=24,b_s.style.font="SimHei",b_s.style.wordWrap=!0,b_s.style.align="left",b_s.style.valign="center",b_s.style.leading=15;var d_u,b_e=p_l.dataSource,d_m=Config.activity_drawcard_rewards[b_e.rewards];if(!d_m)return;var d_w=d_m.rewardId;Config.CItem(d_w)&&(d_u=Config.CItem(d_w).name),Config.xianyuan_god[d_w]&&(d_u=Config.xianyuan_god[d_w].name),b_s.innerHTML=Utils.$(("{1}:  "+j_x("531_1976_743")+":{2}"),this.formatTimeStr4(b_e.time,!1),Utils.setColor(Utils.$("{1}",d_u),"#ba16dd"))}},d_h.prototype.updateVo=function(){var e=ActivityModel.instance.drawcardRecord,p_l=0;if(e&&e.list){if(1!=e.isSelf)return;for(var p_g=0;p_g<e.list.length;p_g++)if(e.list[p_g].rewards)for(var b_s in e.list[p_g].rewards)e.list[p_g].rewards[b_s]&&p_l++;var d_u=p_l%10,b_e=parseInt((p_l/10).toString());0<d_u&&(b_e+=1),this.useNumTxt.text=Utils.$("{1}/{2}",1,b_e)}this.updateList()},d_h.prototype.updateList=function(e){void 0===e&&(e=1);var p_l=ActivityModel.instance.drawcardRecord;if(p_l){if(1!=p_l.isSelf)return;this.list.array=this.setCardInfo(e),0<this.list.array.length&&(this.notDesc.visible=!1)}},d_h.prototype.onRemove=function(){Yzf(LED,l_r,this,Laya)},d_h.open=function(e){UIM.open(d_h,["karma.atlas"],{num:e},!1,!1,!0,!0)},d_h.prototype.formatTimeStr4=function(e,p_l){if(void 0===p_l&&(p_l=!0),0==e)return"";var p_g=new Date;return p_g.setTime(1e3*e),((p_l?p_g.getFullYear()+(j_x(643)):"")+(p_g.getMonth()+1)+(j_x(693))+p_g.getDate()+(j_x(1254))+p_g.getHours()+("  "+j_x(1702))+p_g.getMinutes()+(j_x(2224))).replace(/\b(\d)\b/g,"0$1")},d_h.prototype.onClick=function(e){var p_l=e.target,p_g=parseInt(this.useNumTxt.text);switch(p_l.name){case"backBtn":case"closeBtn":d_h.close();case"cutBtn":p_g-=1;break;case"addBtn":p_g+=1}p_g=p_g<1?1:p_g;var b_s=ActivityModel.instance.drawcardRecord,d_u=0;if(b_s&&b_s.list){if(1!=b_s.isSelf)return;for(var b_e=0;b_e<b_s.list.length;b_e++)if(b_s.list[b_e].rewards)for(var d_m in b_s.list[b_e].rewards)b_s.list[b_e].rewards[d_m]&&d_u++;var d_w=d_u%10,f_t=parseInt((d_u/10).toString());0<d_w&&(f_t+=1),p_g=f_t<p_g?f_t:p_g,this.useNumTxt.text=Utils.$("{1}/{2}",p_g,f_t),this.updateList(p_g)}},d_h.prototype.setCardInfo=function(e){var p_l=ActivityModel.instance.drawcardRecord,p_g=[],b_s=0;if(p_l&&p_l.list){if(1!=p_l.isSelf)return;for(var d_u=p_l.list.length-1;0<=d_u;d_u--){if(!p_l.list[d_u])return p_g;for(var b_e in p_l.list[d_u].rewards)if(10*e-10<=++b_s){if(!p_l.list[d_u])return p_g;if(10<=p_g.length)return p_g;var d_m=new drawcardRecord;d_m.name=p_l.list[d_u].name,d_m.rewards=p_l.list[d_u].rewards[b_e],d_m.time=p_l.list[d_u].time,p_g.push(d_m)}}}return p_g},d_h.prototype.onAdded=function(){this.notDesc.visible=!0,this.list.repeatY=10,this.list.renderHandler=p_g.create(this,this.updateItem,[this.list],!1),this.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.CARD_RECORD_UPDATE,this,this.updateVo),DB.instance.query(c2m_drawcard_record,{type:this.dataSource.num,isSelf:1}),this.useNumTxt.text=Utils.$("{1}/{2}",1,1)},d_h.close=function(){Yxw(UIM,d_h)},d_h);function d_h(){var e=f_t.call(this)||this;return e.init(),e}e.CardRewardRecordPanel=v_z;var r_t,t_n=(r_t=ui.window.blackking.blackking_detailsUI,__extends(f_y,r_t),f_y.prototype.onAdd=function(e){var p_l=Config.xianyuan_god[this.dataSource];if(p_l){this.nameTxt.text=p_l.name;var b_s=CharacterProperty.getPropertys(p_l.prop_show);b_p.calPropFight(b_s),this.list.selectEnable=!0,this.list.repeatX=2,this.list.renderHandler=p_g.create(this,this.updateItem,[this.list],!1);var d_u=Resource.ResUrl.getIconUrl(p_l.pic);this.list.array=p_l.prop_show,this.setIcon(this.iconSp,d_u,[1,1]),this.addition.style.color="#4a728e",this.addition.style.fontSize=22,this.addition.style.font="SimHei",this.addition.style.wordWrap=!0,this.addition.style.align="left",this.addition.style.valign="center",this.addition.style.leading=0,this.addition.innerHTML=p_l.words3,this.on(Laya.Event.CLICK,this,this.onClick)}else f_y.close()},f_y.prototype.onRemove=function(e){Sgd(e,this,Laya)},f_y.prototype.onClick=function(e){Wrz(e,f_y)},f_y.open=function(e){Mss(e,UIM,f_y)},f_y.prototype.setIcon=function(e,p_l,p_g){void 0===p_g&&(p_g=[0,0]),""!=p_l?(e.visible=!0,(e=Resource.ResManager.Instance.getImg(p_l,e)).scale(p_g[0],p_g[1])):e.visible=!1},f_y.prototype.updateItem=function(e,p_l,p_g){if(e==this.list){var b_s=d_v.getPropertyTypeByName(p_l.dataSource[0]),d_u=p_l.getChildByName("descTxt"),b_e=p_l.getChildByName("valueTxt");d_u.text=d_v.getDesc(b_s.ordinal),b_e.text=p_l.dataSource[1].toString(),b_s.isPercent()?b_e.text=Utils.$("{1}%",p_l.dataSource[1]/100):b_e.text=Utils.$("{1}",p_l.dataSource[1])}},f_y.close=function(){Elr(UIM,f_y)},f_y);function f_y(){var e=r_t.call(this)||this;return e.on(Laya.Event.REMOVED,e,e.onRemove),e.on(Laya.Event.ADDED,e,e.onAdd),e}e.BlackKingDetailsPanel=t_n;var p_q,h_h=(p_q=ui.window.blackking.card_effectUI,__extends(n_j,p_q),n_j.prototype.init=function(){Qqe(this,Laya)},n_j.prototype.onAdded=function(){this.bgiconImg.visible=!0,this.bgboxebgimg.visible=!0,this.boxicon.visible=!1;var e=1;function p_l(e){DB.instance.query(c2m_drawcard_record,{type:e,isSelf:0}),DB.instance.query(c2m_drawcard_info,{actType:e})}1!=this.dataSource&&3!=this.dataSource||(3==this.dataSource&&(e=2),DB.instance.query(c2m_drawcard_req,{type:e,times:10}),Laya.timer.callLater(this,p_l,[e])),0!=this.dataSource&&2!=this.dataSource||(2==this.dataSource&&(e=2),DB.instance.query(c2m_drawcard_req,{type:e,times:1}),Laya.timer.callLater(this,p_l,[e])),LED.on(l_r.CARD_SCUCCESS_UPDATE,this,this.addEffect)},n_j.prototype.initBgimg=function(e,p_l){void 0===e&&(e=null),void 0===p_l&&(p_l=0),e&&(e.visible=!0),this._successVo=[];var p_g=new ModuleItemVO;if(e&&e._childs&&0<e._childs.length&&0==p_l)for(var b_s=0;b_s<e.numChildren;b_s++){var d_u=this.box.getChildAt(b_s).getChildByName("box"),b_e=this.box.getChildAt(b_s).getChildByName("boxicon"),d_m=this.box.getChildAt(b_s).getChildByName("bgimg");if(d_m.skin=this.dataSource<=1?"res/ui/karma/xyBlueCard_1.png":"res/ui/karma/xyYellowCard_1.png",d_u){if(this.box.getChildAt(b_s).getChildByName("bgimg").visible=!0,!(n_j=ActivityModel.instance.drawcardSuccess))return;if(n_j.rewards&&b_s<n_j.rewards.length){if(!(j_l=Config.activity_drawcard_rewards[n_j.rewards[b_s]]))return;var d_w=j_l.rewardId,f_t=Config.xianyuan_god[d_w];if(f_t){d_m.skin=this.dataSource<=1?"res/ui/karma/xyBlueCard_0.png":"res/ui/karma/xyYellowCard_0.png",this._successVo.push(d_w);var v_z=d_u.getChildByName("bgQuaClipc"),d_h=d_u.getChildByName("bgQuaClip"),r_t=d_u.getChildByName("panel"),t_n=r_t.getChildByName("icon"),f_y=r_t.getChildByName("nameicon");d_h.index=f_t.quality-4,v_z.index=f_t.quality-4;var p_q=Resource.ResUrl.getIconUrl(f_t.pic),h_h=Resource.ResUrl.getIconUrl(f_t.art_name);this.setIcon(t_n,p_q,[1,1]),h_h&&this.setIcon(f_y,h_h,[1,1])}else p_g.id=j_l.rewardId,p_g.bind=j_l.rewardNum,p_g.amount=j_l.rewardNum,b_e.setItemData(p_g,ItemBoxDefine.MODULE_ITEM,!0),b_e.nameTxt.color="#e48f49"}}}if(0<p_l){var n_j;if(!(n_j=ActivityModel.instance.drawcardSuccess))return;if(this.box&&this.box._childs&&0<this.box._childs.length)for(b_s=0;b_s<n_j.rewards.length;b_s++)if(n_j.rewards){this.ani1.resetToInitState(),this.ani2.resetToInitState(),this.ani3.resetToInitState(),this.ani4.resetToInitState(),this.ani1.stop(),this.ani2.stop(),this.ani3.stop(),this.ani4.stop();var j_l=Config.activity_drawcard_rewards[n_j.rewards[b_s]];Config.xianyuan_god[j_l.rewardId]?this.onEffectStop(j_l.rewardId,1,Config.xianyuan_god[j_l.rewardId].pic):this.onEffectStop(j_l.rewardId,1,"")}this.onCardEffectTip()}},n_j.prototype.onCardBgOver=function(){Yre(this,Laya)},n_j.prototype.setIcon=function(e,p_l,p_g){void 0===p_g&&(p_g=[0,0]),""!=p_l?(e.visible=!0,(e=Resource.ResManager.Instance.getImg(p_l,e)).scale(p_g[0],p_g[1])):e.visible=!1},n_j.prototype.onHideBoard=function(){this.ani1.removeLabel("111");var e=ActivityModel.instance.drawcardSuccess;if(e){if(e.rewards=ActivityModel.instance.drawcardSuccess.rewards,this.box&&this.box._childs&&0<this.box._childs.length)for(var p_l=0;p_l<this.box.numChildren;p_l++){var p_g=this.box.getChildAt(p_l).getChildByName("box");if(p_g){var b_s=this.box.getChildAt(p_l).getChildByName("bgimg"),d_u=this.box.getChildAt(p_l).getChildByName("effecticon"),b_e=this.box.getChildAt(p_l).getChildByName("effecticon2"),d_m=(this.box.getChildAt(p_l).getChildByName("boxicon"),this.box.getChildAt(p_l).getChildByName("clip"));d_m.autoPlay=!1;var d_w=Config.activity_drawcard_rewards[e.rewards[p_l]];if(!d_w)return;if(e.rewards)if(Config.xianyuan_god[d_w.rewardId]){p_g.visible=!0,d_u.visible=!0;var f_t=this.dataSource<=1?"shan_blue":"shan_gold";Resource.ResManager.Instance.freePanelEffectVo.playEffect(d_u,f_t,EffectType.BLACKKING,!1,66,!0,0),Laya.timer.once(1300,this,this.onGodEffect,[b_s,b_e],!1)}else p_g.visible=!1,d_u.visible=!1,b_s.visible=!1,this.playEffect(d_m),Laya.timer.once(1e3,this,this.onEffectStop,[d_w.rewardId,1],!1)}}Laya.timer.once(2e3,this,this.onAddCardBg)}},n_j.prototype.playEffect=function(e){e&&(e.visible=!0,e.play(!1),e.on(Laya.Event.COMPLETE,this,this.stopEffect,[e]))},n_j.prototype.addEffect=function(){this.boxicon.visible=!1,1==this.dataSource||3==this.dataSource?(this.bgboxebgimg.visible=!1,this.box.visible=!0,this.ani1.addLabel("111",30),this.ani1.play(1,!1),this.ani1.on(Laya.Event.LABEL,this,this.onHideBoard),Laya.timer.once(7e3,this,this.onCardEffectTip),Laya.timer.once(6500,this,this.onAnmition),this.initBgimg(this.box)):0!=this.dataSource&&2!=this.dataSource||(this.box.visible=!1,this.bgbox.visible=!1,this.bgboxebgimg.visible=!0,this.bgiconImg.visible=!1,this.bgboxebgimg.skin=this.dataSource<=1?"res/ui/karma/xyBlueCard_0.png":"res/ui/karma/xyYellowCard_0.png",this.ani3.addLabel("111",10),this.ani3.play(1,!1),this.ani3.on(Laya.Event.LABEL,this,this.initBgbox,[this.bgbox]),Laya.timer.once(3e3,this,this.onCardEffectTip),Laya.timer.once(1500,this,this.onAnmition),this.bgboxeffecticon.visible=!1),Laya.timer.once(500,this,this.onpanelClose)},n_j.prototype.onGodEffect=function(e,p_l){void 0===e&&(e=null),this.bgbox.visible&&(this.bgbox.visible=!1),e&&(e.visible=!1);var p_g=this.dataSource<=1?"disappear_card_blue":"disappear_card_gold";Resource.ResManager.Instance.freePanelEffectVo.playEffect(p_l,p_g,EffectType.BLACKKING,!1,66,!0,0)},n_j.prototype.onAddCardBg=function(){if(this._successVo&&0<this._successVo.length){var e=Config.xianyuan_god[this._successVo[0]],p_l=Resource.ResUrl.getIconUrl(e.pic);this.setIcon(this.bgiconImg,p_l,[2,2])}this.ani2.addLabel("111",10),this.box.visible=!1,this.ani2.play(0,!1),this.ani2.on(Laya.Event.LABEL,this,this.onCardBgOver);var p_g=this._successVo;if(p_g)for(var b_s in p_g){var d_u=Config.xianyuan_god[p_g[b_s]];d_u&&BlackKingModel.instance.nameActived(d_u.name)&&b_p.broadcastNotice(Utils.$(("{1}"+j_x("1300_2333_1896")+","+j_x("122_803")+"{2}"+j_x("1612_1422")+"*{3}"),d_u.name,d_u.name,d_u.activeConsume[0][1]),1,Config.color[202].color)}else n_j.close()},n_j.prototype.initBgbox=function(e){if(e.visible=!0,this.boxicon.visible=!1,e){this.bgboxebgimg.skin=this.dataSource<=1?"res/ui/karma/xyBlueCard_0.png":"res/ui/karma/xyYellowCard_0.png";var p_l=ActivityModel.instance.drawcardSuccess;if(!p_l)return;var p_g=Config.activity_drawcard_rewards[p_l.rewards[0]];if(!p_g)return;var b_s=Config.xianyuan_god[p_g.rewardId],d_u=Resource.ResManager.Instance.freePanelEffectVo;if(b_s){this.bgboxebgimg.skin=this.dataSource<=1?"res/ui/karma/xyBlueCard_1.png":"res/ui/karma/xyYellowCard_1.png";var b_e=Resource.ResUrl.getIconUrl(b_s.pic);Resource.ResUrl.getIconUrl(b_s.art_name),this.setIcon(this.bgiconImg,b_e,[2,2]);var d_m=this.dataSource;return this.boxicon.visible=!1,d_m=this.dataSource<=1?"disappear_card_blue":"disappear_card_gold",d_u.playEffect(this.bgboxeffecticon2,d_m,EffectType.BLACKKING,!1,66,!0,0),void this.timer.once(700,this,this.onEffectStop,[p_g.rewardId,1],!1)}e.visible=!1,this.boxicon.visible=!0;var d_w=new ModuleItemVO;d_w.id=p_g.rewardId,d_w.bind=p_g.rewardNum,d_w.amount=p_g.rewardNum,this.boxicon.setItemData(d_w,ItemBoxDefine.MODULE_ITEM,!0),this.boxicon.nameTxt.color="#e48f49";var f_t=this.dataSource<=1?"disappear_card_blue":"disappear_card_gold";this._effectVos.push(d_u),d_u.playEffect(this.bgboxeffecticon2,f_t,EffectType.BLACKKING,!1,66,!0,0,this.onEffectStop.bind(this,d_w.id,1))}},n_j.prototype.onpanelClose=function(){Qjm(this,Laya)},n_j.prototype.stopEffect=function(e){e&&(e.off(Laya.Event.COMPLETE,this,this.stopEffect),e.visible=!1,e.stop())},n_j.prototype.onRemoved=function(){Mko(Laya,this,LED,l_r)},n_j.prototype.onAnmition=function(){Wiy(this)},n_j.prototype.onEffectStop=function(e,p_l,p_g){void 0===p_g&&(p_g=""),Laya.timer.clear(this,this.onEffectStop);var b_s=new Laya.Point;(b_s=this.boxicon.localToGlobal(b_s)).x=b_s.x-22,b_s.y=b_s.y-40;var d_u,b_e=UIM.instance.getMainLetUI().bagbtn,d_m=new Laya.Point,d_w=Config.CItem(e);!d_w&&""==p_g||(d_w&&(d_u=d_w.icon),""!=p_g&&(d_u=p_g),d_m=b_e.localToGlobal(d_m),r_n.instance.flyToBagEffectSkew(d_u,b_s,d_m,[0,0],p_l,null))},n_j.prototype.onEffectClean=function(){Eez(this)},n_j.open=function(e){Cas(e,UIM,n_j)},n_j.prototype.onCardEffectTip=function(){Miy(n_j)},n_j.prototype.onAddCard=function(){if(this._successVo){if(this.num++,this.num>this._successVo.length-1){var e=Config.xianyuan_god[this._successVo[this._successVo.length-1]];if(!e)return this.ani2.stop(),void Laya.timer.clear(this,this.onAddCard);var p_l=e,p_g=new Laya.Point;(p_g=this.bgbox.localToGlobal(p_g)).x=p_g.x-22,p_g.y=p_g.y-40;var b_s=UIM.instance.getMainLetUI().bagbtn,d_u=new Laya.Point;d_u=b_s.localToGlobal(d_u);var b_e=p_l.pic;return r_n.instance.flyToBagEffectSkew(b_e,p_g,d_u,[0,0],.5,null),void Laya.timer.clear(this,this.onAddCard)}var d_m=Config.xianyuan_god[this._successVo[this.num]],d_w=d_m;if(!d_m)return;this.bgbox.visible=!1;var f_t=Resource.ResUrl.getIconUrl(d_w.pic);this.setIcon(this.bgiconImg,f_t,[2,2])}},n_j.close=function(){Kxo(Laya,this,n_j,UIM,l_m)},n_j);function n_j(){var e=p_q.call(this)||this;return e.num=0,e.init(),e}e.CardEffectPanel=h_h;var j_l,l_m=(j_l=ui.window.blackking.blackking_cardtipUI,__extends(z_m,j_l),z_m.prototype.onAdded=function(){this.on(Laya.Event.CLICK,this,this.onClick);var p_l=ActivityModel.instance.drawcardSuccess;p_l&&(p_l.rewards=ActivityModel.instance.drawcardSuccess.rewards,this.list.selectEnable=!0,this.list.itemRender=e.ItemBox,this.list.renderHandler=p_g.create(this,this.updateItem,[this.list],!1),this.list.array=p_l.rewards)},z_m.prototype.onRemoved=function(){Cpp(this,Laya)},z_m.open=function(){Qij(UIM,z_m)},z_m.prototype.onClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":z_m.close()}},z_m.prototype.updateItem=function(e,p_l,p_g){p_l.isShowName=!1;var b_s=Config.activity_drawcard_rewards[p_l.dataSource];if(b_s){var d_u=BlackKingModel.instance.getDrawCardVoByRewardId(p_l.dataSource),b_e=new ModuleItemVO;b_e.amount=b_s.rewardNum,b_e.id=d_u.id,p_l.setItemData(b_e,ItemBoxDefine.MODULE_ITEM,!0),p_l.nameTxt.visible=!1}},z_m.close=function(){Kfe(UIM,z_m)},z_m);function z_m(){var e=j_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.BlackkingCardTipPanel=l_m;var h_b,t_i=(h_b=ui.window.blackking.card_descUI,__extends(n_f,h_b),n_f.prototype.onAdded=function(){Mtx(this,Laya)},n_f.prototype.onClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":n_f.close()}},n_f.open=function(){Iwc(UIM,n_f)},n_f.prototype.onRemoved=function(){Wxs(this,Laya)},n_f.close=function(){Wmy(UIM,n_f)},n_f);function n_f(){var e=h_b.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.BlackKingCardHelpPanel=t_i}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.blackking.blackking_cellpanelUI,__extends(d_u,p_l),d_u.prototype.init=function(){Uwt(this,Laya)},d_u.prototype.InitModleList=function(){var e=this.dataSource;this.red_godSuit.visible=BlackKingModel.instance.godIDSuitActivite(e.id),this.modelList.array=BlackKingModel.instance.getThreeDataByCenterId(e.id);var p_l=this.modelList.array.length,p_g=BlackKingModel.instance.blackkingDates();if(p_g&&p_g.length<2?this.modelList.mouseEnabled=!1:this.modelList.mouseEnabled=!0,3<=p_l)this.modelList.scrollTo(Math.floor(p_l/2));else if(0<p_l){if(this.modelList.array)for(var b_s in this.modelList.array)this.modelList.array[b_s].id==e.id&&this.modelList.scrollTo(parseInt(b_s))}else this.modelList.visible=!1},d_u.prototype.onAdded=function(){War(this,Laya,p_g,LED,l_r)},d_u.prototype.setIcon=function(e,p_l,p_g){void 0===p_g&&(p_g=[0,0]),""!=p_l?(e.visible=!0,e=Resource.ResManager.Instance.getImg(p_l,e),0<p_g[0]&&e.pos(p_g[0],p_g[1])):e.visible=!1},d_u.prototype.sureToOpen=function(e,p_l){if(BlackKingModel.instance.getBlackKingById(e[0][0][0].id),p_l=e[0][0][1]){if(!b_p.checkCoin(1,Config.xianyuan_coach[p_l].gold))return void b_p.broadcastNotice((j_x("1263_869_2462")+j_x(1779)));d_m.open(e[0][0][0],1)}},d_u.prototype.updateGodmove=function(e){if(e.target,1==this.godIsdown&&this.modelList.visible){var p_l=this.dataSource,p_g=this.godPosition,b_s=0;if(this.stage.mouseX-p_g<=-10){var d_u=this.modelList.selectedIndex-1;if(2==this.modelList.length&&this.modelList.array[1].id==p_l.id&&d_u<=0)return;this.modelList.scrollTo(this.modelList.selectedIndex-1),b_s=1}else if(10<=this.stage.mouseX-p_g){if(b_s=2,d_u=this.modelList.selectedIndex+1,2==this.modelList.length&&this.modelList.array[0].id==p_l.id&&d_u>=this.modelList.length)return;this.modelList.scrollTo(d_u)}this.preview(b_s),this.godPosition=0,this.godIsdown=!1}},d_u.prototype.updateModleList=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("icon"),d_u=e.getChildByName("nameicon"),b_e=Config.xianyuan_god[p_g.id],d_m=Resource.ResUrl.getIconUrl(b_e.pic),d_w=Resource.ResUrl.getIconUrl(b_e.art_name);d_w&&this.setIcon(d_u,d_w),b_s&&this.setIcon(b_s,d_m)},d_u.close=function(){Cms(UIM,d_u)},d_u.prototype.updatePvSkillItem=function(){var e=Config.xianyuan_god[this.dataSource.id];if(e.skill){var p_l=new x_h(e.id,e.name,this.dataSource.lv,this.dataSource.star,PassiveSkillType.GOD);this.pvSkillItem.visible=!0,this.pvSkillItem.updateSkillUI(e.skill[0],PassiveSkillType.GOD,p_l,!0)}else this.pvSkillItem.visible=!1},d_u.prototype.onRemove=function(){if(this.off(Laya.Event.CLICK,this,this.onClick),this.modelList.off(Laya.Event.MOUSE_UP,this,this.updateGodmove),this.modelList.off(Laya.Event.MOUSE_DOWN,this,this.updateGoddown),this.modelList.off(Laya.Event.MOUSE_OUT,this,this.updateGodmove),LED.off(l_r.BLACK_COACHTIME_UPDATE,this,this.updateInfo),LED.off(l_r.BLACK_GODSTAR_UPDATE,this,this.updateInfo),this.JumpTalisman.off(Laya.Event.LINK,this,this.clickHtml),LED.off(l_r.SKILL_INFO_UPDATE,this,this.updateInfo),this.blackkingStatusBtn.off(Laya.Event.CLICK,this,this.onBlackkingStatusClick),this.modelList.numChildren)for(var e=0;e<this.modelList.numChildren;e++){var p_l=this.getChildAt(e).getChildByName("icon");if(p_l&&p_l.texture){var p_g=p_l.texture.url;p_l.graphics.clear(),p_l.texture=null,p_g&&Laya.loader.clearTextureRes(p_g)}}},d_u.prototype.preview=function(e){if(0!=e){var p_l=BlackKingModel.instance.blackkingDates(),p_g=this.dataSource;for(var b_s in p_l)if(p_g.id==p_l[b_s].id){var d_u=BlackKingModel.instance.Actived(p_g.id),b_e=parseInt(b_s);2==e?--b_e<0&&(b_e=p_l.length-1):1==e&&++b_e>=p_l.length&&(b_e=0);var d_m=p_l[b_e.toString()];if(d_m.id==this.dataSource.id)return;if(d_u){if(p_g.id==p_l[p_l.length-1].id&&1==e)return void((d_u=BlackKingModel.instance.Actived(p_l[0].id))&&(this.dataSource=p_l[0],LED.event(l_r.BLACK_COACHTIME_UPDATE,p_l[0])));if(p_g.id==p_l[0].id&&2==e)return void((d_u=BlackKingModel.instance.Actived(p_l[p_l.length-1].id))&&(this.dataSource=p_l[p_l.length-1],LED.event(l_r.BLACK_COACHTIME_UPDATE,p_l[p_l.length-1])));if(d_m)return void((d_u=BlackKingModel.instance.Actived(d_m.id))&&(this.dataSource=d_m,LED.event(l_r.BLACK_COACHTIME_UPDATE,d_m)))}}}},d_u.prototype.updateBackkingStatus=function(){var e=this.dataSource;if(this.blackkingStatusRed.visible=BlackKingModel.instance.redXianWei(e),0!=e.seatLv&&0!=e.seatStar){var p_l=100*e.id+e.seatStar,p_g=Config.xianyuan_xianweiStar[p_l];Config.xianyuan_xianweiLevel[100*p_l+e.seatLv],this.seatName2.text=p_g.name}else this.seatName2.text=(j_x("1163_1245_845"));this.updateSeatStarByLv(e.seatLv)},d_u.open=function(e){void 0===e&&(e=null),UIM.open(d_u,["karma.atlas","karma/xianwei.atlas"],e,!1)},d_u.prototype.updateSeatStarByLv=function(e){e<1&&(e=1);for(var p_l=e-2,p_g=0;p_g<5;p_g++)this["status"+p_g].index=p_g<=p_l?0:1},d_u.prototype.UpdateHtml=function(e,p_l){var p_g=Config.xianyuan_god[e.id];if(p_g.effectID){this.JumpTalisman.visible=!0;var b_s,d_u="",b_e=TalismanModel.instance.getTalismanVo(p_g.effectID);e.state,b_s=b_e&&1==b_e.state?1==b_e.speel?(d_u=(j_x("1300_1316_1230")),"#e32828"):(d_u=(j_x("1300_2335_1796")),"#008931"):b_e&&3==b_e.state?(d_u=(j_x("1163_2335_1796")),"#008931"):(d_u=(j_x("206_2335_1796")),"#e32828");var d_m=Utils.$("{1}({2})",Config.talisman_talisman[p_g.effectID].name,d_u),d_w=Utils.setHref(d_m,Utils.$("openWin:{1},{2}",p_g.effectID,JSON.stringify([p_g.effectID])),b_s);this.JumpTalisman.innerHTML=(j_x("1628_371_189")+j_x("1486_1163_223")+j_x(402))+d_w+(j_x("613_233"))}else this.JumpTalisman.visible=!1},d_u.prototype.onClick=function(p_l){var p_g=p_l.target,b_s=this.dataSource;b_s=BlackKingModel.instance.getBlackKingById(b_s.id);var b_e=UIM.instance.isOpenWin(e.BlackKingPanel);switch(p_g.name){case"backbtn":d_u.close(),LED.event(l_r.BLACK_GODSUITSTATE_ITEMINFO),b_e||e.BlackKingPanel.open();break;case"closebtn":d_u.close();break;case"calonkingbtn":var d_m=BlackKingModel.instance.coachTimes?BlackKingModel.instance.coachTimes:0;if(0<=d_m){if(BlackKingModel.instance.getBlackKingById(b_s.id),d_m=10<d_m+1?10:d_m+1,!Config.xianyuan_coach[d_m])return void j_y.confirm(Utils.$((j_x("2339_1254_296")+j_x("1893_235_2348")+j_x("1300_1876_1917")+"")));j_y.confirm(Utils.$((j_x("68_2032_1661")+j_x(1502)+"{1}"+j_x("1263_869_296")+j_x("1893_186_689")+""),Config.xianyuan_coach[d_m].gold),this.sureToOpen,b_s,d_m)}break;case"liftkingbtn":var d_w=LgcM.ins.heroVo,f_t=b_s.lv+1;f_t>=Config.xianyuan_starup[1e3*b_s.id+b_s.star].lvLmt&&(f_t=Config.xianyuan_starup[1e3*b_s.id+b_s.star].lvLmt),BlackKingModel.instance.getBlackKingById(b_s.id),d_w.xyExp<Config.xianyuan_levelup[b_s.id].xyExp&&j_y.confirm(Utils.$((j_x("68_2032_711")+j_x("2417_531_2111")+j_x("257_2222_1035")+"")),(function(){v_z.open()})),BlackKingModel.instance.reqGodUplv(b_s.id),Resource.SoundManager.instance.playSoundById(10,!1);break;case"liftskillbtn":h_h.open(b_s);break;case"helpBtn":e.BlackKingHelpPanel.open();break;case"starkingbtn":e.ConCludekinStarPanel.open(b_s);break;case"retreatBtn":this.preview(1);break;case"beforeBtn":this.preview(2);break;case"godSuitBtn":d_u.close(),b_e||e.BlackKingPanel.open(1,b_s.id),LED.event(l_r.BLACK_GODSUITSTATE_ITEMINFO)}},d_u.prototype.updateGoddown=function(e){Mmp(e,this)},d_u.prototype.updateTypeClip=function(e){var p_l=Config.xianyuan_god[e];p_l&&0<p_l.propType?(this.typeClip.visible=!0,this.typeClip_di.visible=!0,this.typeClip.index=p_l.propType-1):(this.typeClip.visible=!1,this.typeClip_di.visible=!1)},d_u.prototype.updateInfo=function(e){void 0===e&&(e=0);var p_l=this.dataSource,p_g=LgcM.ins.heroVo;if(this.concludekingvalue.text=p_g.xyExp.toString(),p_l&&p_l.id){0<e&&(p_l.coachTimes=e);var b_s=1e3*p_l.id+p_l.star;this.redPoint_up.visible=p_l.upGod(),this.redPoint_star.visible=BlackKingModel.instance.upStar(b_s,p_l.star),this.liftskill_red.visible=p_l.upSkillKing(),this.UpdateHtml(p_l,1104),TalismanModel.instance.changeActStar(this.starBox,p_l.star+1);var d_u=Config.xianyuan_god[p_l.id];Resource.ResUrl.getIconUrl(d_u.pic),this.concludekLv.text=Utils.$((j_x("189_438_15")+j_x(2342)+"Lv.{1}/{2}"),p_l.lv,Config.xianyuan_starup[1e3*p_l.id+p_l.star].lvLmt);var b_e,d_m=BlackKingModel.instance.getCfgPropByLv(p_l.id,p_l.lv);Config.xianyuan_god[this.dataSource.id],b_e=BlackKingModel.instance.getFightById2(p_l),b_p.getNumSp(NumType.FIGHTING,b_e,this.fighticon,-10);var d_w=d_m,f_t=Config.xianyuan_starup[1e3*p_l.id+p_l.star].prop||[];d_w=b_p.addProps(f_t,1,d_w),this.list.array=d_w,this.Blackkingdesc.text=Config.xianyuan_god[p_l.id].words2,this.InitModleList(),this.updateTypeClip(p_l.id),this.updatePvSkillItem(),this.updateBackkingStatus()}},d_u.prototype.clickHtml=function(p_l){if(p_l&&""!=p_l){var p_g=p_l.split(":"),b_s=p_g[0];switch(p_g=p_g[1].split(","),b_s){case"openWin":parseInt(p_g[0]);var b_e=void 0;if(1<p_g.length&&(b_e=JSON.parse(p_g[1])),b_e[0]){var d_m=TalismanModel.instance.getTalismanVo(b_e[0]);if(d_m&&d_m.isActive())d_u.close(),1==d_m.speel?e.TalismanSealPanel.open():e.TalismanUpPanel.open(d_m);else if(d_m&&3==d_m.state)d_u.close(),e.TalismanPanel.open();else{var d_w=Config.talisman_talisman[b_e[0]];b_p.broadcastNotice(d_w.activeCondDesc)}}}}},d_u.prototype.updateItem=function(e,p_l,p_g){if(e==this.list){var b_s=d_v.getPropertyType(p_l.dataSource.propOrdinal),d_u=p_l.getChildByName("descTxt"),b_e=p_l.getChildByName("valueTxt"),d_m=this.dataSource;if(d_u.text=b_s.desc,b_e.text=p_l.dataSource.value.toString(),b_s.isPercent())b_e.text=Utils.$("{1}%",p_l.dataSource.value/100);else{var d_w=BlackKingModel.instance.getJBFight(d_m.id)/1e4,f_t=BlackKingModel.instance.getXianWeiFightPercent(d_m)/1e4;b_e.text=Utils.$("{1}",Math.floor(p_l.dataSource.value*(1+d_w+f_t)))}}},d_u.prototype.onBlackkingStatusClick=function(){Ukp(e,this)},d_u);function d_u(){var e=p_l.call(this)||this;return e.coachTimes=0,e.godIsdown=!1,e.godPosition=0,e.init(),e}e.BlackKingCellPanel=b_s;var b_e,d_m=(b_e=ui.window.blackking.biackking_tipUI,__extends(d_w,b_e),d_w.prototype.init=function(){Eqr(this,Laya)},d_w.open=function(e,p_l){Ikh(e,p_l,UIM,d_w)},d_w.prototype.onRemove=function(){if(this.off(Laya.Event.CLICK,this,this.onClick),this.onEffStop(),LED.off(l_r.BLACK_GODKING_UPDATE,this,this.PlayReelEffecte),this.reelEffecte&&this.reelEffecte.clearRes(),Laya.loader.clearTextureRes("window/blackking/_xianyuan.part"),this.icon&&this.icon.texture){var e=this.icon.texture.url;this.icon.graphics.clear(),this.icon.texture=null,e&&Laya.loader.clearTextureRes(e)}},d_w.prototype.setInfo=function(){var e=this.dataSource[0],p_l=Config.xianyuan_god[e.id],p_g=Resource.ResUrl.getIconUrl(p_l.pic);if(this.setIcon(p_g),1==this.dataSource[1]){var b_s=BlackKingModel.instance.freeCoachCount?0:1;BlackKingModel.instance.reqGodCoach(b_s),this.blackking.visible=!1,this.nametxt.text=Config.xianyuan_god[e.id].name,this.desctxt.text=Config.xianyuan_god[e.id].words2}2==this.dataSource[1]&&(this.blackking.visible=!0,this.nametxt.text=Config.xianyuan_god[e.id].name,this.desctxt.text=Config.xianyuan_god[e.id].words1),this.effect.autoPlay=!0,this.effect.play(),Laya.timer.once(5500,this,this.onEffStop)},d_w.prototype.onEffStop=function(){this.effect.stop(),this.effect.autoPlay=!1,this.effect.url&&Laya.loader.clearTextureRes(this.effect.url),Laya.timer.clear(this,this.onEffStop)},d_w.prototype.setIcon=function(e){""!=e?(this.icon.visible=!0,this.icon=Resource.ResManager.Instance.getImg(e,this.icon)):this.icon.visible=!1},d_w.prototype.onAdded=function(){Yek(this,Laya,LED,l_r)},d_w.prototype.PlayReelEffecte=function(e){if(1==e){var p_l=LgcM.ins.heroVo,p_g=0;if(p_l.vipLv){var b_s=Config.recharge_vip[p_l.vipLv].xyCoach;p_g=b_s&&b_s[1]?b_s[1]/100:0}this.reelEffecte?this.reelEffecte.SetText(this.reelContainer,(j_x("531_1976_223")+j_x("402_1573_2038")+"<span color='#c92828'>")+p_g+"%</span>"):(this.reelEffecte=new ReelEffecte,this.reelEffecte.InitEffecteDate(this.reelContainer,"res/ui/common/baoji_04.png",(j_x("531_1976_223")+j_x("402_1573_2038")+"<span color='#c92828'>")+p_g+"%</span>")),this.reelEffecte.PlayEffecte()}},d_w.prototype.changeAdapt=function(){this.y=Stage.height-this.height,Stage.height>this.height&&(this.bg_image.scaleY=Stage.height/this.bg_image.height,this.bg_image.y=this.height-this.bg_image.height*this.bg_image.scaleY)},d_w.prototype.onClick=function(){Aeb(d_w)},d_w.close=function(){Wel(UIM,d_w)},d_w);function d_w(){var e=b_e.call(this)||this;return e.init(),e}e.BlackKingTipPanel=d_m;var f_t,v_z=(f_t=ui.window.blackking.blackking_concludekingUI,__extends(d_h,f_t),d_h.prototype.init=function(){Ifd(this,Laya,p_g)},d_h.prototype.onPresebterBtnMD=function(e){var p_l=this;LongPushUtil.inst.bingLongPushBtn(this,(function(){p_l.onPresebter(e)}))},d_h.prototype.updateItem=function(e,p_l,p_g){if(e==this.list){var b_s=p_l.dataSource,d_u=p_l.getChildByName("icon"),b_e=p_l.getChildByName("nametxt"),d_m=p_l.getChildByName("numtxt"),d_w=p_l.getChildByName("valuetxt"),f_t=p_l.getChildByName("valuedescTxt"),v_z=p_l.getChildByName("presebterbtn"),d_h=p_l.getChildByName("presebter_red"),r_t=p_l.getChildByName("quality");v_z.on(Laya.Event.CLICK,this,this.onPresebter,[b_s]),v_z.on(Laya.Event.MOUSE_DOWN,this,this.onPresebterBtnMD,[b_s]);var t_n=Config.CItem(b_s.itemId);if(d_h.visible=BlackKingModel.instance.upLiftKings(b_s.itemId),t_n){this.setIcon(d_u,Resource.ResUrl.getIconUrl(t_n.icon)),b_e.text=t_n.name,d_m.text=BagModel.instance.getItemCountByItemID(t_n.id,BagTypeDefine.BAG_TYPE_ITEM).toString();var f_y=(j_x("2051_1802_1865")+j_x("189_1486_1241")+j_x(144));14==b_s.reward[0][0]&&(f_y=(j_x("2051_1802_1865")+j_x("257_2222_1035"))),f_t.text=f_y,d_w.text=b_s.reward[0][1],r_t.index=t_n.quality-1}}},d_h.prototype.onAdded=function(){Ycd(this,Laya,LED,l_r)},d_h.prototype.setInfo=function(){Ots(LgcM,this,BlackKingModel,j_x)},d_h.open=function(){Anx(UIM,d_h)},d_h.close=function(){Mca(UIM,d_h)},d_h.prototype.onClick=function(e){var p_l=e.target;switch(this.dataSource,p_l.name){case"closebtn":d_h.close()}},d_h.prototype.onPresebter=function(e){e?BagModel.instance.getItemCountByItemID(e.itemId,BagTypeDefine.BAG_TYPE_ITEM)<1?(LongPushUtil.inst.clearLoopPush(),r_f.instance.isWindow(e.itemId)):BlackKingModel.instance.reqGodConClude(e.id):LongPushUtil.inst.clearLoopPush()},d_h.prototype.onRemove=function(){Ubo(this,Laya,LED,l_r)},d_h.prototype.setIcon=function(e,p_l){""!=p_l?(e.visible=!0,e=Resource.ResManager.Instance.getImg(p_l,e)):e.visible=!1},d_h);function d_h(){var e=f_t.call(this)||this;return e.init(),e}e.BlackKingConclude=v_z;var r_t,t_n=(r_t=ui.window.blackking.concludeking_upUI,__extends(f_y,r_t),f_y.prototype.init=function(){Czj(this,p_g,Laya)},f_y.prototype.onClick=function(e){var p_l=e.target,p_g=this.dataSource;switch(p_l.name){case"closebtn":f_y.close();break;case"uplvbtn":p_g.lv>=Config.xianyuan_levelup[p_g.id].level&&b_p.broadcastNotice((j_x("1300_1117_1012")+j_x("1081_1375_15")+j_x(2342))),BlackKingModel.instance.reqGodUplv(p_g.id);break;case"upstar":b_p.checkConsume(Config.xianyuan_starup[1e3*p_g.id+(p_g.star+1)].consume)?(BlackKingModel.instance.reqGodStarUp(p_g.id),b_p.broadcastNotice((j_x("371_1148_402")+j_x(2142)),1,"#47ff00")):r_f.instance.isWindow(Config.xianyuan_starup[1e3*p_g.id+(p_g.star+1)].consume[0][0])}},f_y.prototype.onRemove=function(){Ixe(this,Laya,LED,l_r)},f_y.open=function(e){Ath(e,UIM,f_y)},f_y.prototype.onAdded=function(){Kcf(this,Laya,LED,l_r)},f_y.prototype.updateList=function(){var e=this.dataSource;if(e){var p_l=LgcM.ins.heroVo,p_g=e.lv+1;e.star,p_g>=Config.xianyuan_starup[1e3*e.id+e.star].lvLmt&&(p_g=Config.xianyuan_starup[1e3*e.id+e.star].lvLmt),this.upredPoint.visible=e.upGod();var b_s=Config.xianyuan_levelup[e.id];e.id,this.presentlv.text=e.lv.toString(),this.uplv.text=(e.lv+1).toString();var d_u=[],b_e=[],d_m=b_s.prop;for(var d_w in d_m)b_e.push([d_m[d_w][0],d_m[d_w][1]*e.lv]),d_u.push([d_m[d_w][0],d_m[d_w][1]*(e.lv+1)]);this.presentlist.array=b_e,this.uplist.array=d_u,this.consumeTxt.text=(j_x("1661_1502_257")+j_x("2222_1035")+":")+p_l.xyExp+"/"+b_s.xyExp}},f_y.prototype.updateItem=function(e,p_l,p_g){if(e==this.presentlist||e==this.uplist){var b_s=d_v.getPropertyTypeByName(p_l.dataSource[0]),d_u=p_l.getChildByName("descTxt"),b_e=p_l.getChildByName("valueTxt");d_u.text=d_v.getDesc(b_s.ordinal)+":",b_s.isPercent()?b_e.text=Utils.$("{1}%",p_l.dataSource[1]/100):b_e.text=Utils.$("{1}",p_l.dataSource[1])}},f_y.close=function(){Stx(UIM,f_y)},f_y);function f_y(){var e=r_t.call(this)||this;return e.init(),e}e.ConCludeKingUpPanel=t_n;var p_q,h_h=(p_q=ui.window.blackking.liftskill_upUI,__extends(n_j,p_q),n_j.prototype.init=function(){Ofw(this,Laya,p_g)},n_j.prototype.createTween=function(e){e.visible=!0,e.y=657,laya.utils.Tween.to(e,{j_l:667},500,Laya.Ease.linearIn,Laya.Handler.create(this,this.createTweens,[e]))},n_j.prototype.onClick=function(e){var p_l=e.target;switch(this.dataSource,p_l.name){case"closebtn":n_j.close()}},n_j.prototype.onUPlv=function(e,p_l){var p_g=Config.xianyuan_xianshu[e];if(p_g){var b_s=LgcM.ins.heroVo;p_l>=Config.xianyuan_god[p_g.godId].maxXsLevel?b_p.broadcastNotice((j_x("189_1486_1300")+j_x("1117_1081_1375")+j_x("15_2342"))):b_s.xsExp<p_g.xsExp?r_f.instance.isWindow(14):BlackKingModel.instance.reqLiftSkillUpLv(e)}},n_j.prototype.updateItem=function(e,p_l,p_g){if(e==this.list){var b_s=p_l.getChildByName("nametxt"),d_u=p_l.getChildByName("uplvbtn"),b_e=d_u.getChildByName("liftskill_red"),d_m=this.dataSource;if(!(d_m&&d_m.id&&p_l.dataSource&&p_l.dataSource.id))return;d_u.on(Laya.Event.CLICK,this,this.onUPlv,[p_l.dataSource.id,p_l.dataSource.lv]);var d_w=p_l.getChildByName("contentDiv"),f_t=Config.xianyuan_xianshu[p_l.dataSource.id];if(d_w.style.color="#4a728e",d_w.style.fontSize=22,d_w.style.wordWrap=!0,d_w.style.valign="top",d_w.style.leading=6,d_w.style.letterSpacing=3,d_w.style.font="SimHei",b_e.visible=!1,!f_t)return;var v_z=BlackKingModel.instance.theurgyPropById(p_l.dataSource.id,p_l.dataSource.lv),d_h=BlackKingModel.instance.theurgyPropById(p_l.dataSource.id,p_l.dataSource.lv+1),r_t=v_z[0].props[0],t_n=d_h[0].props[0];if(f_t.star<=d_m.star&&(b_s.text=f_t.name+"Lv."+p_l.dataSource.lv+"",d_u.visible=!0,2==v_z[0].typ)){d_w.width=424;var f_y=d_v.getPropertyTypeByName(r_t[0]),p_q=d_v.getPropertyTypeByName(t_n[0]),h_h=Config.talisman_talisman[v_z[0].id].name+d_v.getDesc(f_y.ordinal),n_j=Config.talisman_talisman[d_h[0].id].name+d_v.getDesc(p_q.ordinal),j_l=LgcM.ins.heroVo;b_e.visible=d_m.upSkillKingsing(p_l.dataSource.id);var l_m=j_l.xsExp>=f_t.xsExp?"#008931":"#e32828";f_t.propPct&&(d_w.innerHTML=Utils.$((j_x("1327_711_407")+j_x(1398)+"{1}"+j_x("437_223")+"{2}<br>"+j_x("371_2342_407")+j_x(1398)+"{3}"+j_x("437_223")+"{4}<br>"+j_x("371_2342_582")+j_x(774)+"{5}"+j_x("189_1486_1241")+j_x(144)),h_h,Utils.setColor(Utils.$("{1}%",r_t[1]/100),"#008931"),n_j,Utils.setColor(Utils.$("{1}%",t_n[1]/100),"#008931"),Utils.setColor(Utils.$("{1}",f_t.xsExp),l_m))),f_t.prop&&(d_w.innerHTML=Utils.$((j_x("1327_711_407")+j_x(1398)+"{1}"+j_x("437_223")+"{2}<br>"+j_x("371_2342_407")+j_x(1398)+"{3}"+j_x("437_223")+"{4}<br>"+j_x("371_2342_582")+j_x(774)+"{5}"+j_x("189_1486_1241")+j_x(144)),h_h,Utils.setColor(Utils.$("{1}",r_t[1]),"#008931"),n_j,Utils.setColor(Utils.$("{1}",t_n[1]),"#008931"),Utils.setColor(Utils.$("{1}",f_t.xsExp),l_m)))}if(f_t.star>d_m.star){d_w.width=525,b_s.text=f_t.name+(""+j_x("206_1048_1745")+""),d_u.visible=!1,p_q=d_v.getPropertyTypeByName(t_n[0]);var z_m=d_h[0].id,h_b=(n_j=Config.talisman_talisman[z_m].name+d_v.getDesc(p_q.ordinal),1e3*d_m.id+f_t.star);f_t.propPct&&(d_w.innerHTML=Utils.$((j_x("1048_1745_407")+j_x(1398)+"{1}<br>"+j_x("1048_1745_1320")+j_x(1283)+"{2}"+j_x("189_438_1628")+j_x("371_2057")+"{3}"+j_x(1148)),Config.xianyuan_starup[h_b].desc,Config.xianyuan_god[d_m.id].name,f_t.star)),f_t.prop&&(d_w.innerHTML=Utils.$((j_x("1048_1745_407")+j_x(1398)+"{1}<br>"+j_x("1048_1745_1320")+j_x(1283)+"{2}"+j_x("189_438_1628")+j_x("371_2057")+"{3}"+j_x(1148)),Config.xianyuan_starup[h_b].desc,Config.xianyuan_god[d_m.id].name,f_t.star))}}},n_j.prototype.setInfo=function(){var e=this.dataSource,p_l=LgcM.ins.heroVo,p_g=BlackKingModel.instance.sKillInfo;for(var b_s in e.skills)for(var d_u in p_g)e.skills[b_s].id==p_g[d_u].id&&(e.skills[b_s].lv=p_g[d_u].lv);this.list.array=e.skills,this.liftskillexptxt.text=(j_x("189_1486_1241")+j_x(144)+"")+p_l.xsExp.toString()},n_j.open=function(e){Ysh(e,UIM,n_j)},n_j.prototype.onRemove=function(e){Ger(e,this,Laya,LED,l_r)},n_j.prototype.tweenStop=function(e){Ysj(e,laya)},n_j.prototype.onAdd=function(e){Ayb(e,this,Laya,LED,l_r)},n_j.prototype.createTweens=function(e){e.y=667,laya.utils.Tween.to(e,{j_l:657},500,Laya.Ease.linearIn,Laya.Handler.create(this,this.createTween,[e]))},n_j.close=function(){Wse(UIM,n_j)},n_j);function n_j(){var e=p_q.call(this)||this;return e.init(),e}e.LiftSkillUpPanel=h_h}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.blackking.blackking_fatterUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Suq(this,Laya,LED,l_r)},b_s.prototype.onBtnClick=function(e,p_l){if(this.img_redPoint.visible)BlackKingModel.instance.reqGodSuitUpLv(e);else{var p_g=Config.CItem(p_l[0]),b_s=BagModel.instance.getItemCount(p_l[0]);this.txt_max.visible&&b_p.broadcastNotice((j_x("189_438_1117")+j_x("1012_1081_1375")+j_x("15_2342"))),p_g&&b_s<p_l[1]?(b_p.broadcastNotice(Utils.$(("{1}"+j_x("2462_1779")+"!"),p_g.name)),r_f.instance.isWindow(p_g.id)):b_p.broadcastNotice((j_x("189_438_2313")+j_x("1862_1148_2342")+j_x("2462_1463_1779")))}},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"closeBtn":b_s.close();break;case"fahelpBtn":e.BlackKingFatterHelpPanel.open()}},b_s.prototype.playSoundAndEffect=function(){Ohd(Resource)},b_s.prototype.onTreeItemUpdate=function(){this.combineTree.selectedItem&&(this.onTreeUpdate(this.combineTree.selectedItem.itemId),this.list.refresh(),this.onRefresh(!1))},b_s.prototype.onTree=function(e,p_l){void 0===e&&(e=null),void 0===p_l&&(p_l=0);var p_g=e.target;e.type==Laya.Event.CLICK&&p_g.dataSource&&(this.onTreeUpdate(p_g.dataSource.itemId),this.onChange())},b_s.open=function(){Kjo(UIM,b_s)},b_s.prototype.onRemoved=function(){Qxc(this,Laya,LED,l_r)},b_s.prototype.playUpLvEffect=function(){this.effect_up_succ&&(this.effect_up_succ.visible=!0,this.effect_up_succ.play(!1),this.effect_up_succ.on(Laya.Event.COMPLETE,this,this.stopUpLvEffect))},b_s.prototype.updateNum=function(e){Uep(e,b_p,NumType,this)},b_s.prototype.onPropList=function(e,p_l,p_g){if(e==this.list_prop||e==this.list_prop_next){var b_s=p_l.dataSource,d_u=p_l.getChildByName("propTxt");p_l.getChildByName("addTxt"),d_u.text=b_s.desc+"+"+b_s.value}},b_s.prototype.playActiveSuccEffect=function(){this.effect_active_succ&&(this.effect_active_succ.visible=!0,this.effect_active_succ.play(!1),this.effect_active_succ.on(Laya.Event.COMPLETE,this,this.stopActiveSuccEffect))},b_s.prototype.onChange=function(){var e=this.combineTree.selectedItem;if(e&&e.itemId){var p_l=Config.xianyuan_suits[e.itemId].xianYuan;this.list.array!=p_l&&(this.list.array=p_l),this.onRefresh(!1)}},b_s.prototype.ontreerender=function(e,p_l){var p_g=e.getChildByName("label");p_g.text=e.dataSource.label;var b_s=e.getChildByName("redpoint"),d_u=e.getChildByName("arrow"),b_e=e.getChildByName("lock"),d_m=e.getChildByName("bg"),d_w=e.getChildByName("plan"),f_t=e.dataSource.type,v_z=e.dataSource.itemId,d_h=e.dataSource.type;b_e.visible=!f_t,d_u.skin=f_t?Utils.$("res/ui/karma/Button_jiban_0{1}.png",f_t):"res/ui/common/Button_yeqian_3.png";var r_t=f_t?BlackKingModel.instance.suitPlanDec(f_t):"";if(p_g.x=d_h?-4:15,d_w.text=f_t?r_t:"",b_s.visible=!1,v_z){var t_n=Config.xianyuan_suits[v_z],f_y=BlackKingModel.instance.godSuitActivate(t_n.suitId);b_e.visible=!f_y,d_m.skin=f_y?"res/ui/karma/Clip_pinzhi_gongming.png":"res/ui/karma/Clip_karma_05.png",d_m.index=f_y?t_n.qulity-1:0,b_s.visible=BlackKingModel.instance.suitTypeRed(v_z)}d_h&&(b_s.visible=BlackKingModel.instance.suitTypeRed(0,d_h))},b_s.prototype.onRefresh=function(e){if(void 0===e&&(e=!0),e&&this.list.refresh(),this.combineTree.fresh(),this.combineTree.selectedItem&&this.combineTree.selectedItem.itemId){var p_l=this.combineTree.list.getCell(this.combineTree.selectedIndex);p_l.dataSource&&this.ontreerender(p_l,this.combineTree.selectedIndex)}},b_s.prototype.onRender=function(e,p_l){var p_g=BlackKingModel.instance.getBlackKingById(e.dataSource);p_g&&e.setItemData(p_g)},b_s.prototype.stopActiveSuccEffect=function(){this.effect_active_succ&&(this.effect_active_succ.off(Laya.Event.COMPLETE,this,this.stopActiveSuccEffect),this.effect_active_succ.visible=!1,this.effect_active_succ.stop())},b_s.prototype.stopUpLvEffect=function(){this.effect_up_succ&&(this.effect_up_succ.off(Laya.Event.COMPLETE,this,this.stopUpLvEffect),this.effect_up_succ.visible=!1,this.effect_up_succ.stop())},b_s.prototype.updateCombineView=function(e,p_l){void 0===e&&(e=0),void 0===p_l&&(p_l=0);var p_g=[];p_g=[e,p_l],p_l&&(p_g=BlackKingModel.instance.godSuitIndex(p_l));var b_s=[];this.effect_up_succ.visible=!1,this.effect_active_succ.visible=!1;for(var d_u="<data>",b_e=1;b_e<=GodSuitTypeMax.TYPE;b_e++){var d_m="",d_w=BlackKingModel.instance.onGodSuitArr(b_e).sort(BlackKingModel.instance.suitCompareFun);for(var f_t in p_g[0]==b_e&&(b_s=d_w),d_w){var v_z=d_w[f_t];v_z&&(t_n=BlackKingModel.instance.getCfgGodSuitVo(v_z.suitId,v_z.level))&&(d_m+="<leaf label='"+t_n.name+"' itemId= '"+t_n.id.toString()+"' itemType= '"+t_n.suitType+"' isOpen='false'/>")}if(0<d_m.length){var d_h=d_w[0];if(!d_h)continue;if(!(t_n=BlackKingModel.instance.getCfgGodSuitVo(d_h.suitId,d_h.level)))continue;d_u+="<item label= '"+t_n.typeName+"' isOpen='false' type ='"+t_n.suitType+"' >",d_u+=d_m,d_u+="</item>"}}d_u+="</data>";var r_t=Laya.Utils.parseXMLFromString(d_u);this.combineTree.spaceLeft=0,this.combineTree.xml=r_t;var t_n,f_y=b_s[p_g[1]];f_y&&(t_n=BlackKingModel.instance.getCfgGodSuitVo(f_y.suitId,f_y.level))&&(this.onTreeUpdate(t_n.id),this.list.array=Config.xianyuan_suits[t_n.id].xianYuan);var p_q=this.combineTree.list.array;if(p_q)for(var h_h in p_q)p_q[h_h].isOpen&&this.combineTree.setItemState(parseInt(h_h),!1);this.combineTree.setItemState(p_g[0]-1,!0);var n_j=2==p_g[0]?p_g[0]-2:b_s.length+1,j_l=(p_g[0],b_s.length+2);3==p_g[0]&&(n_j=p_g[0]-2,j_l=p_g[0]-3),this.combineTree.setItemState(n_j,!1),this.combineTree.setItemState(j_l,!1),this.combineTree.selectedIndex=p_g[0]+p_g[1],this.combineTree.fresh()},b_s.prototype.onTreeUpdate=function(e,p_l){void 0===p_l&&(p_l=0);var p_g=Config.xianyuan_suits[e];if(p_g){var b_s=BlackKingModel.instance.getSuitVo(p_g.suitId);e=b_s?b_s.suitId:e,(0<(p_l=b_s?b_s.level:p_l)||b_s)&&(p_g=BlackKingModel.instance.getCfgGodSuitVo(e,p_l));var d_u=BlackKingModel.instance.godSuitActivate(p_g.suitId),b_e=Config.xianyuan_suits[p_g.id+1],d_m=b_e&&d_u&&p_g.suitId==b_e.suitId?b_e:p_g,d_w=d_u?p_g.level:0,f_t=BlackKingModel.instance.suitProgressValue(1,d_m),v_z=BlackKingModel.instance.suitProgressValue(2,d_m);this.txt_name.text=p_g.name,this.updateNum(d_w);var d_h=this.list_prop,r_t=this.list_prop_next,t_n=CharacterProperty.getPropertys(p_g.prop),f_y=d_u?b_p.calPropFight(t_n):0;b_p.getNumSp(NumType.FIGHTING,f_y,this.fightSp,-10),this.txt_notActive.visible=!d_u,this.txt_max.visible=p_g.level>=GodSuitLvMax.MAX,d_h.array=b_p.getPropInfos(p_g.prop),d_h.visible=!this.txt_notActive.visible,r_t.array=b_p.getPropInfos(d_m.prop),r_t.visible=!this.txt_max.visible,this.Suitdesc.text=p_g.suitDesc,this.txt_prop_add.text=d_u?p_g.clientDesc:("      "+j_x("2313_1862_206")+j_x("2335_1796"));var p_q=Utils.$(("{1}"+j_x("2342_2335_1796")+"  {2}"),p_g.level,p_g.clientDesc),h_h=this.txt_max.visible?(j_x("189_438_2313")+j_x("1862_1117_1012")+j_x("1081_1375_15")+j_x(2342)):Utils.$(("{1}"+j_x("2342_2335_1796")+"  {2}"),d_m.level,d_m.clientDesc);this.txt_prop_add_next.text=p_g.level>=GodSuitLvMax.MAX?p_q:h_h,this.txt_conditionstar.text=p_g?Utils.$((j_x("2313_1862_189")+j_x("438_1117_1012")+"{1}"+j_x(1148)),d_m.starCond):"",this.txt_progressstar.text=Utils.$("({1}/{2})",v_z[0],v_z[1]),this.txt_progressstar.color=v_z[0]>=v_z[1]?Utils.Color.GREEN:Utils.Color.RED;var n_j=v_z[0]>=v_z[1]&&f_t[0]>=f_t[1];this.txt_upMax.visible=this.txt_max.visible,this.cosumBox.visible=!this.txt_upMax.visible;var j_l=BagModel.instance.getItemCount(d_m.consume[0][0]);this.txt_consum.text=Utils.$("{1}/{2}",j_l,d_m.consume[0][1]),this.txt_consum.color=b_p.checkConsume(d_m.consume)?Utils.Color.GREEN:Utils.Color.RED,this.img_redPoint.visible=j_l>=d_m.consume[0][1]&&n_j,this.btn_up.label=d_u?(j_x("371_2342")):(j_x("2335_1796")),this.btn_up.on(Laya.Event.CLICK,this,this.onBtnClick,[p_g.suitId,d_m.consume[0]]),this.btn_up.visible=!this.txt_max.visible}},b_s.close=function(){Yom(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g._oldIndex=-1,p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemoved),p_g.list.itemRender=e.BlackkingFatterItem,p_g.list.renderHandler=Laya.Handler.create(p_g,p_g.onRender,null,!1),p_g.combineTree.renderHandler=Laya.Handler.create(p_g,p_g.ontreerender,null,!1),p_g.list_prop.renderHandler=Laya.Handler.create(p_g,p_g.onPropList,[p_g.list_prop],!1),p_g.list_prop_next.renderHandler=Laya.Handler.create(p_g,p_g.onPropList,[p_g.list_prop_next],!1),p_g.combineTree.list.mouseHandler=Laya.Handler.create(p_g,p_g.onTree,null,!1),p_g.combineTree.scrollBarSkin="",p_g.combineTree.switchOpen=1,p_g}e.BlackkingFatterPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.blackking.blackkingDescUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Kbw(this,Laya)},b_s.open=function(){Udi(UIM,b_s)},b_s.prototype.onClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":b_s.close()}},b_s.prototype.onRemoved=function(){Cjg(this,Laya)},b_s.close=function(){Iqu(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.BlackKingFatterHelpPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.blackking.blackkingUI,__extends(d_u,p_l),d_u.prototype.init=function(){var e=this.List;e.vScrollBarSkin="",e.selectEnable=!0,e.scrollBar.elasticDistance=200,e.scrollBar.elasticBackTime=500,e.itemRender=d_m,e.repeatX=3,e.renderHandler=p_g.create(this,this.updateItem,[e],!1),this._godTab=new p_c(this.godTab)},d_u.prototype.updateItem=function(e,p_l,p_g){this.visible&&e==this.List&&p_l.setItemData(p_l.dataSource)},d_u.prototype.onUpdateTime=function(){var e=SyncTime.serverTime/1e3,p_l=BlackKingModel.instance.freeCoach;if(p_l<e)return BlackKingModel.instance.reqBlackKingValue(),void Laya.timer.clear(this,this.onUpdateTime);this.cdtimeDec.text=(j_x("2345_2218_1702")+j_x("2460_810_867")+j_x(1702)+":")+Utils.formatTimeStr(p_l-e)},d_u.prototype.onselect=function(){Uxt(this)},d_u.prototype.onClick=function(p_l){var p_g=[];switch(p_l.target.name){case"backbtn":case"closebtn":d_u.close();break;case"helpBtn":v_z.open();break;case"calonkingbtn":var b_s=BlackKingModel.instance.coachTimes;if(!(p_g=BlackKingModel.instance.canActives())||p_g.length<1)return void b_p.confirm((j_x("2422_2244_182")+j_x("1176_1768_206")+j_x("531_1976_30")+j_x("782_189_438")+j_x("2462_1919_296")+j_x(715)+""+j_x("1777_2199_1070")+j_x("2057_1029_189")+j_x("531_2111_189")+j_x(438)+"!"),(function(){e.BlackKingCardPanel.open()}));var b_e=BlackKingModel.instance.freeCoachCount;if(0<b_e&&b_e<=3)return BlackKingModel.instance.reqGodCoach(0),void e.BlackKingTipPanel.open(BlackKingModel.instance.ranDomGodId(),2);var d_m=(b_s=b_s?b_s+1:1)&&b_s>GodCoachMax.MAX?GodCoachMax.MAX:b_s;j_y.confirm(Utils.$((j_x("68_2032_1661")+j_x(1502)+"{1}"+j_x("1263_869_296")+j_x("1893_186_689")+""),Config.xianyuan_coach[d_m].gold),(function(){BlackKingModel.instance.reqGodCoach(1),e.BlackKingTipPanel.open(BlackKingModel.instance.ranDomGodId(),2)}));break;case"concludekingbtn":if(!(p_g=BlackKingModel.instance.canActives())||p_g.length<1)return void b_p.confirm((j_x("2422_2244_182")+j_x("1176_1768_206")+j_x("531_1976_30")+j_x("782_189_438")+j_x("2462_1919_296")+j_x(715)+""+j_x("1777_2199_1070")+j_x("2057_1029_189")+j_x("531_2111_189")+j_x(438)+"!"),(function(){e.BlackKingCardPanel.open()}));e.BlackKingConclude.open();break;case"fatterBth":e.BlackkingFatterPanel.open()}},d_u.prototype.UpdateInfo=function(){if(this.visible){var e=SyncTime.serverTime/1e3,p_l=Config.global[GlobalDefine.xyFreeCoachMaxCount].i_info,p_g=BlackKingModel.instance.freeCoachCount,b_s=BlackKingModel.instance.freeCoach;if(Laya.timer.clear(this,this.onUpdateTime),this.consumeDec.text=Utils.$("({1}/{2})",p_g,p_l),e<b_s&&p_g<3?(this.cdtimeDec.visible=!0,this.cdtimeDec.text=(j_x("2345_2218_1702")+j_x("2460_810_867")+j_x(1702)+":")+Utils.formatTimeStr(b_s-e),Laya.timer.loop(1e3,this,this.onUpdateTime)):this.cdtimeDec.visible=!1,this.liftking_red.visible=BlackKingModel.instance.upLiftKing(),this.calonkingbtn.label=(j_x("296_715_189")+j_x(455)),this.calonking_red.visible=!!p_g,this.iconic.visible=!p_g,this.consumeDec.x=this.iconic.visible?317:270,!p_g){var d_u=BlackKingModel.instance.coachTimes?BlackKingModel.instance.coachTimes:0;d_u=FreeCoachMax.MAX<d_u+1?FreeCoachMax.MAX:d_u+1,this.consumeDec.text=Config.xianyuan_coach[d_u].gold.toString()}BlackKingModel.instance.talisDatas,this.List.array=BlackKingModel.instance.blackkingDates()}},d_u.prototype.onAdded=function(){this._godTab.on("tabSelect",this,this.onTabSelect),this.on(Laya.Event.CLICK,this,this.onClick),this.godTab.selectedIndex=this.dataSource[0].index?this.dataSource[0].index:0;var e=this.godTab.selectedIndex;this.onTabSelect(e,e),BlackKingModel.instance.reqBlackKingValue(),this.List.selectedIndex=0,BlackKingModel.instance.talisDataSort(),LED.on(l_r.BLACKKING_INFO_UPDATE,this,this.UpdateInfo),LED.on(l_r.BLACK_GODSTAR_UPDATE,this,this.onUpdateList),LED.on(l_r.CARD_SCUCCESS_UPDATE,this,this.UpdateList),LED.on(l_r.BLACK_GODSUIT_OPEN,this,this.onselect)},d_u.prototype.UpdateList=function(){Eaa(BlackKingModel,this)},d_u.open=function(e,p_l){void 0===e&&(e=0),void 0===p_l&&(p_l=0),UIM.open(d_u,["karma.atlas"],[{index:e},{godid:p_l}],!0)},d_u.prototype.updateFightnum=function(){var e=BlackKingModel.instance.canActives(),p_l=0;if(e)for(var p_g in e)p_l+=BlackKingModel.instance.getFightById2(e[p_g]);this.fightValue.text=Utils.$("{1}",b_p.calsulate(p_l))},d_u.prototype.onTabSelect=function(e,p_l){if(-1!=e)switch(BlackKingModel.instance.reqGodSuitInfo(),this.fatter.visible=!1,this.godBox.visible=!1,this.godTab.selectedIndex=e){case 0:this.fatter.visible=!1,this.godBox.visible=!0,this.dataSource[1].godid=0,this.UpdateInfo();break;case 1:var p_g=this.fatter;this.fatter.visible=!0,this.godBox.visible=!1,p_g.onChange(),Laya.timer.once(150,this,(function e(){var p_l=this.dataSource[1].godid,b_s=this.dataSource[0].index?this.dataSource[0].index:1;p_g.updateCombineView(b_s,p_l),Laya.timer.clear(this,e)}))}},d_u.prototype.onRemove=function(){if(this.off(Laya.Event.CLICK,this,this.onClick),LED.off(l_r.BLACKKING_INFO_UPDATE,this,this.UpdateInfo),LED.off(l_r.BLACK_GODSTAR_UPDATE,this,this.onUpdateList),LED.off(l_r.CARD_SCUCCESS_UPDATE,this,this.UpdateList),LED.off(l_r.BLACK_GODSUIT_OPEN,this,this.onselect),Laya.timer.clear(this,this.onUpdateTime),this.List&&this.List.cells)for(var e=0;e<this.List.cells.length;e++)this.List.cells[e].clearRes()},d_u.prototype.onUpdateList=function(){Qmz(this,BlackKingModel)},d_u.close=function(){Uci(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e.init(),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.BlackKingPanel=b_s;var b_e,d_m=(b_e=ui.window.blackking.blackking_cellUI,__extends(d_w,b_e),d_w.prototype.onAdd=function(e){Kxz(e,this,Laya,LED,l_r)},d_w.prototype.stopActiveSuccEffect=function(e){e&&(e.off(Laya.Event.COMPLETE,this,this.stopActiveSuccEffect),e.visible=!1,e.stop())},d_w.prototype.playStarEffect=function(e){void 0===e&&(e=!0),(this.effect_active_star.visible=e)?this.effect_active_star.play(!0):this.effect_active_star.play(!1)},d_w.prototype.onClick=function(p_l){var p_g=this.dataSource,d_u=1e3*p_g.id+p_g.star;if(p_g){if(2==p_g.state)return p_g.isActiveClick=!0,BlackKingModel.instance.reqGodActive(p_g.id),void e.BlackKingTipPanel.open(p_g,2);if(1==p_g.state)return BlackKingModel.instance.upStar(d_u,p_g.star)?(BlackKingModel.instance.reqGodStarUp(p_g.id),b_p.broadcastNotice((j_x("371_1148_402")+j_x(2142)),1,"#47ff00"),void e.BlackKingTipPanel.open(p_g,2)):(e.BlackKingCellPanel.open(p_g),void b_s.close());b_p.broadcastNotice((j_x("2364_189_206")+j_x("2335_1796")+","+j_x("1777_531_2111")+j_x("1612_1422_2335")+j_x(1796))),r_f.instance.isWindow(Config.xianyuan_god[p_g.id].activeConsume[0][0])}},d_w.prototype.setIcon=function(e,p_l,p_g,b_s){void 0===p_g&&(p_g=[0,0]),void 0===b_s&&(b_s=[0,0]),""!=p_l?(e.visible=!0,(e=Resource.ResManager.Instance.getImg(p_l,e)).scale(p_g[0],p_g[1]),e.pos(b_s[0],b_s[1])):e.visible=!1},d_w.prototype.showMaskSp=function(e){Emh(e,this)},d_w.prototype.playActiveSuccEffect=function(e,p_l){void 0===p_l&&(p_l=!0),(e.visible=p_l)?(e.on(Laya.Event.COMPLETE,this,this.stopActiveSuccEffect,[e]),e.play(!1)):e.stop()},d_w.prototype.playActiveEffect=function(e){void 0===e&&(e=!0),(this.effect_active.visible=e)?this.effect_active.play(!0):this.effect_active.play(!1)},d_w.prototype.setItemData=function(e){if(this.redPoint.visible=!1,this.effect_active_succ.visible=!1,this.effect_active.visible=!1,this.effect_active_star.visible=!1,e){this.showMaskSp(!0),this.playActiveEffect(!1),this.playActiveSuccEffect(this.effect_active_succ,e.isActiveClick),e.isActiveClick=!1;var p_l=Config.xianyuan_god[e.id];if(p_l){this.bgQuaClip.index=p_l.quality-4,this.bgQuaClipc.index=p_l.quality-4,TalismanModel.instance.changeActStar(this.starBox,e.star+1);var p_g=BagModel.instance.getItemCountByItemID(p_l.activeConsume[0][0],BagTypeDefine.BAG_TYPE_ITEM),b_s=BagModel.instance.getItemCountByItemID(p_l.cardConsume[0][0],BagTypeDefine.BAG_TYPE_ITEM);1!=e.state&&(b_s?(this.proBarTest.text=b_s+"/"+p_l.cardConsume[0][1],this.proBar.value=b_s/p_l.cardConsume[0][1]):(this.proBarTest.text=p_g+"/"+p_l.activeConsume[0][1],this.proBar.value=p_g/p_l.activeConsume[0][1]));var d_u=Resource.ResUrl.getIconUrl(p_l.pic),b_e=Resource.ResUrl.getIconUrl(p_l.art_name);if(this.setIcon(this.icon,d_u,p_l.ui_scale,[p_l.ui_offset[0]+-28,p_l.ui_offset[1]+4]),b_e&&this.setIcon(this.nameicon,b_e,[1,1],[1,21]),this.activate.visible=!1,0==e.state&&(this.activate.visible=!0),2==e.state&&(this.playActiveEffect(!0),this.redPoint.visible=!0),1==e.state){var d_m=1e3*e.id+e.star,d_w=1e3*e.id+(e.star+1);this.redPoint.visible=e.upGod()||e.upSkillKing()||BlackKingModel.instance.redXianWei(e),Config.xianyuan_starup[d_w]||(d_w=1e3*e.id+e.star),this.showMaskSp(!1),this.proBarTest.text=p_g+"/"+Config.xianyuan_starup[d_w].consume[0][1],this.proBar.value=p_g/Config.xianyuan_starup[d_w].consume[0][1],this.redPoint.visible=e.upGod()||e.upSkillKing()||BlackKingModel.instance.upStar(d_m,e.star)||SkillModel.instance.isRedPoint(e.id,e.lv,e.star,PassiveSkillType.GOD)||BlackKingModel.instance.redXianWei(e),BlackKingModel.instance.upStar(d_m,e.star)&&this.playStarEffect()}}}},d_w.prototype.onRemove=function(e){Okh(e,LED,l_r,this,Laya)},d_w.prototype.clearRes=function(){if(this.icon&&this.icon.texture){var e=this.icon.texture.url;this.icon.texture=null,e&&Laya.loader.clearTextureRes(e)}},d_w);function d_w(){var e=b_e.call(this)||this;return e.on(Laya.Event.REMOVED,e,e.onRemove),e.on(Laya.Event.ADDED,e,e.onAdd),e}e.BlackKingcell=d_m;var f_t,v_z=(f_t=ui.window.blackking.blackkingHelpUI,__extends(d_h,f_t),d_h.prototype.onAdded=function(){Ugo(this,Laya)},d_h.prototype.onClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":d_h.close()}},d_h.prototype.onRemoved=function(){Wnf(this,Laya)},d_h.open=function(){Irn(UIM,d_h)},d_h.close=function(){Sii(UIM,d_h)},d_h);function d_h(){var e=f_t.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.BlackKingHelpPanel=v_z}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.blackking.concludeking_starUI,__extends(b_s,p_l),b_s.prototype.init=function(){Upx(this,Laya)},b_s.open=function(e){Aky(e,UIM,b_s)},b_s.prototype.updateList=function(){var e=this.dataSource;if(e){LgcM.ins.heroVo,this.upstar.disabled=!1,this.maxstartxt.visible=!1,this.stardesc.visible=!0;var p_l=e.lv+1,p_g=1e3*e.id+e.star,b_s=p_g+1,d_u=e.star+1;Config.xianyuan_starup[b_s]||(this.upstarredPoint.visible=!1,b_s=p_g,d_u=e.star,this.stardesc.visible=!1,this.maxstartxt.visible=!0,this.upstar.disabled=!0,p_l>=Config.xianyuan_starup[p_g].lvLmt&&(p_l=Config.xianyuan_starup[p_g].lvLmt)),this.upstarredPoint.visible=BlackKingModel.instance.upStar(p_g,e.star),this.lvmaxtxt.style.color="#4a728e",this.lvmaxtxt.style.fontSize=24,this.lvmaxtxt.style.wordWrap=!0,this.lvmaxtxt.style.valign="top",this.lvmaxtxt.style.leading=6,this.lvmaxtxt.style.letterSpacing=3,this.lvmaxtxt.style.font="SimHei",this.lvmaxtxt.innerHTML=Utils.$((j_x("1628_371_189")+j_x("438_1081_1375")+j_x("15_2342_1067")+j_x("2128_2057")+"{1}"+j_x(2342)),Utils.setColor(Utils.$("{1}",Config.xianyuan_starup[b_s].lvLmt),"#008931"));var b_e=Config.CItem(Config.xianyuan_starup[b_s].consume[0][0]),d_m=BagModel.instance.getItemCountByItemID(b_e.id,BagTypeDefine.BAG_TYPE_ITEM).toString();this.consumvaluetxt.style.color="#4a728e",this.consumvaluetxt.style.fontSize=24,this.consumvaluetxt.style.wordWrap=!0,this.consumvaluetxt.style.valign="top",this.consumvaluetxt.style.leading=6,this.consumvaluetxt.style.letterSpacing=3,this.consumvaluetxt.style.font="SimHei",this.consumvaluetxt.innerHTML=Utils.$((j_x("1661_1502")+"{1}{2}/{3}"),Utils.setColor(Utils.$("{1}",b_e.name),"#008931"),d_m,Config.xianyuan_starup[b_s].consume[0][1]),this.skilldesctxt.text=(" "+j_x("1048_1745_189")+j_x(1486)+"")+Config.xianyuan_starup[b_s].desc,this.propdesctxt.text=" "+Config.xianyuan_starup[b_s].propName,TalismanModel.instance.changeActStar(this.star1,e.star+1),TalismanModel.instance.changeActStar(this.star2,d_u+1)}},b_s.prototype.onRemove=function(){Std(this,Laya,LED,l_r)},b_s.prototype.onAdded=function(){Iqm(this,Laya,LED,l_r)},b_s.prototype.onClick=function(p_l){var p_g=p_l.target,d_u=this.dataSource;switch(p_g.name){case"closebtn":b_s.close();break;case"upstar":b_p.checkConsume(Config.xianyuan_starup[1e3*d_u.id+(d_u.star+1)].consume)?(BlackKingModel.instance.reqGodStarUp(d_u.id),b_p.broadcastNotice((j_x("371_1148_402")+j_x(2142)),1,"#47ff00"),e.BlackKingTipPanel.open(d_u,2)):r_f.instance.isWindow(Config.xianyuan_starup[1e3*d_u.id+(d_u.star+1)].consume[0][0])}},b_s.close=function(){Eei(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.ConCludekinStarPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.blackking.black_fattercellUI,__extends(b_s,p_l),b_s.prototype.onAdd=function(e){Gxv(e,this,Laya)},b_s.prototype.setItemData=function(e){if(e){var p_l=Config.xianyuan_god[e.id],p_g=Resource.ResUrl.getIconUrl(p_l.suitPic),b_s=Resource.ResUrl.getIconUrl(p_l.art_name),d_u=BagModel.instance.getItemCountByItemID(p_l.cardConsume[0][0],BagTypeDefine.BAG_TYPE_ITEM),b_e=BagModel.instance.getItemCountByItemID(p_l.activeConsume[0][0],BagTypeDefine.BAG_TYPE_ITEM);if(!p_l)return;if(this.redPoint.visible=!1,this.bgQuaClip.index=p_l.quality-4,this.bgQuaClipc.index=p_l.quality-4,this.setIcon(this.icon,p_g,[2.6,3],[p_l.ui_offset[0]+-28,p_l.ui_offset[1]+4]),b_s&&this.setIcon(this.nameicon,b_s,[1,1],[1,21]),this.bgImg.visible=1!=e.state,this.activate.visible=0==e.state,this.starBox.visible=1==e.state,TalismanModel.instance.changeActStar(this.starBox,e.star+1),this.proBar.visible=this.proBarTest.visible=1!=e.state,1==e.state){var d_m=1e3*e.id+e.star,d_w=1e3*e.id+(e.star+1);Config.xianyuan_starup[d_m]||(this.redPoint.visible=e.upGod()||e.upSkillKing(),d_m-=1),Config.xianyuan_starup[d_w]||(d_w=1e3*e.id+e.star),this.redPoint.visible=e.upGod()||e.upSkillKing()||BlackKingModel.instance.upStar(d_m,e.star)}1!=e.state&&(d_u?(this.proBarTest.text=d_u+"/"+p_l.cardConsume[0][1],this.proBar.value=d_u/p_l.cardConsume[0][1]):(this.proBarTest.text=b_e+"/"+p_l.activeConsume[0][1],this.proBar.value=b_e/p_l.activeConsume[0][1]))}},b_s.prototype.onClick=function(p_l){var p_g=BlackKingModel.instance.getBlackKingById(this.dataSource);if(p_g){if(2==p_g.state)return void LED.event(l_r.BLACK_GODSUIT_OPEN);if(1==p_g.state)return void e.BlackKingCellPanel.open(p_g);b_p.broadcastNotice((j_x("2364_189_206")+j_x("2335_1796")+","+j_x("1777_531_2111")+j_x("1612_1422_2335")+j_x(1796))),r_f.instance.isWindow(Config.xianyuan_god[p_g.id].activeConsume[0][0])}},b_s.prototype.onRemove=function(e){Uwq(e,this,Laya)},b_s.prototype.setIcon=function(e,p_l,p_g,b_s){void 0===p_g&&(p_g=[0,0]),void 0===b_s&&(b_s=[0,0]),""!=p_l?(e.visible=!0,(e=Resource.ResManager.Instance.getImg(p_l,e)).scale(p_g[0],p_g[1]),e.pos(b_s[0],b_s[1])):e.visible=!1},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.REMOVED,e,e.onRemove),e.on(Laya.Event.ADDED,e,e.onAdd),e}e.BlackkingFatterItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.body.bodyBreakSucPanelUI,__extends(b_s,p_l),b_s.prototype.Init=function(){Mtz(this,Laya,Stage)},b_s.open=function(){UIM.open(b_s,null,{},!0,!0,!1,!1,{container:"top"})},b_s.prototype.onRemove=function(){Uik(this,Laya)},b_s.close=function(){Gnm(UIM,b_s,LED,l_r)},b_s.prototype.onAdd=function(){Qsv(this,Laya)},b_s.prototype.onclick=function(e){switch(e.target.name){case"modalSp":b_s.close()}},b_s.prototype.Updateview=function(){var e=bodyModel.ins._level,p_l=bodyModel.ins.getBodyCfg(e);this.propTxt.text=(j_x("1595_1168_1749")+j_x("1409_82_1920")+j_x("1955_2213_2057"))+p_l.name+"\n"+bodyModel.ins.showBodyPropStr(p_l),this.bodyClip.index=2<=e?1:0,this.lianhuaBg.gray=!(3<=e),this.body.gray=!1,this.efc1.visible=5<=e,this.efc1.play(),this.efc2.visible=6<=e,this.efc2.play(),this.efc3.visible=7<=e,this.efc3.play(),this.efc4.visible=8<=e,this.efc4.play(),this.efc5.visible=9<=e,this.efc5.play(),this.efc6.visible=10<=e,this.efc6.play()},b_s);function b_s(){var e=p_l.call(this)||this;return e.Init(),e}e.BodyBreakEffectePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.body.bodyDetailUI,__extends(d_u,p_l),d_u.open=function(){Ufb(UIM,d_u)},d_u.prototype.onAdded=function(){Awx(Laya,this)},d_u.prototype.delayAddListener=function(){Sji(Laya,this)},d_u.prototype.updateView=function(){var e=bodyModel.ins._level,p_l=bodyModel.ins._subLevel,p_g=bodyModel.ins.getBodyCfg(e),b_s=bodyModel.ins.getBodyGradeCfg(e,p_l),d_u=0;if(p_g&&b_s){var b_e=p_g.propPct?CharacterProperty.getHeroPropertys(p_g.propPct[0][0],p_g.propPct[0][1]):0,d_m=p_g.propPct?p_g.propPct[0][0]:"",d_w=CharacterProperty.getPropertys(p_g.prop,1,b_e,d_m),f_t=CharacterProperty.getPropertys(b_s.prop);CharacterProperty.mergePropertys(d_w,f_t),d_u=b_p.calPropFight(d_w),this.proList.array=d_w}this.pos((this.stage.width-this.width)/2,200),b_p.getNumSp(NumType.FIGHTING,d_u,this.combatSp,-6)},d_u.prototype.onRemove=function(){Wfu(Laya,this)},d_u.close=function(){Kym(UIM,d_u)},d_u.prototype.onStageClick=function(e){e&&e.target==this||d_u.close()},d_u.prototype.updateProItem=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("proNameLab"),d_u=e.getChildByName("proValueLab");b_s.text=d_v.getDesc(p_g.propOrdinal),d_u.text=p_g.value.toString()},d_u);function d_u(){var e=p_l.call(this)||this;return e.mouseEnabled=!0,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.proList.renderHandler=p_g.create(e,e.updateProItem,[],!1),e}e.BodyDetailPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.body.bodyBreakRewardUI,__extends(d_u,p_l),d_u.prototype.onAdded=function(){Cns(this,Laya)},d_u.prototype.updateItem=function(e,p_l){e&&(e.isShowName=!1,e.selectImg.removeSelf(),e.setItemData(e.dataSource))},d_u.prototype.resetSite=function(e){void 0===e&&(e=null),this.x=Stage.width-this.width>>1,this.y=Stage.height-this.height>>1},d_u.prototype.onRemove=function(){Clm(this,Laya)},d_u.prototype.updatePropItem1=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("propTxt"),d_u=bodyModel.ins._level,b_e=bodyModel.ins.getBodyCfg(d_u+1),d_m=bodyModel.ins._subLevel,d_w=bodyModel.ins.getBodyMaxGrade(d_u),f_t=(bodyModel.ins._subLevel,(j_x("1367_613_233")+"+0%+"));d_w<=d_m&&b_e&&p_g.name==b_e.propPct[0][0]&&(f_t=(j_x("1367_613_233")+"+")+b_e.propPct[0][1]/100+"%+"),b_s.text=p_g.desc+":"+f_t+b_p.calsulate(p_g.value)},d_u.prototype.updateView=function(){this.Uptiptop.visible=!1;var e=this.list_prop,p_l=this.list_Nextprop,p_g=null,b_s=[],d_u=bodyModel.ins._level,b_e=bodyModel.ins.getBodyCfg(d_u),d_m=bodyModel.ins.getBodyCfg(d_u+1),d_w=bodyModel.ins._subLevel,f_t=bodyModel.ins.getBodyMaxGrade(d_u),v_z=bodyModel.ins._subLevel,d_h=v_z+1,r_t=f_t<=d_w,t_n=bodyModel.ins.getBodyGradeCfg(d_u,v_z),f_y=bodyModel.ins.getBodyGradeCfg(d_u,d_h);if(bodyModel.ins.getBodyGradeCfg(d_u+1,1),this.gradeUpReward.visible=!r_t,this.breakReward.visible=r_t,b_e&&t_n){this.curentPeriod.text=r_t?b_e.name:b_e.name+""+t_n.name;var p_q=r_t?b_e.prop:t_n.prop;p_q=p_q||[["hpUpper",0],["attack",0],["defense",0],["armorBreak",0]],p_g=b_p.addProps(p_q,1,b_s),e.array=p_g}if(b_s=[],d_m){this.nextPeriod.text=r_t?d_m.name:b_e.name+""+f_y.name;var h_h=r_t?d_m.prop:f_y.prop;p_g=b_p.addProps(h_h,1,b_s),p_l.array=p_g;var n_j=r_t?b_p.getRewardDatas(d_m.reward):b_p.getRewardDatas(f_y.reward);this.RewardList.array=n_j,z_j.centerList(this.RewardList,n_j,5,this.width,0),this.Uptiptop.visible=!1}else f_y?(this.nextPeriod.text=b_e.name+""+f_y.name,h_h=f_y.prop,p_g=b_p.addProps(h_h,1,b_s),p_l.array=p_g,n_j=b_p.getRewardDatas(f_y.reward),this.RewardList.array=n_j,z_j.centerList(this.RewardList,n_j,5,this.width,0)):(p_l.array=[],this.Uptiptop.visible=!0,this.RewardList.visible=!1)},d_u.open=function(){Mqf(UIM,d_u)},d_u.prototype.updatePropItem=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("propTxt"),d_u=bodyModel.ins._level,b_e=bodyModel.ins.getBodyCfg(d_u),d_m=bodyModel.ins._subLevel,d_w=bodyModel.ins.getBodyMaxGrade(d_u),f_t=(bodyModel.ins._subLevel,(j_x("1367_613_233")+"+0%+"));d_w<=d_m&&b_e.propPct&&p_g.name==b_e.propPct[0][0]&&(f_t=(j_x("1367_613_233")+"+")+b_e.propPct[0][1]/100+"%+"),b_s.text=p_g.desc+" "+f_t+b_p.calsulate(p_g.value)},d_u.prototype.onClick=function(e){switch(e.target.name){case"backBtn":d_u.close()}},d_u.close=function(){Axc(UIM,d_u)},d_u);function d_u(){var b_s=p_l.call(this)||this;return b_s.on(Laya.Event.ADDED,b_s,b_s.onAdded),b_s.on(Laya.Event.REMOVED,b_s,b_s.onRemove),b_s.RewardList.selectEnable=!0,b_s.RewardList.array=null,b_s.RewardList.itemRender=e.ItemBox,b_s.RewardList.renderHandler=p_g.create(b_s,b_s.updateItem,null,!1),b_s}e.BodyRewardPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.body.bodyUpGradeSucPanelUI,__extends(d_u,p_l),d_u.prototype.Init=function(){Yhj(this,Laya,e,p_g,Stage)},d_u.prototype.resetSite=function(e){void 0===e&&(e=null),this.x=Stage.width-this.width>>1,this.y=Stage.height-this.height>>1},d_u.prototype.UpdateView=function(){var e=bodyModel.ins._level,p_l=bodyModel.ins._subLevel;this.Rewardbox.visible=!1,this.anibox.pos(-24,240);var p_g=e-1,b_s=p_l-1,d_u=bodyModel.ins.getBodyGradeCfg(e,p_l),b_e=bodyModel.ins.getBodyCfg(e),d_m=0==this.dataSource.index?bodyModel.ins.getBodyCfg(e):bodyModel.ins.getBodyCfg(p_g),d_w=0==this.dataSource.index?bodyModel.ins.getBodyGradeCfg(e,b_s):bodyModel.ins.getBodyGradeCfg(p_g,6),f_t=0==this.dataSource.index?bodyModel.ins.getBodyGradeCfg(e,p_l):bodyModel.ins.getBodyCfg(e+1);this.ani1.play(0,!1),this.stateLab.text=b_e?b_e.name+"."+d_u.name:"";var v_z=d_w.prop?d_w.prop:[],d_h=(d_m.prop&&d_m.prop,f_t.prop?f_t.prop:[]),r_t=v_z,t_n=StateModel.instance.ConnectProp(r_t,2,"","\n"),f_y=d_h,p_q=StateModel.instance.ConnectProp(f_y,2,"","\n");this.Before.text=t_n[1],this.Current.text=p_q[1],this.PropTitle.text=t_n[0];var h_h=f_t.reward;this.noRewardBox.visible=h_h&&0==h_h.length,this.Rewardbox.visible=h_h&&0<h_h.length;var n_j=b_p.getRewardDatas(h_h);this.RewardList.array=n_j,z_j.centerList(this.RewardList,n_j,3,this.RewardList.width,0)},d_u.prototype.onclick=function(e){switch(e.target.name){case"modalSp":d_u.close()}},d_u.open=function(e){UIM.open(d_u,["pvp.atlas"],{index:e},!1,!1,!0,!0)},d_u.prototype.onAdd=function(){Mno(this,Laya)},d_u.close=function(){Ypp(UIM,d_u)},d_u.prototype.updateItem=function(e,p_l){e&&(e.isShowName=!1,e.selectImg.removeSelf(),e.setItemData(e.dataSource))},d_u.prototype.onRemove=function(){Qsr(this,Laya)},d_u.prototype.OnAniCommplyte=function(e){Spc(e,this)},d_u);function d_u(){var e=p_l.call(this)||this;return e.dujieImageSize=[441,292],e.Bottomlabelpos=[554,405],e.Init(),e}e.BodyUpPropertyTip=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.chat.chatTallUI,__extends(b_s,p_l),b_s.open=function(){Mcm(UIM,b_s)},b_s.prototype.showItemAddBox=function(e){void 0===e&&(e=!0),this.btn_box.visible=e,this.btn_show.visible=!e,this.btn_hide.visible=e},b_s.prototype.onClick=function(p_l){var p_g=p_l.target;if(p_g)switch(p_g.name){case"closeBtn":case"backBtn":this.closeSelf();break;case"faceBtn":this.showFacePanel();break;case"sendBtn":if(!n_d.instance.IsCanSendMsg(this._curChannel))return void b_p.broadcastNotice((j_x("571_166_254")+j_x("558_822_1666")));var b_s=SyncTime.serverTime/1e3;if(this._curChannel==ChannelTypeDefine.WORLD&&0<this._expireTime-b_s)return void b_p.broadcastNotice((j_x("1176_1300_1629")+j_x("973_166")));if(this._curChannel==ChannelTypeDefine.CROSS&&0<this._crossExpireTime-b_s)return void b_p.broadcastNotice((j_x("1176_1300_1629")+j_x("973_166")));this.sendMsg();break;case"newImg":Laya.Tween.to(this.chatPanel.vScrollBar,{value:this.chatPanel.vScrollBar.max},(this.chatPanel.vScrollBar.max-this.chatPanel.vScrollBar.value)/10);break;case"btn_show":this.showItemAddBox();break;case"btn_hide":this.showItemAddBox(!1);break;case"btn_bag":e.ChatItemShowPanel.open(0);break;case"btn_talisman":if(!p_k.instance.checkSystemOpen(FuncDefine.talisman))return void b_p.broadcastNotOpen();e.ChatTalismanShowPanel.open();break;case"btn_spirit":break;case"noTip":SetupModel.instance.isShowCrossTall=this.noTip.selected;break;case"redPacketBtn":RedPacketModel.ins.reqGetRedBigInfo();break;case"btn_forBid":n_d.instance.reqSlienceRecord(1)}},b_s.prototype.onTabChange=function(e,p_l){switch(this.shade.visible=!1,this.noTip.visible=!1,this.onInputChange(this.inputTxt),e){case 0:this._curChannel=ChannelTypeDefine.WORLD,this.inputTxt.text=this._worldTxt;break;case 1:if(!p_k.instance.checkSystemOpen(FuncDefine.guild))return this.channelTab.selectedIndex=p_l,void b_p.broadcastNotice((j_x("155_1186_796")+j_x("1413_2142_1919")+j_x("1865_155_1186")));if(!(GuildModel.instance.hasGuild||LgcM.ins.heroVo&&LgcM.ins.heroVo.guildID))return this.channelTab.selectedIndex=p_l,void b_p.broadcastNotice((j_x("1777_2217_1738")+j_x("320_223_2456")+j_x("796_1413")));n_d.instance.isChatGuildRedPoint=!1,this.guildRedPoint.visible=!1,this._curChannel=ChannelTypeDefine.GUILD,n_d.instance.checkReqRecList(ChannelTypeDefine.GUILD),this.inputTxt.text=this._guildTxt;break;case 2:this.shade.visible=!0,this._curChannel=ChannelTypeDefine.HEARSAY,this.inputTxt.text="";break;case 3:this.noTip.visible=!0,this._curChannel=ChannelTypeDefine.CROSS,n_d.instance.checkReqRecList(ChannelTypeDefine.CROSS),this.inputTxt.text=this._crossTxt}this.onChatRecLstUpdate()},b_s.prototype.onMouseDown=function(e){UIM.instance.getMainUI().contains(e.target)?this._downTarget=e.target:this.onStageClick(e)},b_s.prototype.onGetItemAdd=function(e){if(e)if(this.showItemAddBox(!1),this._itemArr&&""==this.inputTxt.text&&(this._itemArr.length=0),this._itemArr&&2<this._itemArr.length)b_p.broadcastNotice((j_x("1081_2307_173")+j_x(2456)+"3"+j_x("844_1505_1399")+j_x("281_1590")));else{for(var p_l=0;p_l<this._itemArr.length;p_l++)if(this._itemArr[p_l].id===e.id)return;var p_g;p_g=1<e.amount?this.inputTxt.text+Utils.$("[{1}]x{2}",e.name,e.amount):this.inputTxt.text+Utils.$("[{1}]",e.name),this.inputTxt.text=p_g,this._itemArr.push(e)}},b_s.prototype.onStageClick=function(e){var p_l=e.target;this._facePanel&&this._facePanel.parent&&(this._facePanel.contains(p_l)||p_l===this._facePanel||p_l===this.faceBtn||this._facePanel.parent.removeChild(this._facePanel)),p_l!=this.btn_hide&&p_l!=this.btn_show&&p_l!=this.btn_talisman&&p_l!=this.btn_bag&&this.showItemAddBox(!1)},b_s.prototype.resetChatLinePos=function(){var e;this._msgTotalHeight=0;for(var p_l=this._chatLineArr.length,p_g=0;p_g<p_l;p_g++)(e=this._chatLineArr[p_g]).y=this._msgTotalHeight,this._msgTotalHeight+=e.height},b_s.prototype.onEnterFrame=function(){Qll(this)},b_s.prototype.onScrollChanged=function(e){e===this.chatPanel.vScrollBar.max&&(this.newImg.visible=!1,this._newRecNum=0)},b_s.prototype.onKeyDown=function(e){if(e.keyCode==Laya.Keyboard.ENTER)this.sendMsg();else if(e.keyCode==Laya.Keyboard.UP)(p_l=n_d.instance.sendHistory)&&(null===this._tmpInputTxt&&(this._tmpInputTxt=this.inputTxt.text),this._historyIndex<p_l.length-1&&(++this._historyIndex,this.inputTxt.text=p_l[p_l.length-1-this._historyIndex]));else if(e.keyCode==Laya.Keyboard.DOWN){var p_l;(p_l=n_d.instance.sendHistory)&&0<=this._historyIndex&&(--this._historyIndex,this._historyIndex<0?(this.inputTxt.text=this._tmpInputTxt,this._tmpInputTxt=null):this.inputTxt.text=p_l[p_l.length-1-this._historyIndex])}},b_s.prototype.onMouseUp=function(e){var p_l=this._downTarget;this._downTarget=null,e.target===p_l&&this.onStageClick(e)},b_s.prototype.onGetFaceAdd=function(e){var p_l=this.inputTxt.text;50<(p_l+=e).length?b_p.broadcastNotice((j_x("1300_1117_1012")+j_x("173_2456_1067")+j_x(2128))):this.inputTxt.text=p_l},b_s.prototype.onChatRecLstUpdate=function(){Mlg(n_d,this,FrameRunType)},b_s.close=function(){Ioa(UIM,b_s)},b_s.prototype.sendMsg=function(){Qyx(n_d,this)},b_s.prototype.onInputChange=function(e){var p_l=SyncTime.serverTime/1e3;if(this._curChannel==ChannelTypeDefine.WORLD){var p_g=this._expireTime-p_l;return Laya.timer.clear(this,this.onTimer1),0<p_g?Laya.timer.loop(1e3,this,this.onTimer,[e,this._expireTime]):Laya.timer.clear(this,this.onTimer),void(this._worldTxt=e.text)}if(this._curChannel==ChannelTypeDefine.CROSS)return Laya.timer.clear(this,this.onTimer),0<(p_g=this._crossExpireTime-p_l)?Laya.timer.loop(1e3,this,this.onTimer1,[e,this._crossExpireTime]):Laya.timer.clear(this,this.onTimer1),void(this._crossTxt=e.text);Laya.timer.clear(this,this.onTimer),Laya.timer.clear(this,this.onTimer1);var b_s=e.text;this._curChannel==ChannelTypeDefine.GUILD&&(this._guildTxt=b_s),(GPlatform.isRelease||"@gm "!==b_s.slice(0,4)&&"@cmd "!==b_s.slice(0,5))&&(50<b_s.length&&(b_s=b_s.slice(0,50),b_p.broadcastNotice((j_x("1300_1117_1012")+j_x("173_2456_1067")+j_x(2128)))),e.text=b_s)},b_s.prototype.openSlienceRecordPanel=function(){Oib(e)},b_s.prototype.showFacePanel=function(){this._facePanel||(this._facePanel=new e.ChatFacePanel),null==this._facePanel.parent?(this._facePanel.x=this.width-this._facePanel.width>>1,this._facePanel.y=this.faceBtn.y-this._facePanel.height-5,this.faceBtn.parent.addChild(this._facePanel),this._facePanel.on("faceAdd",this,this.onGetFaceAdd)):(this._facePanel.parent.removeChild(this._facePanel),this._facePanel.off("faceAdd",this,this.onGetFaceAdd))},b_s.prototype.updateMySlienceState=function(){Gzn(this,n_d)},b_s.prototype.onAdded=function(){this._frameRun||(this._frameRun=new FrameRunManager(1)),this.newImg.visible=!1,this.closeBtn.on(Laya.Event.CLICK,this,this.onClick),this.backBtn.on(Laya.Event.CLICK,this,this.onClick),this.sendBtn.on(Laya.Event.CLICK,this,this.onClick),this.faceBtn.on(Laya.Event.CLICK,this,this.onClick),this.newImg.on(Laya.Event.CLICK,this,this.onClick),this.btn_show.on(Laya.Event.CLICK,this,this.onClick),this.btn_hide.on(Laya.Event.CLICK,this,this.onClick),this.btn_bag.on(Laya.Event.CLICK,this,this.onClick),this.btn_talisman.on(Laya.Event.CLICK,this,this.onClick),this.inputTxt.on(Laya.Event.INPUT,this,this.onInputChange),this.noTip.on(Laya.Event.CLICK,this,this.onClick),this.redPacketBtn.on(Laya.Event.CLICK,this,this.onClick),this.btn_forBid.on(Laya.Event.CLICK,this,this.onClick),Laya.stage.on(Laya.Event.KEY_DOWN,this,this.onKeyDown),Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),LED.on(l_r.CHAT_REC_LST_UPDATE,this,this.onChatRecLstUpdate),LED.on(l_r.CHAT_REC_ADD,this,this.onChatRecAdd),LED.on(l_r.CHAT_ITEM_SHOW,this,this.onGetItemAdd),LED.on(l_r.CHAT_CROSS_OPEN,this,this.isOpenCrossChat),LED.on(l_r.UDATE_MY_SLIENCE_STATE,this,this.updateMySlienceState),LED.on(l_r.UPDATE_SLIENCE_RECORD,this,this.openSlienceRecordPanel),LED.on(l_r.UPDATE_DA_TEAM_LIST,this,this.openDaTeamListPanel),this.chatPanel.vScrollBar.changeHandler=Laya.Handler.create(this,this.onScrollChanged,null,!1),this._clipTab.on("tabSelect",this,this.onTabChange),this._curChannel==ChannelTypeDefine.GUILD?this.guildRedPoint.visible=!1:this.guildRedPoint.visible=n_d.instance.isChatGuildRedPoint,this.isOpenCrossChat(),this.onChatRecLstUpdate(),this.inputTxt.focus=!0,this.noTip.selected=SetupModel.instance.isShowCrossTall,this.noTip.visible=this._curChannel==ChannelTypeDefine.CROSS,n_d.instance.checkReqRecList(ChannelTypeDefine.WORLD),Laya.timer.frameLoop(1,this,this.onEnterFrame),this.onInputChange(this.inputTxt),this.showItemAddBox(!1)},b_s.prototype.onRemove=function(){Kvp(this,Laya,LED,l_r,FrameRunType)},b_s.prototype.openDaTeamListPanel=function(){if(DoubleAreaModel.instance._isDissolution)b_p.broadcastNotice((j_x("2413_1869_1300")+j_x("1048_114")));else{var p_l=DoubleAreaModel.instance.getMyTeamId();DoubleAreaModel.instance.checkHaveTeam()&&p_l!=DoubleAreaModel.instance._teamId?b_p.broadcastNotice((j_x("1749_1300_1896")+j_x("383_2413"))):e.DoubleTeamMainPanel.open(!0)}},b_s.prototype.closeSelf=function(){Ibj(b_s)},b_s.prototype.delayAddChatContent=function(e){e&&(this.addChatContent(e),this.chatPanel.vScrollBar.value=this.chatPanel.vScrollBar.max)},b_s.prototype.isOpenCrossChat=function(){var e=this.channelTab.getChildByName("item3");if(e){var p_l=e.getChildByName("lock");CrossModel.ins.isCrossOpen,e.gray=!1,p_l.visible=!1}},b_s.prototype.sendMsgNew=function(){n_d.instance.sendMsg((j_x("1584_297_1939")+j_x("659_221_174")+"_")+999999*Math.random(),this._curChannel,this._itemArr)&&this._itemArr&&(this._itemArr.length=0),this.inputTxt.text="",this._historyIndex=-1,this._tmpInputTxt=null},b_s.prototype.onTimer1=function(e,p_l){var p_g=SyncTime.serverTime/1e3;if(0<p_l-p_g){var b_s,d_u=p_l-p_g,b_e=Math.round(d_u/60);b_s=d_u<60?Utils.$((j_x("1749_1629")+"{1}"+j_x("973_166_743")+","+j_x("1111_1902_1702")+j_x(2460)+":{2}"+j_x(2081)),this._targetName,Math.floor(d_u)):Utils.$((j_x("1749_1629")+"{1}"+j_x("973_166_743")+","+j_x("1111_1902_1702")+j_x(2460)+":{2}"+j_x("2224_1394")),this._targetName,b_e),e.text=b_s}else Laya.timer.clear(this,this.onTimer1),e.text=""},b_s.prototype.onTimer=function(e,p_l){var p_g=SyncTime.serverTime/1e3;if(0<p_l-p_g){var b_s,d_u=p_l-p_g,b_e=Math.round(d_u/60);b_s=d_u<60?Utils.$((j_x("1749_1629")+"{1}"+j_x("973_166_743")+","+j_x("1111_1902_1702")+j_x(2460)+":{2}"+j_x(2081)),this._targetName,Math.floor(d_u)):Utils.$((j_x("1749_1629")+"{1}"+j_x("973_166_743")+","+j_x("1111_1902_1702")+j_x(2460)+":{2}"+j_x("2224_1394")),this._targetName,b_e),e.text=b_s}else Laya.timer.clear(this,this.onTimer),e.text=""},b_s.prototype.onChatRecAdd=function(e){this._curChannel!=ChannelTypeDefine.GUILD?this.guildRedPoint.visible=n_d.instance.isChatGuildRedPoint:(n_d.instance.isChatGuildRedPoint=!1,this.guildRedPoint.visible=!1),n_d.instance.isShow(this._curChannel,e.channel)&&(this.chatPanel.vScrollBar.value===this.chatPanel.vScrollBar.max?(this.addChatContent(e),this.chatPanel.vScrollBar.value=this.chatPanel.vScrollBar.max):(this.addChatContent(e),this.newImg.visible=!0,++this._newRecNum,this.newLab.text=Utils.$((j_x("1787_1661_1590")+" {1} "+j_x(1320)),this._newRecNum)))},b_s.prototype.addChatContent=function(e,p_l){if(e&&""!=e.msg){if(this._chatLineArr.length>=n_d.instance.getChatRecSize(e.channel)){var p_g=this._chatLineArr.shift();p_g.removeSelf(),p_g.init(),Laya.Pool.recover("ChatTallLine",p_g),this.resetChatLinePos()}var b_s=Laya.Pool.getItemByClass("ChatTallLine",b_e);b_s.parser(e,this.chatPanel,0,p_l,this._curChannel),this.chatPanel.addChild(b_s),b_s.y=this._msgTotalHeight,this._msgTotalHeight+=b_s.height,this._chatLineArr.push(b_s),this.chatPanel.vScrollBar.max=this.chatPanel.contentHeight}},b_s.prototype.clearAllLine=function(){var e;this._msgTotalHeight=0;for(var p_l=this._chatLineArr.length,p_g=0;p_g<p_l;p_g++)(e=this._chatLineArr[p_g]).removeSelf(),e.init(),p_g<n_d.instance.getChatRecSize(this._curChannel)?Laya.Pool.recover("ChatTallLine",e):(e.dispose(),e=null);this._chatLineArr.length=0},b_s.nameColor="#4a728e",b_s.nameFontSize=26,b_s.vipSmallUrl="res/ui/mainUI/vip.png",b_s.vipSmallWidth=62,b_s.vipSmallHeight=24,b_s.disMsg=-10,b_s.disHeadAndFrame=0,b_s.disSpace=-3,b_s.headWidth=103,b_s.headHeight=103,b_s.headIconOffset=8,b_s.noticMarginX=30,b_s.noticTxtMarginX=20,b_s.noticTxtMarginY=20,b_s.defaultMargin=[25,40,25,30,10],b_s.disNoFashionAvatar=15,b_s.disNameAndFrame=40,b_s);function b_s(){var e=p_l.call(this)||this;return e._itemArr=[],e._chatLineArr=[],e._msgTotalHeight=0,e._curChannel=ChannelTypeDefine.WORLD,e._newRecNum=0,e._targetName="",e._expireTime=0,e._crossTargetName="",e._crossExpireTime=0,e._clipTab=new p_c(e.channelTab,!1,!0),e._worldTxt="",e._guildTxt="",e._crossTxt="",e._downTarget=null,e._historyIndex=-1,e._tmpInputTxt=null,e.mouseEnabled=!0,e.chatPanel.vScrollBarSkin="",e.chatPanel.vScrollBar.isVertical=!0,e.chatPanel.vScrollBar.elasticBackTime=600,e.chatPanel.vScrollBar.elasticDistance=200,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.ChatTallPanel=p_g;var d_u,b_e=(d_u=laya.ui.Box,__extends(d_m,d_u),d_m.prototype.onLink=function(e){var p_l=ActivityModel.instance.firstRechargeVo;"openWin:1309"==e&&p_l.gold<=0&&(e="openWin:1322"),n_d.instance.chatMsgTxtLink(e,this._textfield)},d_m.prototype.getNameLab=function(){return this._nameLab||(this._nameLab=new Laya.Label,this._nameLab.font=b_p.config.font,this._nameLab.color=p_g.nameColor,this._nameLab.fontSize=p_g.nameFontSize,this._nameBox.addChild(this._nameLab)),this._nameLab.visible=!0,this._nameLab},d_m.prototype.DrawTalkTag=function(e,p_l,b_s,d_u){var b_e=new Laya.Point(0,b_s);if(e&&(e.channel===ChannelTypeDefine.WORLD||e.channel===ChannelTypeDefine.CROSS||e.channel===ChannelTypeDefine.GUILD)){this._TagLabel||(this._TagLabel=new Laya.Label,this._TagLabel.font=b_p.config.font,this._TagLabel.color="#1860ca",this._TagLabel.fontSize=p_g.nameFontSize,this._nameBox.addChild(this._TagLabel));var d_m=this._TagLabel;if(d_m.visible=!0,e.channel===ChannelTypeDefine.WORLD)d_m.text=(""+j_x("1952_843")+""),d_m.color="#1860ca";else if(e.channel===ChannelTypeDefine.CROSS)d_m.text=Utils.$("S{1}",e.sid),d_m.color="#ba16dd";else if(e.channel===ChannelTypeDefine.GUILD){var d_w="";if(d_u==ChannelTypeDefine.GUILD)switch(e.guildOffice){case 1:d_w=(j_x("627_796"));break;case 2:d_w=(j_x("1066_975"));break;case 3:d_w=(j_x("1619_799"));break;case 4:d_w=(j_x("1372_1860"));break;case 5:d_w=(j_x("402_2141"));break;default:d_w=""}else d_w=(j_x("796_1413"));d_m.color="#c17200",d_m.text=""+d_w+""}else d_m.text="";b_e.x=d_m.width,d_m.x=p_l,b_s<p_g.nameFontSize&&(b_e.y=p_g.nameFontSize)}return b_e},d_m.prototype.DrawTitle=function(e,p_l,p_g){var b_s=new Laya.Point(0,p_g);if(e){this._titleImg||(this._titleImg=new Laya.Image,this._nameBox.addChild(this._titleImg));var d_u=this._titleImg;d_u.visible=!0,d_u.skin=Resource.ResUrl.getIconUrl(e.icon),d_u.size(e.chatSize[0],e.chatSize[1]),d_u.y=this._nameLab.y-(e.chatSize[1]-this._nameLab.height>>1),d_u.x=p_l,b_s.x=e.chatSize[0],p_g<e.chatSize[1]&&(b_s.y=e.chatSize[1])}return b_s},d_m.prototype.caclFrameBorder=function(e){var p_l=e?e.sizeGrid:p_g.defaultMargin;return 4!==p_l.length?[0,0]:[Number(p_l[1])+Number(p_l[3]),Number(p_l[0])+Number(p_l[2])]},d_m.prototype.onFrameLoaded=function(e){Kog(e,this,Laya)},d_m.prototype.cleanup=function(){this._nameLab&&(this._nameLab.destroy(),this._nameLab=null),this._vipImg&&(this._vipImg.destroy(),this._vipImg=null),this._titleImg&&(this._titleImg.destroy(),this._titleImg=null),this._nameBox&&(this._nameBox.destroy(),this._nameBox=null),this._textfield&&(this._textfield.off(Laya.Event.LINK,this,this.onLink),this._textfield.destroy(),this._textfield=null),this._headBox&&(this._headBox.cleanup(),this._headBox.destroy(),this._headBox=null),this._textFrame&&(this._textFrame.destroy(),this._textFrame=null),this._TagLabel&&(this._TagLabel.destroy(),this._TagLabel=null)},d_m.prototype.dispose=function(){Mqo(this)},d_m.prototype.parser=function(e,p_l,b_s,d_u,b_e){void 0===b_s&&(b_s=0),void 0===b_e&&(b_e=0),this._textFrame||(this._textFrame=new Laya.Image,this.addChild(this._textFrame));var d_m=this._textFrame;this._textfield||(this._textfield=new Laya.HTMLDivElement,this.addChild(this._textfield));var d_w=this._textfield;if(d_m.visible=!0,d_w.visible=!0,e.channel===ChannelTypeDefine.HEARSAY||e.channel===ChannelTypeDefine.SYSTEM||e.channel===ChannelTypeDefine.CROSS_SYSTEM||e.channel===ChannelTypeDefine.GUILD&&!e.pid||0!=(1&e.flags)){var v_z=void 0,d_h=void 0,r_t=void 0,t_n=void 0;if(0!=(1&e.flags)){d_m.skin=Config.global[GlobalDefine.friend_give_chat_panel].s_info,d_m.sizeGrid=Config.global[GlobalDefine.friend_give_chat_grid].s_info;var f_y=Config.global[GlobalDefine.friend_give_chat_margin].s_info.split(",");v_z=Number(f_y[0]),t_n=Number(f_y[1]),d_h=Number(f_y[2]),r_t=Number(f_y[3])}else d_m.skin="res/ui/chat/notice_pannel.png",d_m.sizeGrid="18,18,18,18",d_h=v_z=p_g.noticTxtMarginY,r_t=t_n=p_g.noticTxtMarginX;d_w.style.font=b_p.config.font,d_w.style.valign="middle",d_w.on(Laya.Event.LINK,this,this.onLink),d_w.style.letterSpacing=1;var p_q=e.channel==ChannelTypeDefine.CROSS_SYSTEM?Config.color[ChannelTypeDefine.CROSS+1]:Config.color[e.channel+1];d_w.style.color=p_q.color2,d_w.style.fontSize=p_q.fontSize2,d_w.innerHTML=e.msg,d_w.width=p_l.width-(2*p_g.noticMarginX+r_t+t_n),d_w.height=d_w.contextHeight,d_w.y+=v_z;var h_h=d_w.contextWidth+r_t+t_n,n_j=d_w.contextHeight+v_z+d_h;d_m.size(h_h,n_j),d_w.x=(p_l.width-d_w.contextWidth)/2,d_m.x=(p_l.width-d_w.contextWidth-r_t-t_n)/2,d_m.y=0,this.height=d_m.height+22}else{this._nameBox||(this._nameBox=new Laya.Box,this.addChild(this._nameBox)),this._nameBox.visible=!0,this._headBox||(this._headBox=new f_t(d_u),this.addChild(this._headBox));var j_l=Config.fashion_fashion[e.bubble];if(e.bubble&&j_l){var l_m=Resource.ResUrl.getIconUrl(j_l.avatar[0]);d_m=Resource.ResManager.Instance.getImg(l_m,d_m),this.onFrameLoaded(j_l),d_m.on(Laya.Event.COMPLETE,this,this.onFrameLoaded,[j_l])}else d_m.skin="res/ui/chat/chat_personal_pannel.png",d_m.sizeGrid="24,41,25,29";d_w.style.font=b_p.config.font,d_w.style.leading=5,d_w.style.valign="middle",d_w.style.letterSpacing=2,d_w.on(Laya.Event.LINK,this,this.onLink),d_w.style.letterSpacing=1,this.pos(b_s,0);var z_m=Resource.ResManager.getHeadUrl(e.entryId,e.headIcon),h_b="res/ui/chat/head_pannel.png",t_i=!1,n_f=Config.fashion_fashion[e.fashionAvatar];n_f&&n_f.avatar&&0<n_f.avatar.length&&(h_b=Resource.ResUrl.getIconUrl(n_f.avatar[0]),t_i=!0),this._headBox.setHeader(e,z_m,h_b,t_i);var t_s=Config.title_title[e.title],v_n=e.name||"",b_o=0,b_x=this.getNameLab();if(b_x.text=e.channel!=ChannelTypeDefine.PM||b_p.isSameServer(e.sid)?v_n:"s"+e.sid+v_n,e.pid!==b_p.playerId){var v_s=0;v_s+=(r_c=this.DrawTalkTag(e,v_s,b_o,b_e)).x,(b_o=r_c.y)<b_x.height&&(b_o=b_x.height),b_x.x=v_s+3,v_s+=b_x.width+3,v_s+=(r_c=this.DrawTitle(t_s,v_s,b_o)).x,b_o=r_c.y}else{var r_c;v_s=0,v_s+=(r_c=this.DrawTitle(t_s,v_s,b_o)).x,b_o=r_c.y,b_x.x=v_s,b_o<b_x.height&&(b_o=b_x.height),v_s+=b_x.width+3,v_s+=(r_c=this.DrawTalkTag(e,v_s,b_o,b_e)).x,b_o=r_c.y}this._nameBox.height<b_o&&(this._nameBox.height=b_o),this._nameLab.height<b_o&&(this._nameLab.y=b_o-this._nameLab.height>>1),this._TagLabel&&this._TagLabel.height<b_o&&(this._TagLabel.y=b_o-this._TagLabel.height>>1),this._vipImg&&this._vipImg.height<b_o&&(this._vipImg.y=b_o-this._vipImg.height>>1),t_s&&this._titleImg&&t_s.chatSize[1]<b_o&&(this._titleImg.y=b_o-t_s.chatSize[1]>>1),p_q=Config.color[e.channel+1],j_l&&j_l.color&&0<j_l.color.length?d_w.style.color=j_l.color:d_w.style.color=p_q.color2,d_w.style.fontSize=p_q?p_q.fontSize2:22,d_w.innerHTML=e.msg;var b_n=j_l?j_l.margin:p_g.defaultMargin,v_p=p_g.disSpace;d_w.width=p_l.width-2*(p_g.headHeight+b_n[4]+b_n[3]+Math.max(0,p_g.disHeadAndFrame)),h_h=d_w.contextWidth+b_n[3]+b_n[1]+b_n[4],n_j=d_w.contextHeight+b_n[0]+b_n[2];var d_d=this.caclFrameBorder(j_l),h_q=d_d[0],x_f=d_d[1];if(e.fashionAvatar){var j_s=Config.fashion_fashion[e.fashionAvatar].skew;d_w.y=this._nameBox.height+j_s+b_n[0]}else d_w.y=this._nameBox.height+p_g.disNoFashionAvatar+b_n[0];n_j<x_f&&(d_w.y+=x_f-b_n[0]-b_n[2]-d_w.contextHeight>>1),d_m.size(h_h<h_q?h_q:h_h,n_j<x_f?x_f:n_j),d_m.anchorX=.5,e.pid!==b_p.playerId?(this._nameBox.x=this._headBox.width+p_g.disHeadAndFrame+b_n[4]-v_p-10,d_m.x=this._headBox.x+this._headBox.width-p_g.disHeadAndFrame+(d_m.width>>1)-v_p,e.fashionAvatar?(j_s=Config.fashion_fashion[e.fashionAvatar].skew,d_m.y=this._nameBox.height+j_s):d_m.y=this._nameBox.height+p_g.disNoFashionAvatar,d_w.x=this._headBox.x+this._headBox.width-p_g.disHeadAndFrame+b_n[4]+b_n[3]-v_p,h_h<h_q&&(d_w.x+=d_m.width-b_n[3]-b_n[1]-d_w.contextWidth>>1)):(d_m.scaleX=-1,this._headBox.x=p_l.width-this._headBox.width,this._nameBox.x=p_l.width-this._headBox.width-this._nameBox.width-p_g.disHeadAndFrame-b_n[4]+v_p+10,d_m.x=this._headBox.x+p_g.disHeadAndFrame-(d_m.width>>1)+v_p,e.fashionAvatar?(j_s=Config.fashion_fashion[e.fashionAvatar].skew,d_m.y=this._nameBox.height+j_s):d_m.y=this._nameBox.height+p_g.disNoFashionAvatar,d_w.x=p_l.width-this._headBox.width-p_g.disHeadAndFrame-b_n[4]-b_n[3]-d_w.contextWidth+v_p,n_j<x_f&&(d_w.x-=d_m.width-b_n[3]-b_n[1]-d_w.contextWidth>>1));var f_u=t_s?(t_s.chatSize[1]-b_p.config.fontSize)/2:0;this._headBox.y=this._nameBox.y+f_u;var l_d=this._nameBox.height+p_g.disNameAndFrame+d_m.height,f_n=this._headBox.y+this._headBox.height;this.height=Math.max(l_d,f_n)+p_g.disMsg+p_g.disHeadAndFrame,this._nameBox.y=d_m.y-(this._nameBox.height/2+10)}},d_m.prototype.init=function(){this._nameLab&&(this._nameLab.visible=!1,this._nameLab.text="",this._nameLab.pos(0,0)),this._vipImg&&(this._vipImg.visible=!1,this._vipImg.skin="",this._vipImg.pos(0,0)),this._titleImg&&(this._titleImg.visible=!1,this._titleImg.skin="",this._titleImg.pos(0,0)),this._nameBox&&(this._nameBox.visible=!1,this._nameBox.size(0,0),this._nameBox.pos(0,0)),this._textfield&&(this._textfield.off(Laya.Event.LINK,this,this.onLink),this._textfield.innerHTML="",this._textfield.width=0,this._textfield.pos(0,0)),this._headBox&&(this._headBox.cleanup(),this._headBox.visible=!1,this._headBox.pos(0,0)),this._textFrame&&(this._textFrame.visible=!1,this._textFrame.skin="",this._textFrame.scaleX=1,this._textFrame.anchorX=0,this._textFrame.pos(0,0)),this._TagLabel&&(this._TagLabel.visible=!1,this._TagLabel.text="",this._TagLabel.pos(0,0))},d_m);function d_m(){var e=d_u.call(this)||this;return e._nameBox=null,e._nameLab=null,e._vipImg=null,e._titleImg=null,e._textfield=null,e._headBox=null,e._textFrame=null,e._TagLabel=null,e}e.ChatTallLine=b_e;var d_w,f_t=(d_w=Laya.Box,__extends(v_z,d_w),v_z.prototype.cleanup=function(){Olh(this,Laya)},v_z.prototype.setHeader=function(e,p_l,b_s,d_u){var b_e;this.visible=!0,this.headDiv.visible=!0,this.frameImg.visible=!0,this.chatVo=e,this.headDiv.skin=p_l,b_e=d_u?(this.frameImg.skin=b_s,this.width=145,this.height=145,10):(this.frameImg.skin=b_s,this.width=this.frameImg.width,this.height=this.frameImg.height,7),this.headDiv.x=(this.width-p_g.headWidth)/2,this.headDiv.y=(this.height-p_g.headHeight)/2,e.vip?(this.vipImg?this.vipImg.visible=!0:(this.vipImg=new Laya.Image,this.addChild(this.vipImg)),this.vipImg.skin=p_g.vipSmallUrl,this.vipImg.pos((this.width-this.vipImg.width)/2,this.headDiv.y+p_g.headHeight-this.vipImg.height+b_e)):this.vipImg&&(this.vipImg.visible=!1),b_p.playerId!==e.pid&&(this.headDiv.mouseThrough=!0,this.on(Laya.Event.CLICK,this,this.onClick))},v_z.prototype.onClick=function(){var p_l=new Laya.Point;(p_l=this.localToGlobal(p_l)).x+=this.width-5,p_l.y+=this.height/2+this.headDiv.y;var p_g=[CheckBtnType.AddFriend,CheckBtnType.RoleInfo,CheckBtnType.PrivateChat,CheckBtnType.AddBlack,CheckBtnType.Forbidden];if(this.isPrivateChat)e.CheckFriend.open(this.chatVo.pid,this.chatVo.name,3,p_l,p_g);else if(this.chatVo.channel==ChannelTypeDefine.CROSS&&this.chatVo.sid!=b_p.config.mergSerId)e.CheckFriend.open(this.chatVo.pid,this.chatVo.name,3,p_l,p_g,!0),p_g.shift();else if(this.chatVo.channel==ChannelTypeDefine.GUILD)p_g=[CheckBtnType.AddFriend,CheckBtnType.RoleInfo,CheckBtnType.PrivateChat,CheckBtnType.AddBlack],e.CheckFriend.open(this.chatVo.pid,this.chatVo.name,3,p_l,p_g);else{var b_s=this.chatVo.channel==ChannelTypeDefine.CROSS;e.CheckFriend.open(this.chatVo.pid,this.chatVo.name,3,p_l,p_g,b_s)}},v_z);function v_z(e){var p_l=d_w.call(this)||this;return p_l.headDiv=new Laya.Image,p_l.frameImg=new Laya.Image,p_l.isPrivateChat=e,p_l.addChild(p_l.headDiv),p_l.addChild(p_l.frameImg),p_l}e.HeadBox=f_t}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.chat.chatStateUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){this.nameTitle.on(Laya.Event.LINK,this,this.clickHtml),this.nameTitle.innerHTML="",this.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.CHAT_CROSS_OPEN,this,this.onClickRegister),n_d.instance.reqChatPrivatePlr(),null!=this._pid&&(n_d.instance.getPrivatePlr(this._pid)||d_o.instance.reqPlayerinfo(CommonOpType.CHAT,this._pid))},b_s.prototype.updateFirstPlayerInfo=function(){var e=n_d.instance,p_l=e.fristPlayerVO;if(!e.getPrivatePlr(p_l.pid)){var p_g=this.plrLst.array;p_g?p_g.push(p_l):p_g=[p_l],this.plrLst.array=p_g,this.plrLst.selectedIndex=p_g.length-1}},b_s.prototype.onChatPlrSelect=function(e){if(0<=e){var p_l=this.plrLst.array[e];this._pid=p_l?p_l.pid:0,this.showFunLogic(p_l),this.event("plrSelect",[e,p_l])}else this._pid=0,this.event("plrSelect",[e])},b_s.prototype.onClick=function(p_l){var p_g=p_l.target;switch(p_g.name){case"hideBtn":this.delPlr(p_g.parent);break;case"nameLab":break;case"plrLab":var b_s=new Laya.Point;(b_s=p_g.localToGlobal(b_s)).x+=p_g.width-5,b_s.y+=p_g.height/2;var d_u=this.plrLst.selectedItem;e.CheckFriend.open(d_u.pid,d_u.name,3,b_s,[CheckBtnType.RoleInfo,CheckBtnType.AddFriend,CheckBtnType.AddBlack]);break;case"addFriendBtn":this._pid&&(FriendModel.instance.reqAddFriend(this._pid),b_p.broadcastNotice(Utils.$((j_x("257_1738_2285")+j_x("1777_402_2142")))));break;case"checkBtn":this._pid&&n_d.instance.reqViewRoleInfo(this._pid);break;case"flowerBtn":if(this._pid){var b_e=FriendModel.instance.getFriendData(this._pid),d_m={pid:b_e.pid,entryId:b_e.entryId,name:b_e.name,headIcon:b_e.headIcon,qinmi:b_e.qinmi,status:b_e.status,todayAddQinmi:b_e.todayAddQinmi,lastAddQinmiTime:b_e.lastAddQinmiTime,id:0,num:0};e.giveFriendRosePanel.open(d_m)}break;case"dhBtn":this._pid&&e.FriendPanel.open(1);break;case"proposalBtn":CrossModel.ins.sendCrossOpen(1)}},b_s.prototype.getPid=function(){return Ukh(this)},b_s.prototype.onClickRegister=function(){if(1==CrossModel.ins.isBigOrLitterCross&&0<CrossModel.ins.crossOpenTime){var p_l=this.plrLst.array[this.plrLst.selectedIndex];e.MarryRequestView.open(p_l.name,p_l.entryId,p_l.headIcon,p_l.pid)}else b_p.broadcastNotice((j_x("1662_1998_206")+j_x("155_1186")+""+j_x("2462_1919_100")+j_x(362)+""))},b_s.prototype.onChatPrivateRecNew=function(e){if(e)if(this._pid===e)n_d.instance.reqChatPrivateRec(e);else{for(var p_l=!1,p_g=0,b_s=this.plrLst.array;p_g<b_s.length;p_g++)if(b_s[p_g].pid===e){p_l=!0;break}p_l?this.plrLst.refresh():(this.plrLst.addItem(n_d.instance.getPrivatePlr(e)),1===this.plrLst.length&&(this.plrLst.selectedIndex=-1,this.plrLst.selectedIndex=0))}},b_s.prototype.onRemove=function(){Inf(this,Laya,LED,l_r)},b_s.prototype.setPid=function(e){Ugw(e,this)},b_s.prototype.showFunLogic=function(e){if(e)if(this.funBox.visible=!0,b_p.isSameServer(e.sid)){var p_l=FriendModel.instance.isMyFriend(e.pid);this.dhBtn.visible=this.flowerBtn.visible=p_l,this.addFriendBtn.visible=!p_l}else this.addFriendBtn.visible=this.dhBtn.visible=this.flowerBtn.visible=!1},b_s.prototype.updateItem=function(e,p_l){var p_g=this,b_s=e.dataSource,d_u=e.getChildByName("nameLab"),b_e=e.getChildByName("headImg"),d_m=e.getChildByName("highlightImg"),d_w=(e.getChildByName("hideBtn"),this.crossNameConnect(b_s.sid,b_s.name));if(d_u.text=d_w,b_e.skin=Resource.ResManager.getHeadUrl(b_s.entryId,b_s.headIcon),Laya.timer.frameOnce(3,this,(function(){b_e.source&&null!=b_e.source.bitmap.url||(b_e.skin="",b_e.skin=Resource.ResManager.getHeadUrl(b_s.entryId,b_s.headIcon),Laya.timer.clearAll(p_g))})),b_s.pid===this._pid){d_m.visible=!0;var f_t=(j_x("506_2035_1996"))+Utils.setSpace(2)+Utils.setHref(d_w,Utils.$("name:{1}",this._pid),"#4a728e")+Utils.setSpace(2)+(j_x("33_562_153")+j_x(2308));this.nameTitle.innerHTML=f_t}else d_m.visible=!1},b_s.prototype.crossNameConnect=function(e,p_l){return b_p.isSameServer(e)?p_l:"s"+e+p_l},b_s.prototype.clickHtml=function(p_l){if(p_l&&""!=p_l){var p_g=p_l.split(":"),b_s=p_g[0];switch(p_g[1],b_s){case"name":var d_u=this.plrLst.selectedItem,b_e=new Laya.Point;(b_e=this.nameTitle.localToGlobal(b_e)).x+=250,b_e.y+=this.nameTitle.contextHeight/2,e.CheckFriend.open(d_u.pid,d_u.name,3,b_e,[CheckBtnType.RoleInfo,CheckBtnType.AddFriend,CheckBtnType.AddBlack])}}},b_s.prototype.onChatPrivatePlrRefresh=function(){Ebp(this)},b_s.prototype.onChatPrivatePlrUpdate=function(){var e=n_d.instance.getPrivatePlrLst();if(this.plrLst.selectedIndex=-1,(this.plrLst.array=e)&&0<e.length){var p_l=-1;if(this._pid)for(var p_g=0;p_g<e.length;++p_g)if(e[p_g].pid===this._pid){p_l=p_g;break}p_l<0&&(p_l=0),this.plrLst.selectedIndex=p_l}this.funBox.visible=0<e.length},b_s.prototype.delPlr=function(e){var p_l=e.dataSource;p_l&&(n_d.instance.removeRecByPid(p_l.pid),n_d.instance.reqDelHisstoryChat(p_l.pid),this.onChatPrivatePlrUpdate())},b_s);function b_s(){var e=p_l.call(this)||this;return e._pid=0,e.plrLst.hScrollBarSkin="",e.plrLst.scrollBar.elasticDistance=40,e.plrLst.scrollBar.elasticBackTime=500,e.plrLst.selectEnable=!0,e.plrLst.selectHandler=Laya.Handler.create(e,e.onChatPlrSelect,null,!1),e.plrLst.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.plrLst.array=[],e.funBox.visible=!1,e.nameTitle.style.color="#444675",e.nameTitle.style.fontSize=24,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.ChatStateView=p_g;var d_u,b_e=(d_u=e.ChatTallPanel,__extends(d_m,d_u),d_m.prototype.onAdded=function(){Aii(this,Laya,LED,l_r)},d_m.close=function(){Aae(UIM,d_m)},d_m.prototype.checkSendMsg=function(e,p_l){if(0!=e){var p_g;if(p_l=p_l.replace(/[%]/g,"%25"),this._itemArr&&0<this._itemArr.length){for(var b_s in p_g=[],this._itemArr)p_g.push(this._itemArr[b_s].toLinkStr());this._itemArr.length=0}var d_u=this._stateView.getPid(),b_e=n_d.instance.getPrivatePlr(d_u);b_e?n_d.instance.reqChatPrivate(b_e.pid,p_l,p_g,0,b_e.entryId,b_e.headIcon,b_e.vip,b_e.sid,b_e.name,!0):n_d.instance.reqChatPrivate(d_u,p_l,p_g,0,0,0,0,0,"",!0),this.inputTxt.text=""}else b_p.broadcastNotice((j_x("571_1802_1273")+j_x("610_130_241")+j_x("1387_1492_1794")))},d_m.prototype.onChatPrivatePlrUpdate=function(){Iur(this)},d_m.prototype.onRemove=function(){Iro(this,Laya,LED,l_r)},d_m.prototype.closeSelf=function(){Muw(d_m)},d_m.prototype.onChatPrivateRecNew=function(e){Eea(e,this)},d_m.prototype.onChatPrivateRecUpdate=function(e){this.clearAllLine();for(var p_l=0,p_g=n_d.instance.getPrivateRecLst(e);p_l<p_g.length;p_l++){var b_s=p_g[p_l];if(b_s.temp){var d_u=n_d.instance.getPrivatePlr(e);b_s.name=d_u.name,b_s.vip=d_u.vip,b_s.headIcon=d_u.headIcon,b_s.temp=!1,b_s.sid=d_u.sid}this.addChatContent(b_s)}this.chatPanel.vScrollBar.value=this.chatPanel.vScrollBar.max,this._newRecNum=0},d_m.prototype.onGetFaceAdd=function(e){Qgk(e,this)},d_m.prototype.onChatPlayerInfo=function(){Qfr(this)},d_m.prototype.updateNone=function(){Otn(this)},d_m.prototype.onLeaveFb=function(){Clc(d_m)},d_m.prototype.onChatPrivateRecAdd=function(e){!e||e.pid!==this._stateView.getPid()&&e.pid!==b_p.playerId||(this.chatPanel.vScrollBar.value===this.chatPanel.vScrollBar.max||e.pid===b_p.playerId?(this.addChatContent(e,!0),this.chatPanel.vScrollBar.value=this.chatPanel.vScrollBar.max):(this.addChatContent(e,!0),this.newImg.visible=!0,++this._newRecNum,this.newLab.text=Utils.$((j_x("1787_1661_1590")+" {1} "+j_x(1320)),this._newRecNum)))},d_m.prototype.showItemAddBox=function(e){void 0===e&&(e=!0),this.btn_hide.visible=this.btn_show.visible=this.btn_box.visible=!1},d_m.prototype.onChatPlrSelect=function(e,p_l){e<0||!p_l?this.clearAllLine():(this.onChatPrivateRecUpdate(p_l.pid),n_d.instance.reqChatPrivateRec(p_l.pid))},d_m.open=function(e,p_l){var p_g={pid:e,data:p_l};UIM.open(d_m,["chat.atlas"],p_g)},d_m.prototype.onChatPrivatePlrRefresh=function(){Giz(this)},d_m.prototype.sendMsg=function(){var e=Utils.ItemUtils.replaceItemBeforeSend(this.inputTxt.text,this._itemArr);e&&""!==e&&(this._stateView.getPid()?ShieldWordManager.ins.isShield(e,Laya.Handler.create(this,this.checkSendMsg)):b_p.broadcastNotice((j_x("1971_1896_153")+j_x("2308_1653_1004"))))},d_m);function d_m(){var e=d_u.call(this)||this;return e._stateView=new p_g,e.chatPanel.height-=e._stateView.height-e.inputBox.height,e.newImg.y-=e._stateView.height-e.inputBox.height,e.titleImg.skin="res/ui/chat/siliao.png",e._stateView.x=e.chatPanel.x,e._stateView.y=e.chatPanel.y+e.chatPanel.height,e.channelTab.visible=!1,e.inputBg.visible=!1,e.noneLab.visible=!0,e.noTip.visible=!1,e}e.ChatPrivatePanel=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.main.chatViewUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Koq(this,Laya,LED,l_r)},b_s.prototype.onRemove=function(){Gvx(this,Laya,LED,l_r)},b_s.prototype.onClick=function(p_l){var p_g=p_l.target;if(p_g)switch(p_g.name){case"mailBtn":e.MailPanel.open();break;case"friendBtn":e.FriendPanel.open();break;case"chatBtn":e.CheckFriend.close(),e.ChatTallPanel.open(),this.chatRPImg.visible=!1;break;case"privateChatBtn":e.CheckFriend.close(),e.ChatPrivatePanel.open(),this.stopShake();break;default:("nameDiv"!==p_g.name&&p_g===this.bgImg||p_g===this.chatBox||this.chatBox.contains(p_g))&&(e.CheckFriend.close(),e.ChatTallPanel.open(),this.chatRPImg.visible=!1)}},b_s.prototype.setContent=function(e){if(e&&""!=e.msg){var p_l=this._chatLine;p_l||(this._chatLine=p_l=new b_e,this.chatBox.addChild(this._chatLine)),p_l.parser(e)}},b_s.prototype.onChatRecAdd=function(p_l){p_l.channel==ChannelTypeDefine.CROSS&&SetupModel.instance.isShowCrossTall||(this.setContent(p_l),UIM.instance.isOpenWin(e.ChatTallPanel)||(this.chatRPImg.visible=!0))},b_s.prototype.onChatRecLstUpdate=function(){var e=n_d.instance.getChatRecLst(ChannelTypeDefine.SYNTH);e&&0<e.length&&this.setContent(e[e.length-1])},b_s.prototype.onNewFriendReq=function(e){var p_l=DhModel.instance.dhinfo,p_g=!(!p_k.instance.checkSystemOpen(FuncDefine.dh)||!p_l||p_l.tinfo||!p_l.leftTimes);this.frdRPImg.visible=e||DhModel.instance.onDhTaskRed()||FriendModel.instance.hasRequest()||FriendModel.instance.friendRewardRed()||OfflineModel.instance.hasInvite||OfflineModel.instance.hasTime||p_g||b_v.instance.tabRedpoint()||b_v.instance.isSweetAllRed()},b_s.prototype.onRequestListUpdate=function(){Aat(this)},b_s.prototype.stopShake=function(){Ios(Laya,this)},b_s.prototype.updateMailList=function(){Owz(this,f_s)},b_s.prototype.onChatPrivateRecNew=function(){Ioz(Laya,this,UIM,e)},b_s.prototype.shake=function(){var e=this._shakeSpan,p_l=this._shakeSpanDuration,p_g=e/p_l*this._shakeInterval,b_s=Date.now()-this._shakeStartTime,d_u=Math.floor(b_s/p_l)%4,b_e=0==d_u||3==d_u?1:-1,d_m=this.privateChatBtn.rotation;b_e<0?(d_m-=p_g)<-e&&(d_m+=-e-d_m):e<(d_m+=p_g)&&(d_m-=d_m-e),this.privateChatBtn.rotation=d_m},b_s);function b_s(){var e=p_l.call(this)||this;return e._chatLine=null,e._shakeStartTime=0,e._shakeInterval=30,e._shakeSpan=20,e._shakeSpanDuration=60,e.mouseEnabled=!0,e.chatRPImg.visible=!1,e.mailRPImg.visible=!1,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.ChatView=p_g;var d_u,b_e=(d_u=laya.ui.Box,__extends(d_m,d_u),d_m.prototype.onLink=function(e){Oic(e,n_d,this)},d_m.prototype.getParentPanel=function(){for(var e=this.parent;e&&"chatBox"!==e.name;)e=e.parent;return e},d_m.prototype.parser=function(e,p_l){void 0===p_l&&(p_l=0);var p_g=this.getParentPanel();this._nameDiv.width=p_g.width,this.pos(p_l,0);var b_s=Config.color[e.channel+1];this._nameDiv.style.color=b_s?b_s.color:"#FFFFFF",this._nameDiv.style.fontSize=b_s?b_s.fontSize:b_p.config.fontSize;var d_u="";d_u=e.channel==ChannelTypeDefine.CROSS?(d_u=Utils.$("{1}",(j_x("1662_1998"))),Utils.setColor(d_u,Config.color[e.channel+1].nameColor,1)):e.channel==ChannelTypeDefine.CROSS_SYSTEM?(d_u=Utils.$("{1}",(j_x("1662_1998"))),Utils.setColor(d_u,Config.color[ChannelTypeDefine.CROSS+1].nameColor,1)):(d_u=Utils.$("{1}",Config.color[e.channel+1].name),Utils.setColor(d_u,Config.color[e.channel+1].nameColor,1));var b_e=e.name;if(b_e){var d_m=e.pid==b_p.playerId;d_m?b_e=Utils.setColor(e.name,"#71de66",1):e.pid&&e.name&&(b_e=Utils.setHref(e.name,Utils.$("showCheckMenu:{1},{2},2",e.pid,e.name),"#47c9ff")),e.vip&&0<e.vip&&(b_e+=Utils.setImg("res/ui/mainUI/vip_chat.png",62,24)),d_u+=b_e+=Utils.setColor(" :",d_m?"#71de66":"#47c9ff",1)}this._nameDiv.innerHTML=d_u,this._nameDiv.height=this._nameDiv.contextHeight+6,this._nameDiv.width=this._nameDiv.contextWidth,this._contentDiv.style.color=b_s?b_s.color:"#FFFFFF",this._contentDiv.style.fontSize=b_s?b_s.fontSize:b_p.config.fontSize,this._contentDiv.style.wordWrap=!1,this._contentPanel.x=this._nameDiv.width+5,this._contentPanel.width=p_g.width-this._contentPanel.x;var d_w=e.msg;this._contentDiv.width=65535,this._contentDiv.innerHTML=d_w||"",this._contentDiv.height=this._contentDiv.contextHeight+6,this._contentDiv.width=this._contentDiv.contextWidth,this._contentDiv.pos(0,3),this._nameDiv.pos(0,3),Laya.timer.clear(this,this.onTimer),this._contentDiv.width>this._contentPanel.width&&(this._delayTime=0,Laya.timer.loop(30,this,this.onTimer))},d_m.prototype.onTimer=function(){0<=this._delayTime&&this._delayTime<3e3?this._delayTime+=30:0<=this._delayTime?(this._contentDiv.x-=1,this._contentDiv.x+this._contentDiv.width<=this._contentPanel.width&&(this._delayTime=-3e3)):this._delayTime<0&&(this._delayTime+=30,0<=this._delayTime&&(this._delayTime=0,this._contentDiv.x=0))},d_m.prototype.dispose=function(){this._nameDiv&&(this._nameDiv.off(Laya.Event.LINK,this,this.onLink),this._nameDiv.destroy(),this._nameDiv=null)},d_m);function d_m(){var e=d_u.call(this)||this;return e._delayTime=0,e._nameDiv=new Laya.HTMLDivElement,e._nameDiv.name="nameDiv",e.addChild(e._nameDiv),e._nameDiv.style.font=b_p.config.font,e._nameDiv.style.fontSize=b_p.config.fontSize,e._nameDiv.style.valign="middle",e._nameDiv.on(Laya.Event.LINK,e,e.onLink),e._contentPanel=new Laya.Panel,e.addChild(e._contentPanel),e._contentDiv=new Laya.HTMLDivElement,e._contentDiv.name="contentDiv",e._contentPanel.addChild(e._contentDiv),e._contentDiv.style.font=b_p.config.font,e._contentDiv.style.fontSize=b_p.config.fontSize,e._contentDiv.style.valign="top",e}e.ChatLine=b_e;var d_w,f_t=(d_w=ui.main.chatFaceUI,__extends(v_z,d_w),v_z.prototype.onRender=function(e,p_l){e.mouseEnabled=!0;var p_g=e.getChildByName("icon"),b_s=this.faceArray[p_l];p_g.skin=Resource.ResUrl.getFaceUrl(Config.face[b_s].url),e.dataSource=b_s},v_z.prototype.onAdded=function(){Ktt(this,Laya)},v_z.prototype.onRemove=function(){Mvm(this,Laya)},v_z.prototype.onClick=function(e){var p_l=e.target;if(p_l&&""!=p_l.name&&p_l.dataSource){var p_g=p_l.dataSource;0<p_g&&this.event("faceAdd",Config.face[p_g].key),this.parent&&this.parent.removeChild(this)}},v_z);function v_z(){var e=d_w.call(this)||this;e.Event=laya.events.Event,e.Box=laya.ui.Box,e.Handler=laya.utils.Handler,e.faceArray=[],e.mouseEnabled=!0;var p_l=Config.face;for(var p_g in p_l)e.faceArray.push(p_l[p_g].id);return e.list.renderHandler=Laya.Handler.create(e,e.onRender,null,!1),e.list.vScrollBarSkin="",e.list.selectEnable=!0,e.list.scrollBar.elasticBackTime=100,e.list.scrollBar.elasticDistance=200,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.ChatFacePanel=f_t}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.chat.chatForBidConfirmUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){this.resetSite(),this.on(Laya.UIEvent.CLICK,this,this.onMouseDown),LED.on(l_r.UDATE_MY_SLIENCE_STATE,this,this.updateMySlienceState),this.img_bg&&!this.img_bg.source&&(this.img_bg.skin="res/ui/tips/tips_common.png")},b_s.prototype.resetSite=function(e){void 0===e&&(e=null),this.x=Stage.width-this.width>>1,this.y=Stage.height-this.height>>1},b_s.prototype.setContent=function(e){Aoj(e,this)},b_s.prototype.updateMySlienceState=function(){var e=Config.global[GlobalDefine.title_banTime].i_info,p_l=e-n_d.instance._silenceCount,p_g=e-n_d.instance._crossSilenceCount;this.remainNumTxt.text=1==this._type?Utils.$((j_x("1111_1902_235")+j_x(2348)+":{1}"+j_x(235)),p_l):Utils.$((j_x("1111_1902_235")+j_x(2348)+":{1}"+j_x(235)),p_g)},b_s.prototype.onRemove=function(){Mzd(this,Laya,LED,l_r)},b_s.prototype.onMouseDown=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"sureBtn":var p_l=b_s.instance._pid,p_g=b_s.instance._type,d_u=Config.global[GlobalDefine.title_banTime].i_info,b_e=1==p_g?d_u-n_d.instance._silenceCount:d_u-n_d.instance._crossSilenceCount,d_m=1==p_g?n_d.instance._cdEndTime:n_d.instance._crossCdEndTime;if(b_e<=0)b_p.broadcastNotice((j_x("1971_1896_973")+j_x("166_235_2348")));else if(0<d_m-SyncTime.serverTime/1e3){var d_w=d_m-SyncTime.serverTime/1e3,f_t=Math.round(d_w/60),v_z=Utils.$((j_x("1768_774")+"{1}"+j_x("2224_1394_2060")+j_x("1163_192_973")+j_x(166)),f_t);b_p.broadcastNotice(v_z)}else n_d.instance.reqSilence(p_l,p_g);b_s.close()}},b_s.prototype.showUIMask=function(e){void 0===e&&(e=1),this._uiMaskSp||(this._uiMaskSp=new Laya.Sprite,this._uiMaskSp.graphics.drawRect(0,0,Stage.width,Stage.height,"#000000"),this._uiMaskSp.size(Stage.width,Stage.height),this._uiMaskSp.alpha=e,Laya.stage.addChild(this._uiMaskSp))},b_s.close=function(){null!=b_s.instance&&b_s.instance.parent&&(b_s.instance.isShowMask&&(b_s.instance.hideUIMask(),b_s.instance.isShowMask=!1),b_s.instance.removeSelf())},b_s.open=function(e,p_l,p_g){null==b_s.instance&&(b_s.instance=new b_s),Laya.stage.addChild(b_s.instance),b_s.instance.setContent(e),b_s.instance._pid=p_l,b_s.instance._type=p_g},b_s.prototype.hideUIMask=function(){this._uiMaskSp&&(this._uiMaskSp.removeSelf(),this._uiMaskSp.graphics.clear(),this._uiMaskSp.destroy(),this._uiMaskSp=null)},b_s);function b_s(){var e=p_l.call(this)||this;return e._type=0,e._pid=0,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.html_txt.style.fontSize=20,e.html_txt.style.font=GConfig.inst.font,e.html_txt.style.align="center",e.html_txt.style.color="#42435a",e.html_txt.style.wordWrap=!0,e.html_txt.style.leading=10,e.html_txt.style.valign="middle",e}e.ChatForBidConfimPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.chat.chatForbidHelpPanelUI,__extends(b_s,p_l),b_s.prototype.onClick=function(e){var p_l=e.target;if(p_l)switch(p_l.name){case"closeBtn":b_s.close()}},b_s.open=function(){Wgs(UIM,b_s)},b_s.prototype.onAdded=function(){Akr(this,Laya)},b_s.prototype.onRemove=function(){Uzy(this,Laya)},b_s.close=function(){Wsw(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.scrollPanel.vScrollBarSkin="",e.scrollPanel.vScrollBar.elasticBackTime=200,e.scrollPanel.vScrollBar.elasticDistance=50,e.scrollPanel.vScrollBar.visible=!1,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.ChatForBidHelpPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.chat.chatForbidRecordUI,__extends(b_s,p_l),b_s.prototype.init=function(){this._clipTab=new p_c(this.forbidTab),this.list.array=null,this.list.vScrollBarSkin="",this.list.scrollBar.elasticDistance=100,this.list.scrollBar.elasticBackTime=200,this.list.itemRender=e.ChatForBidShowItem,this.list.renderHandler=Laya.Handler.create(this,this.updateItem,null,!1),this.forbidTab.selectedIndex=0},b_s.open=function(e){void 0===e&&(e=!1),UIM.open(b_s,[],{},e,!0)},b_s.prototype.sortFunc=function(e,p_l){return Mlq(e,p_l)},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"helpBtn":e.ChatForBidHelpPanel.open()}},b_s.prototype.updateItem=function(e,p_l){if(e){if(!this.dataSource)return;e.setData(e.dataSource,this._type)}},b_s.prototype.onAdded=function(){Ixc(UIM,this,Laya,LED,l_r)},b_s.prototype.destroy=function(e){Yjl(e,p_l,this)},b_s.prototype.onTabSelect=function(e,p_l){Yza(e,p_l,n_d)},b_s.prototype.closePanel=function(e){Eqw(e,b_s)},b_s.prototype.updateView=function(){var e=n_d.instance.SlienceRecordInfo[0].silenceType;this._type=e,this.noneLab.visible=0==e,this.list.array=1==e?n_d.instance.SlienceRecordInfo[0].forBidRecordArr.sort(this.sortFunc):2==e?n_d.instance.SlienceRecordInfo[0].beForBidRecordArr.sort(this.sortFunc):[]},b_s.prototype.onRemove=function(){Wbp(this,Laya,LED,l_r)},b_s.close=function(e){void 0===e&&(e=!1),UIM.close(b_s,e)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.ChatForBidShowPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.chat.ChatItemShowUI,__extends(b_s,p_l),b_s.prototype.init=function(){this.list.array=null,this.list.vScrollBarSkin="",this.list.scrollBar.elasticDistance=100,this.list.scrollBar.elasticBackTime=200,this._clipTab=new p_c(this.tab),this.tab.selectedIndex=-1,this.list.renderHandler=Laya.Handler.create(this,this.updateItem,null,!1)},b_s.prototype.onAdded=function(){var e=UIM.instance.getMainUI().chatPanel;this.y=e.y-this.height-70,this._clipTab.on("tabSelect",this,this.onTabSelect),this.on(Laya.UIEvent.CLICK,this,this.onClick),LED.on(l_r.ITEM_SORT_CHANGE,this,this.updateListInfo),LED.on(l_r.CHAT_ITEM_SHOW,this,this.closePanel);var p_l=this.dataSource&&-1<this.dataSource.index?this.dataSource.index:1;this.tab.selectedIndex=p_l,BagModel.instance.reqItemSort(BagTypeDefine.BAG_TYPE_ITEM),this.updateListInfo()},b_s.prototype.onTabSelect=function(e,p_l){-1!=e&&this.updateListInfo()},b_s.prototype.destroy=function(e){Eve(e,p_l,this)},b_s.prototype.updateItem=function(e,p_l){if(e){e.itemBox.setItemData(e.dataSource,ItemBoxDefine.BAG_INFO_TEMP,!0);var p_g=e.dataSource,b_s=Config.CItem(p_g.id);b_s&&b_s.mainclass===ItemTypeDefine.CONSUME?e.rp.visible=!0:e.rp.visible=!1}},b_s.prototype.onRemove=function(){Ovc(this,Laya,LED,l_r)},b_s.prototype.closePanel=function(e){Ker(e,b_s)},b_s.prototype.updateListInfo=function(){var e=ItemTypeDefine.ITEM;1===this.tab.selectedIndex&&(e=ItemTypeDefine.EQUIPMENT),this.list.selectedIndex=-1;var p_l=BagTypeDefine.BAG_TYPE_ITEM,p_g=BagModel.instance.getBagItemsByType(p_l,e,-1);this.list.array=p_g},b_s.open=function(e,p_l){void 0===e&&(e=-1),void 0===p_l&&(p_l=!1),UIM.open(b_s,["bag.atlas"],{index:e},p_l)},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close()}},b_s.close=function(e){void 0===e&&(e=!1),UIM.close(b_s,e)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.ChatItemShowPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.chat.ChatTalismanShowUI,__extends(b_s,p_l),b_s.prototype.init=function(){Qrz(this,e,Laya)},b_s.prototype.onRemove=function(){Obi(LED,l_r,this,Laya)},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close()}},b_s.open=function(){Srz(UIM,b_s)},b_s.prototype.closePanel=function(e){Kcs(e,b_s)},b_s.prototype.onAdded=function(){Oad(UIM,this,Laya,LED,l_r)},b_s.prototype.updateItem=function(e,p_l,p_g){e==this.talismanList&&p_l.setItemData(p_l.dataSource,!0)},b_s.prototype.updateData=function(){Abz(TalismanModel,this)},b_s.close=function(e){void 0===e&&(e=!1),UIM.close(b_s,e)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.ChatTalismanShowPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.chat.ChatTalismanTipUI,__extends(b_s,p_l),b_s.prototype.init=function(){Sne(this,Laya)},b_s.prototype.updateData=function(e){void 0===e&&(e=null),e=this.dataSource;var p_l=Config.talisman_talisman[e.id];p_l?(this.nameTxt.text=p_l.name,this.lvTxt.text=Utils.$("{1}",e.level),this.typeClip.index=1===p_l.type?1:0,TalismanModel.instance.changeActStar(this.starBox,e.grade),this.updateDeployData(),this.showRoleModel(p_l.avatar,this.modelContainer,p_l.showAct,p_l.ui_scale,p_l.ui_offset)):b_s.close()},b_s.prototype.updateSpiritInfo=function(){var e=this.dataSource;if(e){var p_l=Config.talisman_talisman[e.id];p_l&&(this.proTypeClip.index=p_l.proType-1)}},b_s.prototype.showRoleModel=function(e,p_l,p_g,b_s,d_u){void 0===p_g&&(p_g="show"),void 0===b_s&&(b_s=1),void 0===d_u&&(d_u=[0,0]),e&&""!=e&&p_l&&(this._roleModel||(this._roleModel=new n_k,this._roleModel.name="roleModel",p_l.addChild(this._roleModel)),this._roleModel.changeModel(e),this._roleModel.pos(d_u[0],d_u[1]),this._roleModel.scale(b_s,b_s),this._roleModel.setAction(p_g,0,!0))},b_s.prototype.updateItem=function(e,p_l,p_g){if(this.dataSource,e===this.deploymentList)p_l.setItemData(p_l.dataSource,!0);else{var b_s=p_l.dataSource,d_u=p_l.getChildByName("nameTxt"),b_e=p_l.getChildByName("valueTxt"),d_m=d_v.getPropertyType(b_s.propOrdinal);d_u.text=d_m.desc+":",LgcM.ins.heroVo,d_m.isPercent()?b_e.text=Utils.$("{1}%",b_s.value/100):b_e.text=Utils.$("{1}",Math.floor(b_s.value))}},b_s.prototype.updateDeployData=function(e){void 0===e&&(e=null);var p_l=this.dataSource;this.propList.array=TalismanModel.instance.getLvProps(p_l);var p_g=b_p.calPropFight(this.propList.array);b_p.getNumSp(NumType.FIGHTING,p_g,this.fightSp,-10),this.setDeploymentDatas(p_l.deployments)},b_s.prototype.setDeploymentDatas=function(e){Mfv(e,this,TalismanModel,j_x)},b_s.prototype.updateFightingInfo=function(){var e=this.dataSource;if(e){var p_l=Config.talisman_talisman[e.id];if(p_l.fightingDesc){var p_g=Resource.ResUrl.getIconUrl(p_l.fightingDesc[0]);this.fighting_desc.text=p_l.fightingDesc[1],this.icon_fighting=Resource.ResManager.Instance.getImg(p_g,this.icon_fighting)}}},b_s.prototype.onRemove=function(){this.closeBtn.off(Laya.Event.CLICK,this,this.onClick),this.backBtn.off(Laya.Event.CLICK,this,this.onClick),this._roleModel&&(this._roleModel.removeSelf(),this._roleModel.dispose(),this._roleModel=null)},b_s.prototype.onAdded=function(){this.closeBtn.on(Laya.Event.CLICK,this,this.onClick),this.backBtn.on(Laya.Event.CLICK,this,this.onClick);var e=this.dataSource;e&&(this.updateSpiritInfo(),this.updateFightingInfo(),this.updateData(e))},b_s.open=function(e){void 0===e&&(e=null),UIM.open(b_s,["talisman.atlas"],e,!1)},b_s.prototype.onClick=function(e){Sww(e,b_s)},b_s.close=function(e){void 0===e&&(e=!1),UIM.close(b_s,e,["res/ui/talisman/Clip_fabao_pinzhi.png","res/ui/talisman/Clip_fabao_pinzhi.png","res/ui/talisman/right_pannel.jpg"])},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.ChatTalismanTipPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.chat.item.chatForbidRecordItemUI,__extends(b_s,p_l),b_s.prototype.init=function(){},b_s.prototype.setData=function(e,p_l){if(e){var p_g=Config.global[GlobalDefine.title_bannedTime].i_info,b_s=p_g/3600;this.channelName.text=1==e.serverType?("["+j_x("1952_843_822")+j_x(2217)+"]"):("["+j_x("1662_1998_822")+j_x(2217)+"]");var d_u=1<=b_s?Utils.$((j_x("1749_973_166")+"{1}{2}"+j_x("1747_1702")),e.targetName,b_s):Utils.$((j_x("1749_973_166")+"{1}{2}"+j_x("2224_1394")),e.targetName,Math.round(p_g/60)),b_e=1<=b_s?Utils.$((j_x("1749_1629")+"{1}"+j_x("973_166")+"{2}"+j_x("1747_1702")),e.targetName,b_s):Utils.$((j_x("1749_973_166")+"{1}{2}"+j_x("2224_1394")),e.targetName,Math.round(p_g/60));this.desTxt.text=1==p_l?d_u:b_e,this.timeLabel.text=Utils.formatTimeStr7(e.time)}},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.ChatForBidShowItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.citta.cittaViewCellUI,__extends(b_s,p_l),b_s.prototype.setItem=function(e){if(e){this.bgImg.visible=!0,this.red_activ.visible=e.canDeloyCanUp(e.id)&&!e.getSkillMaxLv(e.id),this.red_activ.visible||(this.red_activ.visible=e.canStarUp()&&!e.getSkillMaxStar(e.id)||SkillModel.instance.isRedPoint(e.id,e.lv,e.star,PassiveSkillType.PASSIVE)),this.namedec.changeText(e.name.toString());var p_l=Config.skill_passive_mental[e.id];if(!p_l)return;this.qualitylv.index=this.quality.index=p_l.grade-2,this.qualitylv.visible=!1,this.probardec.text="";var p_g=Config.skill_passive_mental[e.id];if(p_g&&0<p_g.propType?(this.typeClip.visible=!0,this.typeClip_di.visible=!0,this.typeClip.index=p_g.propType-1):(this.typeClip.visible=!1,this.typeClip_di.visible=!1),p_l.condition){this.condition.color="#e32828",this.lvdesc.text=e.lv.toString()+(j_x(2342)),e.lv<=0&&(this.lvdesc.text="");var b_s=Config.skill_passive_mental[1e3*parseInt(e.id.toString().slice(0,4))],d_u=Resource.ResUrl.getIconUrl(b_s.icon);this.icon.skin=d_u;var b_e=p_l.condition[0][2];if(b_e=b_e||0,this.condition.text=Config.state_state[p_l.condition[0][1]].desc+h_m[Utils.$("TYPE_{1}",+b_e)],CittaModule.instance.cittaCanState(p_l.id)){var d_m=BagModel.instance.getItemCountByItemID(p_l.condition[1][1][0][0],BagTypeDefine.BAG_TYPE_ITEM);this.condition.text=(j_x("1163_1355_2420")),this.condition.color=Config.color[202].color,this.probardec.text=Utils.$("{1}/{2}",d_m,p_l.condition[1][1][0][1])}var d_w=2==e._state;this.probardec.visible=this.condition.visible=!d_w,this.isactiv.visible=d_w,this.isactiv.play(d_w)}0==e._state&&(this.red_activ.visible=!1),1==e._state&&(this.qualitylv.visible=!0,this.probardec.visible=this.isactiv.visible=this.bgImg.visible=this.condition.visible=!1),TalismanModel.instance.changeActStar(this.starBox,e.star+1),this.dataSource=e}},b_s);function b_s(){return p_l.call(this)||this}e.CittaListCell=p_g}(UI=UI||{}),function(e){e[e.ACTIVE_SKILL=1]="ACTIVE_SKILL",e[e.PASSIVE_SKILL=2]="PASSIVE_SKILL",e[e.COMMON=1]="COMMON",e[e.JUEXUE=2]="JUEXUE"}(SkillTypeDefine=SkillTypeDefine||{}),function(e){e[e.ROLE=1]="ROLE",e[e.TALISMAN=2]="TALISMAN",e[e.GUILD=3]="GUILD",e[e.MOUNT=4]="MOUNT",e[e.MARRY=5]="MARRY",e[e.GOD=6]="GOD",e[e.BEAST=7]="BEAST",e[e.PASSIVE=9]="PASSIVE",e[e.TRAINING=10]="TRAINING",e[e.DRAGON=11]="DRAGON",e[e.FASHION=12]="FASHION"}(PassiveSkillType=PassiveSkillType||{}),function(e){e[e.TARGET=0]="TARGET",e[e.POINT=1]="POINT",e[e.ALWAY=2]="ALWAY",e[e.MOUSE_DIR=3]="MOUSE_DIR",e[e.SELF_DIR=4]="SELF_DIR"}(SkillSelectDefine=SkillSelectDefine||{});var j_b=function(){function e(){this._passiveList={}}return e.prototype.getPassiveList=function(e){return Mlf(e,this)},e.prototype.getPassiveVo=function(e,p_l){void 0===p_l&&(p_l=-1),p_l=-1===p_l?this.getPassiveTypeById(e):p_l;var p_g=this.getPassiveList(p_l);for(var b_s in p_g)if(e==p_g[b_s].id)return p_g[b_s];return null},e.prototype.initPassiveList=function(e){var p_l=this.getPassiveTypeById(e.id);if(-1!==p_l){var p_g=this.getPassiveList(p_l);for(var b_s in p_g)if(p_g[b_s].id===e.id)return;p_g.push(e)}},Object.defineProperty(e.prototype,"passiveList",{get:function(){return this._passiveList},enumerable:!0,configurable:!0}),e.prototype.getPassiveTypeById=function(e){return Config.skill_passive_role[e]?PassiveSkillType.ROLE:Config.skill_passive_talisman[e]?PassiveSkillType.TALISMAN:Config.skill_passive_guild[e]?PassiveSkillType.GUILD:Config.skill_passive_ride[e]?PassiveSkillType.MOUNT:Config.skill_passive_marry[e]?PassiveSkillType.MARRY:Config.skill_passive_god[e]?PassiveSkillType.GOD:Config.skill_passive_beast[e]?PassiveSkillType.BEAST:Config.skill_passive_mental_extra[e]?PassiveSkillType.PASSIVE:Config.skill_passive_training[e]?PassiveSkillType.TRAINING:Config.skill_passive_dragon[e]?PassiveSkillType.DRAGON:Config.skill_passive_fashion[e]?PassiveSkillType.FASHION:-1},e.prototype.changeSkillCd=function(e,p_l,p_g,b_s){void 0===b_s&&(b_s=!1);var d_u,b_e=this._activeList;if(!b_e)return!1;for(var d_m in b_e)b_e[d_m].id==e&&(b_s?b_e[d_m].setCommonCD(p_l,p_g):b_e[d_m].setCDTime(p_l,p_g),d_u=!0);return b_s||(new TimeVo).setCDTime(p_l,p_g),d_u},e.prototype.initCommonCDGroup=function(){if(!this.m_commonCds){this.m_commonCds={};var e=Config.skill_skill;for(var p_l in e){var p_g=e[p_l].commonCd;if(p_g&&0<p_g){var b_s=this.m_commonCds[p_g]||[],d_u=new TimeVo;d_u.id=e[p_l].id,d_u.setCDTime(0,Config.commonCd[p_g].cd),b_s.push(d_u),this.m_commonCds[p_g]=b_s}}}},e.prototype.getCommonCD=function(e){return Cdu(e,Config,this)},e.prototype.changeCommonCD=function(e,p_l,p_g){var b_s;this.initCommonCDGroup();var d_u,b_e=this.m_commonCds[e];if(b_e)for(var d_m in b_e)(d_u=b_e[d_m]).setCDTime(p_l,p_g),this.changeSkillCd(d_u.id,p_l,p_g,!0)&&(b_s=!0);return b_s},e.prototype.getActPassSkillCond=function(e){var p_l=Config.CPassiveSkill(e),p_g=[0,0,0,0];return p_l.level&&(p_g[0]=p_l.level),p_l.taskId&&(p_g[1]=p_l.taskId),p_l.consume&&(p_g[2]=p_l.consume[0][0],p_g[3]=p_l.consume[0][1]),p_g},e.prototype.clearSkillcd=function(){var e=this._activeList;if(!e)return!1;for(var p_l=0,p_g=e;p_l<p_g.length;p_l++)p_g[p_l].clearCDTime();LED.event(l_r.CELEAR_SKILL_CD)},e.prototype.getCommonCDDatasByGroupId=function(e){return Mit(e,this)},e}(),SkillModel=function(e){function p_l(){var p_l=e.call(this)||this;return p_l._init=!1,p_l._handleQue=null,p_l._dazhaoId=0,p_l._dazhaoAutoState=0,p_l}return __extends(p_l,e),Object.defineProperty(p_l.prototype,"isDazhaoAutoUse",{get:function(){return 1==this._dazhaoAutoState},enumerable:!0,configurable:!0}),p_l.prototype.isDazhaoActive=function(e){return Ssy(e,this)},Object.defineProperty(p_l.prototype,"dazhaoId",{get:function(){var e=LgcM.ins.heroVo;if(e){var p_l=e.getCurCloneCfg();if(p_l)return p_l.superSkill}return this._dazhaoId},enumerable:!0,configurable:!0}),p_l.prototype.useDazhaoSkill=function(){if(Engine2d.Hero.local&&this.dazhaoId){var e=this.getSkillVo(this.dazhaoId);return 0<e.remainTime||e.commonCDRuning?(b_p.broadcastNotice((j_x("2243_1919_1614")+j_x("2171_283"))),!1):n_m.instance.addPrioritySkill(this.dazhaoId)?(n_m.instance.hangUping&&(n_m.instance.IsFighting||b_p.broadcastNotice((j_x("630_1486_985")+j_x("767_559_1375")+""+j_x("1777_2035_383")+j_x("832_283_1365")+j_x(1876)+""))),!0):Engine2d.Hero.local.releaseSkill(this.dazhaoId)}return b_p.broadcastNotice((j_x("2243_1919_206")+j_x("1009_1968_1365")+j_x(1876))),!1},p_l.prototype.canLvUpEnough=function(){var e=p_l.instance.getOneKyeCost1(),p_g=e.cost,b_s=(e.upLst,0<p_g&&b_p.checkCoin(CoinDefine.SKILL_EXP,p_g)),d_u=!1,b_e=p_l.instance.getActiveSkills(SkillTypeDefine.JUEXUE);if(b_e&&0<b_e.length){var d_m=b_e[0].id;d_u=p_l.instance.getSkillVo(d_m)&&!p_l.instance.isDazhaoActive(d_m)}return b_s||d_u},p_l.prototype.setDazhaoInfo=function(e,p_l){Qvj(e,p_l,this,LED,l_r)},p_l.prototype.changeCloneSkill=function(e){void 0===e&&(e=0),0==e&&(e=this.dazhaoId),Config.skill_skill[e]&&(this.updateHookSkillInfo(e,6),LED.event(l_r.SKILL_DAZHAO_CHANGE))},Object.defineProperty(p_l.prototype,"activeList",{get:function(){return this._activeList},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"hookSkillList",{get:function(){return this._hookSkillList||(this._hookSkillList=[0,0,0,0,0,0]),this._hookSkillList},enumerable:!0,configurable:!0}),p_l.prototype.getAllSkillList=function(e){void 0===e&&(e=0),this._hookSkillList||(this._hookSkillList=[0,0,0,0,0,0]);var p_l=Config.clone_clone[e];if(p_l){var p_g=p_l.superSkill;return this._hookSkillList.concat([p_g])}return this._hookSkillList},p_l.prototype.getConfigSkillTypeByPvType=function(e){var p_l,p_g=PassiveSkillType;switch(e){case p_g.MARRY:p_l=Config.skill_passive_marry;break;case p_g.TALISMAN:p_l=Config.skill_passive_talisman;break;case p_g.GOD:p_l=Config.skill_passive_god;break;case p_g.BEAST:p_l=Config.skill_passive_beast;break;case p_g.MOUNT:p_l=Config.skill_passive_ride;break;case p_g.PASSIVE:p_l=Config.skill_passive_mental_extra;break;case p_g.TRAINING:p_l=Config.skill_passive_training;break;case p_g.DRAGON:p_l=Config.skill_passive_dragon;break;case p_g.FASHION:p_l=Config.skill_passive_fashion}return p_l},p_l.prototype.getPassiveVoById=function(e,p_l){return Mnm(e,p_l,this)},p_l.prototype.checkCanActivePassiveSkill=function(e){var p_l=Config.CPassiveSkill(e);if(p_l.level){var p_g=LgcM.ins.heroVo;if(!p_g||p_g.level<p_l.level)return!1}if(p_l.taskId){var b_s=p_p.instance.mainVo;if(!b_s||b_s.id<p_l.taskId)return!1}return!(p_l.consume&&!b_p.checkConsume(p_l.consume)||(1===p_l.activeType&&this.reqActPass(e),0))},p_l.prototype.reqUseSkil=function(e,p_l,p_g,b_s){var d_u=new c2m_skill_use;d_u.skillId=e,d_u.targetId=p_l,d_u.px=p_g,d_u.py=b_s,DB.instance.query(c2m_skill_use,d_u)},p_l.prototype.getOneKyeCost1=function(){var e=0;if(!this._activeList)return{cost:0,upLst:[]};for(var p_l=[],p_g=0,b_s=this._activeList.sort(this.compareFun);p_g<b_s.length;p_g++){var d_u=b_s[p_g];p_l.push({id:d_u.id,lv:d_u.level})}if(p_l.length<1)return{cost:0,upLst:[]};for(var b_e={},d_m=[],d_w=b_p.getCoin(CoinDefine.SKILL_EXP);0<p_l.length;){var f_t=p_l.shift(),v_z=this.getUpCostNum(f_t.id,f_t.lv);if(d_w-e-v_z<0){0===e&&(e+=v_z);break}if(this.canLvUp(f_t.id,f_t.lv))e+=v_z,b_e[f_t.id.toString()]=1;else if(0===p_l.length)break}for(var d_h in b_e)d_m.push({id:parseInt(d_h),lv:b_e[d_h]});return{cost:e,upLst:d_m}},p_l.prototype.getUpCostNum=function(e,p_l){var p_g=Config.skill_skill[e];return p_g.maxLv&&p_l>=p_g.maxLv?-1:Math.ceil(this.calAddNum(p_l+1)+p_g.baseCost)},p_l.prototype.getActPassiveSkills=function(e){e=Math.floor(e/1e3);var p_l=Config.skill_passive_role;if(p_l){var p_g=new Array;for(var b_s in p_l)p_l[b_s].skillId==e&&p_g.push(p_l[b_s]);return p_g}return null},p_l.prototype.countMarrySkillId=function(e,p_l){return Mzx(e,p_l)},p_l.prototype.reqDazhaoChange=function(e,p_l){if(this._dazhaoId!=e||p_l!=this._dazhaoAutoState){var p_g=new c2m_skill_da_zhao;p_g.id=-1==e?this._dazhaoId:e,p_g.auto=p_l,DB.instance.query(c2m_skill_da_zhao,p_g)}},p_l.prototype.reqSkillMentalUp=function(e){var p_l=new c2m_skill_mental_upstar;p_l.skillId=e,DB.instance.query(c2m_skill_mental_upstar,p_l)},p_l.prototype.updateSkillInfo=function(e){this._activeList||(this._activeList=new Array);for(var p_g=0,b_s=e.list;p_g<b_s.length;p_g++){var d_u=b_s[p_g],b_e=Config.skill_skill[d_u.id],d_m=void 0;if(b_e){for(var d_w=!1,f_t=0,v_z=this._activeList;f_t<v_z.length;f_t++)if((h_h=v_z[f_t]).id==d_u.id){d_m=h_h.level,h_h.updateInfo(d_u),d_w=!0;break}if(!d_w&&((h_h=new SkillVo).setSkillInfo(d_u),this._activeList.push(h_h),b_e.type===SkillTypeDefine.JUEXUE&&0<d_u.lv)){b_p.broadcastNotice((j_x("1300_1048_1745")+j_x("630_1486")+""+j_x("1777_1067_189")+j_x("5_2450")+""),BroadcastType.ITEM_GAIN,"#FE8347");var d_h=d_u.id;p_l.instance.reqDazhaoChange(d_h,1)}}else{var r_t=this.getPassiveTypeById(d_u.id);if(-1===r_t)return;for(var t_n=this.getPassiveList(r_t),f_y=(d_w=!1,0),p_q=t_n;f_y<p_q.length;f_y++){var h_h;if((h_h=p_q[f_y]).id==d_u.id){d_m=h_h.level,h_h.updateInfo(d_u),d_w=!0;break}}d_w||((h_h=new SkillVo).setSkillInfo(d_u),t_n.push(h_h))}LED.event(l_r.SKILL_INFO_UPDATE,[d_u.id,d_u.lv,d_m])}LED.event(l_r.SKILL_LIST_UPDATE)},p_l.prototype.calAddNum=function(e,p_l){void 0===p_l&&(p_l=1);var p_g=0,b_s=0,d_u=Config.skill_skillUp;for(var b_e in d_u){if(d_u[b_e].lvMin<=e&&e<=d_u[b_e].lvMax)return p_g+(e-b_s)*(1===p_l?d_u[b_e].cost:d_u[b_e].damage);e>d_u[b_e].lvMax&&(p_g+=(e-b_s)*(1===p_l?d_u[b_e].cost:d_u[b_e].damage),b_s=d_u[b_e].lvMax)}return p_g},p_l.prototype.getSkillDamage=function(e,p_l){return Kej(e,p_l,Config,this)},p_l.prototype.updateSkillPrio=function(e){if(this._activeList){for(var p_l=0,p_g=this._activeList;p_l<p_g.length;p_l++){var b_s=p_g[p_l];b_s.id==e.id1&&(b_s.prio=e.prio1,this.updateHookSkillInfo(e.id1,e.prio1)),b_s.id==e.id2&&0!=e.id2&&(b_s.prio=e.prio2,this.updateHookSkillInfo(e.id2,e.prio2))}LED.event(l_r.SKILL_PRIO_CHANGE)}},p_l.prototype.checkActive=function(e,p_l){void 0===p_l&&(p_l=PassiveSkillType.MARRY);var p_g=this.getPassiveList(p_l);for(var b_s in p_g){var d_u=p_g[b_s];if(Math.floor(d_u.id/1e3)==e)return!0}return!1},p_l.prototype.getActiveSkillVos=function(e){if(!this._activeList)return null;for(var p_l=[],p_g=0,b_s=this._activeList;p_g<b_s.length;p_g++){var d_u=b_s[p_g];Config.skill_skill[d_u.id].type==e&&p_l.push(d_u)}return p_l},p_l.prototype.canOpenPvSkill=function(e,p_l,p_g,b_s){void 0===b_s&&(b_s=!1);var d_u,b_e=Math.floor(e/1e3),d_m=this.getPassiveVoById(b_e,p_g),d_w=this.getConfigSkillTypeByPvType(p_g);if(!(d_u=d_m?d_w[e]:d_w[this.countMarrySkillId(b_e,1)]))return b_s&&b_p.broadcastNotice((j_x("2243_1919_1300")+j_x("1241_371_1012")+j_x("1081_1375_2342"))),!1;var f_t=!0,v_z=!0;if(d_u.consume&&(f_t=b_p.checkConsume(d_u.consume,b_s)),d_u.activeCond){var d_h=d_u.activeCond[0];if(-1<d_h.indexOf("Lv"))d_u.activeCond[1]>p_l.lv&&(b_s&&b_p.broadcastNotice((j_x("15_2342_2462")+j_x(1779))),v_z=!1);else if(-1<d_h.indexOf("Star")){var r_t=p_l.starLv?p_l.starLv:0;d_u.activeCond[1]>r_t&&(b_s&&b_p.broadcastNotice((j_x("1148_2342_2462")+j_x(1779))),v_z=!1)}}return f_t&&v_z},p_l.prototype.updateSkillList=function(e){this.setDazhaoInfo(e.daZhaoId,e.daZhaoAuto),this._activeList=this._activeList||new Array;var p_l,p_g,b_s=e.skillList;if(b_s)for(var d_u in b_s){var b_e=b_s[d_u];p_g=!!(p_l=this.getSkillVo(b_e.id)),p_l=p_l||new SkillVo,(Config.skill_skill[b_e.id]?SkillTypeDefine.ACTIVE_SKILL:SkillTypeDefine.PASSIVE_SKILL)===SkillTypeDefine.ACTIVE_SKILL?(p_l.updatePrio(b_e),p_g||this._activeList.push(p_l),this.updateHookSkillInfo(p_l.id,p_l.prio)):(p_l.updatePrio(b_e),this.initPassiveList(p_l))}if(LED.event(l_r.SKILL_LIST_UPDATE,e.skillList),this._init=!0,this._handleQue){for(var d_m=0,d_w=this._handleQue;d_m<d_w.length;d_m++){(b_e=d_w[d_m]).Class;var f_t=b_e.pb;this[b_e.func](f_t)}this._handleQue=null}},p_l.prototype.getConfigPassiveTheme=function(e){var p_l,p_g=PassiveSkillType;switch(e){case p_g.TALISMAN:p_l=Config.talisman_talisman;break;case p_g.GOD:p_l=Config.xianyuan_god;break;case p_g.BEAST:p_l=Config.beast_beast;break;case p_g.MOUNT:p_l=Config.ride_ride;break;case p_g.PASSIVE:p_l=Config.skill_passive_mental;break;case p_g.TRAINING:p_l=Config.training_training;break;case p_g.DRAGON:p_l=Config.dragon_dragon;break;case p_g.FASHION:p_l=Config.fashion_fashion}return p_l},p_l.prototype.canLvUp=function(e,p_l){var p_g=Config.state_state[StateModel.instance.getStateLv()];return!(p_g&&p_g.skLvLmt&&p_l+1>p_g.skLvLmt)},p_l.prototype.getMinLvVo=function(e){return Syh(e,Config)},p_l.prototype.reqLvUp=function(e,p_l,p_g){void 0===p_l&&(p_l=1),void 0===p_g&&(p_g=0);var b_s=new c2m_skill_level_up,d_u=new x_skill_lv_info;d_u.id=e,d_u.lv=p_l,d_u.star=p_g,b_s.list=[d_u],DB.instance.query(c2m_skill_level_up,b_s)},p_l.prototype.reqActPass=function(e){var p_l=new c2m_skill_active;p_l.id=e,DB.instance.query(c2m_skill_active,p_l)},p_l.prototype.getOneKyeCost=function(){var e=0;if(!this._activeList)return{cost:0,upLst:[]};for(var p_l=[],p_g=0,b_s=this._activeList.sort(this.compareFun);p_g<b_s.length;p_g++){var d_u=b_s[p_g];p_l.push({id:d_u.id,lv:d_u.level})}if(p_l.length<1)return{cost:0,upLst:[]};for(var b_e={},d_m=[],d_w=b_p.getCoin(CoinDefine.SKILL_EXP);;){var f_t=p_l[0],v_z=this.getUpCostNum(f_t.id,f_t.lv);if(d_w-e-v_z<0){0===e&&(e+=v_z);break}if(this.canLvUp(f_t.id,f_t.lv)){if(f_t.lv+=1,e+=v_z,b_e.hasOwnProperty(f_t.id.toString())?b_e[f_t.id.toString()]+=1:b_e[f_t.id.toString()]=1,p_l[1]&&p_l[1].lv<=f_t.lv){for(var d_h=1;d_h<p_l.length;++d_h){var r_t=p_l[d_h];if(r_t.lv>f_t.lv||r_t.lv===f_t.lv&&r_t.id>f_t.id)break}if(1<d_h){for(var t_n=d_h-1,f_y=0;f_y<t_n;++f_y)p_l[f_y]=p_l[f_y+1];p_l[t_n]=f_t}}}else if(p_l.splice(0,1),0===p_l.length)break}for(var p_q in b_e)d_m.push({id:parseInt(p_q),lv:b_e[p_q]});return{cost:e,upLst:d_m}},p_l.prototype.reqPickDrop=function(e){var p_l=new c2m_drop_pick;p_l.id=e,DB.instance.query(c2m_drop_pick,p_l)},p_l.prototype.compareFun=function(e,p_l){var p_g=e.level-p_l.level;return 0==p_g?e.id-p_l.id:p_g},p_l.prototype.updateHookSkillInfo=function(e,p_l){p_l<1&&e!=this.dazhaoId||(this._hookSkillList||(this._hookSkillList=[0,0,0,0,0,0]),e==this.dazhaoId||p_l==this._hookSkillList.length?this._hookSkillList[this._hookSkillList.length-1]=this.isDazhaoAutoUse?e:0:this._hookSkillList[p_l-1]=e)},p_l.prototype.reqOneKeyLvUp=function(e){if(e&&0!==e.length){var p_l,p_g=new c2m_skill_level_up;p_g.list=[];for(var b_s=0,d_u=e;b_s<d_u.length;b_s++){var b_e=d_u[b_s];(p_l=new x_skill_lv_info).id=b_e.id,p_l.lv=b_e.lv,p_l.star=0,p_g.list.push(p_l)}DB.instance.query(c2m_skill_level_up,p_g)}},p_l.prototype.reqSwapPrio=function(e,p_l){var p_g=new c2m_skill_prio_swap;p_g.id=e,p_g.prio=p_l,DB.instance.query(c2m_skill_prio_swap,p_g)},p_l.prototype.getSkillVo=function(e){if(!this._activeList)return null;for(var p_l=0,p_g=this._activeList;p_l<p_g.length;p_l++){var b_s=p_g[p_l];if(b_s.id==e)return b_s}return null},p_l.prototype.getRolePassiveSkills=function(e){var p_g=this;void 0===e&&(e=1);var b_s=Config.skill_passive_role;if(b_s){var d_u=new Array;for(var b_e in b_s)b_s[b_e].mainType==e&&d_u.push(b_s[b_e]);return d_u.sort((function(e,b_s){var d_u=p_g.getPassiveVo(e.id),b_e=p_g.getPassiveVo(b_s.id),d_m=p_l.instance.checkCanActivePassiveSkill(e.id),d_w=p_l.instance.checkCanActivePassiveSkill(b_s.id),f_t=!d_u&&d_m,v_z=!b_e&&d_w;return f_t&&!v_z?-1:!f_t&&v_z?1:d_u&&!b_e?-1:!d_u&&b_e?1:e.id-b_s.id}))}return null},p_l.prototype.getActiveSkills=function(e){var p_l=Config.skill_skill;if(p_l){var p_g=new Array;for(var b_s in p_l)p_l[b_s].type==e&&p_g.push(p_l[b_s]);return p_g}return null},p_l.prototype.updateSkillCd=function(e,p_l){if(!this._init)return this._handleQue||(this._handleQue=[]),void this._handleQue.push({Class:m2c_skill_cd_update,pb:e,func:"updateSkillCd"});var p_g;for(var b_s in p_l=p_l||SyncTime.serverTime,e.cd&&e.cd.length||this.clearSkillcd(),e.cd){var d_u=e.cd[b_s];this.changeSkillCd(d_u.skillId,p_l,d_u.cd,!1)&&(p_g=!0)}p_g&&(this._activeList,LED.event(l_r.SKILL_CD_UPDATE))},p_l.prototype.getSkillDesc=function(e,p_l){var p_g=Config.skill_skill[e];if(!p_g)return"";var b_s=p_g.desc,d_u=p_g.monsterCoef||0,b_e=p_g.playerCoef||0,d_m=p_g.param1||0,d_w=p_g.param2||0,f_t=(p_g.param3,p_g.param4,p_g.param5,this.getSkillDamage(e,p_l)),v_z=(d_u+p_l*d_m+Math.floor(p_l/10)*d_w)/100,d_h=(b_e+(p_l*d_m+Math.floor(p_l/10)*d_w)/2)/100;return b_s.replace(/\{([^\s]*?)\}/g,(function(e){for(var p_l=[],p_g=1;p_g<arguments.length;p_g++)p_l[p_g-1]=arguments[p_g];var b_s=p_l[0].split(":"),d_u="<span style='color:#008931'>";if(1<b_s.length)switch(b_s[1]){case"monster":d_u+=Math.floor(v_z)+"%+"+Math.floor(f_t);break;case"player":d_u+=Math.floor(d_h)+"%+"+Math.floor(f_t)}return d_u+"</span>"}))},p_l.prototype.getStarShowByType=function(e,p_l){var p_g=p_l,b_s=PassiveSkillType;switch(e){case b_s.TALISMAN:case b_s.BEAST:case b_s.MOUNT:case b_s.TRAINING:case b_s.DRAGON:p_g=p_l-1}return p_g},p_l.prototype.isRedPoint=function(e,p_g,b_s,d_u){var b_e,d_m=p_l.instance.getConfigPassiveTheme(d_u)[e];if(!d_m)return!1;if(d_m.skill){var d_w,f_t=new x_h(d_m.id,d_m.name,p_g,b_s,d_u),v_z=this.getPassiveVoById(Math.floor(d_m.skill[0]/1e3),d_u);d_w=v_z?this.countMarrySkillId(Math.floor(d_m.skill[0]/1e3),v_z.level+1):this.countMarrySkillId(Math.floor(d_m.skill[0]/1e3),1),b_e=p_l.instance.canOpenPvSkill(d_w,f_t,d_u,!1)}else b_e=!1;return b_e},p_l.instance=new p_l,p_l}(j_b),CittaModule=function(e){function p_l(){var p_l=null!==e&&e.apply(this,arguments)||this;return p_l.cittaLimativRed=!1,p_l.soltvo=0,p_l}return __extends(p_l,e),p_l.prototype.init=function(){var e=Config.skill_passive_mental;if(e)for(var p_l in this._cittaDates=[],e)if(e[p_l]&&e[p_l].subtype){var p_g=1e3*parseInt(e[p_l].id.toString().slice(0,4));if(this.getCittaDatesvo(p_g))continue;var b_s=new CittaVo;b_s.id=p_g,b_s.lv=0,b_s._state=0,1==e[p_l].subtype&&b_p.checkConsume(e[p_l].consume)&&(b_s._state=2),this.cittaCanCitta(b_s.id)&&e[p_l].subtype&&2==e[p_l].subtype&&(b_s._state=2),b_s.init(e[p_l].id),this._cittaDates.push(b_s)}},p_l.prototype.compareFun=function(e,p_l){return e._state===p_l._state?e.id-p_l.id:p_l._state-e._state},p_l.prototype.changeCitta=function(e){if(e.list&&0<e.list.length)for(var p_l in e.list){var p_g=this.getSingleCitta(e.list[p_l].skillId);p_g&&e.list[p_l].skillId==p_g.id&&(p_g.revisionLv(e.list[p_l].lv),p_g.revisionSolt(e.list[p_l].slot),p_g.init(e.list[p_l].skillId))}LED.event(l_r.UPDATE_CITTA_INFO)},p_l.prototype.changCittaInfo=function(e){if(e.list&&0<e.list.length)for(var p_l in e.list){var p_g=this.getSingleCitta(e.list[p_l].id);p_g&&(p_g.revisionLv(e.list[p_l].lv,e.list[p_l].star),p_g.stateAlter(1),LED.event(l_r.UPDATE_CITTA_INFO))}},p_l.prototype.onSoltGetCittaVo=function(e){if(e){var p_l=this.skillmentalinfo;if(p_l&&p_l.list&&0<p_l.list.length)for(var p_g in p_l.list)if(p_l.list[p_g].slot==e)return p_l.list[p_g]}return null},p_l.prototype.getSingleCitta=function(e){if(this._cittaDates&&0<this._cittaDates.length)for(var p_l in this._cittaDates)if(parseInt(this._cittaDates[p_l].id.toString().slice(0,4))==parseInt(e.toString().slice(0,4)))return this._cittaDates[p_l];return null},p_l.prototype.onAmuletVo=function(){var e=this.skillmentalinfo;if(e&&e.list&&0<e.list.length){var p_l=[];for(var p_g in e.list){var b_s;if(e.list[p_g])new CittaVo,b_s=this.getSingleCitta(e.list[p_g].skillId),p_l.push(b_s)}return p_l}return null},p_l.prototype.getCittaDatesvo=function(e){if(this._cittaDates&&!(this._cittaDates.length<=0)){for(var p_l in this._cittaDates)if(this._cittaDates[p_l].id==e)return!0;return!1}},p_l.prototype.updateCittaVo=function(e){for(var p_l in this._cittaDateReq=[],e.list)if(e.list[p_l]){var p_g=new CittaVo;p_g.id=e.list[p_l].skillId,p_g.lv=e.list[p_l].lv,p_g.slot=e.list[p_l].slot,p_g.init(e.list[p_l].skillId),this._cittaDateReq.push(p_g)}LED.event(l_r.UPDATE_CITTARED_INFO)},p_l.prototype.cittaDatesInfo=function(e){if(this._cittaDates){var p_l=void 0,p_g=[];for(var b_s in this._cittaDates){var d_u=Config.skill_passive_mental[this._cittaDates[b_s].id];d_u&&d_u.subtype==e&&(p_l=this._cittaDates[b_s],1==d_u.subtype&&b_p.checkConsume(d_u.consume)&&(this._cittaDates[b_s]._state=2),0==this._cittaDates[b_s]._state&&this.cittaCanCitta(p_l.id)&&d_u.subtype&&2==d_u.subtype&&(this._cittaDates[b_s]._state=2),p_g.push(p_l))}return p_g}return null},p_l.prototype.initUpdate=function(e){this.init();var p_g=e.skillList;if(p_g&&0<p_g.length)for(var b_s in p_g)if(this._cittaDates){var d_u=this.getSingleCitta(p_g[b_s].id);d_u&&(d_u.revisionLv(p_g[b_s].lv,p_g[b_s].star),d_u.init(p_g[b_s].id),d_u.stateAlter(1))}p_l.instance.reqMentalinfo()},p_l.prototype.cittaCanCitta=function(e){var p_l=Config.skill_passive_mental[e];if(p_l){if(!p_l.condition)return;if("state"==p_l.condition[0][0]){var p_g=StateModel.instance.getStateLv(),b_s=StateModel.instance.getStateSubLv();if(p_g>p_l.condition[0][1])return d_u();if(p_g==p_l.condition[0][1]){if(!p_l.condition[0][2])return d_u();if(b_s>=p_l.condition[0][2])return d_u()}}}function d_u(){return!("subItem"!=p_l.condition[1][0]||!b_p.checkConsume(p_l.condition[1][1]))}return!1},p_l.prototype.setSinglecittaDateReq=function(e){if(this._cittaDateReq&&0<this._cittaDateReq.length)for(var p_l in this._cittaDateReq)if(this._cittaDateReq[p_l].id==e)return this._cittaDateReq[p_l];return null},p_l.prototype.canCittaEquip=function(e){if(e){var p_l=this.skillmentalinfo;if(p_l&&p_l.list&&0<p_l.list.length)for(var p_g in p_l.list)if(p_l.list[p_g].skillId==e)return!0}return!1},p_l.prototype.cittaCanState=function(e){e=1e3*parseInt(e.toString().slice(0,4));var p_l=Config.skill_passive_mental[e];if(p_l&&"state"==p_l.condition[0][0]){var p_g=StateModel.instance.getStateLv(),b_s=StateModel.instance.getStateSubLv();if(p_g>p_l.condition[0][1])return!0;if(p_g==p_l.condition[0][1]){if(!p_l.condition[0][2])return!0;if(b_s>=p_l.condition[0][2])return!0}}return!1},p_l.prototype.getSoltVo=function(){var e=Config.skill_mental_gird;if(e){var p_l=[];for(var p_g in e){if(e[p_g]&&"state"==e[p_g].condition[0]){var b_s=StateModel.instance.getStateLv(),d_u=StateModel.instance.getStateSubLv();if(b_s<parseInt(e[p_g].condition[1])){p_l.push(e[p_g]);continue}if(b_s==parseInt(e[p_g].condition[1])&&parseInt(e[p_g].condition[2])&&d_u<parseInt(e[p_g].condition[2])){p_l.push(e[p_g]);continue}}e[p_g]&&"vip"==e[p_g].condition[0]&&parseInt(e[p_g].condition[1])>this.heroVo.vipLv&&p_l.push(e[p_g])}return p_l}},Object.defineProperty(p_l.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),p_l.prototype.cittaCommonShowInfo=function(e){if(this._cittaDates){var p_l=[];for(var p_g in this._cittaDates){var b_s=Config.skill_passive_mental[this._cittaDates[p_g].id],d_u=void 0;b_s&&b_s.commonType&&b_s.commonType==e&&(d_u=new CittaVo,d_u=this._cittaDates[p_g],p_l.push(d_u)),b_s&&b_s.subtype&&1==b_s.subtype&&0==e&&(d_u=new CittaVo,d_u=this._cittaDates[p_g],p_l.push(d_u))}return p_l.sort(this.compareFun)}return null},p_l.prototype.getFightById=function(e){var p_l=0;return e.isActive()&&(1==e.type?p_l=e.onAmuletPower():2==e.type&&(p_l=e.getPower())),p_l},p_l.prototype.reqMentalinfo=function(){var e=new c2m_skill_mental_info;DB.instance.query(c2m_skill_mental_info,e)},p_l.prototype.getUpStarConf=function(e,p_l){return Qqn(e,p_l,Config)},p_l.prototype.getActVoByType=function(e,p_l){void 0===p_l&&(p_l=2);var p_g=this._cittaDates,b_s=[];for(var d_u in p_g){var b_e=Config.skill_passive_mental[p_g[d_u].id];for(var d_m in e)p_g[d_u].isActive()&&b_e.propType==e[d_m]&&b_e.subtype==p_l&&b_s.push(p_g[d_u])}return b_s},p_l.prototype.canSoleRed=function(e){if(this.onSoltGetCittaVo(e)){var p_l=this.setSinglecittaDateReq(this.onSoltGetCittaVo(e).skillId);if(p_l&&p_l.canDeloyCanUp(p_l.id)&&!p_l.getSkillMaxLv(p_l.id))return!0;if(2==p_l._state)return!0}return!1},p_l.prototype.canSoltsRed=function(e){if(1==e&&this.skillmentalinfo&&this.skillmentalinfo.list&&0<this.skillmentalinfo.list.length){for(var p_l in this.skillmentalinfo.list)if(this.canSoleRed(this.skillmentalinfo.list[p_l].slot))return!0;var p_g=this.cittaCommonShowInfo(0);for(var p_l in p_g)if(2==p_g[p_l]._state)return!0}if(2==e)for(var p_l in p_g=this.cittaCommonShowInfo(0))if(2==p_g[p_l]._state)return!0;return!1},p_l.prototype.getBasePropById=function(e){if(e){var p_l=1e3*parseInt(e.id.toString().slice(0,4));return CharacterProperty.getPropertys(Config.skill_passive_mental[p_l+e.lv].featureParam)}},p_l.prototype.cittaCommonInfo=function(e){if(this._cittaDates){var p_l=[];for(var p_g in this._cittaDates){var b_s=Config.skill_passive_mental[this._cittaDates[p_g].id],d_u=void 0;b_s&&b_s.commonType&&b_s.commonType==e&&!this.canCittaEquip(b_s.id)&&(d_u=new CittaVo,d_u=this._cittaDates[p_g],p_l.push(d_u))}return p_l.sort(this.compareFun)}return null},p_l.prototype.amuletTypeNum=function(){var e=Config.skill_passive_mental,p_l=[],p_g=0;if(e){for(var b_s in e)e[b_s]&&1==e[b_s].subtype&&e[b_s].commonType&&e[b_s].commonType>p_g&&(p_g=e[b_s].commonType,p_l.push(e[b_s].commonType));return p_l}},p_l.prototype.onPowers=function(e,p_l){if(e&&0<e.length){var p_g=0;for(var b_s in e)e[b_s]._state==CittaVoState.ACTIVED&&(1==p_l?p_g+=e[b_s].getPower():2==p_l&&(p_g+=e[b_s].onAmuletPower()));return p_g}return 0},p_l.prototype.canCiTtaLimticRed=function(){if(!p_k.instance.checkSystemOpen(FuncDefine.citta))return!1;var e=p_l.instance.cittaDatesInfo(2);if(this.cittaLimativRed)return!1;if(e)for(var p_g in e){if(2==e[p_g].state)return!0;if(1==e[p_g].state){if(e[p_g].canStarUp())return!0;if(e[p_g].canDeloyCanUp(e[p_g].id)&&!e[p_g].getSkillMaxLv(e[p_g].id))return!0}}return!1},p_l.prototype.reqEquipMental=function(e,p_l){var p_g=new c2m_skill_mental_equip;p_g.skillId=e,p_g.slot=p_l,DB.instance.query(c2m_skill_mental_equip,p_g)},p_l.prototype.reqAciiveMental=function(e){var p_l=new c2m_skill_mental_active;p_l.skillId=e,DB.instance.query(c2m_skill_mental_active,p_l)},p_l.instance=new p_l,p_l}(j_b),HangupType,HangupStateType,MapFunType;!function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.citta.cittaviewUI,__extends(d_u,p_l),d_u.prototype.onAdded=function(){this.decBox.visible=!1,this.on(Laya.Event.CLICK,this,this.onClick),this.uplvbtn.on(Laya.Event.CLICK,this,this.onCittaActiv),this.change.on(Laya.Event.CLICK,this,this.onExchange),this.cittabtn.visible=!1,this.cittabtn2.visible=!1,this.cittabtn3.visible=!1,this.desc1.style&&(this.desc1.style.color="#4a728e",this.desc1.style.fontSize=24,this.desc1.style.wordWrap=!0,this.desc1.style.valign="top",this.desc1.style.leading=0,this.desc1.style.letterSpacing=0,this.desc1.style.font="SimHei"),this.lvDesc.style&&(this.lvDesc.style.color="#4a728e",this.lvDesc.style.fontSize=24,this.lvDesc.style.wordWrap=!0,this.lvDesc.style.leading=2,this.lvDesc.style.letterSpacing=1,this.lvDesc.style.font="SimHei",this.lvDesc.style.align="center",this.lvDesc.style.valign="middle"),this.cittapoints=[],this.cittacospoints=[];for(var e=0;e<8;++e){var p_l=this["item"+e];if(p_l&&p_l){var p_g=[p_l.x,p_l.y,p_l.scaleX,e];this.cittapoints.push(p_g);var b_s=e;this.cittacospoints.push(b_s)}}LED.on(l_r.UPDATE_CITTA_INFO,this,this.init),CittaModule.instance.reqMentalinfo()},d_u.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":d_u.close();break;case"handbookBtn":v_z.open();break;case"cittabtn2":for(var p_l in this.cittacospoints)if(1==this.cittacospoints[p_l]){var p_g=this["item"+parseInt(p_l)];p_g.getChildByName("desc"),0==p_g.getChildByName("lock").visible&&this.onOpenPanel(parseInt(p_l)+1),this.updateSkillBtnInfo(parseInt(p_l)+1),this.dataSource=parseInt(p_l)+1}}},d_u.prototype.onOpenPanel=function(e){e&&(CittaModule.instance.soltvo=e,d_m.open(e))},d_u.prototype.setDatesource=function(e){void 0===e&&(e=0),this.on(Laya.Event.MOUSE_DOWN,this,this.onMoveStart),this.on(Laya.Event.MOUSE_UP,this,this.onMoveStop);for(var p_l=0;p_l<8;p_l++){var p_g=this["item"+p_l];p_g&&(this.updateChildScale(p_g),p_g&&this.cittapoints&&(0==e&&(this.cittacospoints[p_l]=p_l,p_g.x=this.cittapoints[p_l][0],p_g.y=this.cittapoints[p_l][1],p_g.scale(this.cittapoints[p_l][2],this.cittapoints[p_l][2])),this.onRenderList(null,p_g,p_l)))}},d_u.prototype.onMoveUpdate=function(e,p_l){void 0===e&&(e=0);var p_g=p_l.target;if(p_l.type==Laya.Event.MOUSE_MOVE&&1==e){if(this.on(Laya.Event.MOUSE_OUT,this,this.onMoveStop),this.cittabtn.off(Laya.Event.MOUSE_UP,this,this.onClick),this.cittabtn2.off(Laya.Event.CLICK,this,this.onClick),this.cittabtn3.off(Laya.Event.MOUSE_UP,this,this.onClick),this.cittabtn.visible=!1,this.cittabtn.mouseEnabled=!1,this.cittabtn2.visible=!1,this.cittabtn2.mouseEnabled=!1,this.cittabtn3.visible=!1,this.cittabtn3.mouseEnabled=!1,!this.clickPoint)return;this.clickPoint&&this.clickPoint[1]&&(this.clickPoint[1].x=p_g.mouseX,this.clickPoint[1].y=p_g.mouseY);var b_s=(p_g.mouseX-this.clickPoint[0].x)/200;if(0==b_s)return;for(var d_u=this.cittapoints,b_e=this.cittacospoints,d_m=0;d_m<8;++d_m){var d_w=this["item"+d_m];if(d_w&&d_u){if(0<b_s){var f_t=d_u[t_n=(1+(r_t=(Math.floor(b_s)+b_e[d_m])%8))%8],v_z=d_u[r_t],d_h=this.setpoint([f_t,v_z],b_s-Math.floor(b_s));d_w.pos(d_h[0],d_h[1]),d_w.scale(d_h[2],d_h[2])}else{for(var r_t=b_e[d_m]+Math.ceil(b_s);r_t<0;)r_t+=8;for(var t_n=r_t-1;t_n<0;)t_n+=8;f_t=d_u[t_n],v_z=d_u[r_t],d_h=this.setpoint([f_t,v_z],Math.ceil(b_s)-b_s),d_w.pos(d_h[0],d_h[1]),d_w.scale(d_h[2],d_h[2])}this.updateChildScale(d_w)}}}},d_u.prototype.checkSystemOpen=function(e){void 0===e&&(e=!1)},d_u.prototype.onExchange=function(){this.exchange&&(CittaModule.instance.soltvo=this.exchange,d_m.open(this.exchange))},d_u.prototype.onRenderList=function(e,p_l,p_g){if(p_l){p_l.getChildByName("selectBox");var b_s=p_l.getChildByName("icon"),d_u=p_l.getChildByName("desc"),b_e=p_l.getChildByName("lock"),d_m=p_l.getChildByName("addbtn"),d_w=(p_l.getChildByName("addimg"),p_l.getChildByName("upRed")),f_t=CittaModule.instance.skillmentalinfo;d_w.visible=!1,d_u.text=(j_x("1163_2456_1224")),b_e.visible=!1,b_s.visible=!1,d_m.visible=!0,d_m.mouseEnabled=!0,this.activVo=CittaModule.instance.onSoltGetCittaVo(p_g+1);var v_z=CittaModule.instance.getSoltVo();f_t&&v_z&&p_g+1>f_t.slotCount&&(b_e.visible=!0,v_z[p_g-f_t.slotCount]&&(d_u.text=v_z[p_g-f_t.slotCount].condition.toString()));var d_h=CittaModule.instance.onSoltGetCittaVo(p_g+1);if(d_h){b_s.visible=!0;var r_t=CittaModule.instance.getSingleCitta(d_h.skillId);d_w.visible=r_t.canDeloyCanUp(d_h.skillId)&&!r_t.getSkillMaxLv(d_h.skillId),r_t&&(d_u.text=r_t.name+r_t.lv);var t_n=Resource.ResUrl.getIconUrl(Config.skill_passive_mental[d_h.skillId].icon);b_s.skin=t_n,d_m.visible=!1,d_m.mouseEnabled=!1}d_u.text}},d_u.prototype.onMoveStart=function(e){var p_l=e.target;if(e.type==Laya.Event.MOUSE_DOWN){if(!this.clickPoint)return;this.clickPoint&&this.clickPoint[0]&&(this.clickPoint[0].x=p_l.mouseX,this.clickPoint[0].y=p_l.mouseY),this.on(Laya.Event.MOUSE_MOVE,this,this.onMoveUpdate,[1])}},d_u.open=function(){Kao(UIM,d_u)},d_u.prototype.onMoveStop=function(e){var p_l=e.target;if(e.type==Laya.Event.MOUSE_UP||e.type==Laya.Event.MOUSE_OUT){if(this.off(Laya.Event.MOUSE_OUT,this,this.onMoveStop),!this.clickPoint)return;this.clickPoint&&this.clickPoint[2]&&(this.clickPoint[2].x=p_l.mouseX,this.clickPoint[2].y=p_l.mouseY),this.off(Laya.Event.MOUSE_MOVE,this,this.onMoveUpdate);var p_g=this.cittapoints,b_s=this.cittacospoints,d_u=(p_l.mouseX-this.clickPoint[0].x)/200;if(this.cittabtn.visible=!0,this.cittabtn.mouseEnabled=!0,this.cittabtn2.visible=!0,this.cittabtn2.mouseEnabled=!0,this.cittabtn3.visible=!0,this.cittabtn3.mouseEnabled=!0,"cittabtn"==p_l.name&&(d_u=.5),"cittabtn3"==p_l.name&&(d_u=-.5),0==d_u)return;for(var b_e=0;b_e<8;++b_e){var d_m=this["item"+b_e];if(d_m&&p_g)if(0<d_u){var d_w=p_g[r_t=(1+(d_h=(Math.floor(d_u)+b_s[b_e])%8))%8],f_t=p_g[d_h],v_z=this.setpoint([d_w,f_t],d_u-Math.floor(d_u));d_m.pos(v_z[0],v_z[1]),d_m.scale(v_z[2],v_z[2]),d_u-Math.floor(d_u)<.5?(Laya.Tween.to(d_m,{f_u:f_t[0],j_l:f_t[1],scaleX:f_t[2],scaleY:f_t[2]},100,Laya.Ease.linearIn,Laya.Handler.create(this,this.updateChildScale,[d_m])),b_s[b_e]=f_t[3]):(Laya.Tween.to(d_m,{f_u:d_w[0],j_l:d_w[1],scaleX:d_w[2],scaleY:d_w[2]},100,Laya.Ease.linearIn,Laya.Handler.create(this,this.updateChildScale,[d_m])),b_s[b_e]=d_w[3])}else{for(var d_h=b_s[b_e]+Math.ceil(d_u);d_h<0;)d_h+=8;for(var r_t=d_h-1;r_t<0;)r_t+=8;d_w=p_g[r_t],f_t=p_g[d_h],v_z=this.setpoint([d_w,f_t],Math.ceil(d_u)-d_u),d_m.pos(v_z[0],v_z[1]),d_m.scale(v_z[2],v_z[2]),Math.ceil(d_u)-d_u<.5?(Laya.Tween.to(d_m,{f_u:f_t[0],j_l:f_t[1],scaleX:f_t[2],scaleY:f_t[2]},100,Laya.Ease.linearIn,Laya.Handler.create(this,this.updateChildScale,[d_m])),b_s[b_e]=f_t[3]):(Laya.Tween.to(d_m,{f_u:d_w[0],j_l:d_w[1],scaleX:d_w[2],scaleY:d_w[2]},100,Laya.Ease.linearIn,Laya.Handler.create(this,this.updateChildScale,[d_m])),b_s[b_e]=d_w[3])}}for(var t_n in this.cittabtn.on(Laya.Event.MOUSE_UP,this,this.onClick),this.cittabtn2.on(Laya.Event.CLICK,this,this.onClick),this.cittabtn3.on(Laya.Event.MOUSE_UP,this,this.onClick),this.cittacospoints)1==this.cittacospoints[t_n]&&(this.updateSkillBtnInfo(parseInt(t_n)+1),this.dataSource=parseInt(t_n)+1)}},d_u.prototype.updateChildScale=function(e){if(e){var p_l=e.getChildByName("bg"),p_g=e.getChildByName("desc");p_l.visible=!0,p_g.visible=!0,e.scaleX<.96&&(p_l.visible=!1,p_g.visible=!1)}},d_u.prototype.setpoint=function(e,p_l){return Muz(e,p_l)},d_u.prototype.onCittaActiv=function(){if(this.activVo){var e=CittaModule.instance.getSingleCitta(this.activVo.skillId);if(e.canDeloyCanUp(e.id)&&!e.getSkillMaxLv(e.id))return CittaModule.instance.reqAciiveMental(this.activVo.skillId),void b_p.broadcastNotice((j_x("371_2342_402")+j_x(2142)),1,"#71de66");e.getSkillMaxLv(e.id)&&b_p.broadcastNotice((j_x("1300_1463_2342"))),b_p.broadcastNotice(Utils.$(("{1}"+j_x("2462_1779")+""+j_x("814_799_371")+j_x(2342)),Config.skill_passive_mental[e.id].name))}},d_u.prototype.onRemoveed=function(){Obm(this,Laya,LED,l_r)},d_u.prototype.updateSkillBtnInfo=function(e){var p_l=CittaModule.instance.onSoltGetCittaVo(e);if(this.decBox.visible=!1,this.descbox.visible=!1,this.maxdesc.visible=!1,p_l){this.decBox.visible=!0,this.descbox.visible=!0;var p_g=CittaModule.instance.getSingleCitta(p_l.skillId);this.upRed.visible=p_g.canDeloyCanUp(p_l.skillId);var b_s=Config.skill_passive_mental[p_l.skillId+p_l.lv+1];b_s=b_s||Config.skill_passive_mental[p_l.skillId+p_l.lv],this.desc1.innerHTML=b_s.desc,this.lvDesc.innerHTML=Utils.$("{1}{2}",b_s.name,Utils.setColor(Utils.$(("  ({1})"+j_x(2342)),p_g.lv),"#008931")),this.exchange=e,(p_g.lv<=0||p_g.getSkillMaxLv(p_g.id))&&(this.lvDesc.innerHTML=p_g.name,this.decBox.visible=!1,this.maxdesc.visible=!0),this.activVo=p_l,this.consumDesc.color=this.upRed.visible?Config.color[102].color2:Config.color[106].color2;var d_u=BagModel.instance.getItemCountByItemID(b_s.consume[0][0]);if(b_s){this.consumDesc.changeText(d_u+"/"+b_s.consume[0][1]);var b_e=Resource.ResUrl.getIconUrl(Config.skill_passive_mental[p_l.skillId].icon);this.iconic.skin=b_e}}else CittaModule.instance.skillmentalinfo.slotCount<e&&(this.descbox.visible=!0,this.lvDesc.innerHTML="",this.desc1.innerHTML=Config.skill_mental_gird[e].unlockDesc)},d_u.prototype.clearTween=function(e){this.tweento&&(this.tweento._clear(),Laya.Tween.clear(this.tweento),Laya.Tween.clearAll(e))},d_u.prototype.onMoveclose=function(){Axy(this,Laya)},d_u.prototype.init=function(){this.dataSource&&(this.setDatesource(1),this.updateSkillBtnInfo(this.dataSource));var e=CittaModule.instance.onPowers(CittaModule.instance.onAmuletVo(),2);b_p.getNumSp(NumType.FIGHTING,e,this.atkNum,-7),this.handbookRed.visible=CittaModule.instance.canSoltsRed(2)},d_u.prototype.onReset=function(){this.clickPoint=[];for(var e=1;e<4;e++){var p_l=new Laya.Point;p_l.x=0,p_l.y=0,this.clickPoint.push(p_l)}for(var p_g in this.cittacospoints)1==this.cittacospoints[p_g]&&(this["item"+parseInt(p_g)].getChildByName("desc"),this.updateSkillBtnInfo(parseInt(p_g)+1))},d_u.close=function(){Wlv(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e.singlepoint=new Laya.Point,e.tweento=new Laya.Tween,e.amuletVo=0,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.RECOVERED,e,e.onRemoveed),e.dataSource=0,e}e.CittaPanel=b_s;var b_e,d_m=(b_e=ui.window.citta.citta_limitictipUI,__extends(d_w,b_e),d_w.prototype.init=function(){Iba(this,h_h,p_g,CittaModule)},d_w.prototype.onRenderList=function(e,p_l,p_g){e==this.list&&p_l.init(p_l.dataSource)},d_w.prototype.onAdded=function(){Yhe(this,Laya)},d_w.open=function(e){UIM.open(d_w,[""],{id:e},!1,!1,!0,!0)},d_w.prototype.onRemoveed=function(){Gaf(this,Laya)},d_w.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":d_w.close()}},d_w.close=function(){Miq(UIM,d_w)},d_w);function d_w(){var e=b_e.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.RECOVERED,e,e.onRemoveed),e}e.limiticTipPanel=d_m;var f_t,v_z=(f_t=ui.window.citta.citta_handbookUI,__extends(d_h,f_t),d_h.prototype.onAdded=function(){Cvn(this,Laya,LED,l_r)},d_h.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":d_h.close()}},d_h.prototype.init=function(){Aeq(this,l_m,p_g,CittaModule)},d_h.prototype.onRemoveed=function(){Gnr(this,Laya,LED,l_r)},d_h.open=function(){Qku(UIM,d_h)},d_h.prototype.onRenderList=function(e,p_l,p_g){e==this.list&&p_l.init(p_l.dataSource)},d_h.close=function(){Yjc(UIM,d_h)},d_h);function d_h(){var e=f_t.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.RECOVERED,e,e.onRemoveed),e}e.handbookPanel=v_z;var r_t,t_n=(r_t=ui.window.citta.citta_celltipUI,__extends(f_y,r_t),f_y.prototype.onAdded=function(){Ehw(this)},f_y.prototype.onRemoveed=function(){},f_y.open=function(e){UIM.open(f_y,[""],{vo:e},!1,!1,!0,!0)},f_y.prototype.init=function(){if(this.dataSource.vo){var e=this.dataSource.vo;0==e.lv&&(e.lv=1),this.nameTxt.text=e.name+"  "+e.lv.toString()+"Lv";var p_l=Config.skill_passive_mental[e.id+e.lv];this.desc1.text=p_l.desc,this.icon.skin=Resource.ResUrl.getIconUrl(p_l.icon)}},f_y.close=function(){Mfa(UIM,f_y)},f_y);function f_y(){var e=r_t.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.RECOVERED,e,e.onRemoveed),e}e.cittacellTip=t_n;var p_q,h_h=(p_q=ui.window.citta.citta_tipcellUI,__extends(n_j,p_q),n_j.prototype.onAdded=function(){},n_j.prototype.onList=function(e,p_l,p_g){if(e==this.list&&"changBtn"!=p_l.target.name&&p_l.type==Laya.Event.CLICK){var b_s=CittaModule.instance.cittaCommonShowInfo(1)[p_g];b_s&&t_n.open(b_s)}},n_j.prototype.onRemoveed=function(){},n_j.prototype.onRenderList=function(e,p_l,p_g){if(e==this.list&&e==this.list&&p_l){var b_s=p_l.dataSource;if(b_s){var d_u=p_l.getChildByName("bgImg"),b_e=p_l.getChildByName("lvdesc"),d_m=p_l.getChildByName("namedec"),d_w=p_l.getChildByName("condition"),f_t=p_l.getChildByName("quality"),v_z=(p_l.getChildByName("effectClp"),p_l.getChildByName("icon")),d_h=p_l.getChildByName("qualitylv"),r_t=p_l.getChildByName("changBtn");r_t.on(Laya.Event.CLICK,this,this.onChangeed,[b_s]),d_u.visible=!0,d_m.changeText(b_s.name.toString());var t_n=Config.skill_passive_mental[b_s.id];if(!t_n)return;r_t.disabled=!0,d_h.index=f_t.index=t_n.grade-2,d_h.visible=!1,b_e.text=b_s.lv.toString()+(j_x(2342)),b_s.lv<=0&&(b_e.text="");var f_y=Config.skill_passive_mental[1e3*parseInt(b_s.id.toString().slice(0,4))],p_q=Resource.ResUrl.getIconUrl(f_y.icon);v_z.skin=p_q,t_n.condition[2],t_n.condition&&(d_w.text="",0!=b_s._state||b_p.checkConsume(t_n.condition)||d_w.changeText(Config.CItem(t_n.condition[0][0]).name+t_n.condition[0][1]+(j_x(844)))),1==b_s._state&&(d_h.visible=!0,r_t.disabled=!1,d_u.visible=!1)}}},n_j.prototype.init=function(e){this.list.selectEnable=!0,this.list.mouseHandler=p_g.create(this,this.onList,[this.list],!1),this.list.renderHandler=p_g.create(this,this.onRenderList,[this.list],!1),this.list.array=CittaModule.instance.cittaCommonInfo(e),this.list.array&&0<this.list.array.length&&(this.namedesc.text=Config.skill_passive_mental[this.list.array[0].id].commonTypeDec)},n_j.prototype.onChangeed=function(e){e&&CittaModule.instance.soltvo&&(d_m.close(),b_p.broadcastNotice((j_x("2308_118_436")+j_x(799)+""+j_x("803_352_582")+j_x(1876)),1,Config.color[102].color2),CittaModule.instance.reqEquipMental(e.id,CittaModule.instance.soltvo))},n_j);function n_j(){var e=p_q.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.RECOVERED,e,e.onRemoveed),e}e.cittaTipcell=h_h;var j_l,l_m=(j_l=ui.window.citta.bookcellUI,__extends(z_m,j_l),z_m.prototype.onAdded=function(){},z_m.prototype.onRenderList=function(e,p_l,p_g){if(e==this.list&&p_l){var b_s=p_l.dataSource;if(b_s){var d_u=p_l.getChildByName("bgImg"),b_e=p_l.getChildByName("lvdesc"),d_m=p_l.getChildByName("namedec"),d_w=p_l.getChildByName("condition"),f_t=p_l.getChildByName("isactiv"),v_z=p_l.getChildByName("quality"),d_h=(p_l.getChildByName("effectClp"),p_l.getChildByName("icon")),r_t=p_l.getChildByName("qualitylv"),t_n=p_l.getChildByName("red_activ"),f_y=p_l.getChildByName("effect");this.stopEffect(f_y,0),d_u.visible=!0,t_n.visible=!1,d_m.changeText(b_s.name.toString());var p_q=Config.skill_passive_mental[b_s.id];if(!p_q)return;r_t.index=v_z.index=p_q.grade-2,r_t.visible=!1,b_e.text=b_s.lv.toString()+(j_x(2342)),b_s.lv<=0&&(b_e.text="");var h_h=Config.skill_passive_mental[1e3*parseInt(b_s.id.toString().slice(0,4))],n_j=Resource.ResUrl.getIconUrl(h_h.icon);d_h.skin=n_j,p_q.condition[2],2!=b_s._state&&(f_t.visible=!1),p_q.condition&&(d_w.text="",0!=b_s._state||b_p.checkConsume(p_q.condition)||d_w.changeText(Config.CItem(p_q.condition[0][0]).name+p_q.condition[0][1]+(j_x(844))),f_t.visible=!1,f_t.play(!1)),0==b_s._state&&(t_n.visible=!1),1==b_s._state&&(r_t.visible=!0,f_t.visible=d_u.visible=!1),2==b_s._state&&(t_n.visible=f_t.visible=!0,f_t.play(!0))}}},z_m.prototype.onActivCitta=function(e,p_l,p_g){p_l&&(e.visible=!1,e.stop(),this.playEffect(p_g,p_l.id))},z_m.prototype.playEffect=function(e,p_l){e&&(e.visible=!0,e.play(!1),e.on(Laya.Event.COMPLETE,this,this.stopEffect,[e,p_l]))},z_m.prototype.onRemoveed=function(){},z_m.prototype.init=function(e){Qrq(e,this,p_g,CittaModule,Config)},z_m.prototype.onList=function(e,p_l,p_g){if(e==this.list&&p_l.type==Laya.Event.CLICK){var b_s=p_l.target,d_u=b_s.getChildByName("effect"),b_e=b_s.getChildByName("isactiv");2==b_s.dataSource._state&&this.onActivCitta(b_e,b_s.dataSource,d_u)}},z_m.prototype.stopEffect=function(e,p_l){e&&(e.off(Laya.Event.COMPLETE,this,this.stopEffect),e.visible=!1,e.stop(),p_l&&CittaModule.instance.reqAciiveMental(p_l))},z_m);function z_m(){var e=j_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.RECOVERED,e,e.onRemoveed),e}e.HandBookcell=l_m}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.citta.limitcittaviewUI,__extends(d_u,p_l),d_u.prototype.init=function(){Ofy(this,p_g)},d_u.prototype.stopEffect=function(e,p_l,p_g){void 0===p_g&&(p_g=!1),e&&(p_g?SkillModel.instance.reqSkillMentalUp(p_l):CittaModule.instance.reqAciiveMental(p_l),this.activateBtn.mouseEnabled=!0,e.off(Laya.Event.COMPLETE,this,this.stopEffect),e.visible=!1,e.stop())},d_u.prototype.onRemoveed=function(){Obb(this,Laya)},d_u.close=function(){Ydl(UIM,d_u)},d_u.prototype.updateInfo=function(){var e=CittaModule.instance.cittaDatesInfo(2);if(e){var p_l=e.sort(CittaModule.instance.compareFun);this.updateFighting(p_l),this.list.array=p_l,this.list.selectedIndex=this.dataSource;var p_g=p_l[this.dataSource];if(this.activateBtn.mouseEnabled=!0,p_g){var b_s=this.list.getCell(this.dataSource);if(!b_s)return;var d_u=b_s.effect,b_e=(b_s.isactiv,b_s.red_activ,new Laya.Point);b_e.x=b_s.x,b_e.y=b_s.y,this.updateConsum(p_g),this.lvDesc.innerHTML=Utils.$("{1}{2}",p_g.name,Utils.setColor(Utils.$(("  ({1})"+j_x(2342)),p_g.lv),"#008931")),this.activBtn.visible=!0,this.maxdesc.visible=!1;var d_m=p_g.getSkillMaxLv(p_g.id);(p_g.lv<=0||d_m)&&(this.activBtn.visible=!1,this.maxdesc.visible=d_m);var d_w=p_g.state;this.activateBtn.dataSource={state:d_w},this.activateBtn.label=d_w==CittaVoState.ACTIVED?(j_x(371)+" "+j_x(2342)):(j_x(2335)+" "+j_x(1796)),this.vo=[p_g,b_e,d_u],this.consumDesc.color=this.red_activ.visible?Config.color[102].color2:Config.color[106].color2,this.updateUpStar(p_g),this.updatePvSkillItem()}}},d_u.prototype.updateFighting=function(e){Kyu(e,CittaModule,b_p,NumType,this)},d_u.prototype.onActivateBtnClick=function(e){this.activateBtn.visible&&this.onBtnClick(e),LongPushUtil.inst.clearLoopPush()},d_u.prototype.removeListener=function(){Qin(LED,l_r,this)},d_u.prototype.onList=function(e,p_l,p_g){if(e==this.list&&p_l.type==Laya.Event.CLICK){var b_s=p_l.target,d_u=b_s.effect,b_e=b_s.isactiv,d_m=b_s.red_activ,d_w=b_s.dataSource,f_t=d_w.state,v_z=new Laya.Point;if(v_z.x=b_s.x,v_z.y=b_s.y,this.list.array&&d_w){var d_h=1e3*parseInt(d_w.id.toString().slice(0,4))+d_w.lv,r_t=Config.skill_passive_mental[d_h+1];r_t=r_t||Config.skill_passive_mental[d_h],this.lvDesc.innerHTML=Utils.$("{1}{2}",d_w.name,Utils.setColor(Utils.$(("  ({1})"+j_x(2342)),d_w.lv),"#008931")),this.activBtn.visible=!0,this.maxdesc.visible=!1;var t_n=d_w.getSkillMaxLv(d_w.id);if((d_w.lv<=0||t_n)&&(this.activBtn.visible=!1,this.maxdesc.visible=t_n),r_t){var f_y=Config.skill_passive_mental[d_h],p_q={};p_q[2]=f_y?CharacterProperty.getPropertys(f_y.featureParam):[];var h_h=Config.skill_mental_star[1e3*parseInt(d_w.id.toString().slice(0,4))+d_w.star];h_h&&b_p.addProps(h_h.attr,1,p_q[2]);var n_j=TalismanModel.instance.setProp(this.desc1,p_q,Utils.setSpace(2),["#4a728e","#00802e"],4);n_j=d_w.isActive()?f_y.desc+"<br>"+n_j:f_y.desc,this.desc1.innerHTML=n_j;var j_l=LgcM.ins.heroVo;this.consumDesc.changeText(j_l.mentalExp+"/"+r_t.consume[0][1])}if(f_t==CittaVoState.CAN_ACTIVE&&(this.vo[1],b_e.visible=!1,this.playEffect(d_u,d_w.id),b_p.broadcastNotice(Utils.$((j_x("1067_189_2217")+j_x("1033_888_2234")+"{1}"+j_x("2335_1796_402")+j_x(2142)),d_w.name),BroadcastType.ERROR,Utils.Color.NAME_GREEN)),f_t==CittaVoState.NO_ACTIVE)if(r_t=Config.skill_passive_mental[d_h],CittaModule.instance.cittaCanState(r_t.id))r_f.instance.isWindows(r_t.itemId,r_t.itemId);else{var l_m=r_t.condition[0][2];l_m=l_m||0;var z_m=Config.state_state[r_t.condition[0][1]].desc+h_m[Utils.$("TYPE_{1}",+l_m)];b_p.broadcastNotice(Utils.$((j_x("1067_189_381")+j_x("843_206_1117")+j_x(1012)+"{1}"),z_m))}this.red_activ.visible=d_w.canDeloyCanUp(d_w.id)&&!t_n;var h_b=0!=d_w.state;d_m.visible=this.red_activ.visible&&h_b,this.activateBtn.dataSource={state:f_t},this.activateBtn.label=f_t==CittaVoState.ACTIVED?(j_x(371)+" "+j_x(2342)):(j_x(2335)+" "+j_x(1796)),this.vo=[d_w,v_z,d_u],this.dataSource=p_g,this.consumDesc.color=this.red_activ.visible?Config.color[102].color2:Config.color[106].color2,TalismanModel.instance.changeActStar(this.starBox,d_w.star+1),this.updateUpStar(d_w),this.updatePvSkillItem()}}},d_u.prototype.setDateSour=function(){Agl(CittaModule,this)},d_u.prototype.playNumMoveEft=function(e,p_l){if(e){var p_g=this._upNumLab;p_g||((p_g=new Laya.Label).font=b_p.config.font,p_g.fontSize=35,p_g.width=120,p_g.height=35,p_g.align="center",p_g.color="#099c2c",p_g.bold=!0,p_g.stroke=2,p_g.strokeColor="#000000"),p_g.text="+"+e,p_g.parent||(p_g.x=p_l.x+80,p_g.y=p_l.y+320,Laya.stage.addChild(this._upNumLab)),p_g.x=p_l.x+130,p_g.y=p_l.y+350,p_g.alpha=1,Laya.Tween.to(p_g,{j_l:p_g.y-80,alpha:0},500,null,Laya.Handler.create(this,this.tweenComplete),500,!0,!0)}},d_u.prototype.updateConsum=function(e){this.red_activ.visible=e.canDeloyCanUp(e.id)&&!e.getSkillMaxLv(e.id),this.consumDesc.color=this.red_activ.visible?Config.color[102].color2:Config.color[106].color2;var p_l=1e3*parseInt(e.id.toString().slice(0,4))+e.lv,p_g=Config.skill_passive_mental[p_l+1];p_g=p_g||Config.skill_passive_mental[p_l];var b_s=LgcM.ins.heroVo;p_g&&b_s&&this.consumDesc.changeText(b_s.mentalExp+"/"+p_g.consume[0][1]);var d_u=Config.skill_passive_mental[p_l],b_e={};b_e[2]=d_u?CharacterProperty.getPropertys(d_u.featureParam):[];var d_m=Config.skill_mental_star[1e3*parseInt(e.id.toString().slice(0,4))+e.star];d_m&&b_p.addProps(d_m.attr,1,b_e[2]);var d_w=TalismanModel.instance.setProp(this.desc1,b_e,Utils.setSpace(2),["#4a728e","#00802e"],4);d_w=e.isActive()?d_u.desc+"<br>"+d_w:d_u.desc,this.desc1.innerHTML=d_w,TalismanModel.instance.changeActStar(this.starBox,e.star+1)},d_u.prototype.playEffect=function(e,p_l,p_g){void 0===p_g&&(p_g=!1),e&&(e.visible&&this.stopEffect(e,p_l,p_g),e.visible=!0,e.play(!1),e.on(Laya.Event.COMPLETE,this,this.stopEffect,[e,p_l,p_g]))},d_u.open=function(){Iwg(UIM,d_u)},d_u.prototype.onActivateBtnMD=function(e){var p_l=this;LongPushUtil.inst.bingLongPushBtn(this,(function(){p_l.onBtnClick(null)}))},d_u.prototype.onBtnClick=function(e){if(this.vo&&this.vo[0]){var p_l=this.vo[0],p_g=this.vo[1],b_s=this.vo[2];switch(null==e?this.activateBtn.dataSource.state:e.target===this.activateBtn?this.activateBtn.dataSource.state:this.btnStarUp.dataSource.state){case CittaVoState.CAN_ACTIVE:this.activateBtn.mouseEnabled=!1,p_g&&this.playNumMoveEft(1,p_g),b_s&&this.playEffect(b_s,p_l.id),b_p.broadcastNotice(Utils.$((j_x("1067_189_2217")+j_x("1033_888_2234")+"{1}"+j_x("2335_1796_402")+j_x(2142)),p_l.name),1,"#71de66"),Resource.SoundManager.instance.playSoundById(12,!1);break;case CittaVoState.ACTIVED:if(p_l.getSkillMaxLv(p_l.id))return b_p.broadcastNotice(Utils.$((j_x("1300_371_2057")+j_x("1463_2342")))),void LongPushUtil.inst.clearLoopPush();p_l.canDeloyCanUp(p_l.id)?(this.activateBtn.mouseEnabled=!1,p_g&&this.playNumMoveEft(1,p_g),b_s&&this.playEffect(b_s,p_l.id),b_p.broadcastNotice(Utils.$((j_x("1067_189_2217")+j_x("1033_888_2234")+"{1}"+j_x("371_2342_402")+j_x(2142)),p_l.name),1,"#71de66"),Resource.SoundManager.instance.playSoundById(13,!1)):(b_p.broadcastNotice(Utils.$((j_x("2175_799_1241")+j_x("144_2462_1779")+""+j_x("1777_520_790")+j_x("2249_531_2111")))),LongPushUtil.inst.clearLoopPush());break;case CittaVoState.STAR_UP:if(!p_l.isActive)return void b_p.broadcastNotice((j_x("1777_320_2335")+j_x("1796_2060_1919")+j_x("33_562_371")+j_x(1148)),1);p_l.canStarUp(!0)&&(this.activateBtn.mouseEnabled=!1,b_s&&this.playEffect(b_s,p_l.id,!0),b_p.broadcastNotice(Utils.$((j_x("1067_189_2217")+j_x("1033_888_2234")+"{1}"+j_x("371_784_402")+j_x(2142)),p_l.name),1,"#71de66"),Resource.SoundManager.instance.playSoundById(13,!1))}}},d_u.prototype.tweenComplete=function(){this._upNumLab&&(this._upNumLab.removeSelf(),this._upNumLab.destroy(),this._upNumLab=null)},d_u.prototype.onRenderList=function(e,p_l,p_g){e==this.list&&this.visible&&p_l&&p_l.setItem(p_l.dataSource)},d_u.prototype.addListener=function(){Yxc(LED,l_r,this)},d_u.prototype.updateUpStar=function(e){if(e){var p_l=e.getSkillMaxStar(e.id);this.btnStarUp.visible=!p_l,this.maxStardesc.visible=1==e._state&&!this.btnStarUp.visible;var p_g=CittaModule.instance.getUpStarConf(e.id,e.star+1);if(p_g&&p_g.cost){var b_s=Config.CItem(p_g.cost[0][0]);b_s&&this.star_consum.changeText(b_s.name+"*"+p_g.cost[0][1])}else this.star_consum.text="";this.btnStarUp.dataSource={state:CittaVoState.STAR_UP},this.starRp.visible=e.canStarUp(!1),this.star_consum.color=this.starRp.visible?Config.color[102].color2:Config.color[106].color2}},d_u.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":d_u.close()}},d_u.prototype.onAdded=function(){var e=this.desc1;e.style&&(e.style.color="#4a728e",e.style.fontSize=24,e.style.wordWrap=!0,e.style.valign="top",e.style.leading=0,e.style.letterSpacing=0,e.style.font="SimHei");var p_l=this.lvDesc;p_l.style&&(p_l.style.color="#4a728e",p_l.style.fontSize=24,p_l.style.wordWrap=!0,p_l.style.leading=2,p_l.style.letterSpacing=1,p_l.style.font="SimHei",p_l.style.align="left",p_l.style.valign="middle"),this.dataSource=0,this.on(Laya.Event.CLICK,this,this.onClick),this.activateBtn.on(Laya.Event.CLICK,this,this.onActivateBtnClick),this.activateBtn.on(Laya.Event.MOUSE_DOWN,this,this.onActivateBtnMD),this.btnStarUp.on(Laya.Event.CLICK,this,this.onBtnClick),this.addListener()},d_u.prototype.updatePvSkillItem=function(){var e=this.list.getItem(this.list.selectedIndex),p_l=Config.skill_passive_mental[e.id];if(p_l.skill){var p_g=new x_h(p_l.id,p_l.name,e.lv,e.star,PassiveSkillType.PASSIVE);this.pvSkillItem.visible=!0,this.pvSkillItem.updateSkillUI(p_l.skill[0],PassiveSkillType.PASSIVE,p_g,!0)}else this.pvSkillItem.visible=!1},d_u);function d_u(){var e=p_l.call(this)||this;return e.vo=[],e.init(),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.RECOVERED,e,e.onRemoveed),e}e.LimiticCittaPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.collect.wx_collectUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Wcp(this,Laya,LED,l_r)},b_s.close=function(){Ahs(UIM,b_s)},b_s.prototype.updateData=function(){var e=ShareMgr.ins._fristCollectStatus;if(GPlatform.isQQMini?(this.qq.visible=!0,this.wx.visible=!1):(this.qq.visible=!1,this.wx.visible=!0,GPlatform.isWx?this.gamename.text=(""+j_x("1022_1304_1977")+j_x(1646)+""):GPlatform.isHuoshuWx&&(this.gamename.text=(""+j_x("1737_1022_1316")+j_x(2308)+""))),1!==e){var p_l=Config.global[GlobalDefine.wechat_collect_reward_func_id].i_info,p_g=Config.funcOpen[p_l];if(this.rewardList.array=b_p.getRewardDatas(p_g.reward),this.rewardList.array){var d_u=this.CountListWidth(this.rewardList.array.length);this.rewardList.x=(Stage.width-d_u)/2}}else b_s.close()},b_s.prototype.onClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":b_s.close();break;case"gainBtn":ShareMgr.ins.reqWechatReward()}},b_s.prototype.updateItem=function(e,p_l){Mmj(e,p_l)},b_s.open=function(){Kmv(UIM,b_s)},b_s.prototype.onRemove=function(){Gus(this,Laya,LED,l_r)},b_s.prototype.CountListWidth=function(e){return Kai(e,this)},b_s);function b_s(){var e=p_l.call(this)||this;return e.rewardList.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.WebChatCollectPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.buff.buffShowUI,__extends(b_s,p_l),b_s.prototype.onAdd=function(e){Ent(e,this,Laya,LED,l_r)},b_s.prototype.updateItem=function(e,p_l){e&&e.setData(e.dataSource)},b_s.open=function(){Wmc(UIM,b_s)},b_s.prototype.updateData=function(){Mtq(this,BuffModel,b_p)},b_s.prototype.onRemove=function(e){Wxk(e,this,Laya,LED,l_r)},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"sureBtn":b_s.close()}},b_s.close=function(){Gkc(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.list.itemRender=b_e,e.list.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.on(Laya.Event.ADDED,e,e.onAdd),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.BuffShowPanel=p_g;var d_u,b_e=(d_u=ui.window.buff.buffCellUI,__extends(d_m,d_u),d_m.prototype.onAdd=function(e){Gdg(e,this,Laya)},d_m.prototype.onRemove=function(e){Wzj(e,this,Laya)},d_m.prototype.onClick=function(e){Ort(e,f_t,this)},d_m.prototype.removeCoolCD=function(){this._coolCD&&(this._coolCD.destoryAll(),this._coolCD.parent&&this.removeChild(this._coolCD),this._coolCD=null)},d_m.prototype.setData=function(e){var p_l=Config.skill_buff[e.entryId],p_g="";p_l.icon&&""!=p_l.icon&&(p_g=Resource.ResUrl.getIconUrl(p_l.icon)),this.setIcon(p_g),0<e.time&&0<e.sulTime()?this.startCoolCD(e.runTime(),e.time):this.removeCoolCD(),this.numTxt.visible=!1,this.dataSource=e},d_m.prototype.setIcon=function(e){""!=e?(this.icon.visible=!0,this.icon=Resource.ResManager.Instance.getImg(e,this.icon)):this.icon.visible=!1},d_m.prototype.startCoolCD=function(p_l,p_g){this._coolCD||(this._coolCD=new e.CoolDownMCEx(this.icon.width,this.icon.height),this.addChild(this._coolCD),this._coolCD.x=this.icon.x,this._coolCD.y=this.icon.y,this._coolCD.on("itemBox_cd_complete",this,this.cdComplete)),this._coolCD.startCD(p_l,p_g)},d_m.prototype.cdComplete=function(){Wba(this)},d_m);function d_m(){var e=d_u.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdd),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.BuffCell=b_e;var d_w,f_t=(d_w=ui.window.buff.buffDescUI,__extends(v_z,d_w),v_z.prototype.onAdd=function(e){Apv(e,this,Laya)},v_z.prototype.onStageClick=function(e){var p_l=e.target;p_l&&this.contains(p_l)||v_z.close()},v_z.prototype.updateData=function(){var e=this.dataSource,p_l=Config.skill_buff[e.entryId];this.nameTxt.text=p_l.name,this.descTxt.text=p_l.desc},v_z.prototype.onRemove=function(){Onv(Laya,this)},v_z.prototype.onDelay=function(){See(Laya,this)},v_z.open=function(e){Kfu(e,UIM,v_z)},v_z.close=function(){Ufq(UIM,v_z)},v_z);function v_z(){var e=d_w.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdd),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.BuffTipPanel=f_t}(UI=UI||{}),function(e){e[e.FIGHTING=0]="FIGHTING",e[e.COPY=1]="COPY",e[e.DROP=2]="DROP"}(HangupType=HangupType||{}),function(e){e[e.FREE=0]="FREE",e[e.RUNING=1]="RUNING",e[e.HANG=2]="HANG"}(HangupStateType=HangupStateType||{}),function(e){e[e.CITY=1]="CITY",e[e.WILD=2]="WILD",e[e.HangUp=3]="HangUp",e[e.PVP=4]="PVP",e[e.FB_PALYER=5]="FB_PALYER"}(MapFunType=MapFunType||{});var n_m=function(){function e(){this._fightingPhase=new z_n(HangupType.FIGHTING),this._dropPhase=new h_s,this._copyPhase=new AutoCopyPhase,LED.on(l_r.SKILL_LIST_UPDATE,this,this.onSkillChange),LED.on(l_r.SKILL_DAZHAO_CHANGE,this,this.onSkillChange),LED.on(l_r.SKILL_PRIO_CHANGE,this,this.onSkillChange),LED.on(l_r.HERO_RELIVE,this,this.onHeroRelive),LED.on(l_r.ACTOR_ADDED,this,this.addPlayer)}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.addPlayer=function(e){var p_l=Config.map[b_p.mapID];if(p_l&&p_l.funType===MapFunType.HangUp){var p_g=e.type,b_s=e.id;if(b_s===b_p.playerId)return;var d_u=LgcM.ins.getActorById(b_s,p_g);d_u&&(d_u.initAutoCopy(),d_u.visible=!SetupModel.instance.isHidePlayer)}},e.prototype.isHangUpMap=function(){if(Config.map){var e=Config.map[b_p.mapID];return e&&e.funType===MapFunType.HangUp}return!1},e.prototype.stop=function(){Sgv(this,LED,l_r)},e.prototype.checkIsHangupMap=function(){Config.map[b_p.mapID],this.isHangUpMap()&&(this.startAuto(HangupType.COPY),Laya.timer.once(1e3,this,this.checkHangupMapIsHangup))},e.prototype.startAuto=function(e){void 0===e&&(e=HangupType.FIGHTING),Laya.timer.clear(this,this.startAuto),(this._type=e)==HangupType.FIGHTING?this._fightingPhase.startPhase():this._copyPhase.startPhase(),LED.event(l_r.HANG_UP_START)},e.prototype.onSkillChange=function(){this._hangUpList||(this._hangUpList=new Array),this._hangUpList.length=0;var e=SkillModel.instance.hookSkillList;for(var p_l in e)0<e[p_l]&&this._hangUpList.push(SkillModel.instance.getSkillVo(e[p_l]))},e.prototype.checkHangupMapIsHangup=function(){this.isHangUpMap()&&this._copyPhase&&(this._copyPhase.isHangUping()||this.startAuto(HangupType.COPY))},e.prototype.onHeroRelive=function(){TaskManager.instance.isAutoTask&&TaskManager.instance.autoDoTask()},e.prototype.resetFightTime=function(e){void 0===e&&(e=300),this._fightingPhase.isHangUping()?this._fightingPhase.resetTime(e):this._copyPhase.isHangUping()&&this._copyPhase.resetTime(e)},Object.defineProperty(e.prototype,"stopCopyMove",{set:function(e){this.isHangUpMap()&&this._copyPhase&&(this._copyPhase.stopMove=e)},enumerable:!0,configurable:!0}),e.prototype.pause=function(){Uiy(this)},e.prototype.recoverFighting=function(){Ogt(this)},e.prototype.addPrioritySkill=function(e){return!!this.hangUping&&(this._type==HangupType.FIGHTING?this._fightingPhase.addPrioritySkill(e):this._copyPhase.addPrioritySkill(e),!0)},Object.defineProperty(e.prototype,"hangUping",{get:function(){return this._type===HangupType.FIGHTING?this.fightingPhase.isHangUping():this._copyPhase.isHangUping()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsFighting",{get:function(){return this._type==HangupType.FIGHTING},enumerable:!0,configurable:!0}),e.prototype.getNextSkill=function(e){if(void 0===e&&(e=-1),!this._hangUpList||0==this._hangUpList.length)return null;for(var p_l,p_g=this.getSkillIndex(e);p_g<this._hangUpList.length;p_g++)if((p_l=this._hangUpList[p_g]).id!=e&&!p_l.cdRuning)return p_l;var b_s,d_u,b_e=0;for(var d_m in this._hangUpList)!(p_l=this._hangUpList[d_m]).cdRuning&&p_l.clientPrio>b_e?(b_e=p_l.clientPrio,b_s=d_m):p_l.cdRuning||(d_u=p_l);if(b_s)return this._hangUpList[b_s];if(this._hangUpList[0]&&this._hangUpList[0].cdRuning){if(d_u)return d_u;this._hangUpList[0].clearCDTime()}return this._hangUpList[0]},e.prototype.getSkillIndex=function(e){if(void 0===e&&(e=-1),-1==e)return 0;var p_l=-1;for(var p_g in this._hangUpList)if(p_l++,this._hangUpList[p_g].id==e)return p_l;return 0},Object.defineProperty(e.prototype,"fightingPhase",{get:function(){return this._fightingPhase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropPhase",{get:function(){return this._dropPhase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"copyPhase",{get:function(){return this._copyPhase},enumerable:!0,configurable:!0}),e.prototype.update=function(e){this._fightingPhase&&this._fightingPhase.update(e),this._dropPhase&&this._dropPhase.update(e),this._copyPhase&&this._copyPhase.update(e)},e.prototype.leaveMap=function(){if(this.stop(),this._hangUpList&&!this._hangUpList.length)for(var e in this._hangUpList)this._hangUpList[e].clientPrio=0},e}(),AutoHangUpBase=function(){function e(e){void 0===e&&(e=0),this.m_type=0,this.m_state=0,this.m_type=e}return e.prototype.startPhase=function(){return Gmy(this)},e.prototype.stopPhase=function(){Okp(this)},e.prototype.pausePhase=function(){Yhb(this,HangupStateType)},e.prototype.recoverFighting=function(){this.m_state===HangupStateType.HANG&&(this.m_state=HangupStateType.RUNING,this.addEvents())},e.prototype.resetState=function(){Cll(this,HangupStateType)},e.prototype.checkRoleDie=function(e){return Yah(e,LgcM)},Object.defineProperty(e.prototype,"hero",{get:function(){return Engine2d.Hero.local},enumerable:!0,configurable:!0}),e.prototype.addEvents=function(){},e.prototype.removeEvents=function(){},e.prototype.update=function(e){},e.prototype.isHangUping=function(){return Eww(this,HangupStateType)},e}(),Engine2d;!function(e){var p_l,p_g,b_s=(p_g=e.ModelController,__extends(d_m,p_g),d_m.prototype.playSkill=function(p_l,p_g,b_s){if(void 0===p_g&&(p_g=!1),void 0===b_s&&(b_s=!1),(!this.m_moveCtrl||!this.m_moveCtrl.isMoving)&&(!this.m_skillVo||this.m_skillVo&&this.m_skillVo.session!=p_l.session||p_g)){this.m_skillVo=p_l;var d_u=Config.skill_skill[this.m_skillVo.skillId];d_u=d_u||Config.skill_skill[1001001];var b_e=p_l.px,d_w=p_l.py;if(0<p_l.targetId){var f_t=LgcM.ins.getActorById(p_l.targetId);f_t&&(b_e=f_t.x,d_w=f_t.y)}this.m_skillVo.dir=d_u.select===SkillSelectDefine.SELF_DIR||b_s?this.curDir:e.MapUtils.calcPosDir(this._actor.x,this._actor.y,b_e,d_w);var v_z=this.m_skillVo.isSelfSkill;v_z&&p_g&&this.setClientCD(p_l.skillId),this.m_comboActIndex=-1;var d_h=1001001===this.m_skillVo.skillId,r_t=0,t_n=d_u.actSpeed?d_u.actSpeed[0]:e.Animation.ANIMATION_INTERVAL,f_y=d_u.actTime?d_u.actTime[0]:0;if(d_u.act){var p_q=d_u.act?d_u.act[0]:d_u.act;1<d_u.act.length&&this.m_skillVo.isSelfSkill&&d_h&&(this.setSkillActionCount(p_l.skillId),r_t=d_m.act_Dic[this.m_skillVo.skillId]-1,p_q=d_u.act[r_t],t_n=d_u.actSpeed[r_t]?d_u.actSpeed[r_t]:e.Animation.ANIMATION_INTERVAL,d_u.actTime&&(f_y=d_u.actTime[r_t]?d_u.actTime[r_t]:0)),p_q&&(this.m_comboActIndex=d_h||d_u.act.length<=1?-1:r_t,this.setAction(p_q,this.m_skillVo.dir,!1,t_n))}else this.setAction(this._bodyAni.action,this.m_skillVo.dir,this._bodyAni.isLoop,t_n);if(0<f_y&&(this.m_skillVo&&(this.m_skillVo.actTime=f_y),v_z&&n_m.instance.resetFightTime(f_y),Laya.timer.once(f_y,this,this.onActTimeCompleted,[d_u.id])),!SetupModel.instance.isHideEffect){if(this.m_skillVo&&this.m_skillVo.isSelfSkill)return d_u.sound&&0<d_u.sound.length&&Resource.SoundManager.instance.playSkillSound(d_u.sound[r_t]),EffectShowManager.instance.showSkillEffect(p_l.releaseId,p_l.targetId,p_l.skillId,r_t),void this.shakeSkill(v_z,d_u);var h_h=Config.map[b_p.mapID];if(!h_h)return;if(!h_h.funType&&(this.actor.type===e.ActorTypeDefine.PLAYER||this.actor.type===e.ActorTypeDefine.ROBOT))return;if(!FrameRunManager.instance.isCanRunNext())return;EffectShowManager.instance.showSkillEffect(p_l.releaseId,p_l.targetId,p_l.skillId,r_t)}this.shakeSkill(v_z,d_u)}},d_m.prototype.setClientCD=function(e){var p_l=Config.skill_skill[e];if(p_l&&0<p_l.commonCd){var p_g=Config.commonCd[p_l.commonCd].cd;SkillModel.instance.changeCommonCD(p_l.commonCd,SyncTime.serverTime,p_g)}SkillModel.instance.changeSkillCd(e,SyncTime.serverTime,p_l?p_l.cd:0,!1),LED.event(l_r.SKILL_CD_UPDATE)},d_m.prototype.clientToUseSkill=function(e,p_l,p_g,b_s,d_u){void 0===d_u&&(d_u=!1);var b_e=x_j.freeVo();b_e.session=99999999999,b_e.releaseId=this.actor.id,b_e.targetId=p_l,b_e.px=p_g,b_e.py=b_s,b_e.isSelfSkill=b_e.releaseId===b_p.playerId,b_e.skillId=e,FrameRunManager.instance.frameAddTo(FrameRunType.MAP,b_e,this.delayPlaySkill.bind(this)),this.m_isClientUse=!1},d_m.prototype.isSkillPlaying=function(){return Irq(this)},d_m.prototype.delayPlaySkill=function(e){e&&this._actor&&this._actor.parent&&this.playSkill(e,!0)},d_m.prototype.delayShake=function(p_l){if(Laya.timer.clear(this,this.delayShake),p_l){var p_g=Config.skill_skill[p_l];p_g&&e.GameMap.defaultMap.shake(p_g.shake[0],10,10,p_g.shake[1])}},d_m.prototype.setSkillActionCount=function(e){var p_l=Config.skill_skill[e];if(1<p_l.act.length){var p_g=d_m.act_Dic[e]?d_m.act_Dic[e]+1:1;d_m.act_Dic[e]=p_g>p_l.act.length?1:p_g}},d_m.prototype.endMove=function(e){void 0===e&&(e=null)},d_m.prototype.dispose=function(){p_g.prototype.dispose.call(this),this.m_isClientUse=!1,this.m_skillVo&&(this.m_skillVo.destroy(),this.m_skillVo=null),this.m_comboActIndex=-1,Laya.timer.clear(this,this.onActTimeCompleted),Laya.timer.clear(this,this.delayShake)},d_m.prototype.onActTimeCompleted=function(e){if(this.m_comboActIndex=-1,this._aniPlayEndCallBack.call(null,this._bodyAni.action,this._bodyAni.dir),Laya.timer.clear(this,this.onActTimeCompleted),this.m_skillVo&&EffectShowManager.instance.clearSkillEffectById(this.m_skillVo.releaseId,e),this.m_skillVo&&this.m_skillVo.isSelfSkill){EffectShowManager.instance.clearSkillEffect(this.m_skillVo.releaseId),n_m.instance.resetFightTime();var p_l=this.m_skillVo.skillId;this.m_skillVo.destroy(),this.m_skillVo=null,LED.event(l_r.SKILL_RELEASE_OVER,p_l)}else this.m_skillVo&&(this.m_skillVo.destroy(),this.m_skillVo=null)},d_m.prototype.shakeSkill=function(e,p_l){if(Laya.stage.isVisibility&&e&&p_l&&p_l.shake&&!SetupModel.instance.isCloseShake){var p_g=p_l.shake[2]?p_l.shake[2]:0;0<p_g?(Laya.timer.clear(this,this.delayShake),Laya.timer.once(p_g,this,this.delayShake,[p_l.id])):this.delayShake(p_l.id)}},d_m.prototype.update=function(e){Iuq(e,p_g,this)},d_m.prototype.checkPlayComboAct=function(){if(this.m_skillVo&&-1<this.m_comboActIndex){var p_l=Config.skill_skill[this.m_skillVo.skillId];if(this.m_comboActIndex++,this.m_comboActIndex<=p_l.act.length-1){var p_g=p_l.act[this.m_comboActIndex],b_s=p_l.actSpeed[this.m_comboActIndex]?p_l.actSpeed[this.m_comboActIndex]:e.Animation.ANIMATION_INTERVAL;this.setAction(p_g,this.m_skillVo.dir,!1,b_s)}else if(this.m_comboActIndex=-1,!this.m_skillVo.actTime)return this.m_skillVo.destroy(),this.m_skillVo=null,!1;return!0}return!1},d_m.prototype.onAnimationPlayCompleted=function(){this._bodyAni&&0==this._bodyAni.loop&&(this.checkPlayComboAct()||(this._aniPlayEndCallBack.call(null,this._bodyAni.action,this._bodyAni.dir),this.m_skillVo=null))},d_m.prototype.clear=function(){Eqc(this)},Object.defineProperty(d_m.prototype,"actor",{get:function(){return this._actor},enumerable:!0,configurable:!0}),d_m.prototype.clearAnimaOnly=function(){p_g.prototype.clearAnimaOnly.call(this),this.m_isClientUse=!1,this.m_skillVo&&(this.m_skillVo.destroy(),this.m_skillVo=null),this.m_comboActIndex=-1,Laya.timer.clear(this,this.onActTimeCompleted),Laya.timer.clear(this,this.delayShake)},d_m.act_Dic={},d_m),d_u=(p_l=e.FightingController=b_s,__extends(b_e,p_l),b_e.prototype.playSkill=function(e,p_g,b_s){if(void 0===p_g&&(p_g=!1),void 0===b_s&&(b_s=!1),p_l.prototype.playSkill.call(this,e,p_g,b_s),e&&e.releaseId==this.actor.id)var d_u=setTimeout((function(){clearTimeout(d_u),e&&0<e.skillId&&LED.event(l_r.SKILL_BEGIN,e)}),600)},b_e.prototype.isSkillPlaying=function(){return this.curAction===e.StandardActions.SA_STAND&&this.m_skillVo&&(this.m_skillVo=null),null!=this.m_skillVo||this._isReadyRelease&&this.m_isClientUse},b_e.prototype.endMove=function(e){void 0===e&&(e=null),p_l.prototype.endMove.call(this),0==this.m_moveCtrl.isMoving&&e&&this.performEndAction(e)},b_e.prototype.performEndAction=function(p_l,p_g){if(void 0===p_l&&(p_l=null),void 0===p_g&&(p_g=null),p_l&&p_l.arrivedAction||p_g){var b_s=p_g||p_l.arrivedAction;switch(b_s.action){case e.PathEndActionType.RELEASE_SKILL:this._isReadyRelease=!1;var d_u=b_s.actionData,b_e=Config.skill_skill[d_u],d_m=b_s.actionData2,d_w=e.CustomActor.selectedActor;b_e.select&&b_e.select!==SkillSelectDefine.TARGET||!d_w?this.m_isClientUse?this.clientToUseSkill(d_u,0,d_m.x,d_m.y):SkillModel.instance.reqUseSkil(d_u,0,d_m.x,d_m.y):this.m_isClientUse?this.clientToUseSkill(d_u,d_w.id,d_w.x,d_w.y):SkillModel.instance.reqUseSkil(d_u,d_w.id,d_w.x,d_w.y);break;case e.PathEndActionType.TALK_TO_NPC:break;case e.PathEndActionType.HANG_UP:var f_t=Config.map[b_p.mapID];f_t&&f_t.funType===MapFunType.HangUp&&1===f_t.hangup&&n_m.instance.startAuto(HangupType.FIGHTING);break;case e.PathEndActionType.PICK:var v_z=b_s.actionData;if(0<v_z){var d_h=LgcM.ins.getActorStdInfoById(v_z,e.ActorTypeDefine.DROP);LED.event(l_r.DROP_START_PICK,d_h)}break;case e.PathEndActionType.NPC:var r_t=b_s.actionData,t_n=b_s.actionData2,f_y=Config.obj_npc[t_n];if(f_y.openPanel)for(var p_q in f_y.openPanel)UI.WindowClass.openWin(f_y.openPanel[p_q]);else b_p.reqClickNpc(r_t);f_y.sound&&Resource.SoundManager.instance.playGameSound(f_y.sound);break;case e.PathEndActionType.COLLECT_PICK:r_t=b_s.actionData,t_n=b_s.actionData2,LED.event(l_r.COLLECT_START_PICK,r_t)}}},b_e.prototype.canReleaseSkill=function(p_l){var p_g=Config.skill_skill[p_l],b_s=e.Hero.local,d_u=LgcM.ins.heroVo;if(!b_s||b_s.rawDie)return null;if(!(p_g.select&&0!=p_g.select||e.CustomActor.selectedActor))return Utils.$((j_x("1964_949_2462")+j_x("486_2035")));if(0<d_u.dizzying)return Utils.$((j_x("1340_730_283")));if(b_s.isMoving())return Utils.$((j_x("2199_1878_283")+j_x("814_799_1105")+j_x("2191_2243_1919")));var b_e=SkillModel.instance.getSkillVo(p_l);return b_e&&b_e.cdRuning?Utils.$((j_x("2243_1919")+"CD"+j_x(283))):"-"},b_e.prototype.moveChange=function(){if(this._isReadyRelease&&0<this._lastTime){var p_l=SyncTime.tickCount-this._lastTime,p_g=this.m_moveCtrl;if(!p_g||!p_g.pathLocation||p_l<200)return;this._lastTime=SyncTime.tickCount;var b_s=e.CustomActor.selectedActor,d_u=p_g.pathLocation.arrivedAction;if(b_s&&d_u&&d_u.action===e.PathEndActionType.RELEASE_SKILL){d_u.actionData2;var b_e=d_u.actionData,d_m=Config.skill_skill[b_e],d_w=e.MapUtils.calcDistance2(b_s.x,b_s.y,e.Hero.local.x,e.Hero.local.y),f_t=d_m.distance?d_m.distance:0;d_w<=f_t*f_t&&0!=f_t&&(this._isReadyRelease=!1,p_g.pathLocation.destruct(),this.m_isClientUse?this.clientToUseSkill(b_e,b_s.id,b_s.x,b_s.y):SkillModel.instance.reqUseSkil(b_e,b_s.id,b_s.x,b_s.y))}}},b_e.prototype.releaseSkill=function(p_l,p_g,b_s){if(void 0===p_g&&(p_g=!1),void 0===b_s&&(b_s=!0),!p_l||0==p_l)return!1;p_g=p_g||n_m.instance.isHangUpMap();var d_u=Config.skill_skill[p_l];if(!d_u)return b_p.broadcastNotice(e.Tools.$((j_x("1038_2462_1012")+j_x("2243_1919")+" {1}"),p_l)),!1;var b_e=this.canReleaseSkill(p_l);if(b_e&&"-"!=b_e)return b_s&&b_p.broadcastNotice(b_e),!1;if(this.m_isClientUse=p_g,d_u.select&&d_u.select!==SkillSelectDefine.TARGET)p_g?this.clientToUseSkill(p_l,0,0,0):SkillModel.instance.reqUseSkil(p_l,0,0,0);else{var d_m=e.CustomActor.selectedActor;if(!d_m)return;var d_w=LgcM.ins.getActorStdInfoById(d_m.id,d_m.type);if(!d_w||!b_p.canAttack(d_w))return b_p.broadcastNotice((j_x("1964_949_2462")+j_x("1163_712_1835"))),!1;var f_t=e.MapUtils.calcDistance2(d_m.x,d_m.y,e.Hero.local.x,e.Hero.local.y),v_z=d_u.distance?d_u.distance:0;if(this.m_isClientUse||f_t<=v_z*v_z&&0!=v_z&&4096<f_t)p_g?this.clientToUseSkill(p_l,d_m.id,d_m.x,d_m.y):SkillModel.instance.reqUseSkil(p_l,d_m.id,d_m.x,d_m.y);else if(this._lastTime=SyncTime.tickCount,this._isReadyRelease=!1,this._mPos=e.MapUtils.findNearestMovablePxy(this._actor.currentCx,this._actor.currentCy,d_m.currentCx,d_m.currentCy,e.GameMap.defaultMap,2,this._mPos),this._pPathAct||(this._pPathAct=new e.PathEndAction),e.GameMap.defaultMap.isCaneMove(this._actor.currentCx,this._actor.currentCy,this._mPos.x,this._mPos.y)||(this._mPos.x=d_m.getCurentCX(),this._mPos.y=d_m.getCurrentCY(),d_m.x=e.MapUtils.cxToPx(this._mPos.x),d_m.y=e.MapUtils.cyToPy(this._mPos.y)),this._pPathAct.setTo(e.PathEndActionType.RELEASE_SKILL,p_l,this._mPos),this._isReadyRelease=e.Hero.local.clickMap(this._mPos.x,this._mPos.y,this._pPathAct),!this._isReadyRelease)return!1}return!0},b_e.prototype.update=function(e){Ktw(e,p_l,this)},b_e.prototype.dispose=function(){Sgu(p_l,this)},b_e);function b_e(e,p_g,b_s,d_u){void 0===d_u&&(d_u=null);var b_e=p_l.call(this,e,p_g,b_s,d_u)||this;return b_e._isReadyRelease=!1,LED.on(l_r.LOCAL_MOVE_END,b_e,b_e.endMove),b_e}function d_m(e,p_l,b_s,d_u){void 0===d_u&&(d_u=null);var b_e=p_g.call(this,e,b_s,d_u)||this;return b_e.m_moveCtrl=p_l,b_e.m_isClientUse=!1,b_e}e.FightingMainController=d_u}(Engine2d=Engine2d||{});var z_n=function(e){function p_l(p_l){void 0===p_l&&(p_l=0);var p_g=e.call(this,p_l)||this;return p_g.m_curSkillID=-1,p_g.m_prioritySkill=-1,p_g}return __extends(p_l,e),p_l.prototype.startPhase=function(){return Ori(this,e,HangupStateType)},p_l.prototype.removeEvents=function(){Ufc(LED,l_r,this)},p_l.prototype.dropAdd=function(e){e&&e.canDrop()&&(e.isFlyTo()||(this.m_isNeedDrop=!0))},p_l.prototype.resetTime=function(e){void 0===e&&(e=350),this.m_state!==HangupStateType.RUNING&&this.m_state!=HangupStateType.HANG||(this.m_lastTime=SyncTime.tickCount,this.m_interval=e)},p_l.prototype.stopPhase=function(){Smp(e,this)},p_l.prototype.addEvents=function(){Mwh(LED,l_r,this)},p_l.prototype.playSkillOver=function(e){this.m_state===HangupStateType.RUNING&&this.checkAttack()},p_l.prototype.addPrioritySkill=function(e){var p_l=SkillModel.instance.getSkillVo(e);p_l?p_l.cdRuning?console.log(Utils.$((j_x("2243_1919_1614")+j_x("2171_283")+" id: {1}"),e)):this.m_prioritySkill=e:console.log(Utils.$((j_x("2243_1919_2462")+j_x("486_2035")+" id: {1}"),e))},p_l.prototype.checkAttack=function(){if(this.m_state==HangupStateType.RUNING){if(!this.hero||this.hero.isSkillPlaying()||this.hero.isMoving())return;var e=Engine2d.CustomActor.selectedActor;e&&this.m_curAttackRole!=e?LgcM.ins.getActorStdInfoById(e.id,e.type)?this.checkRoleDie(e)||(this.m_curAttackRole=e):this.m_curAttackRole=null:null==e&&(this.m_curAttackRole=null),e&&e.rawDie&&(this.m_curAttackRole=null,Engine2d.CustomActor.selectedActor=null),this.m_curAttackRole&&this.m_curAttackRole.parent&&!this.checkRoleDie(this.m_curAttackRole)?this.checkUseSkill():this.autoFightMonster()}},p_l.prototype.autoFightMonster=function(){if(this.isNeedDrop)return this.m_isNeedDrop=!1,this.m_state=HangupStateType.HANG,n_m.instance.dropPhase.startPhase(),!1;if(!this.hero)return!1;var e,p_l=Engine2d.CustomActor.selectedActor;return p_l&&p_l.parent&&p_l.visible&&(e=LgcM.ins.getActorStdInfoById(p_l.id,p_l.type)),p_l&&!this.checkRoleDie(p_l)&&!LgcM.ins.canAttack(e)||(p_l=LgcM.ins.getNearActorByView(Engine2d.ActorTypeDefine.MONSTER,80*Engine2d.CustomMap.MAP_RATE,!0)),p_l?(this.m_curAttackRole=p_l,Engine2d.CustomActor.selectedActor=p_l,this.checkUseSkill(),!0):this.m_curAttackRole&&this.m_curAttackRole.parent?!(!this.m_curAttackRole||this.checkRoleDie(this.m_curAttackRole)||this.m_curAttackRole.visible):(this.m_curAttackRole=null,!1)},p_l.prototype.checkUseSkill=function(){if(this.isNeedDrop)return this.m_state=HangupStateType.HANG,void n_m.instance.dropPhase.startPhase();var e=this.m_prioritySkill;if(e&&-1!=e)Engine2d.Hero.local.releaseSkill(e,!1,!1),this.m_prioritySkill=-1;else{var p_l=n_m.instance.getNextSkill(this.m_curSkillID);p_l&&Engine2d.Hero.local.releaseSkill(p_l.id,!1,!1)&&(p_l.clientPrio++,this.m_curSkillID=p_l.id)}},Object.defineProperty(p_l.prototype,"isNeedDrop",{get:function(){return this.m_isNeedDrop},enumerable:!0,configurable:!0}),p_l.prototype.update=function(e){if(this.m_state==HangupStateType.RUNING){var p_l=SyncTime.tickCount;p_l-this.m_lastTime>this.m_interval&&(this.m_lastTime=p_l,this.checkAttack())}},p_l}(AutoHangUpBase),CopyHangupType,CopyHangupActType,AutoCopyPhase=function(e){function p_l(){var p_l=e.call(this,HangupType.COPY)||this;return p_l._lastState=-1,p_l._lastTime=-1,p_l}return __extends(p_l,e),p_l.prototype.setDrops=function(e){this._condition&&this._condition.setDrops(e)},Object.defineProperty(p_l.prototype,"stopMove",{set:function(e){this._stopMove=e,this._condition&&(this._condition.stopMove=e,Engine2d.Hero.local&&e&&Engine2d.Hero.local.moveMainCtrl.syncCurrentPxy(Engine2d.Hero.local.x,Engine2d.Hero.local.y))},enumerable:!0,configurable:!0}),p_l.prototype.startPhase=function(){return this._startTime=SyncTime.tickCount,this._stopMove=!1,this.m_curSkillID=-1,this.m_prioritySkill=-1,this.m_state=HangupStateType.RUNING,this.resetTime(500),this._mapId!=b_p.mapID&&(this._mapId=b_p.mapID,Laya.timer.once(1e3,this,this.init)),this.addEvents(),!0},p_l.prototype.plotEnd=function(){this._condition&&this._condition.state===CopyHangupActType.ACT_PLAYING&&(this._condition.state=CopyHangupActType.KILL_OVER)},p_l.prototype.setCopyCondition=function(e){var p_l=Config.hangup[e];p_l&&p_l.mapId===this._mapId&&(this._condition||(this._condition=new CopyCondition(this),this._condition.fId=e),this._condition.reset(),this._condition.id=e,this._condition.pos=new Laya.Point(p_l.point[0],p_l.point[1]))},p_l.prototype.stopPhase=function(){Laya.timer.clear(this,this.init),e.prototype.stopPhase.call(this),this._condition&&this._condition.clear(),this._condition=null,this._mapId=-1,this._lastState=-1,this._startTime=-1},p_l.prototype.update=function(e){if(this.m_state==HangupStateType.RUNING){var p_l=SyncTime.tickCount;this._condition&&(this._condition.update(),p_l-this.m_lastTime>this.m_interval&&Laya.timer.delta<=25&&(this.m_lastTime=p_l,this.checkPlayNext()))}},p_l.prototype.addEvents=function(){Ckm(e,this,LED,l_r)},p_l.prototype.removeEvents=function(){Cqj(e,this,LED,l_r)},p_l.prototype.init=function(){return Wee(Config,this)},p_l.prototype.playSkillOver=function(e){if(this.m_state===HangupStateType.RUNING){var p_l=Engine2d.Hero.local;if(!this._condition||!p_l||p_l.moveMainCtrl.isJumping)return;this._condition.state===CopyHangupActType.KILLING&&this.checkAttack()}},p_l.prototype.checkPlayNext=function(){var e=Engine2d.Hero.local;if(this._condition&&e&&!e.moveMainCtrl.isJumping&&Laya.stage.isVisibility&&!this._stopMove){var p_l=this._condition.state;switch(this._lastState!=p_l?(this._lastState=p_l,this._lastTime=SyncTime.tickCount):2e4<SyncTime.tickCount-this._lastTime&&(this._condition.state=CopyHangupActType.KILL_OVER,this._lastTime=SyncTime.tickCount,LgcM.ins.clearActor(Engine2d.ActorTypeDefine.MONSTER)),this._condition.state){case-1:this._condition.satrtToMove();break;case CopyHangupActType.MOVING:case CopyHangupActType.ACT_PLAYING:case CopyHangupActType.COLLECTING:break;case CopyHangupActType.KILLING:this.checkAttack();break;case CopyHangupActType.KILL_OVER:TaskManager.instance.finishHangupPoint(),this._condition.reset();var p_g=this._condition.nextId;this.setCopyCondition(p_g),EffectShowManager.instance.clearSkillEffect(b_p.playerId)}}},p_l.prototype.checkUseSkill=function(){if(this.isNeedDrop)return this.m_state=HangupStateType.HANG,void n_m.instance.dropPhase.startPhase();var e=Engine2d.CustomActor.selectedActor;if(e&&!e.rawDie){var p_l=this.m_prioritySkill;if(p_l&&-1!=p_l)Engine2d.Hero.local.releaseSkill(p_l,!0,!1),this.m_prioritySkill=-1;else{var p_g=n_m.instance.getNextSkill(this.m_curSkillID);p_g&&Engine2d.Hero.local.releaseSkill(p_g.id,!0,!1)&&(p_g.clientPrio++,this.m_curSkillID=p_g.id)}}},p_l.prototype.setInterval=function(e){void 0===e&&(e=350),this.m_interval=e},p_l}(z_n),CopyCondition=function(){function e(e){this._state=-1,this._copyPhase=e,this._monstersDic={}}return Object.defineProperty(e.prototype,"stopMove",{set:function(e){(this._stopMove=e)&&(LgcM.ins.clearActor(Engine2d.ActorTypeDefine.MONSTER),this._monsterNum=0,this._state=CopyHangupActType.KILL_OVER,this._monstersDic={})},enumerable:!0,configurable:!0}),e.prototype.setDrops=function(e){Ian(e,this)},e.prototype.checkMonExit=function(){var e=LgcM.ins.getActorInfos(Engine2d.ActorTypeDefine.MONSTER);if(e&&0<e.length){for(var p_l in e)this._monstersDic[e[p_l].id]||(this._monstersDic[e[p_l].id]=SyncTime.tickCount+Math.floor(1e3*Math.random()));return this._monsterNum=e.length,!0}return LgcM.ins.clearActor(Engine2d.ActorTypeDefine.MONSTER),!1},e.prototype.delayKillOver=function(){Wae(this,CopyHangupActType)},e.prototype.calDamageToMonster=function(e,p_l){var p_g=LgcM.ins.getActorStdInfoById(p_l.id,Engine2d.ActorTypeDefine.MONSTER),b_s=LgcM.ins.getActorStdInfoById(e.releaseId,Engine2d.ActorTypeDefine.PLAYER);if(b_s&&p_g){var d_u=Config.obj_monster[p_g.entryId],b_e=Config.skill_skill[e.skillId],d_m=SkillModel.instance.getSkillVo(e.skillId),d_w=b_e.monsterCoef+d_m.level*b_e.param1+Math.floor(d_m.level/10)*b_e.param2,f_t=b_e.param3+d_m.level*b_e.param4+Math.floor(d_m.level/10)*b_e.param5,v_z=(b_s.attack+b_s.armorBreak-d_u.defense)*((d_w+b_s.damageDeepenPercent)/1e4)*(1.05*Math.random()+.95)+f_t;return 0===(v_z=Math.floor(v_z))||isNaN(v_z)?100:v_z}return 100},e.prototype.delayCheckMonster=function(){!this.checkMonExit()&&Engine2d.Hero.local&&(this._monsterNum=0,Engine2d.Hero.local.isSkillPlaying()&&Engine2d.Hero.local.fightingMainCtrl.clear(),Laya.timer.once(500,this,this.delayKillOver),LED.off(l_r.SKILL_BEGIN,this,this.playSkill))},e.prototype.playSkill=function(e){if(e&&e.skillId){var p_l=Config.skill_skill[e.skillId];if(p_l&&p_l.dmgDelayTime&&0<p_l.dmgDelayTime.length){var p_g=0;1<p_l.dmgDelayTime.length&&(p_g=Engine2d.FightingController.act_Dic[e.skillId]-1),Laya.timer.once(p_l.dmgDelayTime[p_g],this,this.delayPlaySkill,[e],!1)}else this.delayPlaySkill(e)}},e.prototype.popDamageToHero=function(e,p_l){var p_g=1,b_s=LgcM.ins.getActorStdInfoById(p_l,Engine2d.ActorTypeDefine.PLAYER);if(b_s){var d_u=LgcM.ins.getActorStdInfoById(e,Engine2d.ActorTypeDefine.MONSTER);if(!d_u)return;p_g=this.calDamageToPlayer(d_u.entryId,p_l),b_s.hp-=p_g,p_l===b_p.playerId&&(b_s.hp<100&&(b_s.hp=b_s.hpUpper),Engine2d.Hero.local&&Engine2d.Hero.local.setHP(b_s.hp,b_s.hpUpper)),d_s.instance.popDamage(p_l,p_g,!0)}},e.prototype.playSkillToTarget=function(e){if(e){var p_l=e.targetId;if(p_l&&p_l!=b_p.playerId){var p_g=LgcM.ins.getActorStdInfoById(p_l,Engine2d.ActorTypeDefine.MONSTER);if(!p_g)return LgcM.ins.deleteActorInfo(Engine2d.ActorTypeDefine.MONSTER,p_l),LgcM.ins.deleteActorEntity(Engine2d.ActorTypeDefine.MONSTER,p_l,!0),this._monsterNum--,void this.checkMonExit();this.popDamage(e,p_g);var b_s=LgcM.ins.getActorById(p_l,Engine2d.ActorTypeDefine.MONSTER);if(b_s&&(b_s.playHitEffect(!0),b_s.setHP(p_g.hp,p_g.hpUpper),p_g.hp<=0)){p_g.isDead=!0,b_s.die(),b_s.dieBounceTo();var d_u=Config.hangup[this.id].group,b_e=d_u?Config.layout[d_u].dieRemoveTime:1e3;LgcM.ins.addDisappearObj(p_l,Engine2d.ActorTypeDefine.MONSTER,b_e),Engine2d.CustomActor.selectedActor==b_s&&(Engine2d.CustomActor.selectedActor=null),this._monstersDic[p_l]&&(delete this._monstersDic[p_l],this._monsterNum--,this._monsterNum<=0&&Laya.timer.once(b_e,this,this.delayCheckMonster,null,!0)),0<this._monsterNum&&this.showDrops()}}}},e.prototype.delayPlaySkill=function(e){if(e&&e.skillId){var p_l=Config.skill_skill[e.skillId];if(p_l&&p_l.range&&"round"===p_l.range[0]){var p_g=p_l.range[1];if(0<p_g){var b_s=LgcM.ins.getNearActors(Engine2d.ActorTypeDefine.MONSTER,p_g);for(var d_u in b_s)e.targetId=b_s[d_u].id,this.playSkillToTarget(e)}}else p_l&&this.playSkillToTarget(e)}},e.prototype.popDamage=function(e,p_l){var p_g=100;p_l&&(p_g=this.calDamageToMonster(e,p_l),p_l.hp-=p_g),0<p_g&&d_s.instance.popHitNums(e.releaseId,e.targetId,DamageTypeDefine.S_DAMAGE,p_g)},e.prototype.showDrops=function(){if(this._drops&&0<this._drops.length){var e=Engine2d.Hero.local,p_l=void 0;for(var p_g in this._drops){p_l=this._drops[p_g];var b_s=e.currentCx+Math.ceil(3*Math.random())+(.5<Math.random()?1:-1),d_u=e.currentCy+Math.ceil(3*Math.random())+(.5<Math.random()?-1:1);p_l.px=p_l.endPx=Engine2d.MapUtils.cxToPx(b_s),p_l.py=p_l.endPy=Engine2d.MapUtils.cxToPx(d_u),LgcM.ins.addActorInfo(Engine2d.ActorTypeDefine.DROP,p_l),LgcM.ins.addDropEnity(Engine2d.ActorTypeDefine.DROP,p_l),LgcM.ins.appearMoveToTarget(p_l.type,p_l,!1)}this._drops=null}},e.prototype.calDamageToPlayer=function(e,p_l){var p_g=LgcM.ins.getActorStdInfoById(p_l,Engine2d.ActorTypeDefine.PLAYER),b_s=Config.obj_monster[e],d_u=b_s.normalSkill[0],b_e=Config.skill_skill[d_u],d_m=b_e.playerCoef+b_e.level*b_e.param1+Math.floor(b_e.level/10)*b_e.param2,d_w=b_e.param3+b_e.level*b_e.param4+Math.floor(b_e.level/10)*b_e.param5,f_t=(b_s.attack+p_g.armorBreak-p_g.defense)*((d_m+p_g.damageDeepenPercent)/1e4)*(1.05*Math.random()+.95)+d_w;return 0===(f_t=Math.floor(f_t))||isNaN(f_t)?1:f_t},Object.defineProperty(e.prototype,"state",{get:function(){return this._state==CopyHangupActType.KILLING&&0==this._monsterNum&&(this._state=CopyHangupActType.KILL_OVER),this._state},set:function(e){this._state=e},enumerable:!0,configurable:!0}),e.prototype.satrtToMove=function(){var e=Engine2d.Hero.local;if(e){if(this._state=CopyHangupActType.MOVING,e.moveMainCtrl.isOnlyClientMove=!0,this.startMapZoomMove(!1))return;UI.ProgressPanel.close(),EffectShowManager.instance.clearSkillEffect(b_p.playerId),this.heroMoveTo()}},e.prototype.createMonster=function(){var e=Config.hangup[this.id].group;if(e){var p_l=Config.layout[e];if(!p_l||2!=p_l.type)return;var p_g=Config.obj_monster[p_l.entryId],b_s=Engine2d.Hero.local;if(!b_s||!p_g)return;var d_u=void 0,b_e=void 0,d_m=void 0;this._monsterNum=p_l.num,5<this._monsterNum&&(this._monsterNum=5);for(var d_w=0;d_w<this._monsterNum;d_w++){(d_u=Engine2d.ActorBaseVo.freeStdInfo(Engine2d.ActorTypeDefine.MONSTER,Engine2d.MonsterVo)).id=this.getOnlyId(d_w+11111111);var f_t=Math.ceil(Math.random()*p_l.radius)*(Math.random()+1),v_z=Math.ceil(Math.random()*p_l.radius);b_e=p_l.x+(.5<Math.random()?f_t/2:-f_t/1.5),d_m=p_l.y+(.5<Math.random()?-v_z:-v_z/2),d_u.px=d_u.endPx=Engine2d.MapUtils.cxToPx(b_e),d_u.py=d_u.endPy=Engine2d.MapUtils.cxToPx(d_m),d_u.entryId=p_l.entryId;var d_h=Engine2d.MapUtils.calcPosDir(d_u.px,d_u.py,b_s.x,b_s.y);d_u.name=p_g.name,d_u.level=p_g.level,d_u.face=d_h,d_u.speed=500,d_u.isBorn=!0,d_u.camp=p_l.camp,d_u.hp=d_u.hpUpper=p_g.hpUpper,j_a.otherIns().add(this,this.addMonsterTo,[d_u])}LED.on(l_r.SKILL_BEGIN,this,this.playSkill)}},e.prototype.update=function(){var e,p_l=SyncTime.tickCount,p_g=Engine2d.Hero.local;if(!(35<Laya.timer.delta))for(var b_s in this._monstersDic){var d_u=1e3*Math.random()+2e3;if(p_l-this._monstersDic[b_s]>d_u)if(e=LgcM.ins.getActorById(parseInt(b_s),Engine2d.ActorTypeDefine.MONSTER)){var b_e=Engine2d.MapUtils.calcPosDir(e.x,e.y,p_g.x,p_g.y);e.setAction("attack",b_e,!1),this.popDamageToHero(e.id,b_p.playerId),this._monstersDic[b_s]=p_l}else delete this._monstersDic[b_s]}},e.prototype.onCollectStartPick=function(e){if(LED.off(l_r.COLLECT_START_PICK,this,this.onCollectStartPick),this._collectVo&&this._collectVo.id===e){LED.on(l_r.COLLECT_PICK_COMPLETE,this,this.onCollectComplete);var p_l=SyncTime.serverTime+5e3;CollectController.instance.startCollect(e,b_p.playerId,p_l)}else this._state=CopyHangupActType.KILL_OVER},e.prototype.addMonsterTo=function(e){if(e){LgcM.ins.addActorInfo(Engine2d.ActorTypeDefine.MONSTER,e);var p_l=LgcM.ins.addMonsterEnity(Engine2d.ActorTypeDefine.MONSTER,e);LgcM.ins.appearMoveToTarget(Engine2d.ActorTypeDefine.MONSTER,e,!1),this._monstersDic[e.id]=SyncTime.tickCount+Math.floor(1e3*Math.random()),p_l&&p_l.startPlayFootEffect()}},e.prototype.startMapZoomMove=function(e){return void 0===e&&(e=!0),!1},e.prototype.delayToNextAct=function(){this._stopMove||n_m.instance.isHangUpMap()&&(Laya.timer.clear(this,this.delayToNextAct),this._state=CopyHangupActType.ACT_PLAYING,LED.off(l_r.LOCAL_MOVE_END,this,this.onMoveEnd),this.createMonster(),this.createCollect(),0<this._monsterNum?Laya.timer.once(1e3,this,this.checkAction):Laya.timer.callLater(this,this.checkAction),UIM.instance.showHangupTitle(this.id),this._copyPhase&&this._copyPhase.setInterval())},e.prototype.createCollect=function(){var e=Config.hangup[this.id].group;if(e){var p_l=Config.layout[e];if(!p_l||4!=p_l.type)return;Config.obj_collect[p_l.entryId],Engine2d.Hero.local,this._collectVo=Engine2d.ActorBaseVo.freeStdInfo(Engine2d.ActorTypeDefine.COLLECT,Engine2d.NpcVo),this._collectVo.px=this._collectVo.endPx=Engine2d.MapUtils.cxToPx(p_l.x),this._collectVo.py=this._collectVo.endPy=Engine2d.MapUtils.cxToPx(p_l.y),this._collectVo.entryId=p_l.entryId,this._collectVo.id=9999999999,this._collectVo.face=Engine2d.MapUtils.rotationToDir(p_l.degree),this._collectVo.freezeTime=0,this._collectVo.collectedTimes=1,LgcM.ins.addActorInfo(Engine2d.ActorTypeDefine.COLLECT,this._collectVo),LgcM.ins.addCollectEnity(Engine2d.ActorTypeDefine.COLLECT,this._collectVo),LgcM.ins.appearMoveToTarget(Engine2d.ActorTypeDefine.COLLECT,this._collectVo,!1)}},e.prototype.onZoomComplete=function(e){void 0===e&&(e=1),LED.off(l_r.Map_ZOOM_COMPLETE,this,this.onZoomComplete),1===e?Laya.timer.once(600,this,this.heroMoveTo):Laya.timer.once(600,this,this.delayToNextAct)},e.prototype.startMoveToCollect=function(){if(this._collectVo){LED.on(l_r.COLLECT_START_PICK,this,this.onCollectStartPick);var e=LgcM.ins.getActorById(this._collectVo.id,Engine2d.ActorTypeDefine.COLLECT);LgcM.ins.moveToTarget(e,!0)}else this._state=CopyHangupActType.KILL_OVER},e.prototype.delayMoveEnd=function(){1===Engine2d.CustomMap.MAP_RATE&&this.startMapZoomMove(!0)||Laya.timer.callLater(this,this.delayToNextAct)},e.prototype.onCollectComplete=function(e){LED.off(l_r.COLLECT_PICK_COMPLETE,this,this.onCollectComplete),this._collectVo&&this._collectVo.id===e&&(LgcM.ins.deleteActorInfo(Engine2d.ActorTypeDefine.COLLECT,e),LgcM.ins.deleteActorEntity(Engine2d.ActorTypeDefine.COLLECT,e),Engine2d.CustomActor.selectedActor=null),this._collectVo=null,this._state=CopyHangupActType.KILL_OVER},e.prototype.checkAction=function(){var e=Engine2d.Hero.local,p_l=Config.hangup[this.id];if(p_l.type!=CopyHangupType.KILL_MONSTER)if(p_l.type!=CopyHangupType.ONLY_MOVE){if(p_l.type==CopyHangupType.COLLECT)return this._state=CopyHangupActType.COLLECTING,void this.startMoveToCollect();if(this._state=CopyHangupActType.ACT_PLAYING,!(0<p_l.dramaId&&(b_p.playDrama(p_l.dramaId),b_p.isPloting)))if(p_l.action&&""!=p_l.action&&0<p_l.readTime){if(e){var p_g=e.fightingCtrl.curDir;e.setAction(p_l.action,isNaN(p_g)?0:p_g,!0),EffectShowManager.instance.clearSkillEffect(e.id);var b_s=p_l.actEft;if(b_s&&0<b_s.length)for(var d_u in b_s)b_s[d_u][0]===EffectType.SKILL&&EffectShowManager.instance.showActionEffect(e.id,-1,null,-1,b_s[d_u][1]);UI.ProgressPanel.setCountDownTime(0,p_l.readTime,p_l.readName,Engine2d.Tools.BindDomain(this.readTimeOut,this))}}else this._state=CopyHangupActType.KILL_OVER}else this._state=CopyHangupActType.KILL_OVER;else this._state=CopyHangupActType.KILLING},e.prototype.onMoveEnd=function(e){this._state==CopyHangupActType.MOVING&&Laya.timer.once(600,this,this.delayMoveEnd)},e.prototype.readTimeOut=function(){var e=Engine2d.Hero.local;if(e){if(1015===b_p.mapID){var p_l=Config.hangup[this.id];if(UI.ProgressPanel.setCountDownTime(0,p_l.readTime,p_l.readName,Engine2d.Tools.BindDomain(this.readTimeOut,this)),p_l.action){var p_g=e.fightingCtrl.curDir;e.setAction(p_l.action,isNaN(p_g)?0:p_g,!0)}return void(this._state=CopyHangupActType.ACT_PLAYING)}e.stand(),EffectShowManager.instance.clearSkillEffect(e.id)}this._state=CopyHangupActType.KILL_OVER},e.prototype.heroMoveTo=function(){if(!this._stopMove){var e=Engine2d.Hero.local;e&&(LED.on(l_r.LOCAL_MOVE_END,this,this.onMoveEnd),e.checkIsSameTarget(this.pos.x,this.pos.y)?this.onMoveEnd(null):(e.clickMap(this.pos.x,this.pos.y),EffectShowManager.instance.playMapZoomEffect(1e3,1)))}},e.prototype.getOnlyId=function(e){return LgcM.ins.getActorById(e,Engine2d.ActorTypeDefine.MONSTER)?this.getOnlyId(e+Math.floor(100*Math.random()+10)):e},e.prototype.reset=function(){this._state=-1,this._monsterNum=0,this._monstersDic={},LED.off(l_r.SKILL_BEGIN,this,this.playSkill)},Object.defineProperty(e.prototype,"nextId",{get:function(){var e=this.id+1,p_l=Config.hangup[this.id];if(p_l&&p_l.nextRandom){var p_g=p_l.nextRandom.length,b_s=Math.round(Math.random()*p_g);b_s=p_g<=b_s?p_g-1:b_s,e=p_l.nextRandom[b_s]}return(p_l=Config.hangup[e])&&p_l.mapId==b_p.mapID||(e=this.fId+1),e},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._state===CopyHangupActType.COLLECTING&&(LED.off(l_r.COLLECT_START_PICK,this,this.onCollectStartPick),LED.off(l_r.COLLECT_PICK_COMPLETE,this,this.onCollectComplete)),LED.off(l_r.SKILL_BEGIN,this,this.playSkill),LED.off(l_r.LOCAL_MOVE_END,this,this.onMoveEnd),LED.off(l_r.Map_ZOOM_COMPLETE,this,this.onZoomComplete),Laya.timer.clear(this,this.delayToNextAct),this.reset(),this._drops=null,UI.ProgressPanel.close(),b_p.playerId&&EffectShowManager.instance.clearSkillEffect(b_p.playerId)},e}();!function(e){e[e.ACTION=1]="ACTION",e[e.KILL_MONSTER=2]="KILL_MONSTER",e[e.ONLY_MOVE=3]="ONLY_MOVE",e[e.COLLECT=4]="COLLECT"}(CopyHangupType=CopyHangupType||{}),function(e){e[e.MOVING=0]="MOVING",e[e.ACT_PLAYING=1]="ACT_PLAYING",e[e.KILLING=2]="KILLING",e[e.COLLECTING=3]="COLLECTING",e[e.KILL_OVER=4]="KILL_OVER"}(CopyHangupActType=CopyHangupActType||{});var h_s=function(e){function p_l(){return e.call(this,HangupType.DROP)||this}return __extends(p_l,e),p_l.prototype.startPhase=function(){return Stb(e,this,HangupStateType)},p_l.prototype.addEvents=function(){Odn(LED,l_r,this)},p_l.prototype.stopPhase=function(){if(this.m_state===HangupStateType.RUNING&&this._drops&&this._drops.length)for(var p_l in this._drops)this._drops[p_l]&&SkillModel.instance.reqPickDrop(this._drops[p_l].id);e.prototype.stopPhase.call(this),this._drops=null},p_l.prototype.onDropPick=function(e){if(!e.isFlyTo())var p_l=setTimeout((function(){clearTimeout(p_l),this.pickTo()}),500)},p_l.prototype.removeEvents=function(){Ujd(LED,l_r,this)},p_l.prototype.pickTo=function(){if(this.m_state===HangupStateType.RUNING){this._drops&&0!==this._drops.length||(this._drops=LgcM.ins.getNearActors(Engine2d.ActorTypeDefine.DROP,320,!0,!0));var e=this._drops.shift();if(e){var p_l=new Engine2d.PathEndAction(Engine2d.PathEndActionType.PICK,e.id,null);if(!Engine2d.Hero.local.clickMap(e.currentCx,e.currentCy,p_l))return void this.pickTo()}else this.stopPhase(),n_m.instance.recoverFighting()}},p_l}(AutoHangUpBase);!function(e){var p_l,p_g=(p_l=ui.window.hangup.doubleHangupUI,__extends(b_s,p_l),b_s.open=function(){Wqr(UIM,b_s)},b_s.prototype.onAdded=function(e){Ciu(e,LED,l_r,this,Laya,OfflineModel)},b_s.prototype.onDhUpdate=function(){Erm(this)},b_s.prototype.onTabSelected=function(e,p_l){switch(e){case 0:OfflineModel.reqDhFriendList();break;case 1:OfflineModel.reqDhInviteList()}},b_s.prototype.onItemRender=function(e,p_l){Szz(e,p_l,this)},b_s.prototype.onFriendUpdate=function(){Iak(OfflineModel)},b_s.prototype.onRemoved=function(e){LED.off(l_r.FRIEND_FRIEND_LIST_UPDATE,this,this.onFriendUpdate),LED.off(l_r.DOUBLEHANG_FRIENDLIST_UPDATE,this,this.onFriendListUpdate),LED.off(l_r.DOUBLEHANG_INVITELIST_UPDATE,this,this.onInviteListUpdate),LED.off(l_r.DOUBLEHANG_INFO_UPDATE,this,this.onDhUpdate),this.off(Laya.Event.CLICK,this,this.onClick),this._clipTab.on("tabSelect",this,this.onTabSelected),this.list.renderHandler&&this.list.renderHandler.recover(),this.list.renderHandler=null},b_s.prototype.onFriendListUpdate=function(){if(0==this.tab.selectedIndex){var e=OfflineModel.instance.dhFriendList||[];e.sort(this.sortFriendList),this.list.array=e,this.t_null.visible=!1}this.updateRedPoint()},b_s.close=function(){Ews(UIM,b_s)},b_s.prototype.onInviteListUpdate=function(){if(1==this.tab.selectedIndex){var e=OfflineModel.instance.dhInviteList||[];e.sort(this.sortInviteList),this.list.array=e,this.t_null.visible=0===e.length}this.updateRedPoint()},b_s.prototype.updateRedPoint=function(){Eog(this)},b_s.prototype.sortFriendList=function(e,p_l){return e.isInvite!=p_l.isInvite?e.isInvite-p_l.isInvite:e.qinmi!=p_l.qinmi?p_l.qinmi-e.qinmi:e.base.combat!=p_l.base.combat?p_l.base.combat-e.base.combat:1e3*e.base.stateLv+e.base.lv!=1e3*p_l.base.stateLv+p_l.base.lv?1e3*p_l.base.stateLv+p_l.base.lv-1e3*e.base.stateLv+e.base.lv:e.base.pid-p_l.base.pid},b_s.prototype.onClick=function(e){var p_l=e.target;switch(p_l.name){case"closeBtn":b_s.close();break;case"b_cell":"agree"==p_l.dataSource.type?OfflineModel.reqDhAgree(p_l.dataSource.pid,1):"stop"==p_l.dataSource.type?b_p.confirm((j_x("820_2102_790")+j_x("2249_1409_2462")+j_x("1953_531_1976")+j_x("2270_1879_1241")+j_x("144_223_402")+"\n"+j_x("2085_4_396")+j_x("2426_790_2249")+j_x(2228)+"?"),OfflineModel.reqDhStop):"invite"==p_l.dataSource.type&&OfflineModel.reqDhInvite(p_l.dataSource.pid);break;case"sendChat":if(OfflineModel.instance.dhInfo.hasPartner)return void b_p.broadcastNotice((j_x("1749_1300_2035")+j_x("790_2249_283")+","+j_x("1777_647_2175")+j_x("2249_266")+"!"));n_d.instance.reqChat(ChannelTypeDefine.WORLD,(j_x("94_1068_159")+j_x("425_189_1738")+j_x("1996_1747_189")+j_x("790_2249_33")+j_x(784)+"{1:dh}"),[b_p.playerId.toString()])}},b_s.prototype.sortInviteList=function(e,p_l){return e.time!=p_l.time?p_l.time-e.time:e.qinmi!=p_l.qinmi?p_l.qinmi-e.qinmi:e.base.combat!=p_l.base.combat?p_l.base.combat-e.base.combat:1e3*e.base.stateLv+e.base.lv!=1e3*p_l.base.stateLv+p_l.base.lv?1e3*p_l.base.stateLv+p_l.base.lv-1e3*e.base.stateLv+e.base.lv:e.base.pid-p_l.base.pid},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e._clipTab=new p_c(e.tab),e.list.itemRender=p_n,e.list.vScrollBarSkin="",e.list.scrollBar.elasticBackTime=200,e.list.scrollBar.elasticDistance=50,e}e.DoubleHangupPanel=p_g}(UI=UI||{});var p_n=function(e){function p_l(){return e.call(this)||this}return __extends(p_l,e),p_l.prototype.updateData=function(e,p_l){if(0==p_l){var p_g=e;this.headSprite=Resource.ResManager.Instance.getImg(Resource.ResManager.getHeadUrl(p_g.base.entryId,p_g.base.headIcon),this.headSprite),this.t_name.text=p_g.base.name,this.t_lv.text=Config.state_state[p_g.base.stateLv].desc+""+p_g.base.lv+(j_x(2342)),this.t_power.text=(j_x(383)+"  "+j_x(767)+"")+p_g.base.combat,this.t_qinmi.text=(j_x("2283_194_1035")+"")+p_g.qinmi,this.t_left_desc.visible=this.t_left_time.visible=1==p_g.isPartner,this.btn.visible=OfflineModel.instance.isDhOpen,this.rp.visible=!1,this.btn.disabled=!1,1==p_g.isPartner?(this.btn.label=(j_x("820_2102_790")+j_x(2249)),this.btn.dataSource={type:"stop"},this.updateTime(),Laya.timer.loop(1e3,this,this.updateTime)):1==p_g.isHangup?(this.btn.label=(j_x("790_2249_283")),this.btn.disabled=!0):1==p_g.isInvite?(this.btn.label=(j_x("1300_1068_1777")),this.btn.disabled=!0):(this.btn.label=(j_x("1068_1777_790")+j_x(2249)),SyncTime.serverTime,this.rp.visible=0<OfflineModel.instance.dhInfo.dhLeftTime&&!OfflineModel.instance.dhInfo.hasPartner,this.btn.dataSource={type:"invite",pid:p_g.base.pid})}else 1==p_l&&(p_g=e,this.headSprite=Resource.ResManager.Instance.getImg(Resource.ResManager.getHeadUrl(p_g.base.entryId,p_g.base.headIcon),this.headSprite),this.t_name.text=p_g.base.name,this.t_lv.text=Config.state_state[p_g.base.stateLv].desc+""+p_g.base.lv+(j_x(2342)),this.t_power.text=(j_x(383)+"  "+j_x(767)+"")+p_g.base.combat,this.t_qinmi.text=(j_x("2283_194_1035")+"")+p_g.qinmi,this.t_left_desc.visible=this.t_left_time.visible=!1,this.btn.label=(j_x("420_2360_1068")+j_x(1777)),this.btn.disabled=!1,this.btn.dataSource={type:"agree",pid:p_g.base.pid})},p_l.prototype.updateTime=function(){if(this.parent&&this.visible){var e=OfflineModel.instance.dhInfo;if(e.hasPartner){var p_l=SyncTime.serverTime/1e3;this.t_left_time.text=Utils.formatTimeStr(e.dhEndTime-p_l)}}else Laya.timer.clear(this,this.updateTime)},p_l}(ui.window.hangup.DoubleHangupCellUI);!function(e){var p_l,p_g=(p_l=ui.window.hangup.hangupIconUI,__extends(b_s,p_l),b_s.open=function(){UIM.open(b_s,["repair.atlas"],null,!1,!1,!1,!1,{container:"mainUI",mainUIContainer:1})},b_s.prototype.changeScale=function(){Mfk(this)},b_s.prototype.countTimeReq=function(){6e4*this.reqOnlineSpace+OfflineModel.instance.onlineInfo.reqLastTime<SyncTime.serverTime&&OfflineModel.reqOnlineExpInfo()},b_s.prototype.onClick=function(e){Qeb(e,OfflineModel)},b_s.prototype.onRemoved=function(e){Qdj(e,LED,l_r,this,Laya)},b_s.prototype.updateDouble=function(){Sqt(OfflineModel,this)},b_s.prototype.onAdded=function(e){this.pos(Stage.width-330-GPlatform.disStageX/2,GPlatform.concaveOffsetY+50),LED.on(l_r.STATE_SUB_LV_UP,this,this.updateHangup),LED.on(l_r.HERO_STATE_CHANGE,this,this.updateHangup),LED.on(l_r.OFFLINE_UPDATE,this,this.updateHangup),this.on(Laya.Event.CLICK,this,this.onClick),Laya.timer.loop(18e4,this,this.countTimeReq),this.changeScale(),this.updateHangup()},b_s.prototype.updateHangup=function(){var e=OfflineModel.instance.countGainExpPct();this.reqOnlineSpace=Math.max(5,OfflineModel.instance.countReqSpaceOnline(e)),this.setHuluVisible(5,100<=e),this.setHuluVisible(4,80<=e&&!this.hulu5.visible),this.setHuluVisible(3,60<=e&&!this.hulu4.visible),this.setHuluVisible(2,40<=e&&!this.hulu3.visible),this.setHuluVisible(1,20<=e&&!this.hulu2.visible)},b_s.close=function(){Qjx(UIM,b_s)},b_s.prototype.setHuluVisible=function(e,p_l){var p_g=this["hulu"+e],b_s=this["img"+e],d_u=this["mask"+e];p_l?(d_u.visible=!1,b_s.addChild(d_u),b_s.mask=d_u,p_g.visible=!0):(d_u.parent&&d_u.parent.removeChild(d_u),b_s.mask=null,p_g.visible=!1)},b_s);function b_s(){var e=p_l.call(this)||this;return e.reqOnlineSpace=5,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.setHuluVisible(1,!1),e.setHuluVisible(2,!1),e.setHuluVisible(3,!1),e.setHuluVisible(4,!1),e.setHuluVisible(5,!1),e}e.HangIcon=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.hangup.hangup_event_showUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){},b_s.prototype.onRemove=function(){this._alphaTween&&(this._alphaTween.clear(),this._alphaTween=null)},b_s.prototype.update=function(e){this.clip_one.alpha=0;var p_l=Config.hangup[e];this.img_di.skin="res/ui/hangup/"+p_l.eventParams[0]+".png",this.clip_one.skin="res/ui/hangup/"+p_l.eventParams[1]+".png",this.clip_one.index=0,this.clip_one.alpha=1,this.clip_one.y=-40,this.clip_one.scaleX=this.clip_one.scaleY=2,this._alphaTween=Laya.Tween.to(this.clip_one,{j_l:0,scaleX:1,scaleY:1},40,null,Laya.Handler.create(this,this.alphaComplete,[this.clip_one]))},b_s.prototype.alphaComplete=function(e){this._alphaTween&&(this._alphaTween.clear(),this._alphaTween=null),e===this.clip_one&&Laya.timer.once(1e3,this,this.delayClose)},b_s.prototype.delayClose=function(){Gui(Laya,this)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.HangupEventPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.hangup.hangupRewardUI,__extends(b_s,p_l),b_s.open=function(){Sud(UIM,b_s)},b_s.prototype.updateRedPoint=function(){this.rp_0.visible=OfflineModel.instance.canGain,this.rp_1.visible=OfflineModel.instance.hasInvite&&!OfflineModel.instance.dhInfo.hasPartner},b_s.close=function(){Aaf(UIM,b_s)},b_s.prototype.onRemoved=function(e){Axs(e,LED,l_r,this,Laya)},b_s.prototype.updateOffline=function(){if(0==this.tab.selectedIndex){var e=OfflineModel.instance.offlineInfo;e&&(this.timeTxt.text=Utils.formatTimeStr2(e.sec),this.expTxt.text=(e.exp+OfflineModel.instance.onlineInfo.exp).toString(),this.copperTxt.text=(e.copper+OfflineModel.instance.onlineInfo.copper).toString(),this.itemTxt.text=e.itemCount.toString(),this.sureBtn.disabled=!OfflineModel.instance.canGain,this.updateRedPoint())}},b_s.prototype.onTabSelected=function(e){this.box_offline.visible=0==e,LgcM.ins.heroVo,this.box_double_null.visible=1==e&&!OfflineModel.instance.isDhOpen;var p_l=OfflineModel.instance.dhInfo;switch(this.box_double_free.visible=1==e&&OfflineModel.instance.isDhOpen&&!p_l.hasPartner,this.box_double_doing.visible=1==e&&OfflineModel.instance.isDhOpen&&p_l.hasPartner,e){case 0:this.updateOffline();break;case 1:this.updateDouble(),OfflineModel.reqDhInfo()}},b_s.prototype.onAdded=function(e){LED.on(l_r.DOUBLEHANG_INFO_UPDATE,this,this.updateDouble),LED.on(l_r.OFFLINE_UPDATE,this,this.updateOffline),LED.on(l_r.MONTHCARD_BUY_INFO,this,this.updateMonthCardDate),this.on(Laya.Event.CLICK,this,this.onClick),this.tab.selectedIndex=-1,this._clipTab.on("tabSelect",this,this.onTabSelected),this.tab.selectedIndex=0,OfflineModel.reqDhInfo(),RechargeModel.instance.getMonthCardVo(),this.updateMonthCardDate()},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"sureBtn":OfflineModel.instance.offlineInfo.canGain&&OfflineModel.reqGetOfflineExp(0),OfflineModel.instance.onlineInfo.canGain&&OfflineModel.reqGetOnlineExp(0);break;case"closeBtn":b_s.close();break;case"openVip":break;case"dhBtn":e.DoubleHangupPanel.open();break;case"TitleProp":e.TitleTips.tpye=2,e.TitleTips.open();break;case"b_detail":b_e.open()}},b_s.prototype.updateDouble=function(){if(1==this.tab.selectedIndex){var e=OfflineModel.instance.dhInfo;if(LgcM.ins.heroVo,this.box_double_null.visible=1==this.tab.selectedIndex&&!OfflineModel.instance.isDhOpen,this.box_double_free.visible=1==this.tab.selectedIndex&&OfflineModel.instance.isDhOpen&&!e.hasPartner,this.box_double_doing.visible=1==this.tab.selectedIndex&&OfflineModel.instance.isDhOpen&&e.hasPartner,e.hasPartner){this.rp_dh.visible=!1;var p_l=Config.skill_buff[OfflineModel.instance.intimateChangeBuff(e.qinmi)];p_l&&p_l.desc?this.t_addition_doing.text=p_l.desc:this.t_addition_doing.text=(j_x("2270_1879_1241")+j_x(144)+" +0%"+j_x("2270_1879_36")+j_x("519_437_223")+" +0%"),this.t_partnerName.text=e.partnerName,this.updateTime(),Laya.timer.loop(1e3,this,this.updateTime)}else{var p_g=OfflineModel.instance.dhInfo;this.rp_dh.visible=OfflineModel.instance.hasInvite,this.t_leftTime_free.text=Utils.formatTimeStr2(p_g.dhLeftTime);var b_s=p_g&&p_g.qinmi?OfflineModel.instance.intimateChangePct(p_g.qinmi):0;this.t_addition_free.text=(j_x("2270_1879_1241")+j_x(144)+" +")+b_s+("%"+j_x("2270_1879_36")+j_x("519_437_223")+" +0%")}this.updateRedPoint()}},b_s.prototype.updateMonthCardDate=function(){RechargeModel.instance.cardInfos[CardType.monthcard]?(this.t_vip1.text="20%",this.t_vip2.text="20%",this.t_vip3.text="20%",this.t_novip1.visible=!1,this.t_novip2.visible=!1,this.t_novip3.visible=!1):(this.t_vip1.text=("20%("+j_x("206_155_1331")+")"),this.t_vip2.text=("20%("+j_x("206_155_1331")+")"),this.t_vip3.text=("20%("+j_x("206_155_1331")+")"),this.t_novip1.visible=!0,this.t_novip2.visible=!0,this.t_novip3.visible=!0)},b_s.prototype.updateTime=function(){Ejx(OfflineModel,SyncTime,this,Utils)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e._clipTab=new p_c(e.tab),e}e.HangupRewardPanel=p_g;var d_u,b_e=(d_u=ui.window.hangup.hangupTipsUI,__extends(d_m,d_u),d_m.open=function(){Msn(UIM,d_m)},d_m.prototype.onClick=function(){Mnl(d_m)},d_m.prototype.onRemoved=function(){Wkq(this,Laya,LED,l_r)},d_m.close=function(){Ajy(UIM,d_m)},d_m.prototype.onAdded=function(){Aio(this,Laya,OfflineModel,LED,l_r)},d_m.prototype.updateView=function(){var e=OfflineModel.instance.dhInfo;OfflineModel.instance.dhInfo.hasPartner&&e&&null!=e?this.t_hang.text=(j_x("790_2249")+"+")+OfflineModel.instance.intimateChangePct(e.qinmi)+"%":this.t_hang.text=(j_x(814));var p_l=OfflineModel.instance.offlineInfo.exp,p_g=OfflineModel.instance.onlineInfo.exp;this.t_offline.text=p_l+"",this.t_online.text=p_g-p_l+""},d_m);function d_m(){var e=d_u.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e}e.HangTips=b_e}(UI=UI||{});var p_h=function(){function e(e){this._actor=e,this.m_actorMoveTime=null}return e.prototype.clear=function(){this._condition&&(this._condition.reset(),this._condition=null)},e.prototype.init=function(e){void 0===e&&(e=-1);var p_l=Config.map[b_p.mapID];if(p_l)if(this.m_lastTime=SyncTime.tickCount,p_l&&p_l.funType===MapFunType.HangUp){var p_g=Config.hangup;for(var b_s in p_g)if(p_g[b_s].mapId==b_p.mapID)return void this.setCopyCondition(p_g[b_s].id)}else if(p_l.funType===MapFunType.PVP&&0<e){this._condition=new PlayerPvpCondition(this._actor);var d_u=Config.global[e].t_info,b_e=Config.global[e+1].t_info;if(this._actor.id===b_p.playerId){this._actor.needMoveMap=!1;var d_m=Engine2d.MapUtils.calcPosDir(d_u[0][0],d_u[0][1],d_u[1][0],d_u[1][1]);if(this._actor.syncCurrentPxy(Engine2d.MapUtils.cxToPx(d_u[0][0]),Engine2d.MapUtils.cyToPy(d_u[0][1]),d_m),!this._condition)return;this._condition.pos=new Laya.Point(b_e[0][0],b_e[0][1])}else d_m=Engine2d.MapUtils.calcPosDir(d_u[1][0],d_u[1][1],d_u[0][0],d_u[0][1]),this._actor.syncCurrentPxy(Engine2d.MapUtils.cxToPx(d_u[1][0]),Engine2d.MapUtils.cyToPy(d_u[1][1]),d_m),this._condition.pos=new Laya.Point(b_e[1][0],b_e[1][1])}},e.prototype.setPos=function(e,p_l){this.m_lastTime=SyncTime.tickCount,this._condition=new PlayerPvpCondition(this._actor);var p_g=Config.global[p_l].t_info,b_s=Config.global[p_l+1].t_info,d_u=Engine2d.MapUtils.calcPosDir(p_g[e][0],p_g[e][1],b_s[e][0],b_s[e][1]);this._actor.syncCurrentPxy(Engine2d.MapUtils.cxToPx(p_g[e][0]),Engine2d.MapUtils.cyToPy(p_g[e][1]),d_u),this._condition.pos=new Laya.Point(b_s[e][0],b_s[e][1])},e.prototype.setCopyCondition=function(e){var p_l=Config.hangup[e];p_l&&p_l.mapId===b_p.mapID&&(this._condition||(this._condition=new PlayerCopyCondition(this._actor),this._condition.fId=e),this._condition.reset(),this._condition.id=e,this._condition.pos=new Laya.Point(p_l.point[0],p_l.point[1]))},Object.defineProperty(e.prototype,"IsShowHP",{set:function(e){this._condition.IsShowHP=e},enumerable:!0,configurable:!0}),e.prototype.checkPlayNext=function(){if(this._condition&&this._actor&&!this._actor.moveActorCtrl.isJumping&&Laya.stage.isVisibility)switch(this._condition.state){case-1:this.m_actorMoveTime||(this.m_actorMoveTime=SyncTime.tickCount),this._condition.satrtToMove();break;case CopyHangupActType.MOVING:break;case CopyHangupActType.ACT_PLAYING:this._condition.endJumpPlayNext();break;case CopyHangupActType.KILL_OVER:this._condition.reset();var e=this._condition.nextId;if(-1===e)return;this.setCopyCondition(e)}},e.prototype.update=function(e){var p_l=SyncTime.tickCount;if(this._condition){var p_g=500*Math.random()+500;p_l-this.m_lastTime>p_g&&(this.m_lastTime=p_l,this.checkPlayNext()),this.m_actorMoveTime&&320<p_l-this.m_actorMoveTime&&(this.checkMoveVisible(),this.m_actorMoveTime=p_l)}},e.prototype.checkMoveVisible=function(){var e=Engine2d.Hero.local;if(e&&this._actor){var p_l=LgcM.ins.getActorStdInfoById(this._actor.id,Engine2d.ActorTypeDefine.PLAYER);if(!p_l||p_l.isPlayerVisible){var p_g=Engine2d.MapUtils.calcDistance2(this._actor.x,this._actor.y,e.x,e.y);this._actor.visible=p_g<Stage.height*Stage.height/4}else this._actor.visible=!1}},e}(),PlayerCopyCondition=function(){function e(e){this._state=-1,this._actor=e,this._actor.actBackFunc=Engine2d.Tools.BindDomain(this.playActionEnd,this)}return Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),e.prototype.endJumpPlayNext=function(){this._isJumping&&this.playNext()},e.prototype.checkCanJump=function(){var e=this._actor.currentCx,p_l=this._actor.currentCy,p_g=JumpManager.instance.getJumpTargetPos(e,p_l);return!!p_g&&(Laya.timer.once(150,this,this.delayJump,[p_g.x,p_g.y]),!0)},e.prototype.playNext=function(){Svf(this)},e.prototype.satrtToMove=function(){if(this._actor)if(this._state=CopyHangupActType.MOVING,this._actor.checkIsSameTarget(this.pos.x,this.pos.y))this.onMoveEnd(null);else{if(!Engine2d.GameMap.defaultMap.moveable(this.pos.x,this.pos.y))return void(this._state=CopyHangupActType.KILL_OVER);var e=Engine2d.GameMap.defaultMap.getPath(this.pos.x,this.pos.y,this._actor.currentCx,this._actor.currentCy);e&&0<e.length?(this._actor.id===b_p.playerId?(Engine2d.Hero.local.moveMainCtrl.isOnlyClientMove=!0,LED.on(l_r.LOCAL_MOVE_END,this,this.onMoveEnd)):this._actor.on(l_r.DUMMY_MOVE_END,this,this.onMoveEnd),this._actor.moveActorCtrl.setPaths(e,!0)):this._state=CopyHangupActType.KILL_OVER}},e.prototype.playSkill=function(){this._curSkillIndex++;var e=Config.hangup[this.id];if(e.otherSkills&&0<e.otherSkills.length){var p_l=e.otherSkills[this._curSkillIndex];if(0<p_l)return n_m.instance.isHangUpMap()&&!FrameRunManager.instance.isCanRunNext()?void(this._state=CopyHangupActType.KILL_OVER):void this._actor.fightingCtrl.clientToUseSkill(p_l,0,this._actor.x,this._actor.y+200,!0)}this._state=CopyHangupActType.KILL_OVER},e.prototype.delayJump=function(e,p_l){Laya.timer.clear(this,this.delayJump);var p_g=Engine2d.MapUtils.cxToPx(e),b_s=Engine2d.MapUtils.cyToPy(p_l);this._actor.jumpTo(this._actor.x,this._actor.y,p_g,b_s,this._actor.moveActorCtrl.calJumpSpeed(p_g,b_s)),this._isJumping=!0},e.prototype.reset=function(){Cmt(this)},e.prototype.onMoveEnd=function(e){this._state==CopyHangupActType.MOVING&&(this._state=CopyHangupActType.ACT_PLAYING,this._actor.id===b_p.playerId?LED.off(l_r.LOCAL_MOVE_END,this,this.onMoveEnd):this._actor.off(l_r.DUMMY_MOVE_END,this,this.onMoveEnd),this.playNext())},e.prototype.playActionEnd=function(e){Wdo(e,this)},Object.defineProperty(e.prototype,"nextId",{get:function(){var e=this.id+1,p_l=Config.hangup[this.id];if(p_l&&p_l.nextRandom){var p_g=p_l.nextRandom.length,b_s=Math.round(Math.random()*p_g);b_s=p_g<=b_s?p_g-1:b_s,e=p_l.nextRandom[b_s]}return(p_l=Config.hangup[e])&&p_l.mapId==b_p.mapID||(e=this.fId),e},enumerable:!0,configurable:!0}),e}(),PlayerPvpCondition=function(e){function p_l(p_l){var p_g=e.call(this,p_l)||this;p_g._IsShowHP=!1;var b_s=Config.map[b_p.mapID],d_u=d_x.instance.getRoundVo(d_x.instance.isCross);if(!gymkhanaModel.instance._fightPb||"asyncpk"!=b_s.impl&&"arena"!=b_s.impl&&"minewar"!=b_s.impl&&"minewar_cross"!=b_s.impl)if(d_u&&"asyncpvp"==b_s.impl)p_g._skills=d_u.skill?d_u.skill:SkillModel.instance.hookSkillList,p_g._targetId=p_g._actor.id===b_p.playerId?d_u.tpid:b_p.playerId;else if("bosscome_rob"==b_s.impl&&BossComeModel.instance.pvpInfo)p_g._skills=SkillModel.instance.hookSkillList,p_g._targetId=p_g._actor.id===b_p.playerId?BossComeModel.instance.pvpInfo.id:b_p.playerId;else if(b_p.mapID=600001){var b_e=DoubleAreaModel.instance._fiends,d_m=0,d_w=!0;p_g._actor.id==b_p.playerId?(d_m=DoubleAreaHelp.getMyCloneArr(b_e),d_w=!1):p_g._actor.id==DoubleAreaModel.instance.getTeamMemberId()?(d_m=DoubleAreaModel.instance.getMyTeamMemberArr(b_e),d_w=!1):d_m=p_g._actor.id==DoubleAreaModel.instance.getOtherTeamMemberId()[0]?DoubleAreaModel.instance.getOtherTeamCloneArr(b_e)[0]:DoubleAreaModel.instance.getOtherTeamCloneArr(b_e)[1],p_g._targetId=DoubleAreaModel.instance.playerChangerTarget(d_w,p_g._actor.id),p_g._skills=SkillModel.instance.getAllSkillList(d_m)}else p_g._skills=SkillModel.instance.hookSkillList,p_g._targetId=b_p.playerId;else p_g._actor.id===b_p.playerId?(p_g._skills=SkillModel.instance.hookSkillList,p_g._targetId=gymkhanaModel.instance._fightPb.base.pid):(p_g._targetId=b_p.playerId,p_g._skills=gymkhanaModel.instance._fightPb.skill?gymkhanaModel.instance._fightPb.skill:SkillModel.instance.hookSkillList);return p_g}return __extends(p_l,e),p_l.prototype.playActionEnd=function(e){Yly(e,Laya,this)},p_l.prototype.playSkill=function(){if(this._curSkillIndex++,Laya.timer.clear(this,this.playSkill),this._skills&&0<this._skills.length){var e=this._skills[this._curSkillIndex];if(0<e){var p_l=LgcM.ins.getActorById(this._targetId,Engine2d.ActorTypeDefine.PLAYER);if(p_l)this._actor.fightingCtrl.clientToUseSkill(e,0,p_l.x,p_l.y,!0);else if(600001==b_p.mapID)return this._actor.stopAutoCopy(),void LED.event(l_r.ACTORDID);if(this._IsShowHP){var p_g=LgcM.ins.getActorStdInfoById(this._targetId,Engine2d.ActorTypeDefine.PLAYER),b_s=LgcM.ins.getActorStdInfoById(this._actor.id,Engine2d.ActorTypeDefine.PLAYER),d_u=Math.floor(this.countTargetDamage(this._targetId,e));p_g.hp-=d_u;var b_e=!1;if(600001==b_p.mapID){var d_m=DoubleAreaModel.instance.getOtherTeamMemberId(),d_w=DoubleAreaModel.instance.getTeamMemberId();if(b_s.hp<=0&&(DoubleAreaModel.instance._haveDeadArray.push(this._actor.id),this._actor.stopAutoCopy(),this._actor.die(0)),p_g.hp<=0){p_l.stopAutoCopy(),p_l.die(0),DoubleAreaModel.instance._haveDeadArray.push(this._targetId),-1!=d_m.indexOf(this._actor.id)&&(b_e=!0);var f_t=DoubleAreaModel.instance.playerChangerTarget(b_e,this._actor.id);if(0==f_t){if(LED.event(l_r.ACTORDID),0!=d_w){var v_z=LgcM.ins.getActorById(d_w,Engine2d.ActorTypeDefine.PLAYER);v_z&&v_z.stopAutoCopy()}this._actor.stopAutoCopy()}else 0<b_s.hp&&(this._targetId=f_t)}}else(p_g.hp<=0||b_s.hp<=0)&&(p_l.stopAutoCopy(),this._actor.stopAutoCopy(),LED.event(l_r.ACTORDID));0<d_u&&(p_l.setHP(p_g.hp,p_g.hpUpper),d_s.instance.popDamage(this._targetId,d_u,!1)),LED.event(l_r.GYMKHANA_SKILL)}}else this._curSkillIndex=-1,this.playSkill()}},p_l.prototype.countTargetDamage=function(e,p_l){var p_g=Config.map[b_p.mapID];return!gymkhanaModel.instance._fightPb||"asyncpk"!=p_g.impl&&"arena"!=p_g.impl&&"minewar"!=p_g.impl&&"minewar_cross"!=p_g.impl?(b_p.mapID=600001)?DoubleAreaModel.instance.countTargetDamage(this._actor.id,e,p_l):0:gymkhanaModel.instance.countTargetDamage(this._actor.id,e,p_l)},Object.defineProperty(p_l.prototype,"nextId",{get:function(){return-1},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"IsShowHP",{get:function(){return this._IsShowHP},set:function(e){this._IsShowHP=!0},enumerable:!0,configurable:!0}),p_l.prototype.reset=function(){Cmn(e,this)},p_l}(PlayerCopyCondition),PopPropManager=function(){function e(){this.isFirstTo=!0}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.popProp=function(e,p_l){if(!this.isFirstTo){var p_g=this.getTitleIndex(e);if(-1!==p_g){this._panels||(this._panels=[]);var b_s=Laya.Pool.getItemByClass(PoolDefine.POP_PANEL,PropPopPanel);b_s.setData(p_g,p_l,Engine2d.Tools.BindDomain(this.moveComplete,this)),this.addToShow(b_s),this._panels.push(b_s)}}},e.prototype.moveComplete=function(){this._panels&&this._panels.shift()},e.prototype.addToShow=function(e){Ufk(e,Stage,this,UIM)},e.prototype.getTitleIndex=function(e){return Cfn(e,Config)},e.prototype.calCurPosY=function(){var e=Stage.height/2+250,p_l=this._panels.length;for(var p_g in this._panels)this._panels[p_g].parent&&(this._panels[p_g].moveY(e-p_l*this._panels[p_g].height),p_l--);return e},e.prototype.leaveMap=function(){Cww(this)},e}(),PropPopPanel=function(e){function p_l(){var p_l=e.call(this)||this;return p_l.on(Laya.Event.ADDED,p_l,p_l.onAdded),p_l}return __extends(p_l,e),p_l.prototype.onAdded=function(){Ygw(this,Laya)},p_l.prototype.moveY=function(e){this.y==e||this._tween||Laya.Tween.to(this,{j_l:e},200,null,null,null,!0,!0)},p_l.prototype.tweenComplete=function(){this._tween&&(this._tween.clear(),this._tween=null),null!=this._callBack&&this._callBack.call(null),this._callBack=null,this.removeSelf(),Laya.Pool.recover(PoolDefine.POP_PANEL,this)},p_l.prototype.delayMove=function(){Laya.timer.clear(this,this.delayMove);var e=this.y-100;this._tween=Laya.Tween.to(this,{f_u:this.x,j_l:e,alpha:0},200,null,Laya.Handler.create(this,this.tweenComplete),null,!0)},p_l.prototype.setData=function(e,p_l,p_g){void 0===p_g&&(p_g=null),this._callBack=p_g,this.titleClip.index=e,b_p.getNumSp(NumType.PROP,p_l,this.numSp,-5),this._lastTime=SyncTime.tickCount},Object.defineProperty(p_l.prototype,"lastTime",{get:function(){return this._lastTime},enumerable:!0,configurable:!0}),p_l.prototype.clear=function(){Laya.timer.clear(this,this.delayMove),this._tween&&(this._tween.clear(),this._tween=null),this._callBack=null,this.removeSelf(),Laya.Pool.recover(PoolDefine.POP_PANEL,this)},p_l}(ui.window.tips.propTipUI);!function(e){var p_l,p_g=(p_l=ui.window.crossPvp.CrossPvpAtListPanelUI,__extends(b_s,p_l),b_s.prototype.setServerPos=function(){Otc(this)},b_s.prototype.updateServer=function(){var e=KFopenSerModel.instance.RankServerValue,p_l=!0;0<e.length&&(p_l=!1),this.serverList.array=e,this.none.visible=p_l,this.serverList.visible=!p_l},b_s.prototype.onAdded=function(){Kwy(this,Laya,l_r,d_x)},b_s.prototype.onRemove=function(){Kig(this,Laya,l_r)},b_s.prototype.updateRankItem=function(e,p_l){if(null!=e.dataSource){var p_g=e.getChildByName("serverRank"),b_s=e.getChildByName("serverName"),d_u=e.getChildByName("integral"),b_e=e.dataSource;p_g.text=(p_l+1).toString(),b_s.text=b_e.serverID+(j_x(1998)),d_u.text=b_e.value.toString(),b_e.serverID===KFopenSerModel.instance.OwnServerId?p_g.color=b_s.color=d_u.color="#71de66":p_g.color=b_s.color=d_u.color="#e32828"}},Object.defineProperty(b_s.prototype,"attackVo",{get:function(){return d_x.instance.getAttackVo(1)},enumerable:!0,configurable:!0}),b_s.prototype.updateData=function(){Ezp(this)},b_s.prototype.updateCountDown=function(e){var p_l=e.sulTime-e.showTime;0<p_l?(this.txtCountDown.text=Utils.formatTimeStr(p_l),this.txtCountDown.color="#00802e"):(this.txtCountDown.text=(j_x("1796_1878_1300")+j_x("396_2426")),this.txtCountDown.color=Utils.Color.NAME_RED,this.removeTime())},b_s.prototype.updateState=function(){var e=d_x.instance.isQualification,p_l=e?"#00ff00":"#ff0000",p_g=(j_x(1176))+(e?(j_x(1300)):(j_x(206)))+(j_x("531_1976_1662")+j_x("1998_804_1077")+j_x("115_1289"));this.txtHas.color=p_l,this.txtHas.text=p_g},b_s.prototype.updateTime=function(){var e=this.dataSource;e&&(this.txtTotalTime.text=Utils.formatTimeStr4(e.subVo[0].start,!1)+"-"+Utils.formatTimeStr4(e.subVo[0].stop-e.subVo[0].showTime,!1),0<e.subVo[0].sulTime&&Laya.timer.loop(1e3,this,this.updateCountDown,[e.subVo[0]]),this.updateCountDown(e.subVo[0]))},b_s.prototype.removeTime=function(){Iiz(Laya,this)},Object.defineProperty(b_s.prototype,"totalTime",{get:function(){var e=Config.global[GlobalDefine.asyncpvp_reset_season];return e?e.t_info[0]:1e3},enumerable:!0,configurable:!0}),b_s.prototype.onClick=function(p_l){switch(p_l.target){case this.btnBack:case this.btnClose:b_s.close();break;case this.btnEnter:e.CrossPvpPanel.open()}},b_s.open=function(e){void 0===e&&(e=null),UIM.open(b_s,["activity/kfOpenSer.atlas"],e,!1)},b_s.close=function(){Wdh(UIM,b_s)},Object.defineProperty(b_s.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),b_s.prototype.removeAll=function(){Kwh(this)},b_s);function b_s(){var e=p_l.call(this)||this;return e.setServerPos(),LED.are(e,e.onAdded,e.onRemove),z_j.setList(e.serverList,e,e.updateRankItem),z_j.setListScroll(e.serverList),e}e.CrossPvpAtListPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.crossPvp.CrossPvpPanelUI,__extends(b_s,p_l),b_s.prototype.updateOwnServer=function(){Usa(this,KFopenSerModel,j_x)},b_s.prototype.updateGRecord=function(){var e=d_x.instance.getGlobalRecords(this.isCross),p_l=!0;if(e&&0<e.length){this.t_null.visible=!1,this.txtRecord.visible=!0;var p_g=e[0],b_s=Config.talisman_talisman[p_g.tsId],d_u=b_s?b_s.name:"",b_e=p_g.svrId,d_m=p_g.tsvrId,d_w=this.toStr(b_e),f_t=this.toStr(d_m),v_z=void 0,d_h=void 0;b_e&&(v_z=this.isSameServer(b_e),this.getServerColor(v_z)),d_m&&(d_h=this.isSameServer(d_m),this.getServerColor(d_h)),this.txtRecord.text=Utils.$(("{1}"+j_x("1365_1876")+"{2}"+j_x("1835_1959_743")+"{3}{4}"+j_x("844_799_869")),d_w+p_g.name,d_u,f_t+p_g.tName,p_g.tsNum),p_l=!1}this.t_null.visible=p_l,this.txtRecord.visible=!p_l},b_s.prototype.setServerPos=function(){Gvo(this)},b_s.prototype.onGoodUpdate=function(){this.attackVo.sulNum<=0&&this.updateGoodNum()},b_s.prototype.onAdded=function(){this._mask||(this._mask=new Laya.Sprite,this._mask.graphics.drawRect(0,0,this.maskSp.width,this.maskSp.height,"#FFFFFF"),this._mask.visible=!1),this.headSp.addChildAt(this._mask,0),this.headSp.mask=this._mask,this.on(Laya.Event.CLICK,this,this.onClick),this.onEvent(l_r.PVP_RECORD_UPDATE,this.updateRecordRP),this.onEvent(l_r.PVP_ATTACK_TS_CHANGE,this.updateInfo),this.onEvent(l_r.PVP_SCORE_POINT_UPDATE,this.updateScore),this.onEvent(l_r.PVP_MATCH_UPDATE,this.updateMatch),this.onEvent(l_r.PVP_GLOBAL_RECORD_UPDATE,this.updateGRecord),this.onEvent(l_r.ITEM_ADD,this.onGoodUpdate),this.onEvent(l_r.ITEM_REMOVE,this.onGoodUpdate),this.onEvent(l_r.ITEM_AMOUNT_CHANGE,this.onGoodUpdate),this.onEvent(l_r.KF_UPDATE_SERVER_VALUE,this.updateServer),this.onEvent(l_r.PVP_CROSS_STATE,this.updateState),this.offEvent(l_r.KF_RANK_UPDATE,this.updateRank),this.updateData(),d_x.instance.reqPvpData(this.isCross)},b_s.prototype.updateGoodNum=function(){var e=Config.CItem(this.itemID);if(e){var p_l=BagModel.instance.getItemCountByItemID(this.itemID),p_g=0<p_l?"#00802e":"#c92828";this.txtTime.color=p_g,this.txtTime.text=Utils.$((j_x("1661_1502")+"{1}:{2}/1"),e.name,p_l)}},b_s.prototype.isSameServer=function(e){return Opa(e,KFopenSerModel)},b_s.prototype.toStr=function(e){return Owt(e,PvpDefine)},b_s.prototype.onRemove=function(){Arf(this,Laya,l_r)},b_s.prototype.removeMask=function(){Ezl(this)},b_s.prototype.getServerColor=function(e){return Gat(e,PvpDefine)},Object.defineProperty(b_s.prototype,"attackVo",{get:function(){return d_x.instance.getAttackVo(1)},enumerable:!0,configurable:!0}),b_s.prototype.updateScore=function(){var e=this.attackVo;e&&(this.txtScore.text=e.score+"",this.txtCount.text=e.sulNum+"/"+d_x.instance.maxNum,this.txtName.text=this.heroVo.name,this.showMatch(),this.showPlayer(this.heroVo.sex),this.showBlack(this.mSex))},b_s.prototype.updateData=function(e){void 0===e&&(e=1);var p_l=this.attackVo;this.updateRank(),this.changeStatu(),-1==e&&""!=p_l.tarName&&d_x.instance.isMatch(PvpDefine.cross)&&this.reqPvpEnter(),this.updateState(),this.updateServer(),this.updateScore(),this.updateTime(),p_l&&0<p_l.sulTime&&Laya.timer.loop(1e3,this,this.updateTime);var p_g=!(0<this.actTime());this._isEnd=p_g,this.countBox.visible=!p_g,this.txtTime.visible=!p_g,this.btnMatch.label=p_g?(j_x("1174_2111_2235")+j_x(83)):(j_x("169_1451_1653")+j_x(886)),this.removeCountDown(),p_g?this.txtCountDown.text=(j_x("1796_1878_1300")+j_x("396_2426")):(this.updateCountDown(),Laya.timer.loop(1e3,this,this.updateCountDown)),this.updateRewardRP(),this.updateRecordRP()},b_s.prototype.updateInfo=function(e){e&&this.updateData(-1)},b_s.prototype.updateRewardRP=function(){Aqc(this)},b_s.prototype.updateRecordRP=function(e){void 0===e&&(e=1),e&&(this.recordRp.visible=d_x.instance.isRecordRp())},b_s.prototype.updateItembox=function(e,p_l){Ium(e,p_l)},b_s.prototype.updateState=function(){Iac(d_x,this)},b_s.prototype.onRankUpdate=function(){var e=-100;this._rankVo&&(e=this._rankVo.getOwnIndex()),this.txtRanking.text=0<e?e+"":(j_x("206_1067_1077"))},b_s.prototype.isReward=function(){return!!this.subVo&&(x_p.instance.KFRankHasPersonalReward(this.subVo.type)||x_p.instance.KFRankHasServerReward(this.subVo.type))},b_s.prototype.updateTime=function(){var e=this.attackVo,p_l=0;if(e)if(0<(p_l=e.sulTime))this.txtTime.color="#c92828",this.txtTime.text=(j_x("1614_2171_1702")+j_x(2460)+" ")+Utils.formatTimeStr(p_l);else{if(Laya.timer.clear(this,this.updateTime),e.sulNum<=0)return void this.updateGoodNum();this.txtTime.text=""}else Laya.timer.clear(this,this.updateTime),this.txtTime.text=""},Object.defineProperty(b_s.prototype,"itemID",{get:function(){var e=Config.global[GlobalDefine.cross_async_pvp_extra_item];return e?e.i_info:0},enumerable:!0,configurable:!0}),Object.defineProperty(b_s.prototype,"coolingTime",{get:function(){var e=this.attackVo;return e?e.sulTime:0},enumerable:!0,configurable:!0}),b_s.prototype.updateCountDown=function(){Eji(this,Utils)},b_s.prototype.actTime=function(){return Wbv(d_x,PvpDefine)},Object.defineProperty(b_s.prototype,"totalTime",{get:function(){var e=Config.global[GlobalDefine.asyncpvp_reset_season];return e?e.t_info[0]:1e3},enumerable:!0,configurable:!0}),b_s.prototype.updateItem=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("icon"),d_u=e.getChildByName("nameTxt"),b_e=e.getChildByName("lvTxt"),d_m=e.getChildByName("talentTxt"),d_w=e.getChildByName("fightTxt"),f_t=TalismanModel.instance.getTalismanById(p_g);if(f_t){var v_z=Config.talisman_talisman[f_t.id],d_h=Resource.ResUrl.getIconUrl(v_z.icon);b_s=Resource.ResManager.Instance.getImg(d_h,b_s),d_u.text=v_z.name,b_e.text=Utils.$((j_x("15_2342")+"{1}"),f_t.level);var r_t=TalismanModel.instance.calDeploymentsApt(f_t.deployments);d_m.text=Utils.$((j_x("115_1621")+"{1}"),r_t),d_w.text=Utils.$((j_x("383_767")+"{1}"),f_t.fight)}},b_s.prototype.onClick=function(p_l){switch(p_l.target){case this.btnMatch:if(!this.isCanClick)return;if(this._isEnd)return void this.openReward();this._isTest=!1;var p_g=TalismanModel.instance.getTalismanVos(!0);if(!p_g||p_g.length<=0)return void b_p.broadcastNotice((j_x("1971_1896_1163")+j_x("203_383_799")+j_x(869)));if(0<this.coolingTime)return void b_p.confirm((j_x("68_2032_572")+j_x(2218))+this.costCD+(j_x("1263_869_1496")+j_x("1792_1614_2171")+j_x("1702_2460")+""),(function(){d_x.instance.reqResetCD()}));if(this.attackVo.sulNum<=0&&BagModel.instance.getItemCountByItemID(this.itemID)<=0)return void r_f.instance.isWindow(this.itemID);d_x.instance.reqMatch(this.isCross);break;case this.txtMore:e.PvpGRecordPanel.open(this.isCross);break;case this.btnRank:e.KFopenSerRank.open(this._rankVo,this._type,this.isCross);break;case this.btnRecord:d_x.instance.clearRecord(),e.PvpRecordPanel.open(this.isCross);break;case this.btnClose:case this.btnBack:d_x.instance.isCross=0,b_s.close();break;case this.btnReward:this.openReward()}},b_s.prototype.openReward=function(){this.subVo&&e.KFopenSerReward.open(this.subVo.type,this.subVo)},Object.defineProperty(b_s.prototype,"isCross",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(b_s.prototype,"isCanClick",{get:function(){return!!this.attackVo.isBack},enumerable:!0,configurable:!0}),Object.defineProperty(b_s.prototype,"costCD",{get:function(){if(!this._moneyStr){var e=Config.global[GlobalDefine.asyncpvp_buy_reset_cd].t_info;this._moneyStr=z_j.getMoneyName(e[0],e[1])}return this._moneyStr},enumerable:!0,configurable:!0}),b_s.open=function(){Wbz(UIM,b_s)},b_s.close=function(){Qgo(UIM,b_s)},Object.defineProperty(b_s.prototype,"mSex",{get:function(){return this.heroVo.sex==GameDefine.boy?GameDefine.girl:GameDefine.boy},enumerable:!0,configurable:!0}),Object.defineProperty(b_s.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),b_s.prototype.showPlayer=function(e){void 0===e&&(e=-1);var p_l=1==e,p_g=2==e;this.headBoy.visible=p_l,this.headGirl.visible=p_g},b_s.prototype.removeAll=function(){Sks(Laya,this)},b_s.prototype.changeStatu=function(e,p_l){void 0===e&&(e=-1),void 0===p_l&&(p_l="");var p_g=-1!=e;this.btnMatch.visible=!p_g,this.txtStatu.visible=p_g,this.txtStatu.text=p_l},b_s.prototype.updateHeadList=function(e){this._headList=[];var p_l=this._showBlackImg;this._headList.push(this.createImg(p_l,1));var p_g=[2,1,2,1];e==GameDefine.girl&&(p_g=[1,2,1,2]);for(var b_s=0;b_s<p_g.length;b_s++)p_l=p_g[b_s]==GameDefine.boy?this.headBoy2:this.headGirl2,this._headList.push(this.createImg(p_l))},b_s.prototype.enterScene=function(){Ozb(this)},b_s.prototype.showBlack=function(e){void 0===e&&(e=-1);var p_l=1==e,p_g=2==e;this.blackBoy.visible=p_l,this.blackGirl.visible=p_g,this._showBlackImg=p_l?this.blackBoy:this.blackGirl;var b_s=-1==e;this.showHeadShowSp(b_s)},b_s.prototype.moveNext=function(e){void 0===e&&(e=null),this.recycleHead(e),1<this._headList.length?this.changeHead():(0<this._headList.length&&((e=this._headList.shift()).alpha=1),this.moveEnd())},b_s.prototype.changeHead=function(){var e=this._headList.shift();e.alpha=1;var p_l=e.y-2*e.height/3;Laya.Tween.to(e,{j_l:p_l,alpha:0},250,null,Laya.Handler.create(this,this.onStay,[e]))},b_s.prototype.removeCountDown=function(){Wyx(Laya,this)},b_s.prototype.updateRank=function(){Sny(this,RankModel,RankType)},b_s.prototype.showMatch=function(e){void 0===e&&(e=!1),this.playerBox2.visible=e},b_s.prototype.reqPvpEnter=function(){Ckj(d_x,PvpDefine)},b_s.prototype.createImg=function(e,p_l){var p_g;return void 0===p_l&&(p_l=-1),(p_g=0<this._headPoolList.length?this._headPoolList.pop():new Laya.Image).x=e.x,p_g.y=e.y,p_g.skin=e.skin,p_g.scaleX=p_l,p_g.alpha=0,this.headShowSp.addChild(p_g),p_g},b_s.prototype.showHeadShowSp=function(e){void 0===e&&(e=!0),this.headShowSp.visible=e},b_s.prototype.updateMatch=function(e){e.isCross&&(this.txtName2.text=e.tarName,this.txtServer2.text=e.svrId+(j_x(1998)),this.showHead(e.tarSex))},b_s.prototype.showHead=function(e){void 0===e&&(e=2),0<this.headShowSp.numChildren&&this.headShowSp.removeChildren(),this.updateHeadList(e),this.changeStatu(1,(j_x("169_1451_283")+"...")),this.showBlack(),this.showHeadShowSp(),this.changeHead()},b_s.prototype.moveEnd=function(){Efg(this,j_x,Laya)},b_s.prototype.onStay=function(e){void 0===e&&(e=null),0<this._headList.length&&(this._headList[0].alpha=1),Laya.timer.once(200,this,this.moveNext,[e])},b_s.prototype.recycleHead=function(e){Qfb(e,this)},b_s.prototype.updateNumSp=function(e,p_l){Mop(e,p_l,b_p,NumType)},Object.defineProperty(b_s.prototype,"subVo",{get:function(){return d_x.instance.subVo},enumerable:!0,configurable:!0}),b_s.prototype.updateServer=function(){var e=KFopenSerModel.instance.RankServerValue,p_l=!0;0<e.length&&(p_l=!1),this.serverList.array=e,this.none.visible=p_l,this.serverList.visible=!p_l,this.updateRewardRP(),this.updateOwnServer()},b_s.prototype.updateRankItem=function(e,p_l){if(null!=e.dataSource){var p_g=e.getChildByName("serverRank"),b_s=e.getChildByName("serverName"),d_u=e.getChildByName("integral"),b_e=e.dataSource;p_g.text=(p_l+1).toString(),b_s.text=b_e.serverID+(j_x(1998)),d_u.text=b_e.value.toString(),b_e.serverID===KFopenSerModel.instance.OwnServerId?p_g.color=b_s.color=d_u.color="#71de66":p_g.color=b_s.color=d_u.color="#e32828"}},b_s);function b_s(){var e=p_l.call(this)||this;return e._headPoolList=[],e._type=5,e.setServerPos(),e.removeMask(),z_j.setList(e.serverList,e,e.updateRankItem),z_j.setListScroll(e.serverList),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.updateOwnServer(),e}e.CrossPvpPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.decompose.equipDecomposeSwapUI,__extends(d_u,p_l),d_u.open=function(e){Mes(e,UIM,d_u)},d_u.prototype.updateItem=function(e,p_l){var p_g=e.getChildByName("selectBox");p_g&&(p_g.name="selectImg");var b_s=e.dataSource;if(b_s){var d_u=Config.CItem(b_s.id);e.isUseGlow=!0,e.setItemData({id:b_s.id,amount:1,name:d_u.name,isTalisEquip:b_s.isTalisEquip},ItemBoxDefine.MODULE_ITEM,!1);for(var b_e=0;b_e<this._selectItems.length;++b_e)if(this._selectItems[b_e]==b_s)return void(e.selectImg.visible=!0);e.selectImg.visible=!1}},d_u.prototype.onCloseBtn=function(){Oab(DecomposeModel,this,LED,l_r,d_u)},d_u.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":this.onCloseBtn()}},d_u.prototype.onRemove=function(){Kwt(this,Laya)},d_u.prototype.setCellSelected=function(e){if(!(e<0)){var p_l=this.itemList.getCell(e);if(p_l)if(p_l.selectImg.visible){p_l.selectImg.visible=!1;for(var p_g=0;p_g<this._selectItems.length;p_g++)return void(this._selectItems[p_g]==p_l.dataSource&&(this._selectItems[p_g]=null))}else{for(p_l.selectImg.visible=!0,p_g=0;p_g<this._selectItems.length;p_g++)if(this._selectItems[p_g]==p_l.dataSource||null==this._selectItems[p_g])return void(this._selectItems[p_g]=p_l.dataSource);this._selectItems.push(p_l.dataSource)}}},d_u.close=function(){Qiq(UIM,d_u)},d_u.prototype.onAdded=function(){Waf(this,Laya)},d_u.prototype.updateView=function(){var e;this._kind=this.dataSource,0==this._kind?e=BagModel.instance.getItemsByItemType(BagTypeDefine.BAG_TYPE_ITEM,ItemTypeDefine.EQUIPMENT,1):2==this._kind?e=BagModel.instance.getItemsByItemType(BagTypeDefine.BAG_TYPE_ITEM,ItemTypeDefine.EQUIPMENT,5):3==this._kind&&(e=BagModel.instance.getItemsByItemType(BagTypeDefine.BAG_TYPE_ITEM,ItemTypeDefine.EQUIPMENT,4));for(var p_l=[],p_g=0;p_g<e.length;p_g++)0==this._kind&&DecomposeModel.instance._equipList.indexOf(e[p_g])<0&&p_l.push(e[p_g]),2==this._kind&&DecomposeModel.instance._godList.indexOf(e[p_g])<0&&p_l.push(e[p_g]),3==this._kind&&DecomposeModel.instance._talisEquipList.indexOf(e[p_g])<0&&p_l.push(e[p_g]);0==(this.itemList.array=p_l).length?this.nonItemLab.visible=!0:this.nonItemLab.visible=!1},d_u.prototype.cancelCellSelected=function(e){if(!(e<0)){var p_l=this.itemList.getCell(e);p_l.selectImg.visible&&(p_l.selectImg.visible=!1)}},d_u.prototype.onItemSelect=function(e){Ccg(e,this)},d_u.prototype.initData=function(){Oov(this)},d_u);function d_u(){var e=p_l.call(this)||this;return e._selectItems=[],e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.itemList.vScrollBarSkin="",e.itemList.repeatX=5,e.itemList.spaceX=20,e.itemList.spaceY=30,e.itemList.scrollBar.elasticDistance=200,e.itemList.scrollBar.elasticBackTime=500,e.itemList.selectEnable=!0,e.itemList.renderHandler=p_g.create(e,e.updateItem,[],!1),e.itemList.selectHandler=p_g.create(e,e.onItemSelect,[],!1),e}e.DecomposeEquipSwapPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.decompose.baseDecomposeUI,__extends(b_s,p_l),b_s.prototype.setItemData=function(e,p_l){var p_g=e.dataSource,b_s=BagModel.instance.getItemInfoByUuid(BagTypeDefine.BAG_TYPE_ITEM,p_g);if(""==p_g||!b_s)return this.iconSp.texture=null,this.bg.index=0,this.nameTxt.text="",this._quaEft&&(this._quaEft.parent=null,this.removeChild(this._quaEft),this._quaEft.removeSelf()),this._quaEft=null,void(this.changeBtn.visible=!0);var d_u=Config.CItem(b_s.id);this.iconSp=Resource.ResManager.Instance.getImg(Resource.ResUrl.getIconUrl(d_u.icon),this.iconSp),this.setBagItemName(b_s.id),this.bg.index=d_u.quality-1,this.setQuality(d_u.quality),this.changeBtn.visible=!1},b_s.prototype.setBagItemName=function(e){var p_l="",p_g=Config.item_equipment[e];if(p_g){if(p_l=Utils.$("Lv.{1}",p_g.level),p_g.stateLevel){var b_s=Config.state_state[p_g.stateLevel];b_s&&(p_l=1<p_g.level?Utils.$("{1}Lv.{2}",b_s.desc,p_g.level):b_s.desc)}}else{var d_u=Config.CItem(e);d_u&&""!=d_u.name&&(p_l=d_u.name)}this.setName(p_l)},b_s.prototype.setQuality=function(e){this.bg.index=e-1,this._quaEft=Resource.ResManager.getQualityEft(e,this._quaEft),this._quaEft&&(this._quaEft.index=0,this._quaEft.play(),null===this._quaEft.parent&&this.addChild(this._quaEft),this._quaEft.x=this.bg.x+this.bg.width/2-this._quaEft.width/2,this._quaEft.y=this.bg.y+this.bg.height/2-this._quaEft.height/2)},b_s.prototype.setName=function(e,p_l,p_g){void 0===p_l&&(p_l="#485260"),void 0===p_g&&(p_g=!0),this.nameTxt.bold=p_g,this.nameTxt.visible=!0,this.nameTxt.color=p_l,this.nameTxt.text=e},b_s);function b_s(){return p_l.call(this)||this}e.DecomposeItemBox=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=Laya.Point,d_u=(p_l=ui.window.decompose.decomposeUI,__extends(b_e,p_l),b_e.prototype.onLoadEffSkin=function(){Iyt(this)},b_e.prototype.updateTalisEquipItem=function(p_l,p_g){var b_s=p_l.dataSource,d_u=p_l.getChildByName("changeBtn"),b_e=BagModel.instance.getItemInfoByUuid(BagTypeDefine.BAG_TYPE_ITEM,b_s);d_u.visible=!b_e,e.TalisEquipItem.setItemData(p_l,b_e)},b_e.prototype.init=function(){var e;(e=Config.CItem(2))&&(this.rewIconSp0=Resource.ResManager.Instance.getImg(Resource.ResUrl.getIconUrl(e.icon),this.rewIconSp0),DecomposeModel.instance._rewItem0=2,(e=Config.CItem(200002))&&(this.rewIconSp1=Resource.ResManager.Instance.getImg(Resource.ResUrl.getIconUrl(e.icon),this.rewIconSp1),DecomposeModel.instance._rewItem1=200002,(e=Config.CItem(2))&&(this.rewIconSp0=Resource.ResManager.Instance.getImg(Resource.ResUrl.getIconUrl(e.icon),this.talisEquipIcon1),DecomposeModel.instance._rewItem0=2,(e=Config.CItem(200003))&&(this.rewIconSp1=Resource.ResManager.Instance.getImg(Resource.ResUrl.getIconUrl(e.icon),this.talisEquipIcon2),DecomposeModel.instance._rewItem1=200003))))},b_e.prototype.reFillView=function(){this.reFillData(),this.updateView(),this._isAuto&&Laya.timer.once(250,this,this.succAutoDec)},b_e.prototype.reFillData=function(){var e=new Array;e.push(1),this.greenCheck.selected&&e.push(2),this.blueCheck.selected&&e.push(3),this.purpleCheck.selected&&e.push(4),this.orangeCheck.selected&&e.push(5),this.redCheck.selected&&e.push(6),DecomposeModel.instance.init(e)},b_e.prototype.onMouseClick=function(e){var p_l=e.target;switch(p_l.name){case"backBtn":case"closeBtn":var p_g=this.itemTab.selectedIndex;this.clearClip(p_g),b_e.close();break;case"greenCheck":this.onCheckClick(ItemQualityDefine.GREEN,p_l.selected);break;case"blueCheck":this.onCheckClick(ItemQualityDefine.BLUE,p_l.selected);break;case"purpleCheck":this.onCheckClick(ItemQualityDefine.PURPLE,p_l.selected);break;case"orangeCheck":this.onCheckClick(ItemQualityDefine.ORANGE,p_l.selected);break;case"redCheck":this.onCheckClick(ItemQualityDefine.RED,p_l.selected);break;case"autoDecomposeBtn":if(SyncTime.tickCount-this._clickTime<350)return;p_g=this.itemTab.selectedIndex,this.onAutoDecomposeBtn(),this._clickTime=SyncTime.tickCount;break;case"decomposeBtn":if(SyncTime.tickCount-this._clickTime<600)return;if(this._isAuto)return void(this._isAuto=!1);this._isAuto=!1,p_g=this.itemTab.selectedIndex,this.onDecomposeBtn(p_g),this._clickTime=SyncTime.tickCount;break;case"changeBtn":this.onItemSelect()}},b_e.prototype.countEquipReward=function(e,p_l){void 0===p_l&&(p_l=1);for(var p_g=0,b_s=0,d_u=0;d_u<e.length;d_u++){var b_e=e[d_u];if(""!==b_e){var d_m=BagModel.instance.getItemInfoByUuid(BagTypeDefine.BAG_TYPE_ITEM,b_e);if(d_m){var d_w=Config.item_equipment[d_m.id],f_t=DecomposeModel.instance.generateCnfKey(d_w.place,d_w.stateLevel,d_w.level,d_w.quality),v_z=void 0;if(3==p_l){if(!(v_z=Config.decompose_tsEquipDecompose[f_t]))continue;for(var d_h=0;d_h<v_z.material.length;d_h++)2==v_z.material[d_h][0]&&(p_g+=v_z.material[d_h][1]),200003==v_z.material[d_h][0]&&(b_s+=v_z.material[d_h][1])}else{if(!(v_z=Config.decompose_decompose[f_t]))continue;for(d_h=0;d_h<v_z.material.length;d_h++)2==v_z.material[d_h][0]&&(p_g+=v_z.material[d_h][1]),200002==v_z.material[d_h][0]&&(b_s+=v_z.material[d_h][1])}}}}return[p_g,b_s]},b_e.prototype.onAutoDecomposeBtn=function(){if(!this._isAuto){this._isAuto=!0;var e=this.itemTab.selectedIndex;0!=e&&2!=e&&3!=e||this.onDecomposeBtn(e)}},b_e.prototype.onRemove=function(){Eob(this,Laya,LED,l_r)},b_e.prototype.onDecomposeBtn=function(e){var p_l,p_g=e;if(0==e?p_l=this.equipDecomposeList.array:2==e?(p_g=4,p_l=this.godList.array):3==e&&(p_l=this.talisEquipList.array),this.resetCell(),p_l){for(var b_s=new Array,d_u=0;d_u<p_l.length;d_u++)""!=p_l[d_u]&&b_s.push(p_l[d_u]);if(0==b_s.length)return b_p.broadcastError(1053),void(this._isAuto=!1);DecomposeModel.instance.reqDecomposeEquip(p_g,b_s)}},b_e.close=function(){Scb(UIM,b_e)},b_e.prototype.updateView=function(){var e=DecomposeModel.instance.getShowListByIndex(DecomposeModel.INDEX_EQUIP),p_l=DecomposeModel.instance.getShowListByIndex(DecomposeModel.INDEX_TALISEQUIP),p_g=this.itemTab.selectedIndex;3==p_g?this.talisEquipList.array=p_l:0==p_g?this.equipDecomposeList.array=e:2==p_g&&this.updateGodEquipBox(),this.talisEquipRid.visible=0<p_l.length&&p_l[0]&&""!=p_l[0],this.equipRid.visible=0<e.length&&e[0]&&""!=e[0];var b_s=this.countEquipReward(e,p_g),d_u=b_s[0],b_e=b_s[1];this.rewNumLab0.text=0==d_u?"":d_u.toString(),this.rewNumLab1.text=0==b_e?"":b_e.toString(),this.talisEquipNum1.text=0==d_u?"":d_u.toString(),this.talisEquipNum2.text=0==b_e?"":b_e.toString();var d_m=Config.recharge_vip[RechargeModel.instance.viplv];this.autoDecomposeBtn.disabled=!d_m||!d_m.autoDecompose,this.autoVipLab.visible=!d_m||!d_m.autoDecompose,this.godRed.visible=0<DecomposeModel.instance.getGodListInfo.length},b_e.prototype.onCheckClick=function(e,p_l){var p_g=this.itemTab.selectedIndex;p_l&&0==p_g?(DecomposeModel.instance.addItemByTypeAndQuality(ItemTypeDefine.EQUIPMENT,e),this.updateView()):p_l||0!=p_g?p_l&&3==p_g?(DecomposeModel.instance.addItemByTypeAndQuality(DecomposeModel.INDEX_TALISEQUIP,e),this.updateView()):p_l||3!=p_g||(DecomposeModel.instance.removeItemByTypeAndQuality(DecomposeModel.INDEX_TALISEQUIP,e),this.updateView()):(DecomposeModel.instance.removeItemByTypeAndQuality(ItemTypeDefine.EQUIPMENT,e),this.updateView())},b_e.prototype.updateGodEquipRewardItem=function(e,p_l){Ycl(e,p_l,ItemBoxDefine)},b_e.prototype.updateGodEquipItem=function(p_l,p_g){var b_s=p_l.dataSource,d_u=p_l.getChildByName("changeBtn"),b_e=p_l.getChildByName("itemBox"),d_m=BagModel.instance.getItemInfoByUuid(BagTypeDefine.BAG_TYPE_ITEM,b_s);d_u.visible=!d_m,b_e||(b_e=new e.GodEquipItem,p_l.addChild(b_e),b_e.name="itemBox",p_l.setChildIndex(d_u,1)),b_e.dataSource=d_m,b_e.setNameY(106),b_e.updateView(0,!1,!1)},b_e.prototype.onAdded=function(){this.isClear=!1,LED.event(l_r.DECOMPOSE_EQUIP_LIST_REFILL),this.equipBox.mouseThrough=!0;var e=this.dataSource;this._clipTab.on("tabSelect",this,this.onTabSelect),this.itemTab.selectedIndex=null===e?0:e,this.on(Laya.UIEvent.CLICK,this,this.onMouseClick),LED.on(l_r.DECOMPOSE_EQUIP_LIST_UPDATE,this,this.updateView),LED.on(l_r.DECOMPOSE_EQUIP_LIST_REFILL,this,this.decomposeSucc)},b_e.open=function(e){Cfg(e,Laya,UIM,b_e)},b_e.prototype.onItemSelect=function(){var p_l,p_g=this.itemTab.selectedIndex;0==p_g?p_l=this.equipDecomposeList.selectedItem:2==p_g?p_l=this.godList.selectedItem:3==p_g&&(p_l=this.talisEquipList.selectedItem),this._isAuto=!1,""==p_l&&e.DecomposeEquipSwapPanel.open(p_g)},b_e.prototype.updateGodEquipBox=function(){Ccb(DecomposeModel,this)},b_e.prototype.updateEffPos=function(){if(this.isHideEff){var e=new b_s;this.eft_ronglu.scale(4,4),e.x=this.width-992>>1,e.y=this.height-820>>1,this.eft_ronglu.pos(e.x,e.y),this.eft_ronglu.interval=50}},b_e.prototype.updateItem=function(e,p_l){Gsd(e,p_l)},b_e.prototype.onTabSelect=function(e){if(-1!=e){switch(this.teBox.visible=!0,this.godBox.visible=!1,e){case 3:case 0:this.greenCheck.visible=!0,this.greenLab.visible=!0,this.checkBox.x=80,this.greenCheck.selected=!0,this.blueCheck.selected=!0,this.purpleCheck.selected=!0,this.orangeCheck.selected=!0,this.redCheck.selected=!0,this.reFillData();break;case 1:break;case 2:this.godBox.visible=!0,this.teBox.visible=!1,this.reFillData()}this.init(),this.equipBox.visible=0==e,this.talisEquipBox.visible=3==e,this.updateView()}},b_e.prototype.succAutoDec=function(){Qiw(this)},Object.defineProperty(b_e.prototype,"isHideEff",{get:function(){return GPlatform.isQQMini},enumerable:!0,configurable:!0}),b_e.prototype.decomposeSucc=function(){Qkl(this,Laya)},b_e.prototype.clearEft=function(e){this._curEftCount--,this._curEftCount<0&&(this._curEftCount=0),e&&(e.removeSelf(),e.destroy(!0),e=null)},b_e.prototype.resetCell=function(){-1!=this._lastType&&(this._curEftCount=0,this.playEft(this._lastType,!0))},b_e.prototype.eftPlayComplete=function(e,p_l){Gkl(e,p_l,this)},b_e.prototype.playEft=function(e,p_l){void 0===p_l&&(p_l=!1),this._lastType=e;var p_g=this.getSelectList(e)[0];if(p_g&&!(0<this._curEftCount)){var b_s=this.isHideEff;b_s&&this.clearTween();for(var d_u=this._curEftCount=0;d_u<p_g.length;++d_u){var b_e=p_g.cells[d_u],d_m=void 0;if(3==e)d_m=b_e.getChildByName("bg");else if(2==e){if(!(b_e=b_e.getChildByName("itembox")))return;d_m=b_e.bg}else d_m=b_e.bg;var d_w=b_e.iconSp||b_e.getChildByName("icon");if(p_l)d_w&&(d_w.alpha=1);else if(b_s)d_w&&Laya.Tween.to(d_w,{alpha:0},500);else if(""!=b_e.dataSource){this._curEftCount++;var f_t=new Laya.Clip;f_t.name="1",f_t.skin="res/ui/smelt/Clip_ronglian_eft.png",f_t.clipX=4,f_t.clipY=3,f_t.interval=80,f_t.blendMode="lighter",b_e.addChild(f_t),f_t.on(Laya.Event.COMPLETE,this,this.eftPlayComplete,[b_e,f_t]),f_t.on(Laya.Event.UNDISPLAY,this,this.eftPlayComplete,[b_e,f_t]),f_t.x=d_m.x+d_m.width/2-f_t.width/2,f_t.y=d_m.y+d_m.height/2-f_t.height/2,f_t.play(!1)}}p_l||!b_s?this._lastType=-1:(this.labelScalePlay(this.rewNumLab0,10),this.labelScalePlay(this.rewNumLab1,10))}},b_e.prototype.playMoveEft=function(e,p_l,p_g,b_s,d_u){var b_e=new Laya.Clip;b_e.skin="res/ui/state/Clip_lizi_eft.png",b_e.clipX=4,b_e.interval=100,b_e.blendMode="lighter",b_e.x=b_s+e.width*(p_g%4),b_e.y=d_u+e.height*Math.floor(p_g/4),p_l.addChild(b_e),Laya.Tween.to(b_e,{f_u:180,j_l:200},500,null,Laya.Handler.create(Laya.stage,this.eftPlayComplete,[e,b_e]),0,!1,!0),b_e.play(!1)},b_e.prototype.clearClip=function(e){var p_l;if(0==e)p_l=this.equipDecomposeList;else if(2==e)p_l=this.godList;else{if(3!=e)return;p_l=this.talisEquipList}for(var p_g=0;p_g<p_l.length;p_g++){var b_s=p_l.cells[p_g].getChildByName("1");b_s&&this.clearEft(b_s)}},b_e.prototype.clearTween=function(){Iqw(Laya,this)},b_e.prototype.onRongLuComp=function(){Skf(this,Laya)},b_e.prototype.getSelectList=function(e){var p_l,p_g;return 0==e?(p_l=this.equipDecomposeList,p_g=this.equipBox):2==e?(p_l=this.godList,p_g=this.godBox):3==e&&(p_l=this.talisEquipList,p_g=this.talisEquipBox),[p_l,p_g]},b_e.prototype.labelScalePlay=function(e,p_l){if(e)if(0!=p_l){var p_g=2-.2*p_l;e.scale(p_g,p_g),Laya.timer.once(30,this,this.labelScalePlay,[e,p_l-1],!1)}else e.scale(1,1)},b_e);function b_e(){var b_s=p_l.call(this)||this;b_s._effPlayerOpts=null,b_s.isClear=!1,b_s._clickTime=0,b_s._curEftCount=0,b_s._lastType=-1;var d_u=b_s.eft_ronglu.skin;Laya.loader.getRes(d_u)?Laya.loader.load(d_u,Laya.Handler.create(b_s,b_s.onLoadEffSkin)):b_s.updateEffPos(),b_s._isAuto=!1,b_s.on(Laya.Event.ADDED,b_s,b_s.onAdded),b_s.on(Laya.Event.REMOVED,b_s,b_s.onRemove),b_s._clipTab=new p_c(b_s.itemTab,!1),b_s.itemTab.selectedIndex=-1;var b_e=b_s.equipDecomposeList;return b_e.selectEnable=!0,b_e.itemRender=e.DecomposeItemBox,b_e.renderHandler=p_g.create(b_s,b_s.updateItem,null,!1),(b_e=b_s.talisEquipList).selectEnable=!0,b_e.renderHandler=p_g.create(b_s,b_s.updateTalisEquipItem,null,!1),(b_e=b_s.godList).selectEnable=!0,b_e.renderHandler=p_g.create(b_s,b_s.updateGodEquipItem,null,!1),(b_e=b_s.godRewardList).itemRender=e.ItemBox,b_e.renderHandler=p_g.create(b_s,b_s.updateGodEquipRewardItem,null,!1),b_s.init(),b_s.eft_ronglu.stop(),b_s.eft_ronglu.visible=!1,b_s}e.DecomposePanel=d_u}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.decompose.yijianronglianUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(e){Ewk(e,this,Laya)},b_s.prototype.onRemoved=function(e){Suj(e,this,Laya)},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"btn":e.DecomposePanel.open(0)}},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.DecomposeView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.hangup.offlineRewardUI,__extends(b_s,p_l),b_s.prototype.onAdd=function(e){LED.on(l_r.OFFLINE_UPDATE,this,this.updateData),LED.on(l_r.MONTHCARD_BUY_INFO,this,this.updateMonthCardDate),this.on(Laya.Event.CLICK,this,this.onClick),this.updateData(),OfflineModel.reqOnlineExpInfo(),RechargeModel.instance.getMonthCardVo(),this.updateMonthCardDate(),this.openVip.visible=GPlatform.isShowRecharge},b_s.prototype.updateData=function(){var e=OfflineModel.instance.offlineInfo,p_l=OfflineModel.instance.onlineInfo;if(p_l){var p_g=OfflineModel.instance.getOneselfCfg(),b_s=OfflineModel.instance.addCardTime();this.limteTimelabel.text=Utils.$(("("+j_x("1081_2307_1874")+j_x("867_531_1976")+"{1}"+j_x("1747_1702_2046")+j_x("2270_1879_1573")+j_x(2038)+")"),p_g.limit/60+b_s);var d_u=p_l.onlineTime;d_u=Math.min(d_u,60*p_g.limit),this.timeTxt.text=Utils.formatTimeStr2(d_u),this.expTxt.text=p_l.exp.toString(),this.copperTxt.text=p_l.copper.toString(),this.itemTxt.text=e.itemCount.toString(),this.updateBtnAd(),this.sureBtn.disabled=!OfflineModel.instance.canGain,this.sureBtn2.disabled=!OfflineModel.instance.canGain}},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"sureBtn":var p_g=void 0;OfflineModel.instance.offlineInfo.canGain?(OfflineModel.reqGetOfflineExp(0),p_g=!0):OfflineModel.instance.onlineInfo.canGain&&(OfflineModel.reqGetOnlineExp(0),p_g=!0),p_g&&b_s.close();break;case"closeBtn":b_s.close();break;case"openVip":e.MonthCardPanel.open();break;case"TitleProp":e.TitleTips.tpye=2,e.TitleTips.open();break;case"b_detail":e.HangTips.open()}},b_s.prototype.updateBtnAd=function(){var e=LgcM.ins.heroVo.id,p_l=LgcM.ins.getActorTypeByID(e),p_g=LgcM.ins.getActorStdInfoById(e,p_l).createTime,b_s=Math.floor(SyncTime.serverTime/1e3);this.updateBtnADUI1(),GPlatform.isQQMini&&1800<=b_s-p_g&&this.updateBtnADUI2()},b_s.prototype.updateMonthCardDate=function(){var e=RechargeModel.instance.cardInfos[CardType.weekcard],p_l=Config.recharge_monthcard[CardType.weekcard],p_g=RechargeModel.instance.cardInfos[CardType.lifeLongCard],b_s=Config.recharge_monthcard[CardType.lifeLongCard];p_g||e?(this.t_vip1.text=(p_g?b_s.expAddition/100:0)+(e?p_l.expAddition/100:0)+"%",this.t_vip2.text=(p_g?b_s.copperAddition/100:0)+(e?p_l.copperAddition/100:0)+"%",this.t_vip3.text=(p_g?b_s.copperAddition/100:0)+(e?p_l.copperAddition/100:0)+"%",this.t_vip1.align="center",this.t_vip2.align="center",this.t_vip3.align="center",this.t_novip1.visible=!1,this.t_novip2.visible=!1,this.t_novip3.visible=!1):(this.t_vip1.text=(b_s.expAddition+p_l.expAddition)/100+("%("+j_x("206_155_1331")+")"),this.t_vip2.text=(b_s.copperAddition+p_l.copperAddition)/100+("%("+j_x("206_155_1331")+")"),this.t_vip3.text=(b_s.copperAddition+p_l.copperAddition)/100+("%("+j_x("206_155_1331")+")"),this.t_vip1.align="center",this.t_vip2.align="center",this.t_vip3.align="center",this.t_novip1.visible=!0,this.t_novip2.visible=!0,this.t_novip3.visible=!0)},b_s.prototype.onRemove=function(e){Qjj(e,LED,l_r,this,Laya)},b_s.prototype.updateBtnADUI1=function(){Cqi(this)},b_s.prototype.updateBtnADUI2=function(){Gdb(this)},b_s.open=function(){Uqi(UIM,b_s)},b_s.prototype.updateAD=function(){console.log((j_x("821_1719")));var e=LgcM.ins.heroVo.id,p_l=LgcM.ins.getActorTypeByID(e),p_g=LgcM.ins.getActorStdInfoById(e,p_l).createTime;1800<=Math.floor(SyncTime.serverTime/1e3)-p_g?(Sdk.QQMini.onClose((function(e){if(console.log(e,e.isEnded),e.isEnded){console.log((j_x("2450_1917_821")+j_x(1719)));var p_l=void 0;OfflineModel.instance.offlineInfo.canGain?(OfflineModel.reqGetOfflineExp(1),p_l=!0):OfflineModel.instance.onlineInfo.canGain&&(OfflineModel.reqGetOnlineExp(1),p_l=!0),p_l&&b_s.close(),b_p.broadcastNotice((j_x("1174_2111_2235")+j_x("83_402_2142")))}else Config.global[3014],b_p.broadcastNotice((j_x("2166_2450_1917")+j_x("2162_821_1719")+j_x("2060_1919_1174")+j_x("2111_2235_83")))})),Sdk.QQMini.rewardedVideoAdShow(QQMiniPlatform.freeAd)):b_p.broadcastNotice((j_x("1787_1274")+"30"+j_x("2224_1394_1273")+j_x("814_821_1719")+j_x("1174_2111")))},b_s.close=function(){Euo(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdd),e.on(Laya.Event.REMOVED,e,e.onRemove),e.sureBtn2.on(Laya.Event.CLICK,e,e.updateAD),e}e.OfflineRewardPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.hangup.dh_checkinUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){var e=this.cityBox,p_l=this.comBoBox,p_g=this.comBoBoxt;OfflineModel.reqDhInfo(),p_l.selectHandler=Laya.Handler.create(this,this.onComBoBoxSelect,[this.comBoBox],!1),p_l.list.vScrollBarSkin="",p_l.list.scrollBar.elasticBackTime=500,p_l.list.scrollBar.elasticDistance=200,p_g.selectHandler=Laya.Handler.create(this,this.onComBoBoxSelect,[this.comBoBoxt],!1),p_g.list.vScrollBarSkin="",p_g.list.scrollBar.elasticBackTime=500,p_g.list.scrollBar.elasticDistance=200,this.sexsulBox.selectHandler=Laya.Handler.create(this,this.onComBoBoxSelect,[this.sexsulBox],!1),this.on(Laya.Event.CLICK,this,this.onClick),e.selectHandler=Laya.Handler.create(this,this.onComBoBoxSelect,[e],!1),e.list.vScrollBarSkin="",e.list.scrollBar.elasticBackTime=500,e.list.scrollBar.elasticDistance=200,e.labels=DhModel.instance.cityInit()},b_s.open=function(){Wjz(UIM,b_s)},b_s.prototype.onRemove=function(){Qor(this,Laya)},b_s.prototype.onComBoBoxSelect=function(e,p_l){e!=this.comBoBox&&e!=this.comBoBoxt&&e!=this.cityBox&&e!=this.sexsulBox||e.selectedLabel},b_s.prototype.onClick=function(e){var p_l=this.sexsulBox.selectedIndex,p_g=this.cityBox.selectedIndex+1,d_u=0,b_e=0;switch(this.comBoBox.selectedLabel&&(d_u=parseInt(this.comBoBox.selectedLabel.substring(0,2)+"00")),this.comBoBoxt.selectedLabel&&(b_e=parseInt(this.comBoBoxt.selectedLabel.substring(0,2)+"00")),e.target.name){case"backBtn":case"closeBtn":b_s.close();case"sureBtn":if(b_e<d_u)return void b_p.broadcastNotice((j_x("1796_1076_1702")+j_x("1623_155_2086")+j_x("1702_2460_1375")+j_x("558_396_2426")+j_x("1702_2460_1777")+j_x("1374_1787_517")+j_x(1191)+""));if(0<=p_l&&p_g&&d_u&&b_e){DhModel.instance.reqDhRegister(p_l,p_g,d_u,b_e),OfflineModel.reqDhInfo(),b_s.close();break}b_p.broadcastNotice((j_x("1777_1917_591")+j_x("281_1590")+""))}},b_s.close=function(){Ewf(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.DhCheckinPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.hangup.dh_fggtipUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){this.x=Stage.width-this.width-30+1e3,this.y=UIM.instance.getMainLetUI().getTaskBottonY()-this.height+1e3;var e=Stage.width-this.width-30;Laya.Tween.to(this,{f_u:e,j_l:UIM.instance.getMainLetUI().getTaskBottonY()-this.height},100),this.on(Laya.Event.CLICK,this,this.onClick),this.syTime=SyncTime.serverTime/1e3+30,OfflineModel.reqDhInfo();var p_l=DhModel.instance.dhinfo;this.namedec.text=p_l&&p_l.tinfo&&p_l.tinfo.name?p_l.tinfo.name:"",Laya.timer.loop(1e3,this,this.updateData)},b_s.prototype.updateData=function(){var e=SyncTime.serverTime/1e3;this.syTime-e<=0&&(Laya.timer.clear(this,this.updateData),b_s.close()),this.cdTime.text=Utils.formatTimeStr(this.syTime-e)},b_s.open=function(){Wwd(UIM,b_s)},b_s.prototype.sureToOpen=function(){var e=Config.global[GlobalDefine.dh_mora_again].i_info;if(b_p.checkCoin(1,e)){var p_l=DhModel.instance.dhPid;DhModel.instance.dhinfo,p_l&&DhModel.instance.reqDhMoraReply(1,p_l,1)}else b_p.broadcastNotice(Utils.$((j_x("1263_869_2462")+j_x(1779)+","+j_x("1288_774")+"{1}"+j_x("1263_869_1163")+j_x("192_1953_242")+j_x("1737_936")+"!"),e-b_p.getCoin(1)))},b_s.prototype.onClick=function(e){var p_l=e.target,p_g=DhModel.instance.dhPid,d_u=DhModel.instance.dhinfo;switch(p_l.name){case"closeBtn":p_g&&(d_u&&d_u.moraRound<1?DhModel.instance.reqDhMoraReply(0,p_g,0):DhModel.instance.reqDhMoraReply(0,p_g,1)),Laya.timer.clear(this,this.updateData),b_s.close();break;case"takeinBtn":d_u&&d_u.moraRound<1?DhModel.instance.reqDhMoraReply(1,p_g,0):j_y.confirm(Utils.$((j_x("1176_1409_572")+j_x(2218)+"{1}"+j_x("1263_869_420")+j_x("2360_1068_1777")+j_x("1426_155_2086")+j_x("2277_1509")+""),Config.global[GlobalDefine.dh_mora_again].i_info),this.sureToOpen,!0),Laya.timer.clear(this,this.updateData),b_s.close()}},b_s.prototype.onRemoved=function(){Ycv(this,Laya)},b_s.close=function(){Kyj(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.syTime=0,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.mouseEnabled=!0,e.mouseThrough=!1,e}e.DhFggTipPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.hangup.dh_friendlistUI,__extends(d_u,p_l),d_u.prototype.onAdded=function(){Wur(this,p_g,Laya,LED,l_r)},d_u.prototype.onRemove=function(){Unw(this,Laya,LED,l_r)},d_u.close=function(){Mez(UIM,d_u)},d_u.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":d_u.close()}},d_u.open=function(){Uoh(UIM,d_u)},d_u.prototype.updateFriendItem=function(p_l,p_g){if(p_l){var b_s=p_l.dataSource,d_u=p_l.getChildByName("combatLab"),b_e=p_l.getChildByName("stateLvLab"),d_m=p_l.getChildByName("statusLab"),d_w=p_l.getChildByName("nameLab"),f_t=p_l.getChildByName("qinmiLab"),v_z=p_l.getChildByName("avatarImg"),d_h=p_l.getChildByName("lvLab"),r_t=p_l.getChildByName("dhBtn"),t_n=p_l.getChildByName("frame"),f_y=p_l.getChildByName("dhRed"),p_q=Config.state_state[b_s.stateLv];if(f_y.visible=!b_s.isDh,OfflineModel.instance.dhInfo.hasPartner&&(f_y.visible=!1),v_z=Resource.ResManager.Instance.getImg(Resource.ResManager.getHeadUrl(b_s.entryId,b_s.headIcon),v_z),b_s.fashionAvatar&&4==Config.fashion_fashion[b_s.fashionAvatar].type){t_n.visible=!0;var h_h=Config.fashion_fashion[b_s.fashionAvatar].avatar[0];h_h=Resource.ResUrl.getIconUrl(h_h),t_n=Resource.ResManager.Instance.getImg(h_h,t_n)}else t_n.visible=!1;d_u.text=b_s.combat.toString(),b_e.text=p_q.desc,d_w.text=b_s.name,d_h.text=Utils.$(("{1}"+j_x(2342)),b_s.lv),f_t.text=Utils.$((j_x("2283_194_1035")+" : {1}"),b_s.qinmi),d_m.text=e.FriendPanel.getStatusDesc(b_s.status,b_s.time),b_s.status!=ONLINE_STATUE_DEFINE.ONLINE?(v_z.gray=!0,d_m.color=e.FriendPanel.statusOfflineColor):(v_z.gray=!1,d_m.color=e.FriendPanel.statusOnlineColor),v_z.on(Laya.Event.CLICK,p_l,this.onFriendClick),r_t.on(Laya.Event.CLICK,p_l,this.onFriendClick),r_t.visible=!b_s.isDh&&p_k.instance.checkSystemOpen(FuncDefine.dh)}},d_u.prototype.omUpdateList=function(){Cxv(FriendModel,this)},d_u.prototype.onFriendClick=function(p_l){switch(p_l.target.name){case"avatarImg":var p_g=new Laya.Point;(p_g=this.localToGlobal(p_g)).x+=this.width-550,p_g.y+=this.height/2,e.CheckFriend.open(this.dataSource.pid,this.dataSource.name,3,p_g);break;case"dhBtn":var b_s=OfflineModel.instance.dhFriendList||[];for(var d_u in b_s)if(b_s[d_u].base.pid==this.dataSource.pid&&1==b_s[d_u].isInvite)return void b_p.broadcastNotice((j_x("1068_1777_402")+j_x(2142)+","+j_x("15_1427_1653")+j_x("2221_1494_128")),BroadcastType.ERROR,Utils.Color.NAME_GREEN);OfflineModel.reqDhInvite(this.dataSource.pid)}},d_u);function d_u(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.DHFriendListPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.hangup.dh_halllistUI,__extends(d_u,p_l),d_u.prototype.onAdded=function(){var e=this.friendList;e.vScrollBarSkin="",e.scrollBar.elasticBackTime=200,e.scrollBar.elasticDistance=50,e.renderHandler=p_g.create(this,this.updateFriendItem,[],!1),this.on(Laya.UIEvent.CLICK,this,this.onMouseClick),LED.on(l_r.DH_INFO_UPDATE,this,this.omUpdateList),DhModel.instance.reqcDhList()},d_u.open=function(){Yxh(UIM,d_u)},d_u.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":d_u.close();break;case"exchangeBtn":DhModel.instance.reqcDhList()}},d_u.close=function(){Yat(UIM,d_u)},d_u.prototype.onRemove=function(){Onz(this,Laya,LED,l_r)},d_u.prototype.updateFriendItem=function(p_l,p_g){if(p_l&&p_l.dataSource){var b_s=p_l.dataSource,d_u=p_l.getChildByName("genderLab"),b_e=p_l.getChildByName("cityLab"),d_m=p_l.getChildByName("nameLab"),d_w=p_l.getChildByName("onlineornotLab"),f_t=p_l.getChildByName("activetimeLab"),v_z=p_l.getChildByName("dhBtn"),d_h=p_l.getChildByName("frame"),r_t=p_l.getChildByName("avatarImg");if(r_t=Resource.ResManager.Instance.getImg(Resource.ResManager.getHeadUrl(b_s.entryId,b_s.headIcon),r_t),b_s.headIcon&&Config.fashion_fashion[b_s.headIcon]&&4==Config.fashion_fashion[b_s.headIcon].type){d_h.visible=!0;var t_n=Config.fashion_fashion[b_s.headIcon].avatar[0];t_n=Resource.ResUrl.getIconUrl(t_n),d_h=Resource.ResManager.Instance.getImg(t_n,d_h)}else d_h.visible=!1;d_m.text=(j_x("1511_1794")+":")+b_s.name,f_t.text=(j_x("1796_1076_1702")+j_x(1623)+":"+j_x("206_1948_898")),d_w.text=1==b_s.online?(""+j_x("2035_360")+""):(""+j_x("1016_360")+""),d_w.color=b_s.online?e.FriendPanel.statusOnlineColor:e.FriendPanel.statusOfflineColor,d_u.text=0==b_s.sex?(j_x("233_226")+":"+j_x(1901)):(j_x("233_226")+":"+j_x(1324));var f_y=Config.city[b_s.city];if(b_e.text=b_s.city&&f_y?(j_x("582_2035_21")+j_x(1468)+":")+f_y.name:(j_x("582_2035_21")+j_x(1468)+":"+j_x("206_1948_898")),b_s.beginTime&&b_s.endTime){var p_q=b_s.beginTime.toString(),h_h=b_s.endTime.toString();f_t.text=Utils.$((j_x("1796_1076_1702")+j_x(1623)+":{1}:{2}-{3}:{4}"),p_q.substring(0,1),p_q.substring(1,3),h_h.substring(0,1),h_h.substring(1,3))}b_s.online!=ONLINE_STATUE_DEFINE.ONLINE?r_t.gray=!0:r_t.gray=!1;var n_j=FriendModel.instance._friendList||[];for(var j_l in v_z.label=(j_x("1336_223_257")+j_x(1738)),n_j)n_j[j_l].pid==b_s.pid&&(v_z.label=(j_x("1068_1777_790")+j_x(2249)));v_z.disabled=!1,r_t.on(Laya.Event.CLICK,p_l,this.onFriendClick),v_z.on(Laya.Event.CLICK,p_l,this.onFriendClick),v_z.visible=p_k.instance.checkSystemOpen(FuncDefine.dh)}},d_u.prototype.omUpdateList=function(){var e=DhModel.instance.setDhListInfo(),p_l=DhModel.instance.dhinfo;p_l&&e.splice(0,0,p_l.sinfo),this.friendList.array=e},d_u.prototype.onFriendClick=function(p_l){switch(p_l.target.name){case"avatarImg":var p_g=new Laya.Point;(p_g=this.localToGlobal(p_g)).x+=this.width-550,p_g.y+=this.height/2,e.CheckFriend.open(this.dataSource.pid,this.dataSource.name,3,p_g,[CheckBtnType.RoleInfo,CheckBtnType.PrivateChat]);break;case"dhBtn":var b_s=DhModel.instance.dhinfo;if(this.dataSource.pid===b_s.sinfo.pid)return void b_p.broadcastNotice((j_x("1176_2462_1919")+j_x("1068_1777_1176")+j_x("2082_364")+""+j_x("1777_1068_1777")+j_x("1694_1557_855")+j_x(386)+"!"),BroadcastType.ERROR,Utils.Color.NAME_GREEN);if(1!=this.dataSource.online)return void b_p.broadcastNotice((j_x("1327_711_1068")+j_x("1777_2046_855")+j_x("386_2462_2035")+j_x(360)+". "+j_x("1777_606_1865")+j_x("1953_1739")),BroadcastType.ERROR,Utils.Color.NAME_RED);var d_u=OfflineModel.instance.dhFriendList||[];for(var b_e in d_u)if(d_u[b_e].base.pid==this.dataSource.pid&&1==d_u[b_e].isInvite)return void b_p.broadcastNotice((j_x("1068_1777_402")+j_x(2142)+","+j_x("15_1427_1653")+j_x("2221_1494_128")),BroadcastType.ERROR,Utils.Color.NAME_GREEN);var d_m=FriendModel.instance._friendList||[];for(var b_e in d_m)if(d_m[b_e].pid==this.dataSource.pid)return OfflineModel.reqDhInvite(this.dataSource.pid),b_p.broadcastNotice((j_x("1300_571_1802")+j_x("1068_1777")+","+j_x("1777_15_1427")+j_x("1653_2221_495")+j_x(398)),BroadcastType.ERROR,Utils.Color.NAME_GREEN),void n_d.instance.reqChatPrivate(d_m[b_e].pid,(j_x("352_506_2035")+j_x("1068_1777_1176")+j_x("33_562_790")+j_x(2249)+","+j_x("669_2068_790")+j_x("2249_2178_151")+j_x("420_2360_352")+j_x("2046_1068_1777")+j_x(976)+"!"),null,0,d_m[b_e].entryId,d_m[b_e].headIcon,0,b_p.config.mergSerId,d_m[b_e].name);this.getChildByName("dhBtn").disabled=!0,FriendModel.instance.reqAddFriend(this.dataSource.pid),b_p.broadcastNotice((j_x("1300_571_1802")+j_x("1068_1777")+","+j_x("1777_15_1427")+j_x("1653_2221_495")+j_x(398)+"!"),BroadcastType.ERROR,Utils.Color.NAME_GREEN)}},d_u);function d_u(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.DhHallListPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.hangup.dh_panelUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Mxd(this,Laya,LED,l_r)},b_s.prototype.updateView=function(){Laya.timer.clear(this,this.updateTime);var e=OfflineModel.instance.dhInfo;if(this.dh_checkinBtn.label=0<e.scity?(j_x("790_2249_1375")+j_x(12)):(j_x("1723_765_790")+j_x("2249_281_1590")),this.dhinfoBox.visible=!(0<e.scity),e.hasPartner){this.rp_dhtask.visible=DhModel.instance.onDhTaskRed(),this.i_shadow.visible=!1,this.t_not.visible=!1,this.t_left.visible=this.t_right.visible=this.t_name.visible=!0,this.t_name.text=e.partnerName,this.b_invite.visible=this.rp_invite.visible=!1;var p_l=SyncTime.serverTime/1e3;this.t_time.text=Utils.formatTimeStr(e.dhEndTime-p_l),this.onEffect(!0),Laya.timer.loop(1e3,this,this.updateTime)}else this.rp_dhtask.visible=!1,this.i_shadow.visible=!0,this.onEffect(!1),this.t_not.visible=!0,this.t_left.visible=this.t_right.visible=this.t_name.visible=!1,this.b_invite.visible=!0,this.rp_invite.visible=OfflineModel.instance.hasInvite,p_l=SyncTime.serverTime/1e3,this.t_time.text="00:00";this.t_num.text=(e.leftCount||0)+"/"+Config.global[GlobalDefine.dh_times].i_info,this.t_up_Lab.text=(j_x("1327_711_396")+j_x("2043_1785_1916")+":")+100*e.rewardRate+"%"},b_s.prototype.onRemoved=function(){Ali(this,Laya,LED,l_r)},b_s.prototype.onClick=function(p_l){var p_g=p_l.target,b_s=OfflineModel.instance.dhInfo;switch(p_g.name){case"b_broad":return OfflineModel.instance.dhInfo.hasPartner?void b_p.broadcastNotice((j_x("1749_1300_2035")+j_x("790_2249_283")+""+j_x("1777_647_2175")+j_x("2249_266")+"")):OfflineModel.instance.dhInfo.leftCount?(n_d.instance.reqChat(ChannelTypeDefine.WORLD,(j_x("94_1068_159")+j_x("425_189_1738")+j_x("1996_1747_189")+j_x("790_2249_33")+j_x(784)+"{1:dh}"),[b_p.playerId.toString()]),void b_p.broadcastNotice((j_x("1300_571_1802")+j_x("1514_1998_1992")+j_x(1719)),BroadcastType.ERROR,Utils.Color.NAME_GREEN)):void b_p.broadcastNotice((j_x("790_2249_1702")+j_x("2460_2462_1779")+""+j_x("1777_1067_189")+j_x("421_1254_1953")+j_x(242)));case"b_stop":return void b_p.confirm((j_x("820_2102_790")+j_x("2249_1409_2462")+j_x("1953_531_1976")+j_x("2270_1879_1241")+j_x("144_223_402")+"\n"+j_x("2085_4_396")+j_x("2426_790_2249")+j_x(2228)+"?"),OfflineModel.reqDhStop);case"b_invite":return void e.DhRequestPanel.open();case"b_qinmi":return void(b_s.hasPartner?r_t.open():j_l.open());case"b_exp":return void(b_s.hasPartner?f_t.open():j_l.open());case"b_copper":return void(b_s.hasPartner?b_e.open():j_l.open());case"b_citta":return void(b_s.hasPartner?p_q.open():j_l.open());case"dh_checkinBtn":(j_x("1723_765_790")+j_x("2249_281_1590"))==this.dh_checkinBtn.label?e.DhCheckinPanel.open():e.DhHallListPanel.open();break;case"dh_taskBtn":if(b_s.hasPartner)return void e.DhTaskPanel.open();b_p.broadcastNotice((j_x("1176_1768_1971")+j_x("1896_790_2249")+j_x("2431_2388")+""))}},b_s.prototype.onEffect=function(e){1==e?this._EffectVo.playEffect(this.icon,"practice",0,!0,151,!0,0):this._EffectVo&&this._EffectVo.dispose()},b_s.prototype.updateTime=function(){Qwf(OfflineModel,SyncTime,this,Utils)},b_s);function b_s(){var e=p_l.call(this)||this;return e._EffectVo=Resource.ResManager.Instance.freePanelEffectVo,e.on(Laya.Event.ADDED,e,e.onAdded),e}e.DhPagePanel=p_g;var d_u,b_e=(d_u=ui.window.hangup.dh_tipUI,__extends(d_m,d_u),d_m.open=function(){Mnp(UIM,d_m)},d_m.prototype.onAdded=function(){this.off(Laya.Event.ADDED,this,this.onAdded),this.on(Laya.Event.REMOVED,this,this.onRemoved),this.on(Laya.Event.CLICK,this,this.onClick);var e=OfflineModel.instance.dhInfo;if(e.hasPartner){var p_l=0,p_g=Config.double_hangup_intimacy;for(var b_s in p_g){var d_u=p_g[b_s];if(!(e.qinmi>=d_u.max))break;p_l=d_u.id}this.curTxt.text="+"+(0<p_l?p_g[p_l].addiPct/2:0)+"%",this.nextTxt.text="+"+(p_g[p_l+1]?p_g[p_l+1].addiPct/2:p_g[p_l].addiPct/2)+"%",this.descTxt.text=p_g[p_l+1]?p_g[p_l+1].max.toString():p_g[p_l].max.toString()}else d_m.close()},d_m.prototype.onRemoved=function(){Cgg(this,Laya)},d_m.close=function(){Asv(UIM,d_m)},d_m.prototype.onClick=function(){Kka(d_m)},d_m);function d_m(){var e=d_u.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e}e.DhCopperTip=b_e;var d_w,f_t=(d_w=ui.window.hangup.dh_tip1UI,__extends(v_z,d_w),v_z.open=function(){Gvp(UIM,v_z)},v_z.prototype.onAdded=function(){this.off(Laya.Event.ADDED,this,this.onAdded),this.on(Laya.Event.REMOVED,this,this.onRemoved),this.on(Laya.Event.CLICK,this,this.onClick);var e=OfflineModel.instance.dhInfo;if(e.hasPartner){var p_l=Config.double_hangup_intimacy,p_g=0;for(var b_s in p_l){var d_u=p_l[b_s];if(!(e.qinmi>=d_u.max))break;p_g=d_u.id}this.curTxt.text="+"+(0<p_g?p_l[p_g].addiPct:0)+"%",this.nextTxt.text="+"+(p_l[p_g+1]?p_l[p_g+1].addiPct:p_l[p_g].addiPct)+"%",this.descTxt.text=p_l[p_g+1]?p_l[p_g+1].max.toString():p_l[p_g].max.toString()}else v_z.close()},v_z.close=function(){Osg(UIM,v_z)},v_z.prototype.onRemoved=function(){Oyp(this,Laya)},v_z.prototype.onClick=function(){Qwh(v_z)},v_z);function v_z(){var e=d_w.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e}e.DhExpTip=f_t;var d_h,r_t=(d_h=ui.window.hangup.dh_tip2UI,__extends(t_n,d_h),t_n.open=function(){Wwo(UIM,t_n)},t_n.prototype.onAdded=function(){this.off(Laya.Event.ADDED,this,this.onAdded),this.on(Laya.Event.REMOVED,this,this.onRemoved),this.on(Laya.Event.CLICK,this,this.onClick);var e=OfflineModel.instance.dhInfo;if(e.hasPartner){var p_l=Config.double_hangup_intimacy,p_g=0;for(var b_s in p_l){var d_u=p_l[b_s];if(!(e.qinmi>=d_u.max))break;p_g=d_u.id}this.curTxt.text="+"+(0<p_g?p_l[p_g].qinmi:0),this.nextTxt.text="+"+(p_l[p_g+1]?p_l[p_g+1].qinmi:p_l[p_g].qinmi),this.descTxt.text=p_l[p_g+1]?p_l[p_g+1].max.toString():p_l[p_g].max.toString()}else f_t.close()},t_n.close=function(){Wpp(UIM,t_n)},t_n.prototype.onRemoved=function(){Cpq(this,Laya)},t_n.prototype.onClick=function(){Kov(t_n)},t_n);function t_n(){var e=d_h.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e}e.DhQinmiTip=r_t;var f_y,p_q=(f_y=ui.window.hangup.dh_tip4UI,__extends(h_h,f_y),h_h.open=function(){Ect(UIM,h_h)},h_h.close=function(){Sbj(UIM,h_h)},h_h.prototype.onRemoved=function(){Ikd(this,Laya)},h_h.prototype.onAdded=function(){this.off(Laya.Event.ADDED,this,this.onAdded),this.on(Laya.Event.REMOVED,this,this.onRemoved),this.on(Laya.Event.CLICK,this,this.onClick);var e=OfflineModel.instance.dhInfo;if(e.hasPartner){var p_l=Config.double_hangup_intimacy,p_g=0;for(var b_s in p_l){var d_u=p_l[b_s];if(!(e.qinmi>=d_u.max))break;p_g=d_u.id}this.curTxt.text="+"+(0<p_g?p_l[p_g].mentalExp:0),this.nextTxt.text="+"+(p_l[p_g+1]?p_l[p_g+1].mentalExp:p_l[p_g].mentalExp),this.descTxt.text=p_l[p_g+1]?p_l[p_g+1].max.toString():p_l[p_g].max.toString()}else f_t.close()},h_h.prototype.onClick=function(){Cqe(h_h)},h_h);function h_h(){var e=f_y.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e}e.DhcittaTip=p_q;var n_j,j_l=(n_j=ui.window.hangup.dh_tip3UI,__extends(l_m,n_j),l_m.open=function(){Sia(UIM,l_m)},l_m.prototype.onRemoved=function(){Qqc(this,Laya)},l_m.prototype.onAdded=function(){Ati(this,Laya,OfflineModel)},l_m.close=function(){Ysn(UIM,l_m)},l_m.prototype.onClick=function(){Wil(l_m)},l_m);function l_m(){var e=n_j.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e}e.DhNullTip=j_l}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.hangup.dh_requestUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Ygg(this,Laya,LED,l_r,OfflineModel)},b_s.close=function(){Ehl(UIM,b_s)},b_s.prototype.onRemoved=function(){this.on(Laya.Event.ADDED,this,this.onAdded),this.off(Laya.Event.REMOVED,this,this.onRemoved),this.off(Laya.Event.CLICK,this,this.onClick),LED.off(l_r.DOUBLEHANG_INVITELIST_UPDATE,this,this.onInviteListUpdate),this.list.renderHandler&&this.list.renderHandler.recover(),this.list.renderHandler=null},b_s.prototype.sortInviteList=function(e,p_l){return e.time!=p_l.time?p_l.time-e.time:e.qinmi!=p_l.qinmi?p_l.qinmi-e.qinmi:e.base.combat!=p_l.base.combat?p_l.base.combat-e.base.combat:1e3*e.base.stateLv+e.base.lv!=1e3*p_l.base.stateLv+p_l.base.lv?1e3*p_l.base.stateLv+p_l.base.lv-1e3*e.base.stateLv+e.base.lv:e.base.pid-p_l.base.pid},b_s.prototype.onClick=function(e){var p_l=e.target;switch(p_l.name){case"closeBtn":b_s.close();break;case"b_cell":if(p_l.dataSource&&p_l.dataSource.base){var p_g=p_l.dataSource.base;OfflineModel.reqDhAgree(p_g.pid,1),n_d.instance.reqChatPrivate(p_g.pid,(j_x("352_1300_1241")+j_x("495_398_743")+j_x("1176_2046_790")+j_x("2249_1068_1777")+""+j_x("669_242_183")+j_x("352_1737_2165")+j_x("33_562_790")+j_x("2249_30_595")+j_x(976)+"!"),null,0,p_g.entryId,p_g.headIcon,p_g.vip,p_g.sid,p_g.name)}}},b_s.prototype.onInviteListUpdate=function(){Cgs(OfflineModel,this)},b_s.open=function(){Gqd(UIM,b_s)},b_s.prototype.onItemRender=function(e,p_l){e&&e.update()},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.list.itemRender=l_u,e.list.vScrollBarSkin="",e.list.scrollBar.elasticBackTime=200,e.list.scrollBar.elasticDistance=50,e}e.DhRequestPanel=p_g}(UI=UI||{});var l_u=function(e){function p_l(){return e.call(this)||this}return __extends(p_l,e),p_l.prototype.update=function(){var e=this.dataSource;this.headSprite=Resource.ResManager.Instance.getImg(Resource.ResManager.getHeadUrl(e.base.entryId,e.base.headIcon),this.headSprite),this.t_name.text=e.base.name,this.t_lv.text=Config.state_state[e.base.stateLv].desc+""+e.base.lv+(j_x(2342)),this.t_power.text=(j_x(383)+"  "+j_x(767)+"")+e.base.combat,this.t_qinmi.text=(j_x("2283_194_1035")+"")+e.qinmi,this.btn.dataSource={base:e.base}},p_l}(ui.window.hangup.dh_requestItemUI);!function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.hangup.dh_task_answerUI,__extends(d_u,p_l),d_u.prototype.onAdded=function(){this.toPicBtn.disabled=!1,this.list.renderHandler=p_g.create(this,this.onRender,[],!1);var e=DhModel.instance.dhinfo;this.tasks=DhModel.instance.setTaskRanDom(),e&&e.aid&&e.aid.length<3&&e.aid.length&&this.onUpdateList(),this.onUpdateList(),this.on(Laya.UIEvent.CLICK,this,this.onMouseClick),LED.on(l_r.DOUBLEHANG_INFO_UPDATE,this,this.onUpdateList)},d_u.prototype.onUpdateList=function(e){switch(void 0===e&&(e=0),this.tasks.length){case 3:this.questionNum.text=(j_x("573_1737_2332"));break;case 2:this.questionNum.text=(j_x("573_158_2332"));break;case 1:this.questionNum.text=(j_x("573_1470_2332"))}var p_l=DhModel.instance.setTaskRanDom();p_l&&null!=p_l&&0<p_l.length&&(this.tittleName.text=p_l[0].topic,this.list.array=p_l[0].answer)},d_u.prototype.onRemove=function(){Cjp(this,Laya,LED,l_r)},d_u.prototype.onClick=function(e,p_l){switch(void 0===e&&(e=0),p_l.target.name){case"sexChb":this.state=e,this.list.refresh()}},d_u.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":d_u.close();break;case"toPicBtn":if(-1==this.state){b_p.broadcastNotice((j_x("206_93_740")+j_x("389_2332")+""));break}switch(this.tasks.length){case 3:DhModel.instance.reqcDhAnswer(1,this.state+1);break;case 2:DhModel.instance.reqcDhAnswer(2,this.state+1);break;case 1:DhModel.instance.reqcDhAnswer(3,this.state+1)}this.tasks.length&&(this.tasks.length-=1);var p_l=this.tasks.length;if(this.tasks&&null!=this.tasks&&0<p_l){this.state=-1;break}b_p.broadcastNotice((j_x("740_2332_1917")+j_x(432))),OfflineModel.reqDhInfo(),d_u.close()}},d_u.open=function(){Spo(UIM,d_u)},d_u.prototype.onRender=function(e,p_l){var p_g=e.dataSource;if(p_g||null!=p_g){var b_s=e.getChildByName("sexChb");e.getChildByName("sexLab").text=p_g,b_s.selected=p_l==this.state,b_s.on(Laya.Event.CLICK,this,this.onClick,[p_l])}},d_u.close=function(){Opv(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e.tasks=[],e.state=-1,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.DhTaskAnswerPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.hangup.dh_task_fggUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){this.on(Laya.UIEvent.CLICK,this,this.onMouseClick),LED.on(l_r.DH_MORA_INFO,this,this.onDhtask),LED.on(l_r.DH_MORACDTIME_UPDATE,this,this.onUpdateInfo),LED.on(l_r.DH_MORAAGREE_UPDATE,this,this.onMoraAgree);var e=OfflineModel.instance.dhInfo;this.p1name.text=this.heroVo.name.toString(),this.dhstop.visible=!1,this.onMoraAgree(),e&&(this.p1head.index=e.ssex,this.p2name.text=e.partnerName,this.P2head.index=e.tsex),this.onFggButton(!1)},Object.defineProperty(b_s.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),b_s.prototype.onRemove=function(){Aqt(this,Laya,LED,l_r,e)},b_s.prototype.onUpdateCd=function(){var e=SyncTime.serverTime/1e3;this.cdTime.text=Utils.formatTimeStr(this.syTime-e),this.syTime-e<=0&&(0==this.taskState&&this.onPunch(Math.ceil(3*Math.random())),Laya.timer.clear(this,this.onUpdateCd),this.cdTime.text="00:00",this.ani1.stop(),Laya.timer.once(5e3,this,this.onDhStop))},b_s.prototype.onUpdateInfo=function(){Kfg(this,Laya,SyncTime)},b_s.prototype.onAniStop=function(){this.ani1.stop();var e=DhModel.instance.dhmora,p_l=e.res1[e.idx-1],p_g=e.res2[e.idx-1];if(b_p.playerId==e.pid2&&(p_l=e.res2[e.idx-1],p_g=e.res1[e.idx-1]),e&&null!=e){var b_s=DhModel.instance.onSuccess(p_l,p_g);if(b_s)switch(b_s){case 1:this.win.visible=!0;break;case 2:this.fail.visible=!0;break;case 3:this.winwin.visible=!0}switch(p_l){case 1:this.leftYeah.visible=!0;break;case 2:this.leftStone.visible=!0;break;case 3:this.leftCover.visible=!0}switch(p_g){case 1:this.rightYeah.visible=!0;break;case 2:this.rightStone.visible=!0;break;case 3:this.rightCover.visible=!0}}},b_s.prototype.onDhtask=function(){var e=DhModel.instance.onSuccessTime(),p_l=DhModel.instance.dhmora;this.p1mark.index=e[0]+e[1],this.p2mark.index=e[2]+e[3],Laya.timer.clear(this,this.onDhStop),Laya.timer.clear(this,this.onUpdateCd),this.cdTime.text="00:00",this.ani1.stop(),this.resultVis(),this.onAniStop(),p_l&&null!=p_l&&3<=p_l.idx?Laya.timer.once(5e3,this,this.onDhStop):(p_l||p_l.idx||(this.p1mark.index=0,this.p2mark.index=0),Laya.timer.once(3e3,this,this.onUpdateInfo))},b_s.prototype.onPunch=function(e){var p_l=DhModel.instance.dhmora;p_l&&p_l.idx<3?(this.taskState=!0,DhModel.instance.reqDhMora(p_l.idx+1,e)):(this.taskState=!0,DhModel.instance.reqDhMora(1,e))},b_s.prototype.resultVis=function(){Urr(this)},b_s.prototype.onFggButton=function(e){Ewt(e,this)},b_s.prototype.onDhStop=function(){Wkg(this)},b_s.open=function(){UIM.open(b_s,["repair.atlas","guildKrieg.atlas"],null,!1);var e=DhModel.instance.dhmora;e&&null!=e&&null!=e&&e.idx&&(e.idx=0)},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"Button_yeah":this.onPunch(1),this.onFggButton(!0);break;case"Button_stone":this.onPunch(2),this.onFggButton(!0);break;case"Button_cover":this.onPunch(3),this.onFggButton(!0)}},b_s.prototype.onMoraAgree=function(){Wfr(this)},b_s.close=function(){Cda(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.syTime=0,e.taskState=!1,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.DhTaskFggPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.hangup.dh_task_fggstarttipUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){},b_s.prototype.onRemove=function(){Ogy(Laya,this)},b_s.prototype.onUpdateCd=function(){var e=SyncTime.serverTime/1e3;this.syTime-e<=0&&(Laya.timer.clear(this,this.onUpdateCd),b_s.close(),b_p.broadcastNotice((j_x("2277_1509_155")+j_x(2086))),LED.event(l_r.DH_MORACDTIME_UPDATE)),this.cdTime.text=Utils.formatTimeStr(this.syTime-e)},b_s.open=function(){Wfe(UIM,b_s)},b_s.prototype.ontimeupdate=function(){Gqf(this,SyncTime,Laya)},b_s.close=function(){Imb(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.syTime=0,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.DhTaskFggStartPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.hangup.dh_task_fggstoptipUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Kdf(this,Laya)},b_s.prototype.onRemove=function(){Eli(this,Laya)},b_s.prototype.initView=function(){var e=DhModel.instance.dhinfo,p_l=DhModel.instance.onSuccessTime();this.winwin.text=p_l[1]?Utils.$((j_x("197_936_235")+j_x(2348)+":{1}"),p_l[1]/2):(j_x("197_936_235")+j_x(2348)+":0");var p_g=DhModel.instance.onTitleVo();this.tittle.text=p_g&&e&&e.moraWin?Utils.$((j_x("1327_711_2101")+j_x(1274)+":{1}"),p_g.name):(j_x("1327_711_2101")+j_x(1274)+":"+j_x(814)),this.tittleBar.value=p_g&&e&&e.moraWin?e.moraWin/p_g.condition:0,this.win.text=Utils.$((j_x("1045_1516_235")+j_x(2348)+":{1}"),p_l[0]),this.fail.text=Utils.$((j_x("1011_1061_235")+j_x(2348)+":{1}"),p_l[2])},b_s.prototype.sureToOpen=function(){var e=Config.global[GlobalDefine.dh_mora_again].i_info;b_p.checkCoin(1,e)?DhModel.instance.reqDhMoraAgain():b_p.broadcastNotice(Utils.$((j_x("1263_869_2462")+j_x(1779)+","+j_x("1288_774")+"{1}"+j_x("1263_869_1163")+j_x("192_1953_242")+j_x("1737_936")+"!"),e-b_p.getCoin(1)))},b_s.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":OfflineModel.reqDhInfo(),b_s.close(),OfflineModel.reqDhInfo();break;case"affireBtn":OfflineModel.reqDhInfo(),b_s.close(),e.DhTaskFggPanel.close();break;case"recurBtn":j_y.confirm(Utils.$((j_x("1176_1409_572")+j_x(2218)+"{1}"+j_x("1263_869_1374")+j_x("242_1737_936")+""),Config.global[GlobalDefine.dh_mora_again].i_info),this.sureToOpen,!0)}},b_s.open=function(){Qaa(UIM,b_s)},b_s.close=function(){Eak(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.DhTaskFggStopPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.hangup.dh_taskUI,__extends(d_u,p_l),d_u.prototype.onAdded=function(){Oks(this,p_g,Laya,LED,l_r)},d_u.prototype.onUpdateInfo=function(){var p_l=this.list;p_l.array=DhModel.instance.dhtaskInit(),2<p_l.array.length&&(p_l.vScrollBarSkin="",p_l.scrollBar.elasticBackTime=200,p_l.scrollBar.elasticDistance=50);var p_g=DhModel.instance.dhinfo;if(p_g.tinfo){this.nameLab.text=p_g.tinfo.name?p_g.tinfo.name:"",this.sexLab.text=p_g.tinfo.sex?(j_x("233_226")+":"+j_x(1324)):(j_x("233_226")+":"+j_x(1901)),this.onlineLab.text=p_g.tinfo.online?(""+j_x("2035_360")+""):(""+j_x("1016_360")+""),this.frame.visible=!1,this.p1head.skin=Resource.ResManager.getHeadUrl(p_g.tinfo.entryId,p_g.tinfo.headIcon),this.onlineLab.color=p_g.tinfo.online?e.FriendPanel.statusOnlineColor:e.FriendPanel.statusOfflineColor;var b_s=Config.city[p_g.tinfo.city];if(this.cityLab.text=b_s?Utils.$((j_x("21_1468")+":{1}"),b_s.name):(j_x("21_1468")+":"),p_g.tinfo.beginTime&&p_g.tinfo.endTime){var d_u=p_g.tinfo.beginTime.toString(),b_e=p_g.tinfo.endTime.toString();this.activetimeLab.text=Utils.$((j_x("1796_1076_1702")+j_x(1623)+":{1}:{2}-{3}:{4}"),d_u.substring(0,1),d_u.substring(1,3),b_e.substring(0,1),b_e.substring(1,3))}}},d_u.prototype.onRemove=function(){Qco(LED,l_r,this)},d_u.prototype.onClick=function(p_l){var p_g=p_l.target,b_s=OfflineModel.instance.dhInfo;switch(p_g.name){case"closeBtn":case"backBtn":d_u.close();break;case"chatBtn":e.ChatPrivatePanel.open(b_s.tpid);break;case"giveFriend":var b_e=FriendModel.instance.getFriendData(b_s.tpid),d_m={pid:b_e.pid,entryId:b_e.entryId,name:b_e.name,headIcon:b_e.headIcon,qinmi:b_e.qinmi,status:b_e.status,todayAddQinmi:b_e.todayAddQinmi,lastAddQinmiTime:b_e.lastAddQinmiTime,id:0,num:0};e.giveFriendRosePanel.open(d_m);break;case"closeBtn2":DhModel.instance.reqDhMoraAgain()}},d_u.prototype.onRender=function(e){var p_l=e.dataSource;if(p_l||null==p_l){var p_g=e.getChildByName("taskImg"),b_s=e.getChildByName("redpoint"),d_u=e.getChildByName("takeinBtn");p_g.skin="res/ui/repair/"+p_l.tittleUrl;var b_e=DhModel.instance.dhinfo;d_u.disabled=!!b_e.qid,1==p_l.id&&(b_e&&b_e.qid&&b_e.qid.length&&(d_u.label=3<=b_e.qid.length?(j_x("33_2456_30")+j_x(595)):(j_x("420_2360_30")+j_x(595)),d_u.disabled=!!(b_e&&b_e.aid&&3<=b_e.aid.length)),0==d_u.disabled&&b_e&&b_e.aid&&3<=b_e.aid.length&&(d_u.disabled=!!(b_e&&3<=b_e.taskNum1))),2==p_l.id&&(b_e&&(d_u.disabled=!!b_e.moraRound),0==d_u.disabled&&(d_u.disabled=!!(b_e&&3<=b_e.taskNum2))),1==d_u.disabled&&(d_u.label=(j_x("1300_1917_402"))),b_s.visible=!d_u.disabled,d_u.on(Laya.Event.CLICK,e,this.onTakein)}},d_u.prototype.onTakein=function(p_l){var p_g=this.dataSource;if(p_g||null==p_g){var b_s=DhModel.instance.dhinfo;1==p_g.id&&b_s&&b_s.qid&&3<=b_s.qid.length&&b_s.qid.length?e.DhTaskAnswerPanel.open():(DhModel.instance.reqDhAcceptTask(p_g.id),OfflineModel.reqDhInfo())}},Object.defineProperty(d_u.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),d_u.open=function(){Wly(UIM,d_u)},d_u.close=function(){Uzu(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.DhTaskPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.discount_gift.BargainHelpUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Unx(LED,l_r,this,FriendBargainModel,Laya)},b_s.prototype.onRemoved=function(){Kys(LED,l_r,this)},b_s.prototype.updateView=function(){var e=FriendBargainModel.instance._friendList.sort(FriendBargainModel.sortFriend_intimacy);e.length<=0?(this.list.visible=!1,this.noFriendLab.visible=!0):(this.list.visible=!0,this.noFriendLab.visible=!1,this.list.array=e)},b_s.prototype.close=function(){Ugl(UIM,b_s)},b_s.prototype.onClick=function(e){Myc(e,b_p,j_x,Config,FriendBargainModel,this)},b_s.prototype.renderList=function(p_l,p_g){var b_s=p_l.dataSource,d_u=p_l.getChildByName("frame"),b_e=p_l.getChildByName("nameLab"),d_m=p_l.getChildByName("statusLab"),d_w=p_l.getChildByName("qinmiLab"),f_t=p_l.getChildByName("bargainnum_lab"),v_z=p_l.getChildByName("avatarImg"),d_h=p_l.getChildByName("sendbtn"),r_t=(Config.state_state[b_s.stateLv],Config.activity_friendDiscount_rewardDiscount[1]);if(v_z=Resource.ResManager.Instance.getImg(Resource.ResManager.getHeadUrl(b_s.entryId,b_s.headIcon),v_z),b_s.fashionAvatar&&4==Config.fashion_fashion[b_s.fashionAvatar].type){d_u.visible=!0;var t_n=Config.fashion_fashion[b_s.fashionAvatar].avatar[0];t_n=Resource.ResUrl.getIconUrl(t_n),d_u=Resource.ResManager.Instance.getImg(t_n,d_u)}else d_u.visible=!1;b_e.text=b_s.name,d_w.text=Utils.$((j_x("2283_194_1035")+" : {1}"),b_s.qinmi),f_t.text=Utils.$((j_x("511_603_235")+j_x(2348)+"{1}"),r_t.discountLimit-b_s.bargainNum),d_m.text=e.FriendPanel.getStatusDesc(b_s.status,b_s.time),b_s.status!=ONLINE_STATUE_DEFINE.ONLINE?(v_z.gray=!0,d_m.color=e.FriendPanel.statusOfflineColor):(v_z.gray=!1,d_m.color=e.FriendPanel.statusOnlineColor),d_h.disabled=b_s.bargainNum>=r_t.discountLimit,d_h.on(Laya.Event.CLICK,this,this.onClick,[b_s])},b_s.open=function(e){Qbh(e,UIM,b_s)},b_s.prototype.onClickClose=function(){Umm(this)},Object.defineProperty(b_s.prototype,"hero",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.BargainHelpView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.discount_gift.bargainUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){LED.on(l_r.UPDATE_BARGAIN_LIST,this,this.onUpdateListData),LED.on(l_r.REQUEST_ENEMY_INFO,this,this.onReturnFriendInfo);var e=Config.activity_friendDiscount_rewardDiscount[parseInt(this.dataSource.data)],p_l=LgcM.ins.heroVo;this.mynametext.text=Utils.$(("{1}"+j_x("2046_1808_767")+j_x("861_130")),p_l.name),this.minprice_lab.text=0<e.priceLimit?Utils.$(("{1}"+j_x("1263_869")),e.priceLimit):("0"+j_x("1263_869")),this.maxprice_lab.text=Utils.$(("{1}"+j_x("1263_869")),e.price),this.item.updateInfo(e.id),this.closebtn.on(Laya.Event.CLICK,this,this.onClickClose),this.list.array=[],this.list.renderHandler=Laya.Handler.create(this,this.onUpdateBargainContent,null,!1),1==this.dataSource.type?(this.invitebtn.visible=!0,this.helpbargainbtn.visible=!1,this.invitebtn.on(Laya.Event.CLICK,this,this.onInvite,[parseInt(this.dataSource.data)])):(this.invitebtn.visible=!1,this.helpbargainbtn.visible=!0,this.dataSource.pId&&this.helpbargainbtn.on(Laya.Event.CLICK,this,this.onClickHelpBargain,[parseInt(this.dataSource.data),2,this.dataSource.pId]),n_d.instance.reqViewRoleInfo(parseInt(this.dataSource.pId))),this.bargainsuccess_lab.visible=!1,this.invitebtn.label=(j_x("1068_1777_257")+j_x(1738));var p_g=FriendBargainModel.instance.discountRewardList;this.priceBox.visible=!!p_g[this.dataSource.type].gold,this.onUpdateListData()},b_s.prototype.onReturnFriendInfo=function(e){this.mynametext.text=Utils.$(("{1}"+j_x("2046_1808_767")+j_x("861_130")),e.base.name),FriendBargainModel.instance.reqFriendDiscountinfo(e.base.pid)},b_s.prototype.onClickClose=function(){Smr(this)},b_s.prototype.onInvite=function(p_l){(j_x("511_603_402")+j_x(2142))!=this.invitebtn.label?e.BargainHelpView.open(p_l):this.close()},b_s.prototype.onUpdateBargainContent=function(e,p_l){var p_g=e.dataSource,b_s=(FriendBargainModel.instance.discountRewardList,e.getChildByName("bargainresult_lab")),d_u=e.getChildByName("friendBargainPrice_lab");b_s.text=Utils.$(("{1}"+j_x("721_923_511")+j_x(743)),p_g.name),d_u.text=Utils.$(("{1}"+j_x("1263_869")),p_g.gold)},b_s.prototype.onClickHelpBargain=function(p_l,p_g,b_s){if((j_x("352_525_1624")+j_x(511))==this.helpbargainbtn.label)return UIM.instance.isOpenWin(e.ShopPanel)||e.ShopPanel.open(3),void this.close();var d_u=FriendBargainModel.instance.discountRewardList,b_e=Config.activity_friendDiscount_rewardDiscount[p_l];for(var d_m in d_u)if(d_u[d_m].id==p_l&&d_u[d_m].gold+b_e.priceLimit==b_e.price)return;b_p.broadcastNotice((j_x("511_603_402")+j_x(2142)),1,Config.color[1002].color),FriendBargainModel.instance.reqFriendDiscount(p_l,p_g,b_s)},b_s.prototype.onRemoved=function(){Cjy(LED,l_r,this)},b_s.prototype.onUpdateListData=function(){var e=Config.activity_friendDiscount_rewardDiscount[parseInt(this.dataSource.data)],p_l=FriendBargainModel.instance.discountRewardList,p_g=(FriendBargainModel.instance.DiscountInfoArr,[]);if(this.helpbargainbtn.label=(j_x("721_923_511")+j_x(603)),this.helpbargainbtn.disabled=!1,this.helpBargain_red.visible=!0,this.bargain_progressBar.value=0,this.percent_lab.text="",p_l)for(var b_s in p_l)if(p_l[b_s].id==parseInt(this.dataSource.data)){for(var d_u in p_l[b_s].gold&&(this.priceBox.visible=!0,this.alreadyBarain_lab.text=Utils.$(("{1}"+j_x("1263_869")),p_l[b_s].gold),this.residuePrice_lab.text=Utils.$(("{1}"+j_x("1263_869")),e.price-(p_l[b_s].gold+e.priceLimit)),this.bargain_progressBar.value=p_l[b_s].gold/(e.price-e.priceLimit),this.percent_lab.text=Utils.$("{1}%",Math.floor(p_l[b_s].gold/(e.price-e.priceLimit)*100))),p_l[b_s].disList){if(p_l[b_s].disList[d_u].tid===this.hero.id){this.helpbargainbtn.label=(j_x("352_525_1624")+j_x(511));break}this.helpbargainbtn.label=(j_x("721_923_511")+j_x(603))}e.price==p_l[b_s].gold+e.priceLimit&&(this.helpbargainbtn.disabled=!0,this.helpbargainbtn.label=(j_x("1808_767_1300")+j_x("396_2426")),this.helpBargain_red.visible=!1),p_g=p_l[b_s].disList,p_l[b_s].gold+e.priceLimit==e.price&&(this.priceBox.visible=!1,this.invitebtn.label=(j_x("511_603_402")+j_x(2142)),this.bargainsuccess_lab.visible=1==this.dataSource.type)}this.list.array=p_g},Object.defineProperty(b_s.prototype,"hero",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),b_s.open=function(e,p_l,p_g){UIM.open(b_s,["shop.atlas"],{data:e,type:p_l,pId:p_g},!1,!1,!0)},b_s.prototype.close=function(){Mla(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.BargainView=p_g;var d_u,b_e=(d_u=ui.window.discount_gift.bargain_cellUI,__extends(d_m,d_u),d_m.prototype.onRender=function(e,p_l){e&&(e.isShowName=!1,e.isShowNum=!0,e.isShowQuaEft=!1,e.setItemData(e.dataSource))},d_m.prototype.updateInfo=function(e){var p_l=Config.activity_friendDiscount_rewardDiscount[e];this.list.array=b_p.getRewardDatas(p_l.reward),this.candiscount_lab.text=Utils.$((j_x("1163_1068_1777")+j_x("2283_194_1035")+"{1}"+j_x("192_1067_2046")+j_x("257_1738_511")+j_x(2057)),p_l.condition[0][1]),this.giftname_lab.text=p_l.name,this.primecost_lab.text=Utils.$(("{1}"+j_x("1263_869")),p_l.price),FriendBargainModel.instance.discountRewardList,this.line_img.visible=!0;var p_g=p_l.priceLimit;this.zeroimg.visible=!(0<p_g),this.lowestprice_lab.visible=0<p_g,0<p_g&&(this.lowestprice_lab.text=Utils.$(("{1}"+j_x("1263_869")),p_g))},d_m);function d_m(){var p_l=d_u.call(this)||this;return p_l.list.itemRender=e.ItemBox,p_l.list.renderHandler=Laya.Handler.create(p_l,p_l.onRender,null,!1),p_l}e.BargainViewCell=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.discount_gift.discount_giftUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){LED.on(l_r.UPDATE_BARGAIN_LIST,this,this.onUpdateListData),LED.on(l_r.UPDATE_BARGAIN_LIST,this,this.onUpdateListData);var e=ActivityModel.instance.getActivityVoByType(ActivityTypeDefine.GS_friendDiscount);if(e){this.dataSource=e,this.helpBtn.on(Laya.Event.CLICK,this,this.onClickHelpBtn);var p_l=Config.activity_friendDiscount_rewardDiscount[1];this.helpnum.text=p_l.discountLimit.toString(),this.list.refresh()}else this.close()},b_s.prototype.updateView=function(){Kiy(this,Laya)},b_s.prototype.updateMessage=function(){Gkq(this,b_e,Laya,LgcM,FriendBargainModel)},b_s.open=function(e){Czk(e,UIM,b_s)},b_s.prototype.onClickHelpBtn=function(){Cqt(f_t)},b_s.prototype.onUpdateListData=function(){this.list.array=FriendBargainModel.instance.getCellInfo(),this.updateView();var e=FriendBargainModel.instance.discountRewardList,p_l=Config.activity_friendDiscount_rewardDiscount[1];e&&(this.helpnum.text=(p_l.discountLimit-e[0].bargainNum).toString())},b_s.prototype.updateCellData=function(e,p_l){Wxr(e,p_l)},b_s.prototype.updateSulTime=function(e){0<e?(this.t_time.text=Utils.formatTimeStr(e),Laya.timer.once(1e3,this,this.updateSulTime,[e-1],!0)):(this.t_time.text="00:00:00",Laya.timer.clear(this,this.updateSulTime))},b_s.prototype.onRemoved=function(){Aqk(LED,l_r,this)},b_s.prototype.close=function(){Szw(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.FriendBargain=p_g;var d_u,b_e=(d_u=ui.window.discount_gift.limit_buy_cellUI,__extends(d_m,d_u),d_m.prototype.updateDatas=function(e){var p_l=Config.activity_friendDiscount_rewardDiscount[e];this.list.array=b_p.getRewardDatas(p_l.reward),this.primecost_lab.text=Utils.$(("{1}"+j_x("1263_869")),p_l.price),this.giftname_lab.text=p_l.name,this.candiscount_lab.text=Utils.$((j_x("1163_1068_1777")+"{1}"+j_x("2283_194_1035")+j_x("192_1067_257")+j_x("1738_511_2057")),p_l.condition[0][1]),this.priceBox.x=470,this.discount_btn.on(Laya.Event.CLICK,this,this.onClickDiscount,[e]);var p_g=FriendBargainModel.instance.discountRewardList;if(this.buybtn.on(Laya.Event.CLICK,this,this.onClickBuybtn,[e,1,this.hero.id]),this.bargain_clip.interval=125,this.discount_btn.label=(j_x("155_2086_511")+j_x(603)),this.bargain_clip.visible=!1,this.line_img.visible=!0,this.discountcost_lab.visible=!1,this.alreadBargain.visible=!1,this.buy_red.visible=!1,this.bargainbtn_red.visible=!1,p_g)for(var b_s in p_g)p_g[b_s].id==e&&(p_g[b_s].gold?(this.alreadBargain.visible=!0,this.discountcost_lab.visible=!0,this.discountcost_lab.text=Utils.$(("{1}"+j_x("1263_869")),p_l.price-p_g[b_s].gold),this.bargain_clip.visible=!0,this.discount_btn.label=p_g[b_s].gold+p_l.priceLimit!=p_l.price?(j_x("511_603_283")):(j_x("511_603_402")+j_x(2142)),this.bargainbtn_red.visible=this.buy_red.visible=FriendBargainModel.instance.checkMainRed(e)&&!p_g[b_s].bugRewardTime,this.priceBox.x-=220):(this.alreadBargain.visible=!1,this.discountcost_lab.visible=!1),p_g[b_s].bugRewardTime&&0<p_g[b_s].bugRewardTime?(this.buybtn.disabled=!0,this.buybtn.label=(j_x("1300_1355_2420")),this.discount_btn.disabled=!0,this.bargain_clip.visible=!1,p_g[parseInt(b_s)].isCut=!0):(this.buybtn.disabled=!1,this.buybtn.label=(j_x("1355_2420")),this.discount_btn.disabled=!1));var d_u=p_l.priceLimit;if(this.zeroimg.visible=!(0<d_u),this.lowestprice_lab.visible=0<d_u,0<d_u&&(this.lowestprice_lab.text=Utils.$(("{1}"+j_x("1263_869")),d_u)),this.list.length<10)for(var b_e=0;b_e<10-this.list.length;b_e++){var d_m=new ModuleItemVO;this.list.addItem(d_m)}},d_m.prototype.setData=function(e,p_l){e&&(e.isShowName=!1,e.isShowNum=!0,e.isShowQuaEft=!1,e.setItemData(e.dataSource))},d_m.prototype.onClickDiscount=function(p_l){Yok(p_l,e,FriendBargainModel,LED,l_r)},d_m.prototype.onClickBuybtn=function(e,p_l,p_g){function b_s(){FriendBargainModel.instance.reqFriendDiscount(e,p_l,p_g),b_e[e-1].isCut=!0}var d_u,b_e=FriendBargainModel.instance.discountRewardList,d_m=Config.activity_friendDiscount_rewardDiscount[e],d_w=0;for(var f_t in b_e)e==b_e[f_t].id&&b_e[f_t].gold&&(d_w=b_e[f_t].gold);0!=(d_u=0===d_w?d_m.price:d_m.price-(d_w+d_m.priceLimit))?b_p.confirm(Utils.$((j_x("1768_322")+"{1}"+j_x("1263_869_705")+j_x("1919_1081_2427")+j_x("603_1355_2420")+""+j_x("68_2032_2020")+j_x("243_1355_2420")+"?"),d_u),b_s):b_p.confirm(Utils.$((j_x("68_2032_192")+j_x("1081_2427_603")+"{1}"+j_x("1263_869_1355")+j_x(2420)+"{2}"+j_x("861_130")),d_m.priceLimit,d_m.name),b_s)},Object.defineProperty(d_m.prototype,"hero",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),d_m);function d_m(){var p_l=d_u.call(this)||this;return p_l.alreadBargain.visible=!1,p_l.line_img.visible=!1,p_l.list.itemRender=e.ItemBox,p_l.list.renderHandler=Laya.Handler.create(p_l,p_l.setData,null,!1),p_l.list.repeatX=5,p_l}e.FriendBargain_Cell=b_e;var d_w,f_t=(d_w=ui.window.discount_gift.discount_helpUI,__extends(v_z,d_w),v_z.prototype.onClickCloseBtn=function(){Gpm(this)},v_z.open=function(){Sof(UIM,v_z)},v_z.prototype.close=function(){Cmj(UIM,v_z)},v_z);function v_z(){var e=d_w.call(this)||this;return e.closeBtn.on(Laya.Event.CLICK,e,e.onClickCloseBtn),e}e.BargainHelp=f_t}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.doubleArea.DoubleAreaSeasonStartUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Udp(this,Laya)},b_s.open=function(e){Wjr(e,UIM,b_s)},b_s.prototype.updateView=function(){this.seasonNotice.visible=1!=this.dataSource[0],this.seasonStart.visible=1==this.dataSource[0];var e=DoubleAreaModel.instance._endTime;this.t_time.text=Utils.formatTimeStr4(e,!1);var p_l=DoubleAreaModel.instance._nextOpenTime,p_g=DoubleAreaModel.instance._nextEndTime,b_s=Utils.formatTimeStr4(p_l,!1)+(j_x(2057))+Utils.formatTimeStr4(p_g,!1);this.noticeTime.text=b_s},b_s.prototype.onClick=function(e){switch(e.target.name){case"okBtn":b_s.close()}},b_s.prototype.onRemove=function(){Cii(this,Laya)},b_s.close=function(){Mtf(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.DoubelAreaSeasonStartPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.doubleArea.DoubleArea_BatterArrayUI,__extends(d_u,p_l),d_u.prototype.onAdded=function(){this.on(Laya.Event.CLICK,this,this.onClick);var e=DoubleAreaModel.instance.getMyTeamId();0<e&&DoubleAreaControl.ins.reqSelfTeamInfo(e,1),LED.on(l_r.DA_CLONE_FORMATION_UPDATE,this,this.updateView),LED.on(l_r.DA_TEAM_INFO_UPDATE,this,this.updateView),0!=this.tab.selectedIndex?this.tab.selectedIndex=0:this.onTabSelect(0),this.resetSite()},d_u.prototype.onTabSelect=function(e){-1!=e&&this.updateView()},d_u.prototype.updateItem=function(e,p_l){e&&e.setItemData(e.dataSource,p_l,this.tab.selectedIndex)},d_u.open=function(){Ecp(UIM,d_u)},d_u.prototype.onRemove=function(){Orr(this,Laya,LED,l_r)},d_u.prototype.resetSite=function(e){void 0===e&&(e=null),this.x=Stage.width-this.width>>1,this.y=Stage.height-this.height>>1},d_u.prototype.onClick=function(p_l){switch(p_l.target.name){case"closeBtn":d_u.close();break;case"joinBtn":d_u.close(),e.DoubleTeamMainPanel.open()}},d_u.prototype.updateView=function(){var e=[];DoubleAreaModel.instance._selfTeamInfoArray[0]&&(e=DoubleAreaModel.instance._selfTeamInfoArray[0].member),e&&0<e.length?this.list.array=e:this.list.array=[];var p_l=!DoubleAreaModel.instance.checkHaveTeam();this.t_null.visible=p_l,this.joinBtn.visible=p_l},d_u.close=function(){Gvn(UIM,d_u)},d_u);function d_u(){var b_s=p_l.call(this)||this;return b_s.tab.selectHandler=Laya.Handler.create(b_s,b_s.onTabSelect,null,!1),b_s.on(Laya.Event.ADDED,b_s,b_s.onAdded),b_s.on(Laya.Event.REMOVED,b_s,b_s.onRemove),b_s.list.itemRender=e.DoubleAreaBatterItem,b_s.list.renderHandler=p_g.create(b_s,b_s.updateItem,null,!1),b_s}e.DoubleAreaBatterArrayPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.gymkhana.gymkhanaBuyTipUI,__extends(b_s,p_l),b_s.prototype.onClick=function(e){var p_l=e.target,p_g=parseInt(this.inputText.text),d_u=Config.global[GlobalDefine.doublePvp_extra_random_times].t_info[0]-DoubleAreaModel.instance._buyMatchCount,b_e=Config.global[GlobalDefine.doublePvp_extra_random_times].t_info[1];switch(p_l.name){case"closeBtn":case"backBtn":b_s.close();break;case"BuyBtn":if(0<d_u){var d_m=p_g*b_e;b_p.checkCoin(CoinDefine.GOLD,d_m)?DoubleAreaControl.ins.reqBuyMatchCount(p_g):b_p.broadcastNotice((j_x("1263_869_2462")+j_x(1779)))}else b_p.broadcastNotice((j_x("1355_2420_235")+j_x("2348_2462_1779")));break;case"addBtn":p_g++,this.inputText.text=d_u<=0?"1":Math.min(p_g,d_u).toString();break;case"reduceBtn":p_g--,this.inputText.text=Math.max(p_g,1).toString();break;case"reduceTenBtn":p_g-=10,this.inputText.text=Math.max(p_g,1).toString();break;case"addTenBtn":p_g+=10,this.inputText.text=d_u<=0?"1":Math.min(p_g,d_u).toString()}this.priceLabel.text=(b_e*parseInt(this.inputText.text)).toString()},b_s.prototype.onAdded=function(){Qos(this,Laya,LED,l_r)},b_s.open=function(){Sfp(UIM,b_s)},b_s.prototype.updateView=function(){this.inputText.text="1";var e="",p_l=DoubleAreaModel.instance._matchNum,p_g=Config.global[GlobalDefine.doublePvp_extra_random_times].t_info[0],b_s=Config.global[GlobalDefine.doublePvp_random_times].t_info[0],d_u=Config.global[GlobalDefine.doublePvp_extra_random_times].t_info[1],b_e=DoubleAreaModel.instance._buyMatchCount;e=Utils.$("{1}/{2}",p_g-b_e,p_g),this.vipBuyTime.text=e;var d_m=b_s+b_e-p_l;e=Utils.$("{1}/{2}",d_m,b_s),this.curtenTime.text=e,this.priceLabel.text=(d_u*parseInt(this.inputText.text)).toString()},b_s.close=function(){Yfh(UIM,b_s)},b_s.prototype.onRemove=function(){Uqt(this,Laya,LED,l_r)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.DoubleAreaBuyTimeTip=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.doubleArea.DoubleArea_fightUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Azb(this,Laya,DoubleAreaControl,LED,l_r)},b_s.prototype.setTimeCount=function(e,p_l,p_g){0<e?(this.downTimeTxt.visible=!0,this.downTimeTxt.text=Utils.formatTimeStr(e),Laya.timer.once(1e3,this,this.setTimeCount,[e-1,p_l,p_g])):(this.downTimeTxt.visible=!1,this.downTimeTxt.text="")},b_s.open=function(){Oam(UIM,b_s)},b_s.prototype.updateSeasonTime=function(){var e=DoubleAreaModel.instance._openTime,p_l=DoubleAreaModel.instance._endTime,p_g=Utils.formatTimeStr4(e,!1)+"-"+Utils.formatTimeStr4(p_l,!1);this.activityTimeTxt.text=p_g},b_s.prototype.updateRed=function(){Ely(this,DoubleAreaModel)},b_s.prototype.onUpdateTime=function(){var e=Config.global[GlobalDefine.doublePvp_random_times].t_info[1],p_l=DoubleAreaModel.instance._lastMatchTime+e-SyncTime.serverTime/1e3;0<p_l?(this.pipeiTimeCd.text=(j_x("169_1451_1614")+j_x("2171_283")+"")+gymkhanaModel.instance.formatTimeStrTow(p_l),this.pipeiTimeCd.visible=!0):this.pipeiTimeCd.visible=!1},b_s.prototype.updateNextSeasonTime=function(){var e=DoubleAreaModel.instance._endTime,p_l=DoubleAreaModel.instance._nextOpenTime-SyncTime.serverTime/1e3,p_g=0<SyncTime.serverTime/1e3-e;0<p_l&&p_g?(this.nextSeasonTimeTxt.text=(j_x("2379_252_2423")+j_x("155_1186_810")+j_x("867_1702")+":")+Utils.formatTimeStr(Math.floor(p_l)),this.pipeiBox.visible=!1,this.nextSeasonTimeTxt.visible=!0):(this.nextSeasonTimeTxt.visible=!1,this.pipeiBox.visible=!0)},b_s.prototype.updateData=function(){DoubleAreaModel.instance.checkSeasonReward(),this.updateSeasonTime(),this.onUpdateTime(),this.scrollPanel.removeChildren();var p_l,p_g=165,b_s=434,d_u=[1,2,3,4,5,6,7,8,9,10],b_e=[];DoubleAreaModel.instance._fameArray[0]&&(b_e=DoubleAreaModel.instance._fameArray[0].frameArr),p_l=b_e&&0<b_e.length;for(var d_m=0;d_m<d_u.length;d_m++){var d_w=new e.DoubleAreaFightItem;if(0==d_m)p_l&&b_e[0]?d_w.setData(b_e[0],p_l,!0):d_w.setData(d_u[0],!p_l,!0),d_w.x=335,d_w.y=144;else{p_l&&b_e[d_m]?d_w.setData(b_e[d_m],p_l):d_w.setData(d_u[d_m],!p_l),d_w.x=p_g,d_w.y=b_s;var f_t=Math.floor(d_m/2);b_s=434+(d_w.height-180)*f_t,p_g=165+(d_w.width-285)*(d_m%2)}this.scrollPanel.addChild(d_w)}this.scrollPanel.vScrollBar.max=b_s;var v_z=DoubleAreaModel.instance._teamIntegral;if(this.myScoreTxt.text=v_z.toString(),DoubleAreaModel.instance._selfTeamInfoArray[0]){var d_h=DoubleAreaModel.instance._selfTeamInfoArray[0].rank,r_t=Config.global[GlobalDefine.doublePvp_fameHall_minPoints].i_info;this.myRankTxt.text=d_h&&0<=d_h&&r_t<=v_z?d_h.toString():(j_x("206_1067_1077"));var t_n=DoubleAreaModel.instance._selfTeamInfoArray[0].power;this.myFightTxt.text=t_n?t_n.toString():"0"}else this.myRankTxt.text=(j_x("1327_711_206")+j_x("1067_1077")),this.myFightTxt.text="0";var f_y=Config.global[GlobalDefine.doublePvp_challenge_times].t_info[0],p_q=Config.global[GlobalDefine.doublePvp_random_times].t_info[0],h_h=DoubleAreaModel.instance._buyMatchCount,n_j=DoubleAreaModel.instance._buyChallengeCount,j_l=p_q+h_h-DoubleAreaModel.instance._matchNum;this.frequencyTxt.text=j_l+"/"+p_q;var l_m=f_y+n_j-DoubleAreaModel.instance._challengeNum;this.challengeNum.text=l_m+"/"+f_y;var z_m=DoubleAreaModel.instance._rewardIdx,h_b=Config.doublePvp_pointsRewards[z_m+1];h_b?(this.awardRp.visible=DoubleAreaModel.instance._teamIntegral>=h_b.ponits,this.proBar.value=DoubleAreaModel.instance._teamIntegral/h_b.ponits,this.txtPro.text=DoubleAreaModel.instance._teamIntegral+"/"+h_b.ponits,this.haveGetAllReward.visible=!1,this.rewardBox.visible=!0,this.awardRp.visible?this.btnAward.gray=!1:this.btnAward.gray=!0):(this.awardRp.visible=!1,this.haveGetAllReward.visible=!0,this.rewardBox.visible=!1),Laya.timer.loop(1e3,this,this.updateTime);var t_i=DoubleAreaModel.instance.checkHaveTeam();this.noTeamBox.visible=!t_i,this.seasonBox.visible=t_i;var n_f=DoubleAreaModel.instance.isShowBatterArrRed();this.cloneRed.visible=n_f,DoubleAreaModel.instance._isShowRed=0<j_l,this.pipeiRed.visible=0<j_l},b_s.prototype.removeRoll=function(){Qqg(Laya,this)},b_s.prototype.updateTime=function(){var e=DoubleAreaModel.instance._endTime-SyncTime.serverTime/1e3;this.downTimeTxt.text=0<e?Utils.formatTimeStr(Math.floor(e)):(j_x("252_2423_1300")+j_x("396_2426"))},b_s.prototype.onRemove=function(){Qih(this,Laya,LED,l_r)},b_s.prototype.openPvpPanel=function(){this.isClick&&e.DoubleAreaPvpPanel.open(),b_s.close()},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"helpBtn":e.DoubleTeamHelpTip.open();break;case"b_addPnum":e.DoubleAreaBuyTimeTip.open();break;case"b_addCnum":var p_g=Config.global[GlobalDefine.doublePvp_extra_challenge_times].t_info[0];r_f.instance.isWindow(p_g);break;case"b_exchange":e.DoubleAreaPvpPanel.open();break;case"clone":e.DoubleAreaBatterArrayPanel.open();break;case"rankBtn":e.DoubleTeamRankPanel.open();break;case"btnMatch":if(DoubleAreaModel.instance._endTime-SyncTime.serverTime/1e3<0)return void b_p.broadcastNotice((j_x("1787_252_2423")+j_x("206_155_1186")+""+j_x("814_799_48")+j_x(383)));var d_u=DoubleAreaModel.instance._lastMatchTime,b_e=Math.floor(SyncTime.serverTime/1e3),d_m=Config.global[GlobalDefine.doublePvp_random_times].t_info[1],d_w=5+DoubleAreaModel.instance._buyMatchCount;if(DoubleAreaModel.instance._matchNum>=d_w)return void b_p.broadcastNotice((j_x("169_1451_235")+j_x("2348_2462_1779")));if(DungeonModel.instance.isInFb)return void b_p.broadcastNotice((j_x("1749_2035_1443")+j_x("944_283")+""+j_x("814_799_169")+j_x(1451)));if(!DoubleAreaModel.instance.checkHaveTeam())return void b_p.broadcastNotice((j_x("1749_1327_711")+j_x("1971_1896_2413")+j_x(1869)+""+j_x("814_799_169")+j_x(1451)));if(d_m<b_e-d_u)this.isClick=!0,DoubleAreaControl.ins.reqMatch();else{var f_t=this.refreshCd.bind(this);b_p.confirm(Utils.$((j_x("169_1451_1614")+j_x("2171_283")+""+j_x("68_2032_572")+j_x(2218)+"{1}"+j_x("1263_869_1496")+j_x("1792_1614_2171")+j_x("1702_2460")),Config.global[3031].t_info[2]),f_t,null,!1,!0)}break;case"team":if(!MirrorSelfModel.ins.isActivate(1))return void b_p.broadcastNotice((j_x("1749_1768_206")+j_x("2335_1796_2224")+j_x(1920)+"["+j_x("189_1171_2198")+"]"));e.DoubleTeamMainPanel.open();break;case"rankImg":e.DoubleTeamRankPanel.open();break;case"recordImg":e.DoubleAreaTeamRecordPanel.open();break;case"joinBtn":e.DoubleTeamMainPanel.open();break;case"btnAward":var v_z=DoubleAreaModel.instance._rewardIdx;e.DoubleAwardWin.open(v_z)}},b_s.prototype.moveRoll=function(){Uye(r_n,this)},b_s.prototype.refreshCd=function(){b_p.getCoin(1)>=Config.global[3031].t_info[2]?DoubleAreaControl.ins.reqClearCd():b_p.broadcastNotice((j_x("1263_869_2462")+j_x(1779)))},b_s.close=function(){Kse(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.isClick=!1,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.DoubleAreaFightPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.doubleArea.DoubleAreaFinalWinPanelUI,__extends(d_u,p_l),d_u.prototype.onAdded=function(){Iit(this,Laya,p_g)},d_u.prototype.onClick=function(p_l){switch(p_l.target.name){case"SureBtn":DB.instance.query(c2w_leave_fb,new c2w_leave_fb),d_u.close(),e.DoubleAreaTeamPkPanel.close(),DoubleAreaModel.instance._haveDeadArray=[]}},d_u.open=function(){Kli(UIM,d_u)},d_u.prototype.updateView=function(){var e=DoubleAreaModel.instance._fightTeamInfoArray[0].rank,p_l=DoubleAreaHelp.getMyTeamWinNum(),p_g=DoubleAreaModel.instance._maxTeamRank,b_s=DoubleAreaModel.instance._rank,d_u=DoubleAreaModel.instance._matchIntegral,b_e=DoubleAreaModel.instance._extraIntegral;this.upBatterPoints.text=0<=d_u?"+"+d_u.toString():d_u.toString(),this.upExtraPoints.text="+"+b_e.toString(),this.totalPoints.text=DoubleAreaModel.instance._sumIntegral.toString(),this.resultList.array=DoubleAreaModel.instance._winResultArr,this.resultList.refresh(),this.winBgImg.visible=1==p_l,this.titleImg.visible=1==p_l,this.loseTitleBg.visible=0==p_l,this.evenTitleImg.visible=2==p_l,this.loseBgImg.visible=1!=p_l,this.upBox.visible=1==p_l,this.downBox.visible=1!=p_l,this.downRankNum.text=(e-b_s).toString(),this.SureBtn.skin="res/ui/common/Button_common_02.png",this.upBatterPoints.text=d_u.toString(),this.upExtraPoints.text=b_e.toString(),0!=b_s?(this.rankBox.visible=!0,this.noRankTxt.visible=!1,gymkhanaModel.instance.RenderBox(this.rankBox,b_s)):(this.rankBox.visible=!1,this.noRankTxt.visible=!0),this.uprankNum.text=0==e?b_s.toString():(e-b_s).toString(),this.historyImage.visible=b_s<p_g,this.CountdownLabel.visible=!0,this.refRemain()},d_u.prototype.onRemove=function(){Cwp(this,Laya,DoubleAreaModel)},d_u.prototype.refRemain=function(){var e=this;Laya.timer.loop(1e3,this,(function(){if(e._curTick--,e._curTick<0)return e._curTick=10,e.CountdownLabel.visible=!1,DB.instance.query(c2w_leave_fb,new c2w_leave_fb),d_u.close(),void Laya.timer.clearAll(e);e.CountdownLabel.text=Utils.$(("{1}"+j_x(2081)),e._curTick)})),this.CountdownLabel.text=Utils.$(("{1}"+j_x(2081)),this._curTick)},d_u.prototype.updateResultItem=function(e,p_l){Sqi(e,p_l)},d_u.close=function(){Akb(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e._curTick=10,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.DoubleAreaFinalResultPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.doubleArea.DoubleArea_pvpUI,__extends(d_u,p_l),d_u.prototype.onAdded=function(){this.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.DA_MATCH_UPDATE,this,this.updateView),LED.on(l_r.DA_CLONE_FORMATION_UPDATE,this,this.updateView),this.teamOtherLeaderList.renderHandler=p_g.create(this,this.updateItem,null,!1),this.teamOtherMemberListBox.renderHandler=p_g.create(this,this.updateItem,null,!1),this.teamLeaderList.renderHandler=p_g.create(this,this.updateItem,null,!1),this.teamMemberList.renderHandler=p_g.create(this,this.updateItem,null,!1),this._rollNum=0,this.showHead(),this.updateView(),this.pkBox.visible=!0,this.teamOtherLeaderListBox.visible=!1,this.teamOtherListBox.visible=!1,this.bg.width=Stage.width,this.bg.height=Stage.height+100,this.bg.x=this.width-Stage.width,this.bg.y=this.height-Stage.height+GPlatform.concaveOffsetY},d_u.prototype.createImg=function(e){var p_l;return(p_l=0<this._leftheadPoolList.length?this._leftheadPoolList.pop():new Laya.Image).x=e.x,p_l.y=e.y,p_l.skin=e.skin,p_l.alpha=0,p_l.width=e.width,p_l.height=e.height,p_l.scale(.8,.8),this.pkBox.addChild(p_l),p_l},d_u.prototype.moveEnd=function(){Resource.SoundManager.instance.playSoundById(15,!1),this._effPlayOpts||(this._effPlayOpts={clipUrl:"res/ui/common/Clip_shanguang_eft.png",clipX:3,clipY:2,interval:83,f_u:-30,j_l:-30}),this._helpPoint?this._helpPoint.setTo(-30,-30):this._helpPoint=new Laya.Point(-30,-30),this.selectBox1.visible=!0,this.selectBox2.visible=!0,this._rollNum=this._rollNum+1,3==this._rollNum&&this.showEff()},d_u.prototype.onClick=function(e){switch(e.target.name){case"backBtn":d_u.close()}},d_u.prototype.showEff=function(){Uas(this,e)},d_u.prototype.moveNext=function(e,p_l,p_g){void 0===e&&(e=null),void 0===p_l&&(p_l=null),void 0===p_g&&(p_g=!1),1<p_l.length?this.changeHead(p_l):(0<p_l.length&&((e=p_l.shift()).alpha=1),this.moveEnd())},d_u.prototype.showTeamBox=function(){Wdb(e,this)},d_u.prototype.changeHead=function(e,p_l){void 0===e&&(e=null),void 0===p_l&&(p_l=!1);var p_g=e.shift(),b_s=e.shift();p_g.alpha=1,b_s.alpha=1;var d_u=p_g.y,b_e=b_s.y,d_m=d_u-p_g.height,d_w=b_e-b_s.height;Laya.Tween.to(p_g,{j_l:d_m,alpha:0},500,null,Laya.Handler.create(this,this.onStay,[p_g,e,p_l])),Laya.Tween.to(b_s,{j_l:d_w,alpha:0},500,null,Laya.Handler.create(this,this.onStay,[b_s,e,p_l]))},d_u.prototype.updateView=function(){for(var e=DoubleAreaModel.instance.getSelfTeamInfoArr().member,p_l=DoubleAreaModel.instance._selfTeamInfoArray[0].svrId,p_g=DoubleAreaModel.instance._otherTeamMemberArr,b_s=DoubleAreaModel.instance._otherTeamName,d_u=DoubleAreaModel.instance._otherTeamSvrId,b_e=DoubleAreaModel.instance._selfTeamInfoArray[0].name,d_m=p_g[0].defCloneArr,d_w=[],f_t=0;f_t<d_m.length;f_t++)d_w.push(d_m[f_t]);var v_z=d_w.reverse();this.teamOtherLeaderList.array=v_z;var d_h=this.teamMemberList.x,r_t=d_m.length,t_n=p_g.length,f_y=this.teamOtherLeaderList.getCell(0);if(1==r_t?this.teamOtherLeaderList.x=d_h:1<r_t&&(this.teamOtherLeaderList.x=d_h+50-(r_t*f_y.width+this.teamOtherLeaderList.spaceX*(r_t-1))),1<t_n){var p_q=p_g[1].defCloneArr,h_h=[];for(f_t=0;f_t<p_q.length;f_t++)h_h.push(p_q[f_t]);var n_j=h_h.reverse();this.teamOtherMemberListBox.array=n_j;var j_l=this.teamOtherMemberListBox.getCell(0),l_m=p_q.length;1==l_m?this.teamOtherMemberListBox.x=d_h:1<l_m&&(this.teamOtherMemberListBox.x=d_h+50-(l_m*j_l.width+this.teamOtherMemberListBox.spaceX*(l_m-1))),this.player6Head.skin=Resource.ResManager.getHeadUrl(p_g[1].entryId,p_g[1].headIcon),this.player4Name.text=p_g[1].name}else this.teamOtherMemberListBox.array=[],this.player6Head.visible=!1,this.player4Name.visible=!1;if(1<e.length)if(0!=e[1].pid){var z_m=e[1].ackCloneArr;this.teamMemberList.array=z_m,this.player2Head.visible=!0,this.player2Name.visible=!0,this.player2Head.skin=Resource.ResManager.getHeadUrl(e[1].entryId,e[1].headIcon),this.player2Name.text=e[1].name}else this.teamMemberList.array=[],this.player2Head.visible=!1,this.player2Name.visible=!1;else this.teamMemberList.array=[],this.player2Head.visible=!1,this.player2Name.visible=!1;var h_b=e[0].ackCloneArr;this.teamLeaderList.array=h_b,this.team1Name.text="s."+d_u+" "+b_s,this.teamName.text="s."+p_l+" "+b_e,this.player5Head.skin=Resource.ResManager.getHeadUrl(p_g[0].entryId,p_g[0].headIcon),this.player3Name.text=p_g[0].name,this.player1Head.skin=Resource.ResManager.getHeadUrl(e[0].entryId,e[0].headIcon),this.player1Name.text=e[0].name},d_u.prototype.showHead=function(){Yon(this)},d_u.prototype.enterScene=function(){Kxr(d_u,e,DoubleAreaControl)},d_u.prototype.refRemain=function(){var e=this;Laya.timer.loop(1e3,this,(function(){e._curTick--,e._curTick<0?(e._curTick=e.MAX,Laya.timer.clearAll(e),e.enterScene()):e.numClip.index=e._curTick})),this.numClip.index=this._curTick},d_u.prototype.updateHeadList=function(){this._leftHeadList=[];var e=this.player3Head,p_l=this.player4Head;this._leftHeadList.push(this.createImg(e)),this._leftHeadList.push(this.createImg(p_l));for(var p_g=[2,1,2],b_s=0,d_u=0,b_e=DoubleAreaModel.instance._otherTeamMemberArr,d_m=0;d_m<p_g.length;d_m++)2==d_m?(e.skin=Resource.ResManager.getHeadUrl(b_e[0].entryId,b_e[0].headIcon),1<b_e.length?p_l.skin=Resource.ResManager.getHeadUrl(b_e[1].entryId,b_e[1].headIcon):p_l.visible=!1):(b_s=Utils.getRandom(1,24),d_u=Utils.getRandom(1,24),e.skin=Resource.ResManager.getHeadUrl(1,b_s),p_l.skin=Resource.ResManager.getHeadUrl(1,d_u)),this._leftHeadList.push(this.createImg(e)),this._leftHeadList.push(this.createImg(p_l))},d_u.prototype.updateItem=function(e,p_l){var p_g=e.getChildByName("icon"),b_s=e.getChildByName("shade"),d_u=Config.clone_clone[e.dataSource];d_u?(p_g.skin=Resource.ResUrl.getIconUrl(d_u.headImg),MirrorSelfModel.ins.getSelfInfoMap[d_u.id]):p_g.skin=null,b_s.visible=!1},d_u.prototype.onStay=function(e,p_l,p_g){void 0===e&&(e=null),void 0===p_l&&(p_l=null),void 0===p_g&&(p_g=!1),p_l&&0<p_l.length&&(p_l[0].alpha=1,Laya.timer.loop(200,this,this.moveNext,[e,p_l,p_g]))},d_u.prototype.onRemove=function(){Qzg(this,Laya,LED,l_r)},d_u.open=function(){Csx(UIM,d_u)},d_u.close=function(){Ohy(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e.MAX=3,e._curTick=e.MAX,e._effPlayOpts=null,e._leftheadPoolList=[],e._rightheadPoolList=[],e._rollNum=0,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.DoubleAreaPvpPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.doubleArea.DoubleAreaEachWinPanelUI,__extends(d_u,p_l),d_u.prototype.onAdded=function(){Epr(this,Laya,p_g)},d_u.prototype.updateItem=function(e,p_l){var p_g=e.getChildByName("icon"),b_s=e.getChildByName("shade"),d_u=Config.clone_clone[e.dataSource];d_u?(p_g.skin=Resource.ResUrl.getIconUrl(d_u.headImg),MirrorSelfModel.ins.getSelfInfoMap[d_u.id],b_s.visible=!1):(p_g.skin=null,b_s.visible=!0)},d_u.prototype.onRemove=function(){this.off(Laya.Event.CLICK,this,this.onClick),Laya.timer.clearAll(this),DoubleAreaModel.instance._fiends<3?DoubleAreaHelp.startFight():LED.event(l_r.DA_CAN_OPEN_FINAL_RESULT),DoubleAreaModel.instance._haveDeadArray=[]},d_u.open=function(){Ika(UIM,d_u)},d_u.prototype.updateView=function(){var e=Math.min(DoubleAreaModel.instance._fiends,3),p_l=DoubleAreaModel.instance.getOtherTeamCloneArr(e-1),p_g=DoubleAreaHelp.getMyTeamCloneArr(e-1),b_s=DoubleAreaModel.instance._fightrResultArr[e-1].winTeamId,d_u=DoubleAreaModel.instance.getMyFightTeamId();this.shengli.visible=b_s==d_u,this.shibai.visible=b_s!=d_u&&0!=b_s,this.even.visible=0==b_s,this.resultList.array=DoubleAreaModel.instance._winResultArr,this.resultList.refresh();var b_e=p_l.length,d_m=p_g.length;0==b_e?p_l=[0,0]:1==b_e&&(p_l=p_l.concat([0])),0==d_m?p_g=[0,0]:1==d_m&&(p_g=p_g.concat([0])),this.otherCloneList.array=p_l,this.myCloneList.array=p_g,this.refRemain()},d_u.prototype.updateResultItem=function(e,p_l){Qze(e,p_l)},d_u.prototype.udpateDownTime=function(){return Kdp(this,Laya,d_u,j_x)},d_u.prototype.refRemain=function(){Iid(this,Laya,j_x)},d_u.prototype.onClick=function(e){},d_u.close=function(){Kgw(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e._curTick=3,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.DoubleAreaResultPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.doubleArea.DoubleAreaSeasonRewardUI,__extends(d_u,p_l),d_u.prototype.onAdded=function(){Ctc(this,Laya)},d_u.prototype.updateView=function(){var e="",p_l=0,p_g="";0==this.dataSource?(e=DoubleAreaModel.instance._overTeamName,p_l=DoubleAreaModel.instance._overRank,p_g=Utils.$((j_x("1595_1168_1067")+j_x("189_2046_383")+j_x(2413)+"{1}"+j_x("2035_944_612")+j_x("2308_843_832")+j_x("799_283_531")+j_x("1976_573")+"{2}"+j_x(1511)),e,p_l)):1==this.dataSource&&(e=DoubleAreaModel.instance._lastTeamName,p_l=DoubleAreaModel.instance._lastRank,p_g=Utils.$((j_x("1595_1168_1067")+j_x("189_2046_383")+j_x(2413)+"{1}"+j_x("2035_1067_1737")+j_x("612_2308_843")+j_x("832_799_283")+j_x("531_1976_573")+"{2}"+j_x(1511)),e,p_l)),this.tipTxt.text=p_g;var b_s=DoubleAreaHelp.getCfgRankReward(p_l);if(b_s){var d_u=b_p.getRewardDatas(b_s.reward);this.list.array=d_u,z_j.centerList(this.list,d_u,5,this.width,0)}},d_u.open=function(e){Oyv(e,UIM,d_u)},d_u.prototype.updateItem=function(e,p_l){e&&(e.isShowName=!1,e.selectImg.removeSelf(),e.setItemData(e.dataSource))},d_u.prototype.onRemove=function(){Egm(this,Laya)},d_u.prototype.onClick=function(p_l){switch(p_l.target.name){case"okBtn":0==this.dataSource?DoubleAreaControl.ins.reqRankReward(1):1==this.dataSource&&DoubleAreaControl.ins.reqRankReward(2),d_u.close(),e.DoubelAreaSeasonStartPanel.open(0)}},d_u.close=function(){Yle(UIM,d_u)},d_u);function d_u(){var b_s=p_l.call(this)||this;return b_s.on(Laya.Event.ADDED,b_s,b_s.onAdded),b_s.on(Laya.Event.REMOVED,b_s,b_s.onRemove),b_s.list.selectEnable=!0,b_s.list.array=null,b_s.list.itemRender=e.ItemBox,b_s.list.renderHandler=p_g.create(b_s,b_s.updateItem,null,!1),b_s}e.DoubleAreaSeasonRewardPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.doubleArea.DoubleAreaceChangeUI,__extends(b_s,p_l),b_s.prototype.resetSite=function(e){void 0===e&&(e=null),this.x=Stage.width-this.width>>1,this.y=Stage.height-this.height>>1},b_s.close=function(){Gwv(UIM,b_s)},b_s.open=function(e){void 0===e&&(e=0),UIM.open(b_s,["pvp.atlas"],[e],null,!1)},b_s.prototype.onRemove=function(){Kut(this,Laya,LED,l_r)},b_s.prototype.onAdded=function(){Sho(this,Laya,LED,l_r)},b_s.prototype.updateItem=function(e,p_l){e&&e.setItemData(e.dataSource,p_l,this.dataSource[0])},b_s.prototype.updateView=function(){Owa(this,MirrorSelfModel)},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":var p_l=DoubleAreaModel.instance._cloneNumArray;p_l&&0<p_l.length&&DoubleAreaControl.ins.reqChangeCloneFormation(this.dataSource[0],p_l),b_s.close()}},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.equipList.vScrollBarSkin="",p_g.equipList.itemRender=e.DoubleAreaSwapItem,z_j.setList(p_g.equipList,p_g,p_g.updateItem),p_g.nullLab.visible=!1,p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g}e.DoubleAreaSwapPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.doubleArea.DoubleAreace_pkUI,__extends(d_u,p_l),d_u.prototype.onAdded=function(){Wft(this,Laya,LED,l_r)},d_u.prototype.onRemove=function(){this.off(Laya.Event.CLICK,this,this.onClick),LED.off(l_r.ACTORDID,this,this.EndFight),LED.off(l_r.DA_CAN_OPEN_FINAL_RESULT,this,this.openFinalResultPanel),LED.off(l_r.DA_START_FIGHT,this,this.updateTimeTxt),Laya.timer.clearAll(this),DoubleAreaModel.instance._fiends=0,UIM.instance.showHeadTopUI()},d_u.prototype.updateResult=function(){this.list.array=[0,1,2];var e=-1;this.list.refresh(),this._resultArr.length=0;for(var p_l=DoubleAreaModel.instance._fiends,p_g=DoubleAreaModel.instance._fightrResultArr,b_s=DoubleAreaModel.instance.getMyFightTeamId(),d_u=0;d_u<p_l;d_u++){var b_e=0;p_g[d_u]&&(b_e=p_g[d_u].winTeamId),-1!=(e=0==b_e?2:b_e==b_s?1:0)&&this._resultArr.push(e)}this.resultList.array=this._resultArr,DoubleAreaModel.instance._winResultArr=this._resultArr},d_u.prototype.udpateDownTime=function(){return Kje(this,Laya)},d_u.prototype.updateItem=function(e,p_l){e&&e.setItemData(e.dataSource,p_l)},d_u.prototype.refRemain=function(){Mgn(Laya,this)},d_u.prototype.openFinalResultPanel=function(){Ipe(e)},d_u.prototype.startFight=function(){Ukr(DoubleAreaHelp,this)},d_u.prototype.onClick=function(p_l){switch(p_l.target.name){case"jumpBtn":if(UIM.instance.isOpenWin(e.DoubleAreaResultPanel))return;DoubleAreaModel.instance.showFriend<=3&&this.EndFight()}},d_u.prototype.EndFight=function(){var p_l=DoubleAreaModel.instance._fiends;p_l<=3?(UIM.instance.isOpenWin(e.DoubleAreaResultPanel)||(DoubleAreaModel.instance._fiends+=1),this.updateResult(),e.DoubleAreaResultPanel.open(),DoubleAreaHelp.stopFight()):3<p_l&&e.DoubleAreaFinalResultPanel.open(),DoubleAreaModel.instance._haveDeadArray=[]},d_u.open=function(){Enb(UIM,d_u)},d_u.prototype.updateView=function(){var e=DoubleAreaModel.instance._selfTeamInfoArray[0].svrId,p_l=DoubleAreaModel.instance._otherTeamSvrId,p_g=DoubleAreaModel.instance._selfTeamInfoArray[0].name,b_s=DoubleAreaModel.instance._otherTeamName;this.team1Name.text="s."+e+" "+p_g,this.team2Name.text="s."+p_l+" "+b_s},d_u.prototype.updateResultItem=function(e,p_l){Ezr(e,p_l)},d_u.prototype.updateTimeTxt=function(){Cbw(this)},d_u.close=function(){Szq(UIM,d_u)},d_u);function d_u(){var b_s=p_l.call(this)||this;return b_s.MAX=Config.global[GlobalDefine.doublePvp_round_time].i_info,b_s._curTick=b_s.MAX,b_s._resultArr=[],b_s.on(Laya.Event.ADDED,b_s,b_s.onAdded),b_s.on(Laya.Event.REMOVED,b_s,b_s.onRemove),b_s.list.itemRender=e.DoubleAreaPkItem,z_j.setList(b_s.list,b_s,b_s.updateItem),b_s.resultList.renderHandler=p_g.create(b_s,b_s.updateResultItem,null,!1),b_s}e.DoubleAreaTeamPkPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.doubleArea.DoubleArea_recordUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){this.on(Laya.Event.CLICK,this,this.onClick),this.tab.selectHandler=Laya.Handler.create(this,this.onTabSelect,null,!1),this.list.itemRender=e.DoubleAreaRecordItem,this.list.vScrollBarSkin="",LED.on(l_r.DA_RECORD_UPDATE,this,this.updateView),z_j.setList(this.list,this,this.renderList),0!=this.tab.selectedIndex?this.tab.selectedIndex=0:this.onTabSelect(0),this.resetSite()},b_s.prototype.updateView=function(){if(0!=DoubleAreaModel.instance._allRecordList.length){var e=this.tab.selectedIndex,p_l=DoubleAreaModel.instance._allRecordList[0].ackRecordArr.sort(this.sortFunc),p_g=DoubleAreaModel.instance._allRecordList[0].defRecordArr.sort(this.sortFunc),b_s=0==e?p_l:p_g;this.list.array=b_s,this.t_null.visible=0==b_s.length}else this.list.array=[],this.t_null.visible=!0},b_s.open=function(){Are(UIM,b_s)},b_s.prototype.resetSite=function(e){void 0===e&&(e=null),this.x=Stage.width-this.width>>1,this.y=Stage.height-this.height>>1},b_s.prototype.renderList=function(e){e&&e.setData(e.dataSource,this.tab.selectedIndex)},b_s.prototype.onRemove=function(){Idu(this,Laya,LED,l_r)},b_s.prototype.sortFunc=function(e,p_l){return Mdj(e,p_l)},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close()}},b_s.prototype.onTabSelect=function(e){Aqr(e,DoubleAreaControl,this)},b_s.close=function(){Wuz(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e._index=1,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.DoubleAreaTeamRecordPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.doubleArea.DoubleAreaTmRenameUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Eys(this,Laya,LED,l_r)},b_s.prototype.resetSite=function(e){void 0===e&&(e=null),this.x=Stage.width-this.width>>1,this.y=Stage.height-this.height>>1},b_s.prototype.onChangeStr=function(){return Qje(this,b_p,j_x)},b_s.prototype.updateView=function(){var e=Config.global[GlobalDefine.doublePvp_rename_times].i_info,p_l=e-DoubleAreaModel.instance._renameNum;this.todayTimeTxt.text=(j_x("2339_1254_1768")+j_x("1163_2249_1943"))+p_l+"/"+e+(j_x(235)),this.txt_gold.text=Config.global[GlobalDefine.doublePvp_rename_gold].i_info.toString()},b_s.prototype.onRemove=function(){Cic(this,Laya,LED,l_r)},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":b_s.close();break;case"sureBtn":var p_l=this.inputTxt.text,p_g=Config.global[GlobalDefine.doublePvp_rename_times].i_info-DoubleAreaModel.instance._renameNum,d_u=Config.global[GlobalDefine.doublePvp_rename_gold].i_info,b_e=LgcM.ins.heroVo;if(8<p_l.length)return void b_p.broadcastNotice((j_x("1081_2307")+"8"+j_x("844_1794")+"!"));if(b_e.gold>=d_u)if(0<p_g){for(var d_m=0,d_w=Utils.NameLimmit();d_m<d_w.length;d_m++){var f_t=d_w[d_m];if(-1!=p_l.search(f_t))return void b_p.broadcastNotice((j_x("1511_1794_130")+j_x("241_1387_1492")+j_x(1794)))}DoubleAreaControl.ins.reqChangeTeamName(p_l,2)}else b_p.broadcastNotice((j_x("2339_1254_383")+j_x("2413_1943_1511")+j_x("235_2348_1300")+j_x("1876_1917")));else b_p.broadcastNotice((j_x("1263_869_2462")+j_x(1779)+""+j_x("2462_1919_2249")+j_x("1943_383_2413")+j_x(1511)))}},b_s.open=function(){Yay(UIM,b_s)},b_s.close=function(){Yij(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.DoubleAreaTmRenamePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.doubleArea.DoubleAreaAwardWinUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Klh(this,Laya,LED,l_r)},b_s.prototype.updateData=function(){var e=[],p_l=DoubleAreaModel.instance._rewardIdx,p_g=DoubleAreaModel.instance._teamIntegral,b_s="",d_u=Config.doublePvp_pointsRewards[p_l+1],b_e=0;d_u&&(e=b_p.getRewardDatas(d_u.rewards),b_s=d_u.ponits.toString(),b_e=d_u.ponits),this.awardList.array=e,this.txtGrade.text=b_s,z_j.centerList(this.awardList,e,5,this.width,0),this.btnGet.gray=p_g<b_e},b_s.open=function(e){Qya(e,UIM,b_s)},b_s.prototype.onClick=function(e){this.dataSource;var p_l=DoubleAreaModel.instance._rewardIdx,p_g=Config.doublePvp_pointsRewards[p_l+1],d_u=DoubleAreaModel.instance._teamIntegral;switch(e.target){case this.btnClose:b_s.close();break;case this.btnGet:if(!p_g&&!p_g.rewards)return void b_p.broadcastNotice((j_x("1749_1300_1241")+j_x("1174_2111_1917")+j_x("582_1896_2235")+j_x(83)));if(d_u<p_g.ponits)return void b_p.broadcastNotice((j_x("383_2413_514")+j_x("2224_2462_1779")));this.reqAward()}},b_s.prototype.reqAward=function(){Wam(DoubleAreaControl)},b_s.prototype.updateItem=function(e,p_l){Uix(e,p_l)},b_s.prototype.onRemove=function(){Mbv(this,Laya,LED,l_r)},b_s.close=function(){Sew(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.awardList.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e}e.DoubleAwardWin=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.doubleArea.DoubleAreaTmBiPanelUI,__extends(b_s,p_l),b_s.prototype.updateView=function(){this.teamIdArray=[],this.svrIdArray=[];var e=DoubleAreaModel.instance._teamBeInviteArray;if(e){for(var p_l=0;p_l<e[0].teamInfoArr.length;p_l++)this.teamIdArray.push(e[0].teamInfoArr[p_l].teamId),this.svrIdArray.push(e[0].teamInfoArr[p_l].svrId);this.list.array=e[0].teamInfoArr,this.noneLab.visible=0==e[0].teamInfoArr.length,this.noneLab.text=(j_x("2287_814_1896")+j_x("1068_1777_2046")+j_x("2413_1869_281")+j_x(1590))}},b_s.prototype.onRemove=function(){Ydw(this,Laya,LED,l_r)},b_s.prototype.onInviteList=function(){Sdx(this)},b_s.open=function(){Kwq(UIM,b_s)},b_s.prototype.onAdded=function(){Gor(this,DoubleAreaControl,Laya,LED,l_r)},b_s.prototype.onClick=function(e){var p_l=e.target;if(p_l)switch(p_l.name){case"closeBtn":b_s.close()}},b_s.prototype.onItemRender=function(e,p_l){if(e){var p_g=this.teamIdArray[p_l],b_s=this.svrIdArray[p_l];e.setItemData(e.dataSource,p_l,p_g,b_s)}},b_s.close=function(){Gkt(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.teamIdArray=[],p_g.svrIdArray=[],p_g.list.vScrollBarSkin="",p_g.list.scrollBar.elasticDistance=100,p_g.list.scrollBar.elasticBackTime=200,p_g.list.renderHandler=Laya.Handler.create(p_g,p_g.onItemRender,null,!1),p_g.list.itemRender=e.DoubleAreaTeamBeInviteItem,p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g}e.DoubleTeamBiInvitePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.doubleArea.DoubleAreaTmFnPanelUI,__extends(b_s,p_l),b_s.prototype.updateView=function(){var e=DoubleAreaModel.instance._selfTeamInfoArray[0],p_l=e.member;if(p_l){if(p_l.length<2){var p_g=new x_double_pvp_plr_info;p_g.pid=0,p_l.push(p_g)}this.list.array=p_l;var b_s=DoubleAreaModel.instance._teamCaptainId==b_p.playerId;this.leaderBox.visible=b_s,this.memberBox.visible=!b_s,this.teamNameTxt.text=e.name;var d_u=e.power;b_p.getNumSp(NumType.FIGHTING,d_u,this.fightSp,-10),this._teamId=e.teamId}},b_s.prototype.onTeamList=function(){Kpy(this)},b_s.prototype.onClick=function(p_l){var p_g=p_l.target;if(p_g)switch(p_g.name){case"editBox":DoubleAreaModel.instance._teamCaptainId==b_p.playerId?e.DoubleAreaTmRenamePanel.open():b_p.broadcastNotice((j_x("2413_1066_2060")+j_x("1919_1943_383")+j_x("2413_1511_1794")));break;case"exitTeamBtn":b_p.confirm(Utils.$((j_x("236_203_2413")+j_x("1869_1865_383")+j_x("2413_944_252")+j_x("2423_514_2224")+j_x("1409_1073_1122")+"50%"+j_x("2085_1449_236")+j_x("203_2228")+"")),(function(){DoubleAreaControl.ins.reqTeamLeave()}));break;case"disbandBtn":b_p.confirm(Utils.$((j_x("1048_114_383")+j_x("2413_1865_944")+j_x("252_2423_2046")+j_x("514_2224_1409")+j_x("1496_2374")+""+j_x("2085_1449_1624")+j_x("1048_114_2228")+"")),(function(){DoubleAreaControl.ins.reqTeamDissolution()}));break;case"teamCallBtn":e.TeamHelpPanel.open({type:TeamHelpType.TEAM,teamId:this._teamId,copyId:123,aims:TeamAimsType.DoubleArea,teamName:DoubleAreaModel.instance._selfTeamInfoArray[0].name})}},b_s.prototype.onItemRender=function(e,p_l){e&&e.setItemData(e.dataSource,p_l)},b_s.prototype.updateTeamName=function(){Cxi(this,DoubleAreaModel)},b_s.prototype.onAdded=function(){var e=DoubleAreaModel.instance.getMyTeamId();0<e&&DoubleAreaControl.ins.reqSelfTeamInfo(e,2),this.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.UPDATE_DA_SELF_TEAM_INFO,this,this.onTeamList),LED.on(l_r.UPDATE_TEAM_NAME,this,this.updateTeamName)},b_s.prototype.onRemove=function(){Gzv(this,Laya,LED,l_r)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g._teamId=0,p_g.list.renderHandler=Laya.Handler.create(p_g,p_g.onItemRender,null,!1),p_g.list.itemRender=e.DoubleAreaTeamFunItem,p_g.editBox.mouseEnabled=!0,p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g}e.DoubleTeamFunPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.doubleArea.DoubleArea_helpUI,__extends(b_s,p_l),b_s.prototype.onCloseBtnClick=function(){Ewv(b_s)},b_s.open=function(){Ohg(UIM,b_s)},b_s.prototype.onAdded=function(){Yuv(this,Laya)},b_s.prototype.onRemove=function(){Enu(this,Laya)},b_s.close=function(){Egs(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.showPanel.vScrollBarSkin="",e.showPanel.vScrollBar.elasticBackTime=600,e.showPanel.vScrollBar.elasticDistance=200,e}e.DoubleTeamHelpTip=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.doubleArea.DoubleAreaTmBiPanelUI,__extends(b_s,p_l),b_s.prototype.updateView=function(){if(0<DoubleAreaModel.instance._teamInviteArray.length){var e=DoubleAreaModel.instance._teamInviteArray[0].memberArr;this.list.array=e,this.noneLab.visible=e.length<=0}else this.list.array=[],this.noneLab.visible=!0},b_s.open=function(){Ypw(UIM,b_s)},b_s.prototype.onClick=function(e){var p_l=e.target;if(p_l)switch(p_l.name){case"closeBtn":b_s.close()}},b_s.prototype.onRemove=function(){Ibp(this,Laya,LED,l_r)},b_s.prototype.onInviteList=function(){Umx(this)},b_s.prototype.onAdded=function(){Cec(this,DoubleAreaControl,Laya,LED,l_r)},b_s.prototype.onItemRender=function(e,p_l){e&&e.setItemData(e.dataSource,p_l)},b_s.close=function(){Yxk(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.list.vScrollBarSkin="",p_g.list.scrollBar.elasticDistance=100,p_g.list.scrollBar.elasticBackTime=200,p_g.list.renderHandler=Laya.Handler.create(p_g,p_g.onItemRender,null,!1),p_g.list.itemRender=e.DoubleAreaTeamInviteItem,p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g}e.DoubleTeamInvitePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.doubleArea.DoubleAreaTmPanelUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Spe(DoubleAreaControl,this,Laya,LED,l_r)},b_s.prototype.onClick=function(e){var p_l=e.target;if(p_l)switch(p_l.name){case"refreshBtn":this.refRemain(),DoubleAreaModel.instance._teamId=0,DoubleAreaControl.ins.reqPvpTeamList(),b_p.broadcastNotice(Utils.$((j_x("896_1787_402")+j_x(2142))),BroadcastType.ERROR,Utils.Color.NAME_GREEN);break;case"createTeamBtn":var p_g=LgcM.ins.heroVo.name+(j_x("2046_383_2413"));CrossModel.ins.isSmallCross?DoubleAreaControl.ins.reqCreateTeam(p_g):b_p.broadcastNotice((j_x("1662_1998_206")+j_x("155_1186")))}},b_s.prototype.updateView=function(){this.teamIdArray=[];var e=DoubleAreaModel.instance._teamInfoArray.length;if(this.t_null.visible=0==e||0==DoubleAreaModel.instance._teamInfoArray[0].frameArr.length,!this.t_null.visible){var p_l=DoubleAreaModel.instance._teamInfoArray[0].frameArr;if(p_l){for(var p_g=p_l.sort(this.comPareFun),b_s=0;b_s<p_g.length;b_s++)this.teamIdArray.push(p_g[b_s].teamId);this.teamList.array=p_g}}},b_s.prototype.refRemain=function(){var e=this;Laya.timer.loop(1e3,this,(function(){if(e._curTick--,e._curTick<0)return e._curTick=e.MAX,Laya.timer.clearAll(e),e.refreshBtn.gray=!1,e.refreshBtn.mouseEnabled=!0,void(e.refreshBtn.label=Utils.$((j_x("896_1787"))));e.refreshBtn.label=Utils.$("( {1} )",e._curTick)})),this.refreshBtn.gray=!0,this.refreshBtn.mouseEnabled=!1,this.refreshBtn.label=Utils.$("( {1} )",this._curTick)},b_s.prototype.comPareFun=function(e,p_l){return e.member.length==p_l.member.length?p_l.ackPower-e.ackPower:p_l.member.length-e.member.length},b_s.prototype.onRemove=function(){Yap(this,Laya,LED,l_r)},b_s.prototype.onItemRender=function(e,p_l){e&&e.setItemData(e.dataSource,p_l,this.teamIdArray[p_l])},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.MAX=3,p_g._curTick=p_g.MAX,p_g.teamIdArray=[],p_g.teamList.vScrollBarSkin="",p_g.teamList.scrollBar.elasticDistance=100,p_g.teamList.scrollBar.elasticBackTime=200,p_g.teamList.renderHandler=Laya.Handler.create(p_g,p_g.onItemRender,null,!1),p_g.teamList.itemRender=e.DoubleAreaTeamMiem,p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g}e.DoubleTeamListPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.doubleArea.DoubleAreaMainPanelUI,__extends(b_s,p_l),b_s.prototype.show=function(){this.dataSource.isChatOpen||(DoubleAreaModel.instance._teamId=0),DoubleAreaModel.instance.checkHaveTeam()?(this._teamCreatePanel.parent||this.panelBox.addChild(this._teamCreatePanel),this._teamListPanel.parent&&this._teamListPanel.removeSelf(),this._teamCreatePanel.updateView()):(this._teamCreatePanel.parent&&this._teamCreatePanel.removeSelf(),this._teamListPanel.parent||this.panelBox.addChild(this._teamListPanel),this._teamListPanel.updateView())},b_s.prototype.onAdded=function(){Sjw(this,Laya,LED,l_r)},b_s.prototype.destroy=function(e){Cnf(e,p_l,this)},b_s.prototype.onRemove=function(){Laya.timer.clearAll(this),this.off(Laya.Event.CLICK,this,this.onClick),LED.off(l_r.UPDATE_DA_TEAM_LIST,this,this.onTeamListUpdate),LED.off(l_r.UPDATE_DA_SELF_TEAM_INFO,this,this.onUpdateTeamList),LED.off(l_r.DA_TEAM_INFO_UPDATE,this,this.onTeamInfoUpdate),LED.off(l_r.UPDATE_DA_PVP_INFO,this,this.onTeamInfoUpdate),this._teamCreatePanel.parent&&this._teamCreatePanel.removeSelf(),this._teamListPanel.parent&&this._teamListPanel.removeSelf()},b_s.prototype.onUpdateTeamList=function(){this._teamCreatePanel&&this._teamCreatePanel.parent&&this._teamListPanel.parent&&this._teamListPanel.removeSelf(),this._teamCreatePanel.updateView()},b_s.prototype.onClick=function(e){var p_l=e.target;if(p_l)switch(p_l.name){case"closeBtn":b_s.close()}},b_s.prototype.onTeamListUpdate=function(){this._teamListPanel&&this._teamListPanel.parent&&this._teamCreatePanel.parent&&this._teamCreatePanel.removeSelf(),this._teamListPanel.updateView()},b_s.open=function(e){void 0===e&&(e=!1),UIM.open(b_s,["doubleArea.atlas","team.atlas"],{isChatOpen:e},!1,!1)},b_s.prototype.onTeamInfoUpdate=function(){Qkj(this)},b_s.close=function(){Oxe(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g._teamCreatePanel=new e.DoubleTeamFunPanel,p_g._teamListPanel=new e.DoubleTeamListPanel,p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g}e.DoubleTeamMainPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.doubleArea.DoubleArea_rankUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Amk(this,Laya,LED,l_r)},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close()}},b_s.prototype.updateRankInfo=function(){Adz(this,DoubleAreaModel)},b_s.prototype.updateItem=function(e,p_l){e&&e.setItemData(e.dataSource,p_l,this.tab.selectedIndex)},b_s.prototype.onRankList=function(){Clq(this)},b_s.prototype.onTabSelect=function(e,p_l){if(-1!=e)switch(this.rankBox.visible=2!=this.tab.selectedIndex,this.rewardBox.visible=2==this.tab.selectedIndex,e){case 0:DoubleAreaControl.ins.reqGetRank(1);break;case 1:DoubleAreaControl.ins.reqGetRank(2);break;case 2:this.updateReward()}},b_s.open=function(){Oci(UIM,b_s)},b_s.prototype.onRemove=function(){Evu(this,Laya,LED,l_r)},b_s.prototype.updateRwdItem=function(e,p_l){Qfx(e,p_l)},b_s.prototype.updateReward=function(){var e=[];for(var p_l in Config.doublePvp_rankRewards){var p_g=Config.doublePvp_rankRewards[p_l];e.push(p_g.id)}this.rewardList.array=e},b_s.close=function(){Cvy(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.tab.selectHandler=Laya.Handler.create(p_g,p_g.onTabSelect,null,!1),p_g._tab=new p_c(p_g.tab),p_g.rankList.vScrollBarSkin="",p_g.rankList.scrollBar.elasticDistance=50,p_g.rankList.scrollBar.elasticBackTime=50,p_g.rankList.itemRender=e.DoubleAreaRankItem,p_g.rankList.renderHandler=Laya.Handler.create(p_g,p_g.updateItem,null,!1),p_g.rankList.selectEnable=!0,p_g.rewardList.vScrollBarSkin="",p_g.rewardList.scrollBar.elasticDistance=50,p_g.rewardList.scrollBar.elasticBackTime=50,p_g.rewardList.itemRender=e.DoubleAreaRewardItem,p_g.rewardList.renderHandler=Laya.Handler.create(p_g,p_g.updateRwdItem,null,!1),p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g}e.DoubleTeamRankPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.doubleArea.DoubleArea_Batter_cellUI,__extends(d_u,p_l),d_u.prototype.updateItem=function(e,p_l){e.name="box"+p_l;var p_g=e.getChildByName("icon"),b_s=e.getChildByName("shade");e.mouseEnabled=!0;var d_u=Config.clone_clone[e.dataSource];d_u?(p_g.skin=Resource.ResUrl.getIconUrl(d_u.headImg),MirrorSelfModel.ins.getSelfInfoMap[d_u.id],e.on(Laya.Event.CLICK,this,this.openTip,[e.dataSource]),b_s.visible=!1,p_g.alpha=1):(p_g.skin="res/ui/common/wenhao1.png",p_g.alpha=0,e.off(Laya.Event.CLICK,this,this.openTip),b_s.visible=!1)},d_u.prototype.imgMoveTo=function(){this._moveImg&&this._moveImg.parent&&(this._moveImg.x=Laya.stage.mouseX-this._moveImg.texture.width/2,this._moveImg.y=Laya.stage.mouseY-this._moveImg.texture.height/2)},d_u.prototype.onMouseMove=function(e){Ekj(e,this)},d_u.prototype.openTip=function(p_l){Oye(p_l,e)},d_u.prototype.removeImg=function(){this._moveImg&&this._moveImg.parent&&(this._moveImg.parent.removeChild(this._moveImg),this._moveImg.destroy(!0)),this._moveImg=null},d_u.prototype.onMouseUp=function(p_l){var p_g=p_l.target;switch(p_g.name){case"closeBtn":case"backBtn":this._moveImg&&this._moveImg.parent||e.DoubleAreaBatterArrayPanel.close()}var b_s=p_g;if(b_s&&""!=b_s.name&&this._moveImg&&this._moveImg.parent&&this.list.contains(b_s)){var d_u=this._moveImg.dataSource;if(-1!=d_u){var b_e,d_m=b_s.name.match(/\d+/g).toString();b_e=parseInt(d_m);var d_w,f_t=this._cloneArr.indexOf(d_u);d_w=this._cloneArr[b_e],this._cloneArr[b_e]=this._cloneArr[f_t],this._cloneArr[f_t]=d_w,this._pid==b_p._playerId?DoubleAreaControl.ins.reqChangeCloneFormation(this.selectIndex+1,this._cloneArr):DoubleAreaControl.ins.reqChangeMemberCloneFormation(this.selectIndex+1,this._cloneArr)}}this.removeImg()},d_u.prototype.onMouseDown=function(e){var p_l=e.target;if(p_l&&""!=p_l.name&&null!=p_l.dataSource&&this.list.contains(p_l)){var p_g=p_l.getChildByName("icon");p_g&&p_g.visible?(this._moveImg=Resource.ResManager.Instance.getImg(p_g.skin,this._moveImg),this._moveImg.dataSource=p_l.dataSource,this._moveImg.name=p_g.name,Laya.stage.addChild(this._moveImg),this.imgMoveTo()):this.removeImg()}},d_u.prototype.onClick=function(p_l){var p_g=p_l.target;if(p_g)switch(p_g.name){case"changeBtn":if(this._pid==b_p._playerId){e.DoubleAreaSwapPanel.open(this.selectIndex+1);break}b_p.broadcastNotice((j_x("2462_1919_1679")+j_x("1943_2413_1738")+j_x("2046_2224_1920")))}},d_u.prototype.onAdded=function(){Sxt(this,Laya)},d_u.prototype.setItemData=function(e,p_l,p_g){var b_s="";if(0!=e.pid){this._pid=e.pid;var d_u,b_e=e.pid==b_p._playerId;b_e?(b_s=(j_x("352_2046_2224")+j_x(1920)),this.changeBtn.gray=!1):(b_s=e.name+(j_x("2046_2224_1920")),this.changeBtn.gray=!0);var d_m=[],d_w=0==(this.selectIndex=p_g)?e.ackCloneArr:e.defCloneArr;d_w&&(d_m=1==d_w.length?d_w.concat(0).concat(0):2==d_w.length?d_w.concat(0):d_w),this.list.refresh(),this.list.array=d_m,this._cloneArr=d_m,this.cloneNameTxt.text=b_s,this.fightBox.x=100+15*b_s.length,(d_u=0==p_g?e.ackPower:e.defPower)&&b_p.getNumSp(NumType.FIGHTING,d_u,this.fightSp,-10),this.changeRed.visible=DoubleAreaModel.instance.isAtcBatterRed(d_w)&&b_e}},d_u.prototype.onRemove=function(){Gpa(this,Laya)},d_u);function d_u(){var e=p_l.call(this)||this;return e.selectIndex=0,e._pid=0,e._cloneArr=[],e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.list.selectEnable=!0,e.list.array=null,e.list.renderHandler=p_g.create(e,e.updateItem,null,!1),e.mouseEnabled=!0,e}e.DoubleAreaBatterItem=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.doubleArea.DoubleArea_fight_cellUI,__extends(b_s,p_l),b_s.prototype.initialize=function(){Gfk(p_l,this)},b_s.prototype.tweenComplete1=function(){Ubf(this)},b_s.prototype.setData=function(e,p_l,p_g){var b_s;void 0===p_l&&(p_l=!0),void 0===p_g&&(p_g=!1),this.isNodata=p_l,this.isFirst=p_g,this.updatePos(p_g);var d_u=0;b_s=p_l?"number"==typeof e?(this.clip1.index=Math.floor(e/10),this.clip2.index=e%10,d_u=Math.floor(e/10),this.teamBox.visible=!0,this.challengeBox.visible=!0,this.challengebtn.visible=!1,this.player1Head.visible=!1,this.player2Head.visible=!1,this.player1Name.visible=!1,this.player2Name.visible=!1,Config.doublePvp_points[e].extraPoints):(this.clip1.index=Math.floor(e.rank/10),this.clip2.index=e.rank%10,d_u=Math.floor(e.rank/10),this.teamTxt.text=e.name,this._teamId=e.teamId,this.player1Head.skin=Resource.ResManager.getHeadUrl(e.member[0].entryId,e.member[0].headIcon),this.player1Name.text=e.member[0].name,1<e.member.length?(this.player2Head.skin=Resource.ResManager.getHeadUrl(e.member[1].entryId,e.member[1].headIcon),this.player2Name.text=e.member[1].name):(this.player2Head.skin=null,this.player2Name.text=""),this.challengeBox.visible=!0,this.noneImg.visible=!1,this.buy_red.visible=!1,this.add.visible=!0,Config.doublePvp_points[e.rank].extraPoints):(this.clip1.index=Math.floor(e/10),this.clip2.index=e%10,d_u=Math.floor(e/10),this.teamBox.visible=!1,this.challengeBox.visible=!0,this.challengebtn.visible=!1,this.player1Head.visible=!1,this.player2Head.visible=!1,this.player1Name.visible=!1,this.player2Name.visible=!1,Config.doublePvp_points[e].extraPoints);var b_e=Utils.$((j_x("48_383_1045")+j_x("1516_174_1741")+"{1}"),Utils.setColor(Utils.$("{1}","+"+b_s+(j_x("514_2224"))),"#00802e"));this.showTxt.innerHTML=b_e,this.clip1.visible=0<d_u},b_s.prototype.updatePos=function(e){e?this.scale(.75,.75):this.scale(.53,.53),this.showTxt.visible=!1,this.teamBox.visible=!0,this.lookBtn.visible=!0,this.backBtn.visible=!1},b_s.prototype.onRemove=function(){Yiq(this,Laya)},b_s.prototype.onAdded=function(){Ybg(this,Laya)},b_s.prototype.tweenComplete=function(){Gzw(this)},b_s.prototype.onMouseClick=function(e){var p_l=e.target;switch(this.dataSource,p_l.name){case"lookBtn":this.contentBox.visible=!1,this.isFirst,Laya.Tween.to(this.bgImg,{scaleX:-1},500,null,Laya.Handler.create(this,this.tweenComplete,[this],!0));break;case"back":this.contentBox.visible=!1,this.isFirst,Laya.Tween.to(this.bgImg,{scaleX:1},500,null,Laya.Handler.create(this,this.tweenComplete1,[this],!0));break;case"challengebtn":if(DoubleAreaModel.instance._endTime-SyncTime.serverTime/1e3<0)return void b_p.broadcastNotice((j_x("1787_252_2423")+j_x("206_155_1186")+""+j_x("814_799_48")+j_x(383)));var p_g=Config.global[GlobalDefine.doublePvp_fameHall_minPoints].i_info,b_s=Config.global[GlobalDefine.doublePvp_challenge_times].t_info[0],d_u=Config.global[GlobalDefine.doublePvp_extra_challenge_times].t_info[0],b_e=BagModel.instance.getItemCountByItemID(d_u,BagTypeDefine.BAG_TYPE_ITEM),d_m=DoubleAreaModel.instance._buyChallengeCount;if(DoubleAreaModel.instance._teamIntegral<p_g){var d_w=(j_x("514_2224_1117")+j_x(1012))+p_g+(j_x("192_1067_2060")+j_x("1919_48_383")+j_x("1511_455_1077"));return void b_p.broadcastNotice(d_w,1)}if(DungeonModel.instance.isInFb)return void b_p.broadcastNotice((j_x("1749_2035_1443")+j_x("944_283")+""+j_x("814_799_48")+j_x(383)));if(0!=this._teamId){if(this._teamId==DoubleAreaModel.instance._selfTeamInfoArray[0].teamId)return void b_p.broadcastNotice((j_x("2462_1919_48")+j_x("383_2082_364")+j_x("383_2413")));if(DoubleAreaModel.instance._challengeNum>=b_s+d_m){if(1<=b_e)return DoubleAreaControl.ins.reqChangeTeam(this._teamId,2),void DoubleAreaControl.ins.reqChangeMap();var f_t=Config.global[GlobalDefine.doublePvp_extra_challenge_times].t_info[0];return r_f.instance.isWindow(f_t),void b_p.broadcastNotice((j_x("1971_1896_48")+j_x("383_235_2348")+""+j_x("1777_320_1355")+j_x("2420_48_383")+j_x("235_2348")))}DoubleAreaControl.ins.reqChangeTeam(this._teamId,1),DoubleAreaControl.ins.reqChangeMap()}}},b_s);function b_s(){var e=p_l.call(this)||this;return e.isNodata=!1,e.isFirst=!1,e._teamId=0,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.showTxt.style.fontSize=28,e.showTxt.style.font=GConfig.inst.font,e.showTxt.style.align="center",e.showTxt.style.color="#42435a",e.showTxt.style.wordWrap=!1,e.showTxt.style.leading=10,e.showTxt.style.valign="middle",e}e.DoubleAreaFightItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.doubleArea.DoubleAreace_pkCellUI,__extends(b_s,p_l),b_s.prototype.setItemData=function(e,p_l){var p_g=DoubleAreaModel.instance._fiends;this.fieldsTxt.text=(j_x(573))+(e+1)+(" "+j_x(836));var b_s=p_g<e;if(this.wenhaoImg1.visible=b_s,this.wenhaoImg2.visible=b_s,this.wenhaoImg3.visible=b_s,this.wenhaoImg4.visible=b_s)return this.box1.dataSource=0,this.updateItem(this.box1,0),this.box2.dataSource=0,this.updateItem(this.box2,1),this.box3.dataSource=0,this.updateItem(this.box3,2),this.box4.dataSource=0,void this.updateItem(this.box4,3);var d_u=DoubleAreaHelp.getMyTeamCloneArr(e),b_e=DoubleAreaModel.instance.getOtherTeamCloneArr(e);this.box1.dataSource=d_u[0],this.updateItem(this.box1,0),this.box2.dataSource=d_u[1],this.updateItem(this.box2,1),this.box3.dataSource=b_e[0],this.updateItem(this.box3,2),this.box4.dataSource=b_e[1],this.updateItem(this.box4,3)},b_s.prototype.updateItem=function(e,p_l){var p_g=e.getChildByName("icon"),b_s=e.getChildByName("shade"),d_u=Config.clone_clone[e.dataSource];d_u?(p_g.skin=Resource.ResUrl.getIconUrl(d_u.headImg),MirrorSelfModel.ins.getSelfInfoMap[d_u.id],b_s.visible=!1):(p_g.skin=null,b_s.visible=!0)},b_s.prototype.onAdded=function(){},b_s.prototype.onRemove=function(){},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.DoubleAreaPkItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.doubleArea.DoubleAreaRank_CellUI,__extends(b_s,p_l),b_s.prototype.setItemData=function(e,p_l,p_g){this.head_sp2.visible=""!=e.memberName,this.player2Head.visible=""!=e.memberName,this.player1Head.skin=Resource.ResManager.getHeadUrl(e.captainEntryId,e.captainHeadIcon),this.player2Head.skin=""!=e.memberName?Resource.ResManager.getHeadUrl(e.memberEntryId,e.memberHeadIcon):null,this.player1Name.text=e.captainName,this.player2Name.text=e.memberName,this.changeBtn.visible=0==p_g,this._teamId=e.teamId,this.scoreTxt.text=e.inc,this.teamNameTxt.text="s."+e.svrId+e.name,this.clip1.index=Math.floor(e.rank/10),this.clip2.index=e.rank%10,this.clip3.index=Math.floor(e.rank/100),this.clip1.visible=0<Math.floor(e.rank/10),this.clip3.visible=0<Math.floor(e.rank/100);var b_s=Config.fashion_fashion[e.captainFashionAvatar];if(b_s&&b_s.avatar){var d_u=b_s.avatar[0];d_u=Resource.ResUrl.getIconUrl(d_u),this.head_sp1=Resource.ResManager.Instance.getImg(d_u,this.head_sp1)}var b_e=Config.fashion_fashion[e.memberFashionAvatar];b_e&&b_e.avatar&&(d_u=b_e.avatar[0],d_u=Resource.ResUrl.getIconUrl(d_u),this.head_sp2=Resource.ResManager.Instance.getImg(d_u,this.head_sp2))},b_s.prototype.changeBtnEvent=function(){if(DoubleAreaModel.instance._endTime-SyncTime.serverTime/1e3<0)b_p.broadcastNotice((j_x("1787_252_2423")+j_x("206_155_1186")+""+j_x("814_799_48")+j_x(383)));else if(DungeonModel.instance.isInFb)b_p.broadcastNotice((j_x("1749_2035_1443")+j_x("944_283")+""+j_x("814_799_48")+j_x(383)));else{var e=Config.rank_ranklist[RankType.DOUBLE_AREA_RANK].condition;if(DoubleAreaModel.instance._teamIntegral<e){var p_l=(j_x("514_2224_1117")+j_x(1012))+e+(j_x("192_1067_2060")+j_x("1919_48_383")+j_x("226_2046_383")+j_x(2413));b_p.broadcastNotice(p_l,1)}else{var p_g=Config.global[GlobalDefine.doublePvp_challenge_times].t_info[0],b_s=Config.global[GlobalDefine.doublePvp_extra_challenge_times].t_info[0],d_u=BagModel.instance.getItemCountByItemID(b_s,BagTypeDefine.BAG_TYPE_ITEM),b_e=DoubleAreaModel.instance._buyChallengeCount;if(0!=this._teamId){if(this._teamId==DoubleAreaModel.instance._selfTeamInfoArray[0].teamId)return void b_p.broadcastNotice((j_x("2462_1919_48")+j_x("383_2082_364")+j_x("383_2413")));if(DoubleAreaModel.instance._challengeNum>=p_g+b_e){if(1<=d_u)return DoubleAreaControl.ins.reqChangeTeam(this._teamId,2),void DoubleAreaControl.ins.reqChangeMap();b_p.broadcastNotice((j_x("1971_1896_48")+j_x("383_235_2348")+""+j_x("1777_320_1355")+j_x("2420_48_383")+j_x("235_2348")));var d_m=Config.global[GlobalDefine.doublePvp_extra_challenge_times].t_info[0];return void r_f.instance.isWindow(d_m)}DoubleAreaControl.ins.reqChangeTeam(this._teamId,1),DoubleAreaControl.ins.reqChangeMap()}}}},b_s.prototype.onAdded=function(){Wfs(this,Laya)},b_s.prototype.onRemove=function(){Qws(this,Laya)},b_s);function b_s(){var e=p_l.call(this)||this;return e._teamId=0,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.DoubleAreaRankItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.doubleArea.DoubleAreaRecord_CellUI,__extends(b_s,p_l),b_s.prototype.setData=function(e,p_l){if(e){this._recordId=e.recordId;var p_g=1==e.isWin,b_s=0==e.isWin,d_u=2==e.isWin,b_e=1==e.matchType,d_m=2==e.matchType,d_w=(e.matchType,0==p_l?e.ackIntegral:e.defIntegral),f_t=0==p_l?e.defIntegral:e.ackIntegral,v_z=e.ackMemberName,d_h=""==v_z?v_z:"+"+v_z;this.playerNameTxt.text=1==p_l?""+e.ackTeamName+"  ("+e.ackCaptainName+d_h+")":""+e.ackName+"",this.fightInfoTxt.text=(j_x("1045_2148_836")+j_x(2348))+e.winNum+"/3";var r_t=0<d_w?"+"+d_w:0==d_w?"-0":d_w,t_n=0<f_t?"+"+f_t:0==f_t?"-0":f_t;this.myScoreTxt.text=p_g||d_u?r_t:d_w,this.otherScoreTxt.text=t_n;var f_y,p_q=p_g?(j_x("1045_1516")):b_s?(j_x("1011_1061")):d_u?(j_x("325_197")):"";f_y=""==e.defMemberName?Utils.$((j_x("2035_1996")+"s.{1}  {2}  ({3})"+j_x("2046_1653_383")+j_x(283)+"{4}"),e.defSvrId,e.defTeamName,e.defCaptainName,p_q):Utils.$((j_x("2035_1996")+"s.{1}  {2}  ({3} + {4})"+j_x("2046_1653_383")+j_x(283)+"{5}"),e.defSvrId,e.defTeamName,e.defCaptainName,e.defMemberName,p_q);var h_h=Utils.$((j_x("2035_1996_1749")+j_x("2046_383_2413")+j_x("1653_383_283")+"{1}"),p_q),n_j=Utils.$((j_x("2035_1511_455")+j_x("1404_883_1749")+j_x("2046_383_2413")+j_x("571_2165_48")+j_x("383_1426")+"{1}"),p_q);this.fightResultTxt.text=0==p_l?f_y:b_e?h_h:n_j,this.revengeBtn.visible=0!=p_l&&d_m&&p_g,this.revengeBtn.label=0==e.isRevenge?(j_x("62_84")):(j_x("1300_62_84")),this._isRevenge=1==e.isRevenge,this.timeLabel.text=Utils.formatTimeStr7(e.time)}},b_s.prototype.onRevenge=function(){if(this._isRevenge)b_p.broadcastNotice((j_x("1749_1300_62")+j_x("84_389_855")+j_x(386)));else if(DungeonModel.instance.isInFb)b_p.broadcastNotice((j_x("1749_2035_1443")+j_x("944_283")+""+j_x("814_799_62")+j_x(84)));else{var e=Config.global[GlobalDefine.doublePvp_revengeItem].t_info[0];if(BagModel.instance.getItemCountByItemID(e,BagTypeDefine.BAG_TYPE_ITEM)<1)return b_p.broadcastNotice((j_x("62_84_2217")+j_x("1841_2462_1779"))),void r_f.instance.isWindow(e);DoubleAreaControl.ins.reqRevenge(this._recordId),DoubleAreaControl.ins.reqChangeMap()}},b_s.prototype.onAdded=function(){Ski(this,Laya)},b_s.prototype.onRemove=function(){Ska(this,Laya)},b_s);function b_s(){var e=p_l.call(this)||this;return e._recordId=0,e._isRevenge=!1,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.DoubleAreaRecordItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.doubleArea.DoubleAreaRankReward_CellUI,__extends(b_s,p_l),b_s.prototype.setData=function(e){Aod(e,Config,this,b_p)},b_s.prototype.renderItem=function(e,p_l){e&&(e.isShowName=!1,e.selectImg.removeSelf(),e.setItemData(e.dataSource))},b_s.prototype.onAdded=function(){},b_s.prototype.onRemove=function(){},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.rewardList.renderHandler=Laya.Handler.create(p_g,p_g.renderItem,null,!1),p_g.rewardList.itemRender=e.ItemBox,p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g}e.DoubleAreaRewardItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.doubleArea.DoubleAreaceCellUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Aix(this,Laya)},b_s.prototype.onRemove=function(){Omv(this,Laya)},b_s.prototype.setItemData=function(e,p_l,p_g){void 0===p_g&&(p_g=0);var b_s=Config.clone_clone[e];this.index=p_g;var d_u="";if(b_s){var b_e=MirrorSelfModel.ins.getSelfInfoMap[b_s.id];d_u=b_e?b_s.name+"lv."+b_e.lv:b_s.name,this.itemName.text=d_u}var d_m=DoubleAreaHelp.getCloneIsGoBatter(e,p_g);this.wearBtn.visible=!d_m,this.goToBtn.visible=d_m,this.skillDesTxt.innerHTML=(j_x("2243_1919_407")+j_x(1398)+"")+SkillModel.instance.getSkillDesc(b_s.superSkill,1),this.fight.text=MirrorSelfModel.ins.getBodyFightById(e).toString(),this.cloneBox.dataSource=e,this.updateItem(this.cloneBox,1);var d_w=DoubleAreaHelp.getHaveGoBatterCloneArray(this.index);DoubleAreaModel.instance._cloneNumArray=[];for(var f_t=0,v_z=d_w;f_t<v_z.length;f_t++){var d_h=v_z[f_t];0!=d_h&&DoubleAreaModel.instance._cloneNumArray.push(d_h)}},b_s.prototype.updateItem=function(e,p_l){var p_g=e.getChildByName("icon"),b_s=e.getChildByName("shade"),d_u=Config.clone_clone[e.dataSource];d_u&&(p_g.skin=Resource.ResUrl.getIconUrl(d_u.headImg),MirrorSelfModel.ins.getSelfInfoMap[d_u.id]&&(b_s.visible=!1))},b_s.prototype.onMouseClick=function(e){var p_l=e.target,p_g=this.cloneBox.dataSource,b_s=DoubleAreaModel.instance._cloneNumArray;switch(p_l.name){case"wearBtn":if(p_g){if(3<=b_s.length)return void b_p.broadcastNotice((j_x("1081_2307_1067")+j_x(980)+"3"+j_x("844_2224_1920")));this.goToBtn.visible=!0,this.wearBtn.visible=!1,b_s&&0<b_s.length&&-1==b_s.indexOf(p_g)&&b_s.push(p_g),0==b_s.length&&b_s.push(p_g)}break;case"goToBtn":if(p_g){if(b_s.length<=1)return void b_p.broadcastNotice((j_x("1081_1122_1067")+j_x(980)+"1"+j_x("844_2224_1920")));if(this.goToBtn.visible=!1,this.wearBtn.visible=!0,0<=b_s.length){var d_u=b_s.indexOf(p_g);-1!=d_u&&b_s.splice(d_u,1)}}}},b_s);function b_s(){var e=p_l.call(this)||this;return e.isGoBatter=!1,e.index=0,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.skillDesTxt.style.fontSize=20,e.skillDesTxt.style.font=GConfig.inst.font,e.skillDesTxt.style.align="left",e.skillDesTxt.style.color="#42435a",e.skillDesTxt.style.wordWrap=!0,e.skillDesTxt.style.leading=10,e.skillDesTxt.style.valign="center",e}e.DoubleAreaSwapItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.doubleArea.DoubleAreaTmBiCellUI,__extends(d_u,p_l),d_u.prototype.setItemData=function(e,p_l,p_g,b_s){var d_u=Resource.ResManager.getHeadUrl(e.member[0].entryId,e.member[0].headIcon);this.headIcon.skin=d_u,this.teamName.text=e.name,this.leaderNameTxt.text="s."+b_s+Utils.$((j_x("2413_1066")+"{1}"),e.member[0].name),this.fightTxt.text=e.member[0].ackPower.toString(),this.teamId=p_g;var b_e=Config.fashion_fashion[e.member[0].fashionAvatar];if(b_e&&b_e.avatar){var d_m=b_e.avatar[0];d_m=Resource.ResUrl.getIconUrl(d_m),this.headSp=Resource.ResManager.Instance.getImg(d_m,this.headSp)}var d_w=e.member[0].ackCloneArr;this.cloneList.array=d_w},d_u.prototype.deleteBevite=function(e){var p_l=DoubleAreaModel.instance._teamBeInviteArray[0].teamInfoArr;if(!p_l)return null;for(var p_g=p_l.length,b_s=0;b_s<p_g;b_s++)p_l[b_s].teamId==e&&p_l.splice(b_s,1);LED.event(l_r.DA_BE_INVITE)},d_u.prototype.updateItem=function(e,p_l){var p_g=e.getChildByName("icon"),b_s=e.getChildByName("shade"),d_u=Config.clone_clone[e.dataSource];d_u&&(p_g.skin=Resource.ResUrl.getIconUrl(d_u.headImg),MirrorSelfModel.ins.getSelfInfoMap[d_u.id],b_s.visible=!1)},d_u.prototype.onClick=function(p_l){var p_g=p_l.target;if(p_g){var b_s=p_g.name,d_u=DoubleAreaControl.ins;switch(b_s){case"rejectBtn":d_u.reqRefuseTeamInvite(this.teamId),this.deleteBevite(this.teamId);break;case"joinBtn":if(DoubleAreaModel.instance.checkHaveTeam())return b_p.broadcastNotice((j_x("1749_1300_1896")+j_x("383_2413"))),void this.deleteBevite(this.teamId);if(!MirrorSelfModel.ins.isActivate(1))return void b_p.broadcastNotice((j_x("1749_1768_206")+j_x("2335_1796_2224")+j_x(1920)+"["+j_x("189_1171_2198")+"]"));if(DoubleAreaModel.instance.checkTeamIsFull(this.teamId))return b_p.broadcastNotice((j_x("389_383_2413")+j_x("1300_1463_455"))),void this.deleteBevite(this.teamId);d_u.reqAccptTeamInvite(this.teamId),this.deleteBevite(this.teamId),e.DoubleTeamBiInvitePanel.close(),e.DoubleTeamMainPanel.open()}}},d_u.prototype.onAdded=function(){Kpz(this,Laya)},d_u.prototype.onRemove=function(){Iqq(this,Laya)},d_u);function d_u(){var e=p_l.call(this)||this;return e.teamId=0,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.cloneList.selectEnable=!0,e.cloneList.renderHandler=p_g.create(e,e.updateItem,null,!1),e}e.DoubleAreaTeamBeInviteItem=b_s}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.doubleArea.DoubleAreaTmCellUI,__extends(d_u,p_l),d_u.prototype.updateItem=function(e,p_l){var p_g=e.getChildByName("icon"),b_s=e.getChildByName("shade"),d_u=Config.clone_clone[e.dataSource];d_u?(p_g.skin=Resource.ResUrl.getIconUrl(d_u.headImg),MirrorSelfModel.ins.getSelfInfoMap[d_u.id]):p_g.skin=null,b_s.visible=!1},d_u.prototype.checkPlayerInfo=function(e){Kif(e,n_d)},d_u.prototype.chatPrivate=function(p_l){Ogk(p_l,e)},d_u.prototype.setItemData=function(e,p_l){this._teamMemberVO=e;var p_g=DoubleAreaModel.instance._teamCaptainId==e.pid,b_s=DoubleAreaModel.instance._teamCaptainId==b_p.playerId;if(this._isLeader=p_g,0==e.pid)this.noInfoBox.visible=!1,this.inviteBtn.visible=b_s,this.kickBtn.visible=!1;else{this.noInfoBox.visible=!0,this.inviteBtn.visible=!1,this.playerNameTxt.text=e.name,this.leaderIcon.visible=p_g,this.kickBtn.visible=b_s&&!p_g,LgcM.ins.heroVo;var d_u=e.entryId,b_e=e.headIcon,d_m=Resource.ResManager.getHeadUrl(d_u,b_e);this.headIcon.skin=d_m;var d_w=e.ackCloneArr;this.cloneList.array=d_w,z_j.centerList(this.cloneList,d_w,3,this.width,0)}},d_u.prototype.onAdded=function(){Sql(this,Laya)},d_u.prototype.addFriend=function(e){Qiy(e,FriendModel)},d_u.prototype.onClick=function(p_l){var p_g=p_l.target;if(p_g)switch(p_g.name){case"inviteBtn":e.DoubleTeamInvitePanel.open();break;case"kickBtn":this._teamMemberVO&&b_p.confirm(Utils.$((j_x("2413_2141_1016")+j_x("155_383_2413")+j_x("1865_944_252")+j_x("2423_2046_514")+j_x("2224_1409_1073")+j_x(1122)+"50%"+j_x("2085_1449_1624")+j_x(1409)+"{1}"+j_x("1777_1016_383")+j_x("2413_2228")+"?"),this._teamMemberVO.name),(function(){DoubleAreaControl.ins.reqTeamKick()}));break;case"headIcon":if(this._isLeader)return;var b_s=this._teamMemberVO.pid,d_u=[];d_u.push(Laya.Handler.create(this,this.checkPlayerInfo,[b_s])),d_u.push(Laya.Handler.create(this,this.chatPrivate,[b_s])),d_u.push(Laya.Handler.create(this,this.addFriend,[b_s])),e.PopupMenu.open(this._names,d_u)}},d_u.prototype.onRemove=function(){Gan(this,Laya)},d_u);function d_u(){var e=p_l.call(this)||this;return e._isLeader=!1,e._names=[(j_x("5_2450_281")+j_x(1590)),(j_x("227_153")),(j_x("223_803_257")+j_x(1738))],e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.cloneList.renderHandler=p_g.create(e,e.updateItem,null,!1),e}e.DoubleAreaTeamFunItem=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.team.TeamInviteCellUI,__extends(b_s,p_l),b_s.prototype.setItemData=function(e,p_l){Ujl(e,p_l,Resource,this,FriendModel)},b_s.prototype.deleteInvite=function(e){var p_l=DoubleAreaModel.instance._teamInviteArray[0].memberArr;if(!p_l)return null;for(var p_g=p_l.length,b_s=0;b_s<p_g;b_s++)if(p_l[b_s].pid==e)return p_l.splice(b_s,1),DoubleAreaModel.instance._teamInviteArray[0].memberArr=p_l,void LED.event(l_r.UPDATE_DA_INVITE_LIST)},b_s.prototype.onAdded=function(){Oee(this,Laya)},b_s.prototype.onClick=function(e){var p_l=e.target;if(p_l)switch(p_l.name){case"inviteBtn":DoubleAreaControl.ins.reqInvite(this._pid),b_p.broadcastNotice((j_x("1068_1777_402")+j_x(2142)+""+j_x("1777_15_1427")+j_x("1653_2221_495")+j_x(398))),this.deleteInvite(this._pid)}},b_s.prototype.onRemove=function(){Wyg(this,Laya)},b_s);function b_s(){var e=p_l.call(this)||this;return e._pid=0,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.DoubleAreaTeamInviteItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.doubleArea.DoubleAreaTeamCellUI,__extends(b_s,p_l),b_s.prototype.setItemData=function(e,p_l,p_g){e&&(this.numTxt.text=e.member.length+"/2",this.fightNumTxt.text=e.ackPower,this.teamNameTxt.text=e.name,this.leaderTxt.text="s."+e.svrId+e.member[0].name,this._teamId=p_g)},b_s.prototype.onClick=function(e){var p_l=e.target;if(p_l)switch(p_l.name){case"joinBtn":DoubleAreaControl.ins.reqTeamJoin(this._teamId)}},b_s.prototype.onAdded=function(){Mwy(this,Laya)},b_s.prototype.onRemove=function(){Grz(this,Laya)},b_s);function b_s(){var e=p_l.call(this)||this;return e._teamId=0,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.DoubleAreaTeamMiem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.ride.ridePerDetailUI,__extends(b_s,p_l),b_s.open=function(e){Mct(e,UIM,b_s)},b_s.prototype.onAdded=function(){Ceg(Laya,this)},b_s.prototype.onRemove=function(){Khl(Laya,this)},b_s.prototype.onStageClick=function(p_l){p_l&&p_l.target==this||e.RidePerDetailPanel.close()},b_s.prototype.delayAddListener=function(){Wsh(Laya,this)},b_s.prototype.updateView=function(){this._id=this.dataSource;var e=Config.dragon_dragon[this._id];if(e){var p_l=b_l.instance.getDragonPropInfo(this._id),p_g=b_l.instance._dragonInfo[this._id];this.propList.array=p_l,this.pos((this.stage.width-this.width)/2,200),this.unActive.visible=!p_g,this.nameLab.text=e.desc+(j_x("613_233")+"")}},b_s.close=function(){Sgw(UIM,b_s)},b_s.prototype.updateProItem=function(e,p_l){Sez(e,p_l)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g._id=0,p_g.mouseEnabled=!0,p_g.propList.itemRender=e.PropBox,p_g.propList.renderHandler=Laya.Handler.create(p_g,p_g.updateProItem,[],!1),p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g}e.DragonFightTips=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.dragonFoster.dragonItemUI,__extends(b_s,p_l),b_s.prototype.setData=function(e){var p_l=this.dataSource,p_g=b_l.instance._dragonInfo[p_l.id],b_s=this.iconBox.getChildByName("rideSp"),d_u=0;this.rp.visible=b_l.instance.isHaveRedPoint(p_l.id),p_g?(this.t_lv.text=0<p_g.lv?Utils.$("lv.{1}",p_g.lv):"",this.shade.visible=!1,d_u=p_g.star):(this.t_lv.text="",this.shade.visible=!0),TalismanModel.instance.changeActStar(this.starBox,d_u),1==p_l.quality||2==p_l.quality||3==p_l.quality?this.t_name.color=Config.color[2001].color:this.t_name.color=Resource.ResManager.getQualityColor(p_l.quality),this.bg.index=p_l.quality-1;var b_e=this.iconBox.getChildByName("effect");Resource.ResManager.Instance.getImg(Resource.ResUrl.getIconUrl(p_l.icon),b_s),(b_e=Resource.ResManager.getQualityEft(p_l.quality,b_e))&&(b_e.name="effect",b_e.index=0,b_e.play(),null===b_e.parent&&this.iconBox.addChild(b_e),b_e.on(Laya.Event.LOADED,this,this.resetEffectPos,[b_e])),this.t_name.text=p_l.desc;var d_m=Resource.ResUrl.getIconUrl(p_l.icon);this.rideSp=Resource.ResManager.Instance.getImg(d_m,this.rideSp),this.i_equip.visible=b_l.instance.wornDragon==p_l.id},b_s.prototype.onStarListRender=function(e,p_l){var p_g=e.getChildByName("starClip"),b_s=e.dataSource;p_g.index=b_s},b_s.prototype.selectImage=function(e){Mrq(e,this)},b_s.prototype.resetEffectPos=function(e){e&&(e.off(Laya.Event.LOADED,this,this.resetEffectPos),e.x=(102-e.width>>1)-8,e.y=(102-e.height>>1)-8)},b_s);function b_s(){var e=p_l.call(this)||this;return e.y=5,e}e.DragonFosterItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.dragonFoster.dragonFosterPanelUI,__extends(d_u,p_l),d_u.open=function(){Yrh(UIM,d_u)},d_u.prototype.checkCanActive=function(){var e=Config.dragon_dragon[this.getCurrentSelectId(0)];if(!e)return!1;var p_l=!1;if(e.stateActive){if(!(p_l=StateModel.instance.isMore(e.stateActive))){var p_g=e.Desc||""!=e.Desc?e.Desc:(j_x("1117_1012_381")+j_x("843_2335_1796"));b_p.broadcastNotice(p_g)}}else if(e.itemActive){var b_s=e.itemActive[0][0],d_u=e.itemActive[0][1];p_l=!(BagModel.instance.getItemCountByItemID(b_s,BagTypeDefine.BAG_TYPE_ITEM)<d_u&&(r_f.instance.isWindow(b_s),1))}return p_l},d_u.prototype.updateUpStar=function(e){e&&0!==e.star?this.starRp1.visible=b_l.instance.dragonIsUpStarEx(e.star,e.id,!1):this.starRp1.visible=!1},d_u.prototype.stopAutoFeed=function(){Asu(this)},d_u.prototype.onAdded=function(){Wqf(this,Laya,LED,l_r,b_l)},d_u.prototype.updateInfosList=function(){this.dragonList.array=b_l.instance.allDragonCfg,this.dragonList.selectedIndex<0?this.dragonList.selectedIndex=0:this.updateView(),this.onListScroll()},d_u.prototype.onListRender=function(e,p_l){Unu(e,p_l)},d_u.prototype.updateBtnStatu=function(){this.autoFeedBtn.label=this._isAutoFeed?(j_x("2111_1661")):(j_x("1737_2205_2394")+j_x(2013))},d_u.prototype.updateView=function(){var e=this.dragonList.selectedItem,p_l=b_l.instance._dragonInfo[e.id],p_g=b_l.instance.getDragonPropInfo(e.id),b_s=b_p.calPropFight(p_g);this.combatSp=b_p.getNumSp(NumType.FIGHTING,b_s,this.combatSp,-13);var d_u=LgcM.ins.heroVo,b_e=Resource.ResManager.getDefaultPlayerAvatar(d_u.fashionClothes,d_u.entryId);this._model.changeModel(b_e),this._model.state(),this._model.showStateEfts(e.effect,180),this.onDragonChange(d_u.dragonId),this.nameClip.index=e.clipIndex;var d_m="",d_w=Config.dragon_dragon[e.id];d_w&&0<d_w.propType?(this.typeClip.visible=!0,this.typeClip_di.visible=!0,this.typeClip.index=d_w.propType-1):(this.typeClip.visible=!1,this.typeClip_di.visible=!1),this.updateUpStar(p_l);var f_t=0;if(p_l){this.inActiveImg.visible=!1,this.itemActiveBox.visible=!1,this.stateActiveBox.visible=!1,this.activeBox.visible=!1,b_l.instance.starMaxLV(p_l.star,p_l.id);var v_z=b_l.instance.dragonIsUpLV(p_l.lv+1,p_l.id);this.upStarBox.visible=!1,this.feedBox.visible=v_z==UpState.CAN_UP||v_z==UpState.NOT_ENOUGH,this.maxLvLab.visible=!this.feedBox.visible,f_t=p_l.star,this.upStarBox.visible?d_m=(j_x("371_1148_1320")+j_x(1283)):this.feedBox.visible&&(b_l.instance.countId(p_l.lv+1,p_l.id),this.updateFeedBox(p_l),d_m=(j_x("2394_2013_33")+j_x(1035))),d_m=this.maxLvLab.visible?(j_x("1081_2251_15")+j_x(2342)):d_m,this.lvSprite=b_p.getNumSp(NumType.FASHION,p_l.lv,this.lvSprite,-5),this.lvSprite.x=this.lvInfo.x-14*p_l.lv.toString().length}else this.upStarBox.visible=!1,this.wearBtn.visible=!1,this.inActiveImg.visible=!0,d_m=(j_x("2335_1796_1320")+j_x(1283)),e.stateActive?(this.stateActiveBox.visible=!0,this.feedBox.visible=!1,this.maxLvLab.visible=!1,this.itemActiveBox.visible=!1,this.activeBox.visible=!0,this.updateStateActiveBox(e)):e.itemActive&&(this.itemActiveBox.visible=!0,this.feedBox.visible=!1,this.maxLvLab.visible=!1,this.stateActiveBox.visible=!1,this.activeBox.visible=!0,this.viewItemActiveBox(e)),this.lvSprite=b_p.getNumSp(NumType.FASHION,1,this.lvSprite,-5),this.lvSprite.x=this.lvInfo.x-14;TalismanModel.instance.changeActStar(this.starBox,f_t),this.boxTitle.text=d_m,this.updatePvSkillItem()},d_u.prototype.onRemove=function(){this.off(Laya.Event.CLICK,this,this.onMouseClick),LED.off(l_r.DRAGONS_INFO_UPDATE,this,this.updateInfosList),LED.off(l_r.DRAGON_ONE_INFO_UPDATE,this,this.onDragonOneUpdate),LED.off(l_r.DRAGON_STAR_UP,this,this.onUpdateUpStar),LED.off(l_r.DRAGON_CHANGE_EFFECTE,this,this.onDragonChange),LED.off(l_r.SKILL_INFO_UPDATE,this,this.updateView),this.dragonList.scrollBar.off(Laya.Event.CHANGE,this,this.onListScroll),this._isAutoFeed=!1,this._model&&this._model.clearRes()},d_u.prototype.updateFeedBox=function(e){var p_l=this.feedBox.getChildByName("feedLab"),p_g=this.feedBox.getChildByName("progressBar"),b_s=b_l.instance.countId(e.lv,e.id),d_u=Config.dragon_dragonLevel[b_s],b_e=BagModel.instance.getItemCountByItemID(d_u.cost[0][0],BagTypeDefine.BAG_TYPE_ITEM);p_l.text=Utils.$("{1}/{2}",b_e,d_u.cost[0][1]),p_l.color=b_e>=d_u.cost[0][1]?"#00802e":"#ef2b2b",p_g.value=e.exp/d_u.num,this.progressValueLab.text=e.exp+"/"+d_u.num,this.rp_feed.visible=b_e>=d_u.cost[0][1],this.rp_autoFeed.visible=this.rp_feed.visible&&!this._isAutoFeed,this.autoFeedBtn.label=this._isAutoFeed?(j_x("2111_1661")):(j_x("1737_2205_2394")+j_x(2013))},d_u.close=function(){Stc(UIM,d_u)},d_u.prototype.updateStarItem=function(e,p_l){var p_g=this.getCurrentSelectId(0),b_s=b_l.instance._dragonInfo[p_g],d_u=b_l.instance.countId(b_s.star,b_s.id,2),b_e=Config.dragon_dragonStar[d_u];if(b_e&&b_e.cost){var d_m=b_e.cost[0][0],d_w=b_e.cost[0][1],f_t=Config.CItem(d_m);e.isShowName=!1,e.setItemData({id:d_m,amount:d_w,name:f_t.name},ItemBoxDefine.MODULE_ITEM,!0);var v_z=BagModel.instance.getItemCountByItemID(d_m,BagTypeDefine.BAG_TYPE_ITEM);this.rp_active.visible=d_w<=v_z,e.numTxt.text=v_z+"/"+d_w,e.numTxt.color=d_w<=v_z?Utils.Color.NAME_GREEN:Utils.Color.NAME_RED}},d_u.prototype.getStarList=function(e,p_l){var p_g,b_s;if(void 0===p_l&&(p_l=5),1<e){p_g=[];for(var d_u=1;d_u<=5;d_u++)b_s=1,d_u<e&&(b_s=0),p_g.push(b_s)}else p_g=[1,1,1,1,1];return p_g},d_u.prototype.onListScroll=function(){if(this.rightBtn.visible=this.dragonList.scrollBar.value<this.dragonList.scrollBar.max,this.leftBtn.visible=0<this.dragonList.scrollBar.value,this.leftRedPoint.visible=this.rightRedPoint.visible=!1,0<this.dragonList.startIndex)for(var e=0;e<this.dragonList.startIndex;++e){var p_l=this.dragonList.array[e].id;if(b_l.instance.isHaveRedPoint(p_l)){this.leftRedPoint.visible=!0;break}}if(this.dragonList.startIndex+4<this.dragonList.length)for(e=this.dragonList.startIndex+4;e<this.dragonList.length;++e)if(p_l=this.dragonList.array[e].id,b_l.instance.isHaveRedPoint(p_l)){this.rightRedPoint.visible=!0;break}},d_u.prototype.updateStateActiveBox=function(e){var p_l=this.stateActiveBox.getChildByName("combatLab"),p_g=this.stateActiveBox.getChildByName("descLab"),b_s=CharacterProperty.getPropertys(e.attr),d_u=b_p.calPropFight(b_s);p_l.text=d_u.toString(),p_g.text=e.Desc,this.rp_active.visible=b_l.instance.dragonIsCanActive(e.id)},d_u.prototype.updateStarClip=function(e,p_l){var p_g=e.getChildByName("starClip");p_g&&(p_g.index=e.dataSource)},d_u.prototype.updateActiveItem=function(e,p_l){var p_g=Config.dragon_dragon[this.getCurrentSelectId(0)];if(p_g){var b_s=p_g.itemActive[0][0],d_u=p_g.itemActive[0][1],b_e=Config.CItem(b_s);e.setItemData({id:b_s,amount:d_u,name:b_e.name},ItemBoxDefine.MODULE_ITEM,!0);var d_m=BagModel.instance.getItemCountByItemID(b_s,BagTypeDefine.BAG_TYPE_ITEM);this.rp_active.visible=d_u<=d_m,e.numTxt.text=d_m+"/"+d_u,e.numTxt.color=d_u<=d_m?Utils.Color.NAME_GREEN:Utils.Color.NAME_RED}},d_u.prototype.checkCanFeed=function(){if(!this.dragonList.selectedItem)return!1;var e=this.dragonList.selectedItem.id,p_l=b_l.instance._dragonInfo[e||0];if(!p_l||!p_l.id)return!1;var p_g=b_l.instance.countId(p_l.lv,p_l.id),b_s=Config.dragon_dragonLevel[p_g],d_u=b_l.instance.countId(p_l.lv+1,p_l.id);return Config.dragon_dragonLevel[d_u]?!(BagModel.instance.getItemCountByItemID(b_s.cost[0][0],BagTypeDefine.BAG_TYPE_ITEM)<b_s.cost[0][1]&&(r_f.instance.isWindow(b_s.cost[0][0]),1)):(b_p.broadcastNotice((j_x("230_590_1300")+j_x("1117_1081_2251")+j_x("15_2342")),1),!1)},d_u.prototype.onRideListSelect=function(e){Ekq(e,this)},d_u.prototype.viewItemActiveBox=function(e){var p_l=this.itemActiveBox.getChildByName("combatLab"),p_g=CharacterProperty.getPropertys(e.attr),b_s=b_p.calPropFight(p_g);p_l.text=b_s.toString(),this.activeConsumeList.array=[1]},d_u.prototype.onMouseClick=function(p_l){var p_g=p_l.target,b_s=this.dragonList.selectedItem?this.dragonList.selectedItem.id:0,b_e=b_l.instance._dragonInfo[b_s||0],d_m=Config.dragon_dragon[b_s];switch(p_g.name){case"closeBtn":case"backBtn":e.SkillPanel.open(),d_u.close();break;case"feedBtn":if(!this.checkCanFeed())break;b_l.instance.reqDragonFeed(b_s),this.tarLv=b_e.lv;break;case"autoFeedBtn":if(!this.checkCanFeed())break;var d_w=b_l.instance.countId(b_e.lv+1,b_e.id);Config.dragon_dragonLevel[d_w],this.tarLv=b_e.lv,this._isAutoFeed=!this._isAutoFeed,this.updateBtnStatu(),this.timerFeed(b_s);break;case"d_activeBtn":if(!this.checkCanActive())break;if(d_m){var f_t=d_m.stateActive?ActiveType.STATE:ActiveType.ITEM;b_l.instance.reqDragonActive(b_s,f_t)}break;case"detailBtn":e.DragonFightTips.open(b_s);break;case"wearBtn":b_l.instance.reqDragonOp(b_s,OPType.WEAR);break;case"rightBtn":this.dragonList.startIndex+4<this.dragonList.length-4?this.dragonList.scrollTo(this.dragonList.startIndex+4):this.dragonList.scrollTo(this.dragonList.length-4);break;case"leftBtn":0<this.dragonList.startIndex-4?this.dragonList.scrollTo(this.dragonList.startIndex-4):this.dragonList.scrollTo(0);break;case"btnStarUp":if(!b_e||0==b_e.star)return void b_p.broadcastNotice((j_x("1777_320_2335")+j_x("1796_2060_1919")+j_x("33_562_371")+j_x(1148)),1);if(b_e){var v_z=b_l.instance.countId(b_e.star,b_e.id,2),d_h=Config.dragon_dragonStar[v_z];return d_h&&!d_h.cost?void b_p.broadcastNotice((j_x("1300_1117_1081")+j_x("2251_1148_2342")),1):void e.DragonUpStarPanelEx.open(b_e)}if(1!=b_l.instance.dragonIsUpStar(b_e.star+1,b_s,!0))break;b_l.instance.reqDragonUpStar(b_s)}},Object.defineProperty(d_u.prototype,"progress",{get:function(){return this.feedBox.getChildByName("progressBar").value},set:function(e){this.feedBox.getChildByName("progressBar").value=e;var p_l=parseInt(this.progressValueLab.text.split("/")[1])||0;this.progressValueLab.text=(p_l*e).toFixed(0)+"/"+p_l},enumerable:!0,configurable:!0}),d_u.prototype.onDragonOneUpdate=function(){this.dragonList.array=b_l.instance.allDragonCfg,this._isAutoFeed?(Laya.timer.once(1e3,this,this.timerFeed,[this.getCurrentSelectId(0)]),Laya.timer.once(500,this,this.updateView),Laya.Tween.to(this,{progress:1},500)):(this.updateView(),Resource.SoundManager.instance.playSoundById(8,!1),this.playEffect(this.getCurrentSelectId(0)))},d_u.prototype.timerFeed=function(e){var p_l=b_l.instance._dragonInfo[e];p_l||(this._isAutoFeed=!1);var p_g=b_l.instance.countId(p_l.lv,p_l.id),b_s=Config.dragon_dragonLevel[p_g],d_u=BagModel.instance.getItemCountByItemID(b_s.cost[0][0],BagTypeDefine.BAG_TYPE_ITEM);if(!this._isAutoFeed)return this.autoFeedBtn.label=(j_x("1737_2205_2394")+j_x(2013)),void(this.rp_autoFeed.visible=this.rp_feed.visible&&!this._isAutoFeed);if(b_s.lv>=this.tarLv){var b_e=b_l.instance.countId(p_l.lv+1,p_l.id),d_m=Config.dragon_dragonLevel[b_e];if(this.upClip.visible=!0,this.upClip.on(Laya.Event.COMPLETE,this,this.onEftComplete),Resource.SoundManager.instance.playSoundById(8,!1),this.upClip.play(!1),!d_m)return b_p.broadcastNotice((j_x("230_590_1300")+j_x("1117_1081_2251")+j_x("15_2342")),1),this.autoFeedBtn.label=(j_x("1737_2205_2394")+j_x(2013)),this._isAutoFeed=!1,void(this.rp_autoFeed.visible=this.rp_feed.visible&&!this._isAutoFeed);this.tarLv+=1}if(!(b_s.lv<this.tarLv))return this.autoFeedBtn.label=(j_x("1737_2205_2394")+j_x(2013)),this._isAutoFeed=!1,void(this.rp_autoFeed.visible=this.rp_feed.visible&&!this._isAutoFeed);d_u>=b_s.cost[0][1]?b_l.instance.reqDragonAutoFeed(e):(b_p.broadcastNotice((j_x("1661_1502_2462")+j_x(1779))),this.autoFeedBtn.label=(j_x("1737_2205_2394")+j_x(2013)),this._isAutoFeed=!1,this.rp_autoFeed.visible=this.rp_feed.visible&&!this._isAutoFeed)},d_u.prototype.playEffect=function(e){var p_l=b_l.instance._dragonInfo[e];if(p_l){var p_g=b_l.instance.countId(p_l.lv,p_l.id),b_s=Config.dragon_dragonLevel[p_g];b_s.lv>this.tarLv&&(this.upClip.isPlaying||(this.upClip.visible=!0,this.upClip.on(Laya.Event.COMPLETE,this,this.onEftComplete),this.upClip.play(!1)),this.tarLv=b_s.lv)}},d_u.prototype.openUpStarSucceePanel=function(p_l){void 0===p_l&&(p_l=1),e.DragonUpStarPanel.open(p_l),this.UpStarEffect(!1)},d_u.prototype.onDragonChange=function(e){this.getCurrentSelectId(0)==e?(this.wornImg.visible=!0,this.wearBtn.visible=!1):(this.wornImg.visible=!1,this.wearBtn.visible=!0)},d_u.prototype.onUpdateUpStar=function(e){void 0===e&&(e=1)},d_u.prototype.getCurrentSelectId=function(e){void 0===e&&(e=0);var p_l=this.dragonList.selectedItem,p_g=p_l?p_l.id:e;return null==p_l.id?e:p_g},d_u.prototype.UpStarEffect=function(e,p_l){void 0===p_l&&(p_l=1),e?(this.upStarEffect.play(!1),this.upStarEffect.visible=!0,this.upStarEffect.on(Laya.Event.COMPLETE,this,this.openUpStarSucceePanel,[p_l])):(this.upStarEffect.stop(),this.upStarEffect.visible=!1,this.upStarEffect.off(Laya.Event.COMPLETE,this,this.openUpStarSucceePanel))},d_u.prototype.onEftComplete=function(){Muv(this,Laya)},d_u.prototype.updatePvSkillItem=function(){var e=this.dragonList.selectedItem;if(e.skill){var p_l=b_l.instance._dragonInfo[e.id],p_g=0,b_s=0;p_l&&(p_g=p_l.lv,b_s=p_l.star);var d_u=new x_h(e.id,e.desc,p_g,b_s,PassiveSkillType.DRAGON);this.pvSkillItem.visible=!0,this.pvSkillItem.updateSkillUI(e.skill[0],PassiveSkillType.DRAGON,d_u,!0)}else this.pvSkillItem.visible=!1},d_u);function d_u(){var b_s=p_l.call(this)||this;return b_s._isAutoFeed=!1,b_s._lastIndex=-1,b_s._model=new n_k,b_s.modelSp.addChild(b_s._model),b_s.on(Laya.Event.ADDED,b_s,b_s.onAdded),b_s.on(Laya.Event.REMOVED,b_s,b_s.onRemove),b_s.activeConsumeList.itemRender=e.ItemBox,b_s.activeConsumeList.renderHandler=p_g.create(b_s,b_s.updateActiveItem,[],!1),b_s.dragonList.itemRender=e.DragonFosterItem,b_s.dragonList.renderHandler=Laya.Handler.create(b_s,b_s.onListRender,null,!1),b_s.dragonList.selectHandler=Laya.Handler.create(b_s,b_s.onRideListSelect,null,!1),b_s.starItemList.itemRender=e.ItemBox,b_s.starItemList.renderHandler=p_g.create(b_s,b_s.updateStarItem,[],!1),b_s.dragonList.hScrollBarSkin="",b_s.dragonList.selectEnable=!0,b_s}e.DragonFosterMainPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.dragonFoster.DragonUpStarSuccUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Qdv(this)},b_s.open=function(e){void 0===e&&(e=1),UIM.open(b_s,null,e,!1,!1,!0,!0)},b_s.prototype.removeRoleModel=function(){this._roleModel&&(this._roleModel.dispose(),this._roleModel.removeSelf(),this._roleModel=null)},b_s.prototype.onRemove=function(){Ycz(this)},b_s.prototype.showStarEffect=function(e,p_l,p_g){void 0===e&&(e=0),void 0===p_l&&(p_l=0),void 0===p_g&&(p_g=!1),p_g?(this.effStar.play(!1),this.effStar.visible=!0,this.effStar.pos(e,p_l),this.effStar.on(Laya.Event.COMPLETE,this,this.showStarEffect)):(this.effStar.stop(),this.effStar.visible=!1,this.effStar.off(Laya.Event.COMPLETE,this,this.showStarEffect))},b_s.prototype.updateData=function(){this._id=this.dataSource;var e=Config.dragon_dragon[this._id];if(e){var p_l=LgcM.ins.heroVo;if(p_l){this._roleModel||(this._roleModel=new n_k,this.modelSp.addChild(this._roleModel));var p_g=Resource.ResManager.getDefaultPlayerAvatar(p_l.fashionClothes,p_l.entryId);this._roleModel.changeModel(p_g),this._roleModel.state(),this._roleModel.showStateEfts(e.effect,180);var b_s=b_l.instance._dragonInfo[this._id],d_u=Config.dragon_dragonStar[b_l.instance.countId(b_s.star-1,b_s.id,2)],b_e="",d_m="";if(d_u){b_e=d_u.limitLv+(j_x(2342));var d_w=Config.dragon_dragonStar[b_l.instance.countId(b_s.star,b_s.id,2)];d_w&&(d_m=d_w.limitLv+(j_x(2342)))}this.txtProp1.text=b_e,this.txtProp2.text=d_m,TalismanModel.instance.changeActStar(this.starBox,b_s.star)}}},b_s.close=function(){Gzr(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.DragonUpStarPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.talisman.talisman_upgradeUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Aao(this,Laya)},b_s.prototype.onClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":b_s.close();break;case"upBtn":var p_l=this.dataSource,p_g=Config.talisman_talisman[p_l.id].maxGrade;if(p_l.grade===p_g)return void b_p.broadcastNotice((j_x("1300_1117_1067")+j_x(2128)));var d_u=TalismanModel.instance.getUpgradeConfig(p_l.id,p_l.grade);if(!d_u)return void b_p.broadcastNotice((j_x("1300_1117_1067")+j_x(2128)));if(!b_p.checkConsume(d_u.consume))return r_f.instance.isWindow(d_u.consume[0][0]),void b_s.close();TalismanModel.instance.reqTalismanUpgrade(p_l.id),this._isSucc=!0,Resource.SoundManager.instance.playSoundById(7,!1),this.playEffect(this.effect_left)}},b_s.prototype.openSuccPanel=function(){if(this._isSucc){var p_l=this.dataSource;p_l&&e.TalismanUpgradeSuccPanel.open(p_l),this._isSucc=!1}},b_s.prototype.playEffectComplete=function(e){e&&(e.visible=!1,e===this.effect_left?this.playEffect(this.effect_mid):e===this.effect_mid?this.playEffect(this.effect_right):b_s.close())},b_s.prototype.updateData=function(){Wfp(this)},b_s.prototype.playEffect=function(e){e&&(e.visible=!0,e.play(!1))},b_s.open=function(e){Mti(e,UIM,b_s)},b_s.prototype.updateItem=function(e,p_l){if(e.isShowName=!1,e.setItemData(e.dataSource,ItemBoxDefine.MODULE_ITEM,!0),this.costList.contains(e)){var p_g=e.dataSource,b_s=BagModel.instance.getItemCountByItemID(p_g.id);e.numTxt.color=b_s<p_g.amount?Utils.Color.RED:Utils.Color.NAME_GREEN,e.numTxt.text=b_s+"/"+p_g.amount}},b_s.prototype.setCurGradeData=function(){var e=this.dataSource,p_l=Config.talisman_talisman[e.id];this.lvTxt.text=0<e.level?Utils.$(("{1}"+j_x(2342)),e.level):"",TalismanModel.instance.changeActStar(this.starBox,e.grade),this.nameTxt.color=Utils.ItemUtils.getTalismanQualityColor(p_l.quality),this.nameTxt.changeText(p_l.name);var p_g=p_l.quality-3;this.bgQuaClip.index=p_g<0?0:p_g;var b_s=Resource.ResUrl.getIconUrl(p_l.icon);this.setIcon(b_s,this.icon)},b_s.prototype.setNextGradeData=function(){var e=this.dataSource,p_l=Config.talisman_talisman[e.id],p_g=TalismanModel.instance.getUpgradeConfig(e.id,e.grade);p_g&&(this.propTxt.text=p_g.propDesc,this.rewardList.array=b_p.getRewardDatas(p_g.clientRewards),this.costList.array=b_p.getRewardDatas(p_g.consume),this.redPoint.visible=p_g.consume&&BagModel.instance.checkConsume(b_p.getRewardDatas(p_g.consume)));var b_s=e.grade+1;b_s=b_s>p_l.maxGrade?p_l.maxGrade:b_s,TalismanModel.instance.changeActStar(this.starBox_1,b_s),this.lvTxt_1.text=0<e.level?Utils.$(("{1}"+j_x(2342)),e.level):"",this.nameTxt_1.color=Utils.ItemUtils.getTalismanQualityColor(p_l.quality),this.nameTxt_1.changeText(p_l.name);var d_u=p_l.quality-3;this.bgQuaClip_1.index=d_u<0?0:d_u;var b_e=Resource.ResUrl.getIconUrl(p_l.icon);this.setIcon(b_e,this.icon_1)},b_s.prototype.onRemove=function(){Qnx(this,Laya)},b_s.prototype.setIcon=function(e,p_l){""!=e?(p_l.visible=!0,p_l=Resource.ResManager.Instance.getImg(e,p_l)):p_l.visible=!1},b_s.close=function(){Ufh(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.rewardList.itemRender=e.ItemBox,p_g.costList.itemRender=e.ItemBox,p_g.rewardList.renderHandler=Laya.Handler.create(p_g,p_g.updateItem,null,!1),p_g.costList.renderHandler=Laya.Handler.create(p_g,p_g.updateItem,null,!1),p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g}e.TalismanUpgradePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=e.TalismanUpgradePanel,__extends(b_s,p_l),b_s.prototype.openSuccPanel=function(){if(this._isSucc){var p_l=this.dataSource;p_l&&e.DragonUpStarPanel.open(p_l.id),this._isSucc=!1}},b_s.prototype.setNextGradeData=function(){var e=this.dataSource,p_l=Config.dragon_dragon[e.id],p_g=b_l.instance.countId(e.star,e.id,2),b_s=999,d_u=Config.dragon_dragonStar[p_g];d_u&&(this.propTxt.text=d_u.propDesc,this.costList.array=b_p.getRewardDatas(d_u.cost),this.redPoint.visible=d_u.cost&&BagModel.instance.checkConsume(this.costList.array),d_u.cost||(b_s=e.star));var b_e=e.star+1;b_e=b_s<b_e?b_s:b_e,TalismanModel.instance.changeActStar(this.starBox_1,b_e),this.lvTxt_1.text=0<e.lv?Utils.$(("{1}"+j_x(2342)),e.lv):"",this.nameTxt_1.color=Utils.ItemUtils.getTalismanQualityColor(p_l.quality),this.nameTxt_1.changeText(p_l.desc);var d_m=p_l.quality-3;this.bgQuaClip_1.index=d_m<0?0:d_m;var d_w=Resource.ResUrl.getIconUrl(p_l.icon);this.setIcon(d_w,this.icon_1)},b_s.prototype.playEffectComplete=function(e){e&&(e.visible=!1,e===this.effect_left?this.playEffect(this.effect_mid):e===this.effect_mid?this.playEffect(this.effect_right):b_s.close())},b_s.prototype.updateData=function(){Alh(this,j_x)},b_s.open=function(e){Kpw(e,UIM,b_s)},b_s.prototype.setCurGradeData=function(){var e=this.dataSource,p_l=Config.dragon_dragon[e.id];this.lvTxt.text=0<e.lv?Utils.$(("{1}"+j_x(2342)),e.lv):"",TalismanModel.instance.changeActStar(this.starBox,e.star),this.nameTxt.color=Utils.ItemUtils.getTalismanQualityColor(p_l.quality),this.nameTxt.changeText(p_l.desc);var p_g=p_l.quality-3;this.bgQuaClip.index=p_g<0?0:p_g;var b_s=Resource.ResUrl.getIconUrl(p_l.icon);this.setIcon(b_s,this.icon)},b_s.prototype.onClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":b_s.close();break;case"upBtn":var p_l=this.dataSource,p_g=b_l.instance.countId(p_l.star,p_l.id,2),d_u=Config.dragon_dragonStar[p_g];if(!d_u||!d_u.cost)return void b_p.broadcastNotice((j_x("1300_1117_1067")+j_x(2128)));if(!b_p.checkConsume(d_u.cost))return void r_f.instance.isWindow(d_u.cost[0][0]);b_l.instance.reqDragonUpStar(p_l.id),this._isSucc=!0,Resource.SoundManager.instance.playSoundById(7,!1),this.playEffect(this.effect_left)}},b_s.close=function(){Clb(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.rewardList.visible=!1,e}e.DragonUpStarPanelEx=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.drama.dramaUI,__extends(b_s,p_l),Object.defineProperty(b_s,"instance",{get:function(){return this._instance||(this._instance=new b_s),this._instance},enumerable:!0,configurable:!0}),b_s.prototype.onAdded=function(){this.y=GPlatform.concaveOffsetY,this._faderTxt.on(Laya.Event.COMPLETE,this,this.updateTalkContent),this.passBtn.on(Laya.Event.CLICK,this,this.onClick),this.contentTxt.on(Laya.Event.CLICK,this,this.onClick),this.continueTxt.on(Laya.Event.CLICK,this,this.onClick),UIM.instance.setMainUIVisible(!1),LED.event(l_r.PLOTING_START),this.onResize(),this.alpha=0,Laya.Tween.to(this,{alpha:1},500,null,null,null,!0),Laya.timer.loop(30,this,this.loopFrame)},b_s.prototype.delayCheckGuide=function(){Wxt(Laya,this,GuideManager,b_s)},b_s.prototype.loopFrame=function(){1.3<=this.continueTxt.scaleX?this._scaleSpeed=-.03:this.continueTxt.scaleX<=1&&(this._scaleSpeed=.03),this.continueTxt.scaleX+=this._scaleSpeed,this.continueTxt.scaleY+=this._scaleSpeed},b_s.prototype.onResize=function(){Sab(this,Stage)},b_s.open=function(e,p_l){void 0===p_l&&(p_l=!1),PopPropManager.instance.isFirstTo&&UIM.instance.showUIMask(),TaskManager.instance.isTaskInit&&(UIM.instance.showUIMask(),null===b_s.instance.parent&&(Laya.stage.addChild(b_s.instance),SubpackageMgr.ins.resetTopMaskSp()),b_s.instance.updateData(e,p_l))},b_s.prototype.tweenOverComplete=function(){var e=Config.drama[this._dramaID];e&&0<e.next&&1!=e.type?(this.updateData(e.next),Laya.Tween.to(this,{alpha:1},500,null,null,null,!0)):b_s.close()},b_s.prototype.onClick=function(e){switch(e.target.name){case"contentTxt":case"continueTxt":this._isClickContinue&&(this._faderTxt.stop(),this.updateTalkContent());break;case"passBtn":Laya.Tween.to(this,{alpha:0},500,null,Laya.Handler.create(this,this.tweenOverComplete),null,!0)}},b_s.prototype.updateTalkContent=function(){var e=Config.drama[this._dramaID];if(this._groupIndex>=e.contents.length)Laya.Tween.to(this,{alpha:0},500,null,Laya.Handler.create(this,this.tweenOverComplete),null,!0);else{var p_l=LgcM.ins.heroVo,p_g=p_l&&1===p_l.entryId?e.headFaces:e.girlFaces;p_g?this.setFaceImg(p_g[this._curIndex],e.facePos?e.facePos[this._curIndex]:null):this.faceImg.visible=!1;var b_s=e.contents[this._groupIndex];if(""===b_s[this._curIndex])return this._curIndex++,1<this._curIndex&&(this._groupIndex++,this._curIndex=0),void this.updateTalkContent();var d_u=e.names;d_u?this.nameTxt.text=d_u[this._curIndex]:this.nameBox.visible=!1,this._faderTxt.setContent(b_s[this._curIndex],this.contentTxt),this._faderTxt.start(e.speed),this._curIndex++,1<this._curIndex&&(this._groupIndex++,this._curIndex=0)}},b_s.prototype.setFaceImg=function(e,p_l){if(void 0===p_l&&(p_l=null),""!=e&&null!=e){this.faceImg.visible=!0;var p_g=Resource.ResUrl.getIconUrl(e);this.faceImg=Resource.ResManager.Instance.getImg(p_g,this.faceImg),this.faceImg.x=p_l?p_l[0]:this.width-this.faceImg.width>>1,this.faceImg.y=this.height-197-490}else this.faceImg.visible=!1},b_s.prototype.updateData=function(e,p_l){void 0===p_l&&(p_l=!1),this._dramaID=e,this._isSceneTrigger=p_l;var p_g=Config.drama[e];if(p_g.bg){this.bgImg.texture&&Laya.loader.clearRes(this.bgImg.texture.url),this.bgImg.visible=!0;var b_s=Resource.ResUrl.getIconUrl(p_g.bg);this.bgImg=Resource.ResManager.Instance.getImg(b_s,this.bgImg)}else this.bgImg.visible=!1;this.passBtn.visible=0<p_g.canBreak,this._isClickContinue=0<p_g.continue,this.continueTxt.visible=this._isClickContinue,this._groupIndex=this._curIndex=0,this.updateTalkContent()},b_s.prototype.onRemove=function(){if(this._faderTxt.off(Laya.Event.COMPLETE,this,this.updateTalkContent),this.passBtn.off(Laya.Event.CLICK,this,this.onClick),this.contentTxt.off(Laya.Event.CLICK,this,this.onClick),this.continueTxt.off(Laya.Event.CLICK,this,this.onClick),UIM.instance.setMainUIVisible(!0),b_p.isPloting=!1,LED.event(l_r.PLOTING_END),this._isSceneTrigger&&LgcM.ins.changeMapToDo(),this._dramaID){var e=Config.drama[this._dramaID].finishDo;if(e&&0<e.length)for(var p_l in e)TaskManager.instance.taskMsgTxtLink(e[p_l])}this.faceImg.texture&&Laya.loader.clearRes(this.faceImg.texture.url),this.bgImg.texture&&Laya.loader.clearRes(this.bgImg.texture.url),Laya.timer.once(200,this,this.delayCheckGuide),Laya.timer.clear(this,this.loopFrame),UIM.instance.hideUIMask()},b_s.close=function(){null!=b_s.instance&&b_s.instance.removeSelf(),UIM.instance.hideUIMask()},b_s.prototype.changeAdapt=function(){GPlatform.needAdapt&&(this.height=GPlatform.stageHeight-GPlatform.concaveOffsetY,0<GPlatform.disStageX&&(this.scaleX=GPlatform.ratioX,this.width=Stage.width),this.passBtn.y=GPlatform.concaveOffsetY,this.bottom_box.y=this.height-this.bottom_box.height)},b_s);function b_s(){var e=p_l.call(this)||this;return e._scaleSpeed=.03,e._faderTxt=new x_x,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.changeAdapt(),e}e.DramaPanel=p_g}(UI=UI||{});var x_x=function(e){function p_l(){return null!==e&&e.apply(this,arguments)||this}return __extends(p_l,e),p_l.prototype.setContent=function(e,p_l){Gya(e,p_l,this)},p_l.prototype.start=function(e){void 0===e&&(e=300),this.m_curIndex=0,this.enterFrame(),Laya.timer.loop(e,this,this.enterFrame),Laya.timer.clear(this,this.timeOutComplete)},p_l.prototype.delayComplete=function(){Sri(Laya,this)},p_l.prototype.stop=function(){Ahq(this,Laya)},p_l.prototype.enterFrame=function(){return Omp(this,Laya)},p_l.prototype.timeOutComplete=function(){Wwr(Laya,this)},p_l}(Laya.Sprite);!function(e){var p_l,p_g=(p_l=ui.window.drama.drama_twoUI,__extends(b_s,p_l),Object.defineProperty(b_s,"instance",{get:function(){return this._instance||(this._instance=new b_s),this._instance},enumerable:!0,configurable:!0}),b_s.prototype.onAdded=function(){Qux(UIM,this,Laya,LED,l_r)},b_s.prototype.onResize=function(){Wqb(this,Stage,GPlatform)},b_s.open=function(e,p_l){void 0===p_l&&(p_l=!1),null===b_s.instance.parent&&Laya.stage.addChild(b_s.instance),b_s.instance.updateData(e,p_l)},b_s.prototype.updateTalkContent=function(){var e=Config.drama[this._dramaID];if(this._groupIndex>=e.contents.length)0<e.next?this.updateData(e.next):Laya.Tween.to(this,{alpha:0},500,null,Laya.Handler.create(this,this.delayClose),null,!0,!0);else{var p_l=LgcM.ins.heroVo,p_g=p_l&&1===p_l.entryId?e.headFaces:e.girlFaces;p_g?this.setFaceImg(p_g[this._curIndex],e.facePos?e.facePos[this._curIndex]:null):this.faceImg.visible=!1;var b_s=e.contents[this._groupIndex];if(""===b_s[this._curIndex])return this._curIndex++,1<this._curIndex&&(this._groupIndex++,this._curIndex=0),void this.updateTalkContent();var d_u=e.names;d_u?this.nameTxt.text=d_u[this._curIndex]:this.nameBox.visible=!1,this._faderTxt.setContent(b_s[this._curIndex],this.contentTxt),this._faderTxt.start(e.speed),this._curIndex++,1<this._curIndex&&(this._groupIndex++,this._curIndex=0)}},b_s.prototype.delayCheckGuide=function(){Ynk(Laya,this,GuideManager,b_s)},b_s.prototype.delayClose=function(){Yku(b_s)},b_s.prototype.updateData=function(e,p_l){void 0===p_l&&(p_l=!1),this._dramaID=e,this._isSceneTrigger=p_l;var p_g=Config.drama[e];this._isClickContinue=0<p_g.continue,this.continueTxt.visible=this._isClickContinue,this._groupIndex=this._curIndex=0,this.updateTalkContent()},b_s.prototype.loopFrame=function(){1.3<=this.continueTxt.scaleX?this._scaleSpeed=-.03:this.continueTxt.scaleX<=1&&(this._scaleSpeed=.03),this.continueTxt.scaleX+=this._scaleSpeed,this.continueTxt.scaleY+=this._scaleSpeed},b_s.close=function(){null!=b_s.instance&&b_s.instance.removeSelf()},b_s.prototype.onRemove=function(){this._faderTxt.off(Laya.Event.COMPLETE,this,this.updateTalkContent),this.closeBtn.off(Laya.Event.CLICK,this,this.onClick),this.contentTxt.off(Laya.Event.CLICK,this,this.onClick),this.continueTxt.off(Laya.Event.CLICK,this,this.onClick),b_p.isPloting=!1,LED.event(l_r.PLOTING_END),this._isSceneTrigger&&LgcM.ins.changeMapToDo();var e=Config.drama[this._dramaID].finishDo;if(e&&0<e.length)for(var p_l in e)TaskManager.instance.taskMsgTxtLink(e[p_l]);this.faceImg.texture&&Laya.loader.clearRes(this.faceImg.texture.url),Laya.timer.once(200,this,this.delayCheckGuide),Laya.timer.clear(this,this.loopFrame)},b_s.prototype.onClick=function(e){switch(e.target.name){case"contentTxt":case"continueTxt":this._isClickContinue&&(this._faderTxt.stop(),this.updateTalkContent());break;case"closeBtn":Laya.Tween.to(this,{alpha:0},500,null,Laya.Handler.create(this,this.delayClose),null,!0,!0)}},b_s.prototype.setFaceImg=function(e,p_l){if(void 0===p_l&&(p_l=null),""!=e&&null!=e){this.faceImg.visible=!0;var p_g=Resource.ResUrl.getIconUrl(e);p_g&&this.faceImg.texture&&p_g!=this.faceImg.texture.url&&Resource.ResManager.Instance.stayReleaseAniRes(this.faceImg.texture.url),this.faceImg=Resource.ResManager.Instance.getImg(p_g,this.faceImg),this.faceImg.x=p_l?p_l[0]:0,this.faceImg.y=this.talkBg.y-490}else this.faceImg.visible=!1},b_s.prototype.changeAdapt=function(){GPlatform.needAdapt&&(this.height=GPlatform.stageHeight,0<GPlatform.disStageX&&(this.scaleX=GPlatform.ratioX,this.width=Stage.width),this.bottom_box.y=this.height-this.bottom_box.height)},b_s);function b_s(){var e=p_l.call(this)||this;return e._scaleSpeed=.05,e._faderTxt=new x_x,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.changeAdapt(),e}e.DramaPanelTwo=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.dreamLand.dreamlandSearchUI,__extends(b_s,p_l),b_s.open=function(){Ebq(UIM,b_s)},b_s.prototype.onRemove=function(){Euy(this,Laya,LED,l_r)},b_s.prototype.onAdded=function(){Uoy(this,Laya,LED,l_r)},b_s.close=function(){Mqp(UIM,b_s)},b_s.prototype.updateView=function(e){e.masterPlayer?(this.tipBox.visible=!0,this.descLab1.visible=!1,this.masterLab.text=e.masterPlayer.base.name+"["+e.stateStr(0,"-")+"]",this.peopleLab.text=e.players.length+"/3",this.time.text=Utils.formatTimeStr(e.overplustTime)):(b_p.broadcastNotice((j_x("1737_154_2336")+j_x("1255_1171_767")+j_x("1552_43_262")+j_x(871)+""+j_x("1777_1067_189")+j_x("606_1865_1953")+j_x(1739)+""),3,Config.color[206].color),this.descLab1.visible=!0,this.tipBox.visible=!1)},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"searchIdBtn":""!=this.inputId.text&&dreamlandModel.instance.reqDreamlandQuery(parseInt(this.inputId.text));break;case"confirmBtn":""!=this.inputId.text?dreamlandModel.instance.IsHaveDreamLand?b_p.broadcastNotice((j_x("1067_189_1300")+j_x("2035_799_980")+j_x("283_2249_266")+"")):(dreamlandModel.instance.reqDreamlandJoin(parseInt(this.inputId.text)),b_s.close()):b_p.broadcastNotice((j_x("814_711_2417")+j_x("1964_949")+""),3,Config.color[206].color)}},b_s.prototype.onJoin=function(p_l){Onp(p_l,b_s,e)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.dreamlandSearchPanel=p_g;var d_u,b_e=(d_u=ui.window.dreamLand.dreamlandCreateUI,__extends(d_m,d_u),d_m.open=function(){Ivj(UIM,d_m)},d_m.prototype.onRemove=function(){Kkm(this,Laya,LED,l_r)},d_m.prototype.onAdded=function(){Eyk(this,Laya,LED,l_r)},d_m.prototype.updateView=function(){var e=dreamlandModel.getcfg(StateModel.instance.getStateLv(),StateModel.instance.getStateSubLv());this.statalab.text=dreamlandModel.stateStr(LgcM.ins.heroVo.stateLv,StateModel.instance.getStateSubLv(),"-"),this.averagelab.text=e.produce+("/"+j_x("2224_1394"));var p_l=e.consume[0][0],p_g=Config.CItem(p_l);p_g&&(this.consumelab.text=p_g.name+":"+e.consume[0][1]+"/"+BagModel.instance.getItemCountByItemID(p_l,BagTypeDefine.BAG_TYPE_ITEM))},d_m.close=function(){Uzg(UIM,d_m)},d_m.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":d_m.close();break;case"createDreamlandBtn":if(dreamlandModel.instance.IsHaveDreamLand)return void b_p.broadcastNotice((j_x("1067_189_1300")+j_x("2035_799_980")+j_x("283_2249_266")+""));var p_l=dreamlandModel.getcfg(StateModel.instance.getStateLv(),StateModel.instance.getStateSubLv());b_p.checkConsume(p_l.consume)?dreamlandModel.instance.reqDreamlandStart():(r_f.instance.isWindow(p_l.consume[0][0]),d_m.close())}},d_m.prototype.OnCreate=function(p_l){Kci(p_l,d_m,e)},d_m);function d_m(){var e=d_u.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.dreamlandCreatePanel=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.dreamLand.dreamlandAltarUI,__extends(b_s,p_l),b_s.open=function(e,p_l){void 0===e&&(e=0),void 0===p_l&&(p_l=null),UIM.open(b_s,["dreamLand.atlas"],{Id:e,data:p_l},!1,!0,!1,!1)},b_s.prototype.renderItemBox=function(e,p_l){var p_g=this.roleModelBoxs.getChildByName("Box"+e),b_s=p_g.getChildByName("roleModelBox"),d_u=p_g.getChildByName("joinBtn"),b_e=p_l.getPlayer(e);if(b_s.getChildByName("stateLvlab").text=p_l.stateStr(e,"-"),b_e){var d_m=b_s.getChildByName("addlab"),d_w=p_l.getcfg(),f_t=b_s.getChildByName("exelab");f_t.text=Math.max(Math.ceil((SyncTime.serverTime/1e3-b_e.startTime)/d_w.tiimeUnit*d_w.produce),0).toString();var v_z=b_s.getChildByName("namelab"),d_h=b_s.getChildByName("infoBg");v_z.text=b_e.base.name;var r_t=b_s.getChildByName("sexMan"),t_n=b_s.getChildByName("sexWoman");if(1==b_e.base.entryId?(r_t.visible=!0,t_n.visible=!1):(r_t.visible=!1,t_n.visible=!0),d_u.visible=!1,0==e)b_s.mouseEnabled=!1,d_m.text="*"+(Config.global[1603].i_info+Config.recharge_vip[LgcM.ins.heroVo.vipLv].dreamlandAdd)+"%",d_m.visible=!0;else{var f_y=b_s.getChildByName("defenseBtn"),p_q=b_s.getChildByName("attackBtn"),h_h=b_s.getChildByName("defenseTimelab");h_h.visible=!1,h_h.dataSource=null,b_s.visible=!0;var n_j=Config.recharge_vip[LgcM.ins.heroVo.vipLv].dreamlandAdd;d_m.text="*"+n_j.toString()+"%",d_m.visible=0<n_j,p_q.visible=!1,f_y.visible=!1,p_q.dataSource=f_y.dataSource={pid:b_e.base.pid,time:b_e.protectEndTime},b_e.base.pid===LgcM.ins.heroVo.id?f_y.visible=!0:p_q.visible=!0,b_e.protectEndTime>SyncTime.serverTime/1e3&&(h_h.dataSource=b_e,h_h.text=Utils.formatTimeStr(b_e.protectEndTime-SyncTime.serverTime/1e3),h_h.visible=!0,f_y.visible=!0,p_q.visible=!1)}var j_l=f_t.width;d_m.visible&&(j_l+=d_m.width),f_t.x=(d_h.width-j_l)/2+d_h.x+8,d_m.x=f_t.width+f_t.x}else b_s.visible=!1,d_u.visible=!0},b_s.prototype.onMouseClick=function(p_l){var p_g=p_l.target;switch(p_g.name){case"closeBtn":case"backBtn":b_s.close();break;case"defenseBtn":var d_u=p_g;if(d_u&&this.dataSource&&this.dataSource.data){if(this.dataSource.data.masterPid==LgcM.ins.heroVo.id)return void b_p.broadcastNotice((j_x("389_189_1738")+j_x("1808_767_507")+j_x("1913_2462_1163")+j_x("248_109")+""));d_u.dataSource.time<=SyncTime.serverTime&&d_u.dataSource.pid==LgcM.ins.heroVo.id?(b_e.open(),b_s.ID=this.dataSource.data.masterPid):d_u.dataSource.time>SyncTime.serverTime&&d_u.dataSource.pid!=LgcM.ins.heroVo.id?b_p.broadcastNotice((j_x("1170_1690_1619")+j_x(2198)+""+j_x("221_1200_2462")+j_x(2213)+"")):b_p.broadcastNotice((j_x("1749_1300_1365")+j_x("1876_1619_2198")))}break;case"attackBtn":var d_m=p_g;d_m&&this.dataSource&&this.dataSource.data&&(dreamlandModel.instance.IsHaveDreamLand?this.dataSource.data.masterPid==LgcM.ins.heroVo.id?b_p.broadcastNotice((j_x("389_189_1738")+j_x("1808_767_507")+j_x("1913_2462_1163")+j_x("248_109")+"")):b_p.broadcastNotice((j_x("1067_189_1300")+j_x("2035_799_980")+j_x("283_2249_266")+"")):(b_s.ID=this.dataSource.data.masterPid,b_s.mapID=b_p.mapID,dreamlandModel.instance.reqDreamlandBreak(this.dataSource.data.masterPid,d_m.dataSource.pid)));break;case"joinBtn":this.dataSource&&this.dataSource.data&&(this.dataSource.data.masterPid==LgcM.ins.heroVo.id?e.HelpPanel.open(this.dataSource.data.masterPid,1,[(j_x("1054_189_1156")+j_x("767_1067_2288")+j_x("319_194")),(j_x("571_1802_1068")+j_x("1777_2057"))]):dreamlandModel.instance.reqDreamlandJoin(this.dataSource.data.masterPid))}},b_s.prototype.renderRoleModelBoxs=function(e){for(var p_l=this.roleModelBoxs.numChildren,p_g=0;p_g<p_l;p_g++)this.renderItemBox(p_g,e)},b_s.prototype.RenderList=function(e,p_l){var p_g=e.getChildByName("infolab"),b_s=e.getChildByName("time");p_g.style.fontSize=21,p_g.style.color="#4a728e",p_g.innerHTML=dreamlandVo.splitHistoryInfo(e.dataSource);var d_u=1e3*parseInt(e.dataSource.params[0]);b_s.text=Utils.fmtDate(new Date(d_u),"hh:mm:ss")},b_s.prototype.updateView=function(e){if(null!=e){this.altarHistorylist.array=e.universeHistoryInfo,this.renderRoleModelBoxs(e),this.dataSource.data=e;var p_l=dreamlandModel.getcfg(StateModel.instance.getStateLv(),StateModel.instance.getStateSubLv());this.masterLab.text=e.masterPlayer.base.name+"["+e.stateStr(0,"-")+"]",this.averageLab.text=p_l.produce+("/"+j_x("2224_1394")),this.time.text=Utils.formatTimeStr(e.overplustTime)}},b_s.close=function(){Sdg(UIM,b_s)},b_s.prototype.onRemove=function(){Laya.timer.clear(this,this.updateLoopTime),this.off(Laya.Event.CLICK,this,this.onMouseClick),LED.off(l_r.DREAMLAND_QUERY_INFO,this,this.updateView),LED.off(l_r.DREAMLAND_JOIN_INFO,this,this.updateView),b_s.mapID<=0&&e.dreamlandMianPanel.open()},b_s.prototype.onAdded=function(){0!=this.dataSource.Id?dreamlandModel.instance.reqDreamlandQuery(this.dataSource.Id):null!=this.dataSource.data?this.updateView(this.dataSource.data):0!=b_s.ID?dreamlandModel.instance.reqDreamlandQuery(b_s.ID):b_s.close(),e.dreamlandAltarPanel.ID=0,e.dreamlandAltarPanel.mapID=0,Laya.timer.loop(1e3,this,this.updateLoopTime),LED.on(l_r.DREAMLAND_QUERY_INFO,this,this.updateView),LED.on(l_r.DREAMLAND_JOIN_INFO,this,this.updateView),this.on(Laya.Event.CLICK,this,this.onMouseClick),e.dreamlandMianPanel.close()},b_s.prototype.updateLoopTime=function(){if(this.dataSource&&this.dataSource.data){this.dataSource.data.overplustTime<=0&&b_s.close(),this.time.text=Utils.formatTimeStr(this.dataSource.data.overplustTime);for(var e=this.roleModelBoxs.numChildren,p_l=1;p_l<e;p_l++){var p_g=this.roleModelBoxs.getChildByName("Box"+p_l);if(p_g){var d_u=p_g.getChildByName("roleModelBox"),b_e=d_u.getChildByName("defenseTimelab"),d_m=d_u.getChildByName("defenseBtn"),d_w=d_u.getChildByName("attackBtn");if(b_e.dataSource){var f_t=b_e.dataSource.protectEndTime-SyncTime.serverTime/1e3;b_e.dataSource.protectEndTime&&0<f_t?(b_e.visible=!0,b_e.text=Utils.formatTimeStr(f_t),d_m.visible=!0,d_w.visible=!1,b_e.dataSource.base.pid===LgcM.ins.heroVo.id?d_m.visible=!0:d_w.visible=!0):b_e.visible=!1}}}}},b_s.ID=0,b_s.mapID=0,b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.altarHistorylist.renderHandler=Laya.Handler.create(e,e.RenderList,null,!1),e.altarHistorylist.vScrollBarSkin="",e.altarHistorylist.scrollBar.elasticDistance=200,e.altarHistorylist.scrollBar.elasticBackTime=500,e}e.dreamlandAltarPanel=p_g;var d_u,b_e=(d_u=ui.window.dreamLand.dreamlandAltarDefenceItemTipUI,__extends(d_m,d_u),d_m.open=function(){Uwr(UIM,d_m)},d_m.close=function(){Slz(UIM,d_m)},d_m.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":d_m.close();break;case"useDefenscItemBtn":var p_l=void 0,b_s=Config.global[1602].t_info;b_p.checkConsume([b_s[0]])?p_l=[b_s[0]]:b_p.checkConsume([b_s[1]])&&(p_l=[b_s[1]]),p_l?(BagModel.instance.getItemById(BagTypeDefine.BAG_TYPE_ITEM,p_l[0][0]),dreamlandModel.instance.reqDreamlandProtect(),0<p_g.ID&&dreamlandModel.instance.reqDreamlandQuery(p_g.ID)):r_f.instance.isWindow(b_s[1][0]),d_m.close()}},d_m.prototype.onAdded=function(){Wbs(this,Laya)},d_m.prototype.onRemove=function(){Gxn(this,Laya)},d_m.prototype.updateView=function(){var p_l=Config.global[1602].t_info[1][0],p_g=Config.CItem(p_l);this.tipsDesc.style.fontSize=24,this.tipsDesc.style.color="#444675",this.itemBox||(this.itemBox=new e.ItemBox,this.item.addChild(this.itemBox));var b_s=new ModuleItemVO;b_s.id=p_l,b_s.amount=1,this.itemBox.setItemData(b_s),this.itemBox.setName(""),p_g&&Laya.timer.once(200,this,(function(){this.tipsDesc.innerHTML=(j_x("68_2032_1365")+j_x(1876))+Utils.setImg(Resource.ResUrl.getIconUrl(p_g.icon),40,40)+("*1"+j_x("571_1878_1619")+j_x("2198_407_1398")),this.itemDesc.text=(j_x("1365_1876_1865")+j_x("531_1976")+"1"+j_x("1747_1702_1619")+j_x("2198_1702_2460"))})),this.hasNum.text=BagModel.instance.getItemCountByItemID(p_l,BagTypeDefine.BAG_TYPE_ITEM).toString()},d_m);function d_m(){var e=d_u.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.dreamlandAltarDefenceItemTip=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.dreamLand.dreamlandHelpUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Amq(this,Laya)},b_s.open=function(){Idg(UIM,b_s)},b_s.prototype.onRemoved=function(){Wre(this,Laya)},b_s.prototype.onClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":b_s.close()}},b_s.close=function(){Qio(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.dreamLandHelp=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.dreamLand.dreamlandUI,__extends(b_s,p_l),b_s.open=function(){Czi(UIM,b_s)},b_s.prototype.onRedPoint=function(){Kpb(this,dreamlandModel)},b_s.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"universeSkillBtn":e.dreamlandSkillPanel.open();break;case"startBtn":e.dreamlandCreatePanel.open();break;case"searchBtn":e.dreamlandSearchPanel.open();break;case"helpBtn":e.dreamLandHelp.open()}},b_s.prototype.updataView=function(){this.onRedPoint();var e=dreamlandModel.instance.sortDreamlandDatas();!e||e.length<=0?(this.IsInventedDatas=!0,e=this.datas):this.IsInventedDatas=!1,this.EnterList.array=e,Laya.timer.loop(1e3,this,this.updateLoopTime)},b_s.close=function(){Iuo(UIM,b_s)},b_s.prototype.onAdded=function(){Izm(dreamlandModel,this,Laya,LED,l_r)},b_s.prototype.onRemove=function(){Wka(this,Laya,LED,l_r)},b_s.prototype.selectList=function(p_l){var p_g=this.EnterList.getCell(p_l);p_g&&(b_s.close(),e.dreamlandAltarPanel.open(p_g.dataSource.masterPid))},b_s.prototype.RenderList=function(e,p_l){var p_g=e.getChildByName("roleBox");if(e.dataSource.masterPlayer){var b_s=e.dataSource;p_g.visible=!0,e.mouseEnabled=!0;var d_u=p_g.getChildByName("masterName"),b_e=p_g.getChildByName("masterState"),d_m=p_g.getChildByName("time");p_g.getChildByName("masterSex").index=b_s.masterPlayer.base.entryId-1,d_m.dataSource=b_s;var d_w=Math.max(0,b_s.overplustTime);d_m.text=Utils.formatTimeStr(d_w),d_u.text=b_s.masterPlayer.base.name,b_e.text=b_s.stateStr(0,"-");for(var f_t=p_g.getChildByName("chairs"),v_z=0;v_z<f_t.numChildren;v_z++){var d_h=f_t.getChildByName("sex"+v_z),r_t=b_s.getPlayer(v_z+1);r_t?(d_h.visible=!0,d_h.index=Math.min(r_t.base.entryId-1,1)):d_h.visible=!1}}else p_g.visible=!1,e.mouseEnabled=!1},b_s.prototype.updateLoopTime=function(){if(!this.IsInventedDatas)for(var e=this.EnterList.array.length,p_l=0;p_l<e;p_l++){var p_g=this.EnterList.cells[p_l];if(p_g){var b_s=p_g.getChildByName("roleBox");if(b_s){var d_u=b_s.getChildByName("time");d_u.dataSource&&d_u.dataSource.overplustTime&&(d_u.dataSource.overplustTime<=0?p_g.visible=!1:d_u.text=Utils.formatTimeStr(d_u.dataSource.overplustTime))}}}},b_s);function b_s(){var e=p_l.call(this)||this;e.datas=[],e.EnterList.renderHandler=Laya.Handler.create(e,e.RenderList,null,!1),e.EnterList.selectEnable=!0,e.EnterList.selectHandler=Laya.Handler.create(e,e.selectList,null,!1),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.EnterList.vScrollBarSkin="",e.EnterList.scrollBar.elasticDistance=200,e.EnterList.scrollBar.elasticBackTime=500,e.IsInventedDatas=!0;for(var p_g=0;p_g<4;p_g++){var b_s=new dreamlandVo;b_s.endTime=SyncTime.serverTime,e.datas.push(b_s)}return e}e.dreamlandMianPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.dreamLand.dreamlandPkUI,__extends(b_s,p_l),b_s.prototype.updateData=function(){null!=this.dataSource&&this.updateHp()},b_s.prototype.ExitPk=function(){this.dataSource.isWin?e.dreamlandWinPanel.open(this.dataSource):e.dreamlandLosePanel.open(SyncTime.serverTime/1e3+10);var p_l=LgcM.ins.getActorById(this.dataSource.tbase.pid,Engine2d.ActorTypeDefine.PLAYER);p_l&&p_l.stopAutoCopy(),Engine2d.Hero.local.stopAutoCopy(),b_s.close()},b_s.prototype.onAdded=function(){this.initView(),this.recordingTime=SyncTime.serverTime,this.closeBtn.on(Laya.Event.CLICK,this,this.ExitPk),LED.event(l_r.PLOTING_START,2),Laya.timer.once(1e3,this,(function(){Laya.timer.loop(300,this,this.updateHp)}))},b_s.prototype.initView=function(){var e=LgcM.ins.heroVo;this.dataSource.isWin?this.otherMaxHp=Math.ceil(.9*e.hpUpper):this.otherMaxHp=Math.ceil(1.2*e.hpUpper),this.realMyHp=e.hpUpper,this.realOtherHp=this.otherMaxHp,this.updateProgress(),this.myName.text=LgcM.ins.heroVo.name,this.otherName.text=this.dataSource.tbase.name;var p_l=this.dataSource.tbase.stateLv,p_g=this.dataSource.tbase.stateSubLv,b_s=StateModel.instance.getStateLv(),d_u=StateModel.instance.getStateSubLv();this.other_state.text=Config.state_state[p_l].desc+""+Config.state_stateSub[p_g].desc,this.oneself_state.text=Config.state_state[b_s].desc+""+Config.state_stateSub[d_u].desc},b_s.close=function(){Mff(UIM,b_s)},b_s.prototype.updateHp=function(){var e=Math.ceil(Math.random()*LgcM.ins.heroVo.hpUpper*.03),p_l=Math.ceil(Math.random()*this.otherMaxHp*.03);e=this.dataSource.isWin?Math.max(e,p_l):Math.min(e,p_l),this.realMyHp-=p_l,this.realOtherHp-=e,this.updateProgress();var p_g=(SyncTime.serverTime-this.recordingTime)/1e3;(this.realMyHp<=0||this.realOtherHp<=0||10<=p_g)&&this.ExitPk()},b_s.prototype.onRemove=function(){Epv(Laya,this,LED,l_r)},b_s.open=function(e){UIM.open(b_s,null,e,!1,!1,!1,!1,{container:"top"})},b_s.prototype.updateProgress=function(){Auv(LgcM,this)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.dreamlandPkPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.dreamLand.dreamlandAttackResultUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Ixi(this)},b_s.prototype.onRemove=function(){this.dataSource.tbase.stateLv==StateModel.instance.getStateLv()&&this.dataSource.stateSubLv==StateModel.instance.getStateSubLv()&&dreamlandModel.instance.reqDreamlandExitFight()},b_s.open=function(e){Wyv(e,UIM,b_s)},b_s.prototype.updateView=function(){Ocj(this,j_x)},b_s.close=function(){Iqo(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.dreamlandWinPanel=p_g;var d_u,b_e=(d_u=ui.window.fb.fubenshibaiUI,__extends(d_m,d_u),d_m.open=function(e){UIM.open(d_m,["smelt.atlas"],{result:e},!1,!0,!0)},d_m.prototype.onRemove=function(){Aeu(this,Laya)},d_m.close=function(){Mfp(UIM,d_m)},d_m.prototype.closeSelf=function(){Ghz(d_m)},d_m.prototype.onTimer=function(){Qcm(SyncTime,this,j_x)},d_m.prototype.leaveFb=function(e){void 0===e&&(e=!0),Laya.timer.clear(this,this.leaveFb),e&&d_m.close(),dreamlandModel.instance.reqDreamlandExitFight()},d_m.prototype.onAdded=function(){Csg(this,Laya,SyncTime,j_x)},d_m.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"leaveBtn":this.leaveFb();break;case"getHelpBtn":break;case"roleBtn":this.leaveFb(),b_p.registerAutoOpenPanel(e.RolePanel,-1);break;case"skillBtn":this.leaveFb(),b_p.registerAutoOpenPanel(e.SkillPanel,-1);break;case"talismanBtn":this.leaveFb(),b_p.registerAutoOpenPanel(e.TalismanPanel,-1);break;case"strengthBtn":this.leaveFb(),b_p.registerAutoOpenPanel(e.StrengthPanel,-1)}},d_m);function d_m(){var e=d_u.call(this)||this;return e._closePanelTime=0,e._srcLeaveBtnX=0,e._srcLeaveBtnX=e.leaveBtn.x,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.dreamlandLosePanel=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.dreamLand.dreamlandSkillUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Uvi(dreamlandModel,this,Laya,LED,l_r)},b_s.prototype.updateData=function(){Laya.timer.once(200,this,(function(){this.skillList.array=dreamlandModel.instance.DreamlandSkillCfgs(this.index);var e=Math.max(dreamlandModel.instance._index-1,0);this.skillList.scrollTo(Math.max(e,0))}))},b_s.close=function(){Irm(UIM,b_s)},b_s.prototype.onRemove=function(){Uny(this,Laya,LED,l_r)},b_s.open=function(){Qvv(UIM,b_s)},b_s.prototype.onMouseClick=function(e){var p_l=e.target;switch(p_l.name){case"closeBtn":case"backBtn":b_s.close();break;case"activeBtn":var p_g=p_l;if(null==p_g.dataSource)return;dreamlandModel.instance._index==p_g.dataSource[1]&&dreamlandModel.instance.reqDreamlandSkillActive(p_g.dataSource[0].id)}},b_s.prototype.renderList=function(e,p_l){var p_g=e.getChildByName("title"),b_s=e.getChildByName("desc"),d_u=e.getChildByName("maskImage"),b_e=e.getChildByName("activeBtn"),d_m=e.getChildByName("itemBg"),d_w=b_e.getChildByName("redImage"),f_t=e.getChildByName("runing"),v_z=f_t.getChildByName("progresslab"),d_h=Math.max(d_m.clipY,6);d_m.index=p_l%d_h,b_e.dataSource=[e.dataSource,p_l];var r_t=e.dataSource;f_t.visible=d_u.visible=!1,d_w.visible=!1;var t_n=dreamlandModel.instance._universeSkillDatas[this.index],f_y=1e3*(this.index+1);if(v_z.color="#71de66",t_n&&(f_y=t_n.id),f_y>=r_t.id)b_e.label=(j_x("1300_507_2079")),b_e.visible=!0,b_e.disabled=!0,v_z.text="";else if(f_y+1==r_t.id){b_e.label=(j_x("507_2079_1343")+j_x(2056)),b_e.visible=!0,b_e.disabled=!1,f_t.visible=!0,d_w.visible=dreamlandModel.instance.IsRedPoint(),d_w.visible||(v_z.color="#e32828");var p_q=LgcM.ins.heroVo.dreamlandExp;v_z.text=Utils.$("{1}/{2}",p_q,r_t.active)}else d_u.visible=!0,b_e.visible=!1,d_w.visible=!1,v_z.text="";p_g.text=r_t.name;var h_h=Config.talisman_deployment[r_t.effect[0][0]];b_s.text=Utils.$(r_t.desc,h_h.name,r_t.effect[0][1])},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.skillList.vScrollBarSkin="",e.skillList.scrollBar.elasticDistance=200,e.skillList.scrollBar.elasticBackTime=500,e.index=0,e.skillList.renderHandler=Laya.Handler.create(e,e.renderList,null,!1),e}e.dreamlandSkillPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.ascent.AscentCellUI,__extends(b_s,p_l),Object.defineProperty(b_s.prototype,"renderData",{get:function(){return this._renderData},set:function(e){this._renderData=e,this.updateView()},enumerable:!0,configurable:!0}),b_s.prototype.updateView=function(){if(this._renderData){var e=AscentModel.instance.ascentVo,p_l=Config.fb_ascent[e.lastFbId],p_g=this._renderData.id,b_s=Config.fb_dungeon[p_g].monster,d_u=Config.obj_monster[b_s].icon,b_e=Resource.ResUrl.getIconUrl(d_u);this.headIcon.skin=b_e,this.floorTxt.text=Utils.$((j_x(573)+"{1}"+j_x(1778)),Utils.formaNum(this._renderData.floor)),AscentModel.instance.getAscentListByState(this._renderData.state).length,p_l&&p_l.floor;var d_m=AscentModel.instance.getAscentStatus(this._renderData.state,this._renderData.floor);d_m==AscentCellStatus.OPEN?(this.notCircle.visible=!1,this.passedIcon.visible=!1,this.notFloorBG.visible=!1,this.openCircle.visible=!0,this.fightClip.play(),this.fightClip.visible=!0,this.passClip.stop(),this.passClip.visible=!1):d_m==AscentCellStatus.PASS?(this.notCircle.visible=!0,this.notFloorBG.visible=!0,this.openCircle.visible=!1,this.fightClip.stop(),this.fightClip.visible=!1,p_g==AscentModel.justFbId?(AscentModel.justFbId=0,this.passClip.play(!1),this.passClip.on(Laya.Event.COMPLETE,this,this.onPassPlayComplete),this.passClip.visible=!0,this.passedIcon.visible=!1):(this.passedIcon.visible=!0,this.passClip.visible=!1)):(this.notCircle.visible=!0,this.notFloorBG.visible=!0,this.passedIcon.visible=!1,this.openCircle.visible=!1,this.fightClip.stop(),this.fightClip.visible=!1,this.passClip.stop(),this.passClip.visible=!1)}},b_s.prototype.onPassPlayComplete=function(){Gvk(this,Laya)},b_s.prototype.onClick=function(){this._renderData&&this.showTeam(this._renderData.id)},b_s.prototype.onAdded=function(){Kck(this,Laya)},b_s.prototype.showTeam=function(p_l){var p_g=TeamModel.instance.getTeamVO(TeamAimsType.ASCENT);p_g.targetFbId!=p_l&&p_g.isLeader&&AscentModel.instance.getAscentStatus(this._renderData.state,this._renderData.floor)==AscentCellStatus.OPEN&&TeamModel.instance.reqChangeTeamAims(TeamAimsType.ASCENT,p_l),e.TeamPanel.open(TeamAimsType.ASCENT,p_l)},b_s.prototype.onRemove=function(){Cbr(this,Laya)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.AscentCell=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.ascent.AscentHelpPanelUI,__extends(b_s,p_l),b_s.prototype.onClick=function(e){var p_l=e.target;if(p_l)switch(p_l.name){case"closeBtn":b_s.close()}},b_s.open=function(){Arz(UIM,b_s)},b_s.prototype.onRemove=function(){Sdq(this,Laya)},b_s.prototype.onAdded=function(){Qjo(this,Laya)},b_s.close=function(){Ovd(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.scrollPanel.vScrollBarSkin="",e.scrollPanel.vScrollBar.elasticBackTime=200,e.scrollPanel.vScrollBar.elasticDistance=50,e.scrollPanel.vScrollBar.visible=!1,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.AscentHelpPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.ascent.AscentPanelUI,__extends(b_s,p_l),b_s.prototype.updateView=function(){var e=AscentModel.instance.ascentVo,p_l=LgcM.ins.heroVo.stateLv;0<e.lastFbId&&(p_l=Config.fb_ascent[e.lastFbId].state),this.handleLeftRight(p_l);var p_g=Config.global[GlobalDefine.ascent_seek_count].i_info,b_s=Config.global[GlobalDefine.ascent_help_count].i_info;this.seekHelpTxt.text=Utils.$("{1}/{2}",p_g-e.seekCount,p_g),this.helpTxt.text=Utils.$("{1}/{2}",b_s-e.helpCount,b_s)},b_s.open=function(e){Six(e,UIM,b_s)},b_s.prototype.onClick=function(p_l){var p_g=p_l.target;if(p_g)switch(p_g.name){case"closeBtn":case"backBtn":b_s.close();break;case"leftBtn":if(this._playing)return;this.handleLeftRight(this._curRenderState-1,!0);break;case"rightBtn":if(this._playing)return;this.handleLeftRight(this._curRenderState+1,!0);break;case"helpBtn":e.AscentHelpPanel.open()}},b_s.prototype.onRemove=function(){Yhx(this,Laya,LED,l_r)},b_s.prototype.handleLeftRight=function(e,p_l){void 0===p_l&&(p_l=!1);var p_g=AscentModel.instance.maxState,b_s=AscentModel.instance.minState;if(!(e<b_s||p_g<e)){if(b_s==p_g)return this.leftBtn.disabled=!0,void(this.rightBtn.disabled=!0);b_s<e&&e<p_g?(this.leftBtn.disabled=!1,this.rightBtn.disabled=!1):e==b_s&&e<p_g?(this.leftBtn.disabled=!0,this.rightBtn.disabled=!1,this.rightBtn.mouseEnabled=!0):e==p_g&&b_s<e&&(this.leftBtn.disabled=!1,this.rightBtn.disabled=!0);var d_u=Config.state_state[e];this.stateTxt.text=d_u?d_u.desc:"",this.renderStateFloor(e),p_l&&(this._playing=!0,Laya.Tween.to(this.floorBox,{f_u:-this.floorBox.width-150},150,Laya.Ease.backOut,Laya.Handler.create(this,this.onTweenComplete,[!1,e])))}},b_s.prototype.onTweenComplete=function(e,p_l){e?this._playing=!1:(this.floorBox.x=this.width+100,Laya.Tween.to(this.floorBox,{f_u:this._normalX},300,Laya.Ease.backOut,Laya.Handler.create(this,this.onTweenComplete,[!0,p_l])))},b_s.prototype.onTimer=function(){Itt(AscentModel,this,Utils)},b_s.prototype.renderStateFloor=function(e){var p_l=AscentModel.instance.getAscentListByState(e);if(p_l){this._curRenderState=e;for(var p_g=p_l.length,b_s=0;b_s<p_g;b_s++){var d_u=this["item"+(b_s+1)];d_u&&(d_u.renderData=p_l[b_s])}}},b_s.prototype.onSelect=function(e){if(0===e)this._rareAnimal.parent&&this.removeChild(this._rareAnimal);else{if(!p_k.instance.checkSystemOpen(FuncDefine.yishouFb)){var p_l=Config.funcOpen[FuncDefine.yishouFb];return this.tab.selectedIndex=0,void b_p.broadcastNotice(p_l.openError)}this._rareAnimal.parent&&this.removeChild(this._rareAnimal),this.addChild(this._rareAnimal)}AscentModel.instance._currSelec=e,this.title.skin=e?"res/ui/team/qizhenyishou.png":"res/ui/team/dengtianzhilu.png",this.ascent_Red.visible=AscentModel.instance.checkCanDo(),this.rare_Red.visible=RareAnimalModel.instance.checkCanDo(),this.suo_img.visible=!p_k.instance.checkSystemOpen(FuncDefine.yishouFb),this.tab.getChildByName("item1").gray=this.suo_img.visible},b_s.prototype.onAdded=function(){AscentModel.instance.reqAscentInfo(),this.onTimer(),Laya.timer.loop(1e3,this,this.onTimer),this._curSelect=this.dataSource?this.dataSource:0,this.tab.selectedIndex=this._curSelect,this.onSelect(this._curSelect),(AscentModel.instance.checkCanDo()||RareAnimalModel.instance.checkCanDo())&&RareAnimalModel.instance.checkCanDo()?AscentModel.instance.checkCanDo()||(this.tab.selectedIndex=1):this.tab.selectedIndex=0,this.on(Laya.Event.CLICK,this,this.onClick),this.leftBtn.on(Laya.Event.CLICK,this,this.onClick),this.rightBtn.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.ASCENT_UPDATE,this,this.onUpdateView)},b_s.prototype.onUpdateView=function(){""==AscentModel.instance.sendSource&&this.updateView()},b_s.close=function(){Iqs(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g._playing=!1,p_g._rareAnimal=new e.RareAnimalView,p_g._rareAnimal.x=p_g.bgIcon.x,p_g._rareAnimal.y=p_g.bgIcon.y,p_g._normalX=p_g.floorBox.x,p_g.tab.selectHandler=Laya.Handler.create(p_g,p_g.onSelect,null,!1),p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g}e.AscentPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.ascent.RareAnimalViewUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Eqg(LED,l_r,this,RareAnimalModel,Laya)},b_s.prototype.onTimer=function(){Yno(RareAnimalModel,this,Utils)},b_s.prototype.renderStateFloor=function(e){var p_l=RareAnimalModel.instance.getRareAnimalListByState(e);if(this._curRenderState=e,p_l)for(var p_g=1;p_g<7;p_g++){var b_s=this.floorBox.getChildByName("floor"+p_g),d_u=b_s.getChildByName("btn"+p_g),b_e=d_u.getChildByName("mask"+p_g),d_m=b_s.getChildByName("fight"+p_g),d_w=b_s.getChildByName("passIcon"+p_g),f_t=b_s.getChildByName("passClip"+p_g),v_z=b_s.getChildByName("bright"+p_g),d_h=(RareAnimalModel.instance.rareAnimalVo,p_l[p_g-1].id),r_t=(RareAnimalModel.instance.getRareAnimalListByState(p_l[p_g-1].state).length,RareAnimalModel.instance.getRareAnimalStatus(p_l[p_g-1].state,p_l[p_g-1].floor));r_t==AscentCellStatus.OPEN?(d_w.visible=!1,d_m.play(),d_m.visible=!0,f_t.stop(),f_t.visible=!1,v_z.visible=!0,b_e.visible=!1):r_t==AscentCellStatus.PASS?(d_m.stop(),d_m.visible=!1,b_e.visible=!0,v_z.visible=!1,d_h==AscentModel.justFbId?(AscentModel.justFbId=0,f_t.play(!1),f_t.on(Laya.Event.COMPLETE,this,this.onPassPlayComplete,[f_t,d_w]),f_t.visible=!0,d_w.visible=!1):(d_w.visible=!0,f_t.visible=!1)):(b_e.visible=!0,v_z.visible=!1,d_w.visible=!1,d_m.stop(),d_m.visible=!1,f_t.stop(),f_t.visible=!1),d_u.on(Laya.Event.CLICK,this,this.onClickPassBtn,[d_h,e,p_l[p_g-1].floor])}},b_s.prototype.updateView=function(){if(""==RareAnimalModel.instance.sendSource){var e=RareAnimalModel.instance.rareAnimalVo,p_l=LgcM.ins.heroVo.stateLv;0<e.lastFbId&&(p_l=Config.fb_yishou[e.lastFbId].state),this.handleLeftRight(p_l);var p_g=Config.global[GlobalDefine.rareAniamal_seek_count].i_info,b_s=Config.global[GlobalDefine.rareAniamal_help_count].i_info;this.seekHelpTxt.text=Utils.$("{1}/{2}",p_g-e.seekCount,p_g),this.helpTxt.text=Utils.$("{1}/{2}",b_s-e.helpCount,b_s)}},b_s.prototype.onPassPlayComplete=function(e,p_l){Wls(e,p_l,Laya,this)},b_s.prototype.onClickPassBtn=function(p_l,p_g,b_s){var d_u=TeamModel.instance.getTeamVO(TeamAimsType.RareAni);d_u.targetFbId!=p_l&&d_u.isLeader&&RareAnimalModel.instance.getRareAnimalStatus(p_g,b_s)==AscentCellStatus.OPEN&&TeamModel.instance.reqChangeTeamAims(TeamAimsType.RareAni,p_l),e.TeamPanel.open(TeamAimsType.RareAni,p_l)},b_s.prototype.handleLeftRight=function(e,p_l){void 0===p_l&&(p_l=!1);var p_g=RareAnimalModel.instance.maxState,b_s=RareAnimalModel.instance.minState;if(!(e<b_s||p_g<e)){if(b_s==p_g)return this.leftBtn.disabled=!0,void(this.rightBtn.disabled=!0);b_s<e&&e<p_g?(this.leftBtn.disabled=!1,this.rightBtn.disabled=!1):e==b_s&&e<p_g?(this.leftBtn.disabled=!0,this.rightBtn.disabled=!1,this.rightBtn.mouseEnabled=!0):e==p_g&&b_s<e&&(this.leftBtn.disabled=!1,this.rightBtn.disabled=!0);var d_u=Config.state_state[e],b_e=d_u?d_u.desc:"";this.stateTxt.text=b_e,this.renderStateFloor(e),p_l&&(this._playing=!0,Laya.Tween.to(this.floorBox,{f_u:-this.floorBox.width-150},150,Laya.Ease.backOut,Laya.Handler.create(this,this.onTweenComplete,[!1,e])))}},b_s.prototype.onRemoved=function(){Orl(LED,l_r,this,Laya)},b_s.prototype.onTweenComplete=function(e,p_l){e?this._playing=!1:(this.floorBox.x=this.width+100,Laya.Tween.to(this.floorBox,{f_u:this._normalX},300,Laya.Ease.backOut,Laya.Handler.create(this,this.onTweenComplete,[!0,p_l])))},b_s.prototype.onClick=function(p_l){var p_g=p_l.target;if(p_g)switch(p_g.name){case"leftBtn":if(this._playing)return;this.handleLeftRight(this._curRenderState-1,!0);break;case"rightBtn":if(this._playing)return;this.handleLeftRight(this._curRenderState+1,!0);break;case"helpBtn":e.AscentHelpPanel.open()}},b_s.prototype.onClickShop=function(){Yua(e,ShopConstant)},b_s);function b_s(){var e=p_l.call(this)||this;return e._playing=!1,e._normalX=e.floorBox.x,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.RareAnimalView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.bossTX_zhuangtaiUI,__extends(b_s,p_l),b_s.open=function(e){UIM.open(b_s,["bosscome.atlas","fbCommon.atlas","bossTX.atlas"],{cnf:e},!1,!1,!1,!1,{container:"mainUI",mainUIContainer:0,depthIndex:0})},b_s.prototype.setupTimer=function(){Laya.timer.clear(this,this.onTimer),this._bossId&&Laya.timer.loop(500,this,this.onTimer)},b_s.prototype.clearSelfTxtContent=function(){this.selfRankLab.text=Utils.$((j_x("206_1067_1077"))),this.selfUnitLab.text=this.selfUnit2Lab.text="",this.selfDmgLab.text=this.selfDmg2Lab.text="",this.selfNameLab.text=""},b_s.prototype.onBossIdUpdate=function(e){Aja(e,this,Engine2d)},b_s.prototype.setMonsterIcon=function(e,p_l){var p_g=LgcM.ins.getActorStdInfoById(p_l,e),b_s=Config.obj_monster[p_g.entryId];this.headIcon.skin=b_s?Resource.ResUrl.getIconUrl(b_s.icon):""},b_s.prototype.updateItem=function(e,p_l){if(e&&e instanceof Laya.Component){var p_g=e.dataSource,b_s=e.getChildByName("rankLab"),d_u=e.getChildByName("unitLab"),b_e=e.getChildByName("nameLab"),d_m=e.getChildByName("valueLab");b_e.text=p_g?p_g.name:"",p_g&&p_g.team&&(b_e.text+=(j_x("2046_2413_1869"))),b_s.text=String(p_l+1);var d_w=this.calcDmgLab(p_g?p_g.damage:0),f_t=d_w.unit,v_z=d_w.dmg;d_u.text=f_t,d_m.text=v_z.toFixed(0)}},b_s.prototype.onMarryFb=function(e,p_l){Kqt(e,p_l,this)},b_s.prototype.closeSelf=function(){Clw(b_s)},b_s.prototype.onSetAttackTargetType=function(e,p_l){var p_g=LgcM.ins.getActorStdInfoById(p_l,e);if(p_g){this.attackImg.visible=!0;var b_s=Resource.ResManager.getHeadUrl(p_g.entryId,p_g.headIcon);Resource.ResManager.Instance.getImg(b_s,this.attackImg),this.attackLab.text=p_g.name}else this.attackImg.visible=!1},b_s.prototype.updateView=function(e){void 0===e&&(e=!1),this.onRankUpdate(e?[]:DungeonModel.instance.getDmgRank()),this.onSelfRankUpdate(DungeonModel.instance.getSelfTeamDmg());var p_l=Config.fb_dungeon[b_p.fbId];if(p_l){var p_g=[DungeonType.StateBoss,DungeonType.TreaureB,DungeonType.TreaureM];this.rankBtn.visible=this.pkBtn.visible=0<=p_g.indexOf(p_l.type),this.teamBtn.visible=0<=[DungeonType.StateBoss].indexOf(p_l.type),this.b_inspire.visible=p_l.inspire&&1===p_l.inspire,this.b_inspire.visible&&this.rankBtn.visible&&(this.b_inspire.y=this.rankBtn.y+this.rankBtn.height+20);var b_s=[DungeonType.StateBoss,DungeonType.WildBoss,DungeonType.BossCome,DungeonType.TsBoss,DungeonType.TreaureB,DungeonType.TreaureM];this.rewardBtn.visible=0<=b_s.indexOf(p_l.type)&&p_l.type!=DungeonType.BossCome,this.dituImg.visible=0<=b_s.indexOf(p_l.type)||DungeonType.SouthSkyBoss==p_l.type||DungeonType.ChristamasBoss==p_l.type,this.expandBtn.visible=0<=b_s.indexOf(p_l.type);var d_u=Config.obj_monster[p_l.monster];this.headIcon.skin=d_u?Resource.ResUrl.getIconUrl(d_u.icon):""}else this.expandBtn.visible=!1,this.dituImg.visible=!1;p_l&&p_l.type==DungeonType.SouthSkyBoss&&SkillModel.instance.changeCloneSkill(),this.attackImg.visible=!1,this.attackImg.skin="",this.attackImg.texture=null,this.hpBar.value=1,this.hpLab.text="9999/9999",this.onHudunChange(this._bossId,Engine2d.ActorTypeDefine.MONSTER),this.onUpdateTeam(),this.updateRedPoint(),this.onUpdateInspireTimes()},b_s.prototype.onTimer=function(){var e=LgcM.ins.getActorStdInfoById(this._bossId,Engine2d.ActorTypeDefine.MONSTER);if(e){var p_l=Config.obj_monster[e.entryId]&&1<Config.obj_monster[e.entryId].bloodSubsection?Config.obj_monster[e.entryId].bloodSubsection:null,p_g=p_l?Resource.ResManager.getBloodUrls(p_l):null;this.hpBar.setBarSkins(p_g,p_l),this.txt_bloodNum.visible=!!p_g,this._hasBossActor=!0,this.nameLab.text=e.name?e.name:Config.obj_monster[e.entryId].name,this.lvLab.text=e.level.toString();var b_s=e.hp,d_u=e.hpUpper;this.hpBar.value=b_s/d_u,this.hpLab.text=b_s+"/"+d_u,this.txt_bloodNum.text=0<this.hpBar.barSkinIndex?"x"+(this.hpBar.barSkinIndex+1):""}else this._hasBossActor&&(Laya.timer.clear(this,this.onTimer),this.hpBar.value=0,this.hpLab.text="0/0",this.txt_bloodNum.visible=!1);this.onHudunChange(this._bossId,Engine2d.ActorTypeDefine.MONSTER)},b_s.prototype.onAdded=function(){if(this.x=100,this.y=GPlatform.concaveOffsetY+20,this.width=Stage.width-100,0<GPlatform.disStageX&&(this.btnBox.x=Stage.width-100-this.btnBox.width),this.on(Laya.Event.CLICK,this,this.onMouseClick),LED.on(l_r.FB_DMG_RANK_UPDATE,this,this.onRankUpdate),LED.on(l_r.FB_SELF_DMG_RANK_UPDATE,this,this.onSelfRankUpdate),LED.on(l_r.FB_BOSS_ID_UPDATE,this,this.onBossIdUpdate),LED.on(l_r.FB_SET_ATTACK_TARGET_TYPE,this,this.onSetAttackTargetType),LED.on(l_r.HUDUN_CHANGE,this,this.onHudunChange),LED.on(l_r.FB_TEAM_UPDATE,this,this.onUpdateTeam),LED.on(l_r.FB_HURT_REWARD_STATUS,this,this.onHurtRewardStatus),LED.on(l_r.FB_WILDBOSS_INSPIRE,this,this.onUpdateInspireTimes),LED.on(l_r.MONSTER_ADD,this,this.onMarryFb),LED.on(l_r.UPDATE_HEAVEN_SCORE,this,this.onSouthBossDamge),this.rankLst.array=[],this.dituImg.height!==b_s.DITU_HEIGHT_CLOSE&&this.swtichDitu(),this._bossId=DungeonModel.instance.getBossId(),"marry_fb"==Config.map[b_p.mapID].impl){var e=LgcM.ins.getActorInfos(Engine2d.ActorTypeDefine.MONSTER);if(this.btnBox.visible=!1,e){var p_l=e[0];if(p_l){this._bossId=p_l.id;var p_g=Config.obj_monster[p_l.entryId];this.headIcon.skin=p_g?Resource.ResUrl.getIconUrl(p_g.icon):""}}}else this._bossId=DungeonModel.instance.getBossId();this.setupTimer(),this.updateView(!0)},b_s.prototype.onHudunChange=function(e,p_l){var p_g=LgcM.ins.getActorStdInfoById(e,p_l);p_g?(this.shieldBar.visible=!!p_g.hudunUpper,this.shieldLab.text=(p_g.hudun||0)+"/"+(p_g.hudunUpper||0),p_g.hudun&&p_g.hudunUpper?this.shieldBar.value=p_g.hudun/p_g.hudunUpper:(this.shieldBar.value=0,this.shieldBar.visible=!1)):this.shieldBar.visible=!1,this.hpBar.visible=!this.shieldBar.visible},b_s.prototype.onRemove=function(){this.off(Laya.Event.CLICK,this,this.onMouseClick),LED.off(l_r.FB_DMG_RANK_UPDATE,this,this.onRankUpdate),LED.off(l_r.FB_SELF_DMG_RANK_UPDATE,this,this.onSelfRankUpdate),LED.off(l_r.FB_BOSS_ID_UPDATE,this,this.onBossIdUpdate),LED.off(l_r.FB_SET_ATTACK_TARGET_TYPE,this,this.onSetAttackTargetType),LED.off(l_r.HUDUN_CHANGE,this,this.onHudunChange),LED.off(l_r.FB_TEAM_UPDATE,this,this.onUpdateTeam),LED.off(l_r.FB_HURT_REWARD_STATUS,this,this.onHurtRewardStatus),LED.off(l_r.FB_WILDBOSS_INSPIRE,this,this.onUpdateInspireTimes),LED.off(l_r.MONSTER_ADD,this,this.onMarryFb),LED.off(l_r.UPDATE_HEAVEN_SCORE,this,this.onSouthBossDamge),Laya.timer.clearAll(this),this._hasBossActor=!1,UIM.instance.setMainLeftUIVisible(!0),SkillModel.instance.changeCloneSkill()},b_s.prototype.swtichDitu=function(){this.dituImg.height!==b_s.DITU_HEIGHT_OPEN?(this.dituImg.height=b_s.DITU_HEIGHT_OPEN,this.firstBox.visible=!1,this.selfBox.visible=!0,this.rankLst.visible=!0,this.expandBtn.y+=b_s.DITU_HEIGHT_OPEN-b_s.DITU_HEIGHT_CLOSE,this.expandBtn.rotation=180):(this.dituImg.height=b_s.DITU_HEIGHT_CLOSE,this.firstBox.visible=!0,this.selfBox.visible=!1,this.rankLst.visible=!1,this.expandBtn.y-=b_s.DITU_HEIGHT_OPEN-b_s.DITU_HEIGHT_CLOSE,this.expandBtn.rotation=0)},b_s.close=function(){Awh(UIM,b_s)},b_s.prototype.onRankUpdate=function(e){if(e){this.rankLst.array=e;var p_l=b_p.playerId,p_g=DungeonModel.instance.getTeamVo();p_g&&p_g.member&&p_g.member.length&&(p_l=p_g.member[0].pid);for(var b_s=!1,d_u=0;d_u<e.length;++d_u)if((f_t=e[d_u]).pid===p_l){this.selfRankLab.text=String(d_u+1);var b_e=this.calcDmgLab(f_t.damage),d_m=b_e.unit,d_w=b_e.dmg;this.selfUnitLab.text=this.selfUnit2Lab.text=d_m,this.selfDmgLab.text=this.selfDmg2Lab.text=d_w.toFixed(0),this.selfNameLab.text=f_t.name,f_t.team&&(this.selfNameLab.text+=(j_x("2046_2413_1869"))),b_s=!0;break}if(0<e.length){var f_t=e[0];this.firstNameLab.text=f_t.name+(f_t.team?(j_x("2046_2413_1869")+":"):":");var v_z=this.calcDmgLab(f_t.damage);d_m=v_z.unit,d_w=v_z.dmg,this.firstUnitLab.text=d_m,this.firstDmgLab.text=d_w.toFixed(0)}else this.firstNameLab.text=this.firstUnitLab.text=this.firstDmgLab.text="";b_s||this.clearSelfTxtContent(),this.onSelfRankUpdate(DungeonModel.instance.getSelfTeamDmg())}},b_s.prototype.onSouthBossDamge=function(e){Gbq(e,this)},b_s.prototype.onMouseClick=function(p_l){var p_g=p_l.target,b_s=DungeonModel.instance.getFbConf();switch(p_g.name){case"rewardBtn":b_s?b_s.type===DungeonType.WildBoss||b_s.type===DungeonType.TsBoss?e.DmgRankRewardPanel.open(b_s.type,b_s.id):b_s.type===DungeonType.StateBoss?e.HurtRewardPanel.open(b_s.type,b_s.id):b_s.type!==DungeonType.TreaureB&&b_s.type!==DungeonType.TreaureM||e.STBossRankPanel.open(b_s.id):e.MarryFbRewardPanel.open();break;case"expandBtn":case"dituImg":this.swtichDitu();break;case"rankBtn":b_s&&(b_s.type===DungeonType.TreaureB||b_s.type===DungeonType.TreaureM?e.STBossRankPanel.open(b_s.id):e.StateBossRankPanel.open(b_s.type,b_s.id,DungeonModel.instance.getDmgRank()));break;case"teamBtn":DungeonModel.instance.isTeam()?e.DungeonMyTeamPanel.open():e.DungeonTeamTipPanel.open();break;case"pkBtn":e.DungeonPkLstPanel.open();break;case"headImg":var d_u=LgcM.ins.getActorStdInfoById(DungeonModel.instance.getBossId(),Engine2d.ActorTypeDefine.MONSTER);d_u&&DungeonModel.instance.changeAttackTarget(d_u);break;case"b_inspire":e.WildBossEncourageView.open()}},b_s.prototype.calcDmgLab=function(e){var p_l="";return e=1e8<e?(p_l=(j_x(2377)),Math.floor(e/1e8)):1e4<e?(p_l=(j_x(729)),Math.floor(e/1e4)):(p_l="",e),{unit:p_l,dmg:e}},b_s.prototype.onUpdateInspireTimes=function(){var e=Config.global[GlobalDefine.wildboss_inspire_times],p_l=this.b_inspire.getChildByName("dectxt");p_l&&e&&(p_l.text=(j_x("712_1835")+"+")+DungeonModel.instance.wildBossInspireTimes*e.i_info+"%")},b_s.prototype.onSelfRankUpdate=function(e){Qlg(e,this)},b_s.prototype.updateRedPoint=function(){var e=DungeonModel.instance.getFbConf();if(this.rewardRpImg.visible=!1,e&&e.type===DungeonType.StateBoss){var p_l=DungeonModel.instance.getHurtRewardStatus(e.type,e.id);for(var p_g in p_l)if(1===p_l[p_g]){this.rewardRpImg.visible=!0;break}}},b_s.prototype.onUpdateTeam=function(){var e=DungeonModel.instance.getTeamVo();this.teamNumLab.text=e?(e.member?e.member.length:0)+"/3":""},b_s.prototype.onHurtRewardStatus=function(){Qmr(this)},b_s.DITU_HEIGHT_OPEN=181,b_s.DITU_HEIGHT_CLOSE=44,b_s);function b_s(){var e=p_l.call(this)||this;return e._bossId=null,e._hasBossActor=!1,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.rankLst.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.hpBar.speedTime=300,e.shieldBar.speedTime=100,e.hpBar.isMaskProgress=e.shieldBar.isMaskProgress=!0,e.posy=e.b_inspire.y,e}e.BossBar=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.bosscome.bosscome_attackUI,__extends(b_s,p_l),b_s.open=function(){Mlk(UIM,b_s)},b_s.prototype.onClick=function(e){var p_l=e.target;switch(p_l.name){case"b_fight":BossComeModel.reqBossComeChallenge(p_l.dataSource.pid);case"closeBtn":b_s.close()}},b_s.prototype.onAdded=function(e){Wlg(e,this,Laya,LED,l_r,BossComeModel)},b_s.prototype.onChallengeList=function(e){var p_l=BossComeModel.instance.info;this.t_count.text=(p_l.buyRobTimes+Config.global[GlobalDefine.bosscome_rob_times].i_info-p_l.robTimes).toString();var p_g=[];for(var b_s in e.list)0<e.list[b_s].score&&p_g.push(e.list[b_s]);this.list.array=p_g,this.t_null.visible=0==p_g.length},b_s.prototype.onRemoved=function(e){Uol(e,this,Laya,LED,l_r)},b_s.close=function(){Ejt(UIM,b_s)},b_s.prototype.onRender=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("t_name"),d_u=e.getChildByName("t_score"),b_e=e.getChildByName("t_power"),d_m=e.getChildByName("b_fight");b_s.text=p_g.name+(p_g.guildName?Utils.$("({1})",p_g.guildName):""),d_u.text=p_g.score.toString(),b_e.text=p_g.fight.toString(),d_m.dataSource={pid:p_g.pid}},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.list.vScrollBarSkin="",e.list.scrollBar.elasticBackTime=200,e.list.scrollBar.elasticDistance=50,e.list.array=null,e.list.renderHandler=Laya.Handler.create(e,e.onRender,null,!1),e}e.BossComeAttackPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.bosscome.bosscome_encourageUI,__extends(b_s,p_l),b_s.open=function(){Qwa(UIM,b_s)},b_s.prototype.onRemoved=function(e){Ekx(e,this,Laya,LED,l_r)},b_s.close=function(){Mfs(UIM,b_s)},b_s.prototype.onAdded=function(e){Omc(e,this,Laya,LED,l_r)},b_s.prototype.updateView=function(){Qqs(this,BossComeModel,Config,GlobalDefine)},b_s.prototype.onClick=function(e){switch(e.target.name){case"b_sure":BossComeModel.reqBossComeInspire();break;case"b_cancel":case"closeBtn":b_s.close()}},b_s.prototype.sceneChange=function(){b_p.lastMapID&&"bosscome"==Config.map[b_p.lastMapID].impl&&b_s.close()},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.BossComeEncouragePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bosscome_icon_viewUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Mub(this,Laya)},b_s.prototype.onFrameLoop=function(){this.nextTime>=SyncTime.serverTime?this.open?(this.visible||(this.visible=!0,UIM.instance.getMainLetUI().sortRightBox()),this.timeCountTxt.text=this.formatTimeStr(Math.ceil((this.nextTime-SyncTime.serverTime)/1e3))+(j_x("1865_396_2426"))):this.nextTime-SyncTime.serverTime<18e5?(this.visible||(this.visible=!0,UIM.instance.getMainLetUI().sortRightBox()),this.timeCountTxt.text=this.formatTimeStr(Math.ceil((this.nextTime-SyncTime.serverTime)/1e3))+(j_x("1865_155_1186"))):this.visible&&(this.visible=!1,UIM.instance.getMainLetUI().sortRightBox()):(this.visible&&(this.visible=!1,UIM.instance.getMainLetUI().sortRightBox()),this.getNextTime(),this.onFrameLoop())},b_s.prototype.updateTimeOpen=function(e){Crj(e,this,j_x,Laya)},b_s.prototype.update=function(){Laya.timer.clearAll(this);var e=this.getIsInActivity();this.visible=!0,0<e?(this.updateTime(e),Laya.timer.once(1e3,this,this.updateTime,[e-1])):1800<(e=-e)?(this.visible=!1,e-=1800):(this.updateTimeOpen(e),Laya.timer.once(1e3,this,this.updateTimeOpen,[e-1])),Laya.timer.once(1e3*e,this,this.update),UIM.instance.getMainLetUI().sortRightBox()},b_s.prototype.getNextTime=function(){var e=0;for(var p_l in Config.activity_activity){var p_g=Config.activity_activity[p_l];if(p_g.type==ActivityTypeDefine.GS_bossCome){var b_s=p_g.startTime.split(":"),d_u=new Date;d_u.setTime(SyncTime.serverTime),d_u.setHours(parseInt(b_s[0]),parseInt(b_s[1]),0,0);var b_e=d_u.getTime();if(b_s=p_g.stopTime.split(":"),d_u.setHours(parseInt(b_s[0]),parseInt(b_s[1]),0,0),b_e<SyncTime.serverTime&&SyncTime.serverTime<d_u.getTime())return this.nextTime=d_u.getTime(),void(this.open=!0);d_u.setTime(b_e),b_e>SyncTime.serverTime&&(0==e||e>d_u.getTime())&&(e=d_u.getTime()),d_u.setTime(b_e+864e5),d_u.getTime()>SyncTime.serverTime&&(0==e||e>d_u.getTime())&&(e=d_u.getTime())}}this.nextTime=e,this.open=!1},b_s.prototype.updateTime=function(e){Ytj(e,this,j_x,Laya)},b_s.prototype.start=function(){Ayh(this,Laya)},b_s.prototype.getIsInActivity=function(){var e=0;for(var p_l in Config.activity_activity){var p_g=Config.activity_activity[p_l];if(p_g.type==ActivityTypeDefine.GS_bossCome){var b_s=p_g.startTime.split(":"),d_u=new Date;d_u.setTime(SyncTime.serverTime),d_u.setHours(parseInt(b_s[0]),parseInt(b_s[1]),0);var b_e=SyncTime.serverTime-d_u.getTime(),d_m=Config.Utils.parseActivityKeepTime(p_g);if(0<b_e&&b_e<1e3*d_m)return Math.ceil((1e3*d_m-b_e)/1e3);0<(b_e=d_u.getTime()-SyncTime.serverTime)&&(0==e||b_e<e)&&(e=b_e),d_u.setTime(d_u.getTime()+864e5),0<(b_e=d_u.getTime()-SyncTime.serverTime)&&(0==e||b_e<e)&&(e=b_e)}}return-Math.ceil(e/1e3)},b_s.prototype.onRemoved=function(){Qye(this,Laya)},b_s.prototype.onClick=function(){Gvh(LgcM,e)},b_s.prototype.formatTimeStr=function(e){var p_l=Math.floor(e/60),p_g=Math.floor(e-60*p_l);return(p_l<10?"0"+p_l:p_l)+":"+(p_g<10?"0"+p_g:p_g)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e}e.BossComeIcon=p_g;var d_u,b_e=(d_u=ui.window.activity.stateboss_icon_viewUI,__extends(d_m,d_u),d_m.prototype.onAdded=function(){Uuu(this,Laya)},d_m.prototype.start=function(){Eua(this,Laya)},d_m.prototype.updateTime=function(e){Gcx(e,this,j_x,Laya)},d_m.prototype.update=function(){Laya.timer.clearAll(this);var e=this.getIsInActivity();this.visible=!0,0<e?(this.updateTime(e),Laya.timer.once(1e3,this,this.updateTime,[e-1])):1800<(e=-e)?(this.visible=!1,e-=1800):(this.updateTimeOpen(e),Laya.timer.once(1e3,this,this.updateTimeOpen,[e-1])),Laya.timer.once(1e3*e,this,this.update),UIM.instance.getMainLetUI().sortRightBox()},d_m.prototype.getNextTime=function(){var e=0;for(var p_l in Config.activity_activity){var p_g=Config.activity_activity[p_l];if(p_g.type==ActivityTypeDefine.GS_stateBoss){var b_s=p_g.startTime.split(":"),d_u=new Date;d_u.setTime(SyncTime.serverTime),d_u.setHours(parseInt(b_s[0]),parseInt(b_s[1]),0,0);var b_e=d_u.getTime();if(b_s=p_g.stopTime.split(":"),d_u.setHours(parseInt(b_s[0]),parseInt(b_s[1]),0,0),b_e<SyncTime.serverTime&&SyncTime.serverTime<d_u.getTime())return this.nextTime=d_u.getTime(),void(this.open=!0);d_u.setTime(b_e),b_e>SyncTime.serverTime&&(0==e||e>d_u.getTime())&&(e=d_u.getTime()),d_u.setTime(b_e+864e5),d_u.getTime()>SyncTime.serverTime&&(0==e||e>d_u.getTime())&&(e=d_u.getTime())}}this.nextTime=e,this.open=!1},d_m.prototype.updateTimeOpen=function(e){Uqp(e,this,j_x,Laya)},d_m.prototype.onRemoved=function(){Ekr(this,Laya)},d_m.prototype.getIsInActivity=function(){var e=0;for(var p_l in Config.activity_activity){var p_g=Config.activity_activity[p_l];if(p_g.type==ActivityTypeDefine.GS_stateBoss){var b_s=p_g.startTime.split(":"),d_u=new Date;d_u.setTime(SyncTime.serverTime),d_u.setHours(parseInt(b_s[0]),parseInt(b_s[1]),0);var b_e=SyncTime.serverTime-d_u.getTime(),d_m=Config.Utils.parseActivityKeepTime(p_g);if(0<b_e&&b_e<1e3*d_m)return Math.ceil((1e3*d_m-b_e)/1e3);0<(b_e=d_u.getTime()-SyncTime.serverTime)&&(0==e||b_e<e)&&(e=b_e),d_u.setTime(d_u.getTime()+864e5),0<(b_e=d_u.getTime()-SyncTime.serverTime)&&(0==e||b_e<e)&&(e=b_e)}}return-Math.ceil(e/1e3)},d_m.prototype.onClick=function(){Mgk(LgcM,e)},d_m.prototype.formatTimeStr=function(e){var p_l=Math.floor(e/60),p_g=Math.floor(e-60*p_l);return(p_l<10?"0"+p_l:p_l)+":"+(p_g<10?"0"+p_g:p_g)},d_m.prototype.onFrameLoop=function(){this.nextTime>=SyncTime.serverTime?this.open?(this.visible||(this.visible=!0,UIM.instance.getMainLetUI().sortRightBox()),this.timeCountTxt.text=this.formatTimeStr(Math.ceil((this.nextTime-SyncTime.serverTime)/1e3))+(j_x("1865_396_2426"))):this.nextTime-SyncTime.serverTime<18e5?(this.visible||(this.visible=!0,UIM.instance.getMainLetUI().sortRightBox()),this.timeCountTxt.text=this.formatTimeStr(Math.ceil((this.nextTime-SyncTime.serverTime)/1e3))+(j_x("1865_155_1186"))):this.visible&&(this.visible=!1,UIM.instance.getMainLetUI().sortRightBox()):(this.visible&&(this.visible=!1,UIM.instance.getMainLetUI().sortRightBox()),this.getNextTime(),this.onFrameLoop())},d_m);function d_m(){var e=d_u.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e}e.StateBossIcon=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.bosscome.bosscome_inspireUI,__extends(b_s,p_l),b_s.open=function(){UIM.open(b_s,["bosscome.atlas"],null,!1,!1,!1,!1,{container:"under"})},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"b_inspire":e.BossComeEncouragePanel.open()}},b_s.prototype.onRemoved=function(p_l){UIM.instance.showHeadTopUI(),this.off(Laya.Event.CLICK,this,this.onClick),LED.off(l_r.BOSSCOME_INSPIRE_SUCCESS,this,this.updateView),e.BossComePanel.open()},b_s.close=function(){Mau(UIM,b_s)},b_s.prototype.onAdded=function(p_l){e.BossComePanel.close(),UIM.instance.hideHeadTopUI(),this.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.BOSSCOME_INSPIRE_SUCCESS,this,this.updateView),this.updateView()},b_s.prototype.updateView=function(){this.t_per.text=Utils.$((j_x("712_1835_767")+"+{1}%"),BossComeModel.instance.info.inspireTimes*Config.global[GlobalDefine.bosscome_inspire_pct].i_info)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.BossComeInspireBtn=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.bosscome.bosscome_instructionUI,__extends(b_s,p_l),b_s.open=function(){Yjg(UIM,b_s)},b_s.prototype.onRemoved=function(e){Qsm(e,this,Laya)},b_s.close=function(){Ebi(UIM,b_s)},b_s.prototype.onAdded=function(e){Kdh(e,this,Laya)},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":b_s.close()}},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.BossComeInstructionPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.bosscome.bosscomeUI,__extends(b_s,p_l),b_s.open=function(){Izw(UIM,b_s)},b_s.prototype.setPInfo=function(e){var p_l=BossComeModel.instance.info;if(0<e)this.t_pDesc.text=(j_x("1614_2171_1702")+j_x(2460)+":"),this.t_pInfo.color=Utils.Color.RED,this.t_pInfo.text=Utils.formatTimeStr(e),Laya.timer.once(1e3,this,this.setPInfo,[e-1]),this.rp_attackPlayer.visible=!1,this.isInPlayerCooldown=!0;else{this.t_pDesc.text=(j_x("1111_1902_235")+j_x(2348)+":"),this.t_pInfo.color=Utils.Color.SKY_BLUE;var p_g=p_l.buyRobTimes+Config.global[GlobalDefine.bosscome_rob_times].i_info-p_l.robTimes;this.t_pInfo.text=p_g.toString(),this.rp_attackPlayer.visible=0<p_g,this.isInPlayerCooldown=!1}},b_s.prototype.onClick=function(p_l){var p_g=p_l.target,d_u=BossComeModel.instance.info;switch(p_g.name){case"backBtn":case"closeBtn":b_s.close();break;case"helpBtn":e.BossComeInstructionPanel.open();break;case"b_getReward":if(0==BossComeModel.instance.info.hasReward)return void b_p.broadcastNotice((j_x("1749_1300_1241")+j_x("1174_2111_254")+j_x("2235_83_743")));BossComeModel.reqBossComeGetReward();break;case"b_attackPlayer":this.isInPlayerCooldown?b_p.broadcastNotice((j_x("1067_189_1777")+j_x("1189_1590_1865")+j_x("1953_242"))):0<d_u.buyRobTimes+Config.global[GlobalDefine.bosscome_rob_times].i_info-d_u.robTimes?e.BossComeAttackPanel.open():b_p.confirm(Utils.$((j_x("712_1835_235")+j_x("2348_2462_1779")+","+j_x("68_2032_572")+j_x(2218)+"{1}"+j_x("1263_869_1355")+j_x("2420_235_2348")+"?"),Config.global[GlobalDefine.bosscome_rob_buy_gold].i_info),(function(){BossComeModel.reqBossComeBuyTimes(2)}));break;case"b_attackBoss":this.isInBossCooldown?b_p.broadcastNotice((j_x("1067_189_1777")+j_x("1189_1590_1865")+j_x("1953_242"))):0<d_u.buyAttackTimes+Config.global[GlobalDefine.bosscome_challenge_times].i_info-d_u.challengeTimes?(BossComeModel.instance.info.inspireTimes=0,BossComeModel.reqBossComeChallenge(0)):b_p.confirm(Utils.$((j_x("712_1835_235")+j_x("2348_2462_1779")+","+j_x("68_2032_572")+j_x(2218)+"{1}"+j_x("1263_869_1355")+j_x("2420_235_2348")+"?"),Config.global[GlobalDefine.bosscome_challenge_buy_gold].i_info),(function(){BossComeModel.reqBossComeBuyTimes(1)}));break;case"b_rank":e.BossComeRankPanel.open();break;case"b_viewReward":e.BossComeRewardPanel.open();break;case"b_inspire":e.BossComeEncouragePanel.open()}},b_s.prototype.onItemRender=function(e,p_l){var p_g=e.getChildByName("box_win"),b_s=e.getChildByName("box_lose"),d_u=e.dataSource;if(0<d_u.score){p_g.visible=!1,b_s.visible=!0;var b_e=b_s.getChildByName("t_name"),d_m=b_s.getChildByName("t_score"),d_w=b_s.getChildByName("t_start"),f_t=b_s.getChildByName("t_end");b_e.text=d_u.name.toString(),d_m.text=d_u.score.toString(),b_e.width=b_e.textField.textWidth,b_e.x=0,d_m.width=d_m.textField.textWidth,d_w.width=d_w.textField.textWidth,f_t.width=f_t.textField.textWidth,b_s.refresh(),b_s.width=b_e.width+d_w.width+d_m.width+f_t.width,b_s.x=e.width-b_s.width>>1}else p_g.visible=!0,b_s.visible=!1,b_e=p_g.getChildByName("t_name"),d_w=p_g.getChildByName("t_start"),f_t=p_g.getChildByName("t_end"),b_e.text=d_u.name.toString(),b_e.width=b_e.textField.textWidth,d_w.x=0,d_w.width=d_w.textField.textWidth,f_t.width=f_t.textField.textWidth,p_g.refresh(),p_g.width=d_w.width+b_e.width+f_t.width,p_g.x=e.width-p_g.width>>1},b_s.prototype.updateView=function(){var e=BossComeModel.instance.info,p_l=Config.fb_dungeon[e.fbId];if(p_l){var p_g=new Engine2d.MonsterVo;p_g.type=Engine2d.ActorTypeDefine.MONSTER,p_g.entryId=p_l.monster,this._roleModel.changRoleSkin(p_g,!1,!1),this._roleModel.setAction(Engine2d.StandardActions.SA_STAND,3,!0),this.t_bossName.text=Utils.$("{1}",Config.obj_monster[p_l.monster].name),this.t_bossName1.text=Config.obj_monster[p_l.monster].name}else this.t_bossName.text=this.t_bossName1.text="";this.p_bossHp.value=e.hp/e.hpUpper,this.t_bossHp.text=(e.hp/e.hpUpper*100).toFixed(0)+"%";var b_s=BossComeModel.instance.getIsInActivity();0<b_s?this.setTimeCount(b_s):(this.t_timeDesc.visible=!1,this.t_timeCount.text=""),this.t_timeDesc.text=1==e.isOpen?(j_x("1796_1878_396")+j_x("2426_810_867")+j_x(1702)+""):(j_x("1796_1878_155")+j_x("2086_810_867")+j_x(1702)+""),this.box_attack.visible=1==e.isOpen,this.box_reward.visible=0==e.isOpen,this.t_pRank_attack.text=this.t_pRank_reward.text=0<e.rank?e.rank.toString():(j_x(814)),this.t_gRank_attack.text=this.t_gRank_reward.text=0<e.guildRank?e.guildRank.toString():(j_x(814)),this.setPInfo(e.robTime-SyncTime.serverTime/1e3),this.setGInfo(e.challengeTime-SyncTime.serverTime/1e3),this.rp_getReward.visible=0==e.isOpen&&1==e.hasReward,this.b_getReward.disabled=!this.rp_getReward.visible,0==e.hasReward?0==e.rank?(this.t_cannotget.visible=!0,this.i_got.visible=!1):(this.i_got.visible=!0,this.t_cannotget.visible=!1):(this.t_cannotget.visible=!1,this.i_got.visible=!1),1==e.isOpen?(BossComeModel.reqBossComeChallengeRecord(),Laya.timer.loop(5e3,this,BossComeModel.reqBossComeChallengeRecord,null,!0)):Laya.timer.clear(this,BossComeModel.reqBossComeChallengeRecord),this.t_inspire.text=Utils.$((j_x("712_1835_767")+"+{1}%"),BossComeModel.instance.info.inspireTimes*Config.global[GlobalDefine.bosscome_inspire_pct].i_info)},b_s.prototype.setGInfo=function(e){var p_l=BossComeModel.instance.info;if(0<e)this.t_gDesc.text=(j_x("1614_2171_1702")+j_x(2460)+":"),this.t_gInfo.color=Utils.Color.RED,this.t_gInfo.text=Utils.formatTimeStr(e),Laya.timer.once(1e3,this,this.setGInfo,[e-1]),this.rp_attackBoss.visible=!1,this.isInBossCooldown=!0;else{this.t_gDesc.text=(j_x("1111_1902_235")+j_x(2348)+":"),this.t_gInfo.color=Utils.Color.SKY_BLUE;var p_g=p_l.buyAttackTimes+Config.global[GlobalDefine.bosscome_challenge_times].i_info-p_l.challengeTimes;this.t_gInfo.text=p_g.toString(),this.rp_attackBoss.visible=0<p_g,this.isInBossCooldown=!1}},b_s.prototype.onActivity=function(e){void 0===e&&(e=null),e&&e.activityId==FuncDefine.bossCome&&BossComeModel.reqBossComeInfo()},b_s.prototype.addDamageBox=function(e){var p_l=new ui.window.bosscome.attackbossitemUI;p_l.t_name.text=e.name.toString(),p_l.t_damage.text=e.damage.toString(),this.damageArr.push([p_l,e]),Laya.timer.once(500,this,this.playDamage,null,!0)},b_s.prototype.onRecord=function(e){if(e.list&&0<e.list.length)for(var p_l in e.list){var p_g=e.list[p_l];this.addDamageBox(p_g)}e.robList&&0<e.robList.length&&(this.attackList.array=e.robList)},b_s.prototype.playDamage=function(){if(this.damageArr&&0<this.damageArr.length){var e=this.damageArr.shift(),p_l=e[0];e[1],this.attackBox.addChild(p_l),Laya.Tween.from(p_l,{scaleX:1.5,scaleY:1.5,f_u:0-p_l.width/4},500),Laya.Tween.to(p_l,{alpha:0},1e3,Laya.Ease.linearNone,null,4e3),Laya.Tween.to(p_l,{j_l:-300},5e3,Laya.Ease.linearNone,Laya.Handler.create(this,this.onTweenComplete,[p_l],!0)),0<this.damageArr.length&&Laya.timer.once(500,this,this.playDamage,null,!0)}},b_s.close=function(){Gfd(UIM,b_s)},b_s.prototype.onRemoved=function(e){this.off(Laya.Event.CLICK,this,this.onClick),LED.off(l_r.BOSSCOME_INFO_UPDATE,this,this.updateView),LED.off(l_r.BOSSCOME_CHALLENGERECORD,this,this.onRecord),LED.off(l_r.BOSSCOME_BUY_TIMES,this,this.onBuyTimes),LED.off(l_r.ACTIVITY_DY_CLOSE,this,this.onActivity),LED.off(l_r.ACTIVITY_DY_OPEN,this,this.onActivity),Laya.timer.clear(this,BossComeModel.reqBossComeChallengeRecord),Laya.timer.clear(this,this.playDamage);for(var p_l=0;p_l<this.attackBox.numChildren;++p_l)Laya.Tween.clearAll(this.attackBox.getChildAt(p_l));this.attackBox.removeChildren(),this._roleModel&&this._roleModel.clearRes()},b_s.prototype.setTimeCount=function(e){0<e?(this.t_timeDesc.visible=!0,this.t_timeCount.text=Utils.formatTimeStr(e),Laya.timer.once(1e3,this,this.setTimeCount,[e-1])):(this.t_timeDesc.visible=!1,this.t_timeCount.text="",BossComeModel.reqBossComeInfo())},b_s.prototype.onBuyTimes=function(p_l){1==p_l?(BossComeModel.instance.info.inspireTimes=0,BossComeModel.reqBossComeChallenge(0)):2==p_l&&e.BossComeAttackPanel.open()},b_s.prototype.onAdded=function(e){Sfl(e,this,Laya,LED,l_r,BossComeModel)},b_s.prototype.onTweenComplete=function(e){e.parent&&e.parent.removeChild(e)},b_s);function b_s(){var e=p_l.call(this)||this;return e.damageArr=[],e._roleModel=new n_k,e.modelContainer.addChild(e._roleModel),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.attackBox.removeChildren(),e.attackBox.visible=!0,e.attackList.array=[],e.attackList.renderHandler=Laya.Handler.create(e,e.onItemRender,null,!1),e}e.BossComePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.bosscome.bosscome_pvpUI,__extends(b_s,p_l),b_s.open=function(){Udr(UIM,b_s)},b_s.close=function(){Sqp(UIM,b_s)},b_s.prototype.onAdded=function(p_l){e.BossComePanel.close(),UIM.instance.setMainUIVisible(!1),LED.on(l_r.BOSSCOME_ROB_INFO,this,this.onRobInfo),DB.instance.query(c2m_bosscome_rob_begin,new c2m_bosscome_rob_begin)},b_s.prototype.onRobInfo=function(e){this.info=e,this.t_myName.text=LgcM.ins.heroVo.name,this.t_tarName.text=e.name,this.myHp=this.myHpUpper=e.srcHp,this.tarHp=this.tarHpUpper=e.srcHp2,this.p_myHp.value=this.myHp/this.myHpUpper,this.p_tarHp.value=this.tarHp/this.tarHpUpper,0==e.result?(this.mySpeed=this.myHp/50,this.tarSpeed=(this.tarHp-e.leftHp2)/50):(this.tarSpeed=this.tarHp/50,this.mySpeed=(this.myHp-e.leftHp)/50),this.lastTIme=SyncTime.tickCount,Laya.timer.loop(100,this,this.timeLoop),this.onEnemyInfo(e)},b_s.prototype.onRemoved=function(p_l){Qcg(p_l,UIM,LED,l_r,this,e)},b_s.prototype.timeLoop=function(){if(5e3<SyncTime.tickCount-this.lastTIme){Laya.timer.clear(this,this.timeLoop);var p_l=LgcM.ins.getActorById(this.info.id,Engine2d.ActorTypeDefine.PLAYER);p_l&&p_l.stopAutoCopy(),Engine2d.Hero.local.stopAutoCopy(),e.BossComeResultPanel.open(this.info),0==this.info.result?this.p_myHp.value=0:this.p_tarHp.value=0}else this.myHp-=this.mySpeed,this.tarHp-=this.tarSpeed,this.p_myHp.value=this.myHp/this.myHpUpper,this.p_tarHp.value=this.tarHp/this.tarHpUpper,this.t_myHp.text=Math.floor(this.myHp)+"/"+Math.floor(this.myHpUpper),this.t_tarHp.text=Math.floor(this.tarHp)+"/"+Math.floor(this.tarHpUpper)},b_s.prototype.onEnemyInfo=function(e){var p_l=e.stateLv,p_g=e.subStateLv,b_s=StateModel.instance.getStateLv(),d_u=StateModel.instance.getStateSubLv();this.t_tarState.text=Config.state_state[p_l].desc+""+Config.state_stateSub[p_g].desc,this.t_myState.text=Config.state_state[b_s].desc+""+Config.state_stateSub[d_u].desc},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.BossComePvP=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.bosscome.bosscome_rankUI,__extends(b_s,p_l),b_s.open=function(){Kdq(UIM,b_s)},b_s.prototype.onAdded=function(e){Kcy(e,LED,l_r,this,Laya)},b_s.prototype.onPlayerRank=function(e){for(var p_l in this.list.array=e.rank,this.t_myPlayerRank.text=(j_x(814)),this.t_myPlayerScore.text=(j_x(814)),e.rank){var p_g=e.rank[p_l];p_g.pid==b_p.playerId&&0<p_g.score&&(this.t_myPlayerRank.text=(parseInt(p_l)+1).toString(),this.t_myPlayerScore.text=p_g.score.toString())}},b_s.prototype.onKillRecord=function(e){if(this.list.array=e.list,this.t_notKill.visible=!0,this.box_lastKill.visible=!1,e.list&&0<e.list.length){var p_l=e.list[0];this.t_notKill.visible=!1,this.box_lastKill.visible=!0,this.t_lastKill.text=p_l.name}},b_s.prototype.onClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":b_s.close()}},b_s.prototype.onGuildRank=function(e){for(var p_l in this.list.array=e.rank,this.t_myGuildRank.text=(j_x(814)),this.t_myGuildScore.text=(j_x(814)),e.rank){var p_g=e.rank[p_l];GuildModel.instance.hasGuild&&p_g.guildId==GuildModel.instance.guildInfo.id&&0<p_g.score&&(this.t_myGuildRank.text=(parseInt(p_l)+1).toString(),this.t_myGuildScore.text=p_g.score.toString())}},b_s.close=function(){Yog(UIM,b_s)},b_s.prototype.onRemoved=function(e){Uyw(e,LED,l_r,this,Laya)},b_s.prototype.onTabSelected=function(e,p_l){switch(this.box_guild.visible=0==e,this.box_player.visible=1==e,this.box_kill.visible=2==e,e){case 0:BossComeModel.reqBossComeGuildRank();break;case 1:BossComeModel.reqBossComePlayerRank();break;case 2:BossComeModel.reqBossComeKillRecord()}},b_s.prototype.onRender=function(e,p_l){var p_g=e.getChildByName("c_rank"),b_s=e.getChildByName("t_rank"),d_u=e.getChildByName("t_name"),b_e=e.getChildByName("t_time"),d_m=e.getChildByName("t_desc"),d_w=e.getChildByName("t_score");if(p_l<3?(p_g.visible=!0,p_g.index=p_l,b_s.text=""):(p_g.visible=!1,b_s.text=(p_l+1).toString()),0==this.tab.selectedIndex){var f_t=e.dataSource;b_e.text="",d_u.text=f_t.guildName,d_m.text=f_t.joinNum.toString(),d_w.text=f_t.score.toString()}else 1==this.tab.selectedIndex?(f_t=e.dataSource,b_e.text="",d_u.text=f_t.name,d_m.text=f_t.guildName,d_w.text=f_t.score.toString()):2==this.tab.selectedIndex&&(f_t=e.dataSource,d_m.text=d_w.text="",d_u.text=f_t.name,b_e.text=Utils.formatTimeStr3(f_t.time))},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.cTab=new p_c(e.tab),e.list.array=null,e.list.renderHandler=Laya.Handler.create(e,e.onRender,null,!1),e.list.vScrollBarSkin="",e.list.scrollBar.elasticBackTime=200,e.list.scrollBar.elasticDistance=50,e}e.BossComeRankPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.fbRemindUI,__extends(b_s,p_l),b_s.open=function(){Mpr(b_s,UIM)},b_s.prototype.updateView=function(){var e=BossComeModel.instance.info.fbId,p_l=Config.fb_dungeon[e];if(p_l){this.bossNameLab.text=Config.obj_monster[p_l.monster].name;var p_g=Config.obj_monster[p_l.monster];p_g&&(this.headImg.skin=Resource.ResUrl.getIconUrl(p_g.icon))}else this.bossNameLab.text="";this.notRemindChk.selected=b_s.notRemind||!1,Laya.timer.clear(this,this.onTimer),Laya.timer.loop(1e3,this,this.onTimer),this.titleLab.text=(j_x("1853_2364_1317")+j_x(996))},b_s.close=function(){Qag(UIM,b_s)},b_s.prototype.onMouseClick=function(p_l){var p_g=p_l.target;switch(p_g.name){case"closeBtn":b_s.close();break;case"challengeBtn":e.BossComePanel.open(),b_s.close();break;case"notRemindChk":b_s.notRemind=p_g.selected}},b_s.prototype.onAdded=function(){Esq(this,Laya,LED,l_r,BossComeModel)},b_s.prototype.onRemove=function(){Scx(this,Laya,LED,l_r)},b_s.prototype.onTimer=function(){--this._curCd,this._curCd<=0&&b_s.close()},b_s.notRemind=!1,b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.BossComeRemindPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.bosscome.bosscome_resultUI,__extends(b_s,p_l),b_s.open=function(e){Crw(e,UIM,b_s)},b_s.prototype.onRemoved=function(e){Uvd(e,this,Laya,DungeonModel)},b_s.prototype.onAdded=function(e){this.on(Laya.Event.CLICK,this,this.onClick);var p_l=this.dataSource;this.box_fail.visible=0==p_l.result,this.box_normal.visible=!1,this.box_result.visible=this.box_win.visible=1==p_l.result,this.t_winScore.text=p_l.num.toString(),this.t_winPlayer.text=Utils.$((j_x("1595_1168_1176")+j_x("383_1045_743")+"{1}"),p_l.name),this.t_failPlayer.text=Utils.$((j_x("1749_1629")+"{1}"+j_x("1835_1061_743")),p_l.name)},b_s.close=function(){Urc(UIM,b_s)},b_s.prototype.onClick=function(e){Kyb(e,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.BossComeResultPanel=p_g;var d_u,b_e=(d_u=ui.window.bosscome.bosscome_resultUI,__extends(d_m,d_u),d_m.open=function(e){Ukz(e,UIM,d_m)},d_m.prototype.onRemoved=function(e){Cgq(e,Laya,this,d_m,DungeonModel)},d_m.close=function(){Qsj(UIM,d_m)},d_m.prototype.onAdded=function(e){Mfg(e,this,Laya,d_m)},d_m.prototype.onClick=function(e){Uxe(e,d_m)},d_m);function d_m(){var e=d_u.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.BossComeChallengeResultPanel=b_e;var d_w,f_t=(d_w=ui.window.bosscome.bosscome_resultUI,__extends(v_z,d_w),v_z.open=function(e,p_l){UIM.open(v_z,["bosscome.atlas"],{data:e,type:p_l},!1,!1,!0,!0)},v_z.prototype.onRemoved=function(e){Ejs(e,Laya,this,v_z,DungeonModel)},v_z.prototype.onAdded=function(e){this.on(Laya.Event.CLICK,this,this.onClick),this.t_normalLast.visible=!1,this.box_win.visible=this.box_fail.visible=!1,this.box_result.visible=this.box_normal.visible=!0,this.t_normalDmg.visible=!0,this.t_normalScore.visible=!0,this.ScoreText.visible=!0,this.endImg.visible=!1,this.winImg.visible=!1;var p_l=this.dataSource.data;this.dataSource.type==BossTpyeTip.SouthSkyGateTip?this.endImg.visible=!0:this.dataSource.type==BossTpyeTip.ChristmasKill&&(this.t_normalScore.visible=!1,this.ScoreText.visible=!1,3==p_l.bossState?this.winImg.visible=!0:this.endImg.visible=!0),this.t_normalDmg.text=p_l.damage+"",this.t_normalScore.text=p_l.score+"",Laya.timer.once(5e3,this,v_z.close)},v_z.close=function(){Ezt(UIM,v_z)},v_z.prototype.onClick=function(e){Ayu(e,v_z)},v_z);function v_z(){var e=d_w.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.SouthSkyGateResult=f_t}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.bosscome.bosscome_rewardUI,__extends(b_s,p_l),b_s.open=function(){Ggf(UIM,b_s)},b_s.prototype.onAdded=function(e){Cwe(e,this,Laya)},b_s.prototype.onRemoved=function(e){Abi(e,this,Laya)},b_s.close=function(){Skk(UIM,b_s)},b_s.prototype.onTabSelected=function(e,p_l){this.t_guild.visible=0==e,this.t_player.visible=1==e;var p_g=[],b_s=0;for(var d_u in Config.bosscome_rewards){var b_e=Config.bosscome_rewards[d_u],d_m=1<b_e.rank-b_s?Utils.$((j_x(573)+"{1}-{2}"+j_x(1511)),b_s+1,b_e.rank):Utils.$((j_x(573)+"{1}"+j_x(1511)),b_e.rank);b_s=b_e.rank,0==e?p_g.push({rank:d_m,reward:b_e.guildReward}):(b_e.killReward&&p_g.push({rank:(j_x("1081_1865_1737")+j_x(1835)),reward:b_e.killReward}),p_g.push({rank:d_m,reward:b_e.reward}))}this.list.array=p_g,console.log(p_g)},b_s.prototype.onClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":b_s.close()}},b_s.prototype.onRender=function(e,p_l){Urh(e,p_l)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.cTab=new p_c(e.tab),e.list.array=null,e.list.itemRender=b_e,e.list.renderHandler=Laya.Handler.create(e,e.onRender,null,!1),e.list.vScrollBarSkin="",e.list.scrollBar.elasticBackTime=200,e.list.scrollBar.elasticDistance=50,e}e.BossComeRewardPanel=p_g;var d_u,b_e=(d_u=ui.window.bosscome.bosscome_reward_cellUI,__extends(d_m,d_u),d_m.prototype.itemRender=function(e,p_l){var p_g=e.dataSource,b_s=new ModuleItemVO;b_s.id=p_g[0],b_s.amount=p_g[1],e.setItemData(b_s)},d_m.prototype.setData=function(e){Gxz(e,this)},d_m);function d_m(){var p_l=d_u.call(this)||this;return p_l.list.itemRender=e.ItemBox,p_l.list.array=null,p_l.list.renderHandler=Laya.Handler.create(p_l,p_l.itemRender,null,!1),p_l}e.BossComeRewardCell=b_e}(UI=UI||{}),function(e){function p_l(e){var p_l=Config.fb_dungeon[e],p_g=p_l.stateLv,b_s=p_l.level,d_u=StateModel.instance.getStateLv(),b_e=LgcM.ins.heroVo.level,d_m="";return p_g?d_u<p_g[0]?d_m=Config.state_state[p_g[0]].desc+(j_x("155_1186")):d_u>p_g[1]&&(d_m=Config.state_state[p_g[1]].desc+(j_x("711_155_1186"))):b_s&&(b_e<b_s[0]?d_m=b_s[0]+(j_x("2342_155_1186")):b_e>b_s[1]&&(d_m=b_s[1]+(j_x("2342_711_155")+j_x(1186)))),d_m}var p_g,b_s=(p_g=ui.window.fb.bossItemUI,__extends(d_u,p_g),d_u.prototype.onAdded=function(){Yiw(this,Laya)},d_u.prototype.updateLstData=function(e,p_l){e.dataSource&&(e.isShowName=!1,e.isShowNum=!0,e.setItemData(e.dataSource))},d_u.prototype.clearRes=function(){if(this.headSp&&this.headSp.texture){var e=this.headSp.texture.url;this.headSp.texture=null,e&&Laya.loader.clearTextureRes(e)}this.bgImg&&this.bgImg.skin&&Laya.loader.clearTextureRes(this.bgImg.skin)},d_u.prototype.onSweepClick=function(e){Shc(e,this,DungeonModel)},d_u.prototype.getFbId=function(){return Wss(this)},d_u.prototype.onRemove=function(){Ags(this,Laya)},d_u.prototype.onChallengeClick=function(p_l){var p_g=this,b_s=this.dataSource;if(e.GerenBossPanel.close(),e.TalismanUpPanel.close(),e.TalismanUpgradePanel.close(),b_p.registerAutoOpenPanel(e.GerenBossPanel,b_p.mapID,(function(){e.GerenBossPanel.open(p_g._index)})),b_p.reqEnterFb(b_s.id)){var d_u=DungeonModel.instance.canEnterGerenById(b_s.id);d_u&&(DungeonModel.instance.saveData=b_s,DungeonModel.instance.saveData.userData=d_u)}},d_u.prototype.setBossData=function(e,p_g,b_s){if(void 0===b_s&&(b_s=0),e&&e.id){this.dataSource=e,this.level_dec.visible=!1,this.challengeBtn.disabled=!DungeonModel.instance.canEnterGerenById(e.id)||!DungeonModel.instance.canChallenge(e.id);var d_u=DungeonModel.instance.canEnterGerenById(e.id);this.challengeBtn.label=d_u?(j_x("48_383")):(j_x("1300_1331_413")),this.challengeRPImg.visible=d_u&&DungeonModel.instance.canChallenge(e.id),this.challengeBtn.visible=DungeonModel.instance.canChallenge(e.id),this.bossClip.index=0;var b_e=Config.fb_dungeon[e.id];this.bossName.text=b_e.name;var d_m=DungeonModel.instance.getDungeonInfo(e.id),d_w=0;d_m&&(d_w=d_m.count),this.level_dec.text=b_e.name+"("+d_w+"/"+b_e.maxTimes+")",this.condLab.text=p_l(this.getFbId()),this.condLab.visible=!DungeonModel.instance.canChallenge(e.id);var f_t=Config.obj_monster[b_e.monster];this.headSp=f_t?Resource.ResManager.Instance.getImg(Resource.ResUrl.getIconUrl(f_t.icon),this.headSp):this.headSp,this.bgImg.skin="";var v_z=Config.fb_green_boss_reward[e.id];v_z&&v_z.xlCellBg&&(this.bgImg.skin=v_z.xlCellBg),this.maskSp.visible=!1;var d_h=Config.fb_dungeon[e.id],r_t=[];d_h&&d_h.firstPassReward&&(r_t=d_h.firstPassReward);var t_n=b_p.getRewardDatas(r_t);this.list.array=t_n,DungeonModel.instance.saveData||DungeonModel.instance.isPlayCrossLevelAni||DungeonModel.instance._isPlayLeftAni||(this.leftani.play(0,!1),this.leftani.addLabel("complete",5),this.leftani.on(Laya.Event.LABEL,this,this.onCompleteAni)),this._index=b_s}},d_u.prototype.onCompleteAni=function(){Ixv(DungeonModel)},d_u.prototype.clearCellTween=function(){Qbf(Laya,this)},d_u);function d_u(){var p_l=p_g.call(this)||this;return p_l._timesLabSrcColor=null,p_l._num=!1,p_l._index=0,p_l.on(Laya.Event.ADDED,p_l,p_l.onAdded),p_l.on(Laya.Event.REMOVED,p_l,p_l.onRemove),p_l.list.itemRender=e.ItemBox,p_l.list.renderHandler=Laya.Handler.create(p_l,p_l.updateLstData,null,!1),p_l}e.GerenBossItemView=b_s;var b_e,d_m=(b_e=ui.window.fb.wildBossItemUI,__extends(d_w,b_e),d_w.prototype.onAdded=function(){Oze(this,Laya)},d_w.prototype.onChallengeClick=function(p_l){SyncTime.serverTime;var p_g=DungeonModel.instance.getFbWildBossLeftTimes(this._fbType);if(p_g<=0){var b_s=this._fbType==DungeonType.WildBoss?Config.global[GlobalDefine.wildBossTimesAdd].t_info:Config.global[GlobalDefine.fb_tsequipt_times_add].t_info,d_u=this._fbType==DungeonType.WildBoss?Config.global[GlobalDefine.fb_wildboss_times].i_info:Config.global[GlobalDefine.fb_tsequipt_times].i_info;if(b_p.checkConsume([b_s],!0)){var b_e,d_m=BagModel.instance.getItemById(BagTypeDefine.BAG_TYPE_ITEM,b_s[0]);b_e=this._fbType===DungeonType.WildBoss?DungeonModel.instance.reqWildBossBuyTimes.bind(DungeonModel.instance):DungeonModel.instance.reqTsEquipBuyTimes.bind(DungeonModel.instance);var d_w=d_u-p_g;e.ItemConsumTipsPanel.open(d_m,0,b_e,[],d_w)}}else{var f_t=this.dataSource;b_p.reqEnterFb(f_t.id,e.WildBossPanel,b_p.mapID)}},d_w.prototype.onRemove=function(){Ijv(this,Laya)},d_w.prototype.setBossData=function(e,p_g,b_s){this._fbType=b_s;var d_u=0,b_e=p_l(this.getFbId());if(e.recoverTime){var d_m=Math.floor(SyncTime.serverTime/1e3);d_u=e.recoverTime-d_m}this.cdLab.visible=b_e.length<=0&&!!d_u,this.challengeBtn.visible=!d_u,d_u&&(this.cdLab.text=Utils.$(this._cdLabTxt,Utils.formatTimeStr(d_u)),Laya.timer.loop(1e3,this,this.updateRemainTime,[e.recoverTime]));var d_w=Config.fb_dungeon[e.id];this.bossClip.index=0,this.bossName.text=d_w.name;var f_t=Config.obj_monster[d_w.monster];this.headSp=f_t?Resource.ResManager.Instance.getImg(Resource.ResUrl.getIconUrl(f_t.icon),this.headSp):this.headSp;var v_z=e.hpUpper?e.hp/e.hpUpper:0;this.hpBar.value=v_z,this.hpBar.visible=!d_u,this.hpLab.visible=!d_u;var d_h=b_p.calsulate(e.hp),r_t=b_p.calsulate(e.hpUpper);this.hpLab.text=d_h+"/"+r_t;for(var t_n=[this.reward1Box,this.reward2Box,this.reward3Box],f_y=b_p.getRewardDatas(d_w.passReward),p_q=0;p_q<t_n.length;++p_q){var h_h=t_n[p_q];f_y[p_q]?(h_h.visible=!0,h_h.isShowName=!1,h_h.isShowNum=!0,h_h.isShowTick=!1,h_h.setItemData(f_y[p_q],ItemBoxDefine.MODULE_ITEM,!0)):h_h.visible=!1}this.condLab.text=b_e,this.condLab.visible=0<this.condLab.text.length,this.challengeBtn.visible=!this.condLab.visible&&0<e.hp;var n_j=DungeonModel.instance.getDungeonInfo(e.id);DungeonModel.instance.getFbWildBossLeftTimes(this._fbType)<=0?this.challengeRPImg.visible=!1:!n_j||n_j.remind?this.challengeRPImg.visible=this.challengeBtn.visible:this.challengeRPImg.visible=!1,this.condLab.visible?(this.maskSp.visible=!0,.3!==this.maskSp.alpha&&(this.maskSp.alpha=.3,this.maskSp.graphics.drawRect(0,0,this.maskSp.width,this.maskSp.height,"#000000"))):this.maskSp.visible=!1},d_w.prototype.updateRemainTime=function(e){var p_l=0;e&&(p_l=e-Math.floor(SyncTime.serverTime/1e3))<0&&(p_l=0),this.cdLab.text=Utils.$(this._cdLabTxt,Utils.formatTimeStr(p_l)),p_l||Laya.timer.clear(this,this.updateRemainTime)},d_w.prototype.getFbId=function(){return Gff(this)},d_w);function d_w(){var e=b_e.call(this)||this;return e._cdLabTxt="",e._cdLabTxt=e.cdLab.text,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.WildBossItemView=d_m}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.csBoss.crossBossFightUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){this.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.FB_BOSS_ID_UPDATE,this,this.onBossIdUpdate),LED.on(l_r.FB_SET_ATTACK_TARGET_TYPE,this,this.onSetAttackTargetType),LED.on(l_r.ACTOR_ADDED,this,this.onActorChange,[!0]),LED.on(l_r.ACTOR_REMOVED,this,this.onActorChange,[!1]),LED.on(l_r.FB_PK_LIST,this,this.renderEnemyBox),LED.on(l_r.CROSS_BOSS_OWENER,this,this.renderHaveBox),DungeonModel.instance.reqPkList(),UIM.instance.getMainLetUI().visible=!1,Laya.timer.loop(1e3,this,this.loopTime),this.updateView()},b_s.prototype.selcetItem=function(e){if(-1!==e){var p_l=this.enemyList.getCell(e);if(p_l){var p_g=p_l.dataSource,b_s=LgcM.ins.getActorStdInfoById(p_g.pid);b_s&&DungeonModel.instance.changeAttackTarget(b_s),this.enemyList.selectedIndex=-1}}},b_s.prototype.renderItem=function(e,p_l){var p_g=e.getChildByName("name"),b_s=e.getChildByName("progress"),d_u=e.getChildByName("progressLabel"),b_e=e.getChildByName("playerIcon"),d_m=e.dataSource,d_w=LgcM.ins.getActorStdInfoById(d_m.pid);d_w&&(d_u.text=Math.floor(d_w.hp/d_w.hpUpper*100)+"%",p_g.text="S."+d_m.sid+" "+d_w.name,Resource.ResManager.Instance.getImg(Resource.ResManager.getHeadUrl(d_m.entryId,d_m.headIcon),b_e,100,100),b_s.value=d_w.hp/d_w.hpUpper)},b_s.prototype.onScrollChanged=function(e){e===this.enemyList.scrollBar.max&&(this.enemyTip.visible=!1)},b_s.open=function(e){UIM.open(b_s,["csBoss.atlas","bossTX.atlas"],{cfg:e},!1,!1)},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":break;case"fightBtn":if(f_a.instance.crossBossOwnerInfo.pid!==b_p.playerId){var p_l=LgcM.ins.getActorStdInfoById(f_a.instance.crossBossOwnerInfo.pid);p_l&&DungeonModel.instance.changeAttackTarget(p_l)}else b_p.broadcastNotice((j_x("1870_844")+"boss"+j_x("1300_1241_613")+j_x("558_1749_743")))}},b_s.prototype.renderEnemyBox=function(e){var p_l=[];this.enemyList.selectEnable=!0;for(var p_g=0,b_s=e.list;p_g<b_s.length;p_g++){var d_u=b_s[p_g];f_a.instance.crossBossOwnerInfo.pid==d_u.pid&&b_p.getNumSp(NumType.FIGHTING,d_u.fight,this.bossHaveFight,-10),d_u.pid!==b_p.playerId&&p_l.push(d_u)}this.infoList=p_l,this.enemyList.array=p_l,this.enemyTip.visible=3<p_l.length,this.enemyNum.text=p_l.length.toString()},b_s.prototype.renderHaveBox=function(){var e=LgcM.ins.getActorStdInfoById(f_a.instance.crossBossOwnerInfo.pid,Engine2d.ActorTypeDefine.PLAYER);if(e){if(this.bossHaveBox.visible=!0,this.bossHaveName.text=e.name,Resource.ResManager.Instance.getImg(Resource.ResManager.getHeadUrl(e.entryId,e.headIcon),this.bossHaveIcon),this.bossHaveProg.value=e.hp/e.hpUpper,this.bossHaveHpPer.text=Utils.$("{1}%",Math.ceil(100*this.bossHaveProg.value)),f_a.instance.crossBossOwnerInfo.pid==LgcM.ins.heroVo.id)b_p.getNumSp(NumType.FIGHTING,e.fight,this.bossHaveFight,-10);else if(this.infoList)for(var p_l=0,p_g=this.infoList;p_l<p_g.length;p_l++){var b_s=p_g[p_l];f_a.instance.crossBossOwnerInfo.pid==b_s.pid&&b_p.getNumSp(NumType.FIGHTING,b_s.fight,this.bossHaveFight,-10)}else b_p.getNumSp(NumType.FIGHTING,0,this.bossHaveFight,-10);this.fightBtn.visible=!0}else this.fightBtn.visible=!1,this.bossHaveBox.visible=!1},b_s.prototype.onRemove=function(){Ojx(this,Laya,LED,l_r,UIM)},b_s.prototype.setupTimer=function(){Laya.timer.clear(this,this.onTimer),this.bossId&&Laya.timer.loop(300,this,this.onTimer)},b_s.prototype.loopTime=function(){Ekw(this)},b_s.prototype.onActorChange=function(e,p_l){p_l&&p_l.type===Engine2d.ActorTypeDefine.PLAYER&&DungeonModel.instance.reqPkList()},b_s.prototype.onTimer=function(){var e=LgcM.ins.getActorStdInfoById(this.bossId,Engine2d.ActorTypeDefine.MONSTER);if(e){var p_l=Config.obj_monster[e.entryId]&&1<Config.obj_monster[e.entryId].bloodSubsection?Config.obj_monster[e.entryId].bloodSubsection:null,p_g=p_l?Resource.ResManager.getBloodUrls(p_l):null;this.hpBar.setBarSkins(p_g,p_l),this.hpProNum.visible=!!p_g,this.bossName.text=e.name?e.name:Config.obj_monster[e.entryId].name,this.bossGrad.text=e.level.toString();var b_s=e.hp,d_u=e.hpUpper;this.hpBar.value=b_s/d_u,this.hpProNum.text=0<this.hpBar.barSkinIndex?"x"+(this.hpBar.barSkinIndex+1):""}else Laya.timer.clear(this,this.onTimer),this.hpBar.value=0,this.hpProNum.visible=!1},b_s.prototype.onSetAttackTargetType=function(e,p_l){var p_g=LgcM.ins.getActorStdInfoById(p_l,e);p_g&&b_p.broadcastNotice((j_x("506_2035_712")+j_x(1835))+p_g.name)},b_s.prototype.updateView=function(){var e=DungeonModel.instance.getFbConf();this.bossId=DungeonModel.instance.getBossId(),this.enemyList.array=[],this.enemyNum.text="0",this.setupTimer();var p_l=null;e&&(this.rewardEquip.text=Config.fb_crossboss[e.id]?Config.fb_crossboss[e.id].desc:"",p_l=Config.obj_monster[e.monster]),p_l?(this.bossIcon.visible=!0,Resource.ResManager.Instance.getImg(Resource.ResUrl.getIconUrl(p_l.icon),this.bossIcon),this.bossName.text=p_l.name):(this.bossIcon.visible=!1,this.bossName.text="")},b_s.prototype.onBossIdUpdate=function(e){Wpw(e,this)},b_s.close=function(){Gid(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.selectEnemy=-1,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.enemyList.vScrollBarSkin="",e.enemyList.scrollBar.elasticDistance=200,e.enemyList.scrollBar.elasticBackTime=500,e.hpBar.speedTime=300,e.mouseThrough=!0,e.hpBar.isMaskProgress=!0,e.enemyList.renderHandler=Laya.Handler.create(e,e.renderItem,null,!1),e.enemyList.selectHandler=Laya.Handler.create(e,e.selcetItem,null,!1),e.enemyList.scrollBar.changeHandler=Laya.Handler.create(e,e.onScrollChanged,null,!1),e.enemyList.selectEnable=!0,e}e.crossBossFightPanel=p_g}(UI=UI||{});var x_c=function(e){function p_l(){var p_l=e.call(this)||this;return p_l.on(Laya.Event.ADDED,p_l,p_l.onAdded),p_l}return __extends(p_l,e),p_l.prototype.onAdded=function(){Ubp(this,Laya)},p_l.prototype.update=function(){Laya.timer.clearAll(this);var e=this.getIsInActivity();this.visible=!0,0<e?(this.updateTime(e),Laya.timer.once(1e3,this,this.updateTime,[e-1])):1800<(e=-e)?(this.visible=!1,e-=1800):(this.updateTimeOpen(e),Laya.timer.once(1e3,this,this.updateTimeOpen,[e-1])),Laya.timer.once(1e3*e,this,this.update),UIM.instance.getMainLetUI().sortRightBox()},p_l.prototype.getNextTime=function(){var e=0;for(var p_l in Config.activity_activity){var p_g=Config.activity_activity[p_l];if("CS_crossBoss"==p_g.type){var b_s=p_g.startTime.split(":"),d_u=new Date;d_u.setTime(SyncTime.serverTime),d_u.setHours(parseInt(b_s[0]),parseInt(b_s[1]),0,0);var b_e=d_u.getTime();if(b_s=p_g.stopTime.split(":"),d_u.setHours(parseInt(b_s[0]),parseInt(b_s[1]),0,0),b_e<SyncTime.serverTime&&SyncTime.serverTime<d_u.getTime())return this.nextTime=d_u.getTime(),void(this.open=!0);d_u.setTime(b_e),b_e>SyncTime.serverTime&&(0==e||e>d_u.getTime())&&(e=d_u.getTime()),d_u.setTime(b_e+864e5),d_u.getTime()>SyncTime.serverTime&&(0==e||e>d_u.getTime())&&(e=d_u.getTime())}}this.nextTime=e,this.open=!1},p_l.prototype.start=function(){Obt(this,Laya)},p_l.prototype.updateTimeOpen=function(e){Mgz(e,this,j_x,Laya)},p_l.prototype.updateTime=function(e){Usr(e,this,j_x,Laya)},p_l.prototype.getIsInActivity=function(){var e=0;for(var p_l in Config.activity_activity){var p_g=Config.activity_activity[p_l];if(p_g.type==ActivityTypeDefine.GS_bossCome){var b_s=p_g.startTime.split(":"),d_u=new Date;d_u.setTime(SyncTime.serverTime),d_u.setHours(parseInt(b_s[0]),parseInt(b_s[1]),0);var b_e=SyncTime.serverTime-d_u.getTime(),d_m=Config.Utils.parseActivityKeepTime(p_g);if(0<b_e&&b_e<1e3*d_m)return Math.ceil((1e3*d_m-b_e)/1e3);0<(b_e=d_u.getTime()-SyncTime.serverTime)&&(0==e||b_e<e)&&(e=b_e),d_u.setTime(d_u.getTime()+864e5),0<(b_e=d_u.getTime()-SyncTime.serverTime)&&(0==e||b_e<e)&&(e=b_e)}}return-Math.ceil(e/1e3)},p_l.prototype.onRemoved=function(){Svv(this,Laya)},p_l.prototype.onClick=function(){Cmd(LgcM,UI)},p_l.prototype.onFrameLoop=function(){this.nextTime>=SyncTime.serverTime?this.open?(this.visible||(this.visible=!0,UIM.instance.getMainLetUI().sortRightBox()),this.timeCountTxt.text=this.formatTimeStr(Math.ceil((this.nextTime-SyncTime.serverTime)/1e3))+(j_x("1865_396_2426"))):this.nextTime-SyncTime.serverTime<18e5?(this.visible||(this.visible=!0,UIM.instance.getMainLetUI().sortRightBox()),this.timeCountTxt.text=this.formatTimeStr(Math.ceil((this.nextTime-SyncTime.serverTime)/1e3))+(j_x("1865_155_1186"))):this.visible&&(this.visible=!1,UIM.instance.getMainLetUI().sortRightBox()):(this.visible&&(this.visible=!1,UIM.instance.getMainLetUI().sortRightBox()),this.getNextTime(),this.onFrameLoop())},p_l.prototype.formatTimeStr=function(e){var p_l=Math.floor(e/60),p_g=Math.floor(e-60*p_l);return(p_l<10?"0"+p_l:p_l)+":"+(p_g<10?"0"+p_g:p_g)},p_l}(ui.window.activity.crossboss_icon_viewUI),getRewardType,UI,ViewType,UI;!function(e){var p_l,p_g;(p_g=p_l=e.pageState||(e.pageState={}))[p_g.ERRON=0]="ERRON",p_g[p_g.UP=1]="UP",p_g[p_g.DWON=2]="DWON";var b_s,d_u=(b_s=ui.window.csBoss.crossBossUI,__extends(b_e,b_s),b_e.prototype.onAdded=function(){Maw(LED,l_r,this,f_a,Laya)},b_e.prototype.listMouseDown=function(){Uvw(this)},b_e.prototype.timeLoop=function(){this.LoopTimes++,this.LoopTimes%b_e.requetSpaceTime==0&&(this.LoopTimes=0,f_a.instance.reqBossInfo()),f_a.instance.getNextBossStartTime(),this.list.refresh(),this.onBeKill()},b_e.prototype.onBeKill=function(e){void 0===e&&(e=!0);var p_l=Config.global[1902];if(p_l&&f_a.instance.didTiredInfo){var p_g=Math.min(p_l.t_info.length-1,Math.max(f_a.instance.didTiredInfo.num-1,0));if(e&&(this.recordTime=p_l.t_info[p_g]),0<f_a.instance.didTiredInfo.num){var b_s=Math.max(0,f_a.instance.didTiredInfo.time+p_l.t_info[p_g]-SyncTime.serverTime/1e3);this.clearProg.value=b_s/this.recordTime,this.clearPer.text=Math.ceil(Math.max(1,b_s/this.recordTime))+"%",b_s<=0?f_a.instance.reqCrossBossKilled():this.clearTime.text=Utils.$(("({1}"+j_x(2081)+")"),Math.floor(b_s))}else this.clearTime.text="",this.clearProg.value=1,this.clearPer.text="100%";this.didTired.text=f_a.instance.didTiredInfo.num+(j_x(1778))}else this.clearTime.text="",this.didTired.text=("0"+j_x(1778))},b_e.prototype.onRemove=function(){Qlu(LED,l_r,this,Laya)},b_e.prototype.updateTxt=function(){Kpj(this)},b_e.prototype.updateView=function(){Iip(Laya,this,f_a)},b_e.prototype.clear=function(){Uyr(f_a)},b_e.prototype.checkClick=function(p_l){var p_g=p_l.target;switch(p_g.name){case"checkReward":var b_s=p_g.dataSource;b_s&&e.crossBossCheckRewardTips.open(b_s)}},b_e.prototype.onChangeGarde=function(e,p_g){var b_s,d_u=this.list.selectedIndex;p_g==p_l.ERRON&&(p_g=this.currentGarde>e?p_l.DWON:p_l.UP),b_s=p_g==p_l.UP?Math.min(this.list.length-1,d_u+1):Math.max(0,d_u-1),this.currentGarde!==e&&(this.currentGarde=e,this.list.tweenTo(b_s,200,Laya.Handler.create(this,this.onUpdateInfo)))},b_e.prototype.onUpdateInfo=function(){this.updateTxt();var e=f_a.instance.getBossArrayByGard(this.currentGarde),p_l=(this.list.array=e).length;if(this.list.mouseEnabled=!(e&&p_l<2),3<=p_l)this.list.scrollTo(Math.floor(p_l/2));else if(0<p_l)for(var p_g in this.list.array)this.list.array[p_g]==this.currentGarde&&this.list.scrollTo(parseFloat(p_g));else this.list.visible=!1;this.renderBossPanel(!1)},b_e.prototype.listMouseMove=function(){if(1==this.listMoseDown&&this.list.visible){var e=this.listMoseMoveX;if(!this.list.array)return;if(this.list.array.length<2)return;if(this.stage.mouseX-e<=-10){var p_l=this.list.selectedIndex-1;if(2==this.list.length&&this.list.array[1]==this.currentGarde&&p_l<=0)return;2==this.list.length?f_a.instance.isChangeGardeById(f_a.instance.bossCfgInfo[this.list.array[1]])&&(this.currentGarde=this.list.array[1]):f_a.instance.isChangeGardeById(f_a.instance.bossCfgInfo[this.list.array[2]])&&(this.currentGarde=this.list.array[2])}else if(10<=this.stage.mouseX-e){if(p_l=this.list.selectedIndex+1,2==this.list.length&&this.list.array[0]==this.currentGarde&&p_l>=this.list.length)return;f_a.instance.isChangeGardeById(f_a.instance.bossCfgInfo[this.list.array[0]])&&(this.currentGarde=this.list.array[0])}this.onUpdateInfo(),this.listMoseMoveX=0,this.listMoseDown=!1}},b_e.prototype.onClick=function(p_g){var b_s=0;switch(p_g.target.name){case"closeBtn":case"backBtn":b_e.close();break;case"listSwithBtn":if(!this.isClick)return;this.leftBossBox.visible=!this.leftBossBox.visible,this.listSwithImage.skin=this.leftBossBox.visible?"res/ui/common/fanye_left1.png":"res/ui/common/fanye_right1.png";break;case"bossEnter":if(!this.isClick)return;break;case"addTimesBtn":if(!this.isClick)return;e.crossBossBuyTips.open();break;case"helpBtn":e.crossBossHelp.open();break;case"upBtn":if(!this.isClick)return;b_s=f_a.instance.getSkewByGarde(this.currentGarde,!0),f_a.instance.isChangeGardeById(f_a.instance.bossCfgInfo[b_s])&&this.onChangeGarde(b_s,p_l.UP);break;case"downBtn":if(!this.isClick)return;b_s=f_a.instance.getSkewByGarde(this.currentGarde,!1),f_a.instance.isChangeGardeById(f_a.instance.bossCfgInfo[b_s])&&this.onChangeGarde(b_s,p_l.DWON)}},Object.defineProperty(b_e.prototype,"isClick",{get:function(){return f_a.instance.isBack},enumerable:!0,configurable:!0}),b_e.prototype.renderBossPanel=function(e){var p_l=0,p_g=0,b_s=f_a.instance.bossCfg;for(var d_u in b_s){var b_e=void 0;p_g=parseInt(d_u);var d_m;if(e?((b_e=new d_w).name="item"+d_u,this.bossPanel.addChild(b_e)):b_e=this.bossPanel.getChildByName("item"+d_u),!b_e)break;p_g==this.currentGarde?b_e.dataSource={isOpen:!0,data:b_s[d_u]}:b_e.dataSource={isOpen:!1,data:b_s[d_u]},d_m=b_e.setData(p_g),b_e.visible=!0,p_l=d_m+(b_e.y=p_l)}this.bossPanel.vScrollBar.max=p_l},b_e.prototype.renderList=function(e,p_l){Uqf(e,p_l,this)},b_e.prototype.renderBossIcon=function(e,p_l,p_g){if(e){var b_s=e.getChildByName("item"+p_l);if(b_s){var d_u=b_s.getChildByName("progress"),b_e=b_s.getChildByName("proLabel"),d_m=b_s.getChildByName("stateLabel"),d_w=b_s.getChildByName("timeLabel"),f_t=b_s.getChildByName("checkReward"),v_z=b_s.getChildByName("icon"),d_h=Config.fb_dungeon[p_g];if(d_h){if(!f_a.instance.bossInfo)return;var r_t=f_a.instance.bossInfo[p_g];if(!r_t)return;f_t.dataSource=p_g;var t_n=null;if(d_h&&(t_n=Config.obj_monster[d_h.monster]),t_n&&Resource.ResManager.Instance.getImg(Resource.ResUrl.getIconUrl(t_n.icon),v_z),f_t.on(Laya.Event.CLICK,this,this.checkClick),6==Config.fb_crossboss[p_g].type){var f_y=b_s.getChildByName("image"),p_q=b_s.getChildByName("runImage"),h_h=b_s.getChildByName("stateLabel2");p_q.visible=!1,d_m.visible=!1,f_y.visible=!1,h_h.visible=!1;var n_j=Math.max(r_t.hpUpper,1);if(d_w.wordWrap=!0,r_t.hp)if(2==r_t.status)f_y.visible=!1,p_q.visible=!0,d_w.text=f_a.instance.nextBossTimeStr+(j_x("896_1787")),d_w.visible=!0,b_e.visible=d_u.visible=!1;else{if(f_y.visible=!1,d_u.value=r_t.hp/n_j,b_e.text=Utils.$("{1}%",Math.ceil(r_t.hp/n_j*100)),r_t.hpUpper>r_t.hp)d_m.visible=!0,d_w.visible=!1,d_m.text=(j_x("506_2035_2273")+j_x(943));else{d_m.visible=!0,h_h.visible=!0,d_w.visible=!1,d_m.wordWrap=!0;var j_l=f_a.instance.currBossEndTime-SyncTime.serverTime/1e3;0<j_l?d_m.text=Utils.formatTimeStr(Math.floor(j_l)):(d_m.text="",h_h.visible=!1)}b_e.visible=d_u.visible=!0}else 1==r_t.status?(d_w.visible=!0,f_y.visible=!0,d_w.text=f_a.instance.nextBossTimeStr+(j_x("896_1787")),b_e.visible=d_u.visible=!1):3==r_t.status&&(d_w.visible=!0,f_y.visible=!1,d_w.text=f_a.instance.nextBossTimeStr+(j_x("896_1787")),b_e.visible=d_u.visible=!1)}else r_t.recoverTime>SyncTime.serverTime/1e3?(d_w.visible=!0,d_w.text=Utils.formatTimeStr(r_t.recoverTime-SyncTime.serverTime/1e3),d_m.text=(j_x("62_1796")),d_u.value=0,b_e.text="0%",b_e.visible=d_u.visible=!1):(n_j=Math.max(r_t.hpUpper,1),d_w.visible=!1,d_u.value=r_t.hp/n_j,b_e.text=Utils.$("{1}%",Math.ceil(r_t.hp/n_j*100)),r_t.hp?(r_t.hpUpper>r_t.hp?d_m.text=(j_x("506_2035_2273")+j_x(943)):d_m.text=(j_x("155_1186")),b_e.visible=d_u.visible=!0):(b_e.visible=d_u.visible=!1,d_m.text=("boss"+j_x("1520_1833"))))}}}},b_e.prototype.refreshView=function(e,p_l){if(null!=e){var p_g=p_l.dataSource;this.challengeTimes.text=Utils.$("{1}/{2}",f_a.instance.challengeTimes,Config.global[1810].i_info),this.currentGarde==p_g&&(this.bossGardTitle.text=f_a.instance.numToChinese(p_g)+(j_x(784)+"Boss"));var b_s=f_a.instance.bossCfg;if(this.currentGarde&&null!=this.currentGarde)for(var d_u=0;d_u<6;d_u++)this.renderBossIcon(p_l,d_u+1,b_s[this.currentGarde][d_u])}},b_e.open=function(){Seo(UIM,b_e)},b_e.close=function(){Eto(UIM,b_e)},b_e.requetSpaceTime=3,b_e);function b_e(){var e=b_s.call(this)||this;return e.recordTime=1,e.listMoseDown=!1,e.listMoseMoveX=0,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.bossPanel.vScrollBarSkin="",e.bossPanel.vScrollBar.elasticBackTime=200,e.bossPanel.vScrollBar.elasticDistance=50,e.bossPanel.vScrollBar.visible=!1,e.currentGarde=f_a.instance.getMinChallengeBoss(),e.list.renderHandler=Laya.Handler.create(e,e.renderList,null,!1),e.list.selectedIndex=1,e.list.hScrollBarSkin="",e}e.crossBossMainPanel=d_u;var d_m,d_w=(d_m=ui.window.csBoss.crossBossItemUI,__extends(f_t,d_m),f_t.prototype.setData=function(e){this.arrowBtn.dataSource={index:e,data:this.dataSource.data},this.dataSource.isOpen?this.selectClip.visible=!0:this.selectClip.visible=!1,this.textLable.text=f_a.instance.numToChinese(e)+(j_x(784));var p_l=!1,p_g=!1,b_s=0;for(var d_u in this.dataSource.data){var b_e=this.dataSource.data[d_u];p_l=p_l||f_a.instance.isMoreChallenge(b_e),p_g=p_g||f_a.instance.isLessChallenge(b_e);var d_m=f_a.instance.bossInfo[b_e];d_m&&d_m.recoverTime>SyncTime.serverTime/1e3&&b_s++}return this.arrowBtn.gray=this.lockTag.visible=p_l||p_g,this.redpoint.visible=!this.lockTag.visible&&b_s<5,this.height},f_t.prototype.renderItem=function(e,p_l){var p_g=e.dataSource,b_s=Config.fb_crossboss[p_g],d_u=f_a.instance.numToChinese(b_s.grade)+(j_x(784)+"Boss_")+p_l;e.getChildByName("label").text=d_u;var b_e=e.getChildByName("lockTag");e.getChildByName("arrow"),b_e.visible=f_a.instance.isMoreChallenge(p_g)},f_t.prototype.onClickItem=function(e){if(f_a.instance.bossInfo){var p_l=this.bossList.getCell(e);p_l&&f_a.instance.challengeBossById(p_l.dataSource)}},f_t.prototype.onClick=function(e){var p_g=e.target;switch(p_g.name){case"arrowBtn":f_a.instance.isChangeGardeById(p_g.dataSource.data)&&LED.event("arrowBtn",[p_g.dataSource.index,p_l.ERRON])}},f_t);function f_t(){var e=d_m.call(this)||this;return e.bossList.vScrollBarSkin="",e.bossList.scrollBar.elasticBackTime=200,e.bossList.scrollBar.elasticDistance=50,e.bossList.renderHandler=Laya.Handler.create(e,e.renderItem,null,!1),e.bossList.selectHandler=Laya.Handler.create(e,e.onClickItem,null,!1),e.on(Laya.Event.CLICK,e,e.onClick),e.height=80,e}e.crossBossItem=d_w}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.csBoss.crossBossWinUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Kdb(this,Config,GlobalDefine,Laya)},b_s.prototype.updateView=function(){Eul(this,j_x,Config,Laya)},b_s.prototype.renderItem=function(e,p_l){var p_g=new ModuleItemVO;p_g.id=e.dataSource[0],p_g.amount=e.dataSource[1],e.setItemData(p_g)},b_s.prototype.leaveFb=function(){Wth(f_a,SyncTime,DungeonModel)},b_s.open=function(e){UIM.open(b_s,["fbCommon.atlas"],{info:e},!1,!1,!0,!1)},b_s.prototype.loopTime=function(){this.time<=0&&(this.leaveFb(),b_s.close()),this.time--,this.textLable.text=this.time+(j_x("2082_1878_413")+j_x(747))},b_s.prototype.onRemove=function(){Aba(this,Laya)},b_s.prototype.onClick=function(e){switch(e.target.name){case"exitBtn":b_s.close(),this.leaveFb()}},b_s.close=function(){Sfh(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g.specialReward.renderHandler=Laya.Handler.create(p_g,p_g.renderItem,null,!1),p_g.commonReward.renderHandler=Laya.Handler.create(p_g,p_g.renderItem,null,!1),p_g.specialReward.itemRender=e.ItemBox,p_g.commonReward.itemRender=e.ItemBox,p_g}e.crossBossResulteWin=p_g;var d_u,b_e=(d_u=ui.window.csBoss.crossBossLossUI,__extends(d_m,d_u),d_m.prototype.onAdded=function(){Kjc(this,Laya)},d_m.prototype.leaveFb=function(e){void 0===e&&(e=!0),f_a.instance.crossBossEnterCD=SyncTime.serverTime,e&&d_m.close(),DungeonModel.instance.getFbConf()&&DungeonModel.instance.reqLeaveFb()},d_m.open=function(e){Imq(e,UIM,d_m)},d_m.prototype.resultViewInit=function(){1==this.dataSource?(this.escape.visible=!0,this.endTime.text=f_a.instance.currBossEndStr,this.image.visible=!1):(this.escape.visible=!1,this.image.visible=!0)},d_m.prototype.onClick=function(p_l){switch(p_l.target.name){case"exitBtn":this.leaveFb();break;case"upBtn1":this.leaveFb(),b_p.registerAutoOpenPanel(e.StrengthPanel,-1);break;case"upBtn2":this.leaveFb(),b_p.registerAutoOpenPanel(e.TalismanPanel,-1);break;case"upBtn3":this.leaveFb(),b_p.registerAutoOpenPanel(e.SkillPanel,-1);break;case"upBtn4":this.leaveFb(),b_p.registerAutoOpenPanel(e.BlackKingPanel,-1)}},d_m.prototype.onRemove=function(){Ald(this,Laya)},d_m.prototype.loopTime=function(){this.time<=0?this.leaveFb():(this.time--,this.clossTime.text=this.time+(j_x("2082_1878_413")+j_x(747)))},d_m.prototype.updateView=function(){Kwl(this,j_x,Laya)},d_m.close=function(){Cxa(UIM,d_m)},d_m);function d_m(){var e=d_u.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.crossBossResulteLoss=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.csBoss.csBossHelpTipsUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Wzw(this,Laya)},b_s.open=function(){Siv(UIM,b_s)},b_s.prototype.onRemoved=function(){Ghd(this,Laya)},b_s.prototype.onClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":b_s.close()}},b_s.close=function(){Smz(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.textPanel.vScrollBarSkin="",e}e.crossBossHelp=p_g;var d_u,b_e=(d_u=ui.window.csBoss.crossBossFightTipUI,__extends(d_m,d_u),d_m.prototype.onAdded=function(){this.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.CROSS_BOSS_KillED,this,this.rendDidBox),f_a.instance.reqCrossBossKilled(),1==this.dataSource.type?(this.DidTip.visible=!0,this.killTip.visible=!1,Laya.timer.loop(1e3,this,this.loopTime)):2==this.dataSource.type&&(this.rendKillBox(),this.DidTip.visible=!1,this.killTip.visible=!0)},d_m.prototype.onRemoved=function(){Ejg(this,Laya,LED,l_r)},d_m.prototype.onClick=function(p_l){switch(p_l.target.name){case"backBtn":case"sureBtn":case"closeBtn":d_m.close();break;case"reliveBtn":this.leaveFb(),d_m.close();break;case"consumeReliveBtn":var p_g=Config.reborn[5],b_s=f_a.instance.getReliveGold(5);if(p_g&&!b_p.checkCoin(1,b_s))return void e.WarnPanel.open((j_x("1263_869_2462")+j_x(1779)));this.reqRelive(),d_m.close()}},d_m.prototype.loopTime=function(){this.time--,this.didTired.text=f_a.instance.didTiredInfo.num+(j_x("1778_62_1796")+j_x("39_165")),this.reliveTime.text=this.time.toString(),this.time<=5?this.reliveBtn.disabled=!1:this.reliveBtn.disabled=!0,this.time<=0&&(d_m.close(),this.leaveFb())},d_m.prototype.leaveFb=function(){Mdi(f_a,SyncTime,DungeonModel)},d_m.prototype.rendKillBox=function(){Oar(this)},d_m.prototype.reqRelive=function(e){void 0===e&&(e=!1);var p_l=new c2m_reborn_req;p_l.type=e?0:1,DB.instance.query(c2m_reborn_req,p_l)},d_m.prototype.rendDidBox=function(){var e=Config.reborn[5],p_l=Math.min(e.countDown.length-1,Math.max(f_a.instance.didTiredInfo.num-1,0));this.reliveBtn.disabled=!0,this.time=e.countDown[p_l],this.killerName.text=this.dataSource.info.name,this.didTired.text=f_a.instance.didTiredInfo.num+(j_x("1778_62_1796")+j_x("39_165")),this.reliveTime.text=this.time.toString(),this.consumeLabel.text=f_a.instance.getReliveGold(5).toString()},d_m.open=function(e,p_l){UIM.open(d_m,null,{info:p_l,type:e},!1,!1,!0,!1)},d_m.close=function(){Ckb(UIM,d_m)},d_m);function d_m(){var e=d_u.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.crossBossFightTips=b_e;var d_w,f_t=(d_w=ui.window.csBoss.crossBossBuyUI,__extends(v_z,d_w),v_z.prototype.onAdded=function(){this.on(Laya.Event.CLICK,this,this.onClick),this.currentVip.text=Utils.$((j_x("1327_711")+"vip{1}"),LgcM.ins.heroVo.vipLv);var e=Config.recharge_vip[LgcM.ins.heroVo.vipLv];if(this.maxBox.visible=!1,this.lessBox.visible=!0,e){0!=f_a.instance.challengeVipTimes?(this.currentTimes.color="#71de66",this.maxVipTime.color="#71de66"):(this.currentTimes.color="#e32828",this.maxVipTime.color="#e32828"),this.currentTimes.text=Utils.$("{1}/{2}",f_a.instance.challengeVipTimes,e.crossBuyTimes);var p_l=Config.recharge_vip[LgcM.ins.heroVo.vipLv+1];p_l?(this.nextVip.text=Utils.$("vip{1}",LgcM.ins.heroVo.vipLv+1),this.nextTImes.text=p_l.crossBuyTimes.toString()):(this.maxBox.visible=!0,this.lessBox.visible=!1,this.maxLabel.text=Utils.$("vip{1}",LgcM.ins.heroVo.vipLv),this.maxVipTime.text=Utils.$("{1}/{2}",f_a.instance.challengeVipTimes,e.crossBuyTimes))}else this.currentTimes.color="#e32828",this.currentTimes.text="0/0";this.consumeCoin.text=Config.global[1811].i_info.toString()},v_z.prototype.onClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":v_z.close();break;case"BuyBtn":0<f_a.instance.challengeVipTimes?b_p.checkCoin(CoinDefine.GOLD,Config.global[1811].i_info)?f_a.instance.reqBuyTimeInfo():(b_p.broadcastNotice((j_x("1263_869_2462")+j_x(1779))),v_z.close()):(b_p.broadcastNotice((j_x("235_2348_2462")+j_x(1779))),v_z.close())}},v_z.open=function(){Syt(UIM,v_z)},v_z.prototype.onRemoved=function(){Iyc(this,Laya)},v_z.close=function(){Ebz(UIM,v_z)},v_z);function v_z(){var e=d_w.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.crossBossBuyTips=f_t;var d_h,r_t=(d_h=ui.window.csBoss.crossBossRewardTipUI,__extends(t_n,d_h),t_n.prototype.onAdded=function(){this.on(Laya.Event.CLICK,this,this.onClick);var e=Config.fb_crossboss[this.dataSource.id];if(e){this.commonReward.array=e.baseReward,this.specialReward.array=e.reward,this.countingDown.visible=!1,this.nextBoss.visible=!1,this.exitBtn.visible=!0;var p_l=f_a.instance.bossInfo[this.dataSource.id];p_l.lastKillerName&&p_l.lastKillerSid?this.player.text="S"+p_l.lastKillerSid+". "+p_l.lastKillerName:this.player.text=(j_x(814)),6==e.type?3==p_l.status?(Laya.timer.clear(this,this.setTimerLabel),this.countingDown.visible=!1,this.nextBoss.visible=!0,this.exitBtn.visible=!1,this.nextBoss.text=f_a.instance.nextBossTimeStr+(j_x("896_1787"))):2==p_l.status?(Laya.timer.clear(this,this.setTimerLabel),this.countingDown.visible=!1,this.exitBtn.visible=!1,this.nextBoss.visible=!0,this.nextBoss.text=f_a.instance.nextBossTimeStr+(j_x("896_1787"))):4==p_l.status?(this.countingDown.visible=!0,this.exitBtn.visible=!0,this.nextBoss.visible=!1,this.setTimerLabel()):1==p_l.status&&(Laya.timer.clear(this,this.setTimerLabel),this.countingDown.visible=!1,this.nextBoss.visible=!0,this.exitBtn.visible=!1,this.nextBoss.text=f_a.instance.nextBossTimeStr+(j_x("896_1787"))):(Laya.timer.clear(this,this.setTimerLabel),this.countingDown.visible=!1,this.nextBoss.visible=!1)}else t_n.close()},t_n.open=function(e){UIM.open(t_n,null,{id:e},!1,!1,!0,!0)},t_n.prototype.setTimerLabel=function(){Laya.timer.clear(this,this.setTimerLabel);var e=f_a.instance.currBossEndTime-SyncTime.serverTime/1e3;0<e?(this.countingDown.text=Utils.formatTimeStr(Math.floor(e))+(j_x("1865_2176_873")),this.countingDown.visible=!0,Laya.timer.once(1e3,this,this.setTimerLabel)):(this.countingDown.visible=!1,this.nextBoss.visible=!0,this.exitBtn.visible=!1,this.nextBoss.text=f_a.instance.nextBossTimeStr+(j_x("896_1787")))},t_n.prototype.onClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":t_n.close();break;case"exitBtn":var p_l=Math.floor((f_a.instance.crossBossEnterCD+1e3*Config.global[1903].i_info-SyncTime.serverTime)/1e3);if(0<p_l)return void b_p.broadcastNotice(Utils.$((j_x("15_1427")+"{1}"+j_x("2081_1865_1163")+j_x("1953_235_48")+j_x(383)+"BOSS"),p_l));f_a.instance.challengeBossById(this.dataSource.id),t_n.close()}},t_n.prototype.renderItem=function(e,p_l){var p_g=new ModuleItemVO;p_g.id=e.dataSource[0],p_g.amount=e.dataSource[1],e.setItemData(p_g)},t_n.prototype.onRemoved=function(){Wok(this,Laya)},t_n.close=function(){Urg(UIM,t_n)},t_n);function t_n(){var p_l=d_h.call(this)||this;return p_l.on(Laya.Event.ADDED,p_l,p_l.onAdded),p_l.on(Laya.Event.REMOVED,p_l,p_l.onRemoved),p_l.specialReward.renderHandler=Laya.Handler.create(p_l,p_l.renderItem,null,!1),p_l.commonReward.renderHandler=Laya.Handler.create(p_l,p_l.renderItem,null,!1),p_l.specialReward.itemRender=e.ItemBox,p_l.commonReward.itemRender=e.ItemBox,p_l}e.crossBossCheckRewardTips=r_t}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.shanghaipaihangUI,__extends(b_s,p_l),b_s.open=function(e,p_l){UIM.open(b_s,["zudui.atlas","bossTX.atlas"],{type:e,fbId:p_l},!1,!1)},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":this.closeSelf()}},b_s.prototype.onRemove=function(){Gkm(this,Laya)},b_s.close=function(){Yzo(UIM,b_s)},b_s.prototype.onAdded=function(){this.on(Laya.Event.CLICK,this,this.onMouseClick);var e=this.dataSource;if(e.type===DungeonType.WildBoss||e.type===DungeonType.TsBoss){var p_l=Config.fb_wildboss[e.fbId];Config.fb_dungeon[e.fbId],this.rewardLst.array=[p_l.reward1,p_l.reward2,p_l.reward3,p_l.reward4,p_l.rewardLastHit,p_l.rewardJoin]}else e.type,DungeonType.StateBoss},b_s.prototype.closeSelf=function(){Ytc(b_s)},b_s.prototype.updateItem=function(p_l,p_g){var b_s=p_l.getChildByName("rankClip"),d_u=[p_l.getChildByName("reward1Box"),p_l.getChildByName("reward2Box"),p_l.getChildByName("reward3Box")];b_s.index=p_g;for(var b_e=b_p.getRewardDatas(p_l.dataSource),d_m=0;d_m<d_u.length;++d_m){var d_w=d_u[d_m].getChildByName("itemBox");d_w||((d_w=new e.ItemBox).name="itemBox",d_w.isShowName=!1,d_w.isShowNum=!1,d_w.isShowTick=!1,d_u[d_m].addChild(d_w)),d_w.setItemData(b_e[d_m],ItemBoxDefine.MODULE_ITEM,!0)}},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.rewardLst.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e}e.DmgRankRewardPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g;(p_g=p_l=p_l||{})[p_g.ERROR=0]="ERROR",p_g[p_g.THUNDER=1]="THUNDER",p_g[p_g.KILLMONSTER=2]="KILLMONSTER",p_g[p_g.MONSTERHIT=3]="MONSTERHIT";var b_s,d_u=(b_s=ui.window.fb.dujieUI,__extends(b_e,b_s),b_e.open=function(){Cyj(UIM,b_e)},b_e.close=function(){Kik(UIM,b_e)},b_e.prototype.onCountDown=function(e){if(Laya.timer.clear(this,this.onCountDown),0<=e){if(b_p.getNumSp(NumType.DUJIE,e,this.sp,-20),!this.sp||0==this.sp.width)return this.sp&&(this.sp.visible=!1),void Laya.timer.once(100,this,this.onCountDown,[e]);this.sp.visible=!0,this.sp.pivot(this.sp.width/2,this.sp.height/2),this.sp.pos(this.clip.x,this.clip.y),this.sp.scale(3,3),this.sp.alpha=0,Laya.Tween.to(this.sp,{alpha:1},66),Laya.Tween.to(this.sp,{scaleX:1,scaleY:1},100)}else this.preBox.visible=this.killBox.visible=this.normalBox.visible=!1;Laya.timer.once(1e3,this,this.onCountDown,[e-1])},b_e.prototype.onRemove=function(){LED.off(l_r.FB_RESULT,this,this.onFbResult),LED.off(l_r.FB_STATE_STAGE,this,this.onStateStage),Laya.timer.clearAll(this),Engine2d.GameMap.defaultMap.mapGray(1),Resource.SoundManager.instance.stopSoundByName("thunder.mp3",!0),UIM.instance.setMainLeftUIVisible(!0),DungeonModel.instance.stateFbStage=null},b_e.prototype.onStateStage=function(e){if(this.preBox.visible=this.killBox.visible=this.normalBox.visible=!1,e.stageId){var p_g=Config.fb_state_stage[e.stageId];"killMonster"===p_g.event[0]?(this.killBox.visible=!0,this.sp=this.killBox.getChildByName("sp"),this.clip=this.killBox.getChildByName("clip"),this._isDujieType=p_l.KILLMONSTER):(this.normalBox.visible=!0,this.sp=this.normalBox.getChildByName("sp"),this.clip=this.normalBox.getChildByName("clip"),this.t_normal.text=p_g.desc,this._isDujieType=p_l.MONSTERHIT),"addBuff"===p_g.event[0]&&(this._isDujieType=p_l.THUNDER,Laya.timer.once(200,this,(function(){Engine2d.GameMap.defaultMap.mapGray(.3),Resource.SoundManager.instance.playSoundByName("thunder.mp3",!0,!0)})))}else this.preBox.visible=!0,this.sp=this.preBox.getChildByName("sp"),this.clip=this.preBox.getChildByName("clip");var b_s=DungeonModel.instance.stateFbNextTime-Math.floor(SyncTime.serverTime/1e3);this.onCountDown(b_s)},b_e.prototype.closeSelf=function(){Wjj(b_e)},b_e.prototype.onAdded=function(){this.mouseEnabled=!1,LED.on(l_r.FB_RESULT,this,this.onFbResult),LED.on(l_r.FB_STATE_STAGE,this,this.onStateStage),this.viewBox.visible=!1,this.preBox.visible=this.killBox.visible=this.normalBox.visible=!1,DungeonModel.instance.stateFbProps=null,DungeonModel.instance.stateFbStage&&this.onStateStage(DungeonModel.instance.stateFbStage),UIM.instance.setMainLeftUIVisible(!1)},b_e.prototype.onFbResult=function(p_l){this.preBox.visible=this.killBox.visible=this.normalBox.visible=!1,Laya.timer.clear(this,this.onCountDown),Resource.SoundManager.instance.stopSoundByName("thunder.mp3",!0),Engine2d.GameMap.defaultMap.mapGray(1),e.StateChoosePanel.close(),p_l.result||!DungeonModel.instance.stateFbStage.stageId||"killMonster"===Config.fb_state_stage[DungeonModel.instance.stateFbStage.stageId].event[0]&&EffectShowManager.instance.playMapEffect(b_p.mapID,3100)},b_e);function b_e(){var e=b_s.call(this)||this;return e._startTime=0,e._dmgTime=0,e._isDujieType=p_l.ERROR,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.DuJieView=d_u}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.hitlstUI,__extends(b_s,p_l),b_s.open=function(){Mwe(UIM,b_s)},b_s.prototype.onAdded=function(){Qft(this,Laya,LED,l_r)},b_s.prototype.onSkillHit=function(e){if(e.hit){for(var p_l=!1,p_g=0,b_s=e.hit;p_g<b_s.length;p_g++)if(b_s[p_g].targetId===b_p.playerId){p_l=!0;break}if(p_l){for(var d_u=!1,b_e=0,d_m=this._hitList;b_e<d_m.length;b_e++)if(d_m[b_e].pid===e.releaseId){d_u=!0;break}if(!d_u){var d_w=this.getPlayerActorInfo(e.releaseId);d_w&&this._hitList.unshift({pid:e.releaseId,name:d_w.name,entryId:d_w.entryId,headIcon:d_w.headIcon}),this.updateLst()}}}},b_s.close=function(){Elm(UIM,b_s)},b_s.prototype.onRemove=function(){Ktl(this,Laya,LED,l_r)},b_s.prototype.getPlayerActorInfo=function(e){return Uja(e,LgcM,Engine2d)},b_s.prototype.onActorChange=function(e,p_l){p_l&&p_l.type===Engine2d.ActorTypeDefine.PLAYER&&this.updateLst()},b_s.prototype.updateItem=function(e,p_l){if(e){var p_g=e.dataSource,b_s=e.getChildByName("headImg"),d_u=e.getChildByName("nameLab");b_s=Resource.ResManager.Instance.getImg(Resource.ResManager.getHeadUrl(p_g.entryId,p_g.headIcon),b_s),d_u.text=p_g.name}},b_s.prototype.onMouseClick=function(e){var p_l=e.target;switch(p_l.name){case"headImg":var p_g=p_l.parent.dataSource;if(p_g){var b_s=LgcM.ins.getActorStdInfoById(p_g.pid,Engine2d.ActorTypeDefine.PLAYER);b_s?DungeonModel.instance.changeAttackTarget(b_s):b_p.broadcastNotice((j_x("1964_949_1300")+j_x("1520_1833")))}}},b_s.prototype.updateLst=function(){for(var e=DungeonModel.instance.getTeamVo(),p_l=[],p_g=0,b_s=this._hitList;p_g<b_s.length;p_g++){var d_u=b_s[p_g];if(this.getPlayerActorInfo(d_u.pid))if(e&&e.member&&0<e.member.length){for(var b_e=!1,d_m=0,d_w=e.member;d_m<d_w.length;d_m++){var f_t=d_w[d_m];if(d_u.pid===f_t.pid){b_e=!0;break}}b_e||p_l.push(d_u)}else p_l.push(d_u)}this.plrLst.array=p_l,this.hitLab.visible=0<p_l.length},b_s.prototype.onUpdateTeam=function(){Qks(this)},b_s);function b_s(){var e=p_l.call(this)||this;return e._hitList=[],e.plrLst.vScrollBarSkin="",e.plrLst.scrollBar.elasticBackTime=100,e.plrLst.scrollBar.elasticDistance=200,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.plrLst.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e}e.DungeonHitLstView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.zudui_wodeduiwuUI,__extends(b_s,p_l),b_s.open=function(){Wfx(UIM,b_s)},b_s.close=function(){Gcv(UIM,b_s)},b_s.prototype.onMouseClick=function(p_l){var p_g=p_l.target;switch(p_g.name){case"closeBtn":b_s.close();break;case"leaveBtn":if(p_g.parent.dataSource){var d_u=p_g.parent.dataSource;DungeonModel.instance.reqFbTeamLeave(d_u.pid)}else e.DungeonTeamInvitePanel.open();break;case"addBtn":p_g.parent.dataSource||e.DungeonTeamInvitePanel.open()}},b_s.prototype.onRemove=function(){Izh(this,Laya,LED,l_r)},b_s.prototype.onAdded=function(){Yue(this,Laya,LED,l_r)},b_s.prototype.updateItem=function(e,p_l){var p_g=e.getChildByName("captainImg"),b_s=e.getChildByName("headImg"),d_u=e.getChildByName("fightSp"),b_e=e.getChildByName("fightLab"),d_m=e.getChildByName("nameLab"),d_w=e.getChildByName("stateLab"),f_t=e.getChildByName("leaveBtn"),v_z=e.getChildByName("addBtn"),d_h=DungeonModel.instance.getTeamVo();if(d_h){var r_t=d_h.member[0].pid===b_p.playerId;p_g.visible=0===p_l,f_t.visible=!0;var t_n=e.dataSource;if(t_n){b_e.visible=!0,d_u&&b_p.getNumSp("fightingSmall",t_n.fight,d_u),b_e&&(b_e.text=""+t_n.fight),d_m.text=t_n.name;var f_y=Config.state_state[t_n.state];d_w.text=f_y?f_y.desc:"",v_z.visible=!1,b_s.visible=!0;var p_q=Resource.ResManager.getHeadUrl(t_n.entryId,t_n.headIcon);Resource.ResManager.Instance.getImg(p_q,b_s),f_t.visible=!0,f_t.skin="res/ui/common/Button_common_3.png",r_t?t_n.pid===b_p.playerId?f_t.label=(j_x("1048_114")):f_t.label=(j_x("236_203")):t_n.pid===b_p.playerId?f_t.label=(j_x("236_203")):f_t.visible=!1}else b_s.visible=!1,b_e.visible=!1,d_m.text="",d_w.text="",r_t?(f_t.visible=!0,f_t.label=(j_x("1068_1777")),f_t.skin="res/ui/common/Button_common_4.png",v_z.visible=!0):(f_t.visible=!1,v_z.visible=!1)}},b_s.prototype.onUpdateTeam=function(){var p_l=DungeonModel.instance.getTeamVo();if(p_l){for(var p_g=p_l.member?p_l.member.slice():[],d_u=p_g.length;d_u<3;++d_u)p_g.push(null);this.plrLst.array=p_g}else b_s.close(),e.DungeonTeamTipPanel.open()},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.plrLst.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e}e.DungeonMyTeamPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.pklistUI,__extends(b_s,p_l),b_s.open=function(){Qlj(UIM,b_s)},b_s.prototype.updateItem=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("fightSp"),d_u=e.getChildByName("fightLab"),b_e=e.getChildByName("nameLab"),d_m=e.getChildByName("stateLab"),d_w=e.getChildByName("headImg"),f_t=Resource.ResManager.getHeadUrl(p_g.entryId,p_g.headIcon);Resource.ResManager.Instance.getImg(f_t,d_w),b_s&&b_p.getNumSp("fightingSmall",p_g.fight,b_s),d_u&&(d_u.text=""+p_g.fight),b_e.text=p_g.sid?p_g.sid+(j_x(1998)):""+p_g.name;var v_z=Config.state_state[p_g.state],d_h=Config.state_stateSub[p_g.subStateLv];d_m.text=v_z&&d_h?v_z.desc+d_h.desc:""},b_s.prototype.closeSelf=function(){Wqp(b_s)},b_s.prototype.onRemove=function(){Skg(this,Laya,LED,l_r)},b_s.prototype.onUpdateTeam=function(){Qne(this)},b_s.prototype.onActorChange=function(e,p_l){p_l&&p_l.type===Engine2d.ActorTypeDefine.PLAYER&&DungeonModel.instance.reqPkList()},b_s.prototype.updatePkLst=function(){for(var e=[],p_l=DungeonModel.instance.getTeamVo(),p_g=0,b_s=this.pkList;p_g<b_s.length;p_g++){var d_u=b_s[p_g];if(d_u.pid!==b_p.playerId){if(p_l&&p_l.member&&0<p_l.member.length){for(var b_e=!1,d_m=0,d_w=p_l.member;d_m<d_w.length;d_m++)if(d_w[d_m].pid===d_u.pid){b_e=!0;break}if(b_e)continue}e.push(d_u)}}this.plrLst.array=e,this.nonLab.visible=0===e.length},b_s.close=function(){Ets(UIM,b_s)},b_s.prototype.onAdded=function(){Wod(this,Laya,LED,l_r,DungeonModel)},b_s.prototype.onMouseClick=function(e){var p_l=e.target,p_g=Config.fb_dungeon[b_p.fbId];switch(p_l.name){case"closeBtn":b_s.close();break;case"refreshBtn":DungeonModel.instance.reqPkList();break;case"pkBtn":var d_u=p_l.parent.dataSource;if(d_u){var b_e=LgcM.ins.getActorStdInfoById(d_u.pid);if((p_g.type==DungeonType.TreaureM||p_g.type==DungeonType.TreaureB)&&b_p.isSameServer(d_u.sid))return void b_p.broadcastNotice((j_x("2462_1163_192")+j_x("712_1835_495")+j_x("1998_2046_855")+j_x(386)));b_e&&0<b_e.hp?(DungeonModel.instance.changeAttackTarget(b_e),b_p.broadcastNotice((j_x("506_2035_712")+j_x(1835))+b_e.name),this.closeSelf()):b_p.broadcastNotice((j_x("1964_949_1300")+j_x("1520_1833")))}}},b_s.prototype.onFbPkList=function(e){Mga(e,this)},b_s);function b_s(){var e=p_l.call(this)||this;return e.pkList=null,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.plrLst.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.plrLst.vScrollBarSkin="",e.plrLst.scrollBar.elasticBackTime=500,e.plrLst.scrollBar.elasticDistance=200,e}e.DungeonPkLstPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.zudui_yaoqingUI,__extends(b_s,p_l),b_s.open=function(){Kkh(UIM,b_s)},b_s.prototype.onAdded=function(){this.on(Laya.Event.CLICK,this,this.onMouseClick),LED.on(l_r.FB_PLR_LIST_UPDATE,this,this.onUpdatePlrList),LED.on(l_r.FB_TEAM_UPDATE,this,this.onUpdateTeam),DungeonModel.instance.isTeam()||DungeonModel.instance.reqCrateTeam(),this.plrLst.array=[],this.noneLab.visible=!0,DungeonModel.instance.reqFbPlrList();var e=DungeonModel.instance.getTeamVo();e&&e.member?this.numLab.text=String(e.member.length)+"/"+String(Config.global[GlobalDefine.fb_team_size].i_info):this.numLab.text="0/"+String(Config.global[GlobalDefine.fb_team_size].i_info)},b_s.prototype.updateItem=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("fightSp"),d_u=e.getChildByName("fightLab"),b_e=e.getChildByName("nameLab"),d_m=e.getChildByName("stateLab"),d_w=e.getChildByName("headImg");b_s&&b_p.getNumSp("fightingSmall",p_g.fight,b_s),d_u&&(d_u.text=""+p_g.fight);var f_t=Resource.ResManager.getHeadUrl(p_g.entryId,p_g.headIcon);Resource.ResManager.Instance.getImg(f_t,d_w),b_e.text=p_g.name;var v_z=Config.state_state[p_g.state];d_m.text=v_z?v_z.desc:""},b_s.prototype.onMouseClick=function(e){var p_l=e.target;switch(p_l.name){case"closeBtn":b_s.close();break;case"refreshBtn":DungeonModel.instance.reqFbPlrList();break;case"inviteBtn":var p_g=p_l.parent.dataSource;DungeonModel.instance.reqFbTeamInvite(p_g.pid)}},b_s.prototype.onUpdatePlrList=function(e){Cys(e,this)},b_s.close=function(){Gkj(UIM,b_s)},b_s.prototype.onRemove=function(){Emc(this,Laya,LED,l_r)},b_s.prototype.onUpdateTeam=function(){var p_l=DungeonModel.instance.getTeamVo();if(p_l){this.numLab.text=String(p_l.member.length)+"/"+String(Config.global[GlobalDefine.fb_team_size].i_info);for(var p_g=this.plrLst.array.slice(),d_u=[],b_e=0;b_e<p_g.length;++b_e)for(var d_m=p_g[b_e],d_w=0,f_t=p_l.member;d_w<f_t.length;d_w++)if(f_t[d_w].pid===d_m.pid){d_u.push(b_e);break}if(0<d_u.length){for(;0<d_u.length;){var v_z=d_u.pop();p_g.splice(v_z,1)}this.plrLst.array=p_g,this.noneLab.visible=0===p_g.length}}else b_s.close(),e.DungeonTeamTipPanel.open()},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.plrLst.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e}e.DungeonTeamInvitePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.zudui_liebiaoUI,__extends(b_s,p_l),b_s.open=function(){Ocm(UIM,b_s)},b_s.prototype.onUpdateTeamList=function(e){Ypy(e,this)},b_s.prototype.onMouseClick=function(e){var p_l=e.target;switch(p_l.name){case"closeBtn":b_s.close();break;case"refreshBtn":DungeonModel.instance.reqFbTeamList();break;case"joinBtn":var p_g=p_l.parent.dataSource;DungeonModel.instance.reqFbTeamReq(p_g.teamId)}},b_s.prototype.updateItem=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("fightSp"),d_u=e.getChildByName("fightLab"),b_e=e.getChildByName("nameLab"),d_m=e.getChildByName("numLab"),d_w=e.getChildByName("stateNameLab"),f_t=e.getChildByName("headImg"),v_z=Resource.ResManager.getHeadUrl(p_g.entryId,p_g.headIcon);Resource.ResManager.Instance.getImg(v_z,f_t),b_s&&b_p.getNumSp("fightingSmall",p_g.fight,b_s),d_u&&(d_u.text=""+p_g.fight),b_e.text=p_g.name,d_m.text=String(p_g.size)+"/"+String(Config.global[GlobalDefine.fb_team_size].i_info);var d_h=Config.state_state[p_g.stateLv];d_w.text=d_h?d_h.desc:""},b_s.close=function(){Qkq(UIM,b_s)},b_s.prototype.onAdded=function(){Ekt(this,Laya,LED,l_r,DungeonModel)},b_s.prototype.onRemove=function(){Uld(this,Laya,LED,l_r)},b_s.prototype.onUpdateTeam=function(){DungeonModel.instance.isTeam()&&(b_s.close(),e.DungeonMyTeamPanel.open())},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.teamLst.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e}e.DungeonTeamListPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.zudui_xuanzeUI,__extends(b_s,p_l),b_s.open=function(){Szp(UIM,b_s)},b_s.prototype.onAdded=function(){Srj(this,Laya,LED,l_r,DungeonModel)},b_s.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"closeBtn":b_s.close();break;case"searchBtn":e.DungeonTeamListPanel.open(),b_s.close();break;case"inviteBtn":DungeonModel.instance.isTeam()?e.DungeonMyTeamPanel.open():DungeonModel.instance.reqCrateTeam(),b_s.close();break;case"acceptChk":DungeonModel.instance.setRefuseAcceptTeam(!this.acceptChk.selected)}},b_s.close=function(){Krv(UIM,b_s)},b_s.prototype.onRemove=function(){Ezi(this,Laya,LED,l_r)},b_s.prototype.onUpdateTeam=function(){DungeonModel.instance.isTeam()&&(b_s.close(),e.DungeonMyTeamPanel.open())},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.DungeonTeamTipPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.fbExitViewUI,__extends(b_s,p_l),b_s.open=function(){UIM.open(b_s,null,null,!1,!1,!1,!1,{container:"mainUI",mainUIContainer:0,depthIndex:0})},b_s.close=function(){Aiw(UIM,b_s)},b_s.prototype.onAdded=function(){this.x=0<GPlatform.disStageX?-GPlatform.disStageX/2:0,this.y=GPlatform.ratioY*(GPlatform.designHeight-500),this.on(Laya.Event.CLICK,this,this.onMouseClick);var e=b_v.instance._marryVo.fbTotalTime,p_l=DungeonModel.instance.getLeftTime()||e;e&&Laya.timer.once(500,this,(function(){DungeonModel.instance.clientChangeFbTime(e+SyncTime.serverTime/1e3)})),p_l?(this.timeLab.text=Utils.formatTimeStr(p_l),Laya.timer.loop(1e3,this,this.onTimer)):this.timeLab.text="",this.timeLab.visible=!!p_l,this.timeBg.visible=!!p_l},b_s.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"exitBtn":var p_g=Config.map[b_p.mapID];if("minewar"==p_g.impl)b_p.confirm((j_x("1863_1878_236")+j_x("203_48_383")+j_x("1409_2329_4")+j_x("803_2148")+""+j_x("68_2032_236")+j_x(203)+""),(function(){MineModel.instance.reqExitMinePk()}));else if("wild_boss"==p_g.impl)b_p.confirm((j_x("1016_155_1443")+j_x("944_1409_1496")+j_x("1466_2208_1328")+j_x("407_1398")+""+j_x("68_2032_1016")+j_x("155_1443_944")+""),(function(){DungeonModel.instance.lastExitWildBossTime=SyncTime.serverTime,DungeonModel.instance.reqLeaveFb()}));else if("marry_fb"==p_g.impl)e.MarryFbCountDownView.close(),DB.instance.query(c2w_leave_fb,new c2w_leave_fb),b_v.instance.resetFbTime();else if("yishou"==p_g.impl||"ascent"==p_g.impl||"xuanshang"==p_g.impl)b_p.confirm((j_x("206_1917_402")+j_x("1443_944_236")+j_x("203_1865_1409")+j_x("2082_1878_1016")+j_x("155_2413_1869")+""+j_x("68_2032_236")+j_x(203)+"?"),(function(){var e=DungeonModel.instance.getFbConf();if(e&&e.type==DungeonType.Ascent)(p_l=TeamModel.instance.getTeamVO(TeamAimsType.ASCENT))&&p_l.isLeader&&TeamModel.instance.reqTeamDisband();else if(e&&e.type==DungeonType.Rare)(p_l=TeamModel.instance.getTeamVO(TeamAimsType.RareAni))&&p_l.isLeader&&TeamModel.instance.reqTeamDisband();else if(e&&e.type==DungeonType.RewardBoss){var p_l;(p_l=TeamModel.instance.getTeamVO(TeamAimsType.RewardBossAni))&&p_l.isLeader&&TeamModel.instance.reqTeamDisband()}DungeonModel.instance.reqLeaveFb()}));else if("cross_boss"==p_g.impl)b_p.confirm((j_x("1016_155_1443")+j_x("944_1409_814")+j_x("799_531_1976")+j_x("1573_2038")+""+j_x("68_2032_236")+j_x(203)+""),(function(){f_a.instance.crossBossEnterCD=SyncTime.serverTime,DungeonModel.instance.reqLeaveFb()}));else if("dragon_palace_boss"==p_g.impl)b_p.confirm((j_x("236_203_1865")+j_x("1409_1896")+"2"+j_x("2224_1394_2046")+j_x("33_2456_1614")+j_x("2171_1702_2460")+""+j_x("68_2032_236")+j_x("203_1443_944")+""),(function(){DungeonModel.instance.reqLeaveFb()}));else if("guarding_nantianmen"==p_g.impl)SouthSkyGateControl.ins.reqGuardingNTDmgInfo();else if("christmas_beat_monster"==p_g.impl)b_p.confirm((j_x("68_2032_236")+j_x("203_1443_944")+""),(function(){ChristamasControl.ins.reqChristmasDeatDmgInfo()}));else{var b_s=DungeonModel.instance.getFbConf();b_s&&b_s.type===DungeonType.WildBoss?DungeonModel.instance.lastExitWildBossTime=SyncTime.serverTime:b_s&&b_s.type===DungeonType.CossBoss&&(f_a.instance.crossBossEnterCD=SyncTime.serverTime),DungeonModel.instance.reqLeaveFb()}}},b_s.prototype.closeSelf=function(){Ijz(b_s)},b_s.prototype.onRemove=function(){Ays(this,Laya)},b_s.prototype.onTimer=function(){Usg(DungeonModel,Laya,this,Utils)},b_s);function b_s(){var e=p_l.call(this)||this;return e.isFrist=!0,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.FbExitView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.guanqipaimingUI,__extends(b_s,p_l),b_s.open=function(e,p_l){void 0===p_l&&(p_l=1),UIM.open(b_s,null,[e,p_l],!1,!1,!0,!0)},b_s.prototype.onRankUpdate=function(e){var p_l=0;if(null!=e){switch((this.dataSource=e).type){case RankType.FbStory:p_l=DungeonDefine.StoryBegin;break;case RankType.FbPagoda:p_l=DungeonDefine.PagodaBegin}var p_g=e.item;this.rankLst.array=p_g;var b_s=e.myIdx;if(b_s)if(this.myRankLab.text=(j_x(573))+b_s+(j_x(1511)),21===e.type){var d_u=Config.fb_story[e.myVal];d_u&&(this.myNumLab.text=(d_u.layer+1).toString())}else this.myNumLab.text=(e.myVal-p_l+1).toString();else this.myRankLab.text=(j_x("206_1067_1077")),this.myNumLab.text=""}},b_s.prototype.onAdded=function(){this.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.FB_RANK_FB_UPDATE,this,this.onRankUpdate),this.dataSource[1]===RankFb.FB_PAGODA?this.onRankUpdate(this.dataSource[0]):RankModel.instance.reqGetRank(RankType.FbStory,1)},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close()}},b_s.close=function(){Kdg(UIM,b_s)},b_s.prototype.onRemove=function(){Euu(this,Laya,LED,l_r)},b_s.prototype.updateItem=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("rankLab"),d_u=e.getChildByName("nameLab"),b_e=e.getChildByName("passNumLab"),d_m=this.dataSource;if(d_m&&d_m.type){var d_w=d_m.type;if(d_u.text=p_g.name,d_w===RankType.FbStory){var f_t=Config.fb_story[p_g.value];f_t&&(b_e.text=(f_t.layer+1).toString())}else d_w===RankType.FbPagoda&&(b_e.text=(p_g.value-DungeonDefine.PagodaBegin+1).toString());b_s.text=Utils.$((j_x(573)+"{1}"+j_x(1511)),p_l+1)}},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.rankLst.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.rankLst.vScrollBarSkin="",e.rankLst.scrollBar.isVertical=!0,e.rankLst.scrollBar.elasticBackTime=600,e.rankLst.scrollBar.elasticDistance=200,e}e.FbRankPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.fbRemindUI,__extends(b_s,p_l),b_s.prototype.init=function(){Och(this,Laya)},b_s.close=function(){Geu(UIM,b_s)},b_s.prototype.closeSelf=function(){Miz(b_s)},b_s.prototype.onRemove=function(){Ocw(this,Laya)},b_s.prototype.onMouseClick=function(e){var p_l=e.target,p_g=this.dataSource.fbId;switch(p_l.name){case"closeBtn":this.closeSelf();break;case"challengeBtn":Config.fb_dungeon[p_g]&&b_p.reqEnterFb(p_g),this.closeSelf();break;case"notRemindChk":DungeonModel.instance.notRemindFb[p_g]=p_l.selected}},b_s.open=function(e){DungeonModel.instance.notRemindFb[e]||UIM.open(b_s,["zudui.atlas"],{fbId:e},!1,!1)},b_s.prototype.onAdded=function(){var e=UIM.instance.getMainUI().shortCut.y;this.x=GPlatform.designWidth-this.width-10,this.y=e-this.height-30,this._curCd=15,this.on(Laya.Event.CLICK,this,this.onMouseClick);var p_l=this.dataSource.fbId,p_g=Config.fb_dungeon[p_l];this.bossNameLab.text=p_g?p_g.name:"",this.notRemindChk.selected=DungeonModel.instance.notRemindFb[p_l]||!1,Laya.timer.clear(this,this.onTimer),Laya.timer.loop(1e3,this,this.onTimer),this.titleLab.text=(j_x("62_1796")+" (")+this._curCd+"s)";var b_s=Config.obj_monster[p_g.monster];b_s?this.headImg.skin=Resource.ResUrl.getIconUrl(b_s.icon):console.log("data no find"),this.dataSource.fbId||Laya.timer.once(50,this,this.onAdded)},b_s.prototype.onTimer=function(){--this._curCd,this.titleLab.text=(j_x("62_1796")+" (")+this._curCd+"s)",this._curCd<=0&&this.closeSelf()},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.FbRemindPanel=p_g}(UI=UI||{}),function(e){e[e.common=0]="common",e[e.item=1]="item"}(getRewardType=getRewardType||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.gerenBossUI,__extends(b_s,p_l),b_s.open=function(e){void 0===e&&(e=-1),UIM.open(b_s,["bossFb.atlas"],e)},b_s.prototype.onUpdateRewardInfo=function(){var e=DungeonModel.instance.gerenBossRewardinfo;this.hasReward.visible=!0,this.noReward.visible=!1;var p_l=[],p_g=0;if(!e||!e.fbId||e.fbId.length<=0){this.noReward.visible=!0,this.hasReward.visible=!1;var b_s=DungeonModel.instance.getPersonalBossLstByType(this._index);b_s&&0<b_s.length&&(p_g=b_s[0].id),(d_w=Config.fb_green_boss_reward[p_g])&&d_w.reward&&(p_l=d_w.reward)}else{for(var d_u=[],b_e=0,d_m=e.fbId;b_e<d_m.length;b_e++){var d_w,f_t=d_m[b_e];(d_w=Config.fb_green_boss_reward[f_t])&&d_w.reward&&(p_g=f_t,d_u=d_w.reward)}p_l=d_u}var v_z=DungeonModel.instance.countConsumeReward(p_g,p_l);this.cRewardLst.array=b_p.getRewardDatas(v_z),this.rewardLst.array=b_p.getRewardDatas(p_l),this.rewardLst.x=this.bg.x+(this.bg.width/2-80*this.rewardLst.array.length)/2,this.cRewardLst.x=this.bg.x+this.bg.width/2+(this.bg.width/2-80*this.cRewardLst.array.length)/2,this.updateBtnStatus(),this.updateRed()},b_s.close=function(){Upv(UIM,b_s)},b_s.prototype.updateItem=function(e,p_l){if(e){e.x=0,e.visible=!0,e.setBossData(e.dataSource,p_l,this._currSelect);var p_g=DungeonModel.instance.saveData;p_g&&(p_g.id==e.dataSource.id&&DungeonModel.instance.isCrossGerenBoss?(Laya.Tween.to(e,{f_u:500},200,Laya.Ease.linearNone,Laya.Handler.create(this,this.playTweenLeftAni,[e,p_l],!0)),this._flag=!0):this._flag&&this._datas.push(e))}},b_s.prototype.rewardLstInfo=function(e,p_l){e&&(e.isShowName=!1,e.isShowNum=!0,e.setItemData(e.dataSource),e.scale(.8,.8))},b_s.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"tipbtn":b_e.open(this._index);break;case"r_get":DungeonModel.instance.reqGerenBossReward(this._index,getRewardType.common);break;case"consumeBtn":e.GerenRewardGetTip.open(this._index)}},b_s.prototype.playTweenLeftAni=function(e,p_l){e.x=0,e.visible=!1,DungeonModel.instance.saveData=null,DungeonModel.instance.isPlayCrossLevelAni=!0;var p_g=0;for(this._count=this._datas.length,p_g=0;p_g<this._count;p_g++){var b_s=this._datas[p_g];Laya.Tween.to(b_s,{j_l:b_s.y-b_s.height-this.bossLst.spaceY},200,Laya.Ease.linearNone,Laya.Handler.create(this,this.refreshData,null,!0))}this._datas.length=0},b_s.prototype.onAdded=function(){this.on(Laya.UIEvent.CLICK,this,this.onMouseClick);var e=parseInt(this.dataSource);this._currSelect=-1!=e?e:0,this.tab.selectedIndex=this._currSelect;var p_l=DungeonModel.instance.getPersonalBossLstByType(this._index),p_g=DungeonModel.instance.saveData;this._flag=!1,p_g?this.bossLst.refresh():this.bossLst.array=p_l,this.updateBtnStatus(),LED.on(l_r.FB_GRENEBOSS_REWARD_INFO,this,this.onUpdateRewardInfo),LED.on(l_r.FB_GRENEBOSS_REWARD,this,this.onUpdateRewardInfo),this.updateRed()},b_s.prototype.refreshData=function(){this._count=this._count-1,this._count<=0&&(DungeonModel.instance.isCrossGerenBoss=!1,this.bossLst.array=DungeonModel.instance.getPersonalBossLstByType(this._index))},b_s.prototype.onRemove=function(){if(this.off(Laya.UIEvent.CLICK,this,this.onMouseClick),LED.off(l_r.FB_GRENEBOSS_REWARD_INFO,this,this.onUpdateRewardInfo),LED.off(l_r.FB_GRENEBOSS_REWARD,this,this.onUpdateRewardInfo),Laya.timer.clearAll(this),this.bossLst&&this.bossLst.cells)for(var e=0;e<this.bossLst.cells.length;e++)this.bossLst.cells[e].clearRes(),this.bossLst.cells[e].clearCellTween()},b_s.prototype.updateRed=function(){Kni(this,DungeonModel)},b_s.prototype.onTabSelect=function(e){-1!==e&&(DungeonModel.instance._isPlayLeftAni=!1,this.bossLst.scrollBar.value=0,this.bossLst.array=DungeonModel.instance.getPersonalBossLstByType(e+1),DungeonModel.instance.reqGerenBossRewardInfo(e+1),this._index=e+1,this.tab.selectedIndex=e,this._currSelect=e,DungeonModel.instance.isPlayCrossLevelAni=!1)},b_s.prototype.updateBtnStatus=function(){var e=DungeonModel.instance._greneBoss_reward,p_l=DungeonModel.instance.gerenBossRewardinfo,p_g=!!(p_l&&p_l.fbId&&0<p_l.fbId.length),b_s=DungeonModel.instance.countGerenBossRewardId(this._index),d_u=Config.fb_green_boss_reward[b_s];d_u?(b_p.checkCoin(d_u.cost[0][0],d_u.cost[0][1])?this.cosumeNum.color="#00802e":this.cosumeNum.color="#ef2b2b",this.cosumeNum.text=d_u.cost[0][1]):this.cosumeNum.text="0",this.consumeBtn.label=this.r_get.label=(j_x("1174_2111")),p_g?p_l&&p_l.type===this._index&&(0<(e&1<<this._index-1)?(this.consumeBtn.disabled=this.r_get.disabled=!0,this.consumeBtn.label=this.r_get.label=(j_x("1300_1174_2111"))):(this.consumeBtn.disabled=this.r_get.disabled=!1,this.r_get.label=(j_x("1174_2111")),this.consumeBtn.label=d_u?d_u.costReward+(j_x("1785_1174_2111")):(j_x("1174_2111")))):this.consumeBtn.disabled=this.r_get.disabled=!0,this.redpoint_reward.visible=!this.r_get.disabled},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g._index=0,p_g.tempArr=[],p_g._currSelect=0,p_g._datas=[],p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g.bossLst.vScrollBarSkin="",DungeonModel.instance.isPlayCrossLevelAni=!1,p_g.bossLst.itemRender=e.GerenBossItemView,p_g.bossLst.renderHandler=Laya.Handler.create(p_g,p_g.updateItem,null,!1),p_g.tab.selectHandler=Laya.Handler.create(p_g,p_g.onTabSelect,null,!1),p_g.rewardLst.itemRender=e.ItemBox,p_g.rewardLst.renderHandler=Laya.Handler.create(p_g,p_g.rewardLstInfo,null,!1),p_g.cRewardLst.itemRender=e.ItemBox,p_g.cRewardLst.renderHandler=Laya.Handler.create(p_g,p_g.rewardLstInfo,null,!1),p_g}e.GerenBossPanel=p_g;var d_u,b_e=(d_u=ui.window.fb.greneBossTipsUI,__extends(d_m,d_u),d_m.open=function(e){Grf(e,UIM,d_m)},d_m.prototype.close=function(){Mxv(UIM,d_m)},d_m.prototype.onAdded=function(){if(this.dataSource){var e=DungeonModel.instance.gerenBossRewardinfo,p_l=this.dataSource,p_g=DungeonModel.instance.getPersonalBossLstByType(p_l),b_s=0;if(p_g&&(b_s=p_g[0].id),e&&e.fbId&&0<e.fbId.length)for(var d_u in e.fbId)b_s=e.fbId[d_u]>b_s?e.fbId[d_u]:b_s;var b_e=Config.fb_green_boss_reward[b_s+1];if(!(b_e&&b_e.reward&&0<b_e.reward.length))return this.list.visible=!1,void(this.reward_dec.visible=!1);this.list.array=b_p.getRewardDatas(b_e.reward);var d_m=this.list.array.length;this.list.x=.5*this.width-.5*(100*d_m+(d_m-1)*this.list.spaceX)}},d_m.prototype.updateListData=function(e,p_l){e.dataSource&&(e.isShowName=!1,e.isShowNum=!0,e.setItemData(e.dataSource))},d_m.prototype.onRemoved=function(){},d_m);function d_m(){var p_l=d_u.call(this)||this;return p_l.on(Laya.Event.ADDED,p_l,p_l.onAdded),p_l.on(Laya.Event.REMOVED,p_l,p_l.onRemoved),p_l.list.itemRender=e.ItemBox,p_l.list.renderHandler=Laya.Handler.create(p_l,p_l.updateListData,null,!1),p_l}e.GerenBossRewardTip=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.gerneRewardGetTipUI,__extends(b_s,p_l),b_s.open=function(e){Afo(e,UIM,b_s)},b_s.prototype.onAdded=function(){if(this.on(Laya.UIEvent.CLICK,this,this.onMouseClick),this.dataSource){DungeonModel.instance.gerenBossRewardinfo;var e=this.dataSource,p_l=DungeonModel.instance.countGerenBossRewardId(e),p_g=Config.fb_green_boss_reward[p_l];if(!(p_g&&p_g.reward&&0<p_g.reward.length))return this.list.visible=!1,void(this.consumeLabel.visible=!1);this.list.array=b_p.getRewardDatas(DungeonModel.instance.countConsumeReward(p_l,p_g.reward)),this.consumeLabel.text=Utils.$((j_x("68_2032_1661")+j_x(1502)+"{1}"+j_x("1263_869_531")+j_x(1976)+"{2}"+j_x("1785_1644_1254")+j_x("2235_83")),p_g.cost[0][1],p_g.costReward),this.list.visible=this.consumeLabel.visible=!0;var b_s=this.list.array.length;this.list.x=.5*this.width-.5*(100*b_s+(b_s-1)*this.list.spaceX)}},b_s.prototype.updateListData=function(e,p_l){e.dataSource&&(e.isShowName=!1,e.isShowNum=!0,e.setItemData(e.dataSource))},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"sureBtn":this.dataSource&&(DungeonModel.instance.reqGerenBossReward(this.dataSource,getRewardType.item),b_s.close())}},b_s.close=function(){Eet(UIM,b_s)},b_s.prototype.onRemoved=function(){Cct(this,Laya)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemoved),p_g.list.itemRender=e.ItemBox,p_g.list.renderHandler=Laya.Handler.create(p_g,p_g.updateListData,null,!1),p_g}e.GerenRewardGetTip=p_g}(UI=UI||{}),function(e){e[e.HELP_PANEL=0]="HELP_PANEL",e[e.INVITE_PANEL=1]="INVITE_PANEL",e[e.TIANJIE_PANEL=2]="TIANJIE_PANEL"}(ViewType=ViewType||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.qiuzhuUI,__extends(b_s,p_l),b_s.open=function(e,p_l,p_g,d_u){void 0===p_l&&(p_l=0),void 0===p_g&&(p_g=null),void 0===d_u&&(d_u="res/ui/common/help.png"),UIM.open(b_s,[],{fbId:e,viewType:p_l,descs:p_g,titleUrl:d_u},!1,!1,!0)},b_s.prototype.updateHelpTimes2=function(){var e,p_l=DungeonModel.instance.tianJieSeekTime,p_g=Config.global[3015].t_info[0],b_s=LgcM.ins.heroVo,d_u=Config.recharge_vip[b_s.vipLv];e=d_u?d_u.fb_help:0,this.seekhelp.text=(j_x("100_1808_235")+j_x(2348)+":")+p_l+"/"+(p_g+e)},b_s.prototype.onAdded=function(){switch(this.UpdateView(),this.on(Laya.UIEvent.CLICK,this,this.onMouseClick),this.dataSource.viewType){case ViewType.HELP_PANEL:LED.on(l_r.FB_HELP_TIMES_UPDATE,this,this.updateHelpTimes),this.updateHelpTimes(),this.seekhelp.visible=!0;break;case ViewType.INVITE_PANEL:LED.on(l_r.FB_HELP_TIMES_UPDATE,this,this.updateHelpTimes),this.updateHelpTimes(),this.seekhelp.visible=!1;break;case ViewType.TIANJIE_PANEL:LED.on(l_r.FB_HELP_TIMES_UPDATE,this,this.updateHelpTimes2),LED.on(l_r.FB_HEAVEN_OPEN_INFO,this,this.updateHelpTimes2),this.updateHelpTimes2(),this.seekhelp.visible=!0}},b_s.prototype.UpdateView=function(){this.dataSource.descs&&(this.desc1.text=this.dataSource.descs[0],this.desc2.text=this.dataSource.descs[1]),this.helpTitleImg.skin=this.dataSource.titleUrl},b_s.prototype.onRemove=function(){switch(this.off(Laya.UIEvent.CLICK,this,this.onMouseClick),this.dataSource.viewType){case ViewType.HELP_PANEL:case ViewType.INVITE_PANEL:LED.off(l_r.FB_HELP_TIMES_UPDATE,this,this.updateHelpTimes);break;case ViewType.TIANJIE_PANEL:LED.off(l_r.FB_HELP_TIMES_UPDATE,this,this.updateHelpTimes2),LED.off(l_r.FB_HEAVEN_OPEN_INFO,this,this.updateHelpTimes2)}},b_s.close=function(){Gqw(UIM,b_s)},b_s.prototype.updateHelpTimes=function(){var e,p_l=DungeonModel.instance.getFbHelpTimes(),p_g=Config.global[GlobalDefine.fb_help_times].i_info,b_s=LgcM.ins.heroVo,d_u=Config.recharge_vip[b_s.vipLv];e=d_u?d_u.fb_help:0,this.seekhelp.text=(j_x("100_1808_235")+j_x(2348)+":")+p_l+"/"+(p_g+e)},b_s.prototype.onMouseClick=function(p_l){var p_g=p_l.target,d_u=LgcM.ins.heroVo,b_e="",d_m=null;switch(this.dataSource.viewType){case ViewType.HELP_PANEL:b_e=Config.notice[2].value;var d_w=Config.fb_story[this.dataSource.fbId];d_m=d_w?[[d_w.layer+1],[d_u.id,this.dataSource.fbId]]:[[0],[d_u.id,this.dataSource.fbId]];break;case ViewType.INVITE_PANEL:b_e=Config.notice[361].value,d_m=[[this.dataSource.fbId]];break;case ViewType.TIANJIE_PANEL:b_e=Config.notice[507].value;var f_t=DungeonModel.instance.getTianJieOpenBossByFBId(this.dataSource.fbId);d_m=[[Utils.formaNum(f_t+1)],[d_u.id,this.dataSource.fbId]]}switch(p_g.name){case"closeBtn":case"backBtn":b_s.close();break;case"worldchannel":this.checkHelpNum()&&(n_d.instance.reqChat(ChannelTypeDefine.WORLD,b_e,d_m),b_p.broadcastNotice((j_x("571_1802_402")+j_x(2142)),1,Config.color[1002].color),b_s.close());break;case"schoolchannel":if(!d_u.guildName||""==d_u.guildName)return void b_p.broadcastNotice((j_x("1768_206_223")+j_x("2456_796_1413")));this.checkHelpNum()&&(n_d.instance.reqChat(ChannelTypeDefine.GUILD,b_e,d_m),b_p.broadcastNotice((j_x("571_1802_402")+j_x(2142)),1,Config.color[1002].color),b_s.close());break;case"friendchannel":this.checkHelpNum()&&(e.friendStoryHelpPanel.open(this.dataSource.fbId,b_e,d_m),b_s.close())}},b_s.prototype.checkHelpNum=function(){var e=DungeonModel.instance.getFbHelpTimes(),p_l=Config.global[GlobalDefine.fb_help_times].i_info,p_g=LgcM.ins.heroVo,b_s=Config.recharge_vip[p_g.vipLv];return!(!b_s||p_l+b_s.fb_help<=e&&(b_p.broadcastNotice((j_x("100_1808_235")+j_x("2348_1300_1876")+j_x(1917))),1))},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.HelpPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.bossTX_jiangliUI,__extends(b_s,p_l),b_s.open=function(e,p_l){UIM.open(b_s,["bossTX.atlas"],{type:e,fbId:p_l},!1,!1)},b_s.prototype.onSelfDmgUpdate=function(){Sec(this,DungeonModel)},b_s.prototype.onMouseClick=function(e){var p_l=e.target;switch(p_l.name){case"closeBtn":b_s.close();break;case"takeRewardBtn":var p_g=p_l.parent.dataSource;DungeonModel.instance.reqTakeHurtReward(p_g.id)}},b_s.prototype.updateRewardLst=function(){this._hurtRewrdStatus=DungeonModel.instance.getHurtRewardStatus(this.dataSource.type,this.dataSource.fbId);var e=[];for(var p_l in Config.fb_stateboss_reward){var p_g=Config.fb_stateboss_reward[p_l];Math.floor(p_g.id/1e4)===this.dataSource.fbId&&2===p_g.type&&e.push(p_g)}this.rewardLst.array=e},b_s.prototype.updateItem=function(e,p_l){for(var p_g,b_s=e.getChildByName("dmgUpperLab"),d_u=e.getChildByName("takeRewardBtn"),b_e=e.getChildByName("itemBox1"),d_m=e.getChildByName("itemBox2"),d_w=e.getChildByName("itemBox3"),f_t=e.getChildByName("dmgLab"),v_z=e.getChildByName("dmgUpper2Lab"),d_h=e.getChildByName("takeRewardRpImg"),r_t=e.dataSource,t_n=b_p.getRewardDatas(r_t.reward),f_y=[b_e,d_m,d_w],p_q=0;p_q<f_y.length;++p_q)f_y[p_q].isShowName=!1,f_y[p_q].isShowNum=!0,f_y[p_q].isShowTick=!1,f_y[p_q].setItemData(t_n[p_q],ItemBoxDefine.MODULE_ITEM,!0);b_s.text=String(r_t.hurtCond);var h_h=this.calcDmgLab(r_t.hurtCond),n_j=h_h[0],j_l=h_h[1];v_z.text="/"+j_l+n_j;var l_m=DungeonModel.instance.getSelfDmg();l_m>r_t.hurtCond&&(l_m=r_t.hurtCond),n_j=(p_g=this.calcDmgLab(l_m))[0],j_l=p_g[1],f_t.text=""+j_l+n_j,d_h.visible=1===this._hurtRewrdStatus[r_t.id],d_u.disabled=!1,d_u.label=(j_x(1174)+" "+j_x(2111)),0===(this._hurtRewrdStatus[r_t.id]||0)?d_u.disabled=!0:2===(this._hurtRewrdStatus[r_t.id]||0)&&(d_u.disabled=!0,d_u.label=(j_x("1300_1174_2111")))},b_s.prototype.onRemove=function(){Idk(this,Laya,LED,l_r)},b_s.prototype.calcDmgLab=function(e){var p_l="";return e=1e8<e?(p_l=(j_x(2377)),Math.floor(e/1e8)):1e4<e?(p_l=(j_x(729)),Math.floor(e/1e4)):(p_l="",e),[p_l,e]},b_s.prototype.onAdded=function(){Yvl(this,Laya,LED,l_r)},b_s.close=function(){Ujh(UIM,b_s)},b_s.prototype.onHurtRewardStatus=function(){Qvq(this)},b_s);function b_s(){var e=p_l.call(this)||this;return e._hurtRewrdStatus=null,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.rewardLst.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e}e.HurtRewardPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.lilianUI,__extends(b_s,p_l),b_s.open=function(e){void 0===e&&(e=!1),UIM.open(b_s,["experience.atlas"],null,e,!1,!1,null)},b_s.prototype.tween=function(e){var p_l=e<0?-GPlatform.designWidth:GPlatform.designWidth,p_g=this.bgPanel.hScrollBar.value,b_s=p_g+p_l,d_u=1e3;b_s<0?b_s=0:b_s>this.bgImg.width-GPlatform.designWidth&&(b_s=this.bgImg.width-GPlatform.designWidth),d_u*=Math.abs(b_s-p_g)/GPlatform.designWidth,Laya.Tween.to(this.bgPanel.hScrollBar,{value:b_s},d_u)},b_s.prototype.updatePvpRedPoint=function(){Uge(this,d_x)},b_s.prototype.checkSystemOpen=function(p_l){void 0===p_l&&(p_l=!1),SystemNoticeManager.instance.setBoxGrayByWinClass(this.yuanshisenlinImg,e.GerenBossPanel,p_l),SystemNoticeManager.instance.setBoxGrayByWinClass(this.qunshanImg,e.WildBossPanel,p_l),SystemNoticeManager.instance.setBoxGrayByWinClass(this.shanguImg,e.StateBossPanel,p_l),SystemNoticeManager.instance.setBoxGrayByWinClass(this.rongyanImg,e.PagodaView,p_l),SystemNoticeManager.instance.setBoxGrayByWinClass(this.lundaotaiImg,e.PvpPanel,p_l),SystemNoticeManager.instance.setBoxGrayByWinClass(this.shuijingkuangmaiImg,e.MineView,p_l),SystemNoticeManager.instance.setBoxGrayByWinClass(this.mokuImg,e.StoryFBPanel_new,p_l),SystemNoticeManager.instance.setBoxGrayByWinClass(this.palaceImg,e.PalaceView,p_l),SystemNoticeManager.instance.setBoxGrayByWinClass(this.moshenImg,e.BossComePanel,p_l),SystemNoticeManager.instance.setBoxGrayByWinClass(this.taixuhuanjingImg,e.dreamlandMianPanel,p_l),SystemNoticeManager.instance.setBoxGrayByWinClass(this.xiangongdoufa,e.gymkhanaPanel,p_l),SystemNoticeManager.instance.setBoxGrayByWinClass(this.ascentBox,e.AscentPanel,p_l)},b_s.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"tiangongImg":break;case"yuanshisenlinImg":e.GerenBossPanel.open();break;case"qunshanImg":e.WildBossPanel.open();break;case"shanguImg":e.StateBossPanel.open();break;case"rongyanImg":e.PagodaView.open();break;case"lundaotaiImg":e.PvpPanel.open();break;case"shuijingkuangmaiImg":e.MineView.open();break;case"mokuImg":break;case"juqingfuben":e.StoryFBPanel_new.open();break;case"leftBtn":this.tween(-1);break;case"rightBtn":this.tween(1);break;case"palaceImg":e.PalaceView.open();break;case"moshenImg":e.BossComePanel.open();break;case"taixuhuanjingImg":e.dreamlandMianPanel.open();break;case"xiangongdoufa":e.gymkhanaPanel.open();break;case"ascentBox":e.AscentPanel.open(0);break;case"typeBtn2":if(1==LgcM.ins.heroVo.heavenOpenState)e.TianjieOpenPanel.open();else{var p_g=Config.funcOpen[10055],d_u=p_g.condition[0][1],b_e=p_g.condition[0][2];LgcM.ins.heroVo.stateLv>=d_u&&StateModel.instance.getStateSubLv()>=b_e?e.TianjiePanel.open():b_p.broadcastNotice(p_g.openError)}break;case"typeBtn3":b_p.broadcastNotice((j_x("2287_206_1463")+j_x("1779_155_1186")+j_x("1320_1283")))}},b_s.prototype.updateMineRedPoint=function(){Cpi(this,MineModel)},b_s.prototype.updateBossComeRedPoint=function(){Ewu(this,BossComeModel)},b_s.prototype.updateGerenBossRedPoint=function(){Mki(this,DungeonModel)},b_s.prototype.onAdded=function(){this.x=0,e.HangIcon.close(),this.on(Laya.UIEvent.CLICK,this,this.onMouseClick),this.bgPanel.hScrollBar.setScroll(0,1500,725),LED.on(l_r.HERO_LEVEL_CHANGE,this,this.updateRedPoint),LED.on(l_r.HERO_STATE_CHANGE,this,this.updateRedPoint),LED.on(l_r.WAILBOSS_REMiND_CHANG_RED,this,this.updateRedPoint),LED.on(l_r.PVP_ATTACK_TS_CHANGE,this,this.updatePvpRedPoint),LED.on(l_r.BOSSCOME_INFO_UPDATE,this,this.updateBossComeRedPoint),LED.on(l_r.MINE_ROLE_INFO,this,this.updateMineRedPoint),LED.on(l_r.MINE_LIST,this,this.updateMineRedPoint),LED.on(l_r.GYMKHANA_RED_POINT,this,this.gymkhanaRedPoint),LED.on(l_r.FB_GRENEBOSS_REWARD_INFO,this,this.updateGerenBossRedPoint),LED.on(l_r.FB_GRENEBOSS_REWARD,this,this.updateGerenBossRedPoint),LED.on(l_r.ASCENT_UPDATE,this,this.updateAscentRedPpint),LED.on(l_r.UPDATE_PAGODA_SWEEP,this,this.updateRedPoint),LED.on(l_r.FB_HEAVEN_OPEN_WATCH,this,this.updateTianJieBtn),LED.on(l_r.UPDATE_DA_PVP_INFO,this,this.updateTianJieBtn),this.bgPanel.hScrollBar.on(Laya.Event.CHANGE,this,this.onDragMove),UIM.instance.isOpenWin(e.BossBar)||UIM.instance.setMainLeftUIVisible(!1);for(var p_l=0;p_l<this.bgImg.numChildren;++p_l){var p_g=this.bgImg.getChildAt(p_l),b_s=p_g.getChildByName("labBox"),d_u=b_s.getChildByName("redpoint");if(d_u&&(d_u.visible=!1),b_s.y=this._defY[p_l],p_g.clickScale=1.1,!p_g.graphics){var b_e=p_g.skin;console.log("------------",b_e),p_g.skin=null,p_g.skin=b_e}}this.leftRedPoint.visible=!1,this.rightRedPoint.visible=!1,this.updateRedPoint(),this.startWave(),this.checkSystemOpen(),this.updateTianJieBtn()},b_s.prototype.showRedpoint=function(e,p_l){void 0===p_l&&(p_l=!0);var p_g=e.getChildByName("labBox");if(p_g){var b_s=p_g.getChildByName("redpoint");b_s&&(b_s.visible=!!p_l)}},b_s.prototype.delayCheckGuide=function(p_l){Wrk(p_l,e,b_s)},b_s.prototype.gymkhanaRedPoint=function(){Ovn(this,gymkhanaModel)},b_s.prototype.updateRedPoint=function(){Cwg(this,DungeonModel,PalaceModel)},b_s.prototype.changeAdapt=function(){if(GPlatform.needAdapt){if(this.height=GPlatform.stageHeight,this.width=Stage.width,GPlatform.stageHeight>this.bgImg.height){var e=this.bgImg.parent.getChildAt(0),p_l=this.bgImg.parent.getChildAt(1),p_g=this.bgImg.parent.getChildAt(2);this.bgImg.y+=-e.y/2,p_l&&(p_l.y=p_l.y/2),p_g&&(p_g.y=p_g.y/2),e.y=e.y/2}this.bgPanel.height=GPlatform.stageHeight,this.bgPanel.width=Stage.width,this.backBtn.y*=GPlatform.ratioY,this.backBtn.y+=50,this.backBtn.x=this.width-this.backBtn.width-10,this.rightBtn.x=this.width-this.rightBtn.width}},b_s.prototype.startWave=function(){Ymt(this,SyncTime,Laya)},b_s.close=function(e){void 0===e&&(e=!1),UIM.close(b_s,e)},b_s.prototype.updateDreamlandRedPoint=function(){Ixp(this,dreamlandModel)},b_s.prototype.onRemove=function(){Config.map[b_p.mapID]&&Config.map[b_p.mapID].showUI&&0<=Config.map[b_p.mapID].showUI.indexOf(1003)&&e.HangIcon.open(),this.off(Laya.UIEvent.CLICK,this,this.onMouseClick),LED.off(l_r.HERO_LEVEL_CHANGE,this,this.updateRedPoint),LED.off(l_r.WAILBOSS_REMiND_CHANG_RED,this,this.updateRedPoint),LED.off(l_r.HERO_STATE_CHANGE,this,this.updateRedPoint),LED.off(l_r.UPDATE_PAGODA_SWEEP,this,this.updateRedPoint),LED.off(l_r.PVP_ATTACK_TS_CHANGE,this,this.updatePvpRedPoint),LED.off(l_r.BOSSCOME_INFO_UPDATE,this,this.updateBossComeRedPoint),LED.off(l_r.MINE_ROLE_INFO,this,this.updateMineRedPoint),LED.off(l_r.MINE_LIST,this,this.updateMineRedPoint),LED.off(l_r.GYMKHANA_RED_POINT,this,this.gymkhanaRedPoint),LED.off(l_r.FB_GRENEBOSS_REWARD_INFO,this,this.updateGerenBossRedPoint),LED.off(l_r.FB_GRENEBOSS_REWARD,this,this.updateGerenBossRedPoint),LED.off(l_r.ASCENT_UPDATE,this,this.updateAscentRedPpint),LED.off(l_r.FB_HEAVEN_OPEN_WATCH,this,this.updateTianJieBtn),LED.off(l_r.UPDATE_DA_PVP_INFO,this,this.updateTianJieBtn),Laya.timer.clearAll(this),UIM.instance.isOpenWin(e.BossBar)||UIM.instance.setMainLeftUIVisible(!0),Laya.timer.clear(this,this.delayCheckGuide)},b_s.prototype.updateAscentRedPpint=function(){Eej(this,AscentModel,RareAnimalModel)},b_s.prototype.waveLoop=function(){var e,p_l=(SyncTime.serverTime-this._waveStartTime)%2e3;e=p_l<500?Math.round(15*p_l/500):p_l<1e3?Math.round(15*(1e3-p_l)/500):p_l<1500?-Math.round(15*(p_l-1e3)/500):-Math.round(15*(2e3-p_l)/500);for(var p_g=0;p_g<this.bgImg.numChildren;++p_g){var b_s=this.bgImg.getChildAt(p_g).getChildByName("labBox");if(b_s){var d_u=b_s.getChildByName("redpoint");d_u&&d_u.visible?b_s.y=this._defY[p_g]+e:b_s.y!==this._defY[p_g]&&(b_s.y=this._defY[p_g])}}},b_s.prototype.onDragMove=function(p_l){this._tempPoint||(this._tempPoint=new Laya.Point);for(var p_g=!1,d_u=!1,b_e=0;b_e<this.bgImg.numChildren;++b_e){var d_m=this.bgImg.getChildAt(b_e).getChildByName("labBox");if(!d_m)return;var d_w=d_m.getChildByName("redpoint");if(d_w&&d_w.visible){this._tempPoint.setTo(d_w.x,d_w.y);var f_t=d_m.localToGlobal(this._tempPoint).x+(d_w.width>>1);f_t<0?p_g=!0:f_t>Stage.width&&(d_u=!0)}if(p_g&&d_u)break}this.leftRedPoint.visible=p_g,this.rightRedPoint.visible=d_u,this.leftBtn.visible=this.bgPanel.hScrollBar.value!==this.bgPanel.hScrollBar.min,this.rightBtn.visible=this.bgPanel.hScrollBar.value!==this.bgPanel.hScrollBar.max,e.GuidePanel.checkIsWinAndUpdate(b_s.name,!1),Laya.timer.once(100,this,this.delayCheckGuide)},b_s.prototype.updateTianJieBtn=function(){Mtg(this,DungeonModel,DoubleAreaModel)},b_s);function b_s(){var e=p_l.call(this)||this;e._waveStartTime=0,e._defY=[],e.changeAdapt(),e.bgPanel.hScrollBarSkin="",e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove);for(var p_g=0;p_g<e.bgImg.numChildren;++p_g){var b_s=e.bgImg.getChildAt(p_g).getChildByName("labBox");b_s?e._defY.push(b_s.y):e._defY.push(0)}return e.typeBtn1.mouseEnabled=!1,e.checkSystemOpen(!0),e}e.LilianPanel=p_g}(UI=UI||{});var z_f=function(e){function p_l(){return e.call(this)||this}return __extends(p_l,e),p_l.prototype.setContent=function(e){Iib(e,this)},p_l}(ui.window.chat.MonsterTalkUI),UI,BossTpyeTip;!function(e){var p_l,p_g=(p_l=ui.window.fb.PagodaPassLevel_oneKeyViewUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){var e=DungeonModel.instance.getNextFb(DungeonType.Pagoda),p_l=e[0],p_g=e[1];Config.fb_pagoda[p_g]||(p_g=p_l),this.passLevel_onekey_btn.on(Laya.Event.CLICK,this,this.onClickPassLevel),this.isShowDirectily(!1),this.closeBtn.on(Laya.Event.CLICK,this,this.close),0===p_l&&(p_l=p_g),DungeonModel.instance.currFb_PagotaId=p_l,this._curLayer=p_l;var b_s=Config.fb_pagoda;if(this.lianqi_lab.visible=!1,this.dec_lab.style.fontSize=24,this.dec_lab.style.font="SimHei",this.dec_lab.style.align="left",this.dec_lab.style.valign="center",this.dec_lab.style.leading=15,this.heroVo.fight,Config.fb_pagoda[p_g].fight,this.heroVo.fight>=Config.fb_pagoda[p_g].fight){for(var d_u in b_s)if(!(b_s[d_u].id<=p_l)){if(!(this.heroVo.fight>=b_s[d_u].fight))break;this._biggestLayer=b_s[d_u].id-this.basicsLayer}Config.fb_pagoda[this.maxLevel].fight<this.heroVo.fight&&(this._biggestLayer=this.maxLevel),this.dec_lab.innerHTML=Utils.$((j_x("1749_2046_383")+j_x("767_559_2251")+","+j_x("1163_1737_2205")+j_x("1331_413_2057")+"{1}"+j_x(413)),Utils.setColor(Utils.$("{1}",this._biggestLayer),"#00802e")),Config.fb_pagoda[p_g]||(this.dec_lab.innerHTML=Utils.$((j_x("1300_1012_1117")+j_x("1081_2251_1778")+j_x(2348))),this.passLevel_onekey_btn.disabled=!0),DungeonModel.instance.diffPago=this._biggestLayer-p_l+this.basicsLayer}else this.dec_lab.innerHTML=Utils.$((j_x("2379_413_582")+j_x("774_383_767")+":{1}{2}"),Utils.setColor(Utils.$("{1}",this.heroVo.fight+"/"),"#b92929"),Utils.setColor(Utils.$("{1}",Math.floor(Config.fb_pagoda[p_g].fight)),"#b92929"));this.dec_lab.x=(this.bg.width-this.dec_lab.contextWidth)/2,this.heroVo.stateLv<2?this.lianqi_lab.visible=!0:this.lianqi_lab.visible=!1,this.heroVo.vipLv<2?this.vipLab.visible=!0:this.vipLab.visible=!1},b_s.prototype.close=function(){Oor(UIM,b_s)},b_s.prototype.oneKeyPassPagoda=function(){Config.fb_dungeon[b_p.fbId]?b_p.broadcastNotice((j_x("2035_1443_944")+j_x("283_2462_1919")+j_x("1365_1876_1737")+j_x("2205_1331_413"))):LED.event(l_r.ONEKEY_PAGODA_PASS,[!0])},b_s.open=function(e){Iyd(e,UIM,b_s)},b_s.prototype.onClickPassLevel=function(){if(this.close(),this.heroVo.vipLv<2)b_p.broadcastNotice(("VIP"+j_x("15_2342_2462")+j_x(1779)));else if(this.heroVo.stateLv<2)b_p.broadcastNotice((j_x("1248_110_2075")+j_x("155_1186")));else{var e=DungeonModel.instance.getNextFb(DungeonType.Pagoda),p_l=e[0],p_g=e[1];50600<p_g&&(p_g=p_l),50001===p_g&&(p_g=50001),Config.fb_pagoda[p_g]||(p_g=p_l),this.heroVo.fight-Config.fb_pagoda[p_g].fight<0?b_p.broadcastNotice((j_x("383_767_2462")+j_x(1779))):(b_e.open(this._biggestLayer,this._curLayer),this.oneKeyPassPagoda(),this.close())}},b_s.prototype.onRemoved=function(){Ezn(this,Laya)},b_s.prototype.isShowDirectily=function(e){void 0===e&&(e=!0),e?(this.passLevel_onekey_btn.x=this.width/2-this.passLevel_onekey_btn.width/2,this.vipLab.x=this.passLevel_onekey_btn.x+this.passLevel_onekey_btn.width+5,this.vipLab.y=this.passLevel_onekey_btn.y+this.vipLab.height/2):(this.passLevel_onekey_btn.x=this.width/2-this.passLevel_onekey_btn.width/2,this.vipLab.x=this.passLevel_onekey_btn.x+this.vipLab.height,this.vipLab.y=this.passLevel_onekey_btn.y-this.vipLab.height-this.vipLab.height/2),this.directlybtn.visible=!1,this.notTip.visible=!1},Object.defineProperty(b_s.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),b_s);function b_s(){var e=p_l.call(this)||this;return e._biggestLayer=0,e._curLayer=0,e.maxLevel=50600,e.basicsLayer=5e4,e.on(Laya.Event.ADDED,e,e.onAdded),e}e.PagodaPassLevel_oneKeyView=p_g;var d_u,b_e=(d_u=ui.window.fb.pagodaFbResultViewUI,__extends(d_m,d_u),d_m.prototype.onAdded=function(){Ipm(this,Laya,e,DungeonModel)},d_m.setBiggestLayer=function(e){},d_m.prototype.updateItem=function(e,p_l){Yev(e,p_l)},d_m.prototype.onRemove=function(){this.off(Laya.Event.CLICK,this,this.onClickCloseBtn),Laya.timer.clearAll(this),Laya.timer.clearAll(this.list),this._numValue=0;var e=DungeonModel.instance.getNextFb(DungeonType.Story),p_l=e[0],p_g=e[1];Config.fb_pagoda[p_g]||(p_g=p_l),LED.event(l_r.REFRESH_FB_LEVEL,[p_g])},d_m.prototype.close=function(){Gom(UIM,d_m)},d_m.prototype.onClickCloseBtn=function(){Qlo(this)},d_m.prototype.onCloseBtnClick=function(){Oep(this)},d_m.open=function(e,p_l){Uke(e,p_l,UIM,d_m)},d_m.prototype.tweenFunc=function(){this.list.x=600;var e=this._curLayerID,p_l=this._curLayerID+1;if(Config.fb_pagoda[p_l]||(p_l=e),this._numValue<DungeonModel.instance.diffPago){0!=e&&++this._numValue;var p_g=DungeonModel.instance.currFb_PagotaId+this._numValue;0==e&&++this._numValue;var b_s=p_g%10,d_u=Math.floor(p_g%100/10),b_e=Math.floor(p_g/100%10),d_m=Math.floor(p_g/1e3);this.unit_clip.index=b_s,this.decade_clip.index=d_u,this.hundreds_clip.index=b_e,this.thousand_clip.index=d_m,DungeonModel.instance.onePassLevelReward;var d_w=p_g-5e4;this.num_box.x=d_w<10?this.bg.width/2-1.5*this.unit_clip.width:10<=d_w&&d_w<100?this.bg.width/2-this.unit_clip.width/2:100<=d_w&&d_w<1e3?this.bg.width/2-this.unit_clip.width/2:this.bg.width/2,this.decade_clip.visible=10<=p_g,this.hundreds_clip.visible=100<=p_g,this.thousand_clip.visible=1e3<=p_g;var f_t=Config.fb_dungeon[p_l];f_t=f_t||Config.fb_dungeon[e];var v_z=b_p.getRewardDatas(f_t.firstPassReward||f_t.passReward);this.list.array=v_z,p_g++,this._curLayerID++,Laya.Tween.to(this.list,{f_u:-484},100,null)}else Laya.Tween.clearAll(this.list),this.list.x=70},Object.defineProperty(d_m.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),d_m);function d_m(){var e=d_u.call(this)||this;return e._numValue=0,e._biggestLayer=0,e._curLayerID=0,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.PagodaFbResultView=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.SweepAwardPageUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Yfg(LED,l_r,this,DungeonModel,DungeonType)},b_s.prototype.onRemoved=function(){Mfz(LED,l_r,this)},b_s.open=function(){Yyt(UIM,b_s)},b_s.prototype.getAwardTotal=function(e){if(e&&Config.fb_dungeon[e]&&Config.fb_dungeon[e].passReward){var p_l,p_g=e-DungeonDefine.PagodaBegin+1,b_s=0,d_u=[];if(p_g<0)return;if(0==p_g)return Config.fb_dungeon[e].passReward;for(var b_e=0;b_e<p_g;b_e++)b_s+=Config.fb_dungeon[DungeonDefine.PagodaBegin+b_e].passReward[0][1];return p_l=Config.fb_dungeon[e].passReward[0][0],d_u.push([p_l,b_s]),d_u}},b_s.prototype.onClick=function(e){switch(e.target.name){case"getBtn":DungeonModel.instance.reqSweepPagoda();break;case"closeBtn":this.close()}},b_s.prototype.onUpdatePagodaSweep=function(){DungeonModel.instance._pagodaSweepFbId?this.awardlist.visible=!0:this.awardlist.visible=!1,this.awardlist.array=b_p.getRewardDatas(this.getAwardTotal(DungeonModel.instance._pagodaSweepFbId)),this.onSweepUpdate()},b_s.prototype.updateItem=function(e,p_l){Uey(e,p_l)},b_s.prototype.onSweepUpdate=function(){var e=DungeonModel.instance.isPagodaSweep;this.reminderlabel.y=this.awardlist.y-this.reminderlabel.height-20,this.getBtn.getChildByName("redpoint").visible=!e&&0<DungeonModel.instance._pagodaSweepFbId,0===DungeonModel.instance._pagodaSweepFbId?(this.getBtn.label=(j_x("1174_2111")),this.getBtn.disabled=!0,this.reminderlabel.text=(j_x("711_1737_2308")+j_x("1331_413_573")+"1"+j_x("1778_1865_1163")+j_x("1941_2372")),this.reminderlabel.y=this.height/2-this.reminderlabel.height):(e?(this.getBtn.label=(j_x("1300_1174_2111")),this.getBtn.disabled=!0):(this.getBtn.label=(j_x("1174_2111")),this.getBtn.disabled=!1),this.reminderlabel.text=Utils.$((j_x("711_1737_2308")+j_x("1331_254")+"{1}"+j_x(1778)),DungeonModel.instance._pagodaSweepFbId-DungeonDefine.PagodaBegin+1)),this.reminderlabel.x=this.width/2-this.reminderlabel.textField.textWidth/2;var p_l=this.awardlist.length;this.awardlist.x=this.width/2-(100*p_l+(p_l-1)*this.awardlist.spaceX)/2},b_s.prototype.close=function(){Yib(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.awardlist.visible=!1,e.awardlist.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.on(Laya.Event.CLICK,e,e.onClick),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.PagodaSweepAwardPage=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.pagodaFbUI,__extends(b_s,p_l),b_s.prototype.awardItem=function(e,p_l){Awi(e,p_l)},b_s.prototype.initInterface=function(e){var p_l=this;function p_g(p_g){var d_u=b_s.floorBox[p_g],b_e=d_u.getChildByName("maskimg"),d_m=d_u.getChildByName("lockimg"),d_w=d_u.getChildByName("floornum"),f_t=d_u.getChildByName("fireparent");if(p_g+1==b_s.currentIndex)if(f_t.addChild(b_s.fire_finish),0==p_g)if(b_s.isPassLevel){var v_z=b_s.floorBox[b_s.floorBox.length-1].getChildByName("maskimg");b_s.floorBox[b_s.floorBox.length-1].getChildByName("fireparent").addChild(b_s.fire_start),b_s.fire_start.x=0,b_s.fire_start.y=0,d_m.visible=!0,v_z.alpha=0,b_s.fire_start.visible=!0,b_s.fire_start.play(!1),b_s.fire_start.on(Laya.Event.COMPLETE,b_s,b_s.onCompleteFiveFloorFireClip,[v_z,f_t,d_m]),b_s.aniPanelShow(e)}else b_e.visible=!1,d_m.visible=!1,b_s.fireclip.visible=!0,f_t.addChild(b_s.fireclip),b_s.fireclip.play();else b_s.isPassLevel?(b_s.fire_start.visible=!0,b_s.fire_start.play(!1),b_s.fire_start.on(Laya.Event.COMPLETE,b_s,b_s.onCompleteOteherLevelFireclip,[b_e,f_t,d_m])):(b_e.visible=!1,d_m.visible=!1,b_s.fireclip.visible=!0,f_t.addChild(b_s.fireclip));else p_g+1<b_s.currentIndex?(b_s.isPassLevel&&p_g+2==b_s.currentIndex&&(b_e.visible=!0,b_e.alpha=0,Laya.Tween.to(b_e,{alpha:1},1500,null),f_t.addChild(b_s.fire_start),b_s.fire_start.x=0,b_s.fire_start.y=0),d_m.visible=!1):(b_e.visible=!0,b_e.alpha=1,b_s.isPassLevel&&1==b_s.currentIndex&&4==p_g?d_m.visible=!1:d_m.visible=!0);1==b_s.currentIndex&&b_s.isPassLevel?Laya.timer.once(1800,b_s,(function(){d_w.text=(j_x(573))+(e-p_l.fbIdTemp-p_l.currentIndex+p_g+1)+(j_x(1778))})):d_w.text=(j_x(573))+(e-b_s.fbIdTemp-b_s.currentIndex+p_g+1)+(j_x(1778))}e==DungeonDefine.PagodaBegin?this.currentIndex=1:5<Math.abs((e-this.fbIdTemp)%10)?this.currentIndex=Math.abs((e-this.fbIdTemp)%10)-5:(this.currentIndex=Math.abs((e-this.fbIdTemp)%10),0==this.currentIndex&&(this.currentIndex=5)),this.fireclip.visible=!1,this.lockclip.visible=!1,this.fire_finish.visible=!1,this.fire_start.visible=!1;for(var b_s=this,d_u=0;d_u<this.floorBox.length;d_u++)p_g(d_u)},b_s.prototype.onQuietPagoda=function(){Kgj(this)},b_s.prototype.updateView=function(e,p_l){0==p_l&&(p_l=e);var p_g=Config.fb_pagoda[e];p_g=p_g||Config.fb_pagoda[p_l],Config.fb_dungeon[e]&&Config.fb_dungeon[e].firstPassReward?this.awardlist.array=b_p.getRewardDatas(Config.fb_dungeon[e].firstPassReward):(this.challengebtn.disabled=!0,this.awardlist.array=[],this.challengebtn.getChildAt(0).visible=!1),this.fighting.text=(j_x("220_277_383")+j_x(767)+":")+p_g.fight,this.heroVo.fight>=p_g.fight?this.fighting.color="#71de66":this.fighting.color="#b92929"},b_s.prototype.onCompleteFiveFloorFireClip=function(e,p_l,p_g){this.fire_start.visible=!1,this.fire_start.off(Laya.Event.COMPLETE,this,this.onCompleteFiveFloorFireClip),Laya.Tween.to(e,{alpha:1},500,null,Laya.Handler.create(this,this.onCompleteplayfivefloorfireclip,[p_l,p_g,e]))},b_s.prototype.onPassFB=function(){if(this.isPassLevel=!0,this.isOnePassKey){this.isOnePassKey=!1;var e=DungeonModel.instance.getNextFb(DungeonType.Pagoda),p_l=e[0],p_g=e[1];this.initInterface(p_g),this.updateView(p_g,p_l)}DungeonModel.instance.isPagoTaOneKey=!1},b_s.prototype.onSweepUpdate=function(){var e=DungeonModel.instance.canSweepPagoda();(this.sweepbtn.getChildByName("redpoint").visible=e)?r_n.instance.shakeEffect(this.sweepbtn,1.2,.1,10):(Laya.Tween.clearAll(this.sweepbtn),this.sweepbtn.rotation=0)},b_s.prototype.passFiveshowfloorNum=function(e){Yeg(e,this,j_x)},b_s.prototype.onPassFbOneKey=function(e){var p_l=e+1;p_l&&50600<p_l&&(p_l=50600),this.isPassLevel=!0,this.isOnePassKey&&(this.isOnePassKey=!1,this.initInterface(p_l),this.updateView(p_l,e))},b_s.prototype.setAutoCombatTime=function(){Wan(this)},b_s.prototype.onClickChallenge=function(e){void 0===e&&(e=!1);var p_l=DungeonModel.instance.getNextFb(DungeonType.Pagoda),p_g=p_l[0],d_u=p_l[1];if(0==p_g&&(p_g=d_u),50600!=d_u){var b_e=Config.fb_pagoda[d_u];if(b_e=b_e||Config.fb_pagoda[p_g],e){if(Config.fb_dungeon[b_p.fbId])return void b_p.broadcastNotice((j_x("2035_1443_944")+j_x("283_2462_1919")+j_x("1365_1876_1737")+j_x("2205_1331_413")));b_e&&b_e.fight<=this.heroVo.fight?d_o.instance.isCurrentTimeExceeds("function",1500,(j_x("506_2035_1331")+j_x("413_283")+""+j_x("1777_606_1865")+j_x("1953_1739")))&&(this.currentIndex++,this.isOnePassKey=!0,DungeonModel.instance.isPagoTaOneKey=!0,DungeonModel.instance.reqEnterRollPagoda(b_e.id)):b_p.broadcastNotice((j_x("383_767_2462")+j_x(1779)+""+j_x("2462_1919_1737")+j_x("2205_1331_413")))}else this.isOnePassKey?b_p.broadcastNotice((j_x("506_2035_1331")+j_x("413_283")+""+j_x("1777_606_1865")+j_x("1953_1739"))):b_p.reqEnterFb(b_e.id,b_s,b_p.mapID)&&this.isAutoChallenge&&(this.autoCombatTime=10,Laya.timer.clear(this,this.onClickChallenge))}else b_p.broadcastNotice((j_x("1300_1117_1012")+j_x("1081_2251_1778")))},b_s.prototype.finishFireplay=function(){Esx(this,Laya)},b_s.prototype.onTimer=function(){this.autocombat_checkbox.selected&&(this.autocombat_checkbox.label=(j_x("2082_1878_2379")+j_x("1737_1778")+"")+--this.autoCombatTime+(j_x(2081)+")")),this.autoCombatTime<=0&&(this.autoCombatTime=10)},b_s.prototype.onCompleteOteherLevelFireclip=function(e,p_l,p_g){Ymj(e,p_l,p_g,this,Laya)},b_s.prototype.removeOtherLevelMasktween=function(e){Krd(e,Laya)},b_s.prototype.onCompletePlayOtherLevelLockclip=function(e,p_l,p_g){this.lockclip.off(Laya.Event.COMPLETE,this,this.onCompletePlayOtherLevelLockclip),p_l.addChild(this.fire_finish),p_l.addChild(this.fireclip),this.fire_finish.x=0,this.fire_finish.y=0,this.fire_finish.visible=!0,this.fire_finish.play(!1),this.fire_finish.on(Laya.Event.COMPLETE,this,this.onCompletePlayFire_finish,[e,p_l,p_g]),this.lockclip.visible=!1,Laya.Tween.to(e,{alpha:0},1500,null,Laya.Handler.create(this,this.removeOtherLevelMasktween,[e]))},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"closepagodabtn":case"backpagodabtn":this.autoCombatTime=10,Laya.timer.clear(this,this.onClickChallenge),this.close();break;case"rankBtn":e.FbRankPanel.open(this.dataSource,2);break;case"challengebtn":this.onClickChallenge();break;case"sweepbtn":e.PagodaSweepAwardPage.open();break;case"oneKeyBtn":e.PagodaPassLevel_oneKeyView.open(2)}},b_s.prototype.aniPanelShow=function(e){Kmm(e,this,j_x)},b_s.prototype.onCompleteplayfivefloorfireclip=function(e,p_l,p_g){Uwe(e,p_l,p_g,this,Laya)},b_s.prototype.onPlayfullAni1=function(e,p_l){Slv(e,p_l,this,Laya)},b_s.prototype.onCompletePlayFire_finish=function(){Uii(this,Laya)},b_s.prototype.RemoveMaskTWEEN=function(e){Wki(e,Laya)},b_s.prototype.autoCombat=function(e){if(void 0===e&&(e=!1),this.autocombat_checkbox.selected?(Laya.timer.once(1e3*this.autoCombatTime,this,this.onClickChallenge),this.isAutoChallenge=!0):this.isAutoChallenge=!1,e&&!this.autocombat_checkbox.selected)return this.autoCombatTime=10,this.autocombat_checkbox.label=(j_x("2082_1878_2379")+j_x("1737_413")+"")+this.autoCombatTime--+(j_x(2081)+""),void Laya.timer.clear(this,this.onClickChallenge)},b_s.prototype.onLoseFB=function(){Crv(this,DungeonModel)},b_s.prototype.updateRankItem=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("nameLab"),d_u=e.getChildByName("guanLab");b_s.text=String(p_l+1)+". "+p_g.name,this._rankType===RankType.FbStory?d_u.text=String(p_g.value-DungeonDefine.StoryBegin+1)+(j_x(413)):this._rankType===RankType.FbPagoda&&(d_u.text=String(p_g.value-DungeonDefine.PagodaBegin+1)+(j_x(413)))},b_s.prototype.onAdded=function(){LED.on(l_r.FB_RANK_FB_UPDATE,this,this.onRankUpdate),LED.on(l_r.FB_PAGODA_SWEEP_UPDATE,this,this.onSweepUpdate),LED.on(l_r.UPDATE_PAGODA_SWEEP,this,this.onSweepUpdate),LED.on(l_r.FB_WIN,this,this.onPassFB),LED.on(l_r.QUIETPAGODA,this,this.onQuietPagoda),LED.on(l_r.SCENE_LOAD_OVER,this,this.setAutoCombatTime),LED.on(l_r.FB_LOSE,this,this.onLoseFB),LED.on(l_r.ONEKEY_PAGODA_PASS,this,this.onClickChallenge),LED.on(l_r.ONEKEY_PAGODA_PASS_UPDATE_VIEW,this,this.onPassFbOneKey),RankModel.instance.reqGetRank(RankType.FbPagoda,1),DungeonModel.instance.reqPagodaCanSweepFbId(),this.anipanel.visible=!1;var p_l=DungeonModel.instance.getNextFb(DungeonType.Pagoda),p_g=p_l[0],b_s=p_l[1];this.autoCombat(!1),this.updateView(b_s,p_g),this.initInterface(b_s),Laya.timer.loop(1e3,this,this.onTimer),this.autoCombatTime=10,this.autocombat_checkbox.label=(j_x("2082_1878_2379")+j_x("1737_1778")+"")+this.autoCombatTime+(j_x(2081)+")");var d_u=BagModel.instance.checkFreeSlot(this.awardlist.array);d_u||b_p.confirm((j_x("1009_1968_1166")+j_x("130_1466_2460")+j_x("2462_1779")+""+j_x("774_1624_320")+j_x("1496_140_1166")+j_x("130_1865_2060")+j_x("1919_48_383")),(function(){e.DecomposePanel.open(0)})),this.autocombat_checkbox.selected=this.isAutoChallenge&&d_u},b_s.prototype.onPassFiveFloorLockClip=function(e,p_l){this.lockclip.off(Laya.Event.COMPLETE,this,this.onPassFiveFloorLockClip);var p_g=this.floorBox[0].getChildByName("maskimg");e.addChild(this.fireclip),e.addChild(this.fire_finish),this.fire_finish.x=0,this.fire_finish.y=0,this.fire_finish.visible=!0,this.fire_finish.play(!1),this.fire_finish.on(Laya.Event.COMPLETE,this,this.finishFireplay),p_g.visible=!0,p_g.alpha=1,Laya.Tween.to(p_g,{alpha:0},800,null,Laya.Handler.create(this,this.RemoveMaskTWEEN,[p_g])),this.isPassLevel=!1},b_s.prototype.onRemoved=function(){Kwf(LED,l_r,this,Laya,DungeonModel)},b_s.prototype.onRankUpdate=function(e){Suz(e,this)},Object.defineProperty(b_s.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),b_s.prototype.setRank=function(e){San(e,this)},b_s.open=function(){Urp(UIM,b_s)},b_s.prototype.close=function(){Mtt(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;e._rankType=0,e.floorBox=[],e.isPassLevel=!1,e.tenFloorBox=[],e.isAutoChallenge=!1,e.isOnePassKey=!1,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.on(Laya.Event.CLICK,e,e.onClick),e.floorBox.push(e.onefloor),e.floorBox.push(e.twofloor),e.floorBox.push(e.threefloor),e.floorBox.push(e.fourfloor),e.floorBox.push(e.fivefloor),e.autocombat_checkbox.clickHandler=Laya.Handler.create(e,e.autoCombat,[!0],!1),e.awardlist.renderHandler=Laya.Handler.create(e,e.awardItem,null,!1),e.rankLst.renderHandler=Laya.Handler.create(e,e.updateRankItem,null,!1),e.fbIdTemp=DungeonDefine.PagodaBegin-1;for(var p_g=0;p_g<e.tenfloor.numChildren;p_g++)e.tenFloorBox.push(e.tenfloor.getChildAt(p_g));return e}e.PagodaView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.passLevel_oneKeyUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){var e=DungeonModel.instance.getNextFb(DungeonType.Story),p_l=e[0],p_g=e[1];Config.fb_story[p_g]||(p_g=p_l),this.passLevel_onekey_btn.on(Laya.Event.CLICK,this,this.onClickPassLevel),this.directlybtn.on(Laya.Event.CLICK,this,this.onClickDirectly),this.notTip.clickHandler=Laya.Handler.create(this,this.notTipFunc,[!0],!1),2==this.dataSource?this.isShowDirectily():this.isShowDirectily(!1),this.closeBtn.on(Laya.Event.CLICK,this,this.onCloseView),0===p_l&&(p_l=p_g),DungeonModel.instance.currFbId=Config.fb_story[p_l].layer;var b_s=Config.fb_story;this.lianqi_lab.visible=!1,this.vipLab.visible=!1;var d_u=this.heroVo.fight-Config.fb_story[DungeonDefine.StoryBegin].fight;if(this.heroVo.fight>=Config.fb_story[p_g].fight){for(var b_e in b_s)if(this.heroVo.fight<=b_s[b_e].fight){if(b_s[b_e].id<=p_l)continue;if(0<d_u){this._biggestLevel=b_s[b_e].id;break}}Config.fb_story[this.maxLevel].fight<this.heroVo.fight&&(this._biggestLevel=this.maxLevel),this.dec_lab.innerHTML=Utils.$((j_x("1749_2046_383")+j_x("767_559_2251")+","+j_x("1163_1737_2205")+j_x("1331_413_2057")+"{1}"+j_x(413)),Utils.setColor(Utils.$("{1}",Config.fb_story[this._biggestLevel].layer),"#00802e")),Config.fb_story[p_g]||(this.dec_lab.innerHTML=Utils.$((j_x("1300_1012_1081")+j_x("2251_413_764")+"!")),this.passLevel_onekey_btn.disabled=!0),DungeonModel.instance.diffLevel=Config.fb_story[this._biggestLevel].layer-Config.fb_story[p_l].layer}else this.dec_lab.innerHTML=Utils.$((j_x("2379_413_582")+j_x("774_383_767")+":{1}{2}"),Utils.setColor(Utils.$("{1}",this.heroVo.fight+"/"),"#b92929"),Utils.setColor(Utils.$("{1}",Math.floor(Config.fb_story[p_g].fight)),"#b92929"));this.dec_lab.x=(this.bg.width-this.dec_lab.contextWidth)/2,1==this.heroVo.stateLv&&2<=StateModel.instance.getStateSubLv()||1<this.heroVo.stateLv||(this.lianqi_lab.visible=!0),this.heroVo.vipLv<1&&(this.vipLab.visible=!0)},b_s.prototype.onRemoved=function(){Ogo(this,Laya)},b_s.prototype.onClickDirectly=function(){var p_l=DungeonModel.instance.getNextFb(DungeonType.Story),p_g=p_l[0],b_s=p_l[1],d_u=Config.fb_story[b_s],b_e=0<d_u.layer&&(d_u.layer+1)%5==0;Config.fb_story[b_s]||(b_s=p_g),b_e&&DungeonModel.instance.canEnterStoryFb(!0)?b_p.reqEnterFb(b_s,e.StoryFBPanel_new,b_p.mapID):(DungeonModel.instance.canEnterStoryFb()?(DungeonModel.instance.reqFbDirectPass(b_s),DungeonModel.instance.currFbId=d_u.layer-1,DungeonModel.instance.diffLevel=2,e.StoryPassResultPanel.open(!0)):this.heroVo.fight<Config.fb_story[b_s].fight&&e.StoryPassResultPanel.open(!1),this.close())},b_s.prototype.notTipFunc=function(e){this.notTip.selected&&(DungeonModel.instance.isNotTips=!0)},b_s.prototype.onClickPassLevel=function(){if(this.heroVo.vipLv<1)b_p.broadcastNotice(("VIP"+j_x("15_2342_2462")+j_x(1779)));else if(1==this.heroVo.stateLv&&2<=StateModel.instance.getStateSubLv()||1<this.heroVo.stateLv){var e=DungeonModel.instance.getNextFb(DungeonType.Story),p_l=e[0],p_g=e[1];Config.fb_story[p_g]||(p_g=p_l),this.heroVo.fight-Config.fb_story[p_g].fight<0?b_p.broadcastNotice((j_x("383_767_2462")+j_x(1779))):(b_e.open(this._biggestLevel),DungeonModel.instance.reqOneKeyPassFB(),this.close())}else b_p.broadcastNotice((j_x("266_1973_711")+j_x("2075_155_1186")))},b_s.prototype.onCloseView=function(){Iru(this)},Object.defineProperty(b_s.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),b_s.open=function(e){Inv(e,UIM,b_s)},b_s.prototype.close=function(){Qhk(UIM,b_s)},b_s.prototype.isShowDirectily=function(e){void 0===e&&(e=!0),e?(this.passLevel_onekey_btn.x=this.width/2-this.passLevel_onekey_btn.width/2,this.vipLab.x=this.passLevel_onekey_btn.x+this.passLevel_onekey_btn.width+5,this.vipLab.y=this.passLevel_onekey_btn.y+this.vipLab.height/2,this.directlybtn.visible=!1,this.notTip.visible=!1):(this.passLevel_onekey_btn.x=this.width/2-this.passLevel_onekey_btn.width-this.passLevel_onekey_btn.width/3,this.vipLab.x=this.passLevel_onekey_btn.x+this.vipLab.height,this.vipLab.y=this.passLevel_onekey_btn.y-this.vipLab.height-this.vipLab.height/2,this.directlybtn.visible=!0,this.notTip.visible=!0)},b_s);function b_s(){var e=p_l.call(this)||this;return e._biggestLevel=0,e.maxLevel=11899,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),z_j.setHtml(e.dec_lab,24,"#000000",15,"left","SimHei",!1),e}e.PassLevel_oneKeyView=p_g;var d_u,b_e=(d_u=ui.window.fb.alreadyPassViewUI,__extends(d_m,d_u),d_m.prototype.onAdded=function(){Mjy(this,Laya,e)},d_m.prototype.onTimer=function(){this.list.x=484;var e=DungeonModel.instance.getNextFb(DungeonType.Story),p_l=e[0],p_g=e[1];if(Config.fb_story[p_g]||(p_g=p_l),this._numValue<DungeonModel.instance.diffLevel-1){0!=p_l&&++this._numValue;var b_s=DungeonModel.instance.currFbId+1+this._numValue;0==p_l&&++this._numValue;var d_u=b_s%10,b_e=Math.floor(b_s%100/10),d_m=Math.floor(b_s/100)%10,d_w=Math.floor(b_s/1e3);this.unit_clip.index=d_u,this.decade_clip.index=b_e,this.hundreds_clip.index=d_m,this.thousand_clip.index=d_w,DungeonModel.instance.onePassLevelReward,this.num_box.x=b_s<10?this.bg.width/2-1.5*this.unit_clip.width:10<=b_s&&b_s<100?this.bg.width/2-this.unit_clip.width:100<=b_s&&b_s<1e3?this.bg.width/2-this.unit_clip.width/2:this.bg.width/2,this.decade_clip.visible=10<=b_s,this.hundreds_clip.visible=100<=b_s,this.thousand_clip.visible=1e3<=b_s;var f_t=Config.fb_dungeon[p_g];f_t=f_t||Config.fb_dungeon[p_l];var v_z=b_p.getRewardDatas(f_t.firstPassReward||f_t.passReward);this.list.array=v_z,Laya.Tween.to(this.list,{f_u:-484},100,null)}else Laya.Tween.clearAll(this.list),this.list.x=70},d_m.open=function(e){Kzd(e,UIM,d_m)},d_m.prototype.updateItem=function(e,p_l){Cmp(e,p_l)},d_m.prototype.onClickCloseBtn=function(){Axq(this)},d_m.prototype.onRemoved=function(){this.off(Laya.Event.CLICK,this,this.onClickCloseBtn),Laya.timer.clearAll(this),Laya.Tween.clearAll(this.list),this._numValue=0;var e=DungeonModel.instance.getNextFb(DungeonType.Story),p_l=e[0],p_g=e[1];Config.fb_story[p_g]||(p_g=p_l),LED.event(l_r.REFRESH_FB_LEVEL,[p_g])},d_m.prototype.close=function(){Oax(UIM,d_m)},d_m);function d_m(){var e=d_u.call(this)||this;return e._numValue=0,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.AlreadPassLevelView=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.rankAwardPageUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){this.itemDatalist=[],this.rank_reward_list.renderHandler=Laya.Handler.create(this,this.updateRank,null,!1);for(var e=1;e<=10;e++){var p_l=new x_reward_item;p_l.itemId=1e4*this.dataSource+1e3+e,this.itemDatalist.push(p_l)}this.rank_reward_list.array=this.itemDatalist},b_s.prototype.onRemove=function(){},b_s.prototype.updateRank=function(e,p_l){var p_g=e.getChildByName("rankSp");p_g=b_p.getRankSp(p_l+1,p_g);var b_s=e.getChildByName("itemlist"),d_u=1e4*this.dataSource.fbId+1e3+p_l+1;b_s.renderHandler=Laya.Handler.create(this,this.updateRewardItem,null,!1),b_s.array=b_p.getRewardDatas(Config.fb_stateboss_reward[d_u].reward)},b_s.open=function(e){Cft(e,UIM,b_s)},b_s.prototype.updateRewardItem=function(e,p_l){Iap(e,p_l)},b_s.prototype.close=function(){Onb(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.rank_reward_list.repeatY=10,e.rank_reward_list.vScrollBarSkin="",e.rank_reward_list.scrollBar.isVertical=!0,e.rank_reward_list.scrollBar.elasticBackTime=600,e.rank_reward_list.scrollBar.elasticDistance=200,e.closebtn.on(Laya.Event.CLICK,e,e.close),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.RankAwardView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.tixingshezhiUI,__extends(b_s,p_l),b_s.open=function(e){UIM.open(b_s,["bossFb.atlas"],{list:e},!1,!1)},b_s.prototype.onRemove=function(){Svh(this,Laya)},b_s.close=function(){Cxy(UIM,b_s)},b_s.prototype.onAdded=function(){Gvl(this,Laya)},b_s.prototype.onMouseClick=function(e){var p_l=e.target;switch(p_l.name){case"closeBtn":case"backBtn":b_s.close();break;case"remindChkBox":DungeonModel.instance.reqRemind(p_l.parent.dataSource.id,p_l.selected)}},b_s.prototype.updateItem=function(e,p_l){if(e){var p_g=e.dataSource,b_s=e.getChildByName("bossNameLab"),d_u=e.getChildByName("lvLab"),b_e=e.getChildByName("remindChkBox"),d_m=e.getChildByName("notOpenLab");b_s.text="",d_u.text="",b_e.visible=!1,d_m.visible=!0;var d_w=Config.fb_dungeon[p_g.id];if(d_w){b_s.text=Config.obj_monster[d_w.monster].name;var f_t=d_w.stateLv,v_z=d_w.level,d_h=!0;if(f_t){var r_t=StateModel.instance.getStateLv(),t_n=Config.state_state[f_t[0]];d_u.text=t_n.desc,(r_t<f_t[0]||r_t>f_t[1])&&(d_h=!1)}else if(v_z){var f_y=LgcM.ins.heroVo.level;d_u.text=v_z[0]+(j_x(2342)),(f_y<v_z[0]||f_y>v_z[1])&&(d_h=!1)}else d_u.text="";if(d_h){b_e.visible=!0;var p_q=DungeonModel.instance.getDungeonInfo(p_g.id);b_e.selected=!p_q||p_q.remind,d_m.visible=!1}else b_e.visible=!1,d_m.visible=!0}}},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.bossLst.vScrollBarSkin="",e.bossLst.scrollBar.isVertical=!0,e.bossLst.scrollBar.elasticBackTime=600,e.bossLst.scrollBar.elasticDistance=200,e.bossLst.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e}e.RemindSettingPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.fubenshibaiUI,__extends(b_s,p_l),b_s.open=function(e){UIM.open(b_s,["fbCommon.atlas"],{result:e},!1,!0,!0)},b_s.prototype.closeSelf=function(){Qzh(b_s,LED,l_r)},b_s.prototype.onAdded=function(){this.img_bg.source||(this.img_bg.skin=null,this.img_bg.skin="res/ui/fbCommon/zhandou_shibai_01.png"),LED.event(l_r.FB_LOSE);var p_l=UIM.instance.getWin(e.EquipSwapTipPanel);p_l&&(p_l.visible=!1),this.on(Laya.UIEvent.CLICK,this,this.onMouseClick),this._closePanelTime=SyncTime.serverTime+6e4;var p_g=this.dataSource.result,b_s=SyncTime.serverTime;Laya.timer.once(1e3*p_g.endTime-b_s,this,this.leaveFb,[!1],!0),Laya.timer.once(this._closePanelTime-b_s,this,this.closeSelf,null,!0),this.cdLab.text=Math.floor((this._closePanelTime-b_s)/1e3).toString()+(j_x(2081)),Laya.timer.loop(1e3,this,this.onTimer);var d_u=Config.fb_dungeon[p_g.fbId];this.getHelpBtn.visible=d_u.type===DungeonType.Story,this.leaveBtn.x=this.contentBox.width-this.leaveBtn.width>>1,d_u.type==DungeonType.Story&&(this.leaveBtn.x=this._srcLeaveBtnX),this.cdLab.x=this.leaveBtn.x+this.leaveBtn.width+10},b_s.close=function(){Oxk(UIM,b_s)},b_s.prototype.onTimer=function(){Kfa(SyncTime,this,j_x)},b_s.prototype.onRemove=function(){var p_l=UIM.instance.getWin(e.EquipSwapTipPanel);p_l&&(p_l.visible=!0),this.off(Laya.UIEvent.CLICK,this,this.onMouseClick),Laya.timer.clearAll(this)},b_s.prototype.leaveFb=function(e){void 0===e&&(e=!0),Laya.timer.clear(this,this.leaveFb),e&&b_s.close(),DungeonModel.instance.getFbConf()&&DungeonModel.instance.reqLeaveFb()},b_s.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"leaveBtn":this.leaveFb(),LED.event(l_r.FB_LOSE);break;case"getHelpBtn":var p_g=this.dataSource.result;e.HelpPanel.open(p_g.fbId);break;case"roleBtn":this.leaveFb(),b_p.registerAutoOpenPanel(e.RolePanel,-1);break;case"skillBtn":this.leaveFb(),b_p.registerAutoOpenPanel(e.SkillPanel,-1);break;case"talismanBtn":this.leaveFb(),b_p.registerAutoOpenPanel(e.TalismanPanel,-1);break;case"strengthBtn":this.leaveFb(),b_p.registerAutoOpenPanel(e.StrengthPanel,-1)}},b_s);function b_s(){var e=p_l.call(this)||this;return e._closePanelTime=0,e._srcLeaveBtnX=0,e._srcLeaveBtnX=e.leaveBtn.x,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.ResultLosePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.fubenshengliUI,__extends(b_s,p_l),b_s.open=function(e){b_s.panel||(b_s.panel=new b_s),b_s.panel.dataSource={result:e},UIM.instance.addToWinLayer(b_s.panel)},b_s.prototype.stateLableCenter=function(){Imc(this)},b_s.prototype.nextFb=function(){var e=this.dataSource.result.fbId+1,p_l=Config.fb_dungeon[e];p_l&&p_l.type===DungeonType.Pagoda&&(DungeonModel.instance.autoEnterFbId=e),this.leaveFb(),Laya.timer.clear(this,this.nextFb)},b_s.prototype.leaveFb=function(){Akj(Laya,this,b_s,LED,l_r)},b_s.prototype.onAdded=function(){this.marryFbBox.visible=!1,this.img_bg.source||(this.img_bg.skin=null,this.img_bg.skin="res/ui/fbCommon/zhandou_shengli_01.png"),this.on(Laya.UIEvent.CLICK,this,this.onMouseClick);var p_l=DungeonModel.instance.isPagoTaOneKey?-30:0;this.x=(Stage.width-this.width>>1)-p_l,this.y=p_l;var p_g=UIM.instance.getWin(e.EquipSwapTipPanel);p_g&&(p_g.visible=!1);var b_s=this.dataSource.result,d_u=Config.fb_dungeon[b_s.fbId],b_e=[];if(b_s.reward_item)for(var d_m=0,d_w=b_s.reward_item;d_m<d_w.length;d_m++){var f_t=d_w[d_m];(f_y=new ModuleItemVO).id=f_t.itemId,f_y.amount=f_t.num,f_y.bind=f_t.bind,b_e.push(f_y)}else{var v_z=DungeonModel.instance.dropList;if(v_z)for(var d_h=0,r_t=v_z;d_h<r_t.length;d_h++)f_t=r_t[d_h],(f_y=new ModuleItemVO).id=f_t[0],f_y.amount=f_t[1]||1,f_y.bind=f_t[2]||0,b_e.push(f_y)}if(d_u.type==DungeonType.GuildBoss)for(var t_n in Config.guild_guildBoss){var f_y;if((f_y=Config.guild_guildBoss[t_n]).fbId===b_s.fbId){b_e=b_p.getRewardDatas(f_y.reward);break}}if(b_e=b_e||[],this.rewardLst.array=b_e.sort((function(e,p_l){var p_g=Config.CItem(e.id);return Config.CItem(p_l.id).quality-p_g.quality})),this.nextBtn.visible=!1,this.takeBtn.x=this.contentBox.width-this.takeBtn.width>>1,this.cdLab.x=this.takeBtn.x+this.takeBtn.width+10,d_u.type===DungeonType.StateBoss||d_u.type===DungeonType.WildBoss){this.rankBox.visible=!0,this.plrNameBox.visible=!0,b_s.last_hit?this.plrNameLab.text=b_s.last_hit.name:this.plrNameBox.visible=!1;var p_q=DungeonModel.instance.getSelfTeamDmg();p_q&&0<p_q.rank?this.rankLab.text=Utils.$((j_x(573)+"{1}"+j_x(1511)),p_q.rank):this.rankLab.text=(j_x("206_1067_1077"))}else{if(this.rankBox.visible=!1,this.plrNameBox.visible=!1,d_u.type===DungeonType.Pagoda){var h_h=b_s.fbId+1,n_j=Config.fb_dungeon[h_h];n_j&&n_j.type===d_u.type&&(this.takeBtn.x=this._srcTakeBtnX,this.nextBtn.visible=!1,this.cdLab.x=this.nextBtn.x+this.nextBtn.width+10,this.takeBtn.x+=70,this.afterLabel.visible=!1,this.storycontent.text=(j_x("1595_1168_1331")+j_x("254_2402_1298")+j_x(1152)),this.storyIdLab.text=d_u.name)}if(d_u.type===DungeonType.State){this.tipStateLab.visible=!0,this.oldStateLab.visible=!0,this.tipStateLab2.text=(j_x("402_2142_33")+j_x("784_1012"));var j_l=d_u.id%(DungeonDefine.StateBegin-1),l_m=Config.state_state[j_l];if(this.oldStateLab.text=l_m.desc+(j_x("2308_2117")),this.newdStateLab.text=l_m.desc,Laya.timer.callLater(this,this.stateLableCenter),DungeonModel.instance.stateFbProps){var z_m="";0<DungeonModel.instance.stateFbProps.integrity&&(z_m+=(j_x("506_1973_2376")+"+")+DungeonModel.instance.stateFbProps.integrity+(j_x(932)+"\n")),0<DungeonModel.instance.stateFbProps.evil&&(z_m+=(j_x("147_1973_2376")+"+")+DungeonModel.instance.stateFbProps.evil+(j_x(932)+"\n")),0<DungeonModel.instance.stateFbProps.neutral&&(z_m+=(j_x("283_1190_2376")+"+")+DungeonModel.instance.stateFbProps.neutral+(j_x(932))),this.t_props.text=z_m}else this.t_props.text="";LED.on(l_r.SCENE_LOAD_OVER,this,this.openStatShengli)}else d_u.type===DungeonType.Story?(this.storyIdLab.text=d_u.name,this.storycontent.text=(j_x("1595_1168_1331")+j_x("254_456_763")+j_x("1672_835_573")),this.afterLabel.visible=!0,Laya.timer.once(100,this,(function(){this.afterLabel.x=this.storyIdLab.x+this.storyIdLab.width}))):d_u.type===DungeonType.Personal?DungeonModel.instance.isCrossGerenBoss=!0:d_u.type==DungeonType.Ascent||d_u.type==DungeonType.tianjieOpenBoss&&(this.tipStateLab.visible=!1,this.oldStateLab.visible=!1,this.tipStateLab2.text=(j_x("1595_1168_2217")+j_x("1738_402_2142")+j_x("48_383")),this.newdStateLab.text=d_u.name,Laya.timer.callLater(this,this.stateLableCenter))}this.contentBox.visible=d_u.type!==DungeonType.State&&d_u.type!==DungeonType.tianjieOpenBoss,this.stateBox.visible=d_u.type===DungeonType.State||d_u.type===DungeonType.tianjieOpenBoss,this.storyBox.visible=d_u.type===DungeonType.Story||d_u.type===DungeonType.Pagoda,this._time=Config.global[GlobalDefine.fb_shutdown_countdown].i_info,this.cdLab.text=this.cd2Lab.text=Utils.$(("{1}"+j_x(2081)),this._time),Laya.timer.loop(1e3,this,this.onTimer)},b_s.close=function(){Obc(UIM,b_s)},b_s.prototype.onRemove=function(){var p_l=UIM.instance.getWin(e.EquipSwapTipPanel);p_l&&(p_l.visible=!0),this.off(Laya.UIEvent.CLICK,this,this.onMouseClick),DungeonModel.instance.reqLeaveFb()},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"takeBtn":case"exitBtn":this.leaveFb();break;case"nextBtn":this.nextFb()}},b_s.prototype.onTimer=function(){this._time--,this.cdLab.text=this.cd2Lab.text=Utils.$(("{1}"+j_x(2081)),this._time),this._time<=0&&this.leaveFb()},b_s.prototype.openStatShengli=function(){Swu(e,this,LED,l_r)},b_s.prototype.updateItem=function(e,p_l){Edm(e,p_l,ItemBoxDefine)},b_s.prototype.TimerIsErro=function(){0<this.erroTime?--this.erroTime:this.erroTime=10,this.cdLab.text=this.cd2Lab.text=Utils.$(("{1}"+j_x(2081)),this.erroTime)},b_s.panel=null,b_s);function b_s(){var e=p_l.call(this)||this;return e._srcTakeBtnX=0,e.erroTime=10,e._srcTakeBtnX=e.takeBtn.x,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.rewardLst.vScrollBarSkin="",e.rewardLst.scrollBar.elasticBackTime=100,e.rewardLst.scrollBar.elasticDistance=200,e.rewardLst.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e}e.ResultWinPanel=p_g;var d_u,b_e=(d_u=ui.window.fb.state_shengjieUI,__extends(d_m,d_u),d_m.open=function(e){Laya.timer.once(500,this,(function(){UIM.open(d_m,["state.atlas","fbCommon.atlas"],{result:e},!1,!1,!1,!1,{container:"top"})}))},d_m.close=function(){Ceo(LED,l_r,UIM,d_m)},d_m.prototype.onAdded=function(){this.on(Laya.UIEvent.CLICK,this,this.onMouseClick),Resource.SoundManager.instance.playSoundById(14,!1);var e=this.dataSource.result,p_l=Config.fb_dungeon[e.fbId].id-DungeonDefine.StateBegin+1,p_g=Config.state_state[p_l];this.stateLab.text=p_g?p_g.desc:"",this._roleModel||(this._roleModel=new n_k,this.modelContainer.addChild(this._roleModel));var b_s=LgcM.ins.heroVo,d_u=Resource.ResManager.getDefaultPlayerAvatar(b_s.fashionClothes,b_s.entryId);this._roleModel.changeModel(d_u),this._roleModel.state(),p_g&&this._roleModel.showStateEfts(p_g.effect,150)},d_m.prototype.onMouseClick=function(e){"closeBtn"==e.target.name&&(d_m.close(),this.DispathStatePanle())},d_m.prototype.onRemove=function(){this.off(Laya.UIEvent.CLICK,this,this.onMouseClick),this._roleModel&&this._roleModel.clearRes()},d_m.prototype.DispathStatePanle=function(){this.dataSource&&(LED.event(l_r.STATE_LV_UP),e.StateUpPropertyTip.open(this.dataSource.result))},d_m.prototype.OpenStatePanel=function(){Utm(UIM,d_m,this)},d_m);function d_m(){var e=d_u.call(this)||this;return e._roleModel=null,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.modalSp.graphics.drawRect(0,0,Stage.width,Stage.height,"#000000"),e.modalSp.size(Stage.width,Stage.height),e.modalSp.alpha=.5,e}e.DuJieWinPanel=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.rewardBoss.RewardBossCellUI,__extends(b_s,p_l),Object.defineProperty(b_s.prototype,"renderData",{get:function(){return this._renderData},set:function(e){this._renderData=e,this.updateView()},enumerable:!0,configurable:!0}),b_s.prototype.updateView=function(){if(this._renderData){var e=RewardBossModel.instance.rewardBossVo,p_l=Config.fb_xuanshang[e.lastFbId],p_g=this._renderData.id,b_s=this.getChildByName("box"+this._renderData.floor);b_s&&(b_s.visible=!0),RewardBossModel.instance.getRewardBossListByState(this._renderData.state).length,p_l&&p_l.floor;var d_u=RewardBossModel.instance.getRewardBossStatus(this._renderData.state,this._renderData.floor),b_e=b_s.getChildByName("notCircle"+this._renderData.floor);b_e&&(b_e.visible=!(d_u==AscentCellStatus.OPEN));var d_m=b_s.getChildByName("passedIcon"+this._renderData.floor);d_m&&(d_m.visible=d_u==AscentCellStatus.PASS);var d_w=b_s.getChildByName("arrow"+this._renderData.floor);d_w&&(d_w.visible=d_u==AscentCellStatus.OPEN);var f_t=b_s.getChildByName("btn"+this._renderData.floor);f_t&&f_t.on(Laya.Event.CLICK,this,this.onClick);var v_z=b_s.getChildByName("xuanzhong"+this._renderData.floor);v_z&&(v_z.visible=d_u==AscentCellStatus.OPEN),d_u==AscentCellStatus.OPEN||d_u==AscentCellStatus.PASS&&p_g==RewardBossModel.justFbId&&(RewardBossModel.justFbId=0)}},b_s.prototype.onClick=function(){this._renderData&&this.showTeam(this._renderData.id)},b_s.prototype.showTeam=function(p_l){var p_g=TeamModel.instance.getTeamVO(TeamAimsType.RewardBossAni);p_g.targetFbId!=p_l&&p_g.isLeader&&RewardBossModel.instance.getRewardBossStatus(this._renderData.state,this._renderData.floor)==AscentCellStatus.OPEN&&TeamModel.instance.reqChangeTeamAims(TeamAimsType.RewardBossAni,p_l),e.TeamPanel.open(TeamAimsType.RewardBossAni,p_l)},b_s);function b_s(){return p_l.call(this)||this}e.RewardBossCell=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.rewardBoss.RewardBossPanelUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Udt(LED,l_r,this,RewardBossModel,Laya)},b_s.prototype.onRemoved=function(){Ioh(LED,l_r,this,Laya)},b_s.prototype.handleLeftRight=function(e,p_l){void 0===p_l&&(p_l=!1);var p_g=RewardBossModel.instance.maxState,b_s=RewardBossModel.instance.minState;if(!(e<b_s||p_g<e)){if(b_s==p_g)return this.leftBtn.disabled=!0,void(this.rightBtn.disabled=!0);b_s<e&&e<p_g?(this.leftBtn.disabled=!1,this.rightBtn.disabled=!1):e==b_s&&e<p_g?(this.leftBtn.disabled=!0,this.rightBtn.disabled=!1,this.rightBtn.mouseEnabled=!0):e==p_g&&b_s<e&&(this.leftBtn.disabled=!1,this.rightBtn.disabled=!0);var d_u=Config.state_state[e],b_e=d_u?d_u.desc:"";this.stateTxt.text=b_e,this.renderStateFloor(e),p_l&&(this._playing=!0,Laya.Tween.to(this.floorBox,{f_u:-this.floorBox.width-150},150,Laya.Ease.backOut,Laya.Handler.create(this,this.onTweenComplete,[!1,e])))}},b_s.prototype.onTimer=function(){Agi(RewardBossModel,this,Utils)},b_s.prototype.onTweenComplete=function(e,p_l){e?this._playing=!1:(this.floorBox.x=this.width+100,Laya.Tween.to(this.floorBox,{f_u:this._normalX},300,Laya.Ease.backOut,Laya.Handler.create(this,this.onTweenComplete,[!0,p_l])))},b_s.prototype.updateView=function(){if(""==RewardBossModel.instance.sendSource){var e=RewardBossModel.instance.rewardBossVo,p_l=LgcM.ins.heroVo.stateLv;0<e.lastFbId&&(p_l=Config.fb_xuanshang[e.lastFbId].state),this.handleLeftRight(p_l);var p_g=Config.global[GlobalDefine.rewardBoss_seek_count].i_info,b_s=Config.global[GlobalDefine.rewardBoss_help_count].i_info;this.seekHelpTxt.text=Utils.$("{1}/{2}",p_g-e.seekCount,p_g),this.helpTxt.text=Utils.$("{1}/{2}",b_s-e.helpCount,b_s)}},b_s.prototype.onClick=function(p_l){var p_g=p_l.target;if(p_g)switch(p_g.name){case"closeBtn":case"backBtn":b_s.close();break;case"leftBtn":if(this._playing)return;this.handleLeftRight(this._curRenderState-1,!0);break;case"rightBtn":if(this._playing)return;this.handleLeftRight(this._curRenderState+1,!0);break;case"helpBtn":e.AscentHelpPanel.open()}},b_s.prototype.renderStateFloor=function(e){this._isOpen=!1;var p_l=RewardBossModel.instance.getRewardBossListByState(e);if(this._curRenderState=e,p_l)for(var p_g=1;p_g<=p_l.length;p_g++){var b_s=this["item"+p_g];b_s&&(b_s.renderData=p_l[p_g-1]),RewardBossModel.instance.rewardBossVo;var d_u=p_l[p_g-1].id,b_e=(RewardBossModel.instance.getRewardBossListByState(p_l[p_g-1].state).length,RewardBossModel.instance.getRewardBossStatus(p_l[p_g-1].state,p_l[p_g-1].floor));if(b_e==AscentCellStatus.OPEN){var d_m=p_l[p_g-1].passReward,d_w=b_p.getRewardDatas(d_m);this.rewardList.array=d_w,this._isOpen=!0,this._isAllPass=!1;var f_t=Config.fb_dungeon[d_u].monster,v_z=Config.fb_dungeon[d_u].name,d_h=Config.obj_monster[f_t].name,r_t=Config.obj_monster[f_t].icon,t_n=Resource.ResUrl.getIconUrl(r_t);this.bossName.text=d_h,this.bossHeadImg.skin=t_n,this.fbName.text=v_z,this.desTxt.text=p_l[p_g-1].des,this.teamBtn.on(Laya.Event.CLICK,this,this.onClickTeamBtn,[d_u,e,p_l[p_g-1].floor])}else b_e==AscentCellStatus.PASS?(d_u==RewardBossModel.justFbId&&(RewardBossModel.justFbId=0),this._isAllPass=!0):this._isAllPass=!1}if(!this._isOpen){d_u=this._isAllPass?p_l[p_l.length-1].id:p_l[0].id,f_t=Config.fb_dungeon[d_u].monster,v_z=Config.fb_dungeon[d_u].name;var f_y=Config.obj_monster[f_t].name;r_t=Config.obj_monster[f_t].icon,t_n=Resource.ResUrl.getIconUrl(r_t),this.bossName.text=f_y,this.bossHeadImg.skin=t_n,this.fbName.text="",this._isAllPass?this.teamBtn.on(Laya.Event.CLICK,this,this.onClickTeamBtn,[1,1,1]):this.teamBtn.on(Laya.Event.CLICK,this,this.onClickTeamBtn,[0,0,0]),this.rewardList.array=[],this.desTxt.text=this._isAllPass?(j_x("1327_711_381")+j_x("843_1443_944")+j_x("1300_1514_1855")+j_x("1331_413")):(j_x("1327_711_381")+j_x("843_2462_1919")+j_x("48_383"))}},b_s.open=function(){Ixf(UIM,b_s)},b_s.prototype.renderList=function(e,p_l){e&&e.dataSource&&(e.isShowName=!1,e.setItemData(e.dataSource))},b_s.prototype.onClickTeamBtn=function(p_l,p_g,b_s){if(0!=p_l||0!=p_g||0!=b_s)if(1!=p_l||1!=p_g||1!=b_s){var d_u=TeamModel.instance.getTeamVO(TeamAimsType.RewardBossAni);d_u.targetFbId!=p_l&&d_u.isLeader&&RewardBossModel.instance.getRewardBossStatus(p_g,b_s)==AscentCellStatus.OPEN&&TeamModel.instance.reqChangeTeamAims(TeamAimsType.RewardBossAni,p_l),e.TeamPanel.open(TeamAimsType.RewardBossAni,p_l)}else b_p.broadcastNotice((j_x("1327_711_381")+j_x("843_1443_944")+j_x("1300_1514_1855")+j_x("1331_413")));else b_p.broadcastNotice((j_x("1327_711_381")+j_x("843_2462_1463")+j_x(1779)))},b_s.close=function(){Ghb(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g._playing=!1,p_g._isOpen=!1,p_g._isAllPass=!1,p_g._normalX=p_g.floorBox.x,p_g.rewardList.hScrollBarSkin="",p_g.rewardList.renderHandler=Laya.Handler.create(p_g,p_g.renderList,null,!1),p_g.rewardList.itemRender=e.ItemBox,p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemoved),p_g}e.RewardBossPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.drangonPlace.drangonDetalUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Akm(this,Laya,STBossControl,LED,l_r)},b_s.prototype.updateRankView=function(e){var p_l=STBossModel.ins;this.notNull.visible=!1,this.diTab.selectedIndex==e&&0==e?(this.gerenBox.visible=!0,this.serverBox.visible=!1):this.diTab.selectedIndex==e&&1==e&&(this.serverBox.visible=!0,this.gerenBox.visible=!1),0==e?this.gerenList.array=p_l.perlist.slice(0,10):this.serverList.array=p_l.serlist.slice(0,10)},b_s.prototype.renderRewardList=function(e,p_l){Kft(e,p_l)},b_s.prototype.timeLoop=function(){this.renderIconBox(),0<STBossModel.ins.lastTime?this.spaceTime.text=Utils.$("{1}{2}",(j_x("33_2456_1614")+j_x("2171_283")+""),Utils.formatTimeStr(STBossModel.ins.lastTime--)):this.spaceTime.text=""},b_s.prototype.onRemove=function(){Qub(this,Laya,LED,l_r)},b_s.prototype.renderRankList=function(e,p_l,p_g){var b_s=p_l.getChildByName("rankLab"),d_u=p_l.getChildByName("scoreLab"),b_e=p_l.getChildByName("contentLab"),d_m=p_l.dataSource;d_m&&(b_s.text=(p_g+1).toString(),d_u.text=d_m.damage.toString(),b_e.text=e==this.serverList?d_m.sid+(j_x(1998)):d_m.name)},b_s.open=function(e,p_l){UIM.open(b_s,["drangonPlace.atlas"],{fbId:e,type:p_l},!1,!1,!0)},b_s.prototype.onTabSelect=function(e,p_l){Ala(e,p_l,this)},b_s.prototype.renderIconBox=function(){var e=this.dataSource.fbId,p_l=this.dataSource.type,p_g=this.bossState,b_s=this.icon,d_u=this.bossName,b_e=this.curGrab,d_m=Config.fb_dungeon[e],d_w=STBossModel.ins.bossType[p_l];if(d_w&&d_m){var f_t=d_w.bossInfo[e],v_z=null;d_m&&(v_z=Config.obj_monster[d_m.monster],d_u.text=d_m.name);var d_h=d_w.recoverTime-SyncTime.serverTime/1e3;v_z&&Resource.ResManager.Instance.getImg(Resource.ResUrl.getIconUrl(v_z.icon),b_s),f_t?(b_e.visible=STBossModel.ins.curBoss==e&&1==f_t.state,1==f_t.state?(d_h=d_w.endTime-SyncTime.serverTime/1e3,p_g.text=Utils.formatTimeStr(d_h)+(j_x("1865_396_2426"))):d_w.recoverTime>SyncTime.serverTime/1e3&&(p_g.text=Utils.formatTimeStr(d_h)+(j_x("1865_155_1186")))):0<d_h&&(p_g.text=Utils.formatTimeStr(d_h)+(j_x("1865_155_1186")),b_e.visible=d_w.isActStart)}},b_s.prototype.updateView=function(){Oya(Config,this,STBossControl,STBossModel)},b_s.close=function(){Eqh(UIM,b_s)},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"rewardBtn":e.STBossRankPanel.open(this.dataSource.fbId);break;case"enterBtn":STBossControl.ins.canEnterFb(this.dataSource.fbId,this.dataSource.type,!0)}},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g.gerenList.renderHandler=Laya.Handler.create(p_g,p_g.renderRankList,[p_g.gerenList],!1),z_j.setListScroll(p_g.gerenList),p_g.serverList.renderHandler=Laya.Handler.create(p_g,p_g.renderRankList,[p_g.serverList],!1),z_j.setListScroll(p_g.serverList),z_j.setList(p_g.rewardList,p_g,p_g.renderRewardList),p_g.rewardList.itemRender=e.ItemBox,p_g._clipTab=new p_c(p_g.diTab),p_g}e.STBossEnterPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.drangonPlace.drangonTipsUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Wlr(this,Laya)},b_s.prototype.onRemoved=function(){Kar(this,Laya)},b_s.open=function(){Gyb(UIM,b_s)},b_s.prototype.onClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":b_s.close()}},b_s.close=function(){Isq(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.textPanel.vScrollBarSkin="",e}e.STBossHelpPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.crossboss_icon_viewUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Qfc(this,Laya)},b_s.prototype.onRemoved=function(){Gma(this,Laya)},b_s.prototype.onClick=function(){STBossModel.ins.isOpenState(!0)&&e.STBossMainPanel.open()},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e}e.STBossIcon=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.drangonPlace.drangonPlaceUI,__extends(b_s,p_l),b_s.open=function(){Mck(UIM,b_s)},b_s.prototype.onRemove=function(){Ait(this,Laya,LED,l_r,STBossModel)},b_s.prototype.listMouseMove=function(){if(1==this.listMoseDown&&this.list.visible){var e=this.listMoseMoveX,p_l=this.list.selectedIndex;if(!this.list.array)return;var p_g=this.list.array.length;if(p_g<2)return;var b_s=-1;this.stage.mouseX-e<=-10?0<p_l&&(b_s=p_l-1):10<=this.stage.mouseX-e&&p_l+1<p_g&&(b_s=p_l+1),0<=b_s&&b_s<p_g&&(this.currentState=this.list.array[b_s]),this.listMoseMoveX=0,this.listMoseDown=!1}},b_s.close=function(){Cor(UIM,b_s)},b_s.prototype.refreshView=function(e,p_l){if(null!=e){var p_g=p_l.dataSource;this.currentState==p_g&&(this.titleName.text=Config.state_state[this.currentState].desc+"Boss");var b_s=STBossModel.ins.bossType;if(this.currentState&&null!=this.currentState){b_s[1];for(var d_u=1;d_u<=4;d_u++){var b_e=STBossModel.ins.getSTBossIdByState(1,p_g,d_u-1);this.renderBossIcon(p_l,d_u,b_e,1)}for(d_u=5;d_u<=6;d_u++)b_e=STBossModel.ins.getSTBossIdByState(2,p_g,d_u-5),this.renderBossIcon(p_l,d_u,b_e,2)}}},b_s.prototype.listMouseDown=function(){Yhz(this)},b_s.prototype.onAdded=function(){Ifu(STBossControl,this,Laya,LED,l_r)},b_s.prototype.renderBossIcon=function(e,p_l,p_g,b_s){if(e){var d_u=e.getChildByName("item"+p_l);if(d_u){var b_e=d_u.getChildByName("bossDead"),d_m=d_u.getChildByName("timeLabel"),d_w=d_u.getChildByName("checkReward"),f_t=d_u.getChildByName("curGrab"),v_z=d_u.getChildByName("icon"),d_h=d_u.getChildByName("nameLab"),r_t=d_u.getChildByName("startBoss"),t_n=Config.fb_dungeon[p_g],f_y=STBossModel.ins.bossType[b_s];if(!f_y)return;if(t_n){var p_q=f_y.bossInfo[p_g];d_w.dataSource={id:p_g,type:b_s},d_w.on(Laya.Event.CLICK,this,this.checkClick);var h_h=null;t_n&&(h_h=Config.obj_monster[t_n.monster],d_h.text=t_n.name),h_h&&Resource.ResManager.Instance.getImg(Resource.ResUrl.getIconUrl(h_h.icon),v_z);var n_j=f_y.recoverTime-SyncTime.serverTime/1e3;p_q?(f_t.visible=STBossModel.ins.curBoss==p_g&&1==p_q.state,1==p_q.state?(n_j=f_y.endTime-SyncTime.serverTime/1e3,d_m.text=Utils.formatTimeStr6(n_j)+(j_x("1865_396_2426"))):f_y.recoverTime>SyncTime.serverTime/1e3&&(d_m.text=Utils.formatTimeStr6(n_j)+(j_x("1865_155_1186"))),r_t.visible=1==p_q.state,b_e.visible=1!=p_q.state):(f_t.visible=f_y.isActStart,r_t.visible=b_e.visible=!1,0<n_j&&(d_m.text=Utils.formatTimeStr6(n_j)+(j_x("1865_155_1186"))))}}}},b_s.prototype.onUpdateView=function(){this.updateChallengeTimes(),this.txtNot.visible=!this.isClick,this.currentState=STBossModel.ins.getMinChallengeBoss();var e=STBossModel.ins.getBossArray();if(0!=(this.list.array=e).length){this.list.mouseEnabled=!0;for(var p_l=0,p_g=0;p_g<e.length;p_g++)e[p_g]==this.currentState&&(p_l=p_g);this.list.selectedIndex=p_l,this.list.scrollTo(p_l)}},b_s.prototype.renderList=function(e,p_l){Kyp(e,p_l,this)},b_s.prototype.checkClick=function(p_l){var p_g=p_l.target;switch(p_g.name){case"checkReward":var b_s=p_g.dataSource;b_s&&e.STBossEnterPanel.open(b_s.id,b_s.type)}},b_s.prototype.onChangeState=function(p_l,p_g){var b_s,d_u=this.list.selectedIndex;p_g==e.pageState.ERRON&&(p_g=this.currentState>p_l?e.pageState.DWON:e.pageState.UP),b_s=p_g==e.pageState.UP?Math.min(this.list.length-1,d_u+1):Math.max(0,d_u-1),this.currentState!==p_l&&(this.currentState=p_l,this.list.tweenTo(b_s,200,Laya.Handler.create(this,this.onUpdateView)))},b_s.prototype.updateChallengeTimes=function(){Aif(this,STBossModel)},b_s.prototype.refershReq=function(e){var p_l=STBossModel.ins.bossType[e];p_l&&p_l.recoverTime-SyncTime.serverTime/1e3<=0&&STBossControl.ins.reqBossInfo(e)},b_s.prototype.timeLoop=function(){if(this.isClick){var e=this.list.getCell(this.list.selectedIndex);e&&this.refreshView(this.list.selectedIndex,e),0<STBossModel.ins.lastTime?this.spaceTime.text=Utils.$("{1}{2}",(j_x("33_2456_1614")+j_x("2171_283")+""),Utils.formatTimeStr(STBossModel.ins.lastTime--)):this.spaceTime.text="",this.refershReq(1),this.refershReq(2)}},b_s.prototype.onClick=function(p_l){var p_g=p_l.target,d_u=STBossModel.ins;switch(p_g.name){case"closeBtn":case"backBtn":b_s.close();break;case"addTimesBtn":if(!this.isClick)return;if(d_u.canBuyTimes(!0)){var b_e=Config.CItem(d_u.sTBossBuyTimesCfg()[0]);b_p.confirm(Utils.$((j_x("68_2032_1365")+j_x(1876)+"{1}*1"+j_x("437_223")+"1"+j_x("235_2235_83")+j_x("235_2348")+""),b_e.name),(function(){STBossControl.ins.reqBuyTimeInfo()}))}break;case"helpBtn":e.STBossHelpPanel.open();break;case"godEquipShopBtn":e.ShopAllPanel.open(ShopConstant.type_godEquip)}},Object.defineProperty(b_s.prototype,"isClick",{get:function(){return STBossModel.ins.isSevBack},enumerable:!0,configurable:!0}),b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),z_j.setList(e.list,e,e.renderList),e.list.hScrollBarSkin="",e}e.STBossMainPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.drangonPlace.dragonRankItemUI,__extends(b_s,p_l),b_s.prototype.setData=function(e,p_l,p_g){var b_s,d_u=STBossModel.ins;if(b_p.fbId==e){var b_e=void 0;0==p_l?(b_e=DungeonModel.instance.getDmgRank())&&p_g<b_e.length&&(b_s=b_e[p_g]):(b_e=DungeonModel.instance.getSerDmgRank())&&p_g<b_e.length&&(b_s=b_e[p_g])}else 0==p_l?d_u.perlist&&p_g<d_u.perlist.length&&(b_s=d_u.perlist[p_g]):d_u.serlist&&p_g<d_u.serlist.length&&(b_s=d_u.serlist[p_g]);this.rankNum.text=Utils.$((j_x(573)+"{1}"+j_x(1511)),Utils.formaNum(p_g+1)),null==b_s?(this.nulllab.visible=!0,this.rankBox.visible=!1):(this.nulllab.visible=!1,this.rankBox.visible=!0,this.rankName.text=0==p_l?b_s.name:b_s.sid+(j_x(1998)),this.scoreNum.text=b_s.damage.toString()),this.rewardList.array=d_u.getRewardList(3,d_u.rankListCfg(e,p_g+1,p_l))},b_s.prototype.renderItem=function(e,p_l){Oqs(e,p_l)},b_s);function b_s(){var p_g=p_l.call(this)||this;return z_j.setList(p_g.rewardList,p_g,p_g.renderItem),p_g.rewardList.itemRender=e.ItemBox,p_g}e.STBossRankItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.drangonPlace.drangonRankUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Mzq(this,LED,l_r,Laya)},b_s.open=function(e){UIM.open(b_s,null,{fbId:e},!1,!1,!0)},b_s.prototype.updateView=function(){Uga(this)},b_s.prototype.renderListItem=function(e,p_l){e&&e.setData(this.dataSource.fbId,this._type,p_l)},b_s.prototype.onRemoved=function(){Avx(this,Laya,LED,l_r)},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close()}},b_s.prototype.onTabSelect=function(e,p_l){Ytf(e,p_l,STBossModel,this)},b_s.close=function(){Ghe(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemoved),z_j.setList(p_g.list,p_g,p_g.renderListItem),z_j.setListScroll(p_g.list),p_g.list.itemRender=e.STBossRankItem,p_g._clipTab=new p_c(p_g.diTab),p_g.listArr=new Array;for(var b_s=1;b_s<11;b_s++)p_g.listArr.push(b_s);return p_g}e.STBossRankPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.SouthSkyGate.southSkyGateAttackResultUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Cvr(this)},b_s.prototype.onRemove=function(){Okg(e)},b_s.open=function(e){UIM.open(b_s,null,{data:e},!1,!1,!0,!0)},b_s.prototype.setDefault=function(){Gfq(this)},b_s.prototype.updateUI=function(){var e=this.dataSource.data;this.sortieText.text=e.winScore+"",e.winNum>e.lossNum?this.win.visible=!0:e.winNum==e.lossNum?this.ping.visible=!0:e.winNum<e.lossNum&&(this.lose.visible=!0)},b_s.close=function(){Wrn(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.SouthSkyGateAttackResult=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.SouthSkyGate.southSkyGateAttackTipUI,__extends(b_s,p_l),b_s.prototype.onCheckBtnClick=function(){this.dataSource.type==BossTpyeTip.SouthSkyGateTip?SouthSkyGateControl.ins.reqGuardingNTInfo():this.dataSource.type==BossTpyeTip.ChristmasKill&&(e.ChristmasKillPanel.open(),b_s.close()),this.isOk=!0},b_s.prototype.onAdded=function(){this.x=Stage.width-this.width-70,this.y=Stage.height-this.height-70,this.isOk=!1,this.contentText.text=this.dataSource.str,this.checkBtn.on(Laya.Event.CLICK,this,this.onCheckBtnClick),this.closeBtn.on(Laya.Event.CLICK,this,this.onCloseBtnClick),this.dataSource.type==BossTpyeTip.SouthSkyGateTip?(this.checkBtn.label=(j_x("5_2450_765")+j_x(2048)),LED.on(l_r.GUARDING_NANTIANMEN_INFO,this,this.openTip)):this.dataSource.type==BossTpyeTip.ChristmasKill&&(this.checkBtn.label=(j_x("711_2417_48")+j_x(383)))},b_s.open=function(e,p_l){UIM.open(b_s,null,{j_g:e,type:p_l},!1,!1)},b_s.prototype.onCloseBtnClick=function(){Yvo(b_s)},b_s.prototype.openTip=function(){this.isOk&&(e.SouthSkyGateRecord.open(),this.onCloseBtnClick())},b_s.prototype.onRemove=function(){Cky(this,Laya,LED,l_r)},b_s.close=function(){Kpr(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.SouthSkyGateAttackTip=p_g}(UI=UI||{}),function(e){e[e.SouthSkyGateTip=1]="SouthSkyGateTip",e[e.ChristmasKill=2]="ChristmasKill"}(BossTpyeTip=BossTpyeTip||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.SouthSkyGate.southSkyGateawardUI,__extends(d_u,p_l),d_u.prototype.updateGoodsList=function(e,p_l){Awt(e,p_l)},d_u.open=function(){Wvo(UIM,d_u)},d_u.prototype.onTabSelect=function(e){console.log((j_x("1896_2090_571")+"ontabSelect"+j_x(2228)+""));var p_l=[];if(1==e){var p_g=this.personReward();for(var b_s in p_g){var d_u=(d_m=p_g[b_s]).beginIdx-d_m.endIdx==0?Utils.$((j_x(573)+"{1}"+j_x(1511)),d_m.beginIdx):Utils.$((j_x(573)+"{1}-{2}"+j_x(1511)),d_m.beginIdx,d_m.endIdx);p_l.push({rank:d_u,reward:d_m.reward})}}else{var b_e=this.serverReward();for(var b_s in b_e){var d_m;d_u=(d_m=b_e[b_s]).beginIdx-d_m.endIdx==0?Utils.$((j_x(573)+"{1}"+j_x(1511)),d_m.beginIdx):Utils.$((j_x(573)+"{1}-{2}"+j_x(1511)),d_m.beginIdx,d_m.endIdx),p_l.push({rank:d_u,reward:d_m.reward})}}this.goodsList.array=p_l},d_u.prototype.onRemove=function(){Uuz(this,Laya)},d_u.prototype.serverReward=function(){var e=[],p_l=Config.activity_serverReward;for(var p_g in p_l)1009===p_l[p_g].rankType&&e.push(p_l[p_g]);return e.sort((function(e,p_l){return e.beginIdx-p_l.beginIdx}))},d_u.prototype.updateUI=function(){var e=this.tab.selectedIndex;(this.tab.selectedIndex=0)==e&&this.onTabSelect(this.tab.selectedIndex)},d_u.prototype.onAdded=function(){Cur(this,Laya)},d_u.prototype.onCloseBtnClick=function(){Euf(d_u)},d_u.prototype.personReward=function(){var e=[],p_l=Config.activity_rankReward;for(var p_g in p_l)1009===p_l[p_g].rankType&&e.push(p_l[p_g]);return e.sort((function(e,p_l){return e.beginIdx-p_l.beginIdx}))},d_u.close=function(){Caq(UIM,d_u)},d_u);function d_u(){var b_s=p_l.call(this)||this;return b_s.on(Laya.Event.ADDED,b_s,b_s.onAdded),b_s.on(Laya.Event.REMOVED,b_s,b_s.onRemove),b_s.goodsList.itemRender=e.BossComeRewardCell,b_s.goodsList.renderHandler=p_g.create(b_s,b_s.updateGoodsList,null,!1),b_s.goodsList.vScrollBarSkin="",b_s.goodsList.scrollBar.elasticBackTime=200,b_s.goodsList.scrollBar.elasticDistance=50,b_s.goodsList.array=null,b_s.tab.selectHandler=Laya.Handler.create(b_s,b_s.onTabSelect,null,!1),b_s}e.SouthSkyGateaward=b_s}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.SouthSkyGate.southSkyGateBattleUI,__extends(d_u,p_l),d_u.prototype.updateClonedList2=function(e,p_l){var p_g=e.getChildByName("icon"),b_s=e.getChildByName("shade"),d_u=e.dataSource,b_e=Config.clone_clone[d_u];p_g.skin=Resource.ResUrl.getIconUrl(b_e.headImg);var d_m=MirrorSelfModel.ins.getSelfInfoMap[b_e.id];d_m&&d_m.isActive&&(b_s.visible=!1)},d_u.prototype.isActiveList=function(){var e=[];for(var p_l in this._cloneList)this._isActive[this._cloneList[p_l]]&&e.push(this._cloneList[p_l]);return e},d_u.prototype.onAdded=function(){Qkw(this,Laya,SouthSkyGateControl,LED,l_r)},d_u.prototype.onEnterClick=function(){Azc(SouthSkyGateControl,this,d_u)},d_u.open=function(e){Goy(e,UIM,d_u)},d_u.prototype.selectClonedList2=function(e){if(-1<e){var p_l=this.clonedList2.getItem(e),p_g=Config.clone_clone[p_l],b_s=MirrorSelfModel.ins.getSelfInfoMap[p_g.id];if(b_s&&b_s.isActive)if(this._cloneList2Index=e,null==this._cloneList2IndexId)this._cloneList2IndexId=p_l;else{this.changeClone(this._cloneList2IndexId,p_l);var d_u=this.isActiveList();SouthSkyGateControl.ins.reqGuardingNTChangeFormat(d_u),this.clonedList2.array=this._cloneList,this.clonedList2.selectedIndex=-1,this._cloneList2IndexId=null,this._cloneList2Index=null}else(this._cloneList2IndexId=null)==this._cloneList2Index?this.clonedList2.selectedIndex=-1:this.clonedList2.selectedIndex=this._cloneList2Index,b_p.broadcastNotice((j_x("2224_1920_206")+j_x("1048_1745")))}},d_u.prototype.updateClones=function(e){console.log(e),e.cloneIds;var p_l={},p_g=[];for(var b_s in e.cloneIds)p_l[e.cloneIds[b_s]]=!0;var d_u=MirrorSelfModel.ins.getCloneCfg();for(var b_s in d_u)p_l[d_u[b_s].id]||p_g.push(d_u[b_s].id);var b_e=e.cloneIds.concat(p_g);this._isActive=p_l,this._cloneList=b_e,this.clonedList2.array=b_e},d_u.prototype.changeClone=function(e,p_l){var p_g,b_s,d_u;for(var b_e in this._cloneList)this._cloneList[b_e]==e&&(p_g=Number(b_e)),this._cloneList[b_e]==p_l&&(b_s=Number(b_e));d_u=this._cloneList[p_g],this._cloneList[p_g]=this._cloneList[b_s],this._cloneList[b_s]=d_u},d_u.prototype.onCloseBtnClick=function(){Coo(d_u)},d_u.prototype.onRemove=function(){Scn(this,Laya,LED,l_r)},d_u.close=function(){Gqj(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e._cloneList2IndexId=null,e._cloneList2Index=null,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.clonedList2.selectEnable=!0,e.clonedList2.renderHandler=p_g.create(e,e.updateClonedList2,null,!1),e.clonedList2.selectHandler=p_g.create(e,e.selectClonedList2,null,!1),e.clonedList2.array=null,e}e.SouthSkyGateBattle=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.SouthSkyGate.southSkyGateBossSkillUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Kaz(this)},b_s.open=function(e){UIM.open(b_s,null,{skillId:e},!1,!1,!0,!0)},b_s.prototype.updateUI=function(){var e=this.dataSource.skillId,p_l=Config.skill_skill[e];this.nameText.text=p_l.name,this.icon.skin=Resource.ResUrl.getIconUrl(p_l.icon),this.explainHtml.innerHTML=p_l.desc},b_s.prototype.onRemove=function(){},b_s.close=function(){Olr(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),z_j.setHtml(e.explainHtml,22,"#f0ecd8",10,"left"),e}e.SouthSkyGateBossSkill=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.SouthSkyGate.southSkyGateChallengeListUI,__extends(d_u,p_l),d_u.prototype.updateChallengeList=function(e,p_l){var p_g=e.getChildByName("s_name"),b_s=e.getChildByName("t_name"),d_u=e.getChildByName("t_score"),b_e=e.getChildByName("t_rank"),d_m=e.getChildByName("c_rank"),d_w=e.getChildByName("enterBtn");d_w.on(Laya.Event.CLICK,this,this.onEnterBtnClick);var f_t=e.dataSource;d_w.dataSource=f_t,p_g.text=f_t.getServerId()+(j_x(1998)),f_t.getRankIndex()<4?(d_m.visible=!0,b_e.visible=!1,d_m.index=p_l):(d_m.visible=!1,b_e.visible=!0),b_e.text=f_t.getRankIndex()+"",d_u.text=f_t.getValue()+"",b_s.text=f_t.getPlayName()},d_u.prototype.onEnterBtnClick=function(p_l){if(Math.floor(SyncTime.serverTime/1e3)>=SouthSkyGateModel.ins.attackRemainTime){var p_g=p_l.target.dataSource,b_s=Config.global[3024].i_info-SouthSkyGateModel.ins.attackTimes,d_u=BagModel.instance.getItemCountByItemID(230004,BagTypeDefine.BAG_TYPE_ITEM);0<b_s||0<d_u?e.SouthSkyGateBattle.open(p_g.getPlayerId()):b_p.checkConsume([[230004,1]],!0)}else b_p.broadcastNotice((j_x("2319_1835_1614")+j_x("2171_283")))},d_u.prototype.onCloseBtnClick=function(){Gou(d_u)},d_u.prototype.updataeListUI=function(){var e;for(var p_l in RankModel.instance.rankDirection_KF)if(1009==RankModel.instance.rankDirection_KF[p_l].getRankType()){e=RankModel.instance.rankDirection_KF[p_l];break}var p_g=e.getItems(),b_s=[];for(var p_l in p_g)p_g[p_l].getServerId()!=b_p.config.mergSerId&&b_s.push(p_g[p_l]);this.rankingText.text=e.getOwnIndex()+"",this.valueText.text=e.getOwnValue()+"",this.challengeTimeText.color="#008931";var d_u=Config.global[3024].i_info-SouthSkyGateModel.ins.attackTimes;if(0<d_u)this.challengeTimeText.text=d_u+"/"+Config.global[3024].i_info;else{var b_e=Config.item_material[230004],d_m=BagModel.instance.getItemCountByItemID(b_e.id,BagTypeDefine.BAG_TYPE_ITEM);0<d_m?this.challengeTimeText.text=b_e.name+" "+d_m+"/1":(this.challengeTimeText.color="#ef2b2b",this.challengeTimeText.text=b_e.name+d_m+"/1")}this.challengeList.array=b_s,this.t_null.visible=!0,0<this.challengeList.array.length&&(this.t_null.visible=!1)},d_u.open=function(){Uid(UIM,d_u)},d_u.prototype.onRemove=function(){Qvc(this,Laya,LED,l_r)},d_u.prototype.onAdded=function(){Agn(this,Laya,LED,l_r,RankModel)},d_u.prototype.updateAttack=function(p_l){Wfg(p_l,SouthSkyGateControl,e)},d_u.close=function(){Mhx(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.challengeList.renderHandler=p_g.create(e,e.updateChallengeList,null,!1),e.challengeList.array=null,e}e.SouthSkyGateChallengeList=b_s}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.SouthSkyGate.southSkyGateFormationUI,__extends(d_u,p_l),Object.defineProperty(d_u.prototype,"cloneListIndex",{set:function(e){this._cloneListIndex=null==e?-1:e},enumerable:!0,configurable:!0}),d_u.prototype.updateClonedList=function(e,p_l){var p_g=e.getChildByName("icon"),b_s=e.getChildByName("shade"),d_u=e.getChildByName("playImg");d_u.visible=!1,this.clonedList.selectedIndex==p_l&&(d_u.visible=!0);var b_e=e.dataSource;p_g.skin=Resource.ResUrl.getIconUrl(b_e.headImg);var d_m=MirrorSelfModel.ins.getSelfInfoMap[b_e.id];d_m&&d_m.isActive&&(b_s.visible=!1)},d_u.prototype.isActiveList=function(){var e=[];for(var p_l in this._cloneList)this._isActive[this._cloneList[p_l]]&&e.push(this._cloneList[p_l]);return e},d_u.prototype.onCloseBtnClick=function(){Yrb(d_u)},d_u.prototype.selectClonedList2=function(e){if(-1<e){var p_l=this.clonedList2.getItem(e),p_g=Config.clone_clone[p_l],b_s=MirrorSelfModel.ins.getSelfInfoMap[p_g.id];if(b_s&&b_s.isActive)if(this._cloneList2Index=e,null==this._cloneList2IndexId)this._cloneList2IndexId=p_l;else{this.changeClone(this._cloneList2IndexId,p_l);var d_u=this.isActiveList();SouthSkyGateControl.ins.reqGuardingNTChangeFormat(d_u),this.clonedList2.array=this._cloneList,this.clonedList2.selectedIndex=-1,this._cloneList2IndexId=null,this._cloneList2Index=null}else(this._cloneList2IndexId=null)==this._cloneList2Index?this.clonedList2.selectedIndex=-1:this.clonedList2.selectedIndex=this._cloneList2Index,b_p.broadcastNotice((j_x("2224_1920_206")+j_x("1048_1745")))}},d_u.prototype.updateClones=function(e){console.log(e),e.cloneIds;var p_l={},p_g=[];for(var b_s in e.cloneIds)p_l[e.cloneIds[b_s]]=!0;var d_u=MirrorSelfModel.ins.getCloneCfg();for(var b_s in d_u)p_l[d_u[b_s].id]||p_g.push(d_u[b_s].id);var b_e=e.cloneIds.concat(p_g);this._isActive=p_l,this._cloneList=b_e,this.clonedList2.array=b_e},d_u.prototype.updateUI=function(){Wfd(this,MirrorSelfModel)},d_u.prototype.onRemove=function(){Yta(this,Laya,LED,l_r)},d_u.prototype.updateClone=function(e){for(var p_l,p_g=MirrorSelfModel.ins.getCloneCfg(),b_s=0;b_s<p_g.length;b_s++)if(e.cloneId==p_g[b_s].id){p_l=b_s;break}this.cloneListIndex=p_l,this.clonedList.selectedIndex=p_l},d_u.prototype.updateClonedList2=function(e,p_l){var p_g=e.getChildByName("icon"),b_s=e.getChildByName("shade"),d_u=e.dataSource,b_e=Config.clone_clone[d_u];p_g.skin=Resource.ResUrl.getIconUrl(b_e.headImg);var d_m=MirrorSelfModel.ins.getSelfInfoMap[b_e.id];d_m&&d_m.isActive&&(b_s.visible=!1)},d_u.prototype.selectClonedList=function(e){if(-1<e&&this._cloneListIndex!=e){var p_l=this.clonedList.getItem(e),p_g=MirrorSelfModel.ins.getSelfInfoMap[p_l.id];p_g&&p_g.isActive?(this.cloneListIndex=e,SouthSkyGateControl.ins.reqSetGNTClone(p_l.id),SouthSkyGateModel.ins.cloneId=p_g.id):(this.clonedList.selectedIndex=this._cloneListIndex,b_p.broadcastNotice((j_x("2224_1920_206")+j_x("1048_1745"))))}},d_u.open=function(){Inj(UIM,d_u)},d_u.prototype.changeClone=function(e,p_l){var p_g,b_s,d_u;for(var b_e in this._cloneList)this._cloneList[b_e]==e&&(p_g=Number(b_e)),this._cloneList[b_e]==p_l&&(b_s=Number(b_e));d_u=this._cloneList[p_g],this._cloneList[p_g]=this._cloneList[b_s],this._cloneList[b_s]=d_u},d_u.prototype.onAdded=function(){Ckh(this,Laya,LED,l_r,SouthSkyGateControl)},d_u.close=function(){Ulb(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e._cloneListIndex=null,e._cloneList2IndexId=null,e._cloneList2Index=null,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.clonedList.selectEnable=!0,e.clonedList.renderHandler=p_g.create(e,e.updateClonedList,null,!1),e.clonedList.selectHandler=p_g.create(e,e.selectClonedList,null,!1),e.clonedList.array=null,e.clonedList2.selectEnable=!0,e.clonedList2.renderHandler=p_g.create(e,e.updateClonedList2,null,!1),e.clonedList2.selectHandler=p_g.create(e,e.selectClonedList2,null,!1),e.clonedList2.array=null,e}e.SouthSkyGateFormation=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.SouthSkyGate.southSkyGateHelpTipUI,__extends(b_s,p_l),b_s.prototype.onCloseBtnClick=function(){Odp(b_s)},b_s.prototype.onAdded=function(){Kru(this,Laya)},b_s.open=function(){Ojq(UIM,b_s)},b_s.prototype.onRemove=function(){Gbp(this,Laya)},b_s.close=function(){Ipn(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.SouthSkyGateHelpTip=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.SouthSkyGate.southSkyGatePanelUI,__extends(d_u,p_l),d_u.prototype.updateRankingList=function(e,p_l){var p_g=e.getChildByName("serverRank"),b_s=e.getChildByName("serverName"),d_u=e.getChildByName("playName"),b_e=e.getChildByName("integral"),d_m=e.dataSource;p_g.text=d_m.rank+"",b_s.text=d_m.sid+(j_x(1998)),d_u.text=d_m.name,b_e.text=d_m.dmg+""},d_u.prototype.setTimeCount=function(e,p_l,p_g){if(UIM.instance.isOpenWin(d_u)){if(0<e){if(this.actionTimeText.visible=!0,this.actionTimeText.text=Utils.formatTimeStr(e),this.actionTimeText2.visible=!0,this.actionTimeText2.text=Utils.formatTimeStr(e),1==this._isActive){var b_s=e/(p_g-p_l),b_e=0==Math.floor(100*b_s)?1:Math.floor(100*b_s);this.HPText.text=Math.floor(b_e)+"%",this.HPBar.value=b_s}Laya.timer.once(1e3,this,this.setTimeCount,[e-1,p_l,p_g])}else this.actionTimeText.visible=!1,this.actionTimeText.text="",this.actionTimeText2.visible=!1,this.actionTimeText2.text="",SouthSkyGateControl.ins.reqGuardingNTInfo();var d_m=Math.floor(SyncTime.serverTime/1e3);if(this._isRwdCd)if(d_m>SouthSkyGateModel.ins.rwdRemainTime)this.updateTimes();else{var d_w=SouthSkyGateModel.ins.rwdRemainTime-d_m;this.enterTime.text=(j_x("48_383_1614")+j_x(2171)+"")+Utils.formatTimeStr5(d_w)}SouthSkyGateModel.ins.isAttackCd&&(d_m>SouthSkyGateModel.ins.attackRemainTime?this.updateTimes():(d_w=SouthSkyGateModel.ins.attackRemainTime-d_m,this.plunderTime.text=(j_x("2319_1835_1614")+j_x(2171)+"")+Utils.formatTimeStr5(d_w)))}},d_u.prototype.onAwardBtnClick=function(){Sek(e)},d_u.prototype.onBattleArrayClick=function(){Ief(e)},d_u.prototype.selectSkillList=function(p_l,p_g){if(p_l.type===Laya.Event.MOUSE_DOWN){var b_s=this.skillList.array[p_g];e.SouthSkyGateBossSkill.open(b_s)}},d_u.prototype.updateTimes=function(){var e=Math.floor(SyncTime.serverTime/1e3);if(e>=SouthSkyGateModel.ins.rwdRemainTime){var p_l=Config.global[3022].i_info-SouthSkyGateModel.ins.rwdTimes;if(this.enterTime.color="#008931",0<p_l)this.enterTime.text=(j_x("48_383_235")+j_x(2348)+"")+p_l+"/"+Config.global[3022].i_info;else{var p_g=Config.item_material[this._goodsId[0]];0<(b_s=BagModel.instance.getItemCountByItemID(p_g.id,BagTypeDefine.BAG_TYPE_ITEM))?this.enterTime.text=p_g.name+" "+b_s+"/1":(this.enterTime.color="#ef2b2b",this.enterTime.text=p_g.name+b_s+"/1")}this._isRwdCd=!1}else this.enterTime.color="#c92828",this._isRwdCd=!0;if(e>=SouthSkyGateModel.ins.attackRemainTime){this.plunderTime.color="#008931";var b_s,d_u=Config.global[3024].i_info-SouthSkyGateModel.ins.attackTimes;0<d_u?this.plunderTime.text=(j_x("2319_1835_235")+j_x(2348)+"")+d_u+"/"+Config.global[3024].i_info:(p_g=Config.item_material[this._goodsId[1]],0<(b_s=BagModel.instance.getItemCountByItemID(p_g.id,BagTypeDefine.BAG_TYPE_ITEM))?this.plunderTime.text=p_g.name+" "+b_s+"/1":(this.plunderTime.color="#ef2b2b",this.plunderTime.text=p_g.name+b_s+"/1")),SouthSkyGateModel.ins.isAttackCd=!1}else this.plunderTime.color="#c92828",SouthSkyGateModel.ins.isAttackCd=!0},d_u.prototype.onRemove=function(){Sya(this,Laya,LED,l_r)},d_u.prototype.onEnterBtnCLick=function(){if(SouthSkyGateControl.ins.isActivityOpen())if(this._isRwdCd)b_p.broadcastNotice((j_x("48_383_1614")+j_x("2171_283")));else if(0==SouthSkyGateModel.ins.rwdTimes||0==SouthSkyGateModel.ins.cloneId)e.SouthSkyGateSortie.open();else{var p_l=Config.global[3022].i_info-SouthSkyGateModel.ins.rwdTimes,p_g=BagModel.instance.getItemCountByItemID(this._goodsId[0],BagTypeDefine.BAG_TYPE_ITEM);0<p_l||0<p_g?(b_p.registerAutoOpenPanel(d_u,b_p.mapID,(function(){d_u.open()})),DungeonModel.instance.reqEnterFb(SouthSkyGateModel.ins.fbId,0,SouthSkyGateModel.ins.cloneId)):b_p.checkConsume([[this._goodsId[0],1]],!0)}else b_p.broadcastNotice((j_x("1796_1878_206")+j_x("155_2086")))},d_u.prototype.updateBossModel=function(){var e=Config.fb_dungeon[SouthSkyGateModel.ins.fbId],p_l=Config.obj_monster[e.monster];this._actorShowModel.changeModel(p_l.avatar),this._actorShowModel.stand(3),this.bossName.text=p_l.name,this.skillList.array=p_l.normalSkill},d_u.prototype.onRecordClick=function(){Gds(e)},d_u.open=function(){CrossModel.ins.isSmallCross?(CrossModel.ins.isSmallCross,UIM.open(d_u,["bosscome.atlas","southSkyGate.atlas"],null,!1,!1,!0)):b_p.broadcastNotice((j_x("1796_1878_206")+j_x("155_1186")))},d_u.prototype.updateTipList=function(e,p_l){var p_g=e.getChildByName("t_name"),b_s=e.getChildByName("t_name2"),d_u=e.getChildByName("t_score"),b_e=e.getChildByName("label1"),d_m=e.getChildByName("label2"),d_w=e.dataSource;p_g.text="S"+d_w.attackSid+d_w.attackName,b_s.text="S"+d_w.beAttackSid+d_w.beAttackName,0==d_w.score?(d_u.color="#d8dcec",d_u.text=(j_x("1971_1896_30")+j_x("782_1573_531")),b_e.text=(j_x("1011_1061")+","),d_m.text=""):(d_u.color="#ef2b2b",d_u.text=d_w.score+"",b_e.text=(j_x("2292_943_743")),d_m.text=(j_x("514_2224")))},d_u.prototype.updateSkillList=function(e,p_l){var p_g=e.dataSource,b_s=Config.skill_skill[p_g],d_u=e.getChildByName("icon"),b_e=e.getChildByName("name");d_u.skin=Resource.ResUrl.getIconUrl(b_s.icon),b_e.text=b_s.name},d_u.prototype.onCloseBtnClick=function(){Qbr(d_u)},d_u.prototype.onPlunderBtnClick=function(){Gmf(e)},d_u.prototype.updateUI=function(){Yrv(this,SouthSkyGateModel)},d_u.prototype.onRankingBtnClick=function(){Uqw(e)},d_u.prototype.onAdded=function(){Yyr(this,Laya,LED,l_r,SouthSkyGateControl)},d_u.prototype.updateTextUI=function(){Oqm(this,SouthSkyGateModel,j_x)},d_u.prototype.gameTimeCount=function(){var e;for(var p_l in Config.activity_activity){var p_g=Config.activity_activity[p_l];if(p_g.type==ActivityTypeDefine.CS_guardingNanTianMen){e=p_g;break}}if(e){var b_s=Config.Utils.parseActivityStartTime(e),d_u=Config.Utils.parseActivityEndTime(e),b_e=Math.floor(SyncTime.serverTime/1e3),d_m=void 0;b_s<=b_e&&b_e<=d_u?(d_m=d_u,this._isActive=1,this.isActive.visible=!0,this.isNotActive.visible=!1):(this._isActive=0,d_m=b_e<d_u?b_s:Config.Utils.nextActTime(e,b_s),this.HPText.text="100%",this.HPBar.value=1,this.isActive.visible=!1,this.isNotActive.visible=!0),d_m-=b_e,this.setTimeCount(d_m,b_s,d_u),this.actionStartText.text=this._activeString[this._isActive]}},d_u.prototype.onHelpBtnClick=function(){Kvf(e)},d_u.close=function(){Qad(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e._activeString=[(j_x("1796_1878_155")+j_x("1186_810_867")+j_x(1702)+""),(j_x("1796_1878_1111")+j_x("1902_1702_2460")+"")],e._goodsId=[230003,230004],e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.rankingList.selectEnable=!0,e.rankingList.renderHandler=p_g.create(e,e.updateRankingList,null,!1),e.rankingList.array=null,e.tipList.selectEnable=!0,e.tipList.renderHandler=p_g.create(e,e.updateTipList,null,!1),e.tipList.array=null,e.skillList.selectEnable=!0,e.skillList.renderHandler=p_g.create(e,e.updateSkillList,null,!1),e.skillList.mouseHandler=p_g.create(e,e.selectSkillList,null,!1),e.skillList.array=null,e._actorShowModel=new n_k,e.bossBody.addChild(e._actorShowModel),e}e.SouthSkyGatePanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.SouthSkyGate.southSkyGatePlunderUI,__extends(d_u,p_l),Object.defineProperty(d_u.prototype,"playListIndex",{get:function(){return this._playListIndex},set:function(e){this._playListIndex=e},enumerable:!0,configurable:!0}),Object.defineProperty(d_u.prototype,"isNotNeglect",{get:function(){return this._isNotNeglect},enumerable:!0,configurable:!0}),d_u.prototype.updatePlunder=function(e,p_l){Wav(e,p_l,this)},d_u.prototype.onAdded=function(){Auu(this,Laya)},d_u.prototype.updateHead=function(){Ezb(this,LgcM,Resource)},d_u.open=function(e){UIM.open(d_u,["southSkyGate.atlas"],{data:e},!1,!1,!0)},d_u.prototype.onEnterBtnClick=function(e){if(console.log((j_x("932_1835"))),this._isNotNeglect){this._isNotNeglect=!1;var p_l=this.dataSource.data;this.plunderList.array=p_l.results}},d_u.prototype.updateUI=function(){Agp(this)},d_u.prototype.updatePlundList=function(){var p_l=this.dataSource.data;this.playListIndex==p_l.results.length?(Laya.timer.once(500,this,(function(){e.SouthSkyGateAttackResult.open(p_l)})),RankModel.instance.reqGetRank_KF(1009,1)):this.plunderList.array=p_l.results},d_u.prototype.replyUI=function(){Uxx(this)},d_u.prototype.onRemove=function(){Qua(this,Laya)},d_u.close=function(){Sfv(UIM,d_u)},d_u);function d_u(){var b_s=p_l.call(this)||this;return b_s._isNotNeglect=!0,b_s._playListIndex=0,b_s.on(Laya.Event.ADDED,b_s,b_s.onAdded),b_s.on(Laya.Event.REMOVED,b_s,b_s.onRemove),b_s.plunderList.itemRender=e.SouthSkyGetePlunderItem,b_s.plunderList.renderHandler=p_g.create(b_s,b_s.updatePlunder,null,!1),b_s.plunderList.array=null,b_s}e.SouthSkyGatePlunder=b_s}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.SouthSkyGate.southSkyGateRankingUI,__extends(d_u,p_l),d_u.prototype.updateRankingList=function(e,p_l){var p_g=e.getChildByName("s_name"),b_s=e.getChildByName("s_score"),d_u=e.getChildByName("t_rank"),b_e=e.getChildByName("t_name"),d_m=e.getChildByName("t_score"),d_w=e.getChildByName("c_rank"),f_t=e.dataSource;p_g.text=f_t.getServerId()+(j_x(1998)),f_t.getRankIndex()<4?(d_w.visible=!0,d_u.visible=!1,d_w.index=p_l):(d_w.visible=!1,d_u.visible=!0),d_u.text=f_t.getRankIndex()+"",0==this.tab.selectedIndex?(b_s.visible=!0,b_e.visible=!1,d_m.visible=!1,b_s.text=f_t.getValue()+""):(b_s.visible=!1,b_e.visible=!0,d_m.visible=!0,d_m.text=f_t.getValue()+"",b_e.text=f_t.getPlayName())},d_u.prototype.updateUI=function(){var e=this.tab.selectedIndex;(this.tab.selectedIndex=0)==e&&this.onSelectTab(this.tab.selectedIndex)},d_u.prototype.onRemove=function(){Gjj(this,Laya,LED,l_r)},d_u.prototype.onCloseBtnClick=function(){Wvb(d_u)},d_u.prototype.onAdded=function(){Wns(this,Laya,LED,l_r)},d_u.prototype.updataeListUI=function(){var e,p_l=this._rankingId[this.tab.selectedIndex];for(var p_g in RankModel.instance.rankDirection_KF)if(RankModel.instance.rankDirection_KF[p_g].getRankType()==p_l){e=RankModel.instance.rankDirection_KF[p_g];break}this.s_rankingText.text=e.getOwnIndex()+"",this.s_scoreText.text=e.getOwnValue()+"",this.t_rankingText.text=e.getOwnIndex()+"",this.t_scoreText.text=e.getOwnValue()+"",this.rankingList.array=e.getItems()},d_u.prototype.setStypeHeadandTail=function(e){0==e?(this.headStyle1.visible=!0,this.headStyle2.visible=!1,this.tailStyle1.visible=!0,this.tailStyle2.visible=!1):1==e&&(this.headStyle1.visible=!1,this.headStyle2.visible=!0,this.tailStyle1.visible=!1,this.tailStyle2.visible=!0)},d_u.prototype.onSelectTab=function(e){var p_l;this.rankingList.array=null,0==e?(p_l=0,this.titleClip.index=0,RankModel.instance.reqGetRank_KF(1010,1)):1==e?(p_l=1,this.titleClip.index=1,RankModel.instance.reqGetRank_KF(1009,1)):2==e&&(p_l=1,this.titleClip.index=2,RankModel.instance.reqGetRank_KF(1011,1)),this.setStypeHeadandTail(p_l)},d_u.open=function(){Kuy(UIM,d_u)},d_u.close=function(){Yaj(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e._rankingId=[1010,1009,1011],e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.rankingList.selectEnable=!0,e.rankingList.renderHandler=p_g.create(e,e.updateRankingList,null,!1),e.rankingList.array=null,e.tab.selectHandler=p_g.create(e,e.onSelectTab,null,!1),e}e.SouthSkyGateRanking=b_s}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.SouthSkyGate.southSkyGateRecordUI,__extends(d_u,p_l),d_u.prototype.updateRecordList=function(e,p_l){var p_g=e.getChildByName("nameTxt"),b_s=e.getChildByName("timeTxt"),d_u=e.getChildByName("scoreTxt"),b_e=e.getChildByName("descTxt"),d_m=e.getChildByName("sumScoreText"),d_w=e.getChildByName("attackBtn"),f_t=e.dataSource;p_g.text="S"+f_t.targetSid+f_t.targetName,d_m.text=(j_x("514_2224")+"")+f_t.targetScore;var v_z=Math.floor(SyncTime.serverTime/1e3-f_t.time),d_h=Math.floor(v_z/86400);if(b_s.text=0<d_h?d_h+(j_x("2308_711")):Utils.formatTimeStr2(v_z)+(j_x(711)),d_w.visible=!0,1==this.tab.selectedIndex){d_w.visible=!1,d_u.text=Utils.$((j_x("1653_383_281")+j_x(1590)+""+j_x("352_2221")+"+{1}"+j_x("514_2224")),f_t.changedScore);var r_t="";f_t.winNum>f_t.lossNum?(r_t=(j_x("352_2221_712")+j_x(1835)+"{1},{2}:{3}"+j_x("383_1045_1653")+j_x(886)+","+j_x("402_2142_2292")+j_x("943_514_2224")+"{4}"),b_e.text=Utils.$(r_t,f_t.targetName,f_t.winNum,f_t.lossNum,f_t.changedScore)):f_t.winNum==f_t.lossNum?(r_t=(j_x("352_2221_712")+j_x(1835)+"{1},{2}:{3}"+j_x("557_197_1653")+j_x(886)+","+j_x("402_2142_2292")+j_x("943_514_2224")+"{4}"),b_e.text=Utils.$(r_t,f_t.targetName,f_t.winNum,f_t.lossNum,f_t.changedScore)):f_t.winNum<f_t.lossNum&&(r_t=(j_x("352_2221_712")+j_x(1835)+"{1},{2}:{3}"+j_x("830_1061_1653")+j_x(886)+","+j_x("1953_420_1953")+j_x(1616)),b_e.text=Utils.$(r_t,f_t.targetName,f_t.winNum,f_t.lossNum))}else{var t_n;t_n=0==f_t.changedScore?"-"+f_t.changedScore:f_t.changedScore,d_u.text=Utils.$((j_x("1653_383_281")+j_x(1590)+""+j_x("352_2221")+"{1}"+j_x("514_2224")),t_n),r_t="",f_t.winNum>f_t.lossNum?(r_t=("{1}"+j_x("712_1835_352")+j_x(2221)+",{2}:{3}"+j_x("352_2221_741")+j_x("1650_1011_1061")+","+j_x("1629_2292_943")+j_x("514_2224")+"{4}"),b_e.text=Utils.$(r_t,f_t.targetName,f_t.winNum,f_t.lossNum,f_t.changedScore)):f_t.winNum==f_t.lossNum?(r_t=("{1}"+j_x("712_1835_352")+j_x(2221)+",{2}:{3}"+j_x("325_402_197")+j_x(886)+","+j_x("1364_2462_1233")+j_x("1629_2292_943")+j_x("514_2224")+"{4}"),b_e.text=Utils.$(r_t,f_t.targetName,f_t.winNum,f_t.lossNum,f_t.changedScore)):f_t.winNum<f_t.lossNum&&(r_t=("{1}"+j_x("712_1835_352")+j_x(2221)+",{2}:{3}"+j_x("352_2221_741")+j_x("1650_402_2142")+","+j_x("1650_521_743")+j_x("514_2224")),b_e.text=Utils.$(r_t,f_t.targetName,f_t.winNum,f_t.lossNum)),d_w.dataSource=f_t,d_w.on(Laya.Event.CLICK,this,this.onEnterBtnClick)}},d_u.open=function(){Ijx(UIM,d_u)},d_u.prototype.onCloseBtnClick=function(){Sem(d_u)},d_u.prototype.updateAttackRecord=function(e){LED.off(l_r.GUARDING_NANTIANMEN_ATTACK_RECORD,this,this.updateAttackRecord);var p_l=e.records;p_l&&p_l.sort((function(e,p_l){return p_l.time-e.time})),this.recordList.array=p_l,this.updateTNullUI(e.records)},d_u.prototype.onSelectTab=function(e){1==e?(this.t_null.text=(j_x("2287_814_2319")+j_x("1835_765_2048")),LED.on(l_r.GUARDING_NANTIANMEN_ATTACK_RECORD,this,this.updateAttackRecord),SouthSkyGateControl.ins.reqGuardingNTAttackRecord()):0==e&&(this.t_null.text=(j_x("2287_814_741")+j_x("1650_765_2048")),LED.on(l_r.GUARDING_NANTIANMEN_DEFENSE_RECORD,this,this.updateDefenseRecord),SouthSkyGateControl.ins.reqGuardingNTDefenseRecord())},d_u.prototype.onAdded=function(){Knz(this,Laya,LED,l_r)},d_u.prototype.updateAttack=function(p_l){Arv(p_l,SouthSkyGateControl,e)},d_u.prototype.onRemove=function(){Yya(this,Laya,LED,l_r)},d_u.prototype.updateDefenseRecord=function(e){LED.off(l_r.GUARDING_NANTIANMEN_DEFENSE_RECORD,this,this.updateDefenseRecord);var p_l=e.records;p_l&&p_l.sort((function(e,p_l){return p_l.time-e.time})),this.recordList.array=p_l,this.updateTNullUI(e.records)},d_u.prototype.onEnterBtnClick=function(p_l){if(Math.floor(SyncTime.serverTime/1e3)>=SouthSkyGateModel.ins.attackRemainTime){var p_g=p_l.target.dataSource,b_s=Config.global[3024].i_info-SouthSkyGateModel.ins.attackTimes,d_u=BagModel.instance.getItemCountByItemID(230004,BagTypeDefine.BAG_TYPE_ITEM);0<b_s||0<d_u?e.SouthSkyGateBattle.open(p_g.targetId):b_p.checkConsume([[230004,1]],!0)}else b_p.broadcastNotice((j_x("2319_1835_1614")+j_x("2171_283")))},d_u.prototype.updateTNullUI=function(e){e&&0<e.length?this.t_null.visible=!1:this.t_null.visible=!0},d_u.prototype.updateUI=function(){var e=this.tab.selectedIndex;(this.tab.selectedIndex=0)==e&&this.onSelectTab(this.tab.selectedIndex)},d_u.close=function(){Ikj(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.recordList.selectEnable=!0,e.recordList.renderHandler=p_g.create(e,e.updateRecordList,null,!1),e.recordList.array=null,e.tab.selectHandler=p_g.create(e,e.onSelectTab,null,!1),e}e.SouthSkyGateRecord=b_s}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.SouthSkyGate.southSkyGateSortieUI,__extends(d_u,p_l),d_u.prototype.updateSortieList=function(e,p_l){var p_g=e.getChildByName("icon"),b_s=e.getChildByName("shade"),d_u=e.getChildByName("playImg");d_u.visible=!1,this.sortieList.selectedIndex==p_l&&(d_u.visible=!0);var b_e=e.dataSource;p_g.skin=Resource.ResUrl.getIconUrl(b_e.headImg);var d_m=MirrorSelfModel.ins.getSelfInfoMap[b_e.id];d_m&&d_m.isActive&&(b_s.visible=!1)},d_u.prototype.onEnterBtnClick=function(){var e=this.sortieList.selectedIndex;if(-1!=e){var p_l=this.sortieList.getItem(e),p_g=MirrorSelfModel.ins.getSelfInfoMap[p_l.id];p_g&&p_g.isActive?DungeonModel.instance.reqEnterFb(SouthSkyGateModel.ins.fbId,0,p_g.id):b_p.broadcastNotice((j_x("2224_1920_206")+j_x("1048_1745")))}},d_u.prototype.onCloseBtnClick=function(){Qkd(d_u)},d_u.prototype.onRemove=function(){Iso(this,Laya)},d_u.prototype.onAdded=function(){Afm(this,Laya)},d_u.open=function(){Arl(UIM,d_u)},d_u.prototype.updateUI=function(){Ibi(this,MirrorSelfModel)},d_u.prototype.selectSortieList=function(e){if(-1<e){var p_l=this.sortieList.selectedItem;this.sortieList.selection,this.sortieList.selection;var p_g=MirrorSelfModel.ins.getSelfInfoMap[p_l.id];p_g&&p_g.isActive||(b_p.broadcastNotice((j_x("2224_1920_206")+j_x("1048_1745"))),this.sortieList.selectedIndex=-1)}},d_u.close=function(){Waj(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.sortieList.selectEnable=!0,e.sortieList.selectHandler=p_g.create(e,e.selectSortieList,null,!1),e.sortieList.renderHandler=p_g.create(e,e.updateSortieList,null,!1),e.sortieList.array=null,e}e.SouthSkyGateSortie=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.SouthSkyGate.southSkyGetePlunderItemUI,__extends(b_s,p_l),b_s.prototype.replyXYRS=function(){Gah(this)},b_s.prototype.playAnimationUI=function(){Que(this)},b_s.prototype.updatePlay1=function(){var e=this.dataSource,p_l=Config.clone_clone[e.myCloneId];this.play1.visible=!0,this.playHead1.skin=Resource.ResUrl.getIconUrl(p_l.headImg)},b_s.prototype.stopUltimately=function(){Wbc(this)},b_s.prototype.stopAnimation2=function(){Mng(this)},b_s.prototype.openCrashClipPlay=function(){Uiz(this,Laya)},b_s.prototype.stopCc=function(){Ecb(this,Laya)},b_s.prototype.stopAnimation3=function(){Okd(this)},b_s.prototype.stopCrashClip=function(){Yms(this)},b_s.prototype.stopAnimation1=function(){Qqm(this)},b_s.prototype.openAni1Play1=function(){Akl(this,Laya)},b_s.prototype.stop2=function(){Qct(this,Laya)},b_s.prototype.stopAll=function(){Yjv(this)},b_s.prototype.replyUI=function(){Aye(this)},b_s.prototype.updateAni23=function(){var e=this.dataSource;1==e.result?(this.ani2.on(Laya.Event.COMPLETE,this,this.stopAnimation2),this.ani2.play(0,!1)):0==e.result&&(this.ani3.on(Laya.Event.COMPLETE,this,this.stopAnimation3),this.ani3.play(0,!1))},b_s.prototype.updateItem=function(e,p_l){if(e>=p_l.playListIndex){this.replyUI(),this._southSky=p_l;var p_g=this.dataSource;0==p_g.myCloneId?(this.updatePlay2(),p_l.playListIndex==e&&this.stopUltimately()):0==p_g.targetCloneId?(this.updatePlay1(),p_l.playListIndex==e&&this.stopUltimately()):0!=p_g.myCloneId&&0!=p_g.targetCloneId&&(this.updatePlay1(),this.updatePlay2(),p_l.playListIndex==e&&(p_l.isNotNeglect?this.playAnimationUI():(this.stopAll(),this.stopUltimately())))}},b_s.prototype.stop1=function(){Ody(this,Laya)},b_s.prototype.stop3=function(){Eit(this,Laya)},b_s.prototype.updatePlay2=function(){var e=this.dataSource,p_l=Config.clone_clone[e.targetCloneId];this.play2.visible=!0,this.playHead2.skin=Resource.ResUrl.getIconUrl(p_l.headImg)},b_s);function b_s(){var e=p_l.call(this)||this;return e._play1xy=[],e._play2xy=[],e._play1S=[],e._play2S=[],e._play1xy[0]=e.play1.x,e._play1xy[1]=e.play1.y,e._play2xy[0]=e.play2.x,e._play2xy[1]=e.play1.y,e._play1R=e.play1.rotation,e._play2R=e.play2.rotation,e._play1S[0]=e.play1.scaleX,e._play1S[1]=e.play1.scaleY,e._play2S[0]=e.play2.scaleX,e._play2S[1]=e.play2.scaleY,e}e.SouthSkyGetePlunderItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.zhuanshengbossUI,__extends(b_s,p_l),b_s.open=function(){Cyg(UIM,b_s)},b_s.prototype.showRoleModel=function(e,p_l){if(p_l&&""!=p_l){var p_g=e===this.bossSp1?this._roleModel1:this._roleModel2;p_g||(p_g=new n_k,e===this.bossSp1?this._roleModel1=p_g:this._roleModel2=p_g,e.addChild(p_g)),p_g.changeModel(p_l),p_g.stand()}},b_s.prototype.onTweenComplete=function(){Ufe(this)},b_s.close=function(){Ais(UIM,b_s)},b_s.prototype.updateMoveBtn=function(){var e=Config.fb_dungeon[this._curCnf.id-1],p_l=Config.fb_dungeon[this._curCnf.id+1];this.leftBtn.visible=e&&e.type===DungeonType.StateBoss,this.rightBtn.visible=p_l&&p_l.type===DungeonType.StateBoss},b_s.prototype.onAdded=function(){this.on(Laya.UIEvent.CLICK,this,this.onMouseClick),LED.on(l_r.FB_STATEBOSS_DMG_RANK_UPDATE,this,this.onDmgRankUpdate),LED.on(l_r.FB_STATE_BOSS_LIST,this,this.onBossList),this._curCnf=DungeonModel.instance.getStateBossCurConf();var e=Config.obj_monster[this._curCnf.monster];e&&this.showRoleModel(this._centerSp,e.avatar),this.nameLab.text=e.name,this.updateRewardsView(this._curCnf),this.rankLst.array=[],DungeonModel.instance.reqStateBossDmgRank(this._curCnf.id),this.updateMoveBtn(),this.updateChallengeView(),DungeonModel.instance.reqBossLst(DungeonType.StateBoss)},b_s.prototype.onRemove=function(){this.off(Laya.UIEvent.CLICK,this,this.onMouseClick),LED.off(l_r.FB_STATEBOSS_DMG_RANK_UPDATE,this,this.onDmgRankUpdate),LED.off(l_r.FB_STATE_BOSS_LIST,this,this.onBossList),this.removeRoleModel(),Laya.timer.clearAll(this),this._roleModel1&&this._roleModel1.clearRes(),this._roleModel2&&this._roleModel2.clearRes()},b_s.prototype.onDmgRankUpdate=function(e){Ugc(e,this)},b_s.prototype.updateItem=function(e,p_l){var p_g=e.getChildByName("nameLab"),b_s=e.dataSource;p_g.text=String(p_l+1)+". "+b_s.name,b_s.team&&(p_g.text+=(j_x("2046_2413_1869")))},b_s.prototype.onTimer=function(e){var p_l=e-Math.floor(SyncTime.serverTime/1e3);p_l<=0?(Laya.timer.clear(this,this.onTimer),this.recoverLab.visible=!1,this.challengeBtn.visible=!0,this.challengeRpImg.visible=DungeonModel.instance.canEnterStateBoss()):this.recoverLab.text=Utils.$(this._tmpTxt,Utils.formatTimeStr(p_l))},b_s.prototype.moveBossSp=function(e){if(!this._isMoveBoss){var p_l=this.getOtherMonsterSp();p_l.x=this._centerSp.x+Math.abs(this.bossSp1.x-this.bossSp2.x)*e;var p_g=Config.fb_dungeon[this._curCnf.id+e];if(p_g){var b_s=Config.obj_monster[p_g.monster];this.showRoleModel(p_l,b_s.avatar);var d_u=this._centerSp.x-p_l.x;Laya.Tween.to(this._centerSp,{f_u:this._centerSp.x+d_u},500,Laya.Ease.backOut,Laya.Handler.create(this,this.onTweenComplete)),Laya.Tween.to(p_l,{f_u:p_l.x+d_u},500,Laya.Ease.backOut),this._centerSp=p_l,this._curCnf=p_g,this._isMoveBoss=!0,this.updateChallengeView(),this.updateRewardsView(p_g);var b_e=Config.obj_monster[p_g.monster];this.nameLab.text=b_e.name,this.rankLst.array=[],DungeonModel.instance.reqStateBossDmgRank(this._curCnf.id)}}},b_s.prototype.getOtherMonsterSp=function(){return this._centerSp===this.bossSp1?this.bossSp2:this.bossSp1},b_s.prototype.updateRewardsView=function(e){for(var p_l=b_p.getRewardDatas(e.passReward),p_g=(p_l.length<this._itemBoxes.length?p_l.length:this._itemBoxes.length,0);p_g<this._itemBoxes.length;++p_g){var b_s=this._itemBoxes[p_g];p_l[p_g]?b_s.setItemData(p_l[p_g],ItemBoxDefine.MODULE_ITEM,!0):b_s.setItemData(null,ItemBoxDefine.MODULE_ITEM)}},b_s.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"tipBtn":e.StateBossRankPanel.open(DungeonType.StateBoss,this._curCnf.id,this.rankLst.array);break;case"leftBtn":this.moveBossSp(-1);break;case"rightBtn":this.moveBossSp(1);break;case"challengeBtn":b_p.reqEnterFb(this._curCnf.id,b_s,b_p.mapID)}},b_s.prototype.onBossList=function(e){Gwh(e,this)},b_s.prototype.updateChallengeView=function(){var e=DungeonModel.instance.getNearestStateBoss(this._curCnf.id),p_l=e[0],p_g=e[1];!p_g&&p_l?(this.recoverLab.visible=!1,this.challengeBtn.visible=!0,this.challengeRpImg.visible=DungeonModel.instance.canEnterStateBoss()):(this.recoverLab.visible=!0,this.challengeBtn.visible=!1,Laya.timer.clear(this,this.onTimer),Laya.timer.loop(1e3,this,this.onTimer,[p_g]),this.onTimer(p_g))},b_s.prototype.removeRoleModel=function(){this._roleModel1&&(this._roleModel1.dispose(),this._roleModel1.removeSelf(),this._roleModel1=null),this._roleModel2&&(this._roleModel2.dispose(),this._roleModel2.removeSelf(),this._roleModel2=null)},b_s);function b_s(){var p_g=p_l.call(this)||this;p_g._centerSp=null,p_g._itemBoxes=null,p_g._curCnf=null,p_g._isMoveBoss=!1,p_g._tmpTxt=p_g.recoverLab.text,p_g._centerSp=p_g.bossSp1,p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g.rankLst.renderHandler=Laya.Handler.create(p_g,p_g.updateItem,null,!1),p_g._itemBoxes=[];for(var b_s=0,d_u=[p_g.reward1Box,p_g.reward2Box,p_g.reward3Box,p_g.reward4Box,p_g.reward5Box];b_s<d_u.length;b_s++){var b_e=d_u[b_s],d_m=new e.ItemBox;d_m.isShowName=!1,d_m.isShowNum=!0,d_m.isShowTick=!1,b_e.addChild(d_m),p_g._itemBoxes.push(d_m)}return p_g}e.StateBossPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.zhuanshengpaihangUI,__extends(b_s,p_l),b_s.open=function(e,p_l,p_g){UIM.open(b_s,["zudui.atlas","bossZS.atlas","bossFb.atlas"],{type:e,fbId:p_l,rankLst:p_g},!1,!1,!0)},b_s.prototype.onAdded=function(){this.on(Laya.Event.CLICK,this,this.onMouseClick);var e=this.getRank();this.rewardLst.array=e;for(var p_l=-1,p_g=0,b_s=0;b_s<e.length&&e[b_s];++b_s){if(e[b_s].pid===b_p.playerId){p_l=b_s+1,p_g=e[b_s].damage;break}if(e[b_s].members){for(var d_u=!1,b_e=0,d_m=e[b_s].members;b_e<d_m.length;b_e++)if(d_m[b_e]===b_p.playerId){p_l=b_s+1,p_g=e[b_s].damage,d_u=!0;break}if(d_u)break}}0<p_l?(this.myRankLab.text=String(p_l),this.myDmgLab.text=String(p_g)):(this.myRankLab.text=(j_x("206_1067_1077")),this.myDmgLab.text=(j_x("206_1067_1077")))},b_s.close=function(){Mvy(UIM,b_s)},b_s.prototype.onMouseClick=function(p_l){var p_g=p_l.target;switch(p_g.name){case"closeBtn":this.closeSelf();break;case"awardpreview":p_g.parent.getChildByName("dmgLab"),e.RankAwardView.open(this.dataSource)}},b_s.prototype.onRemove=function(){Cjv(this,Laya)},b_s.prototype.closeSelf=function(){Kzh(b_s)},b_s.prototype.updateItem=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("nameLab"),d_u=e.getChildByName("dmgLab");e.getChildByName("rankLab").text=p_l+1+"",d_u.dataSource=p_l+1,p_g?(b_s.text=p_g.name,d_u.text=String(p_g.damage),p_g.team&&(b_s.text+=(j_x("2046_2413_1869")))):(b_s.text=(j_x("518_425_192")+j_x(1427)),d_u.text="")},b_s.prototype.getRank=function(){return Eyy(this)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.rewardLst.vScrollBarSkin="",e.rewardLst.scrollBar.isVertical=!0,e.rewardLst.scrollBar.elasticBackTime=600,e.rewardLst.scrollBar.elasticDistance=200,e.rewardLst.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e}e.StateBossRankPanel=p_g;var d_u,b_e=(d_u=ui.window.fb.zhuanshengjiangliUI,__extends(d_m,d_u),d_m.open=function(e,p_l){UIM.open(d_m,["zudui.atlas","bossZS.atlas"],{fbId:e,rank:p_l},!1,!1,!0)},d_m.prototype.onAdded=function(){this.on(Laya.Event.CLICK,this,this.onMouseClick);var p_l=this.dataSource,p_g=p_l.fbId,b_s=p_l.rank,d_u=1e4*p_g+1e3+b_s,b_e=Config.fb_stateboss_reward[d_u];if(b_e)for(var d_m=b_p.getRewardDatas(b_e.reward),d_w=[this.reward1Box,this.reward2Box,this.reward3Box],f_t=0;f_t<d_w.length;++f_t){var v_z=d_w[f_t].getChildByName("itemBox");v_z||((v_z=new e.ItemBox).name="itemBox",v_z.isShowName=!1,v_z.isShowNum=!1,v_z.isShowTick=!1,d_w[f_t].addChild(v_z)),v_z.setItemData(d_m[f_t],ItemBoxDefine.MODULE_ITEM,!0)}this.rankLab.text=(j_x("2434_1511_1117")+j_x(1012))+b_s+(j_x("1163_192_1174")+j_x(2111))},d_m.prototype.onRemove=function(){Ogn(this,Laya)},d_m.close=function(){Mwa(UIM,d_m)},d_m.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":d_m.close()}},d_m);function d_m(){var e=d_u.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.StateBossRewardPanel=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.stateBossResultViewUI,__extends(b_s,p_l),b_s.open=function(e){Aqv(e,UIM,b_s)},b_s.prototype.onAdded=function(){var e=this.dataSource;if(e){this.plrName.text=e.last_hit?e.last_hit.name:(j_x(814));var p_l=DungeonModel.instance.getSelfTeamDmg();this.rankLab.text=p_l&&p_l.rank?Utils.$((j_x(573)+"{1}"+j_x(1511)),p_l.rank):(j_x("206_1067_1077"));var p_g=Config.fb_dungeon[e.fbId],b_s=p_g.type==DungeonType.TreaureB||p_g.type==DungeonType.TreaureM;if(this.reTitle.text=b_s?(j_x("859_119_716")+""):(j_x("1081_1865_1737")+j_x(1835)+""),b_s){var d_u=p_l.damage?p_l.damage.damage:0;this.plrName.text=d_u.toString()}if(b_s)this.list.array=STBossModel.ins.getSelfRankRewardInFb(p_l.rank);else if(e.result){var b_e=[];for(var d_m in e.reward_item){var d_w=new ModuleItemVO;d_w.id=e.reward_item[d_m].itemId,d_w.amount=e.reward_item[d_m].num,b_e.push(d_w)}this.list.array=b_e}else if(p_l&&0<p_l.rank&&p_l.rank<=10){var f_t=1e4*e.fbId+p_l.rank+1e3,v_z=Config.fb_stateboss_reward[f_t];v_z&&v_z.reward?this.list.array=b_p.getRewardDatas(v_z.reward):this.list.array=[]}else{var d_h=Config.fb_dungeon[e.fbId];d_h&&d_h.passReward&&(this.list.array=b_p.getRewardDatas(d_h.passReward))}}this.on(Laya.Event.CLICK,this,this.onClick)},b_s.prototype.onRemoved=function(){Cwv(this,Laya)},b_s.prototype.close=function(){Svo(UIM,b_s)},b_s.prototype.onClick=function(e){Wsa(e,this)},b_s.prototype.updateItem=function(e,p_l){e&&(e.isShowName=!1,e.setItemData(e.dataSource))},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemoved),p_g.list.itemRender=e.ItemBox,p_g.list.renderHandler=Laya.Handler.create(p_g,p_g.updateItem,null,!1),p_g}e.StateBossResultView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.story_newUI,__extends(b_s,p_l),b_s.open=function(){Sdh(UIM,b_s)},b_s.prototype.onAdded=function(){LED.on(l_r.FB_RANK_FB_UPDATE,this,this.onRankUpdate),LED.on(l_r.FB_HELP_TIMES_UPDATE,this,this.updateHelpTimes),LED.on(l_r.FB_ASSIST_TIMES_UPDATE,this,this.updateAssistTimes),LED.on(l_r.FB_WIN,this,this.onPassFB),LED.on(l_r.FB_LOSE,this,this.onLoseFB),LED.on(l_r.SCENE_LOAD_OVER,this,this.setAutoCombatTime),LED.on(l_r.QUIETFB,this,this.onQuietFB),LED.on(l_r.FB_BOSS_ID_UPDATE,this,this.onLeaveFb),LED.on(l_r.GO_DIRECTLYFB,this,this.onClickChallenge),LED.on(l_r.REFRESH_FB_LEVEL,this,this.onUpdateLevel),this.awardList.itemRender=e.ItemBox,this.awardList.renderHandler=Laya.Handler.create(this,this.updateItem,null,!1);var p_l=this.autoCombat_box.getChildByName("autocombat_checkbox"),p_g=this.autoCombat_box.getChildByName("limitiveLabel");p_l.clickHandler=Laya.Handler.create(this,this.autoCombat,[!0],!1),p_l.selected=this.isAutoChallenge&&b_p.checkReqEnterFb(),p_g.visible=this.heroVo.stateLv<1,p_l.mouseEnabled=!(this.heroVo.stateLv<1),this.autoCombatTime=10,p_l.label=(j_x("2082_1878_2379")+j_x("1737_413")+"")+this.autoCombatTime+(j_x(2081)+""),this.autoCombat(!1);var b_s=DungeonModel.instance.getNextFb(DungeonType.Story),d_u=b_s[0],b_e=b_s[1];Config.fb_story[b_e]||(b_e=d_u),this.combat_clip.visible=!1,this.passlevel_clip.visible=!1,this.combat_clip.clipY=4,0==d_u&&(d_u=b_e);var d_m=Config.fb_dungeon[b_e];d_m=d_m||Config.fb_dungeon[d_u];var d_w=b_p.getRewardDatas(d_m.firstPassReward||d_m.passReward);this.awardList.array=d_w,b_e==DungeonDefine.StoryBegin?this.currentIndex=1:5<Math.abs((Config.fb_story[b_e].layer+1)%10)?this.currentIndex=Math.abs((Config.fb_story[b_e].layer+1)%10)-5:(this.currentIndex=Math.abs((Config.fb_story[b_e].layer+1)%10),0==this.currentIndex&&(this.currentIndex=5)),this.interfaceInit(b_e),this.chanpterProgress(b_e),Laya.timer.loop(1e3,this,this.onTimer),this.new_bg.visible=!1;var f_t=this.bg.visible=!0,v_z=Config.fb_story[d_m.id];if(v_z.taskId&&(f_t=p_p.instance.checkIsFinish(v_z.taskId)),this.taskLab.visible=!f_t,!f_t){var d_h=Config.fb_story[d_m.id];this.taskLab.text=(j_x("1917_402_573")+"{")+d_h.unlock+("}"+j_x("2112_30_595")+j_x("2221_1163_48")+j_x(383)),p_l.selected=!1}this.autoCombat_box.mouseEnabled=f_t,this.updateHelpTimes(),this.updateAssistTimes(),this.onekey_passLevelBtn.on(Laya.Event.CLICK,this,this.onClickOneKeyPassLevel,[2]),this.bg.skin="res/ui/storyFb/"+Config.fb_story[b_e].mapImg[0]},b_s.prototype.onLeaveFb=function(){Wnb(this)},b_s.prototype.onRemove=function(){LED.off(l_r.FB_RANK_FB_UPDATE,this,this.onRankUpdate),LED.off(l_r.FB_HELP_TIMES_UPDATE,this,this.updateHelpTimes),LED.off(l_r.FB_ASSIST_TIMES_UPDATE,this,this.updateAssistTimes),LED.off(l_r.SCENE_LOAD_OVER,this,this.setAutoCombatTime),LED.off(l_r.QUIETFB,this,this.onQuietFB),LED.off(l_r.FB_BOSS_ID_UPDATE,this,this.onLeaveFb),LED.off(l_r.GO_DIRECTLYFB,this,this.onClickChallenge),LED.off(l_r.REFRESH_FB_LEVEL,this,this.onUpdateLevel);var e=DungeonModel.instance.getNextFb(DungeonType.Story),p_l=e[0],p_g=e[1];Config.fb_story[p_g]||(p_g=p_l);var b_s=Config.fb_story[p_g],d_u=this.onechapter_box.getChildByName("borderlight");this.decline.isPlaying&&(this.decline.stop(),this.decline.gotoAndStop(0),this.onFinishDescentAni(b_s,d_u)),Laya.timer.clear(this,this.onPass_one_Level_Play_Clip),Laya.timer.clear(this,this.onPassFiveLevelPlayClip),Laya.timer.clear(this,this.onPlay_PassLevelClip),Laya.timer.clear(this,this.onPassFiveClip),this.passlevel_clip.visible=!1,this.combat_clip.visible=!1,this.isPassPreviousLevel=!1},b_s.prototype.onTimer=function(){var e=this.autoCombat_box.getChildByName("autocombat_checkbox");this.autoCombat_box.getChildByName("limitiveLabel"),e.selected&&(e.label=(j_x("2082_1878_2379")+j_x("1737_413")+"")+--this.autoCombatTime+(j_x(2081)+"")),this.autoCombatTime<=0&&(this.autoCombatTime=10)},b_s.prototype.close=function(){Yuh(UIM,b_s)},b_s.prototype.onUpdateLevel=function(){Crr(this)},b_s.prototype.autoCombat=function(e){void 0===e&&(e=!1);var p_l=this.autoCombat_box.getChildByName("autocombat_checkbox");if(this.autoCombat_box.getChildByName("limitiveLabel"),p_l.selected?(Laya.timer.once(1e3*this.autoCombatTime,this,this.onClickChallenge),this.isAutoChallenge=!0):this.isAutoChallenge=!1,e&&!p_l.selected)return this.autoCombatTime=10,p_l.label=(j_x("2082_1878_2379")+j_x("1737_413")+"")+this.autoCombatTime--+(j_x(2081)+""),void Laya.timer.clear(this,this.onClickChallenge)},Object.defineProperty(b_s.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),b_s.prototype.onQuietFB=function(){Gqa(this)},b_s.prototype.onPassFiveClip=function(e,p_l,p_g){var b_s=this;this.new_bg.visible=!0,this.passlevel_clip.off(Laya.Event.COMPLETE,this,this.onPassFiveClip),this.passlevel_clip.visible=!1,e.alpha=0;var d_u=Config.fb_story[p_l];Laya.timer.once(150,this,(function(){b_s.descentAni.play(0,!1)})),this.descentAni.addLabel("finishAni",20),this.descentAni.on(Laya.Event.LABEL,this,this.onFinishDescentAni,[d_u,p_g]),this.new_bg.skin="res/ui/storyFb/"+d_u.mapImg[0],this.isPassPreviousLevel=!1,this.successPassTheFiveLevel(!0)},b_s.prototype.onMouseUp=function(e){Yfn(e)},b_s.prototype.onClickOneKeyPassLevel=function(p_l){Eef(p_l,e)},b_s.prototype.setAutoCombatTime=function(){Kyq(this)},b_s.prototype.onMouseDown=function(e){Ywm(e)},b_s.prototype.onLoseFB=function(){Osf(this)},b_s.prototype.updateItem=function(e,p_l){Eou(e,p_l)},b_s.prototype.chanpterProgress=function(e){var p_l=this.progress_box.getChildByName("chapter"),p_g=this.progress_box.getChildByName("content");Config.fb_story[e]?(p_l.visible=!0,p_l.text=Config.fb_story[e].chapter+":"+Config.fb_story[e].chapterName,p_g.text=Config.fb_story[e].content):(p_l.text=p_g.text="",p_l.visible=!1)},b_s.prototype.onPlay_PassLevelClip=function(e){Sfm(e,this,Laya)},b_s.prototype.setIcon=function(e,p_l){""!=e?p_l=Resource.ResManager.Instance.getImg(e,p_l):p_l.visible=!1},b_s.prototype.successPassTheFiveLevel=function(e){for(var p_l=0;p_l<this.levelBoxList.length;p_l++)this.levelBoxList[p_l].getChildByName("passlevel_img").alpha=e?1:0},b_s.prototype.onPassFB=function(e){1==Config.fb_dungeon[e].type&&(this.isPassPreviousLevel=!0)},b_s.prototype.interfaceInit=function(e){this.levelBoxList=[],this.levelBoxList.push(this.onechapter_box),this.levelBoxList.push(this.twochapter_box),this.levelBoxList.push(this.threechapter_box),this.levelBoxList.push(this.fourchapter_box),this.levelBoxList.push(this.fivechapter_box);for(var p_l=0;p_l<this.levelBoxList.length;p_l++){var p_g=this.levelBoxList[p_l],b_s=p_g.getChildByName("borderlight"),d_u=(this.autoCombat_box.getChildByName("autocombat_checkbox"),p_g.getChildByName("maskImg")),b_e=p_g.getChildByName("passlevel_img"),d_m=p_g.getChildByName("levelnum"),d_w=p_g.getChildByName("iconspr");if(b_s.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown,[p_g]),b_s.on(Laya.Event.MOUSE_UP,this,this.onMouseUp,[p_g]),b_s.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp,[p_g]),p_l+1==this.currentIndex?(d_u.alpha=0,b_s.alpha=1,0==p_l&&(this.isPassPreviousLevel?(Laya.timer.once(300,this,this.onPassFiveLevelPlayClip,[this.levelBoxList[this.levelBoxList.length-1].getChildByName("passlevel_img"),e,b_s]),p_g.addChild(this.passlevel_clip),this.levelBoxList[this.levelBoxList.length-1].addChild(this.passlevel_clip),this.passlevel_clip.x=18,this.passlevel_clip.y=-126):this.combat_clip.visible=!0),b_e.alpha=0,p_g.mouseEnabled=!0,b_s.on(Laya.Event.CLICK,this,this.showPassLevel_oneKey,[1]),this.currentIndex==this.levelBoxList.length?(this.combat_clip.x=60,this.combat_clip.y=25):(this.combat_clip.x=21,this.combat_clip.y=0),p_g.addChild(this.combat_clip)):(p_l+1<this.currentIndex?p_l+1==this.currentIndex-1?(p_g.addChild(this.passlevel_clip),this.passlevel_clip.x=-8,this.passlevel_clip.y=-156,this.isPassPreviousLevel?(this.combat_clip.visible=!1,b_e.alpha=0,Laya.timer.once(500,this,this.onPass_one_Level_Play_Clip,[b_e])):(b_e.alpha=1,this.passlevel_clip.visible=!1,this.combat_clip.visible=!0)):b_e.alpha=1:b_e.alpha=0,d_u.alpha=1,b_s.alpha=0,p_g.mouseEnabled=!1),!this.isPassPreviousLevel){d_m.text=(j_x(573))+(Config.fb_story[e].layer+p_l-this.currentIndex+2)+(j_x(413));var f_t=Config.fb_dungeon[e-this.currentIndex+p_l+1],v_z=Config.obj_monster[f_t.monster];d_w.scaleX=.8,d_w.scaleY=.8;var d_h=Resource.ResUrl.getIconUrl(v_z.icon);this.setIcon(d_h,d_w),p_l==this.levelBoxList.length-1&&(d_w.scaleX=1,d_w.scaleY=1)}}},b_s.prototype.onClickChallenge=function(e){void 0===e&&(e=!1),Laya.timer.clear(this,this.onClickChallenge);var p_l=DungeonModel.instance.getNextFb(DungeonType.Story),p_g=p_l[0],d_u=p_l[1];if(DungeonModel.instance.canEnterStoryFb(!0)&&(e&&this.isAutoChallenge&&(this.autoCombatTime=10,Laya.timer.clear(this,this.onClickChallenge),LED.event(l_r.QUIETFB)),b_p.reqEnterFb(d_u,b_s,b_p.mapID))){var b_e=Config.fb_story[d_u].chapter,d_m=Config.fb_story[d_u].chapterName;UIM.instance.showChaptercontent(b_e,d_m),0==p_g&&(p_g=d_u);var d_w=Config.fb_pagoda[d_u];d_w=d_w||Config.fb_pagoda[p_g],this.currentIndex==this.levelBoxList.length?this.currentIndex=0:this.challengeFloor(this.currentIndex),++this.currentIndex}},b_s.prototype.onFinishDescentAni=function(e,p_l){var p_g=DungeonModel.instance.getNextFb(DungeonType.Story),b_s=p_g[0],d_u=p_g[1];Config.fb_story[d_u]||(d_u=b_s);for(var b_e=0;b_e<this.levelBoxList.length;b_e++){var d_m=this.levelBoxList[b_e],d_w=d_m.getChildByName("levelnum"),f_t=d_m.getChildByName("iconspr");d_w.text=(j_x(573))+(Config.fb_story[d_u].layer+b_e-this.currentIndex+2)+(j_x(413));var v_z=Config.fb_dungeon[d_u-this.currentIndex+b_e+1],d_h=Config.obj_monster[v_z.monster];f_t.scaleX=.8,f_t.scaleY=.8;var r_t=Resource.ResUrl.getIconUrl(d_h.icon);this.setIcon(r_t,f_t),b_e==this.levelBoxList.length-1&&(f_t.scaleX=1,f_t.scaleY=1)}this.combat_clip.visible=!0,this.new_bg.visible=!1,this.bg.skin="res/ui/storyFb/"+e.mapImg[0],this.successPassTheFiveLevel(!1),p_l.alpha=1,this.descentAni.gotoAndStop(0),p_l.on(Laya.Event.CLICK,this,this.showPassLevel_oneKey,[1])},b_s.prototype.updateHelpTimes=function(){var e,p_l=DungeonModel.instance.getFbHelpTimes(),p_g=Config.global[GlobalDefine.fb_help_times].i_info,b_s=LgcM.ins.heroVo,d_u=null!=b_s.vipLv?b_s.vipLv:0;e=Config.recharge_vip[d_u].fb_help,this.helpLab.text=(j_x("100_1808_235")+j_x(2348)+":")+(p_g+e-p_l)+"/"+(p_g+e)},b_s.prototype.onRankUpdate=function(e){},b_s.prototype.showPassLevel_oneKey=function(p_l){void 0===p_l&&(p_l=2);var p_g=DungeonModel.instance.getNextFb(DungeonType.Story),b_s=(p_g[0],p_g[1]),d_u=Config.fb_story[b_s];if(d_u){var b_e=0<d_u.layer&&(d_u.layer+1)%5==0;if(this.heroVo.fight>=Config.fb_story[b_s].fight&&(1==this.heroVo.stateLv&&2<=StateModel.instance.getStateSubLv()||1<this.heroVo.stateLv))if(DungeonModel.instance.isNotTips){if(b_e)return void this.onClickChallenge();DungeonModel.instance.canEnterStoryFb()&&(DungeonModel.instance.reqFbDirectPass(b_s),DungeonModel.instance.currFbId=d_u.layer-1,DungeonModel.instance.diffLevel=2,e.StoryPassResultPanel.open(!0))}else e.PassLevel_oneKeyView.open(p_l);else{if(b_e)return void this.onClickChallenge();DungeonModel.instance.canEnterStoryFb()?(DungeonModel.instance.reqFbDirectPass(b_s),DungeonModel.instance.currFbId=d_u.layer-1,DungeonModel.instance.diffLevel=2,e.StoryPassResultPanel.open(!0)):this.heroVo.fight<Config.fb_story[b_s].fight&&e.StoryPassResultPanel.open(!1)}}else b_p.broadcastNotice((j_x("1300_1117_1081")+j_x("1375_413_764")))},b_s.prototype.onPass_one_Level_Play_Clip=function(e,p_l,p_g){void 0===p_l&&(p_l=!1),this.passlevel_clip.visible=!0,this.passlevel_clip.play(!1),this.passlevel_clip.on(Laya.Event.COMPLETE,this,this.onPlay_PassLevelClip,[e]),Config.fb_dungeon[p_g]},b_s.prototype.updateAssistTimes=function(){var e,p_l=DungeonModel.instance.getFbAssistTimes(),p_g=Config.global[GlobalDefine.fb_assist_times].i_info,b_s=LgcM.ins.heroVo,d_u=null!=b_s.vipLv?b_s.vipLv:0;e=Config.recharge_vip[d_u].fb_assist,this.assistLab.text=(j_x("1109_1808_235")+j_x(2348)+":")+(p_g+e-p_l)+"/"+(p_g+e)},b_s.prototype.onPassFiveLevelPlayClip=function(e,p_l,p_g){Cfv(e,p_l,p_g,Laya,this)},b_s.prototype.onClick=function(p_l){var p_g=p_l.target,b_s=DungeonModel.instance.getNextFb(DungeonType.Story),d_u=b_s[0],b_e=b_s[1];Config.fb_story[b_e]||(b_e=d_u);var d_m=LgcM.ins.heroVo;switch(p_g.name){case"closeBtn":case"backBtn":return this.close(),this.autoCombatTime=10,Laya.timer.clear(this,this.onClickChallenge),void LED.event(l_r.QUIETFB);case"rankBtn":e.FbRankPanel.open();break;case"helpBtn":b_e&&e.HelpPanel.open(b_e);break;case"vip_dec_btn":e.PrivilegePanel.open(d_m.vipLv)}},b_s.prototype.challengeFloor=function(e){if(0!=e){var p_l=this.levelBoxList[e-1],p_g=p_l.getChildByName("borderlight"),b_s=p_l.getChildByName("maskImg"),d_u=p_l.getChildByName("passlevel_img");p_g.alpha=0,b_s.alpha=1,d_u.alpha=1}var b_e=this.levelBoxList[e],d_m=b_e.getChildByName("borderlight"),d_w=b_e.getChildByName("maskImg"),f_t=b_e.getChildByName("passlevel_img");d_w.alpha=0,d_m.alpha=1,f_t.alpha=0,b_e.addChild(this.combat_clip)},b_s);function b_s(){var e=p_l.call(this)||this;return e.levelBoxList=[],e.isPassPreviousLevel=!1,e.isAutoChallenge=!1,e.theFirstTime=0,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.on(Laya.Event.CLICK,e,e.onClick),e}e.StoryFBPanel_new=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.passStoryResultViewUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){this.on(Laya.Event.CLICK,this,this.onClick);var e=DungeonModel.instance.getNextFb(DungeonType.Story),p_l=e[0],p_g=e[1];Config.fb_story[p_g]||(p_g=p_l),this._curFbId=p_l,this._nextFbId=p_g,this.refreshView(),Laya.timer.loop(100,this,this.refreshView)},b_s.prototype.onRemoved=function(){this.off(Laya.Event.CLICK,this,this.onClick),this._numValue=0,this._curFbId=-1,this._nextFbId=-1;var e=DungeonModel.instance.getNextFb(DungeonType.Story),p_l=e[0],p_g=e[1];Config.fb_story[p_g]||(p_g=p_l),LED.event(l_r.REFRESH_FB_LEVEL,[p_g])},b_s.prototype.updateItem=function(e,p_l){Udv(e,p_l)},b_s.prototype.textDesc=function(e){e&&(this.passDecs.text=e.content,this.passText.text=Utils.$((j_x(573)+"{1}"+j_x(413)),e.layer+1),this.passFight.text=Utils.$("{1}/{2}",e.fight,this.heroVo.fight),this.passFight.color=e.fight>this.heroVo.fight?Config.color[206].color:Config.color[202].color)},b_s.prototype.refreshView=function(){this.dataSource&&(this.dataSource.isWin?this.refreshWinBox(this._nextFbId,this._curFbId):this.refreshLossBox(this._nextFbId,this._curFbId))},b_s.prototype.refreshWinBox=function(e,p_l){if(this.winResult.visible=!0,this.lossResult.visible=!1,this.resultList.x=484,this._numValue<DungeonModel.instance.diffLevel-1){0!=p_l&&++this._numValue;var p_g=DungeonModel.instance.currFbId+1+this._numValue;0==p_l&&(p_l=1e4,p_g=1,++this._numValue);var b_s=p_l+this._numValue;this.textDesc(Config.fb_story[b_s]),this.drawNum(p_g,this.passNum);var d_u=Config.fb_dungeon[b_s];if(!d_u){var b_e=DungeonModel.instance.getNextFb(DungeonType.Story),d_m=b_e[0],d_w=b_e[1];d_u=Config.fb_dungeon[d_w]||Config.fb_dungeon[d_m]}var f_t=b_p.getRewardDatas(d_u.firstPassReward||d_u.passReward);this.resultList.array=f_t,Laya.Tween.to(this.resultList,{f_u:-484},100,null)}else Laya.timer.clearAll(this),Laya.Tween.clearAll(this.resultList),this.resultList.x=70},b_s.prototype.refreshLossBox=function(e,p_l){Cnm(e,p_l,this,Config)},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"roleBtn":e.RolePanel.open();break;case"skillBtn":e.SkillPanel.open();break;case"talismanBtn":e.TalismanPanel.open();break;case"strengthBtn":e.StrengthPanel.open()}b_s.close()},b_s.prototype.drawNum=function(e,p_l,p_g,b_s){if(void 0===p_g&&(p_g=35),void 0===b_s&&(b_s=224),p_l&&0!=p_l.numChildren){var d_u=e.toString(),b_e=0;for(var d_m in p_l._childs){var d_w=p_l._childs[d_m];if(!d_w)break;d_w.visible=b_e<d_u.length,b_e>=d_u.length||d_w.hasOwnProperty("index")&&(d_w.index=parseInt(d_u[b_e]),b_e++)}b_e<=d_u.length&&(p_l.x=b_s+(p_l.width-(b_e-1)*p_g)/2)}},Object.defineProperty(b_s.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),b_s.open=function(e){void 0===e&&(e=!0),UIM.open(b_s,["storyFb.atlas"],{isWin:e},!1,!1,!0,!0)},b_s.close=function(){Ill(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g._numValue=0,p_g._curFbId=-1,p_g._nextFbId=-1,p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemoved),p_g.resultList.itemRender=e.ItemBox,p_g.resultList.renderHandler=Laya.Handler.create(p_g,p_g.updateItem,null,!1),p_g}e.StoryPassResultPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.TeamFailPanelUI,__extends(b_s,p_l),b_s.prototype.updateView=function(){var e=this.dataSource;this.timeTxt.text=Utils.$(("{1}"+j_x(2081)),this._time);var p_l=TeamModel.instance.getTeamVO(e.aims);this.leaveBtn.visible=p_l.isLeader,this.tipTxt.visible=!p_l.isLeader},b_s.prototype.onAdded=function(){Mrx(this,Laya)},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"leaveBtn":this.leaveFb();break;case"roleBtn":this.leaveFb(),b_p.registerAutoOpenPanel(e.RolePanel,-1);break;case"skillBtn":this.leaveFb(),b_p.registerAutoOpenPanel(e.SkillPanel,-1);break;case"talismanBtn":this.leaveFb(),b_p.registerAutoOpenPanel(e.TalismanPanel,-1);break;case"strengthBtn":this.leaveFb(),b_p.registerAutoOpenPanel(e.StrengthPanel,-1)}},b_s.prototype.onTimer=function(){this._time--,this.timeTxt.text=Utils.$(("{1}"+j_x(2081)),this._time),this._time<=0&&(this._time=0,this.leaveFb())},b_s.prototype.leaveFb=function(){Elk(Laya,this,b_s,DungeonModel)},b_s.prototype.onRemove=function(){Wfl(Laya,this)},b_s.open=function(e){Mfr(e,UIM,b_s)},b_s.close=function(){Mbk(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e._time=10,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.TeamFailPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.TeamWinPanelUI,__extends(b_s,p_l),b_s.prototype.updateView=function(){var e,p_l,p_g=this.dataSource,b_s=p_g.fbId,d_u=[],b_e=p_g.reward_item,d_m=[],d_w=[],f_t=Config.fb_ascent[b_s],v_z=Config.fb_yishou[b_s],d_h=Config.fb_xuanshang[b_s],r_t=TeamModel.instance.getTeamVO(p_g.aims),t_n=r_t.getMemberById(b_p.playerId);if(b_e)for(var f_y in b_e){var p_q=new ModuleItemVO;p_q.id=b_e[f_y].itemId,p_q.amount=b_e[f_y].num,d_m.push(p_q)}if(f_t)if(e=f_t.state,p_l=Utils.formaNum(f_t.floor),t_n&&1==t_n.helper)d_u=b_p.getRewardDatas(f_t.helpReward);else{d_w=f_t.passReward;var h_h=b_p.getRewardDatas(d_w);d_u=0<d_m.length?h_h.concat(d_m):h_h}else if(v_z)e=v_z.state,p_l=Utils.formaNum(v_z.floor),d_u=t_n&&1==t_n.helper?b_p.getRewardDatas(v_z.helpReward):(d_w=v_z.passReward,h_h=b_p.getRewardDatas(d_w),0<d_m.length?h_h.concat(d_m):h_h);else if(d_h){e=d_h.state,p_l=Utils.formaNum(d_h.floor);var n_j=RewardBossModel.instance.rewardBossVo,j_l=Config.global[GlobalDefine.rewardBoss_help_count].i_info>n_j.helpCount;d_u=t_n&&1==t_n.helper&&j_l?b_p.getRewardDatas(d_h.helpReward):(d_w=d_h.passReward,h_h=b_p.getRewardDatas(d_w),0<d_m.length?h_h.concat(d_m):h_h)}this.rewardLst.array=d_u,this.cdTxt.text=Utils.$(("{1}"+j_x(2081)),this._time);var l_m=p_g.fbId+1,z_m=Config.fb_dungeon[l_m];this.nextBtn.visible=null!=z_m,z_m&&z_m.type===DungeonType.Ascent?TeamModel.instance.reqChangeTeamAims(TeamAimsType.ASCENT,l_m):z_m&&z_m.type===DungeonType.Rare?TeamModel.instance.reqChangeTeamAims(TeamAimsType.RareAni,l_m):z_m&&z_m.type==DungeonType.RewardBoss&&TeamModel.instance.reqChangeTeamAims(TeamAimsType.RewardBossAni,l_m),this.stateTxt.text=Utils.$("{1} ({2})",Config.state_state[e].desc,p_l),this.btnBox.visible=r_t.isLeader,this.tipTxt.visible=!r_t.isLeader,r_t.isLeader&&Laya.timer.loop(1e3,this,this.onTimer)},b_s.prototype.nextFb=function(){var e=this.dataSource.fbId+1,p_l=Config.fb_dungeon[e];p_l&&p_l.type===DungeonType.Ascent?(TeamModel.instance.reqChangeTeamAims(TeamAimsType.ASCENT,e),DungeonModel.instance.autoTeamEnterFbId=e,this.leaveFb()):p_l&&p_l.type===DungeonType.Rare?(TeamModel.instance.reqChangeTeamAims(TeamAimsType.RareAni,e),DungeonModel.instance.autoTeamEnterFbId=e,this.leaveFb()):p_l&&p_l.type===DungeonType.RewardBoss?(TeamModel.instance.reqChangeTeamAims(TeamAimsType.RewardBossAni,e),DungeonModel.instance.autoTeamEnterFbId=e,this.leaveFb()):(b_p.broadcastNotice(Utils.$((j_x("1300_1917_402")+j_x("1081_2251_1778")+j_x(2348)))),Laya.timer.clearAll(this),b_s.close())},b_s.prototype.onRemove=function(){Wze(Laya,this)},b_s.prototype.updateItem=function(e,p_l){Wsz(e,p_l,ItemBoxDefine)},b_s.prototype.onAdded=function(){Uqk(this,Laya)},b_s.open=function(e){Uoq(e,UIM,b_s)},b_s.prototype.onTimer=function(){this._time--,this.cdTxt.text=Utils.$(("{1}"+j_x(2081)),this._time),this._time<=0&&(this._time=0,this.nextFb())},b_s.prototype.leaveFb=function(){Gon(Laya,this,b_s,DungeonModel)},b_s.prototype.onClick=function(e){switch(e.target.name){case"exitBtn":this.leaveFb();break;case"nextBtn":this.nextFb()}},b_s.close=function(){Wxb(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e._time=9,e.rewardLst.vScrollBarSkin="",e.rewardLst.scrollBar.elasticBackTime=100,e.rewardLst.scrollBar.elasticDistance=200,e.rewardLst.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.TeamWinPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.TianjieBossItemUI,__extends(b_s,p_l),b_s.prototype.onRemove=function(){console.log((j_x("2308_843")+"boss "+j_x("270_2025_2199")+j_x(1792)));var e=this.modelContainer.getChildByName("actorShowModel");e&&e.clearRes()},b_s.prototype.updateBossItem=function(e){var p_l=this.modelContainer.getChildByName("actorShowModel");null==p_l&&((p_l=new n_k).name="actorShowModel",p_l.scaleX=.5,p_l.scaleY=.5,this.modelContainer.addChild(p_l));var p_g=Config.fb_dungeon[this.dataSource[1]],b_s=Config.obj_monster[p_g.monster];this.bossName.text=b_s.name,this.successed.visible=!1,this.modelBox.gray=!1,this.terraceImg.gray=!1,this.selectImg.gray=!1;var d_u=DungeonModel.instance.tianJieFbId,b_e=0;0!=d_u&&(b_e=DungeonModel.instance.getTianJieOpenBossByFBId(d_u)+1),e<b_e&&(this.successed.visible=!0,this.modelBox.gray=!0,this.terraceImg.gray=!0,this.selectImg.gray=!0),p_l.changeModel(b_s.avatar),p_l.stand(3)},b_s.prototype.playAction=function(e){Ajk(e,this)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.TianjieBossItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.TianjieOpenUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Kio(this,Laya)},b_s.prototype.onRemove=function(){Ipu(this,Laya)},b_s.prototype.onOkBtnClick=function(){Kju(DungeonModel,b_s,e)},b_s.open=function(){Guq(UIM,b_s)},b_s.close=function(){Ayc(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.TianjieOpen=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.tianjieUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){this.x=0,e.HangIcon.close(),RewardBossModel.instance.reqRewardBossInfo(),this.on(Laya.UIEvent.CLICK,this,this.onMouseClick),LED.on(l_r.REWARD_BOSS_UPDATE,this,this.updateRewardBossRedPpint),LED.on(l_r.UPDATE_DA_PVP_INFO,this,this.updateDoubleAreaRed),LED.on(l_r.DA_CLONE_FORMATION_UPDATE,this,this.updateDoubleAreaRed),this.bgPanel.hScrollBar.setScroll(0,1500,725),this.bgPanel.hScrollBar.on(Laya.Event.CHANGE,this,this.onDragMove),UIM.instance.isOpenWin(e.BossBar)||UIM.instance.setMainLeftUIVisible(!1),p_k.instance.checkSystemOpen(FuncDefine.MirrorSelfPanel,!0)&&MirrorSelfModel.ins.isActivate(1)&&DoubleAreaControl.ins.reqPvpInfo();for(var p_l=0;p_l<this.bgImg.numChildren;++p_l){var p_g=this.bgImg.getChildAt(p_l),b_s=p_g.getChildByName("labBox"),d_u=b_s.getChildByName("redpoint");if(d_u&&(d_u.visible=!1),b_s.y=this._defY[p_l],p_g.clickScale=1.1,!p_g.graphics){var b_e=p_g.skin;p_g.skin=null,p_g.skin=b_e}}this.leftRedPoint.visible=!1,this.rightRedPoint.visible=!1,this.startWave(),this.checkSystemOpen(),this.updateRedPoint()},b_s.prototype.updateDoubleAreaRed=function(){Czu(DoubleAreaModel,this)},b_s.prototype.showRedpoint=function(e,p_l){void 0===p_l&&(p_l=!0);var p_g=e.getChildByName("labBox");if(p_g){var b_s=p_g.getChildByName("redpoint");b_s&&(b_s.visible=!!p_l)}},b_s.open=function(e){void 0===e&&(e=!1),UIM.open(b_s,["experience.atlas","tianjie.atlas"],null,e,!1,!1,null)},b_s.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"leftBtn":this.tween(-1);break;case"rightBtn":this.tween(1);break;case"typeBtn1":b_s.close();break;case"typeBtn2":b_s.open();break;case"typeBtn3":b_p.broadcastNotice((j_x("2287_206_1463")+j_x("1779_155_1186")+j_x("1320_1283")));break;case"yuanshisenlinImg":e.RewardBossPanel.open();break;case"penglaiImg":e.SouthSkyGatePanel.open();break;case"shanguImg":DoubleAreaControl.ins.reqPvpInfo(),e.DoubleAreaFightPanel.open();break;case"mokuImg":case"qunshanImg":case"moshenImg":b_p.broadcastNotice((j_x("2287_206_155")+j_x(2191)));break;case"lundaotaiImg":STBossModel.ins.isOpenState(!0)&&e.STBossMainPanel.open()}},b_s.prototype.waveLoop=function(){var e,p_l=(SyncTime.serverTime-this._waveStartTime)%2e3;e=p_l<500?Math.round(15*p_l/500):p_l<1e3?Math.round(15*(1e3-p_l)/500):p_l<1500?-Math.round(15*(p_l-1e3)/500):-Math.round(15*(2e3-p_l)/500);for(var p_g=0;p_g<this.bgImg.numChildren;++p_g){var b_s=this.bgImg.getChildAt(p_g).getChildByName("labBox");if(b_s){var d_u=b_s.getChildByName("redpoint");d_u&&d_u.visible?b_s.y=this._defY[p_g]+e:b_s.y!==this._defY[p_g]&&(b_s.y=this._defY[p_g])}}},b_s.prototype.updateRedPoint=function(){Uco(this)},b_s.prototype.updateRewardBossRedPpint=function(){Wxq(this,RewardBossModel)},b_s.prototype.onDragMove=function(p_l){this._tempPoint||(this._tempPoint=new Laya.Point);for(var p_g=!1,d_u=!1,b_e=0;b_e<this.bgImg.numChildren;++b_e){var d_m=this.bgImg.getChildAt(b_e).getChildByName("labBox");if(!d_m)return;var d_w=d_m.getChildByName("redpoint");if(d_w&&d_w.visible){this._tempPoint.setTo(d_w.x,d_w.y);var f_t=d_m.localToGlobal(this._tempPoint).x+(d_w.width>>1);f_t<0?p_g=!0:f_t>Stage.width&&(d_u=!0)}if(p_g&&d_u)break}this.leftRedPoint.visible=p_g,this.rightRedPoint.visible=d_u,this.leftBtn.visible=this.bgPanel.hScrollBar.value!==this.bgPanel.hScrollBar.min,this.rightBtn.visible=this.bgPanel.hScrollBar.value!==this.bgPanel.hScrollBar.max,e.GuidePanel.checkIsWinAndUpdate(b_s.name,!1),Laya.timer.once(100,this,this.delayCheckGuide)},b_s.prototype.tween=function(e){var p_l=e<0?-GPlatform.designWidth:GPlatform.designWidth,p_g=this.bgPanel.hScrollBar.value,b_s=p_g+p_l,d_u=1e3;b_s<0?b_s=0:b_s>this.bgImg.width-GPlatform.designWidth&&(b_s=this.bgImg.width-GPlatform.designWidth),d_u*=Math.abs(b_s-p_g)/GPlatform.designWidth,Laya.Tween.to(this.bgPanel.hScrollBar,{value:b_s},d_u)},b_s.prototype.delayCheckGuide=function(p_l){Apg(p_l,e,b_s)},b_s.close=function(e){void 0===e&&(e=!1),UIM.close(b_s,e)},b_s.prototype.checkSystemOpen=function(e){void 0===e&&(e=!1)},b_s.prototype.onRemove=function(){Config.map[b_p.mapID]&&Config.map[b_p.mapID].showUI&&0<=Config.map[b_p.mapID].showUI.indexOf(1003)&&e.HangIcon.open(),this.off(Laya.UIEvent.CLICK,this,this.onMouseClick),LED.off(l_r.UPDATE_DA_PVP_INFO,this,this.updateDoubleAreaRed),LED.off(l_r.REWARD_BOSS_UPDATE,this,this.updateRewardBossRedPpint),LED.on(l_r.DA_CLONE_FORMATION_UPDATE,this,this.updateDoubleAreaRed),Laya.timer.clearAll(this),UIM.instance.isOpenWin(e.BossBar)||UIM.instance.setMainLeftUIVisible(!0),Laya.timer.clear(this,this.delayCheckGuide)},b_s.prototype.startWave=function(){Wnj(this,SyncTime,Laya)},b_s.prototype.changeAdapt=function(){if(GPlatform.needAdapt){if(this.height=GPlatform.stageHeight,this.width=Stage.width,GPlatform.stageHeight>this.bgImg.height){var e=this.bgImg.parent.getChildAt(0),p_l=this.bgImg.parent.getChildAt(1),p_g=this.bgImg.parent.getChildAt(2);this.bgImg.y+=-e.y/2,p_l&&(p_l.y=p_l.y/2),p_g&&(p_g.y=p_g.y/2),e.y=e.y/2}this.bgPanel.height=GPlatform.stageHeight,this.bgPanel.width=Stage.width,this.backBtn.y*=GPlatform.ratioY,this.backBtn.y+=50,this.backBtn.x=this.width-this.backBtn.width-10,this.rightBtn.x=this.width-this.rightBtn.width}},b_s);function b_s(){var e=p_l.call(this)||this;e._waveStartTime=0,e._defY=[],e.changeAdapt(),e.bgPanel.hScrollBarSkin="",e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove);for(var p_g=0;p_g<e.bgImg.numChildren;++p_g){var b_s=e.bgImg.getChildAt(p_g).getChildByName("labBox");b_s?e._defY.push(b_s.y):e._defY.push(0)}return e.suo_img2.visible=!1,e.checkSystemOpen(!0),e.penglaiImgRed.visible=!1,SouthSkyGateControl.ins.addRedImg(e.penglaiImgRed),e}e.TianjieOpenPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.fb.TianjiePanelUI,__extends(d_u,p_l),d_u.prototype.onAdded=function(){Wrw(LED,l_r,this,DungeonModel)},d_u.prototype.onAnilComplete=function(){Ozn(this,Laya,e,d_u)},d_u.prototype.onChallengeBtnClick=function(){var e=this.bossList.array[this.bossList.selectedIndex][1];b_p.registerAutoOpenPanel(d_u,b_p.mapID,(function(){d_u.open()})),b_p.reqEnterFb(e)},d_u.prototype.onCloseBoxClick=function(){Wms(d_u)},d_u.prototype.updateCloseUI=function(){Cpe(this,LgcM,Engine2d)},d_u.prototype.onHelpBtnClick=function(){Eel(this,e,ViewType)},d_u.prototype.updateBossList=function(e,p_l){e.updateBossItem(p_l),this._killingIndex==p_l&&1==this._sealing&&(e.playAction(this._sealing),this._sealing=!1)},d_u.prototype.onRemove=function(){LED.off(l_r.FB_HEAVEN_OPEN_INFO,this,this.updateBossListArray),this._model&&this._model.clearRes(),this.bossList.array=null},d_u.open=function(){Kjw(UIM,d_u)},d_u.prototype.updateBossListArray=function(){var e=Config.global[3016],p_l=DungeonModel.instance.tianJieFbId,p_g=0;0!=p_l&&(p_g=DungeonModel.instance.getTianJieOpenBossByFBId(p_l)+1),3<p_g?(this.closeBox.visible=!1,this._model||(this._model=new n_k,this.modelRole.addChild(this._model)),this.updateCloseUI(),this.bossList.array=[],this.ani1.play(0,!1),this.ani1.on(Laya.Event.COMPLETE,this,this.onAnilComplete)):(this.closeBox.visible=!0,this.bossList.array=e.t_info,this.bossList.selectedIndex=p_g,this.selectList())},d_u.prototype.selectList=function(){var e=this.bossList.selectedIndex,p_l=DungeonModel.instance.tianJieFbId,p_g=DungeonModel.instance.getTianJieOpenBossByFBId(p_l),b_s=0;0!=p_l&&(b_s=p_g+1);var d_u=this.bossList.getCell(e).selectImg;e==b_s?(this.open.visible=!0,this.killed.visible=!1,this.unopened.visible=!1,d_u.gray=!1):b_s<e?(this.open.visible=!1,this.killed.visible=!1,this.unopened.visible=!0,d_u.gray=!1):e<b_s&&(this.open.visible=!1,this.killed.visible=!0,this.unopened.visible=!1,d_u.gray=!0),null!=this._killingIndex&&this._killingIndex!=p_g&&(this._sealing=!0),this._killingIndex=p_g},d_u.close=function(){Qif(UIM,d_u)},d_u);function d_u(){var b_s=p_l.call(this)||this;return b_s._sealing=!1,b_s.on(Laya.Event.ADDED,b_s,b_s.onAdded),b_s.on(Laya.Event.REMOVED,b_s,b_s.onRemove),b_s.backBtn.on(Laya.Event.CLICK,b_s,b_s.onCloseBoxClick),b_s.bossList.selectEnable=!0,b_s.bossList.itemRender=e.TianjieBossItem,b_s.bossList.renderHandler=p_g.create(b_s,b_s.updateBossList,null,!1),b_s.bossList.selectHandler=p_g.create(b_s,b_s.selectList,null,!1),b_s.bossList.array=null,b_s.challengeBtn.on(Laya.Event.CLICK,b_s,b_s.onChallengeBtnClick),b_s.helpBtn.on(Laya.Event.CLICK,b_s,b_s.onHelpBtnClick),b_s}e.TianjiePanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.upsideRankUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Efx(this,LED,l_r)},b_s.prototype.setHelpBtnDisable=function(e){Glo(e,this)},b_s.prototype.updateHelpTimes=function(){if(this.helpBox.visible){var e=DungeonModel.instance.getFbHelpTimes(),p_l=Config.global[GlobalDefine.fb_help_times].i_info;this.helpLab.text=(j_x("100_1808_235")+j_x(2348)+"(")+e+"/"+p_l+")"}},b_s.prototype.setParams=function(e,p_l){var p_g=Config.CItem(e);if(p_g){this.talisLab.text=p_g.name,this.itemBox.isShowName=!1,this.itemBox.isShowNum=!1,this.itemBox.isShowTick=!1;var b_s=new ModuleItemVO;b_s.id=p_g.id,b_s.amount=1,b_s.bind=0,this.itemBox.setItemData(b_s,ItemBoxDefine.MODULE_ITEM,!0),this.actLab.text=p_l+(j_x("413_2335_1796"))}},b_s.prototype.updateAssistTimes=function(){if(this.helpBox.visible){var e=DungeonModel.instance.getFbAssistTimes(),p_l=Config.global[GlobalDefine.fb_assist_times].i_info;this.assistLab.text=(j_x("1109_1808_235")+j_x(2348)+"(")+e+"/"+p_l+")"}},b_s.prototype.setRank=function(e){Sgn(e,this)},b_s.prototype.onRemove=function(){Szh(this,LED,l_r)},b_s.prototype.updateItem=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("nameLab"),d_u=e.getChildByName("guanLab");b_s.text=String(p_l+1)+". "+p_g.name,this._rankType===RankType.FbStory?d_u.text=String(p_g.value-DungeonDefine.StoryBegin+1)+(j_x(413)):this._rankType===RankType.FbPagoda&&(d_u.text=String(p_g.value-DungeonDefine.PagodaBegin+1)+(j_x(413)))},b_s);function b_s(e){void 0===e&&(e=!1);var p_g=p_l.call(this)||this;return p_g._showHelp=!1,p_g._rankType=0,p_g._showHelp=e,p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g.rankLst.renderHandler=Laya.Handler.create(p_g,p_g.updateItem,null,!1),p_g}e.UpsideRankView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.bosscome.bosscome_encourageUI,__extends(b_s,p_l),b_s.open=function(){Gcs(UIM,b_s)},b_s.close=function(){Kjm(UIM,b_s)},b_s.prototype.onRemoved=function(e){Onu(e,LED,l_r,this,Laya)},b_s.prototype.updateView=function(){var e=Config.global[GlobalDefine.wildboss_inspire_times],p_l=Config.global[GlobalDefine.wildboss_inspire_gold],p_g=Config.global[GlobalDefine.wildboss_inspire_pct];e&&e.i_info&&(this.t_now.text="+"+DungeonModel.instance.wildBossInspireTimes*e.i_info+"%",this.t_per.text=p_g.i_info/1e4*100+"%"),p_l&&p_l.i_info&&(this.t_coin.text=p_l.i_info.toString())},b_s.prototype.onClick=function(e){switch(e.target.name){case"b_sure":var p_l=LgcM.ins.heroVo,p_g=Config.global[GlobalDefine.wildboss_inspire_gold],d_u=Config.global[GlobalDefine.wildboss_inspire_times];if(!p_g||!d_u)return;if(p_l.gold<p_g.i_info)return void b_p.broadcastNotice((j_x("1263_869_2462")+j_x(1779)));if(DungeonModel.instance.wildBossInspireTimes>=d_u.i_info)return void b_p.broadcastNotice((j_x("2208_1328_1300")+j_x("1117_1012_1067")+j_x(2128)));if(DungeonModel.instance.isCrossWildBoss)return void b_p.broadcastNotice((j_x("1300_1331_413")));DungeonModel.instance.reqWildBossInspire();break;case"b_cancel":case"closeBtn":b_s.close()}},b_s.prototype.onAdded=function(e){Khy(e,LED,l_r,this,Laya,DungeonModel)},b_s.prototype.sceneChange=function(){b_p.lastMapID&&"wild_boss"==Config.map[b_p.lastMapID].impl&&b_s.close()},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.WildBossEncourageView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.yewaiBOSSUI,__extends(b_s,p_l),b_s.open=function(e){void 0===e&&(e=0),UIM.instance.isMapWinOpen&&0<=b_s.changeMapIndex&&(e=b_s.changeMapIndex),UIM.open(b_s,["bossFb.atlas"],{index:e})},b_s.prototype.updateBossLst=function(e,p_l){if(UIM.instance.isOpenWin(b_s)&&this.fbType==p_l){for(var p_g=[],d_u=[],b_e=0,d_m=e;b_e<d_m.length;b_e++){var d_w=d_m[b_e];DungeonModel.instance.canChallenge(d_w.id)?p_g.push(d_w):d_u.push(d_w)}p_g.sort((function(e,p_l){return p_l.id-e.id})),d_u.sort((function(e,p_l){return e.id-p_l.id})),this.bossLst.array=p_g.concat(d_u);var f_t=DungeonModel.instance.checkWildBossInfo(),v_z=f_t[0],d_h=f_t[1],r_t=2e3;v_z||(r_t=1e3*(d_h-Math.floor(SyncTime.serverTime/1e3)-2))<0&&(r_t=0),Laya.timer.once(r_t,this,this.onUpdateLstTimer)}},b_s.prototype.onUpdateLstTimer=function(){Cyn(DungeonModel,this)},b_s.prototype.onTabSelect=function(e){if(-1!==e){if(this.fbType===DungeonType.TsBoss&&!p_k.instance.checkSystemOpen(FuncDefine.wildBossTs))return this.fbTab.selectedIndex=0,void b_p.broadcastNotice(Config.funcOpen[FuncDefine.wildBossTs].openError);DungeonModel.instance.getdBossList(this.fbType),Laya.timer.once(320,this,this.updateTimes,[!0])}},b_s.prototype.onAdded=function(){b_s.changeMapIndex=null,this.recoverLab.visible=!1,DungeonModel.instance.wildBossInspireTimes=0,this._clipTab.on("tabSelect",this,this.onTabSelect),this.on(Laya.UIEvent.CLICK,this,this.onMouseClick),LED.on(l_r.FB_WILD_BOSS_LIST,this,this.updateBossLst),LED.on(l_r.FB_WILDBOSS_TIMES_UPDATE,this,this.updateTimes,[!0]),this.img_redPoint1.visible=this.img_redPoint2.visible=!1,this.bossLst.array=[],this.fbTab.selectedIndex=0!=this.dataSource.index?this.dataSource.index:0,this.setSyOpen()},b_s.prototype.updateTimes=function(e){void 0===e&&(e=!1);var p_l=DungeonModel.instance.getFbWildBossTimes(this.fbType),p_g=(p_l[0],p_l[1]),b_s=this.fbType==DungeonType.WildBoss?Config.global[GlobalDefine.fb_wildboss_times].i_info:Config.global[GlobalDefine.fb_tsequipt_times].i_info;this.timesLab.text=String(DungeonModel.instance.getFbWildBossLeftTimes(this.fbType))+"/"+b_s;var d_u=p_g-Math.floor(SyncTime.serverTime/1e3);0<d_u?(this.recoverLab.visible||Laya.timer.loop(1e3,this,this.onCdTimer),this.recoverLab.visible=!0,this.recoverLab.text="("+Utils.formatTimeStr(d_u)+(" "+j_x("1773_62")+")")):(this.recoverLab.visible=!1,Laya.timer.clear(this,this.onCdTimer),DungeonModel.instance.getdBossList(this.fbType)),e&&this.updateRedPoint()},b_s.prototype.onCdTimer=function(){Eov(this)},b_s.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"remindBtn":e.RemindSettingPanel.open(this.bossLst.array);break;case"addTimesBtn":var p_g=this.fbType==DungeonType.WildBoss?Config.global[GlobalDefine.wildBossTimesAdd].t_info:Config.global[GlobalDefine.fb_tsequipt_times_add].t_info,d_u=this.fbType==DungeonType.WildBoss?Config.global[GlobalDefine.fb_wildboss_times].i_info:Config.global[GlobalDefine.fb_tsequipt_times].i_info,b_e=DungeonModel.instance.getFbWildBossLeftTimes(this.fbType);if(d_u<=b_e)return void b_p.broadcastNotice((j_x("48_383_235")+j_x("2348_1300_1463")));if(b_p.checkConsume([p_g],!0)){var d_m,d_w=BagModel.instance.getItemById(BagTypeDefine.BAG_TYPE_ITEM,p_g[0]);d_m=this.fbType===DungeonType.WildBoss?DungeonModel.instance.reqWildBossBuyTimes.bind(DungeonModel.instance):DungeonModel.instance.reqTsEquipBuyTimes.bind(DungeonModel.instance);var f_t=d_u-b_e;e.ItemConsumTipsPanel.open(d_w,0,d_m,[],f_t)}}},b_s.prototype.setSyOpen=function(){Qhg(SystemNoticeManager,this,FuncDefine)},b_s.close=function(){Uct(UIM,b_s)},b_s.prototype.updateRedPoint=function(){Ois(this,DungeonModel,DungeonType)},b_s.prototype.onRemove=function(){Ebm(b_s,this,Laya,LED,l_r)},b_s.prototype.updateItem=function(e,p_l){e&&e.setBossData(e.dataSource,p_l,this.fbType)},Object.defineProperty(b_s.prototype,"fbType",{get:function(){return 0===this.fbTab.selectedIndex?DungeonType.WildBoss:DungeonType.TsBoss},enumerable:!0,configurable:!0}),b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g.bossLst.vScrollBarSkin="",p_g.bossLst.scrollBar.isVertical=!0,p_g.bossLst.scrollBar.elasticBackTime=600,p_g.bossLst.scrollBar.elasticDistance=200,p_g.bossLst.itemRender=e.WildBossItemView,p_g._clipTab=new p_c(p_g.fbTab),p_g._clipTab.on("tabSelect",p_g,p_g.onTabSelect),p_g.fbTab.selectedIndex=-1,p_g.bossLst.renderHandler=Laya.Handler.create(p_g,p_g.updateItem,null,!1),p_g}e.WildBossPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fashion.fashionItemUI,__extends(b_s,p_l),b_s.prototype.initialize=function(){Azl(p_l,this)},Object.defineProperty(b_s.prototype,"dataSource",{set:function(e){null!=e&&this.update(e)},enumerable:!0,configurable:!0}),b_s.prototype.update=function(e){var p_l=FashionModel.instance.getFashionVo(e.id),p_g=(Config.item_material[e.id],new ModuleItemVO);LgcM.ins.heroVo,p_g.id=e.id,p_g.amount=0,this.item.name=e.name,this.item.isShowName=!0,this.item.setItemData(p_g,ItemBoxDefine.MODULE_ITEM);var b_s=p_l?p_l.getGrade():1;FashionModel.instance.getFashionUpgradeCnf(e.id,b_s),FashionModel.instance.isMaxGrade(e.id,b_s),this.redpoint.visible=FashionModel.instance.IsRedPoint(e.id),p_l?(this.hasEquipImg.visible=p_l.getInuse()==FashionUseStatus.isuse,this.item.nameTxt.color="#2c65ba"):(this.hasEquipImg.visible=!1,this.item.nameTxt.color="#ef2b2b"),this.item.setGray(null==p_l)},b_s);function b_s(){return p_l.call(this)||this}e.FashionItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fashion.fashionProCellUI,__extends(b_s,p_l),Object.defineProperty(b_s.prototype,"dataSource",{set:function(e){null!=e&&this.update(e)},enumerable:!0,configurable:!0}),b_s.prototype.update=function(e){var p_l=e[0],p_g=e[1],b_s=this.getPropCnf(p_l).showName;this.baseLab.text=b_s+":"+b_p.calsulate(e[1]);var d_u,b_e=t_e.instance.showFashionDic[t_e.instance.selectType],d_m=FashionModel.instance.getFashionVo(b_e.id),d_w=1;if(d_m)if(d_w=d_m.getGrade(),FashionModel.instance.isMaxGrade(b_e.id,d_w))this.addLab.text="",this.addImg.visible=!1;else{this.addImg.visible=!0,d_u=d_w+1;var f_t=FashionModel.instance.getFashionUpgradeCnf(b_e.id,d_u),v_z=this.getNextUpgradePropValue(f_t,p_l)-p_g;this.addLab.text="+"+b_p.calsulate(v_z)}else this.addLab.text="",this.addImg.visible=!1;this.hbox.refresh()},b_s.prototype.getNextUpgradePropValue=function(e,p_l){for(var p_g=0,b_s=e.prop;p_g<b_s.length;p_g++){var d_u=b_s[p_g];if(d_u[0]==p_l)return d_u[1]}},b_s.prototype.getPropCnf=function(e){return Orh(e,Config)},b_s);function b_s(){return p_l.call(this)||this}e.FashionProCell=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fashion.fashionViewUI,__extends(b_s,p_l),b_s.prototype.init=function(){Edl(this,Laya)},b_s.prototype.onFashionActivity=function(e){Skx(e,FashionModel,this)},b_s.prototype.onFashionUpgrade=function(e){Qrx(e,FashionModel)},b_s.prototype.oninitList=function(){this.fashionList.cells[t_e.instance.selects[1]].item.selectImg.visible=!1,t_e.instance.selects[this.dataSource]=0,this.fashionList.cells[0].item.selectImg.visible=!0;var e=this.fashionList.array[0];t_e.instance.showFashionDic[this.dataSource]=e,this.headSp.visible=this.bubbleSp.visible=!1;var p_l=LgcM.ins.heroVo;if(1==e.type)this.roleModel.changRoleSkin(p_l,!1,!0,1,e.id);else if(2==e.type)this.roleModel.changRoleSkin(p_l,!1,!0,e.id,1);else if(3==e.type){var p_g=Resource.ResUrl.getIconUrl(e.avatar[0]);this.setIcon(p_g,this.bubbleSp)}else 4==e.type&&(p_g=Resource.ResUrl.getIconUrl(e.avatar[0]),this.setIcon(p_g,this.headSp));this.updateView()},b_s.prototype.onList=function(e,p_l){if(e.type==Laya.Event.CLICK){null!=t_e.instance.selects[this.dataSource]&&(this.fashionList.cells[t_e.instance.selects[this.dataSource]].item.selectImg.visible=!1),t_e.instance.selects[this.dataSource]=p_l,this.fashionList.cells[p_l].item.selectImg.visible=!0;var p_g=this.fashionList.array[p_l];t_e.instance.showFashionDic[this.dataSource]=p_g,this.headSp.visible=this.bubbleSp.visible=!1;var b_s=LgcM.ins.heroVo;if(1==p_g.type)this.roleModel.changRoleSkin(b_s,!1,!0,b_s.fashionWeapon,p_g.id);else if(2==p_g.type)this.roleModel.changRoleSkin(b_s,!1,!0,p_g.id,b_s.fashionClothes);else if(3==p_g.type){var d_u=Resource.ResUrl.getIconUrl(p_g.avatar[0]);this.setIcon(d_u,this.bubbleSp)}else 4==p_g.type&&(d_u=Resource.ResUrl.getIconUrl(p_g.avatar[0]),this.setIcon(d_u,this.headSp));this.updateView()}},b_s.prototype.onLeftImg=function(){return Uns(this)},b_s.prototype.onRemove=function(){this.leftImg.off(Laya.Event.CLICK,this,this.onLeftImg),this.rightImg.off(Laya.Event.CLICK,this,this.onRightImg),this.closeBtn.off(Laya.Event.CLICK,this,this.onCloseBtn),this.backBtn.off(Laya.Event.CLICK,this,this.onCloseBtn),this.equipBtn.off(Laya.Event.CLICK,this,this.onEquipBtn),this.upBtn.off(Laya.Event.CLICK,this,this.onUpBtn),this.activityBtn.off(Laya.Event.CLICK,this,this.onActivityBtn),this.cdtHbox.off(Laya.Event.CLICK,this,this.onCdtHbox),this.stopUpLvEffect(),LED.off(l_r.FASHION_LIST,this,this.updateView),LED.off(l_r.FASHION_ACTIVITY,this,this.onFashionActivity),LED.off(l_r.FASHION_USE,this,this.onFashionUse),LED.off(l_r.FASHION_UPGRADE,this,this.onFashionUpgrade),LED.off(l_r.FASHION_QINMIDU,this,this.updatFashionPros),this.roleModel&&this.roleModel.clearRes()},b_s.prototype.onFashionUse=function(e){Gva(e,FashionModel,this,LgcM)},b_s.close=function(){Mba(UIM,b_s)},b_s.prototype.onEquipBtn=function(){if((j_x("2407_1086"))==this.equipBtn.label){var e=t_e.instance.showFashionDic[t_e.instance.selectType];FashionModel.instance.reqUseFashion(e.id,1),b_p.broadcastNotice((j_x("2407_1086_402")+j_x(2142)),1,"#75ea1a")}(j_x("249_2379"))==this.equipBtn.label&&(e=t_e.instance.showFashionDic[t_e.instance.selectType],FashionModel.instance.reqUseFashion(e.id,0),b_p.broadcastNotice((j_x("249_2379_402")+j_x(2142)),1,"#75ea1a"))},b_s.prototype.onCloseBtn=function(){Iwd(b_s)},b_s.prototype.onMenuTap=function(e){if(-1!=e){switch(this.headSp.visible=this.bubbleSp.visible=!1,this.clip0.index=0,this.clip1.index=1,this.clip2.index=2,this.clip3.index=3,this.redpoint1.visible=FashionModel.instance.canActivityitem(FashionType.fashion),this.redpoint2.visible=FashionModel.instance.canActivityitem(FashionType.equip),this.redpoint3.visible=FashionModel.instance.canActivityitem(FashionType.bubble),this.redpoint4.visible=FashionModel.instance.canActivityitem(FashionType.head),this.menuTap.selectedIndex=e,this.dataSource=e+1,t_e.instance.selectType=this.dataSource,this.dataSource){case FashionType.fashion:this.clip0.index=e+4;break;case FashionType.equip:this.clip1.index=e+4;break;case FashionType.bubble:this.clip2.index=e+4;break;case FashionType.head:this.clip3.index=e+4}this.updateView(),this.oninitList()}},b_s.prototype.onRightImg=function(){return Olb(this)},b_s.prototype.playUpLvEffect=function(){this.upLvEft&&(this.upLvEft.visible=!0,this.upLvEft.play(!1),this.upLvEft.on(Laya.Event.COMPLETE,this,this.stopUpLvEffect))},b_s.prototype.updatFashionPros=function(){var e=t_e.instance.showFashionDic[t_e.instance.selectType];if(this.activityBtn.label=(j_x("206_2335_1796")),this.activityBtn.disabled=!0,e)switch(e.activityType){case FashinonActivityType.TaskFashion:case FashinonActivityType.Activity:BagModel.instance.getItemCountByItemID(e.active[1][0][0],BagTypeDefine.BAG_TYPE_ITEM)>=e.active[1][0][1]&&(this.activityBtn.label=(j_x(2335)+" "+j_x(1796)),this.activityBtn.disabled=!1);break;case FashinonActivityType.AffinityDensity:FashionModel.instance.GetQinMiProgress(e.id)>=e.active[1]&&(this.activityBtn.label=(j_x(2335)+" "+j_x(1796)),this.activityBtn.disabled=!1)}var p_l=this.dataSource;t_e.instance.selectType=p_l;var p_g=FashionModel.instance.getFashionsCnf(p_l);t_e.instance.showFashionDic[this.dataSource]=t_e.instance.showFashionDic[this.dataSource]?t_e.instance.showFashionDic[this.dataSource]:p_g[0];var b_s=t_e.instance.showFashionDic[this.dataSource],d_u="";switch(this.requirementLab.text=b_s.desc,b_s.activityType){case FashinonActivityType.TaskFashion:case FashinonActivityType.Activity:d_u=(j_x("33_1035")+"")+BagModel.instance.getItemCountByItemID(b_s.active[1][0][0],BagTypeDefine.BAG_TYPE_ITEM)+"/"+b_s.active[1][0][1];break;case FashinonActivityType.AffinityDensity:d_u=(j_x("33_1035")+"")+FashionModel.instance.GetQinMiProgress(b_s.id)+"/"+b_s.active[1]}this.processLab.text=d_u;var b_e=(this.width-this.titleLab.width-this.requirementLab.width)/2;this.unactiveBox.x=b_e,b_e=(this.width-this.processLab.width)/2,this.processLab.x=b_e},b_s.prototype.setIcon=function(e,p_l){""!=e?(p_l.visible=!0,p_l=Resource.ResManager.Instance.getImg(e,p_l)):p_l.visible=!1},b_s.prototype.stopUpLvEffect=function(){this.upLvEft&&(this.upLvEft.off(Laya.Event.COMPLETE,this,this.stopUpLvEffect),this.upLvEft.visible=!1,this.upLvEft.stop())},b_s.prototype.onRenderList=function(e,p_l){e&&(this.fashionList.startIndex<1&&(this.leftImg.visible=!1,this.rightImg.visible=!0),this.fashionList.startIndex>=this.fashionList.array.length-4&&(this.rightImg.visible=!1,this.leftImg.visible=!0))},b_s.prototype.updateView=function(){this.redpoint1.visible=FashionModel.instance.canActivityitem(FashionType.fashion),this.redpoint2.visible=FashionModel.instance.canActivityitem(FashionType.equip),this.redpoint3.visible=FashionModel.instance.canActivityitem(FashionType.bubble),this.redpoint4.visible=FashionModel.instance.canActivityitem(FashionType.head);var e=this.dataSource;t_e.instance.selectType=e;var p_l=FashionModel.instance.getFashionsCnf(e);for(var p_g in this.fashionList.array=p_l,this.fashionList.cells[0],p_l)this.fashionList.cells[Number(p_g)].item.selectImg.visible=!1;if(null!=t_e.instance.selects[this.dataSource]){var b_s=t_e.instance.selects[this.dataSource];this.fashionList.cells[b_s].item.selectImg.visible=!0}else t_e.instance.selects[this.dataSource]=0,this.fashionList.cells[0].item.selectImg.visible=!0;t_e.instance.showFashionDic[this.dataSource]=t_e.instance.showFashionDic[this.dataSource]?t_e.instance.showFashionDic[this.dataSource]:p_l[0];var d_u=t_e.instance.showFashionDic[this.dataSource],b_e=FashionModel.instance.getFashionVo(d_u.id),d_m=b_e?b_e.getGrade():1;b_p.getNumSp(NumType.FASHION,d_m,this.domSp,0),this.domSp.x=10<=d_m?15:30;var d_w=FashionModel.instance.getFashionUpgradeCnf(d_u.id,d_m),f_t=b_p.calPropFight(FashionModel.instance.getFashionPropertys(d_w.prop));b_p.getNumSp(NumType.FIGHTING,f_t,this.powerSp,-9),this.propList.array=d_w.prop,this.activityBtn.visible=null==b_e;var v_z=Resource.ResUrl.getIconUrl(d_u.path);this.setIcon(v_z,this.themeImg);var d_h,r_t,t_n,f_y,p_q=FashionModel.instance.isMaxGrade(d_u.id,d_m);if(this.upBtn.visible=null!=b_e&&!p_q,this.equipBtn.visible=null!=b_e,this.equipBtn.label=null!=b_e&&b_e.getInuse()==FashionUseStatus.isuse?(j_x("249_2379")):(j_x("2407_1086")),p_q||(r_t=(d_h=FashionModel.instance.getFashionUpgradeCnf(d_u.id,d_m+1)).consume[0][0],t_n=d_h.consume[0][1],f_y=Config.CItem(r_t)),1<d_u.maxGrade?(this.MaxGradeLab.visible=!1,1==p_q&&(this.MaxGradeLab.visible=!0,this.activityBtn.visible=!1),this.cdtHbox.visible=!p_q&&!this.activityBtn.visible):(this.MaxGradeLab.visible=!1,0==this.activityBtn.visible&&(this.MaxGradeLab.visible=!0),this.cdtHbox.visible=this.activityBtn.visible),f_y){var h_h=b_e&&!p_q?f_y.name+"x"+t_n:d_u.desc;this.cdtLab2.text=h_h}else this.cdtLab2.text="",this.cdtHbox.visible=!1;this.processLab.visible=this.activityBtn.visible,this.unactiveBox.visible=this.activityBtn.visible,this.cdtHbox.refresh(),this.updatFashionPros(),this.themeImg.visible=!0,e==FashionType.bubble||e==FashionType.head?(this.roleModel.visible=!1,this.wingModel.visible=!1,this.wingModel.clearRes()):(this.roleModel.visible=!0,this.wingModel.visible=!0,this.wingModel.updateUI(LgcM.ins.heroVo.fashionWing)),this.updatePvSkillItem();var n_j=Config.fashion_fashion[d_u.id];n_j&&0<n_j.propType?(this.typeClip.visible=!0,this.typeClip_di.visible=!0,this.typeClip.index=n_j.propType-1):(this.typeClip.visible=!1,this.typeClip_di.visible=!1)},b_s.prototype.onAdded=function(){Gam(this,Laya,LED,l_r,FashionModel)},b_s.prototype.onActivityBtn=function(){Kzb(t_e,FashionModel)},b_s.open=function(){Ymy(UIM,b_s,FashionType)},b_s.prototype.onCdtHbox=function(){},b_s.prototype.initView=function(){this.MaxGradeLab.visible=!1,null==this.roleModel&&(this.roleModel=new n_k,this.fashionSp.addChild(this.roleModel)),this.menuTap.selectedIndex=FashionType.fashion-1,t_e.instance.selectType=FashionType.fashion,this.menuTap.selectHandler=new laya.utils.Handler(this,this.onMenuTap),this.themeImg.visible=!0,this.unActivityImg.visible=!1,this.equipBtn.visible=!1,this.activityBtn.visible=!1,this.upBtn.visible=!1,this.cdtHbox.visible=!1,this.processLab.visible=!1,this.unactiveBox.visible=!1,this.fashionList.array=[],this.fashionList.itemRender=e.FashionItem,this.fashionList.spaceX=5,this.fashionList.repeatY=1,this.fashionList.hScrollBarSkin="",this.fashionList.scrollBar.elasticBackTime=100,this.fashionList.scrollBar.elasticDistance=200,this.fashionList.mouseHandler=new laya.utils.Handler(this,this.onList),this.fashionList.renderHandler=new laya.utils.Handler(this,this.onRenderList);var p_l=FashionModel.instance.getFashionsCnf(FashionType.equip);this.fashionList.repeatX=p_l.length,this.fashionList.array=p_l,t_e.instance.showFashionDic[FashionType.fashion]=p_l[0],t_e.instance.selects[FashionType.fashion]=0,this.fashionList.cells[0].item.selectImg.visible=!0,this.propList.array=[],this.propList.repeatX=2,this.propList.spaceX=15,this.propList.repeatY=3,this.propList.spaceY=12,this.propList.itemRender=e.FashionProCell,this.headSp.visible=this.bubbleSp.visible=!1;var p_g=LgcM.ins.heroVo,b_s=this.fashionList.array[0];if(1==b_s.type)this.roleModel.changRoleSkin(p_g,!1,!0,1,b_s.id);else if(2==b_s.type)this.roleModel.changRoleSkin(p_g,!1,!0,b_s.id,1);else if(3==b_s.type){var d_u=Resource.ResUrl.getIconUrl(b_s.avatar[0]);this.setIcon(d_u,this.bubbleSp)}else 4==b_s.type&&(d_u=Resource.ResUrl.getIconUrl(b_s.avatar[0]),this.setIcon(d_u,this.headSp))},b_s.prototype.onUpBtn=function(){var e=t_e.instance.showFashionDic[t_e.instance.selectType],p_l=FashionModel.instance.getFashionVo(e.id),p_g=p_l?p_l.getGrade():1;FashionModel.instance.canGrade(e.id,p_g)&&FashionModel.instance.reqUpgradeFashion(e.id)},b_s.prototype.updatePvSkillItem=function(){var e=t_e.instance.showFashionDic[this.dataSource];if(e.skill){var p_l,p_g=FashionModel.instance.getFashionVo(e.id);p_l=p_g?p_g.getGrade():0;var b_s=new x_h(e.id,e.name,p_l,0,PassiveSkillType.FASHION);this.pvSkillItem.visible=!0,this.pvSkillItem.updateSkillUI(e.skill[0],PassiveSkillType.FASHION,b_s,!0)}else this.pvSkillItem.visible=!1},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.FashionView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.friend.friendDelConfirmUI,__extends(b_s,p_l),b_s.open=function(e){Qew(e,UIM,b_s)},b_s.prototype.onAdded=function(){Wkv(Laya,this,j_x)},b_s.prototype.onRemove=function(){Ydd(Laya,this)},b_s.close=function(){Wue(UIM,b_s)},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"delFriendBtn":FriendModel.instance.reqDelFriend(this.dataSource.pid),b_s.close()}},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.contentTxt.style.fontSize=24,e.contentTxt.style.align="center",e.contentTxt.style.color="#444675",e.contentTxt.style.leading=4,e}e.FriendDelConfirmPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.friend.friendDelUI,__extends(d_u,p_l),d_u.open=function(){Qwb(UIM,d_u)},d_u.prototype.onRemove=function(){Atp(LED,l_r,this)},d_u.prototype.onAdded=function(){Opb(this,Laya,LED,l_r)},d_u.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":d_u.close();break;case"delBtn":var p_g=this.delList.selectedItem;p_g&&e.FriendDelConfirmPanel.open(p_g)}},d_u.prototype.updateFriendItem=function(p_l,p_g){if(p_l){var b_s=p_l.dataSource,d_u=p_l.getChildByName("combatLab"),b_e=p_l.getChildByName("stateLvLab"),d_m=p_l.getChildByName("statusLab"),d_w=p_l.getChildByName("nameLab"),f_t=p_l.getChildByName("qinmiLab"),v_z=p_l.getChildByName("avatarImg"),d_h=p_l.getChildByName("lvLab"),r_t=p_l.getChildByName("frame"),t_n=Config.state_state[b_s.stateLv];if(v_z=Resource.ResManager.Instance.getImg(Resource.ResManager.getHeadUrl(b_s.entryId,b_s.headIcon),v_z),b_s.fashionAvatar&&4==Config.fashion_fashion[b_s.fashionAvatar].type){r_t.y=-3,r_t.visible=!0;var f_y=Config.fashion_fashion[b_s.fashionAvatar].avatar[0];f_y=Resource.ResUrl.getIconUrl(f_y),r_t=Resource.ResManager.Instance.getImg(f_y,r_t)}else r_t.visible=!1;d_u.text=b_s.combat.toString(),b_e.text=t_n.desc,d_w.text=b_s.name,d_h.text=Utils.$(("{1}"+j_x(2342)),b_s.lv),f_t.text=Utils.$((j_x("2283_194_1035")+" : {1}"),b_s.qinmi),d_m.text=e.FriendPanel.getStatusDesc(b_s.status,b_s.time),1!=b_s.status&&(v_z.gray=!0,d_m.color=e.FriendPanel.statusOfflineColor)}},d_u.close=function(){Sva(UIM,d_u)},d_u.prototype.updateView=function(){Gzp(this,FriendModel)},d_u);function d_u(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.delList.selectEnable=!0,e.delList.renderHandler=p_g.create(e,e.updateFriendItem,[],!1),e.delList.vScrollBarSkin="",e.delList.scrollBar.elasticDistance=200,e.delList.scrollBar.elasticBackTime=500,e}e.FriendDelPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.friend.friendInstructionsUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Age(this,Laya)},b_s.close=function(){Ycn(UIM,b_s)},b_s.open=function(){Emt(UIM,b_s)},b_s.prototype.onRemove=function(){Ien(this,Laya)},b_s.prototype.onCloseBtn=function(){Ywx(b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.friendInstructionsPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.friend.friendUI,__extends(b_s,p_l),b_s.open=function(e){void 0===e&&(e=0),UIM.open(b_s,["friend.atlas","marry.atlas","repair.atlas"],{index:e})},b_s.prototype.onSysOpen=function(){this.lock_dh.visible=this.dhBtn.disabled=!p_k.instance.checkSystemOpen(FuncDefine.dh),1==this.dataSource.index&&(this.dataSource.index=this.lock_dh.visible?0:this.dataSource.index)},b_s.prototype.onRewardReq=function(){var e=this.getChildByName("redPointImg"),p_l=this.friendMgrBox.getChildByName("friendReward").getChildByName("redPointImg");p_l?(p_l.visible=FriendModel.instance.friendRewardRed(),p_l.visible&&(e.visible=!0)):p_l.visible=!1},b_s.prototype.onTabSelect=function(p_l){if(2!==p_l||p_k.instance.checkSystemOpenByName("MarryMainView",!0))switch(this.noFriendLab.visible=0===FriendModel.instance._friendList.length&&0===p_l,this.noBlackLab.visible=0===FriendModel.instance._blackList.length&&3===p_l,this.backBtn.visible=!0,this.friendBox.visible=0===p_l,this.friendMgrBox.visible=0===p_l,this.blackBox.visible=3===p_l,this._dhPagePanel&&this._dhPagePanel.parent&&this._dhPagePanel.removeSelf(),this._MarryView&&this._MarryView.parent&&this._MarryView.removeSelf(),p_l){case 0:this.pageNameImg.skin="res/ui/friend/haoyou.png",this.pageNameImg.x=333;break;case 1:if(this.pageNameImg.skin="res/ui/friend/repair_zi_01.png",this.pageNameImg.x=291,!p_k.instance.checkSystemOpen(FuncDefine.dh)){var p_g=Config.funcOpen[FuncDefine.dh];return b_p.broadcastNotice(p_g.openError),void(this.socialTab.selectedIndex=0)}this._dhPagePanel||(this._dhPagePanel=new e.DhPagePanel),this.addChildAt(this._dhPagePanel,2),OfflineModel.reqDhInfo();break;case 3:break;case 2:this._MarryView||(this._MarryView=new e.MarryMainView),this.pageNameImg.skin="res/ui/marry/Image_yinyuan.png",this.pageNameImg.x=this.width/2-this.pageNameImg.width/2,this.addChildAt(this._MarryView,2),this.backBtn.visible=!1;break;default:this.pageNameImg.skin=""}},b_s.getStatusDesc=function(e,p_l){var p_g=SyncTime.serverTime;if(SyncTime.getStandardServerTime(),1===e)return(j_x("2035_360"));if(p_g<1e3*(p_l+86400)||0==p_l)return(j_x("1016_360"));var b_s=(p_g-1e3*p_l)/864e5;return 7<b_s?(j_x("1016_360_1737")+j_x(722)):Utils.$((j_x("1016_360")+"{1}"+j_x(2308)),Engine2d.MathUtils.absCeil(b_s))},b_s.prototype.onRemove=function(){this._clipTab.off("tabSelect",this,this.onTabSelect),LED.off(l_r.FRIEND_FRIEND_LIST_UPDATE,this,this.onUpdateInfo),LED.off(l_r.FRIEND_BLACK_LIST_UPDATE,this,this.onUpdateInfo),LED.off(l_r.FRIEND_REQUEST_LIST_UPDATE,this,this.onRequestListUpdate),LED.off(l_r.FRIEND_UPDATE_REWARD,this,this.onRequestListUpdate),LED.off(l_r.DOUBLEHANG_INVITELIST_UPDATE,this,this.updateDhRed),LED.off(l_r.DOUBLEHANG_INFO_UPDATE,this,this.updateDhRed),LED.off(l_r.MARRY_ACHIEVEMENT_UPDATE,this,this.updateMarryRed),LED.off(l_r.LOVERVALUE_AWARD_INFO,this,this.updateMarryRed),LED.off(l_r.LOVERVALUE_UPDATE,this,this.updateMarryRed),LED.off(l_r.MARRY_SWEET_UPGRADE,this,this.updateMarryRed),LED.off(l_r.ITEM_ADD,this,this.updateMarryRed),LED.off(l_r.ITEM_REMOVE,this,this.updateMarryRed),LED.off(l_r.ITEM_AMOUNT_CHANGE,this,this.updateMarryRed),LED.off(l_r.UPDATE_SWEET_SCORE,this,this.updateMarryRed),LED.off(l_r.UPDATE_MARRY_LIST,this,this.updateMarryRed),this._dhPagePanel&&this._dhPagePanel.parent&&this._dhPagePanel.removeSelf(),this._MarryView&&this._MarryView.parent&&this._MarryView.removeSelf()},b_s.prototype.updateFriendItem=function(e,p_l){if(e){var p_g=e.dataSource,d_u=e.getChildByName("combatLab"),b_e=e.getChildByName("stateLvLab"),d_m=e.getChildByName("statusLab"),d_w=e.getChildByName("nameLab"),f_t=e.getChildByName("qinmiLab"),v_z=e.getChildByName("avatarImg"),d_h=e.getChildByName("lvLab"),r_t=e.getChildByName("chatBtn"),t_n=e.getChildByName("dhBtn"),f_y=e.getChildByName("frame"),p_q=e.getChildByName("giveFriend"),h_h=e.getChildByName("dhRed"),n_j=Config.state_state[p_g.stateLv],j_l=Config.funcOpen[FuncDefine.dh].condition;if(h_h.visible=!(!HoleMoudel.instance.onSubActivate(p_g.stateLv,p_g.stateSubLv,j_l[0])||2==p_g.status||p_g.isDh),v_z=Resource.ResManager.Instance.getImg(Resource.ResManager.getHeadUrl(p_g.entryId,p_g.headIcon),v_z),p_g.fashionAvatar&&4==Config.fashion_fashion[p_g.fashionAvatar].type){f_y.visible=!0;var l_m=Config.fashion_fashion[p_g.fashionAvatar].avatar[0];l_m=Resource.ResUrl.getIconUrl(l_m),f_y=Resource.ResManager.Instance.getImg(l_m,f_y)}else f_y.visible=!1;d_u.text=p_g.combat.toString(),b_e.text=n_j.desc,d_w.text=p_g.name,d_h.text=Utils.$(("{1}"+j_x(2342)),p_g.lv),f_t.text=Utils.$((j_x("2283_194_1035")+" : {1}"),p_g.qinmi),d_m.text=b_s.getStatusDesc(p_g.status,p_g.time),p_g.status!=ONLINE_STATUE_DEFINE.ONLINE?(v_z.gray=!0,d_m.color=b_s.statusOfflineColor):(v_z.gray=!1,d_m.color=b_s.statusOnlineColor),v_z.on(Laya.Event.CLICK,e,this.onFriendClick),r_t.on(Laya.Event.CLICK,e,this.onFriendClick),p_q.on(Laya.Event.CLICK,e,this.onFriendClick),t_n.on(Laya.Event.CLICK,e,this.onFriendClick),t_n.visible=!this.dhBtn.disabled}},b_s.prototype.updateMarryRed=function(){Yeu(this,b_v)},b_s.prototype.onFriendClick=function(p_l){switch(p_l.target.name){case"avatarImg":var p_g=new Laya.Point;(p_g=this.localToGlobal(p_g)).x+=this.width-550,p_g.y+=this.height/2,e.CheckFriend.open(this.dataSource.pid,this.dataSource.name,3,p_g,[CheckBtnType.RoleInfo,CheckBtnType.PrivateChat]);break;case"chatBtn":e.ChatTallPanel.close(),e.ChatPrivatePanel.open(this.dataSource.pid);break;case"giveFriend":var b_s=this.dataSource,d_u={pid:b_s.pid,entryId:b_s.entryId,name:b_s.name,headIcon:b_s.headIcon,qinmi:b_s.qinmi,status:b_s.status,todayAddQinmi:b_s.todayAddQinmi,lastAddQinmiTime:b_s.lastAddQinmiTime,id:0,num:0};e.giveFriendRosePanel.open(d_u);break;case"dhBtn":var b_e=this.dataSource,d_m=OfflineModel.instance.dhFriendList||[],d_w=Config.funcOpen[FuncDefine.dh].condition,f_t=d_w[0][2];if(f_t=f_t||0,Config.state_state[d_w[0][1]].desc,h_m[Utils.$("TYPE_{1}",+f_t)],!HoleMoudel.instance.onSubActivate(b_e.stateLv,b_e.stateSubLv,d_w[0]))return void b_p.broadcastNotice((j_x("1653_2221_206")+j_x("656_481_790")+j_x("2249_1624_100")+","+j_x("1777_1068_1777")+j_x("1694_1557_855")+j_x("386_976")+"!"));for(var v_z in d_m)if(d_m[v_z].base.pid==b_e.pid&&1==d_m[v_z].isInvite)return void b_p.broadcastNotice((j_x("1068_1777_402")+j_x(2142)+","+j_x("15_1427_1653")+j_x("2221_1494_128")),BroadcastType.ERROR,Utils.Color.NAME_GREEN);if(b_e&&2==b_e.status)return void b_p.broadcastNotice((j_x("1653_2221_1300")+j_x("1016_360")+","+j_x("1777_1068_1777")+j_x("1694_1557_855")+j_x("386_976")+"!"));if(HoleMoudel.instance.funopenTypes(d_w[0]))return OfflineModel.reqDhInvite(b_e.pid),void n_d.instance.reqChatPrivate(b_e.pid,(j_x("352_506_2035")+j_x("1068_1777_1176")+j_x("33_562_790")+j_x(2249)+","+j_x("669_2068_790")+j_x("2249_2178_151")+j_x("420_2360_352")+j_x("2046_1068_1777")+j_x(976)+"!"),null,0,b_e.entryId,b_e.headIcon,0,b_p.config.mergSerId,b_e.name);b_p.broadcastNotice((j_x("1749_206_656")+j_x("481_790_2249")+j_x("1624_100")+","+j_x("1777_320_959")+j_x("767_2249_189")+j_x(976)+"!"))}},b_s.prototype.updateBlackItem=function(e,p_l){if(e){var p_g=e.dataSource,b_s=e.getChildByName("combatLab"),d_u=e.getChildByName("stateLvLab"),b_e=e.getChildByName("nameLab"),d_m=e.getChildByName("lvLab"),d_w=e.getChildByName("avatarImg"),f_t=e.getChildByName("frame");if(d_w=Resource.ResManager.Instance.getImg(Resource.ResManager.getHeadUrl(p_g.entryId,p_g.headIcon),d_w),p_g.fashionAvatar&&4==Config.fashion_fashion[p_g.fashionAvatar].type){f_t.visible=!0;var v_z=Config.fashion_fashion[p_g.fashionAvatar].avatar[0];v_z=Resource.ResUrl.getIconUrl(v_z),f_t=Resource.ResManager.Instance.getImg(v_z,f_t)}else f_t.visible=!1;var d_h=Config.state_state[p_g.stateLv];b_s.text=p_g.combat.toString(),d_u.text=d_h.desc,b_e.text=b_p.isSameServer(p_g.sid)?p_g.name:"s"+p_g.sid+p_g.name,d_m.text=Utils.$(("{1}"+j_x(2342)),p_g.lv)}},b_s.prototype.updateDhRed=function(){var e=DhModel.instance.dhinfo;if(e){var p_l=!(e.tinfo||!e.leftTimes);this.rp_dh.visible=!this.dhBtn.gray&&(DhModel.instance.onDhTaskRed()||OfflineModel.instance.hasInvite||OfflineModel.instance.hasTime||p_l)}},b_s.close=function(){Wzr(UIM,b_s)},b_s.prototype.onRequestListUpdate=function(){Uff(this)},b_s.prototype.onAdded=function(){this.on(Laya.UIEvent.CLICK,this,this.onMouseClick),this._clipTab.on("tabSelect",this,this.onTabSelect),OfflineModel.reqDhInfo(),FriendModel.instance.reqFriendList(),FriendModel.instance.reqRequestList(),FriendModel.instance.reqRecommendList(),FriendModel.instance.reqBlackList(),FriendModel.instance.reqFriendRewardList(),LED.on(l_r.FRIEND_FRIEND_LIST_UPDATE,this,this.onUpdateInfo),LED.on(l_r.FRIEND_BLACK_LIST_UPDATE,this,this.onUpdateInfo),LED.on(l_r.FRIEND_REQUEST_LIST_UPDATE,this,this.onRequestListUpdate),LED.on(l_r.FRIEND_UPDATE_REWARD,this,this.onRequestListUpdate),LED.on(l_r.DOUBLEHANG_INVITELIST_UPDATE,this,this.updateDhRed),LED.on(l_r.DOUBLEHANG_INFO_UPDATE,this,this.updateDhRed),LED.on(l_r.MARRY_ACHIEVEMENT_UPDATE,this,this.updateMarryRed),LED.on(l_r.LOVERVALUE_AWARD_INFO,this,this.updateMarryRed),LED.on(l_r.LOVERVALUE_UPDATE,this,this.updateMarryRed),LED.on(l_r.MARRY_SWEET_UPGRADE,this,this.updateMarryRed),LED.on(l_r.ITEM_ADD,this,this.updateMarryRed),LED.on(l_r.ITEM_REMOVE,this,this.updateMarryRed),LED.on(l_r.ITEM_AMOUNT_CHANGE,this,this.updateMarryRed),LED.on(l_r.UPDATE_SWEET_SCORE,this,this.updateMarryRed),LED.on(l_r.UPDATE_MARRY_LIST,this,this.updateMarryRed),this.updateView(),this.updateDhRed(),this.updateMarryRed(),this.rp_dh.visible=!1,p_k.instance.checkSystemOpen(FuncDefine.dh)?(this.lock_dh.visible=this.dhBtn.gray=!1,OfflineModel.reqDhFriendList()):this.lock_dh.visible=this.dhBtn.gray=!0,p_k.instance.checkSystemOpenByName("MarryMainView")?(this.lock_marry.visible=this.marryBtn.gray=!1,b_v.instance.reqWifeInfo()):this.lock_marry.visible=this.marryBtn.gray=!0,this.socialTab.selectedIndex=-1,this.socialTab.selectedIndex=this.dataSource.index},b_s.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"friendReqBtn":e.FriendReqPanel.open(),FriendModel.instance._haveNew=!1;break;case"friendRecomBtn":e.FriendRecomPanel.open();break;case"friendDelBtn":e.FriendDelPanel.open();break;case"friendReward":e.friendRewardPanel.open();break;case"blackDelBtn":var p_g=this.blackList.selectedItem;p_g&&FriendModel.instance.reqDelBlack(p_g.pid);break;case"frendTip":2==this.socialTab.selectedIndex?e.MarryHelpPanel.open():e.friendInstructionsPanel.open()}},b_s.prototype.onNewFriendReq=function(e){var p_l=this.getChildByName("redPointImg"),p_g=this.friendMgrBox.getChildByName("redPointImg");(e=e||FriendModel.instance.hasRequest())?(p_l.visible=!0,p_g.visible=!0):(p_l.visible=!1,p_g.visible=!1)},b_s.prototype.updateView=function(){Gbz(this)},b_s.prototype.onUpdateInfo=function(){var e=FriendModel.instance._friendList.sort(FriendModel.sortFriend);this.friendList.array=e,this.blackList.array=FriendModel.instance._blackList;var p_l=this.friendBox.getChildByName("friendNumLab"),p_g=Config.global[GlobalDefine.friend_limit];null!=p_g?(p_l.visible=!0,p_l.text=Utils.$("{1}/{2}",e.length,p_g.i_info)):p_l.visible=!1,this.noFriendLab.visible=0===e.length&&0===this.socialTab.selectedIndex,this.noBlackLab.visible=0===FriendModel.instance._blackList.length&&3===this.socialTab.selectedIndex,this.onRequestListUpdate()},b_s.statusOnlineColor="#58b40d",b_s.statusFontSize=22,b_s.statusOfflineColor="#8b94a6",b_s);function b_s(){var e=p_l.call(this)||this;return e._recommendPageIndex=1,e._friendPageIndex=1,e._pageShowNum=4,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.friendList.vScrollBarSkin="",e.friendList.scrollBar.elasticBackTime=200,e.friendList.scrollBar.elasticDistance=50,e.blackList.vScrollBarSkin="",e.blackList.scrollBar.elasticBackTime=200,e.blackList.scrollBar.elasticDistance=50,e._fpageGroup=new PageGroupList(e.friendList,5,e.fpageLeftBtn,e.fpageRightBtn,e.fpageLab),e._bpageGroup=new PageGroupList(e.blackList,5,e.bpageLeftBtn,e.bpageRightBtn,e.bpageLab),e._fpageGroup.selectEnable=!0,e._bpageGroup.selectEnable=!0,e._fpageGroup.renderHandler=Laya.Handler.create(e,e.updateFriendItem,[],!1),e._bpageGroup.renderHandler=Laya.Handler.create(e,e.updateBlackItem,[],!1),e._clipTab=new p_c(e.socialTab),e._clipTab.on("tabSelect",e,e.onTabSelect),e.socialTab.selectedIndex=-1,e}e.FriendPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.friend.friendRecomUI,__extends(d_u,p_l),d_u.open=function(){Knt(UIM,d_u)},d_u.close=function(){Swb(UIM,d_u)},d_u.prototype.onRemove=function(){Qyq(LED,l_r,this)},d_u.prototype.onAdded=function(){Mge(this,Laya,FriendModel,LED,l_r)},d_u.prototype.updateView=function(){Yus(FriendModel,this)},d_u.prototype.updateRecommendItem=function(e,p_l,p_g){if(p_l){var b_s=p_l.dataSource,d_u=p_l.getChildByName("combatLab"),b_e=p_l.getChildByName("stateLvLab"),d_m=p_l.getChildByName("nameLab"),d_w=p_l.getChildByName("reqBtn"),f_t=p_l.getChildByName("lvLab"),v_z=p_l.getChildByName("avatarImg"),d_h=p_l.getChildByName("frame"),r_t=Config.state_state[b_s.stateLv];if(v_z=Resource.ResManager.Instance.getImg(Resource.ResManager.getHeadUrl(b_s.entryId,b_s.headIcon),v_z),b_s.fashionAvatar&&Config.fashion_fashion[b_s.fashionAvatar]&&4==Config.fashion_fashion[b_s.fashionAvatar].type){d_h.visible=!0;var t_n=Config.fashion_fashion[b_s.fashionAvatar].avatar[0];t_n=Resource.ResUrl.getIconUrl(t_n),d_h=Resource.ResManager.Instance.getImg(t_n,d_h)}else d_h.visible=!1;d_u.text=b_s.combat.toString(),b_e.text=r_t.desc,d_m.text=b_s.name,f_t.text=Utils.$(("{1}"+j_x(2342)),b_s.lv),FriendModel.instance.isAlreadyReq(b_s.pid)&&(d_w.visible=!1)}},d_u.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":d_u.close();break;case"reqBtn":var p_l=this.recomList.selectedItem;p_l&&FriendModel.instance.reqAddFriend(p_l.pid);break;case"freshBtn":FriendModel.instance.reqRefreshRecommendList()}},d_u);function d_u(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.recomList.selectEnable=!0,e.recomList.renderHandler=p_g.create(e,e.updateRecommendItem,[e.recomList],!1),e.recomList.vScrollBarSkin="",e.recomList.scrollBar.elasticDistance=200,e.recomList.scrollBar.elasticBackTime=500,e}e.FriendRecomPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.friend.friendReqUI,__extends(d_u,p_l),d_u.open=function(){Wux(UIM,d_u)},d_u.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":d_u.close();break;case"acceptBtn":var p_l=this.requestList.selectedItem;p_l&&FriendModel.instance.reqAcceptFriend(p_l.pid,0);break;case"refuseBtn":var p_g=this.requestList.selectedItem;p_g&&FriendModel.instance.reqAcceptFriend(p_g.pid,1);break;case"autoAcpCBox":var b_s=this.autoAcpCBox.selected?1:0;SetupModel.instance.reqSettingFlags(SettingType.FRIEND,b_s)}},d_u.close=function(){Sej(UIM,d_u)},d_u.prototype.updateView=function(){Ipc(this,FriendModel,SetupModel,SettingType)},d_u.prototype.onAdded=function(){Cdt(this,Laya,FriendModel,LED,l_r)},d_u.prototype.updateRequestItem=function(e,p_l,p_g){if(p_l){var b_s=p_l.dataSource,d_u=p_l.getChildByName("combatLab"),b_e=p_l.getChildByName("stateLvLab"),d_m=p_l.getChildByName("nameLab"),d_w=p_l.getChildByName("lvLab"),f_t=p_l.getChildByName("avatarImg"),v_z=p_l.getChildByName("frame"),d_h=Config.state_state[b_s.stateLv];if(f_t=Resource.ResManager.Instance.getImg(Resource.ResManager.getHeadUrl(b_s.entryId,b_s.headIcon),f_t),b_s.fashionAvatar&&4==Config.fashion_fashion[b_s.fashionAvatar].type){v_z.visible=!0;var r_t=Config.fashion_fashion[b_s.fashionAvatar].avatar[0];r_t=Resource.ResUrl.getIconUrl(r_t),v_z=Resource.ResManager.Instance.getImg(r_t,v_z)}else v_z.visible=!1;d_u.text=b_s.combat.toString(),b_e.text=d_h.desc,d_m.text=b_s.name,d_w.text=Utils.$(("{1}"+j_x(2342)),b_s.lv)}},d_u.prototype.onRemove=function(){Cse(LED,l_r,this)},d_u.prototype.onListUpdate=function(e){e&&(FriendModel.instance.delRequestById(e.pid),this.updateView())},d_u);function d_u(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.requestList.selectEnable=!0,e.requestList.renderHandler=p_g.create(e,e.updateRequestItem,[e.requestList],!1),e.requestList.vScrollBarSkin="",e.requestList.scrollBar.elasticDistance=200,e.requestList.scrollBar.elasticBackTime=500,e}e.FriendReqPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.friend.friendRewardUI,__extends(d_u,p_l),d_u.open=function(){Mmh(UIM,d_u)},d_u.prototype.onAdded=function(){Mbn(this,Laya,LED,l_r)},d_u.prototype.updateRequestItem=function(e,p_l){if(e){var p_g=e.dataSource;e.update(p_g,p_l)}},d_u.prototype.onRemove=function(){Ihv(this,Laya,LED,l_r)},d_u.prototype.onMouseClick=function(p_l){var p_g=p_l.target;switch(p_g.name){case"closeBtn":case"backBtn":d_u.close();break;case"b_go":p_g.dataSource.jump&&(1221===p_g.dataSource.jump[0]&&d_u.close(),2<=p_g.dataSource.jump.length?e.WindowClass.openWin(p_g.dataSource.jump[0],[p_g.dataSource.jump[1]]):e.WindowClass.openWin(p_g.dataSource.jump[0]))}},d_u.close=function(){Wsk(UIM,d_u,e)},d_u.prototype.updateView=function(){Cie(this,FriendModel,Laya)},d_u.prototype.CloseItemAin=function(){Yao(e)},d_u);function d_u(){var b_s=p_l.call(this)||this;return b_s.on(Laya.Event.ADDED,b_s,b_s.onAdded),b_s.on(Laya.Event.REMOVED,b_s,b_s.onRemove),b_s.friendList.itemRender=e.friendRewardItem,b_s.friendList.renderHandler=p_g.create(b_s,b_s.updateRequestItem,null,!1),b_s.friendList.vScrollBarSkin="",b_s.friendList.scrollBar.elasticDistance=200,b_s.friendList.scrollBar.elasticBackTime=500,b_s}e.friendRewardPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.friend.friendRewardItemUI,__extends(b_s,p_l),b_s.prototype.onRender=function(e,p_l){if(e){var p_g=e.getChildByName("itemBox");p_g.isShowName=!1,p_g.isShowNum=!0,p_g.setItemData(e.dataSource)}},b_s.prototype.update=function(e,p_l){var p_g=Config.friend_friend_activeness[e.id];if(this.index=p_l,p_g){this.t_desc.text=p_g.conditionClient;for(var d_u=b_p.getRewardDatas(p_g.reward);d_u.length<4;)d_u.push(null);this.list.array=d_u,this.b_get.visible=this.b_go.visible=this.i_got.visible=!1,0==e.friendRewardState?this.b_get.visible=!0:2==e.friendRewardState?this.i_got.visible=!0:this.b_go.visible=!0;var b_e=Math.min(e.progress,p_g.condition[1]);this.p_bar.value=b_e/p_g.condition[1],this.t_bar.text=Math.floor(100*this.p_bar.value)+"%"}b_s.isTween&&b_s.ainStartIndex<p_l&&this.ani1.play(0,!1);var d_m=FriendModel.instance.ParseCfgJump(p_g.jump[0]);this.b_go.dataSource={jump:d_m},this.b_get.on(Laya.Event.CLICK,this,this.onClick,[p_l,e.id])},b_s.prototype.onClick=function(e,p_l){Sxk(e,p_l,this,b_s,FriendModel)},b_s.isTween=!1,b_s.ainStartIndex=0,b_s);function b_s(){var e=p_l.call(this)||this;return e.index=0,e.list.renderHandler=Laya.Handler.create(e,e.onRender,null,!1),e}e.friendRewardItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.friend.friendStoryHelpUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Ktb(this,Laya,LED,l_r,FriendModel)},b_s.prototype.cellClick=function(e,p_l){switch(p_l.target.name){case"sendHelp":b_p.broadcastNotice((j_x("571_1802_402")+j_x(2142)),1,Config.color[1002].color),n_d.instance.reqChatPrivate(e.pid,this.dataSource.desc,this.dataSource.parameters,this.dataSource.msgId,e.entryId,e.headIcon,0,b_p.config.mergSerId,e.name)}},b_s.prototype.onRemove=function(){Ckr(this,Laya,LED,l_r)},b_s.prototype.updateView=function(){var e=FriendModel.instance._friendList.sort(FriendModel.sortFriend);e.length<=0?(this.friendList.visible=!1,this.noFriendLab.visible=!0):(this.friendList.visible=!0,this.noFriendLab.visible=!1,this.friendList.array=e)},b_s.open=function(e,p_l,p_g,d_u){void 0===d_u&&(d_u=0),UIM.open(b_s,null,{fbId:e,desc:p_l,parameters:p_g,msgId:d_u},!1,!1,!0,!0)},b_s.prototype.renderList=function(p_l,p_g){var b_s=p_l.dataSource,d_u=p_l.getChildByName("combatLab"),b_e=p_l.getChildByName("stateLvLab"),d_m=p_l.getChildByName("statusLab"),d_w=p_l.getChildByName("nameLab"),f_t=p_l.getChildByName("qinmiLab"),v_z=p_l.getChildByName("avatarImg"),d_h=p_l.getChildByName("lvLab"),r_t=p_l.getChildByName("sendHelp"),t_n=p_l.getChildByName("frame"),f_y=Config.state_state[b_s.stateLv];if(v_z=Resource.ResManager.Instance.getImg(Resource.ResManager.getHeadUrl(b_s.entryId,b_s.headIcon),v_z),b_s.fashionAvatar&&4==Config.fashion_fashion[b_s.fashionAvatar].type){t_n.visible=!0;var p_q=Config.fashion_fashion[b_s.fashionAvatar].avatar[0];p_q=Resource.ResUrl.getIconUrl(p_q),t_n=Resource.ResManager.Instance.getImg(p_q,t_n)}else t_n.visible=!1;d_u.text=b_s.combat.toString(),b_e.text=f_y.desc,d_w.text=b_s.name,d_h.text=Utils.$(("{1}"+j_x(2342)),b_s.lv),f_t.text=Utils.$((j_x("2283_194_1035")+" : {1}"),b_s.qinmi),d_m.text=e.FriendPanel.getStatusDesc(b_s.status,b_s.time),b_s.status!=ONLINE_STATUE_DEFINE.ONLINE?(v_z.gray=!0,d_m.color=e.FriendPanel.statusOfflineColor):(v_z.gray=!1,d_m.color=e.FriendPanel.statusOnlineColor),r_t.on(Laya.Event.CLICK,this,this.cellClick,[b_s])},b_s.close=function(){Anl(UIM,b_s)},b_s.prototype.onClick=function(){Kpu(b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.friendList.vScrollBarSkin="",e.friendList.scrollBar.elasticBackTime=200,e.friendList.scrollBar.elasticDistance=50,e.friendList.renderHandler=Laya.Handler.create(e,e.renderList,null,!1),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.friendStoryHelpPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.friend.getGiftUI,__extends(b_s,p_l),b_s.open=function(e){Ymq(e,UIM,b_s)},b_s.prototype.UpdataView=function(){var e=Config.global[GlobalDefine.friend_gift_tip].s_info;e=(e=e.replace("%Name",this.dataSource.name)).replace("%Inum",this.dataSource.num);var p_l=Math.max(1,this.dataSource.id),p_g=Config.CItem(Config.friend_give[p_l].itemId).name;p_g=p_g||"",e=e.replace("%Iname",p_g),this.tipLab.innerHTML=e,this.tipLab.x=(this.width-this.tipLab.contextWidth)/2},b_s.close=function(){Ewa(UIM,b_s)},b_s.prototype.PalyRoleEffect=function(e,p_l,p_g){p_l&&e&&(e.visible=!0,e.IsPlayStand=!1,e.changeModel("effects/others"),e.setAction("friendFlower01",0,!1,85),e.actBackFunc=function(){Wqe(e)},p_g&&Laya.timer.once(p_g,this,(function(){this.PalyScatteredEffect()})))},b_s.prototype.onAdded=function(){this.on(Laya.UIEvent.CLICK,this,this.onMouseClick),this.EffecteModelLeft||(this.EffecteModelLeft=new n_k,this.modelContaintLeft.addChild(this.EffecteModelLeft)),this.EffecteModel||(this.EffecteModel=new n_k,this.modelContaint.addChild(this.EffecteModel)),this.EffectScattered||(this.EffectScattered=new n_k,this.modelScattered.addChild(this.EffectScattered)),this.PalyRoleEffect(this.EffecteModelLeft,this.modelContaintLeft,1e3),this.PalyRoleEffect(this.EffecteModel,this.modelContaint),this.UpdataView()},b_s.prototype.onRemoved=function(){this.off(Laya.UIEvent.CLICK,this,this.onMouseClick),this.EffecteModel&&this.EffecteModel.clearRes(),this.EffecteModelLeft&&this.EffecteModelLeft.clearRes(),this.EffectScattered&&this.EffectScattered.clearRes()},b_s.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"chat":e.ChatPrivatePanel.open(this.dataSource.pid),b_s.close();break;case"giveGift":e.giveFriendRosePanel.open(this.dataSource),b_s.close()}},b_s.prototype.PalyScatteredEffect=function(){if(this.EffectScattered){this.EffectScattered.visible=!0,this.EffectScattered.changeModel("effects/others"),this.EffectScattered.setAction("friendFlower02",0,!1);var e=this.EffectScattered;this.EffectScattered.IsPlayStand=!1,this.EffectScattered.actBackFunc=function(){e&&(e.visible=!1)}}},b_s.statusOnlineColor="#58b40d",b_s.statusOfflineColor="#8b94a6",b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.tipLab.style.fontSize=24,e.tipLab.style.color="#444675",e.tipLab.style.left=3,e.tipLab.style.leading=7,e}e.getGiftView=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.friend.giveFriendRoseUI,__extends(d_u,p_l),d_u.open=function(e){Wvx(e,UIM,d_u)},d_u.prototype.PalyRoleEffect=function(e,p_l,p_g){p_l&&e&&(e.visible=!0,e.changeModel("effects/others"),e.setAction("friendFlower01",0,!1,85),e.IsPlayStand=!1,e.actBackFunc=function(){Cbe(e)},p_g&&Laya.timer.once(p_g,this,(function(){this.PalyScatteredEffect()})))},d_u.close=function(){Kmg(UIM,d_u)},d_u.prototype.RefershList=function(){var e=Config.friend_give,p_l=[];for(var p_g in e){var b_s=[];b_s.push(e[p_g].itemId),b_s.push(e[p_g].addQinmi),b_s.push(e[p_g].id),p_l.push(b_s)}this.roseList.array=p_l},d_u.prototype.SelectItem=function(e){this.useNumTxt.mouseEnabled=!0;var p_l=this.roseList.getCell(this.roseList.selectedIndex);this.RefershList();var p_g=0;p_l&&(p_g=0<(p_g=parseInt(p_l.numTxt.text))?1:0,this.useNumTxt.text=p_g.toString()),this.updataAffinity()},d_u.prototype.onAdded=function(){this.on(Laya.UIEvent.CLICK,this,this.onMouseClick),this.roseList.renderHandler=p_g.create(this,this.onItemRender,null,!1),this.roseList.selectHandler=p_g.create(this,this.SelectItem,null,!1),LED.on(l_r.UPDATA_FRIEND_GIFT,this,this.UpdateView),this.useNumTxt.on(Laya.Event.INPUT,this,this.updataAffinity),this.EffecteModelLeft||(this.EffecteModelLeft=new n_k,this.modelContaintLeft.addChild(this.EffecteModelLeft)),this.EffecteModel||(this.EffecteModel=new n_k,this.modelContaint.addChild(this.EffecteModel)),this.EffectScattered||(this.EffectScattered=new n_k,this.modelScattered.addChild(this.EffectScattered)),this.InitView()},d_u.prototype.UpdateView=function(e){Max(e,this,b_p,j_x,Config)},d_u.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":d_u.close();break;case"addBtn":this.updataAffinity(1);break;case"cutBtn":this.updataAffinity(-1);break;case"sureGive":if(this.IsSelect()){var p_l=parseInt(""==this.useNumTxt.text?"0":this.useNumTxt.text);if(FriendModel.instance.IsThatVeryDay(this.dataSource.lastAddQinmiTime)){var p_g=Config.global[GlobalDefine.friend_qinmi_lmt].i_info;if(p_g&&0!=p_g&&this.dataSource.todayAddQinmi>=p_g)return void b_p.broadcastNotice((j_x("257_1738_2339")+j_x("1254_437_223")+j_x("2046_2283_194")+j_x("1035_1300_1117")+j_x("1067_2128")))}var b_s=this.roseList.selectedItem;p_l<=0?r_f.instance.isWindow(b_s[0]):FriendModel.instance.reqFriendGive(b_s[2],this.dataSource.pid,p_l)}else b_p.broadcastNotice((j_x("1777_320_517")+j_x("1191_2217_1841")+" "))}},d_u.prototype.updataAffinity=function(e){void 0===e&&(e=0);var p_l=parseInt(""==this.useNumTxt.text?"1":this.useNumTxt.text)+("number"==typeof e?e:0);p_l=Math.max(0,p_l);var p_g=this.roseList.selectedItem;if(p_g){var b_s=BagModel.instance.getItemCountByItemID(p_g[0],BagTypeDefine.BAG_TYPE_ITEM);p_l=p_l<=b_s?p_l:b_s,this.useNumTxt.text=p_l.toString(),this.IsSelect()&&0!=p_l?(this.qinmiaddLab.visible=!0,this.qinmiaddLab.text="+"+(p_l*p_g[1]).toString()):this.qinmiaddLab.visible=!1}else this.qinmiaddLab.visible=!1},d_u.prototype.RefershQinmi=function(e){this.qinmiLab.text=Utils.$((j_x("2283_194_1035")+" : {1}"),e)},d_u.prototype.onItemRender=function(e,p_l){var p_g=new ModuleItemVO;p_g.id=e.dataSource[0],p_g.amount=BagModel.instance.getItemCountByItemID(e.dataSource[0],BagTypeDefine.BAG_TYPE_ITEM),e.alwaysShowNum=!0,p_l==this.roseList.selectedIndex?e.setItemData(p_g,2,!0):e.setItemData(p_g,2,!1)},d_u.prototype.IsSelect=function(){return Aqw(this)},d_u.prototype.onRemoved=function(){this.off(Laya.UIEvent.CLICK,this,this.onMouseClick),this.useNumTxt.off(Laya.Event.INPUT,this,this.updataAffinity),LED.off(l_r.UPDATA_FRIEND_GIFT,this,this.UpdateView),this.EffecteModelLeft&&(this.EffecteModelLeft.visible=!1,this.EffecteModelLeft.clearRes()),this.EffecteModel&&(this.EffecteModel.visible=!1,this.EffecteModel.clearRes()),this.EffectScattered&&(this.EffectScattered.visible=!1,this.EffectScattered.clearRes()),FriendModel.instance.reqFriendList()},d_u.prototype.InitView=function(){this.RefershList(),this.avatarImg.skin=Resource.ResManager.getHeadUrl(this.dataSource.entryId,this.dataSource.headIcon),this.useNumTxt.text="0",this.useNumTxt.mouseEnabled=this.IsSelect(),this.nameLab.text=this.dataSource.name,this.RefershQinmi(this.dataSource.qinmi),this.dataSource.status!=ONLINE_STATUE_DEFINE.ONLINE?(this.statusLab.text=(j_x("1016_360")),this.statusLab.color=d_u.statusOfflineColor):(this.statusLab.text=(j_x("2035_360")),this.statusLab.color=d_u.statusOnlineColor),this.updataAffinity(1)},d_u.prototype.PalyScatteredEffect=function(){if(this.EffectScattered){this.EffectScattered.visible=!0,this.EffectScattered.changeModel("effects/others"),this.EffectScattered.setAction("friendFlower02",0,!1);var e=this.EffectScattered;this.EffectScattered.IsPlayStand=!1,this.EffectScattered.actBackFunc=function(){e&&(e.visible=!1)}}},d_u.statusOnlineColor="#008931",d_u.statusOfflineColor="#8b94a6",d_u);function d_u(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemoved),p_g.roseList.itemRender=e.ItemBox,p_g.useNumTxt.skin="",p_g.useNumTxt.restrict="0-9",p_g}e.giveFriendRosePanel=b_s}(UI=UI||{});var GuideRunStatus,GuideActionType,GuideRunTalismanState,GuideBaseActionNode=function(){function e(e){this._status=GuideRunStatus.Completed,this._type=e}return Object.defineProperty(e.prototype,"checkStatus",{get:function(){return this._status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),e.prototype.parse=function(e){},e}(),GuideTrigger=function(e){function p_l(){return e.call(this,GuideActionType.Condition)||this}return __extends(p_l,e),p_l.prototype.parse=function(e){var p_l=e;this._key=p_l[0],this._value=p_l[1],this._value1=p_l[2]?p_l[2]:null},Object.defineProperty(p_l.prototype,"checkStatus",{get:function(){switch(this._key){case GuideTriggerType.ACCEPT_TASK:var e=p_p.instance.mainVo;e&&(e.id>this._value?this._status=GuideRunStatus.Completed:e.id===this._value?this._status=GuideRunStatus.Running:this._status=GuideRunStatus.Failure);break;case GuideTriggerType.PROGRESS_TASK:if((e=p_p.instance.mainVo)&&e.id>this._value)this._status=GuideRunStatus.Completed;else{var p_l=p_p.instance.getTaskVoByid(this._value);p_l&&p_l.state===TaskState.COMPLETE?this._status=GuideRunStatus.Running:this._status=GuideRunStatus.Failure}break;case GuideTriggerType.LEVEL:var p_g=LgcM.ins.heroVo;p_g&&(p_g.level>=this._value?this._status=GuideRunStatus.Running:this._status=GuideRunStatus.Failure);break;case GuideTriggerType.SYSTEM_OPEN:var b_s=GuideManager.instance.curFuncId;this._value===b_s?(this._status=GuideRunStatus.Running,GuideManager.instance.curFuncId=-1):p_k.instance.checkSystemOpen(this._value)?this._status=GuideRunStatus.Completed:this._status=GuideRunStatus.Failure;break;case GuideTriggerType.STATE_LV:var d_u=StateModel.instance.getStateLv(),b_e=StateModel.instance.getStateSubLv();d_u==this._value&&b_e==this._value1?this._status=GuideRunStatus.Running:this._status=GuideRunStatus.Failure;break;case GuideTriggerType.TALISMAN_STATE:var d_m=TalismanModel.instance.singHasTalismanCan(this._value);d_m&&d_m.state==this._value1?this._status=GuideRunStatus.Running:this._status=GuideRunStatus.Failure;break;case GuideTriggerType.TALISMAN_OPEN:var d_w=SystemNoticeManager.instance.getCanTalismanGain();if(d_w[0]&&1<=SystemNoticeManager.instance.talismanBarValue(d_w[0])){var f_t=Config.talisman_talisman[d_w[0].talismanid];f_t&&f_t.id==this._value&&(this._status=GuideRunStatus.Running)}else this._status=GuideRunStatus.Failure}return this._status},enumerable:!0,configurable:!0}),p_l.prototype.checkType=function(e){return Etq(e,this)},p_l}(GuideBaseActionNode),GuideComponentNode=function(e){function p_l(){var p_l=e.call(this,GuideActionType.Component)||this;return p_l._count=1,p_l}return __extends(p_l,e),p_l.prototype.parse=function(e){Ahd(e,this)},Object.defineProperty(p_l.prototype,"param",{get:function(){return this._param},enumerable:!0,configurable:!0}),p_l.prototype.checkIsClick=function(e,p_l,p_g){if(void 0===p_g&&(p_g=null),this._key===e&&this._param.name===p_l){if(!p_g)return!(this._count=0);if("number"==typeof p_g){if(p_g===this._param.index||this._param.id)return!(this._count=0)}else for(var b_s in p_g)if(this._param[b_s]===p_g[b_s])return!(this._count=0)}return!1},Object.defineProperty(p_l.prototype,"checkStatus",{get:function(){return this._count<=0?GuideRunStatus.Completed:GuideRunStatus.Failure},enumerable:!0,configurable:!0}),p_l.prototype.resetStatus=function(){Yyv(this)},Object.defineProperty(p_l.prototype,"key",{get:function(){return this._key},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"name",{get:function(){return this._param.name},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"name2",{get:function(){return this._param.name},enumerable:!0,configurable:!0}),p_l.prototype.clear=function(){Wwq(this)},p_l}(GuideBaseActionNode),GuidePhaseVo=function(e){function p_l(){return e.call(this,GuideActionType.GuidePhase)||this}return __extends(p_l,e),p_l.prototype.parse=function(e){var p_l,p_g,b_s=e;for(var d_u in this._id=b_s.id,this._actionNodes=[],b_s.params)(p_l=new GuideComponentNode).parse(b_s.params[d_u]),p_l.key===n_a.PANEL?this._winName=p_l.name:p_l.key===n_a.COMPONENT_PANEL&&(p_g=p_l.name,p_l.clear(),p_l=null),p_l&&(p_g&&(p_l.boxParentName=p_g),p_l.key===n_a.COMPONENT_CLOSE_BTN&&(p_l.boxParentName=null),this._actionNodes.push(p_l));this._step=0},Object.defineProperty(p_l.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"winName",{get:function(){return this._winName},enumerable:!0,configurable:!0}),p_l.prototype.hasWin=function(e){return Qcj(e,this)},p_l.prototype.closeWin=function(e){return Evc(e,this,n_a)},p_l.prototype.checkWinIsOpen=function(){return!!this._winName&&UIM.instance.isOpenWin(UI[this._winName])},p_l.prototype.checkWinIsInTop=function(){return!!this._winName&&UIM.instance.checkWinIsInTop(UI[this._winName])},p_l.prototype.openWin=function(e){return Sip(e,this,n_a)},p_l.prototype.checkIsClick=function(e,p_l,p_g){void 0===p_g&&(p_g=null);for(var b_s=0;b_s<this._actionNodes.length;b_s++)if(this._actionNodes[b_s].checkIsClick(e,p_l,p_g))return this._step=b_s+1,!0;return!1},Object.defineProperty(p_l.prototype,"curStep",{get:function(){return this._step},set:function(e){this._step=e},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"curStepNode",{get:function(){return this._actionNodes[this._step]},enumerable:!0,configurable:!0}),p_l.prototype.isLastStep=function(){return Ayd(this)},Object.defineProperty(p_l.prototype,"checkStatus",{get:function(){if(this._actionNodes[this._actionNodes.length-1].checkStatus==GuideRunStatus.Completed)return GuideRunStatus.Completed;for(var e=0;e<this._actionNodes.length;e++)if((this._actionNodes[e].key!=n_a.ACTIVITY||this._actionNodes[e].key!=n_a.ACTIVITY||this._actionNodes[e].key!=n_a.TASK)&&this._actionNodes[e].checkStatus!=GuideRunStatus.Completed)return GuideRunStatus.Running;return GuideRunStatus.Completed},enumerable:!0,configurable:!0}),p_l.prototype.clear=function(){if(this._winName=null,this._actionNodes)for(var e in this._actionNodes)this._actionNodes[e].clear(),this._actionNodes[e]=null;this._actionNodes=null},p_l}(GuideBaseActionNode);!function(e){e[e.Completed=1]="Completed",e[e.Failure=2]="Failure",e[e.Running=3]="Running"}(GuideRunStatus=GuideRunStatus||{}),function(e){e[e.Condition=1]="Condition",e[e.Component=2]="Component",e[e.Guide=3]="Guide",e[e.GuidePhase=4]="GuidePhase"}(GuideActionType=GuideActionType||{}),function(e){e[e.NONACTIVATED=0]="NONACTIVATED",e[e.ACTIVATED=1]="ACTIVATED",e[e.FIGHT=2]="FIGHT",e[e.CANACTIVATED=3]="CANACTIVATED"}(GuideRunTalismanState=GuideRunTalismanState||{});var n_a=function(){function e(){}return e.PANEL="Panel",e.SHORT_CUT="ShortCut",e.ACTIVITY="Activity",e.MAIN_LEFT="MainLeft",e.CHAT="Chat",e.LIST="List",e.TAB="Tab",e.COMPONENT="Component",e.TASK="Task",e.COMPONENT_PANEL="Component_panel",e.COMPONENT_CLOSE_BTN="Component_closeBtn",e}(),GuideTriggerType=function(){function e(){}return e.ACCEPT_TASK="acceptTask",e.PROGRESS_TASK="progressTask",e.LEVEL="level",e.SYSTEM_OPEN="systemOpen",e.STATE_LV="stateLv",e.TALISMAN_STATE="talisamnState",e.TALISMAN_OPEN="talismanOpen",e}();!function(e){var p_l,p_g=(p_l=ui.window.guide.guide_mouseUI,__extends(b_s,p_l),Object.defineProperty(b_s,"instance",{get:function(){return this._instance||(this._instance=new b_s),this._instance},enumerable:!0,configurable:!0}),b_s.prototype.onAdded=function(e){Aig(e,Laya,this)},b_s.checkIsWinAndUpdate=function(e,p_l){return void 0===p_l&&(p_l=!0),!!b_s.instance.parent&&b_s.instance.checkIsWin(e,p_l)},b_s.prototype.updateData=function(p_l,p_g){void 0===p_g&&(p_g=!1),this._component&&this._component.off(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),this._panel&&this._panel.off(Laya.Event.CLICK,this,this.onPanelClick),this._framePanel&&this._framePanel.parent&&this._framePanel.removeSelf();var d_u=(this._phaseVo=p_l).curStepNode;if(d_u){var d_m=void 0,d_w=d_u.param;if(this._component=GuideManager.instance.getTargetComponent(d_u,p_l.winName),!this._component)return b_s.close(),void(d_u.key===n_a.PANEL&&UIM.instance.isOpenWin(e[p_l.winName])&&GuideManager.instance.openWin(p_l.winName));switch(p_l.winName&&""!=p_l.winName&&(this._panel=UIM.instance.getWin(e[p_l.winName]),this._panel&&this._panel.on(Laya.Event.CLICK,this,this.onPanelClick)),d_u.key){case n_a.LIST:var f_t=this._component;if(f_t){var v_z=d_w.component,d_h=d_w.id;0<=(t_n=d_w.index)?this._component=f_t.getCell(t_n):0<d_h&&(this._component=f_t.getCellByValue(d_h)),this._component&&(v_z&&""!=v_z&&(this._component=this._component.getChildByName(v_z)),d_m=this._component.localToGlobal(new Laya.Point))}break;case n_a.TAB:var r_t=this._component;if(r_t){var t_n;if(0<=(t_n=d_w.index)){if(r_t.selectedIndex===t_n)return this._component=null,void this.checkClick(!1);this._component=r_t.getChildAt(t_n)}this._component&&(d_m=this._component.localToGlobal(new Laya.Point))}break;default:d_m=this._component.localToGlobal(new Laya.Point),this._component.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown,[this._component])}if(d_m){var f_y=d_m.x,p_q=d_m.y,h_h=Config.guide_guidePhase[p_l.id],n_j=h_h.styles?h_h.styles[p_l.curStep]:0;1!==(n_j=n_j||0)&&2!==n_j||(this._framePanel||(this._framePanel=new b_e),this._framePanel.parent||UIM.instance.addToTopLayer(this._framePanel,1),this._framePanel.updateData(p_l,d_m,this._component,!0,2===n_j?60:20),this.img_mouse.visible=this.img_quan.visible=!1,this._framePanel.visible=!1),d_m.x=f_y+(this._component.width-this.width)/2,d_m.y=p_q+(this._component.height-this.height)/2,0===n_j||2===n_j?(this.img_mouse.visible=!0,p_g&&2!=n_j&&(this.img_quan.visible=!1),Laya.Tween.to(this,{f_u:d_m.x,j_l:d_m.y},400,null,Laya.Handler.create(this,this.moveComplete,[n_j]),0,!0,!0)):this._framePanel.visible=!0}this._component&&(this.visible=!0,this._component.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown,[this._component]),this.delayCheckCompIsVisible(!0))}else b_s.close()},b_s.prototype.checkClick=function(e){void 0===e&&(e=!0);var p_l=this._phaseVo.curStepNode;p_l.key===n_a.TAB||p_l.key===n_a.LIST?GuideManager.instance.checkIsClick(p_l.key,p_l.name,p_l.param,e):GuideManager.instance.checkIsClick(p_l.key,p_l.name,null,e)},b_s.prototype.checkIsWin=function(e,p_l){return void 0===p_l&&(p_l=!0),!(!this.parent||!this._phaseVo||this._phaseVo.winName!==e||(p_l?this.updateData(this._phaseVo,!1):(this.visible=!1,this._framePanel&&(this._framePanel.visible=!1)),0))},b_s.prototype.onPanelClick=function(e){var p_l=e.target;(!p_l||"closeBtn"!==p_l.name&&"backBtn"!==p_l.name)&&p_l!=this._component&&this._component&&Laya.timer.once(800,this,this.delayCheckCompIsVisible)},b_s.prototype.delayCheckCompIsVisible=function(e){if(void 0===e&&(e=!1),this._component){var p_l=this._component;if(p_l&&!1!==p_l.visible)for(;p_l&&p_l!=this._panel;){if(!(p_l=p_l.parent))return;if(p_l&&!1===p_l.visible){if(this._phaseVo){if(e)return void b_s.close();this._phaseVo.openWin(this._phaseVo.winName),b_s.open(this._phaseVo)}return}}else e&&this._phaseVo&&b_s.close()}},b_s.prototype.mainleftIsWin=function(e,p_l){return void 0===p_l&&(p_l=!0),!(!this.parent||!this._phaseVo||300!==this._phaseVo.id||(p_l?this.updateData(this._phaseVo,!1):(this.visible=!1,this._framePanel&&(this._framePanel.visible=!1)),0))},b_s.prototype.onLoop=function(){if(this.img_quan.visible){1.3<this.img_quan.scaleX?this._quanDir=-1:this.img_quan.scaleX<.8&&(this._quanDir=1);var e=.06*this._quanDir;this.img_quan.scaleX+=e,this.img_quan.scaleY+=e,this.img_mouse.y+=5*e}this._framePanel&&this._framePanel.parent&&this._framePanel.onLoop()},b_s.prototype.moveComplete=function(e){void 0===e&&(e=0),this.img_quan.visible=!0,1!==e&&2!==e||(this._framePanel.visible=!0)},b_s.checkIsWinMainLeft=function(e,p_l){return void 0===p_l&&(p_l=!0),!!b_s.instance.parent&&b_s.instance.mainleftIsWin(e,p_l)},b_s.open=function(e){Aby(e,b_s,UIM)},b_s.prototype.onRemoved=function(e){this._component&&this._component.off(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),Laya.timer.clear(this,this.onLoop),Laya.timer.clear(this,this.delayCheckCompIsVisible),this._framePanel&&this._framePanel.parent&&this._framePanel.removeSelf(),this._phaseVo=null},b_s.prototype.onMouseDown=function(e,p_l){Idy(e,p_l,Laya,this)},b_s.close=function(){Obe(b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e._quanDir=1,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.GuidePanel=p_g;var d_u,b_e=(d_u=ui.window.guide.guide_frameUI,__extends(d_m,d_u),d_m.prototype.onLoop=function(){this._moveSpeed&&(this._moveDis+=Math.abs(this._moveSpeed.y+this._moveSpeed.x),this.y+=this._moveSpeed.y,this.x+=this._moveSpeed.x,20<this._moveDis&&(this._moveDis=0,this._moveSpeed.x=-this._moveSpeed.x,this._moveSpeed.y=-this._moveSpeed.y))},d_m.prototype.updateData=function(e,p_l,p_g,b_s,d_u){void 0===b_s&&(b_s=!0),void 0===d_u&&(d_u=50);var b_e=Config.guide_guidePhase[e.id],d_m=b_e.arrowDir?b_e.arrowDir[e.curStep]:"down";b_s?(this._moveSpeed=new Laya.Point,this._moveDis=0):this._moveSpeed=null;var d_w=p_g.height/2,f_t=p_g.width/2;switch(this._lastPos=p_l,d_m){case"up":this._lastPos.x=p_l.x+(p_g.width-this.width)/2,this._lastPos.y=p_l.y+d_w+d_u,this.img_arrow.rotation=180,this.img_arrow.x=this.width/2,this.img_arrow.y=this.img_arrow.height/2,this._moveSpeed&&this._moveSpeed.setTo(0,1);break;case"down":this._lastPos.x=p_l.x+(p_g.width-this.width)/2,this._lastPos.y=p_l.y+d_w-this.height-d_u,this.img_arrow.rotation=0,this.img_arrow.x=this.width/2,this.img_arrow.y=this.height-this.img_arrow.height/2,this._moveSpeed&&this._moveSpeed.setTo(0,-1);break;case"left":this._lastPos.x=p_l.x+f_t+d_u,this._lastPos.y=p_l.y+(p_g.height-this.height)/2,this.img_arrow.rotation=90,this.img_arrow.x=this.img_arrow.height/2,this.img_arrow.y=this.height/2,this._moveSpeed&&this._moveSpeed.setTo(1,0);break;case"right":this._lastPos.x=p_l.x+f_t-this.width-d_u,this._lastPos.y=p_l.y+(p_g.height-this.height)/2,this.img_arrow.rotation=-90,this.img_arrow.x=this.width-this.img_arrow.height/2,this.img_arrow.y=this.height/2,this._moveSpeed&&this._moveSpeed.setTo(-1,0)}var v_z=b_e.arrowOffset?b_e.arrowOffset[e.curStep]:[0,0];this.x=this._lastPos.x+v_z[0],this.y=this._lastPos.y+v_z[1];var d_h=b_e.arrowContent?b_e.arrowContent[e.curStep]:(j_x("932_1835_2020")+j_x(243));this.contentTxt.text=d_h},d_m);function d_m(){var e=d_u.call(this)||this;return e._quanDir=1,e._moveDis=0,e}e.GuideFramePanel=b_e}(UI=UI||{});var b_q=function(e){function p_l(){return e.call(this,GuideActionType.Guide)||this}return __extends(p_l,e),p_l.prototype.parse=function(e){var p_l=e;p_l.triggerCondition&&(this._triggerVo=new GuideTrigger,this._triggerVo.parse(p_l.triggerCondition)),p_l.endCondition&&(this._endTriggerVo=new GuideTrigger,this._endTriggerVo.parse(p_l.endCondition))},Object.defineProperty(p_l.prototype,"checkStatus",{get:function(){var e=GuideRunStatus.Failure;return this._endTriggerVo&&(e=this._endTriggerVo.checkStatus),e!=GuideRunStatus.Failure?GuideRunStatus.Completed:this._triggerVo?this._triggerVo.checkStatus:void 0},enumerable:!0,configurable:!0}),p_l.prototype.checkPhaseStatus=function(){return Exr(this,GuideRunStatus)},p_l.prototype.hasWin=function(e){return Ure(e,this)},p_l.prototype.closeWin=function(e){if(this._phaseVos)if(this.hasWin(e)){for(var p_l=0;p_l<this._phaseVos.length;p_l++)if(this._phaseVos[p_l].closeWin(e))return this._step=p_l-1,0<=this._step?this.curPhaseVo().checkWinIsOpen()?this.curPhaseVo().openWin(this.curPhaseVo().winName):this._step=0:(this._step=0,this._phaseVos[p_l].checkStatus===GuideRunStatus.Completed&&this._phaseVos[p_l+1]&&!this._phaseVos[p_l+1].winName&&(this._step=p_l+1)),!0}else if(this.checkWinIsInTop())return!0;return!1},p_l.prototype.openWin=function(e){if(this._phaseVos)if(this.hasWin(e)){for(var p_l=0;p_l<this._phaseVos.length;p_l++)if(this._phaseVos[p_l].openWin(e))return this._step=p_l,!0}else{if(this.checkWinIsInTop())return!0;this._step=0,this.curPhaseVo().curStep=0}return!1},p_l.prototype.curPhaseVo=function(){return Qehq(this)},p_l.prototype.checkWinIsInTop=function(){if(this._phaseVos){for(var e=void 0,p_l=0;p_l<this._phaseVos.length;p_l++)this._phaseVos[p_l].checkWinIsOpen()&&(e=this._phaseVos[p_l].winName);if(e)return this.openWin(e),!0}return!1},p_l.prototype.initPhase=function(e){if(e){this._phaseVos=[];var p_l=void 0;for(var p_g in e)(p_l=new GuidePhaseVo).parse(Config.guide_guidePhase[e[p_g]]),this._phaseVos.push(p_l);this._step=0}},p_l.prototype.checkIsClick=function(e,p_l,p_g){if(void 0===p_g&&(p_g=null),this._phaseVos)for(var b_s=0;b_s<this._phaseVos.length;b_s++)if(this._phaseVos[b_s].checkIsClick(e,p_l,p_g))return this._step=b_s,!0;return!1},p_l}(GuideBaseActionNode);!function(e){var p_l,p_g=(p_l=ui.window.guild.GuildAuctionHistoryUI,__extends(b_s,p_l),b_s.open=function(e){Kcpb(e,UIM,b_s)},b_s.close=function(){Cpyn(UIM,b_s)},b_s.prototype.onTabSelect=function(e){var p_l;0==e&&((p_l=new c2w_guild_auction_history).type=parseInt(this.dataSource),DB.instance.query(c2w_guild_auction_history,p_l)),1==e&&((p_l=new c2m_guild_auction_rec).type=parseInt(this.dataSource),DB.instance.query(c2m_guild_auction_rec,p_l))},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close()}},b_s.prototype.onAdded=function(){this.on(Laya.UIEvent.CLICK,this,this.onMouseClick),this.list.renderHandler=Laya.Handler.create(this,this.onListRender,null,!1),LED.on(l_r.GUILD_AUCTION_HISTORY,this,this.onAuctionHistory),LED.on(l_r.GUILD_AUCTION_REC,this,this.onAuctionRec);var e=new c2w_guild_auction_history;e.type=parseInt(this.dataSource),DB.instance.query(c2w_guild_auction_history,e),this.tab.selectedIndex=0,this._tab.on("tabSelect",this,this.onTabSelect)},b_s.prototype.onAuctionHistory=function(e){Sknx(e,this)},b_s.prototype.sort=function(e,p_l){return Ybos(e,p_l)},b_s.prototype.onAuctionRec=function(e){Eysq(e,this)},b_s.prototype.recSort=function(e,p_l){return Quku(e,p_l)},b_s.prototype.onRemoved=function(){this.off(Laya.UIEvent.CLICK,this,this.onMouseClick),this.list.renderHandler&&this.list.renderHandler.recover(),this.list.renderHandler=null,LED.off(l_r.GUILD_AUCTION_HISTORY,this,this.onAuctionHistory),LED.off(l_r.GUILD_AUCTION_REC,this,this.onAuctionRec)},b_s.prototype.onListRender=function(e,p_l){if(0==this.tab.selectedIndex){var p_g=e.dataSource,b_s=new Date(1e3*p_g.time);if(!p_g.auctionId||!p_g.price)return;var d_u=Config.CItem(Config.guild_guildAuction[p_g.auctionId].itemId);e.getChildByName("t_time").text=Utils.fmtDate(b_s),e.getChildByName("t_name").text=d_u.name,e.getChildByName("t_price").text=p_g.price.toString()}else if(1==this.tab.selectedIndex){if(p_g=e.dataSource,b_s=new Date(1e3*p_g.buyTs),!p_g.buyPrice||!p_g.auctionId)return;d_u=Config.CItem(Config.guild_guildAuction[p_g.auctionId].itemId),e.getChildByName("t_time").text=Utils.fmtDate(b_s),e.getChildByName("t_name").text=d_u.name,e.getChildByName("t_price").text=p_g.buyPrice.toString()}},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.tab.selectedIndex=0,e._tab=new p_c(e.tab),e.list.array=null,e.list.scrollBar.elasticBackTime=200,e.list.scrollBar.elasticDistance=50,e}e.GuildAuctionHistory=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guild.GuildAuctionUI,__extends(b_s,p_l),b_s.open=function(){GuildModel.instance.hasGuild&&UIM.open(b_s,["guild.atlas"])},b_s.prototype.onAuctionList=function(e){if(this.isFirst){if(this.isFirst=!1,this.isSecend=!0,!e.list||0==e.list.length)return void(this.tab.selectedIndex=1-this.tab.selectedIndex);this.isSecend=!1}else if(this.isSecend&&(this.isSecend=!1,!e.list||0==e.list.length))return void(this.tab.selectedIndex=1-this.tab.selectedIndex);if(this.list2.array=e.list,this.updatePageText(),this.t_fenhong.text=e.bonus.toString(),this.t_null0.visible=1==e.type&&(!e.list||0==e.list.length),this.t_null1.visible=2==e.type&&(!e.list||0==e.list.length),2==e.type)this.bonusBox.visible=!1,this.t_getBonus.text="";else{var p_l=GuildModel.instance.getMemberByID(b_p.playerId);p_l&&p_l.todayCtrb>=Config.global[GlobalDefine.guild_auction_bonus_ctrb].i_info?(this.bonusBox.visible=!0,this.t_getBonus.text=""):(this.bonusBox.visible=!1,this.t_getBonus.text=Utils.$((j_x("1327_2308_796")+j_x("1413_300_45")+j_x("1117_1012")+"{1}"+j_x("2060_1919_507")+j_x("1996_2224_456")),Config.global[GlobalDefine.guild_auction_bonus_ctrb].i_info))}},b_s.prototype.onAuctionBuy=function(e){},b_s.prototype.onAdded=function(){Usyj(LED,l_r,this,Laya)},b_s.prototype.reqList=function(){if(this.tab){var e=new c2w_guild_auction_list;e.type=this.tab.selectedIndex+1,DB.instance.query(c2w_guild_auction_list,e)}else b_s.close()},b_s.prototype.sendBid=function(e){var p_l=new c2w_guild_auction_bid;p_l.id=e[0],p_l.type=e[1],DB.instance.query(c2w_guild_auction_bid,p_l)},b_s.prototype.onRemoved=function(){this.list.array=null,this.list2.array=null,LED.off(l_r.GUILD_AUCTION_LIST,this,this.onAuctionList),LED.off(l_r.GUILD_AUCTION_BID,this,this.onAuctionBid),LED.off(l_r.GUILD_AUCTION_BUY,this,this.onAuctionBuy),this.off(Laya.UIEvent.CLICK,this,this.onMouseClick),this.list.renderHandler&&this.list.renderHandler.recover(),this.list.renderHandler=null,this.list2.renderHandler&&this.list2.renderHandler.recover(),this.list2.renderHandler=null,this._tab.off("tabSelect",this,this.onTabSelect),GuildModel.instance.hasAuction=!1,LED.event(l_r.GUILD_AUCTION_LIST)},b_s.prototype.updatePageText=function(){var e=this.list2.totalPage;e<1&&(e=1);var p_l=this.list2.page+1;p_l<1&&(p_l=1),e<p_l&&(p_l=e),this.t_page.text=p_l+"/"+e},b_s.close=function(){Ougt(UIM,b_s)},b_s.prototype.onTabSelect=function(e){this.reqList(),this.pageBox.visible=1==e||!0,this.list.visible=0==e&&!1,this.list2.visible=1==e||!0},b_s.prototype.onMouseClick=function(p_l){var p_g=p_l.target,d_u=this.list2.page;switch(p_g.name){case"closeBtn":case"backBtn":return void b_s.close();case"b_bid":case"b_buy":var b_e=p_g.parent.dataSource,d_m=Config.guild_guildAuction[b_e.auctionId];return void(b_e.curPrice<d_m.price&&"b_bid"==p_g.name?b_p.confirm(Utils.$((j_x("68_2032_572")+j_x(2218)+"{1}"+j_x("1263_869_507")+j_x(1996)+"{2}"+j_x("793_1027")+"?"),b_e.curPrice,Config.CItem(d_m.itemId).name),this.sendBid,[b_e.id,this.tab.selectedIndex+1],!1,!1,!1,!0,"GuildAuctionPanel"):b_p.confirm(Utils.$((j_x("68_2032_572")+j_x(2218)+"{1}"+j_x("1263_869_507")+j_x(1996)+"{2}"+j_x("793_1027")+"?"),d_m.price,Config.CItem(d_m.itemId).name),this.sendBuy,[b_e.id,this.tab.selectedIndex+1],!1,!1,!1,!0,"GuildAuctionPanel"));case"b_log":return void e.GuildAuctionHistory.open(this.tab.selectedIndex+1);case"addBtn":d_u+=1;break;case"addTenBtn":d_u+=10;break;case"cutBtn":d_u-=1;break;case"cutTenBtn":d_u-=10;break;default:return}d_u<0?d_u=0:d_u>this.list2.totalPage-1&&(d_u=this.list2.totalPage-1),this.list2.page=d_u,this.updatePageText()},b_s.prototype.sendBuy=function(e){var p_l=new c2w_guild_auction_buy;p_l.id=e[0],p_l.type=e[1],DB.instance.query(c2w_guild_auction_buy,p_l)},b_s.prototype.onAuctionBid=function(e){},b_s.prototype.onListRender=function(e,p_l){e&&(e.callback=this.reqList,e.update())},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.tab.selectedIndex=0,e._tab=new p_c(e.tab),e.list.itemRender=l_c,e.list.array=null,e.list.scrollBar.elasticBackTime=200,e.list.scrollBar.elasticDistance=50,e.list2.itemRender=l_c,e.list2.array=null,e}e.GuildAuctionPanel=p_g}(UI=UI||{});var l_c=function(e){function p_l(){return e.call(this)||this}return __extends(p_l,e),p_l.prototype.update=function(){var e=this.dataSource,p_l=Config.guild_guildAuction[e.auctionId],p_g=new ModuleItemVO;p_g.id=p_l.itemId,p_g.amount=1,this.itemBox.isShowName=!1,this.itemBox.setItemData(p_g);var b_s=Config.CItem(p_l.itemId);this.t_name.text=b_s.name;var d_u=e.endTime-SyncTime.serverTime/1e3;this.t_time.text=0<d_u?Utils.$(("{1}"+j_x("1865_396_2426")),Utils.formatTimeStr(d_u)):"",this.t_bid.text=e.curPrice.toString(),this.t_buy.text=p_l.price.toString(),this.t_info.text=e.pid==b_p.playerId?(j_x("1749_2046_203")+j_x("603_1081_2251")):0==e.pid?"":(j_x("1036_603_283")),Laya.timer.loop(1e3,this,this.updateTime,null,!0),this.on(Laya.Event.REMOVED,this,this.onRemoved)},p_l.prototype.updateTime=function(){var e=this.dataSource;if(e){var p_l=Math.floor(e.endTime-SyncTime.serverTime/1e3);0<=p_l?Utils.$(("{1}"+j_x("1865_396_2426")),Utils.formatTimeStr(p_l)):(Laya.timer.clear(this,this.updateTime),this.callback&&Laya.timer.callLater(this,this.callback))}},p_l.prototype.onRemoved=function(){Mwiq(this,Laya)},p_l}(ui.window.guild.GuildAuctionItemUI);!function(e){var p_l,p_g=(p_l=ui.window.guild.GuildBossDamageUI,__extends(b_s,p_l),b_s.open=function(e){Iahu(e,UIM,b_s)},b_s.prototype.onAdded=function(){this.list.renderHandler=Laya.Handler.create(this,this.onListRender,null,!1),this.on(Laya.UIEvent.CLICK,this,this.onMouseClick),LED.on(l_r.GUILD_BOSS_RANK,this,this.onRankData);var e=new c2w_guild_boss_rank;e.id=parseInt(this.dataSource),DB.instance.query(c2w_guild_boss_rank,e)},b_s.close=function(){Ygfs(UIM,b_s)},b_s.prototype.onRemoved=function(){this.list.renderHandler&&this.list.renderHandler.recover(),this.list.renderHandler=null,this.off(Laya.UIEvent.CLICK,this,this.onMouseClick),LED.off(l_r.GUILD_BOSS_RANK,this,this.onRankData)},b_s.prototype.onListRender=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("i_rank");(b_s=b_p.getNumSp(NumType.FIGHTING_SMALL,p_g.rank,b_s)).visible=3<p_g.rank;var d_u=e.getChildByName("c_rank");d_u.index=p_g.rank-1,d_u.visible=p_g.rank<=3,e.getChildByName("t_name").text=p_g.name,e.getChildByName("t_dmg").text=b_p.calsulate(p_g.dmg),e.getChildByName("t_ctrb").text=p_g.ctrb.toString()},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":b_s.close()}},b_s.prototype.onRankData=function(e){this.t_point.text=Config.guild_guildBoss[this.dataSource].name,this.t_myname.text=LgcM.ins.heroVo.name;var p_l=!1;for(var p_g in e.list)if(e.list[p_g].pid==b_p.playerId){p_l=!0,this.t_myctrb.text=e.list[p_g].ctrb.toString(),this.t_mydmg.text=e.list[p_g].dmg.toString(),this.i_myrank=b_p.getNumSp(NumType.FIGHTING_SMALL,e.list[p_g].rank,this.i_myrank),this.i_myrank.visible=3<e.list[p_g].rank,this.c_myrank.index=e.list[p_g].rank-1,this.c_myrank.visible=e.list[p_g].rank<=3;break}p_l||(this.t_myctrb.text=(j_x(814)),this.t_mydmg.text=(j_x(814)),this.i_myrank.visible=!1,this.c_myrank.visible=!1);var b_s=GuildModel.instance.bossList[this.dataSource],d_u=GuildModel.instance.bossState(b_s);e.list&&0<e.list.length&&2==d_u?(this.killBox.visible=!0,this.t_name.text=e.list[0].name,this.t_ctrb.text=e.list[0].ctrb.toString(),this.killBox.refresh()):this.killBox.visible=!1,this.list.array=e.list},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.list.array=null,e.list.scrollBar.elasticBackTime=200,e.list.scrollBar.elasticDistance=50,e}e.GuildBossDamage=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guild.GuildBossOpenUI,__extends(b_s,p_l),b_s.open=function(e){Kqzm(e,UIM,b_s)},b_s.prototype.onMouseClick=function(e){var p_l=e.target;switch(GuildModel.instance.guildInfo,p_l.name){case"b_open1":case"b_open4":case"b_open3":var p_g=new c2w_guild_boss_open;p_g.id=parseInt(this.dataSource),p_g.mode=parseInt(p_l.name.substr(-1));var d_u=parseInt(this.dataSource);if(!GuildModel.instance.canOpenStronghold(p_g.mode,d_u))return void GuildModel.instance.toAccessTips(p_g.mode);DB.instance.query(c2w_guild_boss_open,p_g);case"closeBtn":b_s.close()}},b_s.close=function(){Idrz(UIM,b_s)},b_s.prototype.onRemoved=function(){Qpyi(this,Laya)},b_s.prototype.onAdded=function(){Mnsi(this,Laya)},b_s.prototype.updateView=function(){var p_l=parseInt(this.dataSource),p_g=Config.guild_guildBoss[p_l],b_s=(GuildModel.instance.bossList[p_l],GuildModel.instance.guildInfo);this.t_bossName.text=Utils.$((j_x("155_1186_2083")+j_x(932)+"{1}"),p_g.name);var d_u=new ModuleItemVO;d_u.id=93,d_u.amount=p_g.consume3;var b_e=this.getChildByName("itemBox2");b_e||((b_e=new e.ItemBox).pos(this.item2.x,this.item2.y),b_e.isShowName=!1,this.addChild(b_e)),b_e.setItemData(d_u),this.t_itemName2.text=(j_x("796_1413_141")+j_x(51)),this.t_itemCount2.text=d_u.amount.toString(),BagModel.instance.getItemCountByItemID(d_u.id,-1),this.t_itemHad2.color=b_s.wealth<d_u.amount?"#ff0a00":"#00802e",this.t_itemHad2.text=b_s.wealth.toString();var d_m=new ModuleItemVO;d_m.id=p_g.consume2[0][0],d_m.amount=p_g.consume2[0][1];var d_w=this.getChildByName("itemBox3");d_w||((d_w=new e.ItemBox).pos(this.item3.x,this.item3.y),d_w.isShowName=!1,this.addChild(d_w)),d_w.setItemData(d_m),this.t_itemName3.text=Config.CItem(d_m.id).name,this.t_itemCount3.text=d_m.amount.toString();var f_t=BagModel.instance.getItemCountByItemID(d_m.id);this.t_itemHad3.color=f_t<d_m.amount?"#ff0a00":"#00802e",this.t_itemHad3.text=f_t.toString(),this.getChildByName("b_open1").disabled=0<GuildModel.instance.bossFreeOpen},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.GuildBossOpen=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guild.GuildBossSetupUI,__extends(b_s,p_l),b_s.open=function(){Uoez(UIM,b_s)},b_s.prototype.onAdded=function(){Ecfd(this,Laya,LED)},b_s.prototype.onItemRender=function(e,p_l){Wlcu(e,p_l,this)},b_s.prototype.updateAllConsume=function(){var e=GuildModel.instance.countAutoBossConsume(this.autoOpenBoss),p_l=e[SetBossOpenType.gold],p_g=e[SetBossOpenType.money];this.consumeGuild.text=Utils.$((j_x("796_1413_141")+j_x(51)+"{1}"),p_g),this.consumeGold.text=Utils.$((j_x("1263_869")+"{1}"),p_l),this.consumeGold.color=b_p.checkCoin(CoinDefine.GOLD,p_l)?"#008931":"#e32828",this.consumeGuild.color=GuildModel.instance.guildInfo.wealth>=p_g?"#008931":"#e32828"},b_s.close=function(){Mftt(UIM,b_s)},b_s.prototype.updateView=function(){var e=[];for(var p_l in this.autoOpenBoss={},Config.guild_guildBoss)e.push(Config.guild_guildBoss[p_l]);this.itemList.array=e,this.updateAllConsume()},b_s.prototype.onRidioChange=function(e,p_l){switch(p_l+1){case SetBossOpenType.gold:this.setAutoGuild(e,SetBossOpenType.gold);break;case SetBossOpenType.money:this.setAutoGuild(e,SetBossOpenType.money);break;default:this.setAutoGuild(e,SetBossOpenType.not_set)}this.updateAllConsume()},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":b_s.close();break;case"sureBtn":f_t.open(this.autoOpenBoss),b_s.close()}},b_s.prototype.onRemoved=function(){Ezun(this,Laya,LED)},b_s.prototype.setAutoGuild=function(e,p_l){void 0===p_l&&(p_l=0),this.autoOpenBoss||(this.autoOpenBoss={}),this.autoOpenBoss[e]=p_l},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.itemList.array=null,e.itemList.selectEnable=!1,e.lastIndex=-1,e.itemList.itemRender=b_e,e.itemList.renderHandler=Laya.Handler.create(e,e.onItemRender,null,!1),e.itemList.vScrollBarSkin="",e}e.GuildBossOpenSet=p_g;var d_u,b_e=(d_u=ui.window.guild.GuildBossSetItemUI,__extends(d_m,d_u),d_m.prototype.setUpdate=function(e,p_l){var p_g=this.dataSource,b_s=GuildModel.instance.autoOpenBoss[p_g.id];this.titleName.text=p_g.name,GuildModel.instance.autoOpenBoss[p_g.id]&&0<GuildModel.instance.autoOpenBoss[p_g.id]?(this.checkGroup.mouseEnabled=!1,this.checkGroup.selectedIndex=b_s-1):(this.checkGroup.mouseEnabled=!0,this.checkGroup.selectedIndex=p_l?p_l-1:-1)},d_m.prototype.onRidioChange=function(e){var p_l=this.checkGroup.items[e],p_g=this.checkGroup.items[this.lastIndex];p_l&&this.checkGroup.items[e].on(Laya.Event.CLICK,this,this.onSelectItem),p_g&&this.checkGroup.items[this.lastIndex].off(Laya.Event.CLICK,this,this.onSelectItem),this.lastIndex=e,LED.event("change",[this.dataSource.id,e])},d_m.prototype.onSelectItem=function(e){Aqak(e,this)},d_m);function d_m(){var e=d_u.call(this)||this;return e.lastIndex=-1,e.checkGroup.selectHandler=Laya.Handler.create(e,e.onRidioChange,null,!1),e}e.GuildBossSetItem=b_e;var d_w,f_t=(d_w=ui.window.guild.GuildBossSetTipUI,__extends(v_z,d_w),v_z.open=function(e){Aqxy(e,UIM,v_z)},v_z.prototype.onMouseClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":v_z.close();break;case"sureBtn":GuildModel.instance.reqSetAutoOpenBoss(this.dataSource),v_z.close()}},v_z.prototype.onRemoved=function(){Qcdu(this,Laya)},v_z.prototype.onAdded=function(){Iord(this,Laya)},v_z.close=function(){Gbtl(UIM,v_z)},v_z.prototype.updateView=function(){var e=GuildModel.instance.countAutoBossConsume(this.dataSource),p_l=e[SetBossOpenType.gold],p_g=e[SetBossOpenType.money];this.consumeGuild.text=Utils.$((j_x("796_1413_141")+j_x(51)+"{1}"),p_g),this.consumeGold.text=Utils.$((j_x("1263_869")+"{1}"),p_l),this.consumeGold.color=b_p.checkCoin(CoinDefine.GOLD,p_l)?"#008931":"#e32828",this.consumeGuild.color=GuildModel.instance.guildInfo.wealth>=p_g?"#008931":"#e32828"},v_z);function v_z(){var e=d_w.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.GuildBossSetSureTip=f_t}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guild.GuildBossUI,__extends(b_s,p_l),b_s.open=function(){Meaj(UIM,b_s)},b_s.prototype.onMouseDown=function(e){var p_l=e.target;p_l!=this.panel&&!this.panel.contains(p_l)||(this.mx=this.stage.mouseX,this.bx=this.bg.x,this.isMove=!0)},b_s.prototype.onRemoved=function(){Yfmq(this,Laya,LED,l_r)},b_s.close=function(){Uetk(UIM,b_s)},b_s.prototype.onTabSelected=function(p_l,p_g){this.strongholdBox.visible=0==p_l,1==p_l&&(this.tab.selectedIndex=0,e.GuildKriegPanel.open())},b_s.prototype.onAdded=function(){this.on(Laya.UIEvent.CLICK,this,this.onMouseClick),this.on(Laya.UIEvent.MOUSE_DOWN,this,this.onMouseDown),this.on(Laya.UIEvent.MOUSE_UP,this,this.onMouseUp),this.on(Laya.UIEvent.MOUSE_MOVE,this,this.onMouseMove),this.on(Laya.UIEvent.MOUSE_OUT,this,this.onMouseUp),this._clipTab.on("tabSelect",this,this.onTabSelected),LED.on(l_r.GUILD_BOSS_LIST,this,this.updateView),DB.instance.query(c2w_guild_boss_list,new c2w_guild_boss_list)},b_s.prototype.onMouseUp=function(e){Mbwu(e,this)},b_s.prototype.updateView=function(){var e=GuildModel.instance.getMemberByID(b_p.playerId);if(e){var p_l=Config.guild_guildOffice[e.office];for(var p_g in this.rewardBtn.visible=p_l&&1==p_l.rename,Config.guild_guildBoss){var b_s=Config.guild_guildBoss[p_g],d_u=GuildModel.instance.bossList[p_g];if(d_m=this["btnBox"+p_g]){d_m.visible=!0,d_m.dataSource=b_s.id,d_m.btn.visible=GuildModel.instance.guildCurrentBoss==b_s.id,d_m.btn0.visible=GuildModel.instance.guildCurrentBoss!=b_s.id;var b_e=GuildModel.instance.bossState(d_u);d_m.t_lock.text=GuildModel.instance.guildCurrentBoss!=b_s.id?Utils.$((j_x("1835_893")+"{1}"+j_x("2342_1048_1745")),b_s.guildLevel-1):Utils.$(("{1}"+j_x("2342_2083_932")),b_s.guildLevel),1==b_s.guildLevel&&(d_m.t_lock.text=(j_x("1163_155_1186"))),d_m.i_lock.visible=GuildModel.instance.guildCurrentBoss!=b_s.id,d_m.lock.visible=!(2==b_e),d_m.t_name.text=b_s.name,d_m.i_complete.visible=2==b_e,d_m.i_effect.visible=GuildModel.instance.guildCurrentBoss==b_s.id&&1==b_e,GuildModel.instance.guildInfo.level>=b_s.guildLevel&&GuildModel.instance.guildInfo.level>GuildModel.instance.guildPreLevel&&(d_m.i_unlock.visible=!0,d_m.i_unlock.index=0,d_m.i_unlock.play(!1),d_m.i_unlock.on("complete",this,this.playComplete,[d_m.i_unlock]),GuildModel.instance.guildPreLevel=b_s.guildLevel,this.bg.x=(this.panel.width-d_m.width)/2-d_m.x)}}for(var p_g in this.rp_left.visible=this.rp_right.visible=!1,Config.guild_guildBoss){var d_m;Config.guild_guildBoss[p_g],d_u=GuildModel.instance.bossList[p_g],(d_m=this["btnBox"+p_g])&&1===(b_e=GuildModel.instance.bossState(d_u))&&0===d_u.challenge&&(this.bg.x+d_m.x>this.panel.width&&!this.rp_right.visible&&(this.rp_right.visible=!0),this.bg.x+d_m.x+d_m.width<0&&!this.rp_left.visible&&(this.rp_left.visible=!0))}}},b_s.prototype.onMouseClick=function(p_l){var p_g=p_l.target;switch(p_g.name){case"closeBtn":case"backBtn":b_s.close();break;case"rewardBtn":e.GuildBossOpenSet.open();break;case"btn":e.GuildBossPoint.open(p_g.parent.dataSource);break;case"btn0":p_g.parent.dataSource<=GuildModel.instance.guildCurrentBoss&&e.GuildBossPoint.open(p_g.parent.dataSource);break;case"b_help":e.GuildMainHelpPanel.open()}},b_s.prototype.playComplete=function(e){Gpsj(e,this)},b_s.prototype.onMouseMove=function(e){if(this.isMove){var p_l=this.stage.mouseX-this.mx;p_l<0?this.bx+p_l>this.panel.width-this.bg.width?this.bg.x=this.bx+p_l:this.bg.x=this.panel.width-this.bg.width:this.bx+p_l<0?this.bg.x=this.bx+p_l:this.bg.x=0,this.updateView()}},b_s);function b_s(){var e=p_l.call(this)||this;return e.tab.selectedIndex=0,e._clipTab=new p_c(e.tab),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.panel.hScrollBar&&(e.panel.hScrollBar.visible=!1),e}e.GuildBossPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guild.GuildBossPointUI,__extends(b_s,p_l),b_s.open=function(e){Config.guild_guildBoss[e]&&UIM.open(b_s,["guild.atlas"],e,!1,!1,!0,!0)},b_s.prototype.onRemoved=function(){Unfl(LED,l_r,this,Laya)},b_s.prototype.updateView=function(){var e=this.dataSource,p_l=Config.guild_guildBoss[e],p_g=GuildModel.instance.bossList[e];this.t_name.text=p_l.name,this.list.array=p_l.openReward,this.killList.array=p_l.passReward;var b_s=GuildModel.instance.bossState(p_g);p_g&&0!=b_s?2==b_s?(this.btn.label=(j_x("5_2450_383")+j_x(594)),this.btn.disabled=!1):(this.btn.label=(j_x("712_325_2083")+j_x(932)),this.btn.disabled=!(p_g.challenge<p_l.challengeTimes)):(this.btn.label=(j_x("155_1186_2083")+j_x(932)),this.btn.disabled=!1);var d_u=1;if(0<b_s){var b_e;b_e=Config.obj_monster[p_l.monster]?Config.obj_monster[p_l.monster].hpUpper:p_g?p_g.hp:1;var d_m=p_g?p_g.hp:b_e;d_u=(d_m=1==b_s&&p_g&&0==p_g.hp?b_e:d_m)/b_e}this.t_bar.color="#2e3e49",this.t_bar.text=(100*d_u).toFixed(0)+"%",this.p_bar.value=d_u,2==b_s&&(this.t_bar.color="#ff0a00",this.t_bar.text=(j_x("2083_932_1300")+j_x("1835_893"))),this.t_challengeTimes.text=(p_g?p_l.challengeTimes-p_g.challenge:p_l.challengeTimes)+"/"+p_l.challengeTimes},b_s.prototype.checkTimeIn=function(e){var p_l=new Date;p_l.setTime(SyncTime.serverTime);var p_g=e[0].split(":");return p_l.setHours(parseInt(p_g[0]),parseInt(p_g[1]),0),!(p_l.getTime()>SyncTime.serverTime||(p_g=e[1].split(":"),p_l.setHours(parseInt(p_g[0]),parseInt(p_g[1]),0),p_l.getTime()<SyncTime.serverTime))},b_s.prototype.updateTime=function(){var e=parseInt(this.dataSource),p_l=GuildModel.instance.bossList[e];if(p_l&&p_l.cd>SyncTime.serverTime/1e3){this.t_timeBox.visible=!0;var p_g=Math.ceil(p_l.cd-SyncTime.serverTime/1e3);this.t_time.text=Utils.formatTimeStr(p_g)}else this.t_timeBox.visible=!1,this.t_time.text=""},b_s.prototype.onAdded=function(){Ymgu(LED,l_r,this,Laya)},b_s.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"btn":var p_g=parseInt(this.dataSource),d_u=(Config.guild_guildBoss[p_g],GuildModel.instance.bossList[p_g]),b_e=GuildModel.instance.bossState(d_u);if(0==b_e){var d_m=GuildModel.instance.getMemberByID(b_p.playerId);if(!d_m||1!=Config.guild_guildOffice[d_m.office].boss)return void b_p.broadcastNotice((j_x("86_1896_627")+j_x("796_183_1066")+j_x("975_2060_1163")+j_x("155_1186")));var d_w=Config.global[GlobalDefine.guild_boss_open_time].t_info;if(!this.checkTimeIn(d_w))return void b_p.broadcastNotice((j_x("1777_558"))+d_w[0]+"~"+d_w[1]+(j_x("155_1186")));e.GuildBossOpen.open(p_g)}else if(2==b_e)e.GuildBossDamage.open(p_g);else{if(d_u&&d_u.cd>SyncTime.serverTime/1e3){var f_t=Math.ceil((d_u.cd-SyncTime.serverTime/1e3)/60);return void b_p.broadcastNotice(Utils.$((j_x("1777_558")+"{1}"+j_x("2224_1394_1865")+j_x("712_325")),f_t))}var v_z=new c2w_guild_boss_challenge;v_z.id=p_g,DB.instance.query(c2w_guild_boss_challenge,v_z)}case"closeBtn":b_s.close()}},b_s.close=function(){Czco(UIM,b_s)},b_s.prototype.onItemRender=function(e,p_l){var p_g=new ModuleItemVO;p_g.id=e.dataSource[0],p_g.amount=e.dataSource[1],e.isShowName=!1,e.setItemData(p_g),e.selectImg.alpha=0},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemoved),p_g.list.array=null,p_g.list.itemRender=e.ItemBox,p_g.list.selectEnable=!1,p_g.list.renderHandler=Laya.Handler.create(p_g,p_g.onItemRender,null,!1),p_g.killList.renderHandler=Laya.Handler.create(p_g,p_g.onItemRender,null,!1),p_g.killList.selectEnable=!1,p_g.killList.itemRender=e.ItemBox,p_g}e.GuildBossPoint=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guild.GuildBossResultUI,__extends(b_s,p_l),b_s.open=function(e){b_s.panel||(b_s.panel=new b_s),DB.instance.query(c2w_guild_boss_list,new c2w_guild_boss_list),b_s.panel.dataSource={result:e},UIM.instance.addToWinLayer(b_s.panel)},b_s.prototype.onAdded=function(){this.on(Laya.UIEvent.CLICK,this,this.onMouseClick),this.x=Stage.width-this.width>>1,this.y=Stage.height-this.height>>1;var p_l=this.dataSource.result,p_g=Config.fb_dungeon[p_l.fbId];if(Laya.timer.loop(1e3,this,this.onTimer),0<p_l.boosHP){this.bossLose.visible=!0,this.bossWin.visible=!1;var b_s,d_u=0;Config.obj_monster[p_g.monster]&&(d_u=Config.obj_monster[p_g.monster].hpUpper),b_s=(p_l?p_l.boosHP:d_u)/d_u,this.bossHp.text=p_l.boosHP+"("+(100*b_s).toFixed(0)+"%)";var b_e=GuildModel.instance.bossList[p_l.fbId-8e4],d_m=Config.guild_guildBoss[p_l.fbId-8e4];this.times.text=b_e&&d_m?(b_e?d_m.challengeTimes-b_e.challenge-1:d_m.challengeTimes)+"/"+d_m.challengeTimes:""}else{this.bossWin.visible=!0,this.bossLose.visible=!1;var d_w=[];if(p_g.type==DungeonType.GuildBoss)for(var f_t in Config.guild_guildBoss){var v_z=Config.guild_guildBoss[f_t];if(v_z.fbId===p_l.fbId){d_w=b_p.getRewardDatas(v_z.passReward);break}}d_w=d_w||[],null==this._rewardBox&&(this._rewardBox=new e.ItemBox,this.itemBox.addChild(this._rewardBox)),this._rewardBox.dataSource=d_w[0],this.updateItem(this._rewardBox,1)}this._time=Config.global[GlobalDefine.fb_shutdown_countdown].i_info,this.cdLab.text=Utils.$(("{1}"+j_x(2081)),this._time)},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"exitBtn":this.leaveFb()}},b_s.prototype.updateItem=function(e,p_l){e.isShowName=!1,e.dataSource&&e.setItemData(e.dataSource,ItemBoxDefine.MODULE_ITEM,!0)},b_s.prototype.onTimer=function(){this._time--,this.cdLab.text=Utils.$(("{1}"+j_x(2081)),this._time),this._time<=0&&this.leaveFb()},b_s.prototype.leaveFb=function(){Ipfg(Laya,this,b_s,LED,l_r)},b_s.prototype.onRemove=function(){var p_l=UIM.instance.getWin(e.EquipSwapTipPanel);p_l&&(p_l.visible=!0),this.off(Laya.UIEvent.CLICK,this,this.onMouseClick),DungeonModel.instance.reqLeaveFb()},b_s.close=function(){Mhzd(UIM,b_s)},b_s.prototype.TimerIsErro=function(){0<this.erroTime?--this.erroTime:this.erroTime=10,this.cdLab.text=Utils.$(("{1}"+j_x(2081)),this.erroTime)},b_s.panel=null,b_s);function b_s(){var e=p_l.call(this)||this;return e.erroTime=10,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.GuildBossResultPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guild.GuildBossRewardUI,__extends(b_s,p_l),b_s.open=function(){Wjom(UIM,b_s)},b_s.prototype.updateView=function(){Odxh(this)},b_s.close=function(){Kahm(UIM,b_s)},b_s.prototype.onRemoved=function(){this.off(Laya.UIEvent.CLICK,this,this.onMouseClick),this.list.renderHandler&&this.list.renderHandler.recover(),this.list.renderHandler=null,LED.off(l_r.GUILD_BOSS_LIST,this,this.updateView)},b_s.prototype.onAdded=function(){this.on(Laya.UIEvent.CLICK,this,this.onMouseClick),this.list.renderHandler=Laya.Handler.create(this,this.onListRender,null,!1),LED.on(l_r.GUILD_BOSS_LIST,this,this.updateView),DB.instance.query(c2w_guild_boss_list,new c2w_guild_boss_list)},b_s.prototype.onItemRender=function(e,p_l){var p_g=new ModuleItemVO;p_g.id=e.dataSource[0],p_g.amount=e.dataSource[1],e.isShowName=!1,e.setItemData(p_g),e.selectImg.alpha=0},b_s.prototype.onListRender=function(p_l,p_g){var b_s=parseInt(p_l.dataSource),d_u=Config.guild_guildBoss[b_s],b_e=GuildModel.instance.bossList[b_s],d_m=GuildModel.instance.bossState(b_e);p_l.t_name.text=d_u.name,0==d_m?p_l.c_info.index=2:0==b_e.challenge?p_l.c_info.index=3:p_l.c_info.index=2==d_m?0:1,p_l.b_get.label=(j_x("1174_2111")),b_e&&1==b_e.rewardState&&(p_l.b_get.label=(j_x("1300_1174_2111"))),p_l.b_get.disabled=!0,p_l.rp_get.visible=!1,2==d_m&&0<b_e.challenge&&0==b_e.rewardState&&(p_l.b_get.disabled=!1,p_l.rp_get.visible=!0),p_l.list.itemRender=e.ItemBox,p_l.list.repeatX=6,p_l.list.repeatY=1,p_l.list.spaceX=15,p_l.list.renderHandler=Laya.Handler.create(this,this.onItemRender,null,!1),p_l.list.array=d_u.passReward},b_s.prototype.onMouseClick=function(e){var p_l=e.target;switch(p_l.name){case"b_get":var p_g=new c2w_guild_boss_reward;p_g.id=parseInt(p_l.parent.dataSource),DB.instance.query(c2w_guild_boss_reward,p_g);case"closeBtn":b_s.close()}},b_s);function b_s(){var e=p_l.call(this)||this;e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved);var p_g=[];for(var b_s in Config.guild_guildBoss){var d_u=Config.guild_guildBoss[b_s];p_g.push(d_u.id)}return e.list.scrollBar.elasticBackTime=200,e.list.scrollBar.elasticDistance=50,e.list.array=p_g,e}e.GuildBossReward=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guild.GuildChangeOfficeUI,__extends(b_s,p_l),b_s.open=function(e){Absl(e,UIM,b_s)},b_s.prototype.updateView=function(){var e=this.dataSource,p_l=GuildModel.instance.getMemberByID(b_p.playerId),p_g=GuildModel.instance.getMemberByID(e);p_l&&p_g?(this.btn0.disabled=p_l.office>=GuildOfficeDefine.ZHANGLAO||p_g.office==GuildOfficeDefine.ZHANGLAO,this.btn1.disabled=p_l.office>=GuildOfficeDefine.HUFA||p_g.office==GuildOfficeDefine.HUFA,this.btn2.disabled=p_l.office>=GuildOfficeDefine.ZHENCHUAN||p_g.office==GuildOfficeDefine.ZHENCHUAN,this.btn3.disabled=p_l.office>=GuildOfficeDefine.CHENGYUAN||p_g.office==GuildOfficeDefine.CHENGYUAN):b_s.close()},b_s.close=function(){Ozlv(UIM,b_s)},b_s.prototype.onRemoved=function(){Onpk(this,Laya)},b_s.prototype.onAdded=function(){Gcue(this,Laya)},b_s.prototype.onMouseClick=function(e){var p_l=e.target;switch(p_l.name){case"btn0":case"btn1":case"btn2":case"btn3":var p_g=new c2w_change_office;p_g.pid=this.dataSource,p_g.office=parseInt(p_l.name.substr(-1))+2,DB.instance.query(c2w_change_office,p_g);case"closeBtn":b_s.close()}},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.GuildChangeOfficePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guild.GuildCheckinUI,__extends(b_s,p_l),b_s.open=function(){Yjoh(UIM,b_s,e)},b_s.prototype.onStageClick=function(e){e&&(e.target==this||this.contains(e.target))||b_s.close()},b_s.prototype.onAdded=function(){LED.on(l_r.GUILD_CHECKIN_UPDATE,this,this.updateView),LED.on(l_r.GUILD_INFO_UPDATE,this,this.updateView),Laya.timer.once(300,this,this.addListener),DB.instance.query(c2w_guild_checkin_info,new c2w_guild_checkin_info)},b_s.prototype.updateView=function(){var e=GuildModel.instance.guildInfo;this.t_gLevel.text=Utils.$((j_x("796_1413_15")+j_x(2342)+"{1}"),e.level),this.t_gMoney.text=Utils.$("{1}/{2}",b_p.calsulate(e.money),b_p.calsulate(Config.guild_guildLevel[e.level].money)),this.p_gMoney.value=e.money/Config.guild_guildLevel[e.level].money;var p_l=GuildModel.instance.checkinInfo;for(var p_g in this.p_checkin.value=GuildModel.instance._progress/Config.global[GlobalDefine.guild_checkin_progress].i_info,this.t_checkin.text=Utils.$((j_x("1437_2399_33")+j_x(1035)+"{1}/{2}"),GuildModel.instance._progress,Config.global[GlobalDefine.guild_checkin_progress].i_info),this.t_count.text=Utils.$((j_x("1437_2399_455")+j_x(2348)+"{1}/{2}"),p_l.list.length,GuildModel.instance.guildMembers.length),this.t_1_0.text=Utils.$((j_x("1437_2399_33")+j_x(1035)+"+{1}"),Config.guild_guildCheckin[1].progress),this.t_1_1.text=Utils.$((j_x("796_1413_300")+j_x(45)+"+{1}"),Config.guild_guildCheckin[1].guildCtrb),this.t_1_2.text=Utils.$((j_x("796_1413_115")+j_x(221)+"+{1}"),Config.guild_guildCheckin[1].guildMoney),this.t_2_0.text=Utils.$((j_x("1437_2399_33")+j_x(1035)+"+{1}"),Config.guild_guildCheckin[2].progress),this.t_2_1.text=Utils.$((j_x("796_1413_300")+j_x(45)+"+{1}"),Config.guild_guildCheckin[2].guildCtrb),this.t_2_2.text=Utils.$((j_x("796_1413_115")+j_x(221)+"+{1}"),Config.guild_guildCheckin[2].guildMoney),this.t_3_0.text=Utils.$((j_x("1437_2399_33")+j_x(1035)+"+{1}"),Config.guild_guildCheckin[3].progress),this.t_3_1.text=Utils.$((j_x("796_1413_300")+j_x(45)+"+{1}"),Config.guild_guildCheckin[3].guildCtrb),this.t_3_2.text=Utils.$((j_x("796_1413_115")+j_x(221)+"+{1}"),Config.guild_guildCheckin[3].guildMoney),this.logList.array=p_l.list,this.b_check0.label=1==p_l.mode?(j_x("1300_1437_2399")):(j_x("1437_2399")),this.b_check0.disabled=0!=p_l.mode,this.b_check1.label=2==p_l.mode?(j_x("1300_1437_2399")):(j_x("1437_2399")),this.b_check1.disabled=0!=p_l.mode,this.b_check2.label=3==p_l.mode?(j_x("1300_1437_2399")):(j_x("1437_2399")),this.b_check2.disabled=0!=p_l.mode,this.c_coin0.index=Config.guild_guildCheckin[1].consume[0][0]-1,this.c_coin1.index=Config.guild_guildCheckin[2].consume[0][0]-1,this.c_coin2.index=Config.guild_guildCheckin[3].consume[0][0]-1,this.t_coin0.text=Config.guild_guildCheckin[1].consume[0][1].toString(),this.t_coin1.text=Config.guild_guildCheckin[2].consume[0][1].toString(),this.t_coin2.text=Config.guild_guildCheckin[3].consume[0][1].toString(),this.i_checked0.visible=1==p_l.mode,this.i_checked1.visible=2==p_l.mode,this.i_checked2.visible=3==p_l.mode,this.t_title0.text=Config.guild_guildCheckin[1].name,this.t_title1.text=Config.guild_guildCheckin[2].name,this.t_title2.text=Config.guild_guildCheckin[3].name,this.rp_gift0.visible=GuildModel.instance.hasCheckinReward(1),this.rp_gift1.visible=GuildModel.instance.hasCheckinReward(2),this.rp_gift2.visible=GuildModel.instance.hasCheckinReward(3),this.rp_gift0.visible?this.ani1.play():this.ani1.stop(),this.rp_gift1.visible?this.ani2.play():this.ani2.stop(),this.rp_gift2.visible?this.ani3.play():this.ani3.stop(),this.i_got0.visible=this.i_got1.visible=this.i_got2.visible=!1,Config.guild_guildCheckinReward){var b_s=Config.guild_guildCheckinReward[p_g],d_u=p_l.gift_box||[];for(var b_e in d_u)d_u[b_e].index==b_s.id&&1==d_u[b_e].reward&&(this["i_got"+(b_s.id-1)].visible=!0)}},b_s.prototype.sendGift=function(e){var p_l=new c2w_guild_checkin_gift;p_l.index=e,DB.instance.query(c2w_guild_checkin_gift,p_l)},b_s.prototype.removeListener=function(){Sajz(this,Laya)},b_s.prototype.addListener=function(){Ozhp(this,Laya)},b_s.prototype.onRemove=function(){Yppa(LED,l_r,this)},b_s.prototype.sendCheckin=function(e){var p_l=new c2w_guild_checkin;p_l.mode=e,DB.instance.query(c2w_guild_checkin,p_l)},b_s.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"backBtn":case"closeBtn":b_s.close();break;case"b_check0":this.sendCheckin(1);break;case"b_check1":this.sendCheckin(2);break;case"b_check2":this.sendCheckin(3);break;case"b_gift0":e.GuildCheckinRewardPanel.open(1);break;case"b_gift1":e.GuildCheckinRewardPanel.open(2);break;case"b_gift2":e.GuildCheckinRewardPanel.open(3)}},b_s.close=function(){Qbaj(UIM,b_s)},b_s.prototype.onLogRender=function(e,p_l){var p_g=new Date(1e3*e.dataSource.time),b_s=Utils.fmtDate(p_g);e.text=Utils.$(("{1} {2}"+j_x("33_562_743")+"{3}"+j_x("1437_2399")),b_s,e.dataSource.name,["",(j_x("2005_1331")),(j_x("283_2342")),(j_x("2251_2342"))][e.dataSource.mode])},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.logList.renderHandler=Laya.Handler.create(e,e.onLogRender,null,!1),e.logList.array=null,e}e.GuildCheckinPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guild.GuildCheckinRewardUI,__extends(b_s,p_l),b_s.open=function(e){Yxdk(e,UIM,b_s)},b_s.prototype.onRemoved=function(){Eipv(this,Laya)},b_s.close=function(){Efjb(UIM,b_s)},b_s.prototype.onAdded=function(){Yczj(this,Laya)},b_s.prototype.updateView=function(){var e=Config.guild_guildCheckinReward[this.dataSource];this.t_info.text=Utils.$((j_x("1437_2399_33")+j_x("1035_1117_1012")+"{1}"+j_x("1163_1174_2111")),e.num),this.list.array=e.reward,this.getChildByName("commitBtn").disabled=GuildModel.instance._progress<e.num,this.getChildByName("commitBtn").label=(j_x("1174_2111"));var p_l=GuildModel.instance.checkinInfo.gift_box||[];for(var p_g in p_l)p_l[p_g].index==this.dataSource&&1==p_l[p_g].reward&&(this.getChildByName("commitBtn").label=(j_x("1300_1174_2111")),this.getChildByName("commitBtn").disabled=!0)},b_s.prototype.onListRender=function(e,p_l){var p_g=new ModuleItemVO;p_g.id=e.dataSource[0],p_g.amount=e.dataSource[1],e.setItemData(p_g)},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"commitBtn":var p_l=new c2w_guild_checkin_gift;p_l.index=this.dataSource,DB.instance.query(c2w_guild_checkin_gift,p_l);case"backBtn":case"closeBtn":b_s.close()}},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemoved),p_g.list.itemRender=e.ItemBox,p_g.list.renderHandler=Laya.Handler.create(p_g,p_g.onListRender,null,!1),p_g.list.array=null,p_g}e.GuildCheckinRewardPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guild.GuildContributeUI,__extends(b_s,p_l),b_s.open=function(){Eise(UIM,b_s)},b_s.prototype.addListener=function(){Yngv(Laya,this)},b_s.prototype.removeListener=function(){Cxvm(Laya,this)},b_s.prototype.onAdded=function(){Ycey(LED,l_r,this,Laya)},b_s.close=function(){Mqlc(UIM,b_s)},b_s.prototype.onMouseClick=function(e){var p_l=e.target;switch(p_l.name){case"btn":var p_g=p_l.parent.dataSource,b_s=new c2w_guild_donate;b_s.itemid=p_g.id,b_s.num=p_g.amount,DB.instance.query(c2w_guild_donate,b_s);break;case"txt_go":for(var d_u in Config.guild_guildContribute)return void r_f.instance.isWindow(Config.guild_guildContribute[d_u].id)}},b_s.prototype.onItemRender=function(e,p_l){if(e){var p_g=e.dataSource.id,b_s=Config.CItem(p_g),d_u=e.getChildByName("icon");d_u=Resource.ResManager.Instance.getImg(Resource.ResUrl.getIconUrl(b_s.icon),d_u),e.getChildByName("iconBg").index=b_s.quality-1,e.getChildByName("numTxt").text=e.dataSource.amount.toString();var b_e=e.getChildByName("t_name"),d_m=e.getChildByName("t_desc");b_e.text=b_s.name,Config.guild_guildContribute[p_g],d_m.text=b_s.desc}},b_s.prototype.onRemove=function(){Cwsl(LED,l_r,this)},b_s.prototype.onStageClick=function(e){e&&(e.target==this||this.contains(e.target))||b_s.close()},b_s.prototype.updateView=function(){Ipwc(GuildModel,this)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.list.renderHandler=Laya.Handler.create(e,e.onItemRender,null,!1),e.list.array=null,e.list.scrollBar.elasticBackTime=200,e.list.scrollBar.elasticDistance=50,e}e.GuildContributePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guild.GuildCreateUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Uysl(LED,l_r,this)},b_s.close=function(){Sdib(console,UIM,b_s)},b_s.prototype.onStageClick=function(e){e&&(e.target==this||this.contains(e.target))||b_s.close()},b_s.open=function(){Sdug(console,UIM,b_s)},b_s.prototype.removeListener=function(){Gyak(this,Laya)},b_s.prototype.onRemove=function(){Mxwm(LED,l_r,this,e)},b_s.prototype.onFlagChange=function(e){Ygbe(e,this,Resource,Config,Laya)},b_s.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"cancelBtn":b_s.close();break;case"commitBtn":ShieldWordManager.ins.isShield(this.input.text,Laya.Handler.create(this,this.checkName));break;case"changeBtn":this.removeListener(),e.GuildFlagChangePanel.open(this.selectedIcon)}},b_s.prototype.checkName=function(e,p_l){if(1==e){var p_g=new c2w_create_guild;p_g.name=p_l,p_g.icon=this.selectedIcon,DB.instance.query(c2w_create_guild,p_g)}else b_p.broadcastNotice((j_x("1511_1794_130")+j_x("241_1387_1492")+j_x(1794)))},b_s.prototype.addListener=function(){Amrm(this,Laya)},b_s.prototype.onGuildInfo=function(){GuildModel.instance.hasGuild&&b_s.close()},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.c_title.index=0,e.input.maxChars=5,e.input.text="",e.selectedIcon=1,e.c_coin.index=0,e.t_coin.text=Config.global[GlobalDefine.guild_token].i_info.toString(),e.box_rename.visible=!1,e}e.GuildCreatePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guild.GuildFlagChangeUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){this.on(Laya.UIEvent.CLICK,this,this.onMouseClick);var e=[],p_l=0,p_g=0;for(var b_s in Config.guild_guildFlag)e.push(Config.guild_guildFlag[b_s]),Config.guild_guildFlag[b_s].id==this.dataSource&&(p_g=p_l),++p_l;this.list.array=e,this.list.selectedIndex=p_g},b_s.prototype.onStageClick=function(e){e&&(e.target==this||this.contains(e.target))||(LED.event(l_r.GUILD_FLAG_CHANGE,this.list.selectedItem.id),b_s.close())},b_s.prototype.updateItem=function(e,p_l){if(e){var p_g=e.dataSource,b_s=e.getChildByName("icon");b_s=Resource.ResManager.Instance.getImg(Resource.ResUrl.ASSETS_URL+p_g.source,b_s)}},b_s.open=function(e){Uedg(e,UIM,b_s)},b_s.close=function(){Wapb(UIM,b_s)},b_s.prototype.onRemove=function(){Wkvj(this,Laya)},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"backBtn":case"commitBtn":LED.event(l_r.GUILD_FLAG_CHANGE,this.list.selectedItem.id),b_s.close()}},b_s);function b_s(){var e=p_l.call(this)||this;return e.list.selectEnable=!0,e.list.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.list.array=null,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.GuildFlagChangePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guild.GuildHallUI,__extends(b_s,p_l),b_s.prototype.tabSelect=function(e){switch(this.box_member.visible=0==this.tab.selectedIndex,this.box_request.visible=1==this.tab.selectedIndex,this.box_guildlist.visible=2==this.tab.selectedIndex,this.tab.selectedIndex){case 0:DB.instance.query(c2w_guild_info,new c2w_guild_info),DB.instance.query(c2w_guild_checkin_info,{});break;case 1:DB.instance.query(c2w_join_list,new c2w_join_list);break;case 2:DB.instance.query(c2w_guild_list,new c2w_guild_list)}},b_s.prototype.clearOffice=function(e){var p_l=new c2w_change_office;p_l.pid=e,p_l.office=GuildOfficeDefine.CHENGYUAN,DB.instance.query(c2w_change_office,p_l)},b_s.prototype.changeOffice=function(p_l){Ohpy(p_l,e)},b_s.prototype.sendJoinReply=function(e,p_l){var p_g=new c2w_process_join_request;p_g.pid=e,p_g.handle=p_l,DB.instance.query(c2w_process_join_request,p_g)},b_s.prototype.onAdded=function(){Apwn(this,LED,l_r,Laya)},b_s.prototype.removeListener=function(){Yfmc(this,Laya)},b_s.prototype.quitGuild=function(){DB.instance.query(c2w_leave_guild,new c2w_leave_guild)},b_s.close=function(){Qjye(UIM,b_s)},b_s.prototype.sortMember=function(e,p_l){return e.online>p_l.online?-1:e.online<p_l.online?1:e.contribution>p_l.contribution?-1:e.contribution<p_l.contribution?1:e.office<p_l.office?-1:e.office>p_l.office?1:0},b_s.prototype.openTransferLeaderTip=function(e){Ihap(e,this,b_p,j_x)},b_s.open=function(){Ymnd(UIM,b_s)},b_s.prototype.disbandGuild=function(){DB.instance.query(c2w_disband_guild,new c2w_disband_guild)},b_s.prototype.kickPlayer=function(e){var p_l=new c2w_kick_member;p_l.pid=e,DB.instance.query(c2w_kick_member,p_l)},b_s.prototype.operateGuild=function(e){1==e[0]?this.disbandGuild():this.quitGuild()},b_s.prototype.onMouseClick=function(p_l){var p_g=p_l.target;switch(p_g.name){case"closeBtn":case"backBtn":b_s.close();break;case"b_rename":e.GuildRenamePanel.open();break;case"b_member":var d_u=GuildModel.instance.getMemberByID(b_p.playerId),b_e=[],d_m=[],d_w=p_g.parent.dataSource;d_w.pid==b_p.playerId?1==Config.guild_guildOffice[d_w.office].disband?(b_e.push((j_x("1048_114_796")+j_x(1413))),d_m.push(Laya.Handler.create(this,this.openConfirmTip,[1],!1))):(b_e.push((j_x("1016_155_796")+j_x(1413))),d_m.push(Laya.Handler.create(this,this.openConfirmTip,[2],!1))):(b_e.push((j_x("153_2308"))),d_m.push(Laya.Handler.create(this,this.chatPrivate,[d_w.pid],!1)),b_e.push((j_x("5_2450_281")+j_x(1590))),d_m.push(Laya.Handler.create(this,this.viewPlayer,[d_w.pid],!1)),1==Config.guild_guildOffice[d_u.office].changeOffice&&d_u.office<d_w.office&&(b_e.push((j_x("1698_595_30")+j_x(1547))),d_m.push(Laya.Handler.create(this,this.changeOffice,[d_w.pid],!1))),1==Config.guild_guildOffice[d_u.office].transfer&&(b_e.push((j_x("122_408_627")+j_x(796))),d_m.push(Laya.Handler.create(this,this.openTransferLeaderTip,[d_w.pid],!1))),1==Config.guild_guildOffice[d_u.office].kick&&d_u.office<d_w.office&&(b_e.push((j_x("1777_1016_796")+j_x(1413))),d_m.push(Laya.Handler.create(this,this.kickPlayer,[d_w.pid],!1))),1==Config.guild_guildOffice[d_u.office].changeOffice&&d_u.office<d_w.office&&d_w.office<GuildOfficeDefine.CHENGYUAN&&(b_e.push((j_x("2354_2465_1698")+j_x(595))),d_m.push(Laya.Handler.create(this,this.clearOffice,[d_w.pid],!1)))),0<b_e.length&&0<d_m.length&&e.PopupMenu.open(b_e,d_m);break;case"b_req_yes":this.sendJoinReply(p_g.parent.dataSource.pid,1);break;case"b_req_no":this.sendJoinReply(p_g.parent.dataSource.pid,0);break;case"b_all_yes":for(var f_t in GuildModel.instance.requestList)this.sendJoinReply(GuildModel.instance.requestList[f_t].pid,1);break;case"b_all_no":for(var f_t in GuildModel.instance.requestList)this.sendJoinReply(GuildModel.instance.requestList[f_t].pid,0);break;case"c_auto_yes":this.sendAutoJoin(1-GuildModel.instance.guildInfo.auto)}},b_s.prototype.sortGuild=function(e,p_l){return Qrfk(e,p_l)},b_s.prototype.onRemove=function(){Kmxn(this,LED,l_r)},b_s.prototype.sendAutoJoin=function(e){var p_l=new c2w_auto_process_join_request;p_l.auto=e,DB.instance.query(c2w_auto_process_join_request,p_l)},b_s.prototype.guildRender=function(e,p_l){if(e){var p_g=e.getChildByName("clip"),b_s=e.getChildByName("t_guildName"),d_u=e.getChildByName("t_playerName"),b_e=e.getChildByName("t_count"),d_m=e.dataSource;p_g=b_p.getNumSp(NumType.GUILDLISTRANK,p_l+1,p_g,-5);var d_w=e.getChildByName("pos_rank");p_g.x=d_w.x-p_g.width/2,b_s.text=Utils.$(("{1}({2}"+j_x(2342)+")"),d_m.name,d_m.level),d_u.text=Utils.$((j_x("627_796")+":{1}"),d_m.leader),b_e.text=Utils.$((j_x("455_2348")+":{1}/{2}"),d_m.count,Config.guild_guildLevel[d_m.level].count),e.getChildByName("t_power").text=d_m.fight<1e5?d_m.fight.toString():Utils.$(("{1}"+j_x(729)),(d_m.fight/1e4).toFixed(0))}},b_s.prototype.chatPrivate=function(p_l){Mqnr(p_l,e)},b_s.prototype.requestRender=function(e,p_l){if(e){var p_g=e.getChildByName("icon"),b_s=e.getChildByName("t_name"),d_u=e.getChildByName("t_power"),b_e=e.dataSource;p_g=Resource.ResManager.Instance.getImg(Resource.ResManager.getHeadUrl(b_e.entryId,b_e.headIcon),p_g),b_s.text=b_e.name,d_u.text=Utils.$((j_x("383_767")+":{1}"),b_e.combat);var d_m=GuildModel.instance.getMemberByID(b_p.playerId);e.getChildByName("b_req_yes").visible=1==Config.guild_guildOffice[d_m.office].approval,e.getChildByName("b_req_no").visible=1==Config.guild_guildOffice[d_m.office].approval}},b_s.prototype.onStageClick=function(e){e&&(e.target==this||this.contains(e.target))||b_s.close()},b_s.prototype.memberRender=function(e,p_l){if(e){var p_g=e.getChildByName("icon"),b_s=e.getChildByName("iconFrame"),d_u=e.getChildByName("t_name"),b_e=e.getChildByName("t_checkin"),d_m=e.getChildByName("t_ctrb"),d_w=e.getChildByName("t_power"),f_t=e.getChildByName("t_online"),v_z=e.dataSource;if(p_g=Resource.ResManager.Instance.getImg(Resource.ResManager.getHeadUrl(v_z.entryid,v_z.headIcon),p_g),d_u.text=v_z.name+"("+Config.guild_guildOffice[v_z.office].name+")",d_m.text=Utils.$((j_x("300_45")+":{1}"),v_z.contribution),d_w.text=Utils.$((j_x("383_767")+":{1}"),v_z.fighting),1===v_z.checkin_mode?(b_e.text=(j_x("1892_2342_1437")+j_x(2399)),b_e.color="#008931"):2===v_z.checkin_mode?(b_e.text=(j_x("283_2342_1437")+j_x(2399)),b_e.color="#1860ca"):3===v_z.checkin_mode?(b_e.text=(j_x("2251_2342_1437")+j_x(2399)),b_e.color="#da56f5"):b_e.text="",b_e.x=d_u.x+d_u.textField.textWidth,1==v_z.online)f_t.color=Utils.Color.GREEN,f_t.text=(j_x("2035_360"));else{f_t.color=Utils.Color.RED;var d_h=SyncTime.serverTime/1e3-v_z.offlineTime;f_t.text=86400<=d_h?Utils.$((j_x("1016_360")+"{1}"+j_x(2308)),Math.floor(d_h/86400)):3600<=d_h?Utils.$((j_x("1016_360")+"{1}"+j_x("1747_1702")),Math.floor(d_h/3600)):Utils.$((j_x("1016_360")+"{1}"+j_x("2224_1394")),Math.floor(d_h/60))}if(v_z.fashionAvatar&&Config.fashion_fashion[v_z.fashionAvatar]&&4==Config.fashion_fashion[v_z.fashionAvatar].type){b_s.visible=!0;var r_t=Config.fashion_fashion[v_z.fashionAvatar].avatar[0];r_t=Resource.ResUrl.getIconUrl(r_t),b_s=Resource.ResManager.Instance.getImg(r_t,b_s)}else b_s.visible=!1;e.getChildByName("bg_me").visible=v_z.pid==b_p.playerId}},b_s.prototype.transferLeader=function(e){var p_l=new c2w_change_office;p_l.pid=e[0],p_l.office=GuildOfficeDefine.HUIZHANG,DB.instance.query(c2w_change_office,p_l)},b_s.prototype.updateView=function(){var e=GuildModel.instance.getMemberByID(b_p.playerId);if(e){var p_l=1==Config.guild_guildOffice[e.office].approval;switch(this.box_request.getChildByName("c_auto_yes").visible=p_l,this.box_request.getChildByName("b_all_yes").visible=p_l,this.box_request.getChildByName("b_all_no").visible=p_l,this.tab.getChildByName("item1").visible=p_l,this.tab.getChildByName("item2").x=p_l?300:150,this.tab.selectedIndex){case 0:GuildModel.instance.guildMembers.sort(this.sortMember),this.list_member.array=GuildModel.instance.guildMembers;var p_g=[0,0,0,0,0];for(var d_u in GuildModel.instance.guildMembers)p_g[GuildModel.instance.guildMembers[d_u].office-1]+=1;var b_e=Config.guild_guildLevel[GuildModel.instance.guildInfo.level];this.t_member.text=Utils.$((j_x("1066_975")+"{1}/{2}  "+j_x("1619_799")+"{3}/{4} "+j_x("1372_1860")+"{5}/{6} "+j_x("402_2141")+"{7}/{8}"),p_g[1],b_e.officeLimit[1],p_g[2],b_e.officeLimit[2],p_g[3],b_e.officeLimit[3],GuildModel.instance.guildMembers.length,b_e.count);break;case 1:this.list_req.array=GuildModel.instance.requestList,this.c_auto_yes.selected=1==GuildModel.instance.guildInfo.auto;break;case 2:var d_m=GuildModel.instance.guildLIst;d_m.sort(this.sortGuild),this.list_guild.array=d_m}this.rp_request.visible=GuildModel.instance.checkRpHall}else b_s.close()},b_s.prototype.openConfirmTip=function(e){var p_l=this.operateGuild.bind(this);1==e?b_p.confirm((j_x("68_2032_1048")+j_x("114_796_1413")+" "),p_l,[e],!1,!0):b_p.confirm((j_x("236_203_796")+j_x("1413_1409_1496")+j_x("1466_796_1413")+j_x("300_45")+""+j_x("1426_1801_2035")+"1"+j_x("1747_1702_2462")+j_x("1919_223_2456")+j_x("796_1413")+""+j_x("68_2032_236")+j_x(203)+""),p_l,[e],!1,!0)},b_s.prototype.addListener=function(){Yxlx(this,Laya)},b_s.prototype.viewPlayer=function(e){Cvrk(e,n_d)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.list_member.renderHandler=Laya.Handler.create(e,e.memberRender,null,!1),e.list_member.array=null,e.list_member.scrollBar.elasticBackTime=200,e.list_member.scrollBar.elasticDistance=50,e.list_req.renderHandler=Laya.Handler.create(e,e.requestRender,null,!1),e.list_req.array=null,e.list_req.scrollBar.elasticBackTime=200,e.list_req.scrollBar.elasticDistance=50,e.list_guild.renderHandler=Laya.Handler.create(e,e.guildRender,null,!1),e.list_guild.array=null,e.list_guild.scrollBar.elasticBackTime=200,e.list_guild.scrollBar.elasticDistance=50,e._tab=new p_c(e.tab),e}e.GuildHallPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guild.GuildHelpUI,__extends(b_s,p_l),b_s.open=function(){Ymay(UIM,b_s)},b_s.prototype.onTabSelect=function(e){switch(this.box_other.visible=0==this.tab.selectedIndex,this.box_my.visible=1==this.tab.selectedIndex,this.tab.selectedIndex){case 0:DB.instance.query(c2w_guild_help_list,new c2w_guild_help_list);break;case 1:DB.instance.query(c2w_guild_help_my_list,new c2w_guild_help_my_list)}},b_s.prototype.onRemoved=function(){LED.off(l_r.GUILD_HELP_INFO,this,this.onGuildHelpInfo),LED.off(l_r.GUILD_HELP_LIST,this,this.onGuildHelpList),LED.off(l_r.GUILD_HELP_MY_LIST,this,this.onGuildHelpMyList),this.off(Laya.UIEvent.CLICK,this,this.onMouseClick),this.list.renderHandler&&this.list.renderHandler.recover(),this.list.renderHandler=null,this._tab.off("tabSelect",this,this.onTabSelect)},b_s.prototype.onGuildHelpInfo=function(){var e=GuildModel.instance.helpInfo.assistTimes,p_l=Config.global[GlobalDefine.guild_help_assist_times].i_info;this.t_free.text=Utils.$((j_x("2345_2218_1358")+j_x("1808_235_2348")+"{1}/{2}"),p_l<e?0:p_l-e,p_l);var p_g=Config.recharge_vip[LgcM.ins.heroVo.vipLv].guildHelpAssistTimes;0<=e-p_l&&(this.t_free.text=Utils.$((j_x("1263_869_1358")+j_x("1808_235_2348")+"{1}/{2}"),p_l+p_g<e?0:p_l+p_g-e,p_g)),this.i_got.visible=1==GuildModel.instance.helpInfo.giftState,this.onTabSelect(this.tab.selectedIndex)},b_s.prototype.onGuildHelpMyList=function(){if(this.box_my.visible){for(var p_l=Config.global[GlobalDefine.guild_help_get_help_times].i_info,p_g=0,b_s=0;b_s<3;++b_s)GuildModel.instance.myHelpList[b_s]||(GuildModel.instance.myHelpList[b_s]=new x_guild_help_my_list_item,GuildModel.instance.myHelpList[b_s].id=0,GuildModel.instance.myHelpList[b_s].itemId=0,GuildModel.instance.myHelpList[b_s].progress=0,GuildModel.instance.myHelpList[b_s].getNum=0);var d_u=this.box_1.getChildByName("b_add"),b_e=this.box_1.getChildByName("p_item"),d_m=this.box_1.getChildByName("itemBox"),d_w=this.box_1.getChildByName("t_name"),f_t=this.box_1.getChildByName("b_get"),v_z=this.box_1.getChildByName("t_info"),d_h=this.box_1.getChildByName("p_bar"),r_t=this.box_1.getChildByName("t_bar"),t_n=this.box_1.getChildByName("rp");f_t.getChildByName("rp"),d_m||((d_m=new e.ItemBox).name="itemBox",d_m.pos(b_e.x,b_e.y),d_m.isShowName=!1,this.box_1.addChild(d_m)),0<GuildModel.instance.myHelpList[0].id?(t_n.visible=!1,d_u.visible=!1,d_w.text=Config.CItem(GuildModel.instance.myHelpList[0].itemId).name,f_t.visible=!0,f_t.dataSource=GuildModel.instance.myHelpList[0],0===GuildModel.instance.myHelpList[0].getNum&&GuildModel.instance.myHelpList[0].progress===Config.guild_guildHelpItem[GuildModel.instance.myHelpList[0].itemId].num?(v_z.text=Utils.$((j_x("1163_1174_2111")+"{1}"),Config.guild_guildHelpItem[GuildModel.instance.myHelpList[0].itemId].amt),f_t.disabled=!1,f_t.visible=!0):(0<GuildModel.instance.myHelpList[0].getNum&&GuildModel.instance.myHelpList[0].progress===Config.guild_guildHelpItem[GuildModel.instance.myHelpList[0].itemId].num?v_z.text=(j_x("1917_402_100")+j_x(1358)):v_z.text=(j_x("100_1358_283")),f_t.disabled=!0,f_t.visible=!1),(n_f=new ModuleItemVO).id=GuildModel.instance.myHelpList[0].itemId,n_f.amount=Config.guild_guildHelpItem[GuildModel.instance.myHelpList[0].itemId].amt,d_m.setItemData(n_f),d_m.visible=!0,d_h.visible=!0,d_h.value=GuildModel.instance.myHelpList[0].progress/Config.guild_guildHelpItem[GuildModel.instance.myHelpList[0].itemId].num,r_t.text=GuildModel.instance.myHelpList[0].progress+"/"+Config.guild_guildHelpItem[GuildModel.instance.myHelpList[0].itemId].num,GuildModel.instance.myHelpList[0].progress>=Config.guild_guildHelpItem[GuildModel.instance.myHelpList[0].itemId].num&&(p_g+=1)):(t_n.visible=!0,d_u.visible=!0,d_w.text=(j_x("932_1835_517")+j_x("1191_100_1808")+j_x("2217_1841")),v_z.text="",f_t.visible=!1,d_m.visible=!1,d_h.visible=!1,r_t.text="");var f_y=this.box_2.getChildByName("b_add"),p_q=this.box_2.getChildByName("p_item"),h_h=this.box_2.getChildByName("itemBox"),n_j=this.box_2.getChildByName("t_name"),j_l=this.box_2.getChildByName("b_get"),l_m=this.box_2.getChildByName("t_info"),z_m=this.box_2.getChildByName("p_bar"),h_b=this.box_2.getChildByName("t_bar"),t_i=this.box_2.getChildByName("rp");j_l.getChildByName("rp"),h_h||((h_h=new e.ItemBox).name="itemBox",h_h.pos(p_q.x,p_q.y),h_h.isShowName=!1,this.box_2.addChild(h_h)),0<GuildModel.instance.myHelpList[1].id?(t_i.visible=!1,f_y.visible=!1,n_j.text=Config.CItem(GuildModel.instance.myHelpList[1].itemId).name,j_l.visible=!0,j_l.dataSource=GuildModel.instance.myHelpList[1],GuildModel.instance.myHelpList[1].progress===Config.guild_guildHelpItem[GuildModel.instance.myHelpList[1].itemId].num&&0===GuildModel.instance.myHelpList[1].getNum?(l_m.text=Utils.$((j_x("1163_1174_2111")+"{1}"),Config.guild_guildHelpItem[GuildModel.instance.myHelpList[1].itemId].amt),j_l.disabled=!1,j_l.visible=!0):(GuildModel.instance.myHelpList[1].progress===Config.guild_guildHelpItem[GuildModel.instance.myHelpList[1].itemId].num&&0<GuildModel.instance.myHelpList[1].getNum?l_m.text=(j_x("1917_402_100")+j_x(1358)):l_m.text=(j_x("100_1358_283")),j_l.disabled=!0,j_l.visible=!1),(n_f=new ModuleItemVO).id=GuildModel.instance.myHelpList[1].itemId,n_f.amount=Config.guild_guildHelpItem[GuildModel.instance.myHelpList[1].itemId].amt,h_h.setItemData(n_f),h_h.visible=!0,z_m.visible=!0,z_m.value=GuildModel.instance.myHelpList[1].progress/Config.guild_guildHelpItem[GuildModel.instance.myHelpList[1].itemId].num,h_b.text=GuildModel.instance.myHelpList[1].progress+"/"+Config.guild_guildHelpItem[GuildModel.instance.myHelpList[1].itemId].num,GuildModel.instance.myHelpList[1].progress>=Config.guild_guildHelpItem[GuildModel.instance.myHelpList[1].itemId].num&&(p_g+=1)):(t_i.visible=!0,f_y.visible=!0,n_j.text=(j_x("932_1835_517")+j_x("1191_100_1808")+j_x("2217_1841")),l_m.text="",j_l.visible=!1,h_h.visible=!1,z_m.visible=!1,h_b.text="");var n_f,t_s=this.box_3.getChildByName("b_add"),v_n=this.box_3.getChildByName("p_item"),b_o=this.box_3.getChildByName("itemBox"),b_x=this.box_3.getChildByName("t_name"),v_s=this.box_3.getChildByName("b_get"),r_c=this.box_3.getChildByName("t_info"),b_n=this.box_3.getChildByName("p_bar"),v_p=this.box_3.getChildByName("t_bar"),d_d=this.box_3.getChildByName("rp");v_s.getChildByName("rp"),b_o||((b_o=new e.ItemBox).name="itemBox",b_o.pos(v_n.x,v_n.y),b_o.isShowName=!1,this.box_3.addChild(b_o)),0<GuildModel.instance.myHelpList[2].id?(d_d.visible=!1,t_s.visible=!1,b_x.text=Config.CItem(GuildModel.instance.myHelpList[2].itemId).name,v_s.visible=!0,v_s.dataSource=GuildModel.instance.myHelpList[2],GuildModel.instance.myHelpList[2].progress===Config.guild_guildHelpItem[GuildModel.instance.myHelpList[2].itemId].num&&0===GuildModel.instance.myHelpList[2].getNum?(r_c.text=Utils.$((j_x("1163_1174_2111")+"{1}"),Config.guild_guildHelpItem[GuildModel.instance.myHelpList[2].itemId].amt),v_s.disabled=!1,v_s.visible=!0):(GuildModel.instance.myHelpList[2].progress===Config.guild_guildHelpItem[GuildModel.instance.myHelpList[2].itemId].num&&0<GuildModel.instance.myHelpList[2].getNum?r_c.text=(j_x("1917_402_100")+j_x(1358)):r_c.text=(j_x("100_1358_283")),v_s.disabled=!0,v_s.visible=!1),(n_f=new ModuleItemVO).id=GuildModel.instance.myHelpList[2].itemId,n_f.amount=Config.guild_guildHelpItem[GuildModel.instance.myHelpList[2].itemId].amt,b_o.setItemData(n_f),b_o.visible=!0,b_n.visible=!0,b_n.value=GuildModel.instance.myHelpList[2].progress/Config.guild_guildHelpItem[GuildModel.instance.myHelpList[2].itemId].num,v_p.text=GuildModel.instance.myHelpList[2].progress+"/"+Config.guild_guildHelpItem[GuildModel.instance.myHelpList[2].itemId].num,GuildModel.instance.myHelpList[2].progress>=Config.guild_guildHelpItem[GuildModel.instance.myHelpList[2].itemId].num&&(p_g+=1)):(d_d.visible=!0,t_s.visible=!0,b_x.text=(j_x("932_1835_517")+j_x("1191_100_1808")+j_x("2217_1841")),r_c.text="",v_s.visible=!1,b_o.visible=!1,b_n.visible=!1,v_p.text=""),this.t_rewardCount.text=Utils.$((j_x("1917_402_100")+j_x("1358_235_2348")+"{1}/{2}"),p_l<p_g?p_l:p_g,p_l),this.rp_box.visible=p_l<=p_g&&0==GuildModel.instance.helpInfo.giftState,this.rp_box.visible?this.ani1.play():(this.ani1.stop(),this.ani1.index=0),this.checkRedPoint()}},b_s.prototype.onListRender=function(p_l,p_g){var b_s=p_l.dataSource,d_u=p_l.getChildByName("p_item"),b_e=p_l.getChildByName("itemBox2");b_e||((b_e=new e.ItemBox).name="itemBox2",b_e.pos(d_u.x,d_u.y),b_e.isShowName=!1,p_l.addChild(b_e));var d_m=new ModuleItemVO;d_m.id=b_s.itemId,d_m.amount=Config.guild_guildHelpItem[b_s.itemId].amt,b_e.setItemData(d_m),p_l.getChildByName("t_item").text=Config.CItem(b_s.itemId).name,p_l.getChildByName("t_office").text=Utils.$("{1}",Config.guild_guildOffice[b_s.office].name),p_l.getChildByName("t_player").text=b_s.name,p_l.getChildByName("t_bar").text=b_s.progress+"/"+Config.guild_guildHelpItem[b_s.itemId].num,p_l.getChildByName("p_bar").value=b_s.progress/Config.guild_guildHelpItem[b_s.itemId].num;var d_w=p_l.getChildByName("b_help"),f_t=d_w.getChildByName("coin");if(GuildModel.instance.helpInfo.assistTimes<Config.global[GlobalDefine.guild_help_assist_times].i_info)f_t.visible=!1,d_w.dataSource={Tag:"free",value:0},d_w.label=(j_x("1358_1808"));else{f_t.visible=!0;var v_z=Config.global[GlobalDefine.guild_help_vip_gold].i_info;d_w.dataSource={Tag:"notFree",value:v_z},d_w.label="  "+v_z}},b_s.prototype.onGuildHelpList=function(){if(this.box_other.visible){var e=[];for(var p_l in GuildModel.instance.helpList)GuildModel.instance.helpList[p_l].pid!=b_p.playerId&&e.push(GuildModel.instance.helpList[p_l]);this.list.array=e,this.i_null.visible=0==e.length,this.checkRedPoint()}},b_s.prototype.onAdded=function(){LED.on(l_r.GUILD_HELP_INFO,this,this.onGuildHelpInfo),LED.on(l_r.GUILD_HELP_LIST,this,this.onGuildHelpList),LED.on(l_r.GUILD_HELP_MY_LIST,this,this.onGuildHelpMyList),this.on(Laya.UIEvent.CLICK,this,this.onMouseClick),this.list.renderHandler=Laya.Handler.create(this,this.onListRender,null,!1),this._tab.on("tabSelect",this,this.onTabSelect),this.box_my.visible=this.box_other.visible=!1,DB.instance.query(c2w_guil_help_info,new c2w_guil_help_info)},b_s.prototype.onMouseClick=function(p_l){var p_g=p_l.target;switch(p_g.name){case"closeBtn":case"backBtn":b_s.close();break;case"b_help":var d_u=GuildModel.instance.helpInfo.assistTimes,b_e=Config.global[GlobalDefine.guild_help_assist_times].i_info,d_m=this.getTimes(LgcM.ins.heroVo.vipLv),d_w=void 0;if(b_e+d_m<=d_u){var f_t=LgcM.ins.heroVo.vipLv+1;for(d_w=this.getTimes(f_t);d_w==d_m;)++f_t;return(d_w=this.getTimes(f_t))&&b_p.confirm(Utils.$((j_x("371_2342_1012")+"VIP{1}"+j_x("1163_1409_1263")+j_x("869_1358_1808")+j_x("235_2348_1628")+j_x("371_1012")+"{2}"+j_x(235)),f_t,d_w),e.VipRechardePanel.open),void b_p.broadcastNotice((j_x("1358_1808_235")+j_x("2348_1300_1876")+j_x(1917)))}if("free"==p_g.dataSource.Tag)GuildModel.instance.reqSureHelpOther([p_g.parent.dataSource.id]);else{var v_z=GuildModel.instance.reqSureHelpOther.bind(GuildModel);b_p.confirm((j_x("68_2032_572")+j_x(2218))+p_g.dataSource.value+(j_x("1263_869_33")+j_x("562_1358_1808")),v_z,[p_g.parent.dataSource.id],!1,!0)}break;case"b_add":e.GuildHelpRequest.open();break;case"b_get":var d_h=new c2w_guild_help_take_item;if(!p_g.dataSource)return;d_h.id=p_g.dataSource.id,DB.instance.query(c2w_guild_help_take_item,d_h);break;case"b_reward":e.GuildHelpReward.open()}},b_s.close=function(){Iygf(UIM,b_s)},b_s.prototype.getTimes=function(e){return Config.recharge_vip[e]?Config.recharge_vip[e].guildHelpAssistTimes:null},b_s.prototype.checkRedPoint=function(){Iyqz(this,GuildModel)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.tab.selectedIndex=0,e._tab=new p_c(e.tab),e.list.array=null,e.list.scrollBar.elasticBackTime=200,e.list.scrollBar.elasticDistance=50,e}e.GuildHelpPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guild.GuildHelpRequestUI,__extends(b_s,p_l),b_s.open=function(){Mvyg(UIM,b_s)},b_s.prototype.onListRender=function(p_l,p_g){var b_s=p_l.dataSource,d_u=p_l.getChildByName("t_name"),b_e=p_l.getChildByName("t_count"),d_m=p_l.getChildByName("p_item"),d_w=p_l.getChildByName("itemBox");d_w||((d_w=new e.ItemBox).pos(d_m.x,d_m.y),d_w.isShowName=!1,p_l.addChild(d_w),d_w.mouseEnabled=!1);var f_t=new ModuleItemVO;f_t.id=b_s.id,f_t.amount=1,d_w.setItemData(f_t);var v_z=Config.CItem(b_s.id);d_u.text=v_z?v_z.name:"",b_e.text=Utils.$((j_x("2333_1896_2348")+j_x(716)+"{1}"),BagModel.instance.getItemCountByItemID(b_s.id))},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"confirmBtn":var p_l=this.list.selectedItem,p_g=new c2w_guild_help_add;p_g.itemId=p_l.id,DB.instance.query(c2w_guild_help_add,p_g);case"closeBtn":case"backBtn":b_s.close()}},b_s.prototype.onAdded=function(){Cixl(this,Laya)},b_s.prototype.onRemoved=function(){this.off(Laya.UIEvent.CLICK,this,this.onMouseClick),this.list.renderHandler&&this.list.renderHandler.recover(),this.list.renderHandler=null,this.list.selectHandler&&this.list.selectHandler.recover(),this.list.selectHandler=null},b_s.close=function(){Ypnb(UIM,b_s)},b_s.prototype.onListSelect=function(e){},b_s.prototype.updateView=function(){Mhax(this)},b_s);function b_s(){var e=p_l.call(this)||this;e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved);var p_g=[];for(var b_s in Config.guild_guildHelpItem)p_g.push(Config.guild_guildHelpItem[b_s]);return e.list.array=p_g,e.list.scrollBar.elasticBackTime=200,e.list.scrollBar.elasticDistance=50,e.list.selectEnable=!0,e.list.selectedIndex=0,e}e.GuildHelpRequest=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guild.GuildHelpRewardUI,__extends(b_s,p_l),b_s.open=function(){Eqpk(UIM,b_s)},b_s.close=function(){Ynxc(UIM,b_s)},b_s.prototype.getRewardCount=function(){var e=0,p_l=GuildModel.instance.myHelpList;for(var p_g in p_l){var b_s=p_l[p_g].itemId;b_s&&p_l[p_g].progress>=Config.guild_guildHelpItem[b_s].num&&(e+=1)}return e},b_s.prototype.onAdded=function(){Ulrq(this,Laya)},b_s.prototype.onRemoved=function(){this.off(Laya.UIEvent.CLICK,this,this.onMouseClick),this.list.renderHandler&&this.list.renderHandler.recover(),this.list.renderHandler=null},b_s.prototype.updateView=function(){this.list.array=Config.global[GlobalDefine.guild_help_gift].t_info;var e=this.getChildByName("b_get");1==GuildModel.instance.helpInfo.giftState?e.label=(j_x("1300_1174_2111")):e.label=(j_x("1174_2111_2235")+j_x(83)),this.getRewardCount()>=Config.global[GlobalDefine.guild_help_get_help_times].i_info?e.disabled=1==GuildModel.instance.helpInfo.giftState:e.disabled=!0},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"b_get":if(this.getRewardCount()<Config.global[GlobalDefine.guild_help_get_help_times].i_info)return void b_p.broadcastNotice((j_x("1320_1283_2462")+j_x("1463_1779")));DB.instance.query(c2w_guild_help_take_gift,new c2w_guild_help_take_gift);case"closeBtn":b_s.close()}},b_s.prototype.onListRender=function(e,p_l){var p_g=new ModuleItemVO;p_g.id=e.dataSource[0],p_g.amount=e.dataSource[1],p_g.bind=e.dataSource[2],e.isShowName=!1,e.setItemData(p_g)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemoved),p_g.list.array=null,p_g.list.itemRender=e.ItemBox,p_g}e.GuildHelpReward=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guild.GuildListUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){LED.on(l_r.GUILD_LIST_UPDATE,this,this.onListUpdate),LED.on(l_r.GUILD_INFO_UPDATE,this,this.onGuildInfo),this.on(Laya.UIEvent.CLICK,this,this.onMouseClick),DB.instance.query(c2w_guild_list,new c2w_guild_list)},b_s.prototype.sortList=function(e,p_l){return 0<p_l.level-e.level?1:p_l.level-e.level<0?-1:p_l.id-e.id<0?1:-1},b_s.open=function(p_l){void 0===p_l&&(p_l=!1),GuildModel.instance.hasGuild?e.GuildMainPanel.open():UIM.open(b_s,["guild.atlas"],null,p_l)},b_s.prototype.onRemove=function(){Krok(LED,l_r,this,Laya,e)},b_s.prototype.onMouseClick=function(p_l){var p_g=p_l.target;switch(p_g.name){case"closeBtn":case"backBtn":b_s.close();break;case"createBtn":e.GuildCreatePanel.open();break;case"btn":var d_u,b_e=p_g.parent.dataSource;0==b_e.flag?((d_u=new c2w_join_guild).id=b_e.id,DB.instance.query(c2w_join_guild,d_u)):((d_u=new c2w_cancel_join_guild).id=b_e.id,DB.instance.query(c2w_cancel_join_guild,d_u))}},b_s.close=function(){Eutr(UIM,b_s)},b_s.prototype.onListUpdate=function(){Etis(GuildModel,this)},b_s.prototype.onGuildInfo=function(){GuildModel.instance.hasGuild&&(b_s.close(),e.GuildMainPanel.open(),LED.event(l_r.HELPER_UPDATE_INFO))},b_s.prototype.onItemRender=function(e,p_l){if(e){var p_g=e.getChildByName("clip"),b_s=e.getChildByName("btn"),d_u=e.getChildByName("t_guildName"),b_e=e.getChildByName("t_playerName"),d_m=e.getChildByName("t_count"),d_w=e.getChildByName("pos"),f_t=e.dataSource;(p_g=b_p.getNumSp(NumType.GUILDLISTRANK,p_l+1,p_g,-5)).x=d_w.x-p_g.width/2,b_s.label=0==f_t.flag?(j_x("2285_1777")):(j_x("2354_2465")),d_u.text=Utils.$(("{1}({2}"+j_x(2342)+")"),f_t.name,f_t.level),b_e.text=Utils.$((j_x("627_796")+":{1}"),f_t.leader),d_m.text=Utils.$((j_x("455_2348")+":{1}/{2}"),f_t.count,Config.guild_guildLevel[f_t.level].count)}},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.list.renderHandler=Laya.Handler.create(e,e.onItemRender,null,!1),e.list.array=null,e.list.scrollBar.elasticBackTime=200,e.list.scrollBar.elasticDistance=50,e}e.GuildListPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guild.GuildMainUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Crpo(LED,l_r,this,Laya)},b_s.prototype.updateRedPoint=function(){Sxlf(this,GuildModel)},b_s.prototype.updateView=function(){if(GuildModel.instance.hasGuild){this.updateRedPoint();var e=GuildModel.instance.guildInfo,p_l=GuildModel.instance.getMemberByID(b_p.playerId);this.t_changeName.visible=1==Config.guild_guildOffice[p_l.office].rename,this.editBtn.visible=1==Config.guild_guildOffice[p_l.office].editNotice,this.guildName.text=e.name,this.t_glv.text=e.level.toString(),this.progress.value=e.money/Config.guild_guildLevel[e.level].money,this.progressTxt.text=Utils.$("{1}/{2}",b_p.calsulate(e.money),b_p.calsulate(Config.guild_guildLevel[e.level].money)),this.noticeArea.text=e.notice,this.noticeArea.editable=!1,this.noticeArea.disabled=!0,this.noticeArea.gray=!1,this.editBtn.text=(j_x("1222_707")),e.icon&&(this.icon=Resource.ResManager.Instance.getImg(Resource.ResUrl.ASSETS_URL+Config.guild_guildFlag[e.icon].source,this.icon)),this.guildPersonNum.text=Utils.$("{1}/{2}",e.guild_member.length,Config.guild_guildLevel[e.level].count),this.guild_Money.text=b_p.calsulate(e.wealth),this.guildAttack.text=b_p.calsulate(e.fight)}else b_s.close()},b_s.close=function(){Ktxk(UIM,b_s)},b_s.open=function(p_l){void 0===p_l&&(p_l=!1),GuildModel.instance.hasGuild?(UIM.open(b_s,["guild.atlas"],null,p_l),e.GuildCheckinPanel.close(),e.GuildBossOpen.close()):e.GuildListPanel.open()},b_s.prototype.onRemove=function(){Wrzs(LED,l_r,this,Laya,e)},b_s.prototype.checkNotic=function(e,p_l){if(0!=e){var p_g=new c2w_edit_notice;p_g.notice=p_l,DB.instance.query(c2w_edit_notice,p_g)}else b_p.broadcastNotice((j_x("1273_610_130")+j_x("241_1387_1492")+j_x(1794)))},b_s.prototype.updateItemInfo=function(e){e&&Config.guild_guildContribute[e.id]&&this.updateRedPoint()},b_s.prototype.onMouseDown=function(e){var p_l=e.target;this.bg.contains(p_l)&&this.bg!==p_l&&0===p_l.alpha&&(p_l.alpha=1)},b_s.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"backBtn":case"closeBtn":b_s.close();break;case"editBtn":this.noticeArea.editable?(this.noticeArea.editable=!1,this.noticeArea.disabled=!0,this.noticeArea.gray=!1,this.editBtn.text=(j_x("1222_707")),ShieldWordManager.ins.isShield(this.noticeArea.text,Laya.Handler.create(this,this.checkNotic))):(this.noticeArea.editable=!0,this.noticeArea.disabled=!1,this.editBtn.text=(j_x("1917_402")),this.noticeArea.focus=!0);break;case"giveBtn":e.GuildContributePanel.open();break;case"hallBtn":case"i_hall":e.GuildHallPanel.open();break;case"shopBtn":case"i_shop":e.ShopAllPanel.open(ShopConstant.type_guild);break;case"i_bag":e.GuildBag.open();break;case"checkinBtn":case"i_checkin":e.GuildCheckinPanel.open();break;case"sellBtn":case"i_sell":e.GuildAuctionPanel.open();break;case"helpBtn":case"i_help":e.GuildHelpPanel.open();break;case"bossBtn":case"i_boss":e.GuildBossPanel.open();break;case"t_changeName":e.GuildRenamePanel.open();break;case"b_help":b_e.open()}},b_s.prototype.onMouseUp=function(e){Yehw(e,this)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.noticeArea.maxChars=50,e}e.GuildMainPanel=p_g;var d_u,b_e=(d_u=ui.window.guild.guildMain_helpUI,__extends(d_m,d_u),d_m.prototype.onAdded=function(){Cqzh(this,Laya)},d_m.prototype.onClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":d_m.close()}},d_m.prototype.onRemoved=function(){Wckj(this,Laya)},d_m.open=function(){Cabd(UIM,d_m)},d_m.close=function(){Ucpl(UIM,d_m)},d_m);function d_m(){var e=d_u.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.GuildMainHelpPanel=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guild.GuildCreateUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Mczz(this,Laya,GuildModel)},b_s.close=function(){Ywli(UIM,b_s)},b_s.prototype.onRemove=function(){Eqsd(this)},b_s.open=function(){Cxhn(UIM,b_s)},b_s.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"cancelBtn":b_s.close();break;case"commitBtn":var p_g=new c2w_guild_change_name_req;p_g.name=this.input.text,DB.instance.query(c2w_guild_change_name_req,p_g);break;case"changeBtn":e.GuildFlagChangePanel.open(this.selectedIcon)}},b_s.prototype.removeListener=function(){Qmth(this,Laya,LED,l_r)},b_s.prototype.onStageClick=function(e){e&&(e.target==this||this.contains(e.target))||b_s.close()},b_s.prototype.addListener=function(){Osux(this,Laya,LED,l_r)},b_s.prototype.onFlagChange=function(e){Ovwb(e,this,Resource,Config)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.c_title.index=1,e.input.maxChars=5,e.input.text="",e.selectedIcon=1,e.box_flag.visible=!1,e.getChildByName("commitBtn").label=(j_x("2249_1943")),e.c_coin.index=0,e.t_coin.text=Config.global[GlobalDefine.guild_change_name].i_info.toString(),e.t_desc.text=(j_x("1374_1547_1511")+j_x("774_1624_1661")+j_x(1502)+""),e}e.GuildRenamePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.shoppopupUI,__extends(b_s,p_l),b_s.open=function(e){Ovuh(e,UIM,b_s)},b_s.close=function(){Wxfy(UIM,b_s)},b_s.prototype.onMouseClick=function(e){var p_l=e.target;if(this.dataSource){var p_g=parseInt(this.useNumTxt.text.split("/")[0]),d_u=Config.guild_guildShop[this.dataSource.id],b_e=GuildModel.instance.exchangeInfo[this.dataSource.id],d_m=GuildModel.instance.getConfigMax(d_u)-(b_e?b_e.count:0);switch(p_l.name){case"cutBtn":(p_g-=1)<1&&(p_g=1),this.useNumTxt.text=p_g.toString()+"/"+d_m,this.numTxt.color=d_u.money*p_g>LgcM.ins.heroVo.guildCtrb?"#c92828":"#008931",this.numTxt.text=(d_u.money*p_g).toString();break;case"cutTenBtn":(p_g-=10)<1&&(p_g=1),this.useNumTxt.text=p_g.toString()+"/"+d_m,this.numTxt.color=d_u.money*p_g>LgcM.ins.heroVo.guildCtrb?"#c92828":"#008931",this.numTxt.text=(d_u.money*p_g).toString();break;case"addBtn":d_m-(p_g+=1)<0&&(p_g=d_m),this.useNumTxt.text=p_g.toString()+"/"+d_m,this.numTxt.color=d_u.money*p_g>LgcM.ins.heroVo.guildCtrb?"#c92828":"#008931",this.numTxt.text=(d_u.money*p_g).toString();break;case"addTenBtn":d_m-(p_g+=10)<0&&(p_g=d_m),this.useNumTxt.text=p_g.toString()+"/"+d_m,this.numTxt.color=d_u.money*p_g>LgcM.ins.heroVo.guildCtrb?"#c92828":"#008931",this.numTxt.text=(d_u.money*p_g).toString();break;case"useBtn":var d_w=new c2m_guild_exchange_buy_req;d_w.guildId=GuildModel.instance.guildInfo.id,d_w.id=this.dataSource.id,d_w.level=GuildModel.instance.guildInfo.level,d_w.count=parseInt(this.useNumTxt.text.split("/")[0]),DB.instance.query(c2m_guild_exchange_buy_req,d_w);case"closeBtn":b_s.close()}}},b_s.prototype.onAdd=function(e){Kdno(e,this,Laya)},b_s.prototype.onRemove=function(e){Udqb(e,this,Laya)},b_s.prototype.updateView=function(){var e=Config.guild_guildShop[this.dataSource.id],p_l=new ModuleItemVO;p_l.id=e.itemId,p_l.amount=1,this.itemBox.isShowName=!1,this.itemBox.setItemData(p_l),this.nameTxt.text=Config.CItem(e.itemId).name;var p_g=LgcM.ins.heroVo.guildCtrb;this.lvTxt.color=e.money>p_g?"#c92828":"#008931",this.lvTxt.text=Utils.$("{1}",e.money);var b_s=e.money*parseInt(this.useNumTxt.text.split("/")[0]);this.numTxt.color=p_g<b_s?"#c92828":"#008931",this.numTxt.text=Utils.$("{1}",b_s);var d_u=Config.item_coin[CoinDefine.GCTRB],b_e=Resource.ResUrl.getIconUrl(d_u.minIcon);this.moneyClip.skin=b_e,this.moneyClip.clipX=this.moneyClip.clipY=1,this.moneyClip.index=0,this.moneyClip.visible=!0,this.moneyall.skin=b_e,this.moneyall.clipX=this.moneyall.clipY=1,this.moneyall.index=0,this.moneyall.visible=!0;var d_m=GuildModel.instance.exchangeInfo[this.dataSource.id];this.useNumTxt.text=parseInt(this.useNumTxt.text.split("/")[0])+"/"+(GuildModel.instance.getConfigMax(e)-(d_m?d_m.count:0))},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdd),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.GuildShopPopup=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guild.GuildBagUI,__extends(b_s,p_l),b_s.prototype.initComBo=function(){Agfg(GuildModel,this)},b_s.prototype.onSelect=function(e){var p_l=this.comboQuality.selectedIndex,p_g=-1==p_l?-1:this._qualityList[p_l].key;this.selectState!=p_g&&(this._selectData[GuildConstant.select_quality]=p_g,this.showWhich())},b_s.prototype.showWhich=function(){Mslu(GuildModel,this)},Object.defineProperty(b_s.prototype,"selectState",{get:function(){return this._selectData[GuildConstant.select_quality]||-1},enumerable:!0,configurable:!0}),b_s.prototype.onAdded=function(){Wign(LED,l_r,this,Laya,GuildModel)},b_s.close=function(){Mcss(UIM,b_s)},b_s.prototype.updateItem=function(e,p_l){if(e){e.itemBox.setItemData(e.dataSource,ItemBoxDefine.BAG_INFO,!1);var p_g=!1,b_s=e.dataSource.cItem;b_s&&b_s.mainclass===ItemTypeDefine.CONSUME&&(p_g=!0),e.rp.visible=p_g}},b_s.prototype.onClick=function(p_l){switch(p_l.target){case this.btnClose:case this.btnBack:b_s.close();break;case this.btnRecord:e.GuildBagRecord.open();break;case this.btnSave:e.GuildBagStore.open();break;case this.btnTidy:e.GuildBagTidy.open();break;case this.btnDesc:e.GuildBagDesc.open()}},b_s.open=function(){Kyiq(UIM,b_s,GuildModel)},b_s.prototype.updateScore=function(){Ilpb(this,j_x,GuildModel)},b_s.prototype.resetCombo=function(){Urcr(this)},b_s.prototype.updateView=function(){this.resetCombo(),this.updateScore(),this.txtSpace.text=GuildModel.instance.useSize+"/"+GuildModel.instance.totalSize;for(var e,p_l,p_g=[],b_s=GuildModel.instance.repositoryList,d_u=0;d_u<b_s.length;d_u++)p_l=b_s[d_u],e=r_r.getBagInfoVO(p_l.itemid,p_l.num,p_l.uuid),p_g.push(e);if(GuildModel.instance.sortList(p_g),p_g.length<this._showMinNum){var b_e=this._showMinNum-p_g.length;for(d_u=0;d_u<b_e;d_u++)p_g.push(r_r.getBagInfoVO())}this._bagList=p_g,this.itemList.array=p_g,this.btnTidy.visible=GuildModel.instance.isManagerRepository},b_s.prototype.onRemove=function(){Qkol(this,LED,l_r,Laya)},b_s.prototype.onSelectItem=function(p_l){var p_g=this.itemList.getCell(p_l);if(p_g){var b_s=p_g.dataSource;this.itemList.selectedIndex=-1,0<b_s.id&&e.GuildBagExchange.open(b_s)}},b_s);function b_s(){var e=p_l.call(this)||this;return e._selectData={},e._showMinNum=6*e.itemList.repeatX,e.itemList.vScrollBarSkin="",e.itemList.scrollBar.elasticDistance=100,e.itemList.scrollBar.elasticBackTime=200,e.initComBo(),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.itemList.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.itemList.selectHandler=Laya.Handler.create(e,e.onSelectItem,null,!1),e}e.GuildBag=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guild.GuildBagDelUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Cmdf(this,Laya)},b_s.prototype.onRemove=function(){Otjk(this,Laya)},b_s.open=function(e){void 0===e&&(e=null),UIM.open(b_s,["guild.atlas"],e,!1,!1,!0)},b_s.prototype.onClick=function(e){switch(e.target){case this.btnClose:case this.btnBack:b_s.close();break;case this.btnSure:this._selectList&&GuildModel.instance.reqRepositoryDel(this._selectList),b_s.close()}},b_s.close=function(){Mwwt(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.GuildBagDel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guild.GuildBagDescUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Onol(this,Laya)},b_s.prototype.onClick=function(e){switch(e.target){case this.btnClose:b_s.close()}},b_s.open=function(){Uulr(UIM,b_s)},b_s.prototype.onRemove=function(){Cywv(this,Laya)},b_s.close=function(){Wdde(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.GuildBagDesc=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guild.GuildBagExchangeUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Aeyf(this,Laya)},b_s.prototype.onRemove=function(){Ynfx(this,Laya)},b_s.prototype.updateView=function(){if(this.dataSource){var e=this.dataSource;this._vo=this.dataSource,this.goodItem.rp.visible=!1,this.goodItem.itemBox.isShowName=!1,this.goodItem.itemBox.setItemData(e,ItemBoxDefine.MODULE_ITEM,!1);var p_l=GuildModel.instance.getRepositoryScoreByID(e.id,GuildConstant.score_exchange);this.txtScore.text=(j_x("1763_1713_774")+j_x("1624_1661_1502")+j_x("1491_1760_514")+j_x(2224))+p_l+(""+j_x("2085_4_2228")+"")}},b_s.open=function(e){void 0===e&&(e=null),UIM.open(b_s,["guild.atlas"],e,!1,!1,!0)},b_s.prototype.onClick=function(e){switch(e.target){case this.btnClose:case this.btnBack:this.closeSelf();break;case this.btnSure:this.reqExchange(),this.closeSelf()}},b_s.prototype.reqExchange=function(){if(this._vo){var e=[],p_l=GuildModel.instance.convertRepositoryItem(this._vo);p_l.num=1,e.push(p_l),GuildModel.instance.reqRepositoryExchange(e)}},b_s.prototype.closeSelf=function(){Gpid(b_s)},b_s.close=function(){Mvov(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.GuildBagExchange=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guild.GuildBagRecordUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Ysmt(this,LED,l_r,Laya)},b_s.open=function(){Ihze(UIM,b_s,GuildModel)},b_s.prototype.onRemove=function(){Yfkk(this,Laya,LED,l_r)},b_s.prototype.onClick=function(e){switch(e.target){case this.btnClose:b_s.close();break;case this.btnAdd:this.changePage(1);break;case this.btnCut:this.changePage(-1)}},b_s.prototype.updateView=function(){var e=GuildModel.instance.repositoryRecordList,p_l=(this.itemList.array=e).length,p_g=!(0<p_l);this.txtNot.visible=p_g;var b_s=Math.ceil(p_l/this.showLen);this.maxPage=b_s,this.updateBtn()},b_s.close=function(){Ehkn(UIM,b_s)},Object.defineProperty(b_s.prototype,"scrollValue",{get:function(){return this.itemList.scrollBar.value},enumerable:!0,configurable:!0}),b_s.prototype.changePage=function(e){var p_l=this.curPage+e;p_l<0||p_l>this.maxPage||(this.curPage!=p_l&&(this.isClick=!0),this.curPage=p_l,this.updateBtn(),this.updatePage())},b_s.prototype.updateBtn=function(){var e=this.curPage,p_l=!0,p_g=!0;1==this.maxPage?p_g=p_l=!1:e+1>=this.maxPage?p_g=!1:e-1<0&&(p_l=!1),this.btnCut.visible=p_l,this.btnAdd.visible=p_g;var b_s=e<1?1:e+1;b_s>this.maxPage&&(b_s=this.maxPage,this.curPage=this.maxPage),this.txtPage.text=b_s+"/"+this.maxPage},b_s.prototype.onEnd=function(){this.isClick||this.isAuto||(this.isAuto=!0),this.isClick=!1,this.isAuto&&(this.isAuto=!1),this.curValue=this.scrollValue},b_s.prototype.getOperator=function(e){var p_l=(j_x("486_2456"));return 2==e?p_l=(j_x("1763_1713")):3==e&&(p_l=(j_x("2162_140"))),p_l},b_s.prototype.goPage=function(e,p_l){void 0===e&&(e=!0),void 0===p_l&&(p_l=null);var p_g=this.itemList.cells[0].height;p_l=p_l||this.scrollValue;var b_s=Math.ceil(p_l/(p_g*this.showLen)),d_u=!0;e&&(d_u=0!=p_l&&p_l%p_g==0),d_u?this.curPage=b_s:(this.curPage=b_s,this.updatePage()),this.updateBtn()},b_s.prototype.onScrollChange=function(e){Yhgo(e,this)},b_s.prototype.updateItem=function(e,p_l){if(e){var p_g=e.getChildByName("txtDesc"),b_s=e.dataSource,d_u=(j_x("1865_1759_583"));p_g.style.color="#4a728e",p_g.style.fontSize=20;var b_e=Config.CItem(b_s.itemid);b_e&&(d_u=b_e.name);var d_m=this.getOperator(b_s.operator),d_w=Utils.formatTimeStr4(b_s.time,!1);p_g.innerHTML=d_w+b_s.name+d_m+"&nbsp;"+Utils.setColor(d_u,"#e508f8")+"&nbsp;"+b_s.num+(j_x(1283))}},b_s.prototype.updatePage=function(){var e=0<this.curPage?this.curPage*this.showLen+1:0;this.itemList.tweenTo(e)},b_s);function b_s(){var e=p_l.call(this)||this;return e.curValue=0,e.itemList.vScrollBarSkin="",e.itemList.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.showLen=e.itemList.repeatY,e.itemList.scrollBar.changeHandler=Laya.Handler.create(e,e.onScrollChange,null,!1),e.itemList.scrollBar.on(Laya.Event.END,e,e.onEnd),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.GuildBagRecord=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guild.GuildBagSaveUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Exde(this,Laya)},b_s.prototype.onClick=function(e){switch(e.target){case this.btnClose:case this.btnBack:b_s.close();break;case this.btnSure:this._selectList&&GuildModel.instance.reqRepositoryAdd(z_j.getNewList(this._selectList,"uuid")),b_s.close()}},b_s.prototype.updateView=function(){var e=0;if(this._selectList)for(var p_l=0;p_l<this._selectList.length;p_l++){var p_g=this._selectList[p_l];e+=GuildModel.instance.getRepositoryScoreByID(p_g.itemid,GuildConstant.score_get)}this.txtScore.text=(j_x("486_2456_517")+j_x("283_2217_1841")+j_x("1163_531_1976")+j_x("514_2224"))+e+(","+j_x("2085_4_2228")+"")},b_s.prototype.onRemove=function(){Ciue(this,Laya)},b_s.open=function(e){void 0===e&&(e=null),UIM.open(b_s,["guild.atlas"],e,!1,!1,!0)},b_s.close=function(){Krdi(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e._selectList=[],e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.GuildBagSave=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guild.GuildBagStoreUI,__extends(b_s,p_l),b_s.prototype.initComBo=function(){Qylo(GuildModel,this)},b_s.prototype.onSelect=function(e){var p_l=this.comboQuality.selectedIndex,p_g=-1==p_l?-1:this._qualityList[p_l].key;this.selectState!=p_g&&(this.clearSelect(),this._selectData[GuildConstant.select_quality]=p_g,this._isSelect=!0,this.updateSelect(),this.showWhich())},Object.defineProperty(b_s.prototype,"selectState",{get:function(){return this._selectData[GuildConstant.select_quality]||-1},enumerable:!0,configurable:!0}),b_s.prototype.showWhich=function(){var e,p_l;if(this.listReset(),-1==this.selectState){e=[],p_l=this._bagList.length;for(var p_g=0;p_g<p_l;p_g++){var b_s=this._bagList[p_g];e.push(b_s)}}else for(p_l=(e=GuildModel.instance.getItemShowList(this._bagList,this.selectState,this._showMinNum)).length,p_g=this._selectCount=0;p_g<p_l&&(b_s=e[p_g],!(p_g>=this._selectMax));p_g++)this._selectData[b_s.uuid]=!0;this.itemList.array=e},b_s.prototype.updateItem=function(e,p_l){if(e){var p_g=e.dataSource;if(!p_g)return;e.itemBox.setItemData(p_g,ItemBoxDefine.BAG_INFO,!1);var b_s=e.itemBox.setClickSelect=!1,d_u=!1,b_e=p_g.cItem;b_e&&(b_s=this.getSelect(b_e.quality,p_g.uuid),b_e.mainclass===ItemTypeDefine.CONSUME&&(d_u=!0)),e.rp.visible=d_u,b_s&&(e.itemBox.isShowSelect=b_s),this.itemSelect(e,p_l,b_s)}},b_s.prototype.updateCheck=function(){for(var e=0;e<this._checkList.length;e++){var p_l=this._checkList[e];this._isSelect||(p_l.selected=!1),this.changeCheck(p_l)}},b_s.prototype.updateScore=function(){var e=0;if(this._selectList)for(var p_l=0;p_l<this._selectList.length;p_l++){var p_g=this._selectList[p_l];e+=GuildModel.instance.getRepositoryScoreByID(p_g.id,GuildConstant.score_get)}this.txtScore.text=(j_x("486_2456_1163")+j_x("531_1976_514")+j_x(2224)+"")+e},b_s.prototype.clearListSelect=function(){Qsjw(this)},b_s.prototype.isShowSelect=function(e){return Kgfu(e)},b_s.prototype.updateView=function(){Yknp(this)},b_s.prototype.onSelectItem=function(e){if(this._isAuto)this._isAuto=!1;else{var p_l=this.itemList.getCell(e);if(p_l){var p_g=p_l;if(!this._isSelect)return p_g.itemBox.openTip(),void this.clearListSelect();this._isAuto=!0,this.clearListSelect(),p_l.dataSource;var b_s=!p_g.itemBox.isSelect;b_s&&this._selectCount+1>this._selectMax?b_p.broadcastNotice((j_x("1081_2251_86")+j_x("1919_486_2456")+"10"+j_x(844))):this.itemSelect(p_g,e,b_s)}}},b_s.prototype.onRemove=function(){Uqwy(LED,l_r,this,Laya)},b_s.prototype.clearSelect=function(){var e;GuildModel.instance.clearRepository(),this._selectCount=0,this._selectData={},this._selectShowData={},this._selectList=[];for(var p_l=this._selectItemList.length-1;0<=p_l;p_l--)(e=this._selectItemList[p_l]).itemBox.isNotNum=!0,e.itemBox.isShowRightTick=!1,this._selectItemList.splice(p_l,1)},b_s.prototype.reset=function(){Qqvp(this)},b_s.prototype.onAdded=function(){Mryp(LED,l_r,this,Laya)},b_s.prototype.onClick=function(e){switch(e.target){case this.btnClose:case this.btnBack:b_s.close();break;case this.btnSelect:this.onPropSelect();break;case this.btnSave:this.onSave();break;case this.checkGreen:case this.checkBlue:case this.checkPurple:case this.checkOrange:case this.checkRed:this.changeCheck(e.target)}},b_s.close=function(){Wcys(UIM,b_s)},b_s.prototype.onPropSelect=function(){Cznw(this)},b_s.prototype.updateSelect=function(){this.btnSelect.label=this._isSelect?(j_x("2111_1661_517")+j_x(1191)):(j_x("517_1191_2217")+j_x(1841));var e=1,p_l="#444675,#444675,#6b6b6b";this._isSelect||(this.clearSelect(),e=2,p_l="#804a00,#804a00,#6b6b6b"),this.btnSelect.labelColors=p_l,this.btnSelect.skin="res/ui/common/Button_common_0"+e+".png",this.updateShowList()},b_s.prototype.updateBtnStatu=function(){Qpah(this)},b_s.prototype.itemSelect=function(e,p_l,p_g){void 0===p_g&&(p_g=!1);var b_s=e.dataSource;if(b_s){var d_u=p_g,b_e=e.itemBox.checkSelect.selected=d_u;d_u||(b_e=this._isSelect&&this.isShowSelect(e)),e.itemBox.isShowSelect=b_e,d_u?null==this._selectShowData[b_s.uuid]&&0!=b_s.id&&this._selectCount<this._selectMax&&(this._selectItemList.push(e),this._selectList.push(b_s),this._selectCount++,this._selectData[b_s.uuid]=!0,this._selectShowData[b_s.uuid]=!0):(this.delItem(e),null!=this._selectShowData[b_s.uuid]&&this._selectCount--,this._selectData[b_s.uuid]=null,delete this._selectData[b_s.uuid],this._selectShowData[b_s.uuid]=null,delete this._selectShowData[b_s.uuid]),this.updateScore(),this.updateBtnStatu()}},b_s.prototype.updateShowList=function(){Oufz(this)},b_s.prototype.updateList=function(){var e=ItemTypeDefine.ITEM,p_l=-1;1===this._selectIndex?e=ItemTypeDefine.EQUIPMENT:3===this._selectIndex&&(e=ItemTypeDefine.MATERIAL,p_l=ItemClassDefine.SUB_PET);for(var p_g,b_s=BagTypeDefine.BAG_TYPE_ITEM,d_u=BagModel.instance.getBagItemsByType(b_s,e,p_l),b_e=[],d_m=0;d_m<d_u.length;d_m++){var d_w=d_u[d_m];if(0!=d_w.id){var f_t=d_w.cItem;p_g=!1,f_t&&f_t.mainclass===ItemTypeDefine.EQUIPMENT&&f_t.subclass===ItemTypeDefine.SPIRIT&&f_t.quality>=ItemQualityDefine.GREEN&&(p_g=!0),GuildModel.instance.isAllEquip&&(p_g=!0),p_g&&b_e.push(d_w)}}if(GuildModel.instance.sortList(b_e),b_e.length<this._showMinNum)for(var v_z=this._showMinNum-b_e.length,d_h=0;d_h<v_z;d_h++)b_e.push(r_r.getBagInfoVO());this._bagList=b_e,this.itemList.array=b_e},b_s.prototype.showRightTick=function(e,p_l){Qnvr(e,p_l)},b_s.prototype.listReset=function(){Iavh(this)},b_s.prototype.getSelect=function(e,p_l){return Mnxf(e,p_l,this)},b_s.prototype.onSave=function(){var p_l;this._bagList&&0!=this._bagList.length?0!=(p_l=this._isTest?GuildModel.instance.getRepositoryItemList(this._bagList):GuildModel.instance.getRepositoryItemList(this._selectList)).length?e.GuildBagSave.open(p_l):b_p.broadcastNotice((j_x("1971_1896_517")+j_x("1191_2217_1841"))):b_p.broadcastNotice((j_x("486_1444_1119")+j_x("1971_1896_2217")+j_x(1841)))},b_s.open=function(){Much(UIM,b_s)},b_s.prototype.updateSelectList=function(e,p_l){void 0===p_l&&(p_l=!0),p_l?this._selectData[e]=!0:(this._selectData[e]=null,delete this._selectData[e]);for(var p_g,b_s=this.itemList.length,d_u=0;d_u<b_s;d_u++){var b_e=this.itemList.getCell(d_u);if(b_e){var d_m=b_e.dataSource;p_g=0,d_m&&(p_g=d_m.id);var d_w=Config.CItem(p_g);if(d_w&&d_w.quality==e){var f_t=b_e;f_t.itemBox.isShowSelect=!0,this.itemSelect(f_t,d_u,p_l)}}}},b_s.prototype.changeCheck=function(e){Mjiw(e,GameDefine,GuildModel,GuildConstant,this)},b_s.prototype.resetCombo=function(){Cqwe(this)},b_s.prototype.delItem=function(e){for(var p_l=0;p_l<this._selectItemList.length;p_l++)if(this._selectItemList[p_l].dataSource==e.dataSource){this._selectItemList.splice(p_l,1),this._selectList.splice(p_l,1);break}},b_s);function b_s(){var e=p_l.call(this)||this;return e._selectIndex=1,e._selectList=[],e._selectItemList=[],e._isTest=!1,e._selectData={},e._selectShowData={},e._selectMax=10,e._selectCount=0,e._isAuto=!1,e._showMinNum=6*e.itemList.repeatX,e.itemList.vScrollBarSkin="",e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e._checkList=[e.checkGreen,e.checkBlue,e.checkPurple,e.checkOrange,e.checkRed],e.itemList.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.itemList.selectHandler=Laya.Handler.create(e,e.onSelectItem,null,!1),e.initComBo(),e}e.GuildBagStore=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guild.GuildBagTidyUI,__extends(b_s,p_l),b_s.prototype.initComBo=function(){Qyzf(GuildModel,this)},b_s.prototype.onSelect=function(e){var p_l=this.comboQuality.selectedIndex,p_g=-1==p_l?-1:this._qualityList[p_l].key;this.selectState!=p_g&&(this.clearSelect(),this._selectData[GuildConstant.select_quality]=p_g,this._isSelect=!0,this.updateSelect(),this.showWhich())},b_s.prototype.showWhich=function(){var e,p_l;if(this.listReset(),-1==this.selectState){e=[],p_l=this._bagList.length;for(var p_g=0;p_g<p_l;p_g++){var b_s=this._bagList[p_g];e.push(b_s)}}else for(p_l=(e=GuildModel.instance.getItemShowList(this._bagList,this.selectState,this._showMinNum)).length,p_g=this._selectCount=0;p_g<p_l&&(b_s=e[p_g],!(p_g>=this._selectMax));p_g++)this._selectData[b_s.uuid]=!0;this.itemList.array=e},b_s.prototype.listReset=function(){Wyvk(this)},Object.defineProperty(b_s.prototype,"selectState",{get:function(){return this._selectData[GuildConstant.select_quality]||-1},enumerable:!0,configurable:!0}),b_s.open=function(){Ijlx(UIM,b_s,GuildModel)},b_s.prototype.getSelect=function(e,p_l){return Ikbz(e,p_l,this)},b_s.prototype.resetCombo=function(){Kvon(this)},b_s.prototype.onAdded=function(){Qfim(LED,l_r,this,Laya)},b_s.close=function(){Koqh(UIM,b_s)},b_s.prototype.updateView=function(){this.resetCombo(),this.txtSpace.text=GuildModel.instance.useSize+"/"+GuildModel.instance.totalSize;for(var e,p_l,p_g=[],b_s=GuildModel.instance.repositoryList,d_u=0;d_u<b_s.length;d_u++)p_l=b_s[d_u],e=r_r.getBagInfoVO(p_l.itemid,p_l.num,p_l.uuid),p_g.push(e);if(GuildModel.instance.sortList(p_g),p_g.length<this._showMinNum){var b_e=this._showMinNum-p_g.length;for(d_u=0;d_u<b_e;d_u++)p_g.push(r_r.getBagInfoVO())}this._bagList=p_g,this.itemList.array=p_g,this.updateCheck()},b_s.prototype.updateItem=function(e,p_l){if(e){var p_g=e.dataSource,b_s=!1,d_u=!1;e.itemBox.setItemData(p_g,ItemBoxDefine.BAG_INFO,!1),e.itemBox.setClickSelect=!1;var b_e=p_g.cItem;b_e&&(b_s=this.getSelect(b_e.quality,p_g.uuid),b_e.mainclass===ItemTypeDefine.CONSUME&&(d_u=!0)),this.itemSelect(e,p_l,b_s),e.rp.visible=d_u}},b_s.prototype.itemSelect=function(e,p_l,p_g){void 0===p_g&&(p_g=!1);var b_s=e.dataSource;if(b_s){var d_u=p_g,b_e=e.itemBox.checkSelect.selected=d_u;if(d_u||(b_e=this._isSelect&&this.isShowSelect(e)),e.itemBox.isShowSelect=b_e,d_u){if(null==this._selectShowData[b_s.uuid]&&0!=b_s.id&&this._selectCount<this._selectMax){var d_m=GuildModel.instance.convertRepositoryItem(b_s);this._selectItemList.push(e),this._selectList.push(d_m),this._selectCount++,this._selectData[b_s.uuid]=!0,this._selectShowData[b_s.uuid]=!0}}else this.delItem(e),null!=this._selectShowData[b_s.uuid]&&this._selectCount--,this._selectData[b_s.uuid]=null,delete this._selectData[b_s.uuid],this._selectShowData[b_s.uuid]=null,delete this._selectShowData[b_s.uuid];this.updateBtnStatu()}},b_s.prototype.clearListSelect=function(){Wohm(this)},b_s.prototype.onSelectItem=function(e){if(this._isAuto)this._isAuto=!1;else{var p_l=this.itemList.getCell(e);if(p_l){var p_g=p_l;if(!this._isSelect)return p_g.itemBox.openTip(),void this.clearListSelect();this._isAuto=!0,this.clearListSelect(),p_l.dataSource;var b_s=!p_g.itemBox.isSelect;b_s&&this._selectCount+1>this._selectMax?b_p.broadcastNotice((j_x("1081_2251_86")+j_x("1919_486_2456")+"10"+j_x(844))):this.itemSelect(p_g,e,b_s)}}},b_s.prototype.onClick=function(e){switch(e.target){case this.btnClose:case this.btnBack:b_s.close();case this.btnSelect:this.onPropSelect();break;case this.btnDel:this.onDel();break;case this.checkGreen:case this.checkBlue:case this.checkPurple:case this.checkOrange:case this.checkRed:this.changeCheck(e.target)}},b_s.prototype.onRemove=function(){Uvhv(this,Laya,LED,l_r)},b_s.prototype.updateSelectList=function(e,p_l){void 0===p_l&&(p_l=!0),p_l?this._selectData[e]=!0:(this._selectData[e]=null,delete this._selectData[e]);for(var p_g,b_s=this.itemList.length,d_u=0;d_u<b_s;d_u++){var b_e=this.itemList.getCell(d_u);if(b_e){var d_m=b_e.dataSource;p_g=0,d_m&&(p_g=d_m.itemid);var d_w=Config.CItem(p_g);if(d_w&&d_w.quality==e){var f_t=b_e;f_t.itemBox.isShowSelect=!0,this.itemSelect(f_t,d_u,p_l)}}}},b_s.prototype.resetListSelect=function(){Ojym(this)},b_s.prototype.updateBtnStatu=function(){Kwho(this)},b_s.prototype.changeCheck=function(e){Oryg(e,GameDefine,GuildModel,GuildConstant,this)},b_s.prototype.onDel=function(){if(this._isTest&&0<this._bagList.length){var p_l=[],p_g=GuildModel.instance.convertRepositoryItem(this._bagList[0]);p_l.push(p_g),this._selectList=p_l}0!=this._selectList.length?e.GuildBagDel.open(this._selectList):b_p.broadcastNotice((j_x("1971_1896_517")+j_x("1191_2217_1841")))},b_s.prototype.reset=function(){Mwzj(this)},b_s.prototype.onPropSelect=function(){Szbh(this)},b_s.prototype.updateShowList=function(){Okdq(this)},b_s.prototype.updateCheck=function(){for(var e=0;e<this._checkList.length;e++){var p_l=this._checkList[e];this._isSelect||(p_l.selected=!1),this.changeCheck(p_l)}},b_s.prototype.updateSelect=function(){this.btnSelect.label=this._isSelect?(j_x("2111_1661_517")+j_x(1191)):(j_x("517_1191_2217")+j_x(1841));var e=1,p_l="#444675,#444675,#6b6b6b";this._isSelect||(this.clearSelect(),e=2,p_l="#804a00,#804a00,#6b6b6b"),this.btnSelect.labelColors=p_l,this.btnSelect.skin="res/ui/common/Button_common_0"+e+".png",this.updateShowList()},b_s.prototype.clearSelect=function(){var e;GuildModel.instance.clearRepository(),this._selectCount=0,this._selectData={},this._selectShowData={},this._selectList=[];for(var p_l=this._selectItemList.length-1;0<=p_l;p_l--)(e=this._selectItemList[p_l]).itemBox.isNotNum=!0,e.itemBox.isShowRightTick=!1,this._selectItemList.splice(p_l,1)},b_s.prototype.isShowSelect=function(e){return Qupq(e)},b_s.prototype.showRightTick=function(e,p_l){Ygtp(e,p_l)},b_s.prototype.delItem=function(e){for(var p_l=0;p_l<this._selectItemList.length;p_l++)if(this._selectItemList[p_l].dataSource==e.dataSource){this._selectItemList.splice(p_l,1),this._selectList.splice(p_l,1);break}},b_s);function b_s(){var e=p_l.call(this)||this;return e._selectList=[],e._selectItemList=[],e._isTest=!1,e._selectData={},e._selectShowData={},e._selectMax=10,e._selectCount=0,e._isAuto=!1,e._showMinNum=6*e.itemList.repeatX,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.itemList.vScrollBarSkin="",e.itemList.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.itemList.selectHandler=Laya.Handler.create(e,e.onSelectItem,null,!1),e._checkList=[e.checkGreen,e.checkBlue,e.checkPurple,e.checkOrange,e.checkRed],e.initComBo(),e}e.GuildBagTidy=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guildPvp.guildManorRewardUI,__extends(b_s,p_l),b_s.open=function(){Iohx(UIM,b_s)},b_s.prototype.updateView=function(){Imsw(this)},b_s.close=function(){Gwuh(UIM,b_s)},b_s.prototype.renderRewardList=function(e,p_l){Avec(e,p_l)},b_s.prototype.renderSelfList=function(e,p_l){var p_g=e.dataSource;if(!p_g){var b_s=Config.guildPvp_guildPvpHolds[p_g.cityId],d_u=e.getChildByName("nameLab"),b_e=e.getChildByName("bg");d_u.text=b_s.name,b_e.skin=b_s.holdPic}},b_s.prototype.onRemoved=function(){Mqxg(this,Laya,LED,l_r)},b_s.prototype.onAdded=function(){Sytb(this,Laya,LED,l_r,GuildPvpControl)},b_s.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"rewardBtn":e.GuildBossOpenSet.open()}},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemoved),z_j.setList(p_g.selfList,p_g,p_g.renderSelfList),p_g.selfList.itemRender=e.ItemBox,z_j.setListScroll(p_g.rewardList,!1),z_j.setListScroll(p_g.selfList),z_j.setList(p_g.rewardList,p_g,p_g.renderRewardList),p_g}e.CityRewardPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guildPvp.guildPvpTroopsItemUI,__extends(b_s,p_l),b_s.prototype.updateView=function(e){var p_l=this.dataSource;if(p_l&&e){var p_g=void 0;p_l.isEmploy?(p_g=Config.guildPvp_cloneHire[p_l.cloneId],this.mirrorName.text=p_g.name):(p_g=Config.clone_clone[p_l.cloneId],this.mirrorName.text=p_g.name+"Lv."+p_l.lv),this.icon.skin=Resource.ResUrl.getIconUrl(p_g.headImg);var b_s=-1,d_u=!1;p_l.isInterimDisp?(d_u=!0,b_s=-1):1!=p_l.state&&(d_u=!0,b_s=1,p_l.cityId==e.cityId?!p_l.isCanDispatch()&&p_l.isDed?b_s=2:p_l.isDed&&p_l.isCanDispatch()&&(d_u=!1,b_s=-1):b_s=0),this.cloneState.visible=-1!=b_s,this.shade.visible=d_u,this.cloneState.index=b_s;var b_e=Math.floor(p_l.hp/p_l.hpUpper*100);this.proBar.value=b_e/100,this.proNum.text=b_e+"%",this.fightNum.text=p_l.fightNum.toString()}},b_s.prototype.onMouseClick=function(e){var p_l=this.dataSource;this.clickTime+200<=SyncTime.serverTime&&((1==p_l.state||p_l.isDed)&&p_l.isCanDispatch()?(this.clickTime=SyncTime.serverTime,p_l.isInterimDisp=!p_l.isInterimDisp,LED.event("dispatchItem",p_l)):p_l.isCanDispatch()?b_p.broadcastNotice((j_x("389_2224_1920")+j_x("1300_1629_1413")+j_x("502_507_1996")+j_x("383_832"))):b_p.broadcastNotice((j_x("2224_1920_1300")+j_x("980_1833"))))},b_s);function b_s(){var e=p_l.call(this)||this;return e.clickTime=0,e.on(Laya.UIEvent.CLICK,e,e.onMouseClick),e}e.DispatchMirrorItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guildPvp.guildCheckTipUI,__extends(b_s,p_l),b_s.open=function(e){Ajrz(e,UIM,b_s)},b_s.prototype.onRemove=function(){Ohxb(LED,l_r,this)},b_s.close=function(){Eafm(UIM,b_s)},b_s.prototype.onAdded=function(){var e=this.dataSource;e&&(GuildPvpControl.ins.reqOneCityInfo(e.cityId),LED.on(l_r.GUILD_CITY_INFO,this,this.updateView))},b_s.prototype.updateView=function(){var e=this.dataSource,p_l=Config.guildPvp_guildPvpHolds[e.cityId];this.captureLab.text=0==e.ownershipState()?p_l.name+(j_x("206_1629_2260")+j_x(1174)):e.guildName(e.captureGuild),this.title.color=Utils.ItemUtils.getQualityColor(p_l.quality),this.stateLab.text=e.stateStr(),this.defNum.text=e.defNum.toString(),this.defLv.text=p_l.guardLv+"+"+(e.defLv-p_l.guardLv),this.Icon.skin=GuildPvpControl.cityUrl+p_l.holdPic,this.title.text=p_l.name,this.cityType.index=p_l.type-1;var p_g=e.mulRewardTime-SyncTime.serverTime/1e3;0<p_g&&1<e.mul?this.mulTime.text=Utils.formatTimeStr(p_g)+(j_x("1865_396_2426")):this.mulTime.text=(j_x("1327_711_814")+j_x("2307_1785")),this.reward.innerHTML=GuildPvpControl.rewardToHTML(p_l.rewardShow[GuildPvpModel.ins.countDayNum()],"")},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),z_j.setHtml(e.reward,22,"#71de66",10,"left"),e}e.GuildCheckTipPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guildPvp.guildPvpCityItemUI,__extends(b_s,p_l),b_s.prototype.updateView=function(e){var p_l=GuildPvpModel.ins.getCityVo(e.id);this.dataSource=p_l,this.cityName.text=e.name,this.cityIcon.skin=GuildPvpControl.cityUrl+e.holdPic,this.effectStat.visible=3==p_l.state,3==p_l.state?this.effectStat.play():this.effectStat.stop(),this.haveName.text=0==p_l.ownershipState()?(j_x("283_1190")):p_l.guildName(p_l.captureGuild);var p_g=(j_x("2105_383"));(2==p_l.ownershipState()||3==p_l.state||e.type>GuildPvpModel.isNeed||2==p_l.state&&e.type<=GuildPvpModel.isNeed)&&(p_g=(j_x("507_383"))),3<=p_l.mul?this.mulImg.skin="res/ui/guildPvp/img_triple.png":2==p_l.mul&&(this.mulImg.skin="res/ui/guildPvp/img_double.png"),this.enterBtn.label=p_g,this.enterBtn.disabled=4==p_l.state,this.setGuildIcon(p_l),this.cityBg.index=e.type-1,this.giveUpBtn.disabled=2!=p_l.ownershipState(),this.reward.innerHTML=GuildPvpControl.rewardToHTML(e.rewardShow[GuildPvpModel.ins.countDayNum()]),this.timeLoop()},b_s.prototype.timeLoop=function(){var e=this.dataSource;if(1<e.mul){var p_l=e.mulRewardTime-SyncTime.serverTime/1e3;this.mulImg.visible=0<p_l}else this.mulImg.visible=!1;if(4==e.state||2==e.state){p_l=e.stateTime-SyncTime.serverTime/1e3;var p_g=(j_x("2345_383_283")+" {1}");2==e.state&&(p_g=e.actGuild.guildName+(" {1}"+j_x("1865_33_712"))),0<p_l?(this.timeBox.visible=!0,this.stateTime.text=Utils.$(p_g,Utils.formatTimeStr(p_l))):(GuildPvpControl.ins.reqOneCityInfo(e.cityId),this.timeBox.visible=!1)}else this.timeBox.visible=!1},b_s.prototype.setGuildIcon=function(e){this.iconBox.visible=0!=e.ownershipState();var p_l=this.iconBox._childs[0];if(p_l&&this.iconBox.visible){var p_g=Config.guild_guildFlag[e.captureGuild.guildIcon];p_g?Resource.ResManager.Instance.getImg(Resource.ResUrl.ASSETS_URL+p_g.source,p_l):this.iconBox.visible=!1}},b_s.prototype.clickEnterBtn=function(){var p_l=this.dataSource;if(p_l)if((j_x("2105_383"))==this.enterBtn.label){var p_g=Config.guildPvp_guildPvpHolds[p_l.cityId];Laya.timer.once(100,this,(function(){b_p.confirm(Utils.$((j_x("2085_4_572")+j_x(2218)+"{1}"+j_x("796_1413_141")+j_x("51_883")+"{2}"+j_x("2105_383_2228")+""),p_g.guildMoney,p_g.name),(function(){GuildPvpControl.ins.reqDeclareWarCity(p_g.id)}))}))}else e.GuildPkShowPanel.open(p_l)},b_s.prototype.onMouseClick=function(p_l){var p_g=p_l.target,d_u=this.dataSource,b_e=GuildPvpModel.ins;if(d_u)switch(p_g.name){case"checkBtn":e.GuildCheckTipPanel.open(d_u);break;case"enterBtn":if(!b_e.isCheckActOpenTime())return void b_p.broadcastNotice(Utils.$((j_x("1644_2308")+"{1}"+j_x("155_1186")),b_e.getActTime()));if(!b_e.isAttCityLimit(d_u.cityId))return void b_p.confirm((j_x("2040_118_1996")+j_x("796_1413_2260")+j_x("1174_2046_1174")+j_x("118_2462_420")+j_x(842)+""+j_x("33_712_531")+j_x("1045_814_799")+j_x("531_1976_686")+j_x(613)+""+j_x("2085_4_223")+j_x("2456_383_832")+j_x(2228)+""),this.clickEnterBtn.bind(this));if(b_e.isOccupyLimit(d_u.cityId)&&2!=d_u.ownershipState())return void b_p.confirm((j_x("796_1413_1653")+j_x("2040_1843_1174")+j_x("118_2046_2260")+j_x("1174_2348_716")+j_x("1300_1117_1067")+j_x(2128)+""+j_x("33_712_531")+j_x("1045_814_799")+j_x("531_1976_686")+j_x(613)+""+j_x("2085_4_223")+j_x("2456_383_832")+j_x(2228)+""),this.clickEnterBtn.bind(this));this.clickEnterBtn();break;case"giveUpBtn":1==d_u.state?b_p.confirm(Utils.$((j_x("68_2032_2085")+j_x("1449_2191_482")+j_x("2260_1174_389")+j_x("1174_118")+"")),(function(){GuildPvpControl.ins.reqGiveUpCity(d_u.cityId)})):b_p.broadcastNotice((j_x("183_197_65")+j_x("1961_2046_1174")+j_x("118_2060_1163")+j_x("2191_482_2260")+j_x(1174)));break;default:1!=d_u.cityId?(this.clickShowBox.visible=!this.clickShowBox.visible,this.clickShowBox.visible?(b_s.openBox&&(b_s.openBox.visible=!1),b_s.openBox=this.clickShowBox):b_s.openBox==this.clickShowBox&&(b_s.openBox=null)):b_p.broadcastNotice((j_x("2287_206_155")+j_x(2191)))}},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.UIEvent.CLICK,e,e.onMouseClick),z_j.setHtml(e.reward,22,"#42435a",10),e.clickShowBox.visible=!1,e}e.GuildCityItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guildPvp.guildPvpTroopsUI,__extends(b_s,p_l),b_s.open=function(e,p_l){void 0===p_l&&(p_l=1),UIM.open(b_s,null,{data:e,opType:p_l},!1,!1,!0)},b_s.prototype.selectMirror=function(e){if(e){if(e.isInterimDisp){if(GuildPvpModel.ins.dispatchCount>=this.dispatchArr.length)return e.isInterimDisp=!1,void b_p.broadcastNotice((j_x("1327_711_1413")+j_x("502_2046_2224")+j_x("1920_1300_1463")));for(var p_l=0;p_l<this.curMirrorArr.length;p_l++)if(!this.curMirrorArr[p_l]){GuildPvpModel.ins.dispatchChange(1),this.curMirrorArr[p_l]=e;break}}else for(var p_g in this.curMirrorArr)if(this.curMirrorArr[p_g]===e){GuildPvpModel.ins.dispatchChange(-1),this.curMirrorArr[p_g]=null;break}this.dispatchList.refresh(),this.mirrorList.refresh()}},b_s.prototype.updateView=function(){var e=GuildPvpModel.ins,p_l=this.dataSource.data;(!this.curMirrorArr||this.curMirrorArr.length<=0)&&(this.curMirrorArr=[null,null,null,null]),this.curMirrorArr.sort((function(e,p_l){return(e?e.pos:1/0)-(p_l?p_l.pos:1/0)}));var p_g=GuildPvpModel.ins.getDaedMirrorInCity(p_l.cityId);GuildPvpControl.btnRed(this.reviveBtn,0<p_g.length);var b_s=e.mirrorVos.sort((function(e,p_l){return p_l.fightNum-e.fightNum}));this.mirrorList.array=b_s,this.dispatchList.array=this.dispatchArr},b_s.prototype.renderDispatchList=function(e,p_l){var p_g,b_s=e.getChildByName("shade"),d_u=e.getChildByName("icon"),b_e=this.curMirrorArr[e.dataSource];b_e?(p_g=b_e.isEmploy?Config.guildPvp_cloneHire[b_e.cloneId]:Config.clone_clone[b_e.cloneId],d_u.skin=Resource.ResUrl.getIconUrl(p_g.headImg),b_s.visible=!1):(b_s.visible=!0,d_u.skin="")},b_s.prototype.onRemoved=function(){Sxpl(this,Laya,LED,l_r,GuildPvpModel)},b_s.prototype.renderMirrorList=function(e,p_l){Afmn(e,p_l,this)},b_s.prototype.onMouseUp=function(e){var p_l=e.target;if(this.disImage&&this.disImage.visible&&this.disImage.parent){this.disImage.visible=!1,this.disImage.stopDrag(),this.disImage.removeSelf();var p_g=this.disImage.dataSource;if(this.dispatchList.contains(p_l)&&this.dispatchList!=p_l&&null!=p_l.dataSource){var b_s=this.curMirrorArr[p_l.dataSource];this.curMirrorArr[p_l.dataSource]=this.curMirrorArr[p_g],this.curMirrorArr[p_g]=b_s,this.dispatchList.refresh()}}},b_s.prototype.onAdded=function(){this.on(Laya.UIEvent.CLICK,this,this.onMouseClick),this.on(Laya.UIEvent.MOUSE_UP,this,this.onMouseUp),this.on(Laya.UIEvent.MOUSE_DOWN,this,this.onMouseDown),LED.on("dispatchItem",this,this.selectMirror),LED.on(l_r.GUILD_CLONE_INFO,this,this.updateView),GuildPvpControl.ins.reqMirrorInfo(),this.title.index=2==this.dataSource.opType?1:0},b_s.prototype.onMouseDown=function(e){var p_l=e.target;if(this.dispatchList.contains(p_l)){var p_g,b_s=this.curMirrorArr[p_l.dataSource];b_s&&(this.disImage||(this.disImage=new Laya.Image),this.disImage.startDrag(),p_g=b_s.isEmploy?Config.guildPvp_cloneHire[b_s.cloneId]:Config.clone_clone[b_s.cloneId],this.disImage.skin=Resource.ResUrl.getIconUrl(p_g.headImg),Laya.stage.addChild(this.disImage),this.disImage.x=Laya.stage.mouseX-this.disImage.width/2,this.disImage.y=Laya.stage.mouseY-this.disImage.height/2,this.disImage.dataSource=p_l.dataSource,this.disImage.visible=!0)}},b_s.prototype.onMouseClick=function(p_l){var p_g=p_l.target,d_u=this.dataSource.data,b_e=this.dataSource.opType;switch(p_g.name){case"closeBtn":case"backBtn":0<GuildPvpModel.ins.dispatchCount?b_p.confirm((j_x("1749_1787_2046")+j_x("203_383_980")+j_x("610_206_1413")+j_x(502)+""+j_x("413_747_843")+j_x("151_2462_695")+j_x("405_486_1787")+j_x("980_610")+""+j_x("68_2032_2085")+j_x("1449_413_747")+""),(function(){b_s.close()})):b_s.close();break;case"sendBtn":if(!GuildModel.instance.isGuild)return void b_p.broadcastNotice((j_x("1777_320_223")+j_x("2456_796_1413")));var d_m=GuildPvpModel.ins.dispatchCount;if(d_m>this.dispatchArr.length)return void b_p.broadcastNotice((j_x("1327_711_1413")+j_x("502_2046_2224")+j_x("1920_1300_1463")));if(d_m<=1)return void b_p.broadcastNotice((j_x("383_832_1413")+j_x("502_2462_1919")+j_x("1122_558")+"2"+j_x("844_2224_1920")));var d_w=GuildPvpModel.ins.clinetInfoToProInfo(this.curMirrorArr,!0,!0);b_p.confirm(Utils.$((j_x("2085_4_572")+j_x(2218)+"{1}"+j_x("36_519_1413")+j_x("502_2224_1920")+j_x(2228)+""),d_w[1]),(function(){d_w[0].length<=0?b_p.broadcastNotice((j_x("36_519_2462")+j_x(1779))):(GuildPvpControl.ins.reqDispatchPlayer(d_w[0],b_e,d_u.cityId),b_s.close())}));break;case"reviveBtn":e.GuildMirrorRelive.open(d_u)}},b_s.close=function(){Cotl(UIM,b_s)},b_s.prototype.clearDispacth=function(){for(var e in this.curMirrorArr)this.curMirrorArr[e]&&(this.curMirrorArr[e].isInterimDisp=!1);this.curMirrorArr.length=0},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemoved),p_g.dispatchArr=[0,1,2,3],p_g.mirrorList.itemRender=e.DispatchMirrorItem,z_j.setListScroll(p_g.mirrorList),z_j.setList(p_g.mirrorList,p_g,p_g.renderMirrorList),z_j.setList(p_g.dispatchList,p_g,p_g.renderDispatchList),p_g}e.GuildDispatchPlayer=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guildPvp.guildEmployItemUI,__extends(b_s,p_l),b_s.prototype.updateView=function(){var e=this.dataSource,p_l=Config.guildPvp_cloneHire[e.cloneId],p_g=GuildPvpModel.ins.getMirrorEmployCfg(p_l.id),b_s=[p_g.fightNum,p_g.hpUpper,p_g.attack,p_g.defense,p_g.armorBreak];for(var d_u in this.propBox._childs)this.propBox._childs[d_u].text=b_s[d_u].toString();this.title.text=p_l.name,this.cIcon.skin=Resource.ResUrl.getIconUrl(p_l.headImg),this.consumeLab.text=p_l.price.toString(),this.employImage.visible=p_g.isEmployed,this.coinBox.visible=this.employBtn.visible=!p_g.isEmployed},b_s.prototype.onMouseClick=function(e){var p_l=e.target,p_g=this.dataSource;if(p_g)switch(p_l.name){case"employBtn":p_g.isEmployed||GuildPvpControl.ins.reqEmployMirror(p_g.cloneId)}},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.UIEvent.CLICK,e,e.onMouseClick),e}e.GuildEmployItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guildPvp.guildPvpFightDetailUI,__extends(b_s,p_l),b_s.open=function(e){Wmqj(e,UIM,b_s)},b_s.prototype.onRemoved=function(){Oobg(this,Laya,LED,l_r)},b_s.prototype.onAdded=function(){Arfw(this,Laya,GuildPvpControl,LED,l_r)},b_s.prototype.updateView=function(e){var p_l=GuildPvpModel.ins.fightInfo;this.attList.array=e.ackArr,this.defList.array=e.defArr,this.attProLab.text=e.ackArr.length+"/"+(p_l?p_l.ackCloneNum:0),this.defProLab.text=e.defArr.length+"/"+(p_l?p_l.defCloneNum:0)},b_s.prototype.renderList=function(e,p_l){Sxdg(e,p_l,this)},b_s.close=function(){Gxmp(UIM,b_s)},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close()}},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemoved),p_g.attList.itemRender=e.GuildFightDetailItem,p_g.defList.itemRender=e.GuildFightDetailItem,z_j.setListScroll(p_g.attList),z_j.setListScroll(p_g.defList),z_j.setList(p_g.attList,p_g,p_g.renderList),z_j.setList(p_g.defList,p_g,p_g.renderList),p_g}e.GuildFightDetail=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guildPvp.guildPvpFightDetailCellUI,__extends(b_s,p_l),b_s.prototype.updateView=function(e,p_l){GuildPvpModel.ins;var p_g,b_s=this.dataSource;2==b_s.isHire?(p_g=Config.clone_clone[b_s.cloneId],this.mirrorName.text=p_g.name+"Lv."+b_s.cloneLv):(p_g=Config.guildPvp_cloneHire[b_s.cloneId],this.mirrorName.text=p_g.name),this.fightNum.text=b_s.power.toString(),this.roleName.text="s."+b_s.svrId+b_s.name,0==e&&3==p_l.state?(this.stateLab.text=(j_x("383_832_283")),this.stateLab.color="#c92828"):(this.stateLab.text=(j_x("2434_2413_283")),this.stateLab.color="#008931")},b_s);function b_s(){return p_l.call(this)||this}e.GuildFightDetailItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guildPvp.guildManorUI,__extends(b_s,p_l),b_s.open=function(){Scut(UIM,b_s)},b_s.prototype.renderTypeList=function(e,p_l){var p_g=e.getChildByName("typeClip"),b_s=e.getChildByName("icon"),d_u=e.getChildByName("countNum"),b_e=e.getChildByName("guildNull"),d_m=GuildPvpModel.ins.getCaptureLimit(e.dataSource);p_g.index=e.dataSource-1,b_s.skin=GuildPvpControl.cityUrl+"city0"+e.dataSource+".png";var d_w=this.selfType[e.dataSource]||0;d_u.text=(j_x("2260_1174")+"")+d_w+"/"+d_m,d_u.visible=GuildModel.instance.isGuild,b_e.visible=!GuildModel.instance.isGuild},b_s.close=function(){Mexo(UIM,b_s)},b_s.prototype.updateView=function(){var e=Config.guildPvp_guildPvpHolds,p_l=GuildPvpModel.ins,p_g=[];this.typeCfg={},this.selfType={};var b_s=p_l.rewardRed;for(var d_u in GuildPvpControl.btnRed(this.rewardBtn,1==b_s.node),GuildPvpControl.btnRed(this.killBtn,1==b_s.kill),e){var b_e=e[d_u],d_m=GuildPvpModel.ins.getCityVo(b_e.id);if(!d_m)return;var d_w=d_m.ownershipState(),f_t=this.cityBox.getChildByName(b_e.pos.toString());if(f_t&&(f_t.index=d_w),2==d_w){var v_z=this.selfType[b_e.type]||0;this.selfType[b_e.type]=v_z+1,p_g.push(d_m)}1<b_e.type&&(v_z=this.typeCfg[b_e.type]||0,this.typeCfg[b_e.type]=v_z+1)}this.selfList.array=p_g;var d_h=[];for(var d_u in this.typeCfg)d_h.push(parseInt(d_u));this.typeList.array=d_h,this.nullManor.visible=GuildModel.instance.isGuild&&p_g.length<=0,this.nullGuild.visible=!GuildModel.instance.isGuild,p_g=null},b_s.prototype.onAdded=function(){Afrk(this,Laya,LED,l_r,GuildPvpControl)},b_s.prototype.renderSelfList=function(e,p_l){var p_g=e.dataSource;if(p_g){var b_s=Config.guildPvp_guildPvpHolds[p_g.cityId],d_u=e.getChildByName("nameLab"),b_e=e.getChildByName("icon");d_u.text=b_s.name,d_u.color=Utils.ItemUtils.getQualityColor(b_s.quality),b_e.skin=GuildPvpControl.cityUrl+b_s.holdPic}},b_s.prototype.onRemoved=function(){Qejx(this,Laya,LED,l_r)},b_s.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"killBtn":e.KillTargetPanel.open();break;case"rewardBtn":e.GuildManorReward.open(this.selfList.array);break;case"b_help":e.GuildPvpHelpPanel.open("manor")}},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),z_j.setListScroll(e.selfList),z_j.setList(e.selfList,e,e.renderSelfList),z_j.setList(e.typeList,e,e.renderTypeList),e}e.GuildManorPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guildPvp.guildManorRewardUI,__extends(b_s,p_l),b_s.open=function(e){Wkbc(e,UIM,b_s)},b_s.prototype.renderSelfList=function(e,p_l){var p_g=e.dataSource;if(p_g){var b_s=e.getChildByName("nameLab"),d_u=e.getChildByName("icon"),b_e=e.getChildByName("rewardShow");b_s.text=p_g.name,b_s.color=Utils.ItemUtils.getQualityColor(p_g.quality),z_j.setHtml(b_e,22,"#4a728e",10,"center"),d_u.skin=GuildPvpControl.cityUrl+p_g.holdPic,b_e.innerHTML=GuildPvpControl.rewardToHTML(p_g.rewardShow[GuildPvpModel.ins.countDayNum()],"")}},b_s.prototype.renderRewardList=function(e,p_l){Ybfr(e,p_l)},b_s.prototype.onAdded=function(){Ioht(this,Laya,LED,l_r,GuildPvpControl)},b_s.prototype.onRemoved=function(){Wlfe(this,Laya,LED,l_r)},b_s.close=function(){Olle(UIM,b_s)},b_s.prototype.updateView=function(){var e=GuildPvpModel.ins;GuildPvpControl.btnRed(this.rewardBtn,1==e.rewardRed.node),this.selfList.array=e.getCityCfgs(),this.rewardList.array=e.cityReward,this.guildNull.visible=!GuildModel.instance.isGuild&&1!=e.rewardRed.node,this.rewardNull.visible=1!=e.rewardRed.node&&GuildModel.instance.isGuild,this.rewardBox.visible=0<e.cityReward.length},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"rewardBtn":GuildPvpModel.ins.rewardRed.node?(GuildPvpControl.ins.reqCityGetReward(),GuildPvpControl.ins.reqCityRewardRed(),b_s.close()):b_p.broadcastNotice((j_x("1971_1896_2235")+j_x("83_1163_192")+j_x("1174_2111")))}},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemoved),z_j.setListScroll(p_g.selfList),z_j.setList(p_g.selfList,p_g,p_g.renderSelfList),z_j.setListScroll(p_g.rewardList),z_j.setList(p_g.rewardList,p_g,p_g.renderRewardList),p_g.rewardList.itemRender=e.ItemBox,p_g}e.GuildManorReward=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guildPvp.guildMirrorUI,__extends(b_s,p_l),b_s.open=function(){Owgt(UIM,b_s)},b_s.prototype.updateEmployView=function(){Uwvc(this,GuildPvpModel)},b_s.close=function(){Qsmb(UIM,b_s)},b_s.prototype.onRemoved=function(){Sgjr(this,Laya,LED,l_r)},b_s.prototype.updateView=function(e){void 0===e&&(e=0),GuildPvpControl.btnRed(this.employBtn,GuildPvpModel.ins.isHaveEmployRed()),0==this.tab.selectedIndex?this.updateMirrorView():this.updateEmployView()},b_s.prototype.onAdded=function(){Ummj(this,Laya,LED,l_r,GuildPvpControl)},b_s.prototype.updateMirrorView=function(){var e=GuildPvpModel.ins.mirrorVos.sort((function(e,p_l){return p_l.state==e.state?p_l.fightNum-e.fightNum:1!=p_l.state?1:1!=e.state?-1:p_l.fightNum-e.fightNum}));this.mirrorInfoList.array=e,this.rankNull.visible=this.mirrorInfoList.array.length<=0},b_s.prototype.renderEmployList=function(e,p_l){Odae(e,p_l)},b_s.prototype.onTabChange=function(e){-1!=e&&(this.mirrorInfoBox.visible=0==e,this.employBox.visible=1==e,this.updateView(e))},b_s.prototype.renderSelfList=function(e,p_l){var p_g=e.dataSource;if(p_g){var b_s;b_s=p_g.isEmploy?Config.guildPvp_cloneHire[p_g.cloneId]:Config.clone_clone[p_g.cloneId];var d_u=Config.guildPvp_guildPvpHolds[p_g.cityId],b_e=e.getChildByName("nameLab"),d_m=e.getChildByName("icon"),d_w=e.getChildByName("fightNum"),f_t=e.getChildByName("stateLab");switch(d_m.skin=Resource.ResUrl.getIconUrl(b_s.headImg),b_e.text=b_s.name+"Lv."+p_g.lv,p_g.state){case 1:f_t.text=(j_x("1466_269"));break;case 2:f_t.text=(j_x("741_1650"))+d_u.name+(j_x(283));break;case 3:f_t.text=(j_x("33_712"))+d_u.name+(j_x(283))}d_w.text=p_g.fightNum.toString()}},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close()}},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemoved),p_g._clipTab=new p_c(p_g.tab),p_g.employList.itemRender=e.GuildEmployItem,z_j.setListScroll(p_g.employList),z_j.setListScroll(p_g.mirrorInfoList),z_j.setList(p_g.mirrorInfoList,p_g,p_g.renderSelfList),z_j.setList(p_g.employList,p_g,p_g.renderEmployList),p_g}e.GuildMirrorPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guildPvp.guildPvpReviveUI,__extends(b_s,p_l),b_s.open=function(e){Quhm(e,UIM,b_s)},b_s.prototype.updateView=function(){var e=GuildPvpModel.ins,p_l=(this.dataSource,e.getInvalidisMirror());p_l.sort((function(e,p_l){return p_l.fightNum-e.fightNum})),this.mirrorList.array=p_l,this.nullLab.visible=p_l.length<=0,GuildPvpControl.btnRed(this.allBtn,0<p_l.length),this.recoverTime.text=Config.global[GlobalDefine.guildPvp_cloneRecover].t_info[0].toString()},b_s.prototype.onRemoved=function(){Wfiu(this,Laya,LED,l_r)},b_s.close=function(){Klit(UIM,b_s)},b_s.prototype.renderMirrorList=function(e,p_l){var p_g=e.getChildByName("icon"),b_s=e.getChildByName("proBar"),d_u=e.getChildByName("countTime"),b_e=e.getChildByName("mirrorName"),d_m=e.getChildByName("recoverBtn"),d_w=e.getChildByName("barPer"),f_t=(this.dataSource,e.dataSource);if(f_t){var v_z=void 0;f_t.isEmploy?(v_z=Config.guildPvp_cloneHire[f_t.cloneId],b_e.text=v_z.name):(v_z=Config.clone_clone[f_t.cloneId],b_e.text=v_z.name+"Lv."+f_t.lv),p_g.skin=Resource.ResUrl.getIconUrl(v_z.headImg),d_m.visible=f_t.hp<f_t.hpUpper,d_m.dataSource=f_t,b_s.value=f_t.hp/f_t.hpUpper,d_u.text=Utils.formatTimeStr(f_t.countReliveTime()),d_w.text=Math.floor(100*b_s.value)+"%"}},b_s.prototype.onAdded=function(){Kprn(this,Laya,LED,l_r,GuildPvpControl)},b_s.prototype.onMouseClick=function(e){var p_l=e.target,p_g=[];switch(p_l.name){case"closeBtn":case"backBtn":b_s.close();break;case"allBtn":var d_u=this.mirrorList.array,b_e=0;for(var d_m in d_u)d_u[d_m].hp<d_u[d_m].hpUpper&&(b_e+=d_u[d_m].countReliveCoin(),p_g.push(d_u[d_m]));0<b_e?b_p.confirm(Utils.$((j_x("2085_4_572")+j_x(2218)+"{1}"+j_x("1263_869_62")+j_x("1796_582_1896")+j_x("2224_1920_2228")+""),b_e),(function(){b_p.checkCoin(1,b_e,!0)&&(GuildPvpControl.ins.reqRecoveryHp(p_g),b_p.broadcastNotice((j_x("62_1796_402")+j_x(2142))),b_s.close())})):b_p.broadcastNotice((j_x("1971_1896_2224")+j_x("1920_1163_192")+j_x("1773_62")));break;case"recoverBtn":p_l.dataSource&&(p_g.push(p_l.dataSource),b_p.confirm(Utils.$((j_x("2085_4_572")+j_x(2218)+"{1}"+j_x("1263_869_62")+j_x("1796_2224_1920")+j_x(2228)+""),p_g[0].countReliveCoin()),(function(){GuildPvpControl.ins.reqRecoveryHp(p_g)})))}},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),z_j.setListScroll(e.mirrorList),z_j.setList(e.mirrorList,e,e.renderMirrorList),e}e.GuildMirrorRelive=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guildPvp.guildPvpFightUI,__extends(b_s,p_l),b_s.prototype.init=function(){this.showModels=[],this.roleInfo=[new Engine2d.PlayerVo,new Engine2d.PlayerVo],this.dirs=[];for(var e=0;e<2;e++)this.showModels.push(new n_k),this.roleInfo.push(new Engine2d.PlayerVo);this.dirs=[2,6],this.attModel.addChild(this.showModels[0]),this.defModel.addChild(this.showModels[1]),this.attModel.scale(1.2,1.2),this.defModel.scale(1.2,1.2),this.actSpace=1,this.timeSpace=Config.global[GlobalDefine.guildPvp_fightTime].i_info},b_s.prototype.playerFigthEnd=function(e,p_l){this.changeAction(e,Engine2d.StandardActions.SA_STAND),p_l.hp<=0&&Laya.timer.once(100,this,(function(){this.showModels[e].visible=!1}))},b_s.prototype.renderEmployList=function(e,p_l){Mbzz(e,p_l)},b_s.prototype.fightSurplusTime=function(){return Yojg(GuildPvpModel)},b_s.prototype.onAdded=function(){this.on(Laya.UIEvent.CLICK,this,this.onMouseClick),LED.on(l_r.GUILD_CITY_Fight_PLAYER,this,this.updatePlayerInfo),LED.on(l_r.GUILD_CITY_INFO,this,this.updateInfo),LED.on(l_r.GUILD_CITY_Fight,this,this.updateGuildInfo);var e=this.dataSource;e&&(GuildPvpControl.ins.reqMirrorInfo(),GuildPvpControl.ins.reqOneCityInfo(e.cityId),GuildPvpControl.pkOpenDate=e)},b_s.prototype.updatePlayerInfo=function(e){void 0===e&&(e=!0);var p_l=GuildPvpModel.ins.playerFightInfo,p_g=p_l.ackClone,b_s=p_l.defClone;e&&Laya.timer.loop(1e3,this,this.loopInfo),e=e&&GuildPvpModel.ins.isCloneAttack(),this.setGuildIcon(this.attIconBox,p_l.ackPlr.guildIcon,p_l.ackPlr.guildSvrId),this.setGuildIcon(this.defIconBox,p_l.defPlr.guildIcon,p_l.ackPlr.guildSvrId),this.setGuildLab(this.attName,p_l.ackPlr.guildSvrId,p_l.ackPlr.guildName,""),0<p_l.defPlr.guildSvrId&&this.setGuildLab(this.defName,p_l.defPlr.guildSvrId,p_l.defPlr.guildName,(j_x("1650_210_2386"))),this.updatePlayerBox(0,p_l.ackPlr,p_g,e),this.updatePlayerBox(1,p_l.defPlr,b_s,e)},b_s.prototype.countDemege=function(e,p_l){Youu(e,p_l,this)},b_s.prototype.onRemoved=function(){Akwu(this,Laya,LED,l_r,GuildPvpControl)},b_s.prototype.onMouseClick=function(p_l){var p_g=p_l.target,d_u=this.dataSource;if(d_u)switch(Config.guildPvp_guildPvpHolds[d_u.cityId],p_g.name){case"closeBtn":case"backBtn":b_s.close();break;case"attackBtn":p_g._childs[1].visible?b_p.confirm((j_x("1749_68_2032")+j_x("2354_236_741")+j_x("1650_2040_21")+j_x("2046_2413_1869")+""),(function(){GuildPvpControl.ins.reqWithdrawPlayer(d_u.cityId)})):e.GuildDispatchPlayer.open(d_u,3);break;case"defendBtn":p_g._childs[1].visible?b_p.confirm((j_x("1749_68_2032")+j_x("2354_236_712")+j_x("1835_2040_21")+j_x("2046_2413_1869")+""),(function(){GuildPvpControl.ins.reqWithdrawPlayer(d_u.cityId)})):e.GuildDispatchPlayer.open(d_u,2);break;case"detailBtn":e.GuildFightDetail.open(this.dataSource);break;case"b_help":e.GuildPvpHelpPanel.open("fight")}},b_s.prototype.setGuildIcon=function(e,p_l,p_g){e.visible=0<p_g;var b_s=e._childs[0];if(b_s&&0<p_g){var d_u=Config.guild_guildFlag[p_l];d_u?Resource.ResManager.Instance.getImg(Resource.ResUrl.ASSETS_URL+d_u.source,b_s):e.visible=!1}},b_s.prototype.setStateRed=function(e,p_l){var p_g=e?e.state:0;this.attackRed.visible=3==p_g,this.defendRed.visible=2==p_g},b_s.prototype.updateInfo=function(){var e=this.dataSource;this.updateBtnState(),GuildPvpControl.ins.reqCityFightInfo(e.cityId),this.effBox.visible=3==e.state,this.playerBox.visible=3==e.state,this.setGuildIcon(this.attIconBox,0,0),this.attName.visible=!1;var p_l=GuildPvpModel.ins.getDaedMirrorInCity(e.cityId);this.setStateRed(p_l[0],0<p_l.length),3==e.state?(this.attName.visible=!0,GuildPvpControl.ins.reqPlayerFightInfo(e.cityId)):(this.countBox.visible=!1,this.updateGuildInfo(!1),Laya.timer.clear(this,this.loopInfo))},b_s.prototype.setProBar=function(e,p_l,p_g,b_s,d_u){void 0===b_s&&(b_s=null),void 0===d_u&&(d_u=!1);var b_e=p_l/p_g;e.value=b_e||0,b_s&&(b_s.text=d_u?Math.ceil(100*b_e)+"%":p_l+"/"+p_g)},b_s.prototype.updateGuildInfo=function(e){void 0===e&&(e=!0);var p_l=this.dataSource;if(p_l){var p_g=Config.guildPvp_guildPvpHolds[p_l.cityId];if(this.cityName.text=p_g.name,this.cityName.color=Utils.ItemUtils.getQualityColor(p_g.quality),3!=p_l.state&&4!=p_l.state&&this.updateBtnState(),0!=p_l.ownershipState()?(this.defName.text=p_l.guildName(p_l.captureGuild),this.setGuildIcon(this.defIconBox,p_l.captureGuild.guildIcon,p_l.captureGuild.guildId)):(this.defName.text=p_g.name+(j_x("1650_210_2386")),this.setGuildIcon(this.defIconBox,0,p_l.captureGuild.guildId)),e){var b_s=GuildPvpModel.ins.fightInfo;this.setProBar(this.attProBar,b_s.ackSurplusCloneNum,b_s.ackCloneNum,this.attProC),this.setProBar(this.defProBar,b_s.defSurplusCloneNum,b_s.defCloneNum,this.defProC),this.setProBar(this.defCProBar,b_s.defSurplusGuardNum,b_s.defGuardNum,this.defProEC)}else this.setProBar(this.attProBar,0,1,this.attProC),this.setProBar(this.defProBar,0,1,this.defProC),this.setProBar(this.defCProBar,0,1,this.defProEC)}},b_s.prototype.changeModel=function(e,p_l,p_g,b_s){var d_u=this.showModels[e],b_e=this.roleInfo[e];this.showModels[e].visible=!0,b_e.fashionClothes=p_l||0,b_e.fashionWeapon=p_g||0,b_e.entryId=b_s,d_u.changRoleSkin(b_e,!1,!1,b_e.fashionWeapon,b_e.fashionClothes)},b_s.prototype.setGuildLab=function(e,p_l,p_g,b_s){void 0===b_s&&(b_s=""),e.text=0<p_l?"s."+p_l+" "+p_g:b_s},b_s.open=function(e){Qryy(e,UIM,b_s)},b_s.prototype.loopInfo=function(){var e=GuildPvpModel.ins,p_l=e.playerFightInfo,p_g=this.dataSource;p_g&&(this.cityCount++,this.countBox.visible=!e.isCloneAttack(),e.isCloneAttack()?p_l.ackClone.hp<=0||p_l.defClone.hp<=0?(this.playerFigthEnd(0,p_l.ackClone),this.playerFigthEnd(1,p_l.defClone),this.fightEffect.visible=!1,this.fightEffect.stop(),Laya.timer.once(300,this,(function(){GuildPvpControl.ins.reqCityFightInfo(p_g.cityId),GuildPvpControl.ins.reqPlayerFightInfo(p_g.cityId)}))):(this.countDemege(p_l.ackClone,e.fightStartHp[0]),this.countDemege(p_l.defClone,e.fightStartHp[1]),GuildPvpModel.ins.playerFightInfo.time--,this.updatePlayerInfo(!1)):(this.playerFigthEnd(0,p_l.ackClone),this.playerFigthEnd(1,p_l.defClone),this.cityCount%this.timeSpace==0&&(this.cityCount=0,GuildPvpControl.ins.reqOneCityInfo(p_g.cityId)),this.countTime.text=Utils.formatTimeStr(p_l.endTime-SyncTime.serverTime/1e3)))},b_s.close=function(){Qbfh(UIM,b_s)},b_s.prototype.setState=function(e,p_l,p_g){var b_s=p_g?2:3;e._childs[0].visible=!0,e._childs[1].visible=!1,p_l==b_s&&(e._childs[1].visible=!0,e._childs[0].visible=!1)},b_s.prototype.updateBtnState=function(){var e=this.dataSource,p_l=GuildPvpModel.ins.getSelfStateInCity(e.cityId);this.setState(this.defendBtn,p_l,!1),this.setState(this.attackBtn,p_l,!0)},b_s.prototype.updatePlayerBox=function(e,p_l,p_g,b_s){void 0===b_s&&(b_s=!0);var d_u=this.actPlayerBox;1==e&&(d_u=this.defPlayerBox);var b_e,d_m=d_u.getChildByName("roleName"),d_w=d_u.getChildByName("proLab"),f_t=d_u.getChildByName("cloneName"),v_z=d_u.getChildByName("fightNum"),d_h=d_u.getChildByName("proBar");if(this.setProBar(d_h,p_g.hp,p_g.hpUpper,d_w,!0),v_z.text=p_g.power.toString(),p_g.cloneId<=0)d_u.visible=!1,this.showModels[e].visible=!1,this.fightEffect.visible=!1;else{if(d_u.visible=!0,this.showModels[e].visible=!0,2==p_g.isHire)b_e=Config.clone_clone[p_g.cloneId],f_t.text=b_e.name+"Lv."+p_g.cloneLv;else if(999==p_g.cloneId){var r_t=this.dataSource;if(!r_t)return;var t_n=Config.guildPvp_guildPvpHolds[r_t.cityId];f_t.text=t_n.name+(j_x("1650_210_2386"))}else b_e=Config.guildPvp_cloneHire[p_g.cloneId],f_t.text=b_e.name;d_m.text=p_l.name}b_s&&this.changeModel(e,p_g.fashionClothes,p_g.fashionArms,p_l.entryId),b_s&&(this.changeAction(e,Engine2d.StandardActions.SA_SING),this.fightEffect.visible=!0,this.fightEffect.play())},b_s.prototype.changeAction=function(e,p_l){var p_g=this.showModels[e];p_l==Engine2d.StandardActions.SA_SING?p_g.playSkillAni(1001001,this.dirs[e],!0):p_l==Engine2d.StandardActions.SA_DEAD?p_g.setAction(p_l,this.dirs[e],!1):p_g.setAction(p_l,this.dirs[e],!0)},b_s.prototype.actTimes=function(){return Mqye(this)},b_s.prototype.checkShowTip=function(e,p_l){e&&e.type>=GuildPvpModel.isNeed&&(p_l?b_p.broadcastNotice((j_x("86_1896_2105")+j_x("383_796_1413")+j_x("1163_192_1413")+j_x("1751_33_712"))):b_p.broadcastNotice((j_x("86_1896_2260")+j_x("1174_944_1174")+j_x("118_2046_796")+j_x("1413_1163_192")+j_x("1413_1751_741")+j_x(1650))))},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.init(),e}e.GuildPkShowPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guildPvp.guildPvpHelpUI,__extends(b_s,p_l),b_s.open=function(e){Iqcc(e,UIM,b_s)},b_s.prototype.onRemove=function(){Uhkh(this,Laya)},b_s.close=function(){Ajsp(UIM,b_s)},b_s.prototype.onAdded=function(){switch(this.on(Laya.Event.CLICK,this,this.onMouseClick),this.fight.visible=!1,this.manor.visible=!1,this.showPanel.visible=!1,this.dataSource){case"fight":this.fight.visible=!0;break;case"manor":this.manor.visible=!0;break;case"main":this.showPanel.visible=!0}},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":b_s.close()}},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.showPanel.vScrollBarSkin="",e.fight.vScrollBarSkin="",e.manor.vScrollBarSkin="",e}e.GuildPvpHelpPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guildPvp.guildPvpCityUI,__extends(b_s,p_l),b_s.open=function(){CrossModel.ins.isSmallCross?UIM.open(b_s,["guildPvp.atlas"]):b_p.broadcastNotice((j_x("1662_1998_206")+j_x("155_1186")))},b_s.prototype.updateMirrorRed=function(){Urce(GuildPvpControl,this,GuildPvpModel)},b_s.prototype.updateView=function(){Ghec(this,GuildPvpModel,Laya)},b_s.prototype.getCityCfgs=function(){return Oidv(this,Config)},b_s.prototype.updateCitysView=function(){Gkrx(Config,this)},b_s.prototype.onRemoved=function(){Assu(this,Laya,LED,l_r)},b_s.close=function(){Iqcl(UIM,b_s)},b_s.prototype.onAdded=function(){GuildPvpModel.ins.firstOpenRed=!1,LED.event(l_r.GUILD_KILL_INFO),this.on(Laya.UIEvent.CLICK,this,this.onMouseClick),LED.on(l_r.GUILD_CITYS_INFO,this,this.updateView),LED.on(l_r.GUILD_CITY_INFO,this,this.updateCitysView),LED.on(l_r.GUILD_EMPLOY_INFO,this,this.updateMirrorRed),LED.on(l_r.GUILD_CLONE_INFO,this,this.updateMirrorRed),LED.on(l_r.GUILD_CITY_REWARD_RED,this,this.updateMirrorRed),GuildPvpControl.ins.reqMirrorInfo(),GuildPvpControl.ins.reqUpdateInfo(),GuildPvpControl.ins.reqCityRewardRed();var e=UIM.instance.getMainLetUI();GuildPvpModel.ins.showTip=0,e&&e.showGuildPvpTip()},b_s.prototype.pageMove=function(e){var p_l=this.cityPanel.hScrollBar.value;p_l=e?(p_l+=this.panelWidth,Math.min(p_l,this.cityPanel.hScrollBar.max)):(p_l-=this.panelWidth,Math.max(p_l,0)),this.cityPanel.hScrollBar.value=p_l},b_s.prototype.updateCityView=function(e){var p_l=Config.guildPvp_guildPvpHolds[e];if(p_l){var p_g=this.panelBox.getChildByName(p_l.pos.toString());if(p_g){var b_s=GuildPvpModel.ins.getCityVo(p_l.id);b_s&&0<b_s.stateTime&&this.countTimeCity.push(p_g),p_g.updateView(p_l)}}},b_s.prototype.timeLoop=function(){var e=GuildPvpModel.ins,p_l=e.endActTime-SyncTime.serverTime/1e3;for(var p_g in this.timelab.text=0<p_l?Utils.formatTimeStr(p_l):(j_x("1796_1878_1300")+j_x("396_2426")),p_l=this.mulTime-SyncTime.serverTime,this.multipleLab.text=0<p_l?Utils.formatTimeStr(p_l/1e3):"",p_l=e.guardUpLvTime-SyncTime.serverTime/1e3,this.stateLab.text=0<p_l?Utils.formatTimeStr(p_l):"",this.countTimeCity)this.countTimeCity[p_g].timeLoop()},b_s.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"manorBtn":e.GuildManorPanel.open();break;case"mirrorBtn":e.GuildMirrorPanel.open();break;case"i_right":this.pageMove(!0);break;case"i_left":this.pageMove(!1);break;case"b_help":e.GuildPvpHelpPanel.open("main")}},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.cityPanel.hScrollBarSkin="",e.cityPanel.hScrollBar&&(e.cityPanel.hScrollBar.visible=!1),e.panelWidth=e.cityPanel.width,e.countTimeCity=[],e.mulTime=0,e}e.GuildPvpMainPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guildPvp.guildPvpResultPanelUI,__extends(b_s,p_l),b_s.open=function(e){Awaf(e,UIM,b_s)},b_s.prototype.updateView=function(){var e=GuildPvpModel.ins,p_l=this.dataSource,p_g=Config.guildPvp_guildPvpHolds[p_l.nodeId];if(p_l){var b_s=e.protocolToModel(p_l.rewards);this.rewardList.array=b_s,this.deadLab.text=p_l.kill+"",this.cityName.text=p_g.name,this.guildName.text=p_l.guild&&0<p_l.guild.guildId?"s."+p_l.guild.guildSvrId+" "+p_l.guild.guildName:(j_x("206_1629_2260")+j_x(1174)),this.cityImage.skin=GuildPvpControl.cityUrl+p_g.holdPic,this.cityName.color=Utils.ItemUtils.getQualityColor(p_g.quality),this.attcLab.text=p_l.ackSurplusCloneNum+"/"+p_l.ackCloneNum,this.defLab.text=p_l.defSurplusCloneNum+"/"+p_l.defCloneNum,this.killRewardNull.visible=b_s.length<=0;var d_u=this.lose;1==p_l.win?(this.lose.visible=!1,this.win.visible=!0,d_u=this.win):(this.lose.visible=!0,this.win.visible=!1);var b_e=d_u.getChildByName("result");this.imgGot.visible=!1,1==p_l.win?0<p_l.ackSurplusCloneNum?(b_e.index=0,this.imgGot.visible=!0):b_e.index=1:0<p_l.ackSurplusCloneNum?b_e.index=3:b_e.index=2}},b_s.close=function(){Olwe(UIM,b_s)},b_s.prototype.onAdded=function(){Ipro(this,Laya)},b_s.prototype.onRemoved=function(){this.off(Laya.UIEvent.CLICK,this,this.onMouseClick);var e=GuildPvpModel.ins.getResultInfo(0,!0);e&&Laya.timer.once(100,this,(function(){b_s.open(e)})),0<this.dataSource.rewards.length&&GuildPvpControl.ins.reqResultReward(this.dataSource.nodeId,this.dataSource.time)},b_s.prototype.renderList=function(e,p_l){Kpdt(e,p_l)},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"okBtn":case"backBtn":b_s.close()}},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemoved),z_j.setListScroll(p_g.rewardList,!1),p_g.rewardList.itemRender=e.ItemBox,z_j.setList(p_g.rewardList,p_g,p_g.renderList),p_g}e.GuildPvpResultPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guildPvp.guildPvpKillCellUI,__extends(b_s,p_l),b_s.prototype.updateView=function(){var e=this.dataSource;this.list.array=b_p.getRewardDatas(e.reward),this.gotImage.visible=GuildPvpModel.ins.isTargetRewardById(e.id),this.rewardBtn.visible=!this.gotImage.visible,this.title.text=(j_x("1874_867_1835")+j_x(893))+e.num+(j_x("844_2224_1920"));var p_l=GuildPvpModel.ins.killNum;this.progLab.text=p_l+"/"+e.num,this.progLab.color=e.num<=p_l?"#00802e":"#9f4543",this.redPoint.visible=e.num<=p_l&&this.rewardBtn.visible,this.rewardBtn.disabled=e.num>p_l},b_s.prototype.renderItem=function(e,p_l){Azvq(e,p_l)},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"rewardBtn":this.dataSource&&GuildPvpControl.ins.reqGetKillReward(this.dataSource.id)}},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.list.itemRender=e.ItemBox,z_j.setList(p_g.list,p_g,p_g.renderItem),p_g.on(Laya.Event.CLICK,p_g,p_g.onMouseClick),p_g}e.KillTargetItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.guildPvp.guildPvpKillUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Oqdr(this,Laya,LED,l_r,GuildPvpControl)},b_s.prototype.onRemove=function(){Cetb(LED,l_r,this,Laya,GuildPvpControl)},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close()}},b_s.open=function(){Ehoq(UIM,b_s)},b_s.prototype.updateView=function(){this.list.array=this.rewardCfg.sort((function(e,p_l){var p_g=GuildPvpModel.ins;return p_g.targetState(e)-p_g.targetState(p_l)}))},b_s.prototype.renderItem=function(e,p_l){Crzu(e,p_l)},b_s.close=function(){Miye(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;for(var b_s in p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g.list.itemRender=e.KillTargetItem,z_j.setListScroll(p_g.list),z_j.setList(p_g.list,p_g,p_g.renderItem),p_g.rewardCfg=[],Config.guildPvp_killReward)p_g.rewardCfg.push(Config.guildPvp_killReward[b_s]);return p_g}e.KillTargetPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.gymkhana.gymkhanaItemBoxUI,__extends(b_s,p_l),b_s.prototype.updateData=function(e,p_l,p_g){void 0===p_l&&(p_l=!1),void 0===p_g&&(p_g=!1);var b_s=this.dataSource;(this.challengeBtn.dataSource=b_s)&&(this.deleteImage.visible=!1,this.changIcon.visible=!1,this.winChange.visible=!1,p_l&&b_s.ID==gymkhanaModel.instance.gymkhanaInfo.defeatId?(this.winChange.on(Laya.Event.COMPLETE,this,this.winEffect),Laya.timer.once(800,this,(function(){this.winChange.visible=!0,this.winChange.play(!1)}))):p_g&&(this.changIcon.visible=!0,this.changIcon.play(!1)),this.rankNum.text=b_s.rankNum,0!=gymkhanaModel.instance.historyMaxRank?this.maxImg.visible=this.maxRewardIcon.visible=b_s.rankNum<gymkhanaModel.instance.historyMaxRank:this.maxImg.visible=this.maxRewardIcon.visible=!0,this.rankFight.text=b_p.calsulate(b_s.fight),this.palyerName.text=b_s.name,this.maxRewardIcon.visible?(this.rewardNum.text=gymkhanaModel.instance.getRangingUpNum(b_s.rankNum,gymkhanaModel.instance.historyMaxRank).toString(),r_n.instance.shakeEffect(this.maxRewardIcon,1.2,.1,10)):(this.rewardNum.text="",Laya.Tween.clearAll(this.maxRewardIcon)),this.headIcon.skin=Resource.ResManager.getHeadUrl(b_s.entryId,b_s.headIcon))},b_s.prototype.winEffect=function(){this.winChange.stop(),Laya.timer.once(200,this,(function(){this.winChange.off(Laya.Event.COMPLETE,this,this.winEffect)})),this.winChange.visible=!1,this.deleteImage.visible=!0,LED.event("winEffecte")},b_s);function b_s(){return p_l.call(this)||this}e.gymkhanaItemBox=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.gymkhana.gymkhanaMainUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Wtyc(gymkhanaModel,this,Laya,LED,l_r)},b_s.prototype.overEffect=function(){Miro(this,Laya)},b_s.prototype.updateView=function(){this.redPoint.visible=gymkhanaModel.instance.getRedPoint(!1),this.fightingNum.text=b_p.calsulate(LgcM.ins.heroVo.fight);var e=Config.rank_ranklist[RankType.GymkhanaRank].maxCount,p_l=gymkhanaModel.instance.gymkhanaInfo.selfRankNum;if(this.rankNum.text=p_l<e?p_l.toString():(j_x("206_1067_1077")),this.historyRankNum.text=0<gymkhanaModel.instance.historyMaxRank?gymkhanaModel.instance.historyMaxRank.toString():(j_x(814)),p_l<=0&&(this.rankNum.text=(j_x("206_1067_1077"))),this.challengeNum.text=Utils.$("{1}/{2}",gymkhanaModel.instance.overplusChallengeTime,Config.global[1802].i_info),4==gymkhanaModel.instance.gymkhanaInfo.lastList.length){var p_g=gymkhanaModel.instance.gymkhanaInfo.lastList;8==(p_g=p_g.concat(gymkhanaModel.instance.gymkhanaInfo.list)).length&&(this.isPlayWinEffecte=!0),this.challengeList.hScrollBarSkin="",this.challengeList.mouseEnabled=!1,this.challengeList.array=p_g}else this.challengeList.array=gymkhanaModel.instance.gymkhanaInfo.list;this.challengeList.scrollTo(0),this.onUpdateTime(),this.renderShowRoleBox()},b_s.open=function(){Qagc(UIM,b_s)},b_s.prototype.updateCount=function(e){this.challengeNum.text=Utils.$("{1}/{2}",gymkhanaModel.instance.overplusChallengeTime+e,Config.global[1802].i_info)},b_s.prototype.updateRedPoint=function(){Wzcd(this)},b_s.prototype.onRemove=function(){for(var e in this.off(Laya.Event.CLICK,this,this.onClick),LED.off(l_r.GYMKHANA_MAIN_INFO,this,this.updateView),LED.off(l_r.GYMKHANA_RED_POINT,this,this.updateRedPoint),LED.off(l_r.GYMKHANA_BUY_COUNT,this,this.updateCount),LED.off("winEffecte",this,this.overEffect),this.isPlayChangeEffect=!1,this.isPlayWinEffecte=!1,Laya.timer.clear(this,this.onUpdateTime),this.roleModels)this.roleModels[e]&&this.roleModels[e].clearRes();if(gymkhanaModel.instance.gymkhanaInfo&&gymkhanaModel.instance.gymkhanaInfo.list)for(var p_l=0;p_l<this.challengeList.numChildren;p_l++){var p_g=this.challengeList.getCell(p_l);if(p_g){var b_s=p_g.getChildByName("maxRewardIcon");Laya.Tween.clearAll(b_s)}}},b_s.prototype.clickRole=function(e){if(0<=e.target.name.indexOf("role")){var p_l=e.target;if(p_l.dataSource){if(p_l.dataSource.id<1e4)return void b_p.broadcastNotice((j_x("1964_949_68")+j_x("189_1019_1653")+j_x("383_403_1285")+j_x("2462_1919_5")+j_x("2450_281_1590")));gymkhanaModel.instance.reqGymkhanaRoleInfo(p_l.dataSource.id)}}},b_s.prototype.onMoveTweenComplete=function(){var e=this.challengeList.removeChildByName("scrollBar");this.challengeList.scrollBar=null,e&&e.destroy(!0),this.isPlayWinEffecte=!1,this.challengeList.mouseEnabled=!0,gymkhanaModel.instance.gymkhanaInfo.clearLastData()},b_s.prototype.renderShowRoleBox=function(){for(var e=this.showRoleBox.numChildren,p_l=0;p_l<e;p_l++){var p_g=this.showRoleBox.getChildAt(p_l);if(p_g){var b_s=p_g.getChildByName("rankFight"),d_u=p_g.getChildByName("name"),b_e=p_g.getChildByName("modelContainer"),d_m=p_g.getChildByName("vipImage"),d_w=p_g.getChildByName("role");if(d_w.on(Laya.Event.CLICK,this,this.clickRole),!this.roleModels[p_l]){var f_t=new n_k;this.roleModels.push(f_t),b_e.addChild(f_t)}var v_z=gymkhanaModel.instance.gymkhanaInfo.showRanklist[p_l];if(d_w.dataSource=v_z){var d_h=new Engine2d.PlayerVo;d_h.type=Engine2d.ActorTypeDefine.PLAYER,p_g.dataSource=v_z,d_h.entryId=v_z.entryId,d_h.fashionWeapon=v_z.fashionWeapon,d_h.fashionClothes=v_z.fashionClothes,Config.title_title[v_z.titleId],this.roleModels[p_l].changRoleSkin(d_h,!1,!0,v_z.fashionWeapon,d_h.fashionClothes),d_u.text=v_z.name,b_s.text=b_p.calsulate(v_z.power),d_m.visible=0<v_z.vipLv}else console.log((j_x("1411_1399_2348")+j_x("2083_792_1011")))}}},b_s.prototype.refreshCd=function(){b_p.getCoin(Config.global[1806].t_info[0])>=Config.global[1806].t_info[1]&&(LgcM.ins.heroVo.gymkhanaChallengeCD=0),gymkhanaModel.instance.reqRefreshTime()},b_s.prototype.noticePanel=function(){UIM.instance.getMainLetUI().hideGymkhanaTip(),gymkhanaModel.instance.noticInfo?f_t.open(gymkhanaModel.instance.noticInfo):f_t.close()},b_s.prototype.onUpdateTime=function(){if(gymkhanaModel.instance.gymkhanaInfo&&gymkhanaModel.instance.gymkhanaInfo.list){var e=gymkhanaModel.instance.lastTime+Config.global[1804].i_info-SyncTime.serverTime/1e3;0<e?(this.challengeTimeCd.text=(j_x("48_383_1614")+j_x("2171_283")+"")+gymkhanaModel.instance.formatTimeStrTow(e),this.challengeTimeCd.visible=!0):this.challengeTimeCd.visible=!1}else this.challengeTimeCd.visible=!1},b_s.prototype.onClick=function(p_l){var p_g=p_l.target;switch(p_g.name){case"closeBtn":case"backBtn":b_s.close();break;case"recordBtn":e.gymkhanaRecord.open();break;case"shopBtn":e.ShopAllPanel.open(ShopConstant.type_fight);break;case"rankBtn":e.gymkhanaRankPanel.open();break;case"addChallengeTime":b_e.open();break;case"refreshBtn":if(this.lastRefreshTime+1500>SyncTime.serverTime)return void b_p.broadcastNotice((j_x("1067_189_2462")+j_x("1624_822_1666")+j_x("1679_1713")+""+j_x("1777_606_15")+j_x("1422_1683")));this.isPlayChangeEffect=!0,b_p.broadcastNotice((j_x("1300_803_1067")+j_x("189_1622_2434")+j_x("1787_2046_1653")+j_x(886))),this.lastRefreshTime=SyncTime.serverTime,gymkhanaModel.instance.reqGymkhanaInfo();break;case"rankRewardBtn":e.gymkhanaRewardPanel.open();break;case"challengeBtn":var d_u=p_g;if(gymkhanaModel.instance.lastTime,Config.global[1804].i_info,SyncTime.serverTime,!d_u.dataSource)return;if(gymkhanaModel.instance.lastTime+Config.global[1804].i_info<=SyncTime.serverTime/1e3)gymkhanaModel.instance.overplusChallengeTime<=0?b_p.checkCoin(CoinDefine.GOLD,Config.global[1803].t_info[1])?b_e.open():b_p.broadcastNotice((j_x("1263_869_2462")+j_x(1779))):(gymkhanaModel.instance.historyRank=gymkhanaModel.instance.historyMaxRank,gymkhanaModel.instance.reqChallengePlayer(d_u.dataSource.ID,d_u.dataSource.rankNum));else if(gymkhanaModel.instance.overplusChallengeTime<=0)b_p.confirm((j_x("1971_1896_48")+j_x("383_235_2348")+""+j_x("1777_320_1355")+j_x("2420_48_383")+j_x("235_2348")));else{var d_m=this.refreshCd.bind(this);b_p.confirm(Utils.$((j_x("48_383_1614")+j_x("2171_283")+""+j_x("68_2032_572")+j_x(2218)+"{1}"+j_x("1263_869_1496")+j_x("1792_1614_2171")+j_x("1702_2460")),Config.global[1806].t_info[1]),d_m,null,!1,!0)}}},b_s.prototype.renderItembox=function(e,p_l){Ghfm(e,p_l,this)},b_s.close=function(){Cezb(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.lastRefreshTime=0,p_g.isPlayWinEffecte=!1,p_g.isPlayChangeEffect=!1,p_g.roleModels=[],p_g.challengeList.itemRender=e.gymkhanaItemBox,p_g.challengeList.renderHandler=Laya.Handler.create(p_g,p_g.renderItembox,null,!1),p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g}e.gymkhanaPanel=p_g;var d_u,b_e=(d_u=ui.window.gymkhana.gymkhanaBuyTipUI,__extends(d_m,d_u),d_m.prototype.onClick=function(e){var p_l=e.target,p_g=parseInt(this.inputText.text);switch(p_l.name){case"closeBtn":case"backBtn":d_m.close();break;case"BuyBtn":0<gymkhanaModel.instance.vipOverplusTime?b_p.checkCoin(CoinDefine.GOLD,100)?gymkhanaModel.instance.reqGymkhanaChallengeTime(parseInt(this.inputText.text)):b_p.broadcastNotice((j_x("1263_869_2462")+j_x(1779))):b_p.broadcastNotice((j_x("1355_2420_235")+j_x("2348_2462_1779")));break;case"addBtn":p_g++,gymkhanaModel.instance.vipOverplusTime<=0?this.inputText.text="1":this.inputText.text=Math.min(p_g,gymkhanaModel.instance.vipOverplusTime).toString();break;case"reduceBtn":p_g--,this.inputText.text=Math.max(p_g,1).toString();break;case"reduceTenBtn":p_g-=10,this.inputText.text=Math.max(p_g,1).toString();break;case"addTenBtn":p_g+=10,gymkhanaModel.instance.vipOverplusTime<=0?this.inputText.text="1":this.inputText.text=Math.min(p_g,gymkhanaModel.instance.vipOverplusTime).toString()}this.priceLabel.text=(Config.global[1803].t_info[1]*parseInt(this.inputText.text)).toString()},d_m.prototype.onAdded=function(){Gujv(this,Laya)},d_m.close=function(){Aebe(UIM,d_m)},d_m.open=function(){Mdlc(UIM,d_m)},d_m.prototype.updateView=function(){this.inputText.text="1";var e=gymkhanaModel.instance.vipOverplusTime;this.vipLabel.text=Utils.$(("vip{1}"+j_x("1163_1355_2420")+j_x("235_2348")+""),LgcM.ins.heroVo.vipLv),this.vipBuyTime.text=Utils.$("{1}/{2}",e,Config.recharge_vip[LgcM.ins.heroVo.vipLv].gymkhanaTime),this.curtenTime.text=Utils.$("{1}/{2}",gymkhanaModel.instance.overplusChallengeTime,Config.global[1802].i_info),this.priceLabel.text=(Config.global[1803].t_info[1]*parseInt(this.inputText.text)).toString()},d_m.prototype.onRemove=function(){Ubbz(this,Laya)},d_m);function d_m(){var e=d_u.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.gymkhanaBuyTimeTip=b_e;var d_w,f_t=(d_w=ui.window.gymkhana.gymkhanaNoticeTipUI,__extends(v_z,d_w),v_z.open=function(e){UIM.open(v_z,null,{info:e},!1,!1,!0,!0)},v_z.prototype.onAdded=function(){Sixx(LED,l_r,this)},v_z.close=function(){Gntv(UIM,v_z)},v_z.prototype.updateView=function(){var e=this.dataSource.info,p_l=Config.rank_ranklist[RankType.GymkhanaRank].maxCount,p_g=gymkhanaModel.instance.gymkhanaInfo.selfRankNum<p_l?(j_x(573))+gymkhanaModel.instance.gymkhanaInfo.selfRankNum+(j_x(1511)):"2100",b_s=Utils.$((j_x("1749_1629")+"{1}"+j_x("1835_1061")+""+j_x("2434_1511_2379")+j_x("1317_743")+"{2}"+j_x(1511)+""+j_x("2379_1317_1012")+"{3}"+j_x("1777_2217_1738")+j_x("1953_420_1953")+j_x(1616)),Utils.setColor(e.name,"#e32828"),Utils.setColor(e.incRank,"#e32828"),Utils.setColor(p_g,"#e32828"));this.infoHtml.innerHTML=b_s},v_z.prototype.onRemove=function(){Mptg(gymkhanaModel,LED,l_r,this)},v_z);function v_z(){var e=d_w.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),z_j.setHtml(e.infoHtml,25,"#f0ecd8",10,"center"),e}e.gymkhanaNoticeTip=f_t}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.gymkhana.pkUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Yijf(this,Laya,LED,l_r)},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":this.EndFight(!0);break;case"sureBtn":b_s.close()}},b_s.prototype.updateView=function(){Onfc(this)},b_s.prototype.UpdataHP=function(){var e=LgcM.ins.getActorStdInfoById(gymkhanaModel.instance._fightPb.base.pid,Engine2d.ActorTypeDefine.PLAYER);e&&(this.otherPros.value=e.hp/e.hpUpper,this.otherHp.text=Math.max(e.hp,0)+"/"+e.hpUpper),this.selfPros.value=LgcM.ins.heroVo.hp/LgcM.ins.heroVo.hpUpper,this.selfHp.text=Math.max(LgcM.ins.heroVo.hp,0).toString()+"/"+LgcM.ins.heroVo.hpUpper},b_s.prototype.UpdataOneAniView=function(e,p_l){var p_g=e.getChildByName("name"),b_s=e.getChildByName("Icon");if(p_l){var d_u=LgcM.ins.heroVo;b_s.skin=Resource.ResManager.getHeadUrl(d_u.entryId,d_u.headIcon),this.rightIcon.skin=b_s.skin,p_g.text=d_u.name,this.selfName.text=d_u.name}else{var b_e=gymkhanaModel.instance._fightPb;b_s.skin=Resource.ResManager.getHeadUrl(b_e.base.entryId,b_e.base.headIcon),this.leftIcon.skin=b_s.skin,p_g.text=b_e.base.name,this.otherName.text=b_e.base.name}},b_s.prototype.onRemove=function(){Ewxf(this,Laya,LED,l_r)},b_s.prototype.EndFight=function(p_l){if(void 0===p_l&&(p_l=!1),MineModel.instance.fightResult)return b_s.close(),void e.MineAttackResult.open(MineModel.instance.fightResult);p_l&&gymkhanaModel.instance.stopFight(),gymkhanaModel.instance._fightPb.winPid==LgcM.ins.heroVo.id?(e.gymkhanaSuccessResult.open(),this.ani2.stop()):e.gymkhanaLoseResult.open(),e.gymkhanaPanel.close()},b_s.prototype.AniComplete=function(){Auqf(this,Laya)},b_s.prototype.startFight=function(){gymkhanaModel.instance.startFight(),this.startTag.visible=!1,"arena"==Config.map[b_p.mapID].impl?this.closeBtn.visible=!0:this.closeBtn.visible=!1},b_s.open=function(){Mmfm(UIM,b_s)},b_s.close=function(){Ewsp(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.startTag.visible=!1,e}e.gymkhanaPkPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.gymkhana.gymkhanaRecordUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Admg(LED,l_r,this,Laya,gymkhanaModel)},b_s.prototype.onRemove=function(){Ouff(this,Laya,LED,l_r)},b_s.prototype.refreshCd=function(){Khmp(gymkhanaModel)},b_s.prototype.sortdata=function(e,p_l){return Qguj(e,p_l)},b_s.prototype.RenderChallengeItem=function(e,p_l){var p_g=e.getChildByName("resulteImage"),b_s=e.getChildByName("dateTime"),d_u=e.getChildByName("name"),b_e=e.getChildByName("winBox"),d_m=e.getChildByName("loseText"),d_w=e.getChildByName("fight"),f_t=b_e.getChildByName("rankNum"),v_z=e.dataSource;if(v_z){var d_h=v_z.beforeRank-v_z.afterRank;p_g.index=v_z.winPid==LgcM.ins.heroVo.id?2:3,d_w.text=v_z.power.toString(),b_e.visible=0<d_h,d_m.visible=d_h<=0,d_u.text=v_z.tName,f_t.text=(j_x("2434_1511_1067")+j_x(371))+d_h,b_s.text=Utils.fmtDate(new Date(1e3*v_z.time))}},b_s.prototype.onTabSelect=function(e){switch(this.challengedBox.visible=0===e,this.challengeBox.visible=1===e,e){case 0:gymkhanaModel.instance.reqRecordInfo(1);break;case 1:gymkhanaModel.instance.reqRecordInfo(0)}},b_s.prototype.onClick=function(p_l){var p_g=p_l.target;switch(p_g.name){case"closeBtn":case"backBtn":b_s.close();break;case"revengeBtn":var d_u=p_g;if(gymkhanaModel.instance.lastTime+Config.global[1804].i_info<=SyncTime.serverTime/1e3)gymkhanaModel.instance.overplusChallengeTime<=0?b_p.checkCoin(CoinDefine.GOLD,Config.global[1803].t_info[1])?e.gymkhanaBuyTimeTip.open():b_p.broadcastNotice((j_x("1263_869_2462")+j_x(1779))):(gymkhanaModel.instance.historyRank=gymkhanaModel.instance.historyMaxRank,gymkhanaModel.instance.reqChallengePlayer(d_u.dataSource.tpid,gymkhanaModel.instance.gymkhanaInfo.selfRankNum,1));else if(gymkhanaModel.instance.overplusChallengeTime<=0)b_p.confirm((j_x("1971_1896_48")+j_x("383_235_2348")+""+j_x("1777_320_1355")+j_x("2420_48_383")+j_x("235_2348")));else{var b_e=this.refreshCd.bind(this);b_p.confirm(Utils.$((j_x("48_383_1614")+j_x("2171_283")+""+j_x("68_2032_572")+j_x(2218)+"{1}"+j_x("1263_869_1496")+j_x("1792_1614_2171")+j_x("1702_2460")),Config.global[1806].t_info[1]),b_e,null,!1,!0)}}},b_s.open=function(){Ulwc(UIM,b_s)},b_s.prototype.updateView=function(e){e.records&&0<e.records.length?(e.records.sort(this.sortdata),1==e.mode?(this.defence.visible=!1,this.challengedList.visible=!0,this.challengedList.array=e.records):(this.attack.visible=!1,this.challengeList.visible=!0,this.challengeList.array=e.records)):1==e.mode?(this.attack.visible=!0,this.challengedList.visible=!1):(this.defence.visible=!0,this.challengeList.visible=!1)},b_s.prototype.RenderChallengedItem=function(e,p_l){var p_g=e.getChildByName("resulteClip"),b_s=e.getChildByName("dateTime"),d_u=e.getChildByName("name"),b_e=e.getChildByName("loseBox"),d_m=b_e.getChildByName("revengeBtn"),d_w=e.getChildByName("winText"),f_t=b_e.getChildByName("rankNum"),v_z=e.getChildByName("fight");d_m.dataSource=e.dataSource;var d_h=e.dataSource;if(d_h){var r_t=d_h.beforeRank-d_h.afterRank;b_e.visible=r_t<0,d_w.visible=!b_e.visible,b_e.visible=r_t<0,d_u.text=d_h.tName,v_z.text=d_h.power.toString(),p_g.index=d_h.winPid==LgcM.ins.heroVo.id?0:1,f_t.text=(j_x("2434_1511_2379")+j_x(1317))+(d_h.afterRank-d_h.beforeRank),b_s.text=Utils.fmtDate(new Date(1e3*d_h.time))}},b_s.close=function(){Yabc(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e._clipTab=new p_c(e.pageTable),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.challengeList.vScrollBarSkin="",e.challengeList.scrollBar.elasticDistance=200,e.challengeList.scrollBar.elasticBackTime=500,e.challengedList.vScrollBarSkin="",e.challengedList.scrollBar.elasticDistance=200,e.challengedList.scrollBar.elasticBackTime=500,e.pageTable.selectedIndex=-1,e.challengeList.renderHandler=Laya.Handler.create(e,e.RenderChallengeItem,null,!1),e.challengedList.renderHandler=Laya.Handler.create(e,e.RenderChallengedItem,null,!1),e}e.gymkhanaRecord=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.gymkhana.gymkhanaWinUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Abyu(this,Laya)},b_s.prototype.onRemove=function(){Oxfq(gymkhanaModel,this,Laya)},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":case"SureBtn":b_s.close()}},b_s.prototype.renderItembox=function(e,p_l){var p_g=new ModuleItemVO;p_g.id=e.dataSource[0],p_g.amount=e.dataSource[1],e.setItemData(p_g),e.setName("")},b_s.prototype.updateView=function(){var e=gymkhanaModel.instance._fightPb;this.dataSource=e,this.uprankNum.text=(e.beforeRank-e.afterRank).toString();var p_l=Config.global[1805].t_info,p_g=Config.rank_ranklist[RankType.GymkhanaRank].maxCount+1,b_s=0==gymkhanaModel.instance.historyRank?p_g:gymkhanaModel.instance.historyRank;if(e.afterRank<b_s){var d_u=gymkhanaModel.instance.getRangingUpReward(e.afterRank,b_s),b_e=[];for(var d_m in d_u)b_e.push([parseInt(d_m),d_u[d_m]]);this.rewardHtml.innerHTML=gymkhanaModel.instance.rewardToHtmlStr(b_e),this.historyBox.visible=!0,this.historyImage.visible=!0,this.ani1.play(0,!1)}else this.historyBox.visible=!1,this.historyImage.visible=!1;this.list.array=p_l,gymkhanaModel.instance.RenderBox(this.rankBox,e.afterRank)},b_s.prototype.onUpdateTime=function(){this.time--,this.CountdownLabel.text=Utils.$(("{1}"+j_x(2081)),this.time),this.time<=0&&b_s.close()},b_s.open=function(){Gbpp(UIM,b_s)},b_s.close=function(){Giqx(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g.list.vScrollBarSkin="",p_g.list.scrollBar.elasticDistance=200,p_g.list.scrollBar.elasticBackTime=500,p_g.list.itemRender=e.ItemBox,p_g.list.renderHandler=Laya.Handler.create(p_g,p_g.renderItembox,null,!1),p_g.time=10,p_g.rewardHtml.style.fontSize=24,p_g.rewardHtml.style.color="#f0ecd8",p_g}e.gymkhanaSuccessResult=p_g;var d_u,b_e=(d_u=ui.window.gymkhana.gymkhanaLoseUI,__extends(d_m,d_u),d_m.open=function(){Gjav(UIM,d_m)},d_m.prototype.onTimer=function(){this.time--,this.CountdownLabel.text=Utils.$(("{1}"+j_x(2081)),this.time),this.time<=0&&this.leaveFb()},d_m.prototype.onAdded=function(){this.time=60,this.rewardHtml.innerHTML=gymkhanaModel.instance.rewardToHtmlStr(Config.global[1805].t_info),Laya.timer.loop(1e3,this,this.onTimer),this.CountdownLabel.text=Utils.$(("{1}"+j_x(2081)),this.time),this.on(Laya.UIEvent.CLICK,this,this.onMouseClick)},d_m.close=function(){Qutr(UIM,d_m)},d_m.prototype.onRemove=function(){Awug(this,Laya)},d_m.prototype.leaveFb=function(e){void 0===e&&(e=!0),gymkhanaModel.instance.reqQuitScence(),e&&d_m.close()},d_m.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"SureBtn":this.leaveFb();break;case"roleBtn":this.leaveFb(),b_p.registerAutoOpenPanel(e.RolePanel,-1);break;case"skillBtn":this.leaveFb(),b_p.registerAutoOpenPanel(e.SkillPanel,-1);break;case"talismanBtn":this.leaveFb(),b_p.registerAutoOpenPanel(e.TalismanPanel,-1);break;case"strengthBtn":this.leaveFb(),b_p.registerAutoOpenPanel(e.StrengthPanel,-1)}},d_m);function d_m(){var e=d_u.call(this)||this;return e.time=0,e.time=60,e.rewardHtml.style.fontSize=24,e.rewardHtml.style.color="#f0ecd8",e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.gymkhanaLoseResult=b_e;var d_w,f_t=(d_w=ui.window.gymkhana.gymkhanaUpRankUI,__extends(v_z,d_w),v_z.open=function(){Asnt(UIM,v_z)},v_z.prototype.onAdded=function(){var e=gymkhanaModel.instance._fightPb,p_l=Config.rank_ranklist[RankType.GymkhanaRank].maxCount+1,p_g=0==gymkhanaModel.instance.historyRank?p_l:gymkhanaModel.instance.historyRank;gymkhanaModel.instance.RenderBox(this.maxRank,p_g),gymkhanaModel.instance.RenderBox(this.rankNum,e.afterRank);var b_s=p_g-e.afterRank;this.upRank.text=b_s.toString();var d_u=[],b_e=gymkhanaModel.instance.getRangingUpReward(e.afterRank,p_g);for(var d_m in b_e)d_u.push([parseInt(d_m),b_e[d_m]]);this.rewardHtml.innerHTML=gymkhanaModel.instance.rewardToHtmlStr(d_u),this.on(Laya.UIEvent.CLICK,this,this.onMouseClick)},v_z.prototype.onRemove=function(){Evmr(this,Laya)},v_z.close=function(){Gimx(UIM,v_z)},v_z.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":v_z.close()}},v_z);function v_z(){var e=d_w.call(this)||this;return e.rewardHtml.style.fontSize=24,e.rewardHtml.style.color="#f0ecd8",e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.gymkhanaMaxRankResult=f_t}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.gymkhana.gymkhanaRewardUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Mqcm(this,Laya)},b_s.prototype.RenderRewardItem=function(e,p_l){Wpqt(e,p_l)},b_s.prototype.onRemove=function(){Qgaf(this,Laya)},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close()}},b_s.open=function(){Egmf(UIM,b_s)},b_s.prototype.updateView=function(){var e=gymkhanaModel.instance.gymkhanaInfo;if(e){var p_l=Config.rank_ranklist[RankType.GymkhanaRank].maxCount;this.rankNum.text=e.selfRankNum<p_l?e.selfRankNum.toString():(j_x("206_1067_1077")),this.historyRankNum.text=0<gymkhanaModel.instance.historyMaxRank?gymkhanaModel.instance.historyMaxRank.toString():(j_x(814)),RankModel.instance.getRankDataByType(RankType.GymkhanaRank),e.selfRankNum<=0&&(this.rankNum.text=(j_x("206_1067_1077"))),this.rewardList.array=gymkhanaModel.instance.rankrewardCfgs()}},b_s.close=function(){Urom(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.rewardList.vScrollBarSkin="",e.rewardList.scrollBar.elasticDistance=200,e.rewardList.scrollBar.elasticBackTime=500,e.rewardList.itemRender=b_e,e.rewardList.renderHandler=Laya.Handler.create(e,e.RenderRewardItem,null,!1),e}e.gymkhanaRewardPanel=p_g;var d_u,b_e=(d_u=ui.window.gymkhana.gymkhanaRankRewardCellUI,__extends(d_m,d_u),d_m.prototype.renderItem=function(e,p_l){var p_g=new ModuleItemVO;p_g.id=e.dataSource[0],p_g.amount=e.dataSource[1],e.setItemData(p_g),e.setName("")},d_m.prototype.updateData=function(e){if(this.dataSource){var p_l=this.dataSource;p_l.endIdx>p_l.beginIdx?(this.rankNum.text=Utils.$((j_x(573)+"{1}-{2}"+j_x(1511)),p_l.beginIdx,p_l.endIdx),this.rankNum.visible=!0,this.rankClip.visible=!1):(this.rankNum.visible=!1,this.rankClip.visible=!0,this.rankClip.index=p_l.endIdx-1),this.rewardList.array=p_l.reward}},d_m);function d_m(){var p_l=d_u.call(this)||this;return p_l.rewardList.renderHandler=Laya.Handler.create(p_l,p_l.renderItem,null,!1),p_l.rewardList.itemRender=e.ItemBox,p_l}e.gymkhanaRankCell=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.shoppopupUI,__extends(b_s,p_l),b_s.open=function(e){Wgul(e,UIM,b_s)},b_s.prototype.onMouseClick=function(e){var p_l,p_g=e.target,d_u=parseInt(this.useNumTxt.text.split("/")[0]),b_e=Config.gymkhana_gymkhanaShop[this.dataSource.Id];p_l=b_e.buyLimit?this.dataSource.buyLimitTimes:this.dataSource.times;var d_m=gymkhanaModel.instance.getConfigMax(b_e)-p_l;switch(p_g.name){case"cutBtn":(d_u-=1)<1&&(d_u=1),this.useNumTxt.text=d_u.toString()+"/"+d_m,this.numTxt.color=b_e.money*d_u>LgcM.ins.heroVo.gymkhanaScore?"#c92828":"#008931",this.numTxt.text=(b_e.money*d_u).toString();break;case"cutTenBtn":(d_u-=10)<1&&(d_u=1),this.useNumTxt.text=d_u.toString()+"/"+d_m,this.numTxt.color=b_e.money*d_u>LgcM.ins.heroVo.gymkhanaScore?"#c92828":"#008931",this.numTxt.text=(b_e.money*d_u).toString();break;case"addBtn":d_m-(d_u+=1)<0&&(d_u=d_m),this.useNumTxt.text=d_u.toString()+"/"+d_m,this.numTxt.color=b_e.money*d_u>LgcM.ins.heroVo.gymkhanaScore?"#c92828":"#008931",this.numTxt.text=(b_e.money*d_u).toString();break;case"addTenBtn":d_m-(d_u+=10)<0&&(d_u=d_m),this.useNumTxt.text=d_u.toString()+"/"+d_m,this.numTxt.color=b_e.money*d_u>LgcM.ins.heroVo.gymkhanaScore?"#c92828":"#008931",this.numTxt.text=(b_e.money*d_u).toString();break;case"useBtn":gymkhanaModel.instance.reqGymkhanaBuy(this.dataSource.Id,parseInt(this.useNumTxt.text.split("/")[0]));case"closeBtn":b_s.close()}},b_s.prototype.onRemove=function(e){Ykad(e,this,Laya)},b_s.prototype.onAdd=function(e){Gtox(e,this,Laya)},b_s.close=function(){Yukn(UIM,b_s)},b_s.prototype.updateView=function(){var e=this.dataSource.cfg,p_l=new ModuleItemVO;p_l.id=e.itemId,p_l.amount=1,this.itemBox.isShowName=!1,this.itemBox.setItemData(p_l),this.nameTxt.text=Config.CItem(e.itemId).name;var p_g=LgcM.ins.heroVo.gymkhanaScore;this.lvTxt.color=e.money>p_g?"#c92828":"#008931",this.lvTxt.text=Utils.$("{1}",e.money);var b_s=e.money*parseInt(this.useNumTxt.text.split("/")[0]);this.numTxt.color=p_g<b_s?"#c92828":"#008931",this.numTxt.text=Utils.$("{1}",b_s);var d_u,b_e=Config.item_coin[CoinDefine.GYMKHANA],d_m=Resource.ResUrl.getIconUrl(b_e.minIcon);this.moneyClip.skin=d_m,this.moneyClip.clipX=this.moneyClip.clipY=1,this.moneyClip.index=0,this.moneyClip.visible=!0,this.moneyall.skin=d_m,this.moneyall.clipX=this.moneyall.clipY=1,this.moneyall.index=0,this.moneyall.visible=!0,d_u=e.buyLimit?this.dataSource.buyLimitTimes:this.dataSource.times,this.useNumTxt.text=parseInt(this.useNumTxt.text.split("/")[0])+"/"+(gymkhanaModel.instance.getConfigMax(e)-d_u)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdd),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.gymkhanaShopPopup=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.helperView.HelperPanelUI,__extends(d_u,p_l),d_u.prototype.onAdded=function(){this.shade.on(Laya.Event.CLICK,this,this.onClick),this.list_select.selectEnable=!0,this.list_select.renderHandler=p_g.create(this,this.updateItem,[this.list_select],!1),this.list_select.vScrollBarSkin="",this.list_select.scrollBar.elasticDistance=200,this.list_select.scrollBar.elasticBackTime=500,this.list_select.selectedIndex=-1,this.list_select.repeatX=1,this.list_select.repeatY=5,this.list_select.array=HelperModule.instance.initValue(),this.dataSource&&this.dataSource.location&&(this.x+=this.dataSource.location[0]-642,100<this.x&&(this.x+=-115)),LED.on(l_r.HELPER_UPDATE_INFO,this,this.updateArrayVo)},d_u.prototype.onClick=function(e){"shade"==e.target.name&&d_u.close()},d_u.prototype.onItemClick=function(p_l){if(p_l.funid[0]){var p_g=parseInt(p_l.link[2]);0<p_g?e.WindowClass.openWin(p_l.link[1],[p_g]):e.WindowClass.openWin(p_l.link[1])}},d_u.prototype.updateArrayVo=function(){Oijy(this,HelperModule)},d_u.prototype.onRemove=function(){Cyfq(this,Laya,LED,l_r)},d_u.prototype.updateItem=function(e,p_l,p_g){if(e==this.list_select){var b_s=p_l.dataSource,d_u=p_l.getChildByName("btn_use");if(!b_s)return;d_u.label=b_s.title,d_u.on(Laya.Event.CLICK,this,this.onItemClick,[b_s])}},d_u.open=function(e){UIM.open(d_u,null,{location:e},!0,!1,!1,!0)},d_u.prototype.onClose=function(){Wiah(d_u)},d_u.close=function(){Usma(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.HelperPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.hole.holebtnUI,__extends(b_s,p_l),b_s.prototype.onAdd=function(){Ktji(this,e,Laya,LED,l_r)},b_s.prototype.updateRpEntrance=function(){Mquo(BagModel,GameDefine,this,BagTypeDefine,ItemTypeDefine)},b_s.prototype.holeBtnInit=function(){for(var e=0;e<this.btnBox.numChildren;++e){var p_l=this.btnBox.getChildAt(e);if(p_l){p_l.clickScale=1.1;var p_g=p_l.getChildByName("labImg");if(p_g){p_g.y=this._defY[e];var b_s=p_g?p_g.getChildByName("rpImg"):null;b_s&&(b_s.visible=!1)}}}this.leftRedPoint.visible=!1,this.rightRedPoint.visible=!1,this.holeRedpoint(),this.checkSystemOpen(),this.startWave()},b_s.prototype.onDragMove=function(p_l){for(var p_g=!1,d_u=!1,b_e=0;b_e<this.btnBox.numChildren;++b_e){var d_m=this.btnBox.getChildAt(b_e);if(d_m){var d_w=d_m.getChildByName("labImg"),f_t=d_w?d_w.getChildByName("rpImg"):null;if(f_t&&f_t.visible){var v_z=d_w.localToGlobal(new Laya.Point(f_t.x,f_t.y)).x+(f_t.width>>1);v_z<0?p_g=!0:v_z>GPlatform.designWidth&&(d_u=!0)}if(p_g&&d_u)break}}this.leftRedPoint.visible=p_g,this.rightRedPoint.visible=d_u,this.leftBtn.visible=this.listPanel.hScrollBar.value!==this.listPanel.hScrollBar.min,this.rightBtn.visible=this.listPanel.hScrollBar.value!==this.listPanel.hScrollBar.max,e.GuidePanel.checkIsWinAndUpdate(b_s.name,!1),Laya.timer.once(100,this,this.delayCheckGuide)},b_s.prototype.isTween=function(){for(var e=0;e<this.btnBox.numChildren;++e){var p_l=this.btnBox.getChildAt(e);if(p_l){var p_g=p_l.getChildByName("labImg"),b_s=p_g?p_g.getChildByName("rpImg"):null;1==p_l.gray&&(b_s.visible=!1),p_g&&1==b_s.visible?(Laya.Tween.clearAll(p_g),this.createTween(p_g)):this.tweenStop(p_g)}}},b_s.close=function(e){void 0===e&&(e=!1),UIM.close(b_s)},b_s.prototype.createTween=function(e){var p_l=e.y;e.y=p_l,laya.utils.Tween.to(e,{j_l:p_l-40},1500,Laya.Ease.linearIn,Laya.Handler.create(this,this.createTweens,[e]))},b_s.prototype.createTweens=function(e){var p_l=e.y;e.y=p_l,laya.utils.Tween.to(e,{j_l:p_l+40},1500,Laya.Ease.linearIn,Laya.Handler.create(this,this.createTween,[e]))},b_s.prototype.delayCheckGuide=function(p_l){Akpv(p_l,e,b_s)},b_s.prototype.waveLoop=function(){var e,p_l=(SyncTime.serverTime-this._waveStartTime)%2e3;e=p_l<500?Math.round(15*p_l/500):p_l<1e3?Math.round(15*(1e3-p_l)/500):p_l<1500?-Math.round(15*(p_l-1e3)/500):-Math.round(15*(2e3-p_l)/500);for(var p_g=0;p_g<this.btnBox.numChildren;++p_g){var b_s=this.btnBox.getChildAt(p_g).getChildByName("labImg");if(b_s){var d_u=b_s.getChildByName("rpImg");d_u&&d_u.visible?b_s.y=this._defY[p_g]+e:b_s.y!==this._defY[p_g]&&(b_s.y=this._defY[p_g])}}},b_s.prototype.startWave=function(){Gubf(this,SyncTime,Laya)},b_s.prototype.onClick=function(p_l){var p_g=p_l.target;if(p_g)switch(p_g.name){case"closeBtn":case"backBtn":b_s.close();break;case"holebtn":e.HolePanel.open();break;case"fieldbtn":e.HoleFieldView.open();break;case"veinbtn":break;case"stoveBtn":e.TalismanStovePanel.open();break;case"banquetBtn":e.BanquetPanel.open();break;case"TreasureBtn":e.HoleTreasurePanel.open();break;case"Treasurebox":e.HoleTreasureboxPanel.open();break;case"linglongBtn":break;case"MedicineBtn":e.MedicineView.open();break;case"btnEntrance":e.HoleEntrance.open();break;default:"notOpen"===p_g.parent.name&&b_p.broadcastNotOpen()}},b_s.prototype.checkSystemOpen=function(p_l){void 0===p_l&&(p_l=!1),SystemNoticeManager.instance.setSpGrayByWinClass(this.holebtn.getChildByName("labImg"),e.HolePanel,p_l),SystemNoticeManager.instance.setSpGrayByWinClass(this.fieldbtn.getChildByName("labImg"),e.HoleFieldView,p_l),SystemNoticeManager.instance.setSpGrayByWinClass(this.MedicineBtn.getChildByName("labImg"),e.MedicineView,p_l),SystemNoticeManager.instance.setSpGrayByWinClass(this.stoveBtn.getChildByName("labImg"),e.TalismanStovePanel,p_l),SystemNoticeManager.instance.setSpGrayByWinClass(this.banquetBtn.getChildByName("labImg"),e.BanquetPanel,p_l),SystemNoticeManager.instance.setSpGrayByWinClass(this.TreasureBtn.getChildByName("labImg"),e.HoleTreasurePanel,p_l),SystemNoticeManager.instance.setSpGrayByWinClass(this.Treasurebox.getChildByName("labImg"),e.HoleTreasureboxPanel,p_l)},b_s.prototype.holeRedpoint=function(){if(this.btnBox&&this.btnBox._childs&&0<this.btnBox._childs.length)for(var e=0;e<this.btnBox.numChildren;++e){var p_l=this.btnBox.getChildAt(e);if(p_l){var p_g=p_l.getChildByName("labImg"),b_s=p_g?p_g.getChildByName("rpImg"):null;switch(p_l.name){case"holebtn":HoleMoudel.instance.getRedpoint(1)?b_s.visible=HoleMoudel.instance.getRedpoint(1):b_s.visible=!1;break;case"fieldbtn":HoleMoudel.instance.getRedpoint(2)?b_s.visible=HoleMoudel.instance.getRedpoint(2):b_s.visible=!1;break;case"veinbtn":HoleMoudel.instance.getRedpoint(3)?b_s.visible=HoleMoudel.instance.getRedpoint(3):b_s.visible=!1;break;case"stoveBtn":if(!p_k.instance.checkSystemOpenByName("TalismanStovePanel"))break;TalismanModel.instance.getTalismanRedpoint()?b_s.visible=TalismanModel.instance.getTalismanRedpoint():b_s.visible=!1;break;case"banquetBtn":b_s.visible=v_x.instance.hasRedPoint();break;case"TreasureBtn":if(HoleMoudel.instance.getRedpoint(5)){b_s.visible=HoleMoudel.instance.getRedpoint(5);var d_u=HoleMoudel.instance.getFacility(),b_e=HoleMoudel.instance.getCurValNum()[0];if(!d_u)break;var d_m=d_u[0].lv,d_w=Config.office_treasure[d_m];b_e.curVal>=d_w.store&&(this.effectBox.visible=!0,this.effect1.autoPlay=!0,this.effect3.autoPlay=!0)}else b_s.visible=!1,this.effectBox.visible=!1,this.effect1.autoPlay=!1,this.effect3.autoPlay=!1;break;case"Treasurebox":HoleMoudel.instance.getRedpoint(4)?b_s.visible=HoleMoudel.instance.getRedpoint(4):b_s.visible=!1;break;case"MedicineBtn":HoleMoudel.instance.getRedpoint(6)?b_s.visible=HoleMoudel.instance.getRedpoint(6):b_s.visible=!1}}}},b_s.prototype.onRemove=function(){Config.map[b_p.mapID]&&Config.map[b_p.mapID].showUI&&0<=Config.map[b_p.mapID].showUI.indexOf(1003)&&e.HangIcon.open(),this.off(Laya.Event.CLICK,this,this.onClick),LED.off(l_r.KM_RED_UPDATE,this,this.holeRedpoint),LED.off(l_r.TALISMAN_INFO_UPDATE,this,this.holeRedpoint),LED.off(l_r.PET_GROWN_INFO_UPDATE,this,this.holeRedpoint),LED.off(l_r.BANQUET_INFO_UPDATE,this,this.holeRedpoint),LED.off(l_r.TREASYREBOX_INFO_UPDATE,this,this.holeRedpoint),LED.off(l_r.JBP_INFO_UPDATE,this,this.holeRedpoint),LED.off(l_r.TALISMAN_STOVESTOP_REFINE,this,this.holeRedpoint),LED.off(l_r.TALISMAN_STOVE_REFINE,this,this.holeRedpoint),LED.off(l_r.CHECK_BAG_IS_UPDATE,this,this.updateRpEntrance),Laya.timer.clearAll(this),Laya.timer.clear(this,this.delayCheckGuide),this._roleModel&&this._roleModel.clearRes()},b_s.prototype.tweenStop=function(e){Kfab(e,laya)},b_s.prototype.tween=function(e){var p_l=e<0?-GPlatform.designWidth:GPlatform.designWidth,p_g=this.listPanel.hScrollBar.value,b_s=p_g+p_l,d_u=1e3;b_s<0?b_s=0:b_s>this.btnBox.width-GPlatform.designWidth&&(b_s=this.btnBox.width-GPlatform.designWidth),d_u*=Math.abs(b_s-p_g)/GPlatform.designWidth,Laya.Tween.to(this.listPanel.hScrollBar,{value:b_s},d_u)},b_s.open=function(){Mxwg(UIM,b_s)},b_s.prototype.changeAdapt=function(){GPlatform.needAdapt&&(this.height=GPlatform.stageHeight,this.width=Stage.width,GPlatform.stageHeight>this.listPanel.height&&(this.img_big.y=this.img_big.y/2),Stage.width>GPlatform.designWidth&&(this.btnBox.x+=(Stage.width-750)/2,this.img_big.width=Stage.width),this.listPanel.height=GPlatform.stageHeight,this.listPanel.width=Stage.width,this.listPanel.scaleX=GPlatform.ratioX,this.backBtn.y*=GPlatform.ratioY,this.backBtn.x=this.width-this.backBtn.width-10,this.rightBtn.x=this.width-this.rightBtn.width)},b_s);function b_s(){var e=p_l.call(this)||this;e._waveStartTime=0,e._defY=[],e.tweenNum=0,e.changeAdapt();for(var p_g=0;p_g<e.btnBox.numChildren;++p_g){var b_s=e.btnBox.getChildAt(p_g).getChildByName("labImg");b_s?e._defY.push(b_s.y):e._defY.push(0)}return e.on(Laya.Event.ADDED,e,e.onAdd),e.on(Laya.Event.REMOVED,e,e.onRemove),e.checkSystemOpen(!0),e}e.HoleBtnPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.hole.holedetailsUI,__extends(d_u,p_l),d_u.prototype.onAdd=function(){Mabg(this,Laya,d_u)},d_u.prototype.onRender=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("nameLab"),d_u=e.getChildByName("valueLab");b_s.text=d_v.getDesc(p_g.propOrdinal),d_u.text=p_g.value.toString(),b_p.getDfofficLv()},d_u.open=function(){Cysq(UIM,d_u)},d_u.prototype.updateAttributesList=function(){var e=b_p.getDfofficLv(),p_l=Config.office_office[e],p_g=CharacterProperty.getPropertys(p_l.lvAttr);this.AttributesList.array=p_g,this.pos((this.stage.width-this.width)/2,200);var b_s=b_p.calPropFight(p_g);b_p.getNumSp("fightingSmall",b_s,this.fightSp,-6)},d_u.prototype.updateList=function(){Waqb(b_p,Config)},d_u.close=function(){Ohsa(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e.AttributesList.vScrollBarSkin="",e.AttributesList.scrollBar.elasticBackTime=0,e.AttributesList.repeatY=2,e.AttributesList.repeatY=2,e.AttributesList.scrollBar.elasticDistance=0,e.AttributesList.selectEnable=!0,e.AttributesList.renderHandler=p_g.create(e,e.onRender,null,!1),e.on(Laya.Event.ADDED,e,e.onAdd),e}e.HoleDetailsPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.hole.holefieldUI,__extends(d_u,p_l),d_u.prototype.onAdd=function(){this.closeBtn.on(Laya.Event.CLICK,this,this.onClick),this.backBtn.on(Laya.Event.CLICK,this,this.onClick),this.keychargeBtn.on(Laya.Event.CLICK,this,this.onClick),HoleMoudel.instance.pbMineDatas(),this.ReceiveBtn_0.on(Laya.Event.CLICK,this,this.onClick),this.ReceiveBtn_1.on(Laya.Event.CLICK,this,this.onClick),this.ReceiveBtn_2.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.KM_LV_CHANGE,this,this.updateVo),LED.on(l_r.KM_Criti_EFFECTE,this,this.PlayReelEffecte),this.list0.vScrollBarSkin="",this.list0.repeatX=1,this.list0.itemRender=e.ItemBox,this.list0.renderHandler=p_g.create(this,this.onRender,[this.list0],!1),this.list1.vScrollBarSkin="",this.list1.repeatX=1,this.list1.itemRender=e.ItemBox,this.list1.renderHandler=p_g.create(this,this.onRender,[this.list1],!1),this.list2.vScrollBarSkin="",this.list2.repeatX=1,this.list2.itemRender=e.ItemBox,this.list2.renderHandler=p_g.create(this,this.onRender,[this.list2],!1),this.keychargeBtn.disabled=!HoleMoudel.instance.getFieldState(),this.keychargeDesc.visible=this.keychargeBtn.disabled,this.keychargeRed.visible=!this.keychargeDesc.visible;var p_l=Config.global[GlobalDefine.mineOneKeyCollectState].t_info;p_l[2]&&p_l[2],this.keychargeDesc.changeText(HoleMoudel.instance.getFieldDesc()),this.updateVo(),Laya.timer.loop(1e3,this,this.onUpdateFrame)},d_u.prototype.updateDate=function(){var e,p_l=HoleMoudel.instance.getFieldInfo(),p_g=HoleMoudel.instance.getMineInfo();for(var b_s in p_l)-1<(e=this.getMineType(p_l[b_s].type,p_g))&&this.updateCondition(e,p_l[b_s],p_g[e]);this.updateBtnState(MinecdTypeVo.TYPEFIELDA,p_g[MinecdTypeVo.TYPEFIELDA]),this.updateBtnState(MinecdTypeVo.TYPEFIELDB,p_g[MinecdTypeVo.TYPEFIELDB]),this.updateBtnState(MinecdTypeVo.TYPEFIELDC,p_g[MinecdTypeVo.TYPEFIELDC]),this.keychargeDesc.visible||(this.keychargeBtn.disabled=this.ReceiveBtn_0.disabled&&this.ReceiveBtn_1.disabled&&this.ReceiveBtn_2.disabled,this.keychargeRed.visible=this.redpoint_0.visible&&this.redpoint_1.visible&&this.redpoint_2.visible)},d_u.prototype.timertypeset=function(e,p_l){var p_g=HoleMoudel.instance.getMineInfo();if(p_g[e].cd,p_l.visible=!0,0!=p_g[e].lv){if(!this.setTimeTxt(p_l,e))return 0!=p_g[e].times&&(p_l.visible=!1,HoleMoudel.instance.pbMineDatas()),!1;console.log()}return!0},d_u.prototype.onUpdateFrame=function(){Kubp(this,MinecdTypeVo)},d_u.prototype.updateBtnState=function(e,p_l){var p_g=Config.office_mine;this["ReceiveBtn_"+e].visible=!1;var b_s=1e3*p_l.type+p_l.lv;0<p_l.lv&&(this["ReceiveBtn_"+e].visible=!0,this["descLab_"+e].text=p_g[b_s].desc,this["fieldImg_"+e].disabled=!1,this["grayImg_"+e].visible=!1,p_l.lv==p_g[b_s].lv&&(this["ReceiveBtn_"+e].disabled=p_l.times>=p_g[b_s].times,this["redpoint_"+e].visible=!this["ReceiveBtn_"+e].disabled),this["limit_"+e]&&(this["limit_"+e].visible=!1)),this["list"+e].array=0<p_l.lv?p_g[b_s].reward:p_g[b_s+1].reward},d_u.prototype.onClick=function(e){var p_l=HoleMoudel.instance.getMineInfo(),p_g=e.target;if(p_g)switch(p_g.name){case"closeBtn":case"backBtn":d_u.close();break;case"ReceiveBtn_0":HoleMoudel.instance.pbmineCollect(p_l[0].type);break;case"ReceiveBtn_1":HoleMoudel.instance.pbmineCollect(p_l[1].type);break;case"ReceiveBtn_2":HoleMoudel.instance.pbmineCollect(p_l[2].type);break;case"keychargeBtn":var b_s=new c2m_office_mine_onekey_collect;b_s.type=MineOnekey.TYPEFIELD,DB.instance.query(c2m_office_mine_onekey_collect,b_s)}},d_u.open=function(){Mkzy(UIM,d_u)},d_u.prototype.updateVo=function(){Sadq(this)},d_u.prototype.getMineType=function(e,p_l){switch(e){case p_l[MinecdTypeVo.TYPEFIELDA].type:return MinecdTypeVo.TYPEFIELDA;case p_l[MinecdTypeVo.TYPEFIELDB].type:return MinecdTypeVo.TYPEFIELDB;case p_l[MinecdTypeVo.TYPEFIELDC].type:return MinecdTypeVo.TYPEFIELDC}return-1},d_u.prototype.unixPoorTrans=function(e){var p_l,p_g,b_s,d_u=new Date(SyncTime.serverTime),b_e="";return d_u.setTime(1e3*e),d_u.getHours(),(p_l=d_u.getHours()-8)<10&&(p_l="0"+p_l),d_u.getMinutes(),(p_g=d_u.getMinutes())<10&&(p_g="0"+p_g),d_u.getSeconds(),(b_s=d_u.getSeconds())<10&&(b_s="0"+b_s),b_e+=p_l+":",(b_e+=p_g+":")+b_s},d_u.prototype.setTimeTxt=function(e,p_l){var p_g=HoleMoudel.instance.getMineInfo()[p_l].cd-SyncTime.serverTime/1e3;return 0<p_g?(e.text=this.unixPoorTrans(p_g),!0):(e.text="",!1)},d_u.prototype.onRender=function(e,p_l,p_g){if(e==this.list0||e==this.list1||e==this.list2){var b_s=new ModuleItemVO;b_s.id=p_l.dataSource[0],b_s.bind=1,b_s.amount=p_l.dataSource[1],p_l.setItemData(b_s,ItemBoxDefine.MODULE_ITEM,!0)}},d_u.prototype.onRemove=function(){HoleMoudel.instance.pbMineDatas(),Laya.timer.clear(this,this.onUpdateFrame),this.closeBtn.off(Laya.Event.CLICK,this,this.onClick),this.backBtn.off(Laya.Event.CLICK,this,this.onClick),this.ReceiveBtn_0.off(Laya.Event.CLICK,this,this.onClick),this.ReceiveBtn_1.off(Laya.Event.CLICK,this,this.onClick),this.ReceiveBtn_2.off(Laya.Event.CLICK,this,this.onClick),LED.off(l_r.KM_LV_CHANGE,this,this.updateVo),LED.off(l_r.KM_Criti_EFFECTE,this,this.PlayReelEffecte),this.reelEffecte&&this.reelEffecte.clearRes()},d_u.prototype.PlayReelEffecte=function(e){var p_l=HoleMoudel.instance.getMineInfo();if(e.isCrit){var p_g=1;p_l[e.type]&&(p_g=p_l[e.type].lv);var b_s=Config.office_mine[1e3*e.type+p_g];if(!b_s)return;var d_u=b_s.crit&&b_s.crit[1]?b_s.crit[1]:0;this.reelEffecte?this.reelEffecte.SetText(this.reelContainer,(j_x("531_1976_223")+j_x("402_1573_2038")+"<span color='#c92828'>")+d_u+"%</span>"):(this.reelEffecte=new ReelEffecte,this.reelEffecte.InitEffecteDate(this.reelContainer,"res/ui/common/baoji_02.png",(j_x("531_1976_223")+j_x("402_1573_2038")+"<span color='#c92828'>")+d_u+"%</span>")),this.reelEffecte.PlayEffecte()}},d_u.prototype.updateCondition=function(e,p_l,p_g){var b_s=Config.office_mine,d_u=1e3*p_g.type+p_g.lv,b_e=1e3*p_g.type+p_g.lv+1;if(p_l.lv===p_g.lv){var d_m,d_w=b_s[d_u].times-p_g.times;d_w=d_w<0?0:d_w,this["batchLab_"+e].color="#00802e",this["batchLab_"+e].text=d_w.toString()+"/"+b_s[d_u].times.toString(),this["FullTitle_"+e].visible=d_w==b_s[d_u].times,d_m=5<=p_g.lv?p_g.lv.toString()+("("+j_x("1270_914_1117")+j_x(1012))+b_s[d_u].limit+(j_x("2342_371_2342")+")"):p_g.lv.toString()+("("+j_x("1270_914_1117")+j_x(1012))+b_s[b_e].limit+(j_x("2342_371_2342")+")"),this["conLv_"+e].text=d_m}},d_u.close=function(){Utrp(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdd),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.HoleFieldPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.hole.holeUI,__extends(d_u,p_l),d_u.prototype.onAdd=function(){Yned(this,Laya,e,HoleMoudel,p_g)},d_u.prototype.upgradeCilck=function(){b_p.getDfofficLv()<Config.global[605].i_info&&this.onUupgrade(HoleMoudel.instance.openType())},d_u.prototype.onClick=function(p_l){var p_g=p_l.target;if(p_g)switch(p_g.name){case"closeBtn":case"backBtn":d_u.close();break;case"DetailsBtn":case"DetailsBtn1":e.HoleDetailsPanel.open();break;case"promoteBtn":if(!p_k.instance.checkSystemOpen(FuncDefine.cabala))return this.tab.selectedIndex=0,void b_p.broadcastNotice(Config.funcOpen[FuncDefine.cabala].openError);d_u.close(),d_u.open();break;case"helpBtn":d_m.open()}},d_u.prototype.onConRender=function(e,p_l){if(e){var p_g=e.dataSource,b_s=b_p.getDfofficLv(),d_u=LgcM.ins.heroVo,b_e=e.getChildByName("conditiondesc"),d_m=e.getChildByName("probarlab"),d_w=e.getChildByName("conditionpsb");if(b_s<Config.global[605].i_info)switch(p_g[0]){case"strengthLv":var f_t=StrengthModel.instance.getTotalLv();d_w.value=f_t/p_g[1],b_e.text=(j_x("464_191_1367")+j_x("15_2342_1117")+j_x(1012))+p_g[1],d_m.text=f_t+"/"+p_g[1].toString(),1<=d_w.value&&(b_e.color="#008931"),d_w.value<1&&(b_e.color="#c92828");break;case"stateLv":var v_z=StateModel.instance.getStateLv(),d_h=StateModel.instance.getStateSubLv(),r_t=0;p_g[2]&&(r_t=p_g[2]),(p_g[1]>v_z||p_g[2]>d_h)&&(d_w.value=0,d_m.text="0/0"),v_z>=p_g[1]&&(v_z>p_g[1]&&(d_w.value=1,d_m.text="1/1"),p_g[2]&&d_h>=p_g[2]&&(d_w.value=1,d_m.text="1/1")),b_e.text=(j_x("381_843_1117")+j_x(1012))+Config.state_state[p_g[1]].desc+h_m[Utils.$("TYPE_{1}",+r_t)],1<=d_w.value&&(b_e.color="#008931"),d_w.value<1&&(b_e.color="#c92828");break;case"talismanLv":var t_n=HoleMoudel.instance.gettalismanLv();d_w.value=t_n/p_g[1],b_e.text=(j_x("799_869_1367")+j_x("15_2342_1117")+j_x(1012))+p_g[1],d_m.text=t_n+"/"+p_g[1].toString(),1<=d_w.value&&(b_e.color="#008931"),d_w.value<1&&(b_e.color="#c92828");break;case"fighting":var f_y=d_u.fight;d_w.value=f_y/p_g[1],b_e.text=(j_x("383_767_2376")+j_x("1117_1012"))+b_p.calsulate(p_g[1]),d_m.text=b_p.calsulate(f_y)+"/"+b_p.calsulate(p_g[1]).toString(),1<=d_w.value&&(b_e.color="#008931"),d_w.value<1&&(b_e.color="#c92828");break;case"blackking":var p_q=BlackKingModel.instance.godSuitNum();d_w.value=p_q/p_g[1],p_q==p_g[1]&&(d_w.value=1),b_e.text=(j_x("189_438_2313")+j_x("1862_2335_1796")+j_x("1117_1012"))+b_p.calsulate(p_g[1]),d_m.text=b_p.calsulate(p_q)+"/"+b_p.calsulate(p_g[1]).toString(),1<=d_w.value&&(b_e.color="#008931"),d_w.value<1&&(b_e.color="#c92828");break;case"talisman":var h_h=TalismanModel.instance.talismanSuitNum();d_w.value=h_h/p_g[1],p_q==p_g[1]&&(d_w.value=1),b_e.text=(j_x("799_869_42")+j_x("1049_2335_1796")+j_x("1117_1012"))+b_p.calsulate(p_g[1]),d_m.text=b_p.calsulate(h_h)+"/"+b_p.calsulate(p_g[1]).toString(),1<=d_w.value&&(b_e.color="#008931"),d_w.value<1&&(b_e.color="#c92828");break;case"roleLv":d_w.value=d_u.level/p_g[1],b_e.text=(j_x("455_1761_15")+j_x("2342_1117_1012"))+b_p.calsulate(p_g[1]),d_m.text=b_p.calsulate(d_u.level)+"/"+b_p.calsulate(p_g[1]).toString(),1<=d_w.value&&(b_e.color="#008931"),d_w.value<1&&(b_e.color="#c92828")}}},d_u.prototype.onRender=function(e,p_l){e.isShowName=!1;var p_g=e.dataSource,b_s=Config.CItem(p_g.id);Config.color[1e3+b_s.quality].color,e.setItemData(e.dataSource,ItemBoxDefine.MODULE_ITEM,!0),e.nameTxt.color=Config.color[1e3+b_s.quality].color},d_u.prototype.roleToOpen=function(p_l){Acyf(p_l,e,d_u)},d_u.prototype.onoff=function(){Grdn(this,Laya,HoleMoudel)},d_u.prototype.onUupgrade=function(p_l){if("1"==p_l){HoleMoudel.instance.reqUupgrade(),Laya.timer.once(500,this,this.updateDate);var p_g=0;this.BGimg.y+=41*p_g,p_g++,this.BGimg.x=900,Laya.Tween.to(this.BGimg,{f_u:36},300,Laya.Ease.expoInOut,null,100)}else"roleLv"==p_l?j_y.confirm(Utils.$((j_x("68_2032_711")+j_x("456_763_1672")+j_x("835_843_151"))),(function(){e.StoryFBPanel_new.open()})):"stateLv"==p_l?j_y.confirm(Utils.$((j_x("68_2032_711")+j_x("2417_381_843")+j_x("843_151"))),this.roleToOpen):"strengthLv"==p_l?j_y.confirm(Utils.$((j_x("68_2032_711")+j_x("2417_464_191")+j_x("843_151"))),this.strengToOpen):"talismanLv"==p_l||"fighting"==p_l?j_y.confirm(Utils.$((j_x("68_2032_711")+j_x("2417_799_869")+j_x("843_151"))),this.talismanToOpen):"talisman"==p_l?j_y.confirm(Utils.$((j_x("68_2032_711")+j_x("2417_799_869")+j_x("42_1049_843")+j_x(151))),(function(){e.TalismanPanel.open(1)})):"blackking"==p_l&&j_y.confirm(Utils.$((j_x("68_2032_711")+j_x("2417_189_438")+j_x("2313_1862_843")+j_x(151))),(function(){e.BlackKingPanel.open(1)}))},d_u.prototype.updateList=function(){var e=b_p.getDfofficLv();if(e<Config.global[605].i_info){var p_l=Config.office_office[e+1],p_g=b_p.getRewardDatas(p_l.reward);this.iconList.array=p_g,this.conditionlist.array=p_l.cond,this.reikiUpperLab.text=(j_x("2379_1737_2342")+j_x("72_1973_1067")+j_x("2128_1628_371")+j_x(2057))+p_l.lingqi+(j_x(932))}e>=Config.global[605].i_info&&(this.dateBox.visible=!1,this.panelImg.visible=!0,this.iconList.array=[])},d_u.prototype.talismanToOpen=function(p_l){Wmvk(p_l,e,d_u)},d_u.prototype.strengToOpen=function(p_l){Weog(p_l,e,d_u)},d_u.open=function(){Ckmv(UIM,d_u)},d_u.prototype.updateDate=function(){var e=b_p.getDfofficLv();StateModel.instance.getStateLv(),StrengthModel.instance.getTotalLv(),HoleMoudel.instance.gettalismanLv(),LgcM.ins.heroVo.fight,this.updateList(),this.panelImg.visible&&(this.panelImg.visible=!1),e<10&&(this.holelv1.index=0,this.holelv.index=e,this.holelv1.visible=!1);var p_l=HoleMoudel.instance.onReikinum(),p_g=(Config.office_office[e].lingqi-p_l)/Config.office_office[e].lingqi;this.proportionLab.text=Config.office_office[e].lingqi-p_l+"/"+Config.office_office[e].lingqi,this._maskProgressBar.value=p_g;var b_s=e.toString().slice(0,1);if(10<=e){this.holelv1.visible=!0;var d_u=e-10*parseInt(b_s);(this.holelv.index=0)<d_u&&(this.holelv.index=e-10*parseInt(b_s)),parseInt(b_s),this.holelv1.index=parseInt(b_s)}else e>=Config.global[605].i_info&&(this.iconList.array=[],this.dateBox.visible=!1,this.panelImg.visible=!0,this.upgradeBtn.visible=!1);var b_e=Config.office_office[e],d_m=CharacterProperty.getPropertys(b_e.lvAttr),d_w=b_p.calPropFight(d_m);if(console.log("fight = ",d_w),this.upgradeBtn.skin="res/ui/common/Button_common_01.png",this.upgradeBtn.labelColors="#444675",this.upgradeBtn.label=(j_x(711)+"  "+j_x(2417)),e<Config.global[605].i_info){if(Config.office_office[e+1],"1"==HoleMoudel.instance.openType())return this.redPoint.visible=!0,this.upgradeBtn.skin="res/ui/common/Button_common_02.png",this.upgradeBtn.labelColors="#804a00",void(this.upgradeBtn.label=(j_x(371)+"  "+j_x(2342)));this.redPoint.visible=!1}else e>=Config.global[605].i_info&&(this.upgradeBtn.visible=!1,this.dateBox.visible=!1,this.panelImg.visible=!0)},d_u.prototype.onTabSelect=function(e){Akna(e,p_c,this)},d_u.prototype.fightingToOpen=function(p_l){Ykzs(p_l,e,d_u)},d_u.close=function(){Ggpv(UIM,d_u)},d_u);function d_u(){var b_s=p_l.call(this)||this;return b_s.on(Laya.Event.ADDED,b_s,b_s.onAdd),b_s.on(Laya.Event.REMOVED,b_s,b_s.onoff),b_s.tab.selectHandler=p_g.create(b_s,b_s.onTabSelect,null,!1),b_s._maskProgressBar=new e.MaskProgressBar(b_s.treaBarImg,b_s.treaBgImg,null,null,null,0,1),b_s}e.HolePanel=b_s;var b_e,d_m=(b_e=ui.window.hole.hole_tipUI,__extends(d_w,b_e),d_w.prototype.onAdded=function(){Mfdh(this,Laya)},d_w.open=function(){Ipcw(UIM,d_w)},d_w.prototype.onClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":d_w.close()}},d_w.prototype.onRemoved=function(){Uxbw(this,Laya)},d_w.close=function(){Qivb(UIM,d_w)},d_w);function d_w(){var e=b_e.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.HolePanel_tip=d_m;var f_t,v_z=(f_t=ui.window.hole.hole_treasuretipUI,__extends(d_h,f_t),d_h.prototype.onAdded=function(){Qsmu(this,Laya)},d_h.prototype.onRemoved=function(){Qhpc(this,Laya)},d_h.prototype.onClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":d_h.close()}},d_h.open=function(){Ylno(UIM,d_h)},d_h.close=function(){Anfj(UIM,d_h)},d_h);function d_h(){var e=f_t.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.HolePanelTreasure_tip=v_z}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.hole.treasureboxUI,__extends(d_u,p_l),d_u.prototype.init=function(){Efkf(this,e,p_g,Laya)},d_u.prototype.onListInfo=function(){this.tweenStop(this.tweenImg),this.createTween(this.tweenImg),this.descTxt.visible=!1;var e=HoleMoudel.instance.getTreasureBox();e&&(e.length<=0&&(this.taskprogressLab.text=(j_x("1327_711_30")+j_x("595_33_1035")+"0/3"),this.descTxt.visible=!0),this.list.array=e.sort(this.compareFun),this.moneyLab.text=HoleMoudel.instance.getTimeConsume().toString(),HoleMoudel.instance.getFacility(),this.lvTxt.text=b_p.getDfofficLv().toString(),0<e.length&&(this.taskprogressLab.text=(j_x("1327_711_30")+j_x("595_33_1035")+"")+HoleMoudel.instance.taskProgress()+"/"+Config.office_expedition[e[0].lv].acceptNum))},d_u.prototype.sureToOpen=function(){Mfhe(HoleMoudel)},d_u.prototype.onRemove=function(){Scge(this,Laya,LED,l_r,HoleMoudel)},d_u.prototype.onGuild=function(){Cjea(this)},d_u.prototype.onAdded=function(){return Udrj(this,Laya,HoleMoudel,LED,l_r)},d_u.prototype.onRender=function(e,p_l){e.setItemData(e.dataSource,p_l);var p_g=HoleMoudel.instance.getTreasureBox(),b_s=e.dataSource;if(HoleMoudel.instance.taskProgress()<Config.office_expedition[p_g[0].lv].acceptNum&&(e.redImg.visible=HoleMoudel.instance.isTalismanList(b_s.id,Config.office_expedTask[b_s.id].num)),HoleMoudel.instance.taskProgress()==Config.office_expedition[p_g[0].lv].acceptNum&&(e.redImg.visible=!1,(j_x("1174_2111_2235")+j_x(83))==e.getButton.label&&(e.redImg.visible=!0),(j_x("378_239_799")+j_x(869))==e.getButton.label&&0==this.isopen&&(e.redImg.visible=!1),p_l==this.list.repeatY&&0==this.isopen))return this.isopen=!0,this.isopen},d_u.prototype.compareFun=function(e,p_l){return p_l.startTime===e.startTime?e.id-p_l.id:p_l.startTime-e.startTime},d_u.prototype.onClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":d_u.close();break;case"refreshBtn":j_y.confirm(Utils.$((j_x("1176_1409_572")+j_x(2218)+"{1}"+j_x("1263_869_896")+j_x("1787_1327_711")+j_x("269_745_30")+j_x("595_1176_2085")+j_x("4_601")+""),HoleMoudel.instance.getTimeConsume()),this.sureToOpen,!0);break;case"leaveforBtn":e.HolePanel.open(),d_u.close();break;case"TitleProp":e.TitleTips.tpye=4,e.TitleTips.open();break;case"helpBtn":e.HolePanelTreasure_tip.open()}},d_u.prototype.createTweens=function(e){e.y=35,laya.utils.Tween.to(e,{j_l:45},500,Laya.Ease.linearIn,Laya.Handler.create(this,this.createTween,[e]))},d_u.prototype.tweenStop=function(e){Qzxs(e,laya)},d_u.open=function(){Sbdj(UIM,d_u)},d_u.prototype.createTween=function(e){e.visible=!0,e.y=45,laya.utils.Tween.to(e,{j_l:35},500,Laya.Ease.linearIn,Laya.Handler.create(this,this.createTweens,[e]))},d_u.close=function(){Awoo(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e.isopen=!1,e.init(),e}e.HoleTreasureboxPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.hole.treasureboxcellUI,__extends(d_u,p_l),d_u.prototype.onAdded=function(){this.rewardsList.vScrollBarSkin="",this.rewardsList.repeatX=1,this.rewardsList.repeatY=3,this.rewardsList.itemRender=e.ItemBox,this.rewardsList.renderHandler=p_g.create(this,this.onRender,null,!1),this.getButton.on(Laya.Event.CLICK,this,this.onClick),this.backButton.on(Laya.Event.CLICK,this,this.onBackClick),LED.on(l_r.TASK_START_UPDATE,this,this.cdUptade),LED.on(l_r.TALISMANS_LIST_UPDATE,this,this.redPoint)},d_u.prototype.onRemove=function(){Kbjq(this,Laya,LED,l_r)},d_u.prototype.setTimeTxt=function(e){var p_l=this.dataSource,p_g=Config.office_expedTask[p_l.id].duration+p_l.startTime,b_s=SyncTime.serverTime,d_u=TitleModel.instance.CountTitles(3),b_e=p_g-b_s/1e3;return 0<d_u&&(b_e=Math.floor(b_e-b_e*d_u)),0<b_e?(e.text=this.unixPoorTrans(b_e),!0):(e.text="",HoleMoudel.instance.reqTreasyreBoxInfo(),Laya.timer.clear(this,this.timertypeset),!1)},d_u.prototype.timertypeset=function(){var e=this.dataSource;e&&(Config.office_expedTask[e.id].duration,this.setTimeTxt(this.cdLab)&&console.log(),this.backButton.visible&&(this.cddesclab.visible=!0,this.cddesclab.text=(j_x("30_595_33")+j_x("562_283")),this.redImg.visible=!1))},d_u.prototype.redPoint=function(){Yheg(HoleMoudel,this)},d_u.prototype.setItemData=function(e,p_l){this.ani1.resetToInitState(),this.rewardsList.array=Config.office_expedTask[e.id].reward;var p_g=Config.office_expedTask[e.id].taskBg[0];this.bgimg.skin="res/ui/"+p_g;var b_s=e.isGetReward,d_u=e.startTime,b_e=e.talismans;this.contentDiv.style.color="#4a728e",this.contentDiv.style.fontSize=22,this.contentDiv.style.wordWrap=!0,this.contentDiv.style.valign="top",this.contentDiv.style.leading=6,this.contentDiv.style.letterSpacing=3,this.contentDiv.style.font="SimHei",this.contentDiv.style.bold=!0,this.contentDiv.innerHTML=Utils.$("Lv:{1}  {2}",Config.office_expedTask[e.id].level,Config.office_expedTask[e.id].name),this.cdLab.text="";var d_m=Config.office_expedTask[e.id].duration+d_u-SyncTime.serverTime/1e3;return this.conditionDesc.visible=!1,this.cddesclab.visible=!1,this.redImg.visible=!0,HoleMoudel.instance.changeActStar(this.starBox,Config.office_expedTask[e.id].start),0<d_m&&this.cdUptade(),this.getButton.selected=!1,HoleMoudel.instance.getTreasureBox(),d_m<=0&&e.isGetReward<1&&0<d_u?(this.getButton.label=(j_x("1174_2111_2235")+j_x(83)),this.getButton.visible=!0,this.getButton.selected=!0,this.backButton.visible=!1,this.cddesclab.visible=!0,this.cddesclab.text=(j_x("30_595_1300")+j_x("1917_402")),void(this.redImg.visible=!0)):0==b_s&&0==d_u?(this.cddesclab.visible=!1,this.getButton.visible=!0,this.backButton.visible=!1,void(this.getButton.label=(j_x("1413_502_799")+j_x(869)))):0<d_u&&0<b_e.length?(this.cddesclab.text=(j_x("30_595_33")+j_x("562_283")),this.cddesclab.visible=!0,this.getButton.visible=!1,this.redImg.visible=!1,void(this.backButton.visible=!0)):void 0},d_u.prototype.btnvisable=function(){Eptl(this,Laya)},d_u.prototype.onAni=function(){Odhk(HoleMoudel)},d_u.prototype.onClick=function(){var p_l,p_g=this.dataSource;if(p_g&&((j_x("1413_502_799")+j_x(869))==this.getButton.label&&((p_l=new x_s).itemid=0,p_l.taskid=p_g.id,p_l.talismanid=0,e.HoleTreasureCellTipPanel.open(p_l),this.cddesclab.visible=!1),(j_x("1174_2111_2235")+j_x(83))==this.getButton.label)){this.ani1.play(0,!1),this.ani1.addLabel("111",15),this.ani1.on(Laya.Event.LABEL,this,this.onAni);var b_s=this.dataSource;this.cddesclab.visible=!0,this.cddesclab.text=(j_x("30_595_1300")+j_x("1917_402")),HoleMoudel.instance.reqGetReward(b_s.id),b_p.broadcastNotice((j_x("30_595_1300")+j_x("1917_402")),1,"#02c849")}},d_u.prototype.unixPoorTrans=function(e){var p_l,p_g,b_s,d_u=new Date(SyncTime.serverTime),b_e="";return d_u.setTime(1e3*e),d_u.getHours(),(p_l=d_u.getHours()-8)<10&&(p_l="0"+p_l),d_u.getMinutes(),(p_g=d_u.getMinutes())<10&&(p_g="0"+p_g),d_u.getSeconds(),(b_s=d_u.getSeconds())<10&&(b_s="0"+b_s),b_e+=p_l+":",(b_e+=p_g+":")+b_s},d_u.prototype.onBackClick=function(){var e=this.dataSource;this.backButton.visible&&e&&d_m.open(e.id)},d_u.prototype.cdUptade=function(){Ichk(this,Laya)},d_u.prototype.sureToOpen=function(e){Chdn(e)},d_u.prototype.onRender=function(e,p_l){var p_g=this.dataSource,b_s=Config.office_expedTask[p_g.id].reward[p_l][0],d_u=new ModuleItemVO;d_u.id=b_s,d_u.bind=1,d_u.amount=Config.office_expedTask[p_g.id].reward[p_l][1],e.isShowName=!0,e.isShowNum=!0,e.isShowTick=!1,e.bg.alpha=.01,e.selectImg.alpha=.01,e.setItemData(d_u,ItemBoxDefine.MODULE_ITEM,!0)},d_u);function d_u(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.HoleTreasureCellPanel=b_s;var b_e,d_m=(b_e=ui.window.hole.treasureboxtipUI,__extends(d_w,b_e),d_w.prototype.onAdded=function(){Kcqm(this,p_g,Laya)},d_w.prototype.onRemove=function(){Ojxt(this,Laya)},d_w.prototype.onClick=function(e){var p_l=e.target;if(p_l)switch(p_l.name){case"backBtn":d_w.close();break;case"sureBtn":HoleMoudel.instance.reqStopTask(this.dataSource),HoleMoudel.instance.reqTreasyreBoxInfo(),d_w.close()}},d_w.prototype.onRender=function(e,p_l){var p_g=Config.talisman_talisman[e.dataSource].icon,b_s=e.getChildByName("icon"),d_u=Resource.ResUrl.getIconUrl(p_g);this.setIcon(d_u,b_s)},d_w.open=function(e){Sbbv(e,UIM,d_w)},d_w.prototype.setIcon=function(e,p_l){""!=e?(p_l.visible=!0,p_l=Resource.ResManager.Instance.getImg(e,p_l)):p_l.visible=!1},d_w.prototype.updateArray=function(){var e=HoleMoudel.instance.getTreasureBox();if(this.dataSource)for(var p_l=0;p_l<e.length;p_l++)for(var p_g=0;p_g<e[p_l].talismans.length;p_g++)if(e[p_l].id==this.dataSource)return this.list.array=e[p_l].talismans,1==e[p_l].talismans.length&&(this.list.x=133),2==e[p_l].talismans.length&&(this.list.x=94),void(3==e[p_l].talismans.length&&(this.list.x=18))},d_w.close=function(){Wgpf(UIM,d_w)},d_w);function d_w(){var e=b_e.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.treasureboxtipPanel=d_m}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.hole.treasurecelltipUI,__extends(d_u,p_l),d_u.prototype.onAdded=function(){this.conditionlist.repeatX=1,this.conditionlist.renderHandler=p_g.create(this,this.onRender,null,!1),this.on(Laya.Event.CLICK,this,this.onClick);var e=this.dataSource;this.itemBox1.mouseEnabled=!1,this.itemBox2.mouseEnabled=!1,this.itemBox3.mouseEnabled=!1;for(var p_l=1;p_l<=Config.office_expedTask[e.taskid].num;p_l++){var b_s=this["lock"+p_l],d_u=this["itemBox"+p_l];b_s.visible=!1,d_u.mouseEnabled=!0}this.updateTalismanCell(),LED.on(l_r.TALISMAN_IMG_UPDATE,this,this.talismanCellImg),LED.on(l_r.TALISMANS_LIST_UPDATE,this,this.selectTalismans)},d_u.close=function(){Wsey(UIM,d_u)},d_u.prototype.talismanNum=function(){Ohhf(this)},d_u.prototype.onRender=function(e,p_l){if(e){var p_g=e.dataSource;e.getChildByName("nameLab").text=p_g}},d_u.prototype.talismanCellImg=function(e){var p_l=Config.talisman_talisman[e.talismanid];if(this.addBtnvo.visible=!1,this.addBtnvo1.visible=!1,this.addBtnvo2.visible=!1,p_l){var p_g=Resource.ResUrl.getIconUrl(p_l.icon);if(1==e.itemid){if(e.talismanid==this.addBtnvo1.dataSource||e.talismanid==this.addBtnvo2.dataSource)return void b_p.broadcastNotice((j_x("1374_62_1413")+j_x(502)));this.addBtn1.visible=!1,this.setIcon(p_g,this.iconSp1),this.addBtnvo.dataSource=e.talismanid}if(2==e.itemid){if(e.talismanid==this.addBtnvo.dataSource||e.talismanid==this.addBtnvo2.dataSource)return void b_p.broadcastNotice((j_x("1374_62_1413")+j_x(502)));this.addBtn2.visible=!1,this.setIcon(p_g,this.iconSp2),this.addBtnvo1.dataSource=e.talismanid}if(3==e.itemid){if(e.talismanid==this.addBtnvo.dataSource||e.talismanid==this.addBtnvo1.dataSource)return void b_p.broadcastNotice((j_x("1374_62_1413")+j_x(502)));this.addBtn3.visible=!1,this.setIcon(p_g,this.iconSp3),this.addBtnvo2.dataSource=e.talismanid}}},d_u.open=function(e){void 0===e&&(e=null),UIM.open(d_u,["office.atlas"],e,null,null,!0)},d_u.prototype.selectTalismans=function(){var e=HoleMoudel.instance.minNumValue(HoleMoudel.instance._talismanlist1),p_l=this.dataSource;if(this.addBtn1.visible=!0,this.addBtn2.visible=!0,this.addBtn3.visible=!0,this.iconSp1.visible=!1,this.iconSp2.visible=!1,this.iconSp3.visible=!1,this.addBtnvo.dataSource=null,this.addBtnvo1.dataSource=null,this.addBtnvo2.dataSource=null,e&&2==Config.office_expedTask[p_l.taskid].num){var p_g=Config.talisman_talisman[e.ld1],b_s=Config.talisman_talisman[e.id2],d_u=Resource.ResUrl.getIconUrl(p_g.icon);this.iconSp1.visible=!1,this.iconSp2.visible=!1,this.setIcon(d_u,this.iconSp1),this.addBtn1.visible=!1,this.addBtnvo.dataSource=e.ld1;var b_e=Resource.ResUrl.getIconUrl(b_s.icon);return this.setIcon(b_e,this.iconSp2),this.addBtn2.visible=!1,void(this.addBtnvo1.dataSource=e.id2)}var d_m=HoleMoudel.instance._talismanlist,d_w=Config.talisman_talisman[d_m[0]],f_t=Config.talisman_talisman[d_m[1]],v_z=Config.talisman_talisman[d_m[2]];if(this.addBtnvo.visible=!1,this.addBtnvo1.visible=!1,this.addBtnvo2.visible=!1,d_w&&(this.iconSp1.visible=!1,d_u=Resource.ResUrl.getIconUrl(d_w.icon),this.setIcon(d_u,this.iconSp1),this.addBtn1.visible=!1,this.addBtnvo.dataSource=d_m[0]),f_t&&(this.iconSp2.visible=!1,b_e=Resource.ResUrl.getIconUrl(f_t.icon),this.setIcon(b_e,this.iconSp2),this.addBtn2.visible=!1,this.addBtnvo1.dataSource=d_m[1]),v_z){this.iconSp3.visible=!1;var d_h=Resource.ResUrl.getIconUrl(v_z.icon);this.setIcon(d_h,this.iconSp3),this.addBtn3.visible=!1,this.addBtnvo2.dataSource=d_m[2]}d_m.length<=0&&b_p.broadcastNotice((j_x("1971_1896_1587")+j_x("1451_799_869")+""+j_x("1777_1067_189")+j_x("2020_243_1573")+j_x("2194_976")+"!"))},d_u.prototype.onRemove=function(){Auid(this,Laya,LED,l_r)},d_u.prototype.updateTalismanCell=function(){Mdjv(this,Config)},d_u.prototype.onClick=function(p_l){var p_g,b_s=p_l.target,b_e=this.dataSource;this.talismans=[];for(var d_m=0;d_m<3;d_m++){var d_w=0;switch(d_m){case 0:this.addBtnvo.dataSource&&(d_w=this.addBtnvo.dataSource,this.talismans.push(d_w));break;case 1:this.addBtnvo1.dataSource&&(d_w=this.addBtnvo1.dataSource,this.talismans.push(d_w));break;case 2:this.addBtnvo2.dataSource&&(d_w=this.addBtnvo2.dataSource,this.talismans.push(d_w))}}if(b_s)switch(b_s.name){case"closeBtn":d_u.close();break;case"choiceBtn":HoleMoudel.instance.getTalismanList(b_e.taskid,Config.office_expedTask[b_e.taskid].num);break;case"confirmBtn":if(this.addBtnvo.dataSource||this.addBtnvo1.dataSource||this.addBtnvo2.dataSource)for(d_m=0;d_m<this.talismans.length;d_m++)switch(d_w=0,this.talismans.length){case 1:return HoleMoudel.instance.reqStartTask(b_e.taskid,[this.talismans[0]]),this.updateTalismanCell(),void d_u.close();case 2:return HoleMoudel.instance.reqStartTask(b_e.taskid,[this.talismans[0],this.talismans[1]]),this.updateTalismanCell(),void d_u.close();case 3:return HoleMoudel.instance.reqStartTask(b_e.taskid,[this.talismans[0],this.talismans[1],this.talismans[2]]),this.updateTalismanCell(),void d_u.close()}else b_p.broadcastNotice((j_x("1777_320_517")+j_x("1191_799_869")));break;case"addBtn1":(p_g=new x_s).itemid=1,p_g.taskid=b_e.taskid,p_g.talismanid=0,e.TalismanSelectPanel.open(p_g,this.talismans);break;case"addBtn2":(p_g=new x_s).itemid=2,p_g.taskid=b_e.taskid,p_g.talismanid=0,e.TalismanSelectPanel.open(p_g,this.talismans);break;case"addBtn3":(p_g=new x_s).itemid=3,p_g.taskid=b_e.taskid,p_g.talismanid=0,e.TalismanSelectPanel.open(p_g,this.talismans)}},d_u.prototype.setIcon=function(e,p_l){""!=e?(p_l.visible=!0,p_l=Resource.ResManager.Instance.getImg(e,p_l)):p_l.visible=!1},d_u);function d_u(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.HoleTreasureCellTipPanel=b_s}(UI=UI||{});var x_s=function(){};!function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.hole.treasurepotUI,__extends(d_u,p_l),d_u.prototype.init=function(){this._maskProgressBar=new e.MaskProgressBar(this.treaBarImg,this.treaBgImg,null,null,null,0,1),this.on(Laya.Event.ADDED,this,this.onAdded),this.on(Laya.Event.REMOVED,this,this.onRemove)},d_u.prototype.TimeUpdate=function(){if(SyncTime.serverTime,this.heroVo.hasOwnProperty("treasureLastTime")){this.heroVo.treasureLastTime,Config.global[602].i_info;var e=HoleMoudel.instance.getCurValNum();if(e){var p_l=e[0],p_g=Config.office_treasure[this.heroVo.dfofficLv],b_s=p_g.store,d_u=p_g.produce;if(p_l.isFull<=0){var b_e=Math.ceil((b_s-p_l.curVal)/d_u);this.cdLab.text=Utils.$((j_x("589_867")+"{1}"+j_x("2224_1394_1117")+j_x("1012_1067_2128")+""),b_e)}else this.cdLab.text=""}}},d_u.prototype.treasyreCd=function(){Wqtf(HoleMoudel)},d_u.prototype.onRemove=function(){this.off(Laya.Event.CLICK,this,this.onClick),Laya.timer.clearAll(this),this.effect1.stop(),this.effect2.stop(),this.receiveClp.stop(),this.stopUpLvEffect(),LED.off(l_r.JBP_INFO_UPDATE,this,this.onUpdateState),LED.off(l_r.JBP_GETMONEY_UPDATE,this,this.onTreasure),this.ClearEffect(),this.reelEffecte&&this.reelEffecte.clearRes();var e=HoleMoudel.instance.getCurValNum();e&&e[0].curVal<=0&&Laya.timer.once(1e3*Config.global[602].i_info,HoleMoudel.instance,HoleMoudel.instance.reqTreasureInfo)},d_u.prototype.delayUpdate=function(){Gxsj(this,Laya,HoleMoudel)},d_u.prototype.unixPoorTrans=function(e,p_l){void 0===p_l&&(p_l=!0),p_l&&this.MS++;var p_g=this.MS%10,b_s=e-this.MS/10;return Utils.formatTimeStr(b_s)+"."+p_g},d_u.prototype.updateData=function(){HoleMoudel.instance.getFacility();var e=b_p.getDfofficLv(),p_l=Config.office_treasure[e],p_g=(SyncTime.serverTime,HoleMoudel.instance.getCurValNum()[0]),b_s=(this.heroVo.treasureLastTime,Config.global[602].i_info,p_g.curVal/p_l.store);if(this._maskProgressBar.value=b_s,this.lightlmg.visible=!1,.1<=b_s&&b_s<=.9&&(this.lightlmg.visible=!0,this.lightlmg.y=853-this.numpos*b_s*10),this.propDesclab.text=(j_x("36_519_486")+j_x(716)),.5<b_s&&(this.moneyTrunk.index=1)<=b_s&&(this.moneyTrunk.index=2,this.propDesclab.text=(j_x("36_519_1300")+j_x("486_1463")),this.receiveClp.play(),this.receiveClp.visible=!0),this.proportionLab.text=p_g.curVal+"/"+p_l.store,1e4<=p_l.store&&p_g.curVal<=0){var d_u=p_l.store/1e4;this.proportionLab.text="0/"+d_u+(j_x(729))}if(p_g.curVal<=0){this._maskProgressBar.value=0,this.moneyTrunk.index=0;var b_e=p_l.store/1e4;this.proportionLab.text="0/"+b_e+(j_x(729))}if(1e4<=p_g.curVal){var d_m=p_g.curVal/1e4,d_w=p_l.store/1e4;this.proportionLab.text=d_m+(j_x(729)+"/")+d_w+(j_x(729))}this.onTimerCd(),this.TimeUpdate()},d_u.prototype.PlayFullScenseCoin=function(e,p_l,p_g,b_s,d_u,b_e,d_m){if(this.coinEffecteModels){var d_w=function(d_w){var v_z=Math.floor(Math.random()*d_m);Laya.timer.once(d_u*d_w+v_z,t_n,(function(){function d_u(e){var d_u=p_l*d_w+e;if(d_u<v_z.coinEffecteModels.length){var d_h=v_z.coinEffecteModels[d_u];d_h.visible=!0,d_h.changeModel("effects/others");var r_t=Math.floor(Math.random()*b_s+p_g),t_n=Math.floor(Math.random()*d_m);d_h.pos(e*f_t+r_t-30,r_t),d_h.setAction("coinRain",0,!0,300),d_h.IsPlayStand=!1,Laya.Tween.to(d_h,{j_l:Stage.height},b_e+t_n,null,Laya.Handler.create(v_z,(function(){d_h.visible=!1})))}}for(var v_z=this,d_h=0;d_h<e;d_h++)d_u(d_h)}))};this.ModelContainer.visible=!0;var f_t=Stage.width/(e-1);if(Stage.height,this.coinEffecteModels.length<=0)for(var v_z=0;v_z<p_l;v_z++)for(var d_h=0;d_h<e;d_h++){var r_t=new n_k;this.ModelContainer.addChild(r_t),this.coinEffecteModels.push(r_t)}var t_n=this;for(v_z=0;v_z<p_l;v_z++)d_w(v_z);Laya.timer.once(d_u*(.7*p_l)+b_e,this,(function(){this.ModelContainer.visible=!1}))}},d_u.prototype.InitData=function(){HoleMoudel.instance.getFacility();var p_l=b_p.getDfofficLv(),p_g=Config.office_treasure[p_l];this.goldyieldLab.text=p_g.produce.toString(),this.upperlimitLab.text=p_g.store.toString();var b_s=(p_g.critsProfit/100+100*TitleModel.instance.CountTitles(1)).toString()+"%";this.critrateLab.text=(p_g.critsPct/100+100*TitleModel.instance.CountTitles(2)).toString()+"%",this.lvnumLab.text="LV:"+b_p.getDfofficLv().toString(),this.incomeLab.text=b_s,this.clickItem||(this.clickItem=new e.ItemBox,this.Itembox.addChildAt(this.clickItem,0)),p_l<=4?(this.ItemMask.visible=!0,p_l=5):this.ItemMask.visible=!1;var d_u=Config.office_treasure[p_l].showReward,b_e=new ModuleItemVO;b_e.id=d_u[0][0],b_e.bind=1,b_e.amount=d_u[0][1],this.clickItem.setItemData(b_e,ItemBoxDefine.MODULE_ITEM,!0),this.clickItem.setName("")},d_u.prototype.PlayReelEffecte=function(){this.reelEffecte?this.reelEffecte.SetText(this.reelContainer,(j_x("531_1976_223")+j_x("402_1573_2038")+"<span color='#c92828'>")+this.incomeLab.text+"</span>"):(this.reelEffecte=new ReelEffecte,this.reelEffecte.InitEffecteDate(this.reelContainer,"res/ui/office/cifu.png",(j_x("531_1976_223")+j_x("402_1573_2038")+"<span color='#c92828'>")+this.incomeLab.text+"</span>")),Laya.timer.once(800,this,(function(){this.PlayFullScenseCoin(10,6,-100,300,200,800,200)})),this.reelEffecte.PlayEffecte()},d_u.prototype.onAdded=function(){Ilxa(LED,l_r,this,Laya)},d_u.prototype.onTreasure=function(){var e=HoleMoudel.instance.getTreasure();if(e){HoleMoudel.instance.reqTreasureInfo();var p_l=void 0;p_l=UIM.instance.getMainUI().copperTxt;var p_g=new Laya.Point;p_g=p_l.localToGlobal(p_g);var b_s=new Laya.Point;(b_s=this.effect2.localToGlobal(b_s)).x=350,b_s.y=350,r_n.instance.obtainAssetEffect(2,b_s,p_g),1==e[0].isCrit?(this.playUpLvEffect(),this.PlayReelEffecte()):this.playUpLvEffect()}},d_u.prototype.onTimerCd=function(){var e=SyncTime.serverTime/1e3,p_l=this.heroVo.treasureLastTime+Config.global[602].i_info,p_g=HoleMoudel.instance.getCurValNum()[0];(e<p_l||p_g.curVal<=0)&&(this.receiveBtn.disabled=!0),p_l<=e&&0<p_g.curVal?this.receiveBtn.disabled=!1:(this.receiveClp.stop(),this.receiveClp.visible=!1)},d_u.prototype.onUpdateState=function(){Ejfj(this)},d_u.prototype.playUpLvEffect=function(){this.effect3&&(this.effect3.visible=!0,this.effect3.play(!1),this.effect3.on(Laya.Event.COMPLETE,this,this.stopUpLvEffect))},d_u.prototype.onClick=function(p_l){var p_g=p_l.target;switch(p_g.name){case"backBtn":case"closeBtn":d_u.close();break;case"receiveBtn":if(SyncTime.tickCount-this._clickTime<350)return;HoleMoudel.instance.reqTreasure(),this._clickTime=SyncTime.tickCount;break;case"leaveforBtn":e.HolePanel.open(),d_u.close();break;case"TitleProp":e.TitleTips.tpye=3,e.TitleTips.open();break;case"helpBtn":e.treasurepotDesc.open()}this.Itembox.contains(p_g)&&e.treasureTips.open()},d_u.prototype.ClearEffect=function(){if(this.coinEffecteModels){if(0<this.coinEffecteModels.length)for(var e=0,p_l=this.coinEffecteModels;e<p_l.length;e++){var p_g=p_l[e];p_g.dispose(),p_g.clearRes()}this.coinEffecteModels=[]}},d_u.prototype.stopUpLvEffect=function(){this.effect3&&(this.effect3.off(Laya.Event.COMPLETE,this,this.stopUpLvEffect),this.effect3.visible=!1,this.effect3.stop())},Object.defineProperty(d_u.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),d_u.open=function(){Somo(UIM,d_u)},d_u.close=function(){Miek(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e.numpos=20.8,e.requestLast=0,e.coinEffecteModels=[],e.rewardNum=0,e.MS=0,e.init(),e}e.HoleTreasurePanel=b_s;var b_e,d_m=(b_e=ui.window.hole.treasurepotTipUI,__extends(d_w,b_e),d_w.prototype.init=function(){Inqx(this,Laya)},d_w.prototype.onClick=function(e){var p_l=e.target;if(p_l)switch(p_l.name){case"backBtn":case"sureBtn":d_w.close()}},d_w.prototype.onRender=function(e,p_l){var p_g=new ModuleItemVO;p_g.id=e.dataSource.id,p_g.bind=1,p_g.amount=e.dataSource.num,e.isShowName=!1,e.isShowNum=!0,e.setItemData(p_g,ItemBoxDefine.MODULE_ITEM,!0)},d_w.open=function(e){Qtgs(e,UIM,d_w)},d_w.prototype.onRemove=function(){Ghmz(this,Laya)},d_w.prototype.onAdd=function(){this.list.repeatY=1,this.list.itemRender=e.ItemBox,this.list.renderHandler=p_g.create(this,this.onRender,null,!1);var p_l=HoleMoudel.instance.getCurValNum()[0];this.list.array=[],p_l.extraReward&&(this.list.array=p_l.extraReward),this.on(Laya.Event.CLICK,this,this.onClick)},d_w.close=function(){Wnng(UIM,d_w)},d_w);function d_w(){var e=b_e.call(this)||this;return e.init(),e}e.TreasurePotTipPanel=d_m}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.hole.talismancellUI,__extends(b_s,p_l),b_s.prototype.onAdd=function(e){Ambn(e,this,Laya)},b_s.prototype.onClick=function(p_l){var p_g=p_l.target.dataSource,b_s=this.dataSource;if(b_s){e.TalismanSelectPanel.close();var d_u=void 0;(d_u=new x_s).itemid=b_s.itemid,d_u.taskid=b_s.taskid,d_u.talismanid=p_g.id,e.HoleTreasureCellTipPanel.open(d_u),LED.event(l_r.TALISMAN_IMG_UPDATE,d_u)}},b_s.prototype.setItemData=function(e,p_l,p_g,b_s){void 0===b_s&&(b_s=null);var d_u=HoleMoudel.instance.getTreasureBox();TalismanModel.instance.changeActStar(this.starBox,e.grade),this.mouseEnabled=!0,this.showMaskSp(!1);var b_e=Config.talisman_talisman[e.id],d_m=Resource.ResUrl.getIconUrl(b_e.icon);this.setIcon(d_m),this.nameTxt.text=b_e.name,this.lvTxt.text=e.level.toString();var d_w=Config.office_expedTask[p_g.taskid].condition,f_t=b_e.quality-3;if(this.nameTxt.color=Utils.ItemUtils.getTalismanQualityColor(b_e.quality),this.bgQuaClip.index=f_t<0?0:f_t,this.typeClip.index=b_e.proType-1,b_s)for(var v_z in b_s)e.id==b_s[v_z]&&(this.showMaskSp(!0),this.consumeTxt.text=(j_x("1300_517_1191")));for(var v_z in d_w)if("talismanType"==d_w[v_z][0]){if(b_e.type==d_w[v_z][1]){this.showMaskSp(!1);break}this.showMaskSp(!0)}for(var d_h=0;d_h<d_u.length;d_h++)if(d_u[d_h].talismans)for(var r_t=0;r_t<d_u[d_h].talismans.length;r_t++)d_u[d_h].talismans[r_t]==e.id&&(this.showMaskSp(!0),this.consumeTxt.text=(j_x("799_869_1413")+j_x("502_283")));var t_n=this.dataSource;return t_n.taskid=p_g.taskid,t_n.itemid=p_g.itemid,this.dataSource},b_s.prototype.onRemove=function(e){Wmku(e,this,Laya)},b_s.prototype.showMaskSp=function(e){this.mouseEnabled=!e,this.maskSp.visible=e,0==this.maskSp.visible&&(this.consumeTxt.text=""),1==this.maskSp.visible&&(this.consumeTxt.text=(j_x("1320_1283_2462")+j_x(1779)))},b_s.prototype.setIcon=function(e){""!=e?(this.icon.visible=!0,this.icon=Resource.ResManager.Instance.getImg(e,this.icon)):this.icon.visible=!1},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.REMOVED,e,e.onRemove),e.on(Laya.Event.ADDED,e,e.onAdd),e}e.TalismanCellPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.hole.talismanselectUI,__extends(d_u,p_l),d_u.prototype.onAdded=function(){Ozna(TalismanModel,this,Laya,LED,l_r)},d_u.prototype.onRender=function(e,p_l){Eoqg(e,p_l,this)},d_u.prototype.updateData=function(){Ccak(this,TalismanModel)},d_u.open=function(e,p_l){void 0===e&&(e=null),void 0===p_l&&(p_l=null),UIM.open(d_u,["talisman.atlas"],[{vo:e},{talismanx:p_l}],null,null,!0)},d_u.prototype.onRemove=function(){Qzie(LED,l_r,this)},d_u.prototype.onClick=function(e){var p_l=e.target;if(p_l)switch(p_l.name){case"closeBtn":case"backBtn":d_u.close()}},d_u.close=function(){Kdqr(UIM,d_u)},d_u);function d_u(){var b_s=p_l.call(this)||this;return b_s.list.vScrollBarSkin="",b_s.list.repeatY=3,b_s.list.repeatY=30,b_s.list.scrollBar.elasticBackTime=500,b_s.list.scrollBar.elasticDistance=200,b_s.list.itemRender=e.TalismanCellPanel,b_s.list.renderHandler=p_g.create(b_s,b_s.onRender,null,!1),b_s.on(Laya.Event.ADDED,b_s,b_s.onAdded),b_s.on(Laya.Event.REMOVED,b_s,b_s.onRemove),b_s}e.TalismanSelectPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.hole.treasurepotDescUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Ezvs(this,Laya)},b_s.prototype.onRemove=function(){Uigx(this,Laya)},b_s.open=function(){Qxll(UIM,b_s)},b_s.close=function(){Aphf(UIM,b_s)},b_s.prototype.onCloseBtn=function(){Ofcp(b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.scrollPanel.vScrollBarSkin="",e.scrollPanel.vScrollBar.elasticBackTime=200,e.scrollPanel.vScrollBar.elasticDistance=50,e.scrollPanel.vScrollBar.visible=!1,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.treasurepotDesc=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.hole.treasurepotTipUI,__extends(d_u,p_l),d_u.open=function(){Kayx(UIM,d_u)},d_u.prototype.onAdded=function(){Qroe(this,Laya)},d_u.prototype.onRemoved=function(){Iwji(this,Laya)},d_u.prototype.UpdataView=function(){var e=this.getChildByName("box1"),p_l=e.getChildByName("descLab"),p_g=(e.getChildByName("descLab2"),HoleMoudel.instance.getFacility()[0].lv);p_g<=4?(p_l.text=(j_x("2335_1796_983")+j_x("1466_2111_1761")+"Lv.1"+j_x("1896_604_1916")+j_x("531_1976_174")+j_x("1741_2217_1841")+j_x("2235_83")),p_g=5):p_l.text=(j_x("1174_2111_1573")+j_x("2038_1702_1896")+j_x("604_1916_531")+j_x("1976_917_2379")+j_x("2235_83")),this.list.array=[];var b_s=Config.office_treasure[p_g].showReward;b_s.length<=3&&(this.list.x=this.listPos[b_s.length-1]),b_s&&(this.list.array=b_s)},d_u.prototype.onRender=function(e,p_l){var p_g=new ModuleItemVO;p_g.id=e.dataSource[0],p_g.bind=1,p_g.amount=e.dataSource[1],e.isShowName=!1,e.isShowNum=!0,e.setItemData(p_g,ItemBoxDefine.MODULE_ITEM,!0)},d_u.close=function(){Aeer(UIM,d_u)},d_u.prototype.onMouseClick=function(e){switch(e.target.name){case"backBtn":d_u.close()}},d_u);function d_u(){var b_s=p_l.call(this)||this;return b_s.on(Laya.Event.ADDED,b_s,b_s.onAdded),b_s.on(Laya.Event.REMOVED,b_s,b_s.onRemoved),b_s.list.itemRender=e.ItemBox,b_s.list.repeatY=1,b_s.list.vScrollBarSkin="",b_s.list.renderHandler=p_g.create(b_s,b_s.onRender,null,!1),b_s.listPos=[140,50,20],b_s}e.treasureTips=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.hole.holeEntranceUI,__extends(b_s,p_l),b_s.prototype.initImg=function(){for(var e=0;e<this.btnBox.numChildren;++e){var p_l=this.btnBox.getChildAt(e).getChildByName("labImg");p_l?this._defY.push(p_l.y):this._defY.push(0)}},b_s.prototype.updateItemInfo=function(){Smnf(this,BagModel,BagTypeDefine,ItemTypeDefine)},b_s.prototype.onPaint=function(){Kagp(this,j_x)},b_s.prototype.onRemove=function(){LED.off(l_r.ITEM_ADD,this,this.updateItemInfo),LED.off(l_r.ITEM_REMOVE,this,this.updateItemInfo),LED.off(l_r.ITEM_AMOUNT_CHANGE,this,this.updateItemInfo),Config.map[b_p.mapID]&&Config.map[b_p.mapID].showUI&&0<=Config.map[b_p.mapID].showUI.indexOf(1003)&&e.HangIcon.open(),this.off(Laya.Event.CLICK,this,this.onClick),LED.off(l_r.CHECK_BAG_IS_UPDATE,this,this.onRefresh),Laya.timer.clearAll(this)},b_s.prototype.onClick=function(p_l){switch(p_l.target){case this.btnBack:b_s.close();break;case this.btnStar:this.onStar();break;case this.btnPaint:this.onPaint();break;case this.btnBed:this.onBed();break;case this.btnStore:this.onStore();break;case this.btnFurnace:e.ItemFurnacePanel.open();break;case this.btnQin:this.onQin()}},b_s.open=function(){Kdan(UIM,b_s)},b_s.prototype.waveLoop=function(){var e,p_l=(SyncTime.serverTime-this._waveStartTime)%2e3;e=p_l<500?Math.round(15*p_l/500):p_l<1e3?Math.round(15*(1e3-p_l)/500):p_l<1500?-Math.round(15*(p_l-1e3)/500):-Math.round(15*(2e3-p_l)/500);for(var p_g=0;p_g<this.btnBox.numChildren;++p_g){var b_s=this.btnBox.getChildAt(p_g).getChildByName("labImg");if(b_s){var d_u=b_s.getChildByName("rpImg");d_u&&d_u.visible?b_s.y=this._defY[p_g]+e:b_s.y!==this._defY[p_g]&&(b_s.y=this._defY[p_g])}}},b_s.prototype.onAdd=function(){Wvct(this,e,Laya,LED,l_r)},b_s.prototype.updateRp=function(){Mjag(this,BagModel,GameDefine)},b_s.prototype.onBed=function(){Wopd(this,j_x)},b_s.prototype.onStore=function(){Kehx(e)},b_s.prototype.onRefresh=function(){Myzn(this)},b_s.prototype.startWave=function(){Yxqk(this,SyncTime,Laya)},b_s.prototype.onQin=function(){Ilay(this,j_x)},b_s.prototype.onStar=function(){Wiro(this,j_x)},b_s.prototype.showMsg=function(e){Casi(e,b_p)},b_s.close=function(){Undm(UIM,b_s)},b_s.prototype.changeAdapt=function(){GPlatform.needAdapt&&(this.height=GPlatform.stageHeight,this.width=Stage.width,GPlatform.stageHeight>this.listPanel.height&&(this.img_big.y=this.img_big.y/2),Stage.width>GPlatform.designWidth&&(this.btnBox.x+=(Stage.width-750)/2,this.img_big.width=Stage.width),this.listPanel.height=GPlatform.stageHeight,this.listPanel.width=Stage.width,this.listPanel.scaleX=GPlatform.ratioX,this.btnBack.y*=GPlatform.ratioY,this.btnBack.x=this.width-this.btnBack.width-10)},b_s);function b_s(){var e=p_l.call(this)||this;return e._waveStartTime=0,e._defY=[],e.changeAdapt(),e.initImg(),e.on(Laya.Event.ADDED,e,e.onAdd),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.HoleEntrance=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.hole.holefieldUI,__extends(d_u,p_l),d_u.prototype.updateVo=function(){},d_u.prototype.getMineType=function(e,p_l){switch(e){case p_l[MinecdTypeVo.TYPEFIELDA].type:return MinecdTypeVo.TYPEFIELDA;case p_l[MinecdTypeVo.TYPEFIELDB].type:return MinecdTypeVo.TYPEFIELDB;case p_l[MinecdTypeVo.TYPEFIELDC].type:return MinecdTypeVo.TYPEFIELDC;case p_l[MinecdTypeVo.TYPEMDEICINEA].type:return MinecdTypeVo.TYPEFIELDA;case p_l[MinecdTypeVo.TYPEMDEICINEB].type:return MinecdTypeVo.TYPEFIELDB;case p_l[MinecdTypeVo.TYPEMDEICINEC].type:return MinecdTypeVo.TYPEFIELDC}return-1},d_u.prototype.updateCondition=function(e,p_l,p_g){var b_s=Config.office_mine,d_u=1e3*p_g.type+p_g.lv,b_e=1e3*p_g.type+p_g.lv+1;if(p_l.lv===p_g.lv){var d_m,d_w=b_s[d_u].times-p_g.times;d_w=d_w<0?0:d_w,this["batchLab_"+e].color="#00802e",this["batchLab_"+e].text=d_w.toString()+"/"+b_s[d_u].times.toString(),d_m=5<=p_g.lv?p_g.lv.toString()+("("+j_x("1270_914_1117")+j_x(1012))+b_s[d_u].limit+(j_x("2342_371_2342")+")"):p_g.lv.toString()+("("+j_x("1270_914_1117")+j_x(1012))+b_s[b_e].limit+(j_x("2342_371_2342")+")"),this["conLv_"+e].text=d_m}},d_u.prototype.onClick=function(e){},d_u.prototype.onAdd=function(){this.closeBtn.on(Laya.Event.CLICK,this,this.onClick),this.backBtn.on(Laya.Event.CLICK,this,this.onClick),this.keychargeBtn.on(Laya.Event.CLICK,this,this.onClick),HoleMoudel.instance.pbMineDatas(),this.ReceiveBtn_0.on(Laya.Event.CLICK,this,this.onClick),this.ReceiveBtn_1.on(Laya.Event.CLICK,this,this.onClick),this.ReceiveBtn_2.on(Laya.Event.CLICK,this,this.onClick),this.keychargeBtn.disabled=!HoleMoudel.instance.getFieldState(),this.keychargeDesc.visible=this.keychargeBtn.disabled,this.keychargeRed.visible=!this.keychargeDesc.visible,LED.on(l_r.KM_LV_CHANGE,this,this.updateVo),LED.on(l_r.KM_Criti_EFFECTE,this,this.PlayReelEffecte),this.list0.vScrollBarSkin="",this.list0.itemRender=e.ItemBox,this.list0.renderHandler=p_g.create(this,this.onRender,[this.list0],!1),this.list1.vScrollBarSkin="",this.list1.itemRender=e.ItemBox,this.list1.renderHandler=p_g.create(this,this.onRender,[this.list1],!1),this.list2.vScrollBarSkin="",this.list2.itemRender=e.ItemBox,this.list2.renderHandler=p_g.create(this,this.onRender,[this.list2],!1)},d_u.prototype.onRender=function(e,p_l,p_g){if(e==this.list0||e==this.list1||e==this.list2){var b_s=new ModuleItemVO;b_s.id=p_l.dataSource[0],b_s.bind=1,b_s.amount=p_l.dataSource[1],p_l.setItemData(b_s,ItemBoxDefine.MODULE_ITEM,!0)}},d_u.prototype.setTimeTxt=function(e,p_l){var p_g=HoleMoudel.instance.getMineInfo(),b_s=p_g[p_l].cd,d_u=p_g[p_l].times,b_e=b_s-SyncTime.serverTime/1e3;if(0<b_e){var d_m=Config.office_mine,d_w=1e3*p_g[p_l].type+p_g[p_l].lv,f_t=Math.ceil(d_m[d_w].cd/60*(d_u-1));return e.text=Utils.$((j_x("589_867_1111")+j_x(1902)+"{1}"+j_x("2224_1394_1117")+j_x("1012_1067_2128")+"!"),f_t+Math.ceil(parseInt(this.unixPoorTrans(b_e)))),!0}return!(e.text=(j_x("1300_1463_1777")+j_x("1573_2111")+"!"))},d_u.prototype.unixPoorTrans=function(e){var p_l,p_g,b_s,d_u=new Date(SyncTime.serverTime);return d_u.setTime(1e3*e),d_u.getHours(),(p_l=d_u.getHours()-8)<10&&(p_l="0"+p_l),d_u.getMinutes(),(p_g=d_u.getMinutes())<10&&(p_g=p_g),d_u.getSeconds(),(b_s=d_u.getSeconds())<10&&(b_s="0"+b_s),1<=p_l&&(p_g=60*p_l+p_g),""+p_g},d_u.prototype.timertypeset=function(e,p_l){var p_g=HoleMoudel.instance.getMineInfo();if(p_g[e].cd,p_l.visible=!0,0!=p_g[e].lv){if(!this.setTimeTxt(p_l,e))return 0!=p_g[e].times&&(p_l.visible=!1,HoleMoudel.instance.pbMineDatas()),!1;console.log()}else p_l.visible=!1;return!0},d_u.prototype.PlayReelEffecte=function(e){var p_l=HoleMoudel.instance.getMineInfo();if(e.isCrit){var p_g=1;p_l[e.type]&&(p_g=p_l[e.type].lv);var b_s=Config.office_mine[1e3*e.type+p_g];if(!b_s)return;var d_u=b_s.crit&&b_s.crit[1]?b_s.crit[1]:0;this.reelEffecte?this.reelEffecte.SetText(this.reelContainer,(j_x("531_1976_223")+j_x("402_1573_2038")+"<span color='#c92828'>")+d_u+"%</span>"):(this.reelEffecte=new ReelEffecte,this.reelEffecte.InitEffecteDate(this.reelContainer,"res/ui/common/baoji_02.png",(j_x("531_1976_223")+j_x("402_1573_2038")+"<span color='#c92828'>")+d_u+"%</span>")),this.reelEffecte.PlayEffecte()}},d_u.prototype.updateBtnState=function(e,p_l){var p_g=Config.office_mine;this["ReceiveBtn_"+e].visible=!1;var b_s=1e3*p_l.type+p_l.lv;if(0<p_l.lv){this["ReceiveBtn_"+e].visible=!0,this["descLab_"+e].text=p_g[b_s].desc,this["fieldImg_"+e].disabled=!1,this["grayImg_"+e].visible=!1;var d_u=HoleMoudel.instance.getMineSkin(p_l.type)+".jpg";this["fieldImg_"+e].skin="res/ui/"+d_u,p_l.lv==p_g[b_s].lv&&(this["ReceiveBtn_"+e].disabled=p_l.times>=p_g[b_s].times,this["redpoint_"+e].visible=!this["ReceiveBtn_"+e].disabled),this["limit_"+e]&&(this["limit_"+e].visible=!1)}var b_e=0<p_l.lv?p_g[b_s].reward:p_g[b_s+1].reward;this["list"+e].array=b_e},d_u.prototype.onRemove=function(){HoleMoudel.instance.pbMineDatas(),this.closeBtn.off(Laya.Event.CLICK,this,this.onClick),this.backBtn.off(Laya.Event.CLICK,this,this.onClick),this.ReceiveBtn_0.off(Laya.Event.CLICK,this,this.onClick),this.ReceiveBtn_1.off(Laya.Event.CLICK,this,this.onClick),this.ReceiveBtn_2.off(Laya.Event.CLICK,this,this.onClick),LED.off(l_r.KM_LV_CHANGE,this,this.updateVo),LED.off(l_r.KM_Criti_EFFECTE,this,this.PlayReelEffecte),this.reelEffecte&&this.reelEffecte.clearRes()},d_u);function d_u(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdd),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.HoleMineBaseView=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=e.HoleMineBaseView,__extends(b_s,p_l),b_s.prototype.updateVo=function(){Wsbr(this)},b_s.prototype.onUpdateFrame=function(){Ylpw(this,MinecdTypeVo)},b_s.open=function(){Sisw(UIM,b_s)},b_s.prototype.onClick=function(e){var p_l=HoleMoudel.instance.getMineInfo(),p_g=e.target;if(p_g)switch(p_g.name){case"closeBtn":case"backBtn":b_s.close();break;case"ReceiveBtn_0":HoleMoudel.instance.pbmineCollect(p_l[0].type);break;case"ReceiveBtn_1":HoleMoudel.instance.pbmineCollect(p_l[1].type);break;case"ReceiveBtn_2":HoleMoudel.instance.pbmineCollect(p_l[2].type);break;case"keychargeBtn":var d_u=new c2m_office_mine_onekey_collect;d_u.type=MineOnekey.TYPEFIELD,DB.instance.query(c2m_office_mine_onekey_collect,d_u)}},b_s.prototype.updateDate=function(){var e,p_l=HoleMoudel.instance.getFieldInfo(),p_g=HoleMoudel.instance.getMineInfo();for(var b_s in p_l)-1<(e=this.getMineType(p_l[b_s].type,p_g))&&this.updateCondition(e,p_l[b_s],p_g[e]);this.updateBtnState(MinecdTypeVo.TYPEFIELDA,p_g[MinecdTypeVo.TYPEFIELDA]),this.updateBtnState(MinecdTypeVo.TYPEFIELDB,p_g[MinecdTypeVo.TYPEFIELDB]),this.updateBtnState(MinecdTypeVo.TYPEFIELDC,p_g[MinecdTypeVo.TYPEFIELDC]),this.keychargeDesc.visible||(this.keychargeBtn.disabled=this.ReceiveBtn_0.disabled&&this.ReceiveBtn_1.disabled&&this.ReceiveBtn_2.disabled,this.keychargeRed.visible=this.redpoint_0.visible&&this.redpoint_1.visible&&this.redpoint_2.visible)},b_s.close=function(){Gxxg(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;e.keychargeBtn.disabled=!HoleMoudel.instance.getFieldState(),e.keychargeDesc.visible=e.keychargeBtn.disabled,e.keychargeRed.visible=!e.keychargeDesc.visible;var p_g=Config.global[GlobalDefine.mineOneKeyCollectState].t_info;return p_g[2]&&p_g[2],e.keychargeDesc.changeText(HoleMoudel.instance.getFieldDesc()),e.updateVo(),Laya.timer.loop(1e3,e,e.onUpdateFrame),e.tittleImg.skin="res/ui/officeField/lingtian_zi.png",e}e.HoleFieldView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=e.HoleMineBaseView,__extends(b_s,p_l),b_s.prototype.updateVo=function(){Onke(this)},b_s.prototype.onUpdateFrame=function(){Awuy(this,MinecdTypeVo)},b_s.open=function(){Ikeg(UIM,b_s)},b_s.prototype.updateDate=function(){var e,p_l,p_g=HoleMoudel.instance.getMedicineInfo(),b_s=HoleMoudel.instance.getMineInfo();for(var d_u in p_g)e=this.getMineType(p_g[d_u].type,b_s),p_l=b_e(p_g[d_u].type,b_s),-1<e&&this.updateCondition(e,p_g[d_u],b_s[p_l]);function b_e(e,p_l){switch(e){case p_l[MinecdTypeVo.TYPEMDEICINEA].type:return MinecdTypeVo.TYPEMDEICINEA;case p_l[MinecdTypeVo.TYPEMDEICINEB].type:return MinecdTypeVo.TYPEMDEICINEB;case p_l[MinecdTypeVo.TYPEMDEICINEC].type:return MinecdTypeVo.TYPEMDEICINEC}return-1}this.updateBtnState(MinecdTypeVo.TYPEFIELDA,b_s[MinecdTypeVo.TYPEMDEICINEA]),this.updateBtnState(MinecdTypeVo.TYPEFIELDB,b_s[MinecdTypeVo.TYPEMDEICINEB]),this.updateBtnState(MinecdTypeVo.TYPEFIELDC,b_s[MinecdTypeVo.TYPEMDEICINEC]),this.keychargeDesc.visible||(this.keychargeBtn.disabled=this.ReceiveBtn_0.disabled&&this.ReceiveBtn_1.disabled&&this.ReceiveBtn_2.disabled,this.keychargeRed.visible=this.redpoint_0.visible&&this.redpoint_1.visible&&this.redpoint_2.visible)},b_s.prototype.updateBtnState=function(e,p_l){var p_g=Config.office_mine;this["ReceiveBtn_"+e].visible=!1;var b_s=1e3*p_l.type+p_l.lv,d_u=p_g[1e3*p_l.type+1];if(b_p.getDfofficLv()>=d_u.limit){this["ReceiveBtn_"+e].visible=!0,this["descLab_"+e].text=p_g[b_s].desc,this["fieldImg_"+e].disabled=!1,this["grayImg_"+e].visible=!1;var b_e=HoleMoudel.instance.getMineSkin(p_l.type)+".jpg";this["fieldImg_"+e].skin="res/ui/"+b_e,p_l.lv==p_g[b_s].lv&&(this["ReceiveBtn_"+e].disabled=p_l.times>=p_g[b_s].times,this["redpoint_"+e].visible=!this["ReceiveBtn_"+e].disabled)}else this["descLab_"+e].text=p_g[b_s+1].desc,this["fieldImg_"+e].disabled=!0,this["grayImg_"+e].visible=!0,b_e=HoleMoudel.instance.getMineSkin(p_l.type)+".jpg",this["fieldImg_"+e].skin="res/ui/"+b_e,this["ReceiveBtn_"+e].disabled=!0,this["redpoint_"+e].visible=!this["ReceiveBtn_"+e].disabled;var d_m=0<p_l.lv?p_g[b_s].reward:p_g[b_s+1].reward;this["list"+e].array=d_m},b_s.prototype.onClick=function(e){var p_l=HoleMoudel.instance.getMineInfo(),p_g=e.target;if(p_g)switch(p_g.name){case"closeBtn":case"backBtn":b_s.close();break;case"ReceiveBtn_0":HoleMoudel.instance.pbmineCollect(p_l[MinecdTypeVo.TYPEMDEICINEA].type);break;case"ReceiveBtn_1":HoleMoudel.instance.pbmineCollect(p_l[MinecdTypeVo.TYPEMDEICINEB].type);break;case"ReceiveBtn_2":HoleMoudel.instance.pbmineCollect(p_l[MinecdTypeVo.TYPEMDEICINEC].type);break;case"keychargeBtn":var d_u=new c2m_office_mine_onekey_collect;d_u.type=MineOnekey.TYPEMINE,DB.instance.query(c2m_office_mine_onekey_collect,d_u)}},b_s.prototype.updateCondition=function(e,p_l,p_g){var b_s=Config.office_mine,d_u=1e3*p_g.type+p_g.lv,b_e=1e3*p_g.type+p_g.lv+1,d_m=b_s[1e3*p_g.type+1];if(b_p.getDfofficLv()>=d_m.limit){this["limit_"+e].visible=!1,this["lvTitle_"+e].visible=!0;var d_w=b_s[d_u].times-p_g.times;d_w=d_w<0?0:d_w,this["batchLab_"+e].color="#00802e",this["batchLab_"+e].text=d_w.toString()+"/"+b_s[d_u].times.toString();var f_t=b_s[b_e],v_z=(j_x("1300_1117_1012")+j_x("1081_2251_15")+j_x(2342));f_t&&(v_z=p_g.lv.toString()+("("+j_x("1270_914_1117")+j_x(1012))+f_t.limit+(j_x("2342_371_2342")+")")),this["conLv_"+e].text=v_z}else this["batchLab_"+e].color="#4a728e",this["batchLab_"+e].text=(j_x("206_1048_1745")),this["lvTitle_"+e].visible=!1,this["limit_"+e].visible=!0,this["limit_"+e].text=("("+j_x("1270_914_1117")+j_x(1012))+d_m.limit+(j_x("2342_1048_1745")+")")},b_s.close=function(){Gdmz(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this,p_g=Config.global[GlobalDefine.mineOneKeyCollectState].t_info;return p_g[2]&&p_g[2],e.keychargeDesc.changeText(HoleMoudel.instance.getFieldDesc()),e.tittleImg.skin="res/ui/officeField/yaotian_zi.png",e.updateVo(),Laya.timer.loop(1e3,e,e.onUpdateFrame),e}e.MedicineView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.limitActivity.DescribePage_qltbUI,__extends(b_s,p_l),b_s.prototype.onStatue=function(){this.qltb_festival_lab.visible=this.dataSource===ActivityTypeDefine.GS_qltb_festival,this.qltb_lab.visible=!this.qltb_festival_lab.visible,this.bg_img.skin=this.dataSource===ActivityTypeDefine.GS_qltb_festival?"res/ui/limitActivity/di_festival.png":"res/ui/limitActivity/news_di.png"},b_s.open=function(e){Waps(e,UIM,b_s)},b_s.close=function(){Wcwj(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onStatue),e}e.DescribePageQLTB=p_g;var d_u,b_e=(d_u=ui.window.limitActivity.DescribePage_xgmbUI,__extends(d_m,d_u),d_m.prototype.onStatue=function(){this.xgmb_festival_lab.visible=this.dataSource===ActivityTypeDefine.GS_xgmb_festival,this.xgmb_lab.visible=!this.xgmb_festival_lab.visible,this.bg_img.skin=this.dataSource===ActivityTypeDefine.GS_xgmb_festival?"res/ui/limitActivity/di_festival.png":"res/ui/limitActivity/news_di.png"},d_m.open=function(e){Ukec(e,UIM,d_m)},d_m.close=function(){Aman(UIM,d_m)},d_m);function d_m(){var e=d_u.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onStatue),e}e.DescribePageXGMB=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.limitActivity.limitActivityUI,__extends(b_s,p_l),b_s.prototype.init=function(){Kequ(this,Laya)},b_s.prototype.updateView=function(){var e=this.dataSource.subVo[0];this.scoreLab.text=LimitActivityModel.instance.getPoint(e.type).toString(),this.totalScoreLab.text=LimitActivityModel.instance.getTotal(e.type).toString(),this.list.array=LimitActivityModel.instance.getLimitActivityKeys(e.type);var p_l=Config.activity_activity[e.gsa_id].param;this.activityDateLab.text=Utils.formatTimeStr4(e.start,!1)+"-"+Utils.formatTimeStr4(e.stop-p_l.showTime,!1);var p_g=this.rankImg.getChildByName("redpoint");if(0<e.inShowTime){this.maskImg.visible=!0,this.activityend.visible=!0,this.useBtn.disabled=!0,this.usebtn_ten.disabled=!0;var b_s=LimitActivityModel.instance.checkGetRewards(LimitActivityRankType.personal,e)&&0==LimitActivityModel.instance.getRoleRwdTime(e.type),d_u=LimitActivityModel.instance.checkGetRewards(LimitActivityRankType.guild,e)&&0==LimitActivityModel.instance.getGuildRwdTime(e.type);p_g.visible=b_s||d_u}else this.maskImg.visible=!1,this.activityend.visible=!1,this.useBtn.disabled=!1,this.usebtn_ten.disabled=!1,p_g.visible=!1},b_s.prototype.onExchangeBtn=function(){Seur(e,this)},b_s.prototype.onRemove=function(){this.activEffect.stop(),this.helpImg.off(Laya.Event.CLICK,this,this.onHelp),this.rankImg.off(Laya.Event.CLICK,this,this.onRank),this.rankAwardImg.off(Laya.Event.CLICK,this,this.onRankAward),this.closeBtn.off(Laya.Event.CLICK,this,this.onCloseBtn),this.backBtn.off(Laya.Event.CLICK,this,this.onCloseBtn),this.useBtn.off(Laya.Event.CLICK,this,this.onUseBtn),this.shopBtn.off(Laya.Event.CLICK,this,this.onShopBtn),this.usebtn_ten.off(Laya.Event.CLICK,this,this.onUseBtn),this.exchangeBtn.off(Laya.Event.CLICK,this,this.onExchangeBtn),LED.off(l_r.LIMIT_ACTIVITY_INFO,this,this.updateView),LED.off(l_r.ITEM_AMOUNT_CHANGE,this,this.updateView),LED.off(l_r.ITEM_ADD,this,this.updateView),LED.off(l_r.ITEM_REMOVE,this,this.updateView),e.LimitActivityHelpQLTB.close(),e.LimitActivityHelpXGMB.close(),e.LimitActivityRank.close(),e.LimitActivityRankAward.close(),e.LimitActivityShop.close(),e.LimitActivityScoreExchange.close(),this.onEffectClean(),this.kylinModel&&this.kylinModel.clearRes(),Laya.timer.clearAll(this)},b_s.prototype.tweenComplete=function(){Shiv(this,Laya)},b_s.prototype.onCloseBtn=function(){Koul(b_s)},b_s.prototype.onUseBtn=function(e){var p_l=this;if(!(SyncTime.tickCount-this._clickTime<800)){var p_g=this.dataSource.subVo[0];if(null!=this.selectIndex){var b_s=this.list.array[this.selectIndex].id;if(LimitActivityModel.instance.checkUseKey(b_s)){var d_u=BagModel.instance.getItemCount(b_s),b_e=e;d_u<=e&&(b_e=d_u);var d_m=0;p_g&&p_g.type==ActivityTypeDefine.GS_xgmb?(LimitActivityModel.instance.reqUseKey(b_s,b_e),this.playAnimation(p_g.type,b_s),d_m=Config.activity_xgmb_keys[b_s].point):p_g&&p_g.type==ActivityTypeDefine.GS_qltb?(LimitActivityModel.instance.reqUseKey2(b_s,b_e),this.playAnimation(p_g.type,b_s),d_m=Config.activity_qltb_keys[b_s].point):p_g&&p_g.type==ActivityTypeDefine.GS_xgmb_festival?(LimitActivityModel.instance.reqUseXgmbfestivalkey(b_s,b_e),this.playAnimation(p_g.type,b_s),d_m=Config.activity_xgmbFestival_keys[b_s].point):p_g&&p_g.type==ActivityTypeDefine.GS_qltb_festival&&(LimitActivityModel.instance.reqUseKey2_qltb_festival(b_s,b_e),this.playAnimation(p_g.type,b_s),d_m=Config.activity_qltbFestival_keys[b_s].point),b_p.broadcastNotice(Utils.$((j_x("514_2224")+"+{1}"),d_m*b_e),BroadcastType.ITEM_GAIN,"#71de66"),this._clickTime=SyncTime.tickCount}else b_p.confirm((j_x("2217_1841_2462")+j_x(1779)+""+j_x("68_2032_711")+j_x("2417_1355_2420")),(function(){p_l.onShopBtn()}))}else b_p.broadcastNotice((j_x("1777_517_1191")+j_x("2217_1841")))}},b_s.prototype.onEffectClean=function(e){void 0===e&&(e=null),e&&(e.dispose(),e=null);var p_l=Resource.ResManager.Instance.freePanelEffectVo;p_l&&(p_l.dispose(),p_l=null)},b_s.close=function(){Srit(UIM,b_s)},b_s.prototype.onRankAward=function(){var p_l=this.dataSource.subVo[0],p_g=ActivityModel.instance.getActDataByType(p_l.type);RankModel.instance.reqGetRank(p_g.rankType,1),RankModel.instance.reqGetRank(p_g.rankType1,1),e.LimitActivityRankAward.open(this.dataSource)},b_s.prototype.onShopBtn=function(){var p_l=this.dataSource,p_g=p_l.subVo[0];p_g.type==ActivityTypeDefine.GS_xgmb?LimitActivityModel.instance.isClickShopBtn=!1:p_g.type==ActivityTypeDefine.GS_qltb?LimitActivityModel.instance.isClickShopBtn_qltb=!1:p_g.type==ActivityTypeDefine.GS_xgmb_festival?LimitActivityModel.instance.isClickShopBtn_xgmb_festival=!1:LimitActivityModel.instance.isClickShopBtn_qltb_festival=!1,e.LimitActivityShop.open(this.dataSource),this.shop_red.visible=!1,LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,p_l.activityId)},b_s.prototype.fireWorksParty=function(){function e(e){var b_s=p_g.fireworksparty_box.getChildByName(Utils.$("firecracher_spr{1}",e));Laya.timer.once(100*e,p_g,(function(){var e=Resource.ResManager.Instance.freePanelEffectVo;e.playEffect(b_s,"newYear01",0,!1,66,!0,0,p_l.onEffectClean(e))}))}for(var p_l=this,p_g=this,b_s=1;b_s<=4;b_s++)e(b_s);var d_u=Resource.ResManager.Instance.freePanelEffectVo;d_u.playEffect(this.fireworks_spr,"newYear02",0,!1,66,!0,0,this.onEffectClean(d_u))},b_s.prototype.playAnimation=function(e,p_l){if(this.itemlist.alpha=1,e==ActivityTypeDefine.GS_xgmb||e==ActivityTypeDefine.GS_xgmb_festival)this.itemborderbox.visible=!0,this.itemlist.visible=!0,this.baguaborder.visible=!0,this.particlebox.visible=!0,e==ActivityTypeDefine.GS_xgmb?(Config.activity_xgmb_keys[p_l].reward.length,this.itemlist.array=b_p.getRewardDatas(Config.activity_xgmb_keys[p_l].reward)):(this.fireWorksParty(),Config.activity_xgmbFestival_keys[p_l].reward.length,this.itemlist.array=b_p.getRewardDatas(Config.activity_xgmbFestival_keys[p_l].reward)),this.ani1.play(0,!1);else{this.particlebox.visible=!0,e==ActivityTypeDefine.GS_qltb_festival?Config.activity_qltbFestival_keys[p_l].reward.length:Config.activity_qltb_keys[p_l].reward.length,this.activEffectBox.visible=!0,this.activEffect.autoPlay=!1,this.activEffect.play(!1),this.activEffect2.autoPlay=!1,this.activEffect2.play(!1),this.activEffect3.autoPlay=!1,this.activEffect3.play(!1),this.isAniShow=!1,this.tweenItem&&Laya.Tween.clear(this.tweenItem),this.activEffect3.on(Laya.Event.COMPLETE,this,(function(){this.activEffectBox.visible=!1,this.particlebox.visible=!1,this.itemlist.visible=!0,this.isAniShow=!0,Laya.timer.once(1e3,this,(function(){this.isAniShow&&(this.tweenItem=Laya.Tween.to(this.itemlist,{alpha:0},500,null,Laya.Handler.create(this,this.tweenComplete)))}))})),this.itemborderbox.visible=!0,this.baguaborder.visible=!1;var p_g=e==ActivityTypeDefine.GS_qltb_festival?Config.activity_qltbFestival_keys[p_l].reward:Config.activity_qltb_keys[p_l].reward;this.itemlist.array=b_p.getRewardDatas(p_g)}},b_s.prototype.delayUpate=function(){if(this.dataSource){var p_l=this.dataSource.subVo[0];if(p_l){if(ActivityModel.reqActivityRecord(p_l.type),this.minbg.visible=p_l.type==ActivityTypeDefine.GS_xgmb||p_l.type==ActivityTypeDefine.GS_xgmb_festival,this.minbg2.visible=p_l.type==ActivityTypeDefine.GS_qltb||p_l.type==ActivityTypeDefine.GS_qltb_festival,this.minbg2.skin=p_l.type==ActivityTypeDefine.GS_qltb?"res/ui/limitActivity/bg.jpg":"res/ui/limitActivity/bg_nianshou.jpg",this.ntitimg.skin=p_l.type==ActivityTypeDefine.GS_qltb?"res/ui/limitActivity/title2.png":"res/ui/limitActivity/title_nianshou.png",this.minbg.skin=p_l.type==ActivityTypeDefine.GS_xgmb?"res/ui/limitActivity/bg_4.jpg":"res/ui/limitActivity/bg_yanhua.jpg",this.titleImg.skin=p_l.type==ActivityTypeDefine.GS_xgmb?"res/ui/limitActivity/title.png":"res/ui/limitActivity/title_yanhua.png",this.activEffectBox.visible=!1,this.minbg.visible&&(this.bg_bg.visible=p_l.type===ActivityTypeDefine.GS_xgmb,this.fireworksparty_box.visible=p_l.type!==ActivityTypeDefine.GS_xgmb),p_l.type==ActivityTypeDefine.GS_qltb?this.bgsk.visible=!0:p_l.type==ActivityTypeDefine.GS_qltb_festival&&(this.bgsk.visible=!0),p_l.type==ActivityTypeDefine.GS_qltb_festival||p_l.type==ActivityTypeDefine.GS_xgmb_festival){this.fashionitemBox.visible=!0,this.fashiondesCriptLab.visible=!0;var p_g=p_l.type===ActivityTypeDefine.GS_xgmb_festival?Config.global[1701].i_info:Config.global[1702].i_info,d_u=Config.CItem(p_g);d_u.amount=1,this.fashionitemBox.isShowName=!1,this.fashionitemBox.isShowNum=!1,this.fashionitemBox.isShowQuaEft=!0,this.fashionitemBox.setItemData(d_u)}p_l.type==ActivityTypeDefine.GS_xgmb||p_l.type==ActivityTypeDefine.GS_xgmb_festival?(p_l.inShowTime<=0?e.DescribePageXGMB.open(p_l.type):p_l.type==ActivityTypeDefine.GS_xgmb?LimitActivityModel.instance.isClickShopBtn=!1:LimitActivityModel.instance.isClickShopBtn_xgmb_festival=!1,this.shop_red.visible=p_l.type==ActivityTypeDefine.GS_xgmb?LimitActivityModel.instance.isClickShopBtn:LimitActivityModel.instance.isClickShopBtn_xgmb_festival):(p_l.inShowTime<=0?e.DescribePageQLTB.open(p_l.type):p_l.type==ActivityTypeDefine.GS_qltb?LimitActivityModel.instance.isClickShopBtn_qltb=!1:LimitActivityModel.instance.isClickShopBtn_qltb_festival=!1,this.shop_red.visible=p_l.type==ActivityTypeDefine.GS_qltb?LimitActivityModel.instance.isClickShopBtn_qltb:LimitActivityModel.instance.isClickShopBtn_qltb_festival)}else b_s.close(),b_p.broadcastNotice((j_x("1499_1122_671")+j_x("1796_1878_2348")+j_x(2083)));Laya.timer.callLater(this,this.updateView)}else b_s.close()},b_s.prototype.onList=function(p_l,p_g){if(p_l.type==Laya.Event.CLICK){null!=this.selectIndex&&(this.list.getCell(this.selectIndex).item.selectImg.visible=!1);var b_s=this.list.getCell(p_g);this.selectIndex=p_g,b_s.item.selectImg.visible=!0,++this.clickNum,2==this.clickNum&&(e.ItemTipsPanel.open(b_s.dataSource),this.clickNum=0)}},b_s.prototype.onItemRender=function(e,p_l){e&&(e.alwaysShowNum=e.isShowName=!1,e.isShowQuaEft=!1,e.setItemData(e.dataSource))},b_s.prototype.onRank=function(){var p_l=this.dataSource.subVo[0],p_g=ActivityModel.instance.getActDataByType(p_l.type);RankModel.instance.reqGetRank(p_g.rankType,1),RankModel.instance.reqGetRank(p_g.rankType1,1),e.LimitActivityRank.open(this.dataSource,0)},b_s.prototype.initView=function(){Caxw(this,ui,Laya)},b_s.prototype.onHelp=function(){var p_l=this.dataSource.subVo[0];p_l&&(p_l.type==ActivityTypeDefine.GS_xgmb||p_l.type==ActivityTypeDefine.GS_xgmb_festival?e.LimitActivityHelpXGMB.open(p_l.type):p_l.type!=ActivityTypeDefine.GS_qltb&&p_l.type!=ActivityTypeDefine.GS_qltb_festival||e.LimitActivityHelpQLTB.open(p_l.type))},b_s.open=function(e){(e=(e=e||ActivityModel.instance.getActivityConfigVo(FuncDefine.xgmb))||ActivityModel.instance.getActivityConfigVo(FuncDefine.qltb))?UIM.open(b_s,["limitActivity.atlas"],e,!1):b_p.broadcastNotice((j_x("1796_1878_206")+j_x("155_1186")))},b_s.prototype.onAdded=function(){var e=this.dataSource;if(!e||!e.subVo||!e.subVo[0])return b_s.close(),void b_p.broadcastNotice((j_x("1499_1122_671")+j_x("1796_1878_2348")+j_x(2083)));this.shop_red.visible=!1,this.fashionitemBox.visible=!1,this.fashiondesCriptLab.visible=!1,this.helpImg.on(Laya.Event.CLICK,this,this.onHelp),this.rankImg.on(Laya.Event.CLICK,this,this.onRank),this.rankAwardImg.on(Laya.Event.CLICK,this,this.onRankAward),this.closeBtn.on(Laya.Event.CLICK,this,this.onCloseBtn),this.backBtn.on(Laya.Event.CLICK,this,this.onCloseBtn),this.useBtn.on(Laya.Event.CLICK,this,this.onUseBtn,[1]),this.shopBtn.on(Laya.Event.CLICK,this,this.onShopBtn),this.usebtn_ten.on(Laya.Event.CLICK,this,this.onUseBtn,[10]),this.exchangeBtn.on(Laya.Event.CLICK,this,this.onExchangeBtn),LED.on(l_r.LIMIT_ACTIVITY_INFO,this,this.updateView),LED.on(l_r.ITEM_AMOUNT_CHANGE,this,this.updateView),LED.on(l_r.ITEM_ADD,this,this.updateView),LED.on(l_r.ITEM_REMOVE,this,this.updateView),Laya.timer.once(200,this,this.delayUpate)},b_s.prototype.onRenderHandler=function(e,p_l){e&&(e.item.alwaysShowNum=!0,e.item.setItemData(e.dataSource,ItemBoxDefine.MODULE_ITEM),e.item.setGray(e.dataSource.amount<=0),e.item.mouseEnabled=!1,e.item.nameTxt.visible=!1,e.item.numTxt.visible=!0,e.nameTxt.text=e.item.nameTxt.text,e.nameTxt.visible=!0)},b_s.isClickShopBtn=!1,b_s);function b_s(){var e=p_l.call(this)||this;return e.clickNum=0,e.tweenItem=null,e.isAniShow=!1,e._clickTime=0,e.init(),e}e.LimitActivity=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.limitActivity.limitActivityGuildRankAwarditemUI,__extends(b_s,p_l),b_s.prototype.initialize=function(){Ofkl(p_l,this)},Object.defineProperty(b_s.prototype,"dataSource",{set:function(e){null!=e&&this.update(e)},enumerable:!0,configurable:!0}),b_s.prototype.update=function(e){var p_l=e.beginIdx==e.endIdx?e.beginIdx.toString():e.beginIdx+"-"+e.endIdx;this.indexLab.text=(j_x(573))+p_l+(j_x(1511)),this.guildLeaderAwards.update(e,LimitActivityRankAwardOwnerType.guildLeader),this.guildMenberAwards.update(e,LimitActivityRankAwardOwnerType.guildMember),this.line.y=this.guildLeaderAwards.y+this.guildLeaderAwards.height+15,this.guildMenberAwards.y=this.line.y+15,this.height=this.bg.height=this.guildMenberAwards.y+this.guildMenberAwards.height+30},b_s);function b_s(){return p_l.call(this)||this}e.LimitActivityGuildAwardItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.limitActivity.limitActivityPersonRankAwardItemUI,__extends(b_s,p_l),b_s.prototype.initialize=function(){Ymrd(p_l,this,e)},Object.defineProperty(b_s.prototype,"dataSource",{set:function(e){null!=e&&this.update(e)},enumerable:!0,configurable:!0}),b_s.prototype.update=function(e){var p_l=e.beginIdx==e.endIdx?e.beginIdx.toString():e.beginIdx+"-"+e.endIdx;this.indexLab.text=(j_x(573))+p_l+(j_x(1511));for(var p_g=b_p.getRewardDatas(e.reward);p_g&&p_g.length<4;)p_g.push(new ModuleItemVO);this.list.array=p_g,4<this.list.array.length?this.height=this.bg.height=300:this.height=this.bg.height=190},b_s);function b_s(){return p_l.call(this)||this}e.LimitActivityPersonalRankAwardItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.limitActivity.limitActivityRankUI,__extends(b_s,p_l),b_s.prototype.init=function(){Umbq(this,Laya)},b_s.prototype.onAdded=function(){Evgm(this,Laya,LED,l_r)},b_s.prototype.onItemRender=function(e,p_l){e&&e.update(e.dataSource,this.menuTap.selectedIndex)},b_s.prototype.onRemove=function(){Icsc(this,Laya,LED,l_r)},b_s.prototype.updateView=function(){var e,p_l,p_g=this.menuTap.selectedIndex;p_g==LimitActivityRankType.personal&&(e=this.subVo.type===ActivityTypeDefine.GS_xgmb?RankType.LimitActivityPersonal:this.subVo.type===ActivityTypeDefine.GS_xgmb_festival?RankType.LimitActivityPersonal_xgmb_festival:this.subVo.type===ActivityTypeDefine.GS_qltb?RankType.LimitActivityPersonal2:RankType.LimitActivityPersonal_qltb_festival,p_l=RankModel.instance.getRankDataByType(e),this.personList.array=p_l?p_l.getItems():[],this.minBg.height=603,this.owerBox.y=870,this.tipBox.visible=!1,this.personList.visible=!0,this.guildList.visible=!1,this.title_name.text=(j_x("855_386")),this.noRankData.visible=0==this.personList.length),p_g==LimitActivityRankType.guild&&(e=this.subVo.type===ActivityTypeDefine.GS_xgmb?RankType.LimitActivityGuild:this.subVo.type===ActivityTypeDefine.GS_xgmb_festival?RankType.LimitActivityGuild_xgmb_festival:this.subVo.type===ActivityTypeDefine.GS_qltb?RankType.LimitActivityGuild2:RankType.LimitActivityGuild_qltb_festival,p_l=RankModel.instance.getRankDataByType(e),this.guildList.array=p_l?p_l.getItems():[],this.minBg.height=545,this.owerBox.y=810,this.tipBox.visible=!0,this.personList.visible=!1,this.guildList.visible=!0,this.title_name.text=(j_x("796_1413")),this.noRankData.visible=0==this.guildList.length);var b_s=LgcM.ins.heroVo;this.nameLab.text=b_s.name;var d_u=p_l?p_l.getOwnIndex():0;this.indexLab.text=0==d_u?(j_x("206_1067_1077")):d_u.toString(),this.powerLab.text=p_l?p_l.getOwnValue().toString():"0";var b_e=this.getBtn.getChildByName("redpoint"),d_m=LimitActivityModel.instance.checkGetRewards(p_g,this.subVo)&&0==LimitActivityModel.instance.getRwdTime(p_g,this.subVo.type);this.personalredpoint.visible=0<this.subVo.inShowTime&&LimitActivityModel.instance.checkGetRewards(0,this.subVo)&&0==LimitActivityModel.instance.getRwdTime(0,this.subVo.type),this.guildredpoint.visible=0<this.subVo.inShowTime&&LimitActivityModel.instance.checkGetRewards(1,this.subVo)&&0==LimitActivityModel.instance.getRwdTime(1,this.subVo.type),0<LimitActivityModel.instance.getRwdTime(p_g,this.subVo.type)?(this.getBtn.disabled=!0,this.getBtn.label=(j_x("1300_1174_2111"))):(this.getBtn.disabled=!1,this.getBtn.label=(j_x("1174_2111_2235")+j_x(83))),b_e.visible=0<this.subVo.inShowTime&&d_m},b_s.prototype.initView=function(){this.nameLab.text="",this.indexLab.text="",this.powerLab.text="",this.menuTap.selectedIndex=0,this.tipBox.visible=!1,this.menuTap.selectHandler=new laya.utils.Handler(this,this.onSelectMenuTap),this.personList.array=[],this.personList.itemRender=e.LimitActivityRankItem,this.personList.repeatX=1,this.personList.repeatY=10,this.personList.spaceY=0,this.personList.vScrollBarSkin="",this.personList.scrollBar.elasticBackTime=100,this.personList.scrollBar.elasticDistance=200,this.personList.renderHandler=Laya.Handler.create(this,this.onItemRender,null,!1),this.guildList.array=[],this.guildList.itemRender=e.LimitActivityRankItem,this.guildList.repeatX=1,this.guildList.repeatY=10,this.guildList.spaceY=0,this.guildList.vScrollBarSkin="",this.guildList.scrollBar.elasticBackTime=100,this.guildList.scrollBar.elasticDistance=200,this.guildList.renderHandler=Laya.Handler.create(this,this.onItemRender,null,!1)},b_s.prototype.onRefresh=function(){var e=this.menuTap.selectedIndex;this.getBtn.getChildByName("redpoint").visible=!1,this.getBtn.disabled=!0,this.getBtn.label=(j_x("1300_1174_2111")),0==e?this.personalredpoint.visible=!1:this.guildredpoint.visible=!1},Object.defineProperty(b_s.prototype,"subVo",{get:function(){return this.dataSource[0].subVo[0]},enumerable:!0,configurable:!0}),b_s.open=function(e,p_l){Agnd(e,p_l,UIM,b_s)},b_s.prototype.onGetBtn=function(){if(0!=this.subVo.inShowTime){var e=this.menuTap.selectedIndex;if(LimitActivityModel.instance.checkGetRewards(e,this.subVo)&&0==LimitActivityModel.instance.getRwdTime(e,this.subVo.type)){var p_l=void 0;this.subVo.type===ActivityTypeDefine.GS_xgmb?(p_l=e==LimitActivityRankType.personal?LimitActivityRankType.personal+1:LimitActivityRankType.guild+1,LimitActivityModel.instance.reRankReward(Number(p_l))):this.subVo.type===ActivityTypeDefine.GS_qltb?(p_l=e==LimitActivityRankType.personal?LimitActivityRankType.personal+1:LimitActivityRankType.guild+1,LimitActivityModel.instance.reRankReward2(Number(p_l))):this.subVo.type===ActivityTypeDefine.GS_xgmb_festival?(p_l=e==LimitActivityRankType.personal?LimitActivityRankType.personal+1:LimitActivityRankType.guild+1,LimitActivityModel.instance.reRankReward_xgmb_festival(Number(p_l))):this.subVo.type===ActivityTypeDefine.GS_qltb_festival&&(p_l=e==LimitActivityRankType.personal?LimitActivityRankType.personal+1:LimitActivityRankType.guild+1,LimitActivityModel.instance.reRankReward2_qltb_festival(Number(p_l)))}else b_p.broadcastNotice((j_x("1971_1896_1163")+j_x("1174_2111_2046")+j_x("2235_83")))}else b_p.broadcastNotice((j_x("206_1012_1174")+j_x("2235_1702_2460")))},b_s.close=function(){Isuz(UIM,b_s)},b_s.prototype.onCloseBtn=function(){Auch(b_s)},b_s.prototype.onSelectMenuTap=function(e){-1!=e&&this.updateView()},b_s);function b_s(){var e=p_l.call(this)||this;return e.isGet_person=!1,e.isGet_guild=!1,e.init(),e}e.LimitActivityRank=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.limitActivity.limitActivityRankAwardUI,__extends(b_s,p_l),b_s.prototype.init=function(){Mmzy(this,Laya)},b_s.prototype.initView=function(){this.myIndexLab.text="",this.countDownLab.text="",this.menuTap.selectedIndex=-1,this.menuTap.selectHandler=new laya.utils.Handler(this,this.onSelectMenuTap),this.personList.array=[],this.personList.itemRender=e.LimitActivityPersonalRankAwardItem,this.personList.repeatY=2,this.personList.vScrollBarSkin="",this.personList.scrollBar.elasticBackTime=100,this.personList.scrollBar.elasticDistance=200,this.personList.mouseHandler=new laya.utils.Handler(this,this.onPersonalList),this.personList.visible=!1,this.guildList.array=[],this.guildList.itemRender=e.LimitActivityGuildAwardItem,this.guildList.repeatY=2,this.guildList.vScrollBarSkin="",this.guildList.scrollBar.elasticBackTime=100,this.guildList.scrollBar.elasticDistance=200,this.guildList.mouseHandler=new laya.utils.Handler(this,this.onGuildList),this.guildList.visible=!1,this.panel.vScrollBarSkin="",this.panel.vScrollBar.visible=!1,this.panel.vScrollBar.elasticBackTime=100,this.panel.vScrollBar.elasticDistance=200},Object.defineProperty(b_s.prototype,"subVo",{get:function(){return this.dataSource.subVo[0]},enumerable:!0,configurable:!0}),b_s.prototype.updateView=function(){var p_l,p_g,b_s;this.subVo&&(0==this.subVo.stop?this.countDownLab.text=(j_x("1796_1878_1063")+j_x("1518_1896_407")):this.starCountDown());var d_u=this.subVo.type;switch(this.menuTap.selectedIndex){case 0:this.personRankBtn.label=(j_x("844_455_1077")+j_x(2263)),b_s=ActivityModel.instance.getRankTypeByActType(d_u);break;case 1:this.personRankBtn.label=(j_x("796_1413_1077")+j_x(2263)),b_s=ActivityModel.instance.getActDataByType(d_u).rankType1}p_g=(p_l=RankModel.instance.getRankDataByType(b_s))?p_l.getOwnIndex():0,this.myIndexLab.text=0<p_g&&p_g<100?p_g.toString():"1000+";var b_e=LimitActivityModel.instance.getLimitActivityRankRewards(b_s,d_u);this.removeAllItem();for(var d_m,d_w=0,f_t=0;f_t<b_e.length;++f_t){d_m=0==this.menuTap.selectedIndex?"LimitActivityPersonalRankAwardItem":"LimitActivityGuildAwardItem";var v_z=0==this.menuTap.selectedIndex?Laya.Pool.getItemByClass(d_m,e.LimitActivityPersonalRankAwardItem):Laya.Pool.getItemByClass(d_m,e.LimitActivityGuildAwardItem);v_z.name=d_m,v_z.dataSource=b_e[f_t],v_z.y=d_w,d_w+=v_z.height,this.panel.addChild(v_z)}this.panel.vScrollBar.max=d_w,this.panel.vScrollBar.value=0},b_s.prototype.onGuildRenderHandler=function(e,p_l){if(e){var p_g=0;if(0!=p_l){var b_s=this.guildList.getCell(p_l-1);null!=b_s&&(p_g=null!=b_s?b_s.y+b_s.height:0,e.y=p_g)}e.update(this.guildList.array[p_l])}},b_s.prototype.starCountDown=function(){Cxzd(Laya,this)},b_s.close=function(){Amlp(UIM,b_s)},b_s.prototype.removeAllItem=function(){var e;for(this.panel.numChildren,e=0;e<this.panel.numChildren;e++){var p_l=this.panel.getChildAt(e);Laya.Pool.recover(p_l.name,p_l),this.panel.removeChild(p_l),e=-1}},b_s.prototype.onPersonalRankBtn=function(){Ggbo(e,this)},b_s.prototype.onPersonalList=function(e,p_l){},b_s.prototype.onAdded=function(){Enfs(this,Laya,LED,l_r)},b_s.prototype.onRemove=function(){Sqtk(this,Laya,LED,l_r)},b_s.prototype.onGuildList=function(e,p_l){},b_s.prototype.onCloseBtn=function(){Mnxb(b_s)},b_s.prototype.updateCountDown=function(){var e=this.subVo.stop-SyncTime.serverTime/1e3;0<e?this.countDownLab.text=Utils.formatTimeStr(e):(this.countDownLab.text=(j_x("1796_1878_1300")+j_x("396_2426")),Laya.timer.clear(this,this.updateCountDown))},b_s.open=function(e){Wbkz(e,UIM,b_s)},b_s.prototype.onSelectMenuTap=function(e){-1!=e&&this.updateView()},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.LimitActivityRankAward=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.limitActivity.LimitActivityRankAwardItemUI,__extends(b_s,p_l),b_s.prototype.init=function(){Ygni(this,e)},b_s.prototype.update=function(e,p_l){if(p_l==LimitActivityRankAwardOwnerType.guildMember){this.nameLab.text=(j_x("402_2141_531")+j_x(1976));for(var p_g=b_p.getRewardDatas(e.reward);p_g.length<4;)p_g.push(new ModuleItemVO);this.list.array=p_g}if(p_l==LimitActivityRankAwardOwnerType.guildLeader){for(this.nameLab.text=(j_x("627_796_531")+j_x(1976)),p_g=b_p.getRewardDatas(e.leaderReward);p_g.length<4;)p_g.push(new ModuleItemVO);this.list.array=p_g}this.box.y=0,4<this.list.array.length?this.height=this.box.height+220:this.height=this.box.height+110},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.LimitActivityRankAwardItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.limitActivity.limitActivityRankItemUI,__extends(b_s,p_l),b_s.prototype.initialize=function(){Ogpi(p_l,this)},b_s.prototype.update=function(e,p_l){var p_g=e.getRankIndex();p_g<=3?this.indexClip.index=p_g-1:this.indexLab.text=p_g.toString(),this.indexClip.visible=p_g<=3,this.indexLab.visible=3<p_g,this.nameLab.text=p_l==LimitActivityRankType.personal?e.getPlayName():e.getGuildName(),this.powerLab.text=e.getValue().toString()},b_s);function b_s(){return p_l.call(this)||this}e.LimitActivityRankItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.limitActivity.limitActivityScoreExchangeUI,__extends(b_s,p_l),b_s.prototype.init=function(){Opuh(this,Laya)},b_s.prototype.initView=function(){Iqdc(this,e,Laya)},b_s.prototype.onItemRender=function(e,p_l){Koxy(e,p_l,this)},Object.defineProperty(b_s.prototype,"subVo",{get:function(){return this.dataSource.subVo[0]},enumerable:!0,configurable:!0}),b_s.prototype.updateView=function(){Mdlx(this,LimitActivityModel)},b_s.prototype.createTween=function(e){e.visible=!0,e.y=783,laya.utils.Tween.to(e,{j_l:793},500,Laya.Ease.linearIn,Laya.Handler.create(this,this.createTweens,[e]))},b_s.prototype.onList=function(e,p_l){Wqmt(e,p_l,Laya)},b_s.prototype.onAdded=function(){Qike(LED,l_r,this,Laya)},b_s.prototype.onClick=function(e){var p_l=e.target;switch(p_l.name){case"exchangeBtn":var p_g=p_l.dataSource,b_s=1*p_g.point;if(LimitActivityModel.instance.getPoint(this.subVo.type)<b_s)b_p.broadcastNotice((j_x("514_2224_2462")+j_x(1779)));else{var d_u=LimitActivityModel.instance.getExchangeNum(this.subVo.type,p_g.itemId);p_g.limit-d_u<=0&&b_p.broadcastNotice((j_x("1763_1713_1300")+j_x("1117_1067_2128"))),this.subVo.type===ActivityTypeDefine.GS_xgmb?LimitActivityModel.instance.reqExchange(p_g.id,1):this.subVo.type===ActivityTypeDefine.GS_qltb?LimitActivityModel.instance.reqExchange2(p_g.id,1):this.subVo.type===ActivityTypeDefine.GS_xgmb_festival?LimitActivityModel.instance.reqExchange_xgmb_festival(p_g.id,1):this.subVo.type===ActivityTypeDefine.GS_qltb_festival&&LimitActivityModel.instance.reqExchange2_qltb_festival(p_g.id,1)}}},b_s.prototype.createTweens=function(e){e.y=793,laya.utils.Tween.to(e,{j_l:783},500,Laya.Ease.linearIn,Laya.Handler.create(this,this.createTween,[e]))},b_s.prototype.tweenStop=function(e){Kkvi(e,laya)},b_s.open=function(e){Mgvz(e,UIM,b_s)},b_s.prototype.onRemove=function(){Whed(LED,l_r,this,Laya)},b_s.prototype.arrowMove=function(){this.arrowsImg.visible=!1,9<this.list.length&&this.createTween(this.arrowsImg)},b_s.close=function(){Ureq(UIM,b_s)},b_s.prototype.onCloseBtn=function(){Aphr(b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.LimitActivityScoreExchange=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.limitActivity.limitActivityScoreExchangeItemUI,__extends(b_s,p_l),b_s.prototype.initialize=function(){Mnyo(p_l,this)},b_s.prototype.update=function(e,p_l){var p_g=Config.CItem(e.itemId);if(p_g){this.nameLab.text=p_g.name;var b_s=LimitActivityModel.instance.getExchangeNum(p_l,e.itemId);this.exchangeNumLab.text=(e.limit-b_s).toString();var d_u=new ModuleItemVO;d_u.id=e.itemId,d_u.amount=0,this.item.setItemData(d_u,ItemBoxDefine.MODULE_ITEM),this.item.nameTxt.visible=!1,this.exchangeBtn.label=e.point+(j_x("514_2224")),this.exchangeBtn.dataSource=e}else b_p.broadcastNotice((j_x("1038_2462_1012")+j_x("2217_1841")+"ID:")+e.itemId)},b_s);function b_s(){return p_l.call(this)||this}e.LimitActivityScoreExchangeItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.limitActivity.limitActivityShopUI,__extends(b_s,p_l),b_s.prototype.init=function(){Amio(this,Laya)},Object.defineProperty(b_s.prototype,"subVo",{get:function(){return this.dataSource.subVo[0]},enumerable:!0,configurable:!0}),b_s.prototype.initView=function(){Adlp(this,e,Laya)},b_s.close=function(){Mduy(UIM,b_s)},b_s.open=function(e){Ojls(e,UIM,b_s)},b_s.prototype.updateView=function(){Oiqe(this,LimitActivityModel)},b_s.prototype.onAddCopperBtn=function(){Enrt(r_f)},b_s.prototype.onAdded=function(){Erte(LED,l_r,this,Laya)},b_s.prototype.updateMoney=function(){this.copperLab.text=b_p.getCoin(CoinDefine.COPPER)?this.copperLab.text=b_p.getCoin(CoinDefine.COPPER).toString():"0",this.goldLab.text=b_p.getCoin(CoinDefine.GOLD)?this.goldLab.text=b_p.getCoin(CoinDefine.GOLD).toString():"0"},b_s.prototype.onCloseBtn=function(){Ihsn(b_s)},b_s.prototype.onItemRender=function(e,p_l){Cwgg(e,p_l,this)},b_s.prototype.onRemove=function(){Wtvi(LED,l_r,this,Laya)},b_s.prototype.onAddGoldBtn=function(){Mran(e)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.LimitActivityShop=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.limitActivity.limitActivityShopItemUI,__extends(b_s,p_l),b_s.prototype.initialize=function(){Svbn(p_l,this,j_x,Laya)},b_s.prototype.update=function(e,p_l){this.value=e,this.nameLab.text=Config.item_material[e.id].name;var p_g,b_s=ShopModel.instance.getShopConfigByItemId(this.value.id),d_u=0;if(null!=b_s){var b_e=LimitActivityModel.instance.getExchangeNum(p_l,e.id);p_g=ShopModel.instance.getShopItemVo(b_s.id);var d_m=LgcM.ins.heroVo.vipLv||0,d_w=0<d_m&&b_s.vipDayBuy?b_s.vipDayBuy[d_m-1]:0;d_w=null==d_w?b_s.vipDayBuy[b_s.vipDayBuy.length-1]:d_w;var f_t=b_s.dayNum||0;d_u=null!=p_g?f_t-p_g.dayNum+b_e+d_w:f_t+b_e+d_w,this.limitLab.visible=0<f_t}if(this.limitLab.text=("("+j_x("2128_1355")+":")+d_u+")",this.nameHbox.refresh(),e.price){var v_z=b_s.price[0][0],d_h=b_s.price[0][1];v_z==ItemType.gold&&(this.moneyImg.skin="res/ui/common/yuanbao.png"),v_z==ItemType.money&&(this.moneyImg.skin="res/ui/common/tongqian.png"),this.priceLab.text=d_h.toString(),this.box.y=45,this.buyBtn.label=(j_x("1355_2420"))}else this.box.y=28,this.buyBtn.label=(j_x("711_2417_531")+j_x(1976));this.moneyImg.visible=null!=e.price,this.priceLab.visible=null!=e.price,this.priceHbox.refresh(),this.scoreLab.text=e.point.toString(),this.decLab.text=e.text;var r_t=new ModuleItemVO;r_t.id=e.id,r_t.amount=0,this.item.setItemData(r_t,ItemBoxDefine.MODULE_ITEM),this.item.nameTxt.visible=!1},b_s.prototype.onBuyBtn=function(){if(this.value.price){var p_l=ShopModel.instance.getShopConfigByItemId(this.value.id);if(!p_l)return void b_p.broadcastNotice((j_x("1499_1122_1820")+j_x("415_1451_745")));var p_g=p_l.id;ShopModel.instance.reqShopbuyList(p_g,1)}else if(this.value.link){var b_s=this.value.link;if("openWin"==b_s[0]){if(2<b_s.length){for(var d_u=[],b_e=2;b_e<b_s.length;++b_e)d_u.push(b_s[b_e]);e.WindowClass.openWin(parseInt(b_s[1]),d_u)}else e.WindowClass.openWin(parseInt(b_s[1]));e.LimitActivityShop.close()}else if("openAct"==b_s[0]){var d_m=Config.activity_activity[parseInt(b_s[1])];if(!d_m)return;var d_w=ActivityModel.instance.getActivityConfigVoByType(d_m.type);if(!d_w)return;var f_t=Config.funcOpen[d_m.iconInfo];if(!f_t)return;var v_z=f_t.openWin;if(!v_z)return;e.WindowClass.openWin(v_z,[d_w])}}},b_s);function b_s(){return p_l.call(this)||this}e.LimitActivityShopItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.limitActivity.LimitActivityHelp_xgmbUI,__extends(b_s,p_l),b_s.prototype.init=function(){Wzuf(this,Laya)},b_s.prototype.onRemove=function(){Mtmc(this,Laya)},b_s.open=function(e){Ygsl(e,UIM,b_s)},b_s.close=function(){Qreu(UIM,b_s)},b_s.prototype.onAdded=function(){Ujxq(this,Laya,ActivityTypeDefine)},b_s.prototype.onCloseBtn=function(){Wywo(b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.LimitActivityHelpXGMB=p_g;var d_u,b_e=(d_u=ui.window.limitActivity.LimitActivityHelp_qltbUI,__extends(d_m,d_u),d_m.prototype.init=function(){Utau(this,Laya)},d_m.open=function(e){Uihq(e,UIM,d_m)},d_m.prototype.onRemove=function(){Smll(this,Laya)},d_m.prototype.onAdded=function(){Ibng(this,Laya,ActivityTypeDefine)},d_m.close=function(){Woqk(UIM,d_m)},d_m.prototype.onCloseBtn=function(){Usva(d_m)},d_m);function d_m(){var e=d_u.call(this)||this;return e.init(),e}e.LimitActivityHelpQLTB=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.limiReward.limitReward_getUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Ubsf(parseInt,this,Laya,b_p,Config)},b_s.prototype.onClickSure=function(){Cxdd(this)},b_s.prototype.UpdateData=function(e,p_l){e&&(e.isShowName=!1,e.setItemData(e.dataSource))},b_s.prototype.onRemoved=function(){},b_s.open=function(e){Ivub(e,UIM,b_s)},b_s.prototype.close=function(){Aeys(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.list.array=[],e.list.hScrollBarSkin="",e}e.LimitRewardGetView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.limiReward.limitRewardUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){LED.on(l_r.ACTIVITY_LIMIT_REWARD_UPDATE,this,this.updateView),LED.on(l_r.AMEND_CLICK_NUM,this,this.onAmendClickNum),this.list.renderHandler=Laya.Handler.create(this,this.updateItems,null,!1);var e=ActivityModel.instance.getActivityVoByType(ActivityTypeDefine.GS_limitReward);e&&(LimitRewardModel.instance.initLimitReward(e.round),ActivityModel.reqActivityRecord(ActivityTypeDefine.GS_limitReward)),this.b_get.on(Laya.Event.CLICK,this,this.onClickGetAward),this.left_btn.on(Laya.Event.CLICK,this,this.onClickLeftBtn),this.right_btn.on(Laya.Event.CLICK,this,this.onClickRightBtn),this.closeBtn.on(Laya.Event.CLICK,this,this.onClickClose),this.updateTime()},b_s.prototype.updateView=function(){var e=LimitRewardModel.instance.limitRewardInfo;0===e.length&&this.close(),this.left_btn.visible=this.right_btn.visible=!0,this.residueTime.visible=!0,this.b_get_redpoint.visible=!1,this.money_sp.visible=!1,this.countdown.x=this.width/2;var p_l=e[this._clickNum];if(p_l){var p_g=p_l.cfg;if(p_g.reward_special&&1===p_g.reward_special[0]){var b_s=Resource.ResUrl.getIconUrl(p_g.reward_special[1]);this.setIcon(this.special_sp,b_s,p_g.scale,p_g.offest)}else if(100<p_g.reward_special[1]){var d_u=Config.CItem(p_g.reward_special[1]),b_e=Config.item_material[d_u.id].icon,d_m=Resource.ResUrl.getIconUrl(b_e);this.setIcon(this.special_sp,d_m,p_g.scale,p_g.offest)}else{var d_w=Config.item_coin[p_g.reward_special[1]].icon;d_m=Resource.ResUrl.getIconUrl(d_w),this.setIcon(this.special_sp,d_m,p_g.scale,p_g.offest)}if(0===this._clickNum?this.left_btn.visible=!1:this._clickNum===e.length-1&&(this.right_btn.visible=!1),0<this._clickNum){var f_t=this._clickNum-1;this.left_lab.text=e[f_t].cfg.money+(j_x("1263_861_130"))}if(this._clickNum<=e.length-2){var v_z=this._clickNum+1;this.right_lab.text=e[v_z].cfg.money+(j_x("1263_861_130"))}0<this._clickNum&&e[this._clickNum-1].status<=0?(this.residueTime.visible=!1,this.countdown.text=(j_x("1777_320_1355")+j_x("2420_1067_1737")+j_x("844_861_130")),this.countdown.x=this.width/2-this.countdown.width+20,Laya.timer.clear(this,this.updateSulTime)):this.updateTime(),this.special_name.text=p_g.name_special,this.title_img.skin="res/ui/limitReward/"+p_g.title,this.dec_img.skin="res/ui/limitReward/"+p_g.text;var d_h=b_p.getRewardDatas(p_g.reward);if(p_g.reward.length<4)for(var r_t=0;r_t<4-b_p.getRewardDatas(p_g.reward).length;r_t++){var t_n=new ModuleItemVO;d_h.push(t_n)}this.list.array=d_h,b_p.getNumSp(NumType.PRICE_LIMIREWARD,p_l.price_god,this.qualityIcon,-15),this.b_get.disabled=!1,0===e[this._clickNum].status?(this.money_sp.visible=!0,b_p.getNumSp(NumType.BUY_MONEY,p_g.money,this.money_sp,-10),this.successbuy_clip.visible=!1,this.nosuccess_clip.visible=!0):(1===e[this._clickNum].status?(this.b_get_redpoint.visible=!0,this.successbuy_clip.visible=!0,this.successbuy_clip.index=0):(this.b_get.disabled=!0,this.successbuy_clip.visible=!0,this.successbuy_clip.index=1),this.nosuccess_clip.visible=!1);var f_y=this._clickNum+1;f_y>=e.length&&(f_y=e.length-1),this.right_redpoint.visible=1===e[f_y].status;var p_q=this._clickNum-1;p_q<0&&(p_q=0),this.left_redpoint.visible=LimitRewardModel.instance.isCanGet(this._clickNum)}},b_s.prototype.updateSulTime=function(e){0<e?(this.countdown.text=Utils.formatTimeStr(e),Laya.timer.once(1e3,this,this.updateSulTime,[e-1],!0)):(this.countdown.text="00:00:00",Laya.timer.clear(this,this.updateSulTime))},b_s.prototype.setIcon=function(e,p_l,p_g,b_s){void 0===p_g&&(p_g=[0,0]),void 0===b_s&&(b_s=[0,0]),""!=p_l?((e=Resource.ResManager.Instance.getImg(p_l,e)).scale(p_g[0],p_g[1]),e.pos(b_s[0],b_s[1])):e.visible=!1},b_s.open=function(e){(e=e||ActivityModel.instance.getActivityConfigVo(FuncDefine.limitReward))?UIM.open(b_s,["recharge.atlas","limitReward.atlas"],e,!1,!1,!0,!0):b_p.broadcastNotice((j_x("1796_1878_206")+j_x("155_1186")))},b_s.prototype.onClickClose=function(){Ezcd(this)},b_s.prototype.updateItems=function(e,p_l){e&&(e.isShowName=!1,e.setItemData(e.dataSource))},b_s.prototype.onClickGetAward=function(){var p_l=LimitRewardModel.instance.limitRewardInfo;if(p_l[this._clickNum])if(0<this._clickNum&&p_l[this._clickNum-1].status<=0)b_p.broadcastNotice((j_x("1777_320_1355")+j_x("2420_1067_1737")+j_x("844_861_130")));else{var p_g=p_l[this._clickNum];0===p_g.status?b_p.recharge(p_g.cfg.money,p_g.cfg.setId):1===p_g.status&&(LimitRewardModel.instance.reqBuyLimitReward(p_g.cfg.setId),e.LimitRewardGetView.open(p_g.id))}},b_s.prototype.onAmendClickNum=function(){Aeov(this,LimitRewardModel)},b_s.prototype.onRemoved=function(){Oczw(LED,l_r,this,Laya)},b_s.prototype.onClickLeftBtn=function(){--this._clickNum,this._clickNum<0&&(this._clickNum=0),this.updateView()},b_s.prototype.onClickRightBtn=function(){++this._clickNum,this._clickNum>=LimitRewardModel.instance.limitRewardInfo.length&&(this._clickNum=LimitRewardModel.instance.limitRewardInfo.length-1),this.updateView()},b_s.prototype.updateTime=function(){var e=ActivityModel.instance.getActivityVoByType(ActivityTypeDefine.GS_limitReward);e&&this.updateSulTime(e.sulTime)},b_s.prototype.close=function(){Croc(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e._clickNum=0,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.list.hScrollBarSkin="",e}e.LimitRewardView=p_g}(UI=UI||{});var l_h=function(e){function p_l(){var p_l=e.call(this)||this;return p_l._entryId=-1,p_l._reloadCount=0,LED.on("login_hideCreateRole",p_l,p_l.onHideCreateRole),p_l}return __extends(p_l,e),Object.defineProperty(p_l,"inst",{get:function(){return p_l._inst||(p_l._inst=new p_l),p_l._inst},enumerable:!0,configurable:!0}),p_l.prototype.onHideCreateRole=function(){Qbrh(this)},p_l.prototype.loadCreateRole=function(e){LoginManager.instance.setProgressContent((j_x("1357_1017_2178")+j_x("151_223_1770")+j_x(283)+"... ")+(e?++this._reloadCount:""),!0),Laya.timer.clear(this,this.hideLoginPanel),e&&this._createPanel&&(this._createPanel.removeSelf(),this._createPanel=null),Laya.loader.load(Resource.ResUrl.nameListJson,Laya.Handler.create(this,this.onload1),null,Laya.Loader.JSON)},p_l.prototype.showCreateRole=function(e){GConfig.inst.isCreateInGame=!0,RecordManager.instance.sendRecord(RecordManager.API_ACCOUNT,{step:RecordTypeDefine.STEP_LOAD_CREATE_ROLE}),this._entryId=e||1,GPlatform.isRelease||console.log((j_x("155_2086_223")+j_x("1770_1357_1017")+j_x(2178))),this.loadCreateRole()},p_l.prototype.onload1=function(){GPlatform.isCreateRole?this.createRoleReg():Laya.loader.load(Resource.ResUrl.BASE_URL+"scene/createRole.json",Laya.Handler.create(this,this.onload2),null,Laya.Loader.JSON)},p_l.prototype.onload2=function(){Khlj(Laya,Resource,this)},p_l.prototype.randomName=function(e){void 0===e&&(e=-1);var p_l=this.nameListVo;if(p_l){e=-1==e?this._entryId:e;var p_g=p_l.surname.split(","),b_s=1==e?p_l.nameMan.split(","):p_l.nameWoman.split(",");return p_g[Math.floor(Math.random()*p_g.length)]+b_s[Math.floor(Math.random()*b_s.length)]}},Object.defineProperty(p_l.prototype,"nameListVo",{get:function(){if(!this._nameListVo)try{var e=Laya.Loader.getRes(Resource.ResUrl.nameListJson);this._nameListVo=new NameListVo,Utils.updateVo(this._nameListVo,e)}catch(e){console.log(("nameListJson"+j_x("1329_271")),e)}return this._nameListVo},enumerable:!0,configurable:!0}),p_l.prototype.createRoleReg=function(){var e=this.randomName();if(GPlatform.isXjhz&&10==H5XJLoginManager.instance.agentVO.channel_id){var p_l=this;H5XJPlatform.ins.keyWords(e,(function(p_g){1==p_g?p_l.createRoleReq(e):Laya.timer.callLater(p_l,p_l.createRoleReg)}))}else this.createRoleReq(e)},p_l.prototype.createRoleReq=function(e){var p_l=new c2w_register_req;p_l.entryId=this._entryId,p_l.server=b_p.config.server,p_l.name=e,p_l.platform=GPlatform.isWanba?WanbaLoginManager.instance.wanbaData.pf:GPlatform.platformDesc2,this.sendRegister(p_l)},p_l.prototype.hideLoginPanel=function(){Qkdz(LoginManager)},p_l.prototype.showCreatePanel=function(){0<this._entryId&&(this._createPanel||(this._createPanel=new UI.UICreatePanel),GPlatform.isRelease||console.log((j_x("223_1770_1357")+j_x("1017_2178_1917")+j_x("432_1505_1399")+j_x("1357_1017_2178"))),Laya.timer.once(50,this,this.delayShowCreateRole))},p_l.prototype.delayShowCreateRole=function(){Ewuq(Laya,this,Stage,l_r,SubpackageMgr)},p_l.prototype.hideCreateRolePanel=function(e){void 0===e&&(e=!1),this._createPanel&&(e?(Laya.loader.clearRes(Resource.ResUrl.UI_ATLAS+"createRole.atlas"),this._createPanel.removeSelf(),this._createPanel=null,this._nameListVo=null):this._createPanel.visible=!1)},p_l.prototype.sendRegister=function(e){Obxq(e,this,GConfig,DB,c2w_register_req)},p_l}(BaseModel);!function(e){var p_l,p_g=(p_l=ui.scene.createRoleUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Ytnp(this)},b_s.prototype.onCreate=function(e){this._entryID=0<e?e:2,this.updateSelect(),this.randomName()},b_s.prototype.addEventListener=function(){this.girlImg?(this.girlImg.on(Laya.Event.CLICK,this,this.onMouseDown),this.boyImg.on(Laya.Event.CLICK,this,this.onMouseDown),this.createBtn.on(Laya.Event.CLICK,this,this.onMouseDown),this.randBtn.on(Laya.Event.CLICK,this,this.onMouseDown),this.nameInput.on(Laya.Event.INPUT,this,this.onChangeStr),Laya.stage.on(Laya.UIEvent.RESIZE,this,this.resetSite),LED.on(l_r.SHOW_CREATEROLE,this,this.onCreate),RecordManager.instance.sendRecord(RecordManager.API_ACCOUNT,{step:RecordTypeDefine.STEP_IN_CREATE_ROLE})):Laya.timer.callLater(this,this.reload)},b_s.prototype.checkName=function(e,p_l){1==e?l_h.inst.createRoleReg():b_p.broadcastNotice((j_x("1511_1794_130")+j_x("241_1387_1492")+j_x(1794)))},b_s.prototype.onChangeStr=function(){Cfqi(Utils,this)},b_s.prototype.onMouseDown=function(e){switch(e.target.name){case"createBtn":var p_l=this.nameInput.text;if(GPlatform.isNotRecharge)return void b_p.notRechargeTip();if(""==p_l)return void b_p.broadcastNotice((j_x("1511_1794_2462")+j_x("1919_803_1466")));for(var p_g=0,b_s=Utils.NameLimmit();p_g<b_s.length;p_g++){var d_u=b_s[p_g];if(-1!=p_l.search(d_u))return void b_p.broadcastNotice((j_x("1511_1794_130")+j_x("241_1387_1492")+j_x(1794)))}ShieldWordManager.ins.isShield(p_l,Laya.Handler.create(this,this.checkName));break;case"girlImg":2!=this._entryID&&(this._entryID=2,this.updateSelect());break;case"boyImg":1!=this._entryID&&(this._entryID=1,this.updateSelect());break;case"randBtn":this.randomName()}},b_s.prototype.randomName=function(){Qipe(this,l_h)},b_s.prototype.updateSelect=function(){var e=this.girlBox.getChildByName("selectImg"),p_l=this.boyBox.getChildByName("selectImg");e.visible=2===this._entryID,p_l.visible=!e.visible,this.girlSk.visible=e.visible,this.boySk.visible=p_l.visible},b_s.prototype.reload=function(){Yxdq(l_h)},b_s.prototype.resetSite=function(e){void 0===e&&(e=null),this.x=Stage.width-this.width>>1,this.y=(Stage.height-this.height>>1)+GPlatform.concaveOffsetY},b_s.prototype.onRemove=function(){this.girlImg&&(LED.off(l_r.SHOW_CREATEROLE,this,this.onCreate),this.girlImg.off(Laya.Event.CLICK,this,this.onMouseDown),this.boyImg.off(Laya.Event.CLICK,this,this.onMouseDown),this.createBtn.off(Laya.Event.CLICK,this,this.onMouseDown),this.nameInput.off(Laya.Event.INPUT,this,this.onChangeStr),this.randBtn.off(Laya.Event.CLICK,this,this.onMouseDown),Laya.stage.off(Laya.UIEvent.RESIZE,this,this.resetSite))},b_s.prototype.changeAdapt=function(){GPlatform.needAdapt&&(this.height=GPlatform.stageHeight)},b_s);function b_s(){for(var e=p_l.call(this)||this,p_g=e._entryID=0;p_g<e.numChildren;++p_g){var b_s=e.getChildAt(p_g);b_s.visible||b_s.removeChildren()}return e.changeAdapt(),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.UICreatePanel=p_g}(UI=UI||{});var f_b=function(e){function p_l(){var p_l=null!==e&&e.apply(this,arguments)||this;return p_l._createRoleReport=!1,p_l}return __extends(p_l,e),Object.defineProperty(p_l,"inst",{get:function(){return p_l._inst||(p_l._inst=new p_l),p_l._inst},enumerable:!0,configurable:!0}),p_l.prototype.sendLinkOpen=function(){Iauy(this,ProtocolController,b_d,GConfig)},p_l.prototype.loginToServer=function(){GPlatform.isWx?WXPlatform.instance.recordUserInfo(WXRecordStep.SERVER_IN):GPlatform.isH5&&H5LoginManager.instance.recordUserInfo(WXRecordStep.SERVER_IN),DB.connetStatus!=ConnetStatus.RESTART&&LoginManager.instance.setProgressContent((j_x("506_2035_1723")+j_x("2048_1998_595")+j_x(2398)+"... "),!0);var e=new c2w_login_req,p_l=GConfig.inst.account;p_l&&""!==p_l||(RecordManager.instance.sendStep(RecordTypeDefine.STEP_5),p_l=GConfig.inst.account="test"+Math.floor(9999*Math.random())),GPlatform.isDebug&&(p_l=LoginManager.instance.userName),e.account=p_l,e.server=GConfig.inst.server,e.fcm=GConfig.inst.fcm,e.time=GConfig.inst.time?GConfig.inst.time:Date.now(),e.sign=GConfig.inst.serSign,e.extend=GConfig.inst.extend,e.platform=this.loginPlatform,e.isBgLogin=GPlatform.isDebug?1:0,this.sendLogin_req(e),console.log((j_x("1723_2048_2277")+j_x("1509_1998_595")+j_x(2398)))},Object.defineProperty(p_l.prototype,"loginPlatform",{get:function(){return GPlatform.isWanba?WanbaLoginManager.instance.wanbaData.pf:GPlatform.isTX?H5LoginManager.instance.agentBase.channel_id:GPlatform.platformDesc2},enumerable:!0,configurable:!0}),p_l.prototype.sendOpen=function(e){console.log((j_x("155_2086_566")+j_x(420)+"...")+e),RecordManager.instance.sendStep(RecordTypeDefine.STEP_3),LoginManager.instance.setProgressContent((j_x("506_2035_566")+j_x("420_1998_595")+j_x(2398)+"... "),!0),DB.instance.open(e)},p_l.prototype.onMainUIComplete=function(){Osnp(this)},p_l.prototype.loadData=function(){Szlz(LoginManager,j_x,Laya,Resource,this)},p_l.prototype.loadUI=function(){Ebpg(LoginManager,j_x,Laya,Resource,this)},p_l.prototype.onDataLoadComp=function(){Mypf(Laya,this)},p_l.prototype.sendLogin_req=function(e){RecordManager.instance.sendStep(RecordTypeDefine.STEP_4),SyncTime.resetSocketState(),GConfig.inst.account=e.account,DB.instance.query(c2w_login_req,e)},p_l.prototype.loadVersionComplate=function(){Clft(this)},p_l.prototype.loadMainUI=function(){LoginManager.instance.setProgressContent((j_x("506_2035_223")+j_x("1770_1863")+"UI..."));var e=[{url:Resource.ResUrl.UI_ATLAS+"comp.atlas",type:Laya.Loader.ATLAS},{url:Resource.ResUrl.UI_ATLAS+"common.atlas",type:Laya.Loader.ATLAS},{url:Resource.ResUrl.UI_ATLAS+"numbers.atlas",type:Laya.Loader.ATLAS},{url:Resource.ResUrl.UI_ATLAS+"mainUI.atlas",type:Laya.Loader.ATLAS},{url:Resource.ResUrl.UI_ATLAS+"loading.atlas",type:Laya.Loader.ATLAS},{url:Resource.ResUrl.UI_URL+"loading/talldoor_left.png",type:Laya.Loader.IMAGE}];if(GPlatform.isDispose){for(var p_l=e.length,p_g=void 0,b_s=0;b_s<p_l;b_s++)p_g=e[b_s].url,n_e.ignoreList[p_g]=!0;n_e.ignoreList[Resource.ResUrl.UI_ATLAS+"fbCommon.atlas"]=!0}Laya.loader.load(e,Laya.Handler.create(this,this.onMainUIComplete))},p_l.prototype.loadVersion=function(){this._loadv?this.checkShowScene():(this._loadv=!0,console.log((j_x("223_1770_1588")+j_x(944))),LoginManager.instance.setProgressContent((j_x("506_2035_223")+j_x("1770_1588_944")+"...")),GPlatform.isVersion?(GPlatform.versionUrl="version.json",GPlatform.versionUrl=GPlatform.versionNum?GPlatform.versionUrl:GPlatform.vUrl(GPlatform.versionUrl),Laya.ResourceVersion.enable(GPlatform.versionUrl,Laya.Handler.create(this,this.loadVersionComplate))):this.loadVersionComplate())},p_l.prototype.setLoginSucc=function(e){console.log((j_x("2277_1509_1998")+j_x("595_2398_1723")+j_x("2048_402_2142"))),this._pid=e.pid,this._zone=e.timezone,b_p.playerId=this._pid,b_p.playerName=e.name,b_p.playerLevel=e.level,b_p.config.mergSerId=null!=e.server?e.server:b_p.config.server,b_p.config.mergSerStr="s"+b_p.config.mergSerId,SyncTime.setZone(this._zone),GConfig.inst.isCreateInGame&&(this._createRoleReport||(this._createRoleReport=!0,H5YzxLoginManager.instance.recordUserInfo(Sdk.YZX.Save_CreateRole),H5XJPlatform.ins.reportCreateRole())),H5YzxLoginManager.instance.recordUserInfo(Sdk.YZX.Save_Login),l_h.inst.hideCreateRolePanel(),this.checkShowScene()},p_l.prototype.loginSuccToDo=function(){LgcM.ins.isShowScene&&LgcM.ins.showScene(),LoginManager.instance.loginSuccess(),l_h.inst.hideCreateRolePanel(),Laya.timer.once(50,this,this.loginSucced)},p_l.prototype.checkShowScene=function(){this._pid&&this._loadUI&&this.loginSuccToDo()},p_l.prototype.onUILoadComp=function(){Azqo(Laya,this)},p_l.prototype.loginSucced=function(){Mybi(LgcM,LED,l_r)},p_l}(BaseModel);!function(e){var p_l,p_g=(p_l=ui.window.lottert.LottertDrawMainUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){this.on(Laya.Event.CLICK,this,this.onClick),this.helpBtn.on(Laya.Event.CLICK,this,this.onHelpBtnClick),LED.on(l_r.ITEM_ADD,this,this.updateConsume),LED.on(l_r.ITEM_REMOVE,this,this.updateConsume),LED.on(l_r.ITEM_AMOUNT_CHANGE,this,this.updateConsume),LED.on(l_r.WALLET_CHANGE,this,this.updateConsume),LED.on(l_r.ACTIVITY_LOTTERT_INFO,this,this.updateViewInfo),LED.on(l_r.ACTIVITY_LOTTERT_DRAW,this,this.playAni),LED.on(l_r.ACTIVITY_LOTTERT_RECORD,this,this.updateRecordList),LED.on(l_r.RANK_UPDATE,this,this.updateRankNum);var e=this.dataSource.data.subVo[0];this.lightImage.rotation=0,this.rotateNeedle.rotation=0,this.checkAni.selected=!this.isTween,this.checkTen.selected=this.isTenContinue,ActivityModel.reqActivityRecord(e.type),this.isBgActivity=e.enum==ActivityTypeEnum.BG,RankModel.instance.reqGetRank(n_t.instance.getRankType(this.tagName),1),n_t.instance.reqRecordInfo(this.tagName,RecordType.AllSer,this.isBgActivity),this.updateView(),Laya.timer.loop(1e3,this,this.updateTime)},b_s.prototype.renderItem=function(p_l,p_g){var b_s=p_l.getChildByName("itembox1");b_s||((b_s=new e.ItemBox).name="itembox1",p_l.addChild(b_s));var d_u=new ModuleItemVO;d_u.id=p_l.dataSource.reward[0],d_u.amount=p_l.dataSource.reward[1],b_s.setItemData(d_u),b_s.setName("")},b_s.prototype.onHelpBtnClick=function(){Gueb(e,this)},b_s.prototype.updateTime=function(){var e=this.dataSource.data.subVo[0],p_l=ActivityModel.instance.getLottertShowTime(e);e.sulTime>p_l?(this.surplusTime.text=Utils.formatTimeStr(e.sulTime-p_l),this.surplusTime.color="#71de66"):(this.surplusTime.text=(j_x("1300_1917_396")),this.surplusTime.color="#e32828",Laya.timer.clearAll(this))},b_s.prototype.aniComplete=function(p_l){Kbqe(p_l,this,n_t,RecordType,RankModel,e)},b_s.prototype.updateViewInfo=function(){Oiqn(n_t,this)},b_s.prototype.updateConsume=function(e){void 0===e&&(e=null);var p_l=n_t.instance.getTimeConsume(this.tagName),p_g=Config.CItem(p_l[0][0]);if(!e||e&&e.id==p_l[0][0]){var b_s,d_u=BagModel.instance.getItemCountByItemID(p_l[0][0],BagTypeDefine.BAG_TYPE_ITEM),b_e=d_u>=p_l[0][1]?"#71de66":"#e32828";b_s=p_l[0][0]<100?Utils.setImg(Resource.ResUrl.getIconUrl(p_g.icon),40,40)+Utils.setColor(Utils.$("{1}",p_l[0][1]),b_e):Utils.setImg(Resource.ResUrl.getIconUrl(p_g.icon),40,40)+Utils.setColor(Utils.$("{1}/{2}",d_u,p_l[0][1]),b_e),this.consume.innerHTML=b_s}},b_s.prototype.renderBox=function(e,p_l){var p_g=e.getChildByName("playerName"),b_s=e.getChildByName("content"),d_u=e.getChildByName("item"),b_e=e.dataSource,d_m="";if(b_e&&b_e.recs&&0<b_e.recs.length)for(var d_w in b_e.recs){var f_t=n_t.instance.getGiftCfgById(this.tagName,b_e.recs[d_w]),v_z=Config.CItem(f_t.reward[0]),d_h=",";parseInt(d_w)==b_e.recs.length-1&&(d_h=""),d_m+=Utils.$("{1}*{2}{3}",v_z.name,f_t.reward[1],d_h)}p_g.text=b_e.name,d_u.text=d_m,b_s.x=p_g.x+p_g.textField.textWidth+3,d_u.x=b_s.x+b_s.textField.textWidth+3},b_s.open=function(e){(e=e||ActivityModel.instance.getActivityConfigVo(FuncDefine.LottertDrawRide))?UIM.open(b_s,["activity/turnTable.atlas"],{data:e}):b_p.broadcastNotice((j_x("1796_1878_206")+j_x("155_1186")))},b_s.prototype.playAni=function(e){if(e.ty==this.tagName)if(this.isTween&&1==e.times){this.isPlayAni=!0;var p_l=n_t.instance.getCfgByNameAndRound(e.ty,n_t.instance.countActivityRound(e.ty));if(!p_l)return;this.rotateNeedle.rotation=this.lightImage.rotation=Math.floor(this.lightImage.rotation%360);var p_g=n_t.instance.countAngle(p_l,e.res[0],this.lightImage.rotation),b_s=360*p_g.circle+p_g.Angle;Laya.Tween.to(this.rotateNeedle,{rotation:b_s},2e3,Laya.Ease.circOut,Laya.Handler.create(this,this.aniComplete,[e])),Laya.Tween.to(this.lightImage,{rotation:b_s},2e3,Laya.Ease.circOut,Laya.Handler.create(this,this.aniComplete,[e]))}else j_a.otherIns().add(this,this.aniComplete,[e])},b_s.prototype.changeViewImage=function(){var e=n_t.instance.countActivityRound(this.tagName),p_l=n_t.instance.getCfgByNameAndRound(this.tagName,e);if(p_l){var p_g=Config.activity_turntable_mainShops[p_l.cfgShowByRound];p_g?(this.sellingPoint.skin="res/ui/activity/turnTable/"+p_g.desc,this.mianShop.visible=!0):this.mianShop.visible=!1,this.rotateNeedle.skin="res/ui/activity/turnTable/zhizhen_yujian.png",this.goBtn.skin="res/ui/activity/turnTable/Button_yujian.png",this.bg.skin="res/ui/activity/turnTable/bg_yujian.jpg",this.title.skin="res/ui/activity/turnTable/yujianchoujiang.png",this.change2.skin="res/ui/activity/turnTable/choujiang_yujian.png",this.change1.skin="res/ui/activity/turnTable/benqizhuda_yujian.png"}},b_s.prototype.onRemove=function(){Eles(LED,l_r,this,Laya,d_o)},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.LottertDrawRide),b_s.close();break;case"goBtn":if(this.isPlayAni)return;var p_g=this.dataSource.data.subVo[0],d_u=ActivityModel.instance.getLottertShowTime(p_g);if(p_g.sulTime-d_u<=0)return void b_p.broadcastNotice((j_x("2462_2035_1796")+j_x("1878_1702_2460")+j_x(1273)));if(!b_p.checkConsume(n_t.instance.getTimeConsume(this.tagName,this.isTenContinue),!0))return;d_o.instance.isOpenStartDeley=!0;var b_e=this.isTenContinue?10:1;n_t.instance.reqStartTurn(this.tagName,b_e,this.isBgActivity);break;case"checkAni":this.isTween=!this.isTween;break;case"checkTen":this.isTenContinue=!this.isTenContinue;break;case"recordClick":e.LottertDrawRecordPanel.open(this.tagName,this.isBgActivity);break;case"exchangeBtn":this.redPoint.visible=n_t.instance.getMemberInfo(this.tagName).isRedPoint=!1,e.LottertDrawExchangePanel.open(this.tagName,this.isBgActivity);break;case"rankBtn":e.LottertDrawRankPanle.open(this.tagName);break;case"showBtn":e.LottertDrawShowPanel.open(this.tagName)}},b_s.prototype.stopAni=function(){Abpy(this,d_o,ItemSourceDefine,Laya)},b_s.prototype.updateView=function(){var e=this.dataSource.data.subVo[0],p_l=ActivityModel.instance.getLottertShowTime(e);this.timeDate.text=Utils.formatTimeStr4(e.start)+"-"+Utils.formatTimeStr4(e.stop-p_l),this.updateTime(),this.updateConsume(),this.changeViewImage(),this.updateItems()},b_s.prototype.updateItems=function(){var e=n_t.instance.getCfgByNameAndRound(this.tagName,n_t.instance.countActivityRound(this.tagName));if(e)for(var p_l in e.cfgByRound){var p_g=this.items.getChildByName("item"+p_l);p_g&&(p_g.dataSource=e.cfgByRound[p_l],this.renderItem(p_g,parseInt(p_l)))}},b_s.prototype.updateRankNum=function(){var e=n_t.instance.countRankInfo(this.tagName),p_l=0==e?(j_x("206_1067_1077")):e.toString();this.myRank.text=p_l},b_s.prototype.updateRecordList=function(e){e.ty==this.tagName&&e&&e.mode==RecordType.AllSer&&(e.records&&0<e.records.length?(e.records.sort((function(e,p_l){return e.time-p_l.time})),this.recordList.array=e.records,this.recordList.scrollTo(this.recordList.array.length-2),this.recordList.visible=!0,this.recordNull.visible=!1):(this.recordList.visible=!1,this.recordNull.visible=!0))},b_s.close=function(){Ukaq(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.isTween=!0,e.isTenContinue=!1,e.isPlayAni=!1,e.tagName=LotterType.RIDE,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.recordClick.mouseEnabled=!0,e.recordList.renderHandler=Laya.Handler.create(e,e.renderBox,null,!1),e.recordList.vScrollBarSkin="",e.recordList.scrollBar.elasticBackTime=300,e.recordList.scrollBar.elasticDistance=200,e.consume.style.fontSize=22,e.consume.style.color="#f0ecd8",e.consume.style.align="center",e.consume.style.valign="center",e.consume.mouseThrough=!0,e}e.LottertDrawMainPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=e.LottertDrawMainPanel,__extends(b_s,p_l),b_s.prototype.changeViewImage=function(){var e=n_t.instance.countActivityRound(this.tagName),p_l=n_t.instance.getCfgByNameAndRound(this.tagName,e);if(p_l){var p_g=Config.activity_turntable_mainShops[p_l.cfgShowByRound];p_g?(this.sellingPoint.skin="res/ui/activity/turnTable/"+p_g.desc,this.mianShop.visible=!0):this.mianShop.visible=!1,this.rotateNeedle.skin="res/ui/activity/turnTable/zhizhen_shizhuang.png",this.goBtn.skin="res/ui/activity/turnTable/Button_shizhuang.png",this.bg.skin="res/ui/activity/turnTable/bg_shizhuang.jpg",this.title.skin="res/ui/activity/turnTable/longhunzhuanpan.png",this.change2.skin="res/ui/activity/turnTable/choujiang_shizhuang.png",this.change1.skin="res/ui/activity/turnTable/benqizhuda_shizhuang.png"}},b_s.open=function(e){(e=e||ActivityModel.instance.getActivityConfigVo(FuncDefine.LottertDrawDragon))?UIM.open(b_s,["activity/turnTable.atlas"],{data:e}):b_p.broadcastNotice((j_x("1796_1878_206")+j_x("155_1186")))},b_s.prototype.stopAni=function(){Kmax(this,d_o,ItemSourceDefine,Laya)},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.LottertDrawDragon),b_s.close();break;case"goBtn":if(this.isPlayAni)return;var p_g=this.dataSource.data.subVo[0],d_u=Config.activity_activity[p_g.gsa_id].param,b_e=d_u&&d_u.showTime?d_u.showTime:0;if(p_g.sulTime-b_e<=0)return void b_p.broadcastNotice((j_x("2462_2035_1796")+j_x("1878_1702_2460")+j_x(1273)));if(!b_p.checkConsume(n_t.instance.getTimeConsume(this.tagName,this.isTenContinue),!0))return;var d_m=this.isTenContinue?10:1;d_o.instance.isOpenStartDeley=!0,n_t.instance.reqStartTurn(this.tagName,d_m,this.isBgActivity);break;case"checkAni":this.isTween=!this.isTween;break;case"checkTen":this.isTenContinue=!this.isTenContinue;break;case"recordClick":e.LottertDrawRecordPanel.open(this.tagName,this.isBgActivity);break;case"exchangeBtn":this.redPoint.visible=n_t.instance.getMemberInfo(this.tagName).isRedPoint=!1,e.LottertDrawExchangePanel.open(this.tagName,this.isBgActivity);break;case"rankBtn":e.LottertDrawRankPanle.open(this.tagName);break;case"showBtn":e.LottertDrawShowPanel.open(this.tagName)}},b_s.close=function(){Wohf(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.tagName=LotterType.DRAGON,e}e.LottertDrawDragonPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=e.LottertDrawMainPanel,__extends(b_s,p_l),b_s.prototype.changeViewImage=function(){var e=n_t.instance.countActivityRound(this.tagName),p_l=n_t.instance.getCfgByNameAndRound(this.tagName,e);if(p_l){var p_g=Config.activity_turntable_mainShops[p_l.cfgShowByRound];p_g?(this.sellingPoint.skin="res/ui/activity/turnTable/"+p_g.desc,this.mianShop.visible=!0):this.mianShop.visible=!1,this.rotateNeedle.skin="res/ui/activity/turnTable/zhizhen_shizhuang.png",this.goBtn.skin="res/ui/activity/turnTable/Button_shizhuang.png",this.bg.skin="res/ui/activity/turnTable/bg_shizhuang.jpg",this.title.skin="res/ui/activity/turnTable/shizhuangchoujiang.png",this.change2.skin="res/ui/activity/turnTable/choujiang_shizhuang.png",this.change1.skin="res/ui/activity/turnTable/benqizhuda_shizhuang.png"}},b_s.prototype.stopAni=function(){Uuxd(this,d_o,ItemSourceDefine,Laya)},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.LottertDrawFashion),b_s.close();break;case"goBtn":if(this.isPlayAni)return;var p_g=this.dataSource.data.subVo[0],d_u=Config.activity_activity[p_g.gsa_id].param,b_e=d_u&&d_u.showTime?d_u.showTime:0;if(p_g.sulTime-b_e<=0)return void b_p.broadcastNotice((j_x("2462_2035_1796")+j_x("1878_1702_2460")+j_x(1273)));if(!b_p.checkConsume(n_t.instance.getTimeConsume(this.tagName,this.isTenContinue),!0))return;var d_m=this.isTenContinue?10:1;d_o.instance.isOpenStartDeley=!0,n_t.instance.reqStartTurn(this.tagName,d_m,this.isBgActivity);break;case"checkAni":this.isTween=!this.isTween;break;case"checkTen":this.isTenContinue=!this.isTenContinue;break;case"recordClick":e.LottertDrawRecordPanel.open(this.tagName,this.isBgActivity);break;case"exchangeBtn":this.redPoint.visible=n_t.instance.getMemberInfo(this.tagName).isRedPoint=!1,e.LottertDrawExchangePanel.open(this.tagName,this.isBgActivity);break;case"rankBtn":e.LottertDrawRankPanle.open(this.tagName);break;case"showBtn":e.LottertDrawShowPanel.open(this.tagName)}},b_s.open=function(e){(e=e||ActivityModel.instance.getActivityConfigVo(FuncDefine.LottertDrawFashion))?UIM.open(b_s,["activity/turnTable.atlas"],{data:e}):b_p.broadcastNotice((j_x("1796_1878_206")+j_x("155_1186")))},b_s.close=function(){Mxft(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.tagName=LotterType.FASHION,e}e.LottertDrawFashionPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.lottert.LottertDrawExchangeUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Sfqj(this,LED,l_r,Laya)},b_s.prototype.updateView=function(){Yqnw(n_t,this)},b_s.open=function(e,p_l){void 0===p_l&&(p_l=!1),UIM.open(b_s,null,{name:e,isBgActivity:p_l},!1,!1,!0,!0)},b_s.prototype.createTween=function(e){e.visible=!0,e.y=860,laya.utils.Tween.to(e,{j_l:870},500,Laya.Ease.linearIn,Laya.Handler.create(this,this.createTweens,[e]))},b_s.prototype.onClick=function(e){var p_l=e.target;switch(p_l.name){case"closeBtn":case"backBtn":b_s.close();break;case"exchangeBtn":var p_g=p_l.dataSource,d_u=1*p_g.money,b_e=p_g.svrOpenDay;if(n_t.instance.getMemberInfo(this.tagName).integral<d_u)return void b_p.broadcastNotice((j_x("514_2224_2462")+j_x(1779)));var d_m=n_t.instance.getMemberInfo(this.tagName).exchangeInfo[p_g.id],d_w=d_m?d_m.num:0;if(p_g.limit-d_w<=0)return void b_p.broadcastNotice((j_x("1763_1713_1300")+j_x("1117_1067_2128")));if(b_e>ActivityModel.instance.serOpenTimeVo.openSerDay)return void b_p.broadcastNotice(Utils.$((j_x("155_1998_1117")+j_x("1012_573")+"{1}"+j_x("2308_1355_2420")),b_e));n_t.instance.reqExchangeGoods(this.tagName,p_g.xchId,1,this.isBgActivity)}},b_s.prototype.arrowMove=function(){this.upImage.visible=!1,9<this.list.length&&this.createTween(this.upImage)},b_s.prototype.createTweens=function(e){e.y=870,laya.utils.Tween.to(e,{j_l:860},500,Laya.Ease.linearIn,Laya.Handler.create(this,this.createTween,[e]))},b_s.prototype.renderRewardItem=function(p_l,p_g){var b_s=p_l.getChildByName("nameLab"),d_u=p_l.getChildByName("exchangeBtn"),b_e=p_l.getChildByName("itemBox"),d_m=p_l.getChildByName("tipBox").getChildByName("exchangeNumLab"),d_w=p_l.dataSource,f_t=n_t.instance.getMemberInfo(this.tagName);b_e||((b_e=new e.ItemBox).name="itemBox",p_l.addChild(b_e));var v_z=Config.CItem(d_w.itemId);b_s.text=v_z?v_z.name:"";var d_h=new ModuleItemVO;d_h.id=d_w.itemId,d_h.amount=1,b_e.setItemData(d_h),b_e.setName(""),d_u.label=d_w.money+(j_x("514_2224"));var r_t=(d_u.dataSource=d_w).limit-(f_t.exchangeInfo[d_w.id]?f_t.exchangeInfo[d_w.id].num:0);d_m.text=r_t.toString()},b_s.prototype.onRemove=function(){Wowj(LED,l_r,this,Laya)},b_s.prototype.tweenStop=function(e){Etjg(e,laya)},b_s.close=function(){Yjqd(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.list.renderHandler=Laya.Handler.create(e,e.renderRewardItem,null,!1),e.list.vScrollBarSkin="",e.list.scrollBar.elasticBackTime=300,e.list.scrollBar.elasticDistance=200,e.tagName=LotterType.RIDE,e}e.LottertDrawExchangePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.lottert.LottertDrawHelpUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Asej(this,Laya)},b_s.prototype.updateView=function(){for(var e=0,p_l=this.content._childs;e<p_l.length;e++)p_l[e].visible=!1;this.hasOwnProperty(this.tagName)&&(this[this.tagName].visible=!0)},b_s.prototype.onRemove=function(){Aaea(this,Laya)},b_s.open=function(e){UIM.open(b_s,null,{name:e},!1,!1,!0,!0)},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close()}},b_s.close=function(){Sotr(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.LottertDrawHelpPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.lottert.LottertDrawRankUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Ykhk(this,Laya,LED,l_r)},b_s.prototype.updateView=function(){var e=n_t.instance.getMemberInfo(this.tagName);this.rankNum.text=0==e.rankNum?(j_x("206_1067_1077")):e.rankNum.toString(),this.scoreNum.text=e.score.toString(),this.updateRewardBox(),this.updateRankBox()},b_s.prototype.renderRankItem=function(e,p_l){Gyej(e,p_l,LimitActivityRankAwardType)},b_s.prototype.updateRankBox=function(){var e=RankModel.instance.getRankDataByType(n_t.instance.getRankType(this.tagName));e?(this.rankList.array=e.getItems(),0<this.rankList.array.length?this.rankNull.visible=!1:this.rankNull.visible=!0):(this.rankList.array=[],this.rankNull.visible=!0)},b_s.prototype.renderRewardItem=function(e,p_l){var p_g=RankModel.instance.getRankDataByType(n_t.instance.getRankType(this.tagName)),b_s=e.dataSource;if(b_s&&b_s.beginIdx==b_s.endIdx&&p_g&&p_g.getItems().length>p_l){var d_u=p_g.getItems()[p_l].getPlayerId();d_o.instance.reqPlayerinfo(CommonOpType.LOTTERT,d_u),this.itemUpdata[d_u]=e}e.updateData(this.tagName,p_l)},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close()}},b_s.open=function(e){UIM.open(b_s,null,{name:e},!1,!1,!0,!0)},b_s.prototype.updateRewardBox=function(){Kcnt(this,n_t)},b_s.prototype.renderRewardHead=function(e){var p_l=this.itemUpdata[e.pid];if(p_l){var p_g="res/ui/activity/turnTable/head_pannel.png",b_s=Config.fashion_fashion[e.fashionAvatar];b_s&&b_s.avatar&&0<b_s.avatar.length&&(p_g=Resource.ResUrl.getIconUrl(b_s.avatar[0])),p_l.renderHead(Resource.ResManager.getHeadUrl(e.entryId,e.headIcon),p_g)}},b_s.prototype.onTabSelect=function(e){switch(e){case 0:this.rewardBox.visible=!0,this.rankBox.visible=!1;break;case 1:this.rewardBox.visible=!1,this.rankBox.visible=!0}},b_s.prototype.onRemove=function(){Gizu(this,Laya,LED,l_r)},b_s.close=function(){Uwyv(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.rewardList.itemRender=b_e,e.rewardList.renderHandler=Laya.Handler.create(e,e.renderRewardItem,null,!1),e.rankList.renderHandler=Laya.Handler.create(e,e.renderRankItem,null,!1),e.rankList.vScrollBarSkin="",e.rewardList.vScrollBarSkin="",e.rewardList.scrollBar.elasticBackTime=300,e.rewardList.scrollBar.elasticDistance=200,e.rankList.scrollBar.elasticBackTime=300,e.rankList.scrollBar.elasticDistance=200,e._clipTab=new p_c(e.tab),e.itemUpdata=[],e.tagName=LotterType.RIDE,e}e.LottertDrawRankPanle=p_g;var d_u,b_e=(d_u=ui.window.lottert.LottertDrawRewardItemUI,__extends(d_m,d_u),d_m.prototype.renderItem=function(e,p_l){var p_g=new ModuleItemVO;p_g.id=e.dataSource[0],p_g.amount=e.dataSource[1],e.setItemData(p_g),e.scale(.8,.8),e.setName("")},d_m.prototype.updateData=function(e,p_l){if(this.dataSource){var p_g=this.dataSource;if(p_g.endIdx>p_g.beginIdx)this.rankImage.skin="res/ui/activity/turnTable/"+p_g.rankUrl,this.nullLabel.visible=!1,this.rankBox.visible=!0,this.rankBox1.visible=!1;else{var b_s=RankModel.instance.getRankDataByType(n_t.instance.getRankType(e));if(this.rankNum.skin="res/ui/activity/turnTable/"+p_g.rankUrl,b_s&&b_s.getItems().length>=p_g.beginIdx){var d_u=b_s.getItems()[p_g.beginIdx-1];this.headBox.visible=!0,this.playerName.text=d_u.getPlayName(),this.nullLabel.visible=!1,this.rankBox.visible=!1}else this.nullLabel.visible=!0,this.headBox.visible=!1,this.rankBox.visible=!1}this.rewardList.array=p_g.reward}},d_m.prototype.renderHead=function(e,p_l){Ghwr(e,p_l,this,Resource)},d_m);function d_m(){var p_l=d_u.call(this)||this;return p_l.rewardList.hScrollBarSkin="",p_l.rewardList.itemRender=e.ItemBox,p_l.rewardList.renderHandler=Laya.Handler.create(p_l,p_l.renderItem,null,!1),p_l}e.LottertDrawRewardItem=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.lottert.LottertDrawRecordUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){this.tagName=this.dataSource.data,this.isBgActivity=this.dataSource.isBgActivity,this.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.ACTIVITY_LOTTERT_RECORD,this,this.updateView),n_t.instance.reqRecordInfo(this.tagName,RecordType.Personel,this.isBgActivity)},b_s.prototype.updateView=function(e){if(e.ty==this.tagName)if(e.records.length<=0)this.list.visible=!1,this.listNull.visible=!0;else{var p_l=0,p_g=0;for(var b_s in e.records.sort((function(e,p_l){return p_l.time-e.time})),this.list.removeChildren(),e.records){var d_u=new b_e;p_g=parseInt(b_s),d_u.tagName=this.tagName;var d_m=e.cost_item;d_u.setItem(p_g,e.records[b_s],d_m),this.list.addChild(d_u),d_u.y=p_l,p_l=d_u.height+p_l}this.list.vScrollBar.max=p_l,this.list.visible=!0,this.listNull.visible=!1}},b_s.prototype.onRemove=function(){Ccjh(this,Laya,LED,l_r)},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close()}},b_s.open=function(e,p_l){void 0===p_l&&(p_l=!1),UIM.open(b_s,null,{data:e,isBgActivity:p_l},!1,!1,!0,!0)},b_s.close=function(){Sfzx(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.list.vScrollBarSkin="",e.list.vScrollBar.isVertical=!0,e.list.vScrollBar.elasticBackTime=300,e.list.vScrollBar.elasticDistance=200,e}e.LottertDrawRecordPanel=p_g;var d_u,b_e=(d_u=ui.window.lottert.LottertDrawRecordItemUI,__extends(d_m,d_u),d_m.prototype.setItem=function(e,p_l,p_g){var b_s=p_l,d_u="",b_e=p_g<=0?n_t.instance.getTimeConsume(this.tagName):Config.CItem(p_g),d_m=p_g<=0?b_e[0][1]*b_s.recs.length:b_s.recs.length,d_w=p_g<=0?Config.CItem(b_e[0][0]):b_e;if(0<b_s.recs.length)if(this.tagName==LotterType.TREASURE){for(var f_t in b_s.recs){var v_z=MonthActivityModel.ins.MonthTrHunt,d_h=v_z[0].items,r_t=v_z[0].bestItems,t_n=b_s.recs[f_t];for(var f_y in d_h)if(d_h[f_y].id==t_n){var p_q=Config.CItem(d_h[f_y].itemId),h_h=Utils.setSpace(1),n_j=Resource.ResManager.getQualityColor(p_q.quality);d_u+=Utils.setColor(Utils.$("{1}*{2}{3}",p_q.name,d_h[f_y].num,h_h),n_j)}for(var j_l in r_t)r_t[j_l].id==t_n&&(p_q=Config.CItem(r_t[j_l].itemId),h_h=Utils.setSpace(1),n_j=Resource.ResManager.getQualityColor(p_q.quality),d_u+=Utils.setColor(Utils.$("{1}*{2}{3}",p_q.name,r_t[j_l].num,h_h),n_j))}var l_m=Utils.formatTimeStr3(b_s.time);this.desctxt.innerHTML=Utils.$(("{1}{2}"+j_x("572_2218")+"{3}{4}"+j_x("531_1976")+"{5}"),l_m,"<br>",Utils.setColor(d_m.toString(),"#00802e"),d_w.name,d_u)}else{for(var f_t in b_s.recs){var z_m=n_t.instance.getGiftCfgById(this.tagName,b_s.recs[f_t]);p_q=Config.CItem(z_m.reward[0]),h_h=Utils.setSpace(1),n_j=Resource.ResManager.getQualityColor(p_q.quality),d_u+=Utils.setColor(Utils.$("{1}*{2}{3}",p_q.name,z_m.reward[1],h_h),n_j)}l_m=Utils.formatTimeStr3(b_s.time),this.desctxt.innerHTML=Utils.$(("{1}{2}"+j_x("572_2218")+"{3}{4}"+j_x("531_1976")+"{5}"),l_m,"<br>",Utils.setColor(d_m.toString(),"#00802e"),d_w.name,d_u)}else this.desctxt.innerHTML="";this.spaceImage.y=this.desctxt.y+this.desctxt.contextHeight+2,this.height=this.desctxt.contextHeight+this.spaceImage.height+5},d_m);function d_m(){var e=d_u.call(this)||this;return e.desctxt.style.fontSize=22,e.desctxt.style.left=3,e.desctxt.style.leading=7,e.desctxt.style.color="#4a728e",e}e.LottertDrawRecordItem=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.lottert.LottertDrawResulteUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Mcpz(this,Stage,Laya)},b_s.prototype.onClick=function(e){Uiia(e,b_s)},b_s.prototype.onRemove=function(){Cxgy(this,Laya)},b_s.open=function(e){UIM.open(b_s,null,{data:e},!1,!1,!0,!0)},b_s.prototype.updateView=function(){var e=this.dataSource.data,p_l=e.times*n_t.instance.getTimeScore(this.tagName);this.integralShow.text=Utils.$((j_x("531_1976")+"{1}"+j_x("1763_1713_514")+j_x(2224)+""+j_x("1163_2035_514")+j_x("2224_1820_21")+j_x("1763_1713_1235")+j_x("1896_2217_1841")),p_l),e&&(1<e.times?(this.list.visible=!0,this.list.array=e.res,this.singleBox.visible=!1):1==e.times&&(this.list.visible=!1,this.singleBox.visible=!0,this.singleBox.dataSource=e.res[0],this.renderItem(this.singleBox,0)))},b_s.prototype.renderItem=function(p_l,p_g){var b_s=p_l.getChildByName("itemBox"),d_u=p_l.getChildByName("effecteClip");b_s||((b_s=new e.ItemBox).name="itemBox",p_l.addChild(b_s));var b_e=p_l.dataSource;if(this.tagName==LotterType.TREASURE){var d_m=MonthActivityModel.ins.MonthTrHunt,d_w=d_m[0].items,f_t=d_m[0].bestItems,v_z=b_e;for(var d_h in d_w)if(d_w[d_h].id==v_z){var r_t=Config.CItem(d_w[d_h].itemId);(f_y=new ModuleItemVO).id=r_t.id,f_y.amount=d_w[d_h].num,5<=r_t.quality?(d_u.visible=!0,d_u.play()):(d_u.visible=!1,d_u.stop()),b_s.setItemData(f_y),b_s.setName("")}for(var t_n in f_t)f_t[t_n].id==v_z&&(r_t=Config.CItem(f_t[t_n].itemId),(f_y=new ModuleItemVO).id=r_t.id,f_y.amount=f_t[t_n].num,5<=r_t.quality?(d_u.visible=!0,d_u.play()):(d_u.visible=!1,d_u.stop()),b_s.setItemData(f_y),b_s.setName(""))}else{var f_y,p_q=n_t.instance.getGiftCfgById(this.tagName,b_e);(f_y=new ModuleItemVO).id=p_q.reward[0],f_y.amount=p_q.reward[1],5<=(r_t=Config.CItem(p_q.reward[0])).quality?(d_u.visible=!0,d_u.play()):(d_u.visible=!1,d_u.stop()),b_s.setItemData(f_y),b_s.setName("")}},b_s.close=function(){Iyvt(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.list.renderHandler=Laya.Handler.create(e,e.renderItem,null,!1),e}e.LottertDrawResultePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.lottert.LottertDrawShowUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Onao(this,Laya)},b_s.prototype.updateView=function(){this.show||(this.show=new n_k,this.showModel.addChild(this.show));var e=n_t.instance.countActivityRound(this.tagName),p_l=n_t.instance.getCfgByNameAndRound(this.tagName,e);if(p_l){var p_g=Config.activity_turntable_mainShops[p_l.cfgShowByRound],b_s=0;if(this.tagName==LotterType.FASHION){if(this.title.skin="res/ui/activity/turnTable/shizhuangyulan.png",p_g){var d_u=Config.fashion_fashion[p_g.item[0]],b_e=Config.fashion_fashion[p_g.item[1]],d_m=LgcM.ins.heroVo,d_w=d_m.fashionWeapon,f_t=d_m.fashionClothes;b_e&&(2==b_e.type?d_w=b_e.id:1==b_e.type&&(f_t=b_e.id)),d_u&&(2==d_u.type?d_w=d_u.id:1==d_u.type&&(f_t=d_u.id)),d_m.type=Engine2d.ActorTypeDefine.PLAYER,this.show.changRoleSkin(d_m,!1,!0,d_w,f_t);var v_z=FashionModel.instance.getFashionUpgradeCnf(d_u.id,1);b_s=b_p.calPropFight(FashionModel.instance.getFashionPropertys(v_z.prop))}}else if(this.tagName==LotterType.RIDE){this.title.skin="res/ui/activity/turnTable/yujianyulan.png";var d_h=Config.ride_ride[p_g.item[0]];this.show.changeModel(d_h.model),this.show.stand(3);var r_t=[],t_n=(RideModel.toLevelCnfIndex(d_h.id,1),CharacterProperty.getPropertys(d_h.attr));CharacterProperty.mergePropertys(r_t,t_n),b_s=b_p.calPropFight(r_t)}else if(this.tagName==LotterType.DRAGON){this.title.skin="res/ui/activity/turnTable/longhunyulan.png",d_h=Config.dragon_dragon[p_g.item[0]];var f_y=LgcM.ins.heroVo,p_q=Resource.ResManager.getDefaultPlayerAvatar(f_y.fashionClothes,f_y.entryId);this.show.changeModel(p_q),this.show.state(),this.show.showStateEfts(d_h.effect,180),r_t=[],RideModel.toLevelCnfIndex(d_h.id,1),t_n=CharacterProperty.getPropertys(d_h.attr),CharacterProperty.mergePropertys(r_t,t_n),b_s=b_p.calPropFight(r_t)}this.renderFightBox(b_s)}},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close()}},b_s.open=function(e){UIM.open(b_s,null,{name:e},!1,!1,!0,!0)},b_s.prototype.renderFightBox=function(e){var p_l=Math.ceil(e/1e4),p_g=p_l.toString(),b_s=p_g.length;if(this.first.visible=!0,this.third.visible=!0,this.second.visible=!0,this.numBox.pos(this.numBoxPos.x,this.numBoxPos.y),1==b_s)this.first.visible=!1,this.third.visible=!1,this.second.visible=!0,this.second.index=p_l;else if(2==b_s){this.third.visible=!1;var d_u=parseInt(p_g[0]),b_e=parseInt(p_g[1]);this.second.index=b_e,this.first.index=d_u,this.numBox.x=288}else if(3==b_s){d_u=parseInt(p_g[0]),b_e=parseInt(p_g[1]);var d_m=parseInt(p_g[2]);this.second.index=b_e,this.first.index=d_u,this.third.index=d_m}},b_s.prototype.onRemove=function(){this.off(Laya.Event.CLICK,this,this.onClick),this.show&&this.show.clearRes()},b_s.close=function(){Qere(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.modelPos=new Laya.Point,e.modelPos.x=e.showModel.x,e.modelPos.y=e.showModel.y,e.numBoxPos=new Laya.Point,e.numBoxPos.x=e.numBox.x,e.numBoxPos.y=e.numBox.y,e}e.LottertDrawShowPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=e.LottertDrawMainPanel,__extends(b_s,p_l),b_s.prototype.changeViewImage=function(){var e=n_t.instance.countActivityRound(this.tagName),p_l=n_t.instance.getCfgByNameAndRound(this.tagName,e);if(p_l){var p_g=Config.activity_turntable_mainShops[p_l.cfgShowByRound];p_g?(this.sellingPoint.skin="res/ui/activity/turnTable/"+p_g.desc,this.mianShop.visible=!0):this.mianShop.visible=!1,this.rotateNeedle.skin="res/ui/activity/turnTable/zhizhen_yujian.png",this.goBtn.skin="res/ui/activity/turnTable/Button_yujian.png",this.bg.skin="res/ui/activity/turnTable/bg_yujian.jpg",this.title.skin="res/ui/activity/turnTable/xingyunzhuanpan.png",this.change2.skin="res/ui/activity/turnTable/choujiang_yujian.png",this.change1.skin="res/ui/activity/turnTable/benqizhuda_yujian.png"}},b_s.open=function(e){(e=e||ActivityModel.instance.getActivityConfigVo(FuncDefine.LottertDrawLucky))?UIM.open(b_s,["activity/turnTable.atlas"],{data:e}):b_p.broadcastNotice((j_x("1796_1878_206")+j_x("155_1186")))},b_s.prototype.stopAni=function(){Mtek(this,d_o,ItemSourceDefine,Laya)},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.LottertDrawLucky),b_s.close();break;case"goBtn":if(this.isPlayAni)return;var p_g=this.dataSource.data.subVo[0],d_u=Config.activity_activity[p_g.gsa_id].param,b_e=d_u&&d_u.showTime?d_u.showTime:0;if(p_g.sulTime-b_e<=0)return void b_p.broadcastNotice((j_x("2462_2035_1796")+j_x("1878_1702_2460")+j_x(1273)));if(!b_p.checkConsume(n_t.instance.getTimeConsume(this.tagName,this.isTenContinue),!0))return;var d_m=this.isTenContinue?10:1;d_o.instance.isOpenStartDeley=!0,n_t.instance.reqStartTurn(this.tagName,d_m,this.isBgActivity);break;case"checkAni":this.isTween=!this.isTween;break;case"checkTen":this.isTenContinue=!this.isTenContinue;break;case"recordClick":e.LottertDrawRecordPanel.open(this.tagName,this.isBgActivity);break;case"exchangeBtn":this.redPoint.visible=n_t.instance.getMemberInfo(this.tagName).isRedPoint=!1,e.LottertDrawExchangePanel.open(this.tagName,this.isBgActivity);break;case"rankBtn":e.LottertDrawRankPanle.open(this.tagName);break;case"showBtn":e.LottertDrawShowPanel.open(this.tagName)}},b_s.close=function(){Izak(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.tagName=LotterType.LUCKY,e}e.LottertDrawLuckyPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=e.LottertDrawMainPanel,__extends(b_s,p_l),b_s.prototype.changeViewImage=function(){var e=n_t.instance.countActivityRound(this.tagName),p_l=n_t.instance.getCfgByNameAndRound(this.tagName,e);if(p_l){var p_g=Config.activity_turntable_mainShops[p_l.cfgShowByRound];p_g?(this.sellingPoint.skin="res/ui/activity/turnTable/"+p_g.desc,this.mianShop.visible=!0):this.mianShop.visible=!1,this.rotateNeedle.skin="res/ui/activity/turnTable/zhizhen_shizhuang.png",this.goBtn.skin="res/ui/activity/turnTable/Button_shizhuang.png",this.bg.skin="res/ui/activity/turnTable/bg_shizhuang.jpg",this.title.skin="res/ui/activity/turnTable/jiehunchoujiang.png",this.change2.skin="res/ui/activity/turnTable/choujiang_shizhuang.png",this.change1.skin="res/ui/activity/turnTable/benqizhuda_shizhuang.png"}},b_s.prototype.onAdded=function(){Iqra(p_l,this,ActivityModel)},b_s.prototype.stopAni=function(){Adio(this,d_o,ItemSourceDefine,Laya)},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.LottertDrawMarry),b_s.close();break;case"goBtn":if(this.isPlayAni)return;var p_g=this.dataSource.data.subVo[0],d_u=Config.activity_activity[p_g.gsa_id].param,b_e=d_u&&d_u.showTime?d_u.showTime:0;if(p_g.sulTime-b_e<=0)return void b_p.broadcastNotice((j_x("2462_2035_1796")+j_x("1878_1702_2460")+j_x(1273)));if(!b_p.checkConsume(n_t.instance.getTimeConsume(this.tagName,this.isTenContinue),!0))return;var d_m=this.isTenContinue?10:1;d_o.instance.isOpenStartDeley=!0,n_t.instance.reqStartTurn(this.tagName,d_m,this.isBgActivity);break;case"checkAni":this.isTween=!this.isTween;break;case"checkTen":this.isTenContinue=!this.isTenContinue;break;case"recordClick":e.LottertDrawRecordPanel.open(this.tagName,this.isBgActivity);break;case"exchangeBtn":this.redPoint.visible=n_t.instance.getMemberInfo(this.tagName).isRedPoint=!1,e.LottertDrawExchangePanel.open(this.tagName,this.isBgActivity);break;case"rankBtn":e.LottertDrawRankPanle.open(this.tagName);break;case"showBtn":e.LottertDrawShowPanel.open(this.tagName)}},b_s.open=function(e){(e=e||ActivityModel.instance.getActivityConfigVo(FuncDefine.LottertDrawMarry))?UIM.open(b_s,["activity/turnTable.atlas"],{data:e}):b_p.broadcastNotice((j_x("1796_1878_206")+j_x("155_1186")))},b_s.close=function(){Qloy(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.tagName=LotterType.MARRY,e}e.LottertDrawMarryPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=e.LottertDrawMainPanel,__extends(b_s,p_l),b_s.prototype.changeViewImage=function(){var e=n_t.instance.countActivityRound(this.tagName),p_l=n_t.instance.getCfgByNameAndRound(this.tagName,e);if(p_l){var p_g=Config.activity_turntable_mainShops[p_l.cfgShowByRound];p_g?(this.sellingPoint.skin="res/ui/activity/turnTable/"+p_g.desc,this.mianShop.visible=!0):this.mianShop.visible=!1,this.rotateNeedle.skin="res/ui/activity/turnTable/zhizhen_yujian.png",this.goBtn.skin="res/ui/activity/turnTable/Button_yujian.png",this.bg.skin="res/ui/activity/turnTable/bg_yujian.jpg",this.title.skin="res/ui/activity/turnTable/xinfazhuanpan.png",this.change2.skin="res/ui/activity/turnTable/choujiang_yujian.png",this.change1.skin="res/ui/activity/turnTable/benqizhuda_yujian.png"}},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.LottertDrawMental),b_s.close();break;case"goBtn":if(this.isPlayAni)return;var p_g=this.dataSource.data.subVo[0],d_u=Config.activity_activity[p_g.gsa_id].param,b_e=d_u&&d_u.showTime?d_u.showTime:0;if(p_g.sulTime-b_e<=0)return void b_p.broadcastNotice((j_x("2462_2035_1796")+j_x("1878_1702_2460")+j_x(1273)));if(!b_p.checkConsume(n_t.instance.getTimeConsume(this.tagName,this.isTenContinue),!0))return;var d_m=this.isTenContinue?10:1;d_o.instance.isOpenStartDeley=!0,n_t.instance.reqStartTurn(this.tagName,d_m,this.isBgActivity);break;case"checkAni":this.isTween=!this.isTween;break;case"checkTen":this.isTenContinue=!this.isTenContinue;break;case"recordClick":e.LottertDrawRecordPanel.open(this.tagName,this.isBgActivity);break;case"exchangeBtn":this.redPoint.visible=n_t.instance.getMemberInfo(this.tagName).isRedPoint=!1,e.LottertDrawExchangePanel.open(this.tagName,this.isBgActivity);break;case"rankBtn":e.LottertDrawRankPanle.open(this.tagName);break;case"showBtn":e.LottertDrawShowPanel.open(this.tagName)}},b_s.open=function(e){(e=e||ActivityModel.instance.getActivityConfigVo(FuncDefine.LottertDrawMental))?UIM.open(b_s,["activity/turnTable.atlas"],{data:e}):b_p.broadcastNotice((j_x("1796_1878_206")+j_x("155_1186")))},b_s.prototype.stopAni=function(){Ulbw(this,d_o,ItemSourceDefine,Laya)},b_s.close=function(){Whhz(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.tagName=LotterType.HEART,e}e.LottertDrawMentalPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.mailUI,__extends(b_s,p_l),b_s.open=function(){Kvwp(UIM,b_s)},b_s.prototype.onRemove=function(){Gwzs(this,Laya,LED,l_r)},b_s.prototype.onAdded=function(){Ilnt(this,Laya,LED,l_r)},b_s.prototype.updateItem=function(e,p_l){var p_g=e.dataSource,d_u=e.getChildByName("titleLab"),b_e=e.getChildByName("timeLab"),d_m=e.getChildByName("barClip"),d_w=e.getChildByName("iconClip"),f_t=e.getChildByName("redpointImg"),v_z=e.getChildByName("giftImg"),d_h=e.getChildByName("stateImg");d_u.text=p_g.title,b_e.text=Utils.fmtDate(new Date(1e3*p_g.createTime));var r_t=0===p_g.flag;d_w.index=r_t?0:1,d_m.index=r_t?0:1,d_u.color=r_t?b_s.unreadTitleColor:b_s.readTitleColor,b_e.color=r_t?b_s.unreadTimeColor:b_s.readTimeColor,(f_t.visible=r_t)?(d_h.visible=!1,v_z.visible=p_g.attackment&&0<p_g.attackment.length):1===p_g.flag?(d_h.visible=!1,v_z.visible=p_g.attackment&&0<p_g.attackment.length):(d_h.visible=!0,v_z.visible=!1)},b_s.prototype.onClick=function(p_l){var p_g=p_l.target;if(p_g)switch(p_g.name){case"closeBtn":case"backBtn":this.closeSelf();break;case"onekeyBtn":for(var b_s=[],d_u=0,b_e=f_s.instance.getMailList();d_u<b_e.length;d_u++){var d_m=b_e[d_u];d_m.flag<2&&d_m.attackment&&0<d_m.attackment.length&&(b_s=b_s.concat(d_m.attackment))}if(!BagModel.instance.checkFreeSlot(b_s))return void b_p.confirm((j_x("1009_1968_1166")+j_x("130_1466_2460")+j_x("2462_1779")+""+j_x("774_1624_320")+j_x("1496_140_1166")+j_x("130_1865_2060")+j_x("1919_1174_2111")),(function(){e.DecomposePanel.open(0)}));f_s.instance.reqMailOp(3,0)}},b_s.prototype.closeSelf=function(){Wayo(b_s)},b_s.prototype.updateMailList=function(){Cdsw(this,f_s,j_x)},b_s.close=function(){Mwbh(UIM,b_s)},b_s.prototype.onListSelect=function(p_l){if(!(p_l<0)){var p_g=this.mailLst.array[p_l];0===p_g.flag&&f_s.instance.reqMailOp(1,p_g.idx),e.MailTipsPanel.open(p_g),this.mailLst.selectedIndex=-1}},b_s.unreadTitleColor="#42435a",b_s.unreadTimeColor="#42435a",b_s.readTitleColor="#5a6072",b_s.readTimeColor="#5a6072",b_s);function b_s(){var e=p_l.call(this)||this;return e.mouseEnabled=!0,e.mailLst.vScrollBarSkin="",e.mailLst.selectEnable=!0,e.mailLst.scrollBar.isVertical=!0,e.mailLst.scrollBar.elasticBackTime=600,e.mailLst.scrollBar.elasticDistance=200,e.mailLst.array=[],e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.MailPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.tips.mailTipUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Yivp(this,b_s,j_x,Laya)},b_s.prototype.onStageClick=function(e){var p_l=e.target;p_l&&this.viewBox.contains(p_l)||b_s.close()},b_s.open=function(e){Ayne(e,UIM,b_s)},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"grabBtn":if(this._infoVo&&this._infoVo.attackment&&0<this._infoVo.attackment.length&&this._infoVo.flag<2){var p_g=this._infoVo.attackment;if(!BagModel.instance.checkFreeSlot(p_g))return void b_p.confirm((j_x("1009_1968_1166")+j_x("130_1466_2460")+j_x("2462_1779")+""+j_x("774_1624_320")+j_x("1496_140_1166")+j_x("130_1865_2060")+j_x("1919_1174_2111")),(function(){e.DecomposePanel.open(0)}));f_s.instance.reqMailOp(2,this._infoVo.idx)}b_s.close();break;case"closeBtn":b_s.close()}},b_s.prototype.onDelay=function(){Iycg(Laya,this)},b_s.prototype.onRemove=function(){this.off(Laya.UIEvent.CLICK,this,this.onClick),this.listPanel.vScrollBar&&(this.listPanel.vScrollBar.value=0),Laya.stage.off(Laya.Event.CLICK,this,this.onStageClick)},b_s.prototype.updateItem=function(e,p_l){var p_g=e.getChildByName("itembox");p_g.visible=!0,e.dataSource?(p_g.isShowName=!0,p_g.isShowTick=!1,p_g.setItemData(e.dataSource,ItemBoxDefine.MODULE_ITEM,!0)):p_g.visible=!1},b_s.prototype.updateData=function(){if(this._infoVo=this.dataSource,this._infoVo){this.contentLab.text=this._infoVo.content;var e=this._infoVo.content.length,p_l=parseInt(((e-126)/30).toString())+1;0<(e-126)%30&&(p_l+=1),126<e&&(this.listPanel.vScrollBarSkin=""),this.bgimg.height=126<e?140+30*p_l:140,this.list.height=126<e?140+30*p_l:140;var p_g,d_u=this._infoVo.attackment;if((this.itemLst.array=d_u).length<4&&0<d_u.length||d_u.length<8&&4<d_u.length){p_g=[];for(var b_e=void 0,d_m=4<d_u.length?8:4,d_w=0;d_w<d_m;d_w++)b_e=d_u[d_w]?(b_e=new ModuleItemVO,d_u[d_w]):(b_e=new ModuleItemVO,null),p_g.push(b_e);this.itemLst.array=p_g}this.bgImg.height=4<this.itemLst.array.length?609:483,this.itemLst.height=4<this.itemLst.array.length?253:144,this.bottomImg.height=4<this.itemLst.array.length?452:326,this.grabBtn.y=4<this.itemLst.array.length?528:402,this.stateImg.y=4<this.itemLst.array.length?522:396,this.itemLst.vScrollBarSkin=null,8<this.itemLst.array.length&&(this.itemLst.vScrollBarSkin="",this.itemLst.scrollBar.elasticBackTime=500,this.itemLst.scrollBar.elasticDistance=200),(!this._infoVo.attackment||this._infoVo.attackment.length<=0||2===this._infoVo.flag)&&(this.grabBtn.skin=b_s.confirmBtnSkin,this.grabBtn.label=(j_x("2085_4")),this.grabBtn.labelColors="#2c2f62"),this.stateImg.visible=!(this._infoVo.flag<2)}},b_s.prototype.destroy=function(e){Ewro(e,p_l,this)},b_s.close=function(){Svsz(UIM,b_s)},b_s.confirmBtnSkin="res/ui/common/Button_common_01.png",b_s.grabBtnSkin="res/ui/common/Button_common_02.png",b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.MailTipsPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.main.addPuppetPageUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){LED.on(l_r.SELECTED_ACTOR_CHANGE,this,this.onSelectMonsterInfo),LED.on("movetotarget",this,this.onMoveTo),LED.on("REQ_USE_SKILL",this,this.useSkillInfo),this.invincible_cb.clickHandler=Laya.Handler.create(this,this.onInvincible,null,!1),this.highAtt_cb.clickHandler=Laya.Handler.create(this,this.onHighAttack,null,!1),this.notskillCD_cb.clickHandler=Laya.Handler.create(this,this.onChangeSkillCD,null,!1),this.sp=new Laya.Sprite,Engine2d.Hero.local.addChildAt(this.sp,0),this.notskillCD_cb.selected=!1},b_s.prototype.onRemoved=function(){Gqoa(LED,l_r,this)},b_s.prototype.onChangeSkillCD=function(){this.notskillCD_cb.selected&&n_d.instance.reqChat(1,"@gm skillcdAll")},b_s.prototype.onMoveTo=function(){Kung(this)},b_s.prototype.onClick=function(e){switch(e.target.name){case"addpuppet":this.onAddPuppet();break;case"clearpuppet":n_d.instance.reqChat(1,"@gm leaveAll");break;case"unfoldbtn_left":Laya.Tween.to(this.addpuppetPage,{f_u:-300},500),this.regainbtn_left.visible=!0,this.unfoldbtn_left.visible=!1;break;case"regainbtn_left":Laya.Tween.to(this.addpuppetPage,{f_u:0},500),this.regainbtn_left.visible=!1,this.unfoldbtn_left.visible=!0}},b_s.prototype.onHighAttack=function(){if(this.monsterID&&this.highAtt_cb.selected){var e="@gm monsterbuff add "+this.monsterID+" 12";n_d.instance.reqChat(1,e)}else e="@gm monsterbuff del "+this.monsterID+" 12",n_d.instance.reqChat(1,e)},b_s.prototype.onSelectMonsterInfo=function(e){e&&(this.monsterinfo=e,this.monsterID=e.id,this.monsterX=e.x,this.monsterY=e.y)},b_s.prototype.onInvincible=function(){if(this.monsterID&&this.invincible_cb.selected){var e="@gm monsterbuff add "+this.monsterID+" 7";n_d.instance.reqChat(1,e)}else e="@gm monsterbuff del "+this.monsterID+" 7",n_d.instance.reqChat(1,e)},b_s.prototype.useSkillInfo=function(e){if(this.skillRange_cb.selected){var p_l=Config.skill_skill[e].range;this.skillName=p_l[0];var p_g=Engine2d.Hero.local.fightingCtrl.curDir;switch(this.sp.graphics.clear(),0==p_g&&(this.sp.rotation=-90),1==p_g&&(this.sp.rotation=-45),2==p_g&&(this.sp.rotation=0),3==p_g&&(this.sp.rotation=45),4==p_g&&(this.sp.rotation=90),5==p_g&&(this.sp.rotation=135),6==p_g&&(this.sp.rotation=180),7==p_g&&(this.sp.rotation=225),console.log(p_g),this.sp.x=0,this.skillName){case"sector":this.sp.rotation-=20,this.sp.graphics.drawPie(this.sp.x,this.sp.y,p_l[1],0,p_l[2],null,"#FF0000",4);break;case"line":this.sp.graphics.drawRect(this.sp.x,this.sp.y,p_l[1],p_l[2],null,"#FF0000",4);break;case"round":this.sp.graphics.drawCircle(this.sp.x,this.sp.y,p_l[1],null,"#FF0000",4)}}else this.sp.graphics.clear();this.notskillCD_cb.selected&&n_d.instance.reqChat(1,"@gm skillcdAll")},b_s.prototype.onAddPuppet=function(){Ualk(n_d)},b_s);function b_s(){var e=p_l.call(this)||this;return e.monsterID=0,e.monsterX=0,e.monsterY=0,e.skillName="",e.on(Laya.Event.CLICK,e,e.onClick),e.unfoldbtn_left.visible=!0,e.regainbtn_left.visible=!1,e.mouseThrough=!0,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.AddPuppetPage_test=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.main.TestDamageDataPageUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Mjqg(LED,l_r,this,Laya)},b_s.prototype.onClickRegain=function(){this.regainbtn_right.visible=!1,this.unfoldbtn_right.visible=!0,Laya.Tween.to(this.damagedataPage,{f_u:this.x+287},500)},b_s.prototype.onShowTotalDamage=function(){Ctdt(this)},b_s.prototype.onRemoved=function(){Oqdn(LED,l_r,this)},b_s.prototype.onDamageData=function(e){for(var p_l=0;p_l<e.hit.length;p_l++)e.releaseId==b_p.playerId&&(this.totalDamageinfo+=e.hit[p_l].damage,this.damageList.push(e.hit[p_l].damage));e.releaseId==b_p.playerId&&(this.totalDamage.text=this.totalDamageinfo.toString())},b_s.prototype.onShowSingleDamage=function(){0<this.damageList.length?(this.damageList.sort(),this.biggestDamage.text=this.damageList[this.damageList.length-1].toString(),this.damageList=[]):this.biggestDamage.text="0"},b_s.prototype.onClickUnfold=function(){this.regainbtn_right.visible=!0,this.unfoldbtn_right.visible=!1,Laya.Tween.to(this.damagedataPage,{f_u:this.x-460},500)},b_s);function b_s(){var e=p_l.call(this)||this;return e.damageList=[],e.totalDamageinfo=0,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.regainbtn_right.visible=!0,e.unfoldbtn_right.visible=!1,e.mouseThrough=!0,e}e.DamageDataPage_test=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.main.gunpingUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Odwz(LED,l_r,this)},b_s.prototype.play=function(){this._mask||(this._mask=new Laya.Sprite,this._mask.graphics.drawRect(0,0,this.width,this.height,"#FFFFFF"),this._mask.visible=!1),this.box.addChildAt(this._mask,0),this.box.mask=this._mask,this.isPlaying=!0,this.textList.sort(this.sortList);var e=this.textList.shift();this.html.innerHTML=e.msg,this.html.x=this.width,this.html.width=this.html.contextWidth;var p_l=Config.notice[e.id];if(p_l){var p_g=p_l.bg_index?p_l.bg_index:1;this.setBgVisible(p_g,!0)}else this.setBgVisible(1,!0);Laya.timer.loop(20,this,this.countdown)},b_s.prototype.sortList=function(e,p_l){return e.id===p_l.id?e.time-p_l.time:p_l.id-e.id},b_s.prototype.setContent=function(e,p_l){this.textList||(this.textList=[]);var p_g=SyncTime.getTimer();this.textList.push({msg:e,id:p_l,time:p_g}),this.isPlaying||this.play()},b_s.open=function(e,p_l){null==b_s.instance&&(b_s.instance=new b_s),b_s.instance.parent||UIM.instance.addToTopLayer(b_s.instance),b_s.instance.setContent(e,p_l)},b_s.prototype.repos=function(){var e=Config.map[b_p.mapID];e&&1!=e.funType&&2!=e.funType&&3!=e.funType&&4!=e.funType?this.pos(160,160):this.pos(70,160)},b_s.prototype.onRemoved=function(){Oioy(LED,l_r,this)},b_s.prototype.countdown=function(){this.html.x-=2,this.html.x+this.html.width<=0&&(Laya.timer.clear(this,this.countdown),this.isPlaying=!1,0<this.textList.length?this.play():(this.box.mask=null,this.box.removeChild(this._mask),this.removeSelf()))},b_s.prototype.setBgVisible=function(e,p_l){for(var p_g=1,b_s=!1;this["bg_"+p_g];){var d_u=this["bg_"+p_g];d_u.visible=e===p_g,++p_g,d_u.visible&&(b_s=!0)}b_s||(this.bg_1.visible=!0)},b_s);function b_s(){var e=p_l.call(this)||this;return e.pos(70,160),e.html.style.font=b_p.config.font,e.html.style.fontSize=26,e.html.style.color=Config.color[1].color,e.html.style.wordWrap=!1,e.html.style.valign="middle",e.removeChild(e.maskSp),e.box.mask=null,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.GunPingView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.main.main_leftUI,__extends(b_s,p_l),b_s.prototype.showActivityBox=function(){this.activityBox=new l_a,this.activityBox.y=this.activityImg.y,this.activityBox.x=this.activityImg.x+this.activityImg.width,this.addChild(this.activityBox),this.setChildIndex(this.activityImg,this.numChildren-1)},b_s.prototype.updatevipExp=function(){var e=LgcM.ins.heroVo.vipExp/100;this.TXVipBtn.visible=(GPlatform.isTX||GPlatform.isDebug)&&2e3<e},b_s.prototype.onSevenDayTarget=function(){var e=SevenDayTargetModel.instance.activityCountDount();e<=0&&SevenDayTargetModel.instance.main_deleteSevenTargetIcon()?this._checkSvenTarget||(this._checkSvenTarget=this.sevenday.visible=!1,Laya.timer.clear(this,this.onSevenDayTarget),LED.off(l_r.SEVEN_TARGET_TASK_UPDATE,this,this.onSevenDayTarget),LED.off(l_r.SEVEN_TARGET_LIVINESS_UPDATE,this,this.onSevenDayTarget)):(this._isStartTime||(this._isStartTime=!0,this.sevenday.visible=!0,Laya.timer.loop(1e3,this,this.onSevenDayTarget)),this.sevendaycountdowm.text=0<e?Utils.formatTimeStr2_new(e,!0):"",this.baseMap.visible=0<e,this.sevenday_red.visible=SevenDayTargetModel.instance.main_sevenTarget(),this._checkSvenTarget=!0)},b_s.prototype.updateFirstBtn=function(e){void 0===e&&(e=!0);var p_l=!1;if(GPlatform.isShowRecharge){var p_g=ActivityModel.instance.firstRechargeVo;p_g&&(p_l=!!e&&p_g.gold<=0)}this.firstBtn.visible=p_l},b_s.prototype.onMouseDown=function(){Wdrl(this)},b_s.prototype.onAdded=function(){this.firstBtn.visible=!1,this.first_red.visible=!1,this.sevenday.visible=!1,this.sysNoticeBox.effect_activebox.visible=!1,this.packup.visible=!0,this.guildTip.visible=!1,this.helperbtn.on(Laya.Event.CLICK,this,this.OnDialogClick),this.taskTxt.on(Laya.Event.LINK,this,this.onTaskLink),this.taskCheckBox.on(Laya.Event.CLICK,this,this.OnDialogClick),this.taskBox.on(Laya.Event.CLICK,this,this.OnDialogClick),this.relevanceBtn.on(Laya.Event.CLICK,this,this.OnDialogClick),this.activityImg.on(Laya.Event.CLICK,this,this.OnDialogClick),this.sysNoticeBox.on(Laya.Event.MOUSE_UP,this,this.onTalismanMouseUp),this.btn_collect.on(Laya.Event.CLICK,this,this.OnDialogClick),this.taskBox.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),this.taskMask.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),this.sysNoticeBox.on(Laya.Event.MOUSE_DOWN,this,this.onTalismanMouseDown),this.taskBox.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.taskMask.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.taskBox.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.sysNoticeBox.on(Laya.Event.CLICK,this,this.OnDialogClick),this.sysNoticeBox.on(Laya.Event.MOUSE_OUT,this,this.onTalismanMouseUp),this.taskMask.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.btn_gift.on(Laya.Event.CLICK,this,this.OnDialogClick),this.firstBtn.on(Laya.Event.CLICK,this,this.OnDialogClick),this.minebtn.on(Laya.Event.CLICK,this,this.OnDialogClick),this.crossButton.on(Laya.Event.CLICK,this,this.OnDialogClick),this.btn_gymkhana.on(Laya.Event.CLICK,this,this.OnDialogClick),this.packup.on(Laya.Event.CLICK,this,this.OnDialogClick),this.xinyueBox.on(Laya.Event.CLICK,this,this.OnDialogClick),this.qqLiveBox.on(Laya.Event.CLICK,this,this.OnDialogClick),this.TXVipBtn.on(Laya.Event.CLICK,this,this.OnDialogClick),this.guildPvpBtn.on(Laya.Event.CLICK,this,this.OnDialogClick),this.btnSouthSky.on(Laya.Event.CLICK,this,this.onClickSouthSkyBtn),this.btn_adventure.on(Laya.Event.CLICK,this,this.onClickAdventureBtn),this.crossBossTip.visible=!1,LED.on(l_r.GUILD_TIP_UPDATE,this,this.guildHint),LED.on(l_r.HELPER_UPDATE_INFO,this,this.onUpdateHelperRed),LED.on(l_r.TASK_INIT_INFO,this,this.onInitTask),LED.on(l_r.TASK_ACCEPT,this,this.onUpdateTask),LED.on(l_r.TASK_COMPLETE,this,this.onUpdateTask),LED.on(l_r.TASK_PROGRESS_UPDATE,this,this.onUpdateTask),LED.on(l_r.SYSTEM_NOTICE_IFNO,this,this.updateSysNotice),LED.on(l_r.PLOTING_START,this,this.onUpdatePloting),LED.on(l_r.PLOTING_END,this,this.onUpdatePloting),LED.on(l_r.SCENE_CHANGE,this,this.onSceneChange),LED.on(l_r.WX_COLLECT,this,this.updateWebChat),LED.on(l_r.WX_COLLECT,this,this.updateRelevance),LED.on(l_r.WANBA_COLLECT,this,this.updateRelevance),LED.on(l_r.SHARE,this,this.updateShareBtn),LED.on(l_r.ITEM_INFO_UPDATE,this,this.onBagInit),LED.on(l_r.MINE_ROLE_INFO,this,this.updataMineRedPoint),LED.on(l_r.ACTIVITY_BGA_FIRST_RECHARGE,this,this.updateDateFirstRechage),LED.on(l_r.UPDATE_SHARE_STATUR,this,this.updateShareBtn),LED.on(l_r.MINE_ROBED_REMIND,this,this.showMineTip),LED.on(l_r.STATE_SUB_LV_UP,this,this.showIcon),LED.on(l_r.STATE_INFO_UPDATE,this,this.showIcon),LED.on(l_r.HERO_STATE_CHANGE,this,this.showIcon),LED.on(l_r.GYMKHANA_RED_POINT,this,this.updataGymkhanaRedPoint),LED.on(l_r.GYMKHANA_MAIN_INFO,this,this.updataGymkhanaRedPoint),LED.on(l_r.GYMKHANA_RED_POINT,this,this.showGymkhanaTip),LED.on(l_r.FB_UPDATE_INFO,this,this.updateSysNotice),LED.on(l_r.SEVEN_TARGET_TASK_UPDATE,this,this.onSevenDayTarget),LED.on(l_r.SEVEN_TARGET_LIVINESS_UPDATE,this,this.onSevenDayTarget),LED.on(l_r.TEAM_INFO_UPDATE,this,this.onTeamUpdate),LED.on(l_r.TEAM_BE_INVITE,this,this.onTeamUpdate),LED.on(l_r.DA_BE_INVITE,this,this.onFightTeamUpdate),LED.on(l_r.DA_TEAM_INFO_UPDATE,this,this.onFightTeamUpdate),LED.on(l_r.GUILD_INFO_UPDATE,this,this.updateItemInfo),LED.on(l_r.GUILD_REQUEST_UPDATE,this,this.updateItemInfo),LED.on(l_r.GUILD_CHECKIN_UPDATE,this,this.updateItemInfo),LED.on(l_r.GUILD_AUCTION_LIST,this,this.updateItemInfo),LED.on(l_r.GUILD_HELP_INFO,this,this.updateItemInfo),LED.on(l_r.GUILD_HELP_LIST,this,this.updateItemInfo),LED.on(l_r.GUILD_HELP_MY_LIST,this,this.updateItemInfo),LED.on(l_r.GUILD_BOSS_LIST,this,this.updateItemInfo),LED.on(l_r.FB_INFO_UPDATE,this,this.updateCharge),LED.on(l_r.Xinyue_Gift_Status,this,this.updateXinYueBox),LED.on(l_r.RECHARGE_VIPEXP_CHANGE,this,this.updatevipExp),LED.on(l_r.UPDATE_HEAVEN_OPENE,this,this.updatebtnSouthSkyBtn),LED.on(l_r.ADVENTURE_UPDATE_INFO,this,this.onAdventure),LED.on(l_r.CROSS_BOSS_TIMEBOSS_OPEN,this,this.showCrossBossTip),LED.on(l_r.CITY_NOTICE_TIP,this,this.showGuildPvpTip),LED.on(l_r.GUILD_CITY_REWARD_RED,this,this.updateGuildPvpRed);var e=Config.activity_activity[FuncDefine.firstRecharge];ActivityModel.reqActivityRecord(e.type),Laya.timer.once(500,this,this.onUpdateTask),this.onUpdateHelperRed(),this.y=170+GPlatform.concaveOffsetY,this.bagbtn.on(Laya.Event.CLICK,this,this.onClickBagBtn),this.btnWbShare.on(Laya.Event.CLICK,this,this.OnDialogClick),this.onBAG_DAILYLocation(),this.taskEftStop(!0),SevenDayTargetModel.instance.reqSevenDayInfo(),AdventureModel.ins.reqUpdateAdventureInfo(),this.sevenday.on(Laya.Event.CLICK,this,this.onCLickSeven),Laya.timer.once(90,this,this.initRightBox)},b_s.prototype.updateCharge=function(){Ubgc(this)},b_s.prototype.onTalismanMouseDown=function(){var e=SystemNoticeManager.instance.getCanTalismanGain();e[0]&&1<=SystemNoticeManager.instance.talismanBarValue(e[0])&&this.sysNoticeBox.scale(1.2,1.2)},b_s.prototype.onFightTeamUpdate=function(){if(this.tianjieTeamTip.visible=!1,!DungeonModel.instance.isInFb){var e=this.tianjieTeamTip.getChildByName("redPoint");DoubleAreaModel.instance.getHaveBeviteAll()&&(e.visible=!0,this.tianjieTeamTip.visible=!0,this.tianjieTeamTip.dataSource={type:"bevite",data:[]}),this.tianjieTeamTip.visible?this.tianjieTeamTip.on(Laya.Event.CLICK,this,this.onClickFightTeam):this.tianjieTeamTip.off(Laya.Event.CLICK,this,this.onClickFightTeam)}},b_s.prototype.onMouseUp=function(){Qxzc(this)},b_s.prototype.showIcon=function(){Ivbb(this)},b_s.prototype.onTalismanMouseUp=function(){Kpkq(this)},b_s.prototype.onUpdateHelperRed=function(){HelperModule&&HelperModule.instance.initValue()&&(0<HelperModule.instance.initValue().length?this.helperRedImg.visible=!0:(this.helperbtn.visible=this.helperRedImg.visible=!1,0==this.helperbtn.visible&&e.HelperPanel.close()))},b_s.prototype.onRemove=function(){Gkti(LED,l_r,this,Laya)},b_s.prototype.onCLickSeven=function(){Ydph(e)},b_s.prototype.updateDateFirstRechage=function(){Qols(this,ActivityModel)},b_s.prototype.onTeamUpdate=function(){if(this.teamTipBox.visible=!1,!DungeonModel.instance.isInFb){var e=TeamModel.instance.getHaveTeamAll(),p_l=this.teamTipBox.getChildByName("redPointTxt");e?(p_l.text=e.teamInfoVo.memberCount.toString(),this.teamTipBox.visible=!0,this.teamTipBox.dataSource={type:"myTeam",data:e}):(e=TeamModel.instance.getHaveBeviteAll())&&(p_l.text=e.beInviteCount.toString(),this.teamTipBox.visible=!0,this.teamTipBox.dataSource={type:"bevite",data:e}),this.teamTipBox.visible?this.teamTipBox.on(Laya.Event.CLICK,this,this.onClickTeam):this.teamTipBox.off(Laya.Event.CLICK,this,this.onClickTeam)}},b_s.prototype.onBAG_DAILYLocation=function(){this.bagbtn.y=this.taskBox.y+this.taskBox.height/2-30,this.dailyIcon.y=this.bagbtn.y-this.bagbtn.height,this.helperbtn.visible&&(this.helperbtn.y=this.dailyIcon.y-this.helperbtn.height),this.packup.y=this.bagbtn.y+this.bagbtn.height},b_s.prototype.onClickFightTeam=function(){var p_l=this.tianjieTeamTip.dataSource.type;"bevite"==p_l?e.DoubleTeamBiInvitePanel.open():"myTeam"==p_l&&e.DoubleTeamMainPanel.open()},b_s.prototype.initGymkhanaBtn=function(){gymkhanaModel.instance.noticInfo?this.showGymkhanaTip():this.hideGymkhanaTip(),this.updateGymkhanaBtn(!0),this.updatebtnSouthSkyBtn()},b_s.prototype.updateGymkhanaBtn=function(e){void 0===e&&(e=!1);var p_l=p_k.instance.checkSystemOpenByName("gymkhanaPanel");this.btn_gymkhana.visible=!this.isHide&&p_l,p_l&&e&&this.updataGymkhanaRedPoint()},b_s.prototype.initRightBox=function(){Iixo(this,ActivityIconManager,ActivityTypeDefine,SystemNoticeManager,e)},b_s.prototype.onAdventure=function(){Laya.timer.clear(this,this.onAdventure);var e=AdventureModel.ins.getEndTime(),p_l=e-SyncTime.serverTime/1e3;0==e?(this.adv_time_label.text=(j_x("1796_1878_1300")+j_x("396_2426")),this.adv_time_label.visible=!1,this.adv_img_bg.visible=!1,this.btn_adventure.visible=!1):0<p_l?(Laya.timer.once(1e3,this,this.onAdventure),this.adv_time_label.text=Utils.formatTimeStr(Math.floor(p_l)),this.adv_time_label.visible=!0,this.adv_img_bg.visible=!0,this.btn_adventure.visible=!0,"hangup"==Config.map[b_p.mapID].impl?this.btn_adventure.visible=!0:this.btn_adventure.visible=!1):(this.adv_time_label.text=(j_x("1796_1878_1300")+j_x("396_2426")),this.adv_time_label.visible=!1,this.adv_img_bg.visible=!1,this.btn_adventure.visible=!1)},b_s.prototype.onClickTeam=function(){var p_l=this.teamTipBox.dataSource,p_g=p_l.type,b_s=p_l.data;"bevite"==p_g?e.TeamBeInvitePanel.open(b_s.aims):"myTeam"==p_g&&TeamHelp.openTeamPanel(b_s)},b_s.prototype.updateGift=function(){this.btn_gift.visible=GPlatform.isShowRecharge&&GPlatform.isWx},b_s.prototype.isShowLeftBtn=function(e){Oeqa(e,this)},b_s.prototype.updatebtnSouthSkyBtn=function(){this.btnSouthSky.visible=!this.isHide&&1==LgcM.ins.heroVo.heavenOpenState},b_s.prototype.updateTaskBox=function(){this.taskBox&&(this.taskBox.visible=!(this.isHide||!TaskManager.instance.isTaskInit||!p_p.instance.mainVo))},Object.defineProperty(b_s.prototype,"isHide",{get:function(){return GlobalData.isFb},enumerable:!0,configurable:!0}),b_s.prototype.isShowFigthBtn=function(e){Mfpa(e,this)},b_s.prototype.updateRelevance=function(){var e=ShareMgr.ins.relevanceBtnShow();this.relevanceBox.layoutEnabled=this.relevanceBox.visible=e,e&&(this.relevanceRed.visible=ShareMgr.ins.canRewardRelevance),this.updateWebChat(),this.platformBox.refresh()},b_s.prototype.showMineTip=function(){Gzry(this)},b_s.prototype.finishTaskFadeOut=function(){if(!1!==this.taskBox.visible){this.playFinishEffect(),this.taskTxt.visible=!1;var e=new Laya.HTMLDivElement;e.style.color="#86bed7",e.style.fontSize=20,e.style.font=b_p.config.font,e.style.leading=5,e.size(this.taskTxt.width,this.taskTxt.height),this.taskTxt.parent.addChild(e),e.pos(this._taskPosX,this.taskTxt.y),e.innerHTML=p_p.instance.formatMainTaskContent(),Laya.Tween.to(e,{f_u:this.x+40,alpha:0},200,null,Laya.Handler.create(this,this.tweenFadeOutComplete,[e]),null,!0)}},b_s.prototype.updataMineRedPoint=function(){var e=this.minebtn.getChildByName("mineRedImg");e&&(e.visible=MineModel.instance.getRedPoint())},b_s.prototype.setHideActivityBox=function(e){var p_l;void 0===e&&(e=!1),this.activityBox&&(p_l=!e&&(-1<this._activityStatus?0<this._activityStatus:UIM.instance.checkShowActivityBox()),this.activityBox.showMoveEft(p_l),this.zhankaiImg.visible=p_l,this.shouhuiImg.visible=!p_l)},b_s.prototype.onaniStart=function(e){void 0===e&&(e=0),0==e?(this.packVisable(),this.packup.visible=!1):(this.packVisable(1),this.packup.visible=!0)},b_s.prototype.tamEftStart=function(){this.sysNoticeBox.tamBarEft&&(this.sysNoticeBox.tamBarEft.visible=!0,this.sysNoticeBox.tamBarEft.play(!1),this.sysNoticeBox.tamBarEft.on(Laya.Event.COMPLETE,this,this.taskEftStop))},b_s.prototype.tweenFadeOutComplete=function(e){e&&(e.destroy(),e=null)},b_s.prototype.showRoleModel=function(e,p_l,p_g,b_s,d_u){if(void 0===p_g&&(p_g="stand"),void 0===b_s&&(b_s=1),void 0===d_u&&(d_u=[0,0]),e&&""!=e){var b_e=p_l.getChildByName("roleModel");b_e||((b_e=new n_k).name="roleModel",p_l.addChild(b_e)),b_e.changeModel(e),b_e.pos(d_u[0],d_u[1]),b_e.scale(b_s,b_s),b_e.setAction(p_g,0,!0)}},b_s.prototype.hideGymkhanaTip=function(){Ikgf(this)},b_s.prototype.onBagInit=function(){Yejb(ConsumableModel,this)},b_s.prototype.guildHint=function(e){if(1==e)this.guildTip.visible=!1;else{if(!GuildModel.instance.hasGuild)return;this.guildTip.x=this.bagbtn.x-this.guildTip.width,this.guildTip.y=this.bagbtn.y-30,this.guildTip.visible=!0}},b_s.prototype.initMineBtn=function(){var e=p_k.instance.checkSystemOpenByName("MineView");if(this.minebtn.visible=e){var p_l=Config.map[b_p.mapID];p_l&&p_l.funType===MapFunType.HangUp?this.minebtn.visible=!0:this.minebtn.visible=!1}},b_s.prototype.onClickBagBtn=function(){GuildModel.instance.hasGuild?e.GuildMainPanel.open(!0):e.GuildListPanel.open(!0)},b_s.prototype.changeTaskState=function(){p_p.instance.getMainTaskState()===TaskState.COMPLETE?(this.taskEffect.visible=!0,this.taskEffect.play()):(this.taskEffect.visible=!1,this.taskEffect.stop())},b_s.prototype.changeAdapt=function(){GPlatform.needAdapt&&(this.sysNoticeBox.y*=GPlatform.ratioY,this.taskBox.y*=GPlatform.ratioY,this.sysNoticeBox.y-=GPlatform.concaveButtomY,this.taskBox.y-=GPlatform.concaveButtomY,this.width=Stage.width,this.bagbtn.x=this.dailyIcon.x=this.width-100,this.helperbtn.x=this.bagbtn.x=this.width-100,this.sevenday.x=this.bagbtn.x,this.rightpanel.x=this.bagbtn.x-113,this.packup.x=this.bagbtn.x+12,this.firstBtn.y*=GPlatform.ratioY,GPlatform.curRatioPix>GPlatform.designRatioPix&&(this.y+=GPlatform.concaveOffsetY))},b_s.prototype.playFinishEffect=function(){Cmha(this,Laya)},b_s.prototype.updateItemInfo=function(){this.rp_bag.visible=p_k.instance.checkSystemOpen(FuncDefine.guild)&&GuildModel.instance.hasGuild&&(GuildModel.instance.checkRpGive||GuildModel.instance.hasAuction||GuildModel.instance.checkRpHall||GuildModel.instance.checkRpHelp||GuildModel.instance.checkRpCheckin||GuildModel.instance.hasBoss)},b_s.prototype.OnDialogClick=function(p_l){var p_g=p_l.target;switch(p_g.name){case"activityImg":var b_s=Date.now();if(b_s-this._lastClickActImg<500);else{this._lastClickActImg=b_s;var d_u=!this.activityBox.isShowing();this.activityBox.showMoveEft(d_u),this._activityStatus=d_u?1:0,this.zhankaiImg.visible=d_u,this.shouhuiImg.visible=!d_u}break;case"taskCheckBox":TaskManager.instance.isAutoTask=this.taskCheckBox.selected;break;case"taskBox":case"taskMask":case"taskTxt":LgcM.ins.onBtnMouseDownSound(null);var b_e=TaskManager.instance.continueDoTask(),d_m=p_p.instance.mainVo,d_w=SystemNoticeManager.instance.getCanTalismanGain(1);if(d_w&&d_w.length&&d_m&&d_m.state===TaskState.COMPLETE&&"task"==d_w[0].task[0]&&Laya.timer.once(16,this,this.taskEftStart),!b_e){var f_t=p_p.instance.mainVo;if(!f_t)return;var v_z=Config.task_task[f_t.id].need;if(v_z&&"hangupAim"!=v_z[0][0]||v_z[0][2]!=b_p.mapID)return;b_p.broadcastNotice((j_x("1300_2035_1327")+j_x("711_836_2391")))}break;case"sysNoticeBox":this.sysNoticeBox.mouseEnabled=!1,function(){var p_l=SystemNoticeManager.instance.getCanTalismanGain();if(p_l[0]&&1<=SystemNoticeManager.instance.talismanBarValue(p_l[0])){var p_g=Config.talisman_talisman[p_l[0].talismanid],b_s=UIM.instance.getMainLetUI();r_n.instance.flyLittleToBagEffect(p_g.icon,b_s.taskPoint,b_s.middlePoint,1,3.5,(function(){SystemNoticeManager.instance.reqSystemOpenReward(p_l[0].funcId),e.TalismanOpenPanel.open(p_l[0].talismanid)}))}else e.SystemGainPanel.open(),LgcM.ins.onBtnMouseDownSound(null)}();break;case"btn_collect":GPlatform.isWanba||GPlatform.isYZX?e.WanbaCollectPanel.open():e.WebChatCollectPanel.open();break;case"btn_gift":GPlatform.isWx&&WXPlatform.instance.linkCustom();break;case"shareBtn":case"btnWbShare":ShareMgr.ins.isHasShareReward?e.BenefitView.open(BenefitType.share):e.FirstSharePanel.open();break;case"firstBtn":e.FirstRechargePanel.open();break;case"minebtn":e.MineView.open();break;case"helperbtn":if(UIM.instance.isOpenWin(e.HelperPanel))return void e.HelperPanel.close();e.HelperPanel.open([p_g.x,p_g.y]);break;case"crossButton":ActivityModel.instance.getActivityVoByType(ActivityTypeDefine.CS_crossBoss)?e.crossBossMainPanel.open():b_p.broadcastNotice((j_x("1662_1998_206")+j_x("155_1186")));break;case"btn_gymkhana":e.gymkhanaPanel.open();break;case"packup":90==this.packupimg.rotation?this.packVisable():this.packVisable(1);break;case"relevanceBtn":GPlatform.isYZX?e.YZXDialogPanel.open():e.RelevanceOAccPanel.open();break;case"xinyueBtn":e.XinYueGiftUI.open();break;case"qqLiveBtn":e.QQLiveUI.open();break;case"TXVipBtn":e.TXDialogPanel.open();break;case"guildPvpBtn":e.GuildPvpMainPanel.open()}},b_s.prototype.taskEftStart=function(){this.taskEft&&(this.taskEft.off(Laya.Event.COMPLETE,this,this.tamEftStart),this.taskEft.visible=!0,this.taskEft.play(!1),this.taskEft.on(Laya.Event.COMPLETE,this,this.tamEftStart))},b_s.prototype.initCrossBossIcon=function(){Ytza(this,p_k)},b_s.prototype.acceptTaskFadeOut=function(){!1!==this.taskBox.visible&&(this.taskTxt.visible=!0,this.taskTxt.alpha=0,this.taskTxt.x=this._taskPosX-40,Laya.Tween.to(this.taskTxt,{f_u:this._taskPosX,alpha:1},200,null,null,null,!0))},b_s.prototype.updateQQLiveBox=function(){Ssjf(ShareMgr,this)},b_s.prototype.initMineWarIcon=function(){},b_s.prototype.sortRightBox=function(){var e=this.rightBox.numChildren,p_l=243,p_g=503,b_s=0,d_u=0,b_e=this.taskPoint,d_m=this.sysNoticeBox,d_w=this.middlePoint;if(null!=b_e&&null!=d_w&&null!=d_m){b_e.x=d_m.x,b_e.y=d_m.y;var f_t=Stage.width*GPlatform.ratioX/2,v_z=Stage.height*GPlatform.ratioY/2;d_w.x=f_t-.3*f_t,d_w.y=v_z-.3*v_z}for(var d_h=0;d_h<e;++d_h){var r_t=this.rightBox.getChildAt(d_h);r_t.visible&&(Config.map[b_p.mapID].hangup&&(this.packup.visible=!0),d_h<3?(r_t.x=106,r_t.y=p_l,p_l-=r_t.height,b_s++):(r_t.x=-1,r_t.y=p_g,p_g-=120,d_u++),"minebtn"==r_t.name&&(r_t.x=96))}0==b_s&&0==d_u&&(this.packup.visible=!1)},b_s.prototype.initDailyIconData=function(){var e=new ActivityConfigVo;e.activityId=FuncDefine.liveness,e.isOpen=e.canOpen(),this.dailyIcon.setData(e),this.dailyIcon.visible=e.isOpen},b_s.prototype.updataGymkhanaRedPoint=function(){Umgy(this,gymkhanaModel)},b_s.prototype.chageTaskProgress=function(){var e=p_p.instance.mainVo;if(e){var p_l=Config.task_task[e.id].showProgress;this.taskPassTxt.text=0<p_l[0]?Utils.$("{1}",p_l[0]):"";var p_g=p_l[1]/p_l[2];this.taskBar.value=p_g;var b_s=this.taskBar.getChildByName("txt");b_s&&(b_s.text=Utils.$("({1}/{2})",p_l[1],p_l[2]));var d_u=this.taskBar.getChildByName("light");if(d_u){var b_e=this.taskBar.width*p_g-d_u.width;b_e<0||b_e+d_u.width>this.taskBar.width?d_u.visible=!1:d_u.x=b_e}}},b_s.prototype.onUpdateTask=function(){Mhnc(this,p_p)},b_s.prototype.getTaskBottonY=function(){return this.taskBox.localToGlobal(new Laya.Point).y+this.taskBox.height},b_s.prototype.showCrossBossTip=function(){Guyx(this,f_a)},b_s.prototype.hideMineTip=function(){Ijte(this)},b_s.prototype.onInitTask=function(){Ofjm(this)},b_s.prototype.onClickSouthSkyBtn=function(){Emmm(e)},b_s.prototype.onDecompose=function(){this._decomposeView&&this._decomposeView.parent&&this._decomposeView.parent.removeChild(this._decomposeView)},b_s.prototype.getShortcutPos=function(){return this.helperbtn?this.helperbtn.localToGlobal(new Laya.Point):null},b_s.prototype.checkLimitTimeItem=function(){var p_l=BagModel.instance.getItemsByItemType(BagTypeDefine.BAG_TYPE_ITEM,ItemTypeDefine.CONSUME),p_g=[],b_s=Math.floor(SyncTime.serverTime/1e3);for(var d_u in p_l)0<p_l[d_u].expireTime&&p_l[d_u].expireTime-b_s<=this._time&&(p_l[d_u]._flag||p_g.push(p_l[d_u]));if(p_g&&0<p_g.length){for(var d_u in p_g)BagModel.instance.setFlag(p_g[d_u].id);e.LimitTimeTipsView.open(p_g)}},b_s.prototype.onBtnVisable=function(e){if(this.platformBox.visible=e,this._checkSvenTarget){var p_l=Config.map[b_p.mapID];if(!p_l)return;e||"story"===p_l.impl||"single"===p_l.impl||"wild_boss"===p_l.impl?this.sevenday.visible=!0:this.sevenday.visible=!1}},b_s.prototype.consumanleTip=function(){var e=BagModel.instance.getItemsByItemType(BagTypeDefine.BAG_TYPE_ITEM,ItemTypeDefine.CONSUME),p_l=BagModel.instance._useItemCounts;if(0<e.length)for(var p_g=0;p_g<e.length;p_g++){var b_s=Config.item_consumeable[e[p_g].id];if(b_s&&b_s.quick)if(1==b_s.subclass||2==b_s.subclass){if(!p_k.instance.checkSystemOpen(FuncDefine.talisman))continue;LED.event(l_r.USECONSUMABLE,e[p_g])}else if(0<e[p_g].expireTime){var d_u=Config.item_consumeable[e[p_g].id];d_u&&d_u.useLimit&&p_l[e[p_g].id]?d_u.useLimit>p_l[e[p_g].id]&&LED.event(l_r.USECONSUMABLE,e[p_g]):LED.event(l_r.USECONSUMABLE,e[p_g])}else LED.event(l_r.USECONSUMABLE,e[p_g])}},b_s.prototype.initGuildPvpIcon=function(){Mjix(this,GuildPvpModel)},b_s.prototype.talismanOpenEffect=function(){var e=SystemNoticeManager.instance.getCanTalismanGain();e[0]&&1<=SystemNoticeManager.instance.talismanBarValue(e[0])&&Config.talisman_talisman[e[0].talismanid]?this.playActiveEffect(!0):this.playActiveEffect(!1)},b_s.prototype.playActiveEffect=function(e){void 0===e&&(e=!0),this.sysNoticeBox.effect_activebox.visible=e,this.sysNoticeBox.bardesc.visible=!e,this.sysNoticeBox.taskdesc.visible=!e,this.sysNoticeBox.talismanbar.visible=!e,e?this.sysNoticeBox.effect_active.play(!0):this.sysNoticeBox.effect_active.play(!1)},b_s.prototype.showGymkhanaTip=function(){Orov(this)},b_s.prototype.oncheckIsWinMainLeft=function(p_l){void 0===p_l&&(p_l=0),0<p_l?(this.ani1.off(Laya.Event.LABEL,this,this.oncheckIsWinMainLeft),this.rightBox.visible=!1,this.rightpanel.visible=!1):(this.ani2.off(Laya.Event.LABEL,this,this.oncheckIsWinMainLeft),this.rightBox.visible=!0,this.rightpanel.visible=!0,e.GuidePanel.checkIsWinMainLeft(b_s.name,!0))},b_s.prototype.onUpdatePloting=function(e){void 0===e&&(e=1),this.visible=2!=e},b_s.prototype.packVisable=function(p_l){if(void 0===p_l&&(p_l=0),this.packup.visible=!0,0==p_l)return this.ani1.play(0,!1),this.ani2.stop(),e.GuidePanel.checkIsWinMainLeft(b_s.name,!1),this.ani1.addLabel("111",3),void this.ani1.on(Laya.Event.LABEL,this,this.oncheckIsWinMainLeft,[1]);1==p_l&&(this.ani1.stop(),this.rightBox.visible=!0,this.ani2.play(0,!1),this.ani2.addLabel("111",5),this.ani2.on(Laya.Event.LABEL,this,this.oncheckIsWinMainLeft,[0]))},b_s.prototype.onClickAdventureBtn=function(){Enfj(e)},b_s.prototype.updateShareBtn=function(){var e=ShareMgr.ins.shareBtnShow();this.btnWbShare.layoutEnabled=this.btnWbShare.visible=e,e&&(this.rp_wbshare.visible=ShareMgr.ins.canRewardShare||BenefitModel.instance.hasReward()),this.platformBox.refresh()},b_s.prototype.onSceneChange=function(){this._activityStatus=-1,this.initMineBtn(),this.setHideActivityBox(),this.onTeamUpdate();var e=Config.fb_dungeon[b_p.fbId];e&&e.type==DungeonType.StateBoss?this.isShowFigthBtn(!1):this.isShowFigthBtn(!0)},b_s.prototype.updateWebChat=function(){var e;if(e=GPlatform.isWanba?ShareMgr.ins.canShowWanbaCollectIcon:ShareMgr.ins.canShowWebChatIcon,this.box_wxCollect.layoutEnabled=this.box_wxCollect.visible=e,this.platformBox.refresh(),e){var p_l;GPlatform.isWanba,p_l=ShareMgr.ins.canRewardCollect,this.img_wxRedPoint.visible=p_l}},b_s.prototype.updateGuildPvpRed=function(){Cfmb(this,GuildPvpModel)},b_s.prototype.onTaskLink=function(e){Wisb(e,TaskManager)},b_s.prototype.taskEftStop=function(e){void 0===e&&(e=!1),this.taskEft&&(this.taskEft.off(Laya.Event.COMPLETE,this,this.taskEftStop),this.taskEft.visible=!1,this.taskEft.stop(),this.sysNoticeBox.tamBarEft&&(this.sysNoticeBox.tamBarEft.off(Laya.Event.COMPLETE,this,this.taskEftStop),this.sysNoticeBox.tamBarEft.stop(),this.sysNoticeBox.tamBarEft.visible=!1))},b_s.prototype.onFinishEffectComplete=function(){Akew(this,Laya)},b_s.prototype.updateSysNotice=function(e){void 0===e&&(e=0);var p_l=SystemNoticeManager.instance,p_g=p_l.isHideNotice(),b_s=p_l.getCanTalismanGain(1,e);if(this.sysNoticeBox.mouseEnabled=!0,this.talismanOpenEffect(),p_g&&this.sysNoticeBox&&b_s.length<=0)return this.sysNoticeBox.removeSelf(),void(this.sysNoticeBox=null);if(this.sysNoticeBox){if(this.sysNoticeBox.talismanbox.visible=!(b_s.length<=0),this.sysNoticeBox.taskbox.visible=!this.sysNoticeBox.talismanbox.visible,this.sysNoticeBox.redPoint.visible=p_l.getCanGain(),b_s.length<=0){var d_u=p_l.getNextNotice();if(d_u){var b_e=Config.systemNotice[d_u.id];this.sysNoticeBox.iconClip.index=b_e.icon_index,this.sysNoticeBox.nameClip.index=b_e.name_index,this.sysNoticeBox.conTxt.text=b_e.pass.toString(),this.sysNoticeBox.descTxt.text=""}else(d_u=p_l.getNextCanGain())?(b_e=Config.systemNotice[d_u.id],this.sysNoticeBox.iconClip.index=b_e.icon_index,this.sysNoticeBox.nameClip.index=b_e.name_index):(this.sysNoticeBox.iconClip.index=p_l.getFullIconIndex(),this.sysNoticeBox.nameClip.index=this.sysNoticeBox.iconClip.index),this.sysNoticeBox.conTxt.text=(j_x("932_1835_1174")+j_x("2111_2235_83"))}if(0<b_s.length&&b_s&&b_s[0]&&b_s[0].talismanid){var d_m=Config.talisman_talisman[b_s[0].talismanid];if(this.showRoleModel(d_m.avatar,this.sysNoticeBox.icon,d_m.showAct,b_s[0].mianleftscale),this.sysNoticeBox.talismanname.index=b_s[0].talismanindex,this.sysNoticeBox.taskdesc.changeText(b_s[0].taskdesc),Config.task_task[e]){var d_w=e;return this.sysNoticeBox.bardesc.changeText(p_l.talismanBar(b_s[0],d_w)),void(this.sysNoticeBox.talismanbar.value=p_l.talismanBarValue(b_s[0],d_w))}this.sysNoticeBox.bardesc.changeText(p_l.talismanBar(b_s[0])),this.sysNoticeBox.talismanbar.value=p_l.talismanBarValue(b_s[0])}}},b_s.prototype.updateXinYueBox=function(){Ughw(ShareMgr,this)},b_s.prototype.showGuildPvpTip=function(){Avts(this,GuildPvpModel)},b_s);function b_s(){var e=p_l.call(this)||this;return e.helpErBtn=e.helperbtn,e._activityStatus=-1,e.taskPoint=new Laya.Point,e.middlePoint=new Laya.Point,e._isStartTime=!1,e._checkSvenTarget=!1,e._time=3600,e._lastClickActImg=-1,e.mouseThrough=!0,e.taskTxt.style.color="#d8dcec",e.taskTxt.style.fontSize=20,e.taskTxt.style.font=b_p.config.font,e.taskTxt.style.leading=5,e.taskCheckBox.selected=TaskManager.instance.isAutoTask,e._taskPosX=e.taskTxt.x,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.btn_gift.visible=!1,e.sortRightBox(),e.changeAdapt(),e.showActivityBox(),e.updateShareBtn(),e.updateRelevance(),e.updateXinYueBox(),e.updateQQLiveBox(),e.btnSouthSky_Red.visible=!1,SouthSkyGateControl.ins.addRedImg(e.btnSouthSky_Red),e.btn_adventure.visible=!1,e}e.MainLeftView=p_g;var d_u,b_e=(d_u=ui.main.fighting_appearUI,__extends(d_m,d_u),d_m.prototype.onAdded=function(){Ctza(this,Stage,ScrollNum)},d_m.prototype.effShowComplete=function(){},d_m.prototype.updateData=function(e){Qayy(e,this,Laya)},d_m.prototype.onPlayComplete=function(){Inve(Laya,this)},d_m.prototype.delayRemove=function(){Axyl(this,Laya)},d_m);function d_m(){var e=d_u.call(this)||this;return e._scrollNum=new ScrollNum,e.box_num.addChild(e._scrollNum),e._scrollNum.x=211,e._scrollNum.y=7,e.mouseThrough=!1,e.on(Laya.Event.ADDED,e,e.onAdded),e}e.FightingAppearView=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.main.mainUI,__extends(b_s,p_l),b_s.prototype.updateTestBtn=function(e){void 0===e&&(e=!1);var p_l=!e&&(!GPlatform.isRelease||GPlatform.isDebug);this.testBtn.visible=p_l,this.testSkillBtn.visible=this.testBtn.visible},b_s.prototype.onUpdateOffline=function(){Svuh(OfflineModel)},b_s.prototype.onAdded=function(){Laya.stage.on(Laya.Event.RESIZE,this,this.onResize),this.shortCut.on(Laya.Event.CLICK,this,this.OnDialogClick),this.headBox.on(Laya.Event.CLICK,this,this.OnDialogClick),this.icon_head.on(Laya.Event.CLICK,this,this.OnDialogClick),this.vipImg.on(Laya.Event.CLICK,this,this.OnDialogClick),this.addGoldBtn.on(Laya.Event.CLICK,this,this.OnDialogClick),this.addBtn.on(Laya.Event.CLICK,this,this.OnDialogClick),this.testBtn.on(Laya.Event.CLICK,this,this.OnDialogClick),this.guildTip.visible=!1,LED.on(l_r.WALLET_CHANGE,this,this.onUpdateHeroAtt),LED.on(l_r.ITEM_ADD,this,this.updateItemInfo),LED.on(l_r.ITEM_REMOVE,this,this.updateItemInfo),LED.on(l_r.ITEM_AMOUNT_CHANGE,this,this.updateItemInfo),LED.on(l_r.ITEM_SWAP,this,this.updateItemWarp),LED.on(l_r.HERO_LEVEL_CHANGE,this,this.onUpdateHeroAtt),LED.on(l_r.HERO_EXP_CHANGE,this,this.onUpdateExp),LED.on(l_r.HERO_STATE_CHANGE,this,this.onUpdateHeroAtt),LED.on(l_r.FIGHT_CHANGE,this,this.onUpdateFighting),LED.on(l_r.STATE_SUB_LV_UP,this,this.onSkillRedPointUpdate),LED.on(l_r.EQUIP_SWAP_TIP,this,this.onEquipSwapTip),LED.on(l_r.SKILL_DAZHAO_CHANGE,this,this.onDaZhaoChange),LED.on(l_r.HERO_SKILL_EXP_CHANGE,this,this.onSkillExpChange),LED.on(l_r.BLACK_GODSTAR_UPDATE,this,this.onSkillExpChange),LED.on(l_r.USECONSUMABLE,this,this.onConsumableTip),LED.on(l_r.FASHION_LIST,this,this.onRoleRedPointUpdate),LED.on(l_r.FB_RED_POINT_UPDATE,this,this.onFbRedPointUpdate),LED.on(l_r.SYSTEM_NOTICE_IFNO,this,this.onFbRedPointUpdate),LED.on(l_r.PVP_ATTACK_TS_CHANGE,this,this.onFbRedPointUpdate),LED.on(l_r.BOSSCOME_INFO_UPDATE,this,this.onFbRedPointUpdate),LED.on(l_r.UPDATE_PAGODA_SWEEP,this,this.onFbRedPointUpdate),LED.on(l_r.DECOMPOSE_EQUIP_LIST_REFILL,this,this.onDecompose),LED.on(l_r.ITEM_INFO_UPDATE,this,this.onBagInit),LED.on(l_r.TALISMAN_INFO_UPDATE,this,this.onTalismanRedPointUpdate),LED.on(l_r.TALISMAN_DEPLOY_UPDATE,this,this.onTalismanRedPointUpdate),LED.on(l_r.TALISMAN_SUIT_UPDATE,this,this.onTalismanRedPointUpdate),LED.on(l_r.SKILL_LIST_UPDATE,this,this.onTalismanRedPointUpdate),LED.on(l_r.TITLE_INFO_UPDATE,this,this.onRoleRedPointUpdate),LED.on(l_r.STRENGTH_INFO_UPDATE,this,this.onRoleRedPointUpdate),LED.on(l_r.FASHION_QINMIDU,this,this.onRoleRedPointUpdate),LED.on(l_r.RIDE_LIST_UPDATE,this,this.onRoleRedPointUpdate),LED.on(l_r.RIDE_PER_UPDATE,this,this.onRoleRedPointUpdate),LED.on(l_r.RIDE_UPSTART_SUCC,this,this.onRoleRedPointUpdate),LED.on(l_r.OFFLINE_UPDATE,this,this.updateOffline),LED.on(l_r.DOUBLEHANG_INFO_UPDATE,this,this.updateOffline),LED.on(l_r.DOUBLEHANG_INVITELIST_UPDATE,this,this.updateOffline),LED.on(l_r.RECHARGE_VIPLV_CHANGE,this,this.updateviplv),LED.on(l_r.UPDATE_VIP_INFO,this,this.updateviplv),LED.on(l_r.UPDATE_VIPLV_INFO,this,this.updateviplv),LED.on(l_r.RECHARGE_VIP_INFO,this,this.updateviplv),LED.on(l_r.ALIEN_BEAST_INFOS,this,this.onGuildRedPointUpdate),LED.on(l_r.DEPLOY_EXP_CHANGE,this,this.onGuildRedPointUpdate),LED.on(l_r.PLOTING_START,this,this.onUpdatePloting),LED.on(l_r.PLOTING_END,this,this.onUpdatePloting),LED.on(l_r.KM_RED_UPDATE,this,this.onDongfuRpImgUpdate),LED.on(l_r.TREASYREBOX_INFO_UPDATE,this,this.onDongfuRpImgUpdate),LED.on(l_r.JBP_INFO_UPDATE,this,this.onDongfuRpImgUpdate),LED.on(l_r.BANQUET_INFO_UPDATE,this,this.onDongfuRpImgUpdate),LED.on(l_r.CHECK_BAG_IS_UPDATE,this,this.onDongfuRpImgUpdate),LED.on(l_r.SETUP_MUSIC_CHANGE,this,this.changeSound),LED.on(l_r.HERO_ICON_CHANGE,this,this.onUpdateHeroAtt),LED.on(l_r.HERO_NAME_CHANGE,this,this.onUpdateHeroAtt),LED.on(l_r.ROLE_REPOINT_UPDATE,this,this.onRoleRedPointUpdate),LED.on(l_r.DREAMLAND_SKILL_INFO_LIST,this,this.onFbRedPointUpdate),LED.on(l_r.MINE_ROLE_INFO,this,this.onFbRedPointUpdate),LED.on(l_r.GYMKHANA_RED_POINT,this,this.onFbRedPointUpdate),LED.on(l_r.GYMKHANA_MAIN_INFO,this,this.onFbRedPointUpdate),LED.on(l_r.UPDATE_DA_PVP_INFO,this,this.onFbRedPointUpdate),LED.on(l_r.UPDATE_CITTA_INFO,this,this.onRoleRedPointUpdate),LED.on(l_r.UPDATE_CITTA_INFO,this,this.onSkillRedPointUpdate),LED.on(l_r.OFFLINE_UPDATE,this,this.onUpdateOffline),LED.on(l_r.STATE_INFO_UPDATE,this,this.onSkillRedPointUpdate),LED.on(l_r.STATE_TIMESLIST_CHANGE,this,this.onSkillRedPointUpdate),LED.on(l_r.BODY_INFO_UPDATE,this,this.onSkillRedPointUpdate),LED.on(l_r.BODY_CUL_INFO_UPDATE,this,this.onSkillRedPointUpdate),LED.on(l_r.BODY_LEVEL_UP_INFO_UPDATE,this,this.onSkillRedPointUpdate),LED.on(l_r.BODY_SUB_LEVEL_UP_INFO_UPDATE,this,this.onSkillRedPointUpdate),LED.on(l_r.FB_INFO_UPDATE,this,this.updateCharge),LED.on(l_r.DH_MORAAGREE_UPDATE,this,this.onMoraAgree),LED.on(l_r.DH_MORAINVITE_UPDATE,this,this.onMoraInvite),LED.on(l_r.REFINE_BODY_INFO,this,this.onRoleRedPointUpdate),LED.on(l_r.REFINE_BODY_ONE_INFO,this,this.onRoleRedPointUpdate),LED.on(l_r.RED_PACKET_STOP,this,this.closeRedPackerActivity),LED.on(l_r.RED_PACKET_AC_INFO,this,this.updateRedPackerRedBtn),LED.on(l_r.RED_PACKET_INFO,this,this.updateRedPackerActivity),LED.on(l_r.RED_PACKER_RESULT,this,this.updateRedPackerRedBtn),LED.on(l_r.RED_PACKET_REC_INFO,this,this.openRedPacketGetPanel),LED.on(l_r.RED_PACKET_RECORD_UPDATE,this,this.openRedPacketRecordPanel),LED.on(l_r.RED_PACKET_ALL_INFO,this,this.openRedPacketShowPanel),LED.on(l_r.TASK_COMPLETE,this,this.onUpdateSwitchSceneeBox),LED.on(l_r.TASK_INIT_INFO,this,this.onUpdateSwitchSceneeBox),LED.on(l_r.SCENE_CHANGE,this,this.onUpdateSwitchSceneeBox),this.updateSkill(),this.skillIcon.onEvents(),this.updateviplv(),LED.on(l_r.CELEAR_SKILL_CD,this,(function(){this.skillIcon.removeCoolCD()})),this.registSelectEffect(e.BeastMainPanel,this.getShortcutComponent("guildBtn")),this.registSelectEffect(e.LilianPanel,this.getShortcutComponent("lilianBtn")),this.registSelectEffect(e.RolePanel,this.getShortcutComponent("roleBtn")),this.registSelectEffect(e.SkillPanel,this.getShortcutComponent("skillBtn")),this.registSelectEffect(e.TalismanPanel,this.getShortcutComponent("talismanBtn")),this.registSelectEffect(e.HoleBtnPanel,this.getShortcutComponent("dongfuBtn")),this.registSelectEffect(e.BlackKingPanel,this.getShortcutComponent("blackking_btn")),Laya.timer.once(550,this,this.delayInit),this.onRoleRedPointUpdate()},b_s.prototype.onResize=function(){Ciya(this,Stage)},b_s.prototype.closeRedPackerActivity=function(){this._panel&&UIM.instance.removeTopLayer(this._panel),Laya.timer.clear(this,this.updateTime),this.redBagTimeLabel.visible=!1},b_s.prototype.openRedPacketShowPanel=function(){Qtct(e)},b_s.prototype.isLoadFace=function(){if(GPlatform.isWxMini||GPlatform.isQQMini){if(this._isLoad)return!1;for(var e=[],p_l=101;p_l<131;++p_l)e.push({url:Resource.ResUrl.getFaceUrl("faces/rich"+p_l),type:Laya.Loader.IMAGE,priority:4});return Laya.loader.load(e,Laya.Handler.create(this,this.loadFaceEnd),null,null,4),!0}return!0},b_s.prototype.delayInit=function(){Esjl(this,Laya,SetupModel)},b_s.prototype.updateRedPackerRedBtn=function(){Gcly(RedPacketModel,this,z_j)},b_s.prototype.updateCharge=function(){Otyk(GPlatform,this)},b_s.prototype.openRedPacketSharePanel=function(){Qqnd(e)},b_s.prototype.updateTime=function(){var e=RedPacketModel.ins._endTime-SyncTime.serverTime/1e3;if(0<e){var p_l=Utils.formatTimeStr(e);this.redBagTimeLabel.text=(j_x("2308_1317_456")+j_x("130_396_2426")+j_x("810_867_1702")+":")+p_l}else Laya.timer.clear(this,this.updateTime),this._panel&&UIM.instance.removeTopLayer(this._panel),this.redBagTimeLabel.visible=!1},b_s.prototype.openRedPacketRecordPanel=function(){Goax(e)},b_s.prototype.loadFaceEnd=function(){Kpda(this)},b_s.prototype.renderList=function(e,p_l){if(e&&e.dataSource){var p_g=5<e.dataSource.toString().length;e.setData(e.dataSource,p_g)}},b_s.prototype.onRemove=function(){Mkad(Laya,this,LED,l_r)},b_s.prototype.updateRedPackerActivity=function(){0<RedPacketModel.ins._endTime-SyncTime.serverTime/1e3?(this.redBagTimeLabel.visible=!0,Laya.timer.loop(1e3,this,this.updateTime),this._panel||(this._panel=new e.RedPacketUI),this._panel.parent||UIM.instance.addToTopLayer(this._panel,1)):this.redBagTimeLabel.visible=!1},b_s.prototype.openRedPacketGetPanel=function(){Ikkh(e)},b_s.prototype.onUpdatePloting=function(e){void 0===e&&(e=1),this.shortCut.visible=2!=e,this._chatPanel&&(this._chatPanel.visible=2!=e),b_p.isPloting||(SystemNoticeManager.instance.playOpenAnim(),SystemNoticeManager.instance.playGainTalismanAni())},Object.defineProperty(b_s.prototype,"chatPanel",{get:function(){return this._chatPanel},enumerable:!0,configurable:!0}),b_s.prototype.updateItemInfo=function(e){this.onBagInit(),e&&e.bagType===BagTypeDefine.BAG_TYPE_ITEM&&this.onTalismanRedPointUpdate(),e&&Config.CItem(e.id).mainclass===ItemTypeDefine.CONSUME&&this.onBagRedPointUpdate(),this.onGuildRedPointUpdate(),this.onRoleRedPointUpdate(),this.onSkillExpChange()},b_s.prototype.onSkillExpChange=function(){Uaan(this,BlackKingModel)},b_s.prototype.onUpdateHeroAtt=function(){this.goldTxt.text=this.heroVo.gold?this.heroVo.gold.toString():"0",this.copperTxt.text=this.heroVo.copper?this.heroVo.copper.toString():"0",this.lvTxt.text=this.heroVo.level.toString(),this.nameTxt.text=this.heroVo.name.toString();var e=Config.state_state[this.heroVo.stateLv];this.icon_head.skin=Resource.ResManager.getHeadUrl(this.heroVo.entryId,this.heroVo.headIcon,!0),e?(this.stateLab.stroke=2,this.stateLab.strokeColor=e.strokeColor,this.stateLab.changeText(Utils.$("[{1}]",e.desc))):this.stateLab.changeText(""),this.onUpdateExp(),this.onRoleRedPointUpdate(),this.onSkillRedPointUpdate(),this.onTalismanRedPointUpdate()},b_s.prototype.updateRoleRedPoint=function(){for(var e=EquipModel.instance.getEquips(),p_l=LgcM.ins.heroVo,p_g=0;p_g<e.length;p_g++)if(EquipModel.instance.hasChangeEquip(p_l.entryId,p_g+1,e[p_g]?e[p_g].fighting:0))return!0;return!1},b_s.prototype.onExpBarLoaded=function(){Qyiu(this)},b_s.prototype.onUpdateFighting=function(){this.fightNumClip&&this.fightNumClip.parent&&(this._fightingSp=new Laya.Sprite,this.headBox.addChild(this._fightingSp),this._fightingSp.x=this.fightNumClip.x,this._fightingSp.y=this.fightNumClip.y,this.fightNumClip.removeSelf(),this.fightNumClip=null),this._fightingSp=b_p.getNumSp(NumType.FIGHTING,this.heroVo.fight,this._fightingSp,-12)},b_s.prototype.titleActRedPoint=function(){return Ahqc(TitleModel,TitleDefine)},b_s.prototype.onMoraInvite=function(){Cwce(e)},b_s.prototype.testAnimation=function(){Avtr(Engine2d,LgcM)},b_s.prototype.onBagInit=function(){var p_l=BagModel.instance._equipNum;BagSize.BAG_SIZE_EQUIP-p_l<=30&&(this._decomposeView||(this._decomposeView=new e.DecomposeView,this._decomposeView.x=-69,this._decomposeView.y=-134),this.dongfuBtn.addChild(this._decomposeView))},b_s.prototype.onDongfuRpImgUpdate=function(){Szdg(this,HoleMoudel,v_x,BagModel,GameDefine)},b_s.prototype.registSelectEffect=function(e,p_l){this._selectEffect||(this._selectEffect={}),this._selectEffect[e]=p_l},b_s.prototype.hideSelectEffect=function(e){var p_l=this._selectEffect[e];if(p_l){var p_g=p_l.getChildByName("selecEffect");p_g.visible=!1,p_g.stop()}},b_s.prototype.showDamageDataPage=function(){z_j.isLoadJson("main/TestDamageDataPage",this,this.showTestAddPuppet)&&(this._testDamageDataPage||(this._testDamageDataPage=new e.DamageDataPage_test),this._testDamageDataPage.parent?this._testDamageDataPage.removeSelf():this.addChild(this._testDamageDataPage),this._testDamageDataPage.y=Stage.height-1100,this._testDamageDataPage.x=Stage.width-280)},b_s.prototype.updateSkill=function(){Laya.timer.once(2e3,this,(function(){DB.instance.query(c2m_skill_list,new c2m_skill_list)}))},b_s.prototype.onDaZhaoChange=function(){var e=SkillModel.instance.dazhaoId;this.skillIcon.visible=!!e,Config.map[b_p.mapID]&&(this.skillIcon.visible=UIM.instance.checkShowSkillIcon()&&0<e),this.onSkillRedPointUpdate()},b_s.prototype.guildHint=function(e){if(1==e)this.guildTip.visible=!1;else{if(!GuildModel.instance.hasGuild)return;this.guildTip.y=this.shortCut.y-109,this.guildTip.visible=!0}},b_s.prototype.onGuildRedPointUpdate=function(){Qhun(this,AlienBeastModle)},b_s.prototype.onSkillRedPointUpdate=function(){this.redPoint_skill.visible=b_l.instance.redPoint()||StateModel.instance.hasStateRedpoint()||SkillModel.instance.canLvUpEnough()||CittaModule.instance.canCiTtaLimticRed()||bodyModel.ins.hasBodyRedpoint()},b_s.prototype.onRoleRedPointUpdate=function(){this.roleRpImg.visible=TitleModel.instance.canGain||CittaModule.instance.canSoltsRed(1)||CittaModule.instance.canSoltsRed(2)||StrengthModel.instance.canStrength||RideModel.instance.canRideUp()||FashionModel.instance.canActivity()||this.updateRoleRedPoint()||RefineBodyModel.ins.isRedPoint()||TitleModel.instance.levelUpRedPinot()||this.titleActRedPoint()||FashionModel.instance.redPointWing()},b_s.prototype.changeSound=function(e){},b_s.prototype.showOrHideHeadTop=function(e){Imdv(e,this)},b_s.prototype.checkItemCanUse=function(e){return!(Config.item_consumeable[e]&&0<Config.item_consumeable[e].subclass)||p_k.instance.checkSystemOpen(FuncDefine.talisman)},b_s.prototype.onConsumableTip=function(p_l,p_g){ConsumableModel.instance.updateItemData();var b_s=UIM.instance.isOpenWin(e.ConsumableTipsPanel);UIM.instance.isOpenWin(e.BlackKingCardPanel)||(b_s?LED.event(l_r.ISSAMEITEM,p_l):e.ConsumableTipsPanel.open(p_l,p_g))},b_s.prototype.updateviplv=function(){var e=this.heroVo.vipLv;e&&void 0!==e||(e=0),b_p.getNumSp(NumType.VIP,e,this.vipNum1,-10),this.vipNum1.scale(.9,.9),this.vipredpoint.visible=RechargeModel.instance.updateRed()},b_s.prototype.onMoraAgree=function(){Kqtj(e)},b_s.prototype.OnDialogClick=function(p_l){switch(p_l.target.name){case"buffBtn":this.updateTestBtn(this.testBtn.visible),GPlatform.payTest&&H5XJPlatform.ins.reportCreateRole(LgcM.ins.heroVo.name),e.BuffShowPanel.open();break;case"lilianBtn":e.LilianPanel.open(!0);break;case"roleBtn":e.RolePanel.open(0,!0);break;case"skillBtn":e.SkillPanel.open(0,!0);break;case"talismanBtn":e.TalismanPanel.open(0,0,!0);break;case"guildBtn":e.BeastMainPanel.open();break;case"bagBtn":e.BagPanel.open(1,!0);break;case"dongfuBtn":e.HoleBtnPanel.open();break;case"smeltBtn2":break;case"addBtn":r_f.instance.isWindow(2);break;case"addGoldBtn":ActivityModel.instance.firstRechargeVo,e.RechargePanel.open();break;case"vipImg":e.VipRechardePanel.open();break;case"testBtn":e.TestPanel.open();break;case"hangBtn":e.HangupRewardPanel.open();break;case"closeSoundBtn":case"openSoundBtn":SetupModel.instance.isCloseMusic=!SetupModel.instance.isCloseMusic;break;case"testSkillBtn":this.showTestSkill(),this.showTestAddPuppet(),this.showDamageDataPage();break;case"icon_head":e.SetupPanel.open();break;case"blackking_btn":e.BlackKingPanel.open();break;case"firstBtn":e.FirstRechargePanel.open();break;case"minebtn":e.MineView.open();break;case"switchScene_btn":DB.instance.query(c2m_switch_scene,{}),this.onClickSwitchSceneIcon()}},b_s.prototype.onBagRedPointUpdate=function(){},b_s.prototype.onDecompose=function(){this._decomposeView&&this._decomposeView.parent&&this._decomposeView.parent.removeChild(this._decomposeView)},b_s.prototype.showChatPanel=function(){if(this.isLoadFace())if(this._chatPanel||(this._chatPanel=new e.ChatView),null==this._chatPanel.parent){var p_l=this.getChildIndex(this.container0);this.addChildAt(this._chatPanel,p_l),this._chatPanel.y=this.shortCut.y-this._chatPanel.height}else this.removeChild(this._chatPanel)},b_s.prototype.onEquipSwapTip=function(p_l,p_g){EquipModel.instance.updaDataforEquipTip(p_l),UIM.instance.isOpenWin(e.EquipSwapTipPanel)?LED.event(l_r.EQUIPTTIPSINFO,p_l):e.EquipSwapTipPanel.open(p_l,1)},b_s.prototype.showTestAddPuppet=function(){z_j.isLoadJson("main/addPuppetPage",this,this.showTestAddPuppet)&&(this._testAddPuppet||(this._testAddPuppet=new e.AddPuppetPage_test),this._testAddPuppet.parent?this._testAddPuppet.removeSelf():this.addChild(this._testAddPuppet),this._testAddPuppet.y=Stage.height-1300)},b_s.prototype.showSelectEffect=function(e,p_l,p_g,b_s){if(void 0===p_g&&(p_g=0),void 0===b_s&&(b_s=0),this._selectEffect&&this._selectEffect[e]){var d_u=this._selectEffect[e].getChildByName("selecEffect");d_u.visible=!0,d_u.play()}},b_s.prototype.onFbRedPointUpdate=function(){this.lilianRpImg.visible=DungeonModel.instance.hasFbRedpoint()||d_x.instance.canPlay||1==BossComeModel.instance.info.hasReward||dreamlandModel.instance.IsRedPoint()||MineModel.instance.getRedPoint()||gymkhanaModel.instance.getRedPoint(!0)||AscentModel.instance.checkCanDo()||RareAnimalModel.instance.checkCanDo()||DoubleAreaModel.instance._isShowRed},b_s.prototype.onTalismanRedPointUpdate=function(){if(this.onSkillRedPointUpdate(),p_k.instance.checkSystemOpen(FuncDefine.talisman)){var e=TalismanModel.instance.hasTalismanCanReward(),p_l=TalismanModel.instance.hasTalismanSuitCanUp();this.talismanRpImg.visible=e||p_l||TalismanModel.instance.allMainRedPoint()}else this.talismanRpImg.visible=!1},b_s.prototype.onUpdateExp=function(){var e,p_l=this.heroVo.level+1,p_g=1;e=Config.player_level[p_l]?(p_g=this.heroVo.exp/Config.player_level[p_l].exp,Utils.$("{1} / {2}",this.heroVo.exp,Config.player_level[p_l].exp)):Utils.$("{1} / {2}",this.heroVo.exp,this.heroVo.exp),this.expBar.value=p_g,this.expLab.text=e},b_s.prototype.showTestSkill=function(){this._testSkillPanel||(this._testSkillPanel=new e.Skill_test),this._testSkillPanel.parent?this._testSkillPanel.removeSelf():this.addChild(this._testSkillPanel),this._testSkillPanel.y=Stage.height-350,n_d.instance.reqChat(1,"@gm map 5")},b_s.prototype.updateItemWarp=function(e){e.bagType2===BagTypeDefine.BAG_TYPE_EQUIPMENT&&p_k.instance.checkSystemOpen(FuncDefine.godEquip)&&DecomposeModel.instance.addGodEquip(),this.onTalismanRedPointUpdate()},b_s.prototype.updateOffline=function(){},Object.defineProperty(b_s.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),b_s.prototype.getAttackTsPos=function(){return new Laya.Point(0,0)},b_s.prototype.onUpdateSwitchSceneeBox=function(){var e=p_p.instance.mainVo;if(Config.switchScene,e){var p_l=Config.task_task[e.id];0<p_l.id&&p_l.id<=5?this.switchSceneBox.visible=!1:this.switchSceneBox.visible=!0}else this.switchSceneBox.visible=!0;1015===b_p.mapID?this.switchScene_btn.skin="res/ui/mainUI/switchScene_battle_icon.png":this.switchScene_btn.skin="res/ui/mainUI/switchScene_retreat_icon.png"},b_s.prototype.getActivityComponentByFuncName=function(e){var p_l=UIM.instance.getMainLetUI();return p_l?p_l.activityBox.getTargetByFuncName(e):null},b_s.prototype.getChatComponent=function(e){return this._chatPanel?this._chatPanel[e]?this._chatPanel[e]:this._chatPanel.getChildByName(e):null},b_s.prototype.getDefTsPos=function(){return new Laya.Point(0,0)},b_s.prototype.getActivityComponent=function(e){var p_l=UIM.instance.getMainLetUI();return p_l?p_l.activityBox.getTarget(e):null},b_s.prototype.getMainLeftComponent=function(e){var p_l=UIM.instance.getMainLetUI();return p_l?p_l[e]?p_l[e]:p_l.getChildByName(e):null},b_s.prototype.getShortcutPos=function(e){var p_l=this.box_btn.getChildByName(e);return(p_l=p_l||this.shortCut.getChildByName(e))?p_l.localToGlobal(new Laya.Point):null},b_s.prototype.changeAdapt=function(){GPlatform.needAdapt&&(GPlatform.stageHeight,this.height=Stage.height,this.shortCut.y=this.height-this.shortCut.height,this.skillIcon.y=this.height-this.skillIcon.height-256,this.skillIcon.x=this.width-this.skillIcon.width-100,this.headBox.y=GPlatform.concaveOffsetY,0<this.headBox.y&&(this._spMask=new Laya.Sprite,this._spMask.graphics.drawRect(0,0,Stage.width,this.headBox.y,"#000000"),this.addChildAt(this._spMask,0)))},b_s.prototype.checkSystemOpen=function(p_l){void 0===p_l&&(p_l=!1);var p_g=UIM.instance.getMainLetUI(),b_s=SystemNoticeManager.instance;b_s.setSpGrayByWinClass(this.talismanBtn,e.TalismanPanel,p_l,!0,this.lock_fabao),b_s.setSpGrayByWinClass(this.dongfuBtn,e.HoleBtnPanel,p_l,!0,this.lock_hole),b_s.setSpGrayByWinClass(this.guildBtn,e.BeastMainPanel,p_l,!0,this.lock_guild),b_s.setSpGrayByWinClass(this.lilianBtn,e.LilianPanel,p_l,!0),b_s.setSpGrayByWinClass(this.skillBtn,e.SkillPanel,p_l,!0),b_s.setSpGrayByWinClass(this.blackking_btn,e.BlackKingPanel,p_l,!0,this.lock_blackking),p_g&&(b_s.setSpGrayByWinClass(p_g.helpErBtn,e.HelperPanel,p_l),p_g.helpErBtn.visible=!p_g.helpErBtn.gray)},b_s.prototype.getTaskComponent=function(){var e=UIM.instance.getMainLetUI();return e?e.taskTxt:null},b_s.prototype.addChildToHeadBox=function(e){this.headBox&&e&&this.headBox.addChild(e)},b_s.prototype.getActivityPos=function(e){var p_l=UIM.instance.getMainLetUI();if(p_l){var p_g=p_l.activityBox.getTarget(e);if(p_g)return p_g.localToGlobal(new Laya.Point)}return null},b_s.prototype.getShortcutComponent=function(e){return Cjzi(e,this)},b_s.prototype.onClickSwitchSceneIcon=function(){var e=this,p_l=p_p.instance.mainVo;this.switchScene_btn.disabled=!0,p_l||(this.switchSceneBox.visible=!0),1015===b_p.mapID?this.switchScene_btn.skin="res/ui/mainUI/switchScene_retreat_icon.png":this.switchScene_btn.skin="res/ui/mainUI/switchScene_battle_icon.png",Laya.timer.once(2e3,this,(function(){e.switchScene_btn.disabled=!1}))},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.mouseThrough=!0,p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g.expBar.bar.on(Laya.Event.LOADED,p_g,p_g.onExpBarLoaded),p_g.redPacketList.array=[],p_g.redPacketList.itemRender=e.RedPackItem,z_j.setList(p_g.redPacketList,p_g,p_g.renderList),p_g.updateTestBtn(),p_g.updateCharge(),p_g.changeAdapt(),p_g}e.MainUI=p_g;var d_u,b_e=(d_u=ui.main.main_topUI,__extends(d_m,d_u),d_m.prototype.onAdded=function(){Afhb(this,Laya,LED,l_r)},d_m.prototype.onRemove=function(){Wash(this,Laya,LED,l_r)},d_m.prototype.onUpdateHeroAtt=function(){if(this.heroVo){this.goldTxt.text=this.heroVo.gold?this.heroVo.gold.toString():"0",this.copperTxt.text=this.heroVo.copper?this.heroVo.copper.toString():"0",this.lvTxt.text=this.heroVo.level.toString(),this.nameTxt.text=this.heroVo.name.toString();var e=Config.state_state[this.heroVo.stateLv];e?(this.stateLab.stroke=2,this.stateLab.strokeColor=e.strokeColor,this.stateLab.changeText(Utils.$("[{1}]",e.desc))):this.stateLab.changeText("")}},d_m.prototype.OnDialogClick=function(p_l){switch(p_l.target.name){case"addBtn":r_f.instance.isWindow(2);break;case"addGoldBtn":ActivityModel.instance.firstRechargeVo,e.RechargePanel.open()}},Object.defineProperty(d_m.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),d_m.prototype.changeAdapt=function(){Envx(this,GPlatform)},d_m);function d_m(){var e=d_u.call(this)||this;e.mouseEnabled=!0,e.mouseThrough=!0,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove);var p_l=GPlatform.isIOS&&GPlatform.isWxMini;return e.addGoldBtn.visible=!p_l,e.addBtn.visible=!p_l,e.changeAdapt(),e}e.HeadTopView=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.scene.scene_titleUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Ganq(this)},b_s.prototype.startShow=function(){this._curIndex=-1,this.reset();var e=Config.map[b_p.mapID];if(e.showContent){this.titleTxt.text=e.showContent[0];var p_l=e.showContent[1]?e.showContent[1]:"";this.content_txt1.text=p_l,p_l=e.showContent[2]?e.showContent[2]:"",this.content_txt2.text=p_l,this.img_quan.alpha=0,this._tween=Laya.Tween.to(this.img_quan,{alpha:1},500,null,Laya.Handler.create(this,this.tweenComplete),null,!0)}else this.removeSelf()},b_s.prototype.loop=function(){var e=SyncTime.tickCount-this._lastTime;e<=this.C_STRE_T?(this._speed=(this._maxHeight-10)/this.C_STRE_T,this.img_content.height=10+this._speed*e,this.content_vBox.refresh()):e<=this.C_STAND_T?this._isShowTxt||(this._isShowTxt=!0,this.startShowContent()):e<=this.C_TXT_ALPHA_T?(this.titleBox.alpha=1-(e-this.C_STAND_T)/(this.C_TXT_ALPHA_T-this.C_STAND_T),this.descTxtBox.alpha=this.titleBox.alpha):e<=this.C_SHR_T?(this._speed=(this._maxHeight-10)/(this.C_SHR_T-this.C_TXT_ALPHA_T),this.img_content.height=this._maxHeight-this._speed*(e-this.C_TXT_ALPHA_T),this.content_vBox.refresh(),this.img_quan.alpha=1-(e-this.C_TXT_ALPHA_T)/(this.C_SHR_T-this.C_TXT_ALPHA_T)):(Laya.timer.clear(this,this.loop),this.removeSelf())},b_s.prototype.startShowContent=function(){this.descTxtBox.alpha=0,this.titleTxt.alpha=0,this.img_title_bottom.alpha=0,this.titleBox.visible=this.descTxtBox.visible=!0,this.titleBox.alpha=1,Laya.Tween.to(this.descTxtBox,{alpha:1},600,null,null,null,!0),Laya.Tween.to(this.img_title_bottom,{alpha:1},200,null,Laya.Handler.create(this,this.titleBoxComplete),null,!0)},b_s.prototype.titleBoxComplete=function(){this.titleTxt.alpha=1,this.titleTxt.y=this._titlePosY-40,this.titleTxt.scaleX=this.titleTxt.scaleY=2,Laya.Tween.to(this.titleTxt,{j_l:this._titlePosY,scaleX:1,scaleY:1},40,null,null,null,!0)},b_s.prototype.onRemove=function(){Ytff(this)},b_s.prototype.reset=function(){this.titleBox.visible=!1,this.img_top.visible=!1,this.content_vBox.visible=!1,this.descTxtBox.visible=!1,this._tween&&(this._tween.clear(),this._tween=null),Laya.timer.clear(this,this.loop)},b_s.prototype.tweenComplete=function(){this._isShowTxt=!1,this._tween&&(this._tween.clear(),this._tween=null),this.img_top.visible=!0,this.img_content.height=10,this.content_vBox.refresh(),this.content_vBox.visible=!0,this._lastTime=SyncTime.tickCount,Laya.timer.loop(30,this,this.loop)},b_s.prototype.changeTxt=function(){Ujgk(this)},b_s);function b_s(){var e=p_l.call(this)||this;return e.C_STRE_T=350,e.C_STAND_T=2e3,e.C_TXT_ALPHA_T=2500,e.C_SHR_T=2800,e._maxHeight=e.img_content.height,e._titlePosY=e.titleTxt.y,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.SceneChangeView=p_g;var d_u,b_e=(d_u=ui.scene.showChapterContentUI,__extends(d_m,d_u),d_m.prototype.setContent=function(e,p_l){Sfic(e,p_l,this)},d_m);function d_m(){return d_u.call(this)||this}e.ShowChaptercontent=b_e;var d_w,f_t=(d_w=ui.scene.showMapNameUI,__extends(v_z,d_w),v_z.prototype.setContent=function(e){Catf(e,this)},v_z);function v_z(){return d_w.call(this)||this}e.showTitle=f_t;var d_h,r_t=(d_h=ui.scene.Monster_HeroTalkUI,__extends(t_n,d_h),t_n.prototype.onAdded=function(){Czgf(this,Laya)},t_n.prototype.setContent=function(e,p_l,p_g,b_s,d_u){Mkim(e,p_l,p_g,b_s,d_u,this)},t_n.prototype.onUpMoveMonsterBG=function(){Laya.Tween.to(this.monsterbg,{j_l:this.monsterbg.y-this.monsterbg.height-15},500,null,Laya.Handler.create(this,this.onCompeletedTween))},t_n.prototype.onRemoved=function(){Suff(this,Laya)},t_n.prototype.onCompeletedTween=function(){Laya.Tween.to(this.monsterbg,{alpha:0},500),this.herobg.visible=!0,Laya.timer.once(3e3,this,this.onHeroCompleteTween)},t_n.prototype.onHeroCompleteTween=function(){Laya.Tween.to(this.herobg,{alpha:0},500)},t_n);function t_n(){var e=d_h.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.showMonster_HeroTalk=r_t}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.main.shengjiUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Gior(this,Stage)},b_s.show=function(e){this.instance||(this.instance=new b_s),Laya.stage.addChild(this.instance),this.instance.alpha=.5,this.instance.numClip.num=e,Laya.Tween.to(this.instance,{alpha:1},200),Laya.timer.once(1400,this.instance,this.instance.tweenOff)},b_s.prototype.tweenOff=function(){Laya.Tween.to(this,{alpha:0},200,Laya.Ease.linearNone,Laya.Handler.create(this,this.removeSelf,null,!0))},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.numClip=new e.NumClip(p_g.numBox,-16),p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g}e.ShengjiView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.main.skillIconUI,__extends(b_s,p_l),b_s.prototype.onEvents=function(){Iafw(this,Laya,LED,l_r)},b_s.prototype.offEvents=function(){Kdhv(this,Laya,LED,l_r)},b_s.prototype.startCoolCD=function(p_l,p_g){this._coolCD||(this._coolCD=new e.CoolDownMCEx(this.iconImg.width,this.iconImg.height,e.CoolDownMCExShape.pie),this.addChild(this._coolCD),this._coolCD.x=this.iconImg.x,this._coolCD.y=this.iconImg.y,this._coolCD.on("itemBox_cd_complete",this,this.cdComplete)),this._coolCD.startCD(p_l,p_g)},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"iconImg":SkillModel.instance.useDazhaoSkill()}},b_s.prototype.onSkillCdUpdate=function(){var e=SkillModel.instance.dazhaoId,p_l=Config.skill_skill[e];if(p_l){var p_g=p_l.mainIcon;this.iconImg.skin=Resource.ResUrl.getIconUrl(p_g)}var b_s=SkillModel.instance.getSkillVo(SkillModel.instance.dazhaoId);if(b_s){if(0<b_s.cdDuration){var d_u=b_s.runTime;if(b_s.remainTime<=0)return;this.startCoolCD(d_u,b_s.cdDuration)}0<b_s.remainTime||b_s.commonCDRuning?(this.effect_show.stop(),this.effect_show.visible=!1):(this.effect_show.visible=this.visible,this.effect_show.visible&&this.effect_show.play())}},b_s.prototype.onSkillListUpdate=function(){Snvh(this)},b_s.prototype.removeCoolCD=function(){this._coolCD&&(this._coolCD.destoryAll(),this._coolCD.parent&&this.removeChild(this._coolCD),this._coolCD=null)},b_s.prototype.cdComplete=function(){this._coolCD=null,this.effect_show.visible=this.visible,this.effect_show.visible&&this.effect_show.play()},b_s);function b_s(){return p_l.call(this)||this}e.SkillIconView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.marry.blackkingWallUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Qvai(LED,l_r,this,b_v,Laya)},b_s.prototype.loveInfoUpdate=function(){Mmqq(b_v)},b_s.prototype.onUpdateListData=function(e,p_l){if(e){var p_g=e.dataSource;e.setData(p_g)}},b_s.open=function(){Utfu(UIM,b_s)},b_s.prototype.updateStateTxt=function(){b_v.instance.isMarry()?this.stateTxt.text=(j_x("1300_1241_396")+j_x(362)):null==b_v.instance._marryVo.recMarryInfo?this.stateTxt.text="":this.stateTxt.text=(j_x("506_2035_655")+j_x("362_283"))},b_s.prototype.onClickReqMarry=function(){Abaz(e)},b_s.prototype.onClickClose=function(){Ynpy(this)},b_s.prototype.onClickSeek=function(){Cysk(e)},b_s.prototype.marryRegisterUpdate=function(){Acxn(this,b_v)},b_s.prototype.onRemoved=function(){Cfey(LED,l_r,this)},b_s.prototype.close=function(){Crcq(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemoved),p_g.list.array=[],p_g.list.vScrollBarSkin="",p_g.list.repeatX=2,p_g.list.scrollBar.elasticBackTime=200,p_g.list.scrollBar.elasticDistance=500,p_g.list.itemRender=e.BlackkingWall_Cell,p_g.list.renderHandler=Laya.Handler.create(p_g,p_g.onUpdateListData,null,!1),p_g}e.BlackkingWallView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.marry.blackkingWall_cellUI,__extends(b_s,p_l),b_s.prototype.updateCrossOpen=function(e,p_l,p_g,b_s){LED.off(l_r.CHAT_CROSS_OPEN,this,this.updateCrossOpen),1===CrossModel.ins.isBigOrLitterCross&&0<CrossModel.ins.crossOpenTime?this.onClick(e,p_l,p_g,b_s):b_p.broadcastNotice((j_x("1662_1998_206")+j_x("155_1186")+""+j_x("2462_1919_100")+j_x(362)+""))},b_s.prototype.setData=function(e){if(e){var p_l;p_l=b_p.isSameServer(e.sid)?e.base.name:"[S"+e.sid+"]"+e.base.name,this.playername.text=p_l;var p_g=Config.city[e.city];this.city.text=p_g&&p_g.name?Utils.$((j_x("582_2035_21")+j_x(1468)+":{1}"),p_g.name):"",this.gender.text=Utils.$((j_x("2283_194_1035")+":{1}"),e.qinmi),this.price.text=e.notice,Resource.ResManager.Instance.getImg(Resource.ResManager.getHeadUrl(e.base.entryId,e.base.headIcon),this.avatar);var b_s="res/ui/marry/head_pannel.png",d_u=Config.fashion_fashion[e.base.fashionAvatar];d_u&&d_u.avatar&&0<d_u.avatar.length&&(b_s=Resource.ResUrl.getIconUrl(d_u.avatar[0])),this.chatAr.skin=b_s,this.make_btn.on(Laya.Event.CLICK,this,this.onClickMakeBtn,[e.base.pid,e.base.entryId,e.base.headIcon,e.base.name])}},b_s.prototype.onClickMakeBtn=function(e,p_l,p_g,b_s){Khhx(e,p_l,p_g,b_s,LED,l_r,this,CrossModel)},b_s.prototype.onClick=function(p_l,p_g,b_s,d_u){p_l&&(LgcM.ins.heroVo.id!==p_l?e.MarryRequestView.open(d_u,p_g,b_s,p_l):b_p.broadcastNotice((j_x("100_362_1653")+j_x("1004_2462_1919")+j_x("68_2082_364"))))},b_s);function b_s(){return p_l.call(this)||this}e.BlackkingWall_Cell=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.marry.divorcePanelUI,__extends(b_s,p_l),b_s.open=function(){Ohml(UIM,b_s)},b_s.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"closeBtn":e.MarryReqListPanel.close();break;case"backBtn":b_v.instance.replyMarryInviti(b_v.instance._marryVo.loverInfo.pid,3),e.MarryReqListPanel.close();break;case"sureBtn":b_v.instance.replyMarryInviti(b_v.instance._marryVo.loverInfo.pid,2),e.MarryReqListPanel.close()}},b_s.prototype.onAdded=function(){Kpky(this,Laya)},b_s.prototype.onRemove=function(){Ucjx(this,Laya)},b_s.close=function(){Ksqb(UIM,b_s)},b_s.prototype.updateView=function(){var e=b_v.instance._marryVo.loverInfo;e&&(this.divorceInfo.innerHTML=Utils.$((j_x("68_2032_495")+j_x("398_1996")+"{1}"+j_x("1048_1792_362")+j_x("1014_413_2252")),e.name))},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.divorceInfo.style.color="#d8dcec",e.divorceInfo.style.fontSize=22,e.divorceInfo.style.font="SimHei",e.divorceInfo.style.wordWrap=!0,e.divorceInfo.style.align="center",e.divorceInfo.style.valign="center",e}e.DivorcePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.SweepAwardPageUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Ecov(LED,l_r,this,b_v,Laya)},b_s.prototype.onClickGet=function(){this._id>this._awardId&&(b_v.instance.reqLoverValueAward(this._awardId+1),this.getBtn.disabled=!0)},b_s.prototype.onClickClose=function(){Cohk(this)},b_s.prototype.onUpdateItemInfo=function(e,p_l){e&&(e.isShowName=!1,e.isShowNum=!0,e.setItemData(e.dataSource))},b_s.prototype.onUpdateAwardData=function(){Gwmr(this,b_v,j_x)},b_s.open=function(e){Enjn(e,UIM,b_s)},b_s.prototype.onRemoved=function(){Anjp(LED,l_r,this)},b_s.prototype.onUpdateData=function(){var e=Config.marry_love_value[this._awardId+1];if(e){var p_l=e.rewardItem||[];this.awardlist.array=0<p_l.length?b_p.getRewardDatas(p_l):[];var p_g=this.awardlist.length;this.awardlist.x=this.width/2-(100*p_g+(p_g-1)*this.awardlist.spaceX)/2}else this.reminderlabel.text=(j_x("15_2342_1300")+j_x("1117_1081_2251"));this._id<=this._awardId?(this.getBtn.disabled=!0,this.reminderlabel.text=(j_x("1014_438_15")+j_x("2342_1012_1117"))+(this._id+1)+(j_x("2342_1163_1174")+j_x("2111_2235_83"))):(this.getBtn.disabled=!1,this.reminderlabel.text=(j_x("1014_438_1012")+j_x(1117))+(this._awardId+1)+(j_x(2342)))},b_s.prototype.close=function(){Eztn(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.awardlist.hScrollBarSkin="",p_g.awardlist.itemRender=e.ItemBox,p_g.redpoint.visible=!1,p_g.awardlist.renderHandler=Laya.Handler.create(p_g,p_g.onUpdateItemInfo,null,!1),p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemoved),p_g.reminderlabel.align="center",p_g}e.LoverValueAwardView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.SweepAwardPageUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){var e=this.dataSource;if(this.reminderlabel.visible=this.redpoint.visible=!1,e){var p_l=Config.marry_achv[e];this.awardlist.array=b_p.getRewardDatas(p_l.rewardItem)}var p_g=this.awardlist.length;this.awardlist.x=this.width/2-(100*p_g+(p_g-1)*this.awardlist.spaceX)/2-10,this.closeBtn.on(Laya.Event.CLICK,this,this.onClickClose)},b_s.prototype.onClickClose=function(){Gzwm(this)},b_s.prototype.updateData=function(e,p_l){e&&(e.isShowName=!1,e.setItemData(e.dataSource))},b_s.open=function(e,p_l){Scpz(e,p_l,UIM,b_s)},b_s.prototype.onRemoved=function(){},b_s.prototype.close=function(){Ajxl(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.awardlist.array=[],p_g.awardlist.itemRender=e.ItemBox,p_g.awardlist.renderHandler=Laya.Handler.create(p_g,p_g.updateData,null,!1),p_g.getBtn.visible=!1,p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemoved),p_g}e.MarryAhievementAwardView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.marry.marryFbActivitydownUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){LED.on(l_r.UPDATE_CURRENY_LAYER,this,this.onUpdateLayer),this._totalTime=b_v.instance._marryVo.fbJumpLevelTime,this.x=Stage.width/2-this.width/2,this.y=Stage.height/3-230,b_v.instance._marryVo.curMarryFbLayer=1,Laya.timer.loop(1e3,this,this.onTimer)},b_s.prototype.onRemoved=function(){Wnpz(LED,l_r,this,Laya)},b_s.prototype.onTimer=function(){if(!(this._totalTime<0)){--this._totalTime;var e=b_v.instance._marryVo.curMarryFbLayer;10<=this._totalTime?e+=FB_PASS.fiveSecond:5<=this._totalTime?e+=FB_PASS.tenSecond:0<=this._totalTime?e+=FB_PASS.fifteenhSecond:(this.dec_label.visible=!1,this.bg2.visible=!1),this.dec_label.text=Utils.$(("{1}"+j_x("2081_1273_1331")+j_x("413_1163_372")+j_x("2057_573")+"{2}"+j_x(413)),this._totalTime,e)}},b_s.open=function(){Cxfp(UIM,b_s)},b_s.prototype.onUpdateLayer=function(e){e?b_s.close():(this.dec_label.visible=!0,this.bg2.visible=!0,this._totalTime=b_v.instance._marryVo.fbJumpLevelTime,this.onTimer())},b_s.close=function(){Aqir(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.MarryFbCountDownView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.fubenshengliUI,__extends(b_s,p_l),b_s.prototype.onAdd=function(){this.img_bg.source||(this.img_bg.skin=null,this.img_bg.skin="res/ui/fbCommon/zhandou_shengli_01.png"),this.contentBox.visible=this.stateBox.visible=this.storyBox.visible=!1,this.marryFbBox.visible=!0;var e=b_v.instance.integratFbAward();this.marryList.array=e&&0<e.length?b_p.getRewardDatas(e):[],this.backBtn.on(Laya.Event.CLICK,this,this.onClickBack),Laya.timer.loop(1e3,this,this.onTimer)},b_s.prototype.updateItemData=function(e,p_l){e&&e.dataSource&&(e.isShowName=!1,e.setItemData(e.dataSource))},b_s.prototype.onClickBack=function(){b_v.instance.resetFbTime(),b_v.instance.resetMarryFbAwardList(),this.close(),e.MarryFbCountDownView.close(),DB.instance.query(c2w_leave_fb,new c2w_leave_fb),this._time=10},b_s.prototype.onTimer=function(){this.countdown_txt.text=Utils.$(("{1}"+j_x(2081)+""),--this._time),this._time<=0&&(this._time=10,this.close(),DB.instance.query(c2w_leave_fb,new c2w_leave_fb),Laya.timer.clear(this,this.onTimer))},b_s.open=function(){Ouda(UIM,b_s)},b_s.prototype.onRemoved=function(){Ecwt(Laya,this)},b_s.prototype.close=function(){Ezap(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g._time=10,p_g.marryList.vScrollBarSkin="",p_g.marryList.scrollBar.elasticBackTime=100,p_g.marryList.scrollBar.elasticDistance=200,p_g.marryList.itemRender=e.ItemBox,p_g.marryList.renderHandler=Laya.Handler.create(p_g,p_g.updateItemData,null,!1),p_g.on(Laya.Event.ADDED,p_g,p_g.onAdd),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemoved),p_g}e.MarryFbResultView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.marry.marryFbRewardUI,__extends(b_s,p_l),b_s.open=function(){Gteb(UIM,b_s)},b_s.prototype.onUpdateListData=function(e,p_l,p_g){e==this.allReward?(p_l.isShowName=!1,p_l.setItemData(p_l.dataSource)):e==this.nextReward&&(p_l.isShowName=!1,p_l.setItemData(p_l.dataSource))},b_s.close=function(){Gusx(UIM,b_s)},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":b_s.close()}},b_s.prototype.onRemove=function(){Gmvg(this,Laya)},b_s.prototype.onAdded=function(){Avti(this,Laya)},b_s.prototype.updateView=function(){this.allReward.array=b_p.getRewardDatas(b_v.instance.integratFbAward());var e=b_v.instance._marryVo.curMarryFbLayer,p_l=Config.fb_marry_fb[e];p_l?(this.nextReward.array=b_p.getRewardDatas(p_l.reward),this.nextTitle.text=Utils.$((j_x(573)+"{1}"+j_x("413_2235_83")),e)):(this.nextTitle.text=(j_x("1300_531_2111")+j_x("582_1896_2235")+j_x(83)),this.nextReward.array=[])},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g.allReward.itemRender=p_g.nextReward.itemRender=e.ItemBox,p_g.allReward.renderHandler=Laya.Handler.create(p_g,p_g.onUpdateListData,[p_g.allReward],!1),p_g.nextReward.renderHandler=Laya.Handler.create(p_g,p_g.onUpdateListData,[p_g.nextReward],!1),p_g}e.MarryFbRewardPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.marry.marryFbViewUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){LED.on(l_r.MARRYFB_ENTER_TIMES,this,this.onUpdateFBTimes),LED.on(l_r.SUCCESS_BUY_FBCOUNT,this,this.onUpdateFBTimes),b_v.instance.reqEnterMarryFbCount();var e=Config.global[GlobalDefine.marry_fb_reward];e&&e.t_info&&(this.list.array=b_p.getRewardDatas(e.t_info)),this.challengebtn.on(Laya.Event.CLICK,this,this.onClickChallenge),this.closebtn.on(Laya.Event.CLICK,this,this.onClickClose),this.addbtn.on(Laya.Event.CLICK,this,this.onClickAdd)},b_s.prototype.updateItemData=function(e,p_l){e&&e.dataSource&&(e.isShowName=!1,e.setItemData(e.dataSource))},b_s.open=function(){Urvu(UIM,b_s)},b_s.prototype.onRemoved=function(){Ofix(LED,l_r,this)},b_s.prototype.onClickChallenge=function(){b_v.instance._marryVo.marryFbTimes?(b_p.registerAutoOpenPanel(e.FriendPanel,b_p.mapID,(function(){e.FriendPanel.open(2)})),this.close(),b_v.instance.reqEnterMarryFb()):b_p.broadcastNotice((j_x("1163_33_2456")+j_x("1443_944_235")+j_x("2348_2462_1779")))},b_s.prototype.onClickAdd=function(){var e=Config.global[GlobalDefine.marry_fb_deduct];if(e){var p_l=e.i_info,p_g=LgcM.ins.heroVo;p_l&&p_g.gold>=p_l?b_p.confirm(Utils.$((j_x("68_2032_572")+j_x(2218)+"{1}"+j_x("1263_869_1355")+j_x(2420)+"1"+j_x("235_1014_438")+j_x("1443_944_235")+j_x(2348)),Config.global[GlobalDefine.marry_fb_deduct].i_info),this.onCallFunc):b_p.broadcastNotice((j_x("1263_869_2462")+j_x(1779)))}},b_s.prototype.onUpdateFBTimes=function(){var e=b_v.instance._marryVo.marryFbTimes;this.challengeTime.text=Utils.$((j_x("1111_1902_235")+j_x(2348)+"{1}"+j_x(235)),e)},b_s.prototype.onCallFunc=function(){Eqmm(b_v)},b_s.prototype.onClickClose=function(){Gbkt(this)},b_s.prototype.close=function(){Elhx(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.list.hScrollBarSkin="",p_g.list.itemRender=e.ItemBox,p_g.list.renderHandler=Laya.Handler.create(p_g,p_g.updateItemData,null,!1),p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemoved),p_g}e.MarryFbView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.marry.marryHelpUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Ennx(this,Laya)},b_s.open=function(){Urlc(UIM,b_s)},b_s.prototype.onRemove=function(){Mtxq(this,Laya)},b_s.close=function(){Sime(UIM,b_s)},b_s.prototype.onCloseBtn=function(){Crbi(b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.MarryHelpPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.marry.marryInviteTipsUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){LED.on(l_r.PROPOSE_TO_INVITE,this,this.getData),LED.on(l_r.LOVER_INFO_UPDATE,this,this.onLoverInfo),LED.on(l_r.UPDATE_MARRY_LIST,this,this.getData),LED.on(l_r.LOVER_INFO_UPDATE,this,this.LoverClose),this.x=Stage.width-this.width-30+1e3,this.y=UIM.instance.getMainLetUI().getTaskBottonY()-this.height+1e3,this.getData();var e=Stage.width-this.width-30;Laya.Tween.to(this,{f_u:e,j_l:UIM.instance.getMainLetUI().getTaskBottonY()-this.height},100),this.closeBtn.on(Laya.Event.CLICK,this,this.onClickCloseBtn),this.surebtn.on(Laya.Event.CLICK,this,this.onClickSureBtn)},b_s.prototype.onClickSureBtn=function(){this._playerID&&this._playerName&&b_p.confirm(Utils.$((j_x("68_2032_420")+j_x(2360)+"{1}"+j_x("2046_100_362")+j_x("1068_1777")),this._playerName),this.onCallBack.bind(this))},b_s.open=function(){Mzyq(UIM,b_s)},b_s.prototype.onLoverInfo=function(e){e&&e.marry&&this.close()},b_s.prototype.LoverClose=function(){b_v.instance._marryVo.loverInfo&&b_v.instance._marryVo.marryId&&this.close()},b_s.prototype.onRemoved=function(){Cwuc(LED,l_r,this)},b_s.prototype.onCallBack=function(){this._playerID&&(b_v.instance.replyMarryInviti(this._playerID,0),b_v.instance.deleteSeekMarryInfoByPin(this._playerID),b_v.instance.reqMarryList(),this._playerID=0),UIM.close(b_s)},b_s.prototype.updateData=function(e){e&&(this.head_img.skin=Resource.ResManager.getHeadUrl(e.entryId,e.headIcon),this.dectxt.text=Utils.$(("{1}"+j_x("883_1749_100")+j_x(362)),e.name),this._playerID=e.pid,this._playerName=e.name)},b_s.prototype.getData=function(){if(this.parent)if(this._invitiInfoArr=b_v.instance._marryVo.seekMarryInfoArr,this._invitiInfoArr&&this._invitiInfoArr.length){var e=b_v.instance.popSeekMarryInfo();this.updateData(e)}else this.close();else this.close()},b_s.prototype.onClickCloseBtn=function(){this._playerID&&(b_v.instance.replyMarryInviti(this._playerID,1),b_v.instance.deleteSeekMarryInfoByPin(this._playerID)),this.getData()},b_s.prototype.close=function(){Ccky(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.MarryInviteTips=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.marry.marryMainUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Oskg(b_v,LED,l_r,this,Laya)},b_s.prototype.showFosterBtn=function(){this._loverValue.loveLv&&(Config.marry_love_value[this._loverValue.loveLv+1]?(this.marry_btn.visible=this.onekeycul_btn.visible=!0,this.biggestLv_txt.visible=!1):(this.marry_btn.visible=this.onekeycul_btn.visible=!1,this.biggestLv_txt.visible=!0))},b_s.prototype.onRemoved=function(){LED.off(l_r.LOVER_INFO_UPDATE,this,this.updateLoverInfo),LED.off(l_r.MARRY_RING_INFO_UPDATE,this,this.calFight),LED.off(l_r.LOVERVALUE_UPDATE,this,this.onUpdateLoverValue),LED.off(l_r.MARRY_ACHIEVEMENT_UPDATE,this,this.onAchievementData),LED.off(l_r.LOVERVALUE_AWARD_INFO,this,this.onUpdateLoverValueAward),LED.off(l_r.GET_LOVERVALUE_AWARD,this,this.onUpdateLoverValueAward),LED.off(l_r.SKILL_LIST_UPDATE,this,this.calFight),LED.off(l_r.MARRY_PALYER_INFO,this,this.renderOtherBox),LED.off(l_r.MARRYFB_ENTER_TIMES,this,this.onUpdateFBTimes),LED.off(l_r.MARRY_SWEET_INFO,this,this.updateSweetLevel),LED.off(l_r.MARRY_SWEET_UPGRADE,this,this.updateSweetLevel),LED.off(l_r.ITEM_ADD,this,this.sweetRedShow),LED.off(l_r.ITEM_REMOVE,this,this.sweetRedShow),LED.off(l_r.ITEM_AMOUNT_CHANGE,this,this.sweetRedShow),LED.off(l_r.UPDATE_SWEET_SCORE,this,this.sweetRedShow),this.myModel&&this.myModel.clearRes(),this.otherModel&&this.otherModel.clearRes(),this.other_img.off(Laya.Event.CLICK,this,this.onCheckImage),Laya.timer.clear(this,this.updateDivorceTime),this.cancelDivorce.off(Laya.Event.CLICK,this,this.onCancelDivorce),LED.off(l_r.UPDATE_MARRY_LIST,this,this.onUPdateMarryListRed),b_v.instance.setMarryListRed(null)},b_s.prototype.sweetRedShow=function(){var e=!1;b_v.instance._marryVo.loverInfo&&b_v.instance._marryVo.marryId&&(e=!0),this.sweet_red.visible=e&&(b_v.instance.isEnoughSM()||b_v.instance.isSweetSkillA()||b_v.instance.isSweetLevelUpdate())},b_s.prototype.onCancelDivorce=function(){b_p.confirm((j_x("68_2032_2111")+j_x("1661_1016_362")),(function(){b_v.instance.reqCancelDeleteMarry()}))},b_s.prototype.updateDivorceTime=function(){var e=b_v.instance._marryVo.deleteMarryTime;e&&0<e&&(e=e+86400-SyncTime.serverTime/1e3,this.divorceTime.text=Utils.formatTimeStr(e))},b_s.prototype.onUpdateLoverValue=function(){b_v.instance._marryVo.marryRingInfo,this._isAutoFoster?(Laya.Tween.to(this,{progress:1},500),Laya.timer.once(600,this,this.updateData)):this.updateData(),this.calFight()},b_s.prototype.updateBtnStatu=function(){this.onekeycul_btn.label=this._isAutoFoster?(j_x("2111_1661")):(j_x("1737_2205_2394")+j_x(2013))},b_s.prototype.renderMyBox=function(){this.myName.text=this.heroVo.name,this.myServer.text="s"+b_p.config.mergSerId,this.myModel||(this.myModel=new n_k),this.my_sp.addChild(this.myModel),this.showMarryModel(this.myModel,this.heroVo.entryId),this.myLv.text=this.heroVo.level.toString(),this.my_img.alpha=0},b_s.prototype.onUpdateFBTimes=function(){Islr(this,b_v)},b_s.prototype.updateData=function(){if(this._loverValue=b_v.instance._marryVo.loverValueInfo,this._loverValue){this.fosterLv.text=Utils.$("Lv.{1}",this._loverValue.loveLv);var e=Config.marry_love_value[this._loverValue.loveLv+1];if(e){this.progressValueLab.text=Utils.$("{1}/{2}",this._loverValue.loveExp,e.num),this.fosterProgress.value=this._loverValue.loveExp/e.num;var p_l=BagModel.instance.getItemCountByItemID(e.cost[0][0],BagTypeDefine.BAG_TYPE_ITEM);this.loveNum.color=p_l>=e.cost[0][1]?"#71de66":"#a9b8de",this.loveNum.text=Utils.$("{1}/{2}",p_l,e.cost[0][1])}this.showFosterBtn()}else this.fosterLv.text="Lv.0";this.fosterred.visible=this.autoFosterRed.visible=b_v.instance.canFosterLoverValue(),this.award_red.visible=b_v.instance.isGetLoverValueAward()},b_s.prototype.renderOtherBox=function(e){b_v.instance.isMarry()&&(this.otherModel||(this.otherModel=new n_k),this.other_sp.addChild(this.otherModel),this.showMarryModel(this.otherModel,e.entryId))},b_s.prototype.onCheckImage=function(){var e=b_v.instance._marryVo.loverInfo;b_v.instance.isMarry()&&n_d.instance.reqViewRoleInfo(e.pid)},b_s.prototype.updateLoverInfo=function(){this._data=b_v.instance._marryVo.loverInfo,this.renderMyBox(),this.updateData(),this.divorceBox.visible=!1;var e=LgcM.ins.heroVo.id;if(this.calFight(),this._data&&b_v.instance._marryVo.marryId){var p_l=b_v.instance._marryVo.reqDeleteMarryPid;this.cancelDivorce.visible=p_l==e,this.divorce_btn.disabled=!1,p_l&&(Laya.timer.loop(1e3,this,this.updateDivorceTime),this.divorceBox.visible=!0),this.updateDivorceTime(),this.otherName.text=this._data.name,this.otherServer.text="s"+this._data.sid,this.other_img.alpha=this.my_img.alpha=0,this.other_sp.visible=this.my_sp.visible=!0,d_o.instance.reqPlayerinfo(CommonOpType.MARRY,this._data.pid),this.marry_btn.label=(j_x("2394_2013")),this.onekeycul_btn.disabled=!1,this.otherLv.text=this._data.lv.toString(),this.lotter_lock.visible=this.fb_suo.visible=this.ring_suo.visible=this.task_suo.visible=!1;var p_g=b_v.instance._marryVo.marryTime,b_s=Math.floor((SyncTime.serverTime/1e3-p_g)/3600/24)+1;this.marry_txt.text=(j_x("1300_396_362")+":")+b_s+(j_x(2308)),this.onAchievementData()}else this.fosterLv.text="Lv.0",this.divorce_btn.disabled=!0,this.otherName.text=(j_x("2287_814_2388")+j_x(1603)),this.otherServer.text=" ",this.marry_btn.label=(j_x("396_362")),this.onekeycul_btn.disabled=!0,this.otherLv.text="",this.lotter_lock.visible=this.fb_suo.visible=this.ring_suo.visible=this.task_suo.visible=!0,this.marry_txt.text=(j_x("1300_396_362")+"0"+j_x(2308)),this.fb_red.visible=this.fosterred.visible=this.autoFosterRed.visible=this.award_red.visible=this.marryring_red.visible=this.task_red.visible=!1,1===this.heroVo.entryId?this.other_img.skin=this.skinRes[0]:this.other_img.skin=this.skinRes[1],this.other_img.alpha=1,this.other_sp.visible=!1;if(this._data){this.fosterLv.text=Utils.$("Lv.{1}",this._data.loveLv);var d_u=Config.marry_love_value[this._data.loveLv+1];d_u&&(this.fosterProgress.value=this._data.loveExp/d_u.num,this.progressValueLab.text=Utils.$("{1}/{2}",this._data.loveExp,d_u.num))}this.updateSweetLevel()},b_s.prototype.updateSweetLevel=function(){if(this._data&&b_v.instance._marryVo.marryId){var e=b_v.instance.sweetId;if(0!=e){var p_l=Config.marry_sweet[e];this.sweetLevelClip.index=p_l?p_l.index:0,this.sweetLevelClip.visible=!0,this.sweetText.visible=!1,this.upgradeBtn.visible=!0}else b_v.instance.reqMarrySweetInfo()}else this.sweetLevelClip.visible=!1,this.sweetText.visible=!0,this.sweetText.text=(j_x("396_362_1865")+j_x("155_1186_2135")+j_x("2042_1035")),this.upgradeBtn.visible=!1;this.calFight(),this.sweetRedShow()},b_s.prototype.onCheckProp=function(){var p_l=b_v.instance,p_g=p_l._marryVo.marryRingInfo,b_s=p_l.getMarryRingInfoById(p_g.lv),d_u=[];b_s&&d_u.push(CharacterProperty.getPropertys(b_s.lvAttr));var b_e=p_l._marryVo.loverValueInfo;if(b_e){var d_m=Config.marry_love_value[b_e.loveLv+1];d_m&&d_u.push(CharacterProperty.getPropertys(d_m.attr))}var d_w=b_v.instance.sweetId,f_t=Config.marry_sweet[d_w];f_t&&d_u.push(b_p.getPropInfos(f_t.lvAttr)),d_u.push(b_v.instance.addSweetProps()),e.PropShowPanel.open(d_u,[(j_x("396_362_613")+j_x(233)+":"),(j_x("362_217_613")+j_x(233)+":"),(j_x("2135_2042_1035")+j_x("613_233")+":"),(j_x("2135_2042_1035")+j_x("2243_1919")+":")])},b_s.prototype.calFight=function(){var e=b_v.instance;b_p.getNumSp(NumType.FIGHTING,e.marryMainFight()+e.sweetFight(),this.atkNum,-10),e.isMarry()&&(this.marryring_red.visible=e.canFosterMarryRing()||e.isRingStarRed()),this.sweetRedShow()},Object.defineProperty(b_s.prototype,"progress",{get:function(){return this.fosterProgress.value},set:function(e){this.fosterProgress.value=e;var p_l=parseInt(this.progressValueLab.text.split("/")[1])||0;this.progressValueLab.text=(p_l*e).toFixed(0)+"/"+p_l},enumerable:!0,configurable:!0}),b_s.prototype.onClickBlackkingWall=function(){Krdb(e)},b_s.prototype.onClickLoverValuebtn=function(){this._loverValue&&e.LoverValueAwardView.open(this._loverValue.loveLv)},b_s.prototype.onClickFbBtn=function(){b_v.instance.isMarry()?e.MarryFbView.open():b_p.broadcastNotice((j_x("1777_320_396")+j_x(362)))},b_s.prototype.onDisvorce=function(e){Gnnt(e,b_v)},b_s.prototype.onUpdateLoverValueAward=function(){Uyfj(this,b_v)},b_s.prototype.onUPdateMarryListRed=function(){Ozzd(this,b_v)},b_s.prototype.onClickMarryBtn=function(){b_v.instance.isMarry()?this.canFoster()&&b_v.instance.reqLoverVaueFoster():e.BlackkingWallView.open()},b_s.prototype.onAchievementData=function(){Ervo(this,b_v,AchTaskType)},b_s.prototype.onClickAutoFoster=function(){this._isAutoFoster=!this._isAutoFoster,this.updateBtnStatu(),this._isAutoFoster?this.canFoster()&&(this.reqOnykeyFoster(),Laya.timer.loop(1e3,this,this.reqOnykeyFoster)):(b_v.instance.reqWifeInfo(),Laya.timer.clear(this,this.reqOnykeyFoster))},b_s.prototype.onClickParty=function(){b_v.instance.isMarry()?e.LottertDrawMarryPanel.open(null):b_p.broadcastNotice((j_x("1777_320_396")+j_x(362)))},b_s.prototype.onClickDivorce=function(){var e=Utils.$((j_x("68_2032_1996")+"{1}"+j_x("1016_362")),this._data.name),p_l=this.onDisvorce.bind(this);b_p.confirm(e,p_l,[this._data.pid])},b_s.prototype.canFoster=function(){var e=b_v.instance._marryVo.loverValueInfo;if(e){var p_l=Config.marry_love_value[e.loveLv+1];return Config.marry_love_value[e.loveLv+2]?!(BagModel.instance.getItemCountByItemID(p_l.cost[0][0],BagTypeDefine.BAG_TYPE_ITEM)<p_l.cost[0][1]&&(this._isAutoFoster&&(this._isAutoFoster=!this._isAutoFoster,this.updateBtnStatu(),b_v.instance.reqWifeInfo(),Laya.timer.clear(this,this.reqOnykeyFoster)),r_f.instance.isWindow(p_l.cost[0][0]),1)):(this._isAutoFoster&&(this._isAutoFoster=!this._isAutoFoster,this.updateBtnStatu(),b_v.instance.reqWifeInfo(),Laya.timer.clear(this,this.reqOnykeyFoster)),b_p.broadcastNotice((j_x("1300_1117_1012")+j_x("1081_2251_15")+j_x(2342))),!1)}return!1},b_s.prototype.onClickBlackkingTask=function(){b_v.instance.isMarry()?e.MarryTaskView.open():b_p.broadcastNotice((j_x("1777_320_396")+j_x(362)))},b_s.prototype.reqOnykeyFoster=function(){this.canFoster()?b_v.instance.reqLoverValueAutoFoster():Laya.timer.clear(this,this.reqOnykeyFoster)},b_s.prototype.onClickMarryRing=function(){b_v.instance.isMarry()?e.MarryRingView.open():b_p.broadcastNotice((j_x("1777_320_396")+j_x(362)))},b_s.prototype.onClickClose=function(){Klev(e)},Object.defineProperty(b_s.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),b_s.prototype.showMarryModel=function(e,p_l){var p_g="";1===p_l?p_g="role/actor031":2===p_l&&(p_g="role/actor032"),e.changeModel(p_g),e.show()},b_s.prototype.onMarryListBtnClick=function(){Aeui(console,j_x,e)},b_s.prototype.onUpgradeBtnClick=function(){Ynoq(console,j_x,e)},b_s);function b_s(){var e=p_l.call(this)||this;return e._isAutoFoster=!1,e.divorce_btn.disabled=!0,e.biggestLv_txt.visible=!1,e.lotter_lock.visible=e.fb_suo.visible=e.ring_suo.visible=e.task_suo.visible=!1,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.myVo=new Engine2d.ActorBaseVo,e.myVo.id=1111,e.myVo.type=Engine2d.ActorTypeDefine.PLAYER,e.otherVo=new Engine2d.ActorBaseVo,e.otherVo.id=2222,e.otherModel=new n_k,e.otherVo.type=Engine2d.ActorTypeDefine.PLAYER,e.skinRes=["res/ui/marry/Image_girlshadow.png","res/ui/marry/Image_boyshadow.png"],e}e.MarryMainView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.marry.marryRegisterUI,__extends(b_s,p_l),b_s.prototype.onFocus=function(){Oacn(this)},b_s.prototype.onCallFunc=function(e){e&&1<e.length&&(b_v.instance.reqMarryRegister(e[0],e[1]),UIM.close(b_s),b_v.instance.reqBlackkingWallInfo())},b_s.prototype.changePos=function(e){void 0===e&&(e=!1);var p_l=e?120:60;this.showTxt.padding="0,0,"+p_l+",0"},b_s.prototype.onAdded=function(){Yate(this,Laya,LED,l_r)},b_s.prototype.init=function(){Anvr(Config,this)},b_s.prototype.onBlur=function(){Yqcq(this)},b_s.prototype.onClickCrossOpen=function(){Isfk(CrossModel)},b_s.prototype.onClickRegister=function(){var e=this.cityComboBox.selectedIndex+1;!e||e>this._length?b_p.broadcastNotice((j_x("1777_517_1191")+j_x("582_2035_21")+j_x(1468))):1===CrossModel.ins.isBigOrLitterCross&&0<CrossModel.ins.crossOpenTime?this.onCallFunc([e,this.showTxt.text]):b_p.broadcastNotice((j_x("1662_1998_206")+j_x("155_1186")+""+j_x("2462_1919_571")+j_x("1381_655_362")+""))},b_s.prototype.onRemoved=function(){Ggcf(this,Laya,LED,l_r)},b_s.prototype.onClickClose=function(){Etoc(this)},Object.defineProperty(b_s.prototype,"Hero",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),b_s.open=function(){Eght(UIM,b_s)},b_s.prototype.close=function(){Msaq(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e._cityLabels="",e._cityID=0,e._length=0,e._maxPrice=2e4,e.init(),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.changePos(),e}e.MarryRegisterView=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.marry.marryRequestListUI,__extends(d_u,p_l),d_u.open=function(){Mdpn(UIM,d_u)},d_u.close=function(){Ovhi(UIM,d_u)},d_u.prototype.onAdded=function(){Udxk(this,Laya,LED,l_r,b_v)},d_u.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":d_u.close();break;case"acceptBtn":var p_l=this.requestList.selectedItem;p_l&&(b_v.instance.replyMarryInviti(p_l.pid,0),b_v.instance.deleteSeekMarryInfoByPin(p_l.pid),b_v.instance.reqMarryList());break;case"refuseBtn":var p_g=this.requestList.selectedItem;p_g&&(b_v.instance.replyMarryInviti(p_g.pid,1),b_v.instance.deleteSeekMarryInfoByPin(p_g.pid),b_v.instance.reqMarryList())}},d_u.prototype.updateRequestItem=function(e,p_l,p_g){if(p_l){var b_s=p_l.dataSource,d_u=p_l.getChildByName("combatLab"),b_e=p_l.getChildByName("stateLvLab"),d_m=p_l.getChildByName("nameLab"),d_w=p_l.getChildByName("lvLab"),f_t=p_l.getChildByName("avatarImg"),v_z=p_l.getChildByName("frame"),d_h=Config.state_state[b_s.stateLv];if(f_t=Resource.ResManager.Instance.getImg(Resource.ResManager.getHeadUrl(b_s.entryId,b_s.headIcon),f_t),b_s.fashionAvatar&&4==Config.fashion_fashion[b_s.fashionAvatar].type){v_z.visible=!0;var r_t=Config.fashion_fashion[b_s.fashionAvatar].avatar[0];r_t=Resource.ResUrl.getIconUrl(r_t),v_z=Resource.ResManager.Instance.getImg(r_t,v_z)}else v_z.visible=!1;d_u.text=b_s.combat.toString(),b_e.text=d_h.desc,d_m.text=b_s.name,d_w.text=Utils.$(("{1}"+j_x(2342)),b_s.lv)}},d_u.prototype.onRemove=function(){Ofmv(this,Laya,LED,l_r)},d_u.prototype.updateView=function(){Otcv(this,b_v)},d_u);function d_u(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.requestList.selectEnable=!0,e.requestList.renderHandler=p_g.create(e,e.updateRequestItem,[e.requestList],!1),e.requestList.vScrollBarSkin="",e.requestList.scrollBar.elasticDistance=200,e.requestList.scrollBar.elasticBackTime=500,e}e.MarryReqListPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.marry.marryRequestUI,__extends(b_s,p_l),b_s.open=function(e,p_l,p_g,d_u){UIM.open(b_s,null,{name:e,entryId:p_l,icon:p_g,pid:d_u},!1,!1,!0)},b_s.prototype.close=function(){Wjby(UIM,b_s)},b_s.prototype.onSuccessSend=function(){Cdhv(b_p,j_x)},b_s.prototype.onAdded=function(){LED.on(l_r.FRIEND_RECOMMEND_LIST_UPDATE,this,this.onSuccessSend);var e=this.dataSource.name,p_l=this.dataSource.icon,p_g=this.dataSource.pid;if(e&&p_g&&null!=p_l){var b_s=LgcM.ins.heroVo;this.left_ava.skin=Resource.ResManager.getHeadUrl(b_s.entryId,b_s.headIcon),this.right_ava.skin=Resource.ResManager.getHeadUrl(this.dataSource.entryId,p_l),this.left_name.text=b_s.name,this.right_name.text=e,this.left_name.x=this.left_ava.width/2-this.left_name.textField.textWidth/2,this.right_name.x=this.right_ava.width/2-this.right_name.textField.textWidth/2;var d_u=new ModuleItemVO;d_u.id=IconType.MARRY_RING,d_u.amount=1,this.marryRing.isShowName=!1,this.marryRing.setItemData(d_u),this.makeBtn.on(Laya.Event.CLICK,this,this.onlickMake,[p_g])}this.closebtn.on(Laya.Event.CLICK,this,this.onClickClose)},b_s.prototype.onRemoved=function(){Gdff(LED,l_r,this,Laya)},b_s.prototype.onlickMake=function(e){e&&(b_v.instance.isMarry()?b_p.broadcastNotice((j_x("1749_1300_396")+j_x(362)+"")):1<=BagModel.instance.getItemCountByItemID(IconType.MARRY_RING,BagTypeDefine.BAG_TYPE_ITEM)?(b_p.broadcastNotice(Utils.$((j_x("1300_883")+"{1}"+j_x("100_362")+""+j_x("15_1427_2085")+j_x(1449)),this.dataSource.name)),b_v.instance.reqMarry(e)):r_f.instance.isWindow(IconType.MARRY_RING))},b_s.prototype.onClickClose=function(){Skhx(this)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.MarryRequestView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.marry.marryRingActivateUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Iqpy(this,Laya)},b_s.prototype.renderItem=function(e,p_l){e.isShowName=!1,e.setItemData(e.dataSource);var p_g=e.dataSource,b_s=BagModel.instance.getItemCountByItemID(p_g.id);e.numTxt.color=b_s<p_g.amount?Utils.Color.RED:Utils.Color.NAME_GREEN,e.numTxt.text=b_s+"/"+p_g.amount},b_s.prototype.changeModelView=function(e){var p_l=Config.marry_ringAct[e];this._ringModel.changeModel("effects/marry"),""!=p_l.ringModel&&this._ringModel.setAction(p_l.ringModel,0,!0),p_l.nameRes&&""!=p_l.nameRes&&(this.nameImg.skin="res/ui/marry/"+p_l.nameRes)},b_s.prototype.onClose=function(){Igfz(b_s)},b_s.prototype.updateView=function(){if(this.dataSource){this.changeModelView(this.dataSource.id);var e=Config.marry_ringAct[this.dataSource.id];this.desc.text=e.des;var p_l=b_p.getRewardDatas(e.actNum);this.rewardList.array=p_l,z_j.centerList(this.rewardList,p_l,5,this.width,0)}},b_s.prototype.onActivateBtn=function(){var e=this.dataSource.id;b_v.instance.isCanRingActive(e,!0)&&(b_v.instance.reqRingActive(e),b_s.close(),b_p.broadcastNotice((j_x("2335_1796_402")+j_x(2142))))},b_s.open=function(e){UIM.open(b_s,null,{id:e},!1,!1,!0,!0)},b_s.prototype.onRemove=function(){this.activateBtn.off(Laya.Event.CLICK,this,this.onActivateBtn),this.closeBtn.off(Laya.Event.CLICK,this,this.onClose),this._ringModel&&this._ringModel.clearRes()},b_s.close=function(){Qcxi(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),z_j.setList(p_g.rewardList,p_g,p_g.renderItem),p_g.rewardList.itemRender=e.ItemBox,p_g._ringModel=new n_k,p_g.ringModel.addChild(p_g._ringModel),p_g}e.MarryRingActivate=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.marry.marryRingSkillTipsUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Ixmn(this,Laya,LED,l_r)},b_s.prototype.updataView=function(){if(this.skillLv2.text="",this._id){var e=SkillModel.instance.getConfigSkillTypeByPvType(this._skillTipTpye),p_l=SkillModel.instance.countMarrySkillId(this._id,1),p_g=e[p_l],b_s=e[p_l+1];if(this.upBtn.visible=!1,p_g){var d_u;this.nameTxt.text=p_g.name,d_u=this._skillTipTpye===PassiveSkillType.MARRY?Resource.ResUrl.getIconUrl(p_g.icon,!0):Resource.ResUrl.getIconUrl(p_g.icon,!1),this.itemIcon.skin=d_u||"";var b_e,d_m=SkillModel.instance.checkActive(this._id,this._skillTipTpye),d_w=void 0,f_t=0;if(d_m){var v_z=SkillModel.instance.getPassiveVoById(this._id,this._skillTipTpye);if(v_z){p_l=v_z.id+v_z.level-1;var d_h=!0;if(this._skillTipTpye!=PassiveSkillType.MARRY){p_l+=MirrorSelfModel.ins.addSKillLVByEquipId(this.dataSource.voData.id);var r_t=SkillModel.instance.getConfigPassiveTheme(this._skillTipTpye)[this.dataSource.voData.id];r_t&&r_t.maxSkillLv<=v_z.level&&(d_h=!1)}if(b_s=e[p_l+1],p_g=e[p_l],this._skillTipTpye===PassiveSkillType.MARRY){var t_n={};p_g.featureParam?t_n[2]=CharacterProperty.getPropertys(p_g.featureParam):t_n[2]=[],TalismanModel.instance.setProp(this.dec_txt,t_n,"<br>",["#f0ecd8","#f0ecd8"],2)}else this.dec_txt.innerHTML=p_g.desc;this.updataConsum(v_z.id+v_z.level-1),f_t=v_z.level,this.upBtn.label=(j_x("371_2342")),this.upBtn.visible=d_h}}else this.dec_txt.innerHTML=(j_x("206_2335_1796")),this._skillTipTpye===PassiveSkillType.MARRY?(d_w=b_v.instance.canOpenSKill(p_l,!d_m))?this.tipsHtml.innerHTML=(j_x("1163_2335_1796")):p_g.activeCond?this.tipsHtml.innerHTML=Utils.$((j_x("362_217_15")+j_x("2342_1117_1012")+"{1}"+j_x("2342_1048_1745")),p_g.activeCond[1]):this.tipsHtml.innerHTML=Utils.$((j_x("1661_1502")+"{1}"+j_x("844_1048_1745")),p_g.consume[0][1]):(this.upBtn.visible=!0,d_w=SkillModel.instance.canOpenPvSkill(p_l,this.dataSource.voData,this._skillTipTpye),this.updataConsum(p_l),b_s=p_g),d_w||(this.tipsHtml.style.color="#71de66"),this.upBtn.label=(j_x("2335_1796"));this.skillLv.text=Utils.$((j_x("15_2342")+"{1}"+j_x(2342)),f_t),this._skillTipTpye!=PassiveSkillType.MARRY&&(this.skillLv2.text="",0<(b_e=0<f_t?MirrorSelfModel.ins.addSKillLVByEquipId(this.dataSource.voData.id):0)&&(this.skillLv2.text="+"+b_e)),b_s?this._skillTipTpye===PassiveSkillType.MARRY?(t_n={},b_s.featureParam?t_n[2]=CharacterProperty.getPropertys(b_s.featureParam):t_n[2]=[],TalismanModel.instance.setProp(this.nextHtml,t_n,"<br>",["#f0ecd8","#f0ecd8"],2)):this.nextHtml.innerHTML=b_s.desc:this.nextHtml.innerHTML=(j_x("1300_1117_1081")+j_x(1375))}}},b_s.prototype.updataConsum=function(e){var p_l=SkillModel.instance,p_g=p_l.getPassiveVoById(this._id,this._skillTipTpye),b_s=!0;if(p_g){if(e+=1,this._skillTipTpye!=PassiveSkillType.MARRY){var d_u=p_l.getConfigPassiveTheme(this._skillTipTpye)[this.dataSource.voData.id];d_u&&d_u.maxSkillLv<=p_g.level&&(b_s=!1)}}else e=p_l.countMarrySkillId(Math.floor(e/1e3),1);var b_e=p_l.getConfigSkillTypeByPvType(this._skillTipTpye)[e];if(this.tipsHtml.innerHTML="",b_e&&b_s){var d_m="";if(b_e.activeCond){var d_w=b_e.activeCond[0],f_t=void 0;if(-1<d_w.indexOf("Lv"))this.dataSource.voData&&(d_m=this.dataSource.voData.name+(j_x("1117_1012"))+b_e.activeCond[1]+(j_x("15_2342")+"<br>"),f_t=this.dataSource.voData.lv);else if(-1<d_w.indexOf("Star")&&this.dataSource.voData){var v_z=p_l.getStarShowByType(this._skillTipTpye,b_e.activeCond[1]);d_m=this.dataSource.voData.name+(j_x("1117_1012"))+v_z+(j_x("1148_2342")+"<br>"),f_t=this.dataSource.voData.starLv}d_m=b_e.activeCond[1]>f_t?Utils.setColor(d_m,"#e32828"):Utils.setColor(d_m,"#71de66")}var d_h="";b_e.consume&&(d_h=(j_x("1661_1502")+"")+z_j.consumeToHtmlText(this._size,b_e.consume,Utils.setSpace(1),["#71de66","#e32828"])),this.tipsHtml.style.color="#f0ecd8",this.tipsHtml.innerHTML=d_m+"<br>"+d_h}},b_s.prototype.isUpgradeSkill=function(e,p_l){e?SkillModel.instance.reqLvUp(p_l):b_s.close()},b_s.prototype.onClick=function(){var e,p_l,p_g=SkillModel.instance.getPassiveVoById(this._id,this._skillTipTpye);e=p_g?p_g.id+p_g.level:SkillModel.instance.countMarrySkillId(this._id,1),p_l=PassiveSkillType.MARRY===this._skillTipTpye?(p_g&&(e-=1),b_v.instance.canOpenSKill(e,!1,!0)):SkillModel.instance.canOpenPvSkill(e,this.dataSource.voData,this._skillTipTpye,!0),e=SkillModel.instance.countMarrySkillId(this._id,1),this.isUpgradeSkill(p_l,e)},b_s.prototype.onRemoved=function(){Sowh(this,Laya,LED,l_r)},b_s.open=function(e,p_l,p_g){void 0===p_l&&(p_l=null),void 0===p_g&&(p_g=PassiveSkillType.MARRY),UIM.open(b_s,null,{id:e,voData:p_l,skillTipType:p_g},!1,!1,!0,!0)},b_s.close=function(){Uogb(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),z_j.setHtml(e.tipsHtml,22,"#f0ecd8",10,"left"),e.tipsHtml.style.valign="middle",e.tipsHtml.style.leading=-1,z_j.setHtml(e.dec_txt,22,"#f0ecd8",10,"left"),z_j.setHtml(e.nextHtml,22,"#f0ecd8",10,"left"),e._size=new Laya.Point(30,30),e}e.MarryRingSkillTips=p_g}(UI=UI||{});var x_h=function(e,p_l,p_g,b_s,d_u){Eyep(e,p_l,p_g,b_s,d_u,this)};!function(e){var p_l,p_g=(p_l=ui.window.marry.marryRingStarLevelUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Ykem(this,Laya)},b_s.prototype.onRemove=function(){Adrf(this,Laya)},b_s.open=function(e){UIM.open(b_s,null,{id:e},!1,!1,!0,!0)},b_s.prototype.playEffectComplete=function(e){e&&(e.visible=!1,e===this.effect_left?this.playEffect(this.effect_mid):e===this.effect_mid?this.playEffect(this.effect_right):(this.updateView(),this.isAni=!1,this.effect_left.stop(),this.effect_mid.stop(),this.effect_right.stop()))},b_s.prototype.playEffect=function(e){e&&(e.visible=!0,e.play(!1))},b_s.prototype.updateView=function(){var e=this.dataSource.id,p_l=Config.marry_ringAct[e],p_g=b_v.instance.getRingStarInfoById(e),b_s=p_g?p_g.star:0,d_u=Config.marry_ringStar[b_v.instance.starNum(e,b_s)];if(d_u){var b_e=Config.marry_ringStar[b_v.instance.starNum(e,b_s+1)],d_m=b_e?b_s+1:b_s;this.fullText.visible=!b_e,this.isUpgrade.visible=!this.fullText.visible,this.nameTxt.changeText(p_l.name);var d_w=Resource.ResUrl.getIconUrl(p_l.icon);this.setIcon(d_w,this.icon_1),this.setIcon(d_w,this.icon),TalismanModel.instance.changeActStar(this.starBox_Cur,b_s);var f_t={},v_z=b_v.instance.ringActProp(e);if(f_t[2]=[],p_l.prop&&(f_t[2]=[],b_p.addProps(v_z,1,f_t[2]),b_p.addProps(CharacterProperty.getPropertys(d_u.prop),1,f_t[2])),TalismanModel.instance.setProp(this.curProp,f_t,"<br>",["#f0ecd8","#f0ecd8"],2),b_e){f_t[2]=[],b_e.prop&&(b_p.addProps(v_z,1,f_t[2]),b_p.addProps(CharacterProperty.getPropertys(b_e.prop),1,f_t[2])),TalismanModel.instance.setProp(this.nextProp,f_t,"<br>",["#f0ecd8","#f0ecd8"],2),TalismanModel.instance.changeActStar(this.starBox_next,d_m);var d_h=b_p.getRewardDatas(b_e.starupNum);this.consumeList.array=d_h,z_j.centerList(this.consumeList,d_h,5,this.isUpgrade.width,0),this.upRed.visible=b_v.instance.isCanRingStarUp(e,b_s)==UpState.CAN_UP}}},b_s.prototype.onCloseBtnClick=function(){Cjzw(b_s)},b_s.prototype.setIcon=function(e,p_l){""!=e?(p_l.visible=!0,p_l=Resource.ResManager.Instance.getImg(e,p_l)):p_l.visible=!1},b_s.prototype.onUpBtnClick=function(){var e=this.dataSource.id,p_l=b_v.instance,p_g=p_l.getRingStarInfoById(e);p_g&&(this.isAni||p_l.isCanRingStarUp(e,p_g.star,!0)==UpState.CAN_UP&&(p_l.reqRingUpStar(e),this.isAni=!0,this.playEffect(this.effect_left)))},b_s.prototype.updateItem=function(e,p_l){e.isShowName=!1,e.setItemData(e.dataSource,ItemBoxDefine.MODULE_ITEM,!0);var p_g=e.dataSource,b_s=BagModel.instance.getItemCountByItemID(p_g.id);e.numTxt.color=b_s<p_g.amount?Utils.Color.RED:Utils.Color.NAME_GREEN,e.numTxt.text=b_s+"/"+p_g.amount},b_s.close=function(){Udlp(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),z_j.setHtml(p_g.curProp,22,"#f0ecd8",10,"left"),z_j.setHtml(p_g.nextProp,22,"#f0ecd8",10,"left"),p_g.consumeList.itemRender=e.ItemBox,z_j.setList(p_g.consumeList,p_g,p_g.updateItem),p_g.isAni=!1,p_g}e.MarryRingStarLevel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.marry.marryRingViewUI,__extends(b_s,p_l),b_s.open=function(){Omew(UIM,b_s)},b_s.prototype.canFoster=function(){if(this._marryRingInfo&&this._marryRingInfo.lv){var e=b_v.instance.getMarryRingInfoById(this._marryRingInfo.lv);return b_v.instance.getMarryRingInfoById(this._marryRingInfo.lv+1)?!(BagModel.instance.getItemCountByItemID(e.cost[0][0],BagTypeDefine.BAG_TYPE_ITEM)<e.cost[0][1]&&(this._isAutoFoster&&(this._isAutoFoster=!this._isAutoFoster,this.updateBtnStatu(),Laya.timer.clear(this,this.reqOnykeyFoster)),r_f.instance.isWindow(e.cost[0][0]),1)):(this._isAutoFoster&&(this._isAutoFoster=!this._isAutoFoster,this.updateBtnStatu(),Laya.timer.clear(this,this.reqOnykeyFoster)),b_p.broadcastNotice((j_x("1300_1117_1012")+j_x("1081_2251_15")+j_x(2342))),!1)}return!1},b_s.prototype.onClickLock=function(p_l){var p_g=b_v.instance._marryVo.marryRingInfo,b_s=!1;if(p_l&&p_g&&p_g.lv){switch(p_l){case SkillType.OneSkill:b_s=this._oneSkillIsOpen;break;case SkillType.TwoSkill:b_s=this._twoSkillIsOpen;break;case SkillType.ThreeSkill:b_s=this._threeSkillIsOpen}var d_u=SkillModel.instance.countMarrySkillId(p_l,1);b_v.instance.canOpenSKill(d_u,!b_s)&&!b_s?(SkillModel.instance.reqActPass(d_u),b_p.broadcastNotice((j_x("2335_1796_402")+j_x(2142)),1,Utils.Color.GREEN),b_v.instance.reqSkillLst()):e.MarryRingSkillTips.open(p_l)}},b_s.prototype.onUpdateMarryRing=function(){this._marryRingInfo=b_v.instance._marryVo.marryRingInfo,this._isAutoFoster?(Laya.Tween.to(this,{progress:1},500),Laya.timer.once(500,this,this.updateData)):this.updateData()},b_s.prototype.onRemoved=function(){LED.off(l_r.MARRY_RING_INFO_UPDATE,this,this.onUpdateMarryRing),LED.off(l_r.MARRY_RING_STAR_UPDATE,this,this.onUpdateMarryRing),LED.off(l_r.SKILL_LIST_UPDATE,this,this.onSkillInfo),LED.off(l_r.HERO_ATT_CHANGE,this,this.onUpdateRingStar),Laya.timer.clear(this,this.updateData),Laya.Tween.clearAll(this),this.upbtn.off(Laya.Event.CLICK,this,this.onClickUpBtn),this.onekeybtn.off(Laya.Event.CLICK,this,this.onClickOnkeKey),this.backBtn.off(Laya.Event.CLICK,this,this.onClickClose),this.closeBtn.off(Laya.Event.CLICK,this,this.onClickClose),this.propertyBtn.off(Laya.Event.CLICK,this,this.onPropertyClick);var e=1;for(var p_l in SkillType)this["skill_"+e].off(Laya.Event.CLICK,this,this.onClickSkill),this["lock_"+e].off(Laya.Event.CLICK,this,this.onClickLock),e++;Laya.timer.clear(this,this.reqOnykeyFoster),this._isAutoFoster&&(this._isAutoFoster=!this._isAutoFoster,this.updateBtnStatu()),this._ringModel&&this._ringModel.clearRes(),this.ringSkinList.selectedIndex=-1,this.selectBtn.off(Laya.Event.CLICK,this,this.onSelectBtnCLick),this.upgradeStarBtn.off(Laya.Event.CLICK,this,this.onUpgradeStarBtnClick),this.i_preBtn.off(Laya.Event.CLICK,this,this.onIPreBtnClick),this.i_nextBtn.off(Laya.Event.CLICK,this,this.onINextBtnClick),this.ringSkinList.scrollBar.off(Laya.Event.CHANGE,this,this.onListScroll)},b_s.prototype.showFosterBtn=function(){b_v.instance.getMarryRingInfoById(this._marryRingInfo.lv+1)?(this.upbtn.visible=this.onekeybtn.visible=!0,this.biggestLv_txt.visible=!1):(this.upbtn.visible=this.onekeybtn.visible=!1,this.biggestLv_txt.visible=!0)},b_s.close=function(){Gqsr(UIM,b_s)},b_s.prototype.onAdded=function(){LED.on(l_r.MARRY_RING_INFO_UPDATE,this,this.onUpdateMarryRing),LED.on(l_r.MARRY_RING_STAR_UPDATE,this,this.onUpdateMarryRing),LED.on(l_r.SKILL_LIST_UPDATE,this,this.onSkillInfo),LED.on(l_r.HERO_ATT_CHANGE,this,this.onUpdateRingStar),b_v.instance.reqMarryRingInfo(),b_v.instance.reqSkillLst(),this.updateData(),this.upbtn.on(Laya.Event.CLICK,this,this.onClickUpBtn),this.onekeybtn.on(Laya.Event.CLICK,this,this.onClickOnkeKey),this.backBtn.on(Laya.Event.CLICK,this,this.onClickClose),this.propertyBtn.on(Laya.Event.CLICK,this,this.onPropertyClick),this.closeBtn.on(Laya.Event.CLICK,this,this.onClickClose),this.selectBtn.on(Laya.Event.CLICK,this,this.onSelectBtnCLick),this.upgradeStarBtn.on(Laya.Event.CLICK,this,this.onUpgradeStarBtnClick),this.i_preBtn.on(Laya.Event.CLICK,this,this.onIPreBtnClick),this.i_nextBtn.on(Laya.Event.CLICK,this,this.onINextBtnClick),this.ringSkinList.scrollBar.on(Laya.Event.CHANGE,this,this.onListScroll),this.ringSkinList.array=b_v.instance.ringCfgs,this.lastIndex=this.ringSkinList.selectedIndex=0,this.updateWearInfo();var e=1;for(var p_l in SkillType)this["skill_"+e].on(Laya.Event.CLICK,this,this.onClickSkill,[SkillType[p_l]]),this["lock_"+e].on(Laya.Event.CLICK,this,this.onClickLock,[SkillType[p_l]]),e++},b_s.prototype.onClickUpBtn=function(){this.canFoster()&&b_v.instance.reqMarryRingFoster()},b_s.prototype.onClickOnkeKey=function(){this._isAutoFoster=!this._isAutoFoster,this.updateBtnStatu(),this._isAutoFoster?this.canFoster()&&(this.reqOnykeyFoster(),Laya.timer.loop(1e3,this,this.reqOnykeyFoster)):Laya.timer.clear(this,this.reqOnykeyFoster)},b_s.prototype.calFight=function(){this._marryRingInfo&&b_p.getNumSp(NumType.FIGHTING,b_v.instance.marryRingFight(),this.atkNum,-10)},b_s.prototype.onUpdateRingStar=function(){Iwar(this)},b_s.prototype.init=function(){this.lvtxt.text=(j_x("362_217")+" Lv.0");var e=Config.marry_ring[1];if(e){this._ringModel=new n_k,this.ringModle.addChild(this._ringModel),this.consumtxt.text=Utils.$("{1}/{2}",0,e.cost[0][1]),this.progressValueLab.text=Utils.$("{1}/{2}",0,e.num),this.lvProgress.value=0,this.upbtn.visible=this.onekeybtn.visible=this.biggestLv_txt.visible=!1;var p_l=new ModuleItemVO;p_l.id=IconType.MARRY_RING,p_l.amount=1,this.marryItem.isShowName=!1,this.marryItem.setItemData(p_l),z_j.setList(this.ringSkinList,this,this.updateRingSkinList,this.selectRingSkinList),z_j.setListScroll(this.ringSkinList,!1)}},b_s.prototype.updateData=function(){var e=b_v.instance;if(this._marryRingInfo&&this._marryRingInfo.lv){var p_l=e.getMarryRingInfoById(this._marryRingInfo.lv);if(!p_l)return;this.lvtxt.text=Utils.$((j_x("362_217")+" Lv.{1}"),this._marryRingInfo.lv);var p_g=BagModel.instance.getItemCountByItemID(p_l.cost[0][0],BagTypeDefine.BAG_TYPE_ITEM);this.consumtxt.text=Utils.$("{1}/{2}",p_g,p_l.cost[0][1]),this.consumtxt.color=p_g>=p_l.cost[0][1]?"#71de66":"#a9b8de",this.lvProgress.value=this._marryRingInfo.exp/p_l.num,this.progressValueLab.text=Utils.$("{1}/{2}",this._marryRingInfo.exp,p_l.num),this.showFosterBtn(),this.up_red.visible=this.autoUp_red.visible=e.canFosterMarryRing(),this.onSkillInfo(),this.calFight(),this.onUpdateRingStar()}},b_s.prototype.onClickSkill=function(p_l){p_l&&e.MarryRingSkillTips.open(p_l)},b_s.prototype.onClickClose=function(){Gmtr(b_s)},b_s.prototype.changeModelView=function(e){var p_l=Config.marry_ringAct[e];this._ringModel.changeModel("effects/marry"),""!=p_l.ringModel&&this._ringModel.setAction(p_l.ringModel,0,!0),p_l.modelPos&&this.ringModle.pos(p_l.modelPos[0],p_l.modelPos[1]),p_l.nameRes&&""!=p_l.nameRes&&(this.nameImg.skin="res/ui/marry/"+p_l.nameRes)},b_s.prototype.reqOnykeyFoster=function(){this.canFoster()?b_v.instance.reqAutoMarryRingFoster():Laya.timer.clear(this,this.reqOnykeyFoster)},b_s.prototype.onPropertyClick=function(){var p_l=b_v.instance,p_g=p_l._marryVo.marryRingInfo,b_s=p_l.getMarryRingInfoById(p_g.lv),d_u=[];b_s&&d_u.push(CharacterProperty.getPropertys(b_s.lvAttr)),d_u.push(p_l.allRingStarProp()),d_u.push(p_l.allRingActProp()),e.PropShowPanel.open(d_u,[(j_x("362_217_613")+j_x(233)+":"),(j_x("362_217_371")+j_x(1148)+":"),(j_x("362_217_2335")+j_x(1796)+":")])},b_s.prototype.updateBtnStatu=function(){this.onekeybtn.label=this._isAutoFoster?(j_x("2111_1661")):(j_x("1737_2205_2394")+j_x(2013))},b_s.prototype.onSkillInfo=function(){if(this._marryRingInfo){var e=1;for(var p_l in this._marryRingInfo.lv,SkillType){this.skill_1.gray=!0,this.lock_1.visible=!0;var p_g=Config.skill_passive_marry[SkillModel.instance.countMarrySkillId(SkillType[p_l],1)];this["skill_"+e].skin=Resource.ResUrl.getIconUrl(p_g.icon,!0),this["ringLv_"+e].visible=!1,this["s_ring"+e].visible=!1,e++}}var b_s=SkillModel.instance.getPassiveList(PassiveSkillType.MARRY);for(var p_l in b_s){var d_u=b_s[p_l],b_e=void 0;switch(Math.floor(d_u.id/1e3)){case SkillType.OneSkill:this._oneSkillIsOpen=!0,this.skill_1.gray=!1,this.lock_1.visible=!1,b_e=this.ringLv_1;break;case SkillType.TwoSkill:this._twoSkillIsOpen=!0,this.skill_2.gray=!1,this.lock_2.visible=!1,b_e=this.ringLv_2;break;case SkillType.ThreeSkill:this._threeSkillIsOpen=!0,this.skill_3.gray=!1,this.lock_3.visible=!1,b_e=this.ringLv_3}b_e&&(b_e.text="Lv."+d_u.level,b_e.visible=!0)}var d_m=1;for(var p_l in SkillType){var d_w=!1;switch(d_m){case 1:d_w=this._oneSkillIsOpen;break;case 2:d_w=this._twoSkillIsOpen;break;case 3:d_w=this._threeSkillIsOpen}var f_t=b_v.instance.canOpenSKill(SkillType[p_l],d_w);if(f_t)this["s_ring"+d_m].visible=!0;else{var v_z=SkillModel.instance.getPassiveVoById(SkillType[p_l],PassiveSkillType.MARRY);if(v_z){var d_h=Config.skill_passive_marry[v_z.id+1];d_h&&(f_t=b_p.checkConsume(d_h.consume))}}this["s_ring"+d_m].visible=f_t,d_m++}this.calFight()},Object.defineProperty(b_s.prototype,"progress",{get:function(){return this.lvProgress.value},set:function(e){this.lvProgress.value=e;var p_l=parseInt(this.progressValueLab.text.split("/")[1])||0;this.progressValueLab.text=(p_l*e).toFixed(0)+"/"+p_l},enumerable:!0,configurable:!0}),b_s.prototype.scrollMoveDir=function(e){void 0===e&&(e=!1);var p_l,p_g=this.ringSkinList;p_l=e?Math.min(p_g.startIndex+4,p_g.length-1):Math.max(0,p_g.startIndex-4),p_g.scrollTo(p_l)},b_s.prototype.selectRingSkinList=function(p_l){if(-1!=p_l){var p_g=this.ringSkinList.selectedItem,b_s=this.lastIndex;if(this.lastIndex=p_l,p_g){var d_u=b_v.instance.getRingStarInfoById(p_g.id);d_u?(this.updateWearInfo(),this.changeModelView(p_g.id),TalismanModel.instance.changeActStar(this.starBox,d_u.star)):(e.MarryRingActivate.open(p_g.id),this.ringSkinList.selectedIndex=b_s)}}},b_s.prototype.updateRingSkinList=function(p_l,p_g){var b_s=p_l.getChildByName("iconBox").getChildByName("rideSp"),d_u=p_l.getChildByName("t_name"),b_e=p_l.getChildByName("rp"),d_m=p_l.getChildByName("shade"),d_w=p_l.getChildByName("starBox"),f_t=p_l.getChildByName("i_equip"),v_z=p_l.getChildByName("bg"),d_h=p_l.getChildByName("selectBox"),r_t=p_l.dataSource,t_n=b_v.instance.getRingStarInfoById(r_t.id);if(r_t){Resource.ResManager.Instance.getImg(Resource.ResUrl.getIconUrl(r_t.icon),b_s),d_u.text=r_t.name;var f_y=0;f_t.visible=r_t.id==LgcM.ins.heroVo.ringId,b_e.visible=b_v.instance.isStarAndActRed(r_t.id),t_n?(d_m.visible=!1,f_y=t_n.star):d_m.visible=!0,TalismanModel.instance.changeActStar(d_w,f_y),v_z.index=r_t.quality-1,this.clipInfo.clipUrl=Resource.ResUrl.getQualityEftUrl(r_t.quality),e.EffectPlayer.playLoop(p_l,this.clipStr,v_z,this.clipInfo,null,null,6),p_g==this.lastIndex?d_h.visible=!0:d_h.visible=!1}},b_s.prototype.onUpgradeStarBtnClick=function(){var p_l=this.ringSkinList.selectedItem;p_l&&(b_v.instance.getRingStarInfoById(p_l.id)?e.MarryRingStarLevel.open(p_l.id):b_p.broadcastNotice((j_x("1777_320_2335")+j_x("1796_217_457"))))},b_s.prototype.onINextBtnClick=function(){Euct(this)},b_s.prototype.onIPreBtnClick=function(){Wkgy(this)},b_s.prototype.updateWearInfo=function(){var e=LgcM.ins.heroVo.ringId,p_l=this.ringSkinList.selectedItem;if(p_l){var p_g=b_v.instance.getRingStarInfoById(p_l.id);this.upStarRed.visible=!!p_g&&b_v.instance.isCanRingStarUp(p_l.id,p_g.star)==UpState.CAN_UP,this.ringWear.visible=p_l&&e==p_l.id,this.selectBtn.visible=!this.ringWear.visible}},b_s.prototype.onSelectBtnCLick=function(){var e=this.ringSkinList.selectedItem;e&&e.id!=LgcM.ins.heroVo.ringId&&(b_v.instance.getRingStarInfoById(e.id)?(b_p.broadcastNotice((j_x("262_191_402")+j_x(2142))),b_v.instance.reqRingWear(e.id)):b_p.broadcastNotice((j_x("217_671_206")+j_x("2335_1796"))))},b_s.prototype.onListScroll=function(){var e=this.ringSkinList,p_l=e.scrollBar,p_g=b_v.instance;this.i_nextBtn.visible=p_l.value<p_l.max,this.i_preBtn.visible=0<p_l.value;var b_s=0<this.i_preBtn._childs.length?this.i_preBtn._childs[0]:null,d_u=0<this.i_nextBtn._childs.length?this.i_nextBtn._childs[0]:null;if(null!=d_u&&null!=b_s){d_u.visible=b_s.visible=!1;var b_e=0;if(0<e.startIndex)for(var d_m=0;d_m<e.startIndex;++d_m)if(b_e=e.array[d_m].id,p_g.isStarAndActRed(b_e)){b_s.visible=!0;break}if(e.startIndex+4<e.length)for(d_m=e.startIndex+4;d_m<e.length;++d_m)if(b_e=e.array[d_m].id,p_g.isStarAndActRed(b_e)){d_u.visible=!0;break}}},b_s);function b_s(){var e=p_l.call(this)||this;return e._isAutoFoster=!1,e._oneSkillIsOpen=!1,e._twoSkillIsOpen=!1,e._threeSkillIsOpen=!1,e.init(),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.clipStr="clipEff",e.clipInfo={clipUrl:"",clipX:4,clipY:3,interval:83},e}e.MarryRingView=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.marry.marrySweetDegreePanelUI,__extends(d_u,p_l),d_u.prototype.onUpgradeBtnClick=function(){this._isUpdate?b_v.instance.reqMarrySweetUpgrade():e.MarrySweetGoodsUse.open()},d_u.prototype.updateOtherHead=function(e){Kcqq(e,this,Resource)},d_u.prototype.onRemove=function(){Sspq(LED,l_r,this)},d_u.prototype.stopActiveSuccEffect=function(e,p_l,p_g,b_s){void 0===p_g&&(p_g=null),void 0===b_s&&(b_s=null),p_l.off(Laya.Event.COMPLETE,p_l,e.stopActiveSuccEffect),p_l.visible=!1,p_l.stop(),e._isActivateList&&(e._isActivateList[p_g]=null)},d_u.prototype.updateUpgradeBtn=function(e){1<=e?(this.upgradeRP.visible=!0,this.upgradeBtn.label=(j_x("371_2342")),this._isUpdate=!0):(this.upgradeRP.visible=b_v.instance.isEnoughSM(),this.upgradeBtn.label=(j_x("1628_371")),this._isUpdate=!1)},d_u.prototype.updateUI=function(){var e=b_v.instance._marryVo.loverInfo;e&&b_v.instance._marryVo.marryId?(d_o.instance.reqPlayerinfo(CommonOpType.MARRY,e.pid),this.updateMyHead()):this.onCloseBtnClick()},d_u.close=function(){Wary(UIM,d_u)},d_u.prototype.updateMyHead=function(){Adho(this,Resource,LgcM)},d_u.prototype.onSkillListClick=function(p_l){var p_g=this.skillList.selectedIndex,b_s=b_v.instance.sweetSkillList[p_g];if(b_v.instance.isSweetActivate(b_v.instance.sweetId,b_s.id))if(b_v.instance.isOkSkill(b_s.id))e.MarrySweetSkillTips.open(b_s.id);else{var d_u=p_l.target.getChildByName("activateClip");this._isActivateList[b_s.id]=[b_s.id,p_g],d_u.on(Laya.Event.COMPLETE,d_u,this.stopActiveSuccEffect,[this,d_u,b_s.id,p_g]),d_u.visible=!0,d_u.play(!1),SkillModel.instance.reqActPass(b_s.id),b_v.instance.reqSkillLst()}else e.MarrySweetSkillTips.open(b_s.id)},d_u.prototype.onCloseBtnClick=function(){Aneo(d_u)},d_u.prototype.updateExperiencePB=function(){var e=b_v.instance.sweetId,p_l=Config.marry_sweet[e+1];if(p_l){var p_g=this.experiencePB.value=LgcM.ins.heroVo.marrySweetdDegree/p_l.num;this.progressValueLab.text=LgcM.ins.heroVo.marrySweetdDegree+"/"+p_l.num,this.updateUpgradeBtn(p_g),this.upgradeBox.visible=!0,this.biggestLv_txt.visible=!1}else this.upgradeBox.visible=!1,this.biggestLv_txt.visible=!0,this._isUpdate=null},d_u.prototype.updatePropertyList=function(){var e=b_v.instance.sweetId,p_l=Config.marry_sweet[e];this.skillNameText.index=p_l.index,this.skillNameText2.text=p_l.name+"Lv."+p_l.sweetSmallLv;var p_g=e+1,b_s=Config.marry_sweet[p_g];this.propertyList1.array=p_l.lvAttr,b_s?(this.propertyList2.visible=!0,this.propertyList2.array=b_s.lvAttr):(this.propertyList2.visible=!1,this.propertyList2.array=[])},d_u.prototype.updateMarrySweetInfo=function(){Irdk(this)},d_u.prototype.onSweetLogCLick=function(){Idyc(e)},d_u.prototype.updateSkillListItem=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("bg"),d_u=e.getChildByName("icon"),b_e=e.getChildByName("shade"),d_m=e.getChildByName("rp"),d_w=e.getChildByName("activateClip"),f_t=this._isActivateList[p_g.id];if(d_w.isPlaying?f_t||this.stopActiveSuccEffect(this,d_w):f_t&&(this._isActivateList[p_g.id]=null),d_m.visible=!1,d_u.skin=Resource.ResUrl.getIconUrl(p_g.icon,!1),b_s.index=p_g.grade-1,b_v.instance.isSweetActivate(b_v.instance.sweetId,p_g.id)){b_e.visible=!1;var v_z=b_v.instance.isOkSkill(p_g.id);d_m.visible=!v_z}else b_e.visible=!0;e.mouseEnabled=!0,e.on(Laya.Event.CLICK,this,this.onSkillListClick)},d_u.prototype.updateList2Item=function(e,p_l){Scfa(e,p_l,CharacterProperty,b_p)},d_u.prototype.onExamineBtnClick=function(){var p_l=b_v.instance.sweetId,p_g=[],b_s=Config.marry_sweet[p_l];b_s&&p_g.push(b_p.getPropInfos(b_s.lvAttr)),p_g.push(b_v.instance.addSweetProps()),e.PropShowPanel.open(p_g,[(j_x("2135_2042_1035")+j_x("613_233")+":"),(j_x("2135_2042_1035")+j_x("2243_1919")+":")])},d_u.open=function(){Geim(UIM,d_u)},d_u.prototype.onAdded=function(){Sumh(LED,l_r,this,b_v)},d_u.prototype.updateList1Item=function(e,p_l){Gtsu(e,p_l,CharacterProperty,b_p)},d_u.prototype.updateFight=function(){Myuo(b_p,NumType,b_v,this)},d_u.prototype.updateSkillList=function(){Kfri(this,b_v)},d_u);function d_u(){var e=p_l.call(this)||this;return e._isActivateList=[],e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.closeBtn.on(Laya.Event.CLICK,e,e.onCloseBtnClick),e.closeBtn2.on(Laya.Event.CLICK,e,e.onCloseBtnClick),e.examineBtn.on(Laya.Event.CLICK,e,e.onExamineBtnClick),e.sweetLog.on(Laya.Event.CLICK,e,e.onSweetLogCLick),e.propertyList1.selectEnable=!0,e.propertyList1.renderHandler=p_g.create(e,e.updateList1Item,null,!1),e.propertyList1.vScrollBarSkin="",e.propertyList2.selectEnable=!0,e.propertyList2.renderHandler=p_g.create(e,e.updateList2Item,null,!1),e.propertyList2.vScrollBarSkin="",e.skillList.selectEnable=!0,e.skillList.renderHandler=p_g.create(e,e.updateSkillListItem,null,!1),e.skillList.hScrollBarSkin="",b_v.instance.tidySweetSkill(),e.experiencePB.value=0,e.upgradeBtn.on(Laya.Event.CLICK,e,e.onUpgradeBtnClick),e}e.MarrySweetDegreePanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.marry.marrySweetGoodsUseUI,__extends(d_u,p_l),d_u.prototype.updateListSelectItem=function(e,p_l){var p_g=e.dataSource,b_s=Config.item_consumeable[p_g],d_u=e.getChildByName("btn_use"),b_e=e.getChildByName("iconSp"),d_m=e.getChildByName("txt_name"),d_w=e.getChildByName("txt_count"),f_t=e.getChildByName("txt_explain"),v_z=e.getChildByName("img_rp");v_z.visible=!1,d_u.on(Laya.Event.CLICK,this,this.onListBtnUseClick,[e.dataSource]),d_u.on(Laya.Event.MOUSE_DOWN,this,this.onListBtnUseMD,[e.dataSource]),b_e.skin=Resource.ResUrl.getIconUrl(b_s.icon,!1),d_m.text=b_s.name,d_w.text=(j_x("2348_716")+"")+BagModel.instance.getItemCount(p_g),0<BagModel.instance.getItemCount(p_g)&&(v_z.visible=!0),f_t.text="+"+b_s.effects[0][1]},d_u.open=function(){Iijl(UIM,d_u)},d_u.prototype.onRemove=function(){Eutj(LED,l_r,this)},d_u.prototype.onListBtnUseClick=function(e){var p_l=BagModel.instance.getItemCount(e),p_g=Config.item_consumeable[e];if(0==p_l)return b_p.broadcastNotice(p_g.name+(j_x("2462_1779"))),void LongPushUtil.inst.clearLoopPush();var b_s=BagModel.instance.getItemById(BagTypeDefine.BAG_TYPE_ITEM,e);BagModel.instance.reqUseItem(b_s.uuid,1,e)},d_u.prototype.onCloseBtnClick=function(){Qjei(d_u)},d_u.prototype.onAdded=function(){Kooi(LED,l_r,this)},d_u.prototype.onListBtnUseMD=function(e){var p_l=this;LongPushUtil.inst.bingLongPushBtn(this,(function(){p_l.onListBtnUseClick(e)}))},d_u.prototype.updateListSelect=function(){Uhtp(this,b_v)},d_u.close=function(){Eylc(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.closeBtn.on(Laya.Event.CLICK,e,e.onCloseBtnClick),e.list_select.selectEnable=!0,e.list_select.renderHandler=p_g.create(e,e.updateListSelectItem,null,!1),e.list_select.vScrollBarSkin="",e.list_select.scrollBar.elasticDistance=200,e.list_select.scrollBar.elasticBackTime=500,e}e.MarrySweetGoodsUse=b_s}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.marry.marrySweetRankingUI,__extends(d_u,p_l),d_u.prototype.updateFristItemList=function(e,p_l){Etns(e,p_l)},d_u.prototype.updateSweetList=function(p_l,b_s){var d_u=p_l.getChildByName("headBox"),b_e=p_l.getChildByName("rankingImg"),d_m=p_l.getChildByName("awardList"),d_w=p_l.getChildByName("afterNoneBox");d_w.visible=!1;var f_t=p_l.getChildByName("rankBgImg");f_t.visible=!1;var v_z=d_u.getChildByName("headImg1"),d_h=d_u.getChildByName("headImg2"),r_t=d_u.getChildByName("server1"),t_n=d_u.getChildByName("server2"),f_y=d_u.getChildByName("player1"),p_q=d_u.getChildByName("player2");if(1<b_s)d_u.visible=!1,f_t.visible=!0,b_e.x=100,b_e.y=73;else{d_u.visible=!0,b_e.x=10,b_e.y=10;var h_h=ActivityModel.instance.sweetAfterFirstRank[b_s];h_h?(r_t.text="s."+h_h.sid1,t_n.text="s."+h_h.sid2,f_y.text=h_h.name1,p_q.text=h_h.name2,v_z.skin=Resource.ResManager.getHeadUrl(h_h.entryId1,h_h.headIcon1),d_h.skin=Resource.ResManager.getHeadUrl(h_h.entryId2,h_h.headIcon2)):(d_u.visible=!1,d_w.visible=!0)}d_m.itemRender=e.ItemBox,d_m.hScrollBarSkin="",d_m.renderHandler=p_g.create(this,this.updateAwardList,null,!1);var n_j=p_l.dataSource;d_m.array=b_p.getRewardDatas(n_j.reward),b_e.skin=this._rankingString+n_j.rankUrl},d_u.prototype.updateAwardList=function(e,p_l){Wqjh(e,p_l)},d_u.prototype.onRemove=function(){Allz(this,Laya,LED,l_r)},d_u.prototype.onGoTOMarry=function(){Iwdr(e,d_u)},d_u.prototype.onCloseBtnClick=function(){Mwdq(d_u)},d_u.prototype.updateRankingUI=function(){this._fristRanking&&this._afterFristRanking||this.updateRankingData(),this.updateFristBox(),this.sweetList.array=this._afterFristRanking;var e=this.dataSource.data.subVo[0],p_l=ActivityModel.instance.getLottertShowTime(e);this.activeLab.text=Utils.formatTimeStr4(e.start)+"-"+Utils.formatTimeStr4(e.stop-p_l),this.updateBottomUI(),Laya.timer.loop(1e3,this,this.updateTime)},d_u.prototype.onEntelBtnClick=function(){0==ActivityModel.instance.sweetRewardTime&&(ActivityModel.instance.reqSweetGainRankReward(),this.entelBtn.disabled=!0,this.drawImg.visible=!0,this.entelBtn.visible=!1)},d_u.prototype.updateBottomUI=function(){b_v.instance.isMarry()?(this.isMarryBox.visible=!0,this.noMarry.visible=!1,this.myRankingLab.text=0===ActivityModel.instance.sweetMyIdx?(j_x("206_1067_1077")):ActivityModel.instance.sweetMyIdx+"",this.sweetLab.text=ActivityModel.instance.sweetMyVal+""):(this.isMarryBox.visible=!1,this.noMarry.visible=!0)},d_u.prototype.onWatchBtnClick=function(){Awlp(e)},d_u.prototype.updateRankingData=function(){var e=RoundRewardManager.instance.getLocalRankRewards(RankType.KF_marrySweetRank,this.dataSource.data.subVo[0].type);e.sort((function(e,p_l){return e.beginIdx-p_l.beginIdx})),this._fristRanking=e[0],this._afterFristRanking=e.slice(1)},d_u.prototype.updateTime=function(){var e=this.dataSource.data.subVo[0],p_l=ActivityModel.instance.getLottertShowTime(e);this.drawImg.visible=!1,this.myRankingLab2.visible=!1,this.entelBtn.visible=!0,this.entelBtn.disabled=!0,e.sulTime>p_l?(this.timeLab.text=Utils.formatTimeStr(e.sulTime-p_l),this.timeLab.color="#00802e"):(this.timeLab.text=(j_x("1796_1878_1300")+j_x("396_2426")),this.timeLab.color="#e32828",0===ActivityModel.instance.sweetMyIdx?(this.myRankingLab2.visible=!0,this.entelBtn.visible=!1):0==ActivityModel.instance.sweetRewardTime?this.entelBtn.disabled=!1:(this.drawImg.visible=!0,this.entelBtn.visible=!1),Laya.timer.clearAll(this))},d_u.prototype.updateRecord=function(){Ippc(ActivityModel,this)},d_u.prototype.updateFristBox=function(){var e=b_p.getRewardDatas(this._fristRanking.specialReward);this.specialItem.isShowName=!1,this.specialItem.setItemData(e[0]),this.fristItemList.array=b_p.getRewardDatas(this._fristRanking.reward),this.rankingImg.skin=this._rankingString+this._fristRanking.rankUrl;var p_l=ActivityModel.instance.sweetFirstRank;p_l?(this.fristHeadBox.visible=!0,this.fristNoneBox.visible=!1,this.oneStSever1.text="s."+p_l.sid1,this.oneStSever2.text="s."+p_l.sid2,this.oneStPlayer1.text=p_l.name1,this.oneStPlayer2.text=p_l.name2,this.headImg1.skin=Resource.ResManager.getHeadUrl(p_l.entryId1,p_l.headIcon1),this.headImg2.skin=Resource.ResManager.getHeadUrl(p_l.entryId2,p_l.headIcon2)):(this.fristHeadBox.visible=!1,this.fristNoneBox.visible=!0)},d_u.prototype.onAdded=function(){Uxvi(this,Laya,LED,l_r)},d_u.open=function(e){(e=e||ActivityModel.instance.getActivityConfigVo(FuncDefine.SweetRankActivity))?UIM.open(d_u,["marry.atlas","activity/turnTable.atlas","activity/openSer.atlas"],{data:e},!1,!1,!0,!1):b_p.broadcastNotice((j_x("1796_1878_206")+j_x("155_1186")))},d_u.close=function(){Egad(UIM,d_u)},d_u);function d_u(){var b_s=p_l.call(this)||this;return b_s._rankingString="res/ui/activity/openSer/",b_s.on(Laya.Event.ADDED,b_s,b_s.onAdded),b_s.on(Laya.Event.REMOVED,b_s,b_s.onRemove),b_s.fristItemList.itemRender=e.ItemBox,b_s.fristItemList.hScrollBarSkin="",b_s.fristItemList.renderHandler=p_g.create(b_s,b_s.updateFristItemList,null,!1),b_s.fristItemList.array=null,b_s.sweetList.vScrollBarSkin="",b_s.sweetList.renderHandler=p_g.create(b_s,b_s.updateSweetList,null,!1),b_s.sweetList.array=null,b_s.drawImg.visible=!1,b_s.myRankingLab2.visible=!1,b_s}e.MarrySweetRanking=b_s}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.marry.marrySweetRankingListUI,__extends(d_u,p_l),d_u.prototype.updateSweetList=function(e,p_l){var p_g=e.getChildByName("ranking"),b_s=e.getChildByName("play1"),d_u=e.getChildByName("play2"),b_e=e.getChildByName("sweet"),d_m=e.dataSource;p_g.text=d_m.rank+"",b_e.text=d_m.value+"",b_s.text="[s."+d_m.marryInfo.sid1+"] "+d_m.marryInfo.name1,d_u.text="[s."+d_m.marryInfo.sid2+"] "+d_m.marryInfo.name2},d_u.prototype.onCloseBtnClick=function(){Iyxp(d_u)},d_u.prototype.updateBottomUI=function(){if(b_v.instance.isMarry()){this.isMarryBox.visible=!0,this.noMarryBox.visible=!1,this.rankingNumLab.text=0===ActivityModel.instance.sweetMyIdx?(j_x("206_1067_1077")):ActivityModel.instance.sweetMyIdx+"",this.sweetLab.text=ActivityModel.instance.sweetMyVal+"";var e=LgcM.ins.heroVo,p_l=b_v.instance._marryVo.loverInfo;this.severLab.text=b_p.config.mergSerId+(j_x(1998)),this.playLab1.text="[s."+b_p.config.mergSerId+"]"+e.name,this.playLab2.text="[s."+p_l.sid+"]"+p_l.name}else this.isMarryBox.visible=!1,this.noMarryBox.visible=!0},d_u.prototype.updateGetRank=function(){Qurx(RankModel,RankType)},d_u.open=function(){Gcpt(UIM,d_u)},d_u.prototype.updateRankingUI=function(){Ofbw(this,ActivityModel)},d_u.prototype.onGotoMarryClick=function(){Afag(e,d_u)},d_u.prototype.onAdded=function(){Gwfe(this,Laya,LED,l_r)},d_u.prototype.onRemove=function(){Agnj(this,Laya,LED,l_r)},d_u.close=function(){Usbq(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.sweetList.vScrollBarSkin="",e.sweetList.renderHandler=p_g.create(e,e.updateSweetList,null,!1),e.sweetList.array=null,e}e.MarrySweetRankingList=b_s}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.marry.marrySweetRecordUI,__extends(d_u,p_l),d_u.prototype.updateList=function(e,p_l){var p_g=e.getChildByName("desctxt"),b_s=Utils.formatTimeStr3(e.dataSource.time);p_g.style.fontSize=22,p_g.style.left=3,p_g.style.leading=7,p_g.style.color="#4a728e";var d_u="[s"+e.dataSource.sid+"]";p_g.innerHTML=Utils.$(this.stringText,b_s,Utils.setColor(d_u,"#00802e"),Utils.setColor(e.dataSource.name,"#00802e"),Utils.setColor(e.dataSource.itemName,"#00802e"),Utils.setColor(e.dataSource.value.toString(),"#00802e"))},d_u.open=function(){Uqcs(UIM,d_u)},d_u.prototype.onCloseBtnClick=function(){Saol(d_u)},d_u.prototype.onRemove=function(){Irvg(LED,l_r,this)},d_u.prototype.updateListArray=function(){0<b_v.instance.sweetLog.length?(this.listLog.array=b_v.instance.sweetLog,this.listLog.visible=!0,this.listNull.visible=!1):(this.listLog.visible=!1,this.listNull.visible=!0)},d_u.prototype.onAdded=function(){Wpft(LED,l_r,this,b_v)},d_u.close=function(){Ipbl(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e.stringText=("{1}<br>{2}{3}"+j_x("1365_1876")+"{4}"+j_x("790_2221_437")+j_x("223_2135_2042")+j_x(1035)+"{5}"),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.closeBtn.on(Laya.Event.CLICK,e,e.onCloseBtnClick),e.listLog.vScrollBarSkin="",Utils.setSpace(),e.listLog.renderHandler=p_g.create(e,e.updateList,null,!1),e}e.MarrySweetRecord=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.marry.marrySweetSkillTipsUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Wric(this)},b_s.open=function(e){UIM.open(b_s,null,{skillId:e},!1,!1,!0,!0)},b_s.prototype.updateUI=function(){var e=this.dataSource.skillId,p_l=Config.skill_passive_sweet[e],p_g=Config.marry_sweet[p_l.activeCond[1]];this.icon.skin=Resource.ResUrl.getIconUrl(p_l.icon,!1),this.skillNameText.text=p_l.name,this.skillEffect.innerHTML=p_l.desc,this.explainText.innerHTML=Utils.$(this.effectString,p_g.name,".Lv"+p_g.sweetSmallLv)},b_s.prototype.onRemove=function(){},b_s.close=function(){Ctxp(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.effectString=(j_x("2135_2042_1035")+j_x("15_2342_1117")+j_x(1012)+"{1}{2}"+j_x("1048_1745")),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),z_j.setHtml(e.skillEffect,24,"#f0ecd8",10,"left"),z_j.setHtml(e.explainText,22,"#71de66",10,"left"),e}e.MarrySweetSkillTips=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.marry.marryTaskUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){LED.on(l_r.MARRY_ACHIEVEMENT_UPDATE,this,this.onAchievementData),this.ach_red.visible=b_v.instance.canGetTask_AchievementAward(AchTaskType.AchievementType),this.task_red.visible=b_v.instance.canGetTask_AchievementAward(AchTaskType.TaskType),this.closebtn.on(Laya.Event.CLICK,this,this.onClickClose),this.backbtn.on(Laya.Event.CLICK,this,this.onClickClose),this._clipTab.on("tabSelect",this,this.onTabSelect),this.tab.selectedIndex=this.dataSource.type||0},b_s.prototype.onRemoved=function(){Aunp(this,LED,l_r)},b_s.open=function(e){void 0===e&&(e=0),UIM.open(b_s,null,[e])},b_s.prototype.onUpdateInfo=function(e,p_l){Svob(e,p_l)},b_s.prototype.onAchievementData=function(e){if(e){e===AchTaskType.AchievementType?(this.list.array=b_v.instance._marryVo.getCurrentAchiList().sort(b_v.sortAch_TaskList),this.pro_lab.text=(j_x("402_705_33")+j_x(1035)),this.ach_red.visible=b_v.instance.canGetTask_AchievementAward(e)):(this.list.array=b_v.instance._marryVo.taskList.sort(b_v.sortAch_TaskList),this.pro_lab.text=(j_x("30_595_33")+j_x(1035)),this.task_red.visible=b_v.instance.canGetTask_AchievementAward(e));var p_l=b_v.instance.calAchievementProgress(e),p_g=p_l[0],b_s=p_l[1];this.progress_txt.text=Utils.$("{1}/{2}",p_g,b_s),this.achieveProgress.value=p_g/b_s}},b_s.prototype.onClickClose=function(){Mbvd(this)},b_s.prototype.onTabSelect=function(e){switch(e){case 0:b_v.instance.reqAchievemInfo(AchTaskType.TaskType);break;case 1:b_v.instance.reqAchievemInfo(AchTaskType.AchievementType)}},b_s.prototype.close=function(){Ecdw(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g._clickTime=0,p_g.list.vScrollBarSkin="",p_g.list.array=[],p_g.list.itemRender=e.MarryTask_Cell,p_g.list.renderHandler=Laya.Handler.create(p_g,p_g.onUpdateInfo,null,!1),p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemoved),p_g._clipTab=new p_c(p_g.tab),p_g.tab.selectedIndex=-1,p_g}e.MarryTaskView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.marry.marryTask_cellUI,__extends(b_s,p_l),b_s.prototype.setData=function(e,p_l){if(e&&p_l){var p_g=Config.marry_achv[e.ach_id],b_s=e.totalProgress;this.task_dec.text=e.name,this.selfProgress.value=e.m_curProgress/b_s,this.loverProgress.value=e.h_currProgress/b_s,this.myProgress.text=Utils.$("{1}/{2}",e.m_curProgress,b_s),this.otherProgress.text=Utils.$("{1}/{2}",e.h_currProgress,b_s),e.m_curProgress<b_s||e.h_currProgress<b_s?(this.getAwardbtn.label=(j_x("711_2417")),this.getAwardbtn.skin="res/ui/common/Button_common_01.png",this._isCanGetAward=!1,this.red_point.visible=!1):(this.getAwardbtn.label=(j_x("1174_2111")),this.getAwardbtn.skin="res/ui/common/Button_common_02.png",this._isCanGetAward=!0,this.red_point.visible=!0),p_g&&(this.rewardItem.innerHTML=z_j.rewardToHtmlText(30,30,p_g.rewardItem,Utils.setSpace(2))),this.getAwardbtn.visible=0===e.status,this.alreadyget_img.visible=!this.getAwardbtn.visible,this.getAwardbtn.on(Laya.Event.CLICK,this,this.onClickGetAward,[e.ach_id,this._isCanGetAward,p_l])}},b_s.prototype.onClickAwardBtn=function(p_l,p_g){p_l&&p_g&&e.MarryAhievementAwardView.open(p_l,p_g)},b_s.prototype.onClickGetAward=function(p_l,p_g,b_s){if(p_l&&b_s)if(p_g)b_v.instance.reqAchievemAward(p_l,b_s);else{var d_u=Config.marry_achv[p_l];if(!d_u)return;TaskManager.instance.taskMsgTxtLink(d_u.link[0]),UIM.instance.isOpenWin(e.MarryTaskView)&&UIM.close(e.MarryTaskView),UIM.instance.isOpenWin(e.FriendPanel)&&UIM.close(e.FriendPanel)}},b_s);function b_s(){var e=p_l.call(this)||this;return e._isCanGetAward=!1,z_j.setHtml(e.rewardItem,25,"#00802e",10,"left"),e}e.MarryTask_Cell=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.mine.mineAttackReamExpandUI,__extends(b_s,p_l),b_s.prototype.init=function(){Qbzl(this,Laya)},b_s.prototype.update=function(e,p_l){var p_g;this.type=p_l,this.i_gongjiling.visible=p_l==MineBuyType.attackReam,this.i_tili.visible=p_l==MineBuyType.vit,p_l==MineBuyType.vit&&(p_g=Config.global[GlobalDefine.minewar_vit_max].i_info),p_l==MineBuyType.attackReam&&(p_g=Config.global[GlobalDefine.minewar_ack_max].i_info),this.attackReamNumLabel.text=e+"/"+p_g},b_s.prototype.onAdd=function(){var p_l=new MineBuyVo;this.type==MineBuyType.vit&&p_l.setMineBuyData(98,1,MineBuyType.vit,null),this.type==MineBuyType.attackReam&&p_l.setMineBuyData(96,1,MineBuyType.attackReam,null),e.MineBuy.open(p_l)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.MineAttackReamExpand=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.mine.mineAttackResultUI,__extends(b_s,p_l),b_s.prototype.init=function(){Yfld(this,Laya)},b_s.prototype.onAdded=function(){Sciu(this,LED,l_r)},b_s.prototype.countdown=function(e){Laya.timer.clear(this,this.countdown),0<e?(this.CountTime.text=Utils.$("{1}",e),Laya.timer.once(1e3,this,this.countdown,[e-1])):this.onWinModalClick()},b_s.close=function(){Gxxj(Laya,this,UIM,b_s)},b_s.prototype.onRemove=function(){Aeat(LED,l_r,this,MineModel,DungeonModel)},b_s.open=function(e){Whgb(e,UIM,b_s)},b_s.prototype.update=function(e){if(null!=e){var p_l=(this.pbResult=e).result==MineFightResultType.win;this.Winbox.visible=p_l,this.failbox.visible=e.result==MineFightResultType.fail,Config.global[GlobalDefine.minewar_fight_soul].t_info[0],Config.global[GlobalDefine.minewar_fight_soul].t_info[1];var p_g=null!=e.guildName?e.guildName:"",b_s=null!=e.name?e.name:"";this.losePlayerInfo.innerHTML=Utils.$((j_x("2244_182_1749")+j_x(1629)+"{1}{2}"+j_x("1835_1061_743")),Utils.setColor(p_g,"#c36b23"),Utils.setColor(b_s,"#71de66")),this.winPlayerInfo.innerHTML=Utils.$((j_x("1595_1168_1749")+j_x("383_1045_743")+"{1}{2}{3}"+j_x("2292_943_743")+"{4}"+j_x("1263_869")),Utils.setColor(p_g,"#c36b23"),Utils.setColor(b_s,"#71de66"),"<br>",e.num),MineModel.instance.isRob||e.num,Laya.timer.once(1e3,this,this.countdown,[10])}},b_s.prototype.onWinModalClick=function(){Mmcs(MineModel,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.MineAttackResult=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.mine.mineResultTipUI,__extends(b_s,p_l),b_s.prototype.init=function(){Mtqp(this,Laya)},b_s.prototype.onExchangeVit=function(e){var p_l=e;return 0==MineModel.instance.checkGold(MineExchangeType.vit,p_l)?b_p.broadcastNotice((j_x("1263_869_2462")+j_x(1779))):(MineModel.instance.reqMineExchange(MineExchangeType.gold,MineExchangeTargetType.vit,p_l),Laya.timer.once(600,this,this.reqMineinfo),MineController.instance.getNeedOpenExchangeSoul()&&(MineController.instance.setNeedOpenExchangeSoul(!1),(new MineBuyVo).setMineBuyData(97,1,MineBuyType.soul,null))),void b_s.close()},b_s.prototype.onRemove=function(){Uloz(this,Laya)},b_s.open=function(){Oqmk(UIM,b_s)},b_s.prototype.onOk=function(){MineModel.instance.getMineVit();var e=MineModel.instance.getMineCurIndex(),p_l=MineModel.instance.getCurMineDetail();MineModel.instance.calcMoveInDis(e,p_l.getMineId()),Config.global[GlobalDefine.minewar_step_vit].i_info,MineModel.instance.getMineHp()<=0&&(MineModel.instance.reqMineList(),b_s.close())},b_s.prototype.onAdded=function(){Aczc(this,Laya,LED,l_r)},b_s.close=function(){Icox(UIM,b_s)},b_s.prototype.updateInfo=function(){MineModel.instance.getMineVit();var e=MineModel.instance.getMineCurIndex(),p_l=MineModel.instance.getCurMineDetail();MineModel.instance.calcMoveInDis(e,p_l.getMineId()),Config.global[GlobalDefine.minewar_step_vit].i_info,MineModel.instance.getMineHp()<=0&&(this.tipContent.text=(j_x("1749_2046_1839")+j_x("716_1250_803")+"0 "+j_x("1629_464_489")+j_x("1802_239_1863")+j_x(21)))},b_s.prototype.reqMineinfo=function(){Qzxq(MineModel)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.MineAttackResultTip=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.mine.mineBuyUI,__extends(b_s,p_l),b_s.prototype.init=function(){Gggr(this,Laya)},b_s.prototype.updateData=function(e){Cyvo(e,this)},b_s.prototype.onExchangeVit=function(){var e=this.curBuyNum;if(0==MineModel.instance.checkGold(MineExchangeType.vit,e))return b_p.broadcastNotice((j_x("1263_869_2462")+j_x(1779))),void b_s.close();if(MineModel.instance.reqMineExchange(MineExchangeType.gold,MineExchangeTargetType.vit,e),MineController.instance.getNeedOpenExchangeSoul()){MineController.instance.setNeedOpenExchangeSoul(!1);var p_l=new MineBuyVo;return p_l.setMineBuyData(97,1,MineBuyType.soul,null),this.updateData(p_l),void this.updateView()}b_s.close()},b_s.prototype.onAddBtn=function(){Cnze(this)},b_s.prototype.onClose=function(){Wudf(b_s)},b_s.prototype.onAdded=function(){Wygn(LED,l_r,this,Laya)},b_s.prototype.updatePrice=function(){Gxdo(this)},b_s.prototype.onRemove=function(){Ooov(LED,l_r,this,Laya)},b_s.prototype.onExchange=function(){if(this.mineBuyVo)switch(this.mineBuyVo.getMineBuyType()){case MineBuyType.attackReam:this.onExchangeAttackReam();break;case MineBuyType.vit:this.onExchangeVit();break;case MineBuyType.rob:this.onExchangeRob()}},b_s.close=function(){Mqxl(UIM,b_s)},b_s.prototype.onCancel=function(){Itpj(b_s)},b_s.open=function(e){Kimf(e,UIM,b_s)},b_s.prototype.initView=function(){},b_s.prototype.updateView=function(){var e=this.dataSource;if(null!=e){var p_l;this.mineBuyVo=e,this.curBuyNum=e.getNum();var p_g="";switch(this.addBtn.visible=this.subBtn.visible=this.moreAddBtn.visible=this.moreSubBtn.visible=!0,e.getMineBuyType()){case MineBuyType.attackReam:p_l=MineModel.instance.getMineAttackReam(),this.price=Config.global[GlobalDefine.minewar_buy_ack].t_info[1];var b_s=Config.CItem(e.getItemId());this.consumeImg.skin="res/ui/common/yuanbao.png",this.consumeImg.scale(.8,.8),p_g=b_s.name;break;case MineBuyType.soul:var d_u=MineModel.instance.getMineHp(),b_e=MineModel.instance.getMineHpUpper();p_l=100*Math.ceil(d_u/b_e),this.price=Config.global[GlobalDefine.minewar_buy_soul].i_info,p_g=Config.item_coin[e.getItemId()].name,this.consumeImg.skin="res/ui/mine/tilixiao.png",this.consumeImg.scale(1,1);break;case MineBuyType.vit:p_l=MineModel.instance.getMineVit(),this.price=Config.global[GlobalDefine.minewar_buy_vit].t_info[1],p_g=Config.item_coin[e.getItemId()].name,this.consumeImg.skin="res/ui/common/yuanbao.png",this.consumeImg.scale(.8,.8);break;case MineBuyType.rob:p_l=MineModel.instance.robbery;var d_m=Config.global[GlobalDefine.minewar_buy_inc].t_info,d_w=MineModel.instance.robBuyTimes||0;d_m.length>d_w?this.price=d_m[d_w]:this.price=d_m[d_m.length-1],p_g=Config.item_coin[e.getItemId()].name,this.consumeImg.skin="res/ui/common/yuanbao.png",this.consumeImg.scale(.8,.8),this.addBtn.visible=this.subBtn.visible=this.moreAddBtn.visible=this.moreSubBtn.visible=!1}this.totalPrice=this.curBuyNum*this.price,this.curNumLab.text=p_l.toString(),this.buyNunLab.text=this.curBuyNum.toString(),this.totalPriceLab.text=Math.floor(this.totalPrice).toString(),this.itemNameLabel.text=p_g;var f_t=new ModuleItemVO;f_t.id=e.getItemId(),f_t.amount=0,this.item.setItemData(f_t,ItemBoxDefine.MODULE_ITEM),this.item.nameTxt.visible=!1}},b_s.prototype.checkBuy=function(){var e=LgcM.ins.heroVo,p_l=this.price*this.curBuyNum;return!(e&&e.gold<p_l)},b_s.prototype.calcTotalPrice=function(e,p_l){return null==e||null==p_l?0:e*p_l},b_s.prototype.onWinModalClick=function(){Mhir(b_s)},b_s.prototype.onExchangeRob=function(){Ucwk(MineModel,MineExchangeType,MineExchangeTargetType,this,b_s)},b_s.prototype.onMoreSubBtn=function(){this.curBuyNum<=1?this.curBuyNum=1:(this.curBuyNum=this.curBuyNum-10,this.curBuyNum<=1&&(this.curBuyNum=1),this.totalPrice=this.curBuyNum*this.price,this.updatePrice())},b_s.prototype.onSubBtn=function(){this.curBuyNum<=1?this.curBuyNum=1:(this.curBuyNum=this.curBuyNum-1,this.totalPrice=this.curBuyNum*this.price,this.updatePrice())},b_s.prototype.onMoreAddBtn=function(){Cbxu(this)},b_s.prototype.onExchangeAttackReam=function(){Ohtc(MineModel,MineExchangeType,MineExchangeTargetType,this,b_s)},b_s.prototype.getMaxBuyNum=function(){var e=LgcM.ins.heroVo,p_l=this.price*this.curBuyNum;if(e&&e.gold<p_l){var p_g=e.gold/this.price;return 0==(p_g=Math.floor(p_g))?1:p_g}},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.MineBuy=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.mine.minePlayerInfoUI,__extends(b_s,p_l),b_s.prototype.init=function(){Gpjt(this,Laya)},b_s.prototype.onCancel=function(){var p_l=MineModel.instance.mineStage;if(1!=p_l[0]&&2!=p_l[0]&&3!=p_l[0]){var p_g=GuildModel.instance.guildInfo.id;if(p_g!=this.minePlayerInfoVo.getMineGuildId()||0==p_g){if(!(0<MineModel.instance.robbery)){b_p.broadcastNotice((j_x("2292_943_1724")+j_x("2462_1779")));var d_u=new MineBuyVo;return d_u.setMineBuyData(92,1,MineBuyType.rob,null),void e.MineBuy.open(d_u)}var b_e=this.minePlayerInfoVo.getMinePlayerId();if(DungeonModel.instance.isInFb)b_p.broadcastNotice((j_x("1300_1241_2035")+j_x("1443_944_283")));else{MineModel.instance.isRob=!0,MineModel.instance.fightResult=null;var d_m=this.checkSkip.selected?1:0;0==d_m&&(MineModel.instance.autoOpenMine=!0),MineModel.instance.reqMineFight(2,b_e,d_m)}b_s.close()}else b_p.broadcastNotice((j_x("87_495_796")+j_x("1413_2217_1738")+j_x("2462_1919_87")+j_x("1177_2292_943")))}else b_p.broadcastNotice((j_x("1072_2260_1174")+j_x("2075_2462_1163")+j_x("2292_943")))},b_s.prototype.update=function(e){this.minePlayerInfoVo=e,this.nameLabel.text=e.getMinePlayerName(),this.guildLabel.text=e.getMineGuildName(),this.powerLabel.text=e.getMinePlayerPower().toString();var p_l=e.getMinePlayerHp(),p_g=e.getMinePlayerHpUpper(),b_s=(Config.global[GlobalDefine.minewar_soul_max].i_info,z_j.countPer(p_l,p_g));this.progressValue.text=b_s+"%",this.wakanProgressBar.value=b_s/100;var d_u=MineModel.instance.getMineAttackReam();this.attackReamLabel.text=d_u+"/1",this.headImg.skin=Resource.ResManager.getHeadUrl(e.getEntryId(),e.getHeadIcon()),this.t_robCount.text=MineModel.instance.robbery+"/1";var b_e=e.getMineBox(),d_m=Config.minewar_mines[MineModel.instance.getCurMineDetailId()].robRate[0]/1e4*Config.minewar_box[e._stateLv()].limit,d_w=d_m<b_e?b_e-d_m:0;this.t_robNum.text=(j_x("944_235_1163")+j_x("2292_943_1263")+j_x(869)+"")+Math.floor(d_w*Config.minewar_mines[MineModel.instance.getCurMineDetailId()].robRate[1]/1e4)},b_s.prototype.onRemove=function(){Ocfm(this,Laya,LED,l_r)},b_s.prototype.onAttack=function(){if(MineModel.instance.checkAttack(this.minePlayerInfoVo))if(1!=this.minePlayerInfoVo.mineVo.type){var e=this.minePlayerInfoVo.getMinePlayerId();if(DungeonModel.instance.isInFb)b_p.broadcastNotice((j_x("1300_1241_2035")+j_x("1443_944_283")));else{MineModel.instance.isRob=!1,MineModel.instance.fightResult=null;var p_l=this.checkSkip.selected?1:0;0==p_l&&(MineModel.instance.autoOpenMine=!0),MineModel.instance.reqMineFight(1,e,p_l)}b_s.close()}else b_p.broadcastNotice((j_x("36_69_283")+j_x("86_1919_2292")+j_x("943_814_799")+j_x("712_1835")))},b_s.close=function(){Wlvi(UIM,b_s)},b_s.prototype.onAdded=function(){this.minePlayerInfoVo=this.dataSource,this.closeBtn.on(Laya.Event.CLICK,this,this.onCloseBtn),this.cancelBtn.on(Laya.Event.CLICK,this,this.onCancel),this.attackBtn.on(Laya.Event.CLICK,this,this.onAttack),LED.on(l_r.WIN_MODAL_CLICK,this,this.onWinModalClick),this.update(this.minePlayerInfoVo),DB.instance.query(c2w_minewar_miner_update,{pid:this.minePlayerInfoVo.getMinePlayerId()})},b_s.prototype.onWinModalClick=function(){Ijtv(b_s)},b_s.open=function(e){e&&e.getMinePlayerId()&&UIM.open(b_s,null,e,!1,!1,!0)},b_s.prototype.onCloseBtn=function(){Yacm(b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.MineChallengePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.mine.mineCityUI,__extends(b_s,p_l),b_s.prototype.init=function(){Abnj(this,Laya)},b_s.prototype.setMineCity=function(e){if(null!=e){var p_l=(this.mineVo=e).getMineId(),p_g=Config.minewar_mines[p_l];if(p_g){this.numLabel.text=e.getMinePlayerNum().toString()+"/"+p_g.limit;var b_s=p_g.type;this.cityLvImg.skin="res/ui/"+p_g.mincityicon,this.city.skin="res/ui/mine/mine_city_"+b_s+".png"}e.getMinePlayerNum()<=10?(this.numLabel.color="#71de66",this.roleImg.skin="res/ui/mine/renshu1.png"):e.getMinePlayerNum()<=20?(this.numLabel.color="#e48f49",this.roleImg.skin="res/ui/mine/renshu2.png"):(this.numLabel.color="#e32828",this.roleImg.skin="res/ui/mine/renshu3.png");var d_u=MineModel.instance.mineStage,b_e=e.getGuildName(),d_m=!1;if(""!=b_e){d_m=!0,this.i_flag.visible=!1;for(var d_w=GuildModel.instance.guildLIst||[],f_t=0;f_t<d_w.length;++f_t)if(d_w[f_t].name==e.getGuildName()){var v_z=Resource.ResUrl.ASSETS_URL+Config.guild_guildFlag[d_w[f_t].icon].source;this.i_flag=Resource.ResManager.Instance.getImg(v_z,this.i_flag),this.i_flag.visible=!0;break}4==d_u[0]?(this.protBox.visible=!0,this.countProtect(d_u[1])):this.protBox.visible=!1}else b_e=(j_x("206_2260_1174")),this.i_flag.visible=!1,this.protBox.visible=!1;var d_h=e.guildId==this.heroVo.guildID?"#00ff00":"#FF0000";this.txtGuildName.color=d_h,this.txtGuildName.text=b_e,this.txtGuildName.visible=1!=p_g.type&&d_m;var r_t=1,t_n=Config.minewar_mines[e.id];t_n&&(r_t=t_n.type),this.roleImg.skin="res/ui/mine/renshu"+r_t+".png"}},Object.defineProperty(b_s.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),b_s.prototype.countProtect=function(e){Laya.timer.clear(this,this.countProtect),0<=e?(this.t_prot.text=(j_x("405_1619_283")+"")+Utils.formatTimeStr(e),this.displayedInStage&&Laya.timer.once(1e3,this,this.countProtect,[e-1])):this.setMineCity(this.mineVo)},b_s.prototype.setMainMineCity=function(){Mxtb(this)},b_s.prototype.getStatusName=function(e){switch(e){case MineCityStatus.noOccupy:return(j_x("206_2260_1174"));case MineCityStatus.oneOccupy:return(j_x("1730_2260"));case MineCityStatus.moreOccupy:return(j_x("2260_1174"));default:return(j_x("206_2260_1174"))}},b_s.prototype.onClick=function(){null!=this.mineVo&&this.mineVo.getMineId()!=MineCityType.mainMineCity?(MineModel.instance.reqMineDetail(this.mineVo.getMineId()),e.MineDetail.open(this.mineVo)):e.MineMainCityInfo.open()},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.MineCity=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.mine.mineDetailUI,__extends(b_s,p_l),b_s.prototype.init=function(){Mmze(this,Laya,e)},b_s.prototype.onEnd=function(){this.isClick||this.isAuto||(this.isAuto=!0,this.goPage()),this.isClick=!1,this.isAuto&&(this.isAuto=!1),this.curValue=this.scrollValue},b_s.prototype.goPage=function(e,p_l){void 0===e&&(e=!0),void 0===p_l&&(p_l=null);var p_g=this.playerList.cells[0].width;p_l=p_l||this.scrollValue;var b_s=Math.round(p_l/p_g),d_u=!0;e&&(d_u=0!=p_l&&p_l%p_g==0),d_u?this.curPage=b_s:(this.curPage=b_s,this.updatePage()),this.updateBtn()},Object.defineProperty(b_s.prototype,"scrollValue",{get:function(){return this.playerList.scrollBar.value},enumerable:!0,configurable:!0}),b_s.prototype.onScrollChange=function(e){this.lastValue!=e&&(this.lastValue=e,this.isClick||this.goPage(!1,e))},b_s.prototype.updateData=function(){Soxe(this)},b_s.prototype.onMoveIn=function(){if(GuildModel.instance.isGuild)if(3!=MineModel.instance.mineStage[0]){if(this.mineVo){var p_l=1,p_g=Config.minewar_mines[this.mineVo.getMineId()];p_g&&(p_l=p_g.limit),this.mineVo.getMinePlayerNum()>=p_l?e.MineFullPanel.open(Laya.Handler.create(this,this.sendMove)):this.onMove()}}else b_p.broadcastNotice((j_x("554_943_383")+j_x("763_1121_214")+j_x(4)+""+j_x("506_2035_1496")+j_x("1941_383_836")));else b_p.broadcastNotice((j_x("223_2456_796")+j_x("1413_1865_1163")+j_x("33_562_69")+j_x("543_554_943")))},b_s.prototype.exchangeComplete=function(){Qfbo(LED,l_r,this,MineModel)},b_s.close=function(){Oblc(UIM,b_s)},b_s.prototype.onLeft=function(){Srqj(this)},b_s.prototype.onRemove=function(){this.closeBtn.off(Laya.Event.CLICK,this,this.onClose),LED.off(l_r.MINE_DETAIL,this,this.updateData);for(var e=1;e<=5;e++){var p_l=this["role"+e];p_l&&p_l.clearRes()}Laya.timer.clear(this,this.autoUpdateData)},b_s.prototype.removeTime=function(){Qwyt(Laya,this)},b_s.prototype.showHideTimeAll=function(e){void 0===e&&(e=!1),this.attackTimeBox.visible=e,this.txtMomoTime.visible=e},b_s.prototype.onAdded=function(){Spjv(this,Laya,LED,l_r)},b_s.prototype.reqCurMineData=function(){this.mineVo&&MineModel.instance.reqMineDetail(this.mineVo.id)},b_s.prototype.updateBtn=function(){var e=this.curPage,p_l=!0,p_g=!0;1==this.maxPage?p_g=p_l=!1:e+1>=this.maxPage?p_g=!1:e-1<0&&(p_l=!1),this.leftImg.visible=p_l,this.rightImg.visible=p_g;var b_s=e<1?1:e+1;this.pageLabel.text=b_s+"/"+this.maxPage},b_s.prototype.onClose=function(){Awdv(MineModel,b_s,this)},b_s.prototype.updatePage=function(){Iqfk(this)},b_s.prototype.updatePlayers=function(){Eqff(this,z_j)},b_s.prototype.startTime=function(){Enrs(this,Laya)},b_s.prototype.removeTimeAll=function(){Cgco(this)},b_s.prototype.dealTime=function(e,p_l){var p_g=e+p_l-Math.floor(SyncTime.serverTime/1e3);0<p_g&&(p_l<p_g?p_g=0:p_g+=1,this.remainTime=p_g,this.totalTime=p_l)},b_s.prototype.autoUpdateData=function(){Ekhm(this)},b_s.prototype.updateTime=function(){if(this.remainTime<=0)return this.removeTimeAll(),void this.reqCurMineData();if(this.isMono)this.txtMomoTime.text=(j_x("1730_2260_396")+j_x("2426_810_867")+j_x(1702)+"")+Utils.formatTimeStr2(this.remainTime,!0);else{this.txtAttackTime.text=Utils.formatTimeStr2(this.remainTime,!0);var e=(this.totalTime-this.remainTime)/this.totalTime;e=Math.floor(100*e),this.attackBar.value=e/100,this.txtAttackPro.text=e+"%"}this.remainTime--},b_s.prototype.showNoticeView=function(p_l){void 0===p_l&&(p_l=!0),p_l?e.MineRobNoticeView.open():e.MineRobNoticeView.close()},b_s.prototype.updateNoticeView=function(){AlertUtil.hasTip(MineConstant.alert_rob)?e.MineRobNoticeView.open({id:this.mineVo.id,fun:Laya.Handler.create(this,this.sendMove)}):this.sendMove()},b_s.prototype.showHideTime=function(e){void 0===e&&(e=!1),this.isMono?this.txtMomoTime.visible=e:this.attackTimeBox.visible=e},b_s.prototype.onMove=function(){var e=this;if(MineModel.instance.checkMoveInVit(this.mineVo.getMineId()))this.updateNoticeView();else{var p_l=MineModel.instance.getMineVit(),p_g=MineModel.instance.getMineCurIndex(),b_s=MineModel.instance.getCurMineDetail(),d_u=MineModel.instance.calcMoveInDis(p_g,b_s.getMineId()),b_e=Config.global[GlobalDefine.minewar_step_vit].i_info*d_u,d_m=(b_e-p_l)*Config.global[GlobalDefine.minewar_buy_vit].t_info[1],d_w=Utils.setColor(Config.minewar_mines[this.mineVo.getMineId()].name,"#00802e");b_p.confirm(Utils.$((j_x("68_2032_1661")+j_x(1502)+"{1}"+j_x("1263_869_579")+j_x(2258)+"{2}"+j_x("2198_767")+""+j_x("1426_328_2199")+j_x(1012)+"{3}"+j_x("69_932")),Utils.setColor(d_m.toString(),"#00802e"),Utils.setColor((b_e-p_l).toString(),"#00802e"),d_w),(function(){MineModel.instance.reqMineExchange(MineExchangeType.gold,MineExchangeTargetType.vit,b_e-p_l),LED.on(l_r.MINE_EXCHANGE,e,e.updateNoticeView)}),null,!1,!1,!0)}},b_s.open=function(e){Qtby(e,UIM,b_s)},b_s.prototype.getMaxPageNum=function(){var e=MineModel.instance.getCurMineDetail().getMinePlayers().length/5;return 0==e?1:Math.ceil(e)},b_s.prototype.updateView=function(){var e=MineModel.instance.getCurMineDetail();if(e&&this.dataSource){var p_l=e.mineVo;this.mineVo=p_l;var p_g=0,b_s=0,d_u=Config.minewar_mines[p_l.getMineId()];d_u&&(this.minetitle.skin="res/ui/"+d_u.mintitleicon,b_s=d_u.occupyTime,p_g=d_u.breakTime),this.mineInfoPanel.label1.visible=this.mineInfoPanel.label2.visible=1!=d_u.type,this.mineInfoPanel.onlyGuildOutputLabel.visible=this.mineInfoPanel.guildOutputLabel.visible=1!=d_u.type;var b_e=p_l.getGuildName();this.txtGuildName.text=b_e,this.txtGuildName2.text=b_e;var d_m=1==p_l.isMono,d_w=!0,f_t=!1;this.remainTime=0,this.removeTimeAll(),d_m?(this.dealTime(p_l.monoTime,p_g),d_w=!1):(this.dealTime(p_l.occuTime,b_s),(f_t=0<this.remainTime)&&(d_w=!1)),this.isMono=d_m,0<this.remainTime&&this.startTime(),this.monoBox.visible=d_m,this.attackBox.visible=f_t,this.noBox.visible=d_w,this.mineInfoPanel.update(p_l,this.remainTime),d_w&&(this.txtGuildName3.text=""!=b_e?""+b_e+"":(""+j_x("814_796_1413")+j_x("2260_1174")+""));var v_z=MineModel.instance.getOwnerMinePos(),d_h=Math.ceil(v_z-1);this.curPage=this.curPage||d_h;var r_t=MineModel.instance.getMineCurIndex(),t_n=MineModel.instance.getCurMineDetailId();if(r_t==t_n)this.moveInBtn.disabled=!0,this.needNumLabel.color="#d8dcec",this.needNumLabel.text="0";else{this.moveInBtn.disabled=!1;var f_y=MineModel.instance.calcMoveinVitConsume(r_t,t_n);this.needNumLabel.text=f_y.toString(),this.needNumLabel.color=MineModel.instance.getMineVit()>=f_y?"#71de66":"#ef2b2b"}this.updatePlayers();var p_q=1!=this.attackTimeBox.visible&&(1!=this.txtMomoTime.visible||1!=this.monoBox.visible);this.attDesc.visible=1==d_u.type||p_q,1==d_u.type&&(this.noBox.visible=this.attackBox.visible=!1)}},b_s.prototype.onRight=function(){Uktf(this)},b_s.prototype.changePage=function(e){var p_l=this.curPage+e;p_l<0||p_l>this.maxPage||(this.curPage!=p_l&&(this.isClick=!0),this.curPage=p_l,this.updateBtn(),this.updatePage())},b_s.prototype.sendMove=function(){Qdzl(MineModel,this,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.curValue=0,e.lastValue=0,e.init(),e}e.MineDetail=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.mine.mine_exchangeUI,__extends(b_s,p_l),b_s.open=function(){UIM.open(b_s,["mineWar.atlas"],null,!1,!1,!0,!0,{container:"win"})},b_s.prototype.updateWallet=function(){Qbjj(this,MineModel)},b_s.prototype.onRemoved=function(){this.off(Laya.Event.REMOVED,this,this.onRemoved),this.on(Laya.Event.ADDED,this,this.onAdded),this.off(Laya.Event.CLICK,this,this.onMouseClick),this.list.renderHandler&&(this.list.renderHandler.recover(),this.list.renderHandler=null),this.list.scrollBar.off(Laya.Event.CHANGE,this,this.onScroll),LED.off(l_r.MINE_ROLE_INFO,this,this.updateWallet),LED.off(l_r.MINE_EXCHANGE_UPDATE,this,this.updateView)},b_s.prototype.updateView=function(){Aete(this)},b_s.prototype.onMouseClick=function(e){var p_l=e.target;switch(p_l.name){case"closeBtn":case"backBtn":b_s.close();break;case"btn":var p_g=p_l.dataSource.id;if(Config.activity_minewar_exchange[p_g].point>MineModel.instance.money)return void b_p.broadcastNotice((j_x("1763_1713_514")+j_x("2224_2462_1779")));DB.instance.query(c2w_minewar_exchange,{id:p_g})}},b_s.prototype.onItemRender=function(e,p_l){if(e){var p_g=e.getChildByName("t_name"),b_s=e.getChildByName("t_count"),d_u=e.getChildByName("btn"),b_e=e.getChildByName("itemBox"),d_m=e.dataSource,d_w=Config.activity_minewar_exchange[d_m],f_t=Config.CItem(d_w.itemId);p_g.text=f_t.name,b_s.text=(d_w.limit-(MineModel.instance.exchangeInfo[d_m]||0)).toString(),d_u.label=d_w.point.toString()+(j_x("514_2224")),d_u.dataSource={id:d_m},d_u.disabled=parseInt(b_s.text)<=0,b_e.isShowName=!1,b_e.isShowNum=!1;var v_z=new ModuleItemVO;v_z.id=d_w.itemId,v_z.amount=1,b_e.setItemData(v_z)}},b_s.prototype.onAdded=function(){b_s.IS_CLICK=!0,this.on(Laya.Event.REMOVED,this,this.onRemoved),this.off(Laya.Event.ADDED,this,this.onAdded),this.on(Laya.Event.CLICK,this,this.onMouseClick),this.list.renderHandler=Laya.Handler.create(this,this.onItemRender,null,!1),this.list.scrollBar.on(Laya.Event.CHANGE,this,this.onScroll),LED.on(l_r.MINE_ROLE_INFO,this,this.updateWallet),LED.on(l_r.MINE_EXCHANGE_UPDATE,this,this.updateView),MineModel.instance.reqMineRole()},b_s.close=function(){Ktut(UIM,b_s)},b_s.prototype.onScroll=function(){this.list.scrollBar.value<this.list.scrollBar.max?(this.arrowDown.visible=!0,this.ani1.play()):(this.arrowDown.visible=!1,this.ani1.stop())},b_s.IS_CLICK=!1,b_s);function b_s(){var e=p_l.call(this)||this;e.on(Laya.Event.ADDED,e,e.onAdded),e.list.vScrollBarSkin="";var p_g=[];for(var b_s in Config.activity_minewar_exchange){var d_u=Config.activity_minewar_exchange[b_s];p_g.push(d_u.id)}return e.list.array=p_g,e}e.MineExchange=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.mine.mineExpandUI,__extends(b_s,p_l),b_s.prototype.init=function(){Kbui(this)},b_s.prototype.update=function(e,p_l){var p_g;if(this.type=p_l,this.wakanIcon.visible=p_l==MineBuyType.soul,this.powerIcon.visible=!this.wakanIcon.visible,p_l==MineBuyType.soul){this.typeLabel.text=(j_x("1839_716"));var b_s=e/MineModel.instance.getMineHpUpper();this.valueLabel.text=Math.floor(100*b_s)+"%",this.progressImg.value=b_s}p_l==MineBuyType.vit&&(this.typeLabel.text=(j_x("2198_767")),p_g=Config.global[GlobalDefine.minewar_vit_max].i_info,this.valueLabel.text=e+"/"+p_g,b_s=p_g<e?1:e/p_g,this.progressImg.value=b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.MineExpand=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.mine.mineFullUI,__extends(b_s,p_l),b_s.open=function(e){void 0===e&&(e=null),UIM.open(b_s,null,e,!1,!1)},b_s.close=function(){Ilho(UIM,b_s)},b_s.prototype.onClick=function(e){switch(e.target){case this.btnClose:case this.btnCancel:this.onClose();break;case this.btnMove:this.onMove()}},b_s.prototype.onRemoved=function(){Ufho(this,Laya)},b_s.prototype.onMove=function(){this._fun&&this._fun.run(),this.onClose()},b_s.prototype.onAdded=function(){Cuqr(this,Laya)},b_s.prototype.onClose=function(){Mpor(b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.MineFullPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.mine.mineHelpUI,__extends(b_s,p_l),b_s.prototype.init=function(){Mizv(this,Laya)},b_s.prototype.onRemove=function(){Wskq(this,Laya)},b_s.prototype.onAdded=function(){Wxxb(this,Laya)},b_s.close=function(){Snvn(UIM,b_s)},b_s.open=function(){Kojn(UIM,b_s)},b_s.prototype.onCloseBtn=function(){Aidn(b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.MineHelpView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.mine.mineHistoryUI,__extends(b_s,p_l),b_s.prototype.init=function(){this.list.repeatY=5,this.list.spaceY=5,this.list.itemRender=e.MineHistoryItem,this.list.vScrollBarSkin="",this.list.scrollBar.elasticBackTime=100,this.list.scrollBar.elasticDistance=200,this.list.array=[],this.list.mouseHandler=new laya.utils.Handler(this,this.onMouseHandler),this.on(Laya.Event.ADDED,this,this.onAdded),this.on(Laya.Event.REMOVED,this,this.onRemove)},b_s.open=function(){Yjzg(UIM,b_s)},b_s.prototype.onRemove=function(){Ezrw(this,Laya,LED,l_r)},b_s.prototype.onAdded=function(){Qoyr(this,Laya,LED,l_r,MineModel)},b_s.prototype.updateView=function(){var e=MineModel.instance.getMineRecords();if(e&&e.length){var p_l=[];if(20<e.length)for(var p_g=0;p_g<20;p_g++)p_l.push(e[p_g]);else p_l=e;this.list.array=p_l,this.nullLabel.visible=!1}else this.list.array=[],this.nullLabel.visible=!0},b_s.prototype.onMouseHandler=function(e,p_l){Ykon(e,p_l,Laya)},b_s.prototype.onWinModalClick=function(){Mwpg(b_s)},b_s.close=function(){Wsys(UIM,b_s)},b_s.prototype.onCloseBtn=function(){Sqoj(b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.MineHistory=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.mine.mineHistoryItemUI,__extends(b_s,p_l),Object.defineProperty(b_s.prototype,"dataSource",{set:function(e){null!=e&&(this._dataSource=e,this.update())},enumerable:!0,configurable:!0}),b_s.prototype.update=function(){var e=this._dataSource;this.titleImg.skin=0==e.getType()?"res/ui/mine/tiaozhanjilu.png":"res/ui/mine/fangshoujilu.png";var p_l=LgcM.ins.heroVo;this.nameLabel1.text=p_l.name;var p_g=e.getSoul(),b_s=e.hpUpper,d_u=this.countPer(e.roundSubHP,b_s,!0);this.decLabel1.text=(j_x("463_1011_1839")+j_x(716))+d_u+"%";var b_e=this.countPer(p_g,b_s,!1);this.progress1.value=b_e/100,this.progressValue1.text=b_e+"%";var d_m=e.getFhp(),d_w=e.getFhpUpper(),f_t=this.countPer(e.fRoundSubHP,d_w,!0);this.nameLabel2.text=e.getFname(),this.decLabel2.text=(j_x("463_1011_1839")+j_x(716))+f_t+"%";var v_z=this.countPer(d_m,d_w);this.progress2.value=v_z/100,this.progressValue2.text=v_z+"%";var d_h=e.getResult(),r_t="res/ui/mine/shibai.png",t_n="res/ui/mine/shibai.png";3!=d_h&&(0==d_h&&(r_t="res/ui/mine/shengli.png"),1==d_h&&(t_n="res/ui/mine/shengli.png")),this.resultIcon1.skin=r_t,this.resultIcon2.skin=t_n,this.icon1.skin=Resource.ResManager.getHeadUrl(p_l.entryId,p_l.headIcon),this.icon2.skin=Resource.ResManager.getHeadUrl(e.getEntryId(),e.getHeadIcon()),this.timeLabel.text=this.getTimeDec(e.getTime()),2==e.mode?(this.progress1.visible=this.progress2.visible=!1,0==e.getType()?(this.decLabel1.text=(j_x("2292_943_1263")+j_x(869))+e.num,this.decLabel2.text=(j_x("1111_1902_1263")+j_x(869))+e.fnum):(this.decLabel1.text=(j_x("1111_1902_1263")+j_x(869))+e.fnum,this.decLabel2.text=(j_x("2292_943_1263")+j_x(869))+e.num)):this.progress1.visible=this.progress2.visible=!0},b_s.prototype.countPer=function(e,p_l,p_g,b_s){return void 0===p_g&&(p_g=!1),void 0===b_s&&(b_s=1),z_j.countPer(e,p_l,p_g,b_s)},b_s.prototype.getTimeDec=function(e){var p_l=SyncTime.serverTime/1e3-e,p_g=Math.floor(p_l/86400),b_s=Math.floor(p_l/3600),d_u=Math.floor((p_l-60*b_s*60)/60);return 0<p_g?p_g+(j_x("2308_711")):0<b_s?b_s+(j_x("1747_1702_711")):0<d_u?d_u+(j_x("2224_1394_711")):("1"+j_x("2224_1394_711"))},b_s);function b_s(){return p_l.call(this)||this}e.MineHistoryItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.mine.mineInfoUI,__extends(b_s,p_l),b_s.prototype.init=function(){Kffm(this)},b_s.prototype.update=function(e,p_l){if(void 0===p_l&&(p_l=0),null!=e){this.InitLableState();var p_g,b_s,d_u=MineModel.instance.mineStage,b_e=0,d_m=Config.minewar_mines[e.getMineId()].addRate/100;this.guildOutputLabel.text=(j_x("2031_716")+"+")+d_m+"%",1==e.isMono&&e.guildId==LgcM.ins.heroVo.guildID&&(p_g=!0),e.guildId==LgcM.ins.heroVo.guildID&&p_l<=0&&(b_s=!0);var d_w=b_s?this.addColor:this.noStateColor;this.label1.color=d_w,this.guildOutputLabel.color=d_w;var f_t,v_z,d_h,r_t=p_g?this.addColor:this.noStateColor,t_n=5e3,f_y=5e3,p_q=Config.minewar_mines[e.getMineId()];p_q&&(t_n=p_q.monoRate,f_y=p_q.addRate),this.label2.color=r_t,this.onlyGuildOutputLabel.color=r_t,this.onlyGuildOutputLabel.text=(j_x("2031_716")+"+")+t_n/100+"%",b_s&&(b_e+=f_y),p_g&&(b_e+=t_n),f_t=1==d_u[0]?(j_x("514_2224")+"/"+j_x("1747_1702")):2==d_u[0]?(j_x("514_2224")+"/"+j_x("2224_1394")):(v_z=3600/Config.global[GlobalDefine.minewar_box_timer].i_info,d_h=Config.minewar_mines[e.getMineId()].gold*v_z*24,(j_x("1263_869")+"/"+j_x(2308))),0==b_e||1==d_u[0]||2==d_u[0]?(this.addLable.visible=!1,this.arrowTag.visible=!1):0<=b_e?(this.addLable.visible=!0,this.arrowTag.visible=!0,this.addLable.color=this.addColor,this.arrowTag.skin="res/ui/mine/mine_tigao.png"):b_e<0&&(this.addLable.visible=!0,this.arrowTag.visible=!0,this.addLable.color=this.reduceColor,this.arrowTag.skin="res/ui/mine/down_arrow.png"),d_h*=1+b_e/1e4,this.normalOutputLabel.text=d_h+f_t,0<b_e&&(this.addLable.text="("+b_e/100+"%)"),this.addLable.x=this.normalOutputLabel.x+this.normalOutputLabel.textField.textWidth+2,this.arrowTag.x=this.addLable.x+this.addLable.textField.textWidth+2}},b_s.prototype.InitLableState=function(){Uwgy(this)},b_s);function b_s(){var e=p_l.call(this)||this;return e.addColor="#71de66",e.reduceColor="#e32828",e.noStateColor="#8f929f",e.init(),e}e.MineInfo=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.mine.mineItemUI,__extends(b_s,p_l),b_s.prototype.init=function(){this.txtguildName.text="",this.playerNameLabel.text="",this.wakanLabel.text="",this.wakanProgress.value=0,this.cellectModel=new n_k,this.collectActionSp.addChild(this.cellectModel),this.on(Laya.Event.CLICK,this,this.onClick)},b_s.prototype.update=function(e,p_l){if(e&&p_l){this.minePlayerInfoVo=e,this.minePlayerInfoVo.mineVo=p_l;var p_g=e.getMineGuildName();this.playerNameLabel.text=e.getMinePlayerName();var b_s=z_j.countPer(e.getMinePlayerHp(),e.getMinePlayerHpUpper());this.wakanLabel.text=b_s+"%",this.txtguildName.text=p_g,this.wakanProgress.value=b_s/100;var d_u=new Engine2d.PlayerVo;d_u.entryId=e.getEntryId(),this.cellectModel.changRoleSkin(d_u,!0,!1,e.fashionWeapon(),e.fashionClothes());var b_e=MineModel.instance.checkAttack(e,!1),d_m=!1;1==p_l.isMono&&b_e&&p_l.guildId!=e.getMineGuildId()&&(d_m=!0),this.fightimg.visible=b_e,this.imgWarn.visible=d_m,this.guildBox.visible=""!=p_g;var d_w=Config.minewar_box[this.minePlayerInfoVo._stateLv()].limit,f_t=this.minePlayerInfoVo.getMineBox()/d_w;if(this.i_gold2.visible=.2<=f_t&&f_t<.5,this.i_gold3.visible=.5<=f_t&&f_t<.8,this.i_gold4.visible=.8<=f_t,e.getMineGuildId()){for(var v_z=GuildModel.instance.guildLIst,d_h=0;d_h<v_z.length;++d_h)if(v_z[d_h].id==e.getMineGuildId()){var r_t=Resource.ResUrl.ASSETS_URL+Config.guild_guildFlag[v_z[d_h].icon].source;this.icon=Resource.ResManager.Instance.getImg(r_t,this.icon),this.icon.visible=!0;break}}else this.icon.visible=!1;var t_n=MineModel.instance.getCurMineDetail();1==Config.minewar_mines[t_n.getMineId()].type?this.mineImg.skin="res/ui/mine/tongkuang.png":2==Config.minewar_mines[t_n.getMineId()].type?this.mineImg.skin="res/ui/mine/yingkuang.png":3==Config.minewar_mines[t_n.getMineId()].type&&(this.mineImg.skin="res/ui/mine/jinkuang.png")}},b_s.prototype.onClick=function(){if(this.minePlayerInfoVo){var p_l=LgcM.ins.heroVo;this.minePlayerInfoVo.getMinePlayerId()!=p_l.id&&e.MineChallengePanel.open(this.minePlayerInfoVo)}},b_s.prototype.clearRes=function(){this.cellectModel&&this.cellectModel.clearRes()},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.MineItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.mine.mineMainCityInfoUI,__extends(b_s,p_l),b_s.prototype.init=function(){Kqzn(this,Laya,b_p,Utils)},b_s.close=function(){Aqbt(UIM,b_s)},b_s.prototype.updateView=function(){Gzgv(MineModel,Config,GlobalDefine)},b_s.prototype.onCloseBtn=function(){Gxkr(b_s)},b_s.prototype.onRemove=function(){Uwok(LED,l_r,this,Laya)},b_s.prototype.onAdded=function(){Qqvw(this,LED,l_r,Laya)},b_s.open=function(){Iszy(UIM,b_s)},b_s.prototype.onMoveinBtn=function(){MineController.instance.setNeedExchangeVit(!1);var e=MineModel.instance.getMineCurIndex();if(e!=MineModel.MainCityId){var p_l=MineModel.instance.getMineVit(),p_g=Config.minewar_mines[e].cost;if(p_g<=p_l){var d_u=function(){Unzo(MineModel,b_s)},b_e=(j_x("68_2032_1661")+j_x(1502))+p_g+(j_x("2198_767_328")+j_x("2456_1863_21")+"?");b_p.confirm(b_e,d_u)}else{var d_m,d_w=p_g-p_l,f_t=Config.global[GlobalDefine.minewar_buy_vit].t_info[0],v_z=Config.global[GlobalDefine.minewar_buy_vit].t_info[1],d_h=Config.item_coin[f_t].name;ItemType.gold==f_t&&(d_m=LgcM.ins.heroVo.gold),ItemType.money==f_t&&(d_m=LgcM.ins.heroVo.copper);var r_t=d_w*v_z;d_u=function(){d_m<r_t?b_p.broadcastNotice((j_x("1263_869_2462")+j_x(1779))):(MineController.instance.setNeedExchangeVit(!0),MineModel.instance.reqMineExchange(MineExchangeType.gold,MineExchangeTargetType.vit,d_w))},b_e=(j_x("944_235_328")+j_x("2456_1863_21")+j_x("1768_1499_1122"))+d_w+(j_x("2198_767")+","+j_x("68_2032_572")+j_x(2218))+r_t+d_h+(j_x("579_2258_2198")+j_x("767_1426_328")+j_x(2456)),b_p.confirm(b_e,d_u)}}else b_p.broadcastNotice((j_x("1749_1300_2035")+j_x("1863_21_283")))},b_s.prototype.onExchange=function(e){MineController.instance.getNeedExchangeVit()&&(MineModel.instance.reqMineMove(1),MineController.instance.setNeedExchangeVit(!1),b_s.close())},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.MineMainCityInfo=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.mine.mineOccupySuccessUI,__extends(b_s,p_l),b_s.prototype.init=function(){Qewj(this,Laya)},b_s.prototype.onRemove=function(){Sqrm(b_s)},b_s.prototype.onAdded=function(){this.dataSource.IsShowBox?(this.Immigrationname.skin="res/ui/"+Config.minewar_mines[this.dataSource.datas.getMineId()].minattackicon,this.NameBox.visible=!0):this.NameBox.visible=!1,this.ani1.play(0,!1),Laya.timer.once(2e3,this,this.onRemove)},b_s.open=function(e){var p_l={},p_g=!0;null==e&&(p_g=!1),p_l.datas=e,p_l.IsShowBox=p_g,UIM.open(b_s,["mine.atlas"],p_l,!1,!1,!0,!0)},b_s.close=function(){Emxl(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.MineOccupySuccess=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.mine.minePlayerInfoUI,__extends(b_s,p_l),b_s.prototype.init=function(){Ihrx(this,Laya)},b_s.prototype.onAdded=function(){this.minePlayerInfoVo=this.dataSource,this.closeBtn.on(Laya.Event.CLICK,this,this.onCloseBtn),this.cancelBtn.on(Laya.Event.CLICK,this,this.onCancel),this.attackBtn.on(Laya.Event.CLICK,this,this.onAttack),LED.on(l_r.WIN_MODAL_CLICK,this,this.onWinModalClick),this.update(this.minePlayerInfoVo),DB.instance.query(c2w_minewar_miner_update,{pid:this.minePlayerInfoVo.getMinePlayerId()})},b_s.prototype.update=function(e){this.minePlayerInfoVo=e,this.nameLabel.text=e.getMinePlayerName(),this.guildLabel.text=e.getMineGuildName(),this.powerLabel.text=e.getMinePlayerPower().toString();var p_l=e.getMinePlayerHp(),p_g=e.getMinePlayerHpUpper();this.progressValue.text=(100*Math.ceil(p_l/p_g)).toString()+"%",this.wakanProgressBar.value=p_l/p_g;var b_s=MineModel.instance.getMineAttackReam();this.attackReamLabel.text=b_s+"/1",this.headImg.skin=Resource.ResManager.getHeadUrl(e.getEntryId(),e.getHeadIcon()),this.t_robCount.text=MineModel.instance.robbery+"/1";var d_u=e.getMineBox(),b_e=Config.minewar_mines[MineModel.instance.getCurMineDetailId()].robRate[0]/1e4*Config.minewar_box[e._stateLv()].limit,d_m=b_e<d_u?d_u-b_e:0;this.t_robNum.text=(j_x("944_235_1163")+j_x("2292_943_1263")+j_x(869)+"")+Math.floor(d_m*Config.minewar_mines[MineModel.instance.getCurMineDetailId()].robRate[1]/1e4)},b_s.prototype.onWinModalClick=function(){Enst(b_s)},b_s.close=function(){Qjqb(UIM,b_s)},b_s.prototype.onAttack=function(){if(MineModel.instance.checkAttack(this.minePlayerInfoVo)){var e=this.minePlayerInfoVo.getMinePlayerId();DungeonModel.instance.isInFb?b_p.broadcastNotice((j_x("1300_1241_2035")+j_x("1443_944_283"))):(MineModel.instance.fightResult=null,MineModel.instance.reqMineFight(1,e)),b_s.close()}},b_s.open=function(e){e&&e.getMinePlayerId()&&UIM.open(b_s,null,e,!1,!1,!0)},b_s.prototype.onCancel=function(){var p_l=MineModel.instance.mineStage;if(1!=p_l[0]&&2!=p_l[0]&&3!=p_l[0]){var p_g=GuildModel.instance.guildInfo.id;if(p_g!=this.minePlayerInfoVo.getMineGuildId()||0==p_g){if(!(0<MineModel.instance.robbery)){b_p.broadcastNotice((j_x("2292_943_1724")+j_x("2462_1779")));var d_u=new MineBuyVo;return d_u.setMineBuyData(92,1,MineBuyType.rob,null),void e.MineBuy.open(d_u)}var b_e=this.minePlayerInfoVo.getMinePlayerId();DungeonModel.instance.isInFb?b_p.broadcastNotice((j_x("1300_1241_2035")+j_x("1443_944_283"))):(MineModel.instance.fightResult=null,MineModel.instance.reqMineFight(2,b_e)),b_s.close()}else b_p.broadcastNotice((j_x("87_495_796")+j_x("1413_2217_1738")+j_x("2462_1919_87")+j_x("1177_2292_943")))}else b_p.broadcastNotice((j_x("1072_2260_1174")+j_x("2075_2462_1163")+j_x("2292_943")))},b_s.prototype.onRemove=function(){Ouis(this,Laya,LED,l_r)},b_s.prototype.onCloseBtn=function(){Kmfp(b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.MinePlayerInfoPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.mine.minePlayerListViewUI,__extends(b_s,p_l),Object.defineProperty(b_s.prototype,"dataSource",{set:function(e){this.curPage=e,this.updatePlayer()},enumerable:!0,configurable:!0}),b_s.prototype.updatePlayer=function(){var e,p_l=MineModel.instance.getCurMineDetail(),p_g=p_l.getMinePlayers(),b_s=MineModel.instance.getMineVo(p_l.getMineId());b_s&&b_s.isMono;for(var d_u=1;d_u<=5;d_u++){e=!1;var b_e=this["role"+d_u],d_m=p_g[5*(this.curPage-1)+d_u-1];d_m&&(e=!0),b_e.visible=e,b_e.update(d_m,b_s)}},b_s);function b_s(){return p_l.call(this)||this}e.MinePlayerListView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.mine.mine_rankUI,__extends(b_s,p_l),b_s.prototype.onItemRender=function(e,p_l){e&&e.update(e.dataSource,this.menuTap.selectedIndex)},b_s.open=function(e){void 0===e&&(e=0),UIM.open(b_s,["mineWar.atlas"],{viewIndex:e},!1,!1,!0,!0,{container:"win"})},b_s.prototype.updateView=function(){var e,p_l,p_g=this.menuTap.selectedIndex;0==p_g&&(e=RankType.MinePersonal,p_l=RankModel.instance.getRankDataByType(e),this.personList.array=p_l?p_l.getItems():[],this.minBg.height=603,this.owerBox.y=740,this.tipBox.visible=!1,this.personList.visible=!0,this.guildList.visible=!1,this.title_name.text=(j_x("855_386")),this.noRankData.visible=0==this.personList.length),1==p_g&&(e=RankType.MineGuild,p_l=RankModel.instance.getRankDataByType(e),this.guildList.array=p_l?p_l.getItems():[],this.minBg.height=545,this.owerBox.y=680,this.tipBox.visible=!0,this.personList.visible=!1,this.guildList.visible=!0,this.title_name.text=(j_x("796_1413")),this.noRankData.visible=0==this.guildList.length);var b_s=LgcM.ins.heroVo;this.nameLab.text=b_s.name;var d_u=p_l?p_l.getOwnIndex():0;this.indexLab.text=0==d_u?(j_x("206_1067_1077")):d_u.toString(),this.powerLab.text=p_l?p_l.getOwnValue().toString():"0",0<(0==p_g?MineModel.instance.prankRwd:MineModel.instance.grankRwd)?(this.getBtn.disabled=!0,this.getBtn.label=(j_x("1300_1174_2111"))):(this.getBtn.disabled=!1,this.getBtn.label=(j_x("1174_2111_2235")+j_x(83))),this.getBtn.getChildByName("redpoint").visible=MineModel.instance.checkMineRankReward(e),this.personalredpoint.visible=MineModel.instance.checkMineRankReward(RankType.MinePersonal),this.guildredpoint.visible=MineModel.instance.checkMineRankReward(RankType.MineGuild)},b_s.prototype.onGetBtn=function(){var e=MineModel.instance.mineStage;if(1!=e[0]&&2!=e[0]&&3!=e[0]){var p_l=this.menuTap.selectedIndex,p_g=0==p_l?RankType.MinePersonal:RankType.MineGuild,b_s=0==p_l?MineModel.instance.prankRwd:MineModel.instance.grankRwd;MineModel.instance.checkMineRankReward(p_g)&&0==b_s?MineModel.instance.reqGetRankReward(p_l+1):b_p.broadcastNotice((j_x("1971_1896_1163")+j_x("1174_2111_2046")+j_x("2235_83")))}else b_p.broadcastNotice((j_x("206_1012_1174")+j_x("2235_1702_2460")))},b_s.prototype.onRemoved=function(){Ieov(this,Laya,LED,l_r)},b_s.prototype.onCloseBtn=function(){Otyf(b_s)},b_s.prototype.onAdded=function(){this.menuTap.selectedIndex=this.dataSource.viewIndex||0,this.getBtn.on(Laya.Event.CLICK,this,this.onGetBtn),this.closBtn.on(Laya.Event.CLICK,this,this.onCloseBtn),LED.on(l_r.RANK_UPDATE,this,this.updateView),LED.on(l_r.MINE_ROLE_INFO,this,this.updateView),this.updateView(),RankModel.instance.reqGetRank(RankType.MinePersonal,1),RankModel.instance.reqGetRank(RankType.MineGuild,1),MineModel.instance.reqMineRole()},b_s.close=function(){Oqxt(UIM,b_s)},b_s.prototype.onSelectMenuTap=function(e){-1!=e&&this.updateView()},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemoved),p_g.nameLab.text="",p_g.indexLab.text="",p_g.powerLab.text="",p_g.menuTap.selectedIndex=0,p_g.tipBox.visible=!1,p_g.menuTap.selectHandler=Laya.Handler.create(p_g,p_g.onSelectMenuTap,null,!1),p_g.personList.array=[],p_g.personList.itemRender=e.LimitActivityRankItem,p_g.personList.repeatX=1,p_g.personList.repeatY=10,p_g.personList.spaceY=0,p_g.personList.vScrollBarSkin="",p_g.personList.scrollBar.elasticBackTime=100,p_g.personList.scrollBar.elasticDistance=200,p_g.personList.renderHandler=Laya.Handler.create(p_g,p_g.onItemRender,null,!1),p_g.guildList.array=[],p_g.guildList.itemRender=e.LimitActivityRankItem,p_g.guildList.repeatX=1,p_g.guildList.repeatY=10,p_g.guildList.spaceY=0,p_g.guildList.vScrollBarSkin="",p_g.guildList.scrollBar.elasticBackTime=100,p_g.guildList.scrollBar.elasticDistance=200,p_g.guildList.renderHandler=Laya.Handler.create(p_g,p_g.onItemRender,null,!1),p_g}e.MineRank=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.mine.mineRemindRobUI,__extends(b_s,p_l),b_s.open=function(){Uxes(UIM,b_s)},b_s.prototype.updateView=function(){for(var e,p_l=MineModel.instance.getMineRecords(),p_g=[],d_u=p_l.length,b_e=0;b_e<d_u;b_e++)e=p_l[b_e],MineModel.instance.loadRecord(e)||(MineModel.instance.saveRecord(e),p_g.push(e));0==(this.list.array=p_g).length&&b_s.close()},b_s.prototype.onClick=function(e){Keqp(e,MineModel,b_s)},b_s.prototype.onRemoved=function(){Ayre(this,Laya)},b_s.prototype.onAdded=function(){Whdu(this,Laya)},b_s.close=function(){Smwq(UIM,b_s)},b_s.prototype.onItemRender=function(e,p_l){var p_g=e.getChildByName("t_time"),b_s=e.getChildByName("t_desc"),d_u=e.getChildByName("t_res"),b_e=e.getChildByName("t_lost"),d_m=e.dataSource;p_g.text=Utils.formatTimeStr4(d_m.getTime(),!1);var d_w=1==d_m.mode?(j_x("712_1835")):(j_x("2292_943"));b_s.text=(j_x("56_1012"))+d_m.getFname()+(j_x(2046))+d_w,d_u.text=0==d_m.getResult()?(j_x("1045_1516")):(j_x("1011_1061"));var f_t=d_m.num?d_m.num:0;b_e.text=""+f_t},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.list.array=null,e.list.renderHandler=Laya.Handler.create(e,e.onItemRender,null,!1),e}e.MineRecordPanel=p_g}(UI=UI||{});var n_u=function(e){function p_l(){return e.call(this)||this}return __extends(p_l,e),p_l.prototype.setMineRecordVo=function(e){Yiag(e,Utils,this)},p_l.prototype.getGuildName=function(){return Ijlk(this)},p_l.prototype.getFhp=function(){return Wegc(this)},p_l.prototype.getGuildId=function(){return Uymo(this)},p_l.prototype.getSoul=function(){return Qjid(this)},p_l.prototype.getFid=function(){return Wuwu(this)},p_l.prototype.getResult=function(){return Iveb(this)},p_l.prototype.getEntryId=function(){return Mnuw(this)},p_l.prototype.getTime=function(){return Owea(this)},p_l.prototype.getMineId=function(){return Sdrn(this)},p_l.prototype.getFhpUpper=function(){return Gnsm(this)},p_l.prototype.getType=function(){return Mngu(this)},p_l.prototype.getFname=function(){return Cyxl(this)},p_l.prototype.getHeadIcon=function(){return Cymv(this)},p_l}(x_base_record);!function(e){var p_l,p_g=(p_l=ui.window.mine.mineRemindUI,__extends(b_s,p_l),b_s.open=function(e){Ajzf(e,UIM,b_s)},b_s.prototype.onRemoved=function(){Cpyu(this,Laya)},b_s.close=function(){Mxks(UIM,b_s)},b_s.prototype.onClose=function(){Cyze(b_s)},b_s.prototype.onAdded=function(){Khtc(this,Laya)},b_s.prototype.onClick=function(e){switch(e.currentTarget){case this.btnClose:this.onClose();break;case this.btnGo:this.onGo()}},b_s.prototype.onGo=function(){this._vo&&(e.MineView.open(this._id),this.onClose())},b_s.prototype.updateView=function(){var e=this.dataSource;this._vo=e;try{var p_l=JSON.parse(e.msgParams),p_g=p_l[1];this.txtPlayerName.text=p_l[0][1],this.txtName.text=p_g,this._id=MineModel.instance.getMineIdByName(p_g);var b_s=100,d_u=Config.minewar_mines[this._id];d_u&&(b_s=d_u.breakTime);var b_e=Math.floor(e.time+b_s-SyncTime.serverTime/1e3);this.txtTime.text=Utils.formatTimeStr2(b_e)+(j_x("1865_1488_2102")+j_x("1730_2260"))}catch(p_l){console.log((j_x("1865_1852_1860")+j_x("2046_507_2348")+j_x("1896_271")),e.msgParams)}},b_s);function b_s(){var e=p_l.call(this)||this;return e._id=2,e.on(Laya.Event.ADDED,e,e.onAdded),e}e.MineRemind=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.mine.mineRemindRobUI,__extends(b_s,p_l),b_s.open=function(e){Ybbn(e,UIM,b_s)},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":b_s.close()}},b_s.prototype.updateView=function(){var e=this.dataSource;if(e){var p_l=[];for(var p_g in e.records)0==e.records[p_g].readed&&p_l.push(e.records[p_g]);p_l.sort((function(e,p_l){return p_l.time-e.time})),0==(this.list.array=p_l).length&&b_s.close()}},b_s.prototype.onRemoved=function(){Ipbi(this,Laya)},b_s.close=function(){Oapi(UIM,b_s)},b_s.prototype.onAdded=function(){Ikbm(this,Laya)},b_s.prototype.onItemRender=function(e,p_l){var p_g=e.getChildByName("t_time"),b_s=e.getChildByName("t_desc"),d_u=e.getChildByName("t_res"),b_e=e.getChildByName("t_lost"),d_m=e.dataSource;p_g.text=Utils.formatTimeStr4(d_m.time,!1),b_s.text=(j_x("56_1012"))+d_m.name+(j_x("2046_2292_943")),d_u.text=0==d_m.result?(j_x("1045_1516")):(j_x("1011_1061")),b_e.text=""+d_m.num},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.list.array=null,e.list.renderHandler=Laya.Handler.create(e,e.onItemRender,null,!1),e}e.MineRemindRob=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.mine.mineRevenueInfoUI,__extends(b_s,p_l),b_s.prototype.init=function(){Awsa(this)},b_s.prototype.update=function(e){var p_l=Config.minewar_mines[e];if(p_l){this.curCityLabel.text=p_l.name;var p_g=LgcM.ins.heroVo,b_s=Config.minewar_box[p_g.stateLv].limit,d_u=(Config.global[GlobalDefine.minewar_red_tips].i_info,MineModel.instance.getMineCurGoldNum());d_u=b_s<d_u?b_s:d_u;var b_e=MineModel.instance.getMineVo(e),d_m=3600/Config.global[GlobalDefine.minewar_box_timer].i_info,d_w=Config.minewar_mines[e].gold*d_m,f_t=Config.minewar_mines[e].addRate/100,v_z=0;b_e&&b_e.getGuildName()==LgcM.ins.heroVo.guildName&&(v_z+=f_t),d_w=(1+v_z/100)*d_w*24;var d_h=MineModel.instance.mineStage,r_t=1!=e?Config.minewar_mines[e].robRate[0]/1e4*b_s:0;switch(this.t_protect.visible=1!=d_h[0]&&2!=d_h[0]&&1!=e,this.t_protect.text=("("+j_x("405_1619_1573")+j_x(2038))+r_t+(j_x("1263_869")+")"),this.t_total.text=1==d_h[0]||2==d_h[0]?MineModel.instance.point+(j_x("514_2224")):d_u+(j_x("1263_869")),this.t_cdTitle.visible=this.t_cdCount.visible=!1,d_h[0]){case 0:case 4:this.t_cdTitle.text=(j_x("2260_1174_2075")+""+j_x("1163_87_1177")+j_x("2292_943")),this.t_cdCount.text="";break;case 1:this.t_cdTitle.text=(j_x("554_943_2075")+"");break;case 2:this.t_cdTitle.text=(j_x("143_1785_554")+j_x("943_2075")+""),this.onStageCount(d_h[1]);break;case 3:this.t_cdTitle.text=(j_x("1189_383_2075")+""),this.onStageCount(d_h[1])}}},b_s.prototype.onStageCount=function(e){Laya.timer.clear(this,this.onStageCount),0<=e?(this.t_cdCount.text=Utils.formatTimeStr(e),this.displayedInStage&&Laya.timer.once(1e3,this,this.onStageCount,[e-1])):(MineModel.instance.reqMineRole(),MineModel.instance.reqMineList())},b_s.prototype.onGetBtn=function(){MineModel.instance.getMineCurGoldNum()<=0?b_p.broadcastNotice((j_x("1971_1896_1263")+j_x("869_1163_192")+j_x("1628_2111"))):(MineModel.instance.reqMineGetBox(),MineModel.instance.reqMineRole())},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.MineRevenueInfo=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.mine.mine_rewardUI,__extends(b_s,p_l),b_s.prototype.updateView=function(){var p_l,p_g,b_s;switch(this.menuTap.selectedIndex){case 0:this.personRankBtn.label=(j_x("844_455_1077")+j_x(2263)),b_s=RankType.MinePersonal,p_g=(p_l=RankModel.instance.getRankDataByType(b_s))?p_l.getOwnIndex():0,this.myIndexLab.text=0<p_g&&p_g<100?p_g.toString():"1000+";break;case 1:this.personRankBtn.label=(j_x("721_695_1077")+j_x(2263)),b_s=RankType.MineGuild,p_g=(p_l=RankModel.instance.getRankDataByType(b_s))?p_l.getOwnIndex():0,this.myIndexLab.text=0!=p_g&&GuildModel.instance.hasGuild?p_g.toString():(j_x(814))}var d_u=[];for(var b_e in Config.activity_minewar_rankReward){var d_m=Config.activity_minewar_rankReward[b_e];d_m.rankType==b_s&&d_u.push(d_m)}this.panel.removeChildren();for(var d_w=0,f_t=0;f_t<d_u.length;++f_t){var v_z=0==this.menuTap.selectedIndex?new e.LimitActivityPersonalRankAwardItem:new e.LimitActivityGuildAwardItem;v_z.dataSource=d_u[f_t],v_z.y=d_w,d_w+=v_z.height,this.panel.addChild(v_z)}this.panel.vScrollBar.max=d_w},b_s.prototype.onAdded=function(){Cwme(this,Laya,LED,l_r)},b_s.prototype.onRemoved=function(){Eipz(this,Laya,LED,l_r)},b_s.close=function(){Iojh(UIM,b_s)},b_s.prototype.onCloseBtn=function(){Qjmj(b_s)},b_s.open=function(){UIM.open(b_s,["mineWar.atlas"],null,!1,!1,!0,!0,{container:"win"})},b_s.prototype.onPersonalRankBtn=function(){Mufc(e,this,b_s)},b_s.prototype.onSelectMenuTap=function(e){-1!=e&&this.updateView()},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.myIndexLab.text="",e.countDownLab.text="",e.menuTap.selectedIndex=-1,e.menuTap.selectHandler=Laya.Handler.create(e,e.onSelectMenuTap,null,!1),e.panel.vScrollBarSkin="",e.panel.vScrollBar.visible=!1,e.panel.vScrollBar.elasticBackTime=100,e.panel.vScrollBar.elasticDistance=200,e}e.MineReward=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.mine.mineRobNoticeViewUI,__extends(b_s,p_l),b_s.prototype.init=function(){Qgzh(z_j,this,Laya)},b_s.prototype.onMove=function(){this.checkNotice.selected&&AlertUtil.saveKey(MineConstant.alert_rob),this._fun&&this._fun.run(),b_s.close()},b_s.prototype.onAdded=function(){if(this.btnSure.on(Laya.Event.CLICK,this,this.onClick),this.btnClose.on(Laya.Event.CLICK,this,this.onClick),this.dataSource){this._fun=this.dataSource.fun;var e,p_l,p_g=this.dataSource.id,b_s=LgcM.ins.heroVo.stateLv,d_u=Config.minewar_mines[p_g],b_e=Config.minewar_box[b_s],d_m=1,d_w=MineModel.instance.getCurMineDetail();if(d_w&&((e=1==d_w.mineVo.isMono)||(p_l=""!=d_w.mineVo.guildName)),d_u&&b_e){var f_t=3600*d_u.gold/Config.global[GlobalDefine.minewar_box_timer].i_info;e?f_t*=2:p_l&&(f_t+=.5*f_t);var v_z=b_e.limit*(d_u.robRate[0]/1e4);d_m=Math.ceil(v_z/f_t)}this.txtMsg.innerHTML=this._msg.replace("N",""+d_m),this.txtMsg.y=this._ty+(this.txtMsg.height-this.txtMsg.contextHeight>>1)}},b_s.prototype.onRemove=function(){Ueoy(this,Laya)},b_s.open=function(e){void 0===e&&(e=null),UIM.open(b_s,null,e,!1,!1)},b_s.prototype.onClick=function(e){switch(e.currentTarget){case this.btnClose:b_s.close();break;case this.btnSure:this.onMove()}},b_s.close=function(){Imuy(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e._msg=(j_x("1067_189_1300")+j_x("33_953_2292")+j_x("943_34")+"<br/><span color='#c92828'>N"+j_x("1747_1702_1865")+j_x("1163_1629_2292")+j_x(943)+"</span><br/>"+j_x("1777_1067_189")+j_x("581_1702_1573")+j_x("2111_1263_869")+"<br/>"),e._ty=0,e.init(),e}e.MineRobNoticeView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.mine.mineMainViewUI,__extends(b_s,p_l),b_s.prototype.init=function(){this.roleModel=new n_k,this.RoleHeadInfoSprite=new Laya.Sprite,this.RoleHeadInfoSprite.size(100,100),this.goldSp=new Laya.Sprite,this.RoleHeadInfoSprite.addChild(this.goldSp),Resource.ResManager.Instance.getImg("res/ui/mine/mine_yuanbao.png",this.goldSp),this.roleModel.AddRoleHeadSprite(this.RoleHeadInfoSprite),this.freeIcon=new Laya.Image("res/ui/mine/xianzhi.png"),this.freeIcon.pos(10,35),this.RoleHeadInfoSprite.addChild(this.freeIcon),this.coinLab=new Laya.Text,this.goldSp.addChild(this.coinLab),this.coinLab.fontSize=24,this.coinLab.color="#d8dcec",this.coinLab.stroke=3,this.coinLab.strokeColor="#0d0d0d",this.coinLab.text="",this.coinLab.align="right",this.coinLab.pos(55,75),this.roleSp.addChild(this.roleModel),this.on(Laya.Event.ADDED,this,this.onAdded),this.on(Laya.Event.REMOVED,this,this.onRemove),this.ranklist.array=null,this.ranklist.renderHandler=Laya.Handler.create(this,this.rankItemRender,null,!1),this._isRankOpen=!1},b_s.prototype.onCheckPosBtn=function(){this.roleSp&&this.bgMoveToTarget(this.roleSp.y)},b_s.prototype.updateRecord=function(){Gylt(MineModel,e)},b_s.prototype.startMovein=function(){if(this.clearTween(),this.onCheckPosBtn(),this.IsOpenHeadSprite(!1),this.targetPosList&&0<this.targetPosList.length){var e=this.targetPosList.shift(),p_l=Engine2d.MapUtils.calcForwardDirection(this.roleSp.x,this.roleSp.y,e.x,e.y);p_l=1===p_l||7===p_l?0:3===p_l||5===p_l?4:p_l,this.roleModel.setAction(Engine2d.StandardActions.SA_RUN,p_l,!0),this.roleModel.SetTopPos(this.RoleHeadInfoSprite);var p_g=Engine2d.MapUtils.calcDistance(this.roleSp.x,this.roleSp.y,e.x,e.y)/Config.global[GlobalDefine.minewar_move_speed].i_info*1e3;this._roleTween=Laya.Tween.to(this.roleSp,{f_u:e.x,j_l:e.y},p_g,null,Laya.Handler.create(this,this.startMovein,null))}else this.onMoveInComplete()},b_s.prototype.onRobBtn=function(){var p_l=new MineBuyVo;p_l.setMineBuyData(92,1,MineBuyType.rob,null),e.MineBuy.open(p_l)},b_s.prototype.onHistoryBtn=function(){Wgfx(e)},b_s.prototype.clearTween=function(){this._roleTween&&(this._roleTween.clear(),this._roleTween=null),this._bgTween&&(this._bgTween.clear(),this._bgTween=null)},b_s.prototype.onRewardBtn=function(){Mtym(e)},b_s.prototype.moveinToMainCity=function(){this.onCheckPosBtn();var e=new Laya.Point(400,2131),p_l=Engine2d.MapUtils.calcForwardDirection(this.roleSp.x,this.roleSp.y,e.x,e.y);p_l=1===p_l||7===p_l?0:3===p_l||5===p_l?4:p_l,this.roleModel.setAction(Engine2d.StandardActions.SA_RUN,p_l,!0),this.roleModel.SetTopPos(this.RoleHeadInfoSprite);var p_g=Engine2d.MapUtils.calcDistance(this.roleSp.x,this.roleSp.y,e.x,e.y)/Config.global[GlobalDefine.minewar_move_speed].i_info*1e3;Laya.Tween.to(this.roleSp,{f_u:e.x,j_l:e.y},p_g,null,Laya.Handler.create(this,this.onMoveInComplete,null)),b_p.broadcastNotice((j_x("328_2456_402")+j_x(2142)),3,Utils.Color.NAME_GREEN)},b_s.prototype.setFightState=function(e){var p_l=e.getMineId(),p_g=Config.minewar_mines[p_l],b_s=SyncTime.serverTime,d_u=this.formatTimeStr(b_s/1e3);if(1==p_g.type)return!1;var b_e=new Date(d_u).setHours(10,0,0),d_m=new Date(d_u).setHours(21,0,0);return b_e<=b_s&&b_s<=d_m},b_s.prototype.updateMineList=function(){Epea(this)},b_s.prototype.onAdded=function(){this._isOnAdd=!0,this.RoleHeadInfoSprite.on(Laya.Event.CLICK,this,this.onClickRoleHeadSprirte),this.closeBtn.on(Laya.Event.CLICK,this,this.onBack),this.backBtn.on(Laya.UIEvent.CLICK,this,this.onBack),this.historyBtn.on(Laya.Event.CLICK,this,this.onHistoryBtn),this.helpBtn.on(Laya.Event.CLICK,this,this.onHelpBtn),this.b_rob.on(Laya.Event.CLICK,this,this.onRobBtn),this.b_rank.on(Laya.Event.CLICK,this,this.onRankBtn),this.b_reward.on(Laya.Event.CLICK,this,this.onRewardBtn),this.b_shop.on(Laya.Event.CLICK,this,this.onShopBtn),this.b_rankOpen.on(Laya.Event.CLICK,this,this.onRankOpenBtn),LED.on(l_r.MINE_LIST,this,this.updateMineList),LED.on(l_r.MINE_DETAIL,this,this.updateDetail),LED.on(l_r.GUILD_LIST_UPDATE,this,this.updateView),LED.on(l_r.MINE_ROLE_INFO,this,this.updateMineRoleInfo),LED.on(l_r.MINE_MOVE,this,this.onMoveIn),LED.on(l_r.MINE_EXCHANGE,this,this.onExchange),LED.on(l_r.SHOP_DATA_UPDATE,this,this.onShopDataUpdate),LED.on(l_r.MINE_GET_BOX,this,this.onGetBox),LED.on(l_r.RANK_UPDATE,this,this.onRankUpdate),LED.on(l_r.MINE_RECORDS,this,this.updateRecord),MineModel.instance.isHasRecord=!1,MineModel.instance.reqMineRole(),MineModel.instance.reqMineList(),MineModel.instance.reqMineRecord(MineConstant.mode_attack,MineConstant.robDef_defense),MineModel.instance.reqMineRecord(MineConstant.mode_rob,MineConstant.robDef_defense),DB.instance.query(c2w_guild_list,new c2w_guild_list),UIM.instance.getMainLetUI().hideMineTip(),this._openId=this.dataSource},b_s.prototype.onRankOpenBtn=function(){Yjle(this)},b_s.prototype.IsOpenHeadSprite=function(e){(this.goldSp.visible=e)?r_n.instance.floatEffect(this.RoleHeadInfoSprite,this.RoleHeadInfoSprite.y,.5,8):MineModel.instance.isFree||Laya.Tween.clearTween(this.RoleHeadInfoSprite)},b_s.prototype.rankItemRender=function(e,p_l){var p_g=e.getChildByName("t_name"),b_s=e.getChildByName("t_rank"),d_u=e.getChildByName("t_point"),b_e=e.dataSource;p_g.text=b_e.guildName,b_s.text=b_e.rank.toString(),d_u.text=b_e.value.toString()},b_s.prototype.onGetBox=function(e){Sphq(e,MineModel)},b_s.prototype.onMouseDown=function(e){e.target==this.bgImg&&(null==this.starPos&&(this.starPos=new Laya.Point),this.starPos.y=Laya.stage.mouseY)},b_s.prototype.onRankBtn=function(){Gcmo(e)},b_s.prototype.setCitys=function(){Afcn(MineModel,this)},b_s.close=function(){Yqnd(UIM,b_s)},b_s.prototype.onRankUpdate=function(e){e.type==RankType.MineGuild&&(this.ranklist.array=e.item);var p_l=MineModel.instance.mineStage;1==p_l[0]||2==p_l[0]||3==p_l[0]||e.type!=RankType.MinePersonal&&e.type!=RankType.MineGuild||this.updateRed()},b_s.prototype.onHelpBtn=function(){Irot(e)},b_s.prototype.bgMoveToTarget=function(e){},b_s.prototype.formatTimeStr=function(e,p_l){if(void 0===p_l&&(p_l=!0),0==e)return"";var p_g=new Date;return p_g.setTime(1e3*e),((p_l?p_g.getFullYear()+"-":"")+(p_g.getMonth()+1)+"-"+p_g.getDate()).replace(/\b(\d)\b/g,"0$1")},b_s.prototype.updateMineRoleInfo=function(){Config.global[GlobalDefine.minewar_buy_vit].i_info,MineModel.instance.getMineVit(),this.attackReamPanel.update(MineModel.instance.getMineAttackReam(),MineBuyType.attackReam),this.rakanPanel.update(MineModel.instance.getMineHp(),MineBuyType.soul),this.vitPanel.update(MineModel.instance.getMineVit(),MineBuyType.vit),this.t_robCount.text=MineModel.instance.robbery+"/"+Config.global[GlobalDefine.minewar_rob_max].i_info;var e=MineModel.instance.getMineCurIndex(),p_l=MineModel.instance.getMineCurGoldNum();this.revenueInfoPanel.update(e);var p_g=this["city"+e],b_s=LgcM.ins.heroVo;if(this.roleModel.changRoleSkin(b_s,!1,!1),p_g){var d_u=void 0;d_u=6==e?p_g.x-p_g.width/2-50:p_g.width+p_g.x+30,e==MineModel.MainCityId&&(d_u=400),this.roleSp.x=d_u,this.roleSp.y=p_g.y+p_g.height/2-50}this.roleModel.setAction(Engine2d.StandardActions.SA_STAND,4,!0),this.roleModel.SetTopPos(this.RoleHeadInfoSprite),0<p_l?(this.IsOpenHeadSprite(!0),this.coinLab.text=p_l.toString()):this.IsOpenHeadSprite(!1),this._isOnAdd&&(this.bgMoveToTarget(this.roleSp.y),this._isOnAdd=!1);var b_e=MineModel.instance.mineStage;this.b_rankOpen.visible&&!this._isRankOpen||(this._isRankOpen=1==b_e[0]||2==b_e[0]||3==b_e[0]),this.updateRank(),this.updateRed(),this.freeIcon.visible=MineModel.instance.isFree},b_s.prototype.updateRed=function(){Micz(this,MineModel)},b_s.prototype.onRemove=function(){this.closeBtn.off(Laya.Event.CLICK,this,this.onBack),this.backBtn.off(Laya.UIEvent.CLICK,this,this.onBack),this.historyBtn.off(Laya.Event.CLICK,this,this.onHistoryBtn),this.helpBtn.off(Laya.Event.CLICK,this,this.onHelpBtn),this.b_rob.off(Laya.Event.CLICK,this,this.onRobBtn),this.b_rank.off(Laya.Event.CLICK,this,this.onRankBtn),this.b_reward.off(Laya.Event.CLICK,this,this.onRewardBtn),this.b_shop.off(Laya.Event.CLICK,this,this.onShopBtn),this.b_rankOpen.off(Laya.Event.CLICK,this,this.onRankOpenBtn),LED.off(l_r.MINE_LIST,this,this.updateMineList),LED.off(l_r.MINE_DETAIL,this,this.updateDetail),LED.off(l_r.GUILD_LIST_UPDATE,this,this.updateView),LED.off(l_r.MINE_ROLE_INFO,this,this.updateMineRoleInfo),LED.off(l_r.MINE_MOVE,this,this.onMoveIn),LED.off(l_r.MINE_EXCHANGE,this,this.onExchange),LED.off(l_r.SHOP_DATA_UPDATE,this,this.onShopDataUpdate),LED.off(l_r.MINE_GET_BOX,this,this.onGetBox),LED.off(l_r.RANK_UPDATE,this,this.onRankUpdate),this.clearTween(),this.IsOpenHeadSprite(!1),this._isOnAdd=!1,this.roleModel&&this.roleModel.clearRes(),Laya.timer.clear(this,this.updateRank)},b_s.prototype.onMineFightResult=function(p_l){MineModel.instance.reqMineRole(),MineModel.instance.reqMineList();var p_g=UIM.instance.getWin(e.MineAttackResult);p_g&&p_g.update(p_l),e.MineAttackResult.open(p_l),MineModel.instance.getMineCurIndex()&&MineModel.instance.reqMineDetail(MineModel.instance.getMineCurIndex())},b_s.prototype.autoOpneDetail=function(){if(this._openId){var p_l=MineModel.instance.getMineVo(this._openId);p_l&&(MineModel.instance.getCurMineDetail()?(e.MineDetail.open(p_l),this._openId=null):MineModel.instance.reqMineDetail(p_l.getMineId()))}},b_s.prototype.onMouseOut=function(e){Ceio(e,this)},b_s.prototype.updateView=function(){this.revenueInfoPanel.update(MineModel.instance.getMineCurIndex()),this.city1.setMainMineCity();for(var e=0,p_l=MineModel.instance.getMineList();e<p_l.length;e++){var p_g=p_l[e],b_s=this["city"+p_g.getMineId()];b_s.setMineCity(p_g),b_s.fightEft.visible=this.setFightState(p_g)}this.updateRank(),this.updateRed()},b_s.prototype.onClickRoleHeadSprirte=function(){var e=MineModel.instance.getMineCurGoldNum();Laya.Tween.from(this.RoleHeadInfoSprite,{scaleX:1.2,scaleY:1.2},200),e<=0?b_p.broadcastNotice((j_x("1971_1896_1263")+j_x("869_1163_192")+j_x("1628_2111"))):(MineModel.instance.reqMineGetBox(),MineModel.instance.reqMineRole())},b_s.prototype.updateRank=function(){Laya.timer.clear(this,this.updateRank);var e=MineModel.instance.mineStage;this.b_rankOpen.visible=1==e[0]||2==e[0]||3==e[0],this.b_rankOpen.visible||(this._isRankOpen=!1),this.rankBox.visible=this._isRankOpen,this._isRankOpen&&(RankModel.instance.reqGetRank(RankType.MineGuild,1),Laya.timer.once(1e4,this,this.updateRank))},b_s.prototype.getNextBgPosY=function(e){var p_l=this.areaPanel.height/2-e;return 0<p_l&&(p_l=0),0<p_l&&(p_l=0),p_l<-1484&&(p_l=-1484),p_l},b_s.prototype.onShopDataUpdate=function(e){e&&20009==e.id&&this.attackReamPanel.update(MineModel.instance.getMineAttackReam(),MineBuyType.attackReam)},b_s.prototype.onBack=function(){Qluz(b_s)},b_s.prototype.onMouseMove=function(e){if(null!=this.bgImg&&null!=this.starPos){this.bgImg.y=this.bgImg.y+(Laya.stage.mouseY-this.starPos.y),this.starPos.y=Laya.stage.mouseY;var p_l=this.bgImg.y;0<p_l&&(p_l=0),p_l<-1484&&(p_l=-1484),this.bgImg.y=p_l}},b_s.prototype.onMouseUp=function(e){Yspo(e,this)},b_s.prototype.onMoveIn=function(p_l){if(null!=p_l)if((this.movePb=p_l).id!=MineModel.MainCityId){this.targetPosList=[];var p_g=MineModel.instance.getMineCurIndex(),b_s=MineModel.instance.getNearPosPaths(p_g,p_l.id);if(b_s&&0<b_s.length){for(var d_u=0,b_e=b_s;d_u<b_e.length;d_u++){var d_m,d_w=b_e[d_u],f_t=this["city"+d_w];d_m=6==d_w?f_t.x-f_t.width/2:f_t.x+f_t.width;var v_z=f_t.y+f_t.height/2,d_h=new Laya.Point(d_m,v_z);this.targetPosList.push(d_h)}this.startMovein(),MineModel.instance.reqMineList(),Laya.timer.once(500,this,(function(){if(MineModel.instance.isOccupySuccess()){var p_g=MineModel.instance.getMineVo(p_l.id);e.MineOccupySuccess.open(p_g)}}))}}else this.moveinToMainCity()},b_s.open=function(e){void 0===e&&(e=null),UIM.open(b_s,["mine.atlas"],e)},b_s.prototype.onExchange=function(e){Wecf(e,MineModel)},b_s.prototype.onMoveInComplete=function(){var p_l=this.movePb;this.IsOpenHeadSprite(!0),this.roleModel.setAction(Engine2d.StandardActions.SA_STAND,4,!0),this.roleModel.SetTopPos(this.RoleHeadInfoSprite);var p_g=p_l.id;if(p_g!=MineModel.MainCityId){var b_s=MineModel.instance.getMineVo(p_g);MineModel.instance.reqMineRole(),MineModel.instance.reqMineDetail(p_g),b_p.broadcastNotice((j_x("328_2456_402")+j_x(2142)),3,Utils.Color.NAME_GREEN),e.MineDetail.open(b_s)}else MineModel.instance.reqMineRole()},b_s.prototype.updateDetail=function(){Khms(this)},b_s.prototype.onShopBtn=function(){Uifl(e)},b_s);function b_s(){var e=p_l.call(this)||this;return e.targetPosList=[],e.init(),e}e.MineView=p_g}(UI=UI||{});var d_i=function(e){function p_l(){return e.call(this)||this}return __extends(p_l,e),p_l.prototype.setMineVo=function(e){Clrg(e,Utils,this)},p_l.prototype.getMineId=function(){return Uodj(this)},p_l.prototype.getMinePlayerNum=function(){return Ydkq(this)},p_l.prototype.getGuildName=function(){return Gqer(this)},Object.defineProperty(p_l.prototype,"mineCnf",{get:function(){return Config.minewar_mines[this.id]},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"type",{get:function(){return this.mineCnf?this.mineCnf.type:1},enumerable:!0,configurable:!0}),p_l}(x_minewar_base_mine);!function(e){var p_l,p_g=(p_l=ui.window.mineActivity.mineAct_holeItemUI,__extends(b_s,p_l),b_s);function b_s(){return p_l.call(this)||this}e.MineActHoleItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.minewar_icon_viewUI,__extends(b_s,p_l),b_s);function b_s(){return p_l.call(this)||this}e.MineActIcon=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.clone.cloneLvupSuccPanelUI,__extends(b_s,p_l),b_s.open=function(e,p_l){UIM.open(b_s,null,{bodyId:e,pos:p_l},!1,!1,!0)},b_s.close=function(){Qpir(UIM,b_s)},b_s.prototype.onRemove=function(){Ilrl(Laya,this)},b_s.prototype.onStageClick=function(e){var p_l=e.target;p_l&&this.contains(p_l)||this.closeSelf()},b_s.prototype.updateView=function(){Resource.SoundManager.instance.playSoundById(7,!1);var e=this.dataSource.bodyId,p_l=(MirrorSelfModel.ins,Config.clone_clone[e]);if(p_l){var p_g=Config.clone_clone[e+1];this.bodyName.text=p_l.name;var b_s=Config.skill_skill[p_l.superSkill];this.iconStr=b_s.icon,this.cloneName.text=p_g?p_g.name:(j_x("1514_1855_2224")+j_x("1920_1300_1048")+j_x(1745));var d_u=[];d_u[2]=MirrorSelfModel.ins.getSelfProp(e),TalismanModel.instance.setProp(this.prop,d_u,Utils.setSpace(2),["#a9b8de","#71de66"],2),this.skillName.text=b_s.name,this.skillDesc.innerHTML=SkillModel.instance.getSkillDesc(p_l.superSkill,1),this.skillIcon.skin=Resource.ResUrl.getIconUrl(b_s.icon)}},b_s.prototype.onAdded=function(){Ilmh(this,Laya)},b_s.prototype.closeSelf=function(){Olxt(this,b_s)},b_s.prototype.closeSkillAin=function(){var e=new Laya.Point;e=this.skillBox.localToGlobal(e),r_n.instance.flyToBagEffect(this.iconStr,e,this.dataSource.pos,null)},b_s.prototype.onDelay=function(){Ciyr(Laya,this)},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":this.closeSelf()}},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),z_j.setHtml(e.prop,22,"#a9b8de",10,"left"),z_j.setHtml(e.skillDesc,22,"#71de66",10,"left"),e}e.MirrorSelfActPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.clone.cloneHelpUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Avni(this,Laya)},b_s.open=function(){Wvgt(UIM,b_s)},b_s.prototype.onRemove=function(){Ocat(this,Laya)},b_s.close=function(){Ybdf(UIM,b_s)},b_s.prototype.onCloseBtn=function(){Qbkk(b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.MirrorSelfHelpPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.clone.clonePanelUI,__extends(b_s,p_l),b_s.prototype.init=function(){this._roleModel=new n_k,this._roleModel.ShowRid=!0,this.cloneModel.addChild(this._roleModel),this._heroVo=new Engine2d.PlayerVo,this._index=0,this._currentBody=0,this.on(Laya.Event.ADDED,this,this.onAdded),this.on(Laya.Event.REMOVED,this,this.onRemoved),this.cloneList.itemRender=e.MirrorSelfPartItem,this.clearImgs={},this._skillBox=new e.ItemBox,this.bigSkill.addChild(this._skillBox),this.bigSkill.setChildIndex(this._skillBox,0),z_j.setList(this.cloneList,this,this.renderBodyList,this.onListSelect),z_j.setList(this.equipList,this,this.renderItemBox),z_j.setListScroll(this.cloneList,!1)},b_s.prototype.onClickEquip=function(p_l){var p_g=p_l.target.dataSource;p_g&&(p_g.vo?e.MirrorSelfSwapPanel.open(p_g.vo,p_g.part,this._currentBody):b_p.broadcastNotice((j_x("1048_1745_2224")+j_x("1920_1865_1163")+j_x("2407_1086"))))},b_s.prototype.renderItemBox=function(p_l,p_g){var b_s=p_l.getChildByName("itemBox"),d_u=p_l.getChildByName("name"),b_e=(p_l.getChildByName("starBox"),p_l.getChildByName("partClip"));b_s||(b_s=new e.MirrorSelfPartItem,p_l.addChild(b_s),p_l.setChildIndex(b_s,0),b_s.name="itemBox");var d_m=p_l.dataSource,d_w=MirrorSelfModel.ins,f_t=d_w.getSelfInfoMap[this._currentBody];b_s.setClick(this,this.onClickEquip);var v_z=null,d_h=null;f_t&&(d_h=f_t.partList[d_m]),b_s.dataSource=d_h,b_e.index=d_m-1,d_h&&d_h.isHaveValue()?(v_z=d_w.getMCfgByCfg(d_h.id,d_m),d_u.visible=!0,b_e.visible=!1,d_u.text=v_z.name):(d_u.visible=!1,b_e.visible=!0),b_s.updateView(v_z,!0,!0,!1),b_s.setRedPoint(d_w.onePartRed(d_h,this._currentBody))},b_s.prototype.showActivePanel=function(){if(this.cloneList.selectedItem){var p_l=new Laya.Point;p_l=this.bigSkill.localToGlobal(p_l),e.MirrorSelfActPanel.open(this._currentBody,p_l),this.updateView()}},b_s.prototype.showUpGradeBox=function(e){this.upGradeBox.visible=e!=UpState.NOT_UP&&e!=UpState.NOT_ACTIVTED,this.maxGradeLab.visible=e==UpState.MAX_UP,this.upGradeBtn.visible=e!=UpState.MAX_UP,this.starRp.visible=e==UpState.CAN_UP},b_s.prototype.updataShowBox=function(e){void 0===e&&(e=!1);var p_l=MirrorSelfModel.ins,p_g=p_l.getSelfInfoMap[this._currentBody],b_s=p_g&&p_g.isActive?p_l.isCanUpGrade(p_g):UpState.NOT_ACTIVTED;if(this.showUpGradeBox(b_s),b_s=p_g&&p_g.isActive?p_l.isCanUpLv(p_g):UpState.NOT_ACTIVTED,this.showUpLvBox(b_s),p_g){var d_u=p_l.getGradeCfgById(p_g.id,p_g.grade),b_e=p_l.getGradeCfgById(p_g.id,p_g.grade+1),d_m=p_l.getLvCfgById(p_g.id,p_g.lv);this.bodySkillDesc.text=d_m.skillDesc,this.bodyPropDesc.text=d_m.propDesc,this.upGradeBtn.label=b_e&&b_e.gradeUpLimit?(j_x("1955_2213")):(j_x("371_1148")),this.bodyName.text=d_u.gradeName+"Lv."+p_g.lv,TalismanModel.instance.changeActStar(this.starBox,p_g.grade,4),e&&this.cloneList.refresh()}this.updateFight()},b_s.prototype.renderSkillBox=function(e){var p_l=this.cloneList.selectedItem;if(p_l){var p_g=Config.skill_skill[p_l.superSkill];this._skillBox.isShowNum=!1,this._skillBox.isShowName=!1,this._skillBox.setItemData(p_g,ItemBoxDefine.SKILL_CONFIG),this.skillName.text=p_g.name,this.shade.visible=e}},b_s.prototype.onListSelect=function(e){if(-1!=e){var p_l=this.cloneList.getItem(e);this._currentBody=this.cloneList.selectedItem.id,null!=p_l&&this.updateView()}},b_s.prototype.renderBodyList=function(e,p_l){var p_g=MirrorSelfModel.ins,b_s=p_g.getMCfgByCfg(e.dataSource.id,-1);e.updateView(b_s,!0,!1,!1,!1),e.setRedPoint(p_g.bodyRed(e.dataSource.id))},b_s.prototype.showProp=function(){var p_l=MirrorSelfModel.ins,p_g=p_l.getSelfProp(this._currentBody),b_s=p_l.getSelfBaseProp(this._currentBody),d_u=p_l.getSelfUpGrade(this._currentBody);e.PropShowPanel.open([b_s,p_g,d_u],[(j_x("110_285_613")+j_x(233)+":"),(j_x("371_2342_613")+j_x(233)),(j_x("371_1148_613")+j_x(233))])},b_s.prototype.clearImage=function(){for(var e in this.clearImgs)Laya.loader.clearTextureRes(this.clearImgs[e]),this.clearImgs[e]=null},b_s.prototype.btnRed=function(e,p_l){void 0===p_l&&(p_l=!1),e.getChildByName("redpointImg").visible=p_l},b_s.prototype.onClick=function(p_l){var p_g=p_l.target,b_s=MirrorSelfModel.ins.getSelfInfoMap,d_u=MirrorSelfControl.ins,b_e=b_s[this._currentBody];switch(p_g.name){case"activeBtn":b_e?b_e.isCanActive()?d_u.reqActiveBody(this._currentBody):b_p.broadcastNotice((j_x("2407_1086_582")+j_x("1896_1761_415")+j_x("1865_1163_2335")+j_x(1796))):b_p.broadcastNotice((j_x("1048_1745_2224")+j_x("1920_1865_1163")+j_x("2407_1086")));break;case"i_next":this.scrollMoveDir();break;case"i_pre":this.scrollMoveDir(!0);break;case"detailBtn":this.showProp();break;case"helpBtn":e.MirrorSelfHelpPanel.open();break;case"upLvBtn":e.MirrorSelfUpLv.open(b_e);break;case"upGradeBtn":e.MirrorSelfUpGrade.open(b_e)}},b_s.prototype.scrollMoveDir=function(e){void 0===e&&(e=!1);var p_l,p_g=this.cloneList;p_l=e?Math.min(p_g.startIndex+4,p_g.length-1):Math.max(0,p_g.startIndex-4),p_g.scrollTo(p_l)},b_s.prototype.showModel=function(){var e=MirrorSelfModel.ins.getSelfInfoMap[this._currentBody],p_l=LgcM.ins.heroVo;if(p_l){var p_g=this._heroVo;p_g.fashionWeapon=p_l.fashionWeapon,p_g.fashionClothes=p_l.fashionClothes,p_g.type=Engine2d.ActorTypeDefine.PLAYER,p_g.entryId=p_l.entryId,p_g.rideId=0;var b_s=null;if(this._roleModel.removeSelf(),e){var d_u=MirrorSelfEnum,b_e=e.partList[d_u.FWeapon],d_m=e.partList[d_u.Fashion],d_w=e.partList[d_u.Ride];b_s=Config.ride_ride[d_w.id],p_g.rideId=d_w.id;var f_t=Config.dragon_dragon[e.partList[d_u.Dragon].id];b_e.isHaveValue()&&(p_g.fashionWeapon=b_e.id),d_m.isHaveValue()&&(p_g.fashionClothes=d_m.id),b_s?this.cloneModel.addChild(this._roleModel):this.unCloneModel.addChild(this._roleModel),f_t?this._roleModel.showStateEfts(f_t.effect,0):this._roleModel.clearStateEfts(),this.unCloneModel.gray=this.cloneModel.gray=!e.isActive}else this.unCloneModel.addChild(this._roleModel),this._roleModel.clearStateEfts(),this.unCloneModel.gray=this.cloneModel.gray=!0;this._roleModel.HaveRid=null!=b_s,this._roleModel.changRoleSkin(p_g,!1,!0,p_g.fashionWeapon,p_g.fashionClothes),this._roleModel.HaveRid=null!=b_s,b_s&&this._roleModel.setMountScale(b_s.showRideData[0][0],b_s.showRideData[0][1])}},b_s.prototype.onListScroll=function(){var e=this.cloneList;this.i_next.visible=e.scrollBar.value<e.scrollBar.max,this.i_pre.visible=0<e.scrollBar.value,this.rp_next.visible=this.rp_pre.visible=!1;var p_l=MirrorSelfModel.ins;if(0<e.startIndex)for(var p_g=0;p_g<e.startIndex;++p_g)if(p_l.bodyRed(e.array[p_g].id)){this.rp_pre.visible=!0;break}if(e.startIndex+4<e.length)for(p_g=e.startIndex+4;p_g<e.length;++p_g)if(p_l.bodyRed(e.array[p_g].id)){this.rp_next.visible=!0;break}},b_s.prototype.updateFight=function(){Acir(MirrorSelfModel,this,b_p,NumType)},b_s.prototype.onRemoved=function(){this.off(Laya.Event.CLICK,this,this.onClick),LED.off(l_r.MIRROR_SELF_INFO,this,this.updateView),LED.off(l_r.MIRROR_SELF_WEAR,this,this.updateView),LED.off(l_r.MIRROR_SELF_ACT,this,this.showActivePanel),LED.off(l_r.MIRROR_SELF_LV,this,this.updataShowBox),LED.off(l_r.MIRROR_SELF_GRADE,this,this.updataShowBox),this.cloneList.scrollBar.off(Laya.Event.CHANGE,this,this.onListScroll),this.cloneList.selectedIndex=-1,this.clearImage(),this._roleModel&&this._roleModel.clearRes()},b_s.prototype.showUpLvBox=function(e){Osip(e,this,UpState)},b_s.prototype.updateView=function(){var e=MirrorSelfModel.ins;this.equipList.array=MirrorSelfModel.partPos;var p_l=e.getSelfInfoMap[this._currentBody],p_g=this.cloneList.selectedItem;if(this.openCon.visible=!p_l,this.activeLab.visible=this.upLvBox.visible=this.activeBtn.visible=!1,this.btnRed(this.activeBtn,p_l&&p_l.isCanActive()),this.activeLab.color=b_s.redColor,p_l){var d_u=e.getGradeCfgById(p_l.id,p_l.grade);this.bodyName.text=d_u.gradeName+"Lv."+p_l.lv,this.activeLab.visible=this.activeBtn.visible=!p_l.isActive,this.upLvBox.visible=p_l.isActive,this.cloneModel.gray=!1,this.activeLab.color=p_l.isCanActive()?b_s.greenColor:b_s.redColor,this.activeLab.text=Utils.$((j_x("2335_1796_1320")+j_x(1283)+""+j_x("2407_1086_1855")+j_x(425)+"{1}/{2}"),p_l.num,MirrorSelfModel.partNum)}else this.bodyName.text=p_g.name,this.cloneModel.gray=!0,this.openCon.text=p_g.openConShow;p_g&&0<p_g.type?(this.typeClip_di.visible=!0,this.typeClip.index=p_g.type-1):this.typeClip_di.visible=!1,this.cloneList.refresh(),this.showModel(),this.onListScroll(),this.updateFight(),this.renderSkillBox(!p_l||!p_l.isActive),this.updataShowBox()},b_s.open=function(){Uqqp(UIM,b_s)},b_s.prototype.onAdded=function(){this.cloneList.array=MirrorSelfModel.ins.getCloneCfg(),LED.on(l_r.MIRROR_SELF_INFO,this,this.updateView),LED.on(l_r.MIRROR_SELF_WEAR,this,this.updateView),LED.on(l_r.MIRROR_SELF_ACT,this,this.showActivePanel),LED.on(l_r.MIRROR_SELF_LV,this,this.updataShowBox),LED.on(l_r.MIRROR_SELF_GRADE,this,this.updataShowBox,[!0]),this.cloneList.selectedIndex=0,MirrorSelfControl.ins.reqInfo(),this.cloneList.scrollBar.on(Laya.Event.CHANGE,this,this.onListScroll),this.on(Laya.Event.CLICK,this,this.onClick),this.addClearImg("res/ui/clone/di.jpg")},b_s.prototype.addClearImg=function(e){this.clearImgs[e]&&(this.clearImgs[e]=e)},b_s.close=function(){Gbtg(UIM,b_s)},b_s.greenColor="#00802e",b_s.redColor="#9f4543",b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.MirrorSelfPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.clone.cloneItemUI,__extends(b_s,p_l),b_s.prototype.updateView=function(p_l,p_g,b_s,d_u,b_e){void 0===p_g&&(p_g=!0),void 0===b_s&&(b_s=!0),void 0===d_u&&(d_u=!0),void 0===b_e&&(b_e=!0);var d_m=this.dataSource;this.shade.visible=!1,this.icon.visible=!1;var d_w=p_l?p_l.part:d_m&&d_m.part||0;this.clickBtn.dataSource={part:d_w,vo:d_m},this.clickBtn.mouseEnabled=b_s,this.starBox.visible=!1,this.fashinonShow.visible=!1;var f_t=MirrorSelfModel.ins;if(this.bg.index=0,p_l&&(this.bg.index=p_l.quality-1,this.icon.skin=Resource.ResUrl.getIconUrl(p_l.icon),this.nameLab.text=p_l.name,this.nameLab.color=Utils.ItemUtils.getQualityColor(p_l.quality),this.clipInfo.clipUrl=Resource.ResUrl.getQualityEftUrl(p_l.quality),b_e&&e.EffectPlayer.playLoop(this,this.clipStr,this.bg,this.clipInfo,null,null,6)),this.bg.skin="res/ui/common/Clip_pinzhi.png",this.selectBox.skin="res/ui/common/item_select.png",this.shade.skin="res/ui/common/common_zhezhao.png",d_m)if(this.nameLab.visible=d_u,0<d_w)d_m.isHaveValue()?(this.icon.visible=!0,d_w==MirrorSelfEnum.Fashion||d_w==MirrorSelfEnum.FWeapon||d_w==MirrorSelfEnum.Refine?(this.fashinonShow.visible=!0,this.fashinonShow.text=f_t.getStarNameByStar(d_w,d_m.star,d_m.id)):(this.fashinonShow.visible=!1,this.showStar(f_t.getStarByPart(d_w,d_m.star)))):this.showNUll(p_g);else{this.selectBox.skin="res/ui/common/item_select2.png",this.bg.skin="res/ui/common/Clip_pinzhi_Clone.png",this.shade.skin="res/ui/common/common_zhezhao2.png",this.icon.visible=!0;var v_z=f_t.getSelfInfoMap[d_m.id];this.shade.visible=null==v_z}else this.showNUll(p_g)},b_s.prototype.clearClick=function(e,p_l){Ceep(e,p_l,this,Laya)},b_s.prototype.setNameVisible=function(e){Srxm(e,this)},b_s.prototype.setRedPoint=function(e){Spri(e,this)},b_s.prototype.setIconStr=function(e){Otyv(e,this,Resource)},b_s.prototype.showNUll=function(p_l){e.EffectPlayer.hideEffect(this,this.clipStr),this.nameLab.visible=!1,this.redpointImg.visible=!1,p_l&&(this.shade.visible=!0)},b_s.prototype.showStar=function(e){Spfv(e,this,TalismanModel)},b_s.prototype.setClick=function(e,p_l){Mive(e,p_l,this,Laya)},b_s.prototype.setNameY=function(e){Mqva(e,this)},b_s);function b_s(){var e=p_l.call(this)||this;return e.clipStr="clipEff",e.clipInfo={clipUrl:"",clipX:4,clipY:3,interval:83},e}e.MirrorSelfPartItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.clone.cloneEquipCellUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Sppa(this,Laya)},b_s.prototype.onRemove=function(){Sbgx(this,Laya)},b_s.prototype.updateView=function(e,p_l,p_g,b_s){void 0===b_s&&(b_s=0),this._bodyId=p_l,this._part=p_g;var d_u=this.dataSource;if(d_u){this._itemBox;var b_e=this.itemName,d_m=this.currentImg,d_w=this.fight,f_t=this.tipLab,v_z=MirrorSelfModel.ins,d_h=v_z.partName[this._part-1],r_t=0;d_w&&(r_t=v_z.getPropFun(this._part,v_z.comFunName[1])(d_u),d_w.text=""+(r_t||0));var t_n=v_z.getMCfgByCfg(d_u.id,this._part);b_e.text=t_n.name,this._itemVo.id=t_n.id,this._itemVo.part=t_n.part,this._itemVo.vo=d_u,this._itemVo.star=d_u.star,this._itemBox.dataSource=this._itemVo,this._itemBox.updateView(t_n,!0,!1,!1),this._itemBox.setRedPoint(!1),this.goToBtn.visible=f_t.visible=!v_z.canWearPart(this._bodyId,this._part,d_u.star),this.wearBtn.visible=!this.goToBtn.visible;var f_y=this.wearBtn._childs;if(this.typeClip.index=t_n.propType-1,f_y&&f_y[0]&&(f_y[0].visible=b_s<r_t),d_m.visible=v_z.isBeWornEquip(this._part,d_u.id),d_m.visible&&(this.goToBtn.visible=this.wearBtn.visible=!1),f_t.visible){var p_q=v_z.getStarLimitById(this._bodyId,this._part);f_t.text=Utils.$(("{1}"+j_x("192_1067")+"{2}"+j_x("2060_1919_1867")+j_x(1086)),v_z.getStarNameByStar(this._part,p_q,1,!0),d_h)}}},b_s.prototype.onMouseClick=function(p_l){var p_g=p_l.target,b_s=this.dataSource;switch(p_g.name){case"wearBtn":b_s&&(MirrorSelfControl.ins.reqWearEquip(this._bodyId,b_s.id,this._part),e.MirrorSelfSwapPanel.close());break;case"goToBtn":b_s&&(MirrorSelfModel.ins.goToSystemPanel(this._part),e.MirrorSelfSwapPanel.close())}},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g._itemVo=null,p_g._bodyId=0,p_g._part=0,p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g._itemBox=new e.MirrorSelfPartItem,p_g.boxCon.addChild(p_g._itemBox),p_g._itemVo=new MirrorSelfEquipVo,p_g}e.MirrorSelfSwapItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.clone.cloneEquipChangeUI,__extends(b_s,p_l),b_s.open=function(e,p_l,p_g){UIM.open(b_s,null,{itemVo:e,part:p_l,bodyId:p_g},!1,!1,!0)},b_s.prototype.updateItem=function(e,p_l){Iwgd(e,p_l,this)},b_s.prototype.closeSelf=function(){Crnz(b_s)},b_s.prototype.onAdded=function(){Qqxs(this,Laya)},b_s.prototype.onStageClick=function(e){var p_l=e.target;p_l&&this.contains(p_l)||this.closeSelf()},b_s.close=function(){Sdyw(UIM,b_s)},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":this.closeSelf()}},b_s.prototype.onRemove=function(){Cghk(Laya,this)},b_s.prototype.updateView=function(){this._itemVo=this.dataSource.itemVo,this._bodyId=this.dataSource.bodyId,this._part=this.dataSource.part;var e=this._part;if(this._bodyId&&this._part){var p_l=MirrorSelfModel.ins,p_g=p_l.getCanWearEquip(this._bodyId,this._part),b_s=Config.clone_clone[this._bodyId];this.wearType.array=b_s.WearType;var d_u=this._itemVo.getVo;d_u&&(this._fight=p_l.getPropFun(this._part,p_l.comFunName[1])(d_u)),p_g.sort((function(p_g,b_s){if(d_u){if(d_u.id==p_g.id)return-1;if(d_u.id==b_s.id)return 1}var b_e=p_l.getPropFun(e,p_l.comFunName[1])(p_g);return p_l.getPropFun(e,p_l.comFunName[1])(b_s)-b_e}));var b_e=p_l.getStarLimitById(this._bodyId,this._part);this.wearLab.text=Utils.$(("{1}"+j_x("192_1067")+"{2}"+j_x("2060_1919_1867")+j_x(1086)),p_l.getStarNameByStar(this._part,b_e,1,!0),p_l.partName[this._part-1]),this.equipList.array=p_g,this.nullLab.visible=p_g.length<=0}},b_s.prototype.onDelay=function(){Iorr(Laya,this)},b_s.prototype.renderTypeList=function(e,p_l){Qsdk(e,p_l)},b_s.greenColor="#00802e",b_s.redColor="#9f4543",b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g._itemVo=null,p_g._bodyId=0,p_g._part=0,p_g._fight=0,p_g.equipList.vScrollBarSkin="",p_g.equipList.itemRender=e.MirrorSelfSwapItem,z_j.setList(p_g.equipList,p_g,p_g.updateItem),p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),z_j.setList(p_g.wearType,p_g,p_g.renderTypeList),p_g}e.MirrorSelfSwapPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.clone.cloneTipUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Yggh(this,GConfig,Laya)},b_s.open=function(e){UIM.open(b_s,[""],{index:e},!1,!1,!0,!0)},b_s.prototype.updateItem=function(e,p_l,p_g){var b_s=p_l.dataSource,d_u=p_l.getChildByName("nameTxt"),b_e=p_l.getChildByName("valueTxt"),d_m=d_v.getPropertyType(b_s.propOrdinal);d_u.text=d_m.desc+":",d_m.isPercent()?b_e.text=Utils.$("{1}%",b_s.value/100):b_e.text=Utils.$("{1}",Math.floor(b_s.value))},b_s.prototype.init=function(){if(this.dataSource){var e=MirrorSelfModel.ins,p_l=e.getCloneCfgById(this.dataSource.index);this.itemIcon.skin=Resource.ResUrl.getIconUrl(p_l.headImg);var p_g=e.getTotalProp(this.dataSource.index);this.nameTxt.text=p_l.name,this.propList.array=p_g;var b_s=Config.skill_skill[p_l.superSkill];this.bg1.index=p_l.quality-1,this.skillNameTxt.text=(j_x("2243_1919_1511")+j_x(2101)+":")+b_s.name,this.skillEffTxt.innerHTML=(j_x("2243_1919_407")+j_x(1398)+"")+SkillModel.instance.getSkillDesc(p_l.superSkill,1)}},b_s.prototype.onRemoved=function(){},b_s.close=function(){Ksiq(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.RECOVERED,e,e.onRemoved),e}e.MirrorSelfTipPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.clone.clone_upgradeUI,__extends(b_s,p_l),b_s.open=function(e){UIM.open(b_s,null,{bodyInfo:e},!1,!1,!0)},b_s.prototype.onAdded=function(){Infd(this,Laya,l_r)},b_s.prototype.updateView=function(){var e=MirrorSelfModel.ins,p_l=this.dataSource.bodyInfo,p_g=Config.clone_clone[p_l.id];if(p_g){var b_s=e.getGradeCfgById(p_l.id,p_l.grade+1),d_u=e.getGradeCfgById(p_l.id,p_l.grade);this.list.visible=null!=b_s,this.maxLab.visible=null==b_s,this.clipType.index=p_g.type-1,this.bodyName.text=d_u.gradeName+"LV."+p_l.lv,this.redPoint.visible=e.isCanUpGrade(p_l)==UpState.CAN_UP;var b_e={};d_u.prop?b_e[2]=CharacterProperty.getPropertys(b_s.prop):b_e[2]=[],b_s&&(b_s.gradeUpLimit?(this.upBtn.label=(j_x("1955_2213")),this.gradeUpLimit.visible=!0,this.showList.array=b_s.gradeUpLimit):(this.gradeUpLimit.visible=!1,this.upBtn.label=(j_x("371_1148"))),TalismanModel.instance.setProp(this.propHtml,b_e,Utils.setSpace(6),["#42435A","#00802e"],2),this.nBName.text=b_s.gradeName,this.list.array=b_p.getRewardDatas(b_s.consume),this.numInfo=BagModel.instance.getItemCountByItemIDs(b_s.consume,BagTypeDefine.BAG_TYPE_ITEM),this.showBodyBox(this.nBox,p_l,p_l.grade+1),this.descLab.text=b_s.propDesc),this.cBName.text=d_u.gradeName;var d_m=MirrorSelfEnum;p_l.partList[d_m.FWeapon],p_l.partList[d_m.Fashion],p_l.partList[d_m.Dragon],this.showBodyBox(this.cBox,p_l,p_l.grade),this.nBox.visible=null!=b_s}},b_s.prototype.playEffect=function(e){e&&(e.visible=!0,e.play(!1))},b_s.prototype.playEffectComplete=function(p_l){p_l&&(p_l.visible=!1,p_l===this.effect_left?this.playEffect(this.effect_mid):p_l===this.effect_mid?this.playEffect(this.effect_right):(e.MirrorSelfUpGradeSucc.open(this.dataSource.bodyInfo),b_s.close()))},b_s.close=function(){Ospm(UIM,b_s)},b_s.prototype.onMouseClick=function(e){var p_l=e.target,p_g=this.dataSource.bodyInfo;switch(p_l.name){case"upBtn":MirrorSelfModel.ins.isCanUpGrade(p_g,!0)==UpState.CAN_UP&&(MirrorSelfControl.ins.reqUpGradeBody(p_g.id),this.playEffect(this.effect_left));break;case"closeBtn":b_s.close()}},b_s.prototype.renderItem=function(e,p_l){e.isShowName=!1,e.setItemData(e.dataSource);var p_g=0;this.numInfo&&(p_g=this.numInfo[e.dataSource.id]),e.numTxt.color=p_g<e.dataSource.amount?Utils.Color.RED:Utils.Color.NAME_GREEN,e.numTxt.text=p_g+"/"+e.dataSource.amount},b_s.prototype.onRemove=function(){Qlom(this,Laya,l_r)},b_s.prototype.showBodyBox=function(p_l,p_g,b_s){var d_u=p_l.getChildByName("itemBox"),b_e=p_l.getChildByName("starBox");d_u||(d_u=new e.MirrorSelfPartItem,p_l.addChild(d_u),p_l.setChildIndex(d_u,0),d_u.scale(1.3,1.3),d_u.name="itemBox");var d_m=MirrorSelfModel.ins.getMCfgByCfg(p_g.id,-1);TalismanModel.instance.changeActStar(b_e,b_s,4),d_u.dataSource=p_g,d_u.updateView(d_m,!0,!1,!1,!1),d_u.setRedPoint(!1)},b_s.prototype.renderShowItem=function(e,p_l){if(e&&e.dataSource){var p_g=e.dataSource,b_s=MirrorSelfModel.ins,d_u=this.dataSource.bodyInfo,b_e=b_s.getGradeCfgById(d_u.id,d_u.grade+1);if(!b_e&&!b_e.lvLimit)return;var d_m=p_l+1,d_w=d_u.partList[d_m];d_w&&(e.color=p_g>d_w.star?"#e22e4b":"#00802e",e.text=Utils.$(("{1}"+j_x("1117_1012")+"{2}"+j_x(1148)+"{3}/{4}"),b_s.partName[p_l],p_g,d_w.star,p_g))}},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),z_j.setHtml(p_g.propHtml,22,"#f0ecd8",10,"left","SimHei",!1),p_g.list.itemRender=e.ItemBox,z_j.setList(p_g.list,p_g,p_g.renderItem),z_j.setList(p_g.showList,p_g,p_g.renderShowItem),p_g}e.MirrorSelfUpGrade=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.clone.clone_upgradeSuccUI,__extends(b_s,p_l),b_s.open=function(e){UIM.open(b_s,null,{bodyInfo:e},!1,!1,!0,!0)},b_s.prototype.showModel=function(e,p_l,p_g,b_s){this.dataSource.bodyInfo;var d_u=Config.dragon_dragon[b_s];d_u&&this.actModel.showStateEfts(d_u.effect,0);var b_e=LgcM.ins.heroVo;this.actModel.changRoleSkin(b_e,!1,!0,p_g,p_l)},b_s.prototype.onRemove=function(){Ckni(this)},b_s.prototype.onAdded=function(){Qvyh(this)},b_s.close=function(){Sbpg(UIM,b_s)},b_s.prototype.updateView=function(){var e=MirrorSelfModel.ins,p_l=this.dataSource.bodyInfo,p_g=Config.clone_clone[p_l.id];if(p_g){var b_s=e.getGradeCfgById(p_l.id,p_l.grade),d_u={};this.nBName.text=b_s.gradeName,this.descLab.text=b_s.propDesc,this.clipType.index=p_g.type-1,b_s.prop?d_u[2]=CharacterProperty.getPropertys(b_s.prop):d_u[2]=[],TalismanModel.instance.setProp(this.propHtml,d_u,Utils.setSpace(4),["#f0ecd8","#f0ecd8"],2),this.descLab.text=b_s.propDesc;var b_e=MirrorSelfEnum,d_m=p_l.partList[b_e.FWeapon],d_w=p_l.partList[b_e.Fashion],f_t=p_l.partList[b_e.Dragon];this.showModel(this.actModel,d_m.id,d_w.id,f_t.id)}},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),z_j.setHtml(e.propHtml,22,"#f0ecd8",10,"left","SimHei",!1),e.actModel=new n_k,e.cmodel.addChild(e.actModel),e}e.MirrorSelfUpGradeSucc=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.clone.clone_uplvUI,__extends(b_s,p_l),b_s.open=function(e){UIM.open(b_s,null,{bodyInfo:e},!1,!1,!0)},b_s.prototype.showCfg=function(e,p_l,p_g,b_s){if(e){var d_u={};e.baseProp?d_u[2]=CharacterProperty.getPropertys(e.baseProp):d_u[2]=[],p_l.text=e.skillDesc,p_g.text=e.propDesc,TalismanModel.instance.setProp(b_s,d_u,"<br>",["#f0ecd8","#f0ecd8"])}},b_s.close=function(){Ebuk(UIM,b_s)},b_s.prototype.updateView=function(e){void 0===e&&(e=!1);var p_l=MirrorSelfModel.ins,p_g=this.dataSource.bodyInfo,b_s=Config.clone_clone[p_g.id];if(b_s){var d_u=p_l.getLvCfgById(p_g.id,p_g.lv),b_e=p_l.getLvCfgById(p_g.id,p_g.lv+1),d_m=p_l.getGradeCfgById(p_g.id,p_g.grade);this.upBtn.visible=this.list.visible=this.nextBox.visible=null!=b_e,this.maxLab.visible=null==b_e,this.clipType.index=b_s.type-1,this.redPoint.visible=p_l.isCanUpLv(p_g)==UpState.CAN_UP,this.bodyName.text=d_m.gradeName+"LV."+p_g.lv,b_e&&(this.showCfg(b_e,this.nSkillLv,this.nPropPer,this.nHtml),this.list.array=b_p.getRewardDatas(b_e.lvupCost),this.numInfo=BagModel.instance.getItemCountByItemIDs(b_e.lvupCost,BagTypeDefine.BAG_TYPE_ITEM)),(this.upLvClip.visible=e)&&this.upLvClip.play(!1),d_u&&this.showCfg(d_u,this.cSkillLv,this.cPropPer,this.cHtml)}},b_s.prototype.onAdded=function(){Guyb(this,Laya,LED,l_r)},b_s.prototype.closeSelf=function(){Kznp(b_s)},b_s.prototype.onMouseClick=function(e){var p_l=e.target,p_g=this.dataSource.bodyInfo;switch(p_l.name){case"closeBtn":this.closeSelf();break;case"upBtn":MirrorSelfModel.ins.isCanUpLv(p_g,!0)==UpState.CAN_UP&&MirrorSelfControl.ins.reqUpLvBody(p_g.id)}},b_s.prototype.onRemove=function(){Irtp(this,Laya,LED,l_r)},b_s.prototype.clipComplete=function(){Yzkl(this)},b_s.prototype.renderItem=function(e,p_l){e.isShowName=!1,e.setItemData(e.dataSource);var p_g=0;this.numInfo&&(p_g=this.numInfo[e.dataSource.id]),e.numTxt.color=p_g<e.dataSource.amount?Utils.Color.RED:Utils.Color.NAME_GREEN,e.numTxt.text=p_g+"/"+e.dataSource.amount},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.greenColor="#00802e",p_g.redColor="#9f4543",p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),z_j.setHtml(p_g.cHtml,22,"#f0ecd8",10,"left"),z_j.setHtml(p_g.nHtml,22,"#f0ecd8",10,"left"),p_g.list.itemRender=e.ItemBox,z_j.setList(p_g.list,p_g,p_g.renderItem),p_g}e.MirrorSelfUpLv=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.palace.palaceCellUI,__extends(b_s,p_l),b_s.prototype.init=function(e){if(null!=e){this.visible=!0,this.index=e,this.nameLab.text="",this.roleImg.visible=!0,this.roleSp.visible=!1;var p_l=PalaceModel.instance.getPalaceCnfByIndex(e);if(p_l.level&&this.roleSp.scale(p_l.level,p_l.level),null==this.roleModel&&(this.roleModel=new n_k,this.roleSp.addChild(this.roleModel)),p_l.title){var p_g=Resource.ResUrl.getIconUrl(Config.title_title[p_l.title].palaTitle);this.setIcon(p_g,this.nameImg),this.setIcon(p_g,this.name2Img)}var b_s=LgcM.ins.heroVo;this.roleModel.changRoleSkin(b_s,!1,!0,290102,p_l.fashion),4==e||7==e||8==e?(this.leftImg.visible=!0,this.rightImg.visible=!1):(this.leftImg.visible=!1,this.rightImg.visible=!0),this.on(Laya.Event.CLICK,this,this.onClick)}},b_s.prototype.update=function(e){if(null!=e){this.visible=!0,this.roleImg.visible=!1,this.roleSp.visible=!0,this.nameLab.text=e.getName();var p_l=e.getIndex(),p_g=PalaceModel.instance.getPalaceCnfByIndex(e.getIndex());this.roleImg.visible=!1,this.roleSp.visible=!0;var b_s=new Engine2d.PlayerVo;b_s.entryId=e.getEntryId(),this.roleModel.changRoleSkin(b_s,!1,!0,290102,p_g.fashion),4==p_l||7==p_l||8==p_l?(this.leftImg.visible=!0,this.rightImg.visible=!1):(this.leftImg.visible=!1,this.rightImg.visible=!0)}},b_s.prototype.setIcon=function(e,p_l){""!=e?(p_l.visible=!0,p_l=Resource.ResManager.Instance.getImg(e,p_l)):p_l.visible=!1},b_s.prototype.onClick=function(){Eooz(e,this)},b_s.prototype.clearRes=function(){this.roleModel&&this.roleModel.clearRes()},b_s);function b_s(){return p_l.call(this)||this}e.PalaceCell=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.palace.palaceDetailUI,__extends(b_s,p_l),b_s.prototype.init=function(){Ujuw(this,Laya)},b_s.prototype.onRemove=function(){this.closeBtn.off(Laya.Event.CLICK,this,this.onCloseBtn),this.backBtn.off(Laya.Event.CLICK,this,this.onCloseBtn),LED.off(l_r.PALACE_WORSHIP,this,this.updateView),this.roleModel&&this.roleModel.clearRes()},b_s.prototype.onWorshipBtn=function(){var e=this.dataSource,p_l=PalaceModel.instance.getPalaceCnfByIndex(e);null!=p_l&&PalaceModel.instance.reqPalaceWorship(p_l.id)},b_s.prototype.updateView=function(){var e=this.dataSource,p_l=PalaceModel.instance.getPalaceVo(e),p_g=PalaceModel.instance.getPalaceCnfByIndex(e),b_s=PalaceModel.instance.getSteteCnfByIndex(e);if(this.titleIcon.visible=!1,p_l){var d_u=this.dataSource,b_e=PalaceModel.instance.getPalaceCnf();this.unRoleImg.visible=!1,this.roleSp.visible=!0;var d_m=new Engine2d.PlayerVo,d_w=LgcM.ins.heroVo;null==this.roleModel&&(this.roleModel=new n_k,this.roleSp.addChild(this.roleModel));var f_t=Resource.ResUrl.getIconUrl(Config.title_title[p_g.title].icon);this.setIcon(f_t,this.titleIcon),d_m.entryId=p_l.getEntryId(),this.roleModel.changRoleSkin(d_m,!1,!0,290102,p_g.fashion);var v_z=PalaceModel.instance.isRank();this.getBtn.visible=0==d_w.palaWorship&&v_z,this.getBtn.label=(j_x("1173_296_1067")+j_x(189)),this.getBtn.disabled=!1,this.getRedImg.visible=!0,this.worshipRedImg.visible=!0,this.worshopBtn.visible=0==d_w.palaWorship&&!v_z,1==d_w.palaWorship&&(this.getBtn.visible=!0,this.getBtn.label=(j_x("1300_1174_2111")),this.getBtn.disabled=!0,this.getRedImg.visible=!1,this.worshipRedImg.visible=!1),this.tipBox.visible=!1,this.powerBox.visible=!0,b_p.getNumSp(NumType.FIGHTING,p_l.getPower(),this.powerSp,-12),this.nameLab.text=p_l.getName(),this.regionLab.text="("+p_l.getServer()+(j_x(34)+")"),this.nameHbox.refresh(),this.decLab.text=b_e[d_u-1].titleDesc,this.titleBox.visible=v_z,this.titleName.text=p_g.name,this.titleImg.skin="res/ui/palace/"+p_g.titleIcon;var d_h=2,r_t=500;if(p_g.reward)r_t=v_z?p_g.reward[0][1]:b_s.palaReward[0][1],(d_h=v_z?p_g.reward[0][0]:b_s.palaReward[0][0])==ItemType.gold&&(this.moneyImg.skin="res/ui/common/yuanbao.png"),d_h==ItemType.money&&(this.moneyImg.skin="res/ui/common/tongqian.png"),this.moneyValueLab.text=r_t.toString(),this.moneyLab.text=v_z?r_t.toString():"";else{var t_n=PalaceModel.instance.getPalaceCnfByIndex(4);r_t=v_z?t_n.reward[0][1]:b_s.palaReward[0][1],(d_h=v_z?t_n.reward[0][0]:b_s.palaReward[0][0])==ItemType.gold&&(this.moneyImg.skin="res/ui/common/yuanbao.png"),d_h==ItemType.money&&(this.moneyImg.skin="res/ui/common/tongqian.png"),this.moneyValueLab.text=r_t.toString(),this.moneyLab.text=v_z?r_t.toString():""}}else this.initView()},b_s.close=function(){Mjfs(UIM,b_s)},b_s.prototype.initView=function(){var e=LgcM.ins.heroVo,p_l=this.dataSource,p_g=PalaceModel.instance.getPalaceCnfByIndex(p_l),b_s=PalaceModel.instance.getSteteCnfByIndex(p_l);null==this.roleModel&&(this.roleModel=new n_k,this.roleSp.addChild(this.roleModel)),this.titleImg.skin="res/ui/palace/"+p_g.titleIcon,this.roleModel.changRoleSkin(e,!1,!0,290102,p_g.fashion);var d_u=PalaceModel.instance.isRank();this.unRoleImg.visible=!0,this.roleSp.visible=!1,this.tipBox.visible=!0,this.powerBox.visible=!1,this.getRedImg.visible=!0,this.worshipRedImg.visible=!0,this.getBtn.visible=0==e.palaWorship&&d_u,this.worshopBtn.visible=0==e.palaWorship&&!d_u,this.getBtn.label=(j_x("1173_296_1067")+j_x(189)),this.getBtn.disabled=!1,this.rewardBox.visible=!0,this.titleBox.visible=d_u,this.titleName.text=p_g.name,1==e.palaWorship&&(this.getBtn.visible=!0,this.getBtn.label=(j_x("1300_1174_2111")),this.getBtn.disabled=!0,this.getRedImg.visible=!1,this.worshipRedImg.visible=!1),this.conditionLab.text=p_g.coDesc,this.decLab.text=p_g.titleDesc,Config.state_state[e.stateLv].palaReward;var b_e=2,d_m=500;if(p_g.reward)d_m=d_u?p_g.reward[0][1]:b_s.palaReward[0][1],(b_e=d_u?p_g.reward[0][0]:b_s.palaReward[0][0])==ItemType.gold&&(this.moneyImg.skin="res/ui/common/yuanbao.png"),b_e==ItemType.money&&(this.moneyImg.skin="res/ui/common/tongqian.png"),this.moneyValueLab.text=d_m.toString(),this.moneyLab.text=d_u?d_m.toString():"";else{var d_w=PalaceModel.instance.getPalaceCnfByIndex(4);d_m=d_u?d_w.reward[0][1]:b_s.palaReward[0][1],(b_e=d_u?d_w.reward[0][0]:b_s.palaReward[0][0])==ItemType.gold&&(this.moneyImg.skin="res/ui/common/yuanbao.png"),b_e==ItemType.money&&(this.moneyImg.skin="res/ui/common/tongqian.png"),this.moneyValueLab.text=d_m.toString(),this.moneyLab.text=d_u?d_m.toString():""}this.goldHbox.refresh(),this.awardHbox.refresh()},b_s.prototype.onCloseBtn=function(){Sboa(b_s)},b_s.open=function(e){Cfbn(e,UIM,b_s)},b_s.prototype.onAdded=function(){Oqzw(this,Laya,LED,l_r)},b_s.prototype.setIcon=function(e,p_l){""!=e?(p_l.visible=!0,p_l=Resource.ResManager.Instance.getImg(e,p_l)):p_l.visible=!1},b_s.prototype.onGetBtn=function(){var e=this.dataSource,p_l=PalaceModel.instance.getPalaceCnfByIndex(e);null==p_l||PalaceModel.instance.reqPalaceWorship(p_l.id)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.PalaceDetail=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.palace.palaceItemUI,__extends(b_s,p_l),b_s.prototype.init=function(e){if(null!=e){this.visible=!0,this.index=e,this.nameLab.text="",this.stepImg.skin=2==e?"res/ui/palace/step_1.png":"res/ui/palace/step_2.png",this.rightImg.visible=1!=e,this.leftImg.visible=1==e,this.roleImg.visible=!0,this.roleSp.visible=!1;var p_l=PalaceModel.instance.getPalaceCnfByIndex(e);if(p_l.title){var p_g=Resource.ResUrl.getIconUrl(Config.title_title[p_l.title].palaTitle);this.setIcon(p_g,this.nameImg),this.setIcon(p_g,this.name2Img)}this.nameImg.visible=!0,this.name2Img.visible=!0,p_l.level&&this.roleSp.scale(p_l.level,p_l.level),null==this.roleModel&&(this.roleModel=new n_k,this.roleSp.addChild(this.roleModel));var b_s=LgcM.ins.heroVo;this.roleModel.changRoleSkin(b_s,!1,!0,290102,p_l.fashion),this.on(Laya.Event.CLICK,this,this.onClick)}},b_s.prototype.onClick=function(){Ybnx(e,this)},b_s.prototype.update=function(e){if(null!=e){var p_l=PalaceModel.instance.getPalaceCnfByIndex(e.getIndex());this.roleImg.visible=!1,this.roleSp.visible=!0;var p_g=new Engine2d.PlayerVo;p_g.entryId=e.getEntryId(),this.roleModel.changRoleSkin(p_g,!1,!0,290102,p_l.fashion),this.nameLab.text=e.getName();var b_s=e.getIndex();this.stepImg.skin=2==b_s?"res/ui/palace/step_1.png":"res/ui/palace/step_2.png",this.rightImg.visible=1!=b_s,this.leftImg.visible=1==b_s}},b_s.prototype.setIcon=function(e,p_l){""!=e?(p_l.visible=!0,p_l=Resource.ResManager.Instance.getImg(e,p_l)):p_l.visible=!1},b_s.prototype.clearRes=function(){this.roleModel&&this.roleModel.clearRes()},b_s);function b_s(){return p_l.call(this)||this}e.PalaceItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.palace.palaceUI,__extends(b_s,p_l),b_s.prototype.init=function(){Oafq(this,Laya)},b_s.prototype.onMouseDown=function(e){e.target==this.listBgImg&&(null==this.starPos&&(this.starPos=new Laya.Point),this.starPos.y=Laya.stage.mouseY)},b_s.prototype.onCloseBtn=function(){Mlki(b_s)},b_s.prototype.onMouseUp=function(e){Uiri(e,this)},b_s.prototype.onHelp=function(){Ogvn(b_e)},b_s.prototype.initView=function(){for(var e=PalaceModel.instance.getPalaceCnf(),p_l=1;p_l<=e.length;p_l++)if(PalaceModel.instance.getPalaceVo(p_l),3<p_l){var p_g=this["item"+p_l];p_g&&p_g.init(p_l)}else{var b_s=this["item"+p_l];b_s&&b_s.init(p_l)}},b_s.prototype.onAdded=function(){Qmnp(this,Laya,LED,l_r,PalaceModel)},b_s.prototype.updateView=function(){PalaceModel.instance.getPalaceInfos();for(var e=PalaceModel.instance.getPalaceCnf(),p_l=1;p_l<=e.length;p_l++){var p_g=PalaceModel.instance.getPalaceVo(p_l);if(3<p_l){var b_s=this["item"+p_l];p_g&&b_s.update(p_g)}else{var d_u=this["item"+p_l];p_g&&d_u.update(p_g)}}},b_s.prototype.onMouseMove=function(e){if(null!=this.listBgImg&&null!=this.starPos){this.listBgImg.y=this.listBgImg.y+(Laya.stage.mouseY-this.starPos.y),this.starPos.y=Laya.stage.mouseY;var p_l=this.listBgImg.y;0<p_l&&(p_l=0),p_l<-500&&(p_l=-500),this.listBgImg.y=p_l}},b_s.close=function(){Ehgl(UIM,b_s)},b_s.open=function(){Ywtg(UIM,b_s)},b_s.prototype.onRemove=function(){this.helpBtn.off(Laya.Event.CLICK,this,this.onHelp),this.closeBtn.off(Laya.Event.CLICK,this,this.onCloseBtn),this.backBtn.off(Laya.Event.CLICK,this,this.onCloseBtn),LED.event(l_r.HERO_STATE_CHANGE),LED.event(l_r.HELPER_UPDATE_INFO),LED.off(l_r.PALACE_INFO,this,this.updateView);var e=PalaceModel.instance.getPalaceCnf();if(e)for(var p_l=1;p_l<=e.length;p_l++)this["item"+p_l]&&this["item"+p_l].clearRes()},b_s.prototype.onMouseOut=function(e){Mmju(e,this)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.PalaceView=p_g;var d_u,b_e=(d_u=ui.window.palace.palaceHelpUI,__extends(d_m,d_u),d_m.prototype.onAdded=function(){Kyzf(this,Laya)},d_m.prototype.onRemoved=function(){Ofhv(this,Laya)},d_m.open=function(){Iqmx(UIM,d_m)},d_m.prototype.onClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":d_m.close()}},d_m.close=function(){Qqir(UIM,d_m)},d_m);function d_m(){var e=d_u.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.PalaceHelpPanel=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.pvp.pvpAwardWinUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Cgdi(this,Laya,LED,l_r)},b_s.prototype.onClick=function(e){switch(e.target){case this.btnClose:b_s.close();break;case this.btnGet:this.reqAward()}},b_s.prototype.reqAward=function(){this._vo&&d_x.instance.reqAward(this._vo.time)},b_s.open=function(e){void 0===e&&(e=!1),UIM.open(b_s,null,e,!1,!1,!0,!0)},b_s.prototype.updateItem=function(e,p_l){Mldw(e,p_l)},b_s.prototype.updateData=function(){var e,p_l=d_x.instance.rewardList,p_g=[],d_u=1,b_e="",d_m=!0;if(this._isReward){if(!(p_l&&0<p_l.length))return void b_s.close();d_u=(e=p_l[0]).changeSegmentId,p_g=e.itemList?JSON.parse(e.itemList):[],this._vo=e}else d_u=d_x.instance.getAttackVo().curHighSegmentId+1,d_m=!1;var d_w=Config.asyncpvp_danGrading[d_u];d_w&&(b_e=d_w.name,this._isReward||(p_g=d_w.up_lvl_reward)),this.awardList.array=b_p.getRewardDatas(p_g),this.txtGrade.text=b_e,this.btnGet.gray=!d_m,this.btnGet.mouseEnabled=d_m},b_s.prototype.onRemove=function(){Evfl(LED,l_r,this,Laya)},b_s.close=function(){Cnib(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.awardList.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e}e.PvpAwardWin=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.pvp.pvp_vs2UI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Swxl(this,Laya,LED,l_r)},b_s.prototype.getRoundVo=function(){return Ayia(d_x)},b_s.open=function(){Yzes(UIM,b_s)},b_s.prototype.updateMyInfo=function(){var e=d_x.instance.getAttackVo(d_x.instance.isCross);if(e){var p_l=LgcM.ins.heroVo;this.t_myName.text=p_l.name;var p_g=this.myTsBox.getChildByName("atkBox"),b_s=this.myTsBox.getChildByName("defBox"),d_u=p_g.getChildByName("icon"),b_e=(b_s.getChildByName("icon"),p_g.getChildByName("bg")),d_m=(b_s.getChildByName("bg"),Config.talisman_talisman[e.attackTs]),d_w=d_m?Resource.ResUrl.getIconUrl(d_m.icon):"";d_u=Resource.ResManager.Instance.getImg(d_w,d_u),b_e.index=d_m?d_m.quality-1:0;var f_t=TalismanModel.instance.getTalismanById(e.attackTs);if(TalismanModel.instance.changeActStar(p_g,f_t?f_t.grade:1),this.t_myState){var v_z=StateModel.instance.getStateLv(),d_h=Config.state_state[v_z],r_t=StateModel.instance.getStateSubLv(),t_n=StateModel.instance.getSubConfId(v_z,r_t),f_y=Config.state_stateSub[t_n];d_h&&f_y&&(this.t_myState.text="["+d_h.desc+""+f_y.desc+"]")}this.t_myScore.text=e.score.toString(),this.myHBox.refresh(),this.t_myAtk.text=d_x.instance.getShopAddProp("attack")/100+"%",this.t_myDef.text=d_x.instance.getShopAddProp("defense")/100+"%",this.myImgBox.getChildByName("male").visible=1==p_l.entryId,this.myImgBox.getChildByName("female").visible=2==p_l.entryId,this.updateShieldInfo()}},b_s.prototype.updateWin=function(){var e=d_x.instance.round;this.winSp.visible=0<e;var p_l=Math.floor(e/10),p_g=e%10,b_s=0<p_l;this.num2.visible=b_s,this.num2.index=p_l,this.num1.index=p_g,this.ani1.play(0,!1)},b_s.prototype.onRemove=function(){Qvcu(LED,l_r,this,Laya)},b_s.prototype.updateData=function(){var p_l=this.getRoundVo();if(p_l){if(this.isFirst&&1<p_l.round&&(e.PvpPropBuyPanel.open(),this.isFirst=!1),this.t_tarName.text=p_l.name,this.t_tarScore.text=p_l.point.toString(),this.tarTsList.array=p_l.ts,this.t_tarTsNum.text=Utils.$((j_x("1163_1067_980")+j_x("799_869_2348")+":{1}/{2}"),p_l.tsamt,p_l.tstotal),this.tarImgBox.getChildByName("male").visible=1==p_l.entryId,this.tarImgBox.getChildByName("female").visible=2==p_l.entryId,this.t_tarState){var p_g=Config.state_state[p_l.state],b_s=StateModel.instance.getSubConfId(p_l.state,p_l.subState),d_u=Config.state_stateSub[b_s];p_g&&d_u&&(this.t_tarState.text="["+p_g.desc+""+d_u.desc+"]")}this.tarHBox.refresh(),this.updateMyInfo();var b_e=StateModel.instance.getStateLv(),d_m=StateModel.instance.getStateSubLv(),d_w=6*p_l.state+p_l.subState-6*b_e-d_m;0<d_w?(this.t_stateDamage.text=20<5*d_w?(j_x("1176_2046_381")+j_x("843_2360_1012")+j_x("1610_489")+""+j_x("2360_1012_859")+j_x("119_437_223")+"20%"):(j_x("1176_2046_381")+j_x("843_2360_1012")+j_x("1610_489")+""+j_x("2360_1012_859")+j_x("119_437_223"))+5*d_w+"%",this.t_stateDamage.color="#b92929"):(this.t_stateDamage.text=d_w<0?5*d_w<-20?(j_x("381_843_1610")+j_x("489_1653_2221")+""+j_x("1315_402_859")+j_x("119_437_223")+"20%"):(j_x("381_843_1610")+j_x("489_1653_2221")+""+j_x("1315_402_859")+j_x("119_437_223"))+5*-d_w+"%":(j_x("381_843_87")+j_x(495)+""+j_x("1971_1896_381")+j_x("843_1610_489")+j_x("407_1398")),this.t_stateDamage.color="#71de66")}},b_s.prototype.updateTemp=function(){Eedr(d_x,this)},b_s.prototype.onClick=function(p_l){var p_g=p_l.target;switch(p_g.name){case"closeBtn":case"backBtn":b_p.confirm((j_x("932_1835_365")+j_x("239_2040_836")+j_x("383_832_695")+j_x("1141_420_1011")+j_x(1061)+","+j_x("68_2032_2085")+j_x(4)+"?"),d_x.instance.exitMap);break;case"atkBtn":var b_s=p_g.dataSource;if(b_s){var d_u=this.getRoundVo();d_u.enemyAttackTsId=b_s.ackTsId,d_u.enemyDefTsId=b_s.defTsId,d_u.enemyMaxHp=d_u.enemyHp=b_s.hp,d_x.instance.reqRoundBattle(d_u.round,b_s.groupId)}break;case"tempBtn":e.PvpPropBuyPanel.open(),d_x.instance.isTempRp=!1,this.updateTemp();break;case"helpBtn":e.PvpNoticePanel.open()}},b_s.prototype.updateItem=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("atkBox"),d_u=e.getChildByName("defBox"),b_e=b_s.getChildByName("icon"),d_m=d_u.getChildByName("icon"),d_w=b_s.getChildByName("bg"),f_t=d_u.getChildByName("bg"),v_z=e.getChildByName("atkBtn"),d_h=0<p_g.ackTsId?p_g.ackTsId:1001,r_t=0<p_g.defTsId?p_g.defTsId:1001,t_n=Config.talisman_talisman[d_h],f_y=Resource.ResUrl.getIconUrl(t_n.icon);b_e=Resource.ResManager.Instance.getImg(f_y,b_e),d_w.index=t_n?t_n.quality-1:0,TalismanModel.instance.changeActStar(b_s,p_g.atkTsGrade),t_n=Config.talisman_talisman[r_t],f_y=Resource.ResUrl.getIconUrl(t_n.icon),d_m=Resource.ResManager.Instance.getImg(f_y,d_m),f_t.index=t_n?t_n.quality-1:0,TalismanModel.instance.changeActStar(d_u,p_g.defTsGrade),e.gray=-1===p_g.ackTsId,v_z.visible=0<p_g.ackTsId,v_z.dataSource=p_g},b_s.prototype.updateShieldInfo=function(){var e=LgcM.ins.heroVo,p_l=this.getRoundVo();this.t_myPower.text=Utils.$((j_x("383_767")+"{1}"),e.fight),this.myHpBar.visible=!0,this.myHpBar.value=p_l.hp/p_l.hpMax,this.t_myHpBar.text=Utils.$("{1}/{2}",p_l.hp,p_l.hpMax)},b_s.prototype.updateInfo=function(){Atqm(this)},b_s.close=function(){Slru(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.tarTsList.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.PvpBattlePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.pvp.pvp_challengeUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Cjnq(this,Laya,LED,l_r)},b_s.prototype.updateItemCount=function(){var e,p_l="";(this._itemCount=0)<(e=1===this._vo.ori?Config.global[GlobalDefine.async_pvp_hunting_token].i_info:Config.global[GlobalDefine.async_pvp_challenge_book].i_info)&&(this._itemCount=BagModel.instance.getItemCountByItemID(e),p_l=Utils.$("{1}{2}",Config.CItem(e).name,this._itemCount)),this.countTxt.text=p_l},b_s.prototype.onRemove=function(){Stvc(this,Laya,LED,l_r)},b_s.prototype.updateView=function(){this.addAtkBtn.visible=0==this._atkId;var e=!1;if(this._atkId){e=!0;var p_l=0,p_g=0,b_s="",d_u="";(d_w=Config.talisman_talisman[this._atkId])&&(b_s=d_w.icon,p_g=d_w.quality,d_u=d_w.name);var b_e=Resource.ResUrl.getIconUrl(b_s);this.setIcon(b_e,this.atkIcon),this.bg.index=0<p_g?p_g-1:0;var d_m=TalismanModel.instance.getTalismanVosingle(this._atkId);d_m&&(p_l=d_m.grade),TalismanModel.instance.changeActStar(this.iconSp,p_l),this.nameTxt.color=Utils.ItemUtils.getTalismanQualityColor(p_g),this.nameTxt.text=d_u}if(this._defId){var d_w=Config.talisman_talisman[this._defId];b_e=Resource.ResUrl.getIconUrl(d_w.icon),this.setIcon(b_e,this.defIcon)}else this.defIcon.visible=!1;this.nameTxt.visible=e,this.iconSp.visible=e,this.addSp.visible=!e},b_s.open=function(e){Slvb(e,UIM,b_s)},b_s.prototype.setIcon=function(e,p_l){""!=e?(p_l.visible=!0,p_l=Resource.ResManager.Instance.getImg(e,p_l)):p_l.visible=!1},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"attackBtn":var p_g=this._vo,d_u=p_g.isCross;if(!(0<this._itemCount)){b_p.broadcastNotice(1===p_g.ori?(j_x("2319_893_1724")+j_x("2462_1779")):(j_x("48_383_596")+j_x("2462_1779")));var d_m=1===p_g.ori?Config.global[GlobalDefine.async_pvp_hunting_token].i_info:Config.global[GlobalDefine.async_pvp_challenge_book].i_info;return b_s.close(),void r_f.instance.isWindow(d_m)}1==p_g.ori?d_x.instance.reqChaseKill(p_g.pid,this._atkId,d_u):d_x.instance.reqChallenge(p_g.pid,this._atkId,d_u),b_p.registerAutoOpenPanel(e.PvpPanel,b_p.mapID),b_s.close();break;case"addAtkBtn":b_e.open({type:1,tid:this._atkId});break;case"addDefBtn":b_e.open({type:2,tid:this._defId})}},b_s.prototype.onTalismanSelect=function(e){var p_l=e.type,p_g=e.id;switch(p_l){case 1:this._atkId=p_g;break;case 2:this._defId=p_g}this.updateView()},b_s.close=function(){Gfzj(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.PvpChallengeSelectedPanel=p_g;var d_u,b_e=(d_u=ui.window.pvp.pvp_swapUI,__extends(d_m,d_u),d_m.prototype.onAdded=function(){Ygul(this,Laya)},d_m.prototype.onClick=function(e){var p_l=e.target;switch(p_l.name){case"raplaceBtn":var p_g=this.dataSource.type,b_s=p_l.dataSource.id;LED.event(l_r.PVP_TALISMAN_SELECT,{type:p_g,id:b_s});case"backBtn":case"closeBtn":d_m.close()}},d_m.prototype.setIcon=function(e,p_l){""!=e?(p_l.visible=!0,p_l=Resource.ResManager.Instance.getImg(e,p_l)):p_l.visible=!1},d_m.open=function(e){Kwrg(e,UIM,d_m)},d_m.prototype.onRemove=function(){Qwfc(this,Laya)},d_m.prototype.updateItem=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("raplaceBtn"),d_u=e.getChildByName("curImg"),b_e=e.getChildByName("nameTxt"),d_m=e.getChildByName("lvTxt"),d_w=e.getChildByName("descTxt"),f_t=e.getChildByName("iconSp"),v_z=f_t.getChildByName("icon"),d_h=f_t.getChildByName("bg");Config.talisman_talisman[p_g.id],d_m.text=p_g.level.toString(),d_w.text=(j_x("383_767")+"")+p_g.fight;var r_t=this.dataSource.tid;d_u.visible=r_t===p_g.id,b_s.visible=!d_u.visible;var t_n,f_y=0,p_q="",h_h="",n_j=(b_s.dataSource=p_g).id,j_l=Config.talisman_talisman[n_j];j_l&&(p_q=j_l.icon,f_y=j_l.quality,h_h=j_l.name);var l_m=Resource.ResUrl.getIconUrl(p_q);this.setIcon(l_m,v_z),d_h.index=0<f_y?f_y-1:0,t_n=p_g.grade,TalismanModel.instance.changeActStar(f_t,t_n),b_e.color=Utils.ItemUtils.getTalismanQualityColor(f_y),b_e.text=h_h},d_m.prototype.updateData=function(){var e=this.dataSource.type,p_l=this.dataSource.tid;this.list.array=TalismanModel.instance.getFightSwapTalismans(e,30,p_l,!0)},d_m.close=function(){Ybik(UIM,d_m)},d_m);function d_m(){var e=d_u.call(this)||this;return e.list.vScrollBarSkin="",e.list.scrollBar.elasticDistance=100,e.list.scrollBar.elasticBackTime=200,e.list.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.PvpTalismanSelectPanel=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.pvp.pvp_fightConfigUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Iwoj(this,Laya)},b_s.prototype.onRemove=function(){Sidb(this,Laya)},b_s.prototype.updateData=function(){Izlm(this,d_x)},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close()}},b_s.prototype.updateItem=function(e,p_l){Wqlt(e,p_l)},b_s.open=function(){Wbrr(UIM,b_s)},b_s.close=function(){Qyea(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.list.vScrollBarSkin="",e.list.scrollBar.elasticDistance=100,e.list.scrollBar.elasticBackTime=200,e.list.itemRender=b_e,e.list.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.PvpConfigPanel=p_g;var d_u,b_e=(d_u=ui.window.talisman.talisman_fight_cellUI,__extends(d_m,d_u),d_m.prototype.setItemData=function(e,p_l){this.conditionTxt.text="";var p_g=Config.talisman_talisman[e.defTsId];this.titleTxt.text=Utils.$((j_x("1451_745")+"{1}"),p_l+1),this.itemBox.on(Laya.Event.CLICK,this,this.onClick),this.itemBox.dataSource=e;var b_s=this.itemBox.getChildByName("iconSp"),d_u=this.itemBox.getChildByName("nameTxt"),b_e=Resource.ResUrl.getIconUrl(p_g.icon);this.setIcon(b_e,b_s),d_u.text=p_g.name;var d_m=this.itemBox.getChildByName("starBox");d_m&&(d_m.visible=!1);var d_w=this.itemBox.getChildByName("addBtn");d_w&&(d_w.visible=!1),p_g=Config.talisman_talisman[e.ackTsId],this.itemBox1.dataSource=e,this.itemBox1.on(Laya.Event.CLICK,this,this.onClick),b_s=this.itemBox1.getChildByName("iconSp"),d_u=this.itemBox1.getChildByName("nameTxt"),b_e=Resource.ResUrl.getIconUrl(p_g.icon),this.setIcon(b_e,b_s),d_u.text=p_g.name,(d_m=this.itemBox1.getChildByName("starBox"))&&(d_m.visible=!1),(d_w=this.itemBox1.getChildByName("addBtn1"))&&(d_w.visible=!1)},d_m.prototype.setIcon=function(e,p_l){""!=e?(p_l.visible=!0,p_l=Resource.ResManager.Instance.getImg(e,p_l)):p_l.visible=!1},d_m.prototype.onClick=function(e){},d_m);function d_m(){return d_u.call(this)||this}e.PvpTalismanFightCell=b_e;var d_w,f_t=(d_w=ui.window.pvp.pvp_swapUI,__extends(v_z,d_w),v_z.prototype.onAdded=function(){Ojnh(this,Laya)},v_z.prototype.updateData=function(){},v_z.prototype.onRemove=function(){Aeec(this,Laya)},v_z.prototype.updateItem=function(e,p_l){},v_z.prototype.onClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":v_z.close()}},v_z.prototype.setIcon=function(e,p_l){""!=e?(p_l.visible=!0,p_l=Resource.ResManager.Instance.getImg(e,p_l)):p_l.visible=!1},v_z.open=function(e){Gsng(e,UIM,v_z)},v_z.close=function(){Qxuw(UIM,v_z)},v_z);function v_z(){var e=d_w.call(this)||this;return e.list.vScrollBarSkin="",e.list.scrollBar.elasticDistance=100,e.list.scrollBar.elasticBackTime=200,e.list.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.PvpConfigSwapPanel=f_t}(UI=UI||{});var v_j=function(){function e(){}return e.prototype.on=function(e,p_l){Sdek(e,p_l,DB,this)},e.prototype.off=function(e,p_l){Svyx(e,p_l,DB,this)},e.prototype.event=function(e,p_l){Ssgp(e,p_l,LED)},e}(),PvpController=function(e){function p_l(){var p_l=e.call(this)||this;return p_l.init(),p_l}return __extends(p_l,e),Object.defineProperty(p_l,"ins",{get:function(){return this._ins||(this._ins=new p_l),this._ins},enumerable:!0,configurable:!0}),p_l.prototype.init=function(){Mwnn(this,w2c_gsaAct_tmapvpscore_rank_cross_state,w2c_cross_async_info,q2c_asyncpvp_search_kill)},p_l.prototype.reqState=function(){var e=new c2w_gsaAct_tmapvpscore_rank_cross_state;DB.instance.query(c2w_gsaAct_tmapvpscore_rank_cross_state,e)},p_l.prototype.updateCsState=function(e){Aytf(e,d_x)},p_l.prototype.updateCsInfo=function(e){Mfak(e,d_x)},p_l.prototype.updateCsSearchKill=function(e){Uwlz(e,d_x)},p_l}(v_j);!function(e){var p_l,p_g=(p_l=ui.window.pvp.PvpKillListUI,__extends(b_s,p_l),b_s.prototype.init=function(){Qcwh(z_j,this,Laya)},b_s.prototype.onAdded=function(){Gaqu(this)},b_s.prototype.onSelect=function(e){var p_l=this.playerList.getCell(e);this._fun&&this._fun.runWith(p_l.dataSource),this.onClose()},b_s.prototype.onRemove=function(){},b_s.open=function(e){Gzds(e,UIM,b_s)},b_s.close=function(){Icsb(UIM,b_s)},b_s.prototype.updateItem=function(e,p_l){if(e){var p_g=e.dataSource;e.getChildByName("txtName").text="s"+p_g.svrId+"."+p_g.name}},b_s.prototype.onClose=function(){Cfbx(b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.PvpKillListPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.pvp.pvpMagicPkUI,__extends(b_s,p_l),b_s.prototype.creatBlack=function(){var e=new Laya.Sprite;e.graphics.drawRect(0,0,Stage.width,Stage.height,"#000000"),e.size(Stage.width,Stage.height),e.alpha=.7,this.addChildAt(e,0)},b_s.prototype.rationEnd=function(){Iazj(this)},b_s.prototype.removeLoop=function(){Mmvd(Laya,this)},b_s.prototype.setMagic=function(e,p_l){var p_g=Config.talisman_talisman[p_l];p_g&&(e.changeModel(p_g.avatar),e.pos(p_g.ui_offset[0],p_g.ui_offset[1]),e.scale(p_g.ui_scale,p_g.ui_scale),e.setAction(p_g.showAct,0,!0))},b_s.prototype.showBig=function(){this._isMove||(this._isMove=!0,Laya.Tween.to(this.myMagicSp,{scaleX:1.5,scaleY:1.5},300,null,Laya.Handler.create(this,this.moveCenter)),Laya.Tween.to(this.enemyMagicSp,{scaleX:1.5,scaleY:1.5},300,null,Laya.Handler.create(this,this.moveCenter)))},b_s.prototype.onRemove=function(){Gojk(this)},b_s.prototype.getRoundVo=function(){return Mimp(d_x)},b_s.prototype.setTest=function(){Csdh(this,Laya)},b_s.prototype.playEffect=function(){this._count++,2==this._count&&(this._count=0,this.effect.visible=!0,this.effect.on(Laya.Event.COMPLETE,this,this.onPlayEnd),this.effect.play(!1),this.updateBloodShow(!0),this.movePos())},b_s.prototype.remove=function(){Qymp(this)},b_s.prototype.moveCenter=function(){if(this._count++,2==this._count){this._count=0;var e=this.width/2,p_l=this.height/2;Laya.Tween.to(this.myMagicSp,{scaleX:.7,scaleY:.7,f_u:e,j_l:p_l},100,null,Laya.Handler.create(this,this.playEffect)),Laya.Tween.to(this.enemyMagicSp,{scaleX:.7,scaleY:.7,f_u:e,j_l:p_l},100,null,Laya.Handler.create(this,this.playEffect))}},b_s.prototype.resetTarget=function(e){Izbw(e)},b_s.prototype.createMagic=function(){this._rotationPos=new Laya.Point,this._myPos=new Laya.Point(this.myMagicSp.x,this.myMagicSp.y),this._enemyPos=new Laya.Point(this.enemyMagicSp.x,this.enemyMagicSp.y),this._myModel=new n_k,this._enemyModel=new n_k,this.myMagicSp.addChild(this._myModel),this.enemyMagicSp.addChild(this._enemyModel),this.myMagicSp.pivot(.5,.5),this.enemyMagicSp.pivot(.5,.5)},b_s.prototype.getAttackVo=function(){return Oglo(d_x)},b_s.prototype.updateMagic=function(){this.showPlayer(!1);var e=this.getAttackVo(),p_l=this.getRoundVo();this.setMagic(this._myModel,e.attackTs),this.setMagic(this._enemyModel,p_l.enemyAttackTsId),this.updateShow(),this.showBig()},b_s.prototype.onPlayEnd=function(){Ehzs(this,Laya)},b_s.prototype.onAdded=function(){Ynjw(this)},b_s.prototype.reset=function(){Ojds(this)},b_s.prototype.showPlayer=function(e){void 0===e&&(e=!0),Engine2d.Hero.local.visible=e},b_s.prototype.onReplay=function(){Kglr(this)},b_s.prototype.moveEnd=function(){this._count++,2<=this._count&&(this._count=0,this._isMove=!1,this._isTest||this.showResult())},b_s.prototype.movePos=function(){this._isWin=this.isWin,this._isWin?(Laya.Tween.to(this.myMagicSp,{scaleX:1,scaleY:1,f_u:this._myPos.x,j_l:this._myPos.y},400,null,Laya.Handler.create(this,this.moveEnd)),this._rotationTar=this.enemyMagicSp,this._rotationPos.x=this.width+100,this._rotationPos.y=100):(Laya.Tween.to(this.enemyMagicSp,{scaleX:1,scaleY:1,f_u:this._enemyPos.x,j_l:this._enemyPos.y},400,null,Laya.Handler.create(this,this.moveEnd)),this._rotationTar=this.myMagicSp,this._rotationPos.x=-100,this._rotationPos.y=this._myPos.y),this.removeLoop();var e=this._speed/20;this._rSpeed=1/e/5,this._mSpeed=Math.abs((this._rotationTar.x-this._rotationPos.x)/e),this._time=0,Laya.timer.loop(20,this,this.onRotation)},b_s.prototype.removeTime=function(){Scdt(Laya,this)},b_s.prototype.onRotation=function(){this._time++,this._rotationTar.rotation+=60,this._rotationTar.alpha-=this._rSpeed,this._rotationTar.scaleX-=this._rSpeed,this._rotationTar.scaleY-=this._rSpeed,this._rotationTar.y-=this._mSpeed,this._isWin?(this._rotationTar.x+=this._mSpeed,this._rotationTar.x>=this._rotationPos.x&&this._rotationTar.y<=this._rotationPos.y&&this.rationEnd()):(this._rotationTar.x-=this._mSpeed,this._rotationTar.x<this._rotationPos.x&&this._rotationTar.y<=this._rotationPos.y&&this.rationEnd())},b_s.prototype.showResult=function(){this.isWin?e.PvpWinPanel.open(this._resultVo):e.PvpLosePanel.open(this._resultVo)},Object.defineProperty(b_s.prototype,"isWin",{get:function(){return this._resultVo.winPid===b_p.playerId},enumerable:!0,configurable:!0}),b_s.prototype.updateShow=function(){var e=this.getRoundVo();this.enemyNameTxt.text=e.name;var p_l=Config.state_state[e.state],p_g=Config.state_stateSub[e.subState];this.enemy_statetext.text=p_l.desc+""+p_g.desc;var b_s=this.getAttackVo();this.myNameTxt.text=this.heroVo.name,TalismanModel.instance.getTalismanById(b_s.attackTs);var d_u=StateModel.instance.getStateLv(),b_e=StateModel.instance.getStateSubLv(),d_m=Config.state_state[d_u],d_w=Config.state_stateSub[b_e];this.friend_statetext.text=d_m.desc+""+d_w.desc,this.updateBloodShow()},b_s.prototype.updateBloodShow=function(e){void 0===e&&(e=!1);var p_l=this.getRoundVo(),p_g=p_l.enemyHp,b_s=p_l.enemyMaxHp,d_u=p_l.hp,b_e=p_l.hpMax;e&&(d_u=this._resultVo.hp,this.isWin&&(p_g=0)),this.myBar.value=z_j.getPercent(d_u,b_e),this.myBarTxt.text=Utils.$("{1}/{2}",Math.floor(d_u),Math.floor(b_e)),this.enemyBar.value=z_j.getPercent(p_g,b_s),this.enemyBarTxt.text=Utils.$("{1}/{2}",Math.floor(p_g),Math.floor(b_s))},Object.defineProperty(b_s.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),b_s.open=function(e){Supc(e,UIM,b_s)},b_s.close=function(){Ekhi(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e._count=0,e._speed=200,e._time=0,e._mSpeed=10,e._rSpeed=.1,e._isTest=!1,e.effectLine.autoPlay=!1,e.effectLine.visible=!1,e.creatBlack(),e.createMagic(),e._isTest&&e.setTest(),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.PvpMagicPk=p_g}(UI=UI||{});var d_x=function(e){function p_l(){var p_l=e.call(this)||this;return p_l.maxNum=5,p_l._maxLevel=-1,p_l._round=0,p_l.isTempRp=!0,p_l.pvpData={},p_l._showRecordList=[],p_l}return __extends(p_l,e),Object.defineProperty(p_l.prototype,"myGrade",{get:function(){var e=this.getAttackVo().score;for(var p_l in Config.asyncpvp_danGrading){var p_g=Config.asyncpvp_danGrading[p_l];if(p_g.score_limit[0]<=e&&p_g.score_limit[1]>=e)return p_g.id}return 0},enumerable:!0,configurable:!0}),p_l.prototype.updateSeasonRecord=function(e){this.seasonRecord=[],this.downRecord=[],this.finishRecord=[];for(var p_l,p_g=e.broadcast.length,b_s=0;b_s<p_g;b_s++){var d_u=e.broadcast[b_s];p_l=!!d_u.itemList,2==d_u.type?this.finishRecord.push(d_u):d_u.curSegmentId>d_u.changeSegmentId?this.downRecord.push(d_u):p_l&&this.seasonRecord.push(d_u)}this.seasonRecord.sort(this.sortByTime),this.finishRecord.sort(this.sortByTime),LED.event(l_r.PVP_SEASON_RECORD),this.checkSeasonRecord()},p_l.prototype.sortByTime=function(e,p_l){return Ewlp(e,p_l)},p_l.prototype.checkSeasonRecord=function(){var e;if(0<this.finishRecord.length)return e=this.finishRecord.shift(),void UI.PvpSeasonRewardPanel.open(e);0<this.downRecord.length&&(e=this.downRecord.shift(),UI.PvpDownGradePanel.open(e))},Object.defineProperty(p_l.prototype,"rewardList",{get:function(){return this.seasonRecord},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"isReward",{get:function(){return!!(this.seasonRecord&&0<this.seasonRecord.length)},enumerable:!0,configurable:!0}),Object.defineProperty(p_l,"instance",{get:function(){return this._instance||(this._instance=new p_l),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"canPlay",{get:function(){if(!p_k.instance.checkSystemOpen(FuncDefine.pvp))return!1;var e=TalismanModel.instance.getTalismanVos(!0),p_l=[0,0];for(var p_g in e)p_l[Config.talisman_talisman[e[p_g].id].type-1]++;var b_s=this.getAttackVo().sulNum;return 0<p_l[0]&&0<p_l[1]&&0==b_s&&0<b_s},enumerable:!0,configurable:!0}),p_l.prototype.updateAttackInfo=function(e){Knnm(e,this,PvpDefine)},p_l.prototype.updateInfo=function(e,p_l){void 0===p_l&&(p_l=0);var p_g=PvpDefine.attack,b_s=PvpDefine.round,d_u=this.getAttackVo(p_l),b_e=this.getRoundVo(p_l);if(b_e.round=1,d_u.isBack=!0,d_u.num=e.num,d_u.score=e.score,d_u.lastTime=e.lastTime,d_u.tarName=e.tarName,p_l){var d_m=e;d_u.endSeasonTime=d_m.endTime}else{var d_w=e;d_u.attackTs=d_w.tsId,d_u.endSeasonTime=d_w.endSeasonTime,d_u.curSeasonId=d_w.curSeasonId,d_u.curHighSegmentId=d_w.curHighSegmentId}this.setData(p_g,p_l,d_u),this.setData(b_s,p_l,b_e),LED.event(l_r.PVP_ATTACK_TS_CHANGE,p_l),LED.event(l_r.HELPER_UPDATE_INFO)},p_l.prototype.getAttackVo=function(e){void 0===e&&(e=0);var p_l=this.getData(PvpDefine.attack,e);if(!p_l){p_l=new PvpAttackTsVo;var p_g=LgcM.ins.heroVo;p_l.attackTs=p_g.fightingTs1,p_l.defenceTs=p_g.fightingTs2,p_l.score=p_g.asyncpvpScore,this.setData(PvpDefine.attack,e,p_l)}return p_l},p_l.prototype.updateMatch=function(e){Yciy(e,this,PvpDefine,LED,l_r)},Object.defineProperty(p_l.prototype,"configs",{get:function(){return this._configs},enumerable:!0,configurable:!0}),p_l.prototype.updateRecord=function(e){var p_l=e.record,p_g=[],b_s=this.coverCross(e.isCross),d_u=1==e.isput;if(d_u&&(p_g=this.getData(PvpDefine.record,b_s)),p_g&&p_l){var b_e=void 0,d_m=void 0;for(var d_w in p_l)(b_e=new PvpRecordVo).parse(p_l[d_w]),d_m=!1,d_w=PvpDefine.showRecord+b_e.pid+"_"+b_e.time,d_u||(d_m=this.getData(d_w,b_s)),d_m||(this.setData(d_w,b_s,!0),this._showRecordList.push(b_e)),p_g.push(b_e)}this.setData(PvpDefine.record,b_s,p_g),this.updateRecordData(b_s),d_u&&UI.PvpRecordTip.open(b_s)},p_l.prototype.coverCross=function(e){return e?PvpDefine.cross:0},p_l.prototype.getRoundVo=function(e){return void 0===e&&(e=0),this.getData(PvpDefine.round,e)||new PvpRoundInfoVo},p_l.prototype.isRecordRp=function(){return Azju(this)},p_l.prototype.getData=function(e,p_l){return Udhi(e,p_l,this)},p_l.prototype.getBuyMax=function(e){return Wyly(e,this)},p_l.prototype.getGlobalRecords=function(e){return void 0===e&&(e=0),this.pvpData[PvpDefine.broad+e]||[]},p_l.prototype.getShopAddProp=function(e){if(this._shopVos){var p_l=0;for(var p_g in this._shopVos){var b_s=this._shopVos[p_g];b_s&&Config.asyncpvp_shop[b_s.id]&&Config.asyncpvp_shop[b_s.id].effects[0]==e&&0<b_s.amount&&(p_l+=0<Config.asyncpvp_shop[b_s.id].effects[1]?Config.asyncpvp_shop[b_s.id].effects[1]:Config.asyncpvp_shop[b_s.id].effects[2])}return p_l}return 0},p_l.prototype.sortGRecords=function(e,p_l){return Knzt(e,p_l)},p_l.prototype.updateGlobalRecords=function(e){Cjfm(e,this,PvpDefine,LED,l_r)},p_l.prototype.getRecords=function(e,p_l){void 0===e&&(e=0),void 0===p_l&&(p_l=0);var p_g=this.getData(PvpDefine.record,p_l),b_s=[];for(var d_u in p_g)p_g[d_u].isEnemy()&&1===e||!p_g[d_u].isEnemy()&&0===e?b_s.push(p_g[d_u]):3==e&&b_s.push(p_g[d_u]);return b_s.length&&b_s.sort((function(e,p_l){return p_l.time-e.time})),b_s},p_l.prototype.getExchangeNum=function(e){return this.exchangeInfo&&this.exchangeInfo[e]?this.exchangeInfo[e]:0},p_l.prototype.getConfigMax=function(e){var p_l=e.dayNum;if(e.segmentLvBuyNum&&0<e.segmentLvBuyNum.length){var p_g=e.segmentLvBuyNum.length-1;p_l+=this.myGrade>p_g?e.segmentLvBuyNum[p_g]:e.segmentLvBuyNum[this.myGrade-1]}return p_l},p_l.prototype.setData=function(e,p_l,p_g){Uvdl(e,p_l,p_g,this)},p_l.prototype.getPropShops=function(){return Swlr(this)},p_l.prototype.updateRoundInfo=function(e){Upgp(e,this,PvpDefine,UI,LED,l_r)},p_l.prototype.getRecordVoByName=function(e,p_l){void 0===p_l&&(p_l=0);var p_g=this.getData(PvpDefine.record,p_l);if(p_g)for(var b_s in p_g)if(p_g[b_s].name===e)return p_g[b_s];return null},p_l.prototype.clearRecord=function(e){void 0===e&&(e=1),this._showRecordList=[],this.updateRecordData(e)},p_l.prototype.updateRecordData=function(e){Cajo(e,LED,l_r)},p_l.prototype.updateShopInfo=function(e,p_l){var p_g;this._shopVos||(this._shopVos=[]),(p_g=new PvpShopVo).id=e,p_g.amount=p_l;var b_s=this.coverCross(this.isCross),d_u=this.getRoundVo(b_s);this._shopVos[d_u.round-1]=p_g,Config.asyncpvp_shop[p_g.id]&&"hp"==Config.asyncpvp_shop[p_g.id].effects[0]&&(0==Config.asyncpvp_shop[p_g.id].effects[1]?d_u.hp+=Math.floor(d_u.hpMax*Config.asyncpvp_shop[p_g.id].effects[2]/1e4):d_u.hp+=Config.asyncpvp_shop[p_g.id].effects[1],d_u.hp>d_u.hpMax&&(d_u.hp=d_u.hpMax)),LED.event(l_r.PVP_SHOP_INFO)},p_l.prototype.clearPropShops=function(){Mrrv(this)},p_l.prototype.updateRoundResult=function(e){var p_l=new PvpResultVo;p_l.update(e),this._round=e.round,UI.PvpMagicPk.open(p_l)},Object.defineProperty(p_l.prototype,"round",{get:function(){return this._round||0},enumerable:!0,configurable:!0}),p_l.prototype.initActors=function(){var e=this.coverCross(this.isCross),p_l=this.getRoundVo(e),p_g=LgcM.ins.getActorById(p_l.tpid,Engine2d.ActorTypeDefine.PLAYER);if(p_g)p_g.changeTalismanModel(p_l.enemyAttackTsId,1),p_g.changeTalismanModel(p_l.enemyDefTsId,2);else{var b_s=Engine2d.PlayerVo.freeStdInfo(Engine2d.ActorTypeDefine.PLAYER,Engine2d.PlayerVo);b_s.id=p_l.tpid,b_s.name=p_l.name,b_s.entryId=p_l.entryId,b_s.px=b_s.py=b_s.endPx=b_s.endPy=0,b_s.speed=LgcM.ins.heroVo.speed,b_s.rideId=1,LgcM.ins.addActorInfo(Engine2d.ActorTypeDefine.PLAYER,b_s),LgcM.ins.addActorEntity(Engine2d.ActorTypeDefine.PLAYER,b_s),(p_g=LgcM.ins.getActorById(b_s.id,Engine2d.ActorTypeDefine.PLAYER)).changeTalismanModel(p_l.enemyAttackTsId,1),p_g.changeTalismanModel(p_l.enemyDefTsId,2)}p_g.setNameTxtVisible(!1),p_g.initAutoCopy(GlobalDefine.pvp_born_pos),Engine2d.Hero.local.initAutoCopy(GlobalDefine.pvp_born_pos),Engine2d.Hero.local.setNameTxtVisible(!1);var d_u=this.getAttackVo(e);Engine2d.Hero.local.changeTalismanModel(d_u.attackTs,1),Engine2d.Hero.local.changeTalismanModel(d_u.defenceTs,2)},p_l.prototype.reqPvpEnter=function(e){void 0===e&&(e=0);var p_l=new c2w_asyncpvp_enter;e&&(p_l.isCross=1),DB.instance.query(c2w_asyncpvp_enter,p_l)},p_l.prototype.reqPvpInfo=function(e){void 0===e&&(e=0);var p_l=new c2m_asyncpvp_info;e&&(p_l.isCross=1),DB.instance.query(c2m_asyncpvp_info,p_l)},p_l.prototype.reqRoundFinish=function(e){var p_l=new c2m_asyncpvp_round_finish;p_l.round=e,DB.instance.query(c2m_asyncpvp_round_finish,p_l)},p_l.prototype.reqGlobalRecord=function(e){void 0===e&&(e=0);var p_l=new c2w_asyncpvp_broadcast;e&&(p_l.isCross=1),DB.instance.query(c2w_asyncpvp_broadcast,p_l)},p_l.prototype.reqChaseKill=function(e,p_l,p_g){if(void 0===p_g&&(p_g=0),this.getIsCan(p_g)){var b_s=new c2m_asyncpvp_chase_kill;b_s.pid=e,b_s.tsId=p_l,p_g&&(b_s.isCross=1),DB.instance.query(c2m_asyncpvp_chase_kill,b_s)}},p_l.prototype.sceneChange=function(){var e=Config.map[b_p.mapID],p_l=this.coverCross(this.isCross),p_g=this.getRoundVo(p_l);e&&e.funType===MapFunType.PVP&&"asyncpvp"==e.impl&&this.reqRoundStart(p_g?p_g.round:1)},p_l.prototype.reqRoundStart=function(e,p_l){void 0===p_l&&(p_l=0);var p_g=new c2m_asyncpvp_round_start;p_g.round=e,p_l&&(p_g.isCross=1),DB.instance.query(c2m_asyncpvp_round_start,p_g)},p_l.prototype.reqRoundBattle=function(e,p_l){var p_g=new c2m_asyncpvp_round_battle;p_g.round=e,p_g.groupId=p_l,DB.instance.query(c2m_asyncpvp_round_battle,p_g)},p_l.prototype.reqBuyProp=function(e){var p_l=new c2m_asyncpvp_buy_prop;p_l.id=e,DB.instance.query(c2m_asyncpvp_buy_prop,p_l)},p_l.prototype.reqRecord=function(e){void 0===e&&(e=0);var p_l=new c2m_asyncpvp_record;e&&(p_l.isCross=1),DB.instance.query(c2m_asyncpvp_record,p_l)},p_l.prototype.reqChallenge=function(e,p_l,p_g){void 0===p_g&&(p_g=0);var b_s=new c2m_asyncpvp_challenge;p_g&&(b_s.isCross=1),b_s.tsId=p_l,b_s.pid=e,DB.instance.query(c2m_asyncpvp_challenge,b_s)},p_l.prototype.reqAward=function(e){var p_l=new c2m_asyncpvp_push_season_record;p_l.time=e,DB.instance.query(c2m_asyncpvp_push_season_record,p_l)},p_l.prototype.reqSearchKill=function(e,p_l){void 0===p_l&&(p_l=0);var p_g=new c2w_asyncpvp_search_kill;p_g.name=e,p_l&&(p_g.isCross=1),DB.instance.query(c2w_asyncpvp_search_kill,p_g)},p_l.prototype.reqMatch=function(e){if(void 0===e&&(e=0),this.getIsCan(e)){var p_l=new c2m_asyncpvp_match;e&&(p_l.isCross=1),DB.instance.query(c2m_asyncpvp_match,p_l)}},p_l.prototype.reqResetCD=function(){var e=new c2m_asyncpvp_buy_reset_cd;DB.instance.query(c2m_asyncpvp_buy_reset_cd,e)},Object.defineProperty(p_l.prototype,"maxLevel",{get:function(){if(-1==this._maxLevel){var e=0;for(var p_l in Config.asyncpvp_danGrading){var p_g=Config.asyncpvp_danGrading[p_l];e<p_g.id&&(e=p_g.id)}this._maxLevel=e}return this._maxLevel},enumerable:!0,configurable:!0}),p_l.prototype.getIsMaxLevel=function(e){return Klrn(e,this)},p_l.prototype.reqPvpData=function(e){void 0===e&&(e=0),this.reqRecord(e),this.reqPvpInfo(e),this.reqGlobalRecord(e);var p_l=e?RankType.KF_asyncPvpRank:RankType.AsyncPvp;RankModel.instance.reqGetRank(p_l,1),e?this.reqCrossPvpData():DB.instance.query(c2m_asyncpvp_season_record,{})},p_l.prototype.updateSearchKill=function(e){Kkbv(e,this,PvpDefine,l_r)},p_l.prototype.updateCsRank=function(e){Gzqu(e,KFopenSerModel,ActivityTypeDefine)},p_l.prototype.exitMap=function(){Cklr(b_p,UI)},p_l.prototype.updateState=function(e){Utxd(e,this,l_r)},p_l.prototype.updateCsInfo=function(e){Uxnk(e,this,PvpDefine)},p_l.prototype.reqCrossPvpData=function(){KFopenSerModel.instance.reqHaveKFstatus(this.heroVo.id,RankType.KF_asyncPvpRank),ActivityModel.reqActivityRecord(ActivityTypeDefine.BG_cs_asyncPvpScoreRank),PvpController.ins.reqState(),RankModel.instance.reqGetRank_KF(RankType.KF_asyncPvpRank,1)},Object.defineProperty(p_l.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),p_l.prototype.isMatch=function(e){return Cpfu(e,this,PvpDefine)},p_l.prototype.getIsCan=function(e){if(e){var p_l=!0;return this.actTime(e)<=0?(b_p.broadcastNotice((j_x("1796_1878_1300")+j_x("396_2426"))),p_l=!1):this.isQualification?n_m.instance.isHangUpMap()||(b_p.broadcastNotice((j_x("1300_1241_2035")+j_x("1443_944_283"))),p_l=!1):(b_p.broadcastNotice((j_x("1971_1896_1662")+j_x("1998_832_869")+j_x("2281_507_1996")+j_x("115_1289"))),p_l=!1),p_l}return!0},p_l.prototype.actTime=function(e){var p_l=this.subVo?this.subVo.showTime:0,p_g=this.getAttackVo(e);return(p_g?p_g.endSeasonTime:0)-p_l-Math.floor(SyncTime.serverTime/1e3)},Object.defineProperty(p_l.prototype,"subVo",{get:function(){return this.actVo?this.actVo.subVo[0]:null},enumerable:!0,configurable:!0}),Object.defineProperty(p_l.prototype,"actVo",{get:function(){return ActivityModel.instance.crossPvpActVo},enumerable:!0,configurable:!0}),p_l.ITEM_ID=200011,p_l}(BaseModel);!function(e){var p_l,p_g=(p_l=ui.window.pvp.pvpNoticeUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Wlrm(this,Laya)},b_s.open=function(){Gmpz(UIM,b_s)},b_s.close=function(){Mltv(UIM,b_s)},b_s.prototype.onRemoved=function(){Woew(this,Laya)},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":b_s.close()}},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.PvpNoticePanel=p_g;var d_u,b_e=(d_u=ui.window.pvp.pvp_upGradeUI,__extends(d_m,d_u),d_m.open=function(e){Mhfw(e,UIM,d_m)},d_m.prototype.onRemoved=function(){Oetd(this,Laya)},d_m.close=function(){Ktfk(UIM,d_m)},d_m.prototype.onAniComplete=function(){this.ani1.off(Laya.Event.COMPLETE,this,this.onAniComplete);var e=this.dataSource;if(e.itemList){this.hasItemBox.visible=!0,this.noItemBox.visible=!1;var p_l=e.itemList?JSON.parse(e.itemList):[];this.list.array=b_p.getRewardDatas(p_l),this.c_grade.index=e.changeSegmentId-1}else this.hasItemBox.visible=!1,this.noItemBox.visible=!0,this.c_grade1.index=e.changeSegmentId-1},d_m.prototype.updateContent=function(e){e&&this.parent&&(this.dataSource=e,this.onAniComplete())},d_m.prototype.onMouseClick=function(e){switch(e.target.name){case"okBtn":var p_l=this.dataSource.time;d_x.instance.reqAward(p_l),d_m.close(),d_x.instance.checkSeasonRecord()}},d_m.prototype.onAdded=function(){Aefv(this,Laya)},d_m.prototype.onRender=function(e,p_l){Edwn(e,p_l)},d_m);function d_m(){var p_l=d_u.call(this)||this;return p_l.on(Laya.Event.ADDED,p_l,p_l.onAdded),p_l.list.array=null,p_l.list.itemRender=e.ItemBox,p_l.list.renderHandler=Laya.Handler.create(p_l,p_l.onRender,null,!1),p_l}e.PvpUpGradePanel=b_e;var d_w,f_t=(d_w=ui.window.pvp.pvp_downGradeUI,__extends(v_z,d_w),v_z.open=function(e){Wdzu(e,UIM,v_z)},v_z.close=function(){Cqet(UIM,v_z)},v_z.prototype.onAdded=function(){this.off(Laya.Event.ADDED,this,this.onAdded),this.on(Laya.Event.REMOVED,this,this.onRemoved),this.on(Laya.Event.CLICK,this,this.onMouseClick);var e=this.dataSource;this.c_grade.index=e.changeSegmentId-1,e.tarName?this.t_desc.text=Utils.$((j_x("1176_1629")+"{1}"+j_x("712_1835")+""+j_x("514_2224")+"-{2}"),e.tarName,Math.abs(e.diffScore)):this.t_desc.text=""},v_z.prototype.onRemoved=function(){Qzvz(this,Laya)},v_z.prototype.onMouseClick=function(e){switch(e.target.name){case"okBtn":var p_l=this.dataSource.time;d_x.instance.reqAward(p_l),v_z.close(),d_x.instance.checkSeasonRecord()}},v_z);function v_z(){var e=d_w.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e}e.PvpDownGradePanel=f_t;var d_h,r_t=(d_h=ui.window.pvp.pvp_seasonStartUI,__extends(t_n,d_h),t_n.open=function(){Mncb(UIM,t_n)},t_n.prototype.onAdded=function(){Eepr(this,Laya)},t_n.prototype.onAniComplete=function(){Ubul(this,Laya,d_x,Utils)},t_n.close=function(){Orqo(UIM,t_n)},t_n.prototype.onRemoved=function(){Uoai(this,Laya)},t_n.prototype.onMouseClick=function(e){switch(e.target.name){case"okBtn":t_n.close(),d_x.instance.checkSeasonRecord()}},t_n);function t_n(){var e=d_h.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.t_time.text="",e}e.PvpSeasonStartPanel=r_t;var f_y,p_q=(f_y=ui.window.pvp.pvp_seasonRewardUI,__extends(h_h,f_y),h_h.open=function(e){Shjw(e,UIM,h_h)},h_h.prototype.onAdded=function(){Kygf(this,Laya)},h_h.prototype.onRemoved=function(){Kjii(this,Laya)},h_h.close=function(){Adnb(UIM,h_h)},h_h.prototype.onAniComplete=function(){this.ani1.off(Laya.Event.COMPLETE,this,this.onAniComplete);var e=this.dataSource,p_l=e.itemList?JSON.parse(e.itemList):[];this.list.array=b_p.getRewardDatas(p_l),this.c_grade.index=e.curSegmentId-1},h_h.prototype.onMouseClick=function(e){switch(e.target.name){case"okBtn":var p_l=this.dataSource.time;d_x.instance.reqAward(p_l),h_h.close(),r_t.open()}},h_h.prototype.onRender=function(e,p_l){Onhf(e,p_l)},h_h);function h_h(){var p_l=f_y.call(this)||this;return p_l.on(Laya.Event.ADDED,p_l,p_l.onAdded),p_l.list.array=null,p_l.list.itemRender=e.ItemBox,p_l.list.renderHandler=Laya.Handler.create(p_l,p_l.onRender,null,!1),p_l}e.PvpSeasonRewardPanel=p_q}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.pvp.pvp_fightUI,__extends(b_s,p_l),b_s.prototype.removeMask=function(){Scsm(this)},b_s.prototype.updateNum=function(){var e=Config.CItem(this.itemID);if(e){var p_l=BagModel.instance.getItemCountByItemID(this.itemID),p_g=0<p_l?"#00802e":"#c92828";this.timeTxt.color=p_g,this.timeTxt.text=Utils.$((j_x("1661_1502")+"{1}:{2}/1"),e.name,p_l)}},b_s.prototype.onRemove=function(){Kswo(this,Laya,LED,l_r)},b_s.prototype.onGoodUpdate=function(){this.attackVo.sulNum<=0&&this.updateNum()},b_s.prototype.onAdded=function(){this._mask||(this._mask=new Laya.Sprite,this._mask.graphics.drawRect(0,0,this.maskSp.width,this.maskSp.height,"#FFFFFF"),this._mask.visible=!1),this.headSp.addChildAt(this._mask,0),this.headSp.mask=this._mask,this.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.PVP_ATTACK_TS_CHANGE,this,this.updateInfo),LED.on(l_r.PVP_SCORE_POINT_UPDATE,this,this.updateScore),LED.on(l_r.PVP_MATCH_UPDATE,this,this.updateMatch),LED.on(l_r.PVP_GLOBAL_RECORD_UPDATE,this,this.updateGRecord),LED.on(l_r.PVP_SEASON_RECORD,this,this.updateRecord),LED.on(l_r.RANK_UPDATE,this,this.onRankUpdate),LED.on(l_r.ITEM_ADD,this,this.onGoodUpdate),LED.on(l_r.ITEM_REMOVE,this,this.onGoodUpdate),LED.on(l_r.ITEM_AMOUNT_CHANGE,this,this.onGoodUpdate),this.updateData(),d_x.instance.reqPvpData()},b_s.prototype.updateGRecord=function(){var e=d_x.instance.getGlobalRecords(),p_l=!0;if(e&&0<e.length){this.t_null.visible=!1,this.recordTxt.visible=!0;var p_g=e[0],b_s=Config.talisman_talisman[p_g.tsId],d_u="";b_s&&(d_u=b_s.name),this.recordTxt.text=Utils.$(("{1}"+j_x("1365_1876")+"{2}"+j_x("1835_1959_743")+"{3}{4}"+j_x("844_799_869")),p_g.name,d_u,p_g.tName,p_g.tsNum),p_l=!1}this.t_null.visible=p_l,this.recordTxt.visible=!p_l},Object.defineProperty(b_s.prototype,"attackVo",{get:function(){return d_x.instance.getAttackVo()},enumerable:!0,configurable:!0}),b_s.prototype.updateScore=function(){var e=this.attackVo;if(e){this.scoreTxt.text=e.score.toString(),this.countTxt.text=e.sulNum+"/"+d_x.instance.maxNum;var p_l=0;for(var p_g in Config.asyncpvp_danGrading){var b_s=Config.asyncpvp_danGrading[p_g];if(b_s.score_limit[0]<=e.score&&b_s.score_limit[1]>=e.score){p_l=b_s.id;break}}this.c_grade.index=p_l-1,this.imgGrade.index=p_l-1,this.txtName.text=this.heroVo.name,this.showMatch(),this.showPlayer(this.heroVo.sex),this.showBlack(this.mSex);var d_u=Config.asyncpvp_danGrading[p_l];if(d_u){var b_e=d_u.score_limit[1],d_m=e.score;this.txtPro.text=d_m+"/"+b_e;var d_w=Math.floor(d_m/b_e*100);this.proBar.value=d_w/100}}},b_s.prototype.updateData=function(e){void 0===e&&(e=0);var p_l=this.attackVo;this.changeStatu(),-1==e&&""!=p_l.tarName&&d_x.instance.isMatch(PvpDefine.local)&&this.reqPvpEnter(),this.updateScore(),this.updateTime(),p_l&&0<p_l.sulTime&&Laya.timer.loop(1e3,this,this.updateTime),this.updateTotalTime(),this.updateSeasonTime(),Laya.timer.loop(1e3,this,this.updateSeasonTime)},b_s.prototype.updateItembox=function(e,p_l){Myvg(e,p_l)},b_s.prototype.updateTotalTime=function(){var e=this.attackVo.endSeasonTime,p_l=e-this.totalTime,p_g=e;this.txtTotalTime.text=Utils.formatTimeStr4(p_l)+"-"+Utils.formatTimeStr4(p_g)},b_s.prototype.updateInfo=function(e){Unba(e,this)},b_s.prototype.onRankUpdate=function(e){if(e.type==RankType.AsyncPvp){var p_l=e.myIdx,p_g=""+p_l;(0==p_l||1e3<p_l)&&(p_g="1000+"),this.txTranking.text=p_g}},b_s.prototype.updateTime=function(){var e=this.attackVo,p_l=0;if(e)if(0<(p_l=e.sulTime))this.timeTxt.color="#c92828",this.timeTxt.text=(j_x("203_383_1614")+j_x("2171_1702_2460")+" ")+Utils.formatTimeStr(p_l);else{if(Laya.timer.clear(this,this.updateTime),e.sulNum<=0)return void this.updateNum();this.timeTxt.text=""}else Laya.timer.clear(this,this.updateTime),this.timeTxt.text=""},Object.defineProperty(b_s.prototype,"itemID",{get:function(){var e=Config.global[GlobalDefine.async_pvp_extra_item];return e?e.i_info:0},enumerable:!0,configurable:!0}),Object.defineProperty(b_s.prototype,"coolingTime",{get:function(){var e=this.attackVo;return e?e.sulTime:0},enumerable:!0,configurable:!0}),b_s.prototype.updateSeasonTime=function(){var e=this.attackVo.endSeasonTime,p_l=e-Math.floor(SyncTime.serverTime/1e3);this.t_countDown.text=Utils.formatTimeStr2(p_l,!0);var p_g=e-this.totalTime,b_s=e;this.txtTotalTime.text=Utils.formatTimeStr4(p_g)+"-"+Utils.formatTimeStr4(b_s)},Object.defineProperty(b_s.prototype,"totalTime",{get:function(){var e=Config.global[GlobalDefine.asyncpvp_reset_season];return e?e.t_info[0]:1e3},enumerable:!0,configurable:!0}),b_s.prototype.updateItem=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("icon"),d_u=e.getChildByName("nameTxt"),b_e=e.getChildByName("lvTxt"),d_m=e.getChildByName("talentTxt"),d_w=e.getChildByName("fightTxt"),f_t=TalismanModel.instance.getTalismanById(p_g);if(f_t){var v_z=Config.talisman_talisman[f_t.id],d_h=Resource.ResUrl.getIconUrl(v_z.icon);b_s=Resource.ResManager.Instance.getImg(d_h,b_s),d_u.text=v_z.name,b_e.text=Utils.$((j_x("15_2342")+"{1}"),f_t.level);var r_t=TalismanModel.instance.calDeploymentsApt(f_t.deployments);d_m.text=Utils.$((j_x("115_1621")+"{1}"),r_t),d_w.text=Utils.$((j_x("383_767")+"{1}"),f_t.fight)}},b_s.prototype.onClick=function(p_l){var p_g,d_u=p_l.target;switch(d_u.name){case"btnAward":e.PvpAwardWin.open(d_x.instance.isReward);break;case"btnMatch":case"randBtn":if(!this.isCanClick)return;this._isTest=!1;var b_e=TalismanModel.instance.getTalismanVos(!0);if(!b_e||b_e.length<=0)return void b_p.broadcastNotice((j_x("1971_1896_1163")+j_x("203_383_799")+j_x(869)));if(0<this.coolingTime)return void b_p.confirm((j_x("68_2032_572")+j_x(2218))+this.costCD+(j_x("1263_869_1496")+j_x("1792_1614_2171")+j_x("1702_2460")+""),(function(){d_x.instance.reqResetCD()}));if(this.attackVo.sulNum<=0&&BagModel.instance.getItemCountByItemID(this.itemID)<=0)return void r_f.instance.isWindow(this.itemID);d_x.instance.reqMatch();break;case"configBtn":e.PvpConfigPanel.open();break;case"attackBtn":if((p_g=this.attackVo)&&p_g.isActived){var d_m=d_u.dataSource.mState;if(0===d_m)return void b_p.broadcastNotice((j_x("203_383_1614")+j_x("2171_283")));if(1===d_m)return void b_p.broadcastNotice((j_x("203_383_235")+j_x("2348_2462_1779")));DungeonModel.instance.isInFb?b_p.broadcastNotice((j_x("1300_1241_2035")+j_x("1443_944_283"))):(this.reqPvpEnter(),b_s.close(),b_p.registerAutoOpenPanel(b_s,b_p.mapID))}else b_p.broadcastNotice((j_x("1777_320_868")+j_x("1879_203_383")+j_x("799_869")));break;case"recordBtn":e.PvpGRecordPanel.open();break;case"rankImg":e.PvpRankPanel.open();break;case"recordImg":e.PvpRecordPanel.open();break;case"closeBtn":case"backBtn":b_s.close();break;case"helpBtn":e.PvpNoticePanel.open();break;case"b_exchange":e.ShopAllPanel.open(ShopConstant.type_honor)}},Object.defineProperty(b_s.prototype,"isCanClick",{get:function(){return!!this.attackVo.isBack},enumerable:!0,configurable:!0}),Object.defineProperty(b_s.prototype,"costCD",{get:function(){if(!this._moneyStr){var e=Config.global[GlobalDefine.asyncpvp_buy_reset_cd].t_info;this._moneyStr=z_j.getMoneyName(e[0],e[1])}return this._moneyStr},enumerable:!0,configurable:!0}),b_s.open=function(){Edlr(UIM,b_s)},b_s.close=function(){Csdj(UIM,b_s)},Object.defineProperty(b_s.prototype,"mSex",{get:function(){return this.heroVo.sex==GameDefine.boy?GameDefine.girl:GameDefine.boy},enumerable:!0,configurable:!0}),Object.defineProperty(b_s.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),b_s.prototype.showPlayer=function(e){void 0===e&&(e=-1);var p_l=1==e,p_g=2==e;this.headBoy.visible=p_l,this.headGirl.visible=p_g},b_s.prototype.changeStatu=function(e,p_l){void 0===e&&(e=-1),void 0===p_l&&(p_l="");var p_g=-1!=e;this.btnMatch.visible=!p_g,this.txtStatu.visible=p_g,this.txtStatu.text=p_l},b_s.prototype.createImg=function(e,p_l){var p_g;return void 0===p_l&&(p_l=-1),(p_g=0<this._headPoolList.length?this._headPoolList.pop():new Laya.Image).x=e.x,p_g.y=e.y,p_g.skin=e.skin,p_g.scaleX=p_l,p_g.alpha=0,this.headShowSp.addChild(p_g),p_g},b_s.prototype.updateHeadList=function(e){this._headList=[];var p_l=this._showBlackImg;this._headList.push(this.createImg(p_l,1));var p_g=[2,1,2,1];e==GameDefine.girl&&(p_g=[1,2,1,2]);for(var b_s=0;b_s<p_g.length;b_s++)p_l=p_g[b_s]==GameDefine.boy?this.headBoy2:this.headGirl2,this._headList.push(this.createImg(p_l))},b_s.prototype.showHead=function(e){void 0===e&&(e=2),0<this.headShowSp.numChildren&&this.headShowSp.removeChildren(),this.updateHeadList(e),this.changeStatu(1,(j_x("169_1451_283")+"...")),this.showBlack(),this.showHeadShowSp(),this.changeHead()},b_s.prototype.reqPvpEnter=function(){Eike(d_x)},b_s.prototype.enterScene=function(){Idqy(this)},b_s.prototype.moveRoll=function(){Ksnm(r_n,this)},b_s.prototype.changeHead=function(){var e=this._headList.shift();e.alpha=1;var p_l=e.y-2*e.height/3;Laya.Tween.to(e,{j_l:p_l,alpha:0},250,null,Laya.Handler.create(this,this.onStay,[e]))},b_s.prototype.moveNext=function(e){void 0===e&&(e=null),this.recycleHead(e),1<this._headList.length?this.changeHead():(0<this._headList.length&&((e=this._headList.shift()).alpha=1),this.moveEnd())},b_s.prototype.showMatch=function(e){void 0===e&&(e=!1),this.playerBox2.visible=e},b_s.prototype.showBlack=function(e){void 0===e&&(e=-1);var p_l=1==e,p_g=2==e;this.blackBoy.visible=p_l,this.blackGirl.visible=p_g,this._showBlackImg=p_l?this.blackBoy:this.blackGirl;var b_s=-1==e;this.showHeadShowSp(b_s)},b_s.prototype.updateRecord=function(){var e=d_x.instance.isReward,p_l=!0;(this.awardRp.visible=e)?this.moveRoll():(this.removeRoll(),d_x.instance.getIsMaxLevel(this.attackVo.curHighSegmentId)&&(p_l=!1)),this.btnAward.visible=p_l},b_s.prototype.recycleHead=function(e){Idiz(e,this)},b_s.prototype.removeRoll=function(){Itcb(Laya,this)},b_s.prototype.onStay=function(e){void 0===e&&(e=null),0<this._headList.length&&(this._headList[0].alpha=1),Laya.timer.once(200,this,this.moveNext,[e])},b_s.prototype.moveEnd=function(){Eoft(this,j_x,Laya)},b_s.prototype.showHeadShowSp=function(e){void 0===e&&(e=!0),this.headShowSp.visible=e},b_s.prototype.updateMatch=function(e){Itwk(e,this)},b_s.prototype.removeAll=function(){Qkah(Laya,this)},b_s);function b_s(){var e=p_l.call(this)||this;return e.SCALE_MIN=.8,e.SCALE_MAX=1.2,e._headPoolList=[],e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.recordBtn.visible=!0,e.removeMask(),e}e.PvpPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.pvp.pvp_tempPropUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Mnwz(this,Laya,LED,l_r)},b_s.prototype.setIcon=function(e,p_l){""!=e?(p_l.visible=!0,p_l=Resource.ResManager.Instance.getImg(e,p_l)):p_l.visible=!1},b_s.prototype.onClick=function(e){var p_l=e.target;switch(p_l.name){case"closeBtn":case"sureBtn":b_s.close();break;case"buyBtn":var p_g=p_l.dataSource.shopId,d_u=Config.asyncpvp_shop[p_g],b_e=this.getRoundVo();"hp"==d_u.effects[0]&&b_e.hp==b_e.hpMax?b_p.broadcastNotice((j_x("1681_1547_2376")+j_x("1300_1463"))):b_p.checkCoin(d_u.money[0],d_u.money[1])?"hp"==d_u.effects[0]&&(0==d_u.effects[1]&&b_e.hpMax*d_u.effects[2]/1e4+b_e.hp>b_e.hpMax||0<d_u.effects[1]&&b_e.hp+d_u.effects[1]>b_e.hpMax)?b_p.confirm((j_x("1773_62_1681")+j_x("1547_695_1360")+j_x("254_1681_1547")+j_x("1067_2128")+""+j_x("1315_402_254")+j_x("716_1341_2059")+""+j_x("68_2032_2020")+j_x("243_1355_2420")+""),(function(){d_x.instance.reqBuyProp(p_g)})):d_x.instance.reqBuyProp(p_g):b_p.broadcastNotice(Utils.$(("{1}"+j_x("2462_1779")),Config.item_coin[d_u.money[0]].name))}},b_s.prototype.onRemove=function(){Yzrr(this,Laya,LED,l_r)},b_s.prototype.updateData=function(){if(0==this.round||this.getRoundVo().round!=this.round){this.round=this.getRoundVo().round;var e=Config.asyncpvp_shop,p_l=[],p_g=0;for(var b_s in e)p_l.push([e[b_s].id,e[b_s].weight]),p_g+=e[b_s].weight;var d_u=Math.floor(Math.random()*p_g),b_e=[];for(var b_s in p_g=0,p_l){if(d_u<p_l[b_s][1]+p_g&&p_g<=d_u){b_e.push(p_l[b_s][0]);break}p_g+=p_l[b_s][1]}for(var b_s in d_u=Math.floor(Math.random()*p_g),p_g=0,p_l)if(b_e.indexOf(p_l[b_s][0])<0){if(d_u<p_l[b_s][1]+p_g&&p_g<=d_u){b_e.push(p_l[b_s][0]);break}p_g+=p_l[b_s][1]}for(var b_s in d_u=Math.floor(Math.random()*p_g),p_g=0,p_l)if(b_e.indexOf(p_l[b_s][0])<0){if(d_u<p_l[b_s][1]+p_g&&p_g<=d_u){b_e.push(p_l[b_s][0]);break}p_g+=p_l[b_s][1]}this.list.array=b_e}this.list.refresh();var d_m=LgcM.ins.heroVo;d_m&&(this.goldTxt.text=d_m.gold.toString(),this.pointTxt.text=d_m.asyncpvpPoint.toString(),this.attAddTxt.text=d_x.instance.getShopAddProp("attack")/100+"%",this.defAddTxt.text=d_x.instance.getShopAddProp("defense")/100+"%")},b_s.prototype.updateItem=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("itemBox").getChildByName("iconSp"),d_u=e.getChildByName("nameTxt"),b_e=e.getChildByName("propTxt"),d_m=e.getChildByName("moneyTxt"),d_w=e.getChildByName("buyBtn"),f_t=e.getChildByName("getImg"),v_z=e.getChildByName("moneyClip"),d_h=(e.getChildByName("buyTxt"),Config.asyncpvp_shop[p_g]),r_t=d_h.money[1],t_n=LgcM.ins.heroVo,f_y=d_h.money[0],p_q=f_y==ItemType.gold?t_n.gold:t_n.asyncpvpPoint;d_u.text=d_h.name,b_e.text=d_h.desc,d_m.color=r_t<=p_q?"#00802e":"#e32828",d_m.text=""+r_t;var h_h=this.getRoundVo(),n_j=d_x.instance.getPropShops()[h_h.round-1],j_l=!!n_j&&n_j.id==p_g;f_t.visible=j_l,d_w.visible=!f_t.visible,d_w.disabled=j_l;var l_m=Resource.ResUrl.getIconUrl(d_h.icon);this.setIcon(l_m,b_s),d_w.dataSource={shopId:p_g},v_z=Resource.ResManager.Instance.getImg(Resource.ResUrl.getIconUrl(Config.item_coin[f_y].minIcon),v_z),this.attAddTxt.text=(j_x("996_1702_712")+j_x("1835_223_402")+"")+d_x.instance.getShopAddProp("attack")/100+"%",this.defAddTxt.text=(j_x("996_1702_741")+j_x("207_223_402")+"")+d_x.instance.getShopAddProp("defense")/100+"%",this.updateShieldInfo()},b_s.prototype.getRoundVo=function(){return Gwua(d_x)},b_s.open=function(){Kxdz(UIM,b_s)},b_s.prototype.getAttackVo=function(){return Oytq(d_x)},b_s.prototype.updateShieldInfo=function(){LgcM.ins.heroVo;var e=this.getRoundVo();this.shieldBar.visible=!0,this.shieldBar.value=e.hp/e.hpMax,this.shieldBarTxt.text=Utils.$("{1}/{2}",e.hp,e.hpMax)},b_s.close=function(){Izrm(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.round=0,e.list.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.list.array=null,e}e.PvpPropBuyPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.pvp.pvp_rankUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Qsge(this,Laya,LED,l_r)},b_s.prototype.getAttackVo=function(){return Wkcu(d_x)},b_s.prototype.updateReward=function(){var e=this.getAttackVo().score;this.myScoreTxtRwd.text=e+"";var p_l=[];for(var p_g in Config.asyncpvp_danGrading){var b_s=Config.asyncpvp_danGrading[p_g];p_l.unshift(b_s.id),b_s.score_limit[0]<=e&&b_s.score_limit[1]>=e&&(this.myGradeTxtRwd.text=b_s.name)}this.rewardList.array=p_l},b_s.open=function(){Kbfa(UIM,b_s)},b_s.prototype.onRankUpdate=function(e){if(e.type==RankType.AsyncPvp){this.rankList.array=e.item,0==e.myIdx||1e3<e.myIdx?this.myRankTxt.text="1000+":this.myRankTxt.text=e.myIdx.toString();var p_l=this.getAttackVo();this.scoreTxt.text=p_l.score+"",p_l.score<50?(this.noticeTxt.visible=!0,this.myRankBox.visible=!1):(this.noticeTxt.visible=!1,this.myRankBox.visible=!0)}},b_s.prototype.onRemove=function(){Mxkd(this,Laya,LED,l_r)},b_s.prototype.updateItem=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("rankTxt"),d_u=e.getChildByName("nameTxt"),b_e=e.getChildByName("countTxt"),d_m=e.getChildByName("c_grade");for(var d_w in b_s.text=Utils.$((j_x(573)+"{1}"+j_x(1511)),p_g.rank),d_u.text=p_g.name,b_e.text=p_g.value.toString(),Config.asyncpvp_danGrading){var f_t=Config.asyncpvp_danGrading[d_w];f_t.score_limit[0]<=p_g.value&&f_t.score_limit[1]>=p_g.value&&(d_m.index=f_t.id-1)}},b_s.prototype.getRoundVo=function(){return Sbxl(d_x)},b_s.prototype.updateRwdItem=function(e,p_l){Eykt(e,p_l)},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close()}},b_s.prototype.selectItem=function(e){var p_l=this.rankList.selectedItem;p_l&&n_d.instance.reqViewRoleInfo(p_l.id),this.rankList.selectedIndex=-1},b_s.prototype.onTabSelect=function(e,p_l){if(-1!=e)switch(this.rankBox.visible=0<this.tab.selectedIndex,this.rewardBox.visible=0==this.tab.selectedIndex,e){case 0:this.updateReward();break;case 1:RankModel.instance.reqGetRank(RankType.AsyncPvp,1);break;case 2:var p_g=this.getAttackVo().curSeasonId-1;if(p_g<=0)return b_p.broadcastNotice((j_x("1327_711_803")+j_x("573_1737_844")+j_x("252_2423"))),void(this.tab.selectedIndex=p_l);DB.instance.query(c2w_get_asyncpvp_season_prev_rank,{seasonId:p_g,page:1})}},b_s.prototype.onPreRankUpdate=function(e){this.rankList.array=e.item,0==e.myIdx||1e3<e.myIdx?this.myRankTxt.text="1000+":this.myRankTxt.text=e.myIdx.toString(),this.scoreTxt.text=e.myVal.toString(),e.myVal<50?(this.noticeTxt.visible=!0,this.myRankBox.visible=!1):(this.noticeTxt.visible=!1,this.myRankBox.visible=!0)},b_s.close=function(){Kfag(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.tab.selectHandler=Laya.Handler.create(e,e.onTabSelect,null,!1),e._tab=new p_c(e.tab),e.rankList.vScrollBarSkin="",e.rankList.scrollBar.elasticDistance=50,e.rankList.scrollBar.elasticBackTime=50,e.rankList.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.rankList.selectHandler=Laya.Handler.create(e,e.selectItem,null,!1),e.rankList.selectEnable=!0,e.rewardList.vScrollBarSkin="",e.rewardList.scrollBar.elasticDistance=50,e.rewardList.scrollBar.elasticBackTime=50,e.rewardList.itemRender=f_c,e.rewardList.renderHandler=Laya.Handler.create(e,e.updateRwdItem,null,!1),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.PvpRankPanel=p_g}(UI=UI||{});var f_c=function(e){function p_l(){var p_l=e.call(this)||this;return p_l.list.renderHandler=Laya.Handler.create(p_l,p_l.onListRender,null,!1),p_l}return __extends(p_l,e),p_l.prototype.setData=function(e){var p_l=Config.asyncpvp_danGrading[e];this.list.array=b_p.getRewardDatas(p_l.season_reward),this.c_grade.index=p_l.id-1,9999999==p_l.score_limit[1]?this.nameTxt.text=p_l.score_limit[0]+"+":this.nameTxt.text=p_l.score_limit[0]+"-"+p_l.score_limit[1]},p_l.prototype.onListRender=function(e,p_l){e&&(e.isShowName=!1,e.selectImg.removeSelf(),e.setItemData(e.dataSource))},p_l}(ui.window.pvp.pvp_rank_item_rewardUI);!function(e){var p_l,p_g=(p_l=ui.window.pvp.pvp_recordUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){this.isCross=this.dataSource,this.inputTxt.text=(j_x("1777_173_2456")+j_x("855_386_1511")+j_x(1794)),this.on(Laya.Event.CLICK,this,this.onClick),this.inputTxt.on(Laya.Event.FOCUS,this,this.onFocus),LED.on(l_r.PVP_CHASE_KILL,this,this.updateChaseKill),LED.on(l_r.PVP_SEARCH_KILL,this,this.updateSearchKill),LED.on(l_r.SCENE_CHANGE,this,this.sceneChange),LED.on(l_r.PVP_RECORD_UPDATE,this,this.updateRecord),0!=this.tab.selectedIndex?this.tab.selectedIndex=0:this.onTabSelect(0),d_x.instance.reqRecord(this.isCross)},b_s.prototype.onTabSelect=function(e){-1!=e&&this.updateRecord()},b_s.prototype.updateRecord=function(){var e=this.tab.selectedIndex;switch(this.list.visible=this.killBox.visible=!1,e){case 0:this.list.visible=!0,this.list.array=d_x.instance.getRecords(3,this.isCross),this.t_null.visible=!this.list.array||0==this.list.array.length;break;case 1:this.list.visible=!0,this.list.array=d_x.instance.getRecords(1,this.isCross),this.t_null.visible=!this.list.array||0==this.list.array.length;break;case 2:this.killBox.visible=!0,this.updateChaseKill(null),this.t_null.visible=!1}},b_s.prototype.sceneChange=function(){Owbb(b_s)},b_s.prototype.onClick=function(p_l){var p_g=p_l.target;switch(p_g.name){case"closeBtn":b_s.close();break;case"attackBtn":var d_u=p_g.dataSource[0];if(d_u){if(!d_x.instance.getIsCan(this.isCross))return;d_u.isCross=this.isCross,e.PvpChallengeSelectedPanel.open(d_u),b_s.close()}break;case"killBtn":if(this._killVo){if(!d_x.instance.getIsCan(this.isCross))return;if(this.isCross&&KFopenSerModel.instance.isSameServer(this._killVo.svrId))return void b_p.broadcastNotice((j_x("2462_1919_2319")+j_x("893_944_1998")+j_x("2217_1738")));var b_e=new PvpRecordVo;b_e.pid=this._killVo.pid,b_e.ori=1,b_e.isCross=this.isCross,e.PvpChallengeSelectedPanel.open(b_e),b_s.close()}else b_p.broadcastNotice((j_x("1777_320_5")+j_x("1038_1624_2319")+j_x("893_2046_855")+j_x(386)));break;case"checkBtn":var d_m=this.inputTxt.text;if(!d_m||""===d_m)return void b_p.broadcastNotice((j_x("1777_173_2456")+j_x("1896_407_2046")+j_x("1511_1794")));d_x.instance.reqSearchKill(d_m,this.isCross)}},b_s.prototype.updateSearchKill=function(){var p_l=d_x.instance.getData(PvpDefine.searchKill,this.isCross),p_g=p_l?p_l.length:0;0<p_g&&(1<p_g?e.PvpKillListPanel.open([Laya.Handler.create(this,this.updateKillVo),p_l]):this.updateKillVo(p_l[0]))},b_s.open=function(e){void 0===e&&(e=0),UIM.open(b_s,null,e,!1,!1,!0,!0)},b_s.prototype.onRemove=function(){Cyhi(this,Laya,LED,l_r)},b_s.prototype.updateChaseKill=function(e){this._killVo=e;var p_l=this.killBox.getChildByName("nameTxt"),p_g=this.killBox.getChildByName("fightTxt"),b_s=this.killBox.getChildByName("countTxt"),d_u=this.killBox.getChildByName("scoreTxt"),b_e=this.killBox.getChildByName("rankTxt"),d_m=e&&e.svrId?"s"+e.svrId+".":"";p_l.text=e?d_m+this.toStr(e.name):"",p_g.text=e?this.toStr(e.power):"",b_s.text=e?this.toStr(e.ts):"",d_u.text=e?this.toStr(e.point):"",b_e.text=e?this.toStr(e.rank)+"":""},b_s.prototype.onFocus=function(){1==this.inputTxt.focus&&(j_x("1777_173_2456")+j_x("855_386_1511")+j_x(1794))==this.inputTxt.text&&(this.inputTxt.text="")},b_s.prototype.toStr=function(e){return e?e+"":""},b_s.prototype.updateItem=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("nameTxt"),d_u=e.getChildByName("descTxt"),b_e=e.getChildByName("scoreTxt"),d_m=e.getChildByName("attackBtn"),d_w=e.getChildByName("timeTxt"),f_t=p_g.tsvrId,v_z=f_t?"s"+f_t+".":"";b_s.text=v_z+p_g.name+(""+j_x("514_2224")+"")+p_g.atkScore+"";var d_h=f_t?"#ff0000":"#ffffff";b_s.color=d_h;var r_t,t_n=Math.floor(SyncTime.serverTime/1e3-p_g.time),f_y=Math.floor(t_n/86400);switch(d_w.text=0<f_y?f_y+(j_x("2308_711")):Utils.formatTimeStr2(t_n)+(j_x(711)),p_g.mode){case 1:r_t=(j_x("1365_1876")+"{1}"+j_x("383_1045_352")+j_x(2221)+"{2}"+j_x("844_799_869"));break;case 2:r_t=(j_x("1365_1876")+"{1}"+j_x("1653_1749_571")+j_x("203_48_383")+","+j_x("383_1045_352")+j_x(2221)+"{2}"+j_x("844_799_869"));break;case 3:r_t=(j_x("1365_1876")+"{1}"+j_x("1653_1749_33")+j_x("562_2319_893")+","+j_x("383_1045_352")+j_x(2221)+"{2}"+j_x("844_799_869"));break;default:r_t=(j_x("1365_1876")+"{1}"+j_x("383_1045_352")+j_x(2221)+"{2}"+j_x("844_799_869"))}var p_q="",h_h=Config.talisman_talisman[p_g.ackTsId];h_h&&(p_q=h_h.name),d_u.text=Utils.$(r_t,p_q,p_g.round),b_e.text=Utils.$((j_x("1653_383_281")+j_x(1590)+""+j_x("352_2221")+"{1}"+j_x("514_2224")),0==p_g.score?"-"+p_g.score:p_g.score<0?p_g.score:"+"+p_g.score),d_m.visible=p_g.isEnemy(),d_m.dataSource=[p_g]},b_s.prototype.updateKillVo=function(e){var p_l=new PvpChaseKillVo;p_l.updateCs(e),this.updateChaseKill(p_l)},b_s.close=function(){Iczw(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.tab.selectHandler=Laya.Handler.create(e,e.onTabSelect,null,!1),e.list.vScrollBarSkin="",e.list.scrollBar.elasticDistance=100,e.list.scrollBar.elasticBackTime=200,e.list.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.PvpRecordPanel=p_g;var d_u,b_e=(d_u=ui.window.pvp.pvp_broadcastUI,__extends(d_m,d_u),d_m.prototype.onAdded=function(){Avdo(this,Laya,LED,l_r,d_x)},d_m.open=function(e){void 0===e&&(e=0),UIM.open(d_m,null,e,!1,!1,!0,!0)},d_m.prototype.getServerColor=function(e){return Gubx(e,PvpDefine)},d_m.prototype.onClick=function(p_l){var p_g=p_l.target;switch(p_g.name){case"closeBtn":d_m.close();break;case"attackBtn":var b_s=p_g.dataSource[0];if(b_s){if(!d_x.instance.getIsCan(this.isCross))return;var d_u=new PvpRecordVo;d_u.pid=b_s.tpid,d_u.ori=2,d_u.isCross=this.isCross,e.PvpChallengeSelectedPanel.open(d_u),d_m.close()}}},d_m.prototype.onRemoved=function(){Uizd(this,Laya,LED,l_r)},d_m.prototype.updateItem=function(e,p_l){var p_g,b_s,d_u=e.dataSource,b_e=e.getChildByName("nameTxt"),d_m=e.getChildByName("descTxt"),d_w=e.getChildByName("scoreTxt"),f_t=e.getChildByName("attackBtn"),v_z=e.getChildByName("timeTxt"),d_h=e.getChildByName("descHtml"),r_t=d_u.svrId,t_n=d_u.tsvrId,f_y=this.toStr(r_t),p_q=this.toStr(t_n),h_h="#ffffff",n_j="#2e3e49",j_l=!1;this.isCross?(r_t&&(j_l=!0,p_g=this.isSameServer(r_t),h_h=this.getServerColor(p_g)),t_n&&(b_s=this.isSameServer(t_n),n_j=this.getServerColor(b_s))):p_g=LgcM.ins.heroVo.name==d_u.name,b_e.text=f_y+d_u.name,b_e.color=h_h,v_z.text="";var l_m=Config.talisman_talisman[d_u.tsId],z_m="";l_m&&(z_m=l_m.name),j_l?(z_j.setHtml(d_h,24,"#2e3e49",10,"left"),d_h.innerHTML=Utils.$((j_x("1365_1876")+"{1}"+j_x("1835_1959_743")+"{2}{3}"+j_x("844_799_869")),z_m,Utils.setColor(p_q+d_u.tName,n_j),d_u.tsNum)):d_m.text=Utils.$((j_x("1365_1876")+"{1}"+j_x("1835_1959_743")+"{2}{3}"+j_x("844_799_869")),z_m,d_u.tName,d_u.tsNum),d_m.visible=!j_l,d_h.visible=j_l,d_w.text=Utils.formatTimeStr3(d_u.time),f_t.label=(j_x(48)+"  "+j_x(383)),f_t.dataSource=[d_u],f_t.visible=!p_g},d_m.prototype.updateChaseKill=function(p_l){if(p_l.pid!=b_p.playerId){var p_g=new PvpRecordVo;p_g.pid=p_l.pid,p_g.ori=2,p_g.isCross=this.isCross,e.PvpChallengeSelectedPanel.open(p_g),d_m.close()}else b_p.broadcastNotice((j_x("1749_2462_1919")+j_x("48_383_1749")+j_x("2082_364")))},d_m.prototype.isSameServer=function(e){return Okkd(e,KFopenSerModel)},d_m.prototype.toStr=function(e){return Eddv(e,PvpDefine)},d_m.close=function(){Cpcl(UIM,d_m)},d_m);function d_m(){var e=d_u.call(this)||this;return e.list.vScrollBarSkin="",e.list.scrollBar.elasticDistance=100,e.list.scrollBar.elasticBackTime=200,e.list.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.PvpGRecordPanel=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.pvp.PvpRecordTipUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){this.isCross=this.dataSource,this.x=Stage.width-this.width-30+1e3,this.y=UIM.instance.getMainLetUI().getTaskBottonY()-this.height+1e3;var e=Stage.width-this.width-30;Laya.Tween.to(this,{f_u:e,j_l:UIM.instance.getMainLetUI().getTaskBottonY()-this.height},100),this.on(Laya.Event.CLICK,this,this.onClick)},b_s.prototype.onRemoved=function(){Kqcc(this,Laya)},b_s.prototype.closeSelf=function(){Oaoo(b_s)},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"closeBtn":this.closeSelf();break;case"swapBtn":d_x.instance.clearRecord(this.isCross),e.PvpRecordPanel.open(this.isCross),this.closeSelf()}},b_s.open=function(e){void 0===e&&(e=0),UIM.instance.getMainLetUI()&&UIM.open(b_s,null,e,!1,!1)},b_s.close=function(){Snym(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.mouseEnabled=!0,e.mouseThrough=!1,e}e.PvpRecordTip=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.pvp.pvp_winUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Kftn(this,Laya)},b_s.prototype.onRemove=function(){this.off(Laya.Event.CLICK,this,this.onClick),e.PvpMagicPk.close();var p_l=this.getRoundVo();p_l&&(d_x.instance.reqRoundFinish(p_l.round),p_l.canContinueChallenge()&&d_x.instance.reqRoundStart(p_l.round+1,this.isCross))},b_s.prototype.getRoundVo=function(){return Icur(d_x,this)},b_s.prototype.getAttackVo=function(){return Kbca(d_x,this)},Object.defineProperty(b_s.prototype,"isCross",{get:function(){return d_x.instance.isCross},enumerable:!0,configurable:!0}),b_s.prototype.updateData=function(){var e=this.getAttackVo(),p_l=this.getRoundVo(),p_g=d_x.instance.round,b_s=p_l?p_g%3:0;this.c_nextCount.index=3-b_s,this.c_winCount0.index=p_g%10,this.c_winCount1.index=Math.floor(p_g/10),0==this.c_winCount1.index?(this.c_winCount1.visible=!1,this.c_winCount0.x=this.c_winCount1.x+10):(this.c_winCount1.visible=!0,this.c_winCount0.x=this.c_winCount1.x+20);var d_u=this.dataSource;e.score+=d_u.score,this.t_score.text=(j_x("832_869_514")+j_x(2224)+"+")+d_u.score,this.t_winpoint.text=(j_x("1045_1516_932")+j_x(2348)+"+")+d_u.point,this.t_honor.text=(j_x("287_2189_932")+j_x(2348)+"+")+d_u.honor,this.t_winbox.text=0==b_s?(j_x("566_1045_2235")+j_x(83)+""+j_x("566_1045_869")+j_x(965)+"*1"):"",this.t_honor.visible=!this.isCross;var b_e=0;for(var d_m in Config.asyncpvp_danGrading){var d_w=Config.asyncpvp_danGrading[d_m];if(d_w.score_limit[0]<=e.score&&d_w.score_limit[1]>=e.score){b_e=d_w.id;break}}var f_t=Config.asyncpvp_danGrading[b_e+1];f_t&&(d_x.instance.isCross,this.t_next.text=e.score+"/"+f_t.score_limit[0],this.p_next.value=e.score/f_t.score_limit[0]),this.nextBox.visible=!1},b_s.prototype.onClick=function(e){Otyy(e,b_s)},b_s.open=function(e){Ijof(e,d_x,UIM,b_s)},b_s.close=function(){Oxtd(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.PvpWinPanel=p_g;var d_u,b_e=(d_u=ui.window.pvp.pvp_loseUI,__extends(d_m,d_u),d_m.prototype.onAdded=function(){Eede(this,Laya)},d_m.prototype.updateData=function(){var e,p_l=this.dataSource;this.t_score.text=(j_x("1653_383_514")+j_x(2224)+"")+(p_l.score<0?p_l.score:"-"+p_l.score),d_x.instance.isCross||(e=0==p_l.score),this.t_null.visible=e},d_m.prototype.onRemove=function(){this.off(Laya.Event.CLICK,this,this.onClick);var p_l=this.dataSource;this.getAttackVo().score+=p_l.score,e.PvpMagicPk.close();var p_g=this.getRoundVo();p_g&&d_x.instance.reqRoundFinish(p_g.round)},d_m.prototype.onClick=function(e){Alsx(e,d_m)},d_m.prototype.getRoundVo=function(){return Qgmm(d_x)},d_m.prototype.getAttackVo=function(){return Usdu(d_x)},d_m.open=function(e){Ilse(e,UIM,d_m)},d_m.close=function(){Swnu(UIM,d_m)},d_m);function d_m(){var e=d_u.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.PvpLosePanel=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.pvp.pvp_pkUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Spze(this,Laya)},b_s.prototype.updateEnemyShield=function(){this.dataSource;var e=this.getRoundVo();this.enemyBar.value=z_j.getPercent(e.enemyHp,e.enemyMaxHp),this.enemyBarTxt.text=Utils.$("{1}/{2}",Math.floor(e.enemyHp),Math.floor(e.enemyMaxHp))},b_s.prototype.getGradeID=function(e,p_l){for(var p_g=0,b_s=0;b_s<e.length;b_s++){var d_u=e[b_s];if(d_u.ackTsId==p_l){p_g=d_u.atkTsGrade;break}}return p_g},b_s.prototype.onRemove=function(){Gorz(Laya,this)},b_s.prototype.delayRunTime=function(){Uzff(Laya,this,SyncTime)},b_s.prototype.timeLoop=function(){var p_l=this.dataSource,p_g=this.getRoundVo();if(3e3<SyncTime.tickCount-this._lastTime){p_g.hp=p_l.winPid===b_p.playerId?p_l.hp:0,p_g.enemyHp=p_l.winPid===b_p.playerId?0:Math.floor(.3*p_g.enemyMaxHp),this.updateEnemyShield(),this.updateMyShield(),Laya.timer.clear(this,this.timeLoop),p_l.winPid===b_p.playerId?e.PvpWinPanel.open(p_l):e.PvpLosePanel.open(p_l);var b_s=LgcM.ins.getActorById(p_g.tpid,Engine2d.ActorTypeDefine.PLAYER);return b_s&&b_s.stopAutoCopy(),void Engine2d.Hero.local.stopAutoCopy()}p_g.hp-=this._mySpeed,p_g.enemyHp-=this._enemySpeed,this.updateEnemyShield(),this.updateMyShield()},b_s.prototype.updateItem=function(e,p_l){var p_g=e.dataSource,b_s=p_g[0],d_u=p_g[1],b_e=e.getChildByName("iconSp"),d_m=e.getChildByName("starBox"),d_w=e.getChildByName("bg"),f_t=Config.talisman_talisman[b_s],v_z=f_t?Resource.ResUrl.getIconUrl(f_t.icon):"";this.setIcon(v_z,b_e),TalismanModel.instance.changeActStar(d_m,d_u),d_w.index=f_t?f_t.quality-1:0},b_s.prototype.getRoundVo=function(){return Sscu(d_x)},b_s.prototype.getAttackVo=function(){return Euch(d_x)},b_s.prototype.updateMyShield=function(){LgcM.ins.heroVo;var e=this.getRoundVo();this.myBar.value=z_j.getPercent(e.hp,e.hpMax),this.myBarTxt.text=Utils.$("{1}/{2}",Math.floor(e.hp),Math.floor(e.hpMax))},b_s.prototype.updateData=function(){var e=this.dataSource,p_l=this.getRoundVo();this.enemyNameTxt.text=p_l.name;var p_g=this.getGradeID(p_l.ts,p_l.enemyAttackTsId);this.enemyList.array=[[p_l.enemyAttackTsId,p_g]],this.updateEnemyShield();var b_s=Config.state_state[p_l.state],d_u=Config.state_stateSub[p_l.subState];this.enemy_statetext.text=b_s.desc+""+d_u.desc;var b_e=this.getAttackVo();this.myNameTxt.text=this.heroVo.name;var d_m=TalismanModel.instance.getTalismanById(b_e.attackTs),d_w=d_m?d_m.grade:0;this.myList.array=[[b_e.attackTs,d_w]],this.updateMyShield();var f_t=StateModel.instance.getStateLv(),v_z=StateModel.instance.getStateSubLv(),d_h=Config.state_state[f_t],r_t=Config.state_stateSub[v_z];this.friend_statetext.text=d_h.desc+""+r_t.desc;var t_n=this.getRoundVo(),f_y=6*t_n.state+t_n.subState-6*f_t-v_z;0<f_y?(this.statesuppress_text.text=20<5*f_y?(j_x("1176_2046_381")+j_x("843_2360_1012")+j_x("1610_489")+""+j_x("2360_1012_859")+j_x("119_1628_2251")+"20%"):(j_x("1176_2046_381")+j_x("843_2360_1012")+j_x("1610_489")+""+j_x("2360_1012_859")+j_x("119_437_223"))+5*f_y+"%",this.statesuppress_text.color="#b92929"):(this.statesuppress_text.text=f_y<0?5*f_y<-20?(j_x("381_843_1610")+j_x("489_1653_2221")+""+j_x("1315_402_859")+j_x("119_437_223")+"20%"):(j_x("381_843_1610")+j_x("489_1653_2221")+""+j_x("1315_402_859")+j_x("119_437_223"))+5*-f_y+"%":(j_x("381_843_87")+j_x(495)+""+j_x("1971_1896_381")+j_x("843_1610_489")+j_x("407_1398")),this.statesuppress_text.color="#71de66"),e.winPid===b_p.playerId?(this._mySpeed=(p_l.hp-e.hp)/30,this._enemySpeed=p_l.enemyHp/30):(this._mySpeed=p_l.hp/30,this._enemySpeed=Math.floor(.7*p_l.enemyMaxHp)/30)},b_s.prototype.setIcon=function(e,p_l){""!=e?(p_l.visible=!0,p_l=Resource.ResManager.Instance.getImg(e,p_l)):p_l.visible=!1},Object.defineProperty(b_s.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),b_s.open=function(e){Iqhn(e,UIM,b_s)},b_s.close=function(){Wmpe(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.enemyList.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.myList.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.PvpScenePkPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.shoppopupUI,__extends(b_s,p_l),b_s.open=function(e){Axyy(e,UIM,b_s)},b_s.prototype.onRemove=function(e){Yray(e,this,Laya)},b_s.prototype.onAdd=function(e){Qxnl(e,this,Laya)},b_s.prototype.onMouseClick=function(e){var p_l=e.target,p_g=parseInt(this.useNumTxt.text.split("/")[0]),d_u=Config.asyncpvp_asyncpvpShop[this.dataSource.id],b_e=d_x.instance.exchangeInfo&&d_x.instance.exchangeInfo[this.dataSource.id]||0,d_m=d_x.instance.getConfigMax(d_u)-b_e;switch(p_l.name){case"cutBtn":(p_g-=1)<1&&(p_g=1),this.useNumTxt.text=p_g.toString()+"/"+d_m,this.numTxt.color=d_u.money*p_g>LgcM.ins.heroVo.honor?"#c92828":"#008931",this.numTxt.text=(d_u.money*p_g).toString();break;case"cutTenBtn":(p_g-=10)<1&&(p_g=1),this.useNumTxt.text=p_g.toString()+"/"+d_m,this.numTxt.color=d_u.money*p_g>LgcM.ins.heroVo.honor?"#c92828":"#008931",this.numTxt.text=(d_u.money*p_g).toString();break;case"addBtn":d_m-(p_g+=1)<0&&(p_g=d_m),this.useNumTxt.text=p_g.toString()+"/"+d_m,this.numTxt.color=d_u.money*p_g>LgcM.ins.heroVo.honor?"#c92828":"#008931",this.numTxt.text=(d_u.money*p_g).toString();break;case"addTenBtn":d_m-(p_g+=10)<0&&(p_g=d_m),this.useNumTxt.text=p_g.toString()+"/"+d_m,this.numTxt.color=d_u.money*p_g>LgcM.ins.heroVo.honor?"#c92828":"#008931",this.numTxt.text=(d_u.money*p_g).toString();break;case"useBtn":DB.instance.query(c2m_asyncpvp_exchange_buy_req,{id:this.dataSource.id,count:parseInt(this.useNumTxt.text.split("/")[0])});case"closeBtn":b_s.close()}},b_s.close=function(){Eiwk(UIM,b_s)},b_s.prototype.updateView=function(){var e=Config.asyncpvp_asyncpvpShop[this.dataSource.id],p_l=new ModuleItemVO;p_l.id=e.itemId,p_l.amount=1,this.itemBox.isShowName=!1,this.itemBox.setItemData(p_l),this.nameTxt.text=Config.CItem(e.itemId).name;var p_g=LgcM.ins.heroVo.honor;this.lvTxt.color=e.money>p_g?"#c92828":"#008931",this.lvTxt.text=Utils.$("{1}",e.money);var b_s=e.money*parseInt(this.useNumTxt.text.split("/")[0]);this.numTxt.color=p_g<b_s?"#c92828":"#008931",this.numTxt.text=Utils.$("{1}",b_s);var d_u=Config.item_coin[CoinDefine.HONOR],b_e=Resource.ResUrl.getIconUrl(d_u.minIcon);this.moneyClip.skin=b_e,this.moneyClip.clipX=this.moneyClip.clipY=1,this.moneyClip.index=0,this.moneyClip.visible=!0,this.moneyall.skin=b_e,this.moneyall.clipX=this.moneyall.clipY=1,this.moneyall.index=0,this.moneyall.visible=!0;var d_m=d_x.instance.exchangeInfo&&d_x.instance.exchangeInfo[this.dataSource.id]||0;this.useNumTxt.text=parseInt(this.useNumTxt.text.split("/")[0])+"/"+(d_x.instance.getConfigMax(e)-d_m)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdd),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.PvpShopPopup=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.pvp.pvp_statInfoUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Iqat(this,Laya)},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"sureBtn":d_x.instance.exitMap(),b_s.close()}},b_s.prototype.onRemove=function(){Spvt(this,Laya)},b_s.prototype.updateData=function(){var e=this.dataSource;if(e){var p_l=Config.talisman_talisman[e.ackTsId],p_g="";p_l&&(p_g=p_l.name),this.nameTxt.text=p_g,this.winCountTxt.text=Utils.$("{1}",e.tsNum),this.scoreTxt.text=(0<e.score?"+":"")+e.score,this.honorTxt.text=(0<e.honor?"+":"")+e.honor,this.rankUpTxt.text=Utils.$((j_x("1749_2046_2434")+j_x("1511_589_867")+j_x("1628_371_1012")+j_x(573)+"{1}"+j_x(1511)),e.rank),this.rankUpTxt.visible=0<e.rank;var b_s=Math.floor(e.tsNum/3);this.itemTxt.text=0<b_s?(j_x("566_1045_869")+j_x(965)+"*")+b_s:(j_x(814));var d_u=0,b_e=d_x.instance.getAttackVo(d_x.instance.isCross);for(var d_m in Config.asyncpvp_danGrading){var d_w=Config.asyncpvp_danGrading[d_m];if(d_w.score_limit[0]<=b_e.score&&d_w.score_limit[1]>=b_e.score){d_u=d_w.id;break}}var f_t,v_z=Config.asyncpvp_danGrading[d_u+1],d_h=d_x.instance.isCross,r_t=!d_h;v_z?(d_h||(f_t=!0),this.t_next.text=b_e.score+"/"+v_z.score_limit[0],this.p_next.value=b_e.score/v_z.score_limit[0]):f_t=!1,this.nextBox.visible=f_t,this.honorBox.visible=r_t}},b_s.open=function(p_l){d_x.instance.isCross?b_p.registerAutoOpenPanel(e.CrossPvpPanel,-1):b_p.registerAutoOpenPanel(e.PvpPanel,-1),UIM.open(b_s,["pvp.atlas"],p_l,!1,!1,!0,!1,{container:"top"})},b_s.close=function(){Gkqp(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.PvpStatInfoPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.qqLive.QQLiveUI,__extends(b_s,p_l),b_s.prototype.onAdd=function(){Cosj(this,Laya)},b_s.prototype.onStageClick=function(e){var p_l=e.target;p_l&&this.contains(p_l)||b_s.close()},b_s.prototype.onRemove=function(){Ydkg(this,Laya)},b_s.prototype.onClick=function(e){switch(e.target){case this.btn_go:Sdk.Wanba.openUrl("https://iwan.qq.com/fun/mindex?ADTAG=txsp.wd.xyx&hidetitlebar=1&autoplay=1")}},b_s.open=function(){Acsg(UIM,b_s)},b_s.close=function(){Wxwz(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdd),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.QQLiveUI=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.rankItemUI,__extends(b_s,p_l),b_s.prototype.init=function(){Ybwf(this)},b_s.prototype.onclick=function(e){Yxdz(e,this)},b_s.prototype.onInfo=function(e){Kwbl(e,n_d)},Object.defineProperty(b_s.prototype,"dataSource",{set:function(e){null!=e&&(this._dataSource=e,this.setRankItem(e),this.on(Laya.Event.MOUSE_DOWN,this,this.onclick,[!0]),this.on(Laya.Event.MOUSE_OUT,this,this.onclick,[!1]),this.on(Laya.Event.CLICK,this,this.onInfo,[e]))},enumerable:!0,configurable:!0}),b_s.prototype.setRankItem=function(e){this.nameLabel.text=e.getPlayName();var p_l=RankController.instance.getCurOpenRankType();this.realmLabel.text=p_l==RankType.Realm?this.getStateName(e.getValue()):""+e.getValue(),this.guildNameLabel.text=""+e.getGuildName();var p_g=e.getRankIndex();this.rankIndex.visible=!(3<p_g),this.indexLabel.visible=3<p_g,3<p_g?this.indexLabel.text=p_g.toString():this.rankIndex.index=p_g-1},b_s.prototype.getStateName=function(e){if(e){var p_l="",p_g=Math.floor(e/100),b_s=e%100;return Config.state_state[p_g]&&(p_l=Config.state_state[p_g].desc+""+Config.state_stateSub[b_s].desc),p_l}return""},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.RankItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.rankUI,__extends(b_s,p_l),b_s.prototype.init=function(){this.rankList.repeatY=14,this.rankList.spaceY=5,this.rankList.itemRender=e.RankItem,this.rankList.vScrollBarSkin="",this.rankList.scrollBar.elasticBackTime=100,this.rankList.scrollBar.elasticDistance=200,this.menuTap.selectedIndex=0,this.menuTap.selectHandler=new laya.utils.Handler(this,this.onSelectMenuTap),this.closeBtn.on(Laya.Event.CLICK,this,this.onClose),this.backBtn.on(Laya.Event.CLICK,this,this.onClose),this.worshipBtn.on(Laya.Event.CLICK,this,this.onWorship),this.on(Laya.Event.ADDED,this,this.onAdded),this.on(Laya.Event.REMOVED,this,this.onRemove)},b_s.prototype.initView=function(){Wyxh(this,LgcM,RankController,j_x)},b_s.prototype.updateWorshipBtnState=function(){var e=RankController.instance.getCurOpenRankType(),p_l=RankModel.instance.checkIsWorship(e);this.worshipBtn.gray=p_l,this.hasWorshipImg.visible=p_l,RankModel.instance.getRankDataByType(e)||(this.hasWorshipImg.visible=!1),this.upDateRed()},b_s.prototype.onSelectMenuTap=function(e){if(-1!=e){var p_l=RankController.instance.getCurOpenRankType();switch(RankModel.instance.checkIsWorship(p_l),this.menuTap.selectedIndex=e){case 0:RankController.instance.setCurOpenRankType(RankType.Realm),RankModel.instance.reqGetRank(RankType.Realm,1);break;case 1:RankController.instance.setCurOpenRankType(RankType.Power),RankModel.instance.reqGetRank(RankType.Power,1);break;case 2:RankController.instance.setCurOpenRankType(RankType.Talisman),RankModel.instance.reqGetRank(RankType.Talisman,1)}this.initView()}},b_s.prototype.getRanTitlekName=function(e){switch(e){case RankType.Realm:return(j_x("381_843"));case RankType.Power:return(j_x("383_767"));case RankType.Talisman:return(j_x("799_869_383")+j_x(767))}},b_s.open=function(e){"number"!=typeof e&&(e=null),UIM.open(b_s,["rank.atlas"],e)},b_s.prototype.getRankTypeName=function(e){switch(e){case RankType.Realm:return(j_x("381_843"));case RankType.Power:return(j_x("383_767"));case RankType.Talisman:return(j_x("799_869_383")+j_x(767))}},b_s.prototype.upDateRed=function(){var e=RankModel.instance.checkIsWorship(RankType.Realm);this.redPointsta.visible=!e;var p_l=RankModel.instance.checkIsWorship(RankType.Power);this.redPointfig.visible=!p_l;var p_g=RankModel.instance.checkIsWorship(RankType.Talisman);this.redPointtalisman.visible=!p_g,-1!=this.menuTap.selectedIndex&&(0==this.menuTap.selectedIndex?this.redpoint.visible=!e:1==this.menuTap.selectedIndex?this.redpoint.visible=!p_l:this.redpoint.visible=!p_g)},b_s.prototype.getMenuSelectIndex=function(e){switch(e){case RankType.Realm:return 0;case RankType.Power:return 1;case RankType.Talisman:return 2;default:return 0}},b_s.prototype.onRemove=function(){Qsht(LED,l_r,this)},b_s.prototype.updateView=function(e){var p_l=e?e.type:RankController.instance.getCurOpenRankType(),p_g=Config.rank_ranklist[p_l].cycle/60;this.refreshTimeLab.text=p_g+(j_x("2224_1394")),RankController.instance.setCurOpenRankType(p_l);var b_s=RankModel.instance.getRankDataByType(p_l);0==b_s.getItems().length?(this.redpoint.visible=!1,this.redPointfig.visible=!1,this.redPointsta.visible=!1,this.redPointtalisman.visible=!1,this.nobody_lab.visible=!0):this.nobody_lab.visible=!1,this.rankList.array=b_s.getItems();var d_u=LgcM.ins.heroVo;this.ownNameLabel.text=""+d_u.name;var b_e=b_s.getOwnIndex();this.rankIndexLabel.text=0==b_e?(j_x("206_1067_1077")):""+b_e,this.stateNumLabel.text=""+Config.state_state[d_u.stateLv].desc,this.rankTypeLabel.text=this.getRankTypeName(p_l)+"",this.rankValueLabel.text=p_l==RankType.Realm?this.getStateName(b_s.getOwnValue()):""+b_s.getOwnValue(),this.rankValueLabel.x=this.rankTypeLabel.x+this.rankTypeLabel.width,this.rank2.text=this.getRanTitlekName(p_l);var d_m=RankModel.instance.checkIsWorship(p_l);this.worshipBtn.disabled=!1,this.worshipBtn.gray=d_m,this.hasWorshipImg.visible=d_m,RankModel.instance.getRankDataByType(p_l).hasItems()||(this.hasWorshipImg.visible=!1),b_s.getItems().length<=0&&(this.worshipBtn.disabled=!0),this.upDateRed()},b_s.close=function(){Oamr(UIM,b_s)},b_s.prototype.onWorship=function(){var p_l=RankController.instance.getCurOpenRankType();RankModel.instance.checkIsWorship(p_l)?b_p.broadcastError(ErrorDefine.WorshipAlready):e.RankWorshipView.open()},b_s.prototype.onRankList=function(e,p_l){},b_s.prototype.onAdded=function(){LED.on(l_r.RANK_UPDATE,this,this.updateView),LED.on(l_r.RANK_WORSHIP_RESULT,this,this.updateWorshipBtnState),LED.on(l_r.RANK_WORSHIP_INFO,this,this.updateWorshipBtnState);var e=this.dataSource||RankType.Realm;RankController.instance.setCurOpenRankType(e),this.menuTap.selectedIndex=this.getMenuSelectIndex(e),RankModel.instance.reqWorshipInfo(),RankModel.instance.reqGetRank(e,1),this.nobody_lab.visible=!1,this.updateWorshipBtnState()},b_s.prototype.getStateName=function(e){var p_l,p_g=Math.floor(e/100);return p_l=0==e?(e=1)%100:e%100,Config.state_state[p_g].desc+""+Config.state_stateSub[p_l].desc},b_s.prototype.onClose=function(){Egnm(b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.RankView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.rankWorshipUI,__extends(b_s,p_l),b_s.prototype.init=function(){this.roleModel=new n_k,this.modelContainer.addChild(this.roleModel),this.modelContainer.scaleX=1.2,this.modelContainer.scaleY=1.2,this.nameLabel.text="",this.rewardNum1.text="",this.rewardNum2.text="",this.on(Laya.Event.ADDED,this,this.onAdded),this.on(Laya.Event.REMOVED,this,this.onRemove)},b_s.prototype.onAdded=function(){LED.on(l_r.RANK_WORSHIP_RESULT,this,this.updateView);var e=RankController.instance.getCurOpenRankType();RankModel.instance.reqRankWorship(e),Laya.timer.once(600,this,this.onDelay)},b_s.prototype.onAutoClose=function(){Uuvs(UIM,b_s)},b_s.close=function(){Ggaq(UIM,b_s)},b_s.prototype.onRemove=function(){Laya.stage.off(Laya.Event.CLICK,this,this.onClickStage),LED.off(l_r.RANK_WORSHIP_RESULT,this,this.updateView),this.roleModel&&this.roleModel.clearRes()},b_s.prototype.showIcon=function(e,p_l){if(null==e&&null==p_l)return null;if(100<e){var p_g=Config.CItem(e),b_s=Config.item_material[p_g.id].icon,d_u=Resource.ResUrl.getIconUrl(b_s);this.onesp.scaleX=.5,this.onesp.scaleY=.5,this.setIcon(d_u,this.onesp)}else p_g=Config.item_coin[e].icon,d_u=Resource.ResUrl.getIconUrl(p_g),this.onesp.scaleX=.5,this.onesp.scaleY=.5,this.setIcon(d_u,this.onesp);d_u=100<p_l?(p_g=Config.CItem(p_l),b_s=Config.item_material[p_g.id].icon,Resource.ResUrl.getIconUrl(b_s)):(p_g=Config.item_coin[p_l].icon,Resource.ResUrl.getIconUrl(p_g)),this.twosp.scaleX=.5,this.twosp.scaleY=.5,this.setIcon(d_u,this.twosp)},b_s.prototype.setIcon=function(e,p_l){""!=e?(p_l.visible=!0,p_l=Resource.ResManager.Instance.getImg(e,p_l)):p_l.visible=!1},b_s.open=function(){Qmsk(UIM,b_s)},b_s.prototype.onDelay=function(){Wios(Laya,this)},b_s.prototype.updateView=function(e){var p_l=Config.rank_worship[e.type].reward[0][0],p_g=Config.rank_worship[e.type].reward[0][1],b_s=Config.rank_worship[e.type].reward[1][0],d_u=Config.rank_worship[e.type].reward[1][1];this.rewardNum1.text="+"+p_g,this.rewardNum2.text="+"+d_u;var b_e=RankModel.instance.randomWorshipedPlayer(e.type);if(b_e){this.nameLabel.text=b_e.getPlayName();var d_m=b_e.getPlayerId(),d_w=b_e.getEntryId(),f_t=new Engine2d.PlayerVo;f_t.id=d_m,f_t.entryId=d_w,f_t.type=Engine2d.ActorTypeDefine.PLAYER,this.roleModel.changRoleSkin(f_t,!1,!0,b_e.getFashionWeapon(),b_e.getFashionClothes()),this.showIcon(p_l,b_s)}},b_s.prototype.onClickStage=function(e){var p_l=e.target;p_l&&this.contains(p_l)||b_s.close()},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.RankWorshipView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.recharge.zhoukaUI,__extends(b_s,p_l),b_s.prototype.onAdd=function(){Kqjk(this,Laya,LED,l_r,RechargeModel)},b_s.prototype.onRemove=function(){Kapx(this,Laya,LED,l_r)},b_s.prototype.onClick=function(e){var p_l=e.target;switch(p_l.name){case"closeBtn":case"backBtn":b_s.close();break;case"receiveBtn":this.onReceive(p_l.dataSource.type)}},b_s.prototype.onReceive=function(e){if(RechargeModel.instance.cardInfos[e])RechargeModel.instance.receivedayreward(e);else{var p_l=Config.recharge_monthcard[e],p_g=parseFloat(p_l.money.substring(1));if(0<p_g&&b_p.recharge(p_g,p_l.id))return}},b_s.prototype.updateMonthCardDate=function(){var e=SyncTime.serverTime,p_l=RechargeModel.instance.cardInfos[CardType.monthcard];if(p_l=RechargeModel.instance.cardInfos[CardType.weekcard]){this.cdBox1.visible=!0,this.getLocalTime(p_l.rewardTime,1);var p_g,b_s=p_l.startTime,d_u=Math.ceil((Math.floor(e/1e3)-b_s)/86400),b_e=Math.ceil(Config.recharge_monthcard[CardType.weekcard].duration/86400);this.cdLab1.text=Math.floor(b_e-d_u).toString()+(j_x(2308)),this.receiveLab1.visible=!1,this.weekBought.visible=!0,this.weekNotBuy.visible=!1,(p_g=new Date(1e3*p_l.rewardTime)).setHours(24),p_g.setMinutes(0),p_g.setSeconds(0),e>=p_g.valueOf()?(this.receiveBtn1.disabled=!1,this.receiveImg1.visible=!0,this.receiveImg1.index=0,this.redimg1.visible=!0):(this.receiveBtn1.disabled=!0,this.redimg1.visible=!1,this.receiveImg1.visible=!0,this.receiveImg1.index=1)}else this.receiveImg1.visible=!1,this.receiveBtn1.disabled=!1,this.receiveLab1.visible=!0,this.redimg1.visible=!1,this.cdBox1.visible=!1,this.weekBought.visible=!1,this.weekNotBuy.visible=!0;(p_l=RechargeModel.instance.cardInfos[CardType.lifeLongCard])?(this.residueTime.visible=!0,this.price_img.visible=!1,this.getDec.visible=!0,this.notGetDec.visible=!1,this.getclip.visible=!0,(p_g=new Date(1e3*p_l.rewardTime)).setHours(24),p_g.setMinutes(0),p_g.setSeconds(0),e>=p_g.valueOf()?(this.receiveBtn2.disabled=!1,this.getclip.index=0,this.get_red.visible=!0):(this.receiveBtn2.disabled=!0,this.getclip.index=1,this.get_red.visible=!1)):(this.getDec.visible=!1,this.notGetDec.visible=!0,this.residueTime.visible=!1,this.getclip.visible=!1,this.price_img.visible=!0,this.get_red.visible=!1)},b_s.open=function(){GPlatform.isShowRecharge&&UIM.open(b_s,["recharge.atlas"],null,null,!1,!0,!0)},b_s.prototype.getLocalTime=function(e,p_l){var p_g=new Date(1e3*e),b_s=p_g.getFullYear()+"-",d_u=(p_g.getMonth()+1<10?"0"+(p_g.getMonth()+1):p_g.getMonth()+1)+"-",b_e=(p_g.getDate()<10?"0"+p_g.getDate():p_g.getDate())+" ",d_m=p_g.getHours()+":",d_w=p_g.getMinutes()+":",f_t=p_g.getSeconds();return 1==p_l?b_s+d_u+b_e:2==p_l?b_s+d_u+b_e+d_m+d_w+f_t:3==p_l?b_e:void 0},b_s.close=function(){Ifrv(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdd),e.on(Laya.Event.REMOVED,e,e.onRemove),e.receiveBtn.dataSource={type:CardType.monthcard},e.receiveBtn1.dataSource={type:CardType.weekcard},e.receiveBtn2.dataSource={type:CardType.lifeLongCard},e}e.MonthCardPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.recharge.privilegeUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Obud(this,Laya)},b_s.prototype.onRemoved=function(){Gkim(this,Laya)},b_s.prototype.onclick=function(){Syrd(b_s)},b_s.prototype.init=function(){Efmk(this,Config)},Object.defineProperty(b_s.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),b_s.open=function(e){UIM.open(b_s,["recharge.atlas"],{index:e},null,null,!0)},b_s.close=function(){Ogmk(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e}e.PrivilegePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.recharge.rechargeitemUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Ifbo(this,Laya)},b_s.prototype.onRemove=function(){Snye(this,Laya)},b_s.prototype.rechargestatus=function(){Gvns(RechargeModel)},b_s.prototype.onClick=function(e){var p_l=this.dataSource;if(0==b_p.recharge(p_l.money,p_l.id)){var p_g="@gm recharge "+p_l.gold;n_d.instance.reqChat(1,p_g),b_p.broadcastNotice((j_x("2258_2376_2142")+j_x("1919_2287_206")+j_x("155_2191")+"")),this.rewardImg.visible=!1,Laya.timer.once(1500,this,this.rechargestatus)}},b_s.prototype.GetBit=function(e,p_l){return Evsj(e,p_l)},b_s.prototype.setItemData=function(e,p_l){var p_g=Config.recharge_recharge,b_s=p_l+1;this.goldimg.skin="res/ui/recharge/recharge_yuanbao_0"+b_s+".png",this.text.text=" "+e.money.toString()+".00",this.moneyDesc.changeText(Utils.$(("{1}+{2}"+j_x("1263_869")),p_g[e.id].gold,p_g[e.id].firstSingleStall[0][1]));var d_u=RechargeModel.instance.getRechargestatuvo();for(var b_e in d_u)0<this.GetBit(d_u[b_e].firstSingleStall,p_l+1)&&(this.rewardImg.visible=!1,this.moneyDesc.changeText(Utils.$(("{1}"+j_x("1263_869")),p_g[e.id].gold)))},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.RechargeItemPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.recharge.rechargeUI,__extends(d_u,p_l),d_u.prototype.onAdd=function(){Wsgv(this,Laya,LED,l_r)},d_u.prototype.onClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":this.closeSelf();break;case"vipBtn":e.VipRechardePanel.open()}},d_u.prototype.upDateList=function(){for(var e=RechargeModel.instance.getRechargestatuvo(),p_l=0,p_g=1;p_g<9;p_g++)for(var b_s in e)0<this.GetBit(e[b_s].firstSingleStall,p_g)&&p_l++;8<=p_l&&(this.doubleImg.visible=!1),this.contentDiv.style.color="#f0ecd8",this.contentDiv.style.fontSize=24,this.contentDiv.style.font="SimHei",this.contentDiv.style.wordWrap=!0,this.contentDiv.style.align="center",this.contentDiv.style.valign="center",this.contentDiv.style.leading=15;var d_u=Config.recharge_vip,b_e=(Config.recharge_recharge,this.heroVo.vipLv),d_m=this.heroVo.vipExp;if(b_e<10&&(this.viplv1.x=132,this.viplv1.visible=!0,this.viplv2.visible=!1,this.viplv1.index=b_e,this.maxvipimg.visible=!1),10<=b_e&&(this.viplv1.x=129,this.maxvipimg.visible=!0,this.viplv1.visible=!0,this.viplv2.visible=!0,this.viplv1.index=1,this.viplv2.index=b_e-10),0==d_u[this.heroVo.vipLv].id){if(this.minivipimg.visible=!0,this.maxvipimg.visible=!1,!d_u[this.heroVo.vipLv+1])return;var d_w=d_u[this.heroVo.vipLv].exp/100;this.vipbarLab.text=d_m+"/"+d_u[this.heroVo.vipLv].exp,d_m/=100,this.vipBar.value=d_m/d_w,d_w-=d_m,this.contentDiv.innerHTML=(j_x("1953_2258_2376"))+Utils.setColor(Utils.$("{1}",parseInt(d_w.toString())),"#ffc85e")+(j_x("1263_282_1163")+j_x("402_803"))+Utils.setColor(" VIP","#FFC85E")+Utils.setColor(Utils.$("{1}",b_e+1),"#ffc85e")}d_u[this.heroVo.vipLv].exp<=0?(this.minivipimg.visible=!1,this.maxvipimg.visible=!0,this.vipBar.value=1,this.vipbarLab.text=this.heroVo.vipExp.toString()+"/"+d_u[this.heroVo.vipLv].exp.toString()):0<d_u[this.heroVo.vipLv].exp&&0<d_u[this.heroVo.vipLv].id&&(this.minivipimg.visible=!0,this.maxvipimg.visible=!1,d_u[this.heroVo.vipLv].exp==this.heroVo.vipExp||(d_u[this.heroVo.vipLv].exp>this.heroVo.vipExp?(d_u[this.heroVo.vipLv].exp,d_w=(d_u[this.heroVo.vipLv].exp-this.heroVo.vipExp)/100,this.vipBar.value=d_m/d_u[this.heroVo.vipLv].exp,this.contentDiv.innerHTML=(j_x("1953_2258_2376"))+Utils.setColor(Utils.$("{1}",parseInt(d_w.toString())),"#ffc85e")+(j_x("1263_282_1163")+j_x("402_803"))+Utils.setColor(" VIP","#FFC85E")+Utils.setColor(Utils.$("{1}",b_e+1),"#ffc85e")):this.heroVo.vipExp<=0?this.vipBar.value=0:0<this.heroVo.vipExp&&(this.vipBar.value=this.heroVo.vipExp/d_u[this.heroVo.vipLv].exp)),this.vipbarLab.text=this.heroVo.vipExp.toString()+"/"+d_u[this.heroVo.vipLv].exp.toString())},d_u.prototype.GetBit=function(e,p_l){return Ghtv(e,p_l)},d_u.prototype.onRechargeList=function(){Ssut(this,RechargeModel)},d_u.prototype.onRemove=function(){Mulq(this,Laya,LED,l_r)},d_u.prototype.onRender=function(e,p_l){Ggjf(e,p_l,this)},Object.defineProperty(d_u.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),d_u.prototype.closeSelf=function(){Glna(d_u)},d_u.open=function(){if(GPlatform.isShowRecharge){var p_l=ActivityModel.instance.firstRechargeVo;p_l&&p_l.gold<=0?e.FirstRechargePanel.open():(UIM.open(d_u,["recharge.atlas"],null,null,null,!0),RechargeModel.instance.rechargestatus())}},d_u.close=function(){Orbh(UIM,d_u)},d_u);function d_u(){var b_s=p_l.call(this)||this;return b_s.list.repeatY=4,b_s.list.itemRender=e.RechargeItemPanel,b_s.list.renderHandler=p_g.create(b_s,b_s.onRender,null,!1),b_s.on(Laya.Event.ADDED,b_s,b_s.onAdd),b_s.on(Laya.Event.REMOVED,b_s,b_s.onRemove),b_s.onRechargeList(),b_s}e.RechargePanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.recharge.vipUI,__extends(d_u,p_l),d_u.prototype.updateVipList=function(){Ulte(this)},d_u.prototype.onAdd=function(){Ixhp(this,Laya,LED,l_r)},d_u.prototype.listbarvalue=function(){for(var e=RechargeModel.instance.vipreceive,p_l=1;p_l<=Config.global[GlobalDefine.vip_maxLv].i_info+1;++p_l)if(this.GetBit(e,p_l)<=0)return this.PosvipNum=0,this.vipItemPosition(p_l-1,p_l-1),p_l},d_u.prototype.vipItemPosition=function(e,p_l){void 0===e&&(e=1),void 0===p_l&&(p_l=1),this.contentDiv.style.color="#f0ecd8",this.contentDiv.style.fontSize=24,this.contentDiv.style.font="SimHei",this.contentDiv.style.wordWrap=!0,this.contentDiv.style.align="center",this.contentDiv.style.valign="center",this.contentDiv.style.leading=15,this.PosvipNum+=e;var p_g=this.PosvipNum,b_s=RechargeModel.instance.getVipReward();if(p_g>=Config.global[GlobalDefine.vip_maxLv].i_info&&(p_g=Config.global[GlobalDefine.vip_maxLv].i_info,this.PosvipNum=p_g),p_g<=0&&(p_g=0,this.PosvipNum=p_g),this.beforeBtn.visible=!(this.PosvipNum<=0),this.retreatBtn.visible=!(this.PosvipNum>=Config.global[GlobalDefine.vip_maxLv].i_info),this.onvipShowRender(b_s[p_g],p_g),p_g>this.heroVo.vipLv){p_g>Config.global[GlobalDefine.vip_maxLv].i_info&&(p_g=Config.global[GlobalDefine.vip_maxLv].i_info),p_g<1&&(p_g=0);var d_u=Config.recharge_vip,b_e=this.heroVo.vipExp,d_m=p_g+1>Config.global[GlobalDefine.vip_maxLv].i_info?Config.global[GlobalDefine.vip_maxLv].i_info:p_g,d_w=(d_u[p_g-1].exp-this.heroVo.vipExp)/100;this.vipbarLab.text=b_e+"/"+d_u[p_g-1].exp,this.vipBar.value=b_e/d_u[p_g-1].exp,this.contentDiv.innerHTML=(j_x("1953_2258_2376"))+Utils.setColor(Utils.$("{1}",parseInt(d_w.toString())),"#ffc85e",3,"#000000")+(j_x("1263_282_1163")+j_x("402_803"))+Utils.setColor(" VIP","#FFC85E",2,"#000000")+Utils.setColor(Utils.$("{1}",d_m),"#ffc85e",2,"#000000")}return this.PosvipNum},d_u.prototype.onvipShowRender=function(e,p_l){Euej(e,p_l,this)},d_u.prototype.onClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":case"receiveBtn":d_u.close();break;case"rechargeBtn":ActivityModel.instance.firstRechargeVo,e.RechargePanel.open(),d_u.close();break;case"retreatBtn":var p_g=0;this.vipItemPosition(p_g+=1);break;case"beforeBtn":p_g=0,this.vipItemPosition(p_g-=1)}},d_u.prototype.upDateList=function(e){void 0===e&&(e=0),this.contentDiv.style.color="#f0ecd8",this.contentDiv.style.fontSize=24,this.contentDiv.style.font="SimHei",this.contentDiv.style.wordWrap=!0,this.contentDiv.style.align="center",this.contentDiv.style.valign="center",this.contentDiv.style.leading=15;var p_l=Config.recharge_vip,p_g=Config.recharge_recharge,b_s=this.heroVo.vipLv;if(1==e&&this.listbarvalue(),b_s<10&&(this.viplv1.x=136,this.viplv1.visible=!0,this.viplv2.visible=!1,this.viplv1.index=b_s,this.maxvipimg.visible=!1),10<=b_s&&(this.viplv1.x=128,this.maxvipimg.visible=!0,this.viplv1.visible=!0,this.viplv2.visible=!0,this.viplv1.index=1,this.viplv2.index=b_s-10),0==p_l[this.heroVo.vipLv].id){this.minivipimg.visible=!0,this.maxvipimg.visible=!1;var d_u=this.heroVo.vipExp;if(!p_g[this.heroVo.vipLv+1])return;var b_e=(p_l[this.heroVo.vipLv].exp-this.heroVo.vipExp)/100;this.vipbarLab.text=d_u+"/"+p_l[this.heroVo.vipLv].exp,this.vipBar.value=d_u/p_l[this.heroVo.vipLv].exp,this.contentDiv.innerHTML=(j_x("1953_2258_2376"))+Utils.setColor(Utils.$("{1}",parseInt(b_e.toString())),"#ffc85e")+(j_x("1263_282_1163")+j_x("402_803"))+Utils.setColor(" VIP","#FFC85E")+Utils.setColor(Utils.$("{1}",b_s+1),"#ffc85e")}p_l[this.heroVo.vipLv].id>=Config.global[GlobalDefine.vip_maxLv].i_info?(this.minivipimg.visible=!1,this.maxvipimg.visible=!0,this.vipBar.value=1,this.vipbarLab.text=this.heroVo.vipExp.toString()+"/"+p_l[this.heroVo.vipLv].exp.toString()):p_l[this.heroVo.vipLv].id<Config.global[GlobalDefine.vip_maxLv].i_info&&0<p_l[this.heroVo.vipLv].id&&(this.minivipimg.visible=!0,this.maxvipimg.visible=!1,p_l[this.heroVo.vipLv].exp==this.heroVo.vipExp||(p_l[this.heroVo.vipLv].exp>this.heroVo.vipExp?(p_l[this.heroVo.vipLv].exp,d_u=this.heroVo.vipExp,b_e=(p_l[this.heroVo.vipLv].exp-this.heroVo.vipExp)/100,this.vipBar.value=d_u/p_l[this.heroVo.vipLv].exp,this.contentDiv.innerHTML=(j_x("1953_2258_2376"))+Utils.setColor(Utils.$("{1}",parseInt(b_e.toString())),"#ffc85e")+(j_x("1263_282_1163")+j_x("402_803"))+Utils.setColor(" VIP","#FFC85E")+Utils.setColor(Utils.$("{1}",b_s+1),"#ffc85e")):this.heroVo.vipExp<=0?this.vipBar.value=0:0<this.heroVo.vipExp&&(this.vipBar.value=this.heroVo.vipExp/p_l[this.heroVo.vipLv].exp)),this.vipbarLab.text=this.heroVo.vipExp.toString()+"/"+p_l[this.heroVo.vipLv].exp.toString())},d_u.prototype.onRemove=function(){Kwyy(this,Laya,LED,l_r)},d_u.prototype.GetBit=function(e,p_l){return Qlpy(e,p_l)},Object.defineProperty(d_u.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),d_u.open=function(){GPlatform.isShowRecharge&&UIM.open(d_u,["recharge.atlas"],null,null,null,!0)},d_u.close=function(){Amyn(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e.vipLvnum=1,e.PosvipNum=0,e.on(Laya.Event.ADDED,e,e.onAdd),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.VipRechardePanel=b_s;var b_e,d_m=(b_e=ui.window.recharge.vipCellUI,__extends(d_w,b_e),d_w.prototype.onAdd=function(){Mgmz(this,e,p_g,Laya)},d_w.prototype.GetBit=function(e,p_l){return Cxuv(e,p_l)},d_w.prototype.onVipprivileg=function(){Myqh(e,this)},d_w.prototype.onRemove=function(){Ksmv(this,Laya)},d_w.prototype.onClick=function(e){Opfi(e,this,RechargeModel)},d_w.prototype.onvipRewardRender=function(e,p_l){var p_g=new ModuleItemVO;p_g.id=e.dataSource.id,p_g.bind=1,p_g.amount=e.dataSource.amount,e.isShowName=!1,e.dataSource.id,e.dataSource.amount,e.setItemData(p_g,ItemBoxDefine.MODULE_ITEM,!0)},Object.defineProperty(d_w.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),d_w.prototype.setItemData=function(e,p_l){this.index=p_l;var p_g=Config.recharge_vip[p_l],b_s=b_p.getRewardDatas(p_g.reward);this.viprewardList.array=b_s,Config.CItem(250006);var d_u=this.heroVo.vipLv,b_e=RechargeModel.instance.vipreceive;p_l<10&&(this.viplv1.x=322,this.viplv1.visible=!0,this.viplv2.visible=!1,this.viplv1.index=p_l),10<=p_l&&(this.viplv1.x=313,this.viplv1.visible=!0,this.viplv2.visible=!0,this.viplv1.index=1,this.viplv2.index=p_l-10),this.receiveBtn.on(Laya.Event.CLICK,this,this.onClick,[e]);var d_m=Config.recharge_vip[p_l];if(d_m){if(this.modelContainer.visible=!1,this.buildmodel.visible=!1,this.bubbleSp.visible=!1,this.headSP.visible=!1,this.modelContainer.scaleX=1,this.modelContainer.scaleY=1,this.propBox.visible=!1,this.talismanimg.visible=!!d_m.talismanName,this.soundTamName.visible=!!d_m.talismanName,this.soundTtile.visible=!!d_m.talismanName,d_m.talismanName&&(this.talismanname.text=d_m.talismanName[0],this.soundTamName.text=d_m.talismanName[1]),d_m.model){if(this.viptips.visible=!1,(2==d_m.model[0][0]||3==d_m.model[0][0])&&(this.modelContainer.visible=!0,d_m.showAct&&this.showRoleModels(Config.talisman_talisman[d_m.model[0][1]].avatar,d_m.showAct),d_m.showAct||this.showRoleModel(d_m.model[0][1]),2==d_m.model[0][0])){this.propBox.visible=!0;var d_w=TalismanModel.instance.getTalismanById(d_m.model[0][1]),f_t=TalismanModel.instance.calDeploymentsApt(d_w.deployments);b_p.getNumSp("QUALIFICATION",f_t,this.qualityIcon,-6)}if(1==d_m.model[0][0]){if(this.modelContainer.visible=!1,1==d_m.model[0][1]){this.buildmodel.visible=!0,this.awardClip.visible=!0;var v_z=Resource.ResUrl.getIconUrl(d_m.model[0][2]);r_n.instance.floatEffect(this.buildmodel,this.buildmodel.y,.5,10),r_n.instance.floatEffect(this.awardClip,this.awardClip.y,.5,10),this.setIcon(v_z,this.buildmodel)}2==d_m.model[0][1]&&(this.bubbleSp.visible=!0,v_z=Resource.ResUrl.getIconUrl(d_m.model[0][2]),this.setIcon(v_z,this.bubbleSp)),3==d_m.model[0][1]&&(this.headSP.visible=!0,v_z=Resource.ResUrl.getIconUrl(d_m.model[0][2]),this.setIcon(v_z,this.headSP))}if(1!=d_m.model[0][0]&&(this.awardClip.visible=!1,Laya.Tween.clearAll(this.buildmodel),Laya.Tween.clearAll(this.awardClip)),4==d_m.model[0][0]){this.modelContainer.visible=!0,this.modelContainer.scaleX=.7,this.modelContainer.scaleY=.7,null==this.roleModel&&(this.roleModel=new n_k,this.modelContainer.addChild(this.roleModel));var d_h=LgcM.ins.heroVo;1==Config.fashion_fashion[d_m.model[0][1]].type&&this.roleModel.changRoleSkin(d_h,!1,!0,1,d_m.model[0][1]),2==Config.fashion_fashion[d_m.model[0][1]].type&&this.roleModel.changRoleSkin(d_h,!1,!0,d_m.model[0][1],1)}""==d_m.model[0][1]&&(this.viptips.visible=!0)}0==p_l&&(this.awardClip.visible=!1,this.viptips.visible=!0),d_m.waveEffect&&this._roleModel&&this._roleModel.startWave(d_m.waveEffect[0],d_m.waveEffect[1]),0<this.GetBit(b_e,p_l+1)&&(this.receiveBtn.disabled=!0,this.vipred.visible=!1),this.GetBit(b_e,p_l+1)<=0&&(this.receiveBtn.disabled=!1,this.vipred.visible=!0),d_u<p_l&&(this.receiveBtn.visible=!1),p_l<=d_u&&(this.receiveBtn.visible=!0)}},d_w.prototype.showRoleModel=function(e,p_l){void 0===p_l&&(p_l="stand"),e&&""!=e&&(this._roleModel||(this._roleModel=new n_k,this.modelContainer.addChild(this._roleModel)),this._roleModel.changeModel(e),this._roleModel.setAction(p_l,2,!0))},d_w.prototype.setIcon=function(e,p_l){""!=e?(p_l.visible=!0,p_l=Resource.ResManager.Instance.getImg(e,p_l)):p_l.visible=!1},d_w.prototype.showRoleModels=function(e,p_l){void 0===p_l&&(p_l="stand"),e&&""!=e&&(this._roleModel||(this._roleModel=new n_k,this.modelContainer.addChild(this._roleModel)),this._roleModel.changeModel(e),this._roleModel.setAction(p_l,0,!0),this.dataSource)},d_w.prototype.removeRoleModel=function(){this._roleModel&&(this._roleModel.dispose(),this._roleModel.removeSelf(),this._roleModel=null)},d_w);function d_w(){var e=b_e.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdd),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.VipCellPanel=d_m}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.redPacket.redPacketGetPanelUI,__extends(b_s,p_l),b_s.prototype.init=function(){Oedf(this,Laya,e,z_j)},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"ok":b_s.close()}},b_s.prototype.renderList=function(e,p_l){if(e){if(!this.dataSource)return;e.setData(e.dataSource);var p_g=RedPacketModel.ins.RedPackInfo;if(!p_g)return;0==p_g[0].redsurplusNum&&p_l==this._maxIndex?e.setMaxLucky(!0):e.setMaxLucky(!1)}},b_s.prototype.updateView=function(e){if(void 0===e&&(e=0),this.GotRecord2.visible=1==e,this.GotRecord1.visible=0==e,0==e){if(!(d_m=RedPacketModel.ins.RedPackInfo))return;this.goldNum1.text="x"+d_m[0].ybNum,this.recordList.array=d_m[0].rechargeArr,this.headImg1.skin=Resource.ResManager.getHeadUrl(d_m[0].entryId,d_m[0].headIcon);for(var p_l=b_p.playerId,p_g=!1,b_s=0,d_u=0;d_u<d_m[0].rechargeArr.length;d_u++)p_l==d_m[0].rechargeArr[d_u].pid&&(p_g=!0,b_s=d_m[0].rechargeArr[d_u].ybNum);if(0==d_m[0].redsurplusNum){var b_e=0;for(d_u=0;d_u<d_m[0].rechargeArr.length;d_u++)b_e<d_m[0].rechargeArr[d_u].ybNum&&(b_e=d_m[0].rechargeArr[d_u].ybNum);for(d_u=0;d_u<d_m[0].rechargeArr.length;d_u++)d_m[0].rechargeArr[d_u].ybNum==b_e&&(this._maxIndex=d_u);p_g?(this.leftNum2.visible=!1,this.redNumTxt.text=Utils.$(("{1}"+j_x("844_456_130")+",{2}"+j_x("2224_1394_2273")+j_x(442)),d_m[0].redNum,Math.round(d_m[0].time/60)),this.leftNum1.visible=!1,this.goldNumTxt.visible=!1,this.goldNum1.visible=!0,this.goldImg.skin="res/ui/common/yuanbao.png",this.desTxt.text=Utils.$((j_x("1595_1168_1749")+j_x(520)+"{1}"),d_m[0].name)+(j_x("2224_176_2046")+j_x("456_130_283")+j_x("2273_1012")),this.goldNum1.text="x"+b_s):(this.leftNum2.visible=!1,this.redNumTxt.text=Utils.$(("{1}"+j_x("844_456_130")+",{2}"+j_x("2224_1394_2273")+j_x(442)),d_m[0].redNum,Math.round(d_m[0].time/60)),this.leftNum1.visible=!1,this.goldNumTxt.visible=!1,this.goldNum1.visible=!1,this.desTxt.text=(j_x("1584_1682_886")+j_x("430_743")+""+j_x("456_130_2273")+j_x("442_743")+"~"),this.goldImg.skin=Resource.ResUrl.getFaceUrl(Config.face[8].url))}else this.goldNum1.text="x"+b_s,this.goldNum1.visible=!0,this.goldNumTxt.visible=!0,this.leftNum2.visible=!0,this.redNumTxt.text=(j_x("1111_1902_456")+j_x(130)+":"),this.leftNum1.visible=!0,this.goldNumTxt.visible=!0,this.leftNum1.text=Utils.$("{1} / {2}",d_m[0].redsurplusNum,d_m[0].redNum),this.leftNum2.text=d_m[0].surplusNum.toString(),this.goldImg.skin="res/ui/common/yuanbao.png",this.desTxt.text=Utils.$((j_x("1595_1168_1749")+j_x(520)+"{1}"),d_m[0].name)+(j_x("2224_176_2046")+j_x("456_130_283")+j_x("2273_1012"))}else{var d_m;if(!(d_m=RedPacketModel.ins._redPackRecordInfo))return;this.totalNum.text="x"+d_m[0].ybNum;var d_w=d_m[0].rechargeArr.sort(this.sortFunc);this.GotRecordList.array=d_w;var f_t=LgcM.ins.heroVo;this.headImg1.skin=Resource.ResManager.getHeadUrl(f_t.entryId,f_t.headIcon)}},b_s.open=function(e){void 0===e&&(e=0),UIM.open(b_s,["redPacket.atlas"],{index:e},!1,!1,!0,!1)},b_s.prototype.onAdded=function(){Sgmr(this,Laya)},b_s.prototype.sortFunc=function(e,p_l){return Ylym(e,p_l)},b_s.prototype.renderList1=function(e,p_l){if(e){if(!this.dataSource)return;e.setData(e.dataSource)}},b_s.prototype.onRemove=function(){Qmzk(this,Laya)},b_s.close=function(e){void 0===e&&(e=!1),UIM.close(b_s,e,[])},b_s);function b_s(){var e=p_l.call(this)||this;return e._maxIndex=0,e.init(),e}e.RedPacketGetPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.redPacket.redPacketGotRecordItemUI,__extends(b_s,p_l),b_s.prototype.setData=function(e){if(e){e.name?this.playerName.text=e.name:this.playerName.text="-",this.type1.visible=1==e.type,this.type2.visible=2==e.type;var p_l=Utils.formatTimeStr4_other(e.time,!0);this.date.text=p_l,this.goldNum2.text=e.ybNum}},b_s);function b_s(){return p_l.call(this)||this}e.RedPacketGotRecordItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.redPacket.redPacketShowItemUI,__extends(b_s,p_l),b_s.prototype.init=function(){Apmq(this,Laya)},b_s.prototype.setIndex=function(e){Mfev(e,this)},b_s.prototype.onClickRecBtn=function(){1==this.type?e.RedPacketSharePanel.open():RedPacketModel.ins.reqGetRedRecinfo(this.redId),RedPacketModel.ins._clickIndex=this.index},b_s.prototype.setData=function(e){if(e)switch(this.playerNameTxt.text="",this.type=e.type,this.redId=e.key,e.type){case 1:this.tiptxt.text=(j_x("206_571_2191"));break;case 2:this.tiptxt.text=(j_x("1163_1174_2111"));break;case 3:this.tiptxt.text=(j_x("1174_2111_283"));break;case 4:this.tiptxt.text=(j_x("1300_2273_1917"))}},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.RedPacketRecItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.redPacket.redPacketRecordItemUI,__extends(b_s,p_l),b_s.prototype.setData=function(e){e&&(this.headImg2.skin=Resource.ResManager.getHeadUrl(e.entryId,e.headIcon),this.headImg2.scale(.6,.6),this.playerName.text=e.name,this.goldNum2.text=e.ybNum)},b_s.prototype.setMaxLucky=function(e){Wepr(e,this)},b_s);function b_s(){var e=p_l.call(this)||this;return e.bestLuckyImg.visible=!1,e}e.RedPacketRecordItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.activity.bga.redPacket.redPacketSharePanelUI,__extends(d_u,p_l),d_u.prototype.onAdded=function(){Wcir(this,Laya,LED,l_r,RedPacketModel)},d_u.prototype.renderList=function(e,p_l){if(e){if(!this.dataSource)return;e.setData(e.dataSource)}},d_u.prototype.onChangeStr=function(){20<this.bestWishes.text.length&&b_p.broadcastNotice((j_x("1081_2307")+"20"+j_x("844_1794")+"!"))},d_u.prototype.onRemove=function(){Ujsy(this,Laya,LED,l_r)},d_u.prototype.init=function(){Cevu(this,e,z_j,p_g)},d_u.prototype.updateView=function(e,p_l){if(this.sendRedId=p_l[0],0!=p_l[0]){var p_g=Config.recharge_redPacket[p_l[0]];if(p_g){var b_s=p_g.show;this.decTxt.text=Utils.$((j_x("1595_1168_1749")+j_x("402_2142_2258")+j_x(2376)+"{1}"),b_s),this.goldTxt.text="x"+p_g.redBag,this.redPackerTxt.text="x"+p_g.num}}},d_u.prototype.onMouseClick=function(e){switch(e.target.name){case"close":d_u.close();break;case"sendBtn":if(20<this.bestWishes.text.length)return void b_p.broadcastNotice((j_x("1081_2307")+"20"+j_x("844_1794")+"!"));var p_l=this.bestWishes.text+"{1:redPacket}";RedPacketModel.ins.reqGetRedSend(this.sendRedId,ChannelTypeDefine.WORLD,p_l,"redPacket"),d_u.close();break;case"closeBtn":d_u.close();break;case"btnMore":var p_g=Config.global[GlobalDefine.redPacketWishes].t_info;this.wishesList.array=p_g}},d_u.prototype.onItemSelect=function(e){Idys(e,this)},d_u.open=function(){UIM.open(d_u,["redPacket.atlas","activity/festivals.atlas"],{},!1,!1,!0,!1)},d_u.close=function(e){void 0===e&&(e=!1),UIM.close(d_u,e,[])},d_u);function d_u(){var e=p_l.call(this)||this;return e.sendRedId="",e._redPacketLabels="",e.init(),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.RedPacketSharePanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.redPacket.redPacketShowItemUI,__extends(b_s,p_l),b_s.prototype.init=function(){Sygp(this,Laya)},b_s.prototype.onClickRecBtn=function(){Ogic(RedPacketModel,this)},b_s.prototype.setData=function(e){if(e)switch(this.playerNameTxt.centerX=0,this.playerNameTxt.text=e.name,this.type=e.type,this.redId=e.key,e.type){case 1:this.tiptxt.text=(j_x("1163_1174_2111"));break;case 2:this.tiptxt.text=(j_x("1300_1174_2111"));break;case 3:this.tiptxt.text=(j_x("1300_2273_1917"))}},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.RedPacketShowItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.redPacket.redPacketShowLabeltemUI,__extends(b_s,p_l),b_s.prototype.setData=function(e){e&&(this.showLabel.text=e)},b_s);function b_s(){return p_l.call(this)||this}e.RedPacketShowLabelItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.redPacket.redPacketRecordPanelUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Ghrm(this,Laya,LED,l_r)},b_s.prototype.sortRecFunc=function(e,p_l){return Sqqr(e,p_l)},b_s.prototype.onRemove=function(){Sptr(this,Laya,LED,l_r)},b_s.open=function(){UIM.open(b_s,["redPacket.atlas","activity/festivals.atlas"],{},!1,!1,!0,!1)},b_s.prototype.renderList=function(e,p_l){if(e){if(!this.dataSource)return;e.setIndex(p_l),e.setData(e.dataSource)}},b_s.prototype.sortSendFunc=function(e,p_l){return Oxgv(e,p_l)},b_s.prototype.updateData=function(){var e=RedPacketModel.ins.RedPackInfo,p_l=e[0].redId,p_g=!1,b_s="";if(0<RedPacketModel.ins._receivePackArray[0].receiveArr.length)if(this.result=RedPacketModel.ins._receivePackArray[0].receiveArr.sort(this.sortRecFunc),0==e[0].redsurplusNum){for(var d_u=0,b_e=e[0].rechargeArr;d_u<b_e.length;d_u++)if(b_e[d_u].pid==b_p.playerId){p_g=!0;break}b_s=e[0].redId;for(var d_m=0;d_m<this.result.length;d_m++)if(this.result[d_m].key==b_s){p_g?this.result[d_m].type=3:this.result.splice(d_m);break}this.redPacketRec.array=this.result.sort(this.sortRecFunc),this.redPacketRec.refresh()}else{for(var d_w=0;d_w<this.result.length;d_w++)if(this.result[d_w].key==p_l){this.result[d_w].type=2;break}this.redPacketRec.array=this.result.sort(this.sortRecFunc),this.redPacketRec.refresh()}if(0<RedPacketModel.ins._sendPackArray[0].sendArr.length)if(this.result=RedPacketModel.ins._sendPackArray[0].sendArr.sort(this.sortSendFunc),0==e[0].redsurplusNum){for(b_s=e[0].redId,d_m=0;d_m<this.result.length;d_m++)if(this.result[d_m].key==b_s){this.result[d_m].type=4;break}this.redPacketGot.array=this.result.sort(this.sortSendFunc),this.redPacketGot.refresh()}else{for(d_w=0;d_w<this.result.length;d_w++)if(this.result[d_w].key==p_l){this.result[d_w].type=3;break}this.redPacketGot.array=this.result.sort(this.sortSendFunc),this.redPacketGot.refresh()}},b_s.prototype.init=function(){Cmow(this,e,z_j,Laya)},b_s.prototype.onTabSelect=function(e){RedPacketModel.ins.reqGetRedBigInfo(),this.redPacketGot.visible=1==e,this.redPacketRec.visible=0==e,this.sharedBtn.selected=1==e,this.gotBtn.selected=0==e,this.redPacketGot.array=[],this.redPacketRec.array=[],1==e?0<RedPacketModel.ins._sendPackArray[0].sendArr.length?(this.result=RedPacketModel.ins._sendPackArray[0].sendArr.sort(this.sortSendFunc),this.redPacketGot.array=this.result,this.noRedPacket.visible=!1):this.noRedPacket.visible=!0:0==e&&(0<RedPacketModel.ins._receivePackArray[0].receiveArr.length?(this.result=RedPacketModel.ins._receivePackArray[0].receiveArr.sort(this.sortRecFunc),this.redPacketRec.array=this.result,this.redPacketRec.refresh(),this.noRedPacket.visible=!1):this.noRedPacket.visible=!0)},b_s.prototype.updateRedSendArray=function(){if(0<RedPacketModel.ins._sendPackArray[0].sendArr.length){var e=RedPacketModel.ins._clickIndex;this.result=RedPacketModel.ins._sendPackArray[0].sendArr.sort(this.sortSendFunc),this.result[e].type=2,this.result[e].key=RedPacketModel.ins.receiveRedId[0],this.redPacketGot.array=this.result.sort(this.sortSendFunc),this.redPacketGot.refresh()}},b_s.prototype.renderList1=function(e,p_l){if(e){if(!this.dataSource)return;e.setData(e.dataSource)}},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"recordBtn":RedPacketModel.ins.reqRedRecInfo();break;case"sendBtn":case"closeBtn":b_s.close();break;case"sharedBtn":this.onTabSelect(1);break;case"goBtn":this.onTabSelect(0)}},b_s.close=function(e){void 0===e&&(e=!1),UIM.close(b_s,e,[])},b_s);function b_s(){var e=p_l.call(this)||this;return e.result=[],e.init(),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.RedPacketShowPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.redPacket.redPacketTipsPanelUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){this.on(Laya.Event.CLICK,this,this.onMouseClick),LED.on(l_r.RED_PACKET_RECE_INFO,this,this.updateView);var e=this.dataSource.data;e&&this.updateView(e)},b_s.prototype.onRemove=function(){Aehj(this,Laya,LED,l_r)},b_s.prototype.updateView=function(e){Ipps(e,this)},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"closeBtn":case"sureBtn":b_s.close()}},b_s.open=function(e){UIM.open(b_s,["redPacket.atlas"],{data:e},!1,!1,!0,!0)},b_s.close=function(e){void 0===e&&(e=!1),UIM.close(b_s,e,[])},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.RedPacketTipPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.redPacket.redPacketUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){this.mouseThrough=!0,LED.on(l_r.RED_PACKET_INFO,this,this.updateRedInfo),LED.on(l_r.RED_PACKET_RECE_INFO,this,this.onOpenTipPanel),0<RedPacketModel.ins.speed&&this.updateRedInfo(RedPacketModel.ins.speed)},b_s.prototype.tweenComplete=function(e){if(Resource.ResManager.Instance.recoverSprite(e,PoolDefine.SPRITE_RED_PACK),0==this._imageArray.length);else{for(var p_l=0,p_g=this._imageArray;p_l<p_g.length;p_l++){var b_s=p_g[p_l];b_s&&Resource.ResManager.Instance.recoverSprite(b_s,PoolDefine.SPRITE_RED_PACK)}this._imageArray=[]}},b_s.prototype.onOpenTipPanel=function(p_l){Mirs(p_l,e)},b_s.prototype.updateRedPacket=function(e){this._posArray=[],this._imageArray=[];for(var p_l=[61,171,286,401,513,621],p_g=0;p_g<3;p_g++){var b_s=new Laya.Sprite;this.addChild(b_s);var d_u=Utils.getRandom(0,5);b_s.x=p_l[d_u],this._posArray.push(p_l[d_u]),this._imageArray.push(b_s),b_s.y=-10}for(p_g=0;p_g<3;p_g++){b_s=new Laya.Sprite,b_s=Resource.ResManager.Instance.getImg("res/ui/mainUI/Image_redPacket.png",b_s),this.addChild(b_s),b_s.width=61,b_s.height=77,b_s.pivot(Math.round(b_s.width/2),Math.round(b_s.height/2)),b_s.x=this._posArray[p_g],b_s.y=0,b_s.mouseEnabled=!0,b_s.on(Laya.Event.CLICK,this,this.onClickBtn,[b_s]);var b_e=Utils.getRandom(0,1),d_m=Stage.height+50,d_w=[360,-360][b_e];Laya.Tween.to(b_s,{f_u:this._posArray[p_g],j_l:d_m,rotation:d_w},1e3*e,null,Laya.Handler.create(this,this.tweenComplete,[b_s]),null,!0)}},b_s.prototype.onRemove=function(){Iijw(Laya,this,LED,l_r)},b_s.prototype.updateRedInfo=function(e){Alzs(e,Laya,this)},b_s.prototype.onClickBtn=function(e){Wcsv(e,RedPacketModel,Resource,PoolDefine)},b_s);function b_s(){var e=p_l.call(this)||this;return e._posArray=[],e._imageArray=[],e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.RedPacketUI=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.bga.redPacket.redPacketItemUI,__extends(b_s,p_l),b_s.prototype.init=function(){Adtq(this,Laya)},b_s.prototype.onClick=function(){0!=this.sendId&&(this.isRec?RedPacketModel.ins.reqGetRedRecinfo(this.sendId.toString()):e.RedPacketSharePanel.open())},b_s.prototype.updateView=function(){Yzxj(this,r_n)},b_s.prototype.setData=function(e,p_l){e&&(this.sendId=e,this.isRec=p_l)},b_s);function b_s(){var e=p_l.call(this)||this;return e.sendId=0,e.isRec=!1,e.init(),e}e.RedPackItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.training.training_cellUI,__extends(b_s,p_l),b_s.prototype.updateView=function(){var e=this.dataSource;if(e){var p_l=Config.training_training[e.id];if(p_l){e.isActive?(this.lvLab.text=e.lv+(j_x(2342)),this.lvLab.visible=this.starLab.visible=!0,this.shade.visible=!1,this.noActive.visible=!1):(this.noActive.visible=!0,this.shade.visible=!0,this.lvLab.visible=this.starLab.visible=!1),this.quality.index=p_l.quality-1;var p_g=Config.training_trainingStar[RefineBodyModel.ins.getStarIdByStar(e.id,e.star)];p_g&&(this.starLab.text=p_g.limitLv),this.bodyName.text=p_l.name,this.icon.skin=Resource.ResUrl.getIconUrl(p_l.miniIcon),this.redPoint.visible=RefineBodyModel.ins.isRedPoint(e.id)}}},b_s);function b_s(){return p_l.call(this)||this}e.RefineBodyItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.training.trainingUI,__extends(b_s,p_l),b_s.prototype.updateView=function(e){var p_l=RefineBodyModel.ins;if(!e){var p_g=p_l.sortList();if(p_g.length<=0)return;if(!(e=(this.refineList.array=p_g)[0<=this.refineList.selectedIndex?this.refineList.selectedIndex:0]))return;if(!this.showRefineVo)return void(this.refineList.selectedIndex=0);this.showRefineVo=e}var d_u=p_l.getAttrById(e.id),b_e=p_l.getAttrById(e.id,1),d_m=0,d_w=Config.training_training[e.id];this.acupointList.array=this.getArraylist(e.star);var f_t=p_l.isAcitve(e.id);this.nowPropBox.visible=this.upBox.visible=f_t,this.nextPropBox.visible=!0;var v_z=p_l.isCanUpLv(e.id);this.maxLvLab.visible=v_z==UpState.MAX_UP,this.activeBox.visible=this.notActive.visible=this.activeBox.visible=!f_t;var d_h=this.lvTStr+Utils.setColor(Utils.$(("{1}"+j_x(2342)+"<br>"),e.lv+1),this.colors[1]);this.qualityBg.skin=Resource.ResUrl.getIconUrl(d_w.icon),b_s.clearBg.push(this.qualityBg.skin);var r_t=Config.training_trainingStar[RefineBodyModel.ins.getStarIdByStar(e.id,e.star)];this.desc.text=r_t?r_t.desc:d_w.desc,this.maxStarLab.visible=p_l.isCanUpStar(e.id)==UpState.MAX_UP,this.upStarBtn.visible=!this.maxStarLab.visible;var t_n={};if(f_t){var f_y=this.lvTStr+Utils.setColor(Utils.$(("{1}"+j_x(2342)+"<br>"),e.lv),this.colors[1]),p_q=p_l.getLvConsumeByLv(e.id,e.lv);this.uplvConsum.innerHTML=z_j.consumeToHtmlText(this.iconSize,p_q,Utils.setSpace(1),[this.colors[1],this.colors[2]]),this.nextPropBox.visible=this.upLvBtn.visible=v_z!=UpState.MAX_UP,p_q=p_l.getStarConsumeByStar(e.id,e.star+1),this.upStarConsum.innerHTML=z_j.consumeToHtmlText(this.iconSize,p_q,Utils.setSpace(1),[this.colors[1],this.colors[2]]),d_m=b_p.calPropFight(d_u),t_n[2]=d_u,this.nowPropHtml.innerHTML=f_y+TalismanModel.instance.setProp(this.nowPropHtml,t_n,"<br>",[this.colors[3],this.colors[1]],2,"",!0),v_z!=UpState.MAX_UP&&(t_n[2]=b_e)}else t_n[2]=b_e,p_q=p_l.getActiveConsumeById(e.id),this.activeConsum.innerHTML=z_j.consumeToHtmlText(this.iconSize,p_q,Utils.setSpace(1),[this.colors[1],this.colors[2]]);this.nextPropHtml.innerHTML=d_h+TalismanModel.instance.setProp(this.nextPropHtml,t_n,"<br>",[this.colors[3],this.colors[1]],2,"",!0);var h_h=Config.training_training[e.id];h_h&&0<h_h.propType?(this.typeClip.visible=!0,this.typeClip_di.visible=!0,this.typeClip.index=h_h.propType-1):(this.typeClip.visible=!1,this.typeClip_di.visible=!1),this.nextPropHtml.innerHTML=d_h+TalismanModel.instance.setProp(this.nextPropHtml,t_n,"<br>",[this.colors[3],this.colors[1]],2,"",!0),b_p.getNumSp(NumType.FIGHTING,d_m,this.fightSpr,-10),this.updatePvSkillItem()},b_s.prototype.onRemoved=function(){Oaez(LED,l_r,this,Laya)},b_s.prototype.getArraylist=function(e){var p_l=RefineBodyModel.ins.lvChangeRound(e),p_g=p_l[0],b_s=p_l[1],d_u=Math.max(0,p_g-1),b_e=Math.min(7,p_g+3);b_e=0==e?4:b_e;for(var d_m=[],d_w=1;d_w<11;d_w++)d_w<b_s||0==b_s&&0!=e?d_m.push(d_u):d_m.push(b_e);return d_m},b_s.prototype.onClick=function(e,p_l){void 0===p_l&&(p_l=!1);var p_g=e.target,d_u=this.showRefineVo,b_e=RefineBodyModel.ins,d_m=RefineBodyControl.ins;if(d_u)switch(p_g.name){case"activeBtn":b_e.isCanAcitve(d_u.id,!0)&&d_m.reqUpdateActiveInfo(d_u.id);break;case"upLvBtn":b_e.isCanUpLv(d_u.id,0,!0)==UpState.CAN_UP?d_m.reqUpdateUpLv(d_u.id,1):p_l&&LongPushUtil.inst.clearLoopPush();break;case"upStarBtn":b_e.isCanUpStar(d_u.id,1,!0)==UpState.CAN_UP?d_m.reqUpdateUpStar(d_u.id,1):p_l&&LongPushUtil.inst.clearLoopPush();break;case"backBtn":case"closeBtn":b_s.close()}},b_s.prototype.playEffect=function(e,p_l){void 0===p_l&&(p_l=!0),e&&((e.visible=p_l)?(e.play(!1),e.on(Laya.Event.COMPLETE,this,this.playEffect,[e,!1])):e.off(Laya.Event.COMPLETE,this,this.playEffect))},b_s.open=function(){Ewmh(UIM,b_s)},b_s.prototype.playUpLvEffect=function(e){void 0===e&&(e=!0),this.playEffect(this.upLvEffect,e)},b_s.prototype.onAdded=function(){Gcql(LED,l_r,this,RefineBodyControl,Laya)},b_s.prototype.playUpStarEffect=function(e){void 0===e&&(e=!0),this.playEffect(this.upStarEffect,e)},b_s.prototype.playActiveEffect=function(e){void 0===e&&(e=!0),this.playEffect(this.activeEffect,e)},b_s.prototype.updatePvSkillItem=function(){var e=this.refineList.selectedItem,p_l=Config.training_training[e.id];if(p_l.skill){var p_g=new x_h(p_l.id,p_l.name,e.lv,e.star,PassiveSkillType.TRAINING);this.pvSkillItem.visible=!0,this.pvSkillItem.updateSkillUI(p_l.skill[0],PassiveSkillType.TRAINING,p_g,!0)}else this.pvSkillItem.visible=!1},b_s.prototype.onUseBtnMD=function(e){var p_l=this;LongPushUtil.inst.bingLongPushBtn(this,(function(){p_l.onClick(e,!0)}))},b_s.prototype.renderAcupointItem=function(e,p_l){e&&null!=e.dataSource&&(e.getChildByName("clip").index=e.dataSource)},b_s.prototype.onListSelect=function(e){if(-1!=e){var p_l=this.refineList.getItem(e);p_l&&(this.showRefineVo=p_l,this.updateView(p_l))}},b_s.prototype.renderItem=function(e,p_l){e&&e.updateView()},b_s.close=function(){Wsbx(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemoved),p_g.refineList.itemRender=e.RefineBodyItem,z_j.setList(p_g.refineList,p_g,p_g.renderItem,p_g.onListSelect),z_j.setListScroll(p_g.refineList),z_j.setList(p_g.acupointList,p_g,p_g.renderAcupointItem),p_g.colors=["#f0ecd8","#00802e","#e32828","#000000"];var d_u=p_g.colors[0];return z_j.setHtml(p_g.uplvConsum,22,d_u,10),z_j.setHtml(p_g.upStarConsum,22,d_u,10),z_j.setHtml(p_g.activeConsum,22,d_u,10),z_j.setHtml(p_g.nowPropHtml,22,d_u,10,"left","SimHei",!1),z_j.setHtml(p_g.nextPropHtml,22,d_u,10,"left","SimHei",!1),p_g.iconSize=new Laya.Point(30,30),p_g.lvTStr=Utils.setColor((j_x("15_2342")+""),p_g.colors[3]),b_s.clearBg=["res/ui/training/Clip_shengjie_eft.png","res/ui/common/Clip_jihuo_eft.png","res/ui/common/Clip_shengjichenggong_eft.png"],p_g}e.RefineBodyMianPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.reliveUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(e){Wuaf(e,this,Laya)},b_s.prototype.onClick=function(p_l){var p_g=p_l.target;if(p_g)switch(p_g.name){case"reliveBtn":var d_u=LgcM.ins.heroVo,b_e=Config.reborn[this._rebornId],d_m=Math.min(b_e.consume.length-1,Math.max(d_u.goldReborn-1,0)),d_w=b_e.consume[d_m]?b_e.consume[d_m]:0;if(b_e&&!b_p.checkCoin(1,d_w)){var f_t=ActivityModel.instance.firstRechargeVo;return f_t&&600<=f_t.gold?void e.WarnPanel.open((j_x("1263_869_2462")+j_x(1779))):void e.FirstRechargePanel.open()}this.reqRelive(),b_s.close();break;case"exitFbBtn":DungeonModel.instance.reqLeaveFb(),b_s.close();break;case"closeBtn":b_s.close()}},b_s.open=function(e){void 0===e&&(e=null),UIM.open(b_s,null,e,!1,!1,!1)},b_s.prototype.updateView=function(){this._rebornId=-1;var e=this.dataSource;if(e){var p_l=e.getName();if(this.descTxt.innerHTML=""==p_l?(j_x("1176_1629_893")+j_x("1520_743")):Utils.$((j_x("1176_1629")+"{1}"+j_x("893_1520_743")),Utils.setColor(p_l,"#FF0000")),this._rebornId=Config.map[b_p.mapID].rebornId,0<this._rebornId){var p_g=Config.reborn[this._rebornId];if(!p_g)return;var d_u=Math.min(p_g.consume.length-1,Math.max(LgcM.ins.heroVo.goldReborn-1,0)),b_e=p_g.consume[d_u]?p_g.consume[d_u]:0;this.costTxt.text=b_e.toString(),p_g.consume&&b_p.checkCoin(1,p_g.consume[d_u])?this.costTxt.color="#00802e":this.costTxt.color="#b92929",p_g.dieDesc?this.dieDesc.innerHTML=p_g.dieDesc:this.dieDesc.innerHTML="",d_u=Math.min(p_g.countDown.length-1,LgcM.ins.heroVo.goldReborn);var d_m=1<=p_g.countDown.length?0:d_u;this._timeCount=p_g.countDown[d_m],0<this._timeCount?(this.sulTimeShow(),Laya.timer.loop(1e3,this,this.sulTimeShow)):this.setTimeSul(0)}else b_s.close()}},b_s.prototype.reqRelive=function(e){if(void 0===e&&(e=!1),0<this._rebornId){var p_l=new c2m_reborn_req;p_l.type=e?0:1,DB.instance.query(c2m_reborn_req,p_l)}else b_s.close()},b_s.prototype.setTimeSul=function(e){var p_l=Math.floor(e/10),p_g=e-10*p_l;this.timeClip.index=p_l,this.timeClip1.index=p_g},b_s.prototype.onRemove=function(e){Aklz(e,Laya,this)},b_s.prototype.sulTimeShow=function(){this._timeCount--,this._timeCount<0&&(this._timeCount=0,this.reqRelive(!0),b_s.close()),this.setTimeSul(this._timeCount)},b_s.close=function(){Wkek(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return z_j.setHtml(e.descTxt,22,"#3e4a53",10,"center","Microsoft YaHei"),z_j.setHtml(e.dieDesc,24,"#444675",10,"center","Microsoft YaHei"),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.RelivePanel=p_g}(UI=UI||{});var x_u=function(){function e(){}return e.prototype.getName=function(){return this.name&&""!=this.name?this.name:0<this.entryId?Config.obj_monster[this.entryId].name:""},e}(),Show_Type,UI;!function(e){var p_l,p_g=(p_l=ui.window.trash.conmonFindUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){var p_l=0;this.find_img.skin=0==this.dataSource.type?"res/ui/achievement/trash_02.png":"res/ui/achievement/trash_03.png",this.money_Clip.visible=this.moneyNum.visible=0!=this.dataSource.type,this.descTxt.style.color="#4a728e",this.descTxt.style.fontSize=22,this.descTxt.style.font="SimHei",this.descTxt.style.wordWrap=!0,this.descTxt.style.align="left",this.descTxt.style.valign="center",this.descTxt.style.leading=13;var p_g=this.heroVo.vipLv;13===p_g&&(p_g=12),this.findNum.style.color="#4a728e",this.findNum.style.fontSize=24,this.findNum.style.font="SimHei",this.findNum.style.wordWrap=!0,this.findNum.style.align="left",this.findNum.style.valign="center",this.findNum.style.leading=15;var b_s,d_u="VIP"+this.heroVo.vipLv;ResourceBackMode.instance.RestoreData,this.list.itemRender=e.ItemBox,this.list.renderHandler=Laya.Handler.create(this,this.setData,null,!1),b_s=0===this.dataSource.type?(this.list.array=b_p.getRewardDatas(ResourceBackMode.instance.getInfobyID_restore(this.dataSource.id)),ResourceBackMode.instance.alreadyResourceBackCount_free(this.dataSource.id),ResourceBackMode.instance.getInfobyID_free(this.dataSource.id).freeCount):(this.list.array=b_p.getRewardDatas(ResourceBackMode.instance.getInfobyIDVIP_restore(this.dataSource.id)),p_l=ResourceBackMode.instance.alreadyResourceBackCount_Vip(this.dataSource.id),ResourceBackMode.instance.getInfobyID_vip(this.dataSource.id).freeCount),this.descTxt.innerHTML=0==this.dataSource.type?Utils.$((j_x("2217_1738")+""+j_x("2258_2376")+"VIP"+j_x("1163_2333_1896")+j_x("174_1741_1038")+j_x("239_235_2348")+j_x("2235_83_2307")+j_x("2307_2462_610")+j_x("1329_254"))):Utils.$((j_x("2217_1738_371")+j_x("2342_1012")+"VIP{1}"+j_x("1163_174_1741")+j_x("1038_239")+"{2}"+j_x("235_2046_115")+j_x(1519)),Utils.$("{1}",p_g+1),Utils.$("{1}",b_s)),this.findNum.innerHTML=0==this.dataSource.type?Utils.$((j_x("2345_2218_1038")+j_x("239_235_2348")+":{1}"+j_x(235)),Utils.setColor(Utils.$("{1}","1"),"#008931")):Utils.$(("{1}"+j_x("1038_239_235")+j_x(2348)+":{2}"+j_x(235)),Utils.$("{1}",d_u),Utils.setColor(Utils.$("{1}",b_s-p_l),"#008931")),this.moneyNum.text=Config.restore_restore[this.dataSource.id].vipBuyCost.toString(),this.closeBtn.on(Laya.Event.CLICK,this,this.onClickClose),this.sureBtn.disabled=b_s<=0,this.sureBtn.on(Laya.Event.CLICK,this,this.onClickSureBtn,[this.dataSource.id,this.dataSource.type])},b_s.prototype.onRemoved=function(){Gwws(this,Laya)},b_s.prototype.onClickClose=function(){Kiyr(this)},b_s.prototype.onClickSureBtn=function(e,p_l){1==this.dataSource.type&&this.heroVo.gold<Config.restore_restore[this.dataSource.id].vipBuyCost?b_p.broadcastNotice((j_x("1263_869_2462")+j_x(1779))):(ResourceBackMode.instance.reqFindResource(e,p_l),this.close())},b_s.prototype.setData=function(e,p_l){e&&(e.isShowName=!1,e.alwaysShowNum=!0,e.setItemData(e.dataSource))},Object.defineProperty(b_s.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),b_s.open=function(e,p_l){UIM.open(b_s,null,{type:e,id:p_l},!1,!1,!0)},b_s.prototype.close=function(){Kaka(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.list.array=[],e}e.CommonFindView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.trash.oneKeyFindUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){LED.on(l_r.ONE_KEY_FIND,this,this.sendToOneKey),this.title_img.skin=0==this.dataSource.type?"res/ui/achievement/trash_04.png":"res/ui/achievement/trash_05.png",this.moneyClip.visible=this.moneyNum.visible=0!=this.dataSource.type,this.descTxt.style.color="#4a728e",this.descTxt.style.fontSize=22,this.descTxt.style.font="SimHei",this.descTxt.style.wordWrap=!0,this.descTxt.style.align="left",this.descTxt.style.valign="center",this.descTxt.style.leading=15,this.descTxt.innerHTML=0==this.dataSource.type?Utils.$((j_x("2217_1738")+","+j_x("2258_2376")+"VIP"+j_x("1163_2333_1896")+j_x("174_1741_1038")+j_x("239_235_2348")+j_x("2235_83_2307")+j_x("2307_2462_610")+j_x("1329_254"))):Utils.$((j_x("2217_1738")+","+j_x("1737_2205")+"VIP"+j_x("1163_1038_239")+j_x("1514_1855_174")+j_x("1741_115_1519"))),this.sureBtn.on(Laya.Event.CLICK,this,this.onClickSureBtn,[this.dataSource.type]),this.closeBtn.on(Laya.Event.CLICK,this,this.onClickCloseBtn),this.list.itemRender=e.ItemBox,this.list.renderHandler=Laya.Handler.create(this,this.setData,null,!1),ResourceBackMode.instance.RestoreData,this.list.vScrollBarSkin="",0==this.dataSource.type?(this.list.array=b_p.getRewardDatas(ResourceBackMode.instance.onkeyFind_free()),this.sureBtn.disabled=!1):(this.list.array=b_p.getRewardDatas(ResourceBackMode.instance.onkeyFind_VIP()),this.sureBtn.disabled=!(0<this.goldNum())),ResourceBackMode.instance.isOneKeyAllget_free=!1,ResourceBackMode.instance.isOneKeyAllget_vip=!1,this.moneyNum.text=this.goldNum().toString(),this._type=this.dataSource.type},b_s.prototype.onClickCloseBtn=function(){Cads(this)},b_s.prototype.goldNum=function(){var e=0,p_l=ResourceBackMode.instance.restoreData;for(var p_g in p_l)1!=p_l[p_g].vipStatus&&ResourceBackMode.instance.isCanFindById_vip(p_l[p_g].id)&&(e+=p_l[p_g].vipBuyCost*(p_l[p_g].freeCount-p_l[p_g].vipBuyCount));return e},b_s.open=function(e){UIM.open(b_s,null,{type:e},!1,!1,!0)},b_s.prototype.onRemoved=function(){Kprw(this,Laya,LED,l_r)},b_s.prototype.sendToOneKey=function(){if(0==this._type){if(ResourceBackMode.instance.isOneKeyAllget_free&&this._onekeyFreeDatas&&this._onekeyFreeDatas.length){var e=this._onekeyFreeDatas.pop();ResourceBackMode.instance.reqFindResource(e.id,this._type)}}else ResourceBackMode.instance.isOneKeyAllget_vip&&this._tempDatas&&this._tempDatas.length&&(e=this._tempDatas.pop(),ResourceBackMode.instance.reqFindResource(e.id,this._type))},b_s.prototype.onClickSureBtn=function(){var e=LgcM.ins.heroVo;if(1===this.dataSource.type&&e.gold<this.goldNum())b_p.broadcastNotice((j_x("1263_869_2462")+j_x(1779)));else{var p_l=ResourceBackMode.instance.RestoreData,p_g=ResourceBackMode.instance.restoreData_free;if(0===this._type){for(var b_s in p_g)1!=p_g[b_s].freeStatus&&-1!=p_g[b_s].freeStatus&&this._onekeyFreeDatas&&this._onekeyFreeDatas.push(p_g[b_s]);ResourceBackMode.instance.isOneKeyAllget_free=!0}else if(1===this._type){for(var b_s in p_l)if(1!=p_l[b_s].vipStatus&&-1!=p_l[b_s].vipStatus&&this._tempDatas)for(var d_u=0;d_u<p_l[b_s].freeCount;d_u++)this._tempDatas.push(p_l[b_s]);ResourceBackMode.instance.isOneKeyAllget_vip=!0}this.sendToOneKey(),this.sureBtn.disabled=!0}},b_s.prototype.setData=function(e,p_l){e&&(e.isShowName=!1,e.alwaysShowNum=!0,e.setItemData(e.dataSource))},b_s.prototype.close=function(){Mxhe(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e._type=0,e._tempDatas=[],e._onekeyFreeDatas=[],e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.OneKeyFindView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.trash.resourcesBackUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Ufyw(LED,l_r,this,b_e,Laya)},b_s.prototype.onClick=function(p_l){1==p_l?ResourceBackMode.instance.isCanoneKeyFind_vip()?e.OneKeyFindView.open(p_l):b_p.broadcastNotice((j_x("1327_711_1300")+j_x(814)+"VIP"+j_x("115_1519_1174")+j_x(2111))):e.OneKeyFindView.open(p_l)},b_s.prototype.updateDate=function(e,p_l){Gtrj(e,p_l)},b_s.prototype.onRemoved=function(){Qboc(LED,l_r,this,Laya,e)},b_s.prototype.updateBtnStatu=function(){this.redpoint.visible=!1,ResourceBackMode.instance.restoreData&&ResourceBackMode.instance.restoreData_free&&(this.oneKeyFree_btn.disabled=!ResourceBackMode.instance.isCanOneKeyFind_free(),this.redpoint.visible=!this.oneKeyFree_btn.disabled,this.list.array=ResourceBackMode.instance.restoreData_free.sort(ResourceBackMode.sortFindResourceData),this.list.refresh(),this.declab.visible=ResourceBackMode.instance.isAllPlay())},b_s.open=function(){Cmpo(UIM,b_s)},b_s.prototype.close=function(){Unzg(UIM,b_s)},Object.defineProperty(b_s.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.list.vScrollBarSkin="",e.list.scrollBar.elasticDistance=100,e.list.scrollBar.elasticBackTime=200,e.list.array=[],e}e.ResourceBack=p_g;var d_u,b_e=(d_u=ui.window.trash.resourcesBack_childUI,__extends(d_m,d_u),d_m.prototype.setData=function(e,p_l){var p_g;this.fbname.text=e.name,this.findNum.style.color="#4a728e",this.findNum.style.fontSize=24,this.findNum.style.font="SimHei",this.findNum.style.wordWrap=!0,this.findNum.style.align="left",this.findNum.style.valign="center",this.findNum.style.leading=15,p_g=ResourceBackMode.instance.getInfobyID_vip(p_l).recCount,this.findNum.innerHTML=Utils.$((j_x("1081_1375_1038")+j_x("239_235_2348")+":{1}"),Utils.setColor(Utils.$("{1}",p_g),"#008931"));var b_s=[];for(var d_u in e.freeReward){var b_e=e.freeReward[d_u][0],d_m=e.freeReward[d_u][1];b_e&&d_m||(b_e=e.freeReward[d_u].id,d_m=e.freeReward[d_u].num),b_s.push([b_e,d_m])}if(b_s.length<4)for(var d_w=0;d_w<4-e.freeReward.length;d_w++){var f_t=new ModuleItemVO;b_s.push(f_t)}var v_z=b_p.getRewardDatas(b_s);this.list.array=v_z,this.redpoint.visible=ResourceBackMode.instance.isCanFindById_free(p_l),this.freeFind_btn.disabled=!ResourceBackMode.instance.isCanFindById_free(p_l),this.alreadFind_img.visible=!this.freeFind_btn.visible,this.vipFind_btn.disabled=!ResourceBackMode.instance.isCanFindById_vip(p_l),this.vipFind_btn.visible=ResourceBackMode.instance.isCanFindById_vip(p_l),this.freeFind_btn.on(Laya.Event.CLICK,this,this.onClick,[0,p_l]),this.vipFind_btn.on(Laya.Event.CLICK,this,this.onClick,[1,p_l])},d_m.prototype.updateData=function(e,p_l){e&&(e.isShowName=!1,e.setItemData(e.dataSource))},d_m.prototype.onClick=function(p_l,p_g){Mmyv(p_l,p_g,e)},Object.defineProperty(d_m.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),d_m);function d_m(){var e=d_u.call(this)||this;return e.list.array=[],e.list.renderHandler=Laya.Handler.create(e,e.updateData,null,!1),e}e.ResourceBackChild=b_e}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.ride.rideDetailUI,__extends(d_u,p_l),d_u.open=function(){Cjwh(UIM,d_u)},d_u.prototype.onStageClick=function(e){e&&e.target==this||d_u.close()},d_u.close=function(){Qtjs(UIM,d_u)},d_u.prototype.updateView=function(){Gfqd(RideModel,this,b_p)},d_u.prototype.delayAddListener=function(){Yqti(Laya,this)},d_u.prototype.onRemove=function(){Otuw(Laya,this)},d_u.prototype.onAdded=function(){Yuth(Laya,this)},d_u.prototype.updateProItem=function(e,p_l){Ayfk(e,p_l)},d_u);function d_u(){var b_s=p_l.call(this)||this;return b_s.mouseEnabled=!0,b_s.on(Laya.Event.ADDED,b_s,b_s.onAdded),b_s.on(Laya.Event.REMOVED,b_s,b_s.onRemove),b_s.attrList.itemRender=e.PropBox,b_s.attrList.renderHandler=p_g.create(b_s,b_s.updateProItem,[],!1),b_s}e.RideDetailPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.ride.ridePerDetailUI,__extends(d_u,p_l),d_u.open=function(e){Mhqp(e,UIM,d_u)},d_u.prototype.onStageClick=function(e){e&&e.target==this||d_u.close()},d_u.prototype.onAdded=function(){Alpy(Laya,this)},d_u.prototype.updateView=function(){this._rid=this.dataSource;var e=RideModel.instance.getRidePropById(this._rid),p_l=RideModel.instance.getRideInfoByRid(this._rid);this.propList.array=e,this.pos((this.stage.width-this.width)/2,200),this.unActive.visible=!p_l.isActive,this.nameLab.text=Config.ride_ride[p_l.rid].desc+(j_x("613_233")+"")},d_u.prototype.onRemove=function(){Sbep(Laya,this)},d_u.close=function(){Ahhv(UIM,d_u)},d_u.prototype.delayAddListener=function(){Eadw(Laya,this)},d_u.prototype.updateProItem=function(e,p_l){Kenw(e,p_l)},d_u);function d_u(b_s){var d_u=p_l.call(this)||this;return d_u._rid=b_s,d_u.mouseEnabled=!0,d_u.propList.itemRender=e.PropBox,d_u.propList.renderHandler=p_g.create(d_u,d_u.updateProItem,[],!1),d_u.on(Laya.Event.ADDED,d_u,d_u.onAdded),d_u.on(Laya.Event.REMOVED,d_u,d_u.onRemove),d_u}e.RidePerDetailPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.ride.ridePerUI,__extends(d_u,p_l),d_u.open=function(){Klob(e)},d_u.prototype.onRemove=function(){this.off(Laya.Event.CLICK,this,this.onMouseClick),LED.off(l_r.RIDE_LIST_UPDATE,this,this.updateList),LED.off(l_r.RIDE_PER_UPDATE,this,this.onPerUpdate),LED.off(l_r.RIDE_ON_CHANGE,this,this.onRideChange),LED.off(l_r.RIDE_UPSTART_SUCC,this,this.onUpdateUpStar),LED.off(l_r.SKILL_INFO_UPDATE,this,this.updateView),this.rideList.scrollBar.off(Laya.Event.CHANGE,this,this.onRideListScroll),this._isAutoFeed=!1,this._rideModel&&this._rideModel.clearRes()},d_u.prototype.onAdded=function(){Ulau(this,RideModel,Laya,LED,l_r)},d_u.prototype.onStarListRender=function(e,p_l){var p_g=e.getChildByName("starClip"),b_s=e.dataSource;p_g.index=b_s},d_u.prototype.updatePvSkillItem=function(){var e=this.rideList.getItem(this.rideList.selectedIndex),p_l=Config.ride_ride[e.rid];if(p_l.skill){var p_g=new x_h(p_l.id,p_l.desc,e.lv,e.star,PassiveSkillType.MOUNT);this.pvSkillItem.visible=!0,this.pvSkillItem.updateSkillUI(p_l.skill[0],PassiveSkillType.MOUNT,p_g,!0)}else this.pvSkillItem.visible=!1},d_u.close=function(){Gajf(e)},d_u.prototype.onRideListSelect=function(e){Aaaj(e,this)},d_u.prototype.resetEffectPos=function(e){e&&(e.off(Laya.Event.LOADED,this,this.resetEffectPos),e.x=(102-e.width>>1)-8,e.y=(102-e.height>>1)-8)},d_u.prototype.updateList=function(){var e=RideModel.instance.rideList,p_l=this.getSeleRideData(e);if(this.rideList.array=e,p_l){var p_g=e.indexOf(p_l);if(this.rideList.selectedIndex<0){var b_s=0!=(this.rideList.selectedIndex=p_g)&&p_g%4==0?0:4*Math.floor(p_g/4);this.rideList.scrollTo(b_s)}else this.updateView()}else this.rideList.selectedIndex=0},d_u.prototype.onRideListRender=function(e,p_l){var p_g=e.getChildByName("bg"),b_s=e.getChildByName("iconBox"),d_u=b_s.getChildByName("rideSp"),b_e=e.getChildByName("i_equip"),d_m=e.getChildByName("t_name"),d_w=e.getChildByName("t_lv"),f_t=e.getChildByName("rp"),v_z=e.getChildByName("shade"),d_h=e.dataSource,r_t=Config.ride_ride[d_h.rid];d_w.text=0<d_h.lv?Utils.$("lv.{1}",d_h.lv):"",1!=r_t.quality&&2!=r_t.quality&&3!=r_t.quality||(d_m.color=Config.color[2001].color),4==r_t.quality&&(d_m.color=Config.color[2002].color),5==r_t.quality&&(d_m.color=Config.color[2003].color),6==r_t.quality&&(d_m.color=Config.color[2004].color),p_g.index=r_t.quality-1;var t_n=b_s.getChildByName("effect");(t_n=Resource.ResManager.getQualityEft(r_t.quality,t_n))&&(t_n.name="effect",t_n.index=0,t_n.play(),null===t_n.parent&&b_s.addChild(t_n),t_n.on(Laya.Event.LOADED,this,this.resetEffectPos,[t_n])),d_m.text=r_t.desc;var f_y=Resource.ResUrl.getIconUrl(r_t.icon);d_u=Resource.ResManager.Instance.getImg(f_y,d_u),b_e.visible=RideModel.instance.isWearRide(d_h.rid),v_z.visible=!d_h.isActive;var p_q=RideModel.instance.canRideUp(d_h.rid);f_t.visible=p_q,this.onRideListScroll();var h_h=e.getChildByName("starBox");TalismanModel.instance.changeActStar(h_h,d_h.star)},d_u.prototype.onRideListScroll=function(){if(this.i_next.visible=this.rideList.scrollBar.value<this.rideList.scrollBar.max,this.i_pre.visible=0<this.rideList.scrollBar.value,this.rp_next.visible=this.rp_pre.visible=!1,0<this.rideList.startIndex)for(var e=0;e<this.rideList.startIndex;++e)if(RideModel.instance.canActiveRide(this.rideList.array[e].rid)||RideModel.instance.canFeedRide(this.rideList.array[e].rid)){this.rp_pre.visible=!0;break}if(this.rideList.startIndex+4<this.rideList.length)for(e=this.rideList.startIndex+4;e<this.rideList.length;++e)if(RideModel.instance.canActiveRide(this.rideList.array[e].rid)||RideModel.instance.canFeedRide(this.rideList.array[e].rid)){this.rp_next.visible=!0;break}},d_u.prototype.getSeleRideData=function(e,p_l){if(void 0===p_l&&(p_l=1),!e)return null;var p_g,b_s,d_u,b_e=0,d_m=e.length,d_w=RideModel.instance;for(b_e=0;b_e<d_m;b_e++){p_g=e[b_e];var f_t=RideModel.instance.isWearRide(p_g.rid);f_t&&(b_s=p_g);var v_z=RideModel.instance.getRideShowVo(p_g),d_h=d_w.isCanUpStar(p_g,v_z),r_t=d_w.isCanFeed(p_g);if(p_g.isActive&&d_h&&v_z.isShowStar||r_t&&v_z.isShowFeed)if(1==p_l){if(f_t)return p_g}else 2==p_l&&(d_u=d_u||[]).push(p_g)}return 1==p_l?this.getSeleRideData(e,2):2==p_l&&d_u&&d_u.length?(d_u.sort((function(e,p_l){return e.rid<p_l.rid?-1:1})),d_u[0]):b_s||e[0]},Object.defineProperty(d_u.prototype,"curLevel",{get:function(){var e=this.rideList.selectedItem.rid,p_l=RideModel.instance.getRideInfoByRid(e);return p_l?p_l.lv:0},enumerable:!0,configurable:!0}),d_u.prototype.updateView=function(){var e=this.rideList.selectedItem;if(!e&&0<=this.rideList.array.length&&(e=this.rideList.array[0],this.rideList.selectedIndex=0),e){var p_l=e.rid,p_g=RideModel.instance.getRideInfoByRid(p_l),b_s=RideModel.instance.getRidePropById(p_l),d_u=Config.ride_ride[p_l];d_u&&0<d_u.propType?(this.typeClip.visible=!0,this.typeClip_di.visible=!0,this.typeClip.index=d_u.propType-1):(this.typeClip.visible=!1,this.typeClip_di.visible=!1);var b_e=b_p.calPropFight(b_s),d_m=Config.ride_ride[p_l];this.combatSp=b_p.getNumSp(NumType.FIGHTING,b_e,this.combatSp,-13),this.combatSp.x=370-9*b_e.toString().length;var d_w=d_m.ui_scaleOffset;if(d_w&&0<d_w.length&&(d_w[0]&&this.rideSp.scale(d_w[0],d_w[0]),d_w[1]&&this.rideSp.pos(d_w[1][0],d_w[1][1])),this._rideModel.changeModel(d_m.model),this._rideModel.visible=!0,this._rideModel.stand(3),this.wearBox.visible=p_g.isActive,RideModel.instance.isWearRide(p_l)?(this.wearLab.visible=!0,this.wearBox.visible=!1):this.wearLab.visible=!1,this.upStarBox.visible=!1,this.nameClip.index=d_m.clipIndex,p_g.isActive){this.inActiveImg.visible=!1,this.itemActiveBox.visible=!1,this.taskActiveBox.visible=!1,this.activeBox.visible=!1;var f_t=RideModel.instance.getRideShowVo(p_g);this.feedBox.visible=f_t.isShowFeed,this.maxLvLab.visible=f_t.isShowMax,TalismanModel.instance.changeActStar(this.starBox,p_g.star),f_t.isShowFeed&&this.viewFeedBox(p_g),this.updateUpStar(f_t),this.lvSp=b_p.getNumSp(NumType.FASHION,p_g.lv,this.lvSp,-5),this.lvSp.x=this.lvInfo.x-14*p_g.lv.toString().length}else this.upStarBox.visible=!1,this.inActiveImg.visible=!0,d_m.taskActive?(this.taskActiveBox.visible=!0,this.feedBox.visible=!1,this.maxLvLab.visible=!1,this.itemActiveBox.visible=!1,this.activeBox.visible=!0,this.viewTaskActiveBox(p_g,d_m.taskDesc)):d_m.itemActive&&(this.itemActiveBox.visible=!0,this.feedBox.visible=!1,this.maxLvLab.visible=!1,this.taskActiveBox.visible=!1,this.activeBox.visible=!0,this.viewItemActiveBox(p_g)),this.lvSp=b_p.getNumSp(NumType.FASHION,1,this.lvSp,-5),this.lvSp.x=this.lvInfo.x-14;this.updatePvSkillItem()}},d_u.prototype.updateBtnStatu=function(){this.autoFeedBtn.label=this._isAutoFeed?(j_x("2111_1661")):(j_x("1737_2205_2394")+j_x(2013))},d_u.prototype.viewFeedBox=function(e){var p_l=this.feedBox,p_g=p_l.getChildByName("feedLab"),b_s=p_l.getChildByName("progressBar"),d_u=RideModel.toLevelCnfIndex(e.rid,e.lv),b_e=Config.ride_rideLevel[d_u],d_m=BagModel.instance.getItemCountByItemID(b_e.cost[0][0],BagTypeDefine.BAG_TYPE_ITEM);p_g.text=Utils.$("{1}/{2}",d_m,b_e.cost[0][1]),p_g.color=d_m>=b_e.cost[0][1]?"#00802e":"#ef2b2b",b_s.value=e.exp/b_e.num,this.progressValueLab.text=e.exp+"/"+b_e.num,this.rp_feed.visible=this.rp_autoFeed.visible=RideModel.instance.isCanFeed(e),this.autoFeedBtn.label=this._isAutoFeed&&this.rp_autoFeed.visible?(j_x("2111_1661")):(j_x("1737_2205_2394")+j_x(2013))},d_u.prototype.updateActiveItem=function(e,p_l){if(this.rideList.selectedItem){var p_g=Config.ride_ride[this.rideList.selectedItem.rid];if(p_g){var b_s=p_g.itemActive[0][0],d_u=p_g.itemActive[0][1],b_e=Config.CItem(b_s);e.setItemData({id:b_s,amount:d_u,name:b_e.name},ItemBoxDefine.MODULE_ITEM,!0);var d_m=BagModel.instance.getItemCountByItemID(b_s,BagTypeDefine.BAG_TYPE_ITEM);this.rp_active.visible=d_u<=d_m,e.numTxt.text=d_m+"/"+d_u,e.numTxt.color=d_u<=d_m?Utils.Color.NAME_GREEN:Utils.Color.NAME_RED}}},d_u.prototype.updateUpStar=function(e){Ihtc(e,this,RideModel)},d_u.prototype.viewItemActiveBox=function(e){var p_l=this.itemActiveBox.getChildByName("combatLab"),p_g=RideModel.instance.calActiveFight(e.rid);p_l.text=p_g.toString(),this.activeItemList.array=[1]},d_u.prototype.checkCanActive=function(){var e=this.rideList.selectedItem,p_l=Config.ride_ride[e.rid];if(null==e||!p_l)return!1;if(!p_l.itemActive)return!0;var p_g=p_l.itemActive[0][0],b_s=p_l.itemActive[0][1];return!(BagModel.instance.getItemCountByItemID(p_g,BagTypeDefine.BAG_TYPE_ITEM)<b_s&&(r_f.instance.isWindow(p_g),1))},d_u.prototype.updateSkillItem=function(e,p_l){},d_u.prototype.checkCanFeed=function(){if(!this.rideList.selectedItem)return!1;var e=this.rideList.selectedItem.rid,p_l=RideModel.instance.getRideInfoByRid(e||0);if(!p_l||!p_l.rid)return!1;var p_g=RideModel.toLevelCnfIndex(p_l.rid,p_l.lv),b_s=Config.ride_rideLevel[p_g],d_u=RideModel.toLevelCnfIndex(p_l.rid,p_l.lv+1);return Config.ride_rideLevel[d_u]?!(BagModel.instance.getItemCountByItemID(b_s.cost[0][0],BagTypeDefine.BAG_TYPE_ITEM)<b_s.cost[0][1]&&(r_f.instance.isWindow(b_s.cost[0][0]),1)):(b_p.broadcastNotice((j_x("230_590_1300")+j_x("1117_1081_2251")+j_x("15_2342")),1),!1)},d_u.prototype.onMouseClick=function(p_l){var p_g=p_l.target,b_s=this.rideList.selectedItem?this.rideList.selectedItem.rid:1;switch(p_g.name){case"closeBtn":case"backBtn":d_u.close();break;case"feedBtn":if(!this.checkCanFeed())break;this.tarLv=this.curLevel,RideModel.instance.reqRideFeed(b_s);break;case"autoFeedBtn":if(!this.checkCanFeed())break;var b_e=RideModel.instance.getRideInfoByRid(b_s);if(!b_e)return;var d_m=RideModel.toLevelCnfIndex(b_e.rid,b_e.lv),d_w=RideModel.toLevelCnfIndex(b_e.rid,b_e.lv+1);if(Config.ride_rideLevel[d_m],!Config.ride_rideLevel[d_w])return void b_p.broadcastNotice((j_x("230_590_1300")+j_x("1117_1081_2251")+j_x("15_2342")),1);this.tarLv=b_e.lv,this._isAutoFeed=!this._isAutoFeed,this.updateBtnStatu(),this.timerFeed(b_s);break;case"activeBtn":if(!this.checkCanActive())break;RideModel.instance.reqRideActive(b_s);break;case"detailBtn":e.RidePerDetailPanel.open(b_s);break;case"wearBtn":RideModel.instance.reqRideOp(b_s,1);break;case"i_next":this.rideList.startIndex+4<this.rideList.length-4?this.rideList.scrollTo(this.rideList.startIndex+4):this.rideList.scrollTo(this.rideList.length-4);break;case"i_pre":0<this.rideList.startIndex-4?this.rideList.scrollTo(this.rideList.startIndex-4):this.rideList.scrollTo(0);break;case"btnStarUp":if(!(b_e=RideModel.instance.getRideInfoByRid(b_s))||0==b_e.star)return void b_p.broadcastNotice((j_x("1777_320_2335")+j_x("1796_2060_1919")+j_x("33_562_371")+j_x(1148)),1);if(b_e){var f_t=RideModel.instance.getUpStarCnf(b_e.rid,b_e.star,!0);return f_t&&!f_t.cost?void b_p.broadcastNotice((j_x("1300_1117_1081")+j_x("2251_1148_2342")),1):void e.RideUpStarPanel.open(b_e)}if(!this._itemId)return;z_j.goodAlert(this._itemId,this._needNum,ItemGetDefine.rideUpStar,this,this.sendUpStar)}},d_u.prototype.updateStarItem=function(e,p_l){var p_g=this.rideList.selectedItem.rid,b_s=RideModel.instance.getRideInfoByRid(p_g),d_u=RideModel.instance.getUpStarCnf(b_s.rid,b_s.lv);if((d_u=d_u||RideModel.instance.getUpStarCnf(b_s.rid,b_s.star,!0))&&d_u.cost){var b_e=d_u.cost[0][0],d_m=d_u.cost[0][1],d_w=Config.CItem(b_e);e.isShowName=!1,e.setItemData({id:b_e,amount:d_m,name:d_w.name},ItemBoxDefine.MODULE_ITEM,!0);var f_t=BagModel.instance.getItemCountByItemID(b_e,BagTypeDefine.BAG_TYPE_ITEM);this.rp_active.visible=d_m<=f_t,e.numTxt.text=f_t+"/"+d_m,e.numTxt.color=d_m<=f_t?Utils.Color.NAME_GREEN:Utils.Color.NAME_RED}},d_u.prototype.stopAutoFeed=function(){Anfu(this)},d_u.prototype.viewTaskActiveBox=function(e,p_l){var p_g=this.taskActiveBox.getChildByName("combatLab"),b_s=this.taskActiveBox.getChildByName("descLab"),d_u=RideModel.instance.calActiveFight(e.rid);p_g.text=d_u.toString(),b_s.text=p_l,this.rp_active.visible=!1},d_u.prototype.sendUpStar=function(){Kqtz(RideModel,this)},Object.defineProperty(d_u.prototype,"progress",{get:function(){return this.feedBox.getChildByName("progressBar").value},set:function(e){this.feedBox.getChildByName("progressBar").value=e;var p_l=parseInt(this.progressValueLab.text.split("/")[1])||0;this.progressValueLab.text=(p_l*e).toFixed(0)+"/"+p_l},enumerable:!0,configurable:!0}),d_u.prototype.onPerUpdate=function(){this.rideList.array=RideModel.instance.rideList,this._isAutoFeed?(this.playEffect(this.rideList.selectedItem.rid),Laya.timer.once(500,this,this.timerFeed,[this.rideList.selectedItem.rid]),Laya.timer.once(250,this,this.updateView),Laya.Tween.to(this,{progress:1},250)):(this.updateView(),this.playEffect(this.rideList.selectedItem.rid))},d_u.prototype.onChang=function(){this.effStar.index==this.effStar.total-1&&(this.showUpEff(!1),this.openUpStarSucceePanel(this._upId))},d_u.prototype.timerFeed=function(e){if(this._isAutoFeed){var p_l=RideModel.instance.getRideInfoByRid(e),p_g=RideModel.toLevelCnfIndex(p_l.rid,p_l.lv),b_s=Config.ride_rideLevel[p_g];if(b_s.lv>this.tarLv){this.playEffect(e);var d_u=RideModel.toLevelCnfIndex(p_l.rid,p_l.lv+1);if(!Config.ride_rideLevel[d_u])return b_p.broadcastNotice((j_x("230_590_1300")+j_x("1117_1081_2251")+j_x("15_2342")),1),this.autoFeedBtn.label=(j_x("1737_2205_2394")+j_x(2013)),void(this._isAutoFeed=!1);this.tarLv+=1}var b_e=BagModel.instance.getItemCountByItemID(b_s.cost[0][0],BagTypeDefine.BAG_TYPE_ITEM);if(!(b_s.lv<=this.tarLv))return this.autoFeedBtn.label=(j_x("1737_2205_2394")+j_x(2013)),void(this._isAutoFeed=!1);b_e>=b_s.cost[0][1]?RideModel.instance.reqRideAutoFeed(e):(b_p.broadcastNotice((j_x("1661_1502_2462")+j_x(1779))),this.autoFeedBtn.label=(j_x("1737_2205_2394")+j_x(2013)),this._isAutoFeed=!1)}else this.autoFeedBtn.label=(j_x("1737_2205_2394")+j_x(2013))},d_u.prototype.playEffect=function(e){var p_l=RideModel.instance.getRideInfoByRid(e);if(p_l){var p_g=RideModel.toLevelCnfIndex(p_l.rid,p_l.lv),b_s=Config.ride_rideLevel[p_g];b_s&&b_s.lv>this.tarLv&&(this.stopEffect(),Resource.SoundManager.instance.playSoundById(8,!1),this.shengjiEft.isPlaying||(this.shengjiEft.visible=!0,this.shengjiEft.on(Laya.Event.COMPLETE,this,this.onEftComplete),this.shengjiEft.play(!1)),this.tarLv=b_s.lv)}},d_u.prototype.onUpdateUpStar=function(e){void 0===e&&(e=1),this._upId=e},d_u.prototype.stopEffect=function(){Ipig(this,Laya)},d_u.prototype.onEftComplete=function(){Cjft(this)},d_u.prototype.showUpEff=function(e){void 0===e&&(e=!0),(this.effStar.visible=e)?(this.effStar.index=0,this.effStar.play(),this.effStar.on(Laya.Event.CHANGE,this,this.onChang)):(this.effStar.stop(),this.effStar.off(Laya.Event.CHANGE,this,this.onChang))},d_u.prototype.openUpStarSucceePanel=function(p_l){void 0===p_l&&(p_l=1),e.RideUpStarSuccPanel.open(p_l)},d_u.prototype.onRideChange=function(e){this.rideList.selectedItem.rid==e?(this.wearLab.visible=!0,this.wearBox.visible=!1):(this.wearLab.visible=!1,this.wearBox.visible=!0)},d_u.prototype.toVsShow=function(e){e.replace(/[^\x00-\xff]/g,"01");for(var p_l=e.split(""),p_g="",b_s=0;b_s<p_l.length;b_s++)p_g=p_g.concat(p_l[b_s],"\n");return p_g},d_u);function d_u(){var b_s=p_l.call(this)||this;return b_s._isAutoFeed=!1,b_s._id=1,b_s._upId=1,b_s._rideModel=new n_k,b_s.rideSp.addChild(b_s._rideModel),b_s.on(Laya.Event.ADDED,b_s,b_s.onAdded),b_s.on(Laya.Event.REMOVED,b_s,b_s.onRemove),b_s.activeItemList.itemRender=e.ItemBox,b_s.activeItemList.renderHandler=p_g.create(b_s,b_s.updateActiveItem,[],!1),b_s.passSkillList.itemRender=e.ItemBox,b_s.passSkillList.renderHandler=p_g.create(b_s,b_s.updateSkillItem,[],!1),b_s.rideList.array=null,b_s.rideList.renderHandler=Laya.Handler.create(b_s,b_s.onRideListRender,null,!1),b_s.rideList.selectHandler=Laya.Handler.create(b_s,b_s.onRideListSelect,null,!1),b_s.rideList.hScrollBarSkin="",b_s.starItemList.itemRender=e.ItemBox,b_s.starItemList.renderHandler=p_g.create(b_s,b_s.updateStarItem,[],!1),b_s}e.RidePerPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=e.TalismanUpgradePanel,__extends(b_s,p_l),b_s.prototype.openSuccPanel=function(){if(this._isSucc){var p_l=this.dataSource;p_l&&e.RideUpStarSuccPanel.open(p_l.rid),this._isSucc=!1}},b_s.prototype.setNextGradeData=function(){var e=this.dataSource,p_l=Config.ride_ride[e.rid],p_g=999,b_s=RideModel.instance.getUpStarCnf(e.rid,e.star,!0);b_s&&(this.propTxt.text=b_s.propDesc,this.costList.array=b_p.getRewardDatas(b_s.cost),this.redPoint.visible=b_s.cost&&BagModel.instance.checkConsume(this.costList.array),b_s.cost||(p_g=e.star));var d_u=e.star+1;d_u=p_g<d_u?p_g:d_u,TalismanModel.instance.changeActStar(this.starBox_1,d_u),this.lvTxt_1.text=0<e.lv?Utils.$(("{1}"+j_x(2342)),e.lv):"",this.nameTxt_1.color=Utils.ItemUtils.getTalismanQualityColor(p_l.quality),this.nameTxt_1.changeText(p_l.desc);var b_e=p_l.quality-3;this.bgQuaClip_1.index=b_e<0?0:b_e;var d_m=Resource.ResUrl.getIconUrl(p_l.icon);this.setIcon(d_m,this.icon_1)},b_s.prototype.onClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":b_s.close();break;case"upBtn":var p_l=this.dataSource,p_g=RideModel.instance.getUpStarCnf(p_l.rid,p_l.star,!0);if(!p_g||!p_g.cost)return void b_p.broadcastNotice((j_x("1300_1117_1067")+j_x(2128)));if(!b_p.checkConsume(p_g.cost))return void r_f.instance.isWindow(p_g.cost[0][0]);RideModel.instance.reqRideUpStar(p_l.rid),this._isSucc=!0,Resource.SoundManager.instance.playSoundById(7,!1),this.playEffect(this.effect_left)}},b_s.prototype.playEffectComplete=function(e){e&&(e.visible=!1,e===this.effect_left?this.playEffect(this.effect_mid):e===this.effect_mid?this.playEffect(this.effect_right):b_s.close())},b_s.prototype.updateData=function(){Emix(this,j_x)},b_s.open=function(e){Spsr(e,UIM,b_s)},b_s.prototype.setCurGradeData=function(){var e=this.dataSource,p_l=Config.ride_ride[e.rid];this.lvTxt.text=0<e.lv?Utils.$(("{1}"+j_x(2342)),e.lv):"",TalismanModel.instance.changeActStar(this.starBox,e.star),this.nameTxt.color=Utils.ItemUtils.getTalismanQualityColor(p_l.quality),this.nameTxt.changeText(p_l.desc);var p_g=p_l.quality-3;this.bgQuaClip.index=p_g<0?0:p_g;var b_s=Resource.ResUrl.getIconUrl(p_l.icon);this.setIcon(b_s,this.icon)},b_s.close=function(){Gcdj(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.rewardList.visible=!1,e}e.RideUpStarPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.ride.RideUpStarSuccPanelUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Mamn(this)},b_s.prototype.updateData=function(){this._id=this.dataSource;var e=Config.ride_ride[this._id];if(e){this.showRoleModel(e.model),this._roleModel&&this._roleModel.startWave(10,1);var p_l=RideModel.instance.getRideInfoByRid(this._id),p_g=p_l.star-1,b_s=RideModel.instance.getUpStarCnf(p_l.rid,p_g,!0),d_u=100,b_e=150;if(b_s){d_u=b_s.limitLv,p_g=b_s.star;var d_m=RideModel.instance.getUpStarCnf(p_l.rid,p_g+1,!0);d_m&&(b_e=d_m.limitLv)}this.txtProp1.text=d_u+(j_x(2342)),this.txtProp2.text=b_e+(j_x(2342)),TalismanModel.instance.changeActStar(this.starBox,p_l.star)}},b_s.prototype.updateStarEffect=function(e){this.removeStarEffect(),e&&(this.effStar.on(Laya.Event.COMPLETE,this,this.removeStarEffect),this.effStar.pos(e.x,e.y),this.effStar.play(!1))},b_s.prototype.removeRoleModel=function(){this._roleModel&&(this._roleModel.dispose(),this._roleModel.removeSelf(),this._roleModel=null)},b_s.prototype.removeStarEffect=function(){Stdh(this,Laya)},b_s.open=function(e){void 0===e&&(e=1),UIM.open(b_s,null,e,!1,!1,!0,!0)},b_s.prototype.onRemove=function(){Iojp(this)},b_s.prototype.showRoleModel=function(e,p_l){void 0===p_l&&(p_l="stand"),e&&""!=e&&(this._roleModel||(this._roleModel=new n_k,this.modelSp.addChild(this._roleModel)),this._roleModel.changeModel(e),this._roleModel.setAction(p_l,3,!0))},b_s.close=function(){Cddt(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.RideUpStarSuccPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.godEquip.godEquipItemUI,__extends(b_s,p_l),b_s.prototype.updateView=function(p_l,p_g,b_s,d_u,b_e){void 0===p_l&&(p_l=0),void 0===p_g&&(p_g=!0),void 0===b_s&&(b_s=!0),void 0===d_u&&(d_u=!0),void 0===b_e&&(b_e=!0);var d_m=this.dataSource;if(this.shade.visible=this.partClip.visible=!1,this.icon.visible=!1,this.bg.index=0,this.clickBtn.dataSource={part:p_l,vo:d_m},this.clickBtn.mouseEnabled=d_u,this.redpointImg.visible=!1,this.starList.visible=!1,d_m){var d_w=Config.CItem(d_m.id);d_w&&(this.starList.array=this.starArr(d_w.star),this.redpointImg.visible=this.redpointImg.visible||GodEquipModel.ins.canComposeGodEquip(d_m.id),this.bg.index=d_w.quality-1,this.icon.skin=Resource.ResUrl.getIconUrl(d_w.icon),this.nameLab.text=d_w.name,this.nameLab.visible=b_e,this.nameLab.color=Utils.ItemUtils.getQualityColor(d_w.quality),this.icon.visible=!0,this.clipInfo.clipUrl=Resource.ResUrl.getQualityEftUrl(d_w.quality),b_s&&e.EffectPlayer.playLoop(this,this.clipStr,this.bg,this.clipInfo,null,null,6))}else e.EffectPlayer.hideEffect(this,this.clipStr),this.nameLab.visible=!1,p_g&&(this.shade.visible=this.partClip.visible=!0,this.partClip.index=n_o.ins.getEquipClipIndex(p_l))},b_s.prototype.setRedPoint=function(e){Sfbh(e,this)},b_s.prototype.setClick=function(e,p_l){Wics(e,p_l,this,Laya)},b_s.prototype.setNameY=function(e){Gwom(e,this)},b_s.prototype.setNameVisible=function(e){Klmo(e,this)},b_s.prototype.clearClick=function(e,p_l){Mklt(e,p_l,this,Laya)},b_s.prototype.starArr=function(e){for(var p_l=new Array,p_g=0;p_g<e;p_g++)p_l.push(p_g);return p_l},b_s);function b_s(){var e=p_l.call(this)||this;return e.clipStr="clipEff",e.clipInfo={clipUrl:"",clipX:4,clipY:3,interval:83},e}e.GodEquipItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.godEquip.godEquipUI,__extends(b_s,p_l),b_s.prototype.init=function(){this._EquipModel=new n_k,this.modelContainer.addChild(this._EquipModel),this.clickModel.mouseEnabled=!0,this._index=0,this._suitIndex=0,this.modelContainer.scale(1.8,1.8),this.on(Laya.Event.ADDED,this,this.onAdded),this.on(Laya.Event.REMOVED,this,this.onRemoved),z_j.setList(this.godSuitList,this,this.renderSuitList,this.onListSelect),z_j.setList(this.equipList,this,this.renderItemBox,this.onClickEquip)},b_s.prototype.onClickEquip=function(e){if(-1!=e){var p_l=this.equipList.getCell(e);if(p_l){var p_g=p_l.getChildByName("itemBox").getChildByName("selectBox");p_g&&(p_g.visible=!0,this._index=e);var b_s=p_l.dataSource;if(null!=b_s){var d_u=this.currentSuitEquip[b_s],b_e=this.godSuitList.selectedItem,d_m=GodEquipModel.ins.getChangeEquip(b_e,b_s,this._bagInfo),d_w=0<d_m.length?d_m[0].fighting:0,f_t=d_u?d_u.fighting:0;if(0<d_m.length&&f_t<d_w)n_o.ins.reqGodEquipWear(d_m[0].uuid);else if(!d_u){var v_z=Config.godEquip_suit[b_e];v_z&&r_f.instance.isWindow(v_z.wayId[e])}this.updateEquipInfo(d_u),this.equipList.selectedIndex=-1}}}},b_s.prototype.onAdded=function(){Azso(this,GodEquipModel,LED,l_r,Laya)},b_s.prototype.onItemSwap=function(e){e&&(this._bagInfo=GodEquipModel.ins.getBagInfo(),this.updateView(),this.godSuitList.refresh())},b_s.open=function(){Snqq(UIM,b_s)},b_s.prototype.onClickEquipBtn=function(){var p_l=this.equipList.getCell(this._index).dataSource;if(null!=p_l){var p_g=this.currentSuitEquip[p_l];p_g&&e.GodEquipTipsPanel.open(p_g,!1)}},b_s.prototype.onListSelect=function(e){if(-1!=e){var p_l=this.godSuitList.getItem(e);null!=p_l&&(this.isSuitOpen(p_l,!0)?(this._suitIndex=e,this.updateView()):this.godSuitList.selectedIndex=this._suitIndex)}},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"composeBtn":e.ItemFurnacePanel.open(2);break;case"desComeBtn":e.DecomposePanel.open(2);break;case"backBtn":case"closeBtn":b_s.close()}},b_s.prototype.updateEquipInfo=function(e){if(this.clickTip.visible=!!e,e){var p_l=Config.item_equipment[e.id];this.equipName.text=p_l.name,this._EquipModel.visible=!0;var p_g=Config.godEquip_godEquipM[e.id].model.split("/");2<=p_g.length&&(this._EquipModel.changeModel("effects/"+p_g[0]),this._EquipModel.setAction(p_g[1],0,!0,300))}else this._EquipModel.visible=!1,this.equipName.text=""},b_s.prototype.isSuitOpen=function(e,p_l){void 0===p_l&&(p_l=!1);var p_g=Config.godEquip_suit[e];return!(!p_g||""==p_g.icon||null==p_g.icon)||(p_l&&b_p.broadcastNotice((j_x("2287_206_155")+j_x(1186))),!1)},b_s.prototype.onRemoved=function(){Qros(LED,l_r,this,Laya)},b_s.prototype.updateItem=function(e){var p_l=Config.CItem(e.id);e&&p_l.mainclass===ItemTypeDefine.EQUIPMENT&&p_l.subclass===EquipSubClassDefine.EquipGod&&(this._bagInfo=GodEquipModel.ins.getBagInfo(),this.updateView(),this.godSuitList.refresh())},b_s.prototype.changeEquip=function(e){Itqh(e,n_o)},b_s.prototype.renderStarPorp=function(e){var p_l=GodEquipModel.ins.countStarNum(e),p_g=this.propBox._childs,b_s=this.titleBox._childs,d_u=["#6e6e6e","#000000"],b_e=["#6e6e6e","#00802e"],d_m=this.godSuitList.selectedItem,d_w=GodEquipModel.ins.getSuitFightByInfos(d_m,p_l,e);b_p.getNumSp(NumType.FIGHTING,d_w,this.fightingSp,-12);var f_t=Config.godEquip_suit[d_m];this.propClip.index=f_t.propDesc;for(var v_z=0;v_z<b_s.length;v_z++)p_g[v_z].text=f_t.desc[v_z],v_z<=p_l?(b_s[v_z].color=d_u[1],p_g[v_z].color=b_e[1]):(b_s[v_z].color=d_u[0],p_g[v_z].color=b_e[0],p_g[v_z].text=f_t.desc[v_z])},b_s.prototype.renderSuitList=function(e,p_l){var p_g=e.getChildByName("suitBtn"),b_s=e.getChildByName("redpointImg"),d_u=e.getChildByName("lock"),b_e=e.getChildByName("bg"),d_m=e.dataSource,d_w=Config.godEquip_suit[d_m];b_e.index=p_l==this._suitIndex?1:0,this.isSuitOpen(d_m)?(p_g.skin="res/ui/godEquip/"+d_w.icon,d_u.visible=!1,p_g.visible=!0,b_s.visible=GodEquipModel.ins.redPointSuit(d_m,this._bagInfo)):(d_u.visible=!0,p_g.visible=!1,b_s.visible=!1)},b_s.prototype.renderItemBox=function(p_l,p_g){var b_s=p_l.getChildByName("itemBox");b_s||(b_s=new e.GodEquipItem,p_l.addChild(b_s),b_s.name="itemBox");var d_u=p_l.dataSource;b_s.dataSource=this.currentSuitEquip[d_u],b_s.updateView(d_u);var b_e=b_s.getChildByName("selectBox");if(b_e){var d_m=p_g==this._index;b_e.visible=d_m}b_s.setRedPoint(GodEquipModel.ins.redPoint(d_u,this.godSuitList.selectedItem,b_s.dataSource))},b_s.prototype.updateView=function(){this.btnRed(this.composeBtn,BagModel.instance.checkComposeRedPoint(GameDefine.comp_God)),this.btnRed(this.desComeBtn,DecomposeModel.instance.isGodRed()),this.currentSuitEquip=GodEquipModel.ins.getGodEquipBySuitId(this.godSuitList.selectedItem),this.equipList.array=GodEquipModel.partPos;var e=this._index<0?0:this._index;this.updateEquipInfo(this.currentSuitEquip[GodEquipModel.partPos[e]]),this.renderStarPorp(this.currentSuitEquip)},b_s.prototype.btnRed=function(e,p_l){void 0===p_l&&(p_l=!1),e.getChildByName("redpointImg").visible=p_l},b_s.close=function(){Ssrw(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e.currentSuitEquip=null,e._bagInfo=[],e}e.GodEquipPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.godEquip.godEquipTipUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Ioca(this,Laya)},b_s.prototype.countBoxHeight=function(e){if(e){for(var p_l=0,p_g=0;p_g<e.numChildren;p_g++){var b_s=e.getChildAt(p_g);b_s&&(p_l+=b_s.height)}e.height=Math.max(80,p_l)}},b_s.open=function(e,p_l){void 0===p_l&&(p_l=!1),UIM.open(b_s,null,{itemVo:e,isCBtn:p_l},!1,!1,!0,!0)},b_s.prototype.updateData=function(){if(this._infoVo=this.dataSource.itemVo,this._infoVo){var p_l=Config.item_equipment[this._infoVo.id],p_g=LgcM.ins.heroVo;this.item||(this.item=new e.GodEquipItem,this.itemBox.addChild(this.item),this.item.setNameVisible(!1)),this.item.dataSource=this._infoVo,this.item.updateView(0,!1,!1,!0,!1),this.realmTxt.color=p_l.stateLevel<=p_g.stateLv||!p_l.stateLevel?Utils.Color.WHITE:Utils.Color.RED,this.realmTxt.text=Config.state_state[p_l.stateLevel].desc,this.nameTxt.text=p_l.name,this._infoVo.fighting||this._infoVo.calcFight(),this.fightingTxt.text=this._infoVo.fighting.toString(),this.lvTxt.color=p_l.level<=p_g.level||!p_l.level?Utils.Color.WHITE:Utils.Color.RED,this.lvTxt.text=""+p_l.level,this.queClip.index=p_l.quality-1,this.nameTxt.color=Resource.ResManager.getQualityColor(p_l.quality);var b_s=CharacterProperty.getPropertys(p_l.basePropFixed),d_u={};d_u[2]=b_s,TalismanModel.instance.setProp(this.baseTxt,d_u,"<br>",["#d8dcec","#71de66"]);var b_e=GodEquipModel.ins.godEquipGodProp(this._infoVo.id);b_e&&0<b_e.length?((d_u={})[2]=b_e,this.godPropBox.visible=!0,TalismanModel.instance.setProp(this.legendTxt,d_u,"<br>",["#d8dcec","#71de66"])):this.godPropBox.visible=!1,this.suitTxt.innerHTML=GodEquipModel.ins.getSuitPropStr(this._infoVo.id)}else this.realmTxt.text="",this.nameTxt.text="",this.fightingTxt.text="",this.baseTxt.innerHTML="",this.itemBox.visible=!1,this.baseTxt.height=this.baseTxt.contextHeight;this.resite()},b_s.prototype.onRemove=function(){Inbj(this,Laya)},b_s.prototype.onClick=function(e){var p_l=e.target;switch(this.dataSource.itemVo,p_l.name){case"backBtn":case"closeBtn":case"changeBtn":b_s.close()}},b_s.prototype.resite=function(){this.countBoxHeight(this.godPropBox),this.countBoxHeight(this.suitBox);var e=this.godPropBox.visible?this.godPropBox.height:0;e+=this.suitBox.visible?this.suitBox.height:0,this.bgImg.height=this.baseTxt.y+this.baseTxt.height+25+e,this.tipTxt.y=this.bgImg.height,this.height=this.bgImg.height+this.tipTxt.height+this.changeBtn.height,this.y=Stage.height-this.height>>1,e=this.baseTxt.y+this.baseTxt.height+25,this.godPropBox.visible&&(this.godPropBox.y=e,e+=this.godPropBox.height+5),this.suitBox.visible&&(this.suitBox.y=e),this.changeBtn.y=this.tipTxt.y+this.tipTxt.height},b_s.close=function(){Mozs(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.changeBtn.visible=!1,z_j.setHtml(e.baseTxt,22,"#b4fbf2",10,"left",b_p.config.font,!1),z_j.setHtml(e.legendTxt,22,"#b4fbf2",10,"left",b_p.config.font,!1),z_j.setHtml(e.suitTxt,22,"#e48f49",10,"left"),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.GodEquipTipsPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.roleUI,__extends(d_u,p_l),d_u.prototype.init=function(){this._roleModel=new n_k,this.modelContainer.addChild(this._roleModel),this.on(Laya.Event.ADDED,this,this.onAdded),this.on(Laya.Event.REMOVED,this,this.onRemove),this.equipLst.selectEnable=!0,this.equipLst.selectHandler=p_g.create(this,this.onEquipSelect,null,!1),this.equipLst.renderHandler=p_g.create(this,this.updateEquip,null,!1),this.equipTab.selectHandler=p_g.create(this,this.onTabSelect,[this.equipTab],!1)},d_u.prototype.playOneEft=function(p_l){p_l&&(this._equipUpEffOpts||(this._equipUpEffOpts={clipUrl:"res/ui/common/Clip_shanguang_eft.png",clipX:3,clipY:2,interval:83,blendMode:"lighter"}),e.EffectPlayer.playOnce(p_l,"effsClip",this._equipUpEffOpts))},d_u.prototype.onItemChange=function(e){Uodz(e,this)},d_u.prototype.onTabSelect=function(p_l,p_g,b_s){Laya.timer.clear(this,this.showRoleModel),this._ridePanel&&this._ridePanel.parent&&this._ridePanel.removeSelf(),this._strengthPanel&&this._strengthPanel.parent&&this._strengthPanel.removeSelf(),this._mirrorSelfPanel&&this._mirrorSelfPanel.parent&&this._mirrorSelfPanel.removeSelf();var b_e=this.skillcitta;if(b_e.visible=!1,b_e.onMoveclose(),p_l===this.diTab){if(this.equipBox.visible=!1,0===p_g)this.equipBox.visible=!0,this.updateEquipView();else if(3==p_g)b_e.setDatesource(),b_e.onReset(),b_e.init(),b_e.visible=!0;else if(1===p_g){if(!p_k.instance.checkSystemOpenByName("StrengthPanel",!0))return void(this.diTab.selectedIndex=b_s);this._strengthPanel||(this._strengthPanel=new e.StrengthPanel),this.addChildAt(this._strengthPanel,1)}else if(2===p_g){if(!p_k.instance.checkSystemOpenByName("RidePerPanel",!0))return void(this.diTab.selectedIndex=b_s);if(!this._isLoadRide)return void UIM.instance.showPanelLoadingUI();this._ridePanel||(this._ridePanel=new e.RidePerPanel),this.addChildAt(this._ridePanel,1)}else if(4===p_g){if(!p_k.instance.checkSystemOpenByName("MirrorSelfPanel",!0))return void(this.diTab.selectedIndex=b_s);this._mirrorSelfPanel||(this._mirrorSelfPanel=new e.MirrorSelfPanel),this._mirrorSelfPanel.parent||this.addChild(this._mirrorSelfPanel),this.addChildAt(this._mirrorSelfPanel,1)}}else p_l===this.equipTab&&(0==p_g?p_k.instance.checkSystemOpenByName("FashionView",!0)&&e.FashionView.open():1==p_g?p_k.instance.checkSystemOpenByName("TitlePanel",!0)&&(e.TitlePanel.open(),d_u.close(!0)):2==p_g?p_k.instance.checkSystemOpenByName("GodEquipPanel",!0)?(e.GodEquipPanel.open(),d_u.close(!0)):b_p.broadcastNotice(Config.funcOpen[FuncDefine.godEquip].openError):3==p_g?p_k.instance.checkSystemOpenByName("RefineBodyMianPanel",!0)&&(e.RefineBodyMianPanel.open(),d_u.close(!0)):4==p_g&&e.WingView.open(),this.equipTab.selectedIndex=-1)},d_u.prototype.onRemove=function(){this.off(Laya.Event.CLICK,this,this.onMouseClick),this.equipLst.off(Laya.Event.RENDER,this,this.updateOnekeyRedpoint),LED.off(l_r.ITEM_SWAP,this,this.onItemSwap),LED.off(l_r.TITLE_INFO_UPDATE,this,this.onTitleUpdate),LED.off(l_r.FASHION_LIST,this,this.showRoleModel),LED.off(l_r.ITEM_ADD,this,this.onItemChange),LED.off(l_r.ITEM_REMOVE,this,this.onItemChange),LED.off(l_r.ITEM_AMOUNT_CHANGE,this,this.onItemChange),LED.off(l_r.STRENGTH_INFO_UPDATE,this,this.updateDiRedpoint),LED.off(l_r.SYSTEM_NOTICE_IFNO,this,this.onSysOpen),LED.off(l_r.FIGHT_CHANGE,this,this.updateFight),LED.off(l_r.FASHION_LIST,this,this.updateDiRedpoint),LED.off(l_r.UPDATE_CITTA_INFO,this,this.updateDiRedpoint),LED.off(l_r.UPDATE_CITTARED_INFO,this,this.updateDiRedpoint),LED.off(l_r.REFINE_BODY_INFO,this,this.updateDiRedpoint),LED.off(l_r.REFINE_BODY_ONE_INFO,this,this.updateDiRedpoint),LED.off(l_r.FASHION_USE,this,this.onFashionUse),this._ridePanel&&this._ridePanel.parent&&this._ridePanel.removeSelf(),this._roleModel&&this._roleModel.clearRes(),this.wingModel.clearRes(),this._strengthPanel&&this._strengthPanel.parent&&this._strengthPanel.removeSelf(),this._mirrorSelfPanel&&this._mirrorSelfPanel.parent&&this._mirrorSelfPanel.removeSelf(),Laya.timer.clear(this,this.showRoleModel)},d_u.prototype.onItemSwap=function(e){if(0===this.diTab.selectedIndex&&e.bagType2===BagTypeDefine.BAG_TYPE_EQUIPMENT){var p_l=BagModel.instance.getItemInfoByUuid(e.bagType2,e.uuid1);if(!p_l)return;var p_g=Config.item_equipment[p_l.id];if(!p_g)return;this._hasRedPoint=!1,this.equipLst.array[p_g.place-1]=BagModel.instance.getItemInfoByUuid(e.bagType2,e.uuid1),this.equipLst.refresh();var b_s=this.equipLst.getCell(p_g.place-1);b_s=b_s.getChildByName("itemBox"),this.playOneEft(b_s),Resource.SoundManager.instance.playSoundById(2,!1)}},d_u.prototype.onFashionUse=function(e){Ydjk(e,this)},d_u.prototype.showRoleModel=function(){if(this.fashionRpimg.visible=FashionModel.instance.canActivity(),0==this.diTab.selectedIndex){this._roleModel.visible=!0;var e=LgcM.ins.heroVo;if(!e)return;this._roleModel.changRoleSkin(e,!1,!0,e.fashionWeapon,e.fashionClothes);var p_l=Config.dragon_dragon[e.dragonId];p_l&&this._roleModel.showStateEfts(p_l.effect,180),this.wingModel.updateUI(e.fashionWing)}else this._roleModel.visible=!1},d_u.prototype.onMouseClick=function(p_l){var p_g=p_l.target;switch(p_g.name){case"closeBtn":case"backBtn":d_u.close();break;case"checkBtn":e.RolePropertyPanel.open();break;case"onekeyBtn":BagModel.instance.calcEquipSwap(!1);break;default:"notOpen"===p_g.parent.name&&b_p.broadcastNotOpen()}},d_u.prototype.updateEquipView=function(){Ircu(this,EquipModel,Laya)},d_u.prototype.titleActRedPoint=function(){return Iyah(TitleModel,TitleDefine)},d_u.prototype.onSysOpen=function(){Crrf(SystemNoticeManager,this,e)},d_u.prototype.updateView=function(){this.diTab.visible=!0,0===this.diTab.selectedIndex&&(this.equipBox.visible=!0,this.updateEquipView())},d_u.prototype.onAdded=function(){this.on(Laya.UIEvent.CLICK,this,this.onMouseClick),this.equipLst.on(Laya.Event.RENDER,this,this.updateOnekeyRedpoint),this._clipTab.on("tabSelect",this,this.onTabSelect,[this.diTab]);var e=this.dataSource&&this.dataSource.index||0;this.equipTab.selectedIndex=-1,LED.on(l_r.ITEM_SWAP,this,this.onItemSwap),LED.on(l_r.TITLE_INFO_UPDATE,this,this.onTitleUpdate),LED.on(l_r.FASHION_LIST,this,this.showRoleModel),LED.on(l_r.ITEM_ADD,this,this.onItemChange),LED.on(l_r.ITEM_REMOVE,this,this.onItemChange),LED.on(l_r.ITEM_AMOUNT_CHANGE,this,this.onItemChange),LED.on(l_r.STRENGTH_INFO_UPDATE,this,this.updateDiRedpoint),LED.on(l_r.SYSTEM_NOTICE_IFNO,this,this.onSysOpen),LED.on(l_r.FIGHT_CHANGE,this,this.updateFight),LED.on(l_r.FASHION_LIST,this,this.updateDiRedpoint),LED.on(l_r.UPDATE_CITTA_INFO,this,this.updateDiRedpoint),LED.on(l_r.UPDATE_CITTARED_INFO,this,this.updateDiRedpoint),LED.on(l_r.RIDE_LIST_UPDATE,this,this.updateDiRedpoint),LED.on(l_r.RIDE_PER_UPDATE,this,this.updateDiRedpoint),LED.on(l_r.RIDE_UPSTART_SUCC,this,this.updateDiRedpoint),LED.on(l_r.REFINE_BODY_INFO,this,this.updateDiRedpoint),LED.on(l_r.REFINE_BODY_ONE_INFO,this,this.updateDiRedpoint),LED.on(l_r.FASHION_USE,this,this.onFashionUse),this.diTab.selectedIndex=-1,this.diTab.selectedIndex=e,Laya.timer.once(250,this,this.delayUpdate),this.onSysOpen(),this.diRideBtn.gray||this._isLoadRide||Laya.loader.load(Resource.ResUrl.UI_ATLAS+"ride.atlas",Laya.Handler.create(this,this.onRideUILoadComplete),null,Laya.Loader.ATLAS)},d_u.prototype.updateRoleRedPoint=function(){for(var e=EquipModel.instance.getEquips(),p_l=LgcM.ins.heroVo,p_g=0;p_g<e.length;p_g++)if(EquipModel.instance.hasChangeEquip(p_l.entryId,p_g+1,e[p_g]?e[p_g].fighting:0))return!0;return!1},d_u.prototype.onRideUILoadComplete=function(){this._isLoadRide=!0,2===this.diTab.selectedIndex&&(UIM.instance.closePanelLoadingUI(),this._ridePanel||(this._ridePanel=new e.RidePerPanel),this.addChildAt(this._ridePanel,1))},d_u.prototype.updateOnekeyRedpoint=function(){this.redpointImg.visible=this._hasRedPoint;var e=this.diEquipBtn.getChildByName("redpointImg");e&&(e.visible=TitleModel.instance.canGain||FashionModel.instance.canActivity()||this.updateRoleRedPoint(),LED.event(l_r.ROLE_REPOINT_UPDATE))},d_u.close=function(e){void 0===e&&(e=!1),UIM.close(d_u,e,["res/ui/role/di.jpg","res/ui/role/light_pannel.png","res/ui/state/jingjie_di.jpg","res/ui/state/Clip_dajingjie_eft.png","res/ui/state/Clip_dazuo_eft.png","res/ui/state/Clip_lizi_eft.png","res/ui/state/Clip_xiaojingjie02.png","res/ui/state/Clip_xiaojingjie02.png","res/ui/state/shengji_di.png","res/ui/strength/bg_01.jpg","res/ui/ride/bg_00.png"])},d_u.prototype.updateDiRedpoint=function(){this.btnRed(this.diAmuletBtn,CittaModule.instance.canSoltsRed(1)||CittaModule.instance.canSoltsRed(2)),this.btnRed(this.diEquipBtn,TitleModel.instance.canGain||FashionModel.instance.canActivity()||this.updateRoleRedPoint()||FashionModel.instance.redPointWing()),this.btnRed(this.diStrengthBtn,StrengthModel.instance.canStrength),this.btnRed(this.diRideBtn,RideModel.instance.canRideUp()),this.btnRed(this.refineBodyBtn,RefineBodyModel.ins.isRedPoint()),this.btnRed(this.godBtn,GodEquipModel.ins.redPoint()),this.btnRed(this.mirrorSelfBtn,MirrorSelfModel.ins.redPoint()),this.btnRed(this.wingBtn,FashionModel.instance.redPointWing())},d_u.open=function(e,p_l){void 0===e&&(e=0),void 0===p_l&&(p_l=!1),UIM.open(d_u,["role.atlas","skill.atlas","strength.atlas","clone.atlas"],{index:e},p_l)},d_u.prototype.delayUpdate=function(){Avxz(this)},d_u.prototype.updateFight=function(){Acdt(LgcM,b_p,NumType,this)},d_u.prototype.btnRed=function(e,p_l){var p_g=e.getChildByName("redpointImg");p_g&&(p_g.visible=p_l)},d_u.prototype.updateEquip=function(e,p_l){if(0!==p_l&&3!==p_l&&p_l<8)e.visible=!1;else{e.visible=!0;var p_g=e.dataSource,b_s=e.getChildByName("lvLab"),d_u=e.getChildByName("sLv"),b_e=e.getChildByName("itemBox"),d_m=e.getChildByName("partClip"),d_w=e.getChildByName("redpointImg"),f_t=StrengthModel.instance.getPartitionLv(p_l+1);d_u.text=0==f_t?"":Utils.$("+{1}",f_t),b_e&&(b_e.alpha=p_g?1:.3,b_e.isShowName=!1,b_e.setItemData(p_g,ItemBoxDefine.BAG_INFO,!1)),d_m&&(d_m.visible=!p_g);var v_z=LgcM.ins.heroVo;if(this.isChangeEquipt=d_w.visible=EquipModel.instance.hasChangeEquip(v_z.entryId,p_l+1,p_g?p_g.fighting:0),d_w.visible&&(this._hasRedPoint=!0),p_g){var d_h=Config.item_equipment[p_g.id];d_h&&b_s&&(d_h.stateLevel?b_s.text=Config.state_state[d_h.stateLevel].desc:b_s.text=(d_h.level||1).toString()+(j_x(2342)))}else b_s&&(b_s.text="")}},d_u.prototype.onTitleUpdate=function(){Ifeo(this,TitleModel)},d_u.prototype.onEquipSelect=function(e){if(!(e<0)){var p_l=this.equipLst.selection.dataSource;this.equipLst.selectedIndex=-1;var p_g=LgcM.ins.heroVo;p_l?d_m.open(p_l,p_g.entryId,e+1):v_z.open(p_l,p_g.entryId,e+1)}},d_u);function d_u(){var e=p_l.call(this)||this;return e._clipTab=new p_c(e.diTab),e._hasRedPoint=!1,e._equipUpEffOpts=null,e.isChangeEquipt=!1,e.init(),e}e.RolePanel=b_s;var b_e,d_m=(b_e=e.EquipTipsPanel,__extends(d_w,b_e),d_w.open=function(e,p_l,p_g){UIM.open(d_w,null,{itemVo:e,entryId:p_l,part:p_g},!1,!1,!0)},d_w.prototype.onChangeClick=function(){Ikon(v_z,this)},d_w.close=function(){Khnw(UIM,d_w)},d_w.prototype.onRemove=function(){Kyeq(b_e,this,Laya)},d_w.prototype.onAdded=function(){Ieur(b_e,this,Laya)},d_w.prototype.updateData=function(){Yjfx(this,b_e)},d_w.prototype.closeSelf=function(){Ujch(d_w)},d_w.prototype.resite=function(){Ktou(b_e,this,Stage)},d_w);function d_w(){var e=b_e.call(this)||this,p_l=e.changeBtn;p_l.x=Math.floor(e.width/2-p_l.width/2),p_l.y=e.tipTxt.y+e.tipTxt.height+10,e.height+=p_l.height+40;var p_g=e.getChildByName("bgImg");return p_g&&(p_g.height+=p_l.height+40),e}e.EquipWearTipsPanel=d_m;var f_t,v_z=(f_t=ui.window.equipSwapUI,__extends(d_h,f_t),d_h.open=function(e,p_l,p_g,b_s){void 0===b_s&&(b_s=1),UIM.open(d_h,["role.atlas"],{itemVo:e,entryId:p_l,part:p_g,subclass:b_s},!1,!1,!0)},d_h.prototype.updateView=function(){if(this._itemVo=this.dataSource.itemVo,this._entryId=this.dataSource.entryId,this._part=this.dataSource.part,this._entryId&&this._part){var e=[];(e=4==this.dataSource.subclass?TalismanModel.instance.getTalisEquipByPart(this._part):EquipModel.instance.getChangeEquip(this._entryId,this._part)).sort((function(e,p_l){return p_l.fighting-e.fighting})),this._itemVo&&e.splice(0,0,this._itemVo),this.equipLst.array=e}},d_h.prototype.onAdded=function(){Wcdk(this,Laya)},d_h.prototype.changeEquip=function(e){Udtw(e,EquipModel,this)},d_h.prototype.onMouseClick=function(e){var p_l=e.target;switch(p_l.name){case"changeBtn":4==this.dataSource.subclass?this.changeTalismanEquip(p_l.dataSource.uuid,this.dataSource.entryId):this.changeEquip(p_l.dataSource.uuid)}},d_h.prototype.onRemove=function(){Utme(Laya,this)},d_h.prototype.onStageClick=function(e){var p_l=e.target;p_l&&this.contains(p_l)||this.closeSelf()},d_h.prototype.onDelay=function(){Klun(Laya,this)},d_h.prototype.updateItem=function(e,p_l){var p_g=e.dataSource;if(p_g){var b_s=e.getChildByName("itemBox"),d_u=e.getChildByName("nameLab"),b_e=e.getChildByName("stateLab"),d_m=e.getChildByName("lvLab"),d_w=e.getChildByName("propertyLst"),f_t=e.getChildByName("curEquipImg"),v_z=e.getChildByName("changeBtn"),r_t=e.getChildByName("fightingLab"),t_n=Config.item_equipment[p_g.id];b_s.isShowName=!1,b_s.setItemData(p_g,ItemBoxDefine.BAG_INFO),v_z.dataSource={uuid:p_g.uuid},f_t.visible=this._itemVo===p_g,v_z.visible=this._itemVo!==p_g,r_t&&(r_t.text=""+(p_g.fighting||0)),d_w.renderHandler=Laya.Handler.create(this,this.updatePropItem,[d_w],!1);var f_y=CharacterProperty.getPropertys(t_n.basePropFixed);d_w.array=f_y;var p_q=LgcM.ins.heroVo;d_u.text=p_g.name;var h_h=Config.state_state[t_n.stateLevel];b_e.text=h_h?h_h.desc:"",b_e.color=StateModel.instance.getStateLv()>=t_n.stateLevel?d_h.greenColor:d_h.redColor,d_m.text=t_n.level.toString()+(j_x(2342)),d_m.color=p_q.level>=t_n.level?d_h.greenColor:d_h.redColor}},d_h.prototype.changeTalismanEquip=function(e,p_l){Syuz(e,p_l,TalismanModel,this)},d_h.close=function(){Snyb(UIM,d_h)},d_h.prototype.closeSelf=function(){Unvn(d_h)},d_h.prototype.updatePropItem=function(e,p_l,p_g){var b_s=p_l.dataSource,d_u=p_l.getChildByName("propertyLab"),b_e=p_l.getChildByName("valLab");d_u.text=d_v.getDesc(b_s.propOrdinal),b_e.text=b_s.value.toString()},d_h.greenColor="#00802e",d_h.redColor="#9f4543",d_h);function d_h(){var e=f_t.call(this)||this;return e._itemVo=null,e._entryId=0,e._part=0,e.equipLst.vScrollBarSkin="",e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.EquipSwapPanel=v_z}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.rolePropertyUI,__extends(d_u,p_l),d_u.prototype.onAdded=function(){Aytq(this,Laya,p_g,LED,l_r)},d_u.prototype.updateItem=function(e,p_l){if(e){var p_g=e.getChildByName("nameTxt"),b_s=e.getChildByName("valueTxt"),d_u=LgcM.ins.getActorStdInfoById(b_p.playerId,Engine2d.ActorTypeDefine.PLAYER),b_e=e.dataSource;if("string"==typeof b_e){var d_m="";if("name"===b_e)p_g.text=(j_x(1927)+""+j_x(2101)+":"),d_m=d_u?d_u.name:"";else if("entryId"===b_e){if(p_g.text=(j_x(1698)+""+j_x(1033)+":"),d_u){var d_w=Config.character[d_u.entryId];d_m=d_w?d_w.name:""}}else if("stateLv"===b_e){p_g.text=(j_x(381)+""+j_x(843)+":");var f_t=StateModel.instance.getStateLv(),v_z=StateModel.instance.getStateSubLv(),d_h=Config.state_state[f_t],r_t=StateModel.instance.getSubConfId(f_t,v_z),t_n=Config.state_stateSub[r_t];d_m=(d_h?d_h.desc:"")+""+(t_n?t_n.desc:"")}else"level"===b_e&&(p_g.text=(j_x(15)+""+j_x(2342)+":"),d_m=d_u.level+(j_x(2342)));b_s.text=d_m}else if(2===(d_m=b_e.desc).length&&(d_m=d_m[0]+""+d_m[1]),p_g.text=d_m+":",d_u){var f_y=d_u[b_e.name];f_y=void 0===f_y?0:f_y,b_e.isPercent()?f_y===Math.floor(f_y)?b_s.text=Utils.$("{1} %",f_y/1e4):b_s.text=Utils.$("{1} %",(f_y/1e4).toFixed(1)):b_s.text=f_y.toString()}else b_s.text="0"}},d_u.open=function(){Ywar(UIM,d_u)},d_u.prototype.onRemove=function(){Itmg(this,Laya,LED,l_r)},d_u.prototype.updateView=function(){var e=RolePropertyModel.instance.getPropertypes(),p_l=["name","stateLv","level","entryId"];p_l=p_l.concat(e),this.list.array=p_l},d_u.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":d_u.close();break;case"TitleProp":e.TitleTips.tpye=1,e.TitleTips.open()}},d_u.close=function(){Eacw(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.list.vScrollBarSkin="",e.list.selectEnable=!0,e.list.scrollBar.elasticDistance=40,e.list.scrollBar.elasticBackTime=500,e}e.RolePropertyPanel=b_s}(UI=UI||{}),function(e){e[e.TALISMAN=1]="TALISMAN",e[e.BLACKKING=2]="BLACKKING"}(Show_Type=Show_Type||{}),function(e){var p_l,p_g=(p_l=ui.window.checkRoleInfo.check_TalisOrBlackUI,__extends(b_s,p_l),b_s.open=function(e,p_l){UIM.open(b_s,["roleInfo.atlas"],{Type:e,ID:p_l},!1,!1,!0,!0)},b_s.close=function(){Ixgw(UIM,b_s)},b_s.prototype.onAdded=function(){Goal(this,Laya,LED,l_r)},b_s.prototype.onClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":b_s.close()}},b_s.prototype.updateView=function(e,p_l){var p_g="";switch(this.dataSource.Type){case Show_Type.BLACKKING:p_g=(j_x("2287_814_1163")+j_x("5_2450_2046")+j_x("189_438")),this.titleImage.skin="res/ui/roleInfo/karma_zi_01.png",this.fightingTitle.skin="res/ui/roleInfo/zhanli_xianyuan.png",this.talismanList.itemRender=f_t;break;case Show_Type.TALISMAN:p_g=(j_x("2287_814_1163")+j_x("5_2450_2046")+j_x("799_869")),this.titleImage.skin="res/ui/roleInfo/fabaoziyang.png",this.fightingTitle.skin="res/ui/roleInfo/zhanli_fabao.png",this.talismanList.itemRender=b_e}!e||e.length<=0?(this.nullTip.visible=!0,this.nullTip.text=p_g):this.nullTip.visible=!1,b_p.getNumSp(NumType.FIGHTING,p_l,this.fightingSp,-12),this.talismanList.array=e},b_s.prototype.onRemoved=function(){Qser(this,Laya,LED,l_r)},b_s.prototype.RenderItem=function(e,p_l){switch(this.dataSource.Type){case Show_Type.BLACKKING:case Show_Type.TALISMAN:e.updateView()}},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.talismanList.vScrollBarSkin="",e.talismanList.scrollBar.elasticDistance=200,e.talismanList.scrollBar.elasticBackTime=500,e.talismanList.renderHandler=Laya.Handler.create(e,e.RenderItem,null,!1),e}e.RoleTalisOrBlackInfoPanel=p_g;var d_u,b_e=(d_u=ui.window.checkRoleInfo.talismanCellUI,__extends(d_m,d_u),d_m.prototype.updateView=function(){var e=this.dataSource,p_l=e.ConfigVo.quality-3;this.bgQuaClip.index=p_l<0?0:p_l,this.typeClip.index=e.ConfigVo.proType-1,this.lvTxt.text=Utils.$(("{1}"+j_x(2342)),e.level),this.nameTxt.color=Utils.ItemUtils.getTalismanQualityColor(e.ConfigVo.quality),this.nameTxt.text=e.ConfigVo.name,TalismanModel.instance.changeActStar(this.starBox,e.Star);var p_g=Resource.ResUrl.getIconUrl(e.ConfigVo.icon);this.setIcon(p_g)},d_m.prototype.setIcon=function(e){""!=e?(this.icon.visible=!0,this.icon=Resource.ResManager.Instance.getImg(e,this.icon)):this.icon.visible=!1},d_m);function d_m(){return d_u.call(this)||this}e.RoleTalismanItem=b_e;var d_w,f_t=(d_w=ui.window.checkRoleInfo.black_cellUI,__extends(v_z,d_w),v_z.prototype.updateView=function(){var e=this.dataSource,p_l=Resource.ResUrl.getIconUrl(e.ConfigVo.pic);this.setIcon(this.icon,p_l,e.ConfigVo.ui_scale,[e.ConfigVo.ui_offset[0]+-28,e.ConfigVo.ui_offset[1]+4]),this.bgQuaClipc.index=e.ConfigVo.quality-4,this.bgQuaClip.index=e.ConfigVo.quality-4;var p_g=Resource.ResUrl.getIconUrl(e.ConfigVo.art_name);p_g&&this.setIcon(this.nameicon,p_g,[1,1],[1,21]),TalismanModel.instance.changeActStar(this.starBox,e.Star)},v_z.prototype.setIcon=function(e,p_l,p_g,b_s){void 0===p_g&&(p_g=[0,0]),void 0===b_s&&(b_s=[0,0]),""!=p_l?(e.visible=!0,(e=Resource.ResManager.Instance.getImg(p_l,e)).scale(p_g[0],p_g[1]),e.pos(b_s[0],b_s[1])):e.visible=!1},v_z);function v_z(){return d_w.call(this)||this}e.RoleTBlackKingItem=f_t}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.checkUI,__extends(b_s,p_l),b_s.open=function(e){Ibcv(e,UIM,b_s)},b_s.prototype.onClickEquip=function(p_l){var p_g=GodEquipModel.ins._godEquipArray[p_l],b_s=Config.CItem(p_g),d_u=new BagInfoVO;d_u.id=b_s.id,d_u.part=b_s.place,d_u.quality=b_s.quality,e.GodEquipTipsPanel.open(d_u,!1)},b_s.prototype.onRemoved=function(){this.on(Laya.Event.ADDED,this,this.onAdded),this.off(Laya.Event.REMOVED,this,this.onRemoved),this.off(Laya.Event.CLICK,this,this.onClick),LED.off(l_r.CHECK_ROLE_GOD_EQUIP_INFO,this,this.updateView),this._roleModel&&this._roleModel.clearRes(),this._ringM&&this._ringM.clearRes(),this.wingModel.clearRes()},b_s.prototype.renderItemBox=function(e,p_l){if(e){var p_g=e.dataSource,b_s=Config.CItem(p_g),d_u=new BagInfoVO;d_u.id=b_s.id,d_u.part=b_s.place,d_u.quality=b_s.quality,e.dataSource=d_u,e.scaleX=85/110,e.scaleY=85/110,e.updateView(0,!1,!1,!0)}},b_s.prototype.showRing=function(e){var p_l=Config.marry_ringAct[e];p_l?(this.ringModel.visible=!0,this._ringM.changeModel("effects/marry"),""!=p_l.ringModel&&this._ringM.setAction(p_l.ringModel,0,!0),p_l.checkPos&&4==p_l.checkPos.length&&(this.ringModel.pos(p_l.checkPos[0],p_l.checkPos[1]),this.ringModel.scale(p_l.checkPos[2],p_l.checkPos[3]))):this.ringModel.visible=!1},b_s.prototype.onClick=function(p_l){var p_g=p_l.target,d_u=this.dataSource;switch(p_g.name){case"b_chat":if(d_u.base.pid===b_p.playerId)return void b_p.broadcastNotice((j_x("2462_1919_183")+j_x("2082_364_153")+j_x(2308)));e.ChatPrivatePanel.open(d_u.base.pid);break;case"b_friend":if(d_u.base.pid===b_p.playerId)return void b_p.broadcastNotice((j_x("2462_1919_1336")+j_x("223_2082_364")));FriendModel.instance.reqAddFriend(d_u.base.pid);break;case"b_block":if(d_u.base.pid===b_p.playerId)return void b_p.broadcastError(ErrorDefine.FriendBlackAddSelf);FriendModel.instance.showAddBlackTip(d_u.base.pid);break;case"backBtn":case"closeBtn":b_s.close();break;case"blackKingBtn":RoleTalisOrBlackInfoModel.instance.ReqInfo(2,d_u.base.pid);break;case"talismanBtn":RoleTalisOrBlackInfoModel.instance.ReqInfo(1,d_u.base.pid)}},b_s.prototype.updateView=function(){var e=this.dataSource;this.equipList.array=GodEquipModel.ins._godEquipArray,Config.fb_story[e.storyFbId]?this.t_job.text=Utils.$((j_x(573)+"{1}"+j_x(413)),Config.fb_story[e.storyFbId].layer):this.t_job.text=(j_x(814));var p_l=b_p.isSameServer(e.marrySid)?"":e.marrySid+(j_x(1998));this.t_marry.text=e.marryName?p_l+e.marryName:(j_x(814)),this.t_guild.text=e.base.guildName?e.base.guildName:(j_x(814));var p_g=Config.state_state[e.base.stateLv],b_s=p_g?p_g.desc:"";b_s=b_s+"."+(Config.state_stateSub[e.base.stateSubLv]?Config.state_stateSub[e.base.stateSubLv].desc:""),this.t_state.text=b_s+e.base.lv+(j_x(2342)),this.c_fight=b_p.getNumSp(NumType.FIGHTING,e.base.combat,this.c_fight,-10),this.showRing(e.ringId),this.wingModel.updateUI(e.base.fashionWing);var d_u=new Engine2d.PlayerVo;d_u.type=Engine2d.ActorTypeDefine.PLAYER,d_u.entryId=e.base.entryId,d_u.fashionAvatar=e.base.fashionAvatar,d_u.fashionWeapon=e.base.fashionWeapon,d_u.fashionClothes=e.base.fashionClothes,d_u.rideId=e.base.rideId;var b_e=Config.ride_ride[d_u.rideId],d_m=Config.title_title[e.base.title],d_w=Config.dragon_dragon[e.base.dragonsoulId];this._roleModel.removeSelf(),b_e?(d_m&&this.titleSprite.pos(this.modelContainer.x-d_m.chatSize[0]/2,this._startTitleY),this.modelContainer.pos(b_e.showRideData[1][0],b_e.showRideData[1][1]),this.modelContainer.addChild(this._roleModel),this._roleModel.HaveRid=!0):(d_m&&this.titleSprite.pos(this.modelContainer.x-d_m.chatSize[0]/2,this._startTitleY+20),this.unModelContainer.addChild(this._roleModel),this._roleModel.HaveRid=!1),d_w&&this._roleModel.showStateEfts(d_w.effect,-200),this._roleModel.changRoleSkin(d_u,!1,!0,e.base.fashionWeapon,d_u.fashionClothes),d_m?(this.titleSprite.visible=!0,this.titleSprite.size(d_m.chatSize[0],d_m.chatSize[1]),this.titleSprite=Resource.ResManager.Instance.getImg(Resource.ResUrl.getIconUrl(d_m.icon),this.titleSprite)):this.titleSprite.visible=!1,b_e&&this._roleModel.setMountScale(b_e.showRideData[0][0],b_e.showRideData[0][1]),this.c_vip=b_p.getNumSp(NumType.VIP,e.base.vip,this.c_vip,-10),this.vipBox.visible=0<e.base.vip;var f_t=Resource.ResManager.getHeadUrl(e.base.entryId,e.base.headIcon);if(this.c_head=Resource.ResManager.Instance.getImg(f_t,this.c_head),e.base.fashionAvatar&&4==Config.fashion_fashion[e.base.fashionAvatar].type){this.c_headFrame.visible=!0;var v_z=Config.fashion_fashion[e.base.fashionAvatar].avatar[0];v_z=Resource.ResUrl.getIconUrl(v_z),this.c_headFrame=Resource.ResManager.Instance.getImg(v_z,this.c_headFrame)}else this.c_headFrame.visible=!1;e.server!=b_p.config.server?(this.b_friend.visible=!1,this.t_name.text="S"+e.server+e.base.name):(this.t_name.text=e.base.name,this.b_chat.visible=this.b_friend.visible=!0)},b_s.prototype.onAdded=function(){Mavr(this,Laya,GodEquipModel,LED,l_r)},b_s.close=function(){Ayea(UIM,b_s)},b_s.prototype.posUpdate=function(){Kntq(this)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g._startTitleY=0,p_g._roleModel=new n_k,p_g._roleModel.ShowRid=!0,p_g.modelContainer.addChild(p_g._roleModel),p_g._ringM=new n_k,p_g.ringModel.addChild(p_g._ringM),p_g._roleModel.scale(.8,.8),p_g._startTitleY=p_g.titleSprite.y,p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.equipList.itemRender=e.GodEquipItem,p_g.equipList.spaceX=-4,z_j.setList(p_g.equipList,p_g,p_g.renderItemBox,p_g.onClickEquip),p_g}e.RoleViewPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.setup.setup_renameUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Ajug(this,Laya,LED,l_r)},b_s.prototype.updateCostInfo=function(){var e=b_p.getRewardDatas(Config.global[GlobalDefine.change_name_gold].t_info);e&&0<e.length?(this.txt_gold.color=b_p.checkConsume(e)?"#008931":"#c92828",this.img_gold.visible=1===e[0].id,1===e[0].id?this.txt_gold.text=e[0].amount.toString():this.txt_gold.text=Config.CItem(e[0].id).name+" x"+e[0].amount):(this.txt_gold.text="",this.img_gold.visible=!1);var p_l=this.isFreeName();(this.img_gold.visible=p_l)||(this.txt_gold.text=(j_x("573_1737_235")+j_x("2345_2218_1943")+j_x(1511)))},b_s.prototype.onChangeStr=function(){Cvxz(Utils,this)},b_s.prototype.randomName=function(){var e=LgcM.ins.heroVo.entryId,p_l=Config.nameList[1],p_g=p_l.surname.split(","),b_s=1==e?p_l.nameMan.split(","):p_l.nameWoman.split(",");this.txt_input.text=p_g[Math.floor(Math.random()*p_g.length)]+b_s[Math.floor(Math.random()*b_s.length)]},b_s.prototype.checkName=function(e,p_l){if(1==e){var p_g=LgcM.ins.heroVo,b_s=p_g?p_g.reviseName:1;SetupModel.instance.reqChangeName(p_l,b_s)}else b_p.broadcastNotice((j_x("1511_1794_130")+j_x("241_1387_1492")+j_x(1794)))},b_s.open=function(){Ejsn(UIM,b_s)},b_s.prototype.isFreeName=function(){var e=LgcM.ins.heroVo,p_l=e?e.reviseName:1;return null!=p_l&&0!=p_l},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"btn_rand":this.randomName();break;case"btn_sure":var p_l=LgcM.ins.heroVo,p_g=this.txt_input.text;if(p_l.name===p_g)return void b_p.broadcastNotice((j_x("1017_1145_1511")+j_x("1794_87_495")));for(var d_u=0,b_e=Utils.NameLimmit();d_u<b_e.length;d_u++){var d_m=b_e[d_u];if(-1!=p_g.search(d_m))return void b_p.broadcastNotice((j_x("1511_1794_130")+j_x("241_1387_1492")+j_x(1794)))}if(this.isFreeName()){var d_w=Config.global[GlobalDefine.change_name_gold].t_info;if(d_w&&!b_p.checkConsume(d_w,!0))return}ShieldWordManager.ins.isShield(p_g,Laya.Handler.create(this,this.checkName))}},b_s.prototype.onRemove=function(){Udrb(this,Laya,LED,l_r)},b_s.prototype.updateNameInfo=function(){LgcM.ins.heroVo.name===this.txt_input.text&&(b_s.close(),b_p.broadcastNotice((j_x("1679_1713_402")+j_x(2142)),BroadcastType.ERROR,"#008931"))},b_s.close=function(){Icwh(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.SetupNamePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.setup.setupUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Uxfj(this,Laya,LED,l_r)},b_s.prototype.updateIconInfo=function(){Adbb(b_p,j_x,BroadcastType,this)},b_s.prototype.updateFaceInfo=function(e){void 0===e&&(e=!1),e||b_p.broadcastNotice((j_x("2335_1796_402")+j_x(2142)),BroadcastType.ERROR,"#008931"),this.list_face.array=SetupModel.instance.headIcons,0<=this.list_face.selectedIndex?this.onListSelect(this.list_face.selectedIndex):this.list_face.selectedIndex=0},b_s.prototype.updateWallet=function(){this.onListSelect(this.list_face.selectedIndex);var e=Config.global[GlobalDefine.change_sex_gold].t_info;this.txt_changeSex_gold.text=e[0][1].toString(),this.txt_changeSex_gold.color=b_p.checkConsume(e)?"#008931":"#c92828"},b_s.prototype.onListSelect=function(e){if(-1!==e){var p_l=this.list_face.selectedItem;if(p_l){var p_g=Config.headIcon[p_l.id],b_s=LgcM.ins.heroVo;if(b_s.headIcon===p_l.id?(this.btn_face.label=(j_x("1300_1009_1968")),this.btn_face.disabled=!0):(this.btn_face.label=p_l.isActive?(j_x("1009_1968")):(j_x("2335_1796")),this.btn_face.disabled=!1),this.shopTip.color=0<p_g.vip&&b_s.vipLv>=p_g.vip?"#008931":"#c92828",0==p_g.vip?this.shopTip.text="":this.shopTip.text="VIP"+p_g.vip+(j_x("1163_2335_1796")),this.shopTip.visible=!p_l.isActive,p_l.isActive)return this.img_gold.visible=!1,void(this.txt_gold.text="");var d_u=b_p.getRewardDatas(p_g.consume);d_u&&0<d_u.length?(this.txt_gold.color=b_p.checkConsume(p_g.consume)?"#008931":"#c92828",this.img_gold.visible=1===d_u[0].id,1===d_u[0].id?this.txt_gold.text=d_u[0].amount.toString():this.txt_gold.text=Config.CItem(d_u[0].id).name+" x"+d_u[0].amount):0<p_g.vip&&(this.txt_gold.color=p_l.canActive()?"#008931":"#c92828",this.txt_gold.text="VIP"+p_g.vip+(" "+j_x("2335_1796")),this.img_gold.visible=!1)}}},b_s.prototype.comboxSelectChange=function(e){switch(e.name){case"cbox_effect":SetupModel.instance.isHideEffect=this.cbox_effect.selected;break;case"cbox_shake":SetupModel.instance.isCloseShake=this.cbox_shake.selected;break;case"cbox_hidePlayer":SetupModel.instance.isHidePlayer=this.cbox_hidePlayer.selected;break;case"cbox_music":SetupModel.instance.isCloseMusic=this.cbox_music.selected;break;case"cbox_wav":SetupModel.instance.isCloseWav=this.cbox_wav.selected;break;case"cbox_BlackKing":SetupModel.instance.IsCloseCheckBlackKing=this.cbox_BlackKing.selected;break;case"cbox_Talisman":SetupModel.instance.IsCloseCheckTalisman=this.cbox_Talisman.selected;break;case"cbox_man":this.cbox_woman.selected=!this.cbox_man.selected;break;case"cbox_woman":this.cbox_man.selected=!this.cbox_woman.selected}},b_s.prototype.reload=function(){Sija(b_p)},b_s.prototype.updateSexInfo=function(e){void 0===e&&(e=!1);var p_l=LgcM.ins.heroVo;this.firstFreeTxt.visible=0==p_l.modifySexNum,this.changeSexBox.visible=0<p_l.modifySexNum,this.cbox_man.selected=p_l.sex==GameDefine.boy,this.cbox_woman.selected=!this.cbox_man.selected,e&&(b_p.broadcastNotice((j_x("2249_1943_233")+j_x("226_402_2142")),BroadcastType.ERROR,"#008931"),SetupModel.instance.reqActivedHeadIcon())},b_s.prototype.onRemove=function(){Iquj(this,Laya,LED,l_r)},b_s.open=function(){Mekt(UIM,b_s)},b_s.prototype.onClick=function(p_l){var p_g=p_l.target,d_u=LgcM.ins.heroVo;switch(p_g.name){case"closeBtn":case"backBtn":b_s.close();break;case"btn_name":e.SetupNamePanel.open();break;case"btn_face":var b_e=this.list_face.selectedItem;if(b_e){var d_m=Config.headIcon[b_e.id];if(!b_e.isActive&&d_m&&0<d_m.vip&&!b_e.canActive())return void b_p.broadcastNotice("VIP"+d_m.vip+(j_x("2335_1796")));if(b_e.isActive||b_p.checkConsume(d_m.consume,!0)){if(d_u.headIcon===b_e.id)return void b_p.broadcastNotice((j_x("389_912_1795")+j_x("1300_1679_1713")));SetupModel.instance.reqChangeHeadIcon(b_e.id)}}break;case"btn_ser":this.reload();break;case"btn_clear":GPlatform.clearCache();break;case"btn_changeSex":var d_w=Config.global[GlobalDefine.change_sex_gold].t_info[0][1],f_t=this.cbox_man.selected,v_z=d_u.sex,d_h=d_u.modifySexNum;if(f_t)if(v_z==GameDefine.boy)b_p.broadcastNotice((j_x("1327_711_1300")+j_x("68_2040_233")+j_x(226)));else{if(0!=d_h&&!b_p.checkCoin(1,d_w))return void b_p.broadcastNotice((j_x("1263_869_2462")+j_x(1779)));SetupModel.instance.reqChangeSex(GameDefine.boy)}else if(v_z==GameDefine.girl)b_p.broadcastNotice((j_x("1327_711_1300")+j_x("68_2040_233")+j_x(226)));else{if(0!=d_h&&!b_p.checkCoin(1,d_w))return void b_p.broadcastNotice((j_x("1263_869_2462")+j_x(1779)));SetupModel.instance.reqChangeSex(GameDefine.girl)}}},b_s.prototype.updateItem=function(e,p_l){if(e){var p_g=e.dataSource,b_s=(Config.headIcon[p_g.id],e.getChildByName("icon")),d_u=e.getChildByName("img_suo"),b_e=e.getChildByName("isEqui"),d_m=LgcM.ins.heroVo;b_s.skin=Resource.ResManager.getHeadUrl(p_g.id,p_g.id),d_m.headIcon===p_g.id?b_e.visible=!0:b_e.visible=!1,d_u.visible=!p_g.isActive,b_s.gray=!p_g.isActive}},b_s.prototype.updateMyInfo=function(){var e=LgcM.ins.heroVo;this.txt_name.text=e.name,this.txt_num.text=b_p.playerId.toString(),this.txt_ser.text=b_p.config.serverName,this.cbox_man.selected=e.sex==GameDefine.boy,this.cbox_woman.selected=!this.cbox_man.selected;var p_l=Config.global[GlobalDefine.change_sex_gold].t_info;this.txt_changeSex_gold.text=p_l[0][1].toString(),this.txt_changeSex_gold.color=b_p.checkConsume(p_l)?"#008931":"#c92828"},b_s.prototype.updateSettingInfo=function(){Keve(this,SetupModel)},b_s.prototype.updateSettingMusicInfo=function(e){Obqx(e,this,SetupModel)},b_s.close=function(){Wony(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.list_face.selectEnable=!0,e.list_face.selectHandler=Laya.Handler.create(e,e.onListSelect,null,!1),e.list_face.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.list_face.vScrollBarSkin="",e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.txtQQ.visible=2===GPlatform.platfromType,e.btn_clear.visible=!1,e}e.SetupPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.sevenDay.sevenDayServerUI,__extends(d_u,p_l),d_u.prototype.updateGoodsList=function(e,p_l){Wyhs(e,p_l)},d_u.prototype.onEnterBtnClick=function(){console.log((j_x("1174_2111")));var e=this.DayList.selectedItem;e&&z_s.ins.reqMergeSevendayGet(e.id)},d_u.prototype.updateUI=function(){Sqwp(this,z_s,j_x)},d_u.prototype.oncloseBtnClick=function(){Spdf(d_u)},d_u.prototype.onRemove=function(){Opjn(this,Laya,LED,l_r)},d_u.prototype.onAdded=function(){Epme(this,Laya,LED,l_r,z_s)},d_u.prototype.updateDayList=function(e,p_l){var p_g=e.getChildByName("redPoint"),b_s=e.getChildByName("garyBox"),d_u=b_s.getChildByName("dayClip"),b_e=e.getChildByName("maskImg"),d_m=e.getChildByName("isGet");p_l<z_s.ins.nowDay?b_e.visible=!1:b_e.visible=!0,z_s.ins.getDay&1<<p_l?(d_m.visible=!0,b_s.gray=!0):(d_m.visible=!1,b_s.gray=!1),p_g.visible=!b_e.visible&&!d_m.visible;var d_w=e.dataSource;d_u.index=d_w.id-1},d_u.open=function(){Oeyh(UIM,d_u)},d_u.prototype.CfgData=function(){var e=[];for(var p_l in Config.sevenday_sevenday)e.push(Config.sevenday_sevenday[p_l]);return e.sort((function(e,p_l){return e.id-p_l.id}))},d_u.prototype.updateSelectIndex=function(){this._indexDay=null,this.DayList.selectedIndex=-1;for(var e=0;e<7;e++){var p_l=!1,p_g=!1;if(e<z_s.ins.nowDay&&(p_l=!0),z_s.ins.getDay&1<<e||(p_g=!0),p_g&&p_l&&(this._indexDay=e),null!=this._indexDay)break}if(null!=this._indexDay)this.DayList.selectedIndex=this._indexDay;else{var b_s=z_s.ins.nowDay;6<b_s&&(b_s=6),this.DayList.selectedIndex=b_s}},d_u.prototype.selectDayList=function(e){if(-1<e){var p_l=this.DayList.selectedItem,p_g=b_p.getRewardDatas(p_l.reward);this.goodsList.width=p_g.length*this._goodsWidth+(p_g.length+1)*this._goodsSpx,this.goodsList.array=p_g,this.contentImg.skin="res/ui/activity/"+p_l.titleImage+".png";var b_s=!1,d_u=!1;e<z_s.ins.nowDay&&(b_s=!0),z_s.ins.getDay&1<<e||(d_u=!0),this.enterBtn.disabled=!(b_s&&d_u),this.enterRed.visible=b_s&&d_u,this.getImg.skin=d_u?"res/ui/activity/sevenday/lingqu.png":"res/ui/activity/sevenday/yilingqu.png"}},d_u.close=function(){Kroo(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e._goodsWidth=102,e._goodsSpx=15,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.goodsList.renderHandler=p_g.create(e,e.updateGoodsList,null,!1),e.goodsList.array=null,e.DayList.renderHandler=p_g.create(e,e.updateDayList,null,!1),e.DayList.selectHandler=p_g.create(e,e.selectDayList,null,!1),e.DayList.array=null,e}e.SeverDayServer=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fb.SweepAwardPageUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){LED.on(l_r.SEVEN_TARGET_TASK_UPDATE,this,this.updateTaskData),this.closeBtn.on(Laya.Event.CLICK,this,this.onCilickClose),this.reminderlabel.text="";var e=this.dataSource[0],p_l=this.dataSource[1],p_g=this.dataSource[2];if(e&&p_l&&p_g){var b_s=Config.seven_day_task_seven_reward[e];Config.seven_day_task_seven_activeness[e],b_s&&b_s.reward&&(this.awardlist.array=b_p.getRewardDatas(b_s.reward));var d_u=SevenDayTargetModel.instance.getPointArr(p_l),b_e=d_u[0],d_m=(d_u[1],SevenDayTargetModel.instance.getTaskDataById(e),SevenDayTargetModel.instance.getLivinessDataById(e).rewardStatus&1<<p_g-1);this.getBtn.disabled=!(b_e>=b_s.point&&0==d_m),this.getBtn.label=0==d_m?(j_x("1174_2111")):(j_x("1300_1174_2111")),this.redpoint.visible=0==d_m&&b_e>=b_s.point,this.getBtn.on(Laya.Event.CLICK,this,this.onCLlick,[e]),this.awardlist.x=(this.bg.width+2*this.bg.x)/2-(100*this.awardlist.array.length+(this.awardlist.length-1)*this.awardlist.spaceX)/2}},b_s.prototype.onCLlick=function(e){Wajf(e,SevenDayTargetModel)},b_s.prototype.updateTaskData=function(){Kjkq(this)},b_s.prototype.onRemoved=function(){Ulab(LED,l_r,this)},b_s.open=function(e,p_l,p_g){Kbtz(e,p_l,p_g,UIM,b_s)},b_s.prototype.onCilickClose=function(){Wbyx(this)},b_s.prototype.updateData=function(e,p_l){e.dataSource&&(e.isShowName=!1,e.isShowNum=!0,e.setItemData(e.dataSource))},b_s.prototype.close=function(){Yhgp(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.awardlist.renderHandler=Laya.Handler.create(e,e.updateData,null,!1),e}e.SevenDayLivinessReward=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.sevenTarget.sevenDayTargetUI,__extends(b_s,p_l),b_s.open=function(){Ohjl(UIM,b_s)},b_s.prototype.updateLivinessData=function(){var e=SevenDayTargetModel.instance.getLivenessDataByDay(this._currSelect+1);if(e&&0<e.length){this.schedule1_txt.text=Utils.$((j_x("1117_1012")+"{1}%"+j_x("155_1186")),e[0].point),this.schedule2_txt.text=Utils.$((j_x("1117_1012")+"{1}%"+j_x("155_1186")),e[1].point),this.schedule3_txt.text=Utils.$((j_x("1117_1012")+"{1}%"+j_x("155_1186")),e[2].point),this.progress.value=SevenDayTargetModel.instance.getPointPreence(this._currSelect+1)/100;var p_l=SevenDayTargetModel.instance.getPointArr(this._currSelect+1),p_g=p_l[0],b_s=p_l[1];if(this.progress_txt.text=p_g+"/"+b_s,this.schedule1_img.visible=0<(1&e[0].rewardStatus),this.schedule2_img.visible=0<(2&e[1].rewardStatus),this.schedule3_img.visible=0<(4&e[2].rewardStatus),this.name1.text=e[0].awardName,this.name2.text=e[1].awardName,this.name3.text=e[2].awardName,this.setSevenDayItemData(e[0].id,this.schedule1_sp),this.setSevenDayItemData(e[1].id,this.schedule2_sp),this.setSevenDayItemData(e[2].id,this.schedule3_sp),this.getLivenessData&&0<this.getLivenessData.length){var d_u=1&SevenDayTargetModel.instance.getLivinessDataById(this.getLivenessData[0].id).rewardStatus;this.schedule1_red.visible=0==d_u&&p_g>=e[0].point;var b_e=2&SevenDayTargetModel.instance.getLivinessDataById(this.getLivenessData[1].id).rewardStatus;this.schedule2_red.visible=0==b_e&&p_g>=e[1].point;var d_m=4&SevenDayTargetModel.instance.getLivinessDataById(this.getLivenessData[2].id).rewardStatus;this.schedule3_red.visible=0==d_m&&p_g>=e[2].point}}this.list.array=SevenDayTargetModel.instance.getTaskDataByDay(this._currSelect+1)},b_s.prototype.updatePoint=function(){for(var e=SyncTime.serverTime,p_l=SevenDayTargetModel.instance,p_g=(e-1e3*p_l.creatPlayerTime)/864e5,b_s=0;b_s<SevenDay.SEVEN_DAY;b_s++)switch(b_s+1){case SevenDay.ONE_DAY:this.liviness0_txt.text=p_l.getPointPreence(b_s+1)+"%",this.liviness0_red.visible=p_l.dayNum_Red(b_s+1);case SevenDay.TWO_DAY:this.liviness1_txt.text=p_l.getPointPreence(b_s+1)+"%",p_g<b_s&&(this.liviness1_txt.text=""),this.mask1_img.visible=p_g<b_s,this.liviness1_red.visible=p_l.dayNum_Red(b_s+1);case SevenDay.THREE_DAY:this.liviness2_txt.text=p_l.getPointPreence(b_s+1)+"%",p_g<b_s&&(this.liviness2_txt.text=""),this.mask2_img.visible=p_g<b_s,this.liviness2_red.visible=p_l.dayNum_Red(b_s+1);case SevenDay.FOUR_DAY:this.liviness3_txt.text=p_l.getPointPreence(b_s+1)+"%",p_g<b_s&&(this.liviness3_txt.text=""),this.mask3_img.visible=p_g<b_s,this.liviness3_red.visible=p_l.dayNum_Red(b_s+1);case SevenDay.FIVE_DAY:this.liviness4_txt.text=p_l.getPointPreence(b_s+1)+"%",p_g<b_s&&(this.liviness4_txt.text=""),this.mask4_img.visible=p_g<b_s,this.liviness4_red.visible=p_l.dayNum_Red(b_s+1);case SevenDay.SIX_DAY:this.liviness5_txt.text=p_l.getPointPreence(b_s+1)+"%",p_g<b_s&&(this.liviness5_txt.text=""),this.mask5_img.visible=p_g<b_s,this.liviness5_red.visible=p_l.dayNum_Red(b_s+1);case SevenDay.SEVEN_DAY:this.liviness6_txt.text=p_l.getPointPreence(b_s+1)+"%",p_g<b_s&&(this.liviness6_txt.text=""),this.mask6_img.visible=p_g<b_s,this.liviness6_red.visible=p_l.dayNum_Red(b_s+1)}},b_s.prototype.updateTabSelect=function(e){Qaha(e,this,SevenDayTargetModel)},b_s.prototype.onClickSchedule2=function(){this.getLivenessData&&1<this.getLivenessData.length&&e.SevenDayLivinessReward.open(this.getLivenessData[1].id,this._currSelect+1,2)},b_s.prototype.onOpenDefalutIndex=function(){if(!SevenDayTargetModel.instance.dayNum_Red(this._currSelect+1)){var e=SevenDayTargetModel.instance.openAwardIndex(this._curDay);this.tab.selectedIndex=e>=SevenDay.ONE_DAY-1&&e<=SevenDay.SIX_DAY?e:0}},b_s.prototype.onRemoved=function(){LED.off(l_r.SEVEN_TARGET_TASK_UPDATE,this,this.updateTaskData),LED.off(l_r.SEVEN_TARGET_LIVINESS_UPDATE,this,this.updateLivinessData),LED.off(l_r.SEVENDAY_SCHUEDLE_UPDATE,this,this.onUpdateScheduleEffect),LED.off(l_r.SEVENDAY_DEFAULT_INDEX,this,this.onOpenDefalutIndex),Laya.timer.clearAll(this),this._roleModel&&this._roleModel.clearRes()},b_s.prototype.onCompletePlayAni=function(){Wmil(this)},b_s.prototype.onClickClose=function(){Mode(this)},b_s.prototype.onClickGoBtn=function(e){e&&this.leaveOfLink(e[0]),this.close()},b_s.prototype.onUpdateScheduleEffect=function(){Awrl(this,Laya)},b_s.prototype.updateLstInfo=function(e,p_l){if(e.dataSource){var p_g=e.dataSource,b_s=p_g.reward,d_u=e.getChildByName("task_dec"),b_e=e.getChildByName("task_pro"),d_m=e.getChildByName("one_reward_num"),d_w=e.getChildByName("not_open"),f_t=e.getChildByName("getbtn"),v_z=e.getChildByName("gobtn"),d_h=e.getChildByName("title_img"),r_t=f_t.getChildByName("redpoint"),t_n=e.getChildByName("reward_sp");d_u.text=p_g.taskDec+"("+p_g.currProgress+"/"+p_g.totalProgress+")",b_e.text="",d_m.text="X"+b_s[0][1];var f_y=Config.CItem(p_g.reward[0][0]);if(f_y&&f_y.icon){t_n.scale(.7,.7);var p_q=Resource.ResUrl.getIconUrl(f_y.icon);Resource.ResManager.Instance.getImg(p_q,t_n)}(SyncTime.serverTime-1e3*SevenDayTargetModel.instance.creatPlayerTime)/864e5>=this._currSelect?(f_t.visible=v_z.visible=!0,d_w.visible=!1,f_t.visible=p_g.currProgress>=p_g.totalProgress,v_z.visible=!f_t.visible,r_t.visible=p_g.currProgress>=p_g.totalProgress&&0===p_g.getRewardStatus):(f_t.visible=v_z.visible=!1,d_w.visible=!0,r_t.visible=!1),f_t.label=1===p_g.getRewardStatus?(j_x("1300_1174_2111")):(j_x("1174_2111")),f_t.disabled=1===p_g.getRewardStatus,p_g.title&&""!=p_g.title?d_h.skin="res/ui/sevenDay/"+p_g.title:d_h.skin="",f_t.on(Laya.Event.CLICK,this,this.onClickGetBtn,[p_g.id]),v_z.on(Laya.Event.CLICK,this,this.onClickGoBtn,[p_g.link])}},b_s.prototype.onClickSchedule1=function(){this.getLivenessData&&1<this.getLivenessData.length&&e.SevenDayLivinessReward.open(this.getLivenessData[0].id,this._currSelect+1,1)},b_s.prototype.onClickGetBtn=function(e){Iors(e,SevenDayTargetModel)},b_s.prototype.leaveOfLink=function(p_l){if(p_l&&""!=p_l){var p_g=p_l.split(":"),b_s=p_g[0];switch(p_g=p_g[1].split("|"),b_s){case"openWin":var d_u=parseInt(p_g[0]),b_e=parseInt(p_g[1]),d_m=Config.window[p_g[0]];if(d_m.funcID){var d_w=Config.funcOpen[d_m.funcID];if(!p_k.instance.checkSystemOpen(d_m.funcID))return void(d_w.openError?b_p.broadcastNotice(d_w.openError):b_p.broadcastNotice((j_x("1796_1878_206")+j_x("155_1186"))))}e.WindowClass.openWin(d_u,0<=b_e?[b_e]:null)}}},b_s.prototype.updateTaskData=function(){Ytzz(this,SevenDayTargetModel)},b_s.prototype.onAdded=function(){LED.on(l_r.SEVEN_TARGET_TASK_UPDATE,this,this.updateTaskData),LED.on(l_r.SEVEN_TARGET_LIVINESS_UPDATE,this,this.updateLivinessData),LED.on(l_r.SEVENDAY_SCHUEDLE_UPDATE,this,this.onUpdateScheduleEffect),LED.on(l_r.SEVENDAY_DEFAULT_INDEX,this,this.onOpenDefalutIndex),SevenDayTargetModel.instance.reqSevenDayInfo(),this.effect_clip.visible=!1;var e=SevenDayTargetModel.instance.creatPlayerTime,p_l=(SyncTime.serverTime-1e3*e)/864e5;p_l>=SevenDay.SEVEN_DAY&&(p_l=SevenDay.SIX_DAY),this._curDay=Math.floor(p_l),this.updateLivinessData(),this.updateCountDown(),Laya.timer.loop(1e3,this,this.updateCountDown),this.backbtn.on(Laya.Event.CLICK,this,this.onClickClose),this.closebtn.on(Laya.Event.CLICK,this,this.onClickClose),this.schedule1_btn.on(Laya.Event.CLICK,this,this.onClickSchedule1),this.schedule2_btn.on(Laya.Event.CLICK,this,this.onClickSchedule2),this.schedule3_btn.on(Laya.Event.CLICK,this,this.onClickSchedule3)},b_s.prototype.close=function(){Kgmv(UIM,b_s)},b_s.prototype.onClickSchedule3=function(){this.getLivenessData&&1<this.getLivenessData.length&&e.SevenDayLivinessReward.open(this.getLivenessData[2].id,this._currSelect+1,3)},Object.defineProperty(b_s.prototype,"getLivenessData",{get:function(){return SevenDayTargetModel.instance.getLivenessDataByDay(this._currSelect+1)},enumerable:!0,configurable:!0}),Object.defineProperty(b_s.prototype,"getTaskData",{get:function(){return SevenDayTargetModel.instance.getTaskDataByDay(this._currSelect+1)},enumerable:!0,configurable:!0}),b_s.prototype.updateCountDown=function(){var e=SevenDayTargetModel.instance.activityCountDount();0<e?(this.bg.visible=!0,this.dec_lab.visible=this.activiy_downcount.visible=!0):(this.bg.visible=this.dec_lab.visible=this.activiy_downcount.visible=!1,Laya.timer.clear(this,this.updateCountDown)),this.activiy_downcount.text=Utils.formatTimeStr2(e,!0)},b_s.prototype.onCompleteRes=function(e,p_l){Ckfa(e,p_l,this,Laya)},b_s.prototype.setSpriteScaleOffset=function(e,p_l){e.T_scale&&e.T_offest?(p_l.scale(e.T_scale[0],e.T_scale[1]),p_l.pos(e.T_offest[0],e.T_offest[1])):(p_l.scale(1,1),p_l.pos(0,0))},b_s.prototype.setSevenDayItemData=function(e,p_l){var p_g=Config.seven_day_task_seven_reward[e];if(p_g&&p_g.showItem)if(p_g.showItem[0][0]==REWARD_TYPE.ITEM){var b_s=Resource.ResUrl.getIconUrl(p_g.showItem[0][2]);0<p_l.numChildren&&p_l.removeChildAt(0),this.setIcon(b_s,p_l,p_g)}else if(p_g.showItem[0][0]==REWARD_TYPE.TALISMAN){0<p_l.numChildren&&p_l.removeChildAt(0),this.setSpriteScaleOffset(p_g,p_l);var d_u=Config.talisman_talisman[p_g.showItem[0][1]].avatar,b_e=Config.talisman_talisman[p_g.showItem[0][1]].showAct;this.showTalismanModel(d_u,b_e,p_l,[p_g.T_offest[0],p_g.T_offest[1]],[p_g.T_scale[0],p_g.T_scale[1]])}else if(p_g.showItem[0][0]==REWARD_TYPE.RIDE)0<p_l.numChildren&&p_l.removeChildAt(0),this.setSpriteScaleOffset(p_g,p_l),this.showRideModel(p_g.showItem[0][1],p_l);else if(p_g.showItem[0][0]==REWARD_TYPE.FASHION){this._roleModel||(this._roleModel=new n_k),0<p_l.numChildren&&p_l.removeChildAt(0),this._roleModel.clearStateEfts(),p_l.addChild(this._roleModel),p_l.texture=null,this.setSpriteScaleOffset(p_g,p_l);var d_m=LgcM.ins.heroVo;1==Config.fashion_fashion[p_g.showItem[0][1]].type&&this._roleModel.changRoleSkin(d_m,!1,!0,p_g.showItem[0][1]),2==Config.fashion_fashion[p_g.showItem[0][1]].type&&this._roleModel.changRoleSkin(d_m,!1,!0,p_g.showItem[0][1])}else if(p_g.showItem[0][0]==REWARD_TYPE.DRAGON){this._roleModel||(this._roleModel=new n_k),this._roleModel.clearRes(),0<p_l.numChildren&&p_l.removeChildAt(0),p_l.addChild(this._roleModel),p_l.texture=null,this.setSpriteScaleOffset(p_g,p_l);var d_w=Config.dragon_dragon[p_g.showItem[0][1]];if(d_w){d_m=LgcM.ins.heroVo;var f_t=Resource.ResManager.getDefaultPlayerAvatar(d_m.fashionClothes,d_m.entryId);this._roleModel.changeModel(f_t),this._roleModel.state(),this._roleModel.showStateEfts(d_w.effect,180)}}},b_s.prototype.showTalismanModel=function(e,p_l,p_g,b_s,d_u){void 0===p_l&&(p_l="stand"),void 0===b_s&&(b_s=[0,0]),void 0===d_u&&(d_u=[0,0]),e&&""!=e&&(this._roleModel||(this._roleModel=new n_k),this._roleModel.clearStateEfts(),p_g.removeChildren(),p_g.texture=null,p_g.addChild(this._roleModel),this._roleModel.changeModel(e),this._roleModel.setAction(p_l,0,!0),this._roleModel.changWeapon(null),p_g.pos(b_s[0],b_s[1]),p_g.scale(d_u[0],d_u[1]))},b_s.prototype.setIcon=function(e,p_l,p_g){""!=e?(p_l.visible=!0,p_l.on(Laya.Event.COMPLETE,this,this.onCompleteRes,[p_g,p_l]),Resource.ResManager.Instance.getImg(e,p_l)):p_l.visible=!1},b_s.prototype.showRoleModel=function(e,p_l,p_g,b_s){void 0===p_g&&(p_g="stand"),void 0===b_s&&(b_s=!1),e&&""!=e&&(this._roleModel||(this._roleModel=new n_k),0<p_l.numChildren&&p_l.removeChildAt(0),p_l.addChild(this._roleModel),this._roleModel.changeModel(e),this._roleModel.setAction(p_g,3,!0),this._roleModel.pos(0,0),this._roleModel.scale(1,1))},b_s.prototype.showRideModel=function(e,p_l){this._roleModel||(this._roleModel=new n_k),this._roleModel.clearStateEfts();var p_g=Config.ride_ride[e];e&&p_g&&(p_l.removeChildren(),p_l.texture=null,p_l.addChild(this._roleModel),this._roleModel.changeModel(p_g.model),this._roleModel.stand(3))},b_s);function b_s(){var e=p_l.call(this)||this;return e._currSelect=0,e._currPoint=0,e._totalPoint=0,e._curDay=0,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.dec_lab.visible=e.activiy_downcount.visible=!1,e.bg.visible=!1,e.list.vScrollBarSkin="",e.list.scrollBar.elasticBackTime=200,e.list.scrollBar.elasticDistance=500,e.list.renderHandler=Laya.Handler.create(e,e.updateLstInfo,null,!1),e.tab.selectHandler=Laya.Handler.create(e,e.updateTabSelect,null,!1),e}e.SevenDayTarget=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.shop.ShopAllBtnUI,__extends(b_s,p_l),b_s.prototype.onClick=function(e){Cwhp(e,this)},Object.defineProperty(b_s.prototype,"dataSource",{set:function(e){if(null!=e&&(this._type=e,this.btn.skin="res/ui/shop/Button_shop0"+(e+1)+".png",e===ShopConstant.type_mystery)){var p_l=ShopModel.instance.isBuyDiscountItem();this.updataData(!p_l)}},enumerable:!0,configurable:!0}),b_s.prototype.updataData=function(e){void 0===e&&(e=!0),this.rp.visible=e},Object.defineProperty(b_s.prototype,"select",{set:function(e){this.imgSelect.visible=e},enumerable:!0,configurable:!0}),b_s);function b_s(){return p_l.call(this)||this}e.ShopAllBtn=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.shop.ShopAllPanelUI,__extends(b_s,p_l),b_s.prototype.onAdd=function(e){this.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.GUILD_INFO_UPDATE,this,this.updateGuildInfo),LED.on(l_r.SHOP_DATA_UPDATE,this,this.updateShopList),this.menuList.selectedIndex=0<=this.dataSource.index?this.dataSource.index:0,this.menuList.scrollTo(this.menuList.selectedIndex)},b_s.prototype.updateShopList=function(){Onpl(this)},b_s.prototype.onRemove=function(){this.off(Laya.Event.CLICK,this,this.onClick),LED.off(l_r.GUILD_INFO_UPDATE,this,this.updateGuildInfo),LED.off(l_r.SHOP_DATA_UPDATE,this,this.updateShopList),this.menuList.selectedIndex=-1,this._mysteryView&&this._mysteryView.recycle()},b_s.prototype.updateFreshTime=function(){var e=SyncTime.serverTime-1e3*ShopModel.instance._randTime,p_l=1e3*Config.global[GlobalDefine.refresh_rand_shop_cd].i_info-e,p_g=Config.global[GlobalDefine.refresh_rand_shop_cost].t_info;0==this.moneyglod.index&&(p_g[0][1]>this.heroVo.gold?this.Consumption.color="#e53d26":this.Consumption.color="#5b6675"),1==this.moneyglod.index&&(p_g[0][1]>this.heroVo.copper?this.Consumption.color="#e53d26":this.Consumption.color="#5b6675"),this.redpoint.visible=!1,p_l<=0&&(this.Consumption.color="#5b6675",this.redpoint.visible=!0),Laya.timer.clear(this,this.onTimer),Laya.timer.loop(1e3,this,this.onTimer),this.onTimer()},b_s.prototype.onSelect=function(e){if(-1!=e)if(this._isChange=!0,e==ShopConstant.type_prop||e==ShopConstant.type_mystery||e==ShopConstant.type_banquet?(this.mysteryView.shopList.mouseEnabled=!0,this.mysteryView.updateView(e,this.dataSource?this.dataSource.itemId:0),this._curView=this.mysteryView):e==ShopConstant.type_guild?0<this.guildID?this._curView=this.guildView:this.dealGuild():e==ShopConstant.type_fight?this._curView=this.fightView:e==ShopConstant.type_honor?this._curView=this.honorView:e==ShopConstant.type_Black?(this._curView=this.blackView,this.blackView.shopList.mouseEnabled=!0,this.blackView.updateView(e)):e==ShopConstant.type_Integral?(this._curView=this.integralView,this.integralView.shopList.mouseEnabled=!0,this.integralView.updateView(e)):e==ShopConstant.type_Animals?this._curView=this.animalView:e==ShopConstant.type_godEquip&&(this._curView=this.godEquipView),this._isChange){this._curIndex=e,this.titleImg.skin=ShopConstant.getShopName(e+1,1),0<this.viewSp.numChildren&&this.viewSp.removeChildren(),this.viewSp.addChild(this._curView);var p_l=e==ShopConstant.type_mystery;this.showFreshTime(p_l),this.updateFreshTime();var p_g=740,b_s=147;e==ShopConstant.type_prop?(p_g=793,b_s=95):e==ShopConstant.type_mystery&&(p_g=691,b_s=95),this.bg.height=p_g,this.bg.y=b_s}else this.menuList.selectedIndex=this._curIndex},b_s.prototype.updateGuildInfo=function(){Uvmx(this,ShopConstant)},b_s.prototype.onTimer=function(){var e=SyncTime.serverTime-1e3*ShopModel.instance._randTime,p_l=1e3*Config.global[GlobalDefine.refresh_rand_shop_cd].i_info-e;if(0<p_l){var p_g=Math.floor(p_l/1e3);this.updateimg.visible=!0;var b_s=Config.global[GlobalDefine.refresh_rand_shop_cost].t_info;this.Consumption.text=b_s[0][1],this.desc1.visible=!1,this.descbox.visible=!0,this.timerCd.text=Utils.formatTimeStr(p_g),this.moneyglod.index=b_s[0][0]-1,1799==p_g&&(this.refreshbtn.mouseEnabled=!1,this.mysteryView.shopList.mouseEnabled=!1,this.closeBtn.mouseEnabled=!1),p_g<=1797&&(this.refreshbtn.mouseEnabled=!0,this.mysteryView.shopList.mouseEnabled=!0,this.closeBtn.mouseEnabled=!0)}p_l<=0&&(this.updateimg.visible=!1,this.timerCd.text="",this.desc1.visible=!0,this.descbox.visible=!1,this.moneyglod.index=-1,Laya.timer.clear(this,this.onTimer))},Object.defineProperty(b_s.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),b_s.prototype.showFreshTime=function(e){void 0===e&&(e=!1),this.updateBox.visible=e},b_s.prototype.dealGuild=function(){GuildModel.instance.isInfo?0<this.guildID?this._curView=this.guildView:(this._isChange=!1,b_p.broadcastNotice((j_x("1777_320_223")+j_x("2456_796_1413")))):(this._isChange=!1,GuildModel.instance.reqGuildInfo())},b_s.prototype.onRefesh=function(){var e=SyncTime.serverTime-1e3*ShopModel.instance._randTime,p_l=1e3*Config.global[GlobalDefine.refresh_rand_shop_cd].i_info-e,p_g=Config.global[GlobalDefine.refresh_rand_shop_cost].t_info;if(p_l<=0)return ShopModel.instance.reqShopRandList(),b_p.broadcastNotice((j_x("896_1787_402")+j_x(2142)),1,"#27f60b"),void LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,4);b_p.checkConsume(p_g)?j_y.confirm(Utils.$((j_x("68_2032_1661")+j_x(1502)+"{1}"+j_x("1263_869")+""+j_x("896_1787_868")+j_x("1879_1820_1425")+""),p_g[0][1]),this.sureToOpen,!0):b_p.broadcastNotice((j_x("1263_869_2462")+j_x(1779)))},b_s.prototype.sureToOpen=function(e){var p_l=Config.global[GlobalDefine.refresh_rand_shop_cost].t_info;b_p.checkConsume(p_l)?(ShopModel.instance.reqShopRandList(),b_p.broadcastNotice((j_x("896_1787_402")+j_x(2142)),1,"#27f60b")):b_p.broadcastNotice((j_x("1263_869_2462")+j_x(1779)))},Object.defineProperty(b_s.prototype,"guildID",{get:function(){return GuildModel.instance.guildInfo.id},enumerable:!0,configurable:!0}),b_s.prototype.openGuildView=function(){Mzks(this)},Object.defineProperty(b_s.prototype,"mysteryView",{get:function(){return this._mysteryView||(this._mysteryView=new e.ShopMysteryView),this._mysteryView},enumerable:!0,configurable:!0}),Object.defineProperty(b_s.prototype,"guildView",{get:function(){return this._guildView||(this._guildView=new e.ShopGuildView),this._guildView},enumerable:!0,configurable:!0}),Object.defineProperty(b_s.prototype,"fightView",{get:function(){return this._fightView||(this._fightView=new e.ShopFightView),this._fightView},enumerable:!0,configurable:!0}),Object.defineProperty(b_s.prototype,"honorView",{get:function(){return this._honorView||(this._honorView=new e.ShopHonorView),this._honorView},enumerable:!0,configurable:!0}),Object.defineProperty(b_s.prototype,"blackView",{get:function(){return this._shopBlack||(this._shopBlack=new e.ShopBlackMarketView),this._shopBlack},enumerable:!0,configurable:!0}),Object.defineProperty(b_s.prototype,"integralView",{get:function(){return this._shopIntegral||(this._shopIntegral=new e.ShopIntergralView),this._shopIntegral},enumerable:!0,configurable:!0}),Object.defineProperty(b_s.prototype,"animalView",{get:function(){return this._animal||(this._animal=new e.ShopRareAnimalView),this._animal},enumerable:!0,configurable:!0}),Object.defineProperty(b_s.prototype,"godEquipView",{get:function(){return this._godEquip||(this._godEquip=new e.godEquipShopView),this._godEquip},enumerable:!0,configurable:!0}),b_s.prototype.onClick=function(e){switch(e.target){case this.closeBtn:case this.backBtn:this.closeSelf();break;case this.refreshbtn:ShopModel.instance.onRefesh()}},b_s.prototype.closeSelf=function(){Cihs(b_s)},b_s.open=function(e,p_l){void 0===e&&(e=-1),void 0===p_l&&(p_l=0),UIM.open(b_s,["shop.atlas"],{index:e,itemId:p_l},!1,!1,!1,!1)},b_s.close=function(){Oche(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.menuList.itemRender=e.ShopAllBtn,p_g.menuList.dataSource=ShopConstant.shopList,p_g.menuList.hScrollBarSkin="",p_g.menuList.selectEnable=!0,p_g.menuList.selectHandler=Laya.Handler.create(p_g,p_g.onSelect,null,!1),p_g.on(Laya.Event.ADDED,p_g,p_g.onAdd),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g}e.ShopAllPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.shopItemUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Cfso(this,Laya)},b_s.prototype.onRemove=function(){Srto(this,Laya)},b_s.prototype.setItemData=function(e,p_l,p_g,b_s){void 0===p_g&&(p_g=!1),void 0===b_s&&(b_s=!1),this.btnEft.visible=!1;var d_u=this.titleLab,b_e=this.timeLab,d_m=this.moneyImg,d_w=this.discount,f_t=this.discountimg,v_z=this.frequency,d_h=this.leftDiv;d_h.style.color=v_z.color,d_h.style.bold=v_z.bold,d_h.style.align=v_z.align,d_h.style.font=v_z.font,d_h.style.fontSize=v_z.fontSize;var r_t=Config.shop_shop[e.id];if(r_t){var t_n=StateModel.instance.getStateLv(),f_y=r_t.price?r_t.price[0][0]:0,p_q=r_t.price?r_t.price[0][1]:0,h_h=new ModuleItemVO,n_j=Math.floor(r_t.discount);h_h.id=r_t.itemId,h_h.bind=1,h_h.amount=r_t.num||1,this.itemBox.isShowName=!1,this.itemBox.isShowNum=!0,this.itemBox.setItemData(h_h,ItemBoxDefine.MODULE_ITEM,!0);var j_l=Config.CItem(f_y);if(j_l){var l_m=Resource.ResUrl.getIconUrl(j_l.minIcon);d_m=Resource.ResManager.Instance.getImg(l_m,d_m)}b_e.text=p_q.toString(),0<r_t.discount&&(b_e.color="#3da72c",f_t.visible=!0,d_w.text=String(n_j)+(j_x(1786))),r_t.discount<=0&&(b_e.color="",f_t.visible=!1),this.buyBtn.disabled=r_t.stateLv>t_n&&r_t.lv>this.heroVo.level,d_u.text=Config.CItem(r_t.itemId)?Config.CItem(r_t.itemId).name:"";var z_m,h_b=ShopModel.instance.getShopDatas(1);if(h_b[p_l]&&(0<(h_b[p_l].dayNum||h_b[p_l].weekNum)&&1==e.type?(this.buyBtn.disabled=!0,p_g?(this.buyBtn.disabled=!1,this.buyBtn.visible=!1,this.hasBuyImg.visible=!0):(this.buyBtn.visible=!0,this.hasBuyImg.visible=!1)):(this.buyBtn.disabled=!1,p_g&&(this.buyBtn.disabled=!1),this.buyBtn.visible=!0,this.hasBuyImg.visible=!1)),z_m=f_y<100?b_p.getCoin(f_y):BagModel.instance.getItemCountByItemID(f_y,BagTypeDefine.BAG_TYPE_ITEM),b_e.color=z_m<p_q?"#c92828":"#008931",this.buyBtn.disabled=!0,r_t.stateLv>t_n){var t_i=Config.state_state[r_t.stateLv];d_h.innerHTML=(j_x("381_843_774")+j_x("1624_1117_1012"))+(t_i?t_i.desc:r_t.stateLv+(j_x(2342)))}else if(r_t.stateLv<=t_n&&r_t.lv>this.heroVo.level)d_h.innerHTML=(j_x("15_2342_774")+j_x("1624_1117_1012"))+r_t.lv+(j_x(2342));else if(r_t.stateLv<=t_n&&r_t.lv<=this.heroVo.level){var n_f=-1,t_s=0,v_n=e.dayNum||0,b_o=e.weekNum||0,b_x=e.toolNum||0,v_s="";if(r_t.dayNum&&(n_f=r_t.dayNum-v_n,t_s=1,v_s=(j_x("2339_1254"))),r_t.weekNum&&(n_f=r_t.weekNum-b_o,t_s=2,v_s=(j_x("944_722"))),r_t.limitNum&&(n_f=r_t.limitNum-b_x,t_s=3,v_s=""),0==p_g)if(0!==t_s){n_f<0&&(n_f=0);var r_c=n_f.toString();if(n_f||(r_c=Utils.setColor(r_c,Utils.Color.RED)),this.buyBtn.disabled=0===n_f,v_s=v_s+(j_x("1163_1355_2420"))+r_c+(j_x(235)),0<r_t.vipLv){var b_n="VIP"+r_t.vipLv;this.heroVo.vipLv<r_t.vipLv&&(b_n=Utils.setColor(b_n,Utils.Color.RED),this.buyBtn.disabled=!0),v_s=b_n+v_s}d_h.innerHTML=v_s}else d_h.innerHTML="",this.buyBtn.disabled=!1;1==p_g&&(d_h.innerHTML="",this.buyBtn.disabled=!1)}var v_p=SyncTime.serverTime/1e3-ShopModel.instance._randTime,d_d=Config.global[GlobalDefine.refresh_rand_shop_cd].i_info-v_p;if(1799<=Math.floor(d_d))this.createTween(this,400,100,p_l,p_g);else{if(!(Math.floor(d_d)<1799))return!1;this.createTween(this,0,0,p_l,p_g)}}},b_s.prototype.createTween=function(e,p_l,p_g,b_s,d_u){if(1==d_u){var b_e=0;e.y+=41*b_e,b_e++,e.x=900,p_l*=b_s+1,p_g=p_g*(b_s+1)*.3,Laya.Tween.to(e,{f_u:0},p_l,Laya.Ease.expoInOut,null,p_g)}},Object.defineProperty(b_s.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),b_s.prototype.onbuyClick=function(p_l){this.btnEft.visible=!1;var p_g=this.dataSource;1==p_g.type?(ShopModel.instance.reqShopbuyList(p_g.id,1),ShopModel.instance.reqShopAlreadyList()):e.ShopPopupPanel.open(p_g)},b_s.prototype.showBtnEffect=function(){this.buyBtn.visible&&!this.buyBtn.disabled&&(this.btnEft.visible=!0)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.ShopItemView=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.shopUI,__extends(d_u,p_l),d_u.prototype.onAdd=function(e){this.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.SHOP_DATA_UPDATE,this,this.updateShopList),LED.on(l_r.ACTIVITY_DY_CLOSE,this,this.checkXgOpen),LED.on(l_r.ACTIVITY_DY_OPEN,this,this.checkXgOpen),LED.on(l_r.UPDATE_BARGAIN_LIST,this,this.checkXgOpen),LED.on(l_r.UPDATE_SHOP_RED,this,this.checkHYZLOpen);var p_l=this.dataSource.index;this.tab.selectedIndex=-1,this.shopList.array=[],this.checkXgOpen(),2!=p_l||this.tabBtn2.visible||(p_l=3),3!=p_l||this.tabBtn3.visible||(p_l=1),this._clipTab.on("tabSelect",this,this.onTabSelect),this.tab.selectedIndex=p_l,LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,FuncDefine.shop),ShopModel.instance.reqShopAlreadyList()},d_u.prototype.onRender=function(e,p_l){0==this.tab.selectedIndex&&(e.setItemData(e.dataSource,p_l,!1),this.shopList.height=957),1==this.tab.selectedIndex&&(e.setItemData(e.dataSource,p_l,!0),this.shopList.height=861);var p_g=this.dataSource.itemId||0;(Config.shop_shop[e.dataSource.id]||{itemId:-1}).itemId==p_g&&e.showBtnEffect()},d_u.prototype.onClick=function(e){this.dataSource.itemId=0;var p_l=e.target;if(Config.global[GlobalDefine.refresh_rand_shop_cost].t_info,p_l)switch(p_l.name){case"closeBtn":case"backBtn":this.closeSelf();break;case"Refreshbtn":ShopModel.instance.onRefesh()}},d_u.prototype.onTimer=function(){var e=SyncTime.serverTime-1e3*ShopModel.instance._randTime,p_l=1e3*Config.global[GlobalDefine.refresh_rand_shop_cd].i_info-e;if(0<p_l){var p_g=Math.floor(p_l/1e3);this.updateimg.visible=!0;var b_s=Config.global[GlobalDefine.refresh_rand_shop_cost].t_info;this.Consumption.text=b_s[0][1],this.desc1.visible=!1,this.descbox.visible=!0,this.timerCd.text=Utils.formatTimeStr(p_g),this.moneyglod.index=b_s[0][0]-1,1799==p_g&&(this.Refreshbtn.mouseEnabled=!1,this.shopList.mouseEnabled=!1,this.closeBtn.mouseEnabled=!1,this.tab.mouseEnabled=!1),p_g<=1797&&(this.Refreshbtn.mouseEnabled=!0,this.shopList.mouseEnabled=!0,this.closeBtn.mouseEnabled=!0,this.tab.mouseEnabled=!0)}p_l<=0&&(this.updateimg.visible=!1,this.timerCd.text="",this.desc1.visible=!0,this.descbox.visible=!1,this.moneyglod.index=-1,Laya.timer.clear(this,this.onTimer))},d_u.prototype.onTabSelect=function(p_l){if(-1!=p_l)if(0===p_l||1===p_l)this.shopBox.visible=!0,this._xgbxPanel&&this._xgbxPanel.parent&&this._xgbxPanel.parent.removeChild(this._xgbxPanel),this._friendbargain&&this._friendbargain.parent&&this._friendbargain.parent.removeChild(this._friendbargain),this.updateShopList(),this.updateView(),this.updateBox.visible=1===p_l;else if(2===p_l){this.shopBox.visible=!1,this._xgbxPanel||(this._xgbxPanel=new e.XgbxPanel),this.addChildAt(this._xgbxPanel,1),this.rp_xglb.visible=!1;var p_g=ActivityModel.instance.getStaticActivity(FuncDefine.shop);p_g&&!p_g.isClick&&(p_g.isClick=!0,LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,10021)),this._friendbargain&&this._friendbargain.parent&&this._friendbargain.parent.removeChild(this._friendbargain)}else 3==p_l&&(this.shopBox.visible=!1,this._friendbargain||(this._friendbargain=new e.FriendBargain),this._friendbargain.updateMessage(),this.addChildAt(this._friendbargain,2),this.rp_hyzl.visible=!1,FriendBargainModel.instance._isClickFriendBargain=!0,this._xgbxPanel&&this._xgbxPanel.parent&&this._xgbxPanel.parent.removeChild(this._xgbxPanel))},d_u.prototype.closeSelf=function(){DB.instance.query(c2m_skill_list,new c2m_skill_list),d_u.close()},d_u.prototype.checkHYZLOpen=function(){var e=ActivityModel.instance.getActivityVoByType(ActivityTypeDefine.GS_friendDiscount),p_l=p_k.instance.checkSystemOpen(FuncDefine.FriendBargain);if(e&&p_l){this.tabBtn3.visible=!0,this.tabBtn3.x=145,ActivityModel.instance.getActivityVoByType(ActivityTypeDefine.GS_limitGift)||ActivityModel.instance.getActivityVoByType(ActivityTypeDefine.BG_limitGift)||(this.tabBtn3.x=0);var p_g=ActivityModel.instance.getStaticActivity(FuncDefine.shop);this.rp_hyzl.visible=FriendBargainModel.instance.checkAllBuyBtnRed()||p_g&&!FriendBargainModel.instance._isClickFriendBargain,LED.event(l_r.ACTIVITY_FUNCOPEN_UPDATE,10021)}else this.tabBtn3.visible=!1,3===this.tab.selectedIndex&&(this.tab.selectedIndex=0)},d_u.prototype.onRemove=function(){this.off(Laya.Event.CLICK,this,this.onClick),LED.off(l_r.SHOP_DATA_UPDATE,this,this.updateShopList),LED.off(l_r.ACTIVITY_DY_CLOSE,this,this.checkXgOpen),LED.off(l_r.ACTIVITY_DY_OPEN,this,this.checkXgOpen),LED.off(l_r.UPDATE_BARGAIN_LIST,this,this.checkXgOpen),LED.off(l_r.UPDATE_SHOP_RED,this,this.checkHYZLOpen),this._clipTab.off("tabSelect",this,this.onTabSelect),Laya.timer.clearAll(this),Laya.timer.clear(this,this.onTimer),this._xgbxPanel&&this._xgbxPanel.parent&&this._xgbxPanel.parent.removeChild(this._xgbxPanel),this._friendbargain&&this._friendbargain.parent&&this._friendbargain.parent.removeChild(this._friendbargain)},d_u.prototype.checkXgOpen=function(){if(this.checkHYZLOpen(),ActivityModel.instance.getActivityVoByType(ActivityTypeDefine.GS_limitGift)||ActivityModel.instance.getActivityVoByType(ActivityTypeDefine.BG_limitGift)){this.tabBtn2.visible=!0;var e=ActivityModel.instance.getStaticActivity(FuncDefine.shop);e&&!e.isClick&&(this.rp_xglb.visible=!0)}else this.tabBtn2.visible=!1,2===this.tab.selectedIndex&&(this.tab.selectedIndex=0)},d_u.prototype.updateShopList=function(){var e=this.dataSource.itemId||0,p_l=0===this.tab.selectedIndex?ShopType.COMMON:ShopType.RANDOM,p_g=ShopModel.instance.getShopDatas(p_l);if(p_g){p_g.sort((function(p_l,p_g){var b_s=Config.shop_shop[p_l.id]||{itemId:-1},d_u=Config.shop_shop[p_g.id]||{itemId:-1};return b_s.itemId==e&&d_u.itemId!=e?-1:b_s.itemId!=e&&d_u.itemId==e?1:b_s.order&&d_u.order&&b_s.order!=d_u.order?b_s.order-d_u.order:p_l.id-p_g.id})),this.shopList.array=p_g;var b_s=SyncTime.serverTime-1e3*ShopModel.instance._randTime,d_u=1e3*Config.global[GlobalDefine.refresh_rand_shop_cd].i_info-b_s,b_e=Config.global[GlobalDefine.refresh_rand_shop_cost].t_info;0==this.moneyglod.index&&(b_e[0][1]>this.heroVo.gold?this.Consumption.color="#e53d26":this.Consumption.color="#5b6675"),1==this.moneyglod.index&&(b_e[0][1]>this.heroVo.copper?this.Consumption.color="#e53d26":this.Consumption.color="#5b6675"),this.redpoint.visible=!1,d_u<=0&&(this.Consumption.color="#5b6675",this.redpoint.visible=!0),Laya.timer.clear(this,this.onTimer),Laya.timer.loop(1e3,this,this.onTimer),this.onTimer()}},Object.defineProperty(d_u.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),d_u.prototype.updateView=function(){this.updateBox.visible=1===this.tab.selectedIndex,this.shopList.height=1===this.tab.selectedIndex?900:995,this.titleImg.skin=1===this.tab.selectedIndex?"res/ui/shop/shenmishangcheng.png":"res/ui/shop/daojushangcheng.png"},d_u.open=function(p_l,p_g){void 0===p_l&&(p_l=2),void 0===p_g&&(p_g=0),e.TalismanUpPanel.close(),"number"!=typeof p_l&&(p_l=2),UIM.open(d_u,["shop.atlas"],{index:p_l,itemId:p_g})},d_u.close=function(){Ezga(UIM,d_u)},d_u);function d_u(){var b_s=p_l.call(this)||this;return b_s._isClickFriendBargain=!1,b_s._clipTab=new p_c(b_s.tab),b_s.shopList.vScrollBarSkin="",b_s.shopList.repeatY=30,b_s.shopList.scrollBar.elasticBackTime=500,b_s.shopList.scrollBar.elasticDistance=200,b_s.shopList.itemRender=e.ShopItemView,b_s.shopList.renderHandler=p_g.create(b_s,b_s.onRender,null,!1),b_s.on(Laya.Event.ADDED,b_s,b_s.onAdd),b_s.on(Laya.Event.REMOVED,b_s,b_s.onRemove),b_s}e.ShopPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.shoppopupUI,__extends(b_s,p_l),b_s.prototype.onAdd=function(e){Yqgk(e,this,Laya,b_s)},b_s.prototype.onClick=function(e){var p_l=e.target;if(p_l&&""!=p_l.name){var p_g,b_s=this.dataSource,d_u=parseInt(this.useNumTxt.text),b_e=Config.shop_shop[b_s.id];switch(b_e.price[0][1],Math.floor(b_e.discount),p_l.name){case"cutBtn":d_u-=1;break;case"cutTenBtn":d_u-=10;break;case"addBtn":d_u+=1;break;case"addTenBtn":d_u+=10}d_u=999<(d_u=d_u<1?1:d_u)?999:d_u,0==b_e.dayNum&&0==b_e.weekNum&&0==b_e.limitNum&&(999<d_u&&b_p.broadcastNotice((j_x("1355_2420_2348")+j_x("716_1300_1117")+j_x("1081_1375_2128")+j_x(489))),d_u=999<(d_u=d_u<1?1:d_u)?999:d_u,this.useNumTxt.text=d_u.toString()),0<b_e.dayNum&&(0<b_e.weekNum&&(d_u>b_e.dayNum&&!b_s.dayNum&&(b_p.broadcastNotice((j_x("1355_2420_2348")+j_x("716_1300_1117")+j_x("1081_1375_2128")+j_x(489))),d_u=d_u>b_e.dayNum?b_e.dayNum:d_u),b_s.dayNum&&d_u>b_e.dayNum-b_s.dayNum&&(b_p.broadcastNotice((j_x("1355_2420_2348")+j_x("716_1300_1117")+j_x("1081_1375_2128")+j_x(489))),d_u=d_u>b_e.dayNum-b_s.dayNum?b_e.dayNum-b_s.dayNum:d_u)),0==b_e.weekNum&&(d_u>b_e.dayNum&&!b_s.dayNum&&(b_p.broadcastNotice((j_x("1355_2420_2348")+j_x("716_1300_1117")+j_x("1081_1375_2128")+j_x(489))),d_u=d_u>b_e.dayNum?b_e.dayNum:d_u),b_s.dayNum&&d_u>b_e.dayNum-b_s.dayNum&&(b_p.broadcastNotice((j_x("1355_2420_2348")+j_x("716_1300_1117")+j_x("1081_1375_2128")+j_x(489))),d_u=d_u>b_e.dayNum-b_s.dayNum?b_e.dayNum-b_s.dayNum:d_u))),b_s.dayNum&&(this.useNumTxt.text=d_u.toString()+"/"+(b_e.dayNum-b_s.dayNum).toString()),b_s.dayNum||(this.useNumTxt.text=d_u.toString()+"/"+b_e.dayNum.toString()),0==b_e.dayNum&&(this.useNumTxt.text=d_u.toString()),0==b_e.dayNum&&0<b_e.weekNum&&((p_g=b_e.weekNum-b_s.weekNum)<d_u&&b_p.broadcastNotice((j_x("1355_2420_2348")+j_x("716_1300_1117")+j_x("1081_1375_2128")+j_x(489))),d_u=p_g<d_u?p_g:d_u,this.useNumTxt.text=d_u.toString()+"/"+p_g.toString(),b_s.weekNum||(this.useNumTxt.text=d_u.toString()+"/"+b_e.weekNum.toString(),d_u>b_e.weekNum-0&&b_p.broadcastNotice((j_x("1355_2420_2348")+j_x("716_1300_1117")+j_x("1081_1375_2128")+j_x(489))))),0==b_e.dayNum&&0==b_e.weekNum&&0<b_e.limitNum&&((p_g=b_e.limitNum-b_s.toolNum)<d_u&&b_p.broadcastNotice((j_x("1355_2420_2348")+j_x("716_1300_1117")+j_x("1081_1375_2128")+j_x(489))),d_u=p_g<d_u?p_g:d_u,this.useNumTxt.text=d_u.toString()+"/"+p_g.toString(),b_s.toolNum||(this.useNumTxt.text=d_u.toString()+"/"+b_e.limitNum.toString(),d_u>b_e.limitNum&&b_p.broadcastNotice((j_x("1355_2420_2348")+j_x("716_1300_1117")+j_x("1081_1375_2128")+j_x(489)))));var d_m,d_w=parseInt(this.lvTxt.text)*d_u;d_m=b_e.price[0][0]<100?b_p.getCoin(b_e.price[0][0]):BagModel.instance.getItemCountByItemID(b_e.price[0][0],BagTypeDefine.BAG_TYPE_ITEM),this.numTxt.color=d_m<d_w?"#e53d26":"#3da72c",d_u=999<(d_u=d_u<1?1:d_u)?999:d_u,this.numTxt.text=(parseInt(this.lvTxt.text)*d_u).toString()}},b_s.prototype.onRemove=function(){Eoeo(this,Laya,b_s)},b_s.prototype.updateData=function(){var e=this.dataSource,p_l=parseInt(this.useNumTxt.text),p_g=Config.shop_shop[e.id],b_s=p_g.price[0][1],d_u=p_g.price[0][0],b_e=p_g.discount;b_e=p_g.price[0][0]<100?b_p.getCoin(p_g.price[0][0]):BagModel.instance.getItemCountByItemID(p_g.price[0][0],BagTypeDefine.BAG_TYPE_ITEM),p_g.discount<100&&(this.lvTxt.text=String(b_s),1!=d_u&&2!=d_u||(this.lvTxt.color=b_s<=b_e?"#3da72c":"#e53d26"),(12==d_u||100<d_u)&&(this.lvTxt.color=b_s<=b_e?"#008931":"#c92828")),0==p_g.discount&&(this.lvTxt.text=String(b_s));var d_m=parseInt(this.lvTxt.text)*p_l,d_w=p_g.dayNum-e.dayNum;0!=p_g.dayNum&&(d_w=p_g.dayNum-e.dayNum),0!=p_g.weekNum&&(d_w=p_g.weekNum-e.weekNum),0!=p_g.limitNum&&(d_w=p_g.limitNum-e.toolNum),this.useNumTxt.text=p_l.toString()+"/"+d_w.toString(),0==p_g.dayNum&&(this.useNumTxt.text=p_l.toString());var f_t=Config.CItem(p_g.itemId);this.numTxt.text=(parseInt(this.lvTxt.text)*parseInt(this.useNumTxt.text)).toString(),this.nameTxt.text=f_t.name;var v_z=Config.CItem(d_u);if(v_z){var d_h="res/ui/shop/17.png";d_h=e.type==ShopConstant.type_godEquip?"res/ui/shop/20.png":"res/ui/shop/17.png",v_z.minIcon&&(d_h=Resource.ResUrl.getIconUrl(v_z.minIcon)),Resource.ResManager.Instance.getImg(d_h,this.moneySp),Resource.ResManager.Instance.getImg(d_h,this.moneyAllSp)}var r_t=Config.CItem(p_g.itemId),t_n=new ModuleItemVO;if(Config.item_equipment[r_t.id]){var f_y=3.5*Config.item_equipment[r_t.id].basePropFixed[0][1],p_q=.2*Config.item_equipment[r_t.id].basePropFixed[0][1];"attack"!=r_t.basePropFixed[0][0]&&"defense"!=r_t.basePropFixed[0][0]||(t_n.id=p_g.itemId,t_n.bind=1,t_n.amount=p_g.num,t_n.fighting=f_y),"hpUpper"==r_t.basePropFixed[0][0]&&(t_n.id=p_g.itemId,t_n.bind=1,t_n.amount=p_g.num,t_n.fighting=p_q),this.itemBox.isShowName=!1,this.itemBox.setItemData(t_n,ItemBoxDefine.BAG_INFO,!0)}(Config.item_material[r_t.id]||Config.item_consumeable[r_t.id]||Config.item_petSpirit[r_t.id])&&(t_n.id=p_g.itemId,t_n.bind=1,t_n.amount=p_g.num,this.itemBox.isShowName=!1,this.itemBox.setItemData(t_n,ItemBoxDefine.BAG_INFO,!0)),this.useNumTxt.text=p_l.toString()+"/"+(p_g.dayNum-e.dayNum).toString(),0==p_g.dayNum&&(this.useNumTxt.text=p_l.toString()),0==p_g.dayNum&&0<p_g.weekNum&&(this.useNumTxt.text=p_l.toString()+"/"+(p_g.weekNum-e.weekNum).toString()),0==p_g.weekNum&&0==p_g.dayNum&&0<p_g.limitNum&&(this.useNumTxt.text=p_l.toString()+"/"+(p_g.limitNum-e.toolNum).toString()),this.numTxt.color=b_e<d_m?"#e53d26":"#3da72c"},b_s.prototype.onbuyClick=function(){var e=this.dataSource,p_l=Config.shop_shop[e.id],p_g=StateModel.instance.getStateLv();if(Config.CItem(p_l.itemId),p_l.lv>this.heroVo.level)return b_p.broadcastNotice((j_x("15_2342_2462")+j_x("656_481_1624")+j_x(100))),!1;if(p_l.stateLv>p_g)return b_p.broadcastNotice((j_x("381_843_2462")+j_x("656_481_1624")+j_x(100))),!1;var d_u=parseInt(this.useNumTxt.text),b_e=d_u*p_l.price[0][1];if((p_l.price[0][0]<100?b_p.getCoin(p_l.price[0][0]):BagModel.instance.getItemCountByItemID(p_l.price[0][0],BagTypeDefine.BAG_TYPE_ITEM))<b_e){var d_m=Config.CItem(p_l.price[0][0]);return d_m&&b_p.broadcastNotice(d_m.name+(j_x("2462_1779"))),!1}if(p_l.lv>this.heroVo.level)return b_p.broadcastNotice((j_x("15_2342_2462")+j_x("656_481_1624")+j_x(100))),!1;if(0==p_l.weekNum&&0==p_l.limitNum&&0==p_l.limitNum)return ShopModel.instance.reqShopbuyList(e.id,d_u),b_s.close(),!1;if(e.dayNum+d_u<=p_l.dayNum&&p_l.lv<=this.heroVo.level)return e.dayNum,ShopModel.instance.reqShopbuyList(e.id,d_u),b_s.close(),!1;if((e.dayNum>=p_l.dayNum&&0!=p_l.dayNum||0!=p_l.weekNum&&e.weekNum>=p_l.weekNum)&&null!=e.dayNum)return b_p.broadcastNotice((j_x("1761_415_2462")+j_x(1779))),b_s.close(),!1;if(0==p_l.weekNum&&0==p_l.limitNum){if(e.dayNum+d_u>p_l.dayNum&&0!=p_l.dayNum)return b_p.broadcastNotice((j_x("1327_1254_1355")+j_x("2420_235_2348")+j_x("1360_2128"))),b_s.close(),!1;if(0==p_l.dayNum)return ShopModel.instance.reqShopbuyList(e.id,d_u),b_s.close(),!1}if(0==p_l.dayNum&&0==p_l.limitNum){if(e.weekNum+d_u>p_l.weekNum&&0!=p_l.weekNum)return b_p.broadcastNotice((j_x("944_722_1355")+j_x("2420_235_2348")+j_x("1360_2128"))),b_s.close(),!1;if(e.weekNum+d_u<=p_l.weekNum)return ShopModel.instance.reqShopbuyList(e.id,d_u),b_s.close(),!1}if(0==p_l.dayNum&&0==p_l.weekNum){if(e.toolNum+d_u>p_l.limitNum&&0!=p_l.limitNum)return b_p.broadcastNotice((j_x("1355_2420_235")+j_x("2348_1360_2128"))),b_s.close(),!1;if(e.toolNum+d_u<=p_l.limitNum)return ShopModel.instance.reqShopbuyList(e.id,d_u),b_s.close(),!1}return!0},Object.defineProperty(b_s.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),b_s.open=function(e){Oyph(e,UIM,b_s)},b_s.close=function(){Ucpp(UIM,b_s,ShopModel)},b_s);function b_s(){var e=p_l.call(this)||this;return e.itemList.selectEnable=!0,e.on(Laya.Event.ADDED,e,e.onAdd),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.ShopPopupPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.shop.ShopBaseViewUI,__extends(b_s,p_l),b_s.prototype.setType=function(e,p_l){void 0===p_l&&(p_l=0),this._type=e,0!=p_l&&(this._itemID=p_l),this.changeShow()},b_s.prototype.onRemove=function(){Gkzf(this,Laya)},b_s.prototype.changeShow=function(){var e=727,p_l=52,p_g=this._type;p_g==ShopConstant.type_prop?(p_l=0,e=780):p_g==ShopConstant.type_mystery&&(e=678,p_l=0),this.shopList.height=e,this.shopList.y=p_l,this.banquetSp.visible=p_g==ShopConstant.type_banquet,this.fightSp.visible=p_g==ShopConstant.type_fight,this.honorSp.visible=p_g==ShopConstant.type_honor,this.guildSp.visible=p_g==ShopConstant.type_guild,this.Intergral.visible=p_g==ShopConstant.type_Integral,this.blackSp.visible=p_g==ShopConstant.type_Black||p_g==ShopConstant.type_Integral,this.animalSp.visible=p_g==ShopConstant.type_Animals,this.godEquipSp.visible=p_g==ShopConstant.type_godEquip},b_s.prototype.onClick=function(e){},b_s.prototype.onAdd=function(){Gohu(this,Laya)},b_s.prototype.updateItem=function(e,p_l){},b_s);function b_s(){var e=p_l.call(this)||this;return e._type=0,e._itemID=0,e.shopList.vScrollBarSkin="",e.shopList.scrollBar.elasticBackTime=200,e.shopList.scrollBar.elasticDistance=50,e.shopList.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.on(Laya.Event.ADDED,e,e.onAdd),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.ShopBaseView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=e.ShopBaseView,__extends(b_s,p_l),b_s.prototype.onAdd=function(){Iufc(this,Laya,LED,l_r)},b_s.prototype.updateView=function(e,p_l){void 0===p_l&&(p_l=0),this.setType(e,p_l),this.changeShow()},b_s.prototype.updateItem=function(e,p_l){var p_g=!1,b_s=!1;if(this._type===ShopConstant.type_godEquip&&(b_s=!(p_g=!1)),e.setItemData(e.dataSource,p_l,p_g),b_s){var d_u=this._itemid,b_e=Config.shop_shop[e.dataSource.id];b_e&&b_e.itemId==d_u&&e.showBtnEffect()}},b_s.prototype.compare=function(e,p_l){var p_g,b_s,d_u=ShopModel.instance.getShopVo(e),b_e=ShopModel.instance.getShopVo(p_l);return(p_g=0<d_u.buyNum?1:2)==(b_s=0<b_e.buyNum?1:2)?e.id-p_l.id:p_g-b_s},b_s.prototype.updateShopList=function(){var e;this._type==ShopConstant.type_godEquip&&(e=ShopModel.instance.getShopDatas(ShopType.GODEQUIP)),this.shopList.array=e.sort(this.compare)},b_s.prototype.updateShow=function(){Ynfm(Laya,this)},b_s.prototype.test=function(){Gcxi(this)},b_s.prototype.updateScore=function(){var e=BagModel.instance.getItemCountByItemID(this._itemid,BagTypeDefine.BAG_TYPE_ITEM);this._type==ShopConstant.type_godEquip&&(this.godEquip_scoreTxt.text=""+b_p.calsulate(e))},b_s.prototype.onRemoved=function(){Iogd(this,Laya,LED,l_r)},b_s.prototype.setType=function(e,p_g){void 0===p_g&&(p_g=0),p_l.prototype.setType.call(this,e,p_g)},b_s.prototype.onClickAdd=function(){Gden(r_f,this)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g._itemid=299998,p_g.shopList.itemRender=e.ShopItem2,p_g.setType(ShopConstant.type_godEquip),p_g}e.godEquipShopView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=e.ShopBaseView,__extends(b_s,p_l),b_s.prototype.onAdd=function(){Ohmw(this,Laya,LED,l_r)},b_s.prototype.recycle=function(){Yvps(this,Laya,PoolDefine)},b_s.prototype.setType=function(e,p_g){void 0===p_g&&(p_g=0),p_l.prototype.setType.call(this,e,p_g)},b_s.prototype.getCnf=function(e){var p_l=Config.shop_shop[e];return p_l?p_l.order:-1},b_s.prototype.updateScore=function(){Sjpd(this,b_p,LgcM)},b_s.prototype.updateView=function(e,p_l){void 0===p_l&&(p_l=0),this.setType(e,p_l),this.changeShow()},b_s.prototype.sortOrder=function(e,p_l){var p_g,b_s;return(p_g=this.getCnf(e))==(b_s=this.getCnf(p_l))?this.sortId(e,p_l):p_g<b_s?-1:1},b_s.prototype.onRemove=function(){Utze(this,Laya,LED,l_r)},b_s.prototype.sortId=function(e,p_l){return e<p_l?-1:1},b_s.prototype.sortList=function(e){var p_l,p_g,b_s,d_u,b_e=this,d_m=this;return e.sort((function(e,d_w){return d_m.isMystery?e.mustShow>d_w.mustShow?-1:1:d_m.isProp||d_m.isBlack?(p_l=ShopModel.instance.getShopVo(e),p_g=ShopModel.instance.getShopVo(d_w),b_s=0!=p_l.buyNum,d_u=0!=p_g.buyNum,b_s||d_u?b_s?d_u?b_e.sortOrder(e.id,d_w.id):-1:1:b_e.sortOrder(e.id,d_w.id)):void 0})),e},b_s.prototype.updateShopList=function(){if(this.isMystery&&(this.isSort=!0),this.isSort){var e;this.recycle();var p_l=!0;if(this._type==ShopConstant.type_banquet)e=ShopModel.instance.getShopDatas(ShopType.BANQUET),p_l=!1;else if(this.isBlack)e=ShopModel.instance.getShopDatas(ShopType.BLACK);else{this._itemID;var p_g=this.isProp?ShopType.COMMON:ShopType.RANDOM;e=ShopModel.instance.getShopDatas(p_g)}p_l&&this.isSort&&(this.isSort=!1,this.sortList(e)),this.shopList.array=e}else this.shopList.refresh()},b_s.prototype.updateShow=function(){this.updateShopList(),this._type==ShopConstant.type_banquet&&this.updateScore()},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"bq_addBtn":e.BanquetPanel.open()}},Object.defineProperty(b_s.prototype,"isMystery",{get:function(){return this._type===ShopConstant.type_mystery},enumerable:!0,configurable:!0}),Object.defineProperty(b_s.prototype,"isProp",{get:function(){return this._type===ShopConstant.type_prop},enumerable:!0,configurable:!0}),Object.defineProperty(b_s.prototype,"isBlack",{get:function(){return this._type==ShopConstant.type_Black},enumerable:!0,configurable:!0}),b_s.prototype.updateItem=function(e,p_l){var p_g=!1,b_s=!1;if(this._type===ShopConstant.type_prop?b_s=!0:!this.isMystery&&this._type!==ShopConstant.type_Black||(b_s=p_g=!0),e.setItemData(e.dataSource,p_l,p_g,this.isMystery),b_s){var d_u=this._itemID,b_e=Config.shop_shop[e.dataSource.id];b_e&&b_e.itemId==d_u&&e.showBtnEffect()}},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.shopList.itemRender=e.ShopItem2,p_g.setType(ShopConstant.type_Black),p_g}e.ShopMysteryView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=e.ShopMysteryView,__extends(b_s,p_l),b_s.prototype.onAdd=function(){Gdtd(this,Laya,LED,l_r)},b_s.prototype.updateShopList=function(){var e;if(this._type==ShopConstant.type_Black)(e=ShopModel.instance.getShopDatas(ShopType.BLACK)).sort((function(e,p_l){if(p_l.countTimes()<=0)return-1}));else{var p_l=this._itemID,p_g=this._type===ShopConstant.type_prop?ShopType.COMMON:ShopType.RANDOM;(e=ShopModel.instance.getShopDatas(p_g)).sort((function(e,p_g){if(p_g.countTimes()<=0)return-1;var b_s=Config.shop_shop[e.id]||{itemId:-1},d_u=Config.shop_shop[p_g.id]||{itemId:-1};return b_s.itemId==p_l&&d_u.itemId!=p_l?-1:b_s.itemId!=p_l&&d_u.itemId==p_l?1:b_s.order&&d_u.order&&b_s.order!=d_u.order?b_s.order-d_u.order:e.id-p_g.id}))}this.shopList.array=e},b_s.prototype.updateShow=function(){Kyvr(this)},b_s.prototype.updateScore=function(){var e=BagModel.instance.getItemCountByItemID(200095,BagTypeDefine.BAG_TYPE_ITEM);this._type==ShopConstant.type_Black&&(this.t_ticket.text=""+b_p.calsulate(e))},b_s.prototype.setType=function(e,p_g){void 0===p_g&&(p_g=0),p_l.prototype.setType.call(this,e,p_g)},b_s.prototype.onRemove=function(){Wbnw(this,Laya,LED,l_r)},b_s.prototype.onClick=function(e){switch(e.target.name){case"b_addBtn":r_f.instance.isWindow(200095)}},b_s.prototype.updateView=function(e,p_l){void 0===p_l&&(p_l=0),this.setType(e,p_l),this.changeShow()},b_s.prototype.updateItem=function(e,p_l){var p_g=!1;if(this._type===ShopConstant.type_Black&&(p_g=!0),e.setItemData(e.dataSource,p_l,!1),p_g){var b_s=this._itemID,d_u=Config.shop_shop[e.dataSource.id];d_u&&d_u.itemId==b_s&&e.showBtnEffect()}},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.shopList.itemRender=e.ShopItem2,p_g.setType(ShopConstant.type_prop),p_g}e.ShopBlackMarketView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.shopItem2UI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Yxgg(this,Laya)},b_s.prototype.onRemoved=function(){Qnjx(this,Laya)},b_s.prototype.onbuyClick=function(p_l){var p_g=Config.gymkhana_gymkhanaShop[this.dataSource.Id],b_s=this.dataSource.time;gymkhanaModel.instance.getConfigMax(p_g)<=b_s?b_p.broadcastNotice((j_x("2339_1254_1355")+j_x("2420_1300_1876")+j_x(1917))):e.gymkhanaShopPopup.open(this.dataSource)},b_s.prototype.setItemData=function(e){this.buy_red.visible=!1;var p_l=e.cfg,p_g=new ModuleItemVO;p_g.id=p_l.itemId,p_g.amount=1,this.itemBox.isShowName=!1,this.itemBox.setItemData(p_g),this.titleLab.text=Config.CItem(p_l.itemId).name,this.timeLab.color=LgcM.ins.heroVo.gymkhanaScore<p_l.money?"#c92828":"#008931",this.timeLab.text=Utils.$("{1}",p_l.money);var b_s=Config.item_coin[CoinDefine.GYMKHANA],d_u=Resource.ResUrl.getIconUrl(b_s.minIcon);this.moneyImg=Resource.ResManager.Instance.getImg(d_u,this.moneyImg),this.discountimg.visible=!1;var b_e=0;0<p_l.buyLimit?(b_e=gymkhanaModel.instance.getConfigMax(p_l)-e.buyLimitTimes,this.leftDiv.innerHTML=0<b_e?Utils.$((j_x("1163_1355_2420")+"{1}"+j_x(235)),b_e<=0?Utils.setColor(b_e.toString(),"#c92828"):b_e):""):(b_e=gymkhanaModel.instance.getConfigMax(p_l)-e.times,this.leftDiv.innerHTML=0<b_e?Utils.$((j_x("2339_1254_1163")+j_x("1355_2420")+"{1}"+j_x(235)),b_e<=0?Utils.setColor(b_e.toString(),"#c92828"):b_e):""),this.hasBuyImg.visible=!1,this.buyBtn.visible=!0,this.buyBtn.disabled=b_e<=0,this.buyBtn.label=this.buyBtn.disabled?(j_x("1300_1355_2420")):(j_x(1355)+"  "+j_x(2420)),gymkhanaModel.instance.gymkhanaInfo&&(0<p_l.rankLimit&&p_l.rankLimit<gymkhanaModel.instance.gymkhanaInfo.selfRankNum?(this.hasBuyImg.visible=!1,this.buyBtn.visible=!1,this.leftDiv.style.color=Utils.Color.RED,this.leftDiv.innerHTML=Utils.$((j_x("2434_1511_1117")+j_x(1012)+"{1}"+j_x("1163_1355_2420")),p_l.rankLimit)):0==gymkhanaModel.instance.gymkhanaInfo.selfRankNum&&(this.hasBuyImg.visible=!1,this.buyBtn.visible=!1,this.leftDiv.style.color=Utils.Color.RED,this.leftDiv.innerHTML=Utils.$((j_x("2434_1511_1117")+j_x(1012)+"{1}"+j_x("1163_1355_2420")),p_l.rankLimit)))},b_s);function b_s(){var e=p_l.call(this)||this;e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved);var p_g=e.frequency;return z_j.setHtml(e.leftDiv,p_g.fontSize,p_g.color,10,p_g.align,p_g.font,!1),e}e.ShopFightItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=e.ShopBaseView,__extends(b_s,p_l),b_s.prototype.onAdd=function(){Kbdi(this,Laya,LED,l_r,gymkhanaModel)},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"f_addBtn":e.gymkhanaPanel.open()}},b_s.prototype.onRemove=function(){Cigs(this,Laya,LED,l_r)},b_s.prototype.updateShopList=function(e){void 0===e&&(e=null),null==e?this.shopList.refresh():this.shopList.array=e},b_s.prototype.updateItem=function(e,p_l){Stkv(e,p_l)},b_s.prototype.updateShow=function(e){void 0===e&&(e=null),this.updateShopList(e),this.updateScore()},b_s.prototype.updateScore=function(){var e=Config.item_coin[CoinDefine.GYMKHANA],p_l=Resource.ResUrl.getIconUrl(e.minIcon);this.iconFight.skin=p_l,this.iconFight.clipX=this.iconFight.clipY=1,this.iconFight.index=0,this.iconFight.visible=!0,this.txtFight.text=LgcM.ins.heroVo.gymkhanaScore.toString()},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.shopList.itemRender=e.ShopFightItem,p_g.setType(ShopConstant.type_fight),p_g}e.ShopFightView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.shopItem2UI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Czhf(this,Laya)},b_s.prototype.onRemove=function(){Qsdy(this,Laya)},b_s.prototype.onbuyClick=function(p_l){if(this.dataSource){var p_g=Config.guild_guildShop[this.dataSource.id],b_s=GuildModel.instance.exchangeInfo?GuildModel.instance.exchangeInfo[this.dataSource.id]:null;GuildModel.instance.getConfigMax(p_g)-(b_s?b_s.count:0)<=0?b_p.broadcastNotice((j_x("2339_1254_1355")+j_x("2420_1300_1876")+j_x(1917))):e.GuildShopPopup.open(this.dataSource)}},b_s.prototype.setItemData=function(e){this.buy_red.visible=!1;var p_l=Config.guild_guildShop[e.id],p_g=new ModuleItemVO;p_g.id=p_l.itemId,p_g.amount=1,this.itemBox.isShowName=!1,this.itemBox.setItemData(p_g),this.titleLab.text=Config.CItem(p_l.itemId).name,this.timeLab.color=b_p.getCoin(CoinDefine.GCTRB)<p_l.money?"#c92828":"#008931",this.timeLab.text=Utils.$("{1}",p_l.money);var b_s=Config.item_coin[CoinDefine.GCTRB],d_u=Resource.ResUrl.getIconUrl(b_s.minIcon);this.moneyImg=Resource.ResManager.Instance.getImg(d_u,this.moneyImg),this.discountimg.visible=0<p_l.discount&&p_l.discount<100,this.discount.text=(p_l.discount/10).toFixed(1);var b_e=GuildModel.instance.exchangeInfo?GuildModel.instance.exchangeInfo[e.id]:null,d_m=b_e?b_e.count:0,d_w=GuildModel.instance.getConfigMax(p_l)-d_m;if(this.leftDiv.innerHTML=0<d_w?Utils.$((j_x("2339_1254_1163")+j_x("1355_2420")+"{1}"+j_x(235)),d_w<=0?Utils.setColor(d_w.toString(),"#c92828"):d_w):"",0<p_l.buyLimit){var f_t=GuildModel.instance.buyInfo?GuildModel.instance.buyInfo[e.id]:null;d_m=f_t?f_t.count:0,d_w=p_l.buyLimit-d_m,this.leftDiv.innerHTML=0<d_w?Utils.$((j_x("1163_1355_2420")+"{1}"+j_x(235)),d_w<=0?Utils.setColor(d_w.toString(),"#c92828"):d_w):""}this.hasBuyImg.visible=!1,this.buyBtn.visible=!0,this.buyBtn.disabled=d_w<=0,this.buyBtn.label=this.buyBtn.disabled?(j_x("1300_1355_2420")):(j_x(1355)+"  "+j_x(2420)),0<p_l.guildLevel_buy&&p_l.guildLevel_buy>GuildModel.instance.guildInfo.level&&(this.hasBuyImg.visible=!1,this.buyBtn.visible=!1,this.leftDiv.style.color=Utils.Color.RED,this.leftDiv.innerHTML=Utils.$((j_x("796_1413")+"{1}"+j_x("2342_1048_1745")),p_l.guildLevel_buy))},b_s);function b_s(){var e=p_l.call(this)||this;e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove);var p_g=e.frequency;return z_j.setHtml(e.leftDiv,p_g.fontSize,p_g.color,10,p_g.align,p_g.font,!1),e}e.ShopGuildItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=e.ShopBaseView,__extends(b_s,p_l),b_s.prototype.onAdd=function(){Eqvl(this,Laya,LED,l_r,GuildModel)},b_s.prototype.getBuy=function(e){return Muvl(e,GuildModel)},b_s.prototype.updateShow=function(){Epmi(this)},b_s.prototype.updateShopList=function(){var e=this;if(this.isSort){var p_l,p_g,b_s=[];for(var d_u in Config.guild_guildShop)b_s.push(Config.guild_guildShop[d_u]);this.isSort&&(this.isSort=!1,b_s.sort((function(b_s,d_u){return p_l=e.getBuy(b_s),p_g=e.getBuy(d_u),p_l||p_g?p_l?p_g?e.sortId(b_s.sortnum,d_u.sortnum):-1:1:e.sortId(b_s.sortnum,d_u.sortnum)}))),this.shopList.array=b_s}else this.shopList.refresh()},b_s.prototype.updateItem=function(e,p_l){Sbbp(e,p_l)},b_s.prototype.sortId=function(e,p_l){return e<p_l?-1:1},b_s.prototype.onRemove=function(){Sspc(this,Laya,LED,l_r)},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"g_addBtn":e.GuildCheckinPanel.open()}},b_s.prototype.updateScore=function(){LgcM.ins.heroVo&&LgcM.ins.heroVo.guildCtrb?this.t_ctrb.text=b_p.calsulate(LgcM.ins.heroVo.guildCtrb):this.t_ctrb.text="0"},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.shopList.itemRender=e.ShopGuildItem,p_g.setType(ShopConstant.type_guild),p_g}e.ShopGuildView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.shopItem2UI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Qmbs(this,Laya)},b_s.prototype.onRemoved=function(){Odjx(this,Laya)},b_s.prototype.onbuyClick=function(p_l){var p_g=Config.asyncpvp_asyncpvpShop[this.dataSource.id];d_x.instance.getBuyMax(p_g)?b_p.broadcastNotice((j_x("2339_1254_1355")+j_x("2420_1300_1876")+j_x(1917))):e.PvpShopPopup.open(this.dataSource)},b_s.prototype.setItemData=function(e){this.buy_red.visible=!1;var p_l=Config.asyncpvp_asyncpvpShop[e.id],p_g=new ModuleItemVO;p_g.id=p_l.itemId,p_g.amount=1,this.itemBox.isShowName=!1,this.itemBox.setItemData(p_g),this.titleLab.text=Config.CItem(p_l.itemId).name,this.timeLab.color=b_p.getCoin(CoinDefine.HONOR)<p_l.money?"#c92828":"#008931",this.timeLab.text=Utils.$("{1}",p_l.money);var b_s=Config.item_coin[CoinDefine.HONOR],d_u=Resource.ResUrl.getIconUrl(b_s.minIcon);this.moneyImg=Resource.ResManager.Instance.getImg(d_u,this.moneyImg),this.discountimg.visible=0<p_l.discount&&p_l.discount<100,this.discount.text=(p_l.discount/10).toFixed(1);var b_e=d_x.instance.exchangeInfo&&d_x.instance.exchangeInfo[e.id]||0,d_m=d_x.instance.getConfigMax(p_l)-b_e;this.leftDiv.innerHTML=0<d_m?Utils.$((j_x("2339_1254_1163")+j_x("1355_2420")+"{1}"+j_x(235)),d_m<=0?Utils.setColor(d_m.toString(),"#c92828"):d_m):"",0<p_l.buyLimit&&(b_e=d_x.instance.exchangeInfo&&d_x.instance.exchangeInfo[e.id]||0,d_m=p_l.buyLimit-b_e,this.leftDiv.innerHTML=0<d_m?Utils.$((j_x("1163_1355_2420")+"{1}"+j_x(235)),d_m<=0?Utils.setColor(d_m.toString(),"#c92828"):d_m):""),this.hasBuyImg.visible=!1,this.buyBtn.visible=!0,this.buyBtn.disabled=d_m<=0,this.buyBtn.label=this.buyBtn.disabled?(j_x("1300_1355_2420")):(j_x(1355)+"  "+j_x(2420)),0<p_l.segmentLimit&&p_l.segmentLimit>d_x.instance.myGrade&&(this.hasBuyImg.visible=!1,this.buyBtn.visible=!1,this.leftDiv.style.color=Utils.Color.RED,this.leftDiv.innerHTML=Utils.$(("{1}"+j_x("1048_1745")),Config.asyncpvp_danGrading[p_l.segmentLimit].name))},b_s);function b_s(){var e=p_l.call(this)||this;e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved);var p_g=e.frequency;return z_j.setHtml(e.leftDiv,p_g.fontSize,p_g.color,10,p_g.align,p_g.font,!1),e}e.ShopHonorItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=e.ShopBaseView,__extends(b_s,p_l),b_s.prototype.onAdd=function(){this.on(Laya.Event.CLICK,this,this.onClick),this.isSort=!0,DB.instance.query(c2m_asyncpvp_exchange_req,{}),LED.on(l_r.PVP_EXCHANGE_UPDATE,this,this.updateShow)},b_s.prototype.updateShopList=function(){var e=this;if(this.isSort){if(this.isSort){this.isSort=!1;var p_l,p_g,b_s=[];for(var d_u in Config.asyncpvp_asyncpvpShop)b_s.push(Config.asyncpvp_asyncpvpShop[d_u]);b_s.sort((function(b_s,d_u){return p_l=e.getBuy(b_s),p_g=e.getBuy(d_u),p_l||p_g?p_l?p_g?e.sortId(b_s.sortnum,d_u.sortnum):-1:1:e.sortId(b_s.sortnum,d_u.sortnum)})),this.shopList.array=b_s}}else this.shopList.refresh()},b_s.prototype.updateItem=function(e,p_l){Cvqn(e,p_l)},b_s.prototype.getBuy=function(e){return Yoqi(e,d_x)},b_s.prototype.sortId=function(e,p_l){return e<p_l?-1:1},b_s.prototype.onRemove=function(){Erpt(this,Laya,LED,l_r)},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"h_addBtn":e.PvpPanel.open()}},b_s.prototype.updateShow=function(){Ikqc(this)},b_s.prototype.updateScore=function(){var e=Config.item_coin[CoinDefine.HONOR],p_l=Resource.ResUrl.getIconUrl(e.minIcon);this.c_coin.skin=p_l,this.c_coin.clipX=this.c_coin.clipY=1,this.c_coin.index=0,this.c_coin.visible=!0,this.t_coin.text=LgcM.ins.heroVo.honor.toString()},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.shopList.itemRender=e.ShopHonorItem,p_g.setType(ShopConstant.type_honor),p_g}e.ShopHonorView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=e.ShopBaseView,__extends(b_s,p_l),b_s.prototype.onAdd=function(){Ctdl(this,Laya,LED,l_r)},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"b_addBtn":e.BlackKingCardPanel.open()}},b_s.prototype.updateView=function(e,p_l){void 0===p_l&&(p_l=0),this.setType(e,p_l),this.changeShow()},b_s.prototype.setType=function(e,p_g){void 0===p_g&&(p_g=0),p_l.prototype.setType.call(this,e,p_g)},b_s.prototype.onRemove=function(){Wbns(this,Laya,LED,l_r)},b_s.prototype.updateScore=function(){var e=LgcM.ins.heroVo.xyDrawScore;this._type==ShopConstant.type_Integral&&(this.i_ticket.text=""+b_p.calsulate(e))},b_s.prototype.updateShopList=function(){var e;if(this._type==ShopConstant.type_Integral)e=ShopModel.instance.getShopDatas(ShopType.INTEGRAL);else{var p_l=this._itemID,p_g=this._type===ShopConstant.type_prop?ShopType.COMMON:ShopType.RANDOM;(e=ShopModel.instance.getShopDatas(p_g)).sort((function(e,p_g){var b_s=Config.shop_shop[e.id]||{itemId:-1},d_u=Config.shop_shop[p_g.id]||{itemId:-1};return b_s.itemId==p_l&&d_u.itemId!=p_l?-1:b_s.itemId!=p_l&&d_u.itemId==p_l?1:b_s.order&&d_u.order&&b_s.order!=d_u.order?b_s.order-d_u.order:e.id-p_g.id}))}this.shopList.array=e},b_s.prototype.updateShow=function(){Wsob(this)},b_s.prototype.updateItem=function(e,p_l){var p_g=!1,b_s=!1;if(this._type===ShopConstant.type_Integral&&(b_s=p_g=!0),e.setItemData(e.dataSource,p_l,p_g),b_s){var d_u=this._itemID,b_e=Config.shop_shop[e.dataSource.id];b_e&&b_e.itemId==d_u&&e.showBtnEffect()}},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.shopList.itemRender=e.ShopItem2,p_g.setType(ShopConstant.type_prop),p_g}e.ShopIntergralView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.shopItem2UI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Qydz(this,Laya)},b_s.prototype.onRemove=function(){Uxlc(this,Laya)},b_s.prototype.setItemData=function(e,p_l,p_g){void 0===p_g&&(p_g=!1),this.btnEft.visible=!1;var b_s=this.titleLab,d_u=this.timeLab;this.buy_red.visible=!1,0===p_l&&0===e.dayNum&&1===e.mustShow&&(this.buy_red.visible=!0);var b_e=this.moneyImg,d_m=this.discount,d_w=this.discountimg,f_t=this.frequency,v_z=this.leftDiv;v_z.style.color=f_t.color,v_z.style.bold=f_t.bold,v_z.style.align=f_t.align,v_z.style.font=f_t.font,v_z.style.fontSize=f_t.fontSize;var d_h=Config.shop_shop[e.id];if(d_h){var r_t=StateModel.instance.getStateLv(),t_n=d_h.price?d_h.price[0][0]:0,f_y=d_h.price?d_h.price[0][1]:0,p_q=new ModuleItemVO,h_h=Math.floor(d_h.discount);p_q.id=d_h.itemId,p_q.bind=1,p_q.amount=d_h.num||1,this.itemBox.isShowName=!1,this.itemBox.isShowNum=!0,this.itemBox.setItemData(p_q,ItemBoxDefine.MODULE_ITEM,!0);var n_j=Config.CItem(t_n);if(n_j)if(n_j.minIcon){var j_l=Resource.ResUrl.getIconUrl(n_j.minIcon);b_e=Resource.ResManager.Instance.getImg(j_l,b_e)}else e.type==ShopConstant.type_godEquip?b_e.skin="res/ui/shop/20.png":b_e.skin="res/ui/shop/17.png";d_u.text=f_y.toString(),0<d_h.discount&&(d_u.color="#3da72c",d_w.visible=!0,d_m.text=String(h_h)+(j_x(1786))),d_h.discount<=0&&(d_u.color="",d_w.visible=!1),this.buyBtn.disabled=d_h.stateLv>r_t&&d_h.lv>this.heroVo.level;var l_m=Config.CItem(d_h.itemId);b_s.text=l_m?l_m.name:"";var z_m,h_b=ShopModel.instance.getShopDatas(1);if(h_b[p_l]&&(0<(h_b[p_l].dayNum||h_b[p_l].weekNum)&&1==e.type?(this.buyBtn.disabled=!0,p_g?(this.buyBtn.disabled=!1,this.buyBtn.visible=!1,this.hasBuyImg.visible=!0):(this.buyBtn.visible=!0,this.hasBuyImg.visible=!1)):(this.buyBtn.disabled=!1,p_g&&(this.buyBtn.disabled=!1),this.buyBtn.visible=!0,this.hasBuyImg.visible=!1)),z_m=t_n<100?b_p.getCoin(t_n):BagModel.instance.getItemCountByItemID(t_n,BagTypeDefine.BAG_TYPE_ITEM),d_u.color=z_m<f_y?"#c92828":"#008931",this.buyBtn.disabled=!0,v_z.visible=!0,d_h.stateLv>r_t){var t_i=Config.state_state[d_h.stateLv];v_z.innerHTML=(j_x("381_843_774")+j_x("1624_1117_1012"))+(t_i?t_i.desc:d_h.stateLv+(j_x(2342)))}else if(d_h.stateLv<=r_t&&d_h.lv>this.heroVo.level)v_z.innerHTML=(j_x("15_2342_774")+j_x("1624_1117_1012"))+d_h.lv+(j_x(2342));else if(d_h.stateLv<=r_t&&d_h.lv<=this.heroVo.level){var n_f=ShopModel.instance.getShopVo(e),t_s=n_f.buyNum,v_n=n_f.numType,b_o=n_f.timeStr;if(t_s<=0&&(e.type==ShopConstant.type_godEquip?v_z.visible=!0:v_z.visible=!1),0==p_g)if(0!==v_n){t_s<0&&(t_s=0);var b_x=t_s.toString();if(t_s||(b_x=Utils.setColor(b_x,Utils.Color.RED)),this.buyBtn.disabled=0===t_s,b_o=b_o+(j_x("1163_1355_2420"))+b_x+(j_x(235)),0<d_h.vipLv){var v_s="VIP"+d_h.vipLv;this.heroVo.vipLv<d_h.vipLv&&(v_s=Utils.setColor(v_s,Utils.Color.RED),this.buyBtn.disabled=!0),b_o=v_s+b_o}v_z.innerHTML=b_o}else v_z.innerHTML="",this.buyBtn.disabled=!1;1==p_g&&(v_z.innerHTML="",this.buyBtn.disabled=!1);var r_c=SyncTime.serverTime/1e3-ShopModel.instance._randTime,b_n=Config.global[GlobalDefine.refresh_rand_shop_cd].i_info-r_c;return 1799<=Math.floor(b_n)?void this.createTween(this,400,100,p_l,p_g):Math.floor(b_n)<1799&&void this.createTween(this,0,0,p_l,p_g)}var v_p=SyncTime.serverTime/1e3-ShopModel.instance._randTime,d_d=Config.global[GlobalDefine.refresh_rand_shop_cd].i_info-v_p;if(1799<=Math.floor(d_d))this.createTween(this,400,100,p_l,p_g);else{if(!(Math.floor(d_d)<1799))return!1;this.createTween(this,0,0,p_l,p_g)}}},b_s.prototype.createTween=function(e,p_l,p_g,b_s,d_u){if(1==d_u){var b_e=0;e.y+=41*b_e,b_e++,e.x=900,p_l*=b_s+1,p_g=p_g*(b_s+1)*.3,Laya.Tween.to(e,{f_u:0},p_l,Laya.Ease.expoInOut,null,p_g)}},Object.defineProperty(b_s.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),b_s.prototype.onbuyClick=function(p_l){this.btnEft.visible=!1;var p_g=this.dataSource;1==p_g.type?(ShopModel.instance.reqShopbuyList(p_g.id,1),ShopModel.instance.reqShopAlreadyList()):e.ShopPopupPanel.open(p_g)},b_s.prototype.showBtnEffect=function(){this.buyBtn.visible&&!this.buyBtn.disabled&&(this.btnEft.visible=!0)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.ShopItem2=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=e.ShopBaseView,__extends(b_s,p_l),b_s.prototype.onAdd=function(){Ypge(LED,l_r,this,Laya)},b_s.prototype.setType=function(e,p_g){void 0===p_g&&(p_g=0),p_l.prototype.setType.call(this,e,p_g)},b_s.prototype.updateView=function(e,p_l){void 0===p_l&&(p_l=0),this.setType(e,p_l),this.changeShow()},b_s.prototype.updateShopList=function(){var e;this._type==ShopConstant.type_Animals&&(e=ShopModel.instance.getShopDatas(ShopType.RARE)),this.shopList.array=e},b_s.prototype.updateScore=function(){var e=LgcM.ins.heroVo.ysScore;this._type==ShopConstant.type_Animals&&(this.score_txt.text=""+b_p.calsulate(e))},b_s.prototype.onRemove=function(){Yksg(this,Laya,LED,l_r)},b_s.prototype.updateShow=function(){Qxag(this)},b_s.prototype.updateItem=function(e,p_l){var p_g=!1,b_s=!1;if(this._type===ShopConstant.type_Black&&(b_s=p_g=!0),e.setItemData(e.dataSource,p_l,p_g),b_s){var d_u=this._itemID,b_e=Config.shop_shop[e.dataSource.id];b_e&&b_e.itemId==d_u&&e.showBtnEffect()}},b_s.prototype.onClickAdd=function(){Eudn(r_f,this)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g._itemid=23,p_g.shopList.itemRender=e.ShopItem2,p_g.setType(ShopConstant.type_Animals),p_g}e.ShopRareAnimalView=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.shop.xiangoulibaoUI,__extends(b_s,p_l),b_s.open=function(e){(e=e||ActivityModel.instance.getActivityConfigVo(FuncDefine.xgbx))?UIM.open(b_s,["shop.atlas","office.atlas","recharge.atlas"],e):b_p.broadcastNotice((j_x("1796_1878_206")+j_x("155_1186")))},b_s.prototype.onRender=function(e,p_l){Ixrd(e,p_l,this)},b_s.prototype.onMouseClick=function(e){var p_l=e.target;switch(p_l.name){case"closeBtn":case"backBtn":b_s.close();break;case"b_buy":var p_g=p_l.dataSource;if(!p_g)return;var d_u=p_g.id,b_e=Config.activity_limitGift_items[d_u],d_m=ActivityModel.instance.getLimitGiftBuy(d_u,p_g.round),d_w=d_m?d_m.num:0;if(LgcM.ins.heroVo.vipLv<b_e.vip)return void b_p.broadcastNotice(Utils.$(("VIP{1}"+j_x("2060_1163_1355")+j_x(2420)),b_e.vip));if(0<b_e.limit&&d_w>=b_e.limit)return void b_p.broadcastNotice((j_x("944_1254_1300")+j_x("814_1355_2420")+j_x("235_2348")));p_g.type==ActivityTypeDefine.BG_limitGift?DB.instance.query(c2w_bgaAct_limitGift_buy,{id:b_e.setId}):p_g.type==ActivityTypeDefine.GS_limitGift&&DB.instance.query(c2w_gsaAct_limitGift_buy,{id:b_e.setId})}},b_s.prototype.onRemoved=function(){Mqjg(Laya,this,LED,l_r)},b_s.prototype.updateView=function(){var e=this.dataSource,p_l=RoundRewardManager.instance.getLocalActivityRewards(this.activityType);this.list.array=p_l,Laya.timer.clear(this,this.updateSulTime),this.updateSulTime(e.sulTime)},b_s.prototype.onAdded=function(){this.on(Laya.UIEvent.CLICK,this,this.onMouseClick),this.on(Laya.Event.REMOVED,this,this.onRemoved),this.off(Laya.Event.ADDED,this,this.onAdded),LED.on(l_r.ACTIVITY_LIMIT_GIFT_UPDATE,this,this.updateView),this.activityType=ActivityTypeDefine.GS_limitGift;var e=ActivityModel.instance.getActivityVoByType(ActivityTypeDefine.GS_limitGift);if(!e){if(!(e=ActivityModel.instance.getActivityVoByType(ActivityTypeDefine.BG_limitGift)))return void b_s.close();this.activityType=ActivityTypeDefine.BG_limitGift}this.dataSource=e,ActivityModel.reqActivityRecord(this.activityType)},b_s.close=function(){Wzsn(UIM,b_s)},b_s.prototype.updateSulTime=function(e){0<e?(this.t_time.text=Utils.formatTimeStr(e),Laya.timer.once(1e3,this,this.updateSulTime,[e-1],!0)):(this.t_time.text="00:00:00",Laya.timer.clear(this,this.updateSulTime))},b_s);function b_s(){var e=p_l.call(this)||this;return e.activityType="",e.on(Laya.Event.ADDED,e,e.onAdded),e.list.vScrollBarSkin="",e.list.itemRender=v_u,e.list.renderHandler=Laya.Handler.create(e,e.onRender,null,!1),e}e.XgbxPanel=p_g}(UI=UI||{});var v_u=function(e){function p_l(){var p_l=e.call(this)||this;return p_l.list.renderHandler=Laya.Handler.create(p_l,p_l.onRender,null,!1),p_l}return __extends(p_l,e),p_l.prototype.onRender=function(e,p_l){Klyo(e,p_l)},p_l.prototype.update=function(e,p_l){var p_g=LgcM.ins.heroVo,b_s=e,d_u=e.id,b_e=ActivityModel.instance.getLimitGiftBuy(d_u,e.round),d_m=b_e?b_e.num:0,d_w=d_m<b_s.limit?b_s.limit-d_m:0;this.t_name.text=b_s.name,this.t_limit.text=(0<b_s.vip?Utils.$("VIP{1}",b_s.vip):"")+(0<b_s.limit?Utils.$((j_x("1163_1355_2420")+j_x("2348_716")+":{1}"),d_w):""),this.t_limit.color=p_g.vipLv>=b_s.vip&&0<d_w?"#00802e":"#b92929",this.b_buy.dataSource={id:d_u,type:p_l.type},this.list.array=b_p.getRewardDatas(b_s.rewards),this.sp_num=b_p.getNumSp(NumType.XIANSHILIBAO,b_s.price,this.sp_num,-4)},p_l}(ui.window.shop.xiangoulibao_cellUI),UI,TeamHelpType;!function(e){var p_l,p_g=(p_l=ui.window.benefit.cum_rewardUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){this.on(Laya.Event.CLICK,this,this.onClick),this.closebtn.on(Laya.Event.CLICK,this,this.close);var e=this.dataSource;this.awardlist.array=b_p.getRewardDatas(Config.sign_signCount[e].reward);var p_l=SigninModel.instance.checkCanGetTotalSigninReward(this.dataSource),p_g=SigninModel.instance.isGettingTotalReward(this.dataSource);p_l?this.canGetAward(this.dataSource):p_g?this.alreadyGetAward(this.dataSource):this.dayNumIsNotEnough(this.dataSource)},b_s.prototype.alreadyGetAward=function(e){Kcmj(e,this,j_x)},b_s.prototype.onRemove=function(){Quhw(this,Laya)},b_s.prototype.canGetAward=function(e){Yvnq(e,this,j_x)},b_s.prototype.setItemDataAward=function(e,p_l){e&&(e.setItemData(e.dataSource),e.isShowTick=e.isShowRightTick=!1)},b_s.prototype.dayNumIsNotEnough=function(e){Iawy(e,this,j_x)},b_s.prototype.onClick=function(e){switch(this.onAdded(),e.target.name){case"yellowbtn":SigninModel.instance.reqTotalSigninAward(this.dataSource),this.close();break;case"bluebtn":this.gray?this.disabled=!0:(this.disabled=!1,this.close())}},b_s.open=function(e){Atdq(e,UIM,b_s)},b_s.prototype.close=function(){Caeu(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.awardlist.renderHandler=Laya.Handler.create(e,e.setItemDataAward,null,!1),e}e.CumAwardTip=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.benefit.signinItemUI,__extends(b_s,p_l),b_s.prototype.setSigninItem=function(e){var p_l=e+1;this.day.text=(j_x(573))+p_l+(j_x(2308));var p_g=new ModuleItemVO;p_g.id=Config.sign_sign[e+1].reward[0][0],p_g.amount=Config.sign_sign[e+1].reward[0][1],this.item.setItemData(p_g,ItemBoxDefine.MODULE_ITEM),this.item.nameTxt.visible=!1,this.signinStateImg.visible=!1;var b_s=SigninModel.instance.getSigninDay(),d_u=SigninModel.instance.checkSignin(p_l);this.item.alpha=1;var b_e="res/ui/benefit/";b_s==p_l&&(this.signinStateImg.visible=d_u,this.signinStateImg.skin=d_u?b_e+"is_signin_icon.png":"",this.i_mask.visible=d_u,this.item.alpha=d_u?.5:1,this.item.mouseEnabled=d_u,this.redImg.visible=!d_u,1==this.passDayNum&&(LED.event(l_r.ALREADY_FIFTEEN_DAY),this.passDayNum=0)),b_s<p_l&&(this.i_mask.visible=!1,this.signinStateImg.visible=!1,this.item.mouseEnabled=!0,this.redImg.visible=!1),p_l<b_s&&(this.signinStateImg.visible=!0,this.signinStateImg.skin=d_u?b_e+"is_signin_icon.png":b_e+"can_signin_icon.png",this.i_mask.visible=d_u,this.item.alpha=.5,this.item.mouseEnabled=d_u,this.redImg.visible=!1)},b_s);function b_s(){return p_l.call(this)||this}e.SigninItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.benefit.signinUI,__extends(b_s,p_l),b_s.prototype.init=function(){Ocsd(this,e,SigninModel,Laya)},b_s.prototype.onGetSigninRewardSeccess=function(e){},b_s.prototype.onAdded=function(){Uehk(this,Laya,LED,l_r,SigninModel)},b_s.close=function(){Mrnb(e)},b_s.prototype.onRemove=function(){Abel(this,Laya,LED,l_r)},b_s.prototype.onSigninSeccess=function(e){var p_l=e.day,p_g=new Laya.Point;p_g=this.dailyList.getCell(p_l-1).localToGlobal(p_g);var b_s=Config.sign_sign[p_l].reward[0][0];if(b_s==ItemType.gold||b_s==ItemType.money){var d_u=void 0,b_e=UIM.instance.getMainUI();b_s==ItemType.gold&&(d_u=b_e.goldTxt),b_s==ItemType.money&&(d_u=b_e.copperTxt);var d_m=new Laya.Point;d_m=d_u.localToGlobal(d_m),r_n.instance.obtainAssetEffect(b_s,p_g,d_m)}else{p_g.x=p_g.x+22,p_g.y=p_g.y+40,UIM.instance.getMainUI();var d_w=UIM.instance.getMainLetUI().bagbtn;if(d_m=new Laya.Point,d_m=d_w.localToGlobal(d_m),Config.item_material[b_s]){var f_t=Config.item_material[b_s].icon;r_n.instance.flyToBagEffect(f_t,p_g,d_m,null)}Config.item_coin[b_s]&&(f_t=Config.item_coin[b_s].icon,r_n.instance.flyToBagEffect(f_t,p_g,d_m,null))}},b_s.prototype.onRenderExtraList=function(e,p_l){Qsvi(e,p_l)},b_s.prototype.onExtraList=function(p_l,p_g){if(p_l.type==Laya.Event.CLICK){var b_s=SigninModel.instance.getTotalSigninData()[p_g].id;SigninModel.instance.checkCanGetTotalSigninReward(b_s),e.CumAwardTip.open(b_s)}},b_s.prototype.onClose=function(){Crzr(b_s)},b_s.prototype.onSelectDailyList=function(e,p_l){if(e.type==Laya.Event.CLICK){var p_g=p_l+1;if(SigninModel.instance.checkSignin(p_g))return;var b_s=SigninModel.instance.getSigninDay();if(b_s<p_g)return;if(b_s==p_g)SigninModel.instance.reqSigninOrRetroactive(p_g,SigninType.Signin);else{if(SigninModel.instance.checkSigninItemIsEnough(p_g)){var d_u=function(){Qyog(SigninModel,p_g,SigninType)},b_e=(j_x("944_235_579")+j_x("453_1661_1502"))+Config.sign_sign[p_g].itemSign[0][1]+(j_x("844_579_453")+j_x(1724)+""+j_x("68_2032_579")+j_x(453)+"?");return void b_p.confirm(b_e,d_u)}if(SigninModel.instance.checkSigninMoneyIsEnough(p_g))return d_u=function(){Yxsu(SigninModel,p_g,SigninType)},b_e=(j_x("944_235_579")+j_x("453_1661_1502"))+Config.sign_sign[p_g].moneySign[0][1]+(j_x("1263_869")+""+j_x("68_2032_579")+j_x(453)+"?"),void b_p.confirm(b_e,d_u);b_p.broadcastError(ErrorDefine.goldNotEnough)}}},b_s.prototype.updateView=function(){var e=Config.sign_sign[1].itemSign[0][0],p_l=BagModel.instance.getItemById(BagTypeDefine.BAG_TYPE_ITEM,e),p_g=SigninModel.instance.getSigninDays().length;this.numTxt.text=p_l?""+p_l.amount:"0",this.signinNumTxt.text=""+p_g,this.hbox.refresh(),this.extraList.array=SigninModel.instance.getTotalSigninData(),this.dailyList.array=SigninModel.instance.getSigninConfigData(),SigninModel.instance.getTotalSigninRewardDays().length,this.accumulate_pro.value=p_g<=5?0:(p_g-5)/10},b_s.open=function(){Uqnf(e,BenefitType)},b_s.prototype.onRenderDailyList=function(e,p_l){Uphb(e,p_l)},b_s.prototype.onActiveMonthCard=function(){},b_s.prototype.resetView=function(){Ezzm(SigninModel,this)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e}e.SigninPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.benefit.signinTotalAwardItemUI,__extends(b_s,p_l),b_s.prototype.setSigninTotalAwardItem=function(e){var p_l=SigninModel.instance.getTotalSigninData(),p_g=e+1;this.itemBox.skin="res/ui/benefit/box_"+p_g+".png",this.totalDayLabel.text=(j_x("1874_867_453")+j_x(1012))+p_l[e].id+(j_x(2308));var b_s=p_l[e].id,d_u=SigninModel.instance.isGettingTotalReward(b_s);this.isGetImg.visible=d_u;var b_e=SigninModel.instance.checkCanGetTotalSigninReward(p_l[e].id);this.redImg.visible=b_e},b_s);function b_s(){return p_l.call(this)||this}e.SigninTotalAwardItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.skill.skillHookUI,__extends(d_u,p_l),d_u.prototype.init=function(){Isfz(this,e,p_g)},d_u.prototype.onMouseMove=function(e){Emaw(e,this)},d_u.prototype.removeImg=function(){this._moveImg&&this._moveImg.parent&&(this._moveImg.parent.removeChild(this._moveImg),this._moveImg.destroy(!0)),this._moveImg=null},d_u.prototype.imgMoveTo=function(){this._moveImg&&this._moveImg.parent&&(this._moveImg.x=Laya.stage.mouseX-this._moveImg.texture.width/2,this._moveImg.y=Laya.stage.mouseY-this._moveImg.texture.height/2)},d_u.prototype.onRemove=function(){Qljj(this,Laya,LED,l_r)},d_u.prototype.onAdded=function(){Ikja(this,Laya,LED,l_r)},d_u.prototype.updateView=function(){Yako(this,SkillModel,SkillTypeDefine)},d_u.open=function(){Mmvr(UIM,d_u)},d_u.prototype.updateItem=function(e,p_l,p_g){if(p_l){p_l.isShowNum=!1,p_l.isRunCD=!1;var b_s=p_l.dataSource;"object"==z_c(p_l.dataSource)&&(b_s=p_l.dataSource.id);var d_u=Config.skill_skill[b_s];if(e===this.list){for(var b_e=!1,d_m=0,d_w=SkillModel.instance.hookSkillList;d_m<d_w.length;d_m++)if(d_w[d_m]===b_s){b_e=!0;break}p_l.isShowRightTick=b_e}p_l.setItemData(d_u,ItemBoxDefine.SKILL_CONFIG,!1),p_l.setName(d_u?d_u.name:"","#d2ebef",!1)}},d_u.prototype.onMouseDown=function(e){var p_l=e.target;if(p_l&&""!=p_l.name&&null!=p_l.dataSource&&(this.list.contains(p_l)||this.hookList.contains(p_l))){var p_g=p_l.icon;p_g&&p_g.visible?(this._moveImg=Resource.ResManager.Instance.getImg(p_g.texture.url,this._moveImg),this._moveImg.dataSource=p_l.dataSource,Laya.stage.addChild(this._moveImg),this.imgMoveTo()):this.removeImg()}},d_u.prototype.onMouseUp=function(e){var p_l=e.target;switch(p_l.name){case"closeBtn":case"backBtn":this._moveImg&&this._moveImg.parent||d_u.close()}var p_g=p_l;if(p_g&&""!=p_g.name&&this._moveImg&&this._moveImg.parent&&this.hookList.contains(p_g)){var b_s=this._moveImg.dataSource;if("object"==z_c(this._moveImg.dataSource)&&(b_s=this._moveImg.dataSource.id),0<b_s){var b_e=p_g.parent.getChildIndex(p_g)+1;SkillModel.instance.reqSwapPrio(b_s,b_e)}}this.removeImg()},d_u.close=function(){Qfwz(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.init(),e}e.SkillHookPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.skill.skillUI,__extends(d_u,p_l),Object.defineProperty(d_u.prototype,"logicEvent",{get:function(){return[l_r.SKILL_LIST_UPDATE,this.onSkillListUpdate,l_r.SKILL_INFO_UPDATE,this.onSkillInfoUpdate,l_r.STATE_INFO_UPDATE,this.stateRedPoint,l_r.STATE_TIMESLIST_CHANGE,this.stateRedPoint,l_r.BODY_INFO_UPDATE,this.stateRedPoint,l_r.BODY_CUL_INFO_UPDATE,this.stateRedPoint,l_r.BODY_LEVEL_UP_INFO_UPDATE,this.stateRedPoint,l_r.BODY_SUB_LEVEL_UP_INFO_UPDATE,this.stateRedPoint,l_r.SKILL_DAZHAO_CHANGE,this.onDazhaoSkillUpdate,l_r.HERO_SKILL_EXP_CHANGE,this.onSkillExpChange,l_r.SYSTEM_NOTICE_IFNO,this.onSysOpen,l_r.UPDATE_CITTA_INFO,this.uodateCittaRed,l_r.UPDATE_CITTARED_INFO,this.uodateCittaRed,l_r.ITEM_ADD,this.onItemChange,l_r.ITEM_REMOVE,this.onItemChange,l_r.ITEM_AMOUNT_CHANGE,this.onItemChange,l_r.DRAGON_ONE_INFO_UPDATE,this.dragonRedPoint]},enumerable:!0,configurable:!0}),Object.defineProperty(d_u.prototype,"nodeEvent",{get:function(){return[this._skillTab,"tabSelect",this.onTabSelect,this._passTab,"tabSelect",this.onPassTabSelect,this,Laya.Event.CLICK,this.onMouseClick,this.oneKeyBtn,Laya.Event.MOUSE_DOWN,this.onOneKeyBtnMD]},enumerable:!0,configurable:!0}),d_u.prototype.init=function(){this.list.hScrollBarSkin="",this.list.selectEnable=!0,this.list.scrollBar.elasticDistance=200,this.list.scrollBar.elasticBackTime=600,this.list.itemRender=e.ItemBox,this.list.repeatX=5,this.list.repeatY=1,this.bigSkillList.itemRender=e.ItemBox,this.bigSkillList.repeatX=5,this.bigSkillList.repeatY=1,this.aPassiveList.itemRender=e.ItemBox,this.aPassiveList.repeatX=3,this.aPassiveList.repeatY=1,this.list.selectEnable=this.bigSkillList.selectEnable=!0,this.bigSkillList.hScrollBarSkin="",this.list.selectHandler=p_g.create(this,this.onListSelect,[this.list],!1),this.bigSkillList.selectHandler=p_g.create(this,this.onListSelect,[this.bigSkillList],!1),this.list.renderHandler=p_g.create(this,this.updateItem,[this.list],!1),this.bigSkillList.renderHandler=p_g.create(this,this.updateItem,[this.bigSkillList],!1),this.aPassiveList.renderHandler=p_g.create(this,this.updateItem,[this.aPassiveList],!1),this.passiveList.renderHandler=p_g.create(this,this.updateItem,[this.passiveList],!1),this._skillTab=new p_c(this.skillTab),this._passTab=new p_c(this.passTab),this.skillTab.selectedIndex=-1,this.redPoint_onekey.visible=!1},d_u.prototype.onItemChange=function(e){Gawj(e,this)},d_u.prototype.updateOneKeyCostInfo=function(){var e=SkillModel.instance.getOneKyeCost(),p_l=e.cost,p_g=e.upLst;this._upLst=p_g;var b_s=b_p.getCoin(CoinDefine.SKILL_EXP);if(p_l<=0){var d_u=SkillModel.instance.activeList;this.oneKeyBtn.disabled=!0,d_u&&0!==d_u.length?this.oneKeyCostTxt.text=Utils.$("0/{1}",b_p.calsulate(b_s)):this.oneKeyCostTxt.text=Utils.$((j_x("206_2335_1796")+"/{1}"),b_p.calsulate(b_s))}else this.oneKeyBtn.disabled=!1,this.oneKeyCostTxt.text=Utils.$("{1}/{2}",p_l.toString(),b_p.calsulate(b_s)),this.oneKeyCostTxt.color=this.checkCostEnough(p_l)?this.strLab.color:"#9f4543";this.oneKeyBtn.dataSource={cost:p_l},this.updateRedPoint()},d_u.prototype.onAdded=function(){this.onSysOpen(),this.onSkillListUpdate(),this.stateRedPoint(),this.dragonRedPoint();var e=this.dataSource&&this.dataSource.index||0;this.skillTab.selectedIndex=e,this.onTabSelect(e,e),Laya.timer.once(1e3,this,this.uodateCittaRed)},d_u.prototype.onTabClick=function(){Iewe(this)},d_u.prototype.dragonRedPoint=function(){Okwx(this,b_l)},d_u.prototype.onSysOpen=function(){Yrip(SystemNoticeManager,this,e)},d_u.prototype.updateCostInfo=function(e,p_l){var p_g,b_s=Config.skill_skill[e],d_u=0;p_l?(d_u=SkillModel.instance.getUpCostNum(p_l.id,p_l.level))<0?p_g=(j_x("1300_1463_2342")):SkillModel.instance.canLvUp(p_l.id,p_l.level)||(p_g=Config.state_state[StateModel.instance.getStateLv()].lmtDesc):p_g=b_s.conditionDec,this.upBox.visible=!p_g,this.lmtLab.text=p_g||"",this.costTxt.text=d_u.toString();var b_e=this.checkCostEnough(d_u);this.costTxt.color=b_e?this.strLab.color:"#9f4543",this.upBtn.dataSource={cost:d_u},this.redPoint_up.visible=b_e},d_u.prototype.oneKeyBtnClick=function(){var e=this.oneKeyBtn.dataSource.cost;this.checkCostEnough(e)?SkillModel.instance.reqOneKeyLvUp(this._upLst):(LongPushUtil.inst.clearLoopPush(),r_f.instance.isWindow(CoinDefine.SKILL_EXP))},d_u.prototype.checkCostEnough=function(e,p_l){if(void 0===p_l&&(p_l=!1),p_l){if(0==e)return console.log(Utils.$((j_x("206_2335_1796")))),!1;if(e<0)return console.log(Utils.$((j_x("1300_1463_2342")))),!1}else if(e<0)return console.log(Utils.$((j_x("1300_1463_2342")))),!1;return b_p.checkCoin(CoinDefine.SKILL_EXP,e)},d_u.prototype.updateCostLab=function(){var e=this._lastIndex<this.list.array.length?this.list.selectedItem:this.bigSkillList.selectedItem;if(e){var p_l=SkillModel.instance.getSkillVo(e.id);this.updateCostInfo(e.id,p_l),this.updateOneKeyCostInfo()}},d_u.prototype.onDazhaoSkillUpdate=function(){if(this.bigSkillList.array=SkillModel.instance.getActiveSkills(SkillTypeDefine.JUEXUE),this.list.selectedIndex<0&&this.list.array){var e=this._lastIndex-this.list.array.length;this.bigSkillList.selectedIndex==e?this.updateActDescInfo(this.bigSkillList.selectedItem):this.bigSkillList.selectedIndex=e}else this.bigSkillList.selectedIndex=-1;this.autoCheckBox.selected=SkillModel.instance.isDazhaoAutoUse,this.updateRedPoint()},d_u.prototype.setCellSelected=function(e){if(-1!=e){var p_l,p_g=this._lastIndex-this.list.array.length;(p_l=0<=p_g?this.bigSkillList.getCell(p_g):this.list.getCell(this._lastIndex))&&(p_l.selectImg.visible=!0)}},d_u.prototype.onListSelect=function(e,p_l){p_l<0||(this.list==e?(this.updateActDescInfo(this.list.selectedItem),this._lastIndex=p_l,-1!=this.bigSkillList.selectedIndex&&(this.bigSkillList.selectedIndex=-1)):this.bigSkillList==e&&(this._lastIndex=this.list.array.length+p_l,this.updateActDescInfo(this.bigSkillList.selectedItem),-1!=this.list.selectedIndex&&(this.list.selectedIndex=-1)))},d_u.prototype.updateView=function(){Oyij(this)},d_u.open=function(e,p_l){void 0===e&&(e=0),void 0===p_l&&(p_l=!1),UIM.open(d_u,["skill.atlas","state.atlas","dragon.atlas"],{index:e},p_l)},d_u.prototype.updateItem=function(e,p_l,p_g){if(p_l){if(p_l.setGray(!1),p_l.y=25,e==this.list||e==this.bigSkillList||e==this.aPassiveList){if((t_n=p_l).isRunCD=!1,e==this.list&&(t_n.isUseGlow=!0),t_n.setItemData(p_l.dataSource,ItemBoxDefine.SKILL_CONFIG,e===this.aPassiveList),e===this.bigSkillList){var b_s=p_l.dataSource.id;t_n.isGray()||b_s===SkillModel.instance.dazhaoId?t_n.clearQualityEffect():t_n.setQuality(6)}return}var d_u=p_l.dataSource;if(e==this.passiveList){var b_e=p_l.getChildByName("nameTxt"),d_m=p_l.getChildByName("descTxt");d_m&&(d_m.text=d_u.desc),b_e.text=d_u.name;var d_w=p_l.getChildByName("wayTxt"),f_t=p_l.getChildByName("wayItemTxt"),v_z=p_l.getChildByName("wayItemTxt1"),d_h=p_l.getChildByName("actPassBtn"),r_t=SkillModel.instance.getPassiveVo(d_u.id,PassiveSkillType.ROLE);d_w.visible=f_t.visible=v_z.visible=d_h.visible=!1;var t_n,f_y=p_l.getChildByName("bg");if(f_y.index=r_t?0:1,f_y.alpha=r_t?1:.6,(t_n=p_l.getChildByName("itemBox")).isShowName=!1,t_n.isShowNum=!1,t_n.isShowTick=!1,t_n.setItemData(d_u,ItemBoxDefine.SKILL_CONFIG),t_n.setGray(!r_t),!r_t){var p_q=SkillModel.instance.checkCanActivePassiveSkill(d_u.id),h_h=SkillModel.instance.getActPassSkillCond(d_u.id);d_h.visible=2==d_u.activeType&&p_q;var n_j=(j_x("2335_1796_1320")+j_x(1283)+": "),j_l=0;if(0!==h_h[0]&&(n_j+=Utils.$((j_x("15_2342_1012")+j_x(1117)+"{1}"+j_x(2342)+"   "),Math.abs(h_h[0])),j_l++),0!==h_h[1]&&(n_j+=Utils.$((j_x("1863_360_413")+j_x("764_1012_1117")+"{1}"+j_x(413)+"   "),Math.abs(h_h[1])),j_l++),d_w.visible=!0,d_w.text=0<j_l?n_j:"",0!==h_h[2]&&0!==h_h[3]){v_z.visible=f_t.visible=!0,v_z.color=0==j_l&&p_q||b_p.checkConsume(d_u.consume)?"#2c77bd":"#ff0000";var l_m=Config.CItem(h_h[2]);v_z.text=l_m.name+"*"+Math.abs(h_h[3])}}}}},d_u.prototype.onSkillListUpdate=function(){if(this.skillBox.visible){var e=SkillModel.instance.getActiveSkills(SkillTypeDefine.COMMON);this.list.array=e,this._lastIndex>=e.length?this.list.selectedIndex=-1:this.list.selectedIndex=-1==this._lastIndex?0:this._lastIndex,this.onDazhaoSkillUpdate(),this.updateOneKeyCostInfo(),this._lastIndex-this.list.array.length<0?this.updateActDescInfo(this.list.selectedItem):this.updateActDescInfo(this.bigSkillList.selectedItem)}else this.passiveList.array=SkillModel.instance.getRolePassiveSkills(this.passTab.selectedIndex+1),this.updateRedPoint()},d_u.prototype.cancelCellSelected=function(e){if(-1!=e){var p_l,p_g=this._lastIndex-this.list.array.length;(p_l=0<=p_g?this.bigSkillList.getCell(p_g):this.list.getCell(this._lastIndex))&&(p_l.selectImg.visible=!1)}},d_u.prototype.onSkillExpChange=function(){Umpp(this)},d_u.prototype.onRemove=function(){this._lastIndex=-1,this.list.selectedIndex=-1,this.bigSkillList.selectedIndex=-1,this._statePanel&&this._statePanel.parent&&this._statePanel.removeSelf(),this._dragonPanel&&this._dragonPanel.parent&&this._dragonPanel.removeSelf(),this.limiccitta&&this.limiccitta.removeListener()},d_u.prototype.onTabSelect=function(p_l,p_g){if(-1!=p_l){p_g<0&&(p_g=0),this.skillBox.visible=1===p_l,this.passBox.visible=!1,this.bgImg.visible=2!==p_l,this.nameImg.visible=2!==p_l,this.limiccitta.visible=2===p_l,this._statePanel&&this._statePanel.parent&&this._statePanel.removeSelf(),this._dragonPanel&&this._dragonPanel.parent&&this._dragonPanel.removeSelf();var b_s=this.limiccitta;switch(p_l){case 1:this.onSkillListUpdate();break;case 2:if(!p_k.instance.checkSystemOpen(FuncDefine.citta))return this.skillTab.selectedIndex=p_g,void b_p.broadcastNotice(Config.funcOpen[FuncDefine.citta].openError);this.uodateCittaRed(),b_s.setDateSour(),b_s.updateInfo(),this.limiccitta.visible=!0,this.limiccitta.addListener();break;case 0:this._statePanel||(this._statePanel=new e.StatePanel),this.addChildAt(this._statePanel,2),this.uodateCittaRed(),this.limiccitta.visible=!1,this.limiccitta.removeListener();break;case 3:if(!p_k.instance.checkSystemOpen(FuncDefine.dragonPanel))return this.skillTab.selectedIndex=p_g,void b_p.broadcastNotice(Config.funcOpen[FuncDefine.dragonPanel].openError);this._dragonPanel||(this._dragonPanel=new e.DragonFosterMainPanel),this.addChildAt(this._dragonPanel,3),this.limiccitta.visible=!1,this.limiccitta.removeListener();break;default:this.passBox.visible&&(this.passTab.selectedIndex=0,this.onSkillListUpdate())}}},d_u.prototype.playOneEft=function(p_l){p_l&&(this._effPlayOpts||(this._effPlayOpts={clipUrl:"res/ui/common/Clip_shanguang_eft.png",clipX:3,clipY:2,interval:83}),e.EffectPlayer.playOnce(p_l,"effsClip",this._effPlayOpts,null,{f_u:200,j_l:200}))},d_u.prototype.stateRedPoint=function(){Iecw(this,StateModel,bodyModel)},d_u.prototype.updateRedPoint=function(){var e=this.oneKeyBtn.dataSource?this.oneKeyBtn.dataSource.cost:0,p_l=0<e&&this.checkCostEnough(e),p_g=SkillModel.instance.getActiveSkills(SkillTypeDefine.JUEXUE);if(p_g&&0<p_g.length){var b_s=p_g[0].id;SkillModel.instance.getSkillVo(b_s)&&SkillModel.instance.isDazhaoActive(b_s)}this.redPoint_1.visible=p_l},d_u.prototype.uodateCittaRed=function(){Kygk(this,CittaModule)},d_u.prototype.onMouseClick=function(p_l){var p_g=p_l.target;switch(p_g.name){case"closeBtn":case"backBtn":d_u.close();break;case"upBtn":var b_s=this.upBtn.dataSource.cost;if(this.checkCostEnough(b_s)){var b_e=-1<this.list.selectedIndex?this.list.selectedItem:this.bigSkillList.selectedItem;b_e&&SkillModel.instance.reqLvUp(b_e.id)}else r_f.instance.isWindow(CoinDefine.SKILL_EXP);break;case"oneKeyBtn":this.oneKeyBtnClick();break;case"hookBtn":e.SkillHookPanel.open();break;case"autoCheckBox":SkillModel.instance.reqDazhaoChange(-1,this.autoCheckBox.selected?1:0);break;case"activeBtn":var d_m=this.bigSkillList.selectedItem.id;SkillModel.instance.reqDazhaoChange(d_m,this.autoCheckBox.selected?1:0);break;case"actPassBtn":var d_w=p_g.parent.dataSource.id;SkillModel.instance.reqActPass(d_w);break;case"blackkingBtn":e.BlackKingPanel.open(),d_u.close();break;default:"notOpen"===p_g.parent.name&&b_p.broadcastNotOpen()}},d_u.prototype.destroy=function(e){Gnaq(e,p_l,this)},d_u.prototype.onOneKeyBtnMD=function(){var e=this;console.log((j_x("376_949_932")+j_x("1835_2379_242"))),LongPushUtil.inst.bingLongPushBtn(this,(function(){e.oneKeyBtnClick()}))},d_u.prototype.updateActDescInfo=function(e){if(e&&e.hasOwnProperty("id")){var p_l=e.id,p_g=SkillModel.instance.getSkillVo(p_l),b_s=Config.skill_skill[p_l];this.lvTxt.text=p_g?p_g.level.toString():"1",this.nameTxt.text=b_s.name,this.aPassiveList.array=SkillModel.instance.getActPassiveSkills(p_l),this.breakTxt.visible=this.aPassiveList.array&&0<this.aPassiveList.array.length,this.descTxt.text="",this.descDiv.style.font=b_p.config.font,this.descDiv.style.fontSize=this.descTxt.fontSize,this.descDiv.style.align=this.descTxt.align,this.descDiv.style.valign=this.descTxt.valign,this.descDiv.style.bold=this.descTxt.bold,this.descDiv.style.color=this.descTxt.color,this.descDiv.style.leading=this.descTxt.leading,this.descDiv.style.stroke=this.descTxt.stroke,this.descDiv.style.strokeColor=this.descTxt.strokeColor,this.descDiv.innerHTML=SkillModel.instance.getSkillDesc(p_l,p_g?p_g.level:1),this.autoCheckBox.visible=this.activeBtn.visible=!1,this.redPoint_btn.visible=!1,SkillModel.instance.isDazhaoActive(e.id)?(this.activeBtn.disabled=!0,this.activeBtn.label=(j_x("1300_1009_1968")),this.autoCheckBox.visible=this.activeBtn.visible=!0):b_s.type==SkillTypeDefine.JUEXUE&&(this.activeBtn.label=(j_x("1009_1968")),this.activeBtn.disabled=!p_g,p_g&&(this.autoCheckBox.visible=this.activeBtn.visible=!0)),this.updateCostInfo(p_l,p_g)}},d_u.prototype.onSkillInfoUpdate=function(e,p_l,p_g){if(this.skillBox.visible){if((p_g||0)<p_l){Resource.SoundManager.instance.playSoundById(11,!1);for(var b_s=void 0,d_u=0;d_u<this.list.array.length;++d_u)if(this.list.array[d_u].id===e){(b_s=this.list.getCell(d_u)).playNumMoveEft(p_l-p_g);break}if(!b_s)for(d_u=0;d_u<this.bigSkillList.array.length;++d_u)if(this.bigSkillList.array[d_u].id===e){b_s=this.bigSkillList.getCell(d_u);break}this.playOneEft(b_s)}}else if(this.passBox.visible&&(p_g||0)<p_l){for(b_s=void 0,Resource.SoundManager.instance.playSoundById(11,!1),d_u=0;d_u<this.passiveList.array.length;++d_u)if(this.passiveList.array[d_u].id===e){b_s=(b_s=this.passiveList.getCell(d_u)).getChildByName("itemBox");break}this.playOneEft(b_s)}},d_u.prototype.onPassTabSelect=function(e){Opdb(e,this)},d_u.close=function(){Gwev(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e._lastIndex=0,e._upLst=null,e._effPlayOpts=null,e.init(),LED.are(e,e.onAdded,e.onRemove,e.logicEvent,e.nodeEvent),e}e.SkillPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.skill.skill_testUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Uknn(LED,l_r,this)},b_s.prototype.updateView=function(){Snvm(this,SkillModel,SkillTypeDefine)},b_s.prototype.onRemove=function(){Wuiv(LED,l_r,this)},b_s.prototype.updateDaZhaoSkill=function(){Mpbt(this,SkillModel,SkillTypeDefine)},b_s.prototype.updateItem=function(e,p_l){Gnvq(e,p_l,Config,ItemBoxDefine)},b_s);function b_s(){var e=p_l.call(this)||this;return e.list.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.dazhaolist.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.Skill_test=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.stateAdvanceRewardUI,__extends(d_u,p_l),d_u.prototype.Init=function(){Yvlv(this,Laya,e,p_g)},d_u.prototype.UpdateView=function(){var e=StateModel.instance.getStateLv(),p_l=StateModel.instance.getStateSubLv(),p_g=Config.state_stateSub[StateModel.instance.getSubConfId(e,p_l)];this.curentPeriod.text=Config.state_state[e].desc+""+p_g.desc,6<=p_l?(e++,p_l=1):p_l++;var b_s=Config.state_stateSub[StateModel.instance.getSubConfId(e,p_l)];if(null==b_s){this.CanUP.visible=!1,this.Uptiptop.visible=!0,this.nextPeriod.text="",this.RewardList.visible=!1;for(var d_u=0;d_u<4;d_u++){var b_e=this.next.getChildByName("item"+(d_u+1));b_e&&(b_e.text="")}}else{StateModel.instance.getStateLv(),this.nextTitle.text=p_g.rewardDesc,this.nextPeriod.text=Config.state_state[e].desc+""+b_s.desc,this.UpdateBox(this.next,StateModel.instance.ConnectProp(b_s.attr,1)),this.CanUP.visible=!0,this.Uptiptop.visible=!1;var d_m=p_g.showItem;this.RewardList.visible=!0,d_m&&0<d_m.length?(this.RewardList.array=d_m,this.RewardList.x=(this.width-100*d_m.length)/2):this.RewardList.visible=!1}this.UpdateBox(this.curent,StateModel.instance.ConnectProp(p_g.attr,1))},d_u.prototype.onRemove=function(){Yerk(this,Laya)},d_u.prototype.RenderRewardList=function(e,p_l){var p_g=new ModuleItemVO;p_g.id=e.dataSource[0],p_g.amount=e.dataSource[1],e.setItemData(p_g)},d_u.open=function(){Msvx(UIM,d_u)},d_u.prototype.onclick=function(e){switch(e.target.name){case"backBtn":d_u.close()}},d_u.close=function(){Ujqz(UIM,d_u)},d_u.prototype.onAdd=function(){Ulfd(this,Laya)},d_u.prototype.UpdateBox=function(e,p_l){if(e&&!(p_l.length<=0))for(var p_g=0;p_g<p_l.length;p_g++){var b_s=e.getChildByName("item"+(p_g+1));b_s&&(b_s.text=p_l[p_g])}},d_u);function d_u(){var e=p_l.call(this)||this;return e.Init(),e}e.stateAdvanceReward=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.stateChooseUI,__extends(b_s,p_l),b_s.open=function(e){UIM.open(b_s,["fbCommon.atlas"],e,!1,!1,!1,!1,{container:"win"})},b_s.prototype.onClick=function(e){var p_l=e.target;switch(p_l.name){case"btn":DB.instance.query(c2m_state_fb_choose,{idx:p_l.dataSource.idx});var p_g=Config.fb_state_choose[p_l.dataSource.id];b_p.broadcastNotice(p_g.desc,BroadcastType.ERROR,Utils.Color.NAME_GREEN);case"closeBtn":b_s.close()}},b_s.prototype.onAdded=function(){Kadq(this,Laya)},b_s.close=function(){Wrth(UIM,b_s)},b_s.prototype.onRemoved=function(){Ymfw(this,Laya)},b_s.prototype.updateView=function(){var e=this.dataSource,p_l=Config.fb_state_choose_question[e.chooseQuestionId];this.t_desc.text=p_l.desc;var p_g=p_l.chooseId||[],b_s=1;for(var d_u in p_g){var b_e=this["btn"+d_u];b_e.dataSource={idx:b_s++,id:p_g[d_u]},b_e.label=p_l.chooseTxt[d_u]}this.onCountDown(p_l.time)},b_s.prototype.onCountDown=function(e){Laya.timer.clear(this,this.onCountDown),0<=e?(this.t_countDown.text=e+(j_x(2081)),Laya.timer.once(1e3,this,this.onCountDown,[e-1])):b_s.close()},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e}e.StateChoosePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.stateDetailUI,__extends(d_u,p_l),d_u.open=function(){Qmam(UIM,d_u)},d_u.prototype.onRemove=function(){Koyd(Laya,this)},d_u.prototype.updateView=function(){var e=StateModel.instance.getStateLv(),p_l=StateModel.instance.getStateSubLv(),p_g=StateModel.instance.getSubConfId(e,p_l),b_s=Config.state_state[e],d_u=Config.state_stateSub[p_g];if(null!=b_s&&null!=d_u){var b_e=CharacterProperty.getPropertys(b_s.attr),d_m=CharacterProperty.getPropertys(d_u.attr);CharacterProperty.mergePropertys(b_e,d_m),this.proList.array=b_e}this.pos((this.stage.width-this.width)/2,200);var d_w=StateModel.instance.calFighting();b_p.getNumSp(NumType.FIGHTING,d_w,this.combatSp,-6)},d_u.prototype.onStageClick=function(e){e&&e.target==this||d_u.close()},d_u.prototype.delayAddListener=function(){Mamg(Laya,this)},d_u.prototype.onAdded=function(){Mcpf(Laya,this)},d_u.close=function(){Wpwo(UIM,d_u)},d_u.prototype.updateProItem=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("proNameLab"),d_u=e.getChildByName("proValueLab");b_s.text=d_v.getDesc(p_g.propOrdinal),d_u.text=p_g.value.toString()},d_u);function d_u(){var e=p_l.call(this)||this;return e.mouseEnabled=!0,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.proList.renderHandler=p_g.create(e,e.updateProItem,[],!1),e}e.StateDetailPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.stateMaxTipUI,__extends(b_s,p_l),b_s.open=function(){UIM.open(b_s,null,null,!1,!1,!0,!0,{container:"win"})},b_s.prototype.onAdded=function(){Gjth(this,Laya)},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":b_s.close()}},b_s.prototype.onRemoved=function(){Kskt(this,Laya)},b_s.close=function(){Ikdc(UIM,b_s)},b_s.prototype.updateView=function(){Gwen(Config,StateModel,this)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.panel.vScrollBarSkin="",e}e.StateMaxTipPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.stateUI,__extends(b_s,p_l),b_s.open=function(){Srur(e)},b_s.prototype.onRemove=function(){this.off(Laya.Event.CLICK,this,this.onMouseClick),LED.off(l_r.STATE_INFO_UPDATE,this,this.onUpdateStateInfo),LED.off(l_r.STATE_TIMESLIST_CHANGE,this,this.onUpdateStateInfo),LED.off(l_r.STATE_SUB_LV_UP,this,this.playSubLvEft),LED.off(l_r.STATE_LV_UP,this,this.playLvEft),LED.off(l_r.STATE_LV_UP_EFT_COMPLETE,this,this.lvupEftComplete),LED.off(l_r.FIGHT_CHANGE,this,this.onFightChange),LED.off(l_r.BODY_INFO_UPDATE,this,this.onUpdateBodyInfo),LED.off(l_r.BODY_CUL_INFO_UPDATE,this,this.onUpdateBodyInfo),LED.off(l_r.BODY_SUB_LEVEL_UP_INFO_UPDATE,this,this.onUpdateBodyInfo),LED.off(l_r.BODY_LEVEL_UP_INFO_UPDATE,this,this.onUpdateBodyInfo),LED.off(l_r.BOBY_OPEN_UP_PROPETY_PANEL,this,this.onOpenBodyUpProPanel),LED.off(l_r.BODY_SUB_LEVEL_UP_INFO_UPDATE,this,this.playSubLvEft),LED.off(l_r.BODY_LEVEL_UP_INFO_UPDATE,this,this.playLvEft),this._roleModel&&this._roleModel.clearRes(),Laya.timer.clear(this,this.updateCooldown)},b_s.prototype.tupoState=function(){var p_l=Config.state_state[StateModel.instance.getStateLv()+1];if(p_l){var p_g=LgcM.ins.heroVo,b_s=StateModel.instance.getStateLv(),d_u=StateModel.instance.getStateSubLv(),b_e=StateModel.instance.getSubConfId(b_s,d_u),d_m=Config.state_stateSub[b_e];if(d_m&&d_m.levelLimit){if(!(d_m.levelLimit<=p_g.level))return r_f.instance.isWindow(this._expId),void b_p.broadcastNotice((j_x("15_2342_2462")+j_x(1779)));b_p.confirm(Utils.$((j_x("1628_371_1012")+"{1}"+j_x("774_1624_1331")+j_x("254_2308_2117")+j_x("1647_144")+""+j_x("68_2032_1672")+j_x(2117)),p_l.desc),(function(){b_p.registerAutoOpenPanel(e.SkillPanel,b_p.mapID,(function(){e.SkillPanel.open(0)}),!1),StateModel.instance.reqStateLvUp()}))}}},b_s.prototype.playSubLvEft=function(p_l,p_g){void 0===p_g&&(p_g=!1);var b_s=Utils.$("item{1}",p_l-1),d_u=this.getChildByName(b_s);if(d_u){var b_e={f_u:d_u.x+d_u.width/2,j_l:d_u.y+d_u.height/2};t_m.instance.playSubLvEft(b_e,b_e,this,1,!1,!0,p_g)}this.effClip.visible=!0,this.effClip.index=0,this.effClip.play(!1),p_g?e.BodyUpPropertyTip.open(0):e.StateUpPropertyTip.open(null),Resource.SoundManager.instance.playSoundById(14,!1),this.effClip.on(Laya.Event.COMPLETE,this,this.onEffPlayerComplete)},b_s.close=function(){Gpuq(e)},b_s.prototype.lvupEftComplete=function(){},b_s.prototype.onFightChange=function(){Shnp(LgcM,b_p,NumType,this)},b_s.prototype.onUpdateBodyInfo=function(){this.bodyEffect.visible=!0,this.toBodyBtn.visible=!1,this.toStateBtn.visible=!0,this.bodyUpBox.visible=!0,this.stateBar.visible=!1,this.stateNumLab.visible=!1,this.canDujieBox.visible=!1,this.maxStateBox.visible=!1,this.bodyPrograssBox.visible=!0;var e=bodyModel.ins._level,p_l=bodyModel.ins.getBodyCfg(e),p_g=bodyModel.ins.getBodyCfg(e+1),b_s=bodyModel.ins._subLevel,d_u=b_s+1,b_e=bodyModel.ins._progress,d_m=bodyModel.ins.getBodyGradeCfg(e,d_u),d_w=bodyModel.ins.getBodyMaxGrade(e)<=b_s;if(this.bodyClip.index=1,this.BodybreakBtn.visible=d_w,this.bodyClip.index=2<=e?1:0,this.bodyEfc1.visible=5<=e,this.bodyEfc1.play(),this.bodyEfc2.visible=6<=e,this.bodyEfc2.play(),this.bodyEfc3.visible=7<=e,this.bodyEfc3.play(),this.bodyEfc4.visible=8<=e,this.bodyEfc4.play(),this.bodyEfc5.visible=9<=e,this.bodyEfc5.play(),this.bodyEfc6.visible=10<=e,this.bodyEfc6.play(),p_l){p_g?(this.maxBodyBox.visible=!1,this.bodyUpBox.visible=!0):d_m||(this.maxBodyBox.visible=!0,this.bodyPrograssBox.visible=!1,this.bodyUpBox.visible=!1),this.bodyLab.text="/"+p_l.name,this.bodyLvClip.index=e-1,this.bodySubClip.index=b_s-1;var f_t=this.bodyUpBox.getChildByName("conditionDes");d_m?(this.BodyincreaseBtn.visible=b_e<d_m.progress,this.BodygardeUpBtn.visible=b_e>=d_m.progress&&!d_w,this.viewBodyProgress(b_e,d_m.progress,d_u-1),f_t&&(f_t.text=d_w?p_g.desc:d_m.desc)):(d_m=bodyModel.ins.getBodyGradeCfg(e,b_s),f_t&&(f_t.text=d_w?p_g?p_g.desc:"":d_m.desc),this.viewBodyProgress(b_e,d_m.progress,b_s),this.BodyincreaseBtn.visible=!1,this.BodygardeUpBtn.visible=!1,this.BodybreakBtn.visible=d_w)}this.updateBodyConsume(),this.updateBodyRedPoint()},b_s.prototype.increaseStateClick=function(){var e=StateModel.instance.getStateLv(),p_l=StateModel.instance.getStateNum(),p_g=StateModel.instance.getStateSubLv(),b_s=LgcM.ins.heroVo;if(p_g!=Config.global[GlobalDefine.state_max_sub_lv].i_info){var d_u=StateModel.instance.getSubConfId(e,p_g),b_e=Config.state_stateSub[d_u];if(b_e){if(b_e.total<=p_l){var d_m=100*e+p_g,d_w=Config.state_stateSub[d_m];if(d_w&&!b_p.checkConsume(d_w.consume,!0))return;return b_e.levelLimit&&b_e.levelLimit>b_s.level?(r_f.instance.isWindow(this._expId),void b_p.broadcastNotice((j_x("15_2342_2462")+j_x(1779)))):void StateModel.instance.reqStateSubLvUp()}if(0===BagModel.instance.getItemCountByItemID(StateConst.StateNumItemId))return void r_f.instance.isWindow(StateConst.StateNumItemId);StateModel.instance.reqIncreaseState(0)}}else this.tupoState()},b_s.prototype.updateRedpoint=function(){Ulsw(this,StateModel)},b_s.prototype.updateBodyConsume=function(){var e=Config.global[GlobalDefine.body_cultivation_consume].t_info[0],p_l=bodyModel.ins._subLevel,p_g=bodyModel.ins._level,b_s=p_l+1,d_u=bodyModel.ins.getBodyMaxGrade(p_g)<=p_l,b_e=bodyModel.ins._progress,d_m=bodyModel.ins.getBodyGradeCfg(p_g,b_s),d_w=(d_m&&d_m.progress?d_m.progress:0)<=b_e;if(d_u||d_w?(this.BodyconsumeBox.visible=!1,this.bodyBrkConsumeBox.visible=!0):(this.bodyBrkConsumeBox.visible=!1,this.BodyconsumeBox.visible=!0),this.BodyconsumeBox.visible&&d_m){var f_t=null!=d_m.consume,v_z=f_t?Config.CItem(d_m.consume[0][0]).icon:"",d_h=f_t?BagModel.instance.getItemCountByItemID(d_m.consume[0][0]):0,r_t=f_t?d_m.consume[0][1]:0,t_n=b_e>=d_m.progress?v_z:Config.CItem(e).icon;this.icon.skin=Resource.ResUrl.getIconUrl(t_n);var f_y=b_e>=d_m.progress?d_h:BagModel.instance.getItemCountByItemID(e);this.bodyConsumeNumLab.text=0==r_t&&this.BodygardeUpBtn.visible?"":"X"+f_y+"/"+(b_e>=d_m.progress?r_t:1),b_e>=d_m.progress?this.bodyConsumeNumLab.color=r_t<=f_y?"#00802e":"#b92929":this.bodyConsumeNumLab.color=1<=f_y?"#00802e":"#b92929",this.bodyConsumeLab.x=this.BodyconsumeBox.x-this.bodyConsumeLab.width}if(this.bodyBrkConsumeBox.visible){var p_q=[],h_h=null;if(d_u?h_h=bodyModel.ins.getBodyCfg(p_g+1):d_w&&(h_h=d_m),h_h&&(p_q=b_p.getRewardDatas(h_h.consume)),p_q&&0!==p_q.length){var n_j=this.bodyBrkConsumeBox;n_j.removeChildren();for(var j_l=0,l_m=0,z_m=p_q;l_m<z_m.length;l_m++){var h_b=z_m[l_m];t_n="",t_n=h_b.id<100?Config.item_coin[h_b.id].minIcon:Config.CItem(h_b.id).icon,t_n=Resource.ResUrl.getIconUrl(t_n);var t_i=new Laya.Sprite;n_j.addChild(t_i),Resource.ResManager.Instance.getImg(t_n,t_i,40,40),t_i.x=j_l,j_l+=40;var n_f=h_b.amount,t_s=(f_y=BagModel.instance.getItemCountByItemID(h_b.id),new Laya.Text);t_s.font=this.bodyConsumeNumLab.font,t_s.fontSize=this.bodyConsumeNumLab.fontSize,t_s.align=this.bodyConsumeNumLab.align,n_j.addChild(t_s),t_s.text=f_y+"/"+n_f,t_s.color=n_f<=f_y?"#00802e":"#b92929",t_s.x=j_l+5,t_s.y=7,j_l=t_s.x+t_s.textWidth+10}n_j.x=this.width-j_l>>1,n_j.x+j_l>this.RewardBtn.x&&(n_j.x=this.RewardBtn.x-j_l),this.bodyConsumeLab.x=n_j.x-this.bodyConsumeLab.width}else this.bodyBrkConsumeBox.visible=!1}this.bodyConsumeLab.visible=this.BodyconsumeBox.visible||this.bodyBrkConsumeBox.visible},b_s.prototype.onUpdateStateInfo=function(){this.bodyEffect.visible=!1;var e=StateModel.instance.getStateLv(),p_l=StateModel.instance.getStateSubLv(),p_g=StateModel.instance.getStateNum(),b_s=Config.state_state[e],d_u=StateModel.instance.getSubConfId(e,p_l),b_e=Config.state_stateSub[d_u];if(this.maxBodyBox.visible=!1,b_s&&b_e&&(this.stateLvClip.index=e,this.stateSubClip.index=p_l-1,this.viewStateProgress(p_g,b_e.total,p_l)),StateModel.instance.canBreak())this.lvUpBox.visible=!0,this.increaseBox.visible=!1,this.lvUpBtn.label=(j_x("1789_2117")),this.levelLimit.visible=this.levelLimit_txt.visible=!0;else{var d_m=StateModel.instance.canBreakSubLv();this.lvUpBox.visible=d_m,this.increaseBox.visible=!d_m,this.lvUpBtn.label=(j_x("1955_2213")),this.levelLimit.visible=this.levelLimit_txt.visible=d_m}if(this.updateConsume(),this.updateRedpoint(),this.t_prepare.text=p_l<6?(j_x("1789_2117_240")+j_x(1968)):(j_x("2308_2117_281")+j_x(1590)),Laya.timer.clear(this,this.updateCooldown),6==p_l)if(this.dujieBox.visible=!0,0<StateModel.instance.failCd){var d_w=StateModel.instance.failCd-Math.floor(SyncTime.serverTime/1e3);0<d_w?(this.t_dujieDesc.visible=!1,this.t_dujieCdTitle.visible=this.t_dujieCd.visible=!0,this.updateCooldown(d_w)):(this.t_dujieDesc.visible=!0,this.t_dujieCdTitle.visible=this.t_dujieCd.visible=!1)}else this.t_dujieDesc.visible=!0,this.t_dujieCdTitle.visible=this.t_dujieCd.visible=!1;else this.dujieBox.visible=!1;if(this.levelLimit.visible&&this.levelLimit_txt.visible)if(b_e&&b_e.levelLimit){var f_t=LgcM.ins.heroVo;this.levelLimit.text=Utils.$("{1}/{2}",f_t.level,b_e.levelLimit),this.levelLimit.color=f_t.level>=b_e.levelLimit?Utils.Color.GREEN:Utils.Color.RED,this.levelLimit_txt.text=(j_x("2249_803")+":")}else this.levelLimit_txt.text=this.levelLimit.text="";StateModel.instance.canBreak()?Config.state_state[e+1]?(this.canDujieBox.visible=!0,this.maxStateBox.visible=!1):(this.canDujieBox.visible=!1,this.maxStateBox.visible=!0):(this.canDujieBox.visible=!0,this.maxStateBox.visible=!1)},b_s.prototype.tweenComplete1=function(){Laya.Tween.to(this.modelSp,{scaleX:-1,f_u:428},1e3,null,null,null,!0),Laya.Tween.to(this.bodyClip,{f_u:358,scaleX:1},1e3,null,null,null,!0)},b_s.prototype.viewStateProgress=function(e,p_l,p_g){for(var b_s=1;b_s<p_g;b_s++)this.subEftOp(b_s,1);var d_u=Config.global[GlobalDefine.state_max_sub_lv].i_info;for(b_s=p_g;b_s<d_u;b_s++)this.subEftOp(b_s,2);var b_e=0;1<(b_e=p_l?e/p_l:1)&&(b_e=1),b_e>this.stateBar.value?Laya.Tween.to(this.stateBar,{value:b_e},1e3*(b_e-this.stateBar.value)):this.stateBar.value=b_e,this.stateNumLab.text=e+"/"+p_l;var d_m=this.stateBar.sizeGrid.split(","),d_w=Number(d_m[3]||0),f_t=Number(d_m[1]||0);this.barEftClip.x=this.stateBar.x+(this.stateBar.width-d_w-f_t)*b_e+d_w+this.kBarEffOffset},b_s.prototype.onMouseClick=function(p_l){var p_g=p_l.target,d_u=bodyModel.ins._level,b_e=bodyModel.ins._subLevel+1,d_m=this.getChildIndex(this.modelSp),d_w=this.getChildIndex(this.bodyClip);switch(p_g.name){case"backBtn":case"closeBtn":b_s.close();break;case"increaseBtn":case"increaseLab":this.increaseStateClick();break;case"lvUpBtn":StateModel.instance.getStateSubLv()==Config.global[GlobalDefine.state_max_sub_lv].i_info?this.tupoState():this.increaseStateClick();break;case"detailBtn":this._isBody?e.BodyDetailPanel.open():e.StateDetailPanel.open();break;case"propertyBtn":e.RolePropertyPanel.open();break;case"UpRewardBtn":e.stateAdvanceReward.open();break;case"t_prepare":StateModel.instance.getStateSubLv()<6?e.StatePreparePanel.open():e.StateMaxTipPanel.open();break;case"BodyincreaseBtn":var f_t=Config.global[GlobalDefine.body_cultivation_consume].t_info[0],v_z=BagModel.instance.getItemCountByItemID(f_t),d_h=bodyModel.ins.getBodyGradeCfg(d_u,b_e),r_t=bodyModel.ins._progress;if(d_h&&r_t>=d_h.progress)return void b_p.broadcastNotice((j_x("1327_711_2249")+j_x("266_33_1035")+j_x("1300_1463")));1<=v_z?bodyModel.ins.reqBodyCultivation():r_f.instance.isWindow(f_t);break;case"toStateBtn":this._isBody=!1,Laya.Tween.to(this.modelSp,{scaleX:0},500,null,Laya.Handler.create(this,this.tweenComplete),null,null,!0),this.setChildIndex(this.modelSp,d_w),this.setChildIndex(this.bodyClip,d_m),this.toBodyBtn.visible=!0,this.toStateBtn.visible=!1,this.bodyUpBox.visible=!1,this.stateBar.visible=!0,this.stateNumLab.visible=!0,StateModel.instance.reqStateInfo(),this.bodyPrograssBox.visible=!1,this.bodyLv.visible=!1,this.lvBox.visible=!0,this.maxStateBox.visible=!1;break;case"toBodyBtn":this._isBody=!0,bodyModel.ins.reqBodyInfo(),this.bodyRedPoint.visible=!1,this._increaseMode=1,this.bodyLv.visible=!0,this.lvBox.visible=!1,Laya.Tween.to(this.modelSp,{scaleX:0},500,null,Laya.Handler.create(this,this.tweenComplete1),null,null,!0),this.setChildIndex(this.modelSp,d_w),this.setChildIndex(this.bodyClip,d_m);break;case"BodygardeUpBtn":var t_n=bodyModel.ins.canBreakSubLv(),f_y=bodyModel.ins.getBodyGradeCfg(d_u,b_e);if(t_n)return void bodyModel.ins.reqBodySublevelUp();if(f_y&&!b_p.checkConsume(f_y.consume,!0))return;break;case"BodybreakBtn":if(bodyModel.ins.canBreak())bodyModel.ins.reqBodyLevelUp();else{var p_q=bodyModel.ins.getBodyCfg(d_u+1);if(p_q&&null!=p_q){var h_h=p_q.consume;if(!b_p.checkConsume(h_h,!0))return}}break;case"RewardBtn":e.BodyRewardPanel.open()}},b_s.prototype.tweenComplete=function(){Laya.Tween.to(this.modelSp,{scaleX:1,f_u:372},1e3,null,null,null,!0),Laya.Tween.to(this.bodyClip,{f_u:428,scaleX:-1},1e3,null,null,null,!0)},b_s.prototype.playLvEft=function(p_l,p_g){void 0===p_g&&(p_g=!1);for(var b_s=1;b_s<p_l;b_s++){var d_u=Utils.$("item{1}",b_s),b_e=this.getChildByName(d_u),d_m={f_u:this.sitClip.x+this.sitClip.width/2,j_l:this.sitClip.y+this.sitClip.height/2};b_e&&t_m.instance.playSubLvEft({f_u:b_e.x+b_e.width/2,j_l:b_e.y+b_e.height/2},d_m,this,b_s,!0,!1,p_g)}p_g&&e.BodyBreakEffectePanel.open()},b_s.prototype.updateCooldown=function(e){Laya.timer.clear(this,this.updateCooldown),0<=e?(this.t_dujieCd.text=Math.floor(e/60)+":"+e%60,Laya.timer.once(1e3,this,this.updateCooldown,[e-1],!0)):this.onUpdateStateInfo()},b_s.prototype.onlvupEftTimeout=function(){Ymsf(this)},b_s.prototype.updateConsume=function(){var e=StateModel.instance.canBreak();if(this.brkConsumeBox.visible=e)this.consumeBox.visible=!1;else{var p_l=StateModel.instance.canBreakSubLv();this.brkConsumeBox.visible=p_l,this.consumeBox.visible=!p_l}if(this.consumeBox.visible){var p_g=BagModel.instance.getItemCountByItemID(StateConst.StateNumItemId);this.consumeNumLab.text="X"+p_g,this.consumeNumLab.color=0<p_g?"#00802e":"#b92929",this.consumeLab.x=this.consumeBox.x-this.consumeLab.width}if(this.brkConsumeBox.visible){var b_s=StateModel.instance.getStateLv(),d_u=StateModel.instance.getStateSubLv(),b_e=StateModel.instance.getSubConfId(b_s,d_u),d_m=Config.state_stateSub[b_e],d_w=b_p.getRewardDatas(d_m.consume);if(d_w&&0!==d_w.length){var f_t=this.brkConsumeBox;f_t.removeChildren();for(var v_z=0,d_h=0,r_t=d_w;d_h<r_t.length;d_h++){var t_n=r_t[d_h],f_y="";f_y=t_n.id<100?Config.item_coin[t_n.id].minIcon:Config.CItem(t_n.id).icon,f_y=Resource.ResUrl.getIconUrl(f_y);var p_q=new Laya.Sprite;f_t.addChild(p_q),Resource.ResManager.Instance.getImg(f_y,p_q,40,40),p_q.x=v_z,v_z+=40;var h_h=t_n.amount,n_j=(p_g=BagModel.instance.getItemCountByItemID(t_n.id),new Laya.Text);n_j.font=this.consumeNumLab.font,n_j.fontSize=this.consumeNumLab.fontSize,n_j.align=this.consumeNumLab.align,f_t.addChild(n_j),n_j.text=p_g+"/"+h_h,n_j.color=h_h<=p_g?"#00802e":"#b92929",n_j.x=v_z+5,n_j.y=7,v_z=n_j.x+n_j.textWidth+10}f_t.x=this.width-v_z>>1,f_t.x+v_z>this.UpRewardBtn.x&&(f_t.x=this.UpRewardBtn.x-v_z),this.consumeLab.x=f_t.x-this.consumeLab.width}else this.brkConsumeBox.visible=!1}this.consumeLab.visible=this.consumeBox.visible||this.brkConsumeBox.visible},b_s.prototype.updateBodyRedPoint=function(){Ahiu(this,bodyModel)},b_s.prototype.updateRewardItem=function(e,p_l){var p_g=e.dataSource,b_s=Config.CItem(p_g);e.isShowName=!1,e.setItemData({id:e.dataSource,amount:0,name:b_s.name},ItemBoxDefine.MODULE_ITEM,!0)},b_s.prototype.onOpenBodyUpProPanel=function(){var p_l=bodyModel.ins._level;bodyModel.ins.getBodyCfg(p_l+1)&&e.BodyUpPropertyTip.open(1)},b_s.prototype.viewBodyProgress=function(e,p_l,p_g){for(var b_s=bodyModel.ins._level,d_u=1;d_u<=p_g;d_u++)this.subEftOp(d_u,1);var b_e=bodyModel.ins.getBodyMaxGrade(b_s);for(d_u=p_g;d_u<b_e;d_u++)this.subEftOp(d_u,2);var d_m=0;1<(d_m=p_l?e/p_l:1)&&(d_m=1),d_m>this.bodyGrassBar.value?Laya.Tween.to(this.bodyGrassBar,{value:d_m},1e3*(d_m-this.bodyGrassBar.value)):this.bodyGrassBar.value=d_m,this.bodyNumLab.text=e+"/"+p_l;var d_w=this.bodyGrassBar.sizeGrid.split(","),f_t=Number(d_w[3]||0),v_z=Number(d_w[1]||0);this.barEftClip1.x=this.bodyGrassBar.x+(this.bodyGrassBar.width-f_t-v_z)*d_m+f_t+this.kBarEffOffset},b_s.prototype.subEftOp=function(e,p_l){var p_g=Utils.$("item{1}",e),b_s=this.getChildByName(p_g);if(b_s&&1==p_l){b_s.index=1;var d_u=b_s.x-12,b_e=b_s.y-65;this._subLvEft[e-1]=t_m.instance.lightSubEft(this,{f_u:d_u,j_l:b_e},this._subLvEft[e-1])}b_s&&2==p_l&&(b_s.index=0,t_m.instance.offSubEft(this,this._subLvEft[e-1]))},b_s.prototype.onWenziEftComplet=function(){},b_s.prototype.onAdded=function(){this.on(Laya.Event.CLICK,this,this.onMouseClick),LED.on(l_r.STATE_INFO_UPDATE,this,this.onUpdateStateInfo),LED.on(l_r.BODY_INFO_UPDATE,this,this.onUpdateBodyInfo),LED.on(l_r.BODY_CUL_INFO_UPDATE,this,this.onUpdateBodyInfo),LED.on(l_r.BODY_SUB_LEVEL_UP_INFO_UPDATE,this,this.onUpdateBodyInfo),LED.on(l_r.BODY_LEVEL_UP_INFO_UPDATE,this,this.onUpdateBodyInfo),LED.on(l_r.STATE_TIMESLIST_CHANGE,this,this.onUpdateStateInfo),LED.on(l_r.STATE_SUB_LV_UP,this,this.playSubLvEft),LED.on(l_r.STATE_LV_UP,this,this.playLvEft),LED.on(l_r.STATE_LV_UP_EFT_COMPLETE,this,this.lvupEftComplete),LED.on(l_r.FIGHT_CHANGE,this,this.onFightChange),LED.on(l_r.BOBY_OPEN_UP_PROPETY_PANEL,this,this.onOpenBodyUpProPanel),LED.on(l_r.BODY_SUB_LEVEL_UP_INFO_UPDATE,this,this.playSubLvEft),LED.on(l_r.BODY_LEVEL_UP_INFO_UPDATE,this,this.playLvEft),StateModel.instance.reqStateInfo(),this.updateBodyRedPoint();var e=BagModel.instance.getItemCountByItemID(StateConst.StateNumItemId);this.consumeNumLab.text="X"+e,this.consumeNumLab.color=0<e?"#00802e":"#b92929",this._roleModel||(this._roleModel=new n_k,this.modelSp.addChild(this._roleModel),this.modelSp.pivotX=this.modelSp.width/2,this.modelSp.pivotY=this.modelSp.height/2,this.modelSp.scaleX=1,this.bodyClip.pivot(this.bodyClip.width/2,this.bodyClip.width/2),this.bodyClip.x=this.modelSp.x,this.bodyClip.y=this.modelSp.y);var p_l=LgcM.ins.heroVo,p_g=Resource.ResManager.getDefaultPlayerAvatar(p_l.fashionClothes,p_l.entryId);this._roleModel.changeModel(p_g),this._roleModel.state();var b_s=Config.dragon_dragon[p_l.dragonId];b_s&&this._roleModel.showStateEfts(b_s.effect,180);var d_u=b_v.instance._marryVo.loverInfo;d_u&&b_v.instance._marryVo.marryId?d_u.sid==b_p.config.mergSerId?this.loverLab.text=d_u.name:this.loverLab.text="S"+d_u.sid+"."+d_u.name:this.loverLab.text=(j_x(814)),this.nameLab.text=p_l.name;var b_e=Config.state_state[StateModel.instance.getStateLv()];this.stateLab.text=b_e?b_e.desc:"";var d_m=Config.character[p_l.entryId];this.entryIdLab.text=d_m?d_m.name:"",this.lvLab.text=p_l.level+(j_x(643)),this.guildLab.text=p_l.guildName&&0<p_l.guildName.length?p_l.guildName:(j_x(814)),b_p.getNumSp(NumType.FIGHTING,p_l.fight,this.fightingSp,-12),bodyModel.ins._level,this.toBodyBtn.visible=!1,this.bodyLab.text="",this.maxBodyBox.visible=!1,this.bodyPrograssBox.visible=!1,this.toStateBtn.visible=!1,this.bodyUpBox.visible=!1,this.stateBar.visible=!0,this.stateNumLab.visible=!0,this.bodyPrograssBox.visible=!1,this.canDujieBox.visible=!1,this.bodyLv.visible=!1,this.bodyEffect.visible=!1,this.setChildIndex(this.modelSp,4),this.setChildIndex(this.bodyClip,3)},b_s.prototype.onEffPlayerComplete=function(){Oksj(this)},b_s);function b_s(){var e=p_l.call(this)||this;return e._stateCostIndex=0,e._increaseMode=0,e._lvBoxY1=0,e._lvBoxY2=0,e.kBarEffOffset=-50,e._expId=99,e._isBody=!1,e._subLvEft=new Array,e.effClip.visible=!1,e._lvBoxY1=e.lvBox.y,e._lvBoxY2=e.lvBox.y-e.lvBox.height,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.StatePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.statePrepareUI,__extends(b_s,p_l),b_s.open=function(){UIM.open(b_s,null,null,!1,!1,!0,!0,{container:"win"})},b_s.prototype.onClick=function(e){var p_l=e.target;switch(p_l.name){case"closeBtn":b_s.close();break;case"t_get":r_f.instance.isWindow(p_l.dataSource.id)}},b_s.prototype.onRemoved=function(){Wqag(this,Laya)},b_s.close=function(){Cdra(UIM,b_s)},b_s.prototype.onAdded=function(){Irdf(this,Laya)},b_s.prototype.updateView=function(){var e=LgcM.ins.heroVo;if(e){for(var p_l=e.stateLv,p_g=Config.state_state[p_l],d_u=StateModel.instance.getStateSubLv(),b_e=2;b_e<=6;++b_e){var d_m=100*p_l+b_e,d_w=Config.state_stateSub[d_m],f_t=this["t_descTitle"+(b_e-2)],v_z=this["t_desc"+(b_e-2)],d_h=this["t_levelLimit"+(b_e-2)];f_t.text=p_g.desc+""+d_w.desc+"",v_z.text=d_w.prepareDesc,f_t.color=d_u<b_e?Utils.Color.GRAY_PURPLE:Utils.Color.GREEN,v_z.color=d_u<b_e?Utils.Color.GRAY_PURPLE:Utils.Color.GREEN,d_w&&d_w.levelLimit?(d_h.text=Utils.$((j_x("2249_803_1117")+j_x(1012)+"{1}"+j_x(643)),d_w.levelLimit),d_h.color=e.level<d_w.levelLimit?Utils.Color.GRAY_PURPLE:Utils.Color.GREEN):d_h.text=""}var r_t=Config.state_stateSub[100*p_l+5];if(r_t&&r_t.consume)for(var t_n in this.i_consume0.visible=this.i_consume1.visible=this.i_consume2.visible=!0,this.t_consume0.visible=this.t_consume1.visible=this.t_consume2.visible=!0,this.t_get0.visible=this.t_get1.visible=this.t_get2.visible=!0,this.t_consumeTitle.visible=!0,r_t.consume){var f_y=r_t.consume[t_n][0],p_q=r_t.consume[t_n][1],h_h=this["i_consume"+t_n],n_j=this["t_consume"+t_n];this["t_get"+t_n].dataSource={id:f_y},Resource.ResManager.Instance.getImg(Resource.ResUrl.getIconUrl(Config.CItem(f_y).icon),h_h,40,40);var j_l=BagModel.instance.getItemCountByItemID(f_y);n_j.text=j_l+"/"+p_q,n_j.color=j_l<p_q?Utils.Color.RED:Utils.Color.GREEN}else this.i_consume0.visible=this.i_consume1.visible=this.i_consume2.visible=!1,this.t_consume0.visible=this.t_consume1.visible=this.t_consume2.visible=!1,this.t_get0.visible=this.t_get1.visible=this.t_get2.visible=!1,this.t_consumeTitle.visible=!1}else b_s.close()},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e}e.StatePreparePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.stateUpEffectePanelUI,__extends(b_s,p_l),b_s.prototype.Init=function(){Wkov(this,Laya,Stage)},b_s.prototype.onclick=function(e){Cmbp(e,this)},b_s.prototype.IsHaveItem=function(e){return!!(e&&e.rewardItem&&0<e.rewardItem.length&&e.rewardItem.length>=this.Itemindex+1)},b_s.close=function(){Mdov(SystemNoticeManager,UIM,b_s)},b_s.open=function(e){UIM.open(b_s,null,{result:e},!1,!0,!1,!1,{container:"top"})},b_s.prototype.onRemove=function(){this.Itemindex=0,this.off(Laya.Event.CLICK,this,this.onclick),this._roleModel&&this._roleModel.clearRes()},b_s.prototype.LoadModle=function(e){this._roleModel||(this._roleModel=new n_k,this.modelContainer.addChild(this._roleModel)),e&&2<=e.length&&(this.modelContainer.visible=!0,this.IconContainer.visible=!1,this._roleModel.changeModel(e[0]),this._roleModel.setAction(e[1],0,!0),this._roleModel.scale(.7,.7),this.Itemindex++)},b_s.prototype.Updateview=function(){var e=Config.fb_dungeon[this.dataSource.result.fbId].id-DungeonDefine.StateBegin+1,p_l=Config.state_state[e];this.IsHaveItem(p_l)?this.UpdateItem(p_l.rewardItem[this.Itemindex]):b_s.close()},b_s.prototype.onAdd=function(){Ooxm(this,Laya)},b_s.prototype.UpdateItem=function(e){if("img"==e[0]){var p_l=Resource.ResUrl.getIconUrl(e[1]);this.setIcon(p_l),this.modelContainer.visible=!1}else"modle"==e[0]&&this.LoadModle(e[1])},b_s.prototype.setIcon=function(e){""!=e?(this.Itemindex++,this.IconContainer.visible=!0,this.IconContainer=Resource.ResManager.Instance.getImg(e,this.IconContainer)):this.IconContainer.visible=!1},b_s);function b_s(){var e=p_l.call(this)||this;return e._roleModel=null,e.Itemindex=0,e.Init(),e}e.stateUpEffectePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.stateUpPropertyPanelUI,__extends(b_s,p_l),b_s.prototype.Init=function(){Wavq(this,Laya,Stage)},b_s.prototype.UpdateView=function(){var e=this.dataSource.result,p_l=StateModel.instance.getStateLv(),p_g=StateModel.instance.getStateSubLv();if(this.Rewardbox.visible=!1,this.bg.height=this.dujieImageSize[1],this.lableBottom.y=this.Bottomlabelpos[1],this.htmlLable.innerHTML="",this.anibox.pos(-24,240),e){var b_s=Config.fb_dungeon[e.fbId].id-DungeonDefine.StateBegin+1,d_u=Config.state_state[b_s];this.bg.height=this.dujieImageSize[0],this.lableBottom.y=this.Bottomlabelpos[0],d_u.RewardDesc&&(this.htmlLable.innerHTML=d_u.RewardDesc,this.Rewardbox.visible=!0,this.anibox.pos(-24,140)),p_l=d_u.id,p_g=1}var b_e=StateModel.instance.OldstateLv,d_m=StateModel.instance.OldstateSubLv,d_w=Config.state_stateSub[StateModel.instance.getSubConfId(b_e,d_m)],f_t=Config.state_stateSub[StateModel.instance.getSubConfId(p_l,p_g)];this.ani1.play(0,!1),this.stateLab.text=Config.state_state[p_l].desc+""+f_t.desc;var v_z=StateModel.instance.ConnectProp(d_w.attr,2,"","\n"),d_h=StateModel.instance.ConnectProp(f_t.attr,2,"","\n");this.Before.text=v_z[1],this.Current.text=d_h[1],this.PropTitle.text=v_z[0],StateModel.instance.updateOldState()},b_s.prototype.onAdd=function(){Waic(this,Laya)},b_s.close=function(){Qopt(UIM,b_s)},b_s.open=function(e){UIM.open(b_s,null,{result:e},!1,!0,!1,!1,{container:"top"})},b_s.prototype.onRemove=function(){this.dataSource.result?(e.stateUpEffectePanel.open(this.dataSource.result),this.dataSource.result=null):SystemNoticeManager.instance.checkSysOpen(),this.off(Laya.Event.CLICK,this,this.onclick),this.ani1.off(Laya.Event.COMPLETE,this,this.OnAniCommplyte)},b_s.prototype.onclick=function(e){switch(e.target.name){case"modalSp":b_s.close()}},b_s.prototype.OnAniCommplyte=function(e){Cddz(e,this)},b_s);function b_s(){var e=p_l.call(this)||this;return e.dujieImageSize=[441,292],e.Bottomlabelpos=[554,405],e.Init(),e}e.StateUpPropertyTip=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.strength.strengthFullUI,__extends(d_u,p_l),d_u.open=function(){Ohel(UIM,d_u)},d_u.prototype.updatePropItem=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("nameLab"),d_u=e.getChildByName("valueLab");b_s.text=d_v.getDesc(p_g.propOrdinal),d_u.text=p_g.value.toString()},d_u.prototype.onRemove=function(){},d_u.close=function(){Yjfl(UIM,d_u)},d_u.prototype.onStageClick=function(e){e&&e.target==this||d_u.close()},d_u.prototype.onAdded=function(){Qhli(this)},d_u.prototype.delayAddListener=function(){Qsne(Laya,this)},d_u.prototype.updateView=function(){var e=StrengthModel.instance.getNowFullLv(),p_l=StrengthModel.instance.getNextFullLv(),p_g=Config.strength_strengthFull[e],b_s=Config.strength_strengthFull[p_l];if(p_g){var d_u=CharacterProperty.getPropertys(p_g.attr);this.nowFullList.array=d_u}else this.nowFullList.array=[];b_s?(d_u=CharacterProperty.getPropertys(b_s.attr),this.nextFullList.array=d_u):this.nextFullList.array=[],this.nowFullLab.text=Utils.$((j_x("1327_711_407")+j_x(1398)+""+j_x("1514_1920_464")+j_x(191)+"+{1}"),e),this.nextFullLab.text=Utils.$((j_x("2379_2342_407")+j_x(1398)+""+j_x("1514_1920_464")+j_x(191)+"+{1}"),p_l),this.pos((this.stage.width-this.width)/2,200);var b_e=StrengthModel.instance.calFullFighting();b_p.getNumSp(NumType.FIGHTING,b_e,this.combatSp,-6)},d_u);function d_u(){var e=p_l.call(this)||this;return e.mouseEnabled=!0,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.nowFullList.renderHandler=p_g.create(e,e.updatePropItem,[],!1),e.nextFullList.renderHandler=p_g.create(e,e.updatePropItem,[],!1),e}e.StrengthFullPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.strength.strengthUI,__extends(d_u,p_l),d_u.open=function(){Ajpb(e)},d_u.close=function(){Uhla(e)},d_u.prototype.showCostNumInfo=function(){var e,p_l,p_g=[1,4,9,10,11,12];for(var b_s in p_g){var d_u=StrengthModel.instance.getPartitionLv(p_g[b_s]);if(0==d_u){e=0,p_l=p_g[b_s];break}(!e||d_u<e)&&(e=d_u,p_l=p_g[b_s])}var b_e=StrengthModel.instance.getStrengthConsume(e,p_l);if(this.rp_auto.visible=!1,b_e){var d_m=BagModel.instance.getItemCountByItemID(200002,BagTypeDefine.BAG_TYPE_ITEM),d_w=b_e[0][1];return d_w<=d_m?(this.costLab.color=this._enoughColor,this.rp_auto.visible=!0):this.costLab.color=this._lackColor,void(this.costLab.text=Utils.$("{1}/{2}",b_p.calsulate(d_m),b_p.calsulate(d_w)))}this.costLab.text=Utils.$((j_x("1117_1012_1081")+j_x("1375_464_191")+j_x("15_2342")))},d_u.prototype.onAdded=function(){Uzsd(this,Laya,LED,l_r,StrengthModel)},d_u.prototype.updateProItem=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("proNameLab"),d_u=e.getChildByName("proValueLab"),b_e=e.getChildByName("nextProValueLab");b_s.text=d_v.getDesc(p_g.nowProp.propOrdinal),d_u.text=b_p.calsulate(p_g.nowProp.value),p_g.nextProp?b_e.text=b_p.calsulate(p_g.nextProp.value):b_e.text=""},d_u.prototype.oneKeyStrength=function(e,p_l){if(void 0===e&&(e=!1),void 0===p_l&&(p_l=!1),!p_l||!this._isContinueUp){var p_g=SyncTime.tickCount;if(this._StrengthTime+this._SpaceTime<=p_g||!e){if(this._StrengthTime=p_g,!StrengthModel.instance.isCostEnough())return b_p.broadcastError(2901),this._isContinueUp=!1,void r_f.instance.isWindow(Config.strength_strengthPart[1].baseCost[0][0]);this._isContinueUp=!0,StrengthModel.instance.reqAutoStrength()}}},d_u.prototype.setQuality=function(e,p_l,p_g){var b_s=e.getChildByName("quaEft");(b_s=Resource.ResManager.getQualityEft(p_g,b_s))&&(b_s.name="quaEft",b_s.index=0,b_s.play(),null===b_s.parent&&e.addChild(b_s),b_s.on(Laya.Event.LOADED,this,this.resetEffectPos,[p_l,b_s]))},d_u.prototype.selectItem=function(e){var p_l=Utils.$("item{1}",e),p_g=this.strengList.getChildByName(p_l),b_s=StrengthModel.instance.getProListByPartition(e+1);this.proList.array=b_s,this._selectIndex=e,p_g.getChildByName("selectImg").visible=!0,this.updateCurItem(e+1)},d_u.prototype.playEft=function(e){Mijy(e,Resource,Laya,this)},d_u.prototype.strenthgEffectOver=function(){this.updateView(),this._isContinueUp&&this.oneKeyStrength()},d_u.prototype.onMouseClick=function(p_l){switch(p_l.target.name){case"backBtn":case"closeBtn":d_u.close();break;case"autoBtn":this.oneKeyStrength(!1,!0);break;case"fullBtn":e.StrengthFullPanel.open()}},d_u.prototype.onItemChange=function(e){200002==e.id&&this.showCostNumInfo()},d_u.prototype.onClickEquipt=function(p_l,p_g){var b_s=LgcM.ins.heroVo;p_l&&e.EquipTipsPanel.open(p_l,b_s.entryId)},d_u.prototype.onRemove=function(){this.off(Laya.Event.CLICK,this,this.onMouseClick),LED.off(l_r.STRENGTH_INFO_UPDATE,this,this.updateView),LED.off(l_r.STRENGTH_PARTITION_UPDATE,this,this.updateView),LED.off(l_r.STRENGTH_AUTO_UPDATE,this,this.playEft),LED.off(l_r.ITEM_ADD,this,this.onItemChange),LED.off(l_r.ITEM_REMOVE,this,this.onItemChange),LED.off(l_r.ITEM_AMOUNT_CHANGE,this,this.onItemChange),Laya.timer.clearAll(this);for(var e=1;e<=this._maxPartition;e++){var p_l=Utils.$("item{1}",e-1),p_g=this.strengList.getChildByName(p_l).getChildByName("effsClip");p_g&&(p_g.visible=!1)}this._isContinueUp=!1},d_u.prototype.updateCurItem=function(e){var p_l=this.curItem.getChildByName("t_name"),p_g=this.curItem.getChildByName("lvLab"),b_s=this.curItem.getChildByName("iconSp"),d_u=this.curItem.getChildByName("bg"),b_e=this.curItem.getChildByName("c_type"),d_m=this.curItem.getChildByName("selectImg"),d_w=StrengthModel.instance.getPartitionLv(e),f_t=this.curItem.getChildByName("currLv");p_g.text=0==d_w?"":Utils.$("+{1}",d_w),d_m.visible=!1,b_e.visible=!0,p_l.text="",b_s.visible=!1,d_u.index=0;for(var v_z=BagModel.instance.getItemInfosByBagType(BagTypeDefine.BAG_TYPE_EQUIPMENT),d_h=0;d_h<v_z.length;d_h++)if(v_z[d_h].place==e){var r_t=Config.item_equipment[v_z[d_h].id];if(r_t){b_s.visible=!0,b_s=Resource.ResManager.Instance.getImg(Resource.ResUrl.getIconUrl(r_t.icon),b_s),d_u.index=r_t.quality-1,this.setQuality(this.curItem,d_u,r_t.quality),b_e.visible=!1,p_l.text=r_t.name,p_l.color=Config.color[1e3+r_t.quality].color,f_t.text=(r_t.level||1)+(j_x(2342));break}}else f_t.text=""},d_u.prototype.updateView=function(){for(var e=BagModel.instance.getItemInfosByBagType(BagTypeDefine.BAG_TYPE_EQUIPMENT),p_l=1;p_l<=this._maxPartition;p_l++){var p_g=Utils.$("item{1}",p_l-1),b_s=this.strengList.getChildByName(p_g),d_u=b_s.getChildByName("lvLab"),b_e=b_s.getChildByName("iconSp"),d_m=b_s.getChildByName("bg"),d_w=b_s.getChildByName("c_type"),f_t=b_s.getChildByName("selectImg"),v_z=b_s.getChildByName("currLv"),d_h=StrengthModel.instance.getPartitionLv(p_l);d_u.text=0==d_h?"":Utils.$("+{1}",d_h),f_t.visible=!1,d_w.visible=!0;for(var r_t=0;r_t<e.length;r_t++)if(e[r_t].place==p_l){var t_n=Config.item_equipment[e[r_t].id];if(t_n){b_s.mouseEnabled=!0,b_s.on(Laya.Event.CLICK,this,this.onClickEquipt,[e[r_t],e[r_t].place]),b_e=Resource.ResManager.Instance.getImg(Resource.ResUrl.getIconUrl(t_n.icon),b_e),d_m.index=t_n.quality-1,this.setQuality(b_s,d_m,t_n.quality),d_w.visible=!1,v_z.text=(t_n.level||1)+(j_x(2342));break}}else v_z.text=""}this._selectIndex=StrengthModel.instance.minLvPosition()-1,this.showCostNumInfo();var f_y=StrengthModel.instance.getFullLv(),p_q=StrengthModel.instance.getNextFullLv();this.fullLab.text=Utils.$("({1}/{2})",f_y,p_q),this.selectItem(this._selectIndex);var h_h=StrengthModel.instance.calFighting();b_p.getNumSp(NumType.FIGHTING,h_h,this.combatSp,-10)},d_u.prototype.resetEffectPos=function(e,p_l){if(p_l){p_l.off(Laya.Event.LOADED,this,this.resetEffectPos);var p_g=0===e.width?102:e.width,b_s=0===e.height?102:e.height;p_l.x=e.x+(p_g-p_l.width>>1),p_l.y=e.y+(b_s-p_l.height>>1)}},d_u.prototype.playOneEft=function(p_l){var p_g=Utils.$("item{1}",p_l-1),b_s=this.strengList.getChildByName(p_g);if(b_s){this._effPlayOpts||(this._effPlayOpts={clipUrl:"res/ui/common/Clip_shanguang_eft.png",clipX:3,clipY:2,interval:83,f_u:-30,j_l:-30});var d_u=Utils.$("item{1}",this._selectIndex),b_e=this.strengList.getChildByName(d_u);b_e&&(b_e.getChildByName("selectImg").visible=!1),b_s.getChildByName("selectImg").visible=!0,b_s.getChildByName("lvLab").text=Utils.$("+{1}",StrengthModel.instance.getPartitionLv(p_l));var d_m=StrengthModel.instance.getProListByPartition(p_l);this.proList.array=d_m,this._selectIndex=p_l-1,this._helpPoint?this._helpPoint.setTo(-30,-30):this._helpPoint=new Laya.Point(-30,-30),e.EffectPlayer.playOnce(b_s,"effsClip",this._effPlayOpts,this._helpPoint),this.updateCurItem(p_l)}},d_u);function d_u(){var e=p_l.call(this)||this;return e._maxPartition=12,e._selectIndex=0,e._effPlayOpts=null,e._enoughColor="#00802e",e._lackColor="#ff0400",e._SpaceTime=400,e._StrengthTime=0,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.strengList.selectEnable=!1,e._isContinueUp=!1,e.proList.renderHandler=p_g.create(e,e.updateProItem,[],!1),e}e.StrengthPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.system.system_gainUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(e){Whgp(e,this,Laya,StateModel,LED,l_r)},b_s.prototype.showRoleModel=function(e,p_l,p_g,b_s,d_u){if(void 0===p_g&&(p_g="stand"),void 0===b_s&&(b_s=1),void 0===d_u&&(d_u=[0,0]),e&&""!=e){var b_e=p_l.getChildByName("roleModel");b_e||((b_e=new n_k).name="roleModel",p_l.addChild(b_e)),b_e.changeModel(e),b_e.pos(d_u[0],d_u[1]),b_e.scale(b_s,b_s),b_e.setAction(p_g,0,!0)}},b_s.prototype.updateRewardItem=function(e,p_l){e&&(e.isShowName=!1,e.isShowNum=!0,e.isShowTick=!1,e.setItemData(e.dataSource,ItemBoxDefine.MODULE_ITEM))},b_s.prototype.onClick=function(e){var p_l=e.target;switch(p_l.name){case"closeBtn":case"backBtn":b_s.close();break;case"gainBtn":var p_g=p_l.dataSource;p_g&&this.SystemNotice.reqSystemOpenReward(p_g.funcId)}},b_s.prototype.updateData=function(e){void 0===e&&(e=!1),this.SystemNotice&&this.SystemNotice.noticeDatas&&(this.list.array=this.SystemNotice.noticeDatas.sort(SystemNoticeManager.sortSystemData)),e||this.showSelectData();var p_l=this.SystemNotice.getCanTalismanGain(1);if(!this.list.array||0===this.list.array.length){if(p_l&&0<p_l.length)return;b_s.close()}},b_s.prototype.updateItem=function(e,p_l){e&&e.setData(e.dataSource)},b_s.prototype.showSelectData=function(){if(this.list.array){var e=this.list.selectedItem;e&&(Config.funcOpen[e.funcId]?this.rewardList.array=b_p.getRewardDatas(Config.funcOpen[e.funcId].reward):this.rewardList.array=null,this.redPoint.visible=e.isOpen&&1!=e.state,this.gainBtn.disabled=1===e.state||!e.isOpen,(this.gainBtn.dataSource=e).isOpen&&1==e.state?this.gainBtn.label=(j_x("1300_1174_2111")):this.gainBtn.label=(j_x("1174_2111")))}},b_s.open=function(){Sdne(UIM,b_s)},b_s.prototype.selectList=function(e){-1!==e&&this.showSelectData()},b_s.prototype.onUpdateStateInfo=function(){Uhxh(SystemNoticeManager)},b_s.prototype.onSystemNoticeInfo=function(){this.SystemNotice&&this.SystemNotice.noticeDatas&&(this.list.array=this.SystemNotice.noticeDatas.sort(SystemNoticeManager.sortSystemData)),this.list.selectedIndex=this.SystemNotice.getFirstUnGainIndex()},b_s.prototype.onRemove=function(e){Mirk(e,this,Laya,LED,l_r)},b_s.prototype.onUpdateTalismanPlan=function(){var e=this.SystemNotice.getCanTalismanGain(1);if(this.isactivate.visible=!(0<e.length),this.talismanshow.visible=!this.isactivate.visible,e&&e[0]&&e[0].talismanid){var p_l=Config.talisman_talisman[e[0].talismanid];this.showRoleModel(p_l.avatar,this.icon,p_l.showAct,e[0].talismanscale),this.talismandesc.text=e[0].talismandesc,this.talismanname.changeText(p_l.name),this.taskdesc.changeText(e[0].taskdesc),this.bardesc.changeText(this.SystemNotice.talismanBar(e[0])),this.talismanbar.value=this.SystemNotice.talismanBarValue(e[0])}},b_s.close=function(){Sjhq(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.SystemNotice=SystemNoticeManager.instance,p_g.list.vScrollBarSkin="",p_g.list.scrollBar.elasticDistance=100,p_g.list.scrollBar.elasticBackTime=200,p_g.list.itemRender=b_e,p_g.list.renderHandler=Laya.Handler.create(p_g,p_g.updateItem,null,!1),p_g.rewardList.itemRender=e.ItemBox,p_g.rewardList.renderHandler=Laya.Handler.create(p_g,p_g.updateRewardItem,null,!1),p_g.list.selectEnable=!0,p_g.list.selectHandler=Laya.Handler.create(p_g,p_g.selectList,null,!1),p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g}e.SystemGainPanel=p_g;var d_u,b_e=(d_u=ui.window.system.system_gain_cellUI,__extends(d_m,d_u),d_m.prototype.setData=function(e){var p_l=Config.systemNotice[e.id];this.iconClip.index=p_l.icon_index,this.title.text=p_l.pass,this.gainImg.visible=1===e.state,this.redPoint.visible=e.isOpen&&!this.gainImg.visible,this.dataSource=e,this.suoImg.visible=!e.isOpen,this.nameClip.index=p_l.name_index},d_m);function d_m(){return d_u.call(this)||this}e.SystemGainCell=b_e;var d_w,f_t=(d_w=ui.window.system.system_showUI,__extends(v_z,d_w),v_z.prototype.onAdded=function(e){Unpt(e,LED,l_r,this)},v_z.open=function(e){Sdxt(e,UIM,v_z)},v_z.prototype.onRemove=function(e){LED.off(l_r.SYSTEM_NOTICE_IFNO,this,this.updateData);var p_l=this.iconClip.localToGlobal(new Laya.Point);SystemNoticeManager.instance.openFlyTo(this.iconClip.bitmap.source,p_l,this.iconClip.width,this.dataSource)||(SystemNoticeManager.instance.isOpening=!1)},v_z.prototype.updateData=function(){var e=this.dataSource,p_l=Config.systemNotice[e.id];this.iconClip.index=p_l.icon_index,this.nameClip.index=p_l.name_index},v_z.close=function(){Osqg(UIM,v_z)},v_z);function v_z(){var e=d_w.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.SystemOpenPanel=f_t}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.system.talismanopenUI,__extends(b_s,p_l),b_s.prototype.onAdd=function(){this.on(Laya.Event.CLICK,this,this.onClick);var e=this.dataSource;if(e&&0<e){var p_l=TalismanModel.instance.getTalismanById(e);p_l.level=1,p_l.grade=1;var p_g=Config.talisman_talisman[e],b_s=p_g.tanopenatk;b_p.getNumSp("FINGT_BIG",b_s,this.fight,-13),this.showRoleModel(p_g.avatar,p_g.showAct,e.scale),this.nameDesc.text=p_g.name}},b_s.prototype.onClick=function(e){e.target;var p_l=UIM.instance.getMainUI(),p_g=new Laya.Point;p_g=p_l.talismanBtn.localToGlobal(p_g);var d_u=new Laya.Point;d_u.x=this.bg.x+86,d_u.y=this.bg.y+100;var b_e=this.dataSource;if(b_e&&0<b_e){var d_m=Config.talisman_talisman[b_e];r_n.instance.flyLittleToBagEffect(d_m.icon,d_u,p_g,3,1.5,null)}b_s.close()},b_s.prototype.onRemove=function(){Crbb(this,Laya)},b_s.prototype.showRoleModel=function(e,p_l,p_g,b_s){void 0===p_l&&(p_l="stand"),void 0===p_g&&(p_g=1),void 0===b_s&&(b_s=[0,0]),e&&""!=e&&(this._roleModel||(this._roleModel=new n_k,this.icon.addChild(this._roleModel)),this._roleModel.changeModel(e),this._roleModel.pos(b_s[0],b_s[1]),this._roleModel.scale(p_g,p_g),this._roleModel.setAction(p_l,0,!0))},b_s.open=function(e){void 0===e&&(e=0),UIM.open(b_s,["activity/ancientTailsman.atlas"],e,null,null,!0,!1)},b_s.close=function(){Ykps(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdd),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.TalismanOpenPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.talisman.deploymentUpUI,__extends(b_s,p_l),b_s.prototype.init=function(){Ifeg(this,Laya)},b_s.prototype.onRemove=function(){Iwox(this,Laya,LED,l_r)},b_s.prototype.updateItem=function(e,p_l){var p_g=this.dataSource;if(p_g){var b_s=e.dataSource,d_u=b_s[0],b_e=e.getChildByName("itemBox").getChildByName("iconSp"),d_m=0<d_u?Resource.ResUrl.getIconUrl(Config.CItem(d_u).icon):Resource.ResUrl.getIconUrl(Config.CItem(99).icon);b_e=b_e&&Resource.ResManager.Instance.getImg(d_m,b_e);var d_w=e.getChildByName("hBox"),f_t=d_w.getChildByName("nameTxt"),v_z=d_w.getChildByName("countTxt"),d_h=e.getChildByName("rateTxt"),r_t=e.getChildByName("upBtn"),t_n=e.getChildByName("redPoint"),f_y=Config.talisman_deployment[p_g.id];d_h.text=(j_x("371_2342_229")+j_x(1916)+"")+f_y.rate/100+"%";var p_q=TalismanModel.instance.getUpgradeConfig(p_g.tId,p_g.talismanVo.grade).depLvUpper<=p_g.level;if(0<d_u){var h_h=Config.CItem(d_u),n_j=BagModel.instance.getItemCountByItemID(d_u,BagTypeDefine.BAG_TYPE_ITEM);f_t.text=Utils.$("{1}",h_h.name),v_z.text=Utils.$("({1}/{2})",n_j,b_s[1]),v_z.color=b_s[1]>n_j?Utils.Color.RED:Utils.Color.GREEN,t_n.visible=n_j>=b_s[1]&&!p_q}else{var j_l=p_g.talismanVo,l_m=TalismanModel.instance.taliexcDates(j_l.id);l_m&&j_l&&d_u<=0&&(f_t.text=Utils.$((j_x("980_799_1241")+j_x(144))),v_z.text=Utils.$("({1}/{2})",j_l?l_m.deployExp:0,b_s[1]),v_z.color=b_s[1]>l_m.deployExp?Utils.Color.RED:Utils.Color.GREEN,d_h.text=(j_x("371_2342_229")+j_x(1916)+"100%"),t_n.visible=l_m.deployExp>=b_s[1]&&!p_q),j_l&&!l_m&&d_u<=0&&(f_t.text=Utils.$((j_x("980_799_1241")+j_x(144))),v_z.text=Utils.$("({1}/{2})",j_l?j_l.deployExp:0,b_s[1]),v_z.color=b_s[1]>j_l.deployExp?Utils.Color.RED:Utils.Color.GREEN,d_h.text=(j_x("371_2342_229")+j_x(1916)+"100%"),t_n.visible=j_l.deployExp>=b_s[1]&&!p_q)}r_t.dataSource=[d_u],f_t.width=f_t.textField.textWidth,v_z.width=v_z.textField.textWidth,d_w.refresh()}},b_s.open=function(e){void 0===e&&(e=null),UIM.open(b_s,null,e,!1,!1,!0)},b_s.prototype.playUpLvEffect=function(){this.upLvEft&&(this.upLvEft.visible=!0,this.upLvEft.play(!1),this.upLvEft.on(Laya.Event.COMPLETE,this,this.stopUpLvEffect),Resource.SoundManager.instance.playSoundById(1,!1))},b_s.prototype.stopFailEffect=function(){this.upFailEft&&(this.upFailEft.off(Laya.Event.COMPLETE,this,this.stopFailEffect),this.upFailEft.visible=!1,this.upFailEft.stop())},b_s.prototype.onItemUpdate=function(e){void 0===e&&(e=null),this.dataSource&&this.updateData(this.dataSource)},b_s.prototype.stopUpLvEffect=function(){this.upLvEft&&(this.upLvEft.off(Laya.Event.COMPLETE,this,this.stopUpLvEffect),this.upLvEft.visible=!1,this.upLvEft.stop())},b_s.prototype.onAdded=function(){this.on(Laya.UIEvent.CLICK,this,this.onClick),LED.on(l_r.TALISMAN_DEPLOY_UPDATE,this,this.updateData),LED.on(l_r.TALISMAN_DEPLOY_UPDATE_SUCCESS,this,this.playUpLvEffect),LED.on(l_r.TALISMAN_DEPLOY_UPDATE_FAIL,this,this.playFailEffect),LED.on(l_r.ITEM_ADD,this,this.onItemUpdate),LED.on(l_r.ITEM_REMOVE,this,this.onItemUpdate),LED.on(l_r.ITEM_AMOUNT_CHANGE,this,this.onItemUpdate),LED.on(l_r.TALISMAN_INFO_UPDATE,this,this.onItemUpdate),LED.on(l_r.TALISMAN_UP_UPDATE,this,this.onItemUpdate);var e=this.dataSource;e&&this.updateData(e,!0),this.stopUpLvEffect()},b_s.prototype.updateData=function(e,p_l){void 0===e&&(e=null),void 0===p_l&&(p_l=!1);var p_g=Config.talisman_deployment[e.id];this.nameTxt.text=p_g.name,this.lvTxt.text=e.level.toString();var b_s=TalismanModel.instance.getTalismanById(e.tId),d_u=TalismanModel.instance.getUpgradeConfig(e.tId,b_s.grade);if(this.maxLevelTipTxt.text=Utils.$((j_x("1081_2251_1163")+j_x("371_2342_1012")+"{1}"+j_x(2342)+""+j_x("1628_2251_799")+j_x("869_1148_2342")+j_x("1163_1628_2251")+j_x("1067_2128")),d_u.depLvUpper),p_g.icon){var b_e=Resource.ResUrl.getIconUrl(p_g.icon);this.icon=Resource.ResManager.Instance.getImg(b_e,this.icon)}var d_m=dreamlandModel.instance.SkillAddLvByDeploymentID(e.id);0<d_m?(this.dreamlandAddbox.visible=!0,this.nameBox.y=this.nameTitlePosY,this.dreamlandAddLab.text=(j_x("15_2342")+"+")+d_m):(this.nameBox.y=40,this.dreamlandAddbox.visible=!1),this.curEffectTxt.text=p_g.typeName+e.calAptitude(),this.upEffectTxt.text=p_g.typeName+e.calNextAptitude();var d_w=p_g.consume.concat();0<p_g.exp&&d_w.push([-1,p_g.exp]),this.list.array=d_w,this.dataSource=e},b_s.prototype.playFailEffect=function(){this.upFailEft&&(this.upFailEft.visible=!0,this.upFailEft.play(!1),this.upFailEft.on(Laya.Event.COMPLETE,this,this.stopFailEffect))},b_s.prototype.onClick=function(e){var p_l=e.target;switch(p_l.name){case"closeBtn":b_s.close();break;case"upBtn":var p_g=p_l.dataSource[0],d_u=this.dataSource;if(!d_u)return;var b_e=TalismanModel.instance.getTalismanById(d_u.tId);if(!b_e||d_u.level>=b_e.maxLv)return void b_p.broadcastNotice((j_x("15_2342_2462")+j_x("1919_1360_254")+j_x("799_869_15")+j_x("2342_1067_2128")));var d_m=Config.talisman_deployment[d_u.id];if(-1===p_g&&b_e.deployExp<d_m.exp)return r_f.instance.isWindow(94),void b_p.broadcastNotice((j_x("1241_144_2462")+j_x(1779)));var d_w=Config.talisman_deployment[d_u.id].consume[0][1];if(-1!=p_g&&BagModel.instance.getItemCountByItemID(p_g,BagTypeDefine.BAG_TYPE_ITEM)<d_w)return void r_f.instance.isWindow(Config.talisman_deployment[d_u.id].consume[0][0]);TalismanModel.instance.reqTalismanUpDeploy(d_u.tId,d_u.id,-1===p_g?1:2)}},b_s.close=function(){Qrfy(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.nameTitlePosY=e.nameBox.y,e.init(),e}e.TalismanDeployUpPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.talismanEquip.TalismanEquipUI,__extends(b_s,p_l),b_s.prototype.removeEventListener=function(){Gobu(LED,l_r,this,Laya)},b_s.prototype.onAwakeComplete=function(){Idkw(this)},b_s.prototype.renderItem=function(e,p_l,p_g){this.dataSource;var b_s=e.getChildByName("starBox"),d_u=e.getChildByName("selectImage"),b_e=e.getChildByName("itemName"),d_m=e.getChildByName("isNull"),d_w=e.getChildByName("icon"),f_t=e.getChildByName("quality"),v_z=e.getChildByName("sLv"),d_h=e.getChildByName("quaEft"),r_t=this.dataSource.strength[p_l-1];if(v_z.text=r_t&&0!=r_t?Utils.$("+{1}",r_t):"",d_u.on(Laya.Event.CLICK,this,this.clickItem),d_u.dataSource={vo:p_g,index:p_l},p_g&&p_g.dynamic&&""!=p_g.dynamic){var t_n=JSON.parse(p_g.dynamic);t_n&&t_n[2]?(b_s.visible=!0,TalismanModel.instance.changeStar(b_s,t_n[2].length)):b_s.visible=!1}else b_s.visible=!1;if(p_g){d_m.visible=!1,b_e.visible=d_w.visible=!0;var f_y=Config.item_equipment[p_g.id];d_w.skin=Resource.ResUrl.getIconUrl(f_y.icon),b_e.color=Resource.ResManager.getQualityColor(f_y.quality),f_t.index=f_y.quality-1,d_h&&(d_h.visible=!0),TalismanModel.instance.setQuality(e,f_t,f_y.quality),f_y.stateLevel&&(b_e.text=Config.state_state[f_y.stateLevel].desc),f_y.level&&(b_e.text=b_e.text+(f_y.level||1).toString()+(j_x(643)))}else d_m.visible=!0,b_e.visible=d_w.visible=!1,d_h&&(d_h.visible=!1),f_t.index=0},b_s.prototype.onClick=function(p_l){var p_g=p_l.target,d_u=this.dataSource;switch(p_g.name){case"backBtn":e.TalismanUpPanel.open(d_u);case"closeBtn":b_s.close();break;case"awakeBtn":d_u._awakenOdlTimes=d_u.awakenTimes,TalismanModel.instance.reqEquipAwake(d_u.id);break;case"selectBtn1":this.updateAwakeView(d_u,1);break;case"selectBtn2":this.updateAwakeView(d_u,2);break;case"selectBtn3":this.updateAwakeView(d_u,3);break;case"strengthBtn":e.TalismanStrengthPanel.open(d_u),b_s.close();break;case"allWearBtn":TalismanModel.instance.reqAllEquipWear(d_u.id);break;case"awakeSystem":TalismanModel.instance.reqTalismanEquipActive();break;case"soulBox":0!=d_u.qihunLevel&&d_u.qihunLevel?(b_s.close(),e.TalismanSoulUpPanel.open(d_u)):e.TalismanSoulActivatePanel.open(d_u)}},b_s.prototype.updateStrengthRedPoint=function(e){var p_l=TalismanModel.instance.getTalismanById(this.dataSource.id),p_g=TalismanModel.instance.getLowStrengthConsume(p_l);TalismanModel.instance.getSoulConsume(p_l.id,2),p_l.qihunLevel,p_l.qihunStar,p_g&&e&&e.id==p_g[0][0]&&(this.strengthRedPoint.visible=TalismanModel.instance.isCanStrength(p_g)),this.allWearRedPoint.visible=TalismanModel.instance.talismanIsChangeEquip(p_l.id),this.soulRedPoint.visible=TalismanModel.instance.redSoul(p_l)},b_s.prototype.wearEquip=function(e){if(e.bagType2===BagTypeDefine.BAG_TYPE_TALIS){var p_l=BagModel.instance.getItemInfoByUuid(e.bagType2,e.uuid1);if(!p_l)return;if(!Config.item_equipment[p_l.id])return;var p_g=BagModel.instance.getItemInfoByUuid(e.bagType2,e.uuid1),b_s=this.equipBox.getChildByName("item"+p_g.place);p_g?this.renderItem(b_s,p_g.place,p_g):this.renderItem(b_s,p_g.place,null),this.updateAwakeView(this.dataSource,Math.min(this.dataSource.awakenTimes+1,3)),this.playEffecte(b_s,p_g.place),this.allWearRedPoint.visible=TalismanModel.instance.talismanIsChangeEquip(this.dataSource.id),Resource.SoundManager.instance.playSoundById(3,!1)}var d_u=TalismanModel.instance.countEquipFight(this.dataSource.id)+TalismanModel.instance.countAwakenFight(this.dataSource);b_p.getNumSp(NumType.FIGHTING,d_u,this.atkNum,-10)},b_s.prototype.renderSoulItem=function(e){var p_l=this.dataSource,p_g=(e.getChildByName("selectImage"),e.getChildByName("itemName")),b_s=e.getChildByName("isNull"),d_u=e.getChildByName("icon"),b_e=e.getChildByName("quality"),d_m=e.getChildByName("sLv"),d_w=p_l.qihunLevel,f_t=p_l.qihunStar;if(d_m.text=d_w&&0!=d_w?Utils.$("+{1}",d_w):"",0==d_w){b_s.visible=!1,p_g.text=Config.talisman_talisman[p_l.id].petSoulName;var v_z=TalismanModel.instance.getSoulStarCfg(p_l.id,1);d_u.skin=Resource.ResUrl.getIconUrl(v_z.Image),p_g.color=Resource.ResManager.getQualityColor(v_z.quality),b_e.index=v_z.quality-1,d_u.gray=!0,TalismanModel.instance.setQuality(e,b_e,v_z.quality)}else{if(b_s.visible=!1,p_g.visible=d_u.visible=!0,d_u.gray=!1,p_g.text=Config.talisman_talisman[p_l.id].petSoulName,!(v_z=TalismanModel.instance.getSoulStarCfg(p_l.id,f_t)))return;d_u.skin=Resource.ResUrl.getIconUrl(v_z.Image),p_g.color=Resource.ResManager.getQualityColor(v_z.quality),b_e.index=v_z.quality-1,TalismanModel.instance.setQuality(e,b_e,v_z.quality)}},b_s.prototype.clickItem=function(p_l){var p_g=p_l.target.dataSource;p_g.vo?b_e.open(p_g.vo,this.dataSource.id):e.TalismanWearEquipTip.open(p_g.vo,this.dataSource.id,p_g.index,4)},b_s.prototype.updateAwakeView=function(e,p_l){var p_g=e.awakenTimes+1;p_g=TalismanModel.instance.isAwake(e.id,p_g,e.awakenTimes)?Math.min(e.awakenTimes+1,3):e.awakenTimes;for(var d_u=null,b_e=1;b_e<4;b_e++){var d_m=this.awakeBox.getChildByName("selectBox"+b_e);if(d_m){var d_w=d_m.getChildByName("selectBox"),f_t=d_m.getChildByName("selectBtn"+b_e),v_z=d_m.getChildByName("effect");v_z.visible=!1,v_z.stop(),p_l==b_e?(d_w.visible=!0,d_u=v_z):d_w.visible=!1,f_t.gray=p_g<b_e}}null!=b_s.prosValue[p_g]?this.awakePros.value=b_s.prosValue[p_g]:this.awakePros.value=0,this.awakeBtn.visible=TalismanModel.instance.isAwake(e.id,p_l,e.awakenTimes)&&p_l-e.awakenTimes<=1,this.awakeBtn.visible&&(d_u.visible=this.awakeBtn.visible,d_u.play()),0==e.awakenTimes||e.awakenTimes<p_l?(this.awakeTag.visible=!1,this.awakenImage.visible=!this.awakeBtn.visible):(e.awakenTimes>=p_l?this.awakeTag.visible=!0:this.awakeTag.visible=!1,this.awakenImage.visible=!1),this.awakenImage.visible?this.arrivedNum.color="#9f4543":this.arrivedNum.color="#00802e",e._awakenOdlTimes<e.awakenTimes?(this.awakenEffect.visible=!0,this.awakenClip.play(!1),e._awakenOdlTimes=e.awakenTimes):this.awakenEffect.visible=!1,this.arrivedNum.text=Utils.$("({1}/{2})",TalismanModel.instance.allEquipNumByStart(e.id,p_l),EquipDefine.TalisNum);var d_h=TalismanModel.instance.getAwakenCfg(e.id,p_l);this.requireLabel.text=d_h?d_h.requirement:"";var r_t={};r_t[1]=TalismanModel.instance.getTalismanAwakeProp(e.id,p_l,!0),r_t[2]=TalismanModel.instance.getTalismanAwakeProp(e.id,p_l,!1),TalismanModel.instance.setProp(this.propText,r_t,Utils.setSpace(3),["#42435a"])},b_s.prototype.playEffecte=function(p_l,p_g){p_l&&(this.effPlayOpts||(this.effPlayOpts={clipUrl:"res/ui/common/Clip_shanguang_eft.png",clipX:3,clipY:2,interval:83,f_u:-15,j_l:-15}),this._helpPoint?this._helpPoint.setTo(-15,-15):this._helpPoint=new Laya.Point(-15,-15),e.EffectPlayer.playOnce(p_l,"effsClip",this.effPlayOpts,this._helpPoint))},b_s.prototype.updateView=function(e){void 0===e&&(e=!0);for(var p_l=TalismanModel.instance.getTalismanById(this.dataSource.id),p_g=TalismanModel.instance.getTalismanInBagEquips(p_l.id),b_s=1;b_s<=EquipDefine.TalisNum;b_s++){var d_u=this.equipBox.getChildByName("item"+b_s);p_g[b_s]?(e&&this.playEffecte(d_u,b_s),this.renderItem(d_u,p_g[b_s].place,p_g[b_s])):this.renderItem(d_u,b_s,null)}this.renderSoulItem(this.soulBox),this.strengthRedPoint.visible=TalismanModel.instance.isCanStrength(TalismanModel.instance.getLowStrengthConsume(p_l)),this.allWearRedPoint.visible=TalismanModel.instance.talismanIsChangeEquip(p_l.id),this.soulRedPoint.visible=TalismanModel.instance.redSoul(p_l),this.updateAwakeView(p_l,Math.min(p_l.awakenTimes+1,3));var b_e=p_l.soulProps,d_m=[];d_m=b_p.getPropInfos([["hpUpper",0],["attack",0],["defense",0],["armorBreak",0]]),d_m=b_p.addProps(b_e,1,d_m);var d_w=b_p.calPropFight(d_m),f_t=TalismanModel.instance.countEquipFight(this.dataSource.id)+TalismanModel.instance.countAwakenFight(this.dataSource)+d_w;b_p.getNumSp(NumType.FIGHTING,f_t,this.atkNum,-10),e||this.playAni(TalismanModel.instance._isActiveEquip)},b_s.prototype.playAni=function(e){var p_l=this.dataSource;Config.talisman_talisman[p_l.id],100<=p_l.level?e?(this.ani1.play(0,!1),this.ani2.play(0,!1),this.ani3.play(0,!1),this.ani4.play(0,!1),this.ani5.play(0,!1),this.awakenBox.visible=!0,this.panelBox.visible=!1):(this.panelBox.visible=!0,this.awakenBox.visible=!1,this.qualityNull.visible=!1,this.awakeSystem.visible=!0,this.ani1.stop(),this.ani2.stop(),this.ani3.stop(),this.ani4.stop(),this.ani5.stop()):(this.panelBox.visible=!0,this.awakenBox.visible=!1,this.ani1.stop(),this.ani2.stop(),this.ani3.stop(),this.ani4.stop(),this.ani5.stop(),this.qualityNull.visible=!0,this.awakeSystem.visible=!1)},b_s.prototype.addEventListener=function(){Gupi(this,LED,l_r,Laya)},b_s.open=function(e){Gboj(e,UIM,b_s)},b_s.close=function(){Kwij(UIM,b_s)},b_s.prosValue=[0,.15,.5,1],b_s);function b_s(){var e=p_l.call(this)||this;return e.propText.style.fontSize=22,e.propText.style.color="#42435a",e.clearRes=["res/ui/talisman/Clip_jihuo_eft.png","res/ui/talisman/Clip_kejihuo_eft.png","res/ui/talisman/Clip_zhenfa_eft.png","res/ui/talisman/bg.jpg"],e}e.TalismanEquipPanel=p_g;var d_u,b_e=(d_u=ui.window.tips.talismanEquipTipUI,__extends(d_m,d_u),d_m.prototype.onAdded=function(){Kifz(this,Laya)},d_m.prototype.onClick=function(p_l){var p_g=p_l.target;switch(this.dataSource,p_g.name){case"backBtn":case"closeBtn":d_m.close();break;case"changeBtn":e.TalismanWearEquipTip.open(this.dataSource.itemVo,this.dataSource.talisID,this.dataSource.itemVo.place,4),d_m.close()}},d_m.prototype.updateData=function(){if(this._infoVo=this.dataSource.itemVo,this._infoVo){var p_l=Config.item_equipment[this._infoVo.id],p_g=LgcM.ins.heroVo;this.realmTxt.color=p_l.stateLevel<=p_g.stateLv||!p_l.stateLevel?Utils.Color.WHITE:Utils.Color.RED,this.realmTxt.text=Config.state_state[p_l.stateLevel].desc,this.nameTxt.text=p_l.name,this._infoVo.fighting||this._infoVo.calcFight(),this.fightingTxt.text=this._infoVo.fighting.toString(),this.placeTxt.text=CharacterProperty.getPlaceName(p_l.place),this.lvTxt.color=p_l.level<=p_g.level||!p_l.level?Utils.Color.WHITE:Utils.Color.RED,this.lvTxt.text=""+p_l.level,this.queClip.index=p_l.quality-1,this.nameTxt.color=Resource.ResManager.getQualityColor(p_l.quality),e.TalisEquipItem.setItemData(this.itemBox,this._infoVo);var b_s=CharacterProperty.getPropertys(p_l.basePropFixed),d_u={};d_u[2]=b_s,TalismanModel.instance.setProp(this.baseTxt,d_u,"<br>",["#d8dcec","#71de66"]);var b_e=BagModel.instance.getItemInfoByUuid(BagTypeDefine.BAG_TYPE_TALIS,this._infoVo.uuid);if(b_e){var d_m=TalismanModel.instance.getTalismanEquipSPropById(b_e.talisID,b_e.place),d_w=TalismanModel.instance.getTalismanById(b_e.talisID);this.strengthLab.text=this._oldStrengthLab+("("+j_x("464_191")+"+")+d_w.strength[b_e.place-1]+")",0<d_m.length?((d_u={})[2]=d_m,this.strengthBox.visible=!0,TalismanModel.instance.setProp(this.strengthTxt,d_u,"<br>",["#d8dcec","#71de66"])):this.strengthBox.visible=!1}else this.strengthBox.visible=!1;if(this._infoVo.dynamic&&""!=this._infoVo.dynamic){var f_t=JSON.parse(this._infoVo.dynamic);if(this.legendBox.visible=!0,this.titleText.text=("["+j_x("1250_1946_613")+j_x(233)+"]"),f_t&&f_t[2]&&0<=f_t[2].length){d_u={};var v_z=[],d_h=f_t[2],r_t="";for(var t_n in f_t[2])if("tsVariation"==d_h[t_n][0]){var f_y=Config.talisman_variation[d_h[t_n][1]];if(f_y)if(TalismanModel.instance.talisEquipPropIsActiveById(d_h[t_n][1],this._infoVo.talisID))r_t+=Utils.$("{1}{2}",Utils.setColor(f_y.desc,"#71de66"),"<br>");else{var p_q=Utils.$(("{1}("+j_x("206_2335_1796")+")"),Utils.setSpace(2));r_t+=Utils.$("{1}{2}",Utils.setColor(f_y.desc+p_q,"#8a8a8a"),"<br>")}}else v_z.push(d_h[t_n]);var h_h="";0<v_z.length&&(d_u[2]=CharacterProperty.getPropertys(v_z),h_h=TalismanModel.instance.setProp(this.legendTxt,d_u,"<br>",["#d8dcec","#71de66"])),this.legendTxt.innerHTML=h_h+r_t}else this.legendBox.visible=!1}else this.legendBox.visible=!1}else this.realmTxt.text="",this.nameTxt.text="",this.fightingTxt.text="",this.placeTxt.text="",this.strengthLab.text=this._oldStrengthLab,this.baseTxt.innerHTML="",this.baseTxt.height=this.baseTxt.contextHeight,this.strengthBox.visible=!1;this.resite()},d_m.open=function(e,p_l){void 0===p_l&&(p_l=0),UIM.open(d_m,null,{itemVo:e,talisID:p_l},!1,!1,!0,!0)},d_m.prototype.resite=function(){this.countBoxHeight(this.legendBox),this.countBoxHeight(this.strengthBox);var e=this.legendBox.visible?this.legendBox.height:0;e+=this.strengthBox.visible?this.strengthBox.height:0,this.bgImg.height=this.baseTxt.y+this.baseTxt.height+25+e,this.tipTxt.y=this.bgImg.height,this.height=this.bgImg.height+this.tipTxt.height+this.changeBtn.height,this.y=Stage.height-this.height>>1,e=this.baseTxt.y+this.baseTxt.height+25,this.legendBox.visible&&(this.legendBox.y=e,e+=this.legendBox.height+5),this.strengthBox.visible&&(this.strengthBox.y=e),this.changeBtn.y=this.tipTxt.y+this.tipTxt.height},d_m.prototype.countBoxHeight=function(e){if(e){for(var p_l=0,p_g=0;p_g<e.numChildren;p_g++){var b_s=e.getChildAt(p_g);b_s&&(p_l+=b_s.height)}e.height=Math.max(80,p_l)}},d_m.prototype.onRemove=function(){Stli(this,Laya)},d_m.close=function(){Kumw(UIM,d_m)},d_m);function d_m(){var e=d_u.call(this)||this;return e.changeBtn.visible=!1,e.baseTxt.style.font=b_p.config.font,e.baseTxt.style.fontSize=22,e.baseTxt.style.color="#b4fbf2",e.baseTxt.style.leading=10,e.legendTxt.style.font=b_p.config.font,e.legendTxt.style.fontSize=22,e.legendTxt.style.color="#b4fbf2",e.legendTxt.style.leading=10,e.strengthTxt.style.font=b_p.config.font,e.strengthTxt.style.fontSize=22,e.strengthTxt.style.color="#b4fbf2",e.strengthTxt.style.leading=10,e._oldStrengthLab=e.strengthLab.text,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.TalisEquipTipsPanel=b_e;var d_w,f_t=(d_w=ui.window.talismanEquip.ActiveTalismanEquipUI,__extends(v_z,d_w),v_z.prototype.onAdded=function(){Gxmv(this,Laya,LED,l_r,v_z)},v_z.prototype.onClick=function(p_l){var p_g=p_l.target;switch(this.dataSource,p_g.name){case"backBtn":case"closeBtn":e.TalismanUpPanel.open(this.dataSource),v_z.close();break;case"allWearBtn":TalismanModel.instance.reqTalismanEquipActive()}},v_z.open=function(e){Oqro(e,UIM,v_z)},v_z.prototype.onRemove=function(){this.off(Laya.Event.CLICK,this,this.onClick),e.TalismanUpPanel.open(this.dataSource),LED.off(l_r.TALISMAN_EQUIP_ACTIVE,v_z,v_z.close)},v_z.close=function(){Oudb(UIM,v_z)},v_z);function v_z(){var e=d_w.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.TalisEquipActivePanel=f_t}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.talismanEquip.TalismanStrengthUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Sgjz(LED,l_r,this,Laya)},b_s.prototype.onClickGetTip=function(e){Samq(e,this,r_f,Config)},b_s.prototype.refreshSelect=function(){Laya.timer.once(80*EquipDefine.TalisNum+200,this,(function(){this.updateView(!1)}))},b_s.prototype.updateProItem=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("proNameLab"),d_u=e.getChildByName("proValueLab"),b_e=e.getChildByName("nextProValueLab");b_s.text=d_v.getDesc(p_g.nowProp.propOrdinal),d_u.text=p_g.nowProp.value.toString(),p_g.nextProp?b_e.text=p_g.nextProp.value.toString():b_e.text=""},b_s.prototype.renderItem=function(e,p_l,p_g){if(e){var b_s=e.getChildByName("quality"),d_u=e.getChildByName("starBox"),b_e=e.getChildByName("itemName"),d_m=e.getChildByName("isNull"),d_w=e.getChildByName("icon"),f_t=e.getChildByName("sLv"),v_z=this.dataSource.strength[p_l-1];f_t.text=v_z&&0!=v_z?Utils.$("+{1}",v_z):"";var d_h=e.getChildByName("selectImage"),r_t=e.getChildByName("itemClick"),t_n=e.getChildByName("quaEft");if(r_t.on(Laya.Event.CLICK,this,this.clickItem),r_t.dataSource={vo:p_g,index:p_l},p_l==this.selectIndex?d_h.visible=!0:d_h.visible=!1,p_g&&p_g.dynamic&&""!=p_g.dynamic){var f_y=JSON.parse(p_g.dynamic);f_y&&f_y[2]?(d_u.visible=!0,TalismanModel.instance.changeStar(d_u,f_y[2].length)):d_u.visible=!1}else d_u.visible=!1;if(p_g){d_m.visible=!1,b_e.visible=d_w.visible=!0;var p_q=Config.item_equipment[p_g.id];TalismanModel.instance.setQuality(e,b_s,p_q.quality),b_e.color=Resource.ResManager.getQualityColor(p_q.quality),d_w.skin=Resource.ResUrl.getIconUrl(p_q.icon),t_n&&(t_n.visible=!0),b_s.index=p_q.quality-1,p_q.stateLevel&&(b_e.text=Config.state_state[p_q.stateLevel].desc),p_q.level&&(b_e.text+=(p_q.level||1).toString()+(j_x(643)))}else d_m.visible=!0,b_e.visible=d_w.visible=!1,t_n&&(t_n.visible=!1),b_s.index=0}},b_s.prototype.strengthEquip=function(p_l,p_g){if(p_l&&this.dataSource){p_l.getChildByName("lvLab");var b_s=p_l.getChildByName("selectImage");this.effPlayOpts||(this.effPlayOpts={clipUrl:"res/ui/common/Clip_shanguang_eft.png",clipX:3,clipY:2,interval:83,f_u:-15,j_l:-15});var d_u=Utils.$("item{1}",this.selectIndex),b_e=this.equipBox.getChildByName(d_u);b_e&&(b_e.getChildByName("selectImage").visible=!1),this.updateProList(p_g),b_s.visible=!0,this._helpPoint?this._helpPoint.setTo(-15,-15):this._helpPoint=new Laya.Point(-15,-15),e.EffectPlayer.playOnce(p_l,"effsClip",this.effPlayOpts,this._helpPoint)}},b_s.prototype.onClick=function(p_l){var p_g=p_l.target,d_u=this.dataSource;switch(p_g.name){case"backBtn":e.TalismanUpPanel.open(d_u);case"closeBtn":b_s.close();break;case"allStrengthBtn":TalismanModel.instance.reqEquipStrength(d_u.id,0)}},b_s.open=function(e){Siwm(e,UIM,b_s)},b_s.prototype.onRemove=function(){Wwqq(LED,l_r,this,Laya)},b_s.prototype.updateProList=function(e){Imfj(e,TalismanModel,this)},b_s.prototype.clickItem=function(p_l){var p_g=p_l.target.dataSource;p_g.vo&&e.TalisEquipTipsPanel.open(p_g.vo,this.dataSource.id)},b_s.prototype.updateView=function(e){if(void 0===e&&(e=!0),this.dataSource){var p_l=this.dataSource,p_g=TalismanModel.instance.getLowStrengthConsume(p_l),b_s=TalismanModel.instance.getTalismanInBagEquips(p_l.id);this.updateProList(TalismanModel.instance.getLowStrengthPart(this.dataSource));for(var d_u=1;d_u<=EquipDefine.TalisNum;d_u++){var b_e=this.equipBox.getChildByName("item"+d_u);e&&(this.recordStrength[d_u-1]<p_l.strength[d_u-1]||!this.recordStrength[d_u-1])&&(this.recordStrength[d_u-1]=p_l.strength[d_u-1],Laya.timer.once(80*d_u,this,this.strengthEquip,[b_e,d_u],!1)),this.renderItem(b_e,d_u,b_s[d_u])}if(p_g){this.consumeLV.visible=!0;var d_m=BagModel.instance.getItemCountByItemID(p_g[0][0],BagTypeDefine.BAG_TYPE_ITEM);d_m>=p_g[0][1]?this.consumeLV.color="#00802e":this.consumeLV.color="#ff0400",this.consumeLV.text=Utils.$("{1}/{2}",d_m,p_g[0][1])}else this.consumeLV.visible=!1;b_p.getNumSp(NumType.FIGHTING,TalismanModel.instance.countStrenthFight(p_l),this.atkNum,-10),e&&(Resource.SoundManager.instance.playSoundById(15,!1),this.refreshSelect())}},b_s.close=function(){Eyqk(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.recordStrength=[],e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.proList.renderHandler=Laya.Handler.create(e,e.updateProItem,[],!1),e}e.TalismanStrengthPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.talismanEquip.TalismanWearEquipUI,__extends(b_s,p_l),b_s.open=function(e,p_l,p_g,d_u){void 0===d_u&&(d_u=1),UIM.open(b_s,null,{itemVo:e,tlisId:p_l,part:p_g,subclass:d_u},!1,!1,!0)},b_s.prototype.onRemove=function(){Muoq(Laya,this)},b_s.prototype.onDelay=function(){Uwyp(Laya,this)},b_s.prototype.onAdded=function(){Yilr(this,Laya)},b_s.prototype.updateView=function(){if(this._itemVo=this.dataSource.itemVo,this._tlisId=this.dataSource.tlisId,this._part=this.dataSource.part,this._tlisId&&this._part){var e=[];4==this.dataSource.subclass&&(e=TalismanModel.instance.getTalisEquipByPart(this._part,BagTypeDefine.BAG_TYPE_ITEM,this._itemVo,this._tlisId)),e.sort((function(e,p_l){return p_l.fighting-e.fighting})),this._itemVo&&e.splice(0,0,this._itemVo),(this.equipLst.array=e).length<=0?this.nullLabel.visible=!0:this.nullLabel.visible=!1}},b_s.prototype.onStageClick=function(e){var p_l=e.target;p_l&&this.contains(p_l)||this.closeSelf()},b_s.prototype.updateItem=function(e,p_l){var p_g=e.dataSource;if(p_g){var b_e=e.getChildByName("itemBox"),d_m=e.getChildByName("nameLab"),d_w=e.getChildByName("stateLab"),f_t=e.getChildByName("lvLab"),v_z=e.getChildByName("propertyLst"),d_h=e.getChildByName("curEquipImg"),r_t=e.getChildByName("changeBtn"),t_n=e.getChildByName("fightingLab"),f_y=e.getChildByName("redPoint"),p_q=Config.item_equipment[p_g.id];r_t.dataSource={uuid:p_g.uuid,id:p_g.id},d_u.setItemData(b_e,p_g,!0),d_h.visible=this._itemVo===p_g,r_t.visible=this._itemVo!==p_g,r_t.label=this._itemVo?(j_x("1410_1713")):(j_x("2407_1086")),t_n&&(t_n.text=""+(p_g.fighting||0)),this._itemVo?f_y.visible=p_g.fighting>this._itemVo.fighting:f_y.visible=!1,v_z.renderHandler=Laya.Handler.create(this,this.updatePropItem,[v_z],!1);var h_h=CharacterProperty.getPropertys(p_q.basePropFixed);v_z.array=h_h;var n_j=LgcM.ins.heroVo;d_m.text=p_g.name,d_m.color=1==p_q.quality?Config.color[101].color:Resource.ResManager.getQualityColor(p_q.quality);var j_l=Config.state_state[p_q.stateLevel];d_w.text=j_l?j_l.desc:"",d_w.color=StateModel.instance.getStateLv()>=p_q.stateLevel?b_s.greenColor:b_s.redColor,f_t.text=p_q.level.toString()+(j_x(2342)),f_t.color=n_j.level>=p_q.level?b_s.greenColor:b_s.redColor}},b_s.prototype.closeSelf=function(){Yxaz(b_s)},b_s.prototype.changeEquip=function(e){Kgfs(e,EquipModel,this)},b_s.prototype.changeTalismanEquip=function(e,p_l){Qdsk(e,p_l,TalismanModel,this)},b_s.close=function(){Yamr(UIM,b_s)},b_s.prototype.onMouseClick=function(e){var p_l=e.target;switch(p_l.name){case"closeBtn":b_s.close();break;case"changeBtn":if(4==this.dataSource.subclass){var p_g=this._itemVo?this._itemVo.id:-1;if(!TalismanModel.instance.checkCanWearEquipByTalisId(this.dataSource.tlisId,p_l.dataSource.id,p_g,!0))return;this.changeTalismanEquip(p_l.dataSource.uuid,this.dataSource.tlisId)}else this.changeEquip(p_l.dataSource.uuid)}},b_s.prototype.updatePropItem=function(e,p_l,p_g){var b_s=p_l.dataSource,d_u=p_l.getChildByName("propertyLab"),b_e=p_l.getChildByName("valLab");d_u.text=d_v.getDesc(b_s.propOrdinal),b_e.text=b_s.value.toString()},b_s.greenColor="#00802e",b_s.redColor="#9f4543",b_s);function b_s(){var e=p_l.call(this)||this;return e._itemVo=null,e._tlisId=0,e._part=0,e.equipLst.vScrollBarSkin="",e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.TalismanWearEquipTip=p_g;var d_u=(b_e.setItemData=function(e,p_l,p_g){void 0===p_g&&(p_g=!1);var b_s=e.getChildByName("starBox"),d_u=e.getChildByName("bg"),d_m=e.getChildByName("icon"),d_w=e.getChildByName("click"),f_t=e.getChildByName("nameLabel"),v_z=e.getChildByName("squareBg"),d_h=e.getChildByName("quaEft");if(!e||!p_l)return b_s.visible=!1,d_m.visible=!1,f_t&&(f_t.visible=!1),d_h&&(d_h.visible=!1),d_u.index=0,void(v_z&&(v_z.index=0));b_s.visible=!0,d_m.visible=!0,f_t&&(f_t.visible=!0);var r_t=p_l,t_n=Config.item_equipment[r_t.id];if(p_g&&(d_w.dataSource=r_t,d_w.on(Laya.Event.CLICK,b_e,b_e.onItemClick)),d_u.index=t_n.quality-1,v_z&&(v_z.index=t_n.quality-1),TalismanModel.instance.setQuality(e,d_u,t_n.quality,130,130),Resource.ResManager.Instance.getImg(Resource.ResUrl.getIconUrl(t_n.icon),d_m),f_t&&(t_n.stateLevel&&(f_t.text=Config.state_state[t_n.stateLevel].desc),t_n.level&&(f_t.text=f_t.text+(t_n.level||1).toString()+(j_x(643)))),r_t&&r_t.dynamic&&""!=r_t.dynamic){var f_y=JSON.parse(r_t.dynamic);f_y&&f_y[2]?(b_s.visible=!0,TalismanModel.instance.changeStar(b_s,f_y[2].length)):b_s.visible=!1}else b_s.visible=!1},b_e.onItemClick=function(p_l){var p_g=p_l.target;switch(p_g.name){case"click":var b_s=p_g;b_s.dataSource&&e.TalisEquipTipsPanel.open(b_s.dataSource)}},b_e);function b_e(){}e.TalisEquipItem=d_u}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.talisman.talisman_fighting_tipUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Utfg(this)},b_s.open=function(e){Iout(e,UIM,b_s)},b_s.prototype.onRemove=function(){},b_s.prototype.updateData=function(){var e=this.dataSource;if(e){var p_l=Config.talisman_talisman[e.id];p_l.fightingDesc&&(Resource.ResUrl.getIconUrl(p_l.fightingDesc[0]),this.txt_title.text=p_l.fightingDesc[1],this.txt_desc.text=TalismanModel.instance.getFightingDesc(e.id))}},b_s.close=function(){Ozjg(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.TalismanFightingTipPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.talisman.talisman_helpUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Iqol(this,Laya)},b_s.open=function(){Wbfc(UIM,b_s)},b_s.prototype.onRemoved=function(){Ssjx(this,Laya)},b_s.prototype.onClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":b_s.close()}},b_s.close=function(){Qvqe(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.TalismanHelpPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.talisman.talismanUI,__extends(b_s,p_l),b_s.prototype.init=function(){this.comBoBox.visibleNum=4,this.talismanList.vScrollBarSkin="",this.talismanList.scrollBar.elasticDistance=100,this.talismanList.scrollBar.elasticBackTime=200,HoleMoudel.instance.reqFacility(),this.talismanList.itemRender=b_e,this._clipTab=new p_c(this.tab),this.talismanList.renderHandler=Laya.Handler.create(this,this.updateItem,[this.talismanList],!1),this.comBoBox.selectHandler=Laya.Handler.create(this,this.onComBoBoxSelect,null,!1),this.on(Laya.Event.ADDED,this,this.onAdded),this.on(Laya.Event.REMOVED,this,this.onRemove)},b_s.prototype.updateData=function(){if(0==this.tab.selectedIndex){this.talismanBox.visible=!0;var e=TalismanModel.instance.getDefaultSort();this.talismanList.array=e;var p_l=TalismanModel.instance.getTalismanVos(!0);this.countTxt.text=Utils.$((j_x("1327_711_799")+j_x("869_2348_716")+":{1}"),p_l?p_l.length:0)}else this.talismanBox.visible=!1;this.updateRedPoint()},b_s.prototype.delayUpdate=function(){var e=this.dataSource&&this.dataSource.index?this.dataSource.index:0;this.updateData(),this.tab.selectedIndex=e,0===this.tab.selectedIndex&&this.onTabSelect(0),this.onComBoBoxSelect(this.comBoBox.selectedIndex)},b_s.prototype.onClick=function(p_l){var p_g=p_l.target;switch(p_g.name){case"closeBtn":case"backBtn":b_s.close();break;default:"notOpen"===p_g.parent.name&&b_p.broadcastNotOpen();break;case"helpBtn":e.TalismanHelpPanel.open()}},b_s.prototype.onAdded=function(){Agyn(LED,l_r,this,Laya)},b_s.prototype.onRemove=function(){Mauk(Laya,this,LED,l_r)},b_s.open=function(e,p_l,p_g){void 0===e&&(e=0),void 0===p_l&&(p_l=0),void 0===p_g&&(p_g=!1),UIM.open(b_s,["talisman.atlas"],{index:e,tsId:p_l},p_g)},b_s.prototype.destroy=function(e){Snjq(e,p_l,this)},b_s.prototype.onComBoBoxSelect=function(e){Kqqi(e,TalismanModel,this)},b_s.prototype.updateContent=function(e){var p_l=(this.dataSource=e).index;this.tab.selectedIndex!=p_l&&(this.tab.selectedIndex=p_l)},b_s.prototype.onTabSelect=function(p_l,p_g){if(this.talismanBox.visible=!0,2===p_l&&this.item2.gray)return this.tab.selectedIndex=0,void b_p.broadcastNotice(Config.funcOpen[FuncDefine.seal].openError);if(this.updateData(),1===p_l){if(!p_k.instance.checkSystemOpen(FuncDefine.tssuit))return b_p.broadcastNotice(Config.funcOpen[FuncDefine.tssuit].openError),void(this.tab.selectedIndex=p_g);if(0<(d_u=this.dataSource.tsId)&&(this.dataSource.tsId=0,b_e=TalismanModel.instance.getTalismanById(d_u)))return b_s.close(),void e.TalismanSuitPanel.open(b_e);b_s.close(),e.TalismanSuitPanel.open(null)}var d_u,b_e;2===p_l&&(0<(d_u=this.dataSource.tsId)&&(this.dataSource.tsId=0,(b_e=TalismanModel.instance.getTalismanById(d_u))&&b_s.close()),e.TalismanSuitPanel.close(),e.TalismanSealPanel.open())},b_s.prototype.updateItem=function(e,p_l,p_g){e==this.talismanList&&p_l.setItemData(p_l.dataSource)},b_s.prototype.checkSystemOpen=function(p_l){void 0===p_l&&(p_l=!1),SystemNoticeManager.instance.setSpGrayByWinClass(this.item2,e.TalismanSealPanel,p_l,!0,this.lockImg2),SystemNoticeManager.instance.setSpGrayByFuncId(this.b_gongming,FuncDefine.tssuit,p_l,!0,this.lock_gongming)},b_s.prototype.updateRedPoint=function(){Qlmn(this,TalismanModel)},b_s.close=function(){Etie(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e._titleSelectedIndex=-1,e.init(),e.checkSystemOpen(!0),e.redPoint_2.visible=!1,e}e.TalismanPanel=p_g;var d_u,b_e=(d_u=ui.window.talisman.talisman_cellUI,__extends(d_m,d_u),d_m.prototype.clean=function(){Abqi(d_u,this)},d_m.prototype.setIcon=function(e){""!=e?(this.icon.visible=!0,this.icon=Resource.ResManager.Instance.getImg(e,this.icon)):this.icon.visible=!1},d_m.prototype.updateData=function(e,p_l){if(void 0===e&&(e=null),void 0===p_l&&(p_l=!1),null!=e){var p_g=this.dataSource;(p_g&&p_g.id==e.id||p_l)&&this.setItemData(e)}},d_m.prototype.stopActiveSuccEffect=function(){this.effect_active_succ&&(this.effect_active_succ.off(Laya.Event.COMPLETE,this,this.stopActiveSuccEffect),this.effect_active_succ.visible=!1,this.effect_active_succ.stop())},d_m.prototype.onClick=function(p_l){var b_s=this.dataSource;if(b_s){if(this._isChatShow)return void LED.event(l_r.CHAT_ITEM_SHOW,b_s);if(3==b_s.state)b_s.isActiveClick=!0,TalismanModel.instance.reqActiveTalisman(b_s.id);else if(0<b_s.state)p_g.close(),e.TalismanUpPanel.open(b_s),b_s.isNew=!1,this.newImg.visible=!1;else if(-1==b_s.state){var d_u=Config.talisman_talisman[b_s.id].showLink;if(d_u&&"openWin"==d_u[0]){var b_e=d_u[1].split("|");b_e&&0<b_e.length&&e.WindowClass.openWin(parseInt(b_e[0]),b_e[1]?[parseInt(b_e[1])]:null)}}else b_p.broadcastNotice((j_x("799_869_206")+j_x("2335_1796")))}},d_m.prototype.onAdd=function(e){Ohma(e,this,Laya,LED,l_r)},d_m.prototype.setItemData=function(e,p_l){void 0===p_l&&(p_l=!1),this._isChatShow=p_l,this.playActiveEffect(!1),this.playActiveSuccEffect(e.isActiveClick),e.isActiveClick=!1;var p_g=Config.talisman_talisman[e.id];1===e.state?(this.lvTxt.text=0<e.level?Utils.$(("{1}"+j_x(2342)),e.level):"",this.bgQuaClip.gray=!1,this.starBox.visible=!0,this.consumeTxt.changeText(""),this.showMaskSp(!1),this.lv_di.visible=!0):(this.lvTxt.text="",this.lv_di.visible=!(""===this.lvTxt.text),this.bgQuaClip.gray=!0,this.starBox.visible=!1,3==e.state?(this.consumeTxt.changeText(""),this.playActiveEffect(!0)):this.consumeTxt.changeText(p_g.activeCondDesc),this.showMaskSp(0===e.state||3==e.state||-1==e.state)),this.newImg.visible=e.isNew,this.nameTxt.color=Utils.ItemUtils.getTalismanQualityColor(p_g.quality),this.nameTxt.text=p_g.name;var b_s=p_g.quality-3;this.bgQuaClip.index=b_s<0?0:b_s;var d_u=Resource.ResUrl.getIconUrl(p_g.icon);this.setIcon(d_u),this.dataSource=e,this.typeClip.index=p_g.proType-1,this.readyImg.visible=!1,TalismanModel.instance.changeActStar(this.starBox,e.grade),this.redPoint.visible=!this._isChatShow&&(TalismanModel.instance.talismanCanReward(e)||TalismanModel.instance.talismanEquipRedPoint(e)&&-1!=e.state)||SkillModel.instance.isRedPoint(e.id,e.level,e.star,PassiveSkillType.TALISMAN)||TalismanModel.instance.redSoul(e)},d_m.prototype.playActiveSuccEffect=function(e){void 0===e&&(e=!0),(this.effect_active_succ.visible=e)?(this.effect_active_succ.on(Laya.Event.COMPLETE,this,this.stopActiveSuccEffect),this.effect_active_succ.play(!1)):this.effect_active_succ.stop()},d_m.prototype.onRemove=function(e){Qabz(e,this,Laya,LED,l_r)},d_m.prototype.playActiveEffect=function(e){void 0===e&&(e=!0),(this.effect_active.visible=e)?this.effect_active.play(!0):this.effect_active.play(!1)},d_m.prototype.showMaskSp=function(e){Uado(e,this)},d_m.prototype.checkIsMine=function(e){var p_l=this.dataSource;return p_l&&p_l.id===e},d_m);function d_m(){var e=d_u.call(this)||this;return e.on(Laya.Event.REMOVED,e,e.onRemove),e.on(Laya.Event.ADDED,e,e.onAdd),e.effect_active_succ.visible=!1,e.effect_active.visible=!1,e}e.TalismanCell=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.talisman.talisman_sealUI,__extends(b_s,p_l),b_s.prototype.init=function(){this.talismanList.vScrollBarSkin="",this.talismanList.scrollBar.elasticDistance=100,this.talismanList.scrollBar.elasticBackTime=200,this.talismanList.itemRender=b_e,this.talismanList.renderHandler=Laya.Handler.create(this,this.updateItem,[this.talismanList],!1),this._clipTab=new p_c(this.tab),TalismanModel.instance.reqTalismanList(),this.on(Laya.Event.ADDED,this,this.onAdded),this.on(Laya.Event.REMOVED,this,this.onRemove)},b_s.prototype.updateRedPoint=function(e){void 0===e&&(e=!1),this.redPoint_0.visible=TalismanModel.instance.hasTalismanCanReward(),this.redPoint_1.visible=TalismanModel.instance.hasTalismanSuitCanUp(),this.redPoint_2.visible=!1},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"closeBtn":case"backBtn":b_s.close(),e.TalismanPanel.close(),e.TalismanSuitPanel.close()}},b_s.prototype.onAdded=function(){Qaxg(this,Laya,LED,l_r)},b_s.prototype.sealBack=function(e,p_l){if(e){var p_g=TalismanModel.instance.getTalismanById(e),b_s=Config.talisman_talisman[p_g.id];1==p_l?p_q.open(p_g):b_p.broadcastNotice(Utils.$((j_x("799_869")+"{1} "+j_x("1048_1792_1316")+j_x("1230_402_2142")),b_s.name),1,"#64d225")}},b_s.prototype.updateList=function(){var e=[],p_l=parseInt((Config.global[GlobalDefine.ts_speel_max_slot].i_info/3).toString()),p_g=Config.global[GlobalDefine.ts_speel_max_slot].i_info%3;p_g&&(p_l+=p_g);for(var b_s=0;b_s<p_l;b_s++)e.push(b_s);this.talismanList.array=e,this.updateRedPoint(!0)},b_s.prototype.onRemove=function(){Gnfn(this,Laya,LED,l_r)},b_s.prototype.checkSystemOpen=function(p_l){void 0===p_l&&(p_l=!1),SystemNoticeManager.instance.setSpGrayByWinClass(this.item2,e.TalismanSealPanel,p_l),this.lockImg.visible=this.item2.gray},b_s.prototype.updateItem=function(e,p_l,p_g){e==this.talismanList&&p_l.setItemData(p_l.dataSource,p_g)},b_s.prototype.onTabSelect=function(p_l){0===p_l&&(e.TalismanPanel.open(),e.TalismanSuitPanel.close(),b_s.close()),1===p_l&&(e.TalismanSuitPanel.open(),e.TalismanPanel.close(),b_s.close())},b_s.open=function(){Ypos(UIM,b_s)},b_s.close=function(){Aolf(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.init(),e.checkSystemOpen(!0),e}e.TalismanSealPanel=p_g;var d_u,b_e=(d_u=ui.window.talisman.talisman_sealcellUI,__extends(d_m,d_u),d_m.prototype.init=function(){Uqhg(this,Laya)},d_m.prototype.updateList=function(e){this.list.renderHandler=Laya.Handler.create(this,this.updateItemDate,[this.list],!1);var p_l=3*e+1;1==e||4==e||7==e||10==e?(this.list.spaceX=35,this.list.x=39):(this.list.spaceX=14,this.list.x=57),this.list.array=[p_l,1+p_l,2+p_l]},d_m.prototype.onAdded=function(){Wpcy(this,Laya)},d_m.prototype.setItemData=function(e,p_l){return this.updateList(p_l),this.dataSource={index:p_l},this.dataSource.index},d_m.prototype.updateItemDate=function(e,p_l,p_g){if(e==this.list){var b_s=p_l.getChildByName("talismanBox"),d_u=p_l.getChildByName("unlockBtn"),b_e=p_l.getChildByName("addBtn"),d_m=b_s.getChildByName("icon"),d_w=b_s.getChildByName("nameTxt"),f_t=b_s.getChildByName("lvTxt"),v_z=b_s.getChildByName("relieveBtn"),d_h=p_l.getChildByName("bgQuaClip"),r_t=p_l.getChildByName("unlockEft");r_t.visible=!1;var t_n=p_l.dataSource,f_y=TalismanModel.instance.getspeelSlotCount();b_s.visible=!1,d_u.visible=!1,b_e.visible=!0,b_e.on(Laya.Event.CLICK,this,this.onClick),b_e.dataSource={id:t_n},d_u.on(Laya.Event.CLICK,this,this.onUnLock,[r_t]),v_z.on(Laya.Event.CLICK,this,this.onClick),v_z.dataSource={id:t_n},v_z.alpha=0,2<t_n&&(d_u.visible=!0,b_e.visible=!1,b_s.visible=!1),t_n<=f_y&&(d_u.visible=!1,b_e.visible=!0,b_s.visible=!1,v_z.alpha=1);var p_q=TalismanModel.instance.getTalismanSealArr();if(d_h.index=0,f_y+1==t_n&&(d_u.disabled=!1),f_y+1<t_n&&(d_u.disabled=!0),p_q[t_n-1]&&t_n<=f_y){v_z.alpha=0;var h_h=p_q[t_n-1],n_j=Config.talisman_talisman[h_h.id];if(!n_j||!h_h)return;if(b_s.visible=!0,d_u.visible=!1,b_e.visible=!1,h_h.speel){b_s.visible=!0;var j_l=Resource.ResUrl.getIconUrl(n_j.icon);this.setIcon(d_m,j_l),d_w.color=Utils.ItemUtils.getQualityColor(n_j.quality),d_w.text=n_j.name,f_t.text=0<h_h.level?Utils.$(("{1}"+j_x(2342)),h_h.level):"";var l_m=n_j.quality-3+1;d_h.index=l_m<0?0:l_m}h_h.speel||(b_e.visible=!0)}}},d_m.prototype.onRemove=function(){Yvwk(this,Laya)},d_m.prototype.onUnLock=function(e,p_l){var p_g=this;switch(p_l.target.name){case"unlockBtn":var b_s=TalismanModel.instance.getspeelSlotCount()+1;b_s>=Config.global[GlobalDefine.ts_speel_max_slot].i_info&&(b_s=Config.global[GlobalDefine.ts_speel_max_slot].i_info),b_p.confirm(Utils.$((j_x("68_2032_572")+j_x(2218)+"{1}"+j_x("1263_869_1048")+j_x("1745_1316_1230")+j_x("425_745")+""),Config.talisman_speelSlot[b_s].gold),(function(){b_p.checkCoin(1,Config.talisman_speelSlot[b_s].gold)?p_g.playEffect(e):b_p.broadcastNotice((j_x("1263_869_2462")+j_x(1779)))}))}},d_m.prototype.stopEffect=function(e){e&&(TalismanModel.instance.reqBuySPell(),e.off(Laya.Event.COMPLETE,this,this.stopEffect),e.visible=!1,e.stop())},d_m.prototype.playEffect=function(e){e&&(e.visible=!0,e.play(!1),e.on(Laya.Event.COMPLETE,this,this.stopEffect,[e]))},d_m.prototype.onClick=function(e){this.dataSource;var p_l=TalismanModel.instance.getTalismanSealArr(),p_g=TalismanModel.instance.getTalismanSealArr(!1),b_s=e.target;switch(b_s.name){case"addBtn":if(!b_s.dataSource.id)return;if(p_g.length<=Config.global[GlobalDefine.ts_speel_cond].i_info){b_p.broadcastNotice(Utils.$((j_x("799_869_2348")+j_x("716_1375_558")+"{1}"+j_x("2060_1919_1316")+j_x(1230)),Config.global[GlobalDefine.ts_speel_cond].i_info));break}f_t.open(b_s.dataSource.id);break;case"relieveBtn":var d_u=Config.talisman_talisman[p_l[b_s.dataSource.id-1].id];if(!d_u)break;j_y.confirmt(null,Utils.$((j_x("68_2032_572")+j_x(2218)+"<font color='#008931' >{1}</font>"+j_x("1263_869_1048")+j_x("1316_799_869")+"<font color='{2}'>{3}</font>"),Config.global[GlobalDefine.ts_unspeel_cost].i_info,"#008931",d_u.name),(function(){TalismanModel.instance.reqTalismanSpell(d_u.id,0)}))}},d_m.prototype.setIcon=function(e,p_l){""!=p_l?(e.visible=!0,e=Resource.ResManager.Instance.getImg(p_l,e)):e.visible=!1},d_m);function d_m(){var e=d_u.call(this)||this;return e.init(),e}e.TalismanSealCell=b_e;var d_w,f_t=(d_w=ui.window.talisman.talisman_sealselectUI,__extends(v_z,d_w),v_z.prototype.onAdded=function(){Cffu(this,Laya)},v_z.prototype.onClick=function(e){var p_l=e.target;switch(p_l.name){case"backBtn":case"closeBtn":v_z.close();break;case"sealBtn":this.dataSource;var p_g=p_l.dataSource;p_g&&r_t.open(p_g),v_z.close()}},v_z.prototype.setIcon=function(e,p_l){""!=e?(p_l.visible=!0,p_l=Resource.ResManager.Instance.getImg(e,p_l)):p_l.visible=!1},v_z.prototype.updateData=function(){var e=TalismanModel.instance.getTalismanSealArr(!1);TalismanModel.instance.changeSortType(5),this.list.array=e.sort(TalismanModel.instance.compareFun),this.list.array.length<=0&&(this.descTxt.visible=!0),this.numTxt.text=this.list.array.length.toString()},v_z.prototype.updateItem=function(e,p_l){var p_g=e.dataSource,b_s=Config.talisman_talisman[p_g.id],d_u=e.getChildByName("itemBox"),b_e=d_u.getChildByName("iconSp"),d_m=Resource.ResUrl.getIconUrl(b_s.icon);this.setIcon(d_m,b_e),e.getChildByName("sealBtn").dataSource=p_g,e.getChildByName("nameTxt").text=b_s.name,e.getChildByName("lvTxt").text=p_g.level.toString();var d_w=d_u.getChildByName("bg"),f_t=Config.talisman_talisman[p_g.id];0<f_t.quality&&(d_w.index=f_t.quality-1)},v_z.open=function(e){Upwe(e,UIM,v_z)},v_z.prototype.onRemove=function(){Ynkx(this,Laya)},v_z.close=function(){Gasr(UIM,v_z)},v_z);function v_z(){var e=d_w.call(this)||this;return e.list.vScrollBarSkin="",e.list.scrollBar.elasticDistance=100,e.list.scrollBar.elasticBackTime=200,e.list.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.TalismanSealSelectPanel=f_t;var d_h,r_t=(d_h=ui.window.talisman.talisman_sealtipUI,__extends(t_n,d_h),t_n.prototype.onAdded=function(){Yfvp(this,Laya)},t_n.prototype.updateData=function(){var e=this.dataSource.vo,p_l=Config.talisman_talisman[e.id],p_g=Resource.ResUrl.getIconUrl(p_l.icon),b_s=p_l.quality-3+1;this.bgQuaClip.index=b_s<0?0:b_s,this.setIcon(p_g,this.icon),this.nameTxt.text=p_l.name,this.lvTxt.text=e.level.toString()+(j_x(2342)),this.nameTxt.color=Utils.ItemUtils.getQualityColor(p_l.quality)},t_n.prototype.onRemove=function(){Kyso(this,Laya)},t_n.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"cancelBtn":t_n.close();break;case"affrimBtn":var p_l=this.dataSource.vo;TalismanModel.instance.reqTalismanSpell(p_l.id,1),t_n.close()}},t_n.prototype.setIcon=function(e,p_l){""!=e?(p_l.visible=!0,p_l=Resource.ResManager.Instance.getImg(e,p_l)):p_l.visible=!1},t_n.open=function(e){UIM.open(t_n,null,{vo:e},!1,!1,!0)},t_n.close=function(){Whwn(UIM,t_n)},t_n);function t_n(){var e=d_h.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.TalismanSealtipPanel=r_t;var f_y,p_q=(f_y=ui.window.talisman.talisman_sealpopupUI,__extends(h_h,f_y),h_h.prototype.onAdded=function(){Awlg(this,Laya)},h_h.prototype.playEffect=function(e){e&&(e.visible=!0,e.play(!1),e.on(Laya.Event.COMPLETE,this,this.stopEffect,[e]))},h_h.prototype.onClick=function(){Aspc(h_h)},h_h.open=function(e){UIM.open(h_h,["res/ui/talisman/fengyin_di.png"],{vo:e},!1,!1,!0)},h_h.prototype.updateData=function(){var e=this.dataSource.vo,p_l=Config.talisman_talisman[e.id];this.showRoleModel(p_l.avatar),this.nameTxt.text=p_l.name,this.nameTxt.color=Utils.ItemUtils.getQualityColor(p_l.quality),this.playEffect(this.playEft)},h_h.prototype.setIcon=function(e,p_l){""!=e?(p_l.visible=!0,p_l=Resource.ResManager.Instance.getImg(e,p_l)):p_l.visible=!1},h_h.prototype.stopEffect=function(e){e&&(e.off(Laya.Event.COMPLETE,this,this.stopEffect),e.visible=!1,this.sealImg.visible=!0,e.stop())},h_h.prototype.showRoleModel=function(e,p_l){void 0===p_l&&(p_l="stand"),e&&""!=e&&(this.icon.visible=!0,this._roleModel||(this._roleModel=new n_k,this.icon.addChild(this._roleModel)),this._roleModel.changeModel(e),this._roleModel.setAction(p_l,0,!0))},h_h.prototype.onRemove=function(){this.off(Laya.Event.CLICK,this,this.onClick),this._roleModel&&this._roleModel.clearRes()},h_h.close=function(){Oyvp(UIM,h_h)},h_h);function h_h(){var e=f_y.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.TalismanSealpopupPanel=p_q}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.talisman.talisman_activateSoulUI,__extends(b_s,p_l),b_s.prototype.onRemove=function(){Ytes(LED,l_r,this,Laya)},b_s.prototype.updateItem=function(e,p_l){Mntx(e,p_l)},b_s.prototype.resetSite=function(e){void 0===e&&(e=null),this.x=Stage.width-this.width>>1,this.y=Stage.height-this.height>>1},b_s.prototype.onAdded=function(){Qjzo(this,Laya,LED,l_r)},b_s.prototype.openUpLvPanel=function(){Spww(TalismanModel,this,b_s,e)},b_s.open=function(e){Uvgn(e,UIM,b_s)},b_s.prototype.onClick=function(e){var p_l=e.target,p_g=TalismanModel.instance.getTalismanById(this.dataSource.id);switch(p_l.name){case"backBtn":b_s.close();case"closeBtn":b_s.close();break;case"activateBtn":if(!this.redPoint.visible){var d_u=TalismanModel.instance.getActivateSoulConsume(p_g.id,p_g.qihunStar+1);return r_f.instance.isWindow(d_u[0][0]),void b_s.close()}TalismanModel.instance.reqTalismanSoulActive(p_g.id)}},b_s.prototype.updateSoulRedPoint=function(e){var p_l=this.dataSource,p_g=TalismanModel.instance.getActivateSoulConsume(p_l.id,p_l.qihunStar+1);p_g&&e&&e.id==p_g[0][0]&&(this.redPoint.visible=TalismanModel.instance.isCanActivateSoul(p_g))},b_s.prototype.updateView=function(){var e=this.dataSource,p_l=TalismanModel.instance.getActivateSoulConsume(e.id,e.qihunStar+1);this.redPoint.visible=TalismanModel.instance.isCanActivateSoul(p_l),this.nameTxt.text=Config.talisman_talisman[e.id].petSoulName;var p_g=e.qihunStar+1,b_s=TalismanModel.instance.getSoulStarCfg(e.id,p_g),d_u=e.soulPcts,b_e=e.qihunLevel+1,d_m=b_p.addProps(d_u,b_e,[]);this.list_prop.array=d_m,this.nullTxt.visible=!0;var d_w=Config.CItem(p_l[0][0]);if(this.costImg.skin=Resource.ResUrl.getIconUrl(d_w.icon),this.tipTxt.text=(j_x("774_1624_799")+j_x("869_15_2342"))+b_s.fbLevel+(j_x(2342)),this.tipTxt.color=e.level>=b_s.fbLevel?"#008931":"#c92828",p_l){var f_t=BagModel.instance.getItemCountByItemID(p_l[0][0]);this.costTxt.text=f_t+"/"+p_l[0][1],this.costTxt.color=TalismanModel.instance.isCanActivateSoul(p_l)?"#008931":"#c92828"}if(b_s){this.icon.skin=Resource.ResUrl.getIconUrl(b_s.Image),this.nameTxt.color=Resource.ResManager.getQualityColor(b_s.quality),this.quality.index=b_s.quality-1,this.curEffTxt.text=TalismanModel.instance.showSoulPropStr(b_s);var v_z=this.quality.parent;TalismanModel.instance.setQuality(v_z,this.quality,b_s.quality,177,177)}},b_s.close=function(){Mxrb(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.TalismanSoulActivatePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.talisman.talisman_upSoulgradeUI,__extends(b_s,p_l),b_s.prototype.onRemove=function(){Yxdp(LED,l_r,this,Laya)},b_s.prototype.updateSoulRedPoint=function(e){var p_l=TalismanModel.instance.getTalismanById(this.dataSource.id),p_g=p_l.qihunStar+1,b_s=TalismanModel.instance.getSoulStarCfg(p_l.id,p_g),d_u=TalismanModel.instance.getActivateSoulConsume(p_l.id,p_g);d_u&&e&&e.id==d_u[0][0]&&(this.redPoint.visible=TalismanModel.instance.isCanActivateSoul(d_u)&&p_l.level>=b_s.fbLevel)},b_s.open=function(e){Sujp(e,UIM,b_s)},b_s.prototype.updateCost=function(e,p_l){if(e.isShowName=!1,e.setItemData(e.dataSource,ItemBoxDefine.MODULE_ITEM,!0),this.costList.contains(e)){var p_g=e.dataSource,b_s=p_g.amount,d_u=BagModel.instance.getItemCountByItemID(p_g.id);e.numTxt.color=d_u<b_s?Utils.Color.RED:Utils.Color.NAME_GREEN,e.numTxt.text=d_u+"/"+b_s}},b_s.prototype.onAdded=function(){Kdyg(this,e,Laya,LED,l_r)},b_s.prototype.playEffectComplete=function(p_l){if(p_l)if(p_l.visible=!1,p_l===this.effect_left)this.playEffect(this.effect_mid);else if(p_l===this.effect_mid)this.playEffect(this.effect_right);else{var p_g=this.dataSource,d_u=TalismanModel.instance.getTalismanById(p_g.id);this._isPlaying=!1,b_s.close(),e.TalismanSoulUpPanel.open(d_u)}},b_s.prototype.resetSite=function(e){void 0===e&&(e=null),this.x=Stage.width-this.width>>1,this.y=Stage.height-this.height>>1},b_s.prototype.playEffect=function(e){e&&(e.visible=!0,this._isPlaying=!0,e.play(!1))},b_s.prototype.onClick=function(e){var p_l=e.target,p_g=TalismanModel.instance.getTalismanById(this.dataSource.id),d_u=TalismanModel.instance.getSoulMaxStar(p_g.id),b_e=p_g.qihunStar+1,d_m=TalismanModel.instance.getActivateSoulConsume(p_g.id,b_e),d_w=TalismanModel.instance.getSoulStarCfg(p_g.id,b_e);switch(p_l.name){case"backBtn":b_s.close();case"closeBtn":b_s.close();break;case"upBtn":if(p_g.qihunStar==d_u)return void b_p.broadcastNotice((j_x("1300_1117_1067")+j_x(2128)));if(!TalismanModel.instance.isCanActivateSoul(d_m)){var f_t=TalismanModel.instance.getActivateSoulConsume(p_g.id,p_g.qihunStar);return r_f.instance.isWindow(f_t[0][0]),void b_s.close()}if(p_g.level<d_w.fbLevel)return void b_p.broadcastNotice((j_x("799_869_15")+j_x("2342_2462_1779")));this._isPlaying||(TalismanModel.instance.reqTalismanSoulStarUp(p_g.id),Resource.SoundManager.instance.playSoundById(7,!1),this.playEffect(this.effect_left))}},b_s.prototype.updateView=function(){var e=TalismanModel.instance.getTalismanById(this.dataSource.id),p_l=TalismanModel.instance.getActivateSoulConsume(e.id,e.qihunStar+1);this.nameTxt.text=Config.talisman_talisman[e.id].petSoulName,this.nameTxt_1.text=Config.talisman_talisman[e.id].petSoulName;var p_g=e.qihunStar+1,b_s=(TalismanModel.instance.getSoulMaxLevel(e.id),TalismanModel.instance.getSoulStarCfg(e.id,e.qihunStar));this.icon.skin=Resource.ResUrl.getIconUrl(b_s.Image),this.nameTxt.color=Resource.ResManager.getQualityColor(b_s.quality),this.quality.index=b_s.quality-1,this.atk1Txt.text=TalismanModel.instance.showSoulPropStr(b_s);var d_u=this.quality.parent;TalismanModel.instance.setQuality(d_u,this.quality,b_s.quality,177,177);var b_e=TalismanModel.instance.getSoulStarCfg(e.id,p_g);this.costList.array=b_p.getRewardDatas(p_l),this.level1Txt.text=(j_x("15_2342_1067")+j_x(2128))+b_s.lvLmt+(j_x(2342)),b_e&&(this.icon_1.skin=Resource.ResUrl.getIconUrl(b_e.Image),this.nameTxt_1.color=Resource.ResManager.getQualityColor(b_e.quality),this.quality1.index=b_e.quality-1,d_u=this.quality1.parent,TalismanModel.instance.setQuality(d_u,this.quality1,b_e.quality,177,177),this.tipTxt.text=(j_x("1653_128_799")+j_x("869_1117_1012"))+b_e.fbLevel+(j_x(2342)),this.tipTxt.color=e.level>=b_e.fbLevel?"#008931":"#c92828",this.redPoint.visible=TalismanModel.instance.isCanActivateSoul(p_l)&&e.level>=b_e.fbLevel,this.level2Txt.text=(j_x("15_2342_1067")+j_x(2128))+b_e.lvLmt+(j_x(2342)),this.atk2Txt.text=TalismanModel.instance.showSoulPropStr(b_e))},b_s.close=function(){Edll(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e._isPlaying=!1,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.TalismanSoulUpGradePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.talisman.talisman_upSoulUI,__extends(b_s,p_l),b_s.prototype.onRemove=function(){Sjoj(LED,l_r,this,Laya)},b_s.open=function(e){Wgrw(e,UIM,b_s)},b_s.prototype.playEff=function(){Wbjd(Laya,this)},b_s.prototype.updateView=function(e){void 0===e&&(e=!1);var p_l=this.list_prop,p_g=this.list_prop_next,b_s=[],d_u=TalismanModel.instance.getTalismanById(this.dataSource.id),b_e=d_u.qihunLevel,d_m=TalismanModel.instance.getSoulConsume(d_u.id,2),d_w=TalismanModel.instance.getActivateSoulConsume(d_u.id,d_u.qihunStar+1),f_t=TalismanModel.instance.getSoulMaxLevel(d_u.id),v_z=TalismanModel.instance.isCanUpSoul(d_m[0],b_e+1,d_u.id)&&TalismanModel.instance.isCanUpSoulInCoin(d_m[1],b_e+1,d_u.id)&&b_e<f_t-1,d_h=Config.talisman_talisman[d_u.id].petSoulName;p_l.visible=!0;var r_t=b_e+1,t_n=d_u.soulPcts,f_y=d_u.qihunStar+1,p_q=TalismanModel.instance.getSoulLvLmtArr(d_u.id);-1!=p_q.indexOf(r_t)&&p_q.indexOf(r_t)+1==d_u.qihunStar?(this.costBox.visible=!1,this.upBtn.label=(j_x(371)+" "+j_x(784)),this.txt_max.visible=!0):(this.costBox.visible=!0,this.upBtn.label=(j_x(371)+" "+j_x(2342)),this.txt_max.visible=!1),p_g.visible=!this.txt_max.visible,this.nextEffTxt.visible=!this.txt_max.visible,this.pinzhiTxt.visible=!this.txt_max.visible,this.curLevel.text=d_h+" Lv"+b_e,this.nextLevel.text=r_t<f_t?d_h+" Lv"+r_t:(j_x("2398_1224_1300")+j_x("1463_2342"));var h_h=b_p.addProps(t_n,b_e,b_s);p_l.array=h_h,b_s=[];var n_j=b_p.addProps(t_n,r_t,b_s);p_g.array=n_j;var j_l=TalismanModel.instance.getSoulStarCfg(d_u.id,f_y),l_m=Config.CItem(d_m[0][0]);this.costImg.skin=Resource.ResUrl.getIconUrl(l_m.icon);var z_m=Config.CItem(d_m[1][0]);this.coinImg.skin=Resource.ResUrl.getIconUrl(z_m.icon);var h_b=TalismanModel.instance.getSoulCfg(d_u.id),t_i=h_b.consumeUp[0],n_f=BagModel.instance.getItemCountByItemID(d_m[0][0]);this.costTxt.text=n_f+"/"+(d_m[0][1]+t_i*r_t);var t_s=TalismanModel.instance.isCanUpSoul(d_m[0],r_t,d_u.id);this.costTxt.color=t_s?"#008931":"#c92828";var v_n=h_b.consumeUp[1],b_o=LgcM.ins.heroVo.copper/1e4,b_x=Math.round(10*b_o)/10,v_s=(d_m[1][1]+v_n*r_t)/1e4,r_c=Math.round(10*v_s)/10;this.coinTxt.text=b_x+(j_x(729)+"/")+r_c+(j_x(729));var b_n=TalismanModel.instance.isCanUpSoulInCoin(d_m[1],r_t,d_u.id);this.coinTxt.color=b_n?"#008931":"#c92828",this.redPoint.visible=!this.txt_max.visible&&v_z;var v_p=TalismanModel.instance.getSoulStarCfg(d_u.id,d_u.qihunStar);if(v_p){this.icon.skin=Resource.ResUrl.getIconUrl(v_p.Image),this.curLevel.color=Resource.ResManager.getQualityColor(v_p.quality),this.nextLevel.color=Resource.ResManager.getQualityColor(v_p.quality),this.quality1.index=v_p.quality-1;var d_d=this.quality1.parent,h_q=this.quality.parent;TalismanModel.instance.setQuality(d_d,this.quality1,v_p.quality,177,177),this.curLevel.color=Resource.ResManager.getQualityColor(v_p.quality),this.icon1.skin=Resource.ResUrl.getIconUrl(v_p.Image),this.curEffTxt.text=TalismanModel.instance.showSoulPropStr(v_p),this.quality.index=v_p.quality-1;var x_f=TalismanModel.instance.getSoulStarCfg(d_u.id,d_u.qihunStar+1);if(x_f&&(this.pinzhiTxt.text=("("+j_x("2379_784_415")+j_x("1621_437_223"))+x_f.effect[0][1]/100+"%)"),TalismanModel.instance.setQuality(h_q,this.quality,v_p.quality,177,177),this.nextEffTxt.text=TalismanModel.instance.showSoulPropStr(v_p),j_l){var j_s=TalismanModel.instance.isCanActivateSoul(d_w)&&d_u.level>=j_l.fbLevel&&b_e<f_t-1;this.redPoint.visible=!this.txt_max.visible&&v_z||this.txt_max.visible&&j_s}}},b_s.prototype.playEffect=function(e){e&&(e.visible=!0,e.play(!1))},b_s.prototype.onClick=function(p_l){var p_g=p_l.target,d_u=TalismanModel.instance.getTalismanById(this.dataSource.id),b_e=(TalismanModel.instance.getSoulConsume(d_u.id,2),d_u.qihunLevel);switch(p_g.name){case"backBtn":b_s.close();case"closeBtn":b_s.close();break;case"upBtn":var d_m;d_m=TalismanModel.instance.getSoulConsume(d_u.id,2);var d_w=TalismanModel.instance.getSoulLvLmtArr(d_u.id);if(-1!=d_w.indexOf(b_e+1)&&d_w.indexOf(b_e+1)+1==d_u.qihunStar){if(b_e==TalismanModel.instance.getSoulMaxLevel(d_u.id)-1)return void b_p.broadcastNotice((j_x("1300_371_1012")+j_x("1081_1375_15")+j_x(2342)+""+j_x("814_799_371")+j_x(784)));e.TalismanSoulUpGradePanel.open(d_u)}else{var f_t=TalismanModel.instance.isCanUpSoul(d_m[0],b_e+1,d_u.id),v_z=TalismanModel.instance.isCanUpSoulInCoin(d_m[1],b_e+1,d_u.id);if(!f_t)return r_f.instance.isWindow(d_m[0][0]),void b_s.close();if(!v_z)return r_f.instance.isWindow(d_m[1][0]),void b_s.close();TalismanModel.instance.reqTalismanSoulUpLv(d_u.id)}}},b_s.prototype.updateItem=function(e,p_l){Kfrd(e,p_l,b_p)},b_s.prototype.resetSite=function(e){void 0===e&&(e=null),this.x=Stage.width-this.width>>1,this.y=Stage.height-this.height>>1},b_s.prototype.updateItem1=function(e,p_l){Mxwk(e,p_l,b_p)},b_s.prototype.playEffectComplete=function(e){e&&(e.visible=!1)},b_s.prototype.updateSoulRedPoint=function(e){var p_l=TalismanModel.instance.getTalismanById(this.dataSource.id),p_g=p_l.qihunLevel,b_s=TalismanModel.instance.getSoulConsume(p_l.id,2),d_u=TalismanModel.instance.getSoulMaxLevel(p_l.id),b_e=TalismanModel.instance.isCanUpSoul(b_s[0],p_g+1,p_l.id)&&TalismanModel.instance.isCanUpSoulInCoin(b_s[1],p_g+1,p_l.id)&&p_g<d_u-1;b_s&&e&&(e.id==b_s[0][0]||e.id==b_s[1][0])&&(this.redPoint.visible=!this.txt_max.visible&&b_e)},b_s.prototype.onAdded=function(){Qczo(this,Laya,LED,l_r)},b_s.close=function(){Ggzm(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.TalismanSoulUpPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.talisman.talisman_stoveUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Ibuk(this,Laya,LED,l_r)},b_s.open=function(){Wjaz(UIM,b_s)},b_s.prototype.updateItem=function(e,p_l){Etsb(e,p_l)},b_s.prototype.onClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":b_s.close();break;case"upBtn":break;case"helpBtn":r_t.open()}},b_s.prototype.createTweens=function(e){e.y=1023,laya.utils.Tween.to(e,{j_l:1013},500,Laya.Ease.linearIn,Laya.Handler.create(this,this.createTween,[e]))},b_s.prototype.onRemove=function(){Ifqx(this,Laya,LED,l_r,laya)},b_s.prototype.createTween=function(e){e.visible=!0,e.y=1013,laya.utils.Tween.to(e,{j_l:1023},500,Laya.Ease.linearIn,Laya.Handler.create(this,this.createTweens,[e]))},b_s.prototype.update=function(){TalismanModel.instance.changeSortType(0),this.list.array=TalismanModel.instance.getStoves(),1==this.list.array.length&&TalismanModel.instance.reqTalismanBuyStove();var e=TalismanModel.instance.stoverefineMax,p_l=LgcM.ins.heroVo;this.stoveTxt.text=Utils.$((j_x("1327_711_1359")+j_x(425)+"{1}/{2}"),e,p_l.tsStove)},b_s.close=function(){Affo(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.listPanel.vScrollBarSkin="",e.list.itemRender=b_e,e.list.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.TalismanStovePanel=p_g;var d_u,b_e=(d_u=ui.window.talisman.talisman_stove_cellUI,__extends(d_m,d_u),d_m.prototype.onClick=function(e){switch(e.target.name){case"addStove":var p_l=this.dataSource;f_t.open(p_l);break;case"addBtn":LgcM.ins.heroVo;var p_g=Config.talisman_stove[this._slotId];j_y.confirm(Utils.$((j_x("68_2032_1661")+j_x(1502)+"{1}"+j_x("1263_869")+""+j_x("2204_2258_1359")+j_x(425)+""),p_g.gold),this.sureToOpen,this._slotId);break;case"icon":if((this._talismanVo?this._talismanVo.stoveRemainTime:0)<=0&&0<this._slotId){TalismanModel.instance.reqTalimanStoveRefineStop(this._slotId);var b_s=UIM.instance.getMainLetUI();if(!b_s||!this.icon||!this._talismanVo)return;var d_u=new Laya.Point;(d_u=this.icon.localToGlobal(d_u)).x=d_u.x+22,d_u.y=d_u.y+40;var b_e=new Laya.Point;b_e=b_s.bagbtn.localToGlobal(b_e);var d_m=Config.talisman_talisman[this._talismanVo.id].icon;r_n.instance.flyToBagEffect(d_m,d_u,b_e,null)}}},d_m.prototype.clear=function(){Gniv(Laya,this)},d_m.prototype.setItemData=function(e,p_l){if(this._slotId=p_l+1,this._talismanVo&&(this._talismanVo=null,this.updateLabel()),this.stoveBox.visible=-1!=e,this.addBtn.visible=!this.stoveBox.visible,this.stoveBox.visible){if(this._talismanVo=TalismanModel.instance.getTalismanVoByStove(e),this._talismanVo){0<this._talismanVo.stoveRemainTime?(Laya.timer.loop(1e3,this,this.updateLabel),this.updateLabel()):this.valueTxt.text=(j_x("266_489_1917")+j_x("402_1777_932")+j_x("1835_2111_2379"));var p_g=Resource.ResUrl.getIconUrl(Config.talisman_talisman[this._talismanVo.id].icon);this.setIcon(p_g,this.icon)}else this.valueTxt.text=(j_x("932_1835_1336")+j_x("223_799_869"));this.addStove.visible=null===this._talismanVo,this.icon.visible=!this.addStove.visible}this.dataSource=e},d_m.prototype.updateLabel=function(){if(null!=this.dataSource){var e=this._talismanVo?this._talismanVo.stoveRemainTime:0;if(0!=e&&(this.eftStove.visible=!0,this.eftStove.autoPlay=!0),e<=0)return Laya.timer.clear(this,this.updateLabel),this.valueTxt.text=Utils.$("{1}",(j_x("266_2398_1917")+j_x(402))),this.eftStove.visible=!1,void(this.eftStove.autoPlay=!1);var p_l=Utils.formatTimeStr(e);this.valueTxt.text=p_l}else this.clear()},d_m.prototype.sureToOpen=function(e){var p_l=TalismanModel.instance.getStoves(),p_g=Config.talisman_stove[p_l.length],b_s=LgcM.ins.heroVo;p_g&&b_s.gold<p_g.gold?b_p.broadcastNotice((j_x("1263_869_2462")+j_x(1779))+p_g.gold):TalismanModel.instance.reqTalismanBuyStove()},d_m.prototype.setIcon=function(e,p_l){""!=e?(p_l.visible=!0,p_l=Resource.ResManager.Instance.getImg(e,p_l)):p_l.visible=!1},d_m);function d_m(){var e=d_u.call(this)||this;return e.addStove.on(Laya.Event.CLICK,e,e.onClick),e.addBtn.on(Laya.Event.CLICK,e,e.onClick),e.icon.on(Laya.Event.CLICK,e,e.onClick),e}e.TalismanStoveCell=b_e;var d_w,f_t=(d_w=ui.window.talisman.talisman_stove_selectUI,__extends(v_z,d_w),v_z.prototype.onAdded=function(){Yjfy(this,Laya)},v_z.prototype.updateData=function(){var e=TalismanModel.instance.getTalismanSealArr(!1);TalismanModel.instance.changeSortType(0),e=e.sort(TalismanModel.instance.compareFun),this.list.array=e,0<this.list.array.length&&(this.tiplab.visible=!1),this.list.array.length<=0&&(this.tiplab.visible=!0);var p_l=Config.global[GlobalDefine.talisman_refine_exp].t_info;this.expTxt.text=Utils.$(("{1}"+j_x("980_799_1241")+j_x(144)),p_l[0]);var p_g=Config.global[GlobalDefine.talisman_refine_sec].i_info;this.quaTxt.text=Utils.$((j_x("266_489_1702")+j_x(1066)+"{1}"),Utils.formatTimeStr2(p_g,!0))},v_z.prototype.onClick=function(e){var p_l=e.target;switch(p_l.name){case"backBtn":case"closeBtn":v_z.close();break;case"raplaceBtn":var p_g=this.dataSource,b_s=p_l.dataSource;b_s&&TalismanModel.instance.reqTalismanStoveRefine(b_s.id,p_g),v_z.close()}},v_z.open=function(e){Gneq(e,UIM,v_z)},v_z.prototype.updateItem=function(e,p_l){var p_g=e.dataSource,b_s=Config.talisman_talisman[p_g.id],d_u=e.getChildByName("itemBox"),b_e=d_u.getChildByName("iconSp"),d_m=Resource.ResUrl.getIconUrl(b_s.icon);this.setIcon(d_m,b_e);var d_w=e.getChildByName("placeTxt");d_w.visible=0<p_g.stove;var f_t=e.getChildByName("raplaceBtn");f_t.visible=!d_w.visible,f_t.dataSource=p_g,e.getChildByName("nameTxt").text=b_s.name;var v_z=e.getChildByName("valueTxt"),d_h=TalismanModel.instance.calDeploymentsApt(p_g.deployments);v_z.text=d_h.toString(),e.getChildByName("tacticalTxt").text=p_g.deployExp.toString();var r_t=d_u.getChildByName("bg"),t_n=Config.talisman_talisman[p_g.id];0<t_n.quality&&(r_t.index=t_n.quality-1)},v_z.prototype.setIcon=function(e,p_l){""!=e?(p_l.visible=!0,p_l=Resource.ResManager.Instance.getImg(e,p_l)):p_l.visible=!1},v_z.prototype.onRemove=function(){Gfec(this,Laya)},v_z.close=function(){Alpa(UIM,v_z)},v_z);function v_z(){var e=d_w.call(this)||this;return e.list.vScrollBarSkin="",e.list.scrollBar.elasticDistance=100,e.list.scrollBar.elasticBackTime=200,e.list.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.TalismanStoveSelectPanel=f_t;var d_h,r_t=(d_h=ui.window.talisman.talisman_stove_DescUI,__extends(t_n,d_h),t_n.prototype.onAdded=function(){Ixyf(this,Laya)},t_n.open=function(){Gsiq(UIM,t_n)},t_n.prototype.onRemoved=function(){Exav(this,Laya)},t_n.prototype.onClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":t_n.close()}},t_n.close=function(){Ynsi(UIM,t_n)},t_n);function t_n(){var e=d_h.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e}e.TalismanStoveHelpPanel=r_t}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.talisman.talisman_suitUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Srum(this,Laya,LED,l_r)},b_s.prototype.setConditonInfo=function(e){if(this.txt_condition.visible){var p_l=e.nextLvId,p_g=Config.talisman_suits[p_l],b_s=(j_x("1048_1745_42")+j_x("1049_799_869"));p_g.condition?b_s=Utils.$((j_x("42_1049_799")+j_x("869_1117_1012")+"{1}"+j_x(2342)),p_g.condition):1<p_g.gradeLimit&&(b_s=Utils.$((j_x("42_1049_799")+j_x("869_1117_1012")+"{1}"+j_x(1148)),p_g.gradeLimit-1)),this.txt_condition.text=b_s;var d_u=e.calMeetLvNum();this.txt_progress.color=2<=d_u?Utils.Color.GREEN:Utils.Color.RED,this.txt_progress.text=Utils.$("({1}/2)",d_u)}},b_s.prototype.updateRedPoint=function(e){void 0===e&&(e=!1),e||(this.redPoint_0.visible=TalismanModel.instance.hasTalismanCanReward()),this.redPoint_1.visible=TalismanModel.instance.hasTalismanSuitCanUp()},b_s.prototype.updateLvUp=function(e){if(void 0===e&&(e=null),e){var p_l=this.list_title.selectedItem.suitId,p_g=TalismanModel.instance.getSuitDatas().concat();if(this.list_title.array=p_g.sort(this.sortSuit),this.list_title.selectedItem.suitId===p_l)this.updateSelectView();else{var b_s=0;for(var d_u in p_g)if(p_g[d_u].suitId==p_l){b_s=parseInt(d_u);break}this.list_title.selectedIndex=b_s}Resource.SoundManager.instance.playSoundById(4,!1),1===e.level?this.playActiveSuccEffect():this.playUpLvEffect(),this.updateRedPoint(!0)}},b_s.prototype.onTabSelect=function(p_l){if(0===p_l&&(e.TalismanPanel.open(),b_s.close()),2===p_l){if(this.item2.gray)return this.tab.selectedIndex=1,void b_p.broadcastNotice(Config.funcOpen[FuncDefine.seal].openError);e.TalismanSealPanel.open(),b_s.close()}},b_s.prototype.setIcon=function(e,p_l){""!=e?(p_l.visible=!0,p_l=Resource.ResManager.Instance.getImg(e,p_l)):p_l.visible=!1},b_s.prototype.updateContent=function(e){var p_l=e?e.id:-1,p_g=TalismanModel.instance.getSuitDatas().concat();if(this.list_title.array=p_g.sort(this.sortSuit),0<p_l){var b_s=TalismanModel.instance.getSuitId(p_l);for(var d_u in this.list_title.array)this.list_title.array[d_u].suitId==b_s&&(this.list_title.selectedIndex=parseInt(d_u))}else this.list_title.selectedIndex=0;this.dataSource=e},b_s.prototype.getAddProps=function(e,p_l){return Erky(e,p_l)},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"backBtn":case"closeBtn":b_s.close();break;case"model_attack":var p_g=this.list_title.selectedItem;if(p_g){var d_u=Config.talisman_suits[p_g.configId].talisman[0];if(1==(b_e=TalismanModel.instance.getTalismanById(d_u)).speel){b_p.broadcastNotice((j_x("389_799_869")+j_x("1300_1629_1316")+j_x(1230)));break}b_e&&1===b_e.state?(e.TalismanUpPanel.open(b_e),b_s.close()):b_p.broadcastNotice((j_x("1777_320_2335")+j_x("1796_799_869")))}break;case"model_def":if(p_g=this.list_title.selectedItem){var b_e;if(d_u=Config.talisman_suits[p_g.configId].talisman[1],1==(b_e=TalismanModel.instance.getTalismanById(d_u)).speel){b_p.broadcastNotice((j_x("389_799_869")+j_x("1300_1629_1316")+j_x(1230)));break}b_e&&1===b_e.state?(e.TalismanUpPanel.open(b_e),b_s.close()):b_p.broadcastNotice((j_x("1777_320_2335")+j_x("1796_799_869")))}break;case"btn_up":if(p_g=this.list_title.selectedItem){if(p_g.calMeetLvNum()<2)return void(p_g.GetIfString()<=0?b_p.broadcastNotice((j_x("799_869_1148")+j_x("2342_2462_1779"))):b_p.broadcastNotice((j_x("799_869_15")+j_x("2342_2462_1779"))));var d_m=p_g.nextLvId;if(!b_p.checkConsume(Config.talisman_suits[d_m].consume))return void r_f.instance.isWindow(Config.talisman_suits[d_m].consume[0][0]);TalismanModel.instance.reqSuitsUpLv(p_g.suitId)}break;case"helpBtn":e.TalismanHelpPanel.open()}},b_s.prototype.onRemove=function(){Mhcv(this,Laya,LED,l_r)},b_s.prototype.stopUpLvEffect=function(){this.effect_up_succ&&(this.effect_up_succ.off(Laya.Event.COMPLETE,this,this.stopUpLvEffect),this.effect_up_succ.visible=!1,this.effect_up_succ.stop())},b_s.prototype.checkSystemOpen=function(p_l){void 0===p_l&&(p_l=!1),SystemNoticeManager.instance.setSpGrayByWinClass(this.item2,e.TalismanSealPanel,p_l),this.lockImg.visible=this.item2.gray},b_s.prototype.playUpLvEffect=function(){this.effect_up_succ&&(this.effect_up_succ.visible=!0,this.effect_up_succ.play(!1),this.effect_up_succ.on(Laya.Event.COMPLETE,this,this.stopUpLvEffect))},b_s.prototype.setCosumInfo=function(e){if(this.cosumBox.visible){var p_l=e.nextLvId,p_g=Config.talisman_suits[p_l],b_s=b_p.getRewardDatas(p_g.consume);if(!b_s||0===b_s.length)return void(this.cosumBox.visible=!1);var d_u=this.cosumBox;d_u.removeChildren();var b_e=0,d_m=new Laya.Text;d_m.font=b_p.config.font,d_m.fontSize=b_p.config.fontSize,d_m.color="#4a728e",d_m.text=(j_x("1661_1502")+""),d_u.addChild(d_m),d_m.y=7,b_e=d_m.x+d_m.textWidth-15;for(var d_w=0,f_t=b_s;d_w<f_t.length;d_w++){var v_z=f_t[d_w],d_h="";d_h=v_z.id<100?Config.item_coin[v_z.id].minIcon:Config.CItem(v_z.id).icon,d_h=Resource.ResUrl.getIconUrl(d_h);var r_t=new Laya.Sprite;d_u.addChild(r_t),Resource.ResManager.Instance.getImg(d_h,r_t,40,40),r_t.x=b_e+10,b_e+=40;var t_n=v_z.amount,f_y=BagModel.instance.getItemCountByItemID(v_z.id),p_q=new Laya.Text;p_q.font=b_p.config.font,p_q.fontSize=b_p.config.fontSize,d_u.addChild(p_q),p_q.text=f_y+"/"+t_n,p_q.color=t_n<=f_y?"#00802e":"#b92929",p_q.x=b_e+5,p_q.y=7,b_e=p_q.x+p_q.textWidth}d_u.x=this.width-2*this.list_title.width-b_e>>1}},b_s.prototype.setItemData=function(e,p_l){var p_g=p_l.getChildByName("lvTxt"),b_s=p_l.getChildByName("lv_di"),d_u=p_l.getChildByName("icon"),b_e=p_l.getChildByName("starBox"),d_m=p_l.getChildByName("nameTxt"),d_w=p_l.getChildByName("bgQuaClip"),f_t=p_l.getChildByName("maskSp"),v_z=p_l.getChildByName("consumeTxt"),d_h=p_l.getChildByName("sealimg"),r_t=p_l.getChildByName("type_clip");if(e){var t_n=Config.talisman_talisman[e.id];d_h.visible=!1,1==e.speel&&(d_h.visible=!0),1===e.state?(p_g.text=0<e.level?Utils.$(("{1}"+j_x(2342)),e.level):"",b_e.visible=!0,b_s.visible=!0,v_z.text="",f_t.visible=!1):(p_g.text="",b_s.visible=!(""===p_g.text),b_e.visible=!1,f_t.visible=!0,d_h.visible=!1,v_z.text=t_n.activeCondDesc),d_m.color=Utils.ItemUtils.getTalismanQualityColor(t_n.quality),d_m.text=t_n.name;var f_y=t_n.quality-3;d_w.index=f_y<0?0:f_y;var p_q=Resource.ResUrl.getIconUrl(t_n.icon);this.setIcon(p_q,d_u),this.dataSource=e,r_t.index=1===t_n.type?1:0,TalismanModel.instance.changeActStar(b_e,e.grade)}},b_s.prototype.updateItem=function(e,p_l,p_g){if(e===this.list_title){var b_s=p_l.dataSource,d_u=p_l.getChildByName("rank"),b_e=p_l.getChildByName("lock"),d_m=p_l.getChildByName("prodec"),d_w=p_l.getChildByName("btn_value");d_w.label=Config.talisman_suits[b_s.configId].name;var f_t=p_l.getChildByName("img_redPoint"),v_z=b_s.canLvUp();f_t.visible=v_z;var d_h=b_s.state==TalismanSuitState.NO_ACTIVE;p_l.getChildByName("noActivyImg").visible=d_h;var r_t=p_l.getChildByName("qulityClip");if(r_t.visible=!d_h,!d_h){var t_n=Config.talisman_suits[b_s.configId];t_n&&(r_t.index=t_n.qulity-1)}d_w.selected=this.list_title.selectedIndex===p_g,1<=b_s.level?(b_e.visible=!1,d_u.visible=!0,d_u.text=b_s.level.toString()+(j_x(2342)),d_m.visible=!1):(b_e.visible=!0,d_u.visible=!1,d_m.visible=!0,d_m.text=2<=b_s.calMeetLvNum()?"":Utils.$("{1}/2",b_s.calMeetLvNum()))}else if(e===this.list_prop){var f_y=p_l.dataSource;p_l.getChildByName("propTxt").text=f_y.desc+"+"+f_y.value}else e===this.list_prop_next&&(f_y=p_l.dataSource,p_l.getChildByName("propTxt").text=f_y.desc,p_l.getChildByName("addTxt").text="+"+b_p.calsulate(f_y.value))},b_s.open=function(e){void 0===e&&(e=null),UIM.open(b_s,null,e,!1,!0,!1)},b_s.prototype.setLvInfo=function(e){var p_l=e.level,p_g=Math.floor(p_l/10),b_s=p_l%10;this.clip_num1.index=b_s,this.clip_num2.visible=0<p_g,0<p_g?(this.clip_num2.index=p_g,this.clip_num1.x=this.clip_num1.parent.width-this.clip_num1.width):this.clip_num1.x=this.clip_num1.parent.width-this.clip_num1.width>>1},b_s.prototype.updateSelectView=function(){var e=this.list_title.selectedItem;if(e){var p_l=e.configId,p_g=Config.talisman_suits[p_l].talisman[0],b_s=Config.talisman_suits[p_l].talisman[1],d_u=TalismanModel.instance.getTalismanById(p_g);this.setItemData(d_u,this.model_attack);var b_e=TalismanModel.instance.getTalismanById(b_s);this.setItemData(b_e,this.model_def);var d_m=e.state;this.txt_notActive.visible=1!=d_m,this.list_prop.visible=!this.txt_notActive.visible;var d_w=0;if(1===e.state){var f_t=e.curLvId;this.list_prop.array=b_p.getPropInfos(Config.talisman_suits[f_t].prop),d_w=b_p.calPropFight(this.list_prop.array)}b_p.getNumSp(NumType.FIGHTING,d_w,this.fightSp,-10);var v_z=e.nextLvId;if(this.txt_max.visible=-1===v_z,this.list_prop_next.visible=!this.txt_max.visible,0<v_z){f_t=e.curLvId;var d_h=b_p.getPropInfos(Config.talisman_suits[v_z].prop);this.list_prop_next.array=d_h}this.btn_up.label=1===e.state?(j_x("371_2342")):(j_x("2335_1796")),this.btn_up.visible=0<v_z,this.txt_upMax.visible=!this.btn_up.visible,this.cosumBox.visible=this.btn_up.visible,this.txt_progress.visible=this.txt_condition.visible=this.btn_up.visible,this.txt_next_con.visible=this.txt_prop_add_next.visible=0<v_z,this.setCosumInfo(e),this.setConditonInfo(e),this.setSpecailPropInfo(e),this.setRedPoint(e),this.setLvInfo(e)}},b_s.prototype.onListSelect=function(e){-1!==e&&this.updateSelectView()},b_s.prototype.stopActiveSuccEffect=function(){this.effect_active_succ&&(this.effect_active_succ.off(Laya.Event.COMPLETE,this,this.stopActiveSuccEffect),this.effect_active_succ.visible=!1,this.effect_active_succ.stop())},b_s.prototype.sortSuit=function(e,p_l){var p_g=e.canLvUp(),b_s=p_l.canLvUp(),d_u=Config.talisman_suits[e.configId],b_e=Config.talisman_suits[p_l.configId];return p_g&&!b_s?-1:!p_g&&b_s?1:e.state==TalismanSuitState.ACTIVED&&p_l.state==TalismanSuitState.ACTIVED?d_u.qulity>b_e.qulity?-1:d_u.qulity==b_e.qulity&&e.level>p_l.level?-1:1:e.state==TalismanSuitState.NO_ACTIVE&&p_l.state==TalismanSuitState.NO_ACTIVE?p_l.calMeetLvNum()==e.calMeetLvNum()?e.configId-p_l.configId:p_l.calMeetLvNum()-e.calMeetLvNum():e.state==TalismanSuitState.ACTIVED&&p_l.state!=TalismanSuitState.ACTIVED?-1:e.state!=TalismanSuitState.ACTIVED&&p_l.state==TalismanSuitState.ACTIVED?1:e.configId-p_l.configId},b_s.prototype.setRedPoint=function(e){Ehzp(e,this)},b_s.prototype.playActiveSuccEffect=function(){this.effect_active_succ&&(this.effect_active_succ.visible=!0,this.effect_active_succ.play(!1),this.effect_active_succ.on(Laya.Event.COMPLETE,this,this.stopActiveSuccEffect))},b_s.prototype.setSpecailPropInfo=function(e){if(1!=e.state)this.txt_cur_con.text="",this.txt_prop_add.text=(j_x("42_1049_206")+j_x("2335_1796"));else{var p_l=e.curLvId,p_g=Config.talisman_suits[p_l];this.txt_cur_con.text=Utils.$(("{1}"+j_x("2342_2335_1796")),e.level),this.txt_prop_add.text=p_g.clientDesc}if(this.txt_next_con.visible){var b_s=e.nextLvId;p_g=Config.talisman_suits[b_s],this.txt_next_con.text=Utils.$(("{1}"+j_x("2342_2335_1796")),e.level+1),this.txt_prop_add_next.text=p_g.clientDesc}},b_s.close=function(){Wmko(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.list_title.selectEnable=!0,e.list_title.selectHandler=Laya.Handler.create(e,e.onListSelect,null,!1),e.list_title.renderHandler=Laya.Handler.create(e,e.updateItem,[e.list_title],!1),e.list_prop.renderHandler=Laya.Handler.create(e,e.updateItem,[e.list_prop],!1),e.list_prop_next.renderHandler=Laya.Handler.create(e,e.updateItem,[e.list_prop_next],!1),e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.effect_active_succ.visible=e.effect_up_succ.visible=!1,e.effect_active_succ.stop(),e.effect_up_succ.stop(),e.checkSystemOpen(!0),e._clipTab=new p_c(e.tab),e}e.TalismanSuitPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.tips.talismanTipsUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Iray(this,Laya)},b_s.prototype.OnDialogClick=function(){},b_s.prototype.onRemove=function(){},b_s.prototype.resetSite=function(e){void 0===e&&(e=null),this.x=Stage.width-this.width>>1,this.y=Stage.height-this.height>>1},b_s.prototype.setContent=function(e,p_l,p_g){void 0===p_g&&(p_g=null);for(var b_s=[],d_u=3;d_u<arguments.length;d_u++)b_s[d_u-3]=arguments[d_u];var b_e=Config.CItem(e);if(this.contentTxt.style.color="#4a728e",this.contentTxt.style.fontSize=24,this.contentTxt.style.wordWrap=!0,this.contentTxt.style.valign="top",this.contentTxt.style.align="center",this.contentTxt.style.leading=15,this.contentTxt.innerHTML=p_l,this._callBack=p_g,this._argArray=b_s,this.itembox.visible=!1,this.contentTxt.visible=!b_e,this.btnbox.y=b_e?491:430,this.contentDiv.visible=!!b_e,this.bgimg.height=b_e?380:335,this.contentDiv.style.color="#4a728e",this.contentDiv.style.fontSize=24,this.contentDiv.style.wordWrap=!0,this.contentDiv.style.valign="top",this.contentDiv.style.align="center",this.contentDiv.style.leading=15,this.contentDiv.innerHTML=p_l,b_e){this.itembox.visible=!0;var d_m=new ModuleItemVO;d_m.id=e,d_m.bind=1,d_m.amount=1,this.itembox.isShowName=!1,this.itembox.setItemData(d_m,ItemBoxDefine.BAG_INFO,!1)}},b_s.prototype.onMouseDown=function(e){switch(e.target.name){case"closeBtn":case"backBtn":b_s.close();break;case"sureBtn":null!=this._callBack&&this._callBack.call(null,this._argArray),this._callBack=null,this._argArray=null,b_s.close()}},b_s.open=function(e,p_l,p_g){void 0===p_g&&(p_g=null);for(var d_u=[],b_e=3;b_e<arguments.length;b_e++)d_u[b_e-3]=arguments[b_e];null==b_s.instance&&(b_s.instance=new b_s),UIM.instance.addToTopLayer(b_s.instance);var d_m=0<e?e:0;b_s.instance.setContent(d_m,p_l,p_g,d_u)},b_s.close=function(){null!=b_s.instance&&UIM.instance.removeTopLayer(b_s.instance)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.TalismanTips=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.talisman.talisman_upgrade_succUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Ypup(this)},b_s.prototype.updateData=function(){var e=this.dataSource;if(e){var p_l=Config.talisman_talisman[e.id];TalismanModel.instance.changeActStar(this.starBox,e.grade),this.showRoleModel(p_l.avatar,p_l.showAct),p_l.waveEffect&&this._roleModel&&this._roleModel.startWave(p_l.waveEffect[0],p_l.waveEffect[1]),this.propTxt1.text=this.propTxt2.text="";var p_g=TalismanModel.instance.getUpgradeConfig(e.id,e.grade-1),b_s=TalismanModel.instance.getUpgradeConfig(e.id,e.grade);p_g&&(this.propTxt1.text=Utils.$(("{1}"+j_x(2342)+"\n{2}"+j_x(2342)),p_g.levelUpper,e.grade-1)),b_s&&(this.propTxt2.text=Utils.$(("{1}"+j_x(2342)+"\n{2}"+j_x(2342)),b_s.levelUpper,b_s.depLvUpper))}},b_s.open=function(e){Mhda(e,UIM,b_s)},b_s.prototype.onRemove=function(){Uebf(this)},b_s.prototype.showRoleModel=function(e,p_l){void 0===p_l&&(p_l="stand"),e&&""!=e&&(this._roleModel||(this._roleModel=new n_k,this.modelContainer.addChild(this._roleModel)),this._roleModel.changeModel(e),this._roleModel.setAction(p_l,0,!0))},b_s.prototype.removeRoleModel=function(){this._roleModel&&(this._roleModel.dispose(),this._roleModel.removeSelf(),this._roleModel=null)},b_s.prototype.updateItem=function(e,p_l){Mszs(e,p_l)},b_s.close=function(){Ueyk(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.TalismanUpgradeSuccPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.talisman.talisman_upUI,__extends(b_s,p_l),b_s.prototype.init=function(){this._clipTab=new p_c(this.tab),this.deploymentList.vScrollBarSkin="",this.deploymentList.scrollBar.elasticDistance=100,this.deploymentList.scrollBar.elasticBackTime=200,this.modelList.hScrollBarSkin="",this.modelList.selectedIndex=1,this.soulBox.mouseEnabled=!0,this.deploymentList.renderHandler=Laya.Handler.create(this,this.updateItem,[this.deploymentList],!1),this.propList.renderHandler=Laya.Handler.create(this,this.updateItem,[this.propList],!1),this.modelList.renderHandler=Laya.Handler.create(this,this.updateModleList,null,!1),this.talisEquipList.renderHandler=Laya.Handler.create(this,this.renderEquipItem,null,!1),this.talisEquipList.selectHandler=Laya.Handler.create(this,this.selectEquipList,null,!1),this.talisEquipList.selectEnable=!0,this.on(Laya.Event.ADDED,this,this.onAdded),this.on(Laya.Event.REMOVED,this,this.onRemove),this.redPoint.visible=this.redPoint_0.visible=this.redPoint_1.visible=this.redPoint_2.visible=!1,this.JumpBlackking.style.fontSize=22,this.JumpBlackking.style.color="#d8dcec",this.JumpBlackking.style.align="center"},b_s.prototype.updateFosterInfo=function(){this.redPoint.visible=this.redPoint_0.visible=!1,this.redPoint.visible=!1;var e=this.dataSource;if(e){var p_l=TalismanModel.instance.canUpLv(e.id),p_g=e.canDeloyCanUp();this.redPoint.visible=p_l,this.redPoint_0.visible=p_l||p_g}},b_s.open=function(e){void 0===e&&(e=null),UIM.open(b_s,["talisman/qihun.atlas"],e,!1)},b_s.prototype.setDeploymentDatas=function(e){Smgr(e,this,TalismanModel,j_x)},b_s.prototype.InitModleList=function(){var e=this.dataSource;Config.talisman_talisman[e.id],this.modelList.array=TalismanModel.instance.getThreeDataByCenterId(e.id);var p_l=this.modelList.array.length,p_g=TalismanModel.instance.getTalismanVos();if(p_g&&p_g.length<2?this.modelList.mouseEnabled=!1:this.modelList.mouseEnabled=!0,3<=p_l)this.modelList.scrollTo(Math.floor(p_l/2));else if(0<p_l)for(var b_s in this.modelList.array)this.modelList.array[b_s].id==e.id&&this.modelList.scrollTo(parseFloat(b_s));else this.modelList.visible=!1},b_s.prototype.PlayReelEffecte=function(e){this.reelEffecte?this.reelEffecte.SetText(this.reelContainer,(j_x("799_869_174")+j_x("1741_1628_371")+"<span color='#c92828'>")+e+("</span>"+j_x(2342))):(this.reelEffecte=new ReelEffecte,this.reelEffecte.InitEffecteDate(this.reelContainer,"res/ui/common/baoji_01.png",(j_x("799_869_174")+j_x("1741_1628_371")+"<span color='#c92828'>")+e+("</span>"+j_x(2342)))),this.reelEffecte.PlayEffecte()},b_s.prototype.selectEquipList=function(e){-1!=e&&p_k.instance.checkSystemOpenByName("TalismanEquipPanel",!0)&&(this.tab.selectedIndex=2,this.talisEquipList.selectedIndex=-1)},b_s.prototype.clickHtml=function(p_l){if(p_l&&""!=p_l){var p_g=p_l.split(":"),d_u=p_g[0];switch(p_g=p_g[1].split(","),d_u){case"openWin":var b_e=parseInt(p_g[0]),d_m=void 0;if(1<p_g.length&&(d_m=JSON.parse(p_g[1])),d_m[0]&&BlackKingModel.instance.Actived(d_m[0])){e.BlackKingCellPanel.close();var d_w=BlackKingModel.instance.getBlackKingById(d_m[0]);if(d_w)return b_s.close(),void e.BlackKingCellPanel.open(d_w)}p_k.instance.checkSystemOpenByName("BlackKingPanel")&&b_s.close(),e.WindowClass.openWin(b_e)}}},b_s.prototype.removeRoleModel=function(){},b_s.prototype.renderEquipItem=function(e,p_l){var p_g=e.getChildByName("quality"),b_s=e.getChildByName("icon"),d_u=e.getChildByName("lock"),b_e=e.getChildByName("star"),d_m=e.dataSource;if(0==e.dataSource)d_u.visible=!0,b_e.visible=p_g.visible=b_s.visible=!1;else if(d_m&&1!=e.dataSource){d_u.visible=!1,b_e.visible=p_g.visible=b_s.visible=!0;var d_w=Config.item_equipment[d_m.id];if(b_s.skin=Resource.ResUrl.getIconUrl(d_w.icon),p_g.index=d_w.quality-1,d_m&&d_m.dynamic&&""!=d_m.dynamic){var f_t=JSON.parse(d_m.dynamic);f_t&&f_t[2]?(b_e.visible=!0,b_e.index=f_t[2].length-1):b_e.visible=!1}else b_e.visible=!1}else b_e.visible=p_g.visible=b_s.visible=!1,d_u.visible=!1},b_s.prototype.playUpLvEffect=function(){this.upLvEft&&(this.upLvEft.visible=!0,this.upLvEft.play(!1),this.upLvEft.on(Laya.Event.COMPLETE,this,this.stopUpLvEffect)),this.playUpPropEffect()},b_s.prototype.updateSkillInfo=function(){this.redPoint_1.visible=!1;var e=this.dataSource;e&&(this.redPoint_1.visible=TalismanModel.instance.canTalismanSkillUpLv(e.id))},b_s.prototype.updatePvSkillItem=function(){var e=Config.talisman_talisman[this.dataSource.id];if(e.skill){var p_l=new x_h(e.id,e.name,this.dataSource.level,this.dataSource.star,PassiveSkillType.TALISMAN);this.pvSkillItem.visible=!0,this.pvSkillItem.updateSkillUI(e.skill[0],PassiveSkillType.TALISMAN,p_l,!0)}else this.pvSkillItem.visible=!1},b_s.prototype.stopUpLvEffect=function(){this.upLvEft&&(this.upLvEft.off(Laya.Event.COMPLETE,this,this.stopUpLvEffect),this.upLvEft.visible=!1,this.upLvEft.stop()),this.stopUpPropEffect()},b_s.prototype.updateTalismandown=function(e){Kqrg(e,this)},b_s.prototype.onTabSelect=function(p_l,p_g){if(-1!==p_l){var b_s=this.dataSource,d_u=Config.talisman_talisman[b_s.id],b_e=d_u.quality-3;this.nameTxt.color=Utils.ItemUtils.getTalismanQualityColor(d_u.quality),this.bgQuaClip.index=b_e<0?0:b_e,this._clickCount=0,this.upBox.visible=0==p_l,this._talismanEquip&&(this._talismanEquip.visible=!1),1===p_l||(2===p_l?p_k.instance.checkSystemOpenByName("TalismanEquipPanel")?(this._talismanEquip||(this._talismanEquip=new e.TalismanEquipPanel,this._talismanEquip.addEventListener(),this.addChildAt(this._talismanEquip,1),this._talismanEquip.x=0,this._talismanEquip.y=56),this._talismanEquip.dataSource=b_s,this._talismanEquip.visible=!0,this._talismanEquip.updateView(!1)):(this.tab.selectedIndex=p_g,b_p.broadcastNotice(Config.funcOpen[10043].openError)):(Config.talisman_talisman[b_s.id],this.updateData(b_s,!0),this.updateEquipList(),this.setDeploymentDatas(b_s.deployments),this.InitModleList()))}},b_s.prototype.updateModleList=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("modelContainer"),d_u=Config.talisman_talisman[p_g.id];this.showRoleModel(d_u.avatar,b_s,d_u.showAct,d_u.ui_scale,d_u.ui_offset)},b_s.prototype.updateTalismanmove=function(e){e.target;var p_l=this.dataSource;if(1==this.talismanIsdown&&this.modelList.visible){var p_g=this.talismanPosition,b_s=0;if(this.modelList.array.length<2)return;if(this.stage.mouseX-p_g<=-10){var d_u=this.modelList.selectedIndex-1;if(2==this.modelList.length&&this.modelList.array[1].id==p_l.id&&d_u<=0)return;this.modelList.scrollTo(this.modelList.selectedIndex-1),b_s=1}else if(10<=this.stage.mouseX-p_g){if(b_s=2,d_u=this.modelList.selectedIndex+1,2==this.modelList.length&&this.modelList.array[0].id==p_l.id&&d_u>=this.modelList.length)return;this.modelList.scrollTo(d_u)}this.preview(b_s),this.talismanPosition=0,this.talismanIsdown=!1}},b_s.prototype.updateDeployData=function(e){void 0===e&&(e=null);var p_l=this.dataSource;this.propList.array=TalismanModel.instance.getLvProps(p_l),Config.talisman_talisman[p_l.id];var p_g=b_p.calPropFight(this.propList.array);b_p.getNumSp(NumType.FIGHTING,p_g,this.fightSp,-10),e&&this.playUpPropEffect(),this.setDeploymentDatas(p_l.deployments),this.updateFosterInfo()},b_s.prototype.updateSpiritInfo=function(){this.redPoint_2.visible=!1;var e=this.dataSource;e&&(this.redPoint_2.visible=TalismanModel.instance.talismanEquipRedPoint(e)||!TalismanModel.instance._isActiveEquip&&100<=e.level);var p_l=this.tab.getChildByName("item2"),p_g=p_l.getChildByName("lock"),b_s=p_k.instance.checkSystemOpenByName("TalismanEquipPanel");this.redPoint_2.visible=!!b_s&&(this.redPoint_2.visible||this.soulRedPoint.visible),p_g.visible=!b_s,p_l.gray=!b_s;var d_u=Config.talisman_talisman[e.id];d_u&&(this.proTypeClip.index=d_u.proType-1)},b_s.prototype.onAdded=function(){this.upBtn.on(Laya.Event.MOUSE_DOWN,this,this.onUpBtnMD),this.soulRedPoint.visible=!1,this._clipTab.on("tabSelect",this,this.onTabSelect),this.on(Laya.Event.CLICK,this,this.onClick),this.icon_fighting.on(Laya.Event.CLICK,this,this.onClick),this.fighting_desc.on(Laya.Event.CLICK,this,this.onClick),this.modelList.on(Laya.Event.MOUSE_UP,this,this.updateTalismanmove),this.modelList.on(Laya.Event.MOUSE_DOWN,this,this.updateTalismandown),this.modelList.on(Laya.Event.MOUSE_OUT,this,this.updateTalismanmove),this.JumpBlackking.on(Laya.Event.LINK,this,this.clickHtml),LED.on(l_r.WALLET_CHANGE,this,this.updateWallet),LED.on(l_r.TALISMAN_INFO_UPDATE,this,this.updateData),LED.on(l_r.TALISMAN_UP_CRIT,this,this.PlayReelEffecte),LED.on(l_r.TALISMAN_UP_UPDATE,this,this.updateData),LED.on(l_r.TALISMAN_DEPLOY_UPDATE,this,this.updateDeployData),LED.on(l_r.SKILL_LIST_UPDATE,this,this.updateSkillInfo),LED.on(l_r.TALISMAN_SPIRIT_UPDATE,this,this.updateSpiritInfo),LED.on(l_r.ITEM_ADD,this,this.onItemUpdate),LED.on(l_r.ITEM_AMOUNT_CHANGE,this,this.onItemUpdate),LED.on(l_r.ITEM_REMOVE,this,this.onItemUpdate),LED.on(l_r.SKILL_INFO_UPDATE,this,this.updateWallet),this.dataSource&&(0==this.tab.selectedIndex?this.onTabSelect(0,0):this.tab.selectedIndex=0),this._talismanEquip&&this._talismanEquip.addEventListener(),this.stopUpLvEffect(),this._clickCount=0,this.updateSpiritInfo(),this.updateSkillInfo(),this.updateEquipList(),this.updatePvSkillItem()},b_s.prototype.onItemUpdate=function(e){if(e&&e.id&&Config.item_petSpirit[e.id])this.updateSpiritInfo();else if(e&&e.id&&0==this.tab.selectedIndex){var p_l=this.dataSource;this.setDeploymentDatas(p_l.deployments)}},b_s.prototype.UpdateHtml=function(e,p_l){var p_g=Config.talisman_talisman[e.id];if(p_g.AffectedID){this.JumpBlackking.visible=!0;var b_s,d_u="";b_s=BlackKingModel.instance.Actived(p_g.AffectedID)?(d_u=(j_x("1300_2335_1796")),"#71de66"):(d_u=(j_x("206_2335_1796")),"#e32828");var b_e=Utils.$("{1}({2})",Config.xianyuan_god[p_g.AffectedID].name,d_u),d_m=Utils.setHref(b_e,Utils.$("openWin:{1},{2}",p_l,JSON.stringify([p_g.AffectedID])),b_s);this.JumpBlackking.innerHTML=d_m+(j_x("1163_223_402")+j_x("613_233"))}else this.JumpBlackking.visible=!1},b_s.prototype.updateItem=function(e,p_l,p_g){if(this.dataSource,e===this.deploymentList)p_l.setItemData(p_l.dataSource);else{var b_s=p_l.dataSource,d_u=p_l.getChildByName("nameTxt"),b_e=p_l.getChildByName("valueTxt"),d_m=d_v.getPropertyType(b_s.propOrdinal);d_u.text=d_m.desc+":",LgcM.ins.heroVo,d_m.isPercent()?b_e.text=Utils.$("{1}%",b_s.value/100):b_e.text=Utils.$("{1}",Math.floor(b_s.value))}},b_s.prototype.updateWallet=function(){var e=this.dataSource,p_l=Config.talisman_talisman[e.id];if(this.costTxt.color="#526673",this.costTitleTxt.changeText((j_x("1661_1502")+":")),this.copperTxt.text=BagModel.instance.getItemCountByItemID(200009).toString(),0<e.level){this.nameTxt.text=p_l.name,this.lvTxt.text=Utils.$("{1}",e.level);var p_g=TalismanModel.instance.getUpgradeConfig(e.id,e.grade),b_s=Config.talisman_uplevel[e.level].consume,d_u="";b_s&&(d_u=Utils.$("{1}",b_s[0][1]),this.upBtn.visible=!0,b_p.getCoin(b_s[0][0])<b_s[0][1]&&(this.costTxt.color=Utils.Color.RED)),p_g?e.level==p_g.levelUpper?(d_u="",this.costClip.visible=!1,this.costTitleTxt.changeText((j_x("371_784_1163")+j_x("1628_2251_15")+j_x("2342_1067_2128")))):(this.costTitleTxt.changeText((j_x("1661_1502")+":")),this.costClip.visible=!0):(d_u="",this.costClip.visible=!1,this.costTitleTxt.changeText(("      "+j_x("1300_1463_2342")))),this.costTxt.changeText(d_u)}else this.upBtn.visible=!1,this.costTitleTxt.changeText(p_l.activeCondDesc),this.costTxt.changeText(""),this.costClip.visible=!1;this.costTxt.x=this.costClip.x+38,this.updateFosterInfo(),this.updateData(e,!0)},b_s.prototype.upBtnClick=function(){0<this._clickCount?LongPushUtil.inst.clearLoopPush():(this._clickCount=this.upCheckBox.selected?10:0,this.sendLvUp(!0))},b_s.prototype.showProp=function(){var p_l=this.dataSource,p_g=[],b_s=[],d_u=[["hpUpper",0],["attack",0],["defense",0],["armorBreak",0]],b_e=Config.talisman_talisman[p_l.id];p_g=b_p.getPropInfos(b_e.clineprop);var d_m=TalismanModel.instance.getUpgradeConfig(p_l.id,p_l.grade);p_g=b_p.addProps(d_m.prop,1,p_g);var d_w=p_l.deployProps||[];p_g=b_p.addProps(d_w,1,p_g),b_s.push(p_g),p_g=b_p.getPropInfos(d_u),p_g=b_p.addProps(p_l.fixedProps,1,p_g),b_s.push(p_g),p_g=b_p.getPropInfos(d_u),p_g=b_p.addProps(b_p.getPctProps(d_w,null,p_l.suitPct),1,p_g),b_s.push(p_g),p_g=b_p.getPropInfos(d_u),b_s.push(b_p.addProps(b_p.getPctProps(d_w,p_l.facilityPcts),1,p_g)),p_g=b_p.getPropInfos(d_u),p_g=b_p.addProps(b_p.getPctProps(d_w,p_l.blackkingPcts),1,p_g),p_g=b_p.addProps(p_l.blackkingProps,1,p_g),b_s.push(p_g),p_g=b_p.getPropInfos(d_u),p_g=b_p.addProps(b_p.getPctProps(d_w,p_l.soulEffs),1,p_g),b_s.push(p_g),e.PropShowPanel.open(b_s,[(j_x("115_1621_223")+j_x(402)+""),(j_x("534_720_223")+j_x(402)+""),(j_x("42_1049_223")+j_x(402)+""),(j_x("630_799_223")+j_x(402)+""),(j_x("189_438_223")+j_x(402)+""),(j_x("2398_1224_223")+j_x(402)+":")])},b_s.prototype.showRoleModel=function(e,p_l,p_g,b_s,d_u){if(void 0===p_g&&(p_g="show"),void 0===b_s&&(b_s=1),void 0===d_u&&(d_u=[0,0]),e&&""!=e&&p_l){var b_e=p_l.getChildByName("roleModel");b_e||((b_e=new n_k).name="roleModel",p_l.addChild(b_e)),b_e.changeModel(e),b_e.pos(d_u[0],d_u[1]),b_e.scale(b_s,b_s),b_e.setAction(p_g,0,!0)}},b_s.prototype.preview=function(e){if(0!=e){var p_l=TalismanModel.instance.getDefaultSort();if(!(this.modelList.array.length<2)){var p_g=this.dataSource;for(var b_s in p_l)if(p_g.id==p_l[b_s].id){var d_u=TalismanModel.instance.getTalismanVobool(p_g.id),b_e=parseInt(b_s);2==e?--b_e<0&&(b_e=p_l.length-1):1==e&&++b_e>=p_l.length&&(b_e=0);var d_m=p_l[b_e.toString()];if(d_m.id==this.dataSource.id)return;if(d_u){if(p_g.id==p_l[p_l.length-1].id&&1==e)return void((d_u=TalismanModel.instance.getTalismanVobool(p_l[0].id))&&LED.event(l_r.TALISMAN_UP_UPDATE,p_l[0]));if(p_g.id==p_l[0].id&&2==e)return void((d_u=TalismanModel.instance.getTalismanVobool(p_l[p_l.length-1].id))&&LED.event(l_r.TALISMAN_UP_UPDATE,p_l[p_l.length-1]));if(d_m)return void((d_u=TalismanModel.instance.getTalismanVobool(d_m.id))&&LED.event(l_r.TALISMAN_UP_UPDATE,d_m))}}}}},b_s.prototype.updateData=function(e,p_l){if(void 0===e&&(e=null),void 0===p_l&&(p_l=!1),e&&this.dataSource!=e)return this.dataSource=e,this.onTabSelect(0,0),this.updateSpiritInfo(),this.updateSkillInfo(),void this.updateEquipList();if(!p_l&&(this.playUpLvEffect(),Resource.SoundManager.instance.playSoundById(6,!1),this._clickCount--,0<this._clickCount))Laya.timer.callLater(this,this.sendLvUp,[!1]);else{e=this.dataSource;var p_g=Config.talisman_talisman[e.id];if(e.level,this.UpdateHtml(e,1229),this.costTxt.color="#526673",this.costTitleTxt.changeText((j_x("1661_1502")+":")),this.copperTxt.text=BagModel.instance.getItemCountByItemID(200009).toString(),0<e.level){this.nameTxt.text=p_g.name,this.lvTxt.text=Utils.$("{1}",e.level);var b_s=TalismanModel.instance.getUpgradeConfig(e.id,e.grade),d_u=Config.talisman_uplevel[e.level].consume,b_e="";d_u&&(b_e=Utils.$("{1}",d_u[0][1]),this.upBtn.visible=!0,b_p.getCoin(d_u[0][0])<d_u[0][1]&&(this.costTxt.color=Utils.Color.RED)),b_s?e.level==b_s.levelUpper?(b_e="",this.upBtn.label=(j_x(371)+"  "+j_x(784)),this.costClip.visible=!1,this.t_full.visible=!1,this.costTitleTxt.changeText((j_x("371_784_1163")+j_x("1628_2251_15")+j_x("2342_1067_2128"))),b_s.consume?(this.t_full.visible=!1,this.upCheckBox.visible=!0,this.upBtn.visible=!0,this.upCostBox.visible=!0):(this.t_full.visible=!0,this.upCheckBox.visible=!1,this.upBtn.visible=!1,this.upCostBox.visible=!1)):(this.costTitleTxt.changeText((j_x("1661_1502")+":")),this.upBtn.label=(j_x(371)+"  "+j_x(2342)),this.upCheckBox.visible=!0,this.t_full.visible=!1,this.costClip.visible=!0):(b_e="",this.costClip.visible=!1,this.costTitleTxt.changeText((j_x("1300_1463_2342")))),this.costTxt.changeText(b_e),this.typeClip.index=p_g.proType-1,TalismanModel.instance.changeActStar(this.starBox,e.grade),this.dataSource=e,this.updateDeployData()}e.level<=0&&(this.nameTxt.text=p_g.name,this.lvTxt.text=Utils.$("{1}",e.level),TalismanModel.instance.getSuitConfigId(e.id),this.upBtn.visible=!1,this.costTitleTxt.changeText(p_g.activeCondDesc),this.costTxt.changeText(""),this.costClip.visible=!1,this.typeClip.index=p_g.proType-1,TalismanModel.instance.changeActStar(this.starBox,e.grade),this.dataSource=e,this.updateDeployData()),this.updateSpiritInfo(),this.updatePvSkillItem(),this.soulRedPoint.visible=TalismanModel.instance.redSoul(e)||!TalismanModel.instance._isActiveEquip&&100<=e.level,this.redPoint_2.visible=this.soulRedPoint.visible||TalismanModel.instance.talismanEquipRedPoint(e)}},b_s.prototype.updateEquipList=function(){var e=[1,1,1,1,1],p_l=1;p_k.instance.checkSystemOpenByName("TalismanEquipPanel")||(p_l=0);for(var p_g=TalismanModel.instance.getTalismanInBagEquips(this.dataSource.id),b_s=0;b_s<e.length;b_s++)e[b_s]=p_g[b_s+1]?p_g[b_s+1]:p_l;this.talisEquipList.array=e},b_s.prototype.onRemove=function(){this.upBtn.off(Laya.Event.MOUSE_DOWN,this,this.onUpBtnMD),this.off(Laya.Event.CLICK,this,this.onClick),this.icon_fighting.off(Laya.Event.CLICK,this,this.onClick),this.fighting_desc.off(Laya.Event.CLICK,this,this.onClick),this.modelList.off(Laya.Event.MOUSE_DOWN,this,this.updateTalismandown),this.modelList.off(Laya.Event.MOUSE_UP,this,this.updateTalismanmove),this.modelList.off(Laya.Event.MOUSE_OUT,this,this.updateTalismanmove),this.JumpBlackking.off(Laya.Event.LINK,this,this.clickHtml),LED.off(l_r.WALLET_CHANGE,this,this.updateWallet),LED.off(l_r.TALISMAN_INFO_UPDATE,this,this.updateData),LED.off(l_r.TALISMAN_UP_CRIT,this,this.PlayReelEffecte),LED.off(l_r.TALISMAN_UP_UPDATE,this,this.updateData),LED.off(l_r.TALISMAN_DEPLOY_UPDATE,this,this.updateDeployData),LED.off(l_r.SKILL_LIST_UPDATE,this,this.updateSkillInfo),LED.off(l_r.TALISMAN_SPIRIT_UPDATE,this,this.updateSpiritInfo),LED.off(l_r.ITEM_ADD,this,this.onItemUpdate),LED.off(l_r.ITEM_AMOUNT_CHANGE,this,this.onItemUpdate),LED.off(l_r.ITEM_REMOVE,this,this.onItemUpdate),LED.off(l_r.SKILL_INFO_UPDATE,this,this.updateWallet),this.tab.selectedIndex=-1,this._talismanEquip&&this._talismanEquip.removeEventListener(),this.removeRoleModel(),this.reelEffecte&&this.reelEffecte.clearRes(),this.stopUpLvEffect(),this._clickCount=0,this.reelEffecte&&(this.reelEffecte.reelEffecteStop(),this.reelEffecte.clearRes())},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"backBtn":b_s.close(),e.TalismanPanel.open();break;case"closeBtn1":b_s.close();break;case"upBtn":this.upBtnClick();break;case"suitTxt":case"resonate_btn":if(!p_k.instance.checkSystemOpen(FuncDefine.tssuit))return void b_p.broadcastNotice(Config.funcOpen[FuncDefine.tssuit].openError);var p_g=this.dataSource;p_g&&e.TalismanSuitPanel.open(p_g),b_s.close(!0);break;case"resonate_btn":p_g=this.dataSource,b_s.close(),e.TalismanPanel.open(1,p_g.id);break;case"helpBtn":e.TalismanHelpPanel.open();break;case"icon_fighting":case"fighting_desc":break;case"retreatBtn":this.preview(1);break;case"beforeBtn":this.preview(2);break;case"checkBtn":this.showProp();break;case"soulBox":p_k.instance.checkSystemOpenByName("TalismanEquipPanel",!0)&&(this.tab.selectedIndex=2,this.talisEquipList.selectedIndex=-1)}},b_s.prototype.onUpBtnMD=function(){var e=this;this.upCheckBox.selected||LongPushUtil.inst.bingLongPushBtn(this,(function(){e.upBtnClick()}))},b_s.prototype.destroy=function(e){Atyv(e,p_l,this)},b_s.prototype.stopUpPropEffect=function(){this.upPropEft&&(this.upPropEft.off(Laya.Event.COMPLETE,this,this.stopUpPropEffect),this.upPropEft.visible=!1,this.upPropEft.stop())},b_s.prototype.playUpPropEffect=function(){this.upPropEft&&(this.upPropEft.visible=!0,this.upPropEft.play(!1),this.upPropEft.on(Laya.Event.COMPLETE,this,this.stopUpPropEffect))},b_s.prototype.sendLvUp=function(p_l){void 0===p_l&&(p_l=!0);var p_g=this.dataSource;if(p_g){var b_s=TalismanModel.instance.getUpgradeConfig(p_g.id,p_g.grade);if(!b_s)return p_l&&b_p.broadcastNotice((j_x("15_2342_1300")+j_x("1117_1067_2128"))),this._clickCount=0,void LongPushUtil.inst.clearLoopPush();if(0==p_g.level)return p_l&&b_p.broadcastNotice((j_x("799_869_206")+j_x("2335_1796"))),this._clickCount=0,void LongPushUtil.inst.clearLoopPush();var d_u=Config.talisman_talisman[p_g.id];if(p_g.level==b_s.levelUpper){if(this._clickCount=0,LongPushUtil.inst.clearLoopPush(),p_g.grade==d_u.maxGrade)return void(p_l&&b_p.broadcastNotice((j_x("1300_1117_1081")+j_x("1375_784_2342"))));e.TalismanUpgradePanel.open(p_g)}else{if(!b_p.checkConsume(Config.talisman_uplevel[p_g.level].consume))return p_l&&(e.TalismanUpgradePanel.close(),r_f.instance.isWindow(Config.talisman_uplevel[p_g.level].consume[0][0])),LongPushUtil.inst.clearLoopPush(),void(this._clickCount=0);TalismanModel.instance.reqTalismanUpLv(p_g.id)}}},b_s.close=function(e){void 0===e&&(e=!1);var p_l=["res/ui/talisman/Clip_fabao_pinzhi.png","res/ui/talisman/Clip_fabao_pinzhi.png","res/ui/talisman/right_pannel.jpg"];0<b_s.clearRes.length&&(p_l=p_l.concat(b_s.clearRes)),UIM.close(b_s,e,p_l)},b_s.clearRes=[],b_s);function b_s(){var e=p_l.call(this)||this;return e.talismanIsdown=!1,e.talismanPosition=0,e.init(),e}e.TalismanUpPanel=p_g;var d_u,b_e=(d_u=ui.window.talisman.deploymentCellUI,__extends(d_m,d_u),d_m.prototype.onAdd=function(e){Ednd(e,this,Laya,LED,l_r)},d_m.prototype.updateData=function(e){if(void 0===e&&(e=null),null!=e){var p_l=this.dataSource;p_l&&p_l.id==e.id&&this.setItemData(e)}},d_m.prototype.onClick=function(p_l){if(this._isChatShow)this.off(Laya.Event.CLICK,this,this.onClick);else if(this.dataSource){var p_g=this.dataSource,b_s=p_g.tId;TalismanModel.instance.getTalismanVosingle(b_s)?p_g&&e.TalismanDeployUpPanel.open(p_g):b_p.broadcastNotice((j_x("799_869_206")+j_x("2335_1796")+","+j_x("814_799_179")+j_x(93)))}},d_m.prototype.onRemove=function(e){Oojd(e,this,Laya,LED,l_r)},d_m.prototype.setItemData=function(e,p_l){void 0===p_l&&(p_l=!1),this._isChatShow=p_l;var p_g=Config.talisman_deployment[e.id];if(this.nameTxt.text=p_g.name,this.lvTxt.text=Utils.$(("{1}"+j_x(2342)),e.level),p_g.icon){var b_s=Resource.ResUrl.getIconUrl(p_g.icon);this.icon=Resource.ResManager.Instance.getImg(b_s,this.icon)}this.typeTxt.text=p_g.typeName,this.propTxt.text=(e.level*p_g.aptitude).toString(),this.dataSource=e,this._isChatShow?this.redPoint.visible=!1:this.redPoint.visible=TalismanModel.instance.canDeployUp(e.tId,e.id)},d_m);function d_m(){var e=d_u.call(this)||this;return e.on(Laya.Event.REMOVED,e,e.onRemove),e.on(Laya.Event.ADDED,e,e.onAdd),e}e.TalismanDeployCell=b_e}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.target.achievementBoxUI,__extends(b_s,p_l),b_s.prototype.setItemData=function(e,p_l,p_g,b_s){void 0===p_g&&(p_g=!1);var d_u=e.dataSource;this._achId=d_u.achId;var b_e=Config.achievement_achievement[d_u.achId],d_m=Math.min(d_u.progress1,b_e.condition[1]);this.progressLab.text="";var d_w=Utils.$("({1}/{2})",b_p.calsulate(d_m),b_p.calsulate(b_e.condition[1]));this.descLab.text=Utils.$("{1} {2}",b_e.name,d_w),this.achievementSp=Resource.ResManager.Instance.getImg(Resource.ResUrl.getIconUrl(b_e.icon),this.achievementSp);var f_t=Config.item_coin[b_e.rewardItem[0][0]],v_z=b_e.rewardItem[0][1];e.getChildByName("finBtn"),f_t&&(this.coinClip1.index=f_t.clipIndex,this.coinNumLab.text=v_z.toString()),d_u.progress1>=b_e.condition[1]?(this.redImg.visible=!0,this.finBtn.visible=!0,this.goBtn.visible=!1):(this.redImg.visible=!1,this.finBtn.visible=!1,this.goBtn.visible=!0),p_g&&b_s<p_l&&this.moveup.play(0,!1),this.finBtn.on(Laya.Event.MOUSE_DOWN,this,this.onClick,[p_l]),this.goBtn.on(Laya.Event.MOUSE_DOWN,this,this.onClick,[p_l])},b_s.prototype.onRemove=function(e){Iogp(e,this,Laya)},b_s.prototype.onClick=function(p_l,p_g){var b_s=p_g.target;if(this.dataSource,this.finBtn.dataSource,b_s==this.finBtn){var d_u=Config.achievement_achievement[this._achId],b_e=Config.achievement_achievement[d_u.next];d_u.next&&null!=d_u.next?b_e&&this.dataSource.progress1<b_e.condition[1]?(this.onisTween(p_l),this.onReceive()):Laya.timer.once(this.click_cd,this,this.delayReq):AchievementModel.instance.reqAchievementFin(this._achId)}else if((d_u=Config.achievement_achievement[this._achId])&&d_u.link&&d_u.link)if(2<d_u.link.length){for(var d_m=[],d_w=2;d_w<d_u.link.length;++d_w)d_m.push(d_u.link[d_w]);var f_t=Config.funcOpen[FuncDefine.dh];if(1221===parseInt(d_u.link[1])&&!p_k.instance.checkSystemOpen(FuncDefine.dh)&&1==d_m[0])return void b_p.broadcastNotice(f_t.openError);if(1309===parseInt(d_u.link[1]))return ActivityModel.instance.firstRechargeVo,void e.RechargePanel.open();e.WindowClass.openWin(parseInt(d_u.link[1]),d_m)}else e.WindowClass.openWin(parseInt(d_u.link[1]))},b_s.prototype.onisTween=function(e){Gdsu(e,LED,l_r)},b_s.prototype.onReceive=function(){Ubng(AchievementModel,this)},b_s.prototype.delayReq=function(){Myrg(this,Laya)},b_s.prototype.onCompeleted=function(){Uakg(this)},b_s);function b_s(){var e=p_l.call(this)||this;return e.click_cd=150,e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.AchievementBox=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.target.activenessCellUI,__extends(b_s,p_l),b_s.prototype.onRemove=function(e){Calh(e,this,Laya,LED,l_r)},b_s.prototype.onClick=function(e){switch(e.target.name){case"goBtn":var p_l=this.dataSource;if(p_l){var p_g=Config.activeness_activeness[p_l.id];if(!p_g.link||0===p_g.link.length)return;for(var b_s in p_g.link)TaskManager.instance.taskMsgTxtLink(p_g.link[b_s])}break;case"gainBtn":if(p_l=this.dataSource){if(1===p_l.reward)return void b_p.broadcastNotice((j_x("1300_1241_1174")+j_x(2111)));this.ani1.play(1,!1),Laya.timer.once(165,this,this.onisTween),Laya.timer.once(280,this,this.onReceive)}}},b_s.prototype.updateItem=function(e,p_l){var p_g=e.dataSource,b_s=e.getChildByName("iconClip"),d_u=e.getChildByName("countTxt");if(b_s.visible=!1,p_g.id<100){b_s.visible=!0;var b_e=Config.item_coin[p_g.id];b_s.index=b_e.clipIndex,d_u.text=p_g.amount.toString()}else{var d_m=Config.CItem(p_g.id);d_u.text=Utils.$("{1}x{2}",d_m.name,p_g.amount)}},b_s.prototype.updateData=function(e){var p_l=this.dataSource;p_l&&e&&p_l.id===e.id&&(this.setData(e),this.dataSource=e)},b_s.prototype.onisTween=function(){Ehem(LED,l_r)},b_s.prototype.setData=function(e,p_l){void 0===p_l&&(p_l=!1);var p_g=Config.activeness_activeness[e.id];this.descLab.text=p_g.name,this.iconSp=Resource.ResManager.Instance.getImg(Resource.ResUrl.getIconUrl(p_g.icon),this.iconSp),this.rewardList.array=b_p.getRewardDatas(p_g.rewardItem),this.proTxt.text=Utils.$("({1}/{2})",b_p.calsulate(e.progress),b_p.calsulate(e.targetCount)),this.gainBtn.visible=e.canGain(),this.goBtn.visible=e.progress<e.targetCount,this.gainImg.visible=1===e.reward,this.redPoint.visible=this.gainBtn.visible,this.pointLab.text="+"+p_g.point,this.taskBox.refresh(),1==p_l&&0==this.gainBtn.visible&&this.ani2.play(1,!1)},b_s.prototype.onReceive=function(){Ycza(this,ActivenessModel)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.REMOVED,e,e.onRemove),e.goBtn.on(Laya.Event.CLICK,e,e.onClick),e.gainBtn.on(Laya.Event.CLICK,e,e.onClick),e.rewardList.renderHandler=Laya.Handler.create(e,e.updateItem,null,!1),LED.on(l_r.ACTIVENESS_SINGLE_UPDATE,e,e.updateData),e}e.ActivenessCell=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.target.activeness_item_showUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(){Mlza(this,Laya)},b_s.prototype.onRemove=function(){Efdh(this,Laya)},b_s.prototype.updateData=function(){var e=Config.activeness_reward[this.dataSource.id];this.sureBtn.disabled=!1,this.sureBtn.label=(j_x(2085)+" "+j_x(4)),this.countTxt.text=e.point.toString(),this.rewardList.array=b_p.getRewardDatas(e.reward),0<this.dataSource.reward&&(this.sureBtn.disabled=!0,this.sureBtn.label=(j_x("1300_1174_2111")))},b_s.prototype.updateItem=function(e,p_l){Yiuc(e,p_l)},b_s.prototype.onClick=function(e){switch(e.target.name){case"closeBtn":case"sureBtn":b_s.close()}},b_s.open=function(e){Mmrt(e,UIM,b_s)},b_s.close=function(){Kqkg(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.rewardList.itemRender=e.ItemBox,p_g.rewardList.renderHandler=Laya.Handler.create(p_g,p_g.updateItem,null,!1),p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g}e.ActivenessRewardPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.target.offlineRewardShowUI,__extends(b_s,p_l),b_s.prototype.show=function(){this.visible=!0,LED.on(l_r.OFFLINE_UPDATE,this,this.updateData),LED.on(l_r.MONTHCARD_BUY_INFO,this,this.updateMonthCardDate),this.on(Laya.Event.CLICK,this,this.onClick),this.updateData(),OfflineModel.reqOnlineExpInfo(),RechargeModel.instance.getMonthCardVo(),this.updateMonthCardDate(),this.openVip.visible=GPlatform.isShowRecharge,this.sureBtn2.on(Laya.Event.CLICK,this,this.onSureBtn2Click)},b_s.prototype.updateBtnAd=function(){var e=LgcM.ins.heroVo.id,p_l=LgcM.ins.getActorTypeByID(e),p_g=LgcM.ins.getActorStdInfoById(e,p_l).createTime,b_s=Math.floor(SyncTime.serverTime/1e3);this.updateBtnADUI1(),GPlatform.isQQMini&&1800<=b_s-p_g&&this.updateBtnADUI2()},b_s.prototype.updateBtnADUI1=function(){Kbmq(this)},b_s.prototype.onSureBtn2Click=function(){var p_l=LgcM.ins.heroVo.createTime||0,p_g=OfflineModel.instance;1800<=Math.floor(SyncTime.serverTime/1e3)-p_l?(Sdk.QQMini.onClose((function(p_l){if(console.log(p_l,p_l.isEnded),p_l.isEnded){var b_s=void 0;p_g.offlineInfo.canGain?(OfflineModel.reqGetOfflineExp(1),b_s=!0):p_g.onlineInfo.canGain&&(OfflineModel.reqGetOnlineExp(1),b_s=!0),b_s&&e.OfflineRewardPanel.close(),b_p.broadcastNotice((j_x("1174_2111_2235")+j_x("83_402_2142")))}else Config.global[3014],b_p.broadcastNotice((j_x("2166_2450_1917")+j_x("2162_821_1719")+j_x("2060_1919_1174")+j_x("2111_2235_83")))})),Sdk.QQMini.rewardedVideoAdShow(QQMiniPlatform.freeAd)):b_p.broadcastNotice((j_x("1787_1274")+"30"+j_x("2224_1394_1273")+j_x("814_821_1719")+j_x("1174_2111")))},b_s.prototype.updateData=function(){this.updateBtnAd();var e=OfflineModel.instance.offlineInfo,p_l=OfflineModel.instance.onlineInfo;if(e){var p_g=OfflineModel.instance.getOneselfCfg(),b_s=OfflineModel.instance.addCardTime();this.limteTimelabel.text=Utils.$(("("+j_x("1081_2307_1874")+j_x("867_531_1976")+"{1}"+j_x("1747_1702_2046")+j_x("2270_1879_1573")+j_x(2038)+")"),p_g.limit/60+b_s);var d_u=e.offLineTime+p_l.onlineTime;d_u=Math.min(d_u,60*p_g.limit),this.timeTxt.text=Utils.formatTimeStr2(d_u),this.expTxt.text=p_l.exp.toString(),this.copperTxt.text=p_l.copper.toString(),this.itemTxt.text=e.itemCount.toString(),this.sureBtn.disabled=!OfflineModel.instance.canGain,this.sureBtn2.disabled=!OfflineModel.instance.canGain}},b_s.prototype.updateBtnADUI2=function(){Cvxi(this)},b_s.prototype.hide=function(){Ayfc(this,LED,l_r,Laya)},b_s.prototype.updateMonthCardDate=function(){var e=RechargeModel.instance.cardInfos[CardType.lifeLongCard],p_l=RechargeModel.instance.cardInfos[CardType.weekcard];e||p_l?(this.t_vip1.text=(e?Config.recharge_monthcard[CardType.monthcard].expAddition/100:0)+(p_l?Config.recharge_monthcard[CardType.weekcard].expAddition/100:0)+"%",this.t_vip2.text=(e?Config.recharge_monthcard[CardType.monthcard].copperAddition/100:0)+(p_l?Config.recharge_monthcard[CardType.weekcard].copperAddition/100:0)+"%",this.t_vip3.text=(e?Config.recharge_monthcard[CardType.monthcard].copperAddition/100:0)+(p_l?Config.recharge_monthcard[CardType.weekcard].copperAddition/100:0)+"%",this.t_vip1.align="center",this.t_vip2.align="center",this.t_vip3.align="center",this.t_novip1.visible=!1,this.t_novip2.visible=!1,this.t_novip3.visible=!1):(this.t_vip1.text=(Config.recharge_monthcard[CardType.monthcard].expAddition+Config.recharge_monthcard[CardType.weekcard].expAddition)/100+("%("+j_x("206_155_1331")+")"),this.t_vip2.text=(Config.recharge_monthcard[CardType.monthcard].copperAddition+Config.recharge_monthcard[CardType.weekcard].copperAddition)/100+("%("+j_x("206_155_1331")+")"),this.t_vip3.text=(Config.recharge_monthcard[CardType.monthcard].copperAddition+Config.recharge_monthcard[CardType.weekcard].copperAddition)/100+("%("+j_x("206_155_1331")+")"),this.t_vip1.align="center",this.t_vip2.align="center",this.t_vip3.align="center",this.t_novip1.visible=!0,this.t_novip2.visible=!0,this.t_novip3.visible=!0)},b_s.prototype.onClick=function(p_l){switch(p_l.target.name){case"sureBtn":OfflineModel.instance.offlineInfo.canGain&&OfflineModel.reqGetOfflineExp(0),OfflineModel.instance.onlineInfo.canGain&&OfflineModel.reqGetOnlineExp(0);break;case"closeBtn":e.OfflineRewardPanel.close();break;case"openVip":e.MonthCardPanel.open();break;case"TitleProp":e.TitleTips.tpye=2,e.TitleTips.open();break;case"b_detail":e.HangTips.open()}},b_s);function b_s(){return p_l.call(this)||this}e.OfflineRewardShowPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.activity.daily_icon_viewUI,__extends(b_s,p_l),b_s.prototype.onAdded=function(e){Avwi(e,this)},b_s.prototype.showGlintEft=function(e){},b_s.prototype.onUpdate=function(e){Czky(e,this)},b_s.prototype.onMouseUp=function(e){this._isMouseDown&&(this._isMouseDown=!1,this._tween&&this._tween.clear(),this._tween=null,this._tween=Laya.Tween.to(this,{j_l:this._oriY},200,null,null,null,!0),this.onCellClick(e))},b_s.prototype.onMouseDown=function(e){this._isMouseDown=!0,this._tween&&this._tween.clear(),this._tween=null,this.y=this._oriY,this._tween=Laya.Tween.to(this,{j_l:this._oriY-15},200,null,null,null,!0)},b_s.prototype.setData=function(e){Cxky(e,LED,l_r,this)},b_s.prototype.onRemove=function(e){Csmm(e,LED,l_r,this)},b_s.prototype.onCellClick=function(p_l){if(this._configVo){var p_g=Config.funcOpen[this._configVo.activityId].openWin;0<p_g&&e.WindowClass.openWin(p_g)}},b_s.prototype.updateRedPoint=function(){Qjlr(this,ActivenessModel,AchievementModel,ResourceBackMode)},b_s.prototype.updateVisible=function(){if(this._configVo){var e=this._configVo.canOpen(),p_l=this.visible;(this.visible=e)&&e!=p_l&&UIM.instance.getMainLetUI().sortRightBox()}},b_s);function b_s(){var e=p_l.call(this)||this;return e.iconClip.on(Laya.Event.CLICK,e,e.onCellClick),e.showGlintEft(!1),e.on(Laya.Event.ADDED,e,e.onAdded),e}e.TargetIcon=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.target.targetUI,__extends(d_u,p_l),d_u.open=function(e){void 0===e&&(e=0),UIM.open(d_u,["bossZS.atlas","achievement.atlas"],e)},d_u.prototype.onExrCellClick=function(p_l,p_g){var b_s=p_g.target;if(b_s&&p_l){var d_u=b_s.getChildByName("redPoint1"),b_e=Config.activeness_reward[p_l.id];if(d_u&&0==d_u.visible&&e.ActivenessRewardPanel.open(p_l),this._curPoint>=b_e.point)return void ActivenessModel.instance.reqExreward(p_l.id)}},d_u.prototype.onAdded=function(){this.on(Laya.Event.CLICK,this,this.onClick),ActivenessModel.instance.reqActivenessList(),LED.on(l_r.ACHIEVEMENT_INFO_UPDATE,this,this.updateView),LED.on(l_r.ACTIVENESS_SINGLE_UPDATE,this,this.updateActivenessInfo),LED.on(l_r.ACTIVENESS_EXR_UPDATE,this,this.updateExrRewardInfo),LED.on(l_r.ACTIVENESS_ISTWEEN_INFO,this,this.onPlayTween),LED.on(l_r.ACTIVENESS_INFO,this,this.updateActivenessInfo),LED.on(l_r.UPDATE_RESTORE,this,this.updateRedPoint),LED.on(l_r.OFFLINE_UPDATE,this,this.updateRedPoint),this.targetTab.selectedIndex=this.dataSource,this.updateActivenessInfo(),this.achievementList.scrollBar.value=1,this.activenessList.scrollBar.value=1,AchievementModel.instance.reqAchievementInfo(),LgcM.ins.heroVo,this.targetTab.items[2].visible=p_k.instance.checkSystemOpen(FuncDefine.ResourceBack),p_k.instance.checkSystemOpen(FuncDefine.ResourceBack)?this.targetTab.items[3].x=3*this.targetTab.items[3].width+3*this.targetTab.space:this.targetTab.items[3].x=2*this.targetTab.items[3].width+2*this.targetTab.space,this.freeBox.visible&&(z_x.reqFreeRecInfo(),this.updateFreeBox(),Laya.timer.loop(1e3,this,this.updateFreeBox))},d_u.prototype.onRemove=function(){Suvu(this,Laya,LED,l_r)},d_u.prototype.updateAchievementItem=function(e,p_l){this._isactween?e.setItemData(e,p_l,!0,this.index):e.setItemData(e,p_l,!1,this.index),p_l!=this.achievementList.repeatY||(this._isactween=!1)},d_u.prototype.ADFfun=function(){Ikrz(b_p,j_x)},d_u.prototype.onTabSelect=function(p_l){-1!==p_l&&(p_c.updateTabClip(this.targetTab),this._storyFbPanel&&(this._storyFbPanel.visible=!1),this.achvBg.visible=this.achivOneKey.visible=this.achievementList.visible=1===p_l,this.AchievementBg.visible=1===p_l,this.activenessBox.visible=0===p_l,0==p_l&&this._resourceBack&&this._resourceBack.parent&&this._resourceBack.parent.removeChild(this._resourceBack),1==p_l&&(AchievementModel.instance.reqAchievementInfo(),this._resourceBack&&this._resourceBack.parent&&this._resourceBack.parent.removeChild(this._resourceBack)),this.updateView(),this.updateActivenessInfo(),3==p_l?(this.offlinePanel.show(),this._resourceBack&&this._resourceBack.parent&&this._resourceBack.parent.removeChild(this._resourceBack)):this.offlinePanel.hide(),2==p_l&&(this._resourceBack||(this._resourceBack=new e.ResourceBack),this.addChildAt(this._resourceBack,2),this._resourceBack.x=0,this._resourceBack.y=0,ResourceBackMode.instance.reqResInfo()))},d_u.close=function(){Mliq(UIM,d_u)},d_u.prototype.onPlayTween=function(e,p_l){return 1==e?(this._istween=!0,this._istween):2==e?(this.index=p_l,this._isactween=!0,this._isactween):void 0},d_u.prototype.ADSfun=function(){Mqyt(z_x)},d_u.prototype.updateExrRewardInfo=function(){Sheh(this,ActivenessModel)},d_u.prototype.onClick=function(e){switch(e.target.name){case"backBtn":case"closeBtn":d_u.close();break;case"achivOneKey":AchievementModel.instance.oneKeyReward();break;case"AdBtn":if(z_x.ins.isCanRecharge(1,!0))if(GPlatform.isQQMini){var p_l=Engine2d.Tools;QQMiniPlatform.instance.playAdShow(QQMiniPlatform.oneMAd,p_l.BindDomain(this.ADSfun,this),p_l.BindDomain(this.ADFfun,this))}else z_x.reqFreeRecharge(1)}},d_u.prototype.updateView=function(){this.achievementList.visible&&(this.achievementList.array=AchievementModel.instance.achievementList.sort(AchievementModel.sortAch),this.updateRedPoint())},d_u.prototype.updateFreeBox=function(){if(this.freeBox.visible){var e=z_x.ins,p_l=e.getCfgById(1),p_g=e.freeMapInfo[1];this.moneyLab.text=p_l.money+(j_x(1263)),this.descLab.text=p_l.desc,this.spaceTime.visible=!1;var b_s=0;if(p_g){b_s=p_g.num;var d_u=p_g.lastTime+p_l.interval-SyncTime.serverTime/1e3;this.spaceTime.visible=0<d_u,0<d_u&&(this.spaceTime.text=Utils.formatTimeStr(d_u))}this.leftTimes.text=b_s+"/"+p_l.limit}},d_u.prototype.updateActivenessInfo=function(){if(this.activenessBox.visible){this.activenessList.array=ActivenessModel.instance.getDatas(),this._curPoint=ActivenessModel.instance.calPoint();var e=ActivenessModel.instance.getExrDatas();this.activenessCountTxt.text=this._curPoint.toString();var p_l=Config.activeness_reward[e[e.length-1].id].point;this.activenessBar.value=this._curPoint/p_l,this.updateExrRewardInfo()}},d_u.prototype.initActiList=function(){var e=z_x.ins,p_l=this.activenessList,p_g=e.isShowRecharge();p_l.height=p_g?661:794,this.freeBox.visible=p_g,p_l.y=p_g?154:21},d_u.prototype.updateActivenessExrItem=function(e,p_l){var p_g=e.dataSource,b_s=Config.activeness_reward[p_g.id];e.getChildByName("countTxt").text=b_s.point.toString();var d_u=ActivenessModel.instance.canExtraReward(p_g.id);e.getChildByName("giftBtn").getChildByName("redPoint1").visible=!!d_u,e.gray=1===p_g.reward,e.on(Laya.Event.CLICK,this,this.onExrCellClick,[p_g]),Laya.Tween.clearTween(e.getChildByName("giftBtn")),d_u&&r_n.instance.shakeEffect(e.getChildByName("giftBtn"),1.2,.1,10)},d_u.prototype.updateActivenessItem=function(e,p_l){if(1==this._istween?e.setData(e.dataSource,!0):e.setData(e.dataSource),p_l==this.activenessList.repeatY)return this._istween=!1,this._istween},d_u.prototype.updateRedPoint=function(){Kxhb(this,ActivenessModel,AchievementModel,ResourceBackMode,OfflineModel)},d_u);function d_u(){var b_s=p_l.call(this)||this;b_s._istween=!1,b_s._isactween=!1,b_s._curPoint=0,b_s.index=b_s.achievementList.repeatY,b_s.on(Laya.Event.ADDED,b_s,b_s.onAdded),b_s.on(Laya.Event.REMOVED,b_s,b_s.onRemove);var d_u=b_s.achievementList;return z_j.setList(d_u,b_s,b_s.updateAchievementItem),z_j.setListScroll(d_u,!0),d_u.itemRender=e.AchievementBox,b_s.achievementList.spaceX=0,b_s.targetTab.selectHandler=p_g.create(b_s,b_s.onTabSelect,null,!1),d_u=b_s.activenessList,b_s.initActiList(),z_j.setListScroll(d_u,!0),d_u.itemRender=e.ActivenessCell,d_u.repeatY=8,d_u.repeatX=1,d_u.spaceY=-4,d_u.array=[],z_j.setList(d_u,b_s,b_s.updateActivenessItem),b_s.activenessProList.renderHandler=p_g.create(b_s,b_s.updateActivenessExrItem,null,!1),b_s._isactween=!1,b_s}e.TargetPanel=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.main.renwuwanchengUI,__extends(b_s,p_l),b_s.open=function(){DungeonModel.instance.isLeavingFb?b_s.isWaiting=!0:UIM.open(b_s,null,null,!1,!1,!1,!1,{container:"top"})},b_s.close=function(){Ksxx(UIM,b_s)},b_s.prototype.onComplete=function(){Azll(this,Laya,b_s)},b_s.prototype.onAdded=function(){Yzyw(this,Laya)},b_s.prototype.onRemoved=function(){Ucbl(this,Laya)},b_s.prototype.play=function(){Utyx(this,Laya)},b_s.isWaiting=!1,b_s);function b_s(){var e=p_l.call(this)||this;return e.clip.visible=!1,e.clip.autoPlay=!1,e.on(Laya.Event.ADDED,e,e.onAdded),e}e.RenWuWanCheng=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.team.TeamBeInviteCellUI,__extends(b_s,p_l),b_s.prototype.setItemData=function(e,p_l){this._renderData=e;var p_g=Config.global[GlobalDefine.team_member_max_num].i_info,b_s=Resource.ResManager.getHeadUrl(e.entryId,e.headIcon);this.headIcon.skin=b_s,this.leaderNameTxt.text=Utils.$((j_x("2413_1066")+"{1}"),e.name),this.teamNumTxt.text=Utils.$((j_x("2413_1869_455")+j_x(2348)+"{1}/{2}"),e.count,p_g),this.fightTxt.text=e.power.toString(),this._fbId=e.fbId;var d_u=e.aims==TeamAimsType.RewardBossAni?Config.fb_xuanshang[this._fbId]:Config.fb_ascent[this._fbId];if(d_u){var b_e=d_u.floor,d_m=Utils.formaNum(b_e);this.stateTxt.text=Utils.$(("{1} "+j_x(573)+"{2}"+j_x(1778)),Config.state_state[d_u.state].desc,d_m)}},b_s.prototype.onClick=function(e){var p_l=e.target;if(p_l){var p_g=p_l.name,b_s=TeamModel.instance;switch(p_g){case"rejectBtn":b_s.reqTeamInviteReply(this._renderData.teamId,0),this.deleteBevite(this._renderData.teamId);break;case"joinBtn":TeamHelp.canJoinTeam(this._renderData.teamId,this._fbId)&&b_s.reqTeamInviteReply(this._renderData.teamId,1)}}},b_s.prototype.onAdded=function(){Qitm(this,Laya)},b_s.prototype.deleteBevite=function(e){Kwlb(e,TeamModel,this,LED,l_r)},b_s.prototype.onRemove=function(){Esfp(this,Laya)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.TeamBeInviteCell=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.team.TeamCellUI,__extends(b_s,p_l),b_s.prototype.setItemData=function(e,p_l){this._teamListVo=e,this.leaderTxt.text=e.leaderName;var p_g=Config.global[GlobalDefine.team_member_max_num].i_info;this.numTxt.text=Utils.$("{1}/{2}",e.count,p_g)},b_s.prototype.onClick=function(e){var p_l=e.target;if(p_l)switch(p_l.name){case"joinBtn":this._teamListVo&&TeamHelp.canJoinTeam(this._teamListVo.teamId)&&TeamModel.instance.reqTeamJoin(this._teamListVo.teamId,this._teamListVo.aims,this._teamListVo.fbId)}},b_s.prototype.onAdded=function(){Mhxz(this,Laya)},b_s.prototype.onRemove=function(){Icbx(this,Laya)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.TeamCell=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.team.TeamInviteCellUI,__extends(b_s,p_l),b_s.prototype.setItemData=function(e,p_l){Ujrg(e,p_l,this,Resource,FriendModel,Config)},b_s.prototype.onClick=function(e){var p_l=e.target;if(p_l)switch(p_l.name){case"inviteBtn":TeamHelp.canInvite(this._renderData.pid,this._renderData.teamId)&&(TeamModel.instance.reqTeamInvite(this._renderData.pid),b_p.broadcastNotice(Utils.$((j_x("571_1802_1068")+j_x("1777_402_2142"))),BroadcastType.ERROR,Utils.Color.NAME_GREEN))}},b_s.prototype.onAdded=function(){Utxu(this,Laya)},b_s.prototype.onRemove=function(){Smvq(this,Laya)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.TeamInviteCell=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.team.TeamMemberCellUI,__extends(b_s,p_l),b_s.prototype.setItemData=function(e,p_l){var p_g=e,b_s=(this._teamMemberVO=p_g).lpid==b_p.playerId;if(0==p_g.pid&&0==p_g.idx)this.noInfoBox.visible=!1,this.inviteBtn.visible=b_s;else{this.noInfoBox.visible=!0,this.inviteBtn.visible=!1;var d_u=0==p_g.online?Utils.$(Utils.setColor(("("+j_x("1016_360")+")"),Utils.Color.RED)):"";this.playerNameTxt.text=p_g.name+d_u,this.stateTxt.text=Config.state_state[p_g.stateLv].desc,this.fightTxt.text=p_g.power.toString(),this.helpIcon.visible=1==p_g.helper,this.leaderIcon.visible=p_g.pid==p_g.lpid,this.kickBtn.visible=b_s&&p_g.pid!=b_p.playerId;var b_e=Resource.ResManager.getHeadUrl(p_g.entryId,p_g.headIcon);this.headIcon.skin=b_e}},b_s.prototype.onClick=function(p_l){var p_g=this,b_s=p_l.target;if(b_s)switch(b_s.name){case"inviteBtn":e.TeamInvitePanel.open(this._teamMemberVO.aims);break;case"kickBtn":this._teamMemberVO&&b_p.confirm(Utils.$((j_x("68_2032_1409")+"{1}"+j_x("1777_1016_2413")+j_x(1869)+""),this._teamMemberVO.name),(function(){TeamModel.instance.reqTeamKick(p_g._teamMemberVO.idx)}));break;case"headIcon":var d_u=this._teamMemberVO.pid;if(d_u==b_p.playerId)return;var b_e=[];b_e.push(Laya.Handler.create(this,this.checkPlayerInfo,[d_u])),b_e.push(Laya.Handler.create(this,this.chatPrivate,[d_u])),b_e.push(Laya.Handler.create(this,this.addFriend,[d_u])),e.PopupMenu.open(this._names,b_e)}},b_s.prototype.addFriend=function(e){this._teamMemberVO.isRobot?b_p.broadcastNotice(Utils.$((j_x("1300_883_1964")+j_x("949_571_1802")+j_x("257_1738_2285")+j_x(1777)))):FriendModel.instance.reqAddFriend(e)},b_s.prototype.onAdded=function(){Yxoa(this,Laya)},b_s.prototype.checkPlayerInfo=function(e){this._teamMemberVO.isRobot?b_p.broadcastNotice(Utils.$((j_x("814_799_5")+j_x("2450_1964_949")+j_x("281_1590")))):n_d.instance.reqViewRoleInfo(e)},b_s.prototype.chatPrivate=function(p_l){this._teamMemberVO.isRobot?b_p.broadcastNotice(Utils.$((j_x("814_799_495")+j_x("1964_949_227")+j_x(153)))):e.ChatPrivatePanel.open(p_l)},b_s.prototype.onRemove=function(){Knjh(this,Laya)},b_s);function b_s(){var e=p_l.call(this)||this;return e._names=[(j_x("5_2450_281")+j_x(1590)),(j_x("227_153")),(j_x("223_803_257")+j_x(1738))],e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.TeamMemberCell=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.team.TeamBeInvitePanelUI,__extends(b_s,p_l),b_s.prototype.updateView=function(){var e=this.dataSource,p_l=TeamModel.instance.getTeamVO(e).beInviteList;this.list.array=p_l},b_s.prototype.onAdded=function(){Sacb(this,Laya,LED,l_r)},b_s.prototype.onItemRender=function(e,p_l){e&&e.setItemData(e.dataSource,p_l)},b_s.open=function(e){Epas(e,UIM,b_s)},b_s.prototype.onRemove=function(){Klrp(this,Laya,LED,l_r)},b_s.prototype.onClick=function(e){var p_l=e.target;if(p_l)switch(p_l.name){case"closeBtn":b_s.close()}},b_s.close=function(){Khoa(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.list.vScrollBarSkin="",p_g.list.scrollBar.elasticDistance=100,p_g.list.scrollBar.elasticBackTime=200,p_g.list.renderHandler=Laya.Handler.create(p_g,p_g.onItemRender,null,!1),p_g.list.itemRender=e.TeamBeInviteCell,p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g}e.TeamBeInvitePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.team.TeamCreatePanelUI,__extends(b_s,p_l),b_s.prototype.updateView=function(e){var p_l=(this._renderData=e).aims,p_g=TeamModel.instance.getTeamVO(p_l);this.teamList.array=p_g.teamList},b_s.prototype.onItemRender=function(e,p_l){e&&e.setItemData(e.dataSource,p_l)},b_s.prototype.onClick=function(e){var p_l=e.target;if(p_l){var p_g=p_l.name,b_s=this._renderData.aims,d_u=this._renderData.fbId;switch(p_g){case"refBtn":this.refRemain(),TeamModel.instance.reqTeamList(b_s,d_u),b_p.broadcastNotice(Utils.$((j_x("896_1787_402")+j_x(2142))),BroadcastType.ERROR,Utils.Color.NAME_GREEN);break;case"createBtn":TeamHelp.canCreateTeam(b_s)&&(TeamModel.instance.reqTeamCreate(b_s,d_u),b_p.broadcastNotice(Utils.$((j_x("1357_1571_2413")+j_x("1869_402_2142"))),BroadcastType.ERROR,Utils.Color.NAME_GREEN))}}},b_s.prototype.onAdded=function(){Sjlq(this,Laya)},b_s.prototype.refRemain=function(){var e=this;Laya.timer.loop(1e3,this,(function(){if(e._curTick--,e._curTick<0)return e._curTick=e.MAX,Laya.timer.clearAll(e),e.refBtn.gray=!1,e.refBtn.mouseEnabled=!0,void(e.refBtn.label=Utils.$((j_x("896_1787"))));e.refBtn.label=Utils.$("( {1} )",e._curTick)})),this.refBtn.gray=!0,this.refBtn.mouseEnabled=!1,this.refBtn.label=Utils.$("( {1} )",this._curTick)},b_s.prototype.onRemove=function(){Kvuj(this,Laya)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.MAX=3,p_g._curTick=p_g.MAX,p_g.teamList.vScrollBarSkin="",p_g.teamList.scrollBar.elasticDistance=100,p_g.teamList.scrollBar.elasticBackTime=200,p_g.teamList.renderHandler=Laya.Handler.create(p_g,p_g.onItemRender,null,!1),p_g.teamList.itemRender=e.TeamCell,p_g.teamList.array=null,p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g}e.TeamCreatePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.team.TeamFunPanelUI,__extends(b_s,p_l),b_s.prototype.updateView=function(e){this._renderData=e,this._aims=e.aims;var p_l=TeamModel.instance.getTeamVO(this._aims);this._myTeamInfo=p_l.teamInfoVo;var p_g,b_s=Config.global[GlobalDefine.team_member_max_num].i_info,d_u=p_l.teamInfoVo.members;if(d_u.length<b_s)for(var b_e=(p_g=d_u.concat()).length;b_e<b_s;b_e++){var d_m=new TeamMemberVO;d_m.aims=this._aims,d_m.lpid=p_l.teamInfoVo.lpid,p_g.push(d_m)}else p_g=d_u;this.list.array=p_g;var d_w=p_l.isLeader;this.leaderBox.visible=d_w,this.memberBox.visible=!d_w,this.checkFullEnterFB();var f_t=p_l.getMemberById(b_p.playerId),v_z=f_t?f_t.helper:0;if(this._aims==TeamAimsType.ASCENT){var d_h=AscentModel.instance.ascentVo,r_t=0;1==v_z?(r_t=(t_n=Config.global[GlobalDefine.ascent_help_count].i_info)-d_h.helpCount,this.remainHelpTxt.text=Utils.$((j_x("721_1808_1111")+j_x("1902_235_2348")+"")),this.tipTxt.text=Utils.$((j_x("2235_83_235")+j_x("2348_1876_1917")+j_x("1163_2020_243")+j_x("721_1808")+""+j_x("1364_68_2462")+j_x("1919_531_1976")+j_x("721_1808_2235")+j_x(83))),this.seekTxt.text=Utils.$("{1}/{2}",r_t,t_n)):(r_t=(f_y=Config.global[GlobalDefine.ascent_seek_count].i_info)-d_h.seekCount,this.remainHelpTxt.text=Utils.$((j_x("1111_1902_100")+j_x("1808_235_2348")+"")),this.tipTxt.text=Utils.$((j_x("582_1896_413")+j_x("764_42_176")+j_x("100_1808_235")+j_x(2348)+""+j_x("1777_1295_1471")+j_x("1365_1876"))),this.seekTxt.text=Utils.$("{1}/{2}",r_t,f_y))}else if(this._aims==TeamAimsType.RareAni)d_h=RareAnimalModel.instance.rareAnimalVo,r_t=0,1==v_z?(r_t=(t_n=Config.global[GlobalDefine.ascent_help_count].i_info)-d_h.helpCount,this.remainHelpTxt.text=Utils.$((j_x("721_1808_1111")+j_x("1902_235_2348")+"")),this.tipTxt.text=Utils.$((j_x("2235_83_235")+j_x("2348_1876_1917")+j_x("1163_2020_243")+j_x("721_1808")+""+j_x("1364_68_2462")+j_x("1919_531_1976")+j_x("721_1808_2235")+j_x(83))),this.seekTxt.text=Utils.$("{1}/{2}",r_t,t_n)):(r_t=(f_y=Config.global[GlobalDefine.ascent_seek_count].i_info)-d_h.seekCount,this.remainHelpTxt.text=Utils.$((j_x("1111_1902_100")+j_x("1808_235_2348")+"")),this.tipTxt.text=Utils.$((j_x("582_1896_413")+j_x("764_42_176")+j_x("100_1808_235")+j_x(2348)+""+j_x("1777_1295_1471")+j_x("1365_1876"))),this.seekTxt.text=Utils.$("{1}/{2}",r_t,f_y));else if(this._aims==TeamAimsType.RewardBossAni){var t_n,f_y;d_h=RewardBossModel.instance.rewardBossVo,r_t=0,1==v_z?(r_t=(t_n=Config.global[GlobalDefine.rewardBoss_help_count].i_info)-d_h.helpCount,this.remainHelpTxt.text=Utils.$((j_x("721_1808_1111")+j_x("1902_235_2348")+"")),this.tipTxt.text=Utils.$((j_x("2235_83_235")+j_x("2348_1876_1917")+j_x("1163_2020_243")+j_x("721_1808")+""+j_x("1364_68_2462")+j_x("1919_531_1976")+j_x("721_1808_2235")+j_x(83))),this.seekTxt.text=Utils.$("{1}/{2}",r_t,t_n)):(r_t=(f_y=Config.global[GlobalDefine.rewardBoss_seek_count].i_info)-d_h.seekCount,this.remainHelpTxt.text=Utils.$((j_x("1111_1902_100")+j_x("1808_235_2348")+"")),this.tipTxt.text=Utils.$((j_x("582_1896_413")+j_x("764_42_176")+j_x("100_1808_235")+j_x(2348)+""+j_x("1777_1295_1471")+j_x("1365_1876"))),this.seekTxt.text=Utils.$("{1}/{2}",r_t,f_y))}},b_s.prototype.onClick=function(p_l){var p_g=p_l.target;if(p_g){var b_s=p_g.name,d_u=TeamModel.instance.getTeamVO(this._aims),b_e=0<d_u.targetFbId?d_u.targetFbId:0;switch(b_s){case"disbandBtn":b_p.confirm(Utils.$((j_x("68_2032_1048")+j_x("114_2413_1869")+"")),(function(){TeamModel.instance.reqTeamDisband()}));break;case"teamCallBtn":e.TeamHelpPanel.open({type:TeamHelpType.TEAM,teamId:this._myTeamInfo.teamId,copyId:b_e,aims:this._aims});break;case"helpCallBtn":if(this._aims==TeamAimsType.ASCENT){if(AscentModel.instance.ascentVo.remainSeekCount<=0)return void b_p.broadcastNotice(Utils.$((j_x("1971_1896_100")+j_x("1808_235_2348"))))}else if(this._aims==TeamAimsType.RareAni){if(RareAnimalModel.instance.rareAnimalVo.remainSeekCount<=0)return void b_p.broadcastNotice(Utils.$((j_x("1971_1896_100")+j_x("1808_235_2348"))))}else if(this._aims==TeamAimsType.RewardBossAni&&RewardBossModel.instance.rewardBossVo.rewardBossRemainSeekCount<=0)return void b_p.broadcastNotice(Utils.$((j_x("1971_1896_100")+j_x("1808_235_2348"))));e.TeamHelpPanel.open({type:TeamHelpType.FRIEND,teamId:this._myTeamInfo.teamId,copyId:b_e,aims:this._aims});break;case"enterBtn":TeamModel.instance.reqEnterFb(b_e,d_u.teamInfoVo.teamId,this._aims==TeamAimsType.RewardBossAni);break;case"exitTeamBtn":b_p.confirm(Utils.$((j_x("68_2032_236")+j_x("203_2413_1869")+"")),(function(){TeamModel.instance.reqTeamLeave()}));break;case"fullCB":this.fullCB.selected?this.checkFullEnterFB():this.resetRemainTime();break;case"autoMatchCB":TeamModel.instance.reqTeamRobot(this.autoMatchCB.selected?1:0)}}},b_s.prototype.resetRemainTime=function(){Wzsr(Laya,this)},b_s.prototype.remainTimeToFB=function(){if(this.remainTimeTxt.visible=!0,this.remainTimeTxt.text=Utils.$(("{1}"+j_x(2081)),this._remainTime),this._remainTime--,this._remainTime<0){this._remainTime=5,this.remainTimeTxt.visible=!1,Laya.timer.clearAll(this);var e=TeamModel.instance.getTeamVO(this._aims);e.teamInfoVo&&TeamModel.instance.reqEnterFb(e.targetFbId,e.teamInfoVo.teamId,this._aims==TeamAimsType.RewardBossAni)}},b_s.prototype.checkFullEnterFB=function(){var e=TeamModel.instance.getTeamVO(this._aims);e.isLeader&&e.isFull&&(this.autoMatchCB.selected&&(this.autoMatchCB.selected=!1,TeamModel.instance.reqTeamRobot(0)),this.fullCB.selected&&!DungeonModel.instance.isInFb&&0<e.targetFbId&&Laya.timer.loop(1e3,this,this.remainTimeToFB))},b_s.prototype.onItemRender=function(e,p_l){e&&e.setItemData(e.dataSource,p_l)},b_s.prototype.onAdded=function(){Kogr(this,Laya)},b_s.prototype.onRemove=function(){Sabt(this,Laya)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g._remainTime=5,p_g.list.vScrollBarSkin="",p_g.list.scrollBar.elasticDistance=100,p_g.list.scrollBar.elasticBackTime=200,p_g.list.renderHandler=Laya.Handler.create(p_g,p_g.onItemRender,null,!1),p_g.list.itemRender=e.TeamMemberCell,p_g.fullCB.selected=!0,p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g}e.TeamFunPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.team.TeamHelpPanelUI,__extends(b_s,p_l),b_s.prototype.updateView=function(){var e=this.dataSource,p_l=(this._helpData=e).type;this._teamName=e.teamName;var p_g=p_l==TeamHelpType.TEAM;if(this.teamHelpBox.visible=p_g,this.friendHelpBox.visible=!p_g,e.aims==TeamAimsType.ASCENT){var b_s=(d_u=Config.global[GlobalDefine.ascent_seek_count].i_info)-AscentModel.instance.ascentVo.seekCount;this.helpTxt.text=Utils.$((j_x("100_1808_235")+j_x(2348)+"{1}/{2}"),b_s,d_u)}else if(e.aims==TeamAimsType.RareAni)b_s=(d_u=Config.global[GlobalDefine.rareAniamal_seek_count].i_info)-RareAnimalModel.instance.rareAnimalVo.seekCount,this.helpTxt.text=Utils.$((j_x("100_1808_235")+j_x(2348)+"{1}/{2}"),b_s,d_u);else if(e.aims==TeamAimsType.RewardBossAni){var d_u;b_s=(d_u=Config.global[GlobalDefine.rewardBoss_seek_count].i_info)-RewardBossModel.instance.rewardBossVo.seekCount,this.helpTxt.text=Utils.$((j_x("100_1808_235")+j_x(2348)+"{1}/{2}"),b_s,d_u),this.teamTitleIcon.visible=p_g,this.helpTitleIcon.visible=!p_g,this.helpTxt.visible=!p_g}else e.aims==TeamAimsType.DoubleArea&&(this.helpTxt.visible=!1)},b_s.prototype.onAdded=function(){Kjrn(this,Laya)},b_s.prototype.onClick=function(p_l){var p_g=p_l.target;if(p_g){var d_u,b_e=p_g.name,d_m=void 0,d_w=this._helpData.type==TeamHelpType.TEAM?0:1;switch(this._helpData&&"ascentFb"==this._helpData.aims?d_m=this._helpData.type==TeamHelpType.TEAM?405:406:this._helpData&&"yishouFb"==this._helpData.aims?d_m=this._helpData.type==TeamHelpType.TEAM?503:504:this._helpData&&"xuanshangFb"==this._helpData.aims?d_m=this._helpData.type==TeamHelpType.TEAM?505:506:this._helpData&&this._helpData.aims==TeamAimsType.DoubleArea&&(d_m=this._helpData.type==TeamHelpType.TEAM?521:506),d_u=this._helpData.aims==TeamAimsType.DoubleArea?[[b_p.playerId,LgcM.ins.heroVo.name],[this._helpData.teamName],[this._helpData.teamId,this._helpData.aims,d_w,b_p.playerId,this._helpData.copyId]]:[[b_p.playerId,LgcM.ins.heroVo.name],[this._helpData.copyId],[this._helpData.teamId,this._helpData.aims,d_w,b_p.playerId,this._helpData.copyId]],b_e){case"closeBtn":b_s.close();break;case"worldChannel":0<this._helpData.copyId&&(this._helpData.aims,TeamAimsType.DoubleArea,n_d.instance.reqChat(ChannelTypeDefine.WORLD,"",d_u,d_m),b_s.close());break;case"guildChannel":0<this._helpData.copyId&&GuildModel.instance.isGuild&&(n_d.instance.reqChat(ChannelTypeDefine.GUILD,"",d_u,d_m),b_s.close());break;case"friendChannel":e.friendStoryHelpPanel.open(this._helpData.copyId,"",d_u,d_m),b_s.close()}}},b_s.open=function(e){Qcaw(e,UIM,b_s)},b_s.prototype.onRemove=function(){Kqur(this,Laya)},b_s.close=function(){Omuq(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e._teamName="",e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.TeamHelpPanel=p_g}(UI=UI||{}),function(e){e[e.TEAM=1]="TEAM",e[e.FRIEND=2]="FRIEND"}(TeamHelpType=TeamHelpType||{}),function(e){var p_l,p_g=(p_l=ui.window.team.TeamInvitePanelUI,__extends(b_s,p_l),b_s.prototype.updateView=function(){Qgwi(TeamModel,this)},b_s.prototype.onAdded=function(){Ocqi(this,TeamModel,Laya,LED,l_r)},b_s.prototype.onItemRender=function(e,p_l){e&&e.setItemData(e.dataSource,p_l)},b_s.prototype.onClick=function(e){var p_l=e.target;if(p_l)switch(p_l.name){case"closeBtn":b_s.close()}},b_s.prototype.onRemove=function(){Odsk(this,Laya,LED,l_r)},b_s.open=function(e){Sxwz(e,UIM,b_s)},b_s.prototype.onInviteList=function(){Mfdi(this)},b_s.close=function(){Iswv(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g.list.vScrollBarSkin="",p_g.list.scrollBar.elasticDistance=100,p_g.list.scrollBar.elasticBackTime=200,p_g.list.renderHandler=Laya.Handler.create(p_g,p_g.onItemRender,null,!1),p_g.list.itemRender=e.TeamInviteCell,p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g}e.TeamInvitePanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.team.TeamPanelUI,__extends(b_s,p_l),b_s.prototype.updateView=function(){var e=this._renderData.aims,p_l=this._renderData.fbId,p_g=TeamModel.instance.getTeamVO(e),b_s=1===TeamModel.instance.checkIsHelper(b_p.playerId,e)&&p_l===p_g.targetFbId;this.rewardLable.text=b_s?Utils.$((j_x("721_1808_2235")+j_x(83))):Utils.$((j_x("1331_413_2235")+j_x(83)));var d_u=Config.fb_dungeon[p_l],b_e=Config.obj_monster[d_u.monster].name;if(this.bossNameTxt.text=b_e,this.bossIcon.skin=Resource.ResUrl.getIconUrl(Config.obj_monster[d_u.monster].icon),this.stateTxt.text=Utils.$("{1}",d_u.name),e==TeamAimsType.ASCENT){var d_m=Config.fb_ascent[p_l],d_w=d_m.state,f_t=d_m.floor,v_z=AscentModel.instance.getAscentStatus(d_w,f_t);this._status=v_z,this.passedBox.visible=v_z==AscentCellStatus.PASS,this.noPassBox.visible=v_z==AscentCellStatus.NO_PASS,this.stateTipBox.visible=v_z==AscentCellStatus.OTHER;var d_h=b_s?d_m.helpReward:d_m.passReward,r_t=b_p.getRewardDatas(d_h);this.itemList.array=r_t,v_z==AscentCellStatus.PASS&&(this.onTime(),Laya.timer.clearAll(this),Laya.timer.loop(1e3,this,this.onTime))}else if(e==TeamAimsType.RareAni){var t_n=Config.fb_yishou[p_l],f_y=(d_w=t_n.state,f_t=t_n.floor,RareAnimalModel.instance.getRareAnimalStatus(d_w,f_t));this._status=f_y,this.passedBox.visible=f_y==AscentCellStatus.PASS,this.noPassBox.visible=f_y==AscentCellStatus.NO_PASS,this.stateTipBox.visible=f_y==AscentCellStatus.OTHER,d_h=b_s?t_n.helpReward:t_n.passReward,r_t=b_p.getRewardDatas(d_h),this.itemList.array=r_t,f_y==AscentCellStatus.PASS&&(this.onTime(),Laya.timer.clearAll(this),Laya.timer.loop(1e3,this,this.onTime))}else if(e==TeamAimsType.RewardBossAni){var p_q=Config.fb_xuanshang[p_l],h_h=(d_w=p_q.state,f_t=p_q.floor,RewardBossModel.instance.getRewardBossStatus(d_w,f_t));this._status=h_h,this.passedBox.visible=h_h==AscentCellStatus.PASS,this.noPassBox.visible=h_h==AscentCellStatus.NO_PASS,this.stateTipBox.visible=h_h==AscentCellStatus.OTHER,d_h=b_s?p_q.helpReward:p_q.passReward,r_t=b_p.getRewardDatas(d_h),this.itemList.array=r_t,h_h==AscentCellStatus.PASS&&(this.onTime(),Laya.timer.clearAll(this),Laya.timer.loop(1e3,this,this.onTime))}this.show()},b_s.prototype.destroy=function(e){Afyw(e,p_l,this)},b_s.prototype.onTime=function(){Oufn(AscentModel,this,Utils)},b_s.open=function(e,p_l){UIM.open(b_s,["team.atlas"],{aims:e,fbId:p_l},!1,!1)},b_s.prototype.onItemRender=function(e,p_l){if(e){var p_g=e;p_g.isShowName=!1,p_g.setItemData(e.dataSource,ItemBoxDefine.MODULE_ITEM,!0)}},b_s.prototype.hideAllBox=function(){Wjgs(this)},b_s.prototype.onTeamListUpdate=function(){this._teamCreatePanel&&this._teamCreatePanel.parent&&this._teamCreatePanel.updateView(this._renderData)},b_s.prototype.onTeamReqList=function(){Wuzh(TeamModel,this)},b_s.prototype.show=function(){var e=this._renderData.aims,p_l=this._renderData.fbId,p_g=TeamModel.instance.getTeamVO(e),b_s=TeamModel.instance.checkIsHelper(b_p.playerId,e),d_u=(1===b_s&&p_g.targetFbId,TeamModel.instance.checkHaveTeam(e));if(1===b_s){if(p_l===p_g.targetFbId&&d_u)return this._teamCreatePanel.parent&&this._teamCreatePanel.removeSelf(),this._teamFunPanel.parent||this.panelBox.addChild(this._teamFunPanel),this._teamFunPanel.updateView(this._renderData),void this.hideAllBox();if(p_l!==p_g.targetFbId&&d_u&&this._status===AscentCellStatus.OPEN)return this._teamCreatePanel.parent&&this._teamCreatePanel.removeSelf(),void this.hideAllBox()}return e==TeamAimsType.ASCENT&&this._status!=AscentCellStatus.OPEN?(this._teamCreatePanel.parent&&this._teamCreatePanel.removeSelf(),void(this._teamFunPanel.parent&&this._teamFunPanel.removeSelf())):e==TeamAimsType.RareAni&&this._status!=AscentCellStatus.OPEN?(this._teamCreatePanel.parent&&this._teamCreatePanel.removeSelf(),void(this._teamFunPanel.parent&&this._teamFunPanel.removeSelf())):e==TeamAimsType.RewardBossAni&&this._status!=AscentCellStatus.OPEN?(this._teamCreatePanel.parent&&this._teamCreatePanel.removeSelf(),void(this._teamFunPanel.parent&&this._teamFunPanel.removeSelf())):void(d_u?(this._teamCreatePanel.parent&&this._teamCreatePanel.removeSelf(),this._teamFunPanel.parent||this.panelBox.addChild(this._teamFunPanel),this._teamFunPanel.updateView(this._renderData),this.hideAllBox()):(this._teamCreatePanel.parent||this.panelBox.addChild(this._teamCreatePanel),this._teamFunPanel.parent&&this._teamFunPanel.removeSelf(),this._teamCreatePanel.updateView(this._renderData)))},b_s.prototype.onRemove=function(){Laya.timer.clearAll(this),this._teamFunPanel.parent&&this._teamFunPanel.resetRemainTime(),this.off(Laya.Event.CLICK,this,this.onClick),LED.off(l_r.TEAM_INFO_UPDATE,this,this.onTeamInfoUpdate),LED.off(l_r.TEAM_REQ_LIST,this,this.onTeamReqList),LED.off(l_r.TEAM_LIST,this,this.onTeamListUpdate),LED.off(l_r.ASCENT_UPDATE,this,this.onTeamInfoUpdate)},b_s.prototype.onTeamInfoUpdate=function(){Qrsw(this,TeamModel)},b_s.prototype.onClick=function(e){var p_l=e.target;if(p_l)switch(p_l.name){case"closeBtn":b_s.close()}},b_s.prototype.onAdded=function(){this._renderData||(this._renderData=new x_a),this._renderData.aims=this.dataSource.aims,this._renderData.fbId=this.dataSource.fbId,this._renderData.aims==TeamAimsType.ASCENT?(AscentModel.instance.reqAscentInfo("team"),this.title.skin="res/ui/team/dengtianzhilu.png"):this._renderData.aims==TeamAimsType.RareAni?(RareAnimalModel.instance.reqRareAnimal("team"),this.title.skin="res/ui/team/qizhenyishou.png"):this._renderData.aims==TeamAimsType.RewardBossAni&&(RewardBossModel.instance.reqRewardBossInfo("team"),this.title.skin="res/ui/rewardBoss/liudaolunhui.png"),this._teamFunPanel.parent&&this._teamFunPanel.resetRemainTime(),this.updateView(),this.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.TEAM_INFO_UPDATE,this,this.onTeamInfoUpdate),LED.on(l_r.TEAM_REQ_LIST,this,this.onTeamReqList),LED.on(l_r.TEAM_LIST,this,this.onTeamListUpdate),LED.on(l_r.ASCENT_UPDATE,this,this.onTeamInfoUpdate),TeamModel.instance.reqTeamInfo()},b_s.close=function(){Ccsx(UIM,b_s)},b_s);function b_s(){var p_g=p_l.call(this)||this;return p_g._teamCreatePanel=new e.TeamCreatePanel,p_g._teamFunPanel=new e.TeamFunPanel,p_g.itemList.vScrollBarSkin="",p_g.itemList.renderHandler=Laya.Handler.create(p_g,p_g.onItemRender,null,!1),p_g.itemList.itemRender=e.ItemBox,p_g.on(Laya.Event.ADDED,p_g,p_g.onAdded),p_g.on(Laya.Event.REMOVED,p_g,p_g.onRemove),p_g}e.TeamPanel=p_g}(UI=UI||{});var x_a=function(){},TeamBeviteVO=function(e){function p_l(){return e.call(this)||this}return __extends(p_l,e),p_l.prototype.clean=function(){Wjad(e,this)},p_l}(TeamBaseVO),TeamMemberVO=function(e){function p_l(){return e.call(this)||this}return __extends(p_l,e),p_l.prototype.clean=function(){Moxu(e,this)},p_l}(TeamBaseVO);!function(e){var p_l,p_g=(p_l=ui.window.TestOtherPanelUI,__extends(b_s,p_l),b_s.prototype.viewInit=function(){this._index=0,this._container=new Laya.Sprite,this.addChild(this._container),this.on(Laya.Event.CLICK,this,this.onClick);for(var e,p_l=[(j_x("543_932_2456")+j_x("1552_889_724")),(j_x("1669_1574_2456")+j_x(1760)),(j_x("1662_1998_832")+j_x("869_2281")),(j_x("832_869_2281")+j_x("804_1077")),(j_x("1702_2460")),(j_x("855_976_2275")+j_x(2261)),(j_x("836_2391_2378")+j_x("214_1761")),(j_x("2249_1943_1443")+j_x(944)+"id"),(j_x("1496_1792")+"common"),(j_x("2353_2069")+"boss")],p_g=0,b_s=0,d_u=0;d_u<p_l.length;d_u++)e=new Button("res/ui/common/Button_common_03.png",p_l[d_u]),this.addChild(e),e.labelSize=22,e.size(146,55),e.stateNum=3,e.name=""+(d_u+1),e.on(Laya.Event.CLICK,this,this.onClickBtn),0!=d_u&&d_u%4==0&&(b_s=0,p_g+=1),e.x=151*b_s+50,e.y=60*p_g+90,b_s++},b_s.prototype.dropTest=function(){var e;DungeonModel.instance.fbId=b_p.mapID,DungeonModel.instance.resetDrop();for(var p_l=JSON.parse('{"id":14,"itemId":109515,"count":1,"bind":1,"ctx":{"px":1008,"py":816,"endPx":1008,"endPy":816,"movingSpeed":0,"degree":0},"belong":[524843],"createTime":1559125069,"fpx":0,"fpy":0,"monsterEntryId":0}'),p_g=0;p_g<20;p_g++)e=new m2c_drop_appear,Utils.updateVo(e,p_l),e.id=this._index,r_a.ins.onDropAppear(e),this._index++;this.closeSelf()},b_s.open=function(){Ypbd(UIM,b_s)},b_s.prototype.closeSelf=function(p_l){void 0===p_l&&(p_l=!0),b_s.close(),p_l&&e.TestPanel.close()},b_s.prototype.onClickBtn=function(p_l){var p_g=p_l.currentTarget;switch(Number(p_g.name)){case 1:var b_s=new m2c_send_broadcast;b_s.channel=2,b_s.msg=(j_x("623_1739")),b_s.strId=0,b_s.time=SyncTime.serverTime/1e3,e.MineRemind.close(),e.MineRemind.open(b_s);break;case 2:GuildModel.instance.isAllEquip=!GuildModel.instance.isAllEquip,LED.event(l_r.GUILD_REPOSITORY),p_g.label=GuildModel.instance.isAllEquip?(j_x("2111_1661_1669")+j_x("1574_2456_1760")):(j_x("1669_1574_2456")+j_x(1760));break;case 3:e.CrossPvpPanel.open();break;case 4:e.CrossPvpAtListPanel.open();case 5:var d_u=new Date(SyncTime.serverTime);console.log((j_x("2153_242_2046")+j_x("1702_2460")),SyncTime.serverTime,d_u.getTime()),console.log((j_x("2153_242_2046")+j_x("1702_2460")),Utils.formatTimeStr3(d_u.getTime()/1e3)),d_u.setHours(0),d_u.setMinutes(0),d_u.setSeconds(0),console.log((j_x("2249_1943_2046")+j_x("1702_2460")),d_u.getTime()),console.log((j_x("2249_1943_2046")+j_x("1702_2460")),Utils.formatTimeStr3(d_u.getTime()/1e3));break;case 6:break;case 7:this.dropTest();break;case 8:GlobalData.expFbId++,GlobalData.chargeLayer=GlobalData.getFbLayer(GlobalData.expFbId),console.log("expFbId",GlobalData.expFbId,GlobalData.chargeLayer);break;case 9:console.log((j_x("1496_1792")+"common")),n_e.clearRes([Resource.ResUrl.UI_ATLAS+"common.atlas"]);break;case 10:e.RewardBossPanel.open()}},b_s.prototype.croodTest=function(){var e;this._container.removeChildren();for(var p_l=0;p_l<16;p_l++){var p_g=Utils.getPos(p_l,3,50,50,30,10);console.log("pos",p_l,p_g.x,p_g.y),(e=new Laya.Text).fontSize=20,e.text=(j_x(573))+(p_l+1)+(j_x(844)),e.x=100+p_g.x,e.y=250+p_g.y,this._container.addChild(e)}},b_s.prototype.onClick=function(e){switch(e.target){case this.btnClose:b_s.close();break;case this.btnNum:var p_l=Number(this.txtInputNum.text),p_g=Utils.getPosNum(p_l);this.txtNum.text=p_g.toString();break;case this.btnRecharge:var d_u=Number(this.txtInputRecharge.text);GPlatform.testRecharge=d_u}},b_s.close=function(){Mbqn(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.viewInit(),e}e.TestOtherPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.testUI,__extends(b_s,p_l),b_s.prototype.onAdd=function(){this.on(Laya.Event.CLICK,this,this.onClick),this.inputTxt.on(Laya.Event.FOCUS,this,this.onInputFocus),this.inputsTxt.on(Laya.Event.FOCUS,this,this.onInputFocusa),this.inputssTxt.on(Laya.Event.FOCUS,this,this.onInputFocusb),this.itemidInput.on(Laya.Event.FOCUS,this,this.onItemidFocus),this.itemnumInput.on(Laya.Event.FOCUS,this,this.onItemnumFocus),this.mailinput.on(Laya.Event.FOCUS,this,this.onMailFocus),this.itemList.renderHandler=Laya.Handler.create(this,this.onUpdateItemInfo,null,!1),this.itemList.selectHandler=Laya.Handler.create(this,this.onSelectItem,null,!1);var e=Config.item_consumeable,p_l=Config.item_material;for(var p_g in this.itemIDArr=[],e){this.itemIDArr.push(e[p_g].id);var b_s=e[p_g].name+"/"+e[p_g].id,d_u=e[p_g].id;this.map[b_s]=d_u}for(var b_e in p_l)this.itemIDArr.push(p_l[b_e].id),b_s=p_l[b_e].name+"/"+p_l[b_e].id,d_u=p_l[b_e].id,this.map[b_s]=d_u;this.itemidInput.on(Laya.Event.KEY_UP,this,this.onKeyDown),this.itemList.vScrollBarSkin="",this.itemList.on(Laya.Event.CLICK,this,this.onClickItemBox),this.sign1.on(Laya.Event.CLICK,this,this.onClickOther),this.sign2.on(Laya.Event.CLICK,this,this.onClickOther),this.itemboxbg.on(Laya.Event.CLICK,this,this.onClickOther),this.otherTestBtn.on(Laya.Event.CLICK,this,this.onClickBtn)},b_s.prototype.onItemnumFocus=function(e){this._defeString===this.itemnumInput.text&&(this.itemnumInput.text="")},b_s.prototype.onUpdateItemInfo=function(e,p_l){e.dataSource&&(e.getChildByName("itemID_name_text").text=e.dataSource.name+":"+e.dataSource.id)},b_s.prototype.onItemidFocus=function(e){this._defdString===this.itemidInput.text&&(this.itemidInput.text="")},b_s.prototype.onClickItemBox=function(){Ygok(this)},b_s.prototype.testItemPosition=function(e){void 0===e&&(e=0),this.listPanel.vScrollBar.value=1010*e},b_s.prototype.onlvInputFocus=function(e){},b_s.prototype.onMailFocus=function(e){this._deffString===this.mailinput.text&&(this.mailinput.text="")},b_s.prototype.onInputFocusb=function(e){this._defbString===this.inputssTxt.text&&(this.inputssTxt.text="")},b_s.prototype.onSelectItem=function(e){var p_l=this.itemList.getCell(e);p_l.dataSource&&(this.itemidInput.text=p_l.dataSource.id)},b_s.prototype.onClickBtn=function(p_l){switch(p_l.currentTarget){case this.otherTestBtn:e.TestOtherPanel.open()}},b_s.prototype.onClick=function(e){var p_l=e.target;if(p_l&&""!=p_l.name)switch(p_l.name){case"closeBtn":b_s.close();break;case"entranceBtn":this.testItemPosition(0);break;case"entrancesBtn":this.testItemPosition(1);break;case"entrancessBtn":this.testItemPosition(2);break;case"entrancesssBtn":this.testItemPosition(4);break;case"weekGoldBth":var p_g="@gm money 1 "+this.inputTxt.text;n_d.instance.reqChat(1,p_g),b_p.broadcastNotice((j_x("2258_2376_402")+j_x(2142))),this.inputTxt.text="";break;case"rechargeBtn":p_g="@gm recharge "+this.inputsTxt.text,n_d.instance.reqChat(1,p_g),b_p.broadcastNotice((j_x("2258_2376_402")+j_x(2142))),this.inputsTxt.text="";break;case"copperBtn":p_g="@gm money 2 "+this.inputssTxt.text,n_d.instance.reqChat(1,p_g),b_p.broadcastNotice((j_x("2258_2376_402")+j_x(2142))),this.inputssTxt.text="";break;case"airBth":p_g="@gm money 1 -"+this.heroVo.gold,n_d.instance.reqChat(1,p_g),Laya.timer.once(1,this,this.airmoney),b_p.broadcastNotice((j_x("1496_1792_1917")+j_x(432)));break;case"upgradeBtn":break;case"addBtn":var d_u="@gm item "+this.itemidInput.text+" "+this.itemnumInput.text;n_d.instance.reqChat(1,d_u);break;case"sendBtn":d_u="@gm mail [["+this.mailinput.text+",1,1]]",n_d.instance.reqChat(1,d_u),this.mailinput.text="";break;case"allfulfillBtn":var b_e=p_p.instance.mainVo;b_e&&Config.task_task[b_e.id].showProgress[0]<30&&Laya.timer.loop(1e3,this,this.gmInfo);break;case"fulfillBtn":d_u="@gm task",n_d.instance.reqChat(1,d_u);break;case"alltalismanBtn":this.talismanVo();break;case"achieveTask":var d_m=Config.task_task,d_w=void 0;for(var f_t in d_m){if(1!==d_m[f_t].type)break;d_w=d_m[f_t].id}var v_z="@gm task "+d_w;n_d.instance.reqChat(1,v_z);break;case"clearBagData":n_d.instance.reqChat(1,"@gm clearbag");break;case"jubaopen":n_d.instance.reqChat(1,"@gm treasure full");break;case"holebtn":n_d.instance.reqChat(1,"@gm office max");break;case"GMbtn":n_d.instance.reqChat(1,"@gm item 130001 1");break;case"advanceGM":n_d.instance.reqChat(1,"@gm item 130002 1")}},b_s.prototype.sendMess_Talisman=function(){if(this._talismanArr&&this._talismanArr.length){var e="@gm item "+this._talismanArr.shift()+" 1";n_d.instance.reqChat(1,e)}else Laya.timer.clear(this,this.sendMess_Talisman)},b_s.prototype.gmInfo=function(){n_d.instance.reqChat(1,"@gm task");var e=p_p.instance.mainVo;125<=Config.task_task[e.id].showProgress[0]&&Laya.timer.clear(this,this.gmInfo)},b_s.prototype.onInputFocusa=function(e){this._defaString===this.inputsTxt.text&&(this.inputsTxt.text="")},b_s.prototype.onRemove=function(){Cuve(this,Laya)},b_s.prototype.talismanVo=function(){var e=Config.item_material;for(var p_l in e)251001<=e[p_l].id&&e[p_l].id<=255014&&this._talismanArr.push(e[p_l].id);Laya.timer.loop(1e3,this,this.sendMess_Talisman)},b_s.prototype.onKeyDown=function(e){if(0!=this.itemIDArr.length){this.validinfoArr=[],this.itemList.array=[];for(var p_l=0;p_l<this.itemIDArr.length;p_l++)-1<String(this.itemIDArr[p_l]).indexOf(this.itemidInput.text)&&this.validinfoArr.push(Config.CItem(this.itemIDArr[p_l]));for(var p_g in this.map)-1<p_g.indexOf(this.itemidInput.text)&&this.validinfoArr.push(Config.CItem(this.map[p_g]));this.itemList.array=this.validinfoArr,this.itemList.refresh(),this.itemList.scrollBar.value=0}},b_s.prototype.onInputFocus=function(e){this._defString===this.inputTxt.text&&(this.inputTxt.text="")},b_s.prototype.airmoney=function(){Gtpj(this,n_d)},b_s.prototype.onClickOther=function(){Sdpt(this)},Object.defineProperty(b_s.prototype,"heroVo",{get:function(){return LgcM.ins.heroVo},enumerable:!0,configurable:!0}),b_s.open=function(){z_j.isLoadJson("window/test",this,this.open)&&UIM.open(b_s,null,null,!1,!1,!0)},b_s.close=function(){Yvmu(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.itemIDArr=[],e.itemNameArr=[],e.map={},e.expNum=0,e._talismanArr=[],e.listPanel.vScrollBarSkin="",e._defString=e.inputTxt.text,e.inputTxt.restrict="0-9",e._defaString=e.inputsTxt.text,e.inputsTxt.restrict="0-9",e._defbString=e.inputssTxt.text,e.inputssTxt.restrict="0-9",e._defeString=e.itemnumInput.text,e.itemnumInput.restrict="0-9",e._deffString=e.mailinput.text,e.mailinput.restrict="0-9",e.on(Laya.Event.ADDED,e,e.onAdd),e.on(Laya.Event.REMOVED,e,e.onRemove),e}e.TestPanel=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.title.titleUI,__extends(b_s,p_l),b_s.open=function(){Ikol(UIM,b_s)},b_s.prototype.sendWear=function(e){var p_l=new c2m_title_wear;p_l.titleId=e,DB.instance.query(c2m_title_wear,p_l)},b_s.prototype.sendActive=function(e){var p_l=new c2m_title_active;p_l.id=e,DB.instance.query(c2m_title_active,p_l)},b_s.prototype.onMouseClick=function(p_l){var p_g,d_u,b_e=p_l.target;switch(b_e.name){case"closeBtn":case"backBtn":b_s.close();break;case"b_open":b_e.parent.parent.dataSource.isOpen=!b_e.parent.parent.dataSource.isOpen,this.freshPanel();break;case"b_wear":p_g=b_e.parent.parent.dataSource.id,(d_u=TitleModel.instance.titleInfo[p_g])&&1==d_u.inuse?this.sendDrop(p_g):this.sendWear(p_g);break;case"b_active":p_g=b_e.parent.parent.dataSource.id,d_u=TitleModel.instance.titleInfo[p_g];var d_m=TitleModel.instance.title_title[p_g];TitleModel.IsStata(d_m,d_u,0)&&this.sendActive(p_g);break;case"t_ClickGo":p_g=b_e.parent.parent.dataSource.id,d_m=TitleModel.instance.title_title[p_g],Laya.Tween.from(b_e,{scaleX:1.2,scaleY:1.2},1e3,Laya.Ease.circIn),d_m.openWin&&e.WindowClass.openWin(d_m.openWin);break;case"b_levelUp":p_g=b_e.parent.parent.dataSource.id,TitleModel.instance.clcikLevelUp(p_g)&&this.playOneEft(b_e)}},b_s.close=function(){Ggqk(UIM,b_s)},b_s.prototype.updateRedPoint=function(){Ersk(this,TitleModel,TitleDefine)},b_s.prototype.onTabSelect=function(e){Gguw(e,this)},b_s.prototype.onUpdate=function(){Akhl(this)},b_s.prototype.onAdded=function(){LED.on(l_r.TITLE_INFO_UPDATE,this,this.onUpdate),this.list.renderHandler=Laya.Handler.create(this,this.onItemRender,null,!1),this._tab.on("tabSelect",this,this.onTabSelect),this.on(Laya.UIEvent.CLICK,this,this.onMouseClick),this.onTabSelect(this.tab.selectedIndex),DB.instance.query(c2m_title_info_req,new c2m_title_info_req)},b_s.prototype.updateFight=function(){var e=0;for(var p_l in TitleModel.instance.titleInfo){var p_g=TitleModel.instance.titleInfo[p_l],b_s=TitleModel.instance.title_title[p_l];if(b_s){var d_u=TitleModel.instance.CountpropPct(b_s),b_e=TitleModel.instance.countProByLv(parseInt(p_l)),d_m=CharacterProperty.getPropertys(b_e),d_w=b_p.calPropFight(d_m)+d_u;p_g&&0<p_g.gain&&(e+=d_w)}}this.c_fight=b_p.getNumSp(NumType.FIGHTING,e,this.c_fight,-10)},b_s.prototype.sortArr=function(e,p_l){var p_g=TitleModel.instance.titleInfo[e.id],b_s=TitleModel.instance.titleInfo[p_l.id],d_u=TitleModel.instance.title_title[e.id],b_e=TitleModel.instance.title_title[p_l.id];return TitleModel.IsStata(b_e,b_s,0)?TitleModel.IsStata(d_u,p_g,0)?e.id-p_l.id:1:TitleModel.IsStata(d_u,p_g,0)?-1:b_s&&1==b_s.inuse?1:p_g&&1==p_g.inuse?-1:b_s&&0==b_s.inuse&&0<b_s.gain?p_g&&0==p_g.inuse&&0<p_g.gain?e.id-p_l.id:1:p_g&&0==p_g.inuse&&0<p_g.gain?-1:e.id-p_l.id},b_s.prototype.onRemoved=function(){LED.off(l_r.TITLE_INFO_UPDATE,this,this.onUpdate),this.list.renderHandler&&this.list.renderHandler.recover(),this.list.renderHandler=null,this.tab.selectedIndex=0,this._tab.off("tabSelect",this,this.onTabSelect),this.off(Laya.UIEvent.CLICK,this,this.onMouseClick)},b_s.prototype.freshPanel=function(){this.panel.removeChildren();var e=[];(e=1==this.tab.selectedIndex?this.datas[TitleDefine.privilegeType]:2==this.tab.selectedIndex?this.datas[TitleDefine.csPrivilegeType]:this.datas[this.tab.selectedIndex+1]).sort(this.sortArr);for(var p_l=0,p_g=0;p_g<e.length;++p_g){var b_s=new b_e;b_s.setData(e[p_g]),b_s.y=p_l,b_s.dataSource.isOpen?p_l=p_l+b_s.height+b_s.lableWidth:p_l+=b_s.height,this.panel.addChild(b_s)}this.panel.vScrollBar.max=p_l},b_s.prototype.onItemRender=function(e,p_l){Ghak(e,p_l)},b_s.prototype.sendDrop=function(e){var p_l=new c2m_title_drop;p_l.titleId=e,DB.instance.query(c2m_title_drop,p_l)},b_s.prototype.playOneEft=function(p_l){var p_g;try{p_g=p_l.parent.getChildByName("iconBox").getChildByName("icon")}catch(p_l){console.log(p_l)}p_g&&(this._effPlayOpts||(this._effPlayOpts={clipUrl:"res/ui/common/Clip_shanguang_eft.png",clipX:3,clipY:2,interval:83}),e.EffectPlayer.playOnce(p_g,"effsClip",this._effPlayOpts,null,{f_u:200,j_l:200}))},b_s);function b_s(){var e=p_l.call(this)||this;for(var p_g in e._effPlayOpts=null,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.tab.selectedIndex=0,e._tab=new p_c(e.tab,!1),e.list.array=null,e.list.scrollBar.elasticDistance=50,e.list.scrollBar.elasticBackTime=200,e.list.itemRender=b_e,e.panel.vScrollBarSkin="",e.panel.vScrollBar.elasticBackTime=200,e.panel.vScrollBar.elasticDistance=50,e.panel.vScrollBar.visible=!1,e.datas={},TitleModel.instance.title_title){var b_s=TitleModel.instance.title_title[p_g];e.datas[b_s.type]||(e.datas[b_s.type]=[]),e.datas[b_s.type].push({id:b_s.id,isOpen:!1})}return e}e.TitlePanel=p_g;var d_u,b_e=(d_u=ui.window.title.title_cellUI,__extends(d_m,d_u),d_m.prototype.setData=function(e){var p_l=(this.dataSource=e).id,p_g=TitleModel.instance.title_title[p_l],b_s=TitleModel.instance.titleInfo[p_l],d_u=this.getChildByName("mainBox"),b_e=this.getChildByName("exBox"),d_m=d_u.getChildByName("i_now"),d_w=d_u.getChildByName("i_mask"),f_t=b_e.getChildByName("i_mask"),v_z=b_e.getChildByName("ex_bg"),d_h=d_u.getChildByName("b_open").getChildByName("clip"),r_t=d_u.getChildByName("b_wear"),t_n=d_u.getChildByName("b_active"),f_y=d_u.getChildByName("t_condition"),p_q=d_u.getChildByName("t_progress"),h_h=d_u.getChildByName("t_time"),n_j=d_u.getChildByName("t_timedesc"),j_l=b_e.getChildByName("t_power"),l_m=d_u.getChildByName("t_ClickGo"),z_m=d_u.getChildByName("lv_maxLabel"),h_b=d_u.getChildByName("lv_Label");if(l_m.underline=!0,l_m.underlineColor=l_m.color,l_m.mouseEnabled=!0,b_e.visible=e.isOpen,d_h.rotation=b_e.visible?0:180,this.height=b_e.visible?d_u.height+b_e.height:d_u.height,l_m.visible=d_w.visible=f_t.visible=TitleModel.IsStata(p_g,b_s,3),t_n.visible=TitleModel.IsStata(p_g,b_s,0),t_n.labelSize=26,t_n.labelColors="#804a00",r_t.visible=b_s&&0<b_s.gain,p_g.lvup){h_b.visible=!1;var t_i=TitleModel.instance.title_titleLevel[p_l].lvLimit,n_f=void 0;TitleModel.instance.titleInfo[p_l]&&(n_f=TitleModel.instance.titleInfo[p_l].level),n_f=n_f||1,this.b_levelUp.visible=b_s&&0<b_s.gain&&1==p_g.lvup&&n_f<t_i,h_b.visible=b_s&&0<b_s.gain&&1==p_g.lvup,z_m.visible=b_s&&0<b_s.gain&&1==p_g.lvup&&t_i<=n_f,h_b.text="Lv "+n_f}else z_m.visible=!1,this.b_levelUp.visible=!1,h_b.visible=!1,t_n.y-=20,r_t.y-=20;this.icon.skin=Resource.ResUrl.getIconUrl(p_g.icon),d_m.visible=b_s&&1==b_s.inuse;var t_s=b_s&&1==b_s.inuse?"#444675":"#804a00";r_t.labelColors=t_s,r_t.labelSize=26,r_t.label=b_s&&1==b_s.inuse?(j_x("249_2379")):(j_x("2407_1086")),r_t.skin=b_s&&1==b_s.inuse?"res/ui/common/Button_common_01.png":"res/ui/common/Button_common_02.png",f_y.text=p_g.condition_show,p_q.text=1==p_g.isShowProgress?Utils.$("({1}/{2})",b_s?b_s.progress:0,p_g.condition?p_g.condition[0][1]:0):"",b_s&&(h_h.text=0<b_s.remaining?Utils.$(("{1}"+j_x(2308)),Math.ceil(b_s.remaining/86400)):(j_x("1063_1518")));var v_n=TitleModel.instance.countProByLv(p_l),b_o=CharacterProperty.getPropertys(v_n),b_x=TitleModel.instance.CountpropPct(p_g),v_s=b_p.calPropFight(b_o)+b_x;j_l.text="+"+v_s+(b_s&&0<b_s.gain?("("+j_x("1300_2335_1796")+")"):"");for(var r_c=TitleModel.instance.getAddPros(p_l),b_n=0,v_p=0;v_p<12;++v_p){var d_d=b_e.getChildByName("t_proname"+v_p),h_q=b_e.getChildByName("t_provalue"+v_p);if(v_p<r_c.length){var x_f=r_c[v_p];d_d.text=x_f[0],h_q.text="+"+x_f[1],d_d.visible=!0,h_q.visible=!0,h_q.x=24*x_f[0].length+d_d.x,b_n++}else 8<v_p&&(4==p_g.type||5==p_g.type)?(d_d.visible=!0,b_n++):(d_d.text="",d_d.visible=!1,h_q&&(h_q.text="",h_q.visible=!1))}f_t.height=44+46*Math.ceil(b_n/2),v_z.height=f_t.height,this.lableWidth=f_t.height-b_e.height,h_h.visible=n_j.visible=b_s&&0<b_s.gain,this.rpimg.visible=TitleModel.IsStata(p_g,b_s,0),this.levelUp_red.visible=TitleModel.instance.canLevelUp(p_l)},d_m);function d_m(){return d_u.call(this)||this}}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.title.title_tipsUI,__extends(b_s,p_l),b_s.open=function(){Msjo(UIM,b_s)},b_s.prototype.onRemoved=function(){Kpom(this,Laya)},b_s.prototype.onMouseClick=function(e){switch(e.target.name){case"Btn_close":b_s.close()}},b_s.close=function(){Srne(UIM,b_s)},b_s.prototype.onAdded=function(){Iveh(this,Laya)},b_s.prototype.UpdataView=function(){var e=TitleModel.instance.getActivedTitles(b_s.tpye);e.length<=0?(this.TitleNull.text=(j_x("1749_1327_711")+j_x("206_531_1976")+j_x("30_782_2101")+j_x("1274_223_402")+j_x("389_613_233")),this.TitleNull.visible=!0):this.TitleNull.visible=!1,this.Scroll.removeChildren();for(var p_l=0,p_g=0;p_g<e.length;++p_g){var d_u=new b_e;d_u.setData(e[p_g]),d_u.y=p_l,p_l+=d_u.height,this.Scroll.addChild(d_u)}this.Scroll.vScrollBar.max=p_l},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemoved),e.Scroll.vScrollBarSkin="",e.Scroll.vScrollBar.elasticBackTime=200,e.Scroll.vScrollBar.elasticDistance=50,e.Scroll.vScrollBar.visible=!1,e}e.TitleTips=p_g;var d_u,b_e=(d_u=ui.window.title.title_tipcellUI,__extends(d_m,d_u),d_m.prototype.setData=function(e){for(var p_l=this.getChildByName("box"),p_g=p_l.getChildByName("t_effect1"),b_s=p_l.getChildByName("t_name"),d_u=TitleModel.instance.getAddPros(e),b_e="",d_m=0;d_m<d_u.length;d_m++){var d_w=d_u[d_m];b_e+=d_w[0]+"+"+d_w[1]+"\n"}b_s.text="["+Config.title_title[e].name+"]",p_g.text=b_e,this.height=25*d_u.length},d_m);function d_m(){return d_u.call(this)||this}}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.Wing.wingAniComponentUI,__extends(b_s,p_l),b_s.prototype.clearRes=function(){this._roleModel&&this._roleModel.clearRes()},b_s.prototype.updateUI=function(e){if(0!=e){var p_l=LgcM.ins.heroVo,p_g=Resource.ResManager.getDefaultPlayerAvatar(e,p_l.entryId);this._roleModel.changeModel(p_g),this._roleModel.setAction("show",0,!0,100)}else this.clearRes()},b_s);function b_s(){var e=p_l.call(this)||this;return null==e._roleModel&&(e._roleModel=new n_k,e.wingSp.addChild(e._roleModel)),e}e.WingAniComponent=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fashion.fashionItemUI,__extends(b_s,p_l),b_s.prototype.updateUI=function(e){var p_l=FashionModel.instance.getFashionVo(e.id),p_g=(Config.item_material[e.id],new ModuleItemVO);LgcM.ins.heroVo,p_g.id=e.id,p_g.amount=0,this.item.name=e.name,this.item.isShowName=!0,this.item.setItemData(p_g,ItemBoxDefine.MODULE_ITEM);var b_s=p_l?p_l.getGrade():1;FashionModel.instance.getFashionUpgradeCnf(e.id,b_s),FashionModel.instance.isMaxGrade(e.id,b_s),this.redpoint.visible=FashionModel.instance.IsRedPoint(e.id),p_l?(this.hasEquipImg.visible=p_l.getInuse()==FashionUseStatus.isuse,this.item.nameTxt.color="#2c65ba"):(this.hasEquipImg.visible=!1,this.item.nameTxt.color="#ef2b2b"),this.item.setGray(null==p_l)},b_s);function b_s(){var e=p_l.call(this)||this;return e.item.mouseEnabled=!1,e}e.WingItem=p_g}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.fashion.fashionProCellUI,__extends(b_s,p_l),b_s.prototype.updateUI=function(e){var p_l=this.dataSource,p_g=p_l[0],b_s=p_l[1],d_u=this.getPropCnf(p_g).showName;this.baseLab.text=d_u+":"+b_p.calsulate(p_l[1]),this.baseLab.color="#6b6b6b";var b_e,d_m=1,d_w=FashionModel.instance.getFashionVo(e.id);if(d_w){if(d_m=d_w.getGrade(),FashionModel.instance.isMaxGrade(e.id,d_m))this.addLab.text="",this.addImg.visible=!1;else{this.addImg.visible=!0,b_e=d_m+1;var f_t=FashionModel.instance.getFashionUpgradeCnf(e.id,b_e),v_z=this.getNextUpgradePropValue(f_t,p_g)-b_s;this.addLab.text="+"+b_p.calsulate(v_z)}this.baseLab.color="#4a728e"}else this.addLab.text="",this.addImg.visible=!1;this.hbox.refresh()},b_s.prototype.getNextUpgradePropValue=function(e,p_l){for(var p_g=0,b_s=e.prop;p_g<b_s.length;p_g++){var d_u=b_s[p_g];if(d_u[0]==p_l)return d_u[1]}},b_s.prototype.getPropCnf=function(e){return Oxpq(e,Config)},b_s);function b_s(){return p_l.call(this)||this}e.WingProCell=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.Wing.wingViewUI,__extends(d_u,p_l),d_u.prototype.onAdded=function(){Czvs(this,Laya,LED,l_r,FashionModel)},d_u.prototype.onRemove=function(){Slpf(this,Laya,LED,l_r)},d_u.prototype.updateRoleModel2=function(e,p_l){Onfq(e,p_l,Resource,this)},d_u.prototype.onFashionActivity=function(e){FashionModel.instance.reqFashionList(),this.upLvEft.isPlaying&&this.stopUpLvEffect(),this.playUpLvEffect()},d_u.prototype.playUpLvEffect=function(){Wrup(this,Laya)},d_u.prototype.updatePowerUI=function(e,p_l){var p_g=FashionModel.instance.getFashionUpgradeCnf(e.id,p_l),b_s=b_p.calPropFight(FashionModel.instance.getFashionPropertys(p_g.prop));b_p.getNumSp(NumType.FIGHTING,b_s,this.powerSp,-9)},d_u.prototype.onRightClick=function(){this.fashionList.startIndex+4<this.fashionList.length-4?this.fashionList.scrollTo(this.fashionList.startIndex+4):this.fashionList.scrollTo(this.fashionList.length-4)},d_u.prototype.updatePropList=function(e,p_l){Uwrp(e,p_l,this)},d_u.prototype.stopUpLvEffect=function(){Woqb(this,Laya)},d_u.prototype.onCloseClick=function(){Eddt(d_u)},d_u.prototype.updateFashionListUI=function(){Akzj(FashionModel,FashionType,this)},d_u.prototype.onLeftClick=function(){0<this.fashionList.startIndex-4?this.fashionList.scrollTo(this.fashionList.startIndex-4):this.fashionList.scrollTo(0)},d_u.prototype.updateUI=function(){if(this.updateFashionListUI(),null==this.fashionList.selectedIndex||-1==this.fashionList.selectedIndex){var e=LgcM.ins.heroVo;this.fashionList.selectedIndex=0==e.fashionWing?0:this._wingIndex,this.fashionList.scrollTo(this.fashionList.selectedIndex)}else{var p_l=this.fashionList.selectedIndex;this.fashionList.selectedIndex=-1,this.fashionList.selectedIndex=p_l}this.onFashionListScroll()},d_u.prototype.updatePvSkillItem=function(){var e=this.fashionList.selectedItem;if(e.skill){var p_l,p_g=FashionModel.instance.getFashionVo(e.id);p_l=p_g?p_g.getGrade():0;var b_s=new x_h(e.id,e.name,p_l,0,PassiveSkillType.FASHION);this.pvSkillItem.visible=!0,this.pvSkillItem.updateSkillUI(e.skill[0],PassiveSkillType.FASHION,b_s,!0)}else this.pvSkillItem.visible=!1},d_u.prototype.onFashionListScroll=function(){if(this.rightImg.visible=this.fashionList.scrollBar.value<this.fashionList.scrollBar.max,this.leftImg.visible=0<this.fashionList.scrollBar.value,this.nextRed.visible=this.preRed.visible=!1,0<this.fashionList.startIndex)for(var e=0;e<this.fashionList.startIndex;++e){var p_l=this.fashionList.getItem(e);if(FashionModel.instance.IsRedPoint(p_l.id)){this.preRed.visible=!0;break}}if(this.fashionList.startIndex+4<this.fashionList.length)for(e=this.fashionList.startIndex+4;e<this.fashionList.length;++e)if(p_l=this.fashionList.getItem(e),FashionModel.instance.IsRedPoint(p_l.id)){this.nextRed.visible=!0;break}},d_u.prototype.updateUI2=function(){Cpws(FashionModel)},d_u.prototype.onRenderList=function(e,p_l){var p_g=e.getChildByName("wingItem"),b_s=e.dataSource,d_u=LgcM.ins.heroVo;b_s.id==d_u.fashionWing&&(this._wingIndex=p_l),p_g.updateUI(b_s)},d_u.prototype.updateActivityBtnUI=function(e,p_l){if(this.MaxGradeLab.visible=!1,null==p_l){this.notActivity.visible=!0,this.isActivity.visible=!1,this.activityBtn.label=(j_x("206_2335_1796")),this.activityBtn.disabled=!0,this._activityType=0,this.requirementLab.text=e.desc;var p_g="";switch(this.processLab.color="#c92828",e.activityType){case FashinonActivityType.TaskFashion:break;case FashinonActivityType.Activity:BagModel.instance.getItemCountByItemID(e.active[1][0][0],BagTypeDefine.BAG_TYPE_ITEM)>=e.active[1][0][1]&&(this.activityBtn.label=(j_x(2335)+" "+j_x(1796)),this.activityBtn.disabled=!1);var b_s=Config.CItem(e.active[1][0][0]),d_u=BagModel.instance.getItemCountByItemID(e.active[1][0][0],BagTypeDefine.BAG_TYPE_ITEM);p_g=b_s.name+d_u+"/"+e.active[1][0][1],d_u>=e.active[1][0][1]&&(this.processLab.color="#00802e");break;case FashinonActivityType.AffinityDensity:FashionModel.instance.GetQinMiProgress(e.id)>=e.active[1]&&(this.activityBtn.label=(j_x(2335)+" "+j_x(1796)),this.activityBtn.disabled=!1);var b_e=FashionModel.instance.GetQinMiProgress(e.id);p_g=b_e+"/"+e.active[1],b_e>=e.active[1]&&(this.processLab.color="#00802e")}this.processLab.text=p_g;var d_m=(this.width-this.titleLab.width-this.requirementLab.width)/2;this.notActivity.x=d_m,d_m=(this.width-this.processLab.width)/2-d_m,this.processLab.x=d_m}else{this.notActivity.visible=!1,this.isActivity.visible=!0,this.activityBtn.disabled=!1,p_l.getInuse()==FashionUseStatus.isuse?(this._activityType=2,this.activityBtn.label=(j_x("249_2379"))):(this._activityType=1,this.activityBtn.label=(j_x("2407_1067")));var d_w=void 0,f_t=void 0,v_z=void(b_s=void 0),d_h=p_l?p_l.getGrade():1,r_t=FashionModel.instance.isMaxGrade(e.id,d_h);if(r_t?(this.isActivity.visible=!1,this.MaxGradeLab.visible=!0):(d_w=(v_z=FashionModel.instance.getFashionUpgradeCnf(e.id,d_h+1)).consume[0][0],f_t=v_z.consume[0][1],b_s=Config.CItem(d_w)),d_u=BagModel.instance.getItemCountByItemID(d_w,BagTypeDefine.BAG_TYPE_ITEM),this.cdtLab2.color="#c92828",b_s){var t_n=p_l&&!r_t?b_s.name+d_u+"/"+f_t:e.desc;this.cdtLab2.text=t_n,f_t<=d_u&&(this.cdtLab2.color="#00802e")}else this.cdtLab2.text=""}},d_u.prototype.updateNameBoxUI=function(e){Cxeg(e,this,b_p,NumType,Resource)},d_u.prototype.updateRemoveUI=function(){this._roleModel&&this._roleModel.clearRes(),this._roleModel2&&this._roleModel2.clearRes(),this.fashionList.selectedIndex=-1,this.fashionList.scrollTo(0)},d_u.prototype.onActivityClick=function(){var e=this.fashionList.selectedItem;0===this._activityType?FashionModel.instance.reqActivityFashion(e.id):1===this._activityType?(FashionModel.instance.reqUseFashion(e.id,1),b_p.broadcastNotice((j_x("2407_1086_402")+j_x(2142)),1,"#75ea1a")):2===this._activityType&&(FashionModel.instance.reqUseFashion(e.id,0),b_p.broadcastNotice((j_x("249_2379_402")+j_x(2142)),1,"#75ea1a"))},d_u.prototype.onSelectList=function(e){if(-1!=e){var p_l=this.fashionList.selectedItem,p_g=LgcM.ins.heroVo,b_s=FashionModel.instance.getFashionVo(p_l.id),d_u=b_s?b_s.getGrade():1;this._roleModel.changRoleSkin(p_g,!1,!0,p_g.fashionWeapon,p_g.fashionClothes);var b_e=FashionModel.instance.getFashionUpgradeCnf(p_l.id,d_u);this.updateRoleModel2(p_l,p_g),this.updateNameBoxUI(d_u),this.updatePvSkillItem(),this.updateActivityBtnUI(p_l,b_s),this.updatePowerUI(p_l,d_u),this.propList.array=b_e.prop}},d_u.open=function(){Ckqr(UIM,d_u)},d_u.prototype.onUpBtn=function(){var e=this.fashionList.selectedItem,p_l=FashionModel.instance.getFashionVo(e.id),p_g=p_l?p_l.getGrade():1;FashionModel.instance.canGrade(e.id,p_g)&&FashionModel.instance.reqUpgradeFashion(e.id)},d_u.close=function(){Gjvx(UIM,d_u)},d_u);function d_u(){var e=p_l.call(this)||this;return e._activityType=0,e._wingIndex=-1,e.on(Laya.Event.ADDED,e,e.onAdded),e.on(Laya.Event.REMOVED,e,e.onRemove),e.fashionList.array=null,e.fashionList.hScrollBarSkin="",e.fashionList.renderHandler=p_g.create(e,e.onRenderList,null,!1),e.fashionList.selectHandler=p_g.create(e,e.onSelectList,null,!1),e.propList.array=null,e.propList.renderHandler=p_g.create(e,e.updatePropList,null,!1),null==e._roleModel&&(e._roleModel=new n_k,e.wingSp.addChild(e._roleModel)),null==e._roleModel2&&(e._roleModel2=new n_k,e.wingSp2.addChild(e._roleModel2)),e}e.WingView=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.xinyue.XinYueGiftUI,__extends(b_s,p_l),b_s.prototype.onAdd=function(){Sdjj(this,Laya,LED,l_r)},b_s.prototype.init=function(){Cgey(Config,GlobalDefine,this,b_p,Laya)},b_s.open=function(){Wiwc(UIM,b_s)},b_s.prototype.onRemove=function(){Woxj(this,Laya,LED,l_r)},b_s.prototype.onClick=function(e){switch(e.target){case this.btn_banner:Sdk.Wanba.openUrl("http://xinyue.qq.com/act/a20181130xyh5game/index.html");break;case this.btn_gift:1!=ShareMgr.ins._xinyueGiftStatus&&ShareMgr.ins.reqXinyueGift();break;case this.btn_close:case this.btn_back:b_s.close()}},b_s.prototype.rewardListRender=function(e,p_l){Eyay(e,p_l)},b_s.prototype.updateData=function(){var e=1==ShareMgr.ins._xinyueGiftStatus;this.btn_gift.label=e?(j_x("1300_1174_2111")):(j_x("1190_282_1174")+j_x(2111)),this.xinyueRed.visible=!e,z_j.setGray(this.btn_gift,e)},b_s.close=function(){Kkqa(UIM,b_s)},b_s);function b_s(){var e=p_l.call(this)||this;return e.on(Laya.Event.ADDED,e,e.onAdd),e.on(Laya.Event.REMOVED,e,e.onRemove),e.init(),e}e.XinYueGiftUI=p_g}(UI=UI||{}),function(e){var p_l,p_g=Laya.Handler,b_s=(p_l=ui.window.zuhe.zuheAdvertisingUI,__extends(d_u,p_l),d_u.open=function(e){Ipnv(e,UIM,d_u)},d_u.prototype.onSureBtnClick2=function(){console.log((j_x("821_1719_1174")+j_x(2111)));var e=this.dataSource[2],p_l=this.dataSource[1];Sdk.QQMini.onClose((function(p_g){if(console.log(p_g,p_g.isEnded),p_g.isEnded){var b_s=new c2w_gsaAct_zuhe_getReward;b_s.id=e,b_s.watchVideos=1,DB.instance.query(c2w_gsaAct_zuhe_getReward,b_s),d_u.close(),b_p.broadcastNotice((j_x("1174_2111_2235")+j_x("83_402_2142")))}else b_p.broadcastNotice((j_x("2166_2450_1917")+j_x("2162_821_1719")+j_x("2060_1919_1174")+j_x("2111_2235_83")));LED.event(l_r.GET_ZUHE_AWARD,p_l)})),Sdk.QQMini.rewardedVideoAdShow(QQMiniPlatform.freeAd)},d_u.prototype.updateADUI=function(){var e=Config.activity_zuhe_zuheAct[this.dataSource[2]];this.contentText.text=e.conditionClient;var p_l=e.multiple;this.sureBtn2.label="   "+p_l+(j_x("1785_1174_2111"));var p_g=[];for(var b_s in this.dataSource[0])this.dataSource[0][b_s]&&p_g.push(this.dataSource[0][b_s]);this.itemList.array=p_g;var d_u=4<=this.itemList.array.length?4:this.itemList.array.length,b_e=d_u-1;this.itemList.x=(this.width-(102*d_u+b_e*this.itemList.spaceX))/2},d_u.prototype.onRemove=function(){},d_u.close=function(){Erxb(UIM,d_u)},d_u.prototype.onAdded=function(){Ilcj(this)},d_u.prototype.onSureBtnClick=function(){console.log((j_x("1141_420_1174")+j_x(2111))),LED.event(l_r.GET_ZUHE_AWARD,this.dataSource[1]);var e=new c2w_gsaAct_zuhe_getReward;e.id=this.dataSource[2],e.watchVideos=0,DB.instance.query(c2w_gsaAct_zuhe_getReward,e),d_u.close()},d_u.prototype.onItemList=function(e,p_l){Eznm(e,p_l,this)},d_u);function d_u(){var b_s=p_l.call(this)||this;return b_s.on(Laya.Event.ADDED,b_s,b_s.onAdded),b_s.on(Laya.Event.REMOVED,b_s,b_s.onRemove),b_s.itemList.selectEnable=!0,b_s.itemList.hScrollBarSkin="",b_s.itemList.itemRender=e.ItemBox,b_s.itemList.renderHandler=p_g.create(b_s,b_s.onItemList,null,!1),b_s.sureBtn.on(Laya.Event.CLICK,b_s,b_s.onSureBtnClick),b_s.sureBtn2.on(Laya.Event.CLICK,b_s,b_s.onSureBtnClick2),b_s}e.ZuHeAdvertising=b_s}(UI=UI||{}),function(e){var p_l,p_g=(p_l=ui.window.zuhe.zuheMainUI,__extends(b_s,p_l),b_s.open=function(e){(e=e||ActivityModel.instance.getActivityConfigVoByType(ActivityTypeDefine.GS_zuhe))?UIM.open(b_s,["activity.atlas"],e,!0,!1,!0,!1):b_p.broadcastNotice((j_x("1796_1878_206")+j_x("155_1186")))},b_s.prototype.onActListScroll=function(){if(this.b_next.visible=this.actList.scrollBar.value<this.actList.scrollBar.max,this.b_pre.visible=0<this.actList.scrollBar.value,this.rp_next.visible=this.rp_pre.visible=!1,0<this.actList.startIndex)for(var e=0;e<this.actList.startIndex;++e){var p_l=this.actList.array[e].elems||[];for(var p_g in p_l)if(0===p_l[p_g].status&&p_l[p_g].progress>=Config.activity_zuhe_zuheAct[p_l[p_g].id].condition[1]){this.rp_pre.visible=!0;break}}if(this.actList.startIndex+4<this.actList.length)for(e=this.actList.startIndex+4;e<this.actList.length;++e)for(var p_g in p_l=this.actList.array[e].elems||[])if(0===p_l[p_g].status&&p_l[p_g].progress>=Config.activity_zuhe_zuheAct[p_l[p_g].id].condition[1]){this.rp_next.visible=!0;break}},b_s.prototype.onClick=function(p_l){var p_g=p_l.target;switch(p_g.name){case"backBtn":case"closeBtn":b_s.close();break;case"b_go":p_g.dataSource.jump&&e.WindowClass.openWin(p_g.dataSource.jump);break;case"b_pre":case"i_pre":0<this.actList.startIndex-4?this.actList.scrollTo(this.actList.startIndex-4):this.actList.scrollTo(0);break;case"b_next":case"i_next":this.actList.startIndex+4<this.actList.length-4?this.actList.scrollTo(this.actList.startIndex+4):this.actList.scrollTo(this.actList.length-4)}},b_s.prototype.onRemoved=function(){this.actList.renderHandler&&this.actList.renderHandler.recover(),this.actList.renderHandler=null,this.actList.selectHandler&&this.actList.selectHandler.recover(),this.actList.selectHandler=null,this.itemList.renderHandler&&this.itemList.renderHandler.recover(),this.itemList.renderHandler=null,this.on(Laya.Event.ADDED,this,this.onAdded),this.off(Laya.Event.REMOVED,this,this.onRemoved),this.off(Laya.Event.CLICK,this,this.onClick),LED.off(l_r.ACTIVITY_ZUHE_UPDATE,this,this.updateView),LED.off(l_r.GET_ZUHE_AWARD,this,this.onGetAward),LED.event(l_r.DELAYED_GET_AWARD,!1),this.actList.scrollBar.off(Laya.Event.CHANGE,this,this.onActListScroll),Laya.timer.clear(this,this.updateSulTime)},b_s.prototype.onItemListRender=function(e,p_l){if(e){var p_g=e.dataSource;this.isTween?e.update(p_g,p_l,!0,this.isPlayAniIndex):e.update(p_g,p_l,!1,this.itemList.repeatY),p_l!=this.itemList.repeatY||(this.isTween=!1)}},b_s.prototype.updateView=function(){this.dataSource.subVo[0];var e=ZuHeModel.instance.info.list||[],p_l=[];for(var p_g in e)e[p_g].endTime>SyncTime.serverTime/1e3&&p_l.push(e[p_g]);this.actList.array=p_l.sort((function(e,p_l){var p_g=Config.activity_zuhe_zuheType[e.type],b_s=Config.activity_zuhe_zuheType[p_l.type];return p_g.tabPrio-b_s.tabPrio})),0<p_l.length&&(this.actList.selectedIndex<0||this.actList.selectedIndex>=p_l.length)&&(this.actList.selectedIndex=0),this.onActListSelect(this.actList.selectedIndex);var b_s=this.actList.selectedItem;this.itemList.array=b_s.elems.sort(this.sortList)},b_s.close=function(){Wpax(UIM,b_s)},b_s.prototype.updateOnlineTime=function(e){Alri(e,ZuHeModel,this,Utils,Laya)},b_s.prototype.onGetAward=function(e){Qtmg(e,this)},b_s.prototype.updateSulTime=function(e){0<e?(this.t_time.text=Utils.formatTimeStr(e),Laya.timer.once(1e3,this,this.updateSulTime,[e-1],!0)):(this.t_time.text="00:00:00",Laya.timer.clear(this,this.updateSulTime))},b_s.prototype.onAdded=function(){this.actList.renderHandler=Laya.Handler.create(this,this.onActListRender,null,!1),this.actList.selectHandler=Laya.Handler.create(this,this.onActListSelect,null,!1),this.itemList.renderHandler=Laya.Handler.create(this,this.onItemListRender,null,!1),this.off(Laya.Event.ADDED,this,this.onAdded),this.on(Laya.Event.REMOVED,this,this.onRemoved),this.on(Laya.Event.CLICK,this,this.onClick),LED.on(l_r.ACTIVITY_ZUHE_UPDATE,this,this.updateView),LED.on(l_r.GET_ZUHE_AWARD,this,this.onGetAward),LED.event(l_r.DELAYED_GET_AWARD,!0),this.actList.scrollBar.on(Laya.Event.CHANGE,this,this.onActListScroll);var e=this.dataSource;if(e&&e.subVo){var p_l=e.subVo[0];ActivityModel.reqActivityRecord(p_l.type),this.itemList.scrollBar.elasticBackTime=500,this.itemList.scrollBar.elasticDistance=200}else b_s.close()},b_s.prototype.onActListSelect=function(e){this.itemList.scrollBar.value=1;var p_l=this.actList.selectedItem;if(p_l){var p_g=Config.activity_zuhe_zuheType[p_l.type];if(p_g){var b_s="res/ui/"+p_g.advBg;this.i_activity.skin=b_s,this.itemList.array=p_l.elems.sort(this.sortList);var d_u=p_l.endTime-Math.floor(SyncTime.serverTime/1e3);if(Laya.timer.clear(this,this.updateSulTime),this.updateSulTime(d_u),this.addTimeBox.visible=24===p_l.type,Laya.timer.clear(this,this.updateOnlineTime),this.addTimeBox.visible){var b_e=ZuHeModel.instance.info.todayOnlineTime||0;this.updateOnlineTime(b_e)}}}},b_s.prototype.onActListRender=function(e,p_l){if(e){var p_g=e.dataSource,b_s=p_g.type,d_u=Config.activity_zuhe_zuheType[b_s],b_e=e.getChildByName("iconSp"),d_m=d_u.icon?Resource.ResUrl.getIconUrl(d_u.icon):"res/ui/activity/Button_zuhe_01.png";b_e=Resource.ResManager.Instance.getImg(d_m,b_e,100,100);var d_w=e.getChildByName("btn");Resource.ResManager.Instance.getImg(d_m,d_w,100,100),b_e.visible=!1,e.getChildByName("t_name").text=d_u.name;var f_t=e.getChildByName("nameSp");f_t=Resource.ResManager.Instance.getImg(Resource.ResUrl.getIconUrl(d_u.artName),f_t,125,40);var v_z=e.getChildByName("rp"),d_h=!1,r_t=p_g.elems||[];for(var t_n in r_t)if(0===r_t[t_n].status&&r_t[t_n].progress>=Config.activity_zuhe_zuheAct[r_t[t_n].id].condition[1]){d_h=!0;break}v_z.visible=d_h,this.onActListScroll()}},b_s.prototype.sortList=function(e,p_l){if(1===e.status&&0===p_l.status)return 1;if(0===e.status&&1===p_l.status)return-1;if(0===e.status&&0===p_l.status){if(e.progress>=Config.activity_zuhe_zuheAct[e.id].condition[1]&&p_l.progress<Config.activity_zuhe_zuheAct[p_l.id].condition[1])return-1;if(e.progress<Config.activity_zuhe_zuheAct[e.id].condition[1]&&p_l.progress>=Config.activity_zuhe_zuheAct[p_l.id].condition[1])return 1}return e.id-p_l.id},b_s);function b_s(){var e=p_l.call(this)||this;return e.isPlayAniIndex=e.itemList.repeatY,e.isTween=!1,e.on(Laya.Event.ADDED,e,e.onAdded),e.itemList.itemRender=b_e,e}e.ZuHePanel=p_g;var d_u,b_e=(d_u=ui.window.zuhe.zuhe_cellUI,__extends(d_m,d_u),d_m.prototype.onRender=function(e,p_l){if(e){var p_g=e.getChildByName("itemBox");p_g.isShowName=!1,p_g.isShowNum=!0,p_g.setItemData(e.dataSource)}},d_m.prototype.update=function(e,p_l,p_g,b_s){void 0===p_g&&(p_g=!1);for(var d_u=Config.activity_zuhe_zuheAct[e.id],b_e=b_p.getRewardDatas(d_u.reward);b_e.length<4;)b_e.push(null);this.list.array=b_e,this.list.scrollBar.max=125*this.list.array.length-this.list.width,this.list.scrollBar.max<0&&(this.list.scrollBar.max=0),this.list.scrollTo(0),this.b_get.visible=this.b_go.visible=this.i_got.visible=!1,this.t_desc.text=d_u.conditionClient,this.t_count.text=""+e.progress+"/"+d_u.condition[1]+"";var d_m=e.progress/d_u.condition[1];this.p_bar.value=d_m,this.t_bar.text=(100*d_m).toFixed(0)+"%","stateLevel"==d_u.condition[0]&&(e.progress<d_u.condition[1]?(this.t_count.text="0/1",this.p_bar.value=0,this.t_bar.text="0%"):(this.t_count.text="1/1",this.p_bar.value=1,this.t_bar.text="100%")),this.t_count.visible=!1,this.hBox.refresh(),this.hBox.width=this.t_desc.width+this.t_count.width,this.i_got.visible=1==e.status,this.b_get.visible=e.progress>=d_u.condition[1]&&0==e.status,this.b_get.dataSource={id:e.id},this.b_go.visible=e.progress<d_u.condition[1]&&0==e.status,this.b_go.dataSource={jump:d_u.jump},p_g&&b_s<p_l&&this.ani1.play(0,!1),this.b_get.on(Laya.Event.CLICK,this,this.onClick,[p_l,e.id])},d_m.prototype.onClick=function(p_l,p_g){var b_s=Config.activity_zuhe_zuheAct[p_g];if(GPlatform.isQQMini&&1<b_s.multiple)e.ZuHeAdvertising.open([this.list.array,p_l,p_g]);else{LED.event(l_r.GET_ZUHE_AWARD,p_l);var d_u=new c2w_gsaAct_zuhe_getReward;d_u.id=p_g,d_u.watchVideos=0,DB.instance.query(c2w_gsaAct_zuhe_getReward,d_u),this.ani2.play(0,!1)}},d_m);function d_m(){var e=d_u.call(this)||this;return e.list.renderHandler=Laya.Handler.create(e,e.onRender,null,!1),e}}(UI=UI||{}),new GameMini}});
